(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function a(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function La(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var c2={exports:{}},_p={},d2={exports:{}},Un={};var i6;function VB(){if(i6)return Un;i6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),u=Symbol.for("react.lazy"),f=Symbol.iterator;function p(W){return W===null||typeof W!="object"?null:(W=f&&W[f]||W["@@iterator"],typeof W=="function"?W:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,v={};function g(W,O,q){this.props=W,this.context=O,this.refs=v,this.updater=q||m}g.prototype.isReactComponent={},g.prototype.setState=function(W,O){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,O,"setState")},g.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function w(){}w.prototype=g.prototype;function y(W,O,q){this.props=W,this.context=O,this.refs=v,this.updater=q||m}var j=y.prototype=new w;j.constructor=y,b(j,g.prototype),j.isPureReactComponent=!0;var N=Array.isArray,S=Object.prototype.hasOwnProperty,E={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function P(W,O,q){var G,U={},K=null,ae=null;if(O!=null)for(G in O.ref!==void 0&&(ae=O.ref),O.key!==void 0&&(K=""+O.key),O)S.call(O,G)&&!A.hasOwnProperty(G)&&(U[G]=O[G]);var me=arguments.length-2;if(me===1)U.children=q;else if(1<me){for(var se=Array(me),le=0;le<me;le++)se[le]=arguments[le+2];U.children=se}if(W&&W.defaultProps)for(G in me=W.defaultProps,me)U[G]===void 0&&(U[G]=me[G]);return{$$typeof:e,type:W,key:K,ref:ae,props:U,_owner:E.current}}function I(W,O){return{$$typeof:e,type:W.type,key:O,ref:W.ref,props:W.props,_owner:W._owner}}function B(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function T(W){var O={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(q){return O[q]})}var _=/\/+/g;function R(W,O){return typeof W=="object"&&W!==null&&W.key!=null?T(""+W.key):O.toString(36)}function z(W,O,q,G,U){var K=typeof W;(K==="undefined"||K==="boolean")&&(W=null);var ae=!1;if(W===null)ae=!0;else switch(K){case"string":case"number":ae=!0;break;case"object":switch(W.$$typeof){case e:case t:ae=!0}}if(ae)return ae=W,U=U(ae),W=G===""?"."+R(ae,0):G,N(U)?(q="",W!=null&&(q=W.replace(_,"$&/")+"/"),z(U,O,q,"",function(le){return le})):U!=null&&(B(U)&&(U=I(U,q+(!U.key||ae&&ae.key===U.key?"":(""+U.key).replace(_,"$&/")+"/")+W)),O.push(U)),1;if(ae=0,G=G===""?".":G+":",N(W))for(var me=0;me<W.length;me++){K=W[me];var se=G+R(K,me);ae+=z(K,O,q,se,U)}else if(se=p(W),typeof se=="function")for(W=se.call(W),me=0;!(K=W.next()).done;)K=K.value,se=G+R(K,me++),ae+=z(K,O,q,se,U);else if(K==="object")throw O=String(W),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return ae}function H(W,O,q){if(W==null)return W;var G=[],U=0;return z(W,G,"","",function(K){return O.call(q,K,U++)}),G}function Y(W){if(W._status===-1){var O=W._result;O=O(),O.then(function(q){(W._status===0||W._status===-1)&&(W._status=1,W._result=q)},function(q){(W._status===0||W._status===-1)&&(W._status=2,W._result=q)}),W._status===-1&&(W._status=0,W._result=O)}if(W._status===1)return W._result.default;throw W._result}var J={current:null},re={transition:null},X={ReactCurrentDispatcher:J,ReactCurrentBatchConfig:re,ReactCurrentOwner:E};function te(){throw Error("act(...) is not supported in production builds of React.")}return Un.Children={map:H,forEach:function(W,O,q){H(W,function(){O.apply(this,arguments)},q)},count:function(W){var O=0;return H(W,function(){O++}),O},toArray:function(W){return H(W,function(O){return O})||[]},only:function(W){if(!B(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Un.Component=g,Un.Fragment=r,Un.Profiler=s,Un.PureComponent=y,Un.StrictMode=a,Un.Suspense=c,Un.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=X,Un.act=te,Un.cloneElement=function(W,O,q){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var G=b({},W.props),U=W.key,K=W.ref,ae=W._owner;if(O!=null){if(O.ref!==void 0&&(K=O.ref,ae=E.current),O.key!==void 0&&(U=""+O.key),W.type&&W.type.defaultProps)var me=W.type.defaultProps;for(se in O)S.call(O,se)&&!A.hasOwnProperty(se)&&(G[se]=O[se]===void 0&&me!==void 0?me[se]:O[se])}var se=arguments.length-2;if(se===1)G.children=q;else if(1<se){me=Array(se);for(var le=0;le<se;le++)me[le]=arguments[le+2];G.children=me}return{$$typeof:e,type:W.type,key:U,ref:K,props:G,_owner:ae}},Un.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:i,_context:W},W.Consumer=W},Un.createElement=P,Un.createFactory=function(W){var O=P.bind(null,W);return O.type=W,O},Un.createRef=function(){return{current:null}},Un.forwardRef=function(W){return{$$typeof:l,render:W}},Un.isValidElement=B,Un.lazy=function(W){return{$$typeof:u,_payload:{_status:-1,_result:W},_init:Y}},Un.memo=function(W,O){return{$$typeof:d,type:W,compare:O===void 0?null:O}},Un.startTransition=function(W){var O=re.transition;re.transition={};try{W()}finally{re.transition=O}},Un.unstable_act=te,Un.useCallback=function(W,O){return J.current.useCallback(W,O)},Un.useContext=function(W){return J.current.useContext(W)},Un.useDebugValue=function(){},Un.useDeferredValue=function(W){return J.current.useDeferredValue(W)},Un.useEffect=function(W,O){return J.current.useEffect(W,O)},Un.useId=function(){return J.current.useId()},Un.useImperativeHandle=function(W,O,q){return J.current.useImperativeHandle(W,O,q)},Un.useInsertionEffect=function(W,O){return J.current.useInsertionEffect(W,O)},Un.useLayoutEffect=function(W,O){return J.current.useLayoutEffect(W,O)},Un.useMemo=function(W,O){return J.current.useMemo(W,O)},Un.useReducer=function(W,O,q){return J.current.useReducer(W,O,q)},Un.useRef=function(W){return J.current.useRef(W)},Un.useState=function(W){return J.current.useState(W)},Un.useSyncExternalStore=function(W,O,q){return J.current.useSyncExternalStore(W,O,q)},Un.useTransition=function(){return J.current.useTransition()},Un.version="18.3.1",Un}var o6;function Ob(){return o6||(o6=1,d2.exports=VB()),d2.exports}var l6;function KB(){if(l6)return _p;l6=1;var e=Ob(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,d){var u,f={},p=null,m=null;d!==void 0&&(p=""+d),c.key!==void 0&&(p=""+c.key),c.ref!==void 0&&(m=c.ref);for(u in c)a.call(c,u)&&!i.hasOwnProperty(u)&&(f[u]=c[u]);if(l&&l.defaultProps)for(u in c=l.defaultProps,c)f[u]===void 0&&(f[u]=c[u]);return{$$typeof:t,type:l,key:p,ref:m,props:f,_owner:s.current}}return _p.Fragment=r,_p.jsx=o,_p.jsxs=o,_p}var c6;function XB(){return c6||(c6=1,c2.exports=KB()),c2.exports}var n=XB(),D=Ob();const ft=La(D);var av={},u2={exports:{}},Vl={},f2={exports:{}},h2={};var d6;function YB(){return d6||(d6=1,(function(e){function t(re,X){var te=re.length;re.push(X);e:for(;0<te;){var W=te-1>>>1,O=re[W];if(0<s(O,X))re[W]=X,re[te]=O,te=W;else break e}}function r(re){return re.length===0?null:re[0]}function a(re){if(re.length===0)return null;var X=re[0],te=re.pop();if(te!==X){re[0]=te;e:for(var W=0,O=re.length,q=O>>>1;W<q;){var G=2*(W+1)-1,U=re[G],K=G+1,ae=re[K];if(0>s(U,te))K<O&&0>s(ae,U)?(re[W]=ae,re[K]=te,W=K):(re[W]=U,re[G]=te,W=G);else if(K<O&&0>s(ae,te))re[W]=ae,re[K]=te,W=K;else break e}}return X}function s(re,X){var te=re.sortIndex-X.sortIndex;return te!==0?te:re.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,f=null,p=3,m=!1,b=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(re){for(var X=r(d);X!==null;){if(X.callback===null)a(d);else if(X.startTime<=re)a(d),X.sortIndex=X.expirationTime,t(c,X);else break;X=r(d)}}function N(re){if(v=!1,j(re),!b)if(r(c)!==null)b=!0,Y(S);else{var X=r(d);X!==null&&J(N,X.startTime-re)}}function S(re,X){b=!1,v&&(v=!1,w(P),P=-1),m=!0;var te=p;try{for(j(X),f=r(c);f!==null&&(!(f.expirationTime>X)||re&&!T());){var W=f.callback;if(typeof W=="function"){f.callback=null,p=f.priorityLevel;var O=W(f.expirationTime<=X);X=e.unstable_now(),typeof O=="function"?f.callback=O:f===r(c)&&a(c),j(X)}else a(c);f=r(c)}if(f!==null)var q=!0;else{var G=r(d);G!==null&&J(N,G.startTime-X),q=!1}return q}finally{f=null,p=te,m=!1}}var E=!1,A=null,P=-1,I=5,B=-1;function T(){return!(e.unstable_now()-B<I)}function _(){if(A!==null){var re=e.unstable_now();B=re;var X=!0;try{X=A(!0,re)}finally{X?R():(E=!1,A=null)}}else E=!1}var R;if(typeof y=="function")R=function(){y(_)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,H=z.port2;z.port1.onmessage=_,R=function(){H.postMessage(null)}}else R=function(){g(_,0)};function Y(re){A=re,E||(E=!0,R())}function J(re,X){P=g(function(){re(e.unstable_now())},X)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(re){re.callback=null},e.unstable_continueExecution=function(){b||m||(b=!0,Y(S))},e.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<re?Math.floor(1e3/re):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(re){switch(p){case 1:case 2:case 3:var X=3;break;default:X=p}var te=p;p=X;try{return re()}finally{p=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(re,X){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var te=p;p=re;try{return X()}finally{p=te}},e.unstable_scheduleCallback=function(re,X,te){var W=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?W+te:W):te=W,re){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=te+O,re={id:u++,callback:X,priorityLevel:re,startTime:te,expirationTime:O,sortIndex:-1},te>W?(re.sortIndex=te,t(d,re),r(c)===null&&re===r(d)&&(v?(w(P),P=-1):v=!0,J(N,te-W))):(re.sortIndex=O,t(c,re),b||m||(b=!0,Y(S))),re},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(re){var X=p;return function(){var te=p;p=X;try{return re.apply(this,arguments)}finally{p=te}}}})(h2)),h2}var u6;function QB(){return u6||(u6=1,f2.exports=YB()),f2.exports}var f6;function JB(){if(f6)return Vl;f6=1;var e=Ob(),t=QB();function r(h){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function i(h,x){o(h,x),o(h+"Capture",x)}function o(h,x){for(s[h]=x,h=0;h<x.length;h++)a.add(x[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,u={},f={};function p(h){return c.call(f,h)?!0:c.call(u,h)?!1:d.test(h)?f[h]=!0:(u[h]=!0,!1)}function m(h,x,k,F){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return F?!1:k!==null?!k.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function b(h,x,k,F){if(x===null||typeof x>"u"||m(h,x,k,F))return!0;if(F)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function v(h,x,k,F,Q,ne,Pe){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=F,this.attributeNamespace=Q,this.mustUseProperty=k,this.propertyName=h,this.type=x,this.sanitizeURL=ne,this.removeEmptyString=Pe}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){g[h]=new v(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var x=h[0];g[x]=new v(x,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){g[h]=new v(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){g[h]=new v(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){g[h]=new v(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){g[h]=new v(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){g[h]=new v(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){g[h]=new v(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){g[h]=new v(h,5,!1,h.toLowerCase(),null,!1,!1)});var w=/[\-:]([a-z])/g;function y(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var x=h.replace(w,y);g[x]=new v(x,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var x=h.replace(w,y);g[x]=new v(x,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var x=h.replace(w,y);g[x]=new v(x,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!1,!1)}),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!0,!0)});function j(h,x,k,F){var Q=g.hasOwnProperty(x)?g[x]:null;(Q!==null?Q.type!==0:F||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(b(x,k,Q,F)&&(k=null),F||Q===null?p(x)&&(k===null?h.removeAttribute(x):h.setAttribute(x,""+k)):Q.mustUseProperty?h[Q.propertyName]=k===null?Q.type===3?!1:"":k:(x=Q.attributeName,F=Q.attributeNamespace,k===null?h.removeAttribute(x):(Q=Q.type,k=Q===3||Q===4&&k===!0?"":""+k,F?h.setAttributeNS(F,x,k):h.setAttribute(x,k))))}var N=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),E=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),T=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),R=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),H=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),J=Symbol.for("react.offscreen"),re=Symbol.iterator;function X(h){return h===null||typeof h!="object"?null:(h=re&&h[re]||h["@@iterator"],typeof h=="function"?h:null)}var te=Object.assign,W;function O(h){if(W===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);W=x&&x[1]||""}return`
`+W+h}var q=!1;function G(h,x){if(!h||q)return"";q=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Et){var F=Et}Reflect.construct(h,[],x)}else{try{x.call()}catch(Et){F=Et}h.call(x.prototype)}else{try{throw Error()}catch(Et){F=Et}h()}}catch(Et){if(Et&&F&&typeof Et.stack=="string"){for(var Q=Et.stack.split(`
`),ne=F.stack.split(`
`),Pe=Q.length-1,Ze=ne.length-1;1<=Pe&&0<=Ze&&Q[Pe]!==ne[Ze];)Ze--;for(;1<=Pe&&0<=Ze;Pe--,Ze--)if(Q[Pe]!==ne[Ze]){if(Pe!==1||Ze!==1)do if(Pe--,Ze--,0>Ze||Q[Pe]!==ne[Ze]){var it=`
`+Q[Pe].replace(" at new "," at ");return h.displayName&&it.includes("<anonymous>")&&(it=it.replace("<anonymous>",h.displayName)),it}while(1<=Pe&&0<=Ze);break}}}finally{q=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?O(h):""}function U(h){switch(h.tag){case 5:return O(h.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return h=G(h.type,!1),h;case 11:return h=G(h.type.render,!1),h;case 1:return h=G(h.type,!0),h;default:return""}}function K(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case A:return"Fragment";case E:return"Portal";case I:return"Profiler";case P:return"StrictMode";case R:return"Suspense";case z:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case T:return(h.displayName||"Context")+".Consumer";case B:return(h._context.displayName||"Context")+".Provider";case _:var x=h.render;return h=h.displayName,h||(h=x.displayName||x.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case H:return x=h.displayName||null,x!==null?x:K(h.type)||"Memo";case Y:x=h._payload,h=h._init;try{return K(h(x))}catch{}}return null}function ae(h){var x=h.type;switch(h.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=x.render,h=h.displayName||h.name||"",x.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(x);case 8:return x===P?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function me(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function se(h){var x=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function le(h){var x=se(h)?"checked":"value",k=Object.getOwnPropertyDescriptor(h.constructor.prototype,x),F=""+h[x];if(!h.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var Q=k.get,ne=k.set;return Object.defineProperty(h,x,{configurable:!0,get:function(){return Q.call(this)},set:function(Pe){F=""+Pe,ne.call(this,Pe)}}),Object.defineProperty(h,x,{enumerable:k.enumerable}),{getValue:function(){return F},setValue:function(Pe){F=""+Pe},stopTracking:function(){h._valueTracker=null,delete h[x]}}}}function Me(h){h._valueTracker||(h._valueTracker=le(h))}function ue(h){if(!h)return!1;var x=h._valueTracker;if(!x)return!0;var k=x.getValue(),F="";return h&&(F=se(h)?h.checked?"true":"false":h.value),h=F,h!==k?(x.setValue(h),!0):!1}function Ue(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Ae(h,x){var k=x.checked;return te({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??h._wrapperState.initialChecked})}function ie(h,x){var k=x.defaultValue==null?"":x.defaultValue,F=x.checked!=null?x.checked:x.defaultChecked;k=me(x.value!=null?x.value:k),h._wrapperState={initialChecked:F,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function Z(h,x){x=x.checked,x!=null&&j(h,"checked",x,!1)}function Ee(h,x){Z(h,x);var k=me(x.value),F=x.type;if(k!=null)F==="number"?(k===0&&h.value===""||h.value!=k)&&(h.value=""+k):h.value!==""+k&&(h.value=""+k);else if(F==="submit"||F==="reset"){h.removeAttribute("value");return}x.hasOwnProperty("value")?Oe(h,x.type,k):x.hasOwnProperty("defaultValue")&&Oe(h,x.type,me(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(h.defaultChecked=!!x.defaultChecked)}function we(h,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var F=x.type;if(!(F!=="submit"&&F!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+h._wrapperState.initialValue,k||x===h.value||(h.value=x),h.defaultValue=x}k=h.name,k!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,k!==""&&(h.name=k)}function Oe(h,x,k){(x!=="number"||Ue(h.ownerDocument)!==h)&&(k==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+k&&(h.defaultValue=""+k))}var de=Array.isArray;function ce(h,x,k,F){if(h=h.options,x){x={};for(var Q=0;Q<k.length;Q++)x["$"+k[Q]]=!0;for(k=0;k<h.length;k++)Q=x.hasOwnProperty("$"+h[k].value),h[k].selected!==Q&&(h[k].selected=Q),Q&&F&&(h[k].defaultSelected=!0)}else{for(k=""+me(k),x=null,Q=0;Q<h.length;Q++){if(h[Q].value===k){h[Q].selected=!0,F&&(h[Q].defaultSelected=!0);return}x!==null||h[Q].disabled||(x=h[Q])}x!==null&&(x.selected=!0)}}function Ce(h,x){if(x.dangerouslySetInnerHTML!=null)throw Error(r(91));return te({},x,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Xe(h,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(r(92));if(de(k)){if(1<k.length)throw Error(r(93));k=k[0]}x=k}x==null&&(x=""),k=x}h._wrapperState={initialValue:me(k)}}function xe(h,x){var k=me(x.value),F=me(x.defaultValue);k!=null&&(k=""+k,k!==h.value&&(h.value=k),x.defaultValue==null&&h.defaultValue!==k&&(h.defaultValue=k)),F!=null&&(h.defaultValue=""+F)}function fe(h){var x=h.textContent;x===h._wrapperState.initialValue&&x!==""&&x!==null&&(h.value=x)}function Se(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function qe(h,x){return h==null||h==="http://www.w3.org/1999/xhtml"?Se(x):h==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var je,Le=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,F,Q){MSApp.execUnsafeLocalFunction(function(){return h(x,k,F,Q)})}:h})(function(h,x){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=x;else{for(je=je||document.createElement("div"),je.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=je.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;x.firstChild;)h.appendChild(x.firstChild)}});function Re(h,x){if(x){var k=h.firstChild;if(k&&k===h.lastChild&&k.nodeType===3){k.nodeValue=x;return}}h.textContent=x}var Je={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ut=["Webkit","ms","Moz","O"];Object.keys(Je).forEach(function(h){ut.forEach(function(x){x=x+h.charAt(0).toUpperCase()+h.substring(1),Je[x]=Je[h]})});function vt(h,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||Je.hasOwnProperty(h)&&Je[h]?(""+x).trim():x+"px"}function At(h,x){h=h.style;for(var k in x)if(x.hasOwnProperty(k)){var F=k.indexOf("--")===0,Q=vt(k,x[k],F);k==="float"&&(k="cssFloat"),F?h.setProperty(k,Q):h[k]=Q}}var Bt=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Yt(h,x){if(x){if(Bt[h]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(r(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(r(61))}if(x.style!=null&&typeof x.style!="object")throw Error(r(62))}}function We(h,x){if(h.indexOf("-")===-1)return typeof x.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ct=null;function br(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var Jt=null,Dr=null,Hr=null;function tt(h){if(h=Ml(h)){if(typeof Jt!="function")throw Error(r(280));var x=h.stateNode;x&&(x=Zu(x),Jt(h.stateNode,h.type,x))}}function Dt(h){Dr?Hr?Hr.push(h):Hr=[h]:Dr=h}function mr(){if(Dr){var h=Dr,x=Hr;if(Hr=Dr=null,tt(h),x)for(h=0;h<x.length;h++)tt(x[h])}}function Sr(h,x){return h(x)}function Jr(){}var _r=!1;function Wr(h,x,k){if(_r)return h(x,k);_r=!0;try{return Sr(h,x,k)}finally{_r=!1,(Dr!==null||Hr!==null)&&(Jr(),mr())}}function sr(h,x){var k=h.stateNode;if(k===null)return null;var F=Zu(k);if(F===null)return null;k=F[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(F=!F.disabled)||(h=h.type,F=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!F;break e;default:h=!1}if(h)return null;if(k&&typeof k!="function")throw Error(r(231,x,typeof k));return k}var en=!1;if(l)try{var Gr={};Object.defineProperty(Gr,"passive",{get:function(){en=!0}}),window.addEventListener("test",Gr,Gr),window.removeEventListener("test",Gr,Gr)}catch{en=!1}function vn(h,x,k,F,Q,ne,Pe,Ze,it){var Et=Array.prototype.slice.call(arguments,3);try{x.apply(k,Et)}catch(er){this.onError(er)}}var kr=!1,Fr=null,ke=!1,ze=null,$e={onError:function(h){kr=!0,Fr=h}};function pe(h,x,k,F,Q,ne,Pe,Ze,it){kr=!1,Fr=null,vn.apply($e,arguments)}function _e(h,x,k,F,Q,ne,Pe,Ze,it){if(pe.apply(this,arguments),kr){if(kr){var Et=Fr;kr=!1,Fr=null}else throw Error(r(198));ke||(ke=!0,ze=Et)}}function Fe(h){var x=h,k=h;if(h.alternate)for(;x.return;)x=x.return;else{h=x;do x=h,(x.flags&4098)!==0&&(k=x.return),h=x.return;while(h)}return x.tag===3?k:null}function et(h){if(h.tag===13){var x=h.memoizedState;if(x===null&&(h=h.alternate,h!==null&&(x=h.memoizedState)),x!==null)return x.dehydrated}return null}function mt(h){if(Fe(h)!==h)throw Error(r(188))}function lt(h){var x=h.alternate;if(!x){if(x=Fe(h),x===null)throw Error(r(188));return x!==h?null:h}for(var k=h,F=x;;){var Q=k.return;if(Q===null)break;var ne=Q.alternate;if(ne===null){if(F=Q.return,F!==null){k=F;continue}break}if(Q.child===ne.child){for(ne=Q.child;ne;){if(ne===k)return mt(Q),h;if(ne===F)return mt(Q),x;ne=ne.sibling}throw Error(r(188))}if(k.return!==F.return)k=Q,F=ne;else{for(var Pe=!1,Ze=Q.child;Ze;){if(Ze===k){Pe=!0,k=Q,F=ne;break}if(Ze===F){Pe=!0,F=Q,k=ne;break}Ze=Ze.sibling}if(!Pe){for(Ze=ne.child;Ze;){if(Ze===k){Pe=!0,k=ne,F=Q;break}if(Ze===F){Pe=!0,F=ne,k=Q;break}Ze=Ze.sibling}if(!Pe)throw Error(r(189))}}if(k.alternate!==F)throw Error(r(190))}if(k.tag!==3)throw Error(r(188));return k.stateNode.current===k?h:x}function xt(h){return h=lt(h),h!==null?ge(h):null}function ge(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var x=ge(h);if(x!==null)return x;h=h.sibling}return null}var ve=t.unstable_scheduleCallback,Ke=t.unstable_cancelCallback,ct=t.unstable_shouldYield,jt=t.unstable_requestPaint,bt=t.unstable_now,Wt=t.unstable_getCurrentPriorityLevel,ir=t.unstable_ImmediatePriority,Kt=t.unstable_UserBlockingPriority,yr=t.unstable_NormalPriority,$r=t.unstable_LowPriority,Ur=t.unstable_IdlePriority,un=null,Vr=null;function aa(h){if(Vr&&typeof Vr.onCommitFiberRoot=="function")try{Vr.onCommitFiberRoot(un,h,void 0,(h.current.flags&128)===128)}catch{}}var Kn=Math.clz32?Math.clz32:Na,Ln=Math.log,Lo=Math.LN2;function Na(h){return h>>>=0,h===0?32:31-(Ln(h)/Lo|0)|0}var Ve=64,Lt=4194304;function Ot(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function lr(h,x){var k=h.pendingLanes;if(k===0)return 0;var F=0,Q=h.suspendedLanes,ne=h.pingedLanes,Pe=k&268435455;if(Pe!==0){var Ze=Pe&~Q;Ze!==0?F=Ot(Ze):(ne&=Pe,ne!==0&&(F=Ot(ne)))}else Pe=k&~Q,Pe!==0?F=Ot(Pe):ne!==0&&(F=Ot(ne));if(F===0)return 0;if(x!==0&&x!==F&&(x&Q)===0&&(Q=F&-F,ne=x&-x,Q>=ne||Q===16&&(ne&4194240)!==0))return x;if((F&4)!==0&&(F|=k&16),x=h.entangledLanes,x!==0)for(h=h.entanglements,x&=F;0<x;)k=31-Kn(x),Q=1<<k,F|=h[k],x&=~Q;return F}function jr(h,x){switch(h){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pr(h,x){for(var k=h.suspendedLanes,F=h.pingedLanes,Q=h.expirationTimes,ne=h.pendingLanes;0<ne;){var Pe=31-Kn(ne),Ze=1<<Pe,it=Q[Pe];it===-1?((Ze&k)===0||(Ze&F)!==0)&&(Q[Pe]=jr(Ze,x)):it<=x&&(h.expiredLanes|=Ze),ne&=~Ze}}function Mr(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function sa(){var h=Ve;return Ve<<=1,(Ve&4194240)===0&&(Ve=64),h}function En(h){for(var x=[],k=0;31>k;k++)x.push(h);return x}function rr(h,x,k){h.pendingLanes|=x,x!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,x=31-Kn(x),h[x]=k}function xr(h,x){var k=h.pendingLanes&~x;h.pendingLanes=x,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=x,h.mutableReadLanes&=x,h.entangledLanes&=x,x=h.entanglements;var F=h.eventTimes;for(h=h.expirationTimes;0<k;){var Q=31-Kn(k),ne=1<<Q;x[Q]=0,F[Q]=-1,h[Q]=-1,k&=~ne}}function Rt(h,x){var k=h.entangledLanes|=x;for(h=h.entanglements;k;){var F=31-Kn(k),Q=1<<F;Q&x|h[F]&x&&(h[F]|=x),k&=~Q}}var Cr=0;function Vt(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Ma,Ca,Aa,ar,nn,Ra=!1,Zn=[],kn=null,Ar=null,an=null,dr=new Map,Mn=new Map,Or=[],Ba="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ho(h,x){switch(h){case"focusin":case"focusout":kn=null;break;case"dragenter":case"dragleave":Ar=null;break;case"mouseover":case"mouseout":an=null;break;case"pointerover":case"pointerout":dr.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mn.delete(x.pointerId)}}function bs(h,x,k,F,Q,ne){return h===null||h.nativeEvent!==ne?(h={blockedOn:x,domEventName:k,eventSystemFlags:F,nativeEvent:ne,targetContainers:[Q]},x!==null&&(x=Ml(x),x!==null&&Ca(x)),h):(h.eventSystemFlags|=F,x=h.targetContainers,Q!==null&&x.indexOf(Q)===-1&&x.push(Q),h)}function ys(h,x,k,F,Q){switch(x){case"focusin":return kn=bs(kn,h,x,k,F,Q),!0;case"dragenter":return Ar=bs(Ar,h,x,k,F,Q),!0;case"mouseover":return an=bs(an,h,x,k,F,Q),!0;case"pointerover":var ne=Q.pointerId;return dr.set(ne,bs(dr.get(ne)||null,h,x,k,F,Q)),!0;case"gotpointercapture":return ne=Q.pointerId,Mn.set(ne,bs(Mn.get(ne)||null,h,x,k,F,Q)),!0}return!1}function ws(h){var x=Fc(h.target);if(x!==null){var k=Fe(x);if(k!==null){if(x=k.tag,x===13){if(x=et(k),x!==null){h.blockedOn=x,nn(h.priority,function(){Aa(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){h.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}h.blockedOn=null}function mo(h){if(h.blockedOn!==null)return!1;for(var x=h.targetContainers;0<x.length;){var k=bn(h.domEventName,h.eventSystemFlags,x[0],h.nativeEvent);if(k===null){k=h.nativeEvent;var F=new k.constructor(k.type,k);Ct=F,k.target.dispatchEvent(F),Ct=null}else return x=Ml(k),x!==null&&Ca(x),h.blockedOn=k,!1;x.shift()}return!0}function ml(h,x,k){mo(h)&&k.delete(x)}function zu(){Ra=!1,kn!==null&&mo(kn)&&(kn=null),Ar!==null&&mo(Ar)&&(Ar=null),an!==null&&mo(an)&&(an=null),dr.forEach(ml),Mn.forEach(ml)}function po(h,x){h.blockedOn===x&&(h.blockedOn=null,Ra||(Ra=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,zu)))}function Wi(h){function x(Q){return po(Q,h)}if(0<Zn.length){po(Zn[0],h);for(var k=1;k<Zn.length;k++){var F=Zn[k];F.blockedOn===h&&(F.blockedOn=null)}}for(kn!==null&&po(kn,h),Ar!==null&&po(Ar,h),an!==null&&po(an,h),dr.forEach(x),Mn.forEach(x),k=0;k<Or.length;k++)F=Or[k],F.blockedOn===h&&(F.blockedOn=null);for(;0<Or.length&&(k=Or[0],k.blockedOn===null);)ws(k),k.blockedOn===null&&Or.shift()}var mi=N.ReactCurrentBatchConfig,rc=!0;function Ge(h,x,k,F){var Q=Cr,ne=mi.transition;mi.transition=null;try{Cr=1,qr(h,x,k,F)}finally{Cr=Q,mi.transition=ne}}function wr(h,x,k,F){var Q=Cr,ne=mi.transition;mi.transition=null;try{Cr=4,qr(h,x,k,F)}finally{Cr=Q,mi.transition=ne}}function qr(h,x,k,F){if(rc){var Q=bn(h,x,k,F);if(Q===null)Ku(h,x,F,Kr,k),ho(h,F);else if(ys(Q,h,x,k,F))F.stopPropagation();else if(ho(h,F),x&4&&-1<Ba.indexOf(h)){for(;Q!==null;){var ne=Ml(Q);if(ne!==null&&Ma(ne),ne=bn(h,x,k,F),ne===null&&Ku(h,x,F,Kr,k),ne===Q)break;Q=ne}Q!==null&&F.stopPropagation()}else Ku(h,x,F,null,k)}}var Kr=null;function bn(h,x,k,F){if(Kr=null,h=br(F),h=Fc(h),h!==null)if(x=Fe(h),x===null)h=null;else if(k=x.tag,k===13){if(h=et(x),h!==null)return h;h=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;h=null}else x!==h&&(h=null);return Kr=h,null}function Hn(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wt()){case ir:return 1;case Kt:return 4;case yr:case $r:return 16;case Ur:return 536870912;default:return 16}default:return 16}}var ma=null,Ua=null,Ns=null;function Rf(){if(Ns)return Ns;var h,x=Ua,k=x.length,F,Q="value"in ma?ma.value:ma.textContent,ne=Q.length;for(h=0;h<k&&x[h]===Q[h];h++);var Pe=k-h;for(F=1;F<=Pe&&x[k-F]===Q[ne-F];F++);return Ns=Q.slice(h,1<F?1-F:void 0)}function Gi(h){var x=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&x===13&&(h=13)):h=x,h===10&&(h=13),32<=h||h===13?h:0}function Ai(){return!0}function Ol(){return!1}function js(h){function x(k,F,Q,ne,Pe){this._reactName=k,this._targetInst=Q,this.type=F,this.nativeEvent=ne,this.target=Pe,this.currentTarget=null;for(var Ze in h)h.hasOwnProperty(Ze)&&(k=h[Ze],this[Ze]=k?k(ne):ne[Ze]);return this.isDefaultPrevented=(ne.defaultPrevented!=null?ne.defaultPrevented:ne.returnValue===!1)?Ai:Ol,this.isPropagationStopped=Ol,this}return te(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=Ai)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=Ai)},persist:function(){},isPersistent:Ai}),x}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fo=js(xo),xd=te({},xo,{view:0,detail:0}),Ac=js(xd),gd,pl,Ei,Mo=te({},xd,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Nr,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Ei&&(Ei&&h.type==="mousemove"?(gd=h.screenX-Ei.screenX,pl=h.screenY-Ei.screenY):pl=gd=0,Ei=h),gd)},movementY:function(h){return"movementY"in h?h.movementY:pl}}),vd=js(Mo),Hu=te({},Mo,{dataTransfer:0}),au=js(Hu),Ec=te({},xd,{relatedTarget:0}),ja=js(Ec),Wu=te({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),nc=js(Wu),su=te({},xo,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),V=js(su),Ne=te({},xo,{data:0}),Ye=js(Ne),rt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ft={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qt(h){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(h):(h=Ft[h])?!!x[h]:!1}function Nr(){return Qt}var Yr=te({},xd,{key:function(h){if(h.key){var x=rt[h.key]||h.key;if(x!=="Unidentified")return x}return h.type==="keypress"?(h=Gi(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?yt[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Nr,charCode:function(h){return h.type==="keypress"?Gi(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?Gi(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),fn=js(Yr),sn=te({},Mo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Tn=js(sn),Ga=te({},xd,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Nr}),Va=js(Ga),ks=te({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Zs=js(ks),qs=te({},Mo,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Ro=js(qs),ei=[9,13,27,32],go=l&&"CompositionEvent"in window,vo=null;l&&"documentMode"in document&&(vo=document.documentMode);var iu=l&&"TextEvent"in window&&!vo,ou=l&&(!go||vo&&8<vo&&11>=vo),Tc=" ",bd=!1;function yd(h,x){switch(h){case"keyup":return ei.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function wd(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var Ea=!1;function bo(h,x){switch(h){case"compositionend":return wd(x);case"keypress":return x.which!==32?null:(bd=!0,Tc);case"textInput":return h=x.data,h===Tc&&bd?null:h;default:return null}}function xl(h,x){if(Ea)return h==="compositionend"||!go&&yd(h,x)?(h=Rf(),Ns=Ua=ma=null,Ea=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return ou&&x.locale!=="ko"?null:x.data;default:return null}}var ns={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oc(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x==="input"?!!ns[h.type]:x==="textarea"}function hn(h,x,k,F){Dt(F),x=Xu(x,"onChange"),0<x.length&&(k=new Fo("onChange","change",null,k,F),h.push({event:k,listeners:x}))}var os=null,ba=null;function pi(h){Vu(h,0)}function Wn(h){var x=Mc(h);if(ue(x))return h}function $s(h,x){if(h==="change")return x}var Ka=!1;if(l){var Vi;if(l){var Xa="oninput"in document;if(!Xa){var Ss=document.createElement("div");Ss.setAttribute("oninput","return;"),Xa=typeof Ss.oninput=="function"}Vi=Xa}else Vi=!1;Ka=Vi&&(!document.documentMode||9<document.documentMode)}function ka(){os&&(os.detachEvent("onpropertychange",ls),ba=os=null)}function ls(h){if(h.propertyName==="value"&&Wn(ba)){var x=[];hn(x,ba,h,br(h)),Wr(pi,x)}}function Ki(h,x,k){h==="focusin"?(ka(),os=x,ba=k,os.attachEvent("onpropertychange",ls)):h==="focusout"&&ka()}function Pl(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return Wn(ba)}function Bo(h,x){if(h==="click")return Wn(x)}function lu(h,x){if(h==="input"||h==="change")return Wn(x)}function gl(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var Xn=typeof Object.is=="function"?Object.is:gl;function Il(h,x){if(Xn(h,x))return!0;if(typeof h!="object"||h===null||typeof x!="object"||x===null)return!1;var k=Object.keys(h),F=Object.keys(x);if(k.length!==F.length)return!1;for(F=0;F<k.length;F++){var Q=k[F];if(!c.call(x,Q)||!Xn(h[Q],x[Q]))return!1}return!0}function ti(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Ti(h,x){var k=ti(h);h=0;for(var F;k;){if(k.nodeType===3){if(F=h+k.textContent.length,h<=x&&F>=x)return{node:k,offset:x-h};h=F}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=ti(k)}}function Dl(h,x){return h&&x?h===x?!0:h&&h.nodeType===3?!1:x&&x.nodeType===3?Dl(h,x.parentNode):"contains"in h?h.contains(x):h.compareDocumentPosition?!!(h.compareDocumentPosition(x)&16):!1:!1}function Nd(){for(var h=window,x=Ue();x instanceof h.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)h=x.contentWindow;else break;x=Ue(h.document)}return x}function Ll(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x&&(x==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||x==="textarea"||h.contentEditable==="true")}function Uo(h){var x=Nd(),k=h.focusedElem,F=h.selectionRange;if(x!==k&&k&&k.ownerDocument&&Dl(k.ownerDocument.documentElement,k)){if(F!==null&&Ll(k)){if(x=F.start,h=F.end,h===void 0&&(h=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(h,k.value.length);else if(h=(x=k.ownerDocument||document)&&x.defaultView||window,h.getSelection){h=h.getSelection();var Q=k.textContent.length,ne=Math.min(F.start,Q);F=F.end===void 0?ne:Math.min(F.end,Q),!h.extend&&ne>F&&(Q=F,F=ne,ne=Q),Q=Ti(k,ne);var Pe=Ti(k,F);Q&&Pe&&(h.rangeCount!==1||h.anchorNode!==Q.node||h.anchorOffset!==Q.offset||h.focusNode!==Pe.node||h.focusOffset!==Pe.offset)&&(x=x.createRange(),x.setStart(Q.node,Q.offset),h.removeAllRanges(),ne>F?(h.addRange(x),h.extend(Pe.node,Pe.offset)):(x.setEnd(Pe.node,Pe.offset),h.addRange(x)))}}for(x=[],h=k;h=h.parentNode;)h.nodeType===1&&x.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)h=x[k],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Xi=l&&"documentMode"in document&&11>=document.documentMode,zs=null,Yi=null,Oi=null,Qi=!1;function yo(h,x,k){var F=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;Qi||zs==null||zs!==Ue(F)||(F=zs,"selectionStart"in F&&Ll(F)?F={start:F.selectionStart,end:F.selectionEnd}:(F=(F.ownerDocument&&F.ownerDocument.defaultView||window).getSelection(),F={anchorNode:F.anchorNode,anchorOffset:F.anchorOffset,focusNode:F.focusNode,focusOffset:F.focusOffset}),Oi&&Il(Oi,F)||(Oi=F,F=Xu(Yi,"onSelect"),0<F.length&&(x=new Fo("onSelect","select",null,x,k),h.push({event:x,listeners:F}),x.target=zs)))}function Pc(h,x){var k={};return k[h.toLowerCase()]=x.toLowerCase(),k["Webkit"+h]="webkit"+x,k["Moz"+h]="moz"+x,k}var _s={animationend:Pc("Animation","AnimationEnd"),animationiteration:Pc("Animation","AnimationIteration"),animationstart:Pc("Animation","AnimationStart"),transitionend:Pc("Transition","TransitionEnd")},Cs={},ia={};l&&(ia=document.createElement("div").style,"AnimationEvent"in window||(delete _s.animationend.animation,delete _s.animationiteration.animation,delete _s.animationstart.animation),"TransitionEvent"in window||delete _s.transitionend.transition);function ea(h){if(Cs[h])return Cs[h];if(!_s[h])return h;var x=_s[h],k;for(k in x)if(x.hasOwnProperty(k)&&k in ia)return Cs[h]=x[k];return h}var On=ea("animationend"),Ta=ea("animationiteration"),qo=ea("animationstart"),cu=ea("transitionend"),$o=new Map,jd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function zo(h,x){$o.set(h,x),i(x,[h])}for(var Fl=0;Fl<jd.length;Fl++){var xi=jd[Fl],gi=xi.toLowerCase(),Gu=xi[0].toUpperCase()+xi.slice(1);zo(gi,"on"+Gu)}zo(On,"onAnimationEnd"),zo(Ta,"onAnimationIteration"),zo(qo,"onAnimationStart"),zo("dblclick","onDoubleClick"),zo("focusin","onFocus"),zo("focusout","onBlur"),zo(cu,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ac="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kh=new Set("cancel close invalid load scroll toggle".split(" ").concat(ac));function du(h,x,k){var F=h.type||"unknown-event";h.currentTarget=k,_e(F,x,void 0,h),h.currentTarget=null}function Vu(h,x){x=(x&4)!==0;for(var k=0;k<h.length;k++){var F=h[k],Q=F.event;F=F.listeners;e:{var ne=void 0;if(x)for(var Pe=F.length-1;0<=Pe;Pe--){var Ze=F[Pe],it=Ze.instance,Et=Ze.currentTarget;if(Ze=Ze.listener,it!==ne&&Q.isPropagationStopped())break e;du(Q,Ze,Et),ne=it}else for(Pe=0;Pe<F.length;Pe++){if(Ze=F[Pe],it=Ze.instance,Et=Ze.currentTarget,Ze=Ze.listener,it!==ne&&Q.isPropagationStopped())break e;du(Q,Ze,Et),ne=it}}}if(ke)throw h=ze,ke=!1,ze=null,h}function pa(h,x){var k=x[Ji];k===void 0&&(k=x[Ji]=new Set);var F=h+"__bubble";k.has(F)||(uu(x,h,2,!1),k.add(F))}function Bf(h,x,k){var F=0;x&&(F|=4),uu(k,h,F,x)}var Ic="_reactListening"+Math.random().toString(36).slice(2);function kd(h){if(!h[Ic]){h[Ic]=!0,a.forEach(function(k){k!=="selectionchange"&&(Kh.has(k)||Bf(k,!1,h),Bf(k,!0,h))});var x=h.nodeType===9?h:h.ownerDocument;x===null||x[Ic]||(x[Ic]=!0,Bf("selectionchange",!1,x))}}function uu(h,x,k,F){switch(Hn(x)){case 1:var Q=Ge;break;case 4:Q=wr;break;default:Q=qr}k=Q.bind(null,x,k,h),Q=void 0,!en||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(Q=!0),F?Q!==void 0?h.addEventListener(x,k,{capture:!0,passive:Q}):h.addEventListener(x,k,!0):Q!==void 0?h.addEventListener(x,k,{passive:Q}):h.addEventListener(x,k,!1)}function Ku(h,x,k,F,Q){var ne=F;if((x&1)===0&&(x&2)===0&&F!==null)e:for(;;){if(F===null)return;var Pe=F.tag;if(Pe===3||Pe===4){var Ze=F.stateNode.containerInfo;if(Ze===Q||Ze.nodeType===8&&Ze.parentNode===Q)break;if(Pe===4)for(Pe=F.return;Pe!==null;){var it=Pe.tag;if((it===3||it===4)&&(it=Pe.stateNode.containerInfo,it===Q||it.nodeType===8&&it.parentNode===Q))return;Pe=Pe.return}for(;Ze!==null;){if(Pe=Fc(Ze),Pe===null)return;if(it=Pe.tag,it===5||it===6){F=ne=Pe;continue e}Ze=Ze.parentNode}}F=F.return}Wr(function(){var Et=ne,er=br(k),nr=[];e:{var Zt=$o.get(h);if(Zt!==void 0){var Er=Fo,Rr=h;switch(h){case"keypress":if(Gi(k)===0)break e;case"keydown":case"keyup":Er=fn;break;case"focusin":Rr="focus",Er=ja;break;case"focusout":Rr="blur",Er=ja;break;case"beforeblur":case"afterblur":Er=ja;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Er=vd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Er=au;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Er=Va;break;case On:case Ta:case qo:Er=nc;break;case cu:Er=Zs;break;case"scroll":Er=Ac;break;case"wheel":Er=Ro;break;case"copy":case"cut":case"paste":Er=V;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Er=Tn}var zr=(x&4)!==0,ai=!zr&&h==="scroll",kt=zr?Zt!==null?Zt+"Capture":null:Zt;zr=[];for(var ht=Et,_t;ht!==null;){_t=ht;var cr=_t.stateNode;if(_t.tag===5&&cr!==null&&(_t=cr,kt!==null&&(cr=sr(ht,kt),cr!=null&&zr.push(Dc(ht,cr,_t)))),ai)break;ht=ht.return}0<zr.length&&(Zt=new Er(Zt,Rr,null,k,er),nr.push({event:Zt,listeners:zr}))}}if((x&7)===0){e:{if(Zt=h==="mouseover"||h==="pointerover",Er=h==="mouseout"||h==="pointerout",Zt&&k!==Ct&&(Rr=k.relatedTarget||k.fromElement)&&(Fc(Rr)||Rr[ds]))break e;if((Er||Zt)&&(Zt=er.window===er?er:(Zt=er.ownerDocument)?Zt.defaultView||Zt.parentWindow:window,Er?(Rr=k.relatedTarget||k.toElement,Er=Et,Rr=Rr?Fc(Rr):null,Rr!==null&&(ai=Fe(Rr),Rr!==ai||Rr.tag!==5&&Rr.tag!==6)&&(Rr=null)):(Er=null,Rr=Et),Er!==Rr)){if(zr=vd,cr="onMouseLeave",kt="onMouseEnter",ht="mouse",(h==="pointerout"||h==="pointerover")&&(zr=Tn,cr="onPointerLeave",kt="onPointerEnter",ht="pointer"),ai=Er==null?Zt:Mc(Er),_t=Rr==null?Zt:Mc(Rr),Zt=new zr(cr,ht+"leave",Er,k,er),Zt.target=ai,Zt.relatedTarget=_t,cr=null,Fc(er)===Et&&(zr=new zr(kt,ht+"enter",Rr,k,er),zr.target=_t,zr.relatedTarget=ai,cr=zr),ai=cr,Er&&Rr)t:{for(zr=Er,kt=Rr,ht=0,_t=zr;_t;_t=Sd(_t))ht++;for(_t=0,cr=kt;cr;cr=Sd(cr))_t++;for(;0<ht-_t;)zr=Sd(zr),ht--;for(;0<_t-ht;)kt=Sd(kt),_t--;for(;ht--;){if(zr===kt||kt!==null&&zr===kt.alternate)break t;zr=Sd(zr),kt=Sd(kt)}zr=null}else zr=null;Er!==null&&R0(nr,Zt,Er,zr,!1),Rr!==null&&ai!==null&&R0(nr,ai,Rr,zr,!0)}}e:{if(Zt=Et?Mc(Et):window,Er=Zt.nodeName&&Zt.nodeName.toLowerCase(),Er==="select"||Er==="input"&&Zt.type==="file")var Xr=$s;else if(Oc(Zt))if(Ka)Xr=lu;else{Xr=Pl;var tn=Ki}else(Er=Zt.nodeName)&&Er.toLowerCase()==="input"&&(Zt.type==="checkbox"||Zt.type==="radio")&&(Xr=Bo);if(Xr&&(Xr=Xr(h,Et))){hn(nr,Xr,k,er);break e}tn&&tn(h,Zt,Et),h==="focusout"&&(tn=Zt._wrapperState)&&tn.controlled&&Zt.type==="number"&&Oe(Zt,"number",Zt.value)}switch(tn=Et?Mc(Et):window,h){case"focusin":(Oc(tn)||tn.contentEditable==="true")&&(zs=tn,Yi=Et,Oi=null);break;case"focusout":Oi=Yi=zs=null;break;case"mousedown":Qi=!0;break;case"contextmenu":case"mouseup":case"dragend":Qi=!1,yo(nr,k,er);break;case"selectionchange":if(Xi)break;case"keydown":case"keyup":yo(nr,k,er)}var rn;if(go)e:{switch(h){case"compositionstart":var wn="onCompositionStart";break e;case"compositionend":wn="onCompositionEnd";break e;case"compositionupdate":wn="onCompositionUpdate";break e}wn=void 0}else Ea?yd(h,k)&&(wn="onCompositionEnd"):h==="keydown"&&k.keyCode===229&&(wn="onCompositionStart");wn&&(ou&&k.locale!=="ko"&&(Ea||wn!=="onCompositionStart"?wn==="onCompositionEnd"&&Ea&&(rn=Rf()):(ma=er,Ua="value"in ma?ma.value:ma.textContent,Ea=!0)),tn=Xu(Et,wn),0<tn.length&&(wn=new Ye(wn,h,null,k,er),nr.push({event:wn,listeners:tn}),rn?wn.data=rn:(rn=wd(k),rn!==null&&(wn.data=rn)))),(rn=iu?bo(h,k):xl(h,k))&&(Et=Xu(Et,"onBeforeInput"),0<Et.length&&(er=new Ye("onBeforeInput","beforeinput",null,k,er),nr.push({event:er,listeners:Et}),er.data=rn))}Vu(nr,x)})}function Dc(h,x,k){return{instance:h,listener:x,currentTarget:k}}function Xu(h,x){for(var k=x+"Capture",F=[];h!==null;){var Q=h,ne=Q.stateNode;Q.tag===5&&ne!==null&&(Q=ne,ne=sr(h,k),ne!=null&&F.unshift(Dc(h,ne,Q)),ne=sr(h,x),ne!=null&&F.push(Dc(h,ne,Q))),h=h.return}return F}function Sd(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function R0(h,x,k,F,Q){for(var ne=x._reactName,Pe=[];k!==null&&k!==F;){var Ze=k,it=Ze.alternate,Et=Ze.stateNode;if(it!==null&&it===F)break;Ze.tag===5&&Et!==null&&(Ze=Et,Q?(it=sr(k,ne),it!=null&&Pe.unshift(Dc(k,it,Ze))):Q||(it=sr(k,ne),it!=null&&Pe.push(Dc(k,it,Ze)))),k=k.return}Pe.length!==0&&h.push({event:x,listeners:Pe})}var Uf=/\r\n?/g,Xh=/\u0000|\uFFFD/g;function Yu(h){return(typeof h=="string"?h:""+h).replace(Uf,`
`).replace(Xh,"")}function Qu(h,x,k){if(x=Yu(x),Yu(h)!==x&&k)throw Error(r(425))}function sc(){}var fu=null,hu=null;function qf(h,x){return h==="textarea"||h==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var B0=typeof setTimeout=="function"?setTimeout:void 0,Lc=typeof clearTimeout=="function"?clearTimeout:void 0,ic=typeof Promise=="function"?Promise:void 0,_d=typeof queueMicrotask=="function"?queueMicrotask:typeof ic<"u"?function(h){return ic.resolve(null).then(h).catch(vp)}:B0;function vp(h){setTimeout(function(){throw h})}function Ju(h,x){var k=x,F=0;do{var Q=k.nextSibling;if(h.removeChild(k),Q&&Q.nodeType===8)if(k=Q.data,k==="/$"){if(F===0){h.removeChild(Q),Wi(x);return}F--}else k!=="$"&&k!=="$?"&&k!=="$!"||F++;k=Q}while(k);Wi(x)}function cs(h){for(;h!=null;h=h.nextSibling){var x=h.nodeType;if(x===1||x===3)break;if(x===8){if(x=h.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return h}function wo(h){h=h.previousSibling;for(var x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return h;x--}else k==="/$"&&x++}h=h.previousSibling}return null}var Pi=Math.random().toString(36).slice(2),No="__reactFiber$"+Pi,mu="__reactProps$"+Pi,ds="__reactContainer$"+Pi,Ji="__reactEvents$"+Pi,bp="__reactListeners$"+Pi,$f="__reactHandles$"+Pi;function Fc(h){var x=h[No];if(x)return x;for(var k=h.parentNode;k;){if(x=k[ds]||k[No]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(h=wo(h);h!==null;){if(k=h[No])return k;h=wo(h)}return x}h=k,k=h.parentNode}return null}function Ml(h){return h=h[No]||h[ds],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function Mc(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function Zu(h){return h[mu]||null}var zf=[],Ho=-1;function vl(h){return{current:h}}function ta(h){0>Ho||(h.current=zf[Ho],zf[Ho]=null,Ho--)}function oa(h,x){Ho++,zf[Ho]=h.current,h.current=x}var Rc={},As=vl(Rc),vi=vl(!1),Rl=Rc;function Cd(h,x){var k=h.type.contextTypes;if(!k)return Rc;var F=h.stateNode;if(F&&F.__reactInternalMemoizedUnmaskedChildContext===x)return F.__reactInternalMemoizedMaskedChildContext;var Q={},ne;for(ne in k)Q[ne]=x[ne];return F&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=x,h.__reactInternalMemoizedMaskedChildContext=Q),Q}function Zi(h){return h=h.childContextTypes,h!=null}function ef(){ta(vi),ta(As)}function Hf(h,x,k){if(As.current!==Rc)throw Error(r(168));oa(As,x),oa(vi,k)}function U0(h,x,k){var F=h.stateNode;if(x=x.childContextTypes,typeof F.getChildContext!="function")return k;F=F.getChildContext();for(var Q in F)if(!(Q in x))throw Error(r(108,ae(h)||"Unknown",Q));return te({},k,F)}function Bc(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Rc,Rl=As.current,oa(As,h),oa(vi,vi.current),!0}function Yh(h,x,k){var F=h.stateNode;if(!F)throw Error(r(169));k?(h=U0(h,x,Rl),F.__reactInternalMemoizedMergedChildContext=h,ta(vi),ta(As),oa(As,h)):ta(vi),oa(vi,k)}var Wo=null,qa=!1,C=!1;function M(h){Wo===null?Wo=[h]:Wo.push(h)}function ee(h){qa=!0,M(h)}function oe(){if(!C&&Wo!==null){C=!0;var h=0,x=Cr;try{var k=Wo;for(Cr=1;h<k.length;h++){var F=k[h];do F=F(!0);while(F!==null)}Wo=null,qa=!1}catch(Q){throw Wo!==null&&(Wo=Wo.slice(h+1)),ve(ir,oe),Q}finally{Cr=x,C=!1}}return null}var be=[],Te=0,Ie=null,De=0,Be=[],He=0,nt=null,wt=1,Nt="";function pt(h,x){be[Te++]=De,be[Te++]=Ie,Ie=h,De=x}function Ht(h,x,k){Be[He++]=wt,Be[He++]=Nt,Be[He++]=nt,nt=h;var F=wt;h=Nt;var Q=32-Kn(F)-1;F&=~(1<<Q),k+=1;var ne=32-Kn(x)+Q;if(30<ne){var Pe=Q-Q%5;ne=(F&(1<<Pe)-1).toString(32),F>>=Pe,Q-=Pe,wt=1<<32-Kn(x)+Q|k<<Q|F,Nt=ne+h}else wt=1<<ne|k<<Q|F,Nt=h}function Tt(h){h.return!==null&&(pt(h,1),Ht(h,1,0))}function ot(h){for(;h===Ie;)Ie=be[--Te],be[Te]=null,De=be[--Te],be[Te]=null;for(;h===nt;)nt=Be[--He],Be[He]=null,Nt=Be[--He],Be[He]=null,wt=Be[--He],Be[He]=null}var at=null,It=null,Pt=!1,Ut=null;function fr(h,x){var k=Hc(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=h,x=h.deletions,x===null?(h.deletions=[k],h.flags|=16):x.push(k)}function or(h,x){switch(h.tag){case 5:var k=h.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(h.stateNode=x,at=h,It=cs(x.firstChild),!0):!1;case 6:return x=h.pendingProps===""||x.nodeType!==3?null:x,x!==null?(h.stateNode=x,at=h,It=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=nt!==null?{id:wt,overflow:Nt}:null,h.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=Hc(18,null,null,0),k.stateNode=x,k.return=h,h.child=k,at=h,It=null,!0):!1;default:return!1}}function Qr(h){return(h.mode&1)!==0&&(h.flags&128)===0}function gr(h){if(Pt){var x=It;if(x){var k=x;if(!or(h,x)){if(Qr(h))throw Error(r(418));x=cs(k.nextSibling);var F=at;x&&or(h,x)?fr(F,k):(h.flags=h.flags&-4097|2,Pt=!1,at=h)}}else{if(Qr(h))throw Error(r(418));h.flags=h.flags&-4097|2,Pt=!1,at=h}}}function Sn(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;at=h}function Fn(h){if(h!==at)return!1;if(!Pt)return Sn(h),Pt=!0,!1;var x;if((x=h.tag!==3)&&!(x=h.tag!==5)&&(x=h.type,x=x!=="head"&&x!=="body"&&!qf(h.type,h.memoizedProps)),x&&(x=It)){if(Qr(h))throw Pn(),Error(r(418));for(;x;)fr(h,x),x=cs(x.nextSibling)}if(Sn(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="/$"){if(x===0){It=cs(h.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}h=h.nextSibling}It=null}}else It=at?cs(h.stateNode.nextSibling):null;return!0}function Pn(){for(var h=It;h;)h=cs(h.nextSibling)}function mn(){It=at=null,Pt=!1}function ra(h){Ut===null?Ut=[h]:Ut.push(h)}var Bn=N.ReactCurrentBatchConfig;function on(h,x,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(r(309));var F=k.stateNode}if(!F)throw Error(r(147,h));var Q=F,ne=""+h;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===ne?x.ref:(x=function(Pe){var Ze=Q.refs;Pe===null?delete Ze[ne]:Ze[ne]=Pe},x._stringRef=ne,x)}if(typeof h!="string")throw Error(r(284));if(!k._owner)throw Error(r(290,h))}return h}function Ya(h,x){throw h=Object.prototype.toString.call(x),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":h))}function Ii(h){var x=h._init;return x(h._payload)}function Qa(h){function x(kt,ht){if(h){var _t=kt.deletions;_t===null?(kt.deletions=[ht],kt.flags|=16):_t.push(ht)}}function k(kt,ht){if(!h)return null;for(;ht!==null;)x(kt,ht),ht=ht.sibling;return null}function F(kt,ht){for(kt=new Map;ht!==null;)ht.key!==null?kt.set(ht.key,ht):kt.set(ht.index,ht),ht=ht.sibling;return kt}function Q(kt,ht){return kt=e0(kt,ht),kt.index=0,kt.sibling=null,kt}function ne(kt,ht,_t){return kt.index=_t,h?(_t=kt.alternate,_t!==null?(_t=_t.index,_t<ht?(kt.flags|=2,ht):_t):(kt.flags|=2,ht)):(kt.flags|=1048576,ht)}function Pe(kt){return h&&kt.alternate===null&&(kt.flags|=2),kt}function Ze(kt,ht,_t,cr){return ht===null||ht.tag!==6?(ht=n2(_t,kt.mode,cr),ht.return=kt,ht):(ht=Q(ht,_t),ht.return=kt,ht)}function it(kt,ht,_t,cr){var Xr=_t.type;return Xr===A?er(kt,ht,_t.props.children,cr,_t.key):ht!==null&&(ht.elementType===Xr||typeof Xr=="object"&&Xr!==null&&Xr.$$typeof===Y&&Ii(Xr)===ht.type)?(cr=Q(ht,_t.props),cr.ref=on(kt,ht,_t),cr.return=kt,cr):(cr=Xg(_t.type,_t.key,_t.props,null,kt.mode,cr),cr.ref=on(kt,ht,_t),cr.return=kt,cr)}function Et(kt,ht,_t,cr){return ht===null||ht.tag!==4||ht.stateNode.containerInfo!==_t.containerInfo||ht.stateNode.implementation!==_t.implementation?(ht=a2(_t,kt.mode,cr),ht.return=kt,ht):(ht=Q(ht,_t.children||[]),ht.return=kt,ht)}function er(kt,ht,_t,cr,Xr){return ht===null||ht.tag!==7?(ht=X0(_t,kt.mode,cr,Xr),ht.return=kt,ht):(ht=Q(ht,_t),ht.return=kt,ht)}function nr(kt,ht,_t){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return ht=n2(""+ht,kt.mode,_t),ht.return=kt,ht;if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case S:return _t=Xg(ht.type,ht.key,ht.props,null,kt.mode,_t),_t.ref=on(kt,null,ht),_t.return=kt,_t;case E:return ht=a2(ht,kt.mode,_t),ht.return=kt,ht;case Y:var cr=ht._init;return nr(kt,cr(ht._payload),_t)}if(de(ht)||X(ht))return ht=X0(ht,kt.mode,_t,null),ht.return=kt,ht;Ya(kt,ht)}return null}function Zt(kt,ht,_t,cr){var Xr=ht!==null?ht.key:null;if(typeof _t=="string"&&_t!==""||typeof _t=="number")return Xr!==null?null:Ze(kt,ht,""+_t,cr);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case S:return _t.key===Xr?it(kt,ht,_t,cr):null;case E:return _t.key===Xr?Et(kt,ht,_t,cr):null;case Y:return Xr=_t._init,Zt(kt,ht,Xr(_t._payload),cr)}if(de(_t)||X(_t))return Xr!==null?null:er(kt,ht,_t,cr,null);Ya(kt,_t)}return null}function Er(kt,ht,_t,cr,Xr){if(typeof cr=="string"&&cr!==""||typeof cr=="number")return kt=kt.get(_t)||null,Ze(ht,kt,""+cr,Xr);if(typeof cr=="object"&&cr!==null){switch(cr.$$typeof){case S:return kt=kt.get(cr.key===null?_t:cr.key)||null,it(ht,kt,cr,Xr);case E:return kt=kt.get(cr.key===null?_t:cr.key)||null,Et(ht,kt,cr,Xr);case Y:var tn=cr._init;return Er(kt,ht,_t,tn(cr._payload),Xr)}if(de(cr)||X(cr))return kt=kt.get(_t)||null,er(ht,kt,cr,Xr,null);Ya(ht,cr)}return null}function Rr(kt,ht,_t,cr){for(var Xr=null,tn=null,rn=ht,wn=ht=0,ao=null;rn!==null&&wn<_t.length;wn++){rn.index>wn?(ao=rn,rn=null):ao=rn.sibling;var xa=Zt(kt,rn,_t[wn],cr);if(xa===null){rn===null&&(rn=ao);break}h&&rn&&xa.alternate===null&&x(kt,rn),ht=ne(xa,ht,wn),tn===null?Xr=xa:tn.sibling=xa,tn=xa,rn=ao}if(wn===_t.length)return k(kt,rn),Pt&&pt(kt,wn),Xr;if(rn===null){for(;wn<_t.length;wn++)rn=nr(kt,_t[wn],cr),rn!==null&&(ht=ne(rn,ht,wn),tn===null?Xr=rn:tn.sibling=rn,tn=rn);return Pt&&pt(kt,wn),Xr}for(rn=F(kt,rn);wn<_t.length;wn++)ao=Er(rn,kt,wn,_t[wn],cr),ao!==null&&(h&&ao.alternate!==null&&rn.delete(ao.key===null?wn:ao.key),ht=ne(ao,ht,wn),tn===null?Xr=ao:tn.sibling=ao,tn=ao);return h&&rn.forEach(function(t0){return x(kt,t0)}),Pt&&pt(kt,wn),Xr}function zr(kt,ht,_t,cr){var Xr=X(_t);if(typeof Xr!="function")throw Error(r(150));if(_t=Xr.call(_t),_t==null)throw Error(r(151));for(var tn=Xr=null,rn=ht,wn=ht=0,ao=null,xa=_t.next();rn!==null&&!xa.done;wn++,xa=_t.next()){rn.index>wn?(ao=rn,rn=null):ao=rn.sibling;var t0=Zt(kt,rn,xa.value,cr);if(t0===null){rn===null&&(rn=ao);break}h&&rn&&t0.alternate===null&&x(kt,rn),ht=ne(t0,ht,wn),tn===null?Xr=t0:tn.sibling=t0,tn=t0,rn=ao}if(xa.done)return k(kt,rn),Pt&&pt(kt,wn),Xr;if(rn===null){for(;!xa.done;wn++,xa=_t.next())xa=nr(kt,xa.value,cr),xa!==null&&(ht=ne(xa,ht,wn),tn===null?Xr=xa:tn.sibling=xa,tn=xa);return Pt&&pt(kt,wn),Xr}for(rn=F(kt,rn);!xa.done;wn++,xa=_t.next())xa=Er(rn,kt,wn,xa.value,cr),xa!==null&&(h&&xa.alternate!==null&&rn.delete(xa.key===null?wn:xa.key),ht=ne(xa,ht,wn),tn===null?Xr=xa:tn.sibling=xa,tn=xa);return h&&rn.forEach(function(GB){return x(kt,GB)}),Pt&&pt(kt,wn),Xr}function ai(kt,ht,_t,cr){if(typeof _t=="object"&&_t!==null&&_t.type===A&&_t.key===null&&(_t=_t.props.children),typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case S:e:{for(var Xr=_t.key,tn=ht;tn!==null;){if(tn.key===Xr){if(Xr=_t.type,Xr===A){if(tn.tag===7){k(kt,tn.sibling),ht=Q(tn,_t.props.children),ht.return=kt,kt=ht;break e}}else if(tn.elementType===Xr||typeof Xr=="object"&&Xr!==null&&Xr.$$typeof===Y&&Ii(Xr)===tn.type){k(kt,tn.sibling),ht=Q(tn,_t.props),ht.ref=on(kt,tn,_t),ht.return=kt,kt=ht;break e}k(kt,tn);break}else x(kt,tn);tn=tn.sibling}_t.type===A?(ht=X0(_t.props.children,kt.mode,cr,_t.key),ht.return=kt,kt=ht):(cr=Xg(_t.type,_t.key,_t.props,null,kt.mode,cr),cr.ref=on(kt,ht,_t),cr.return=kt,kt=cr)}return Pe(kt);case E:e:{for(tn=_t.key;ht!==null;){if(ht.key===tn)if(ht.tag===4&&ht.stateNode.containerInfo===_t.containerInfo&&ht.stateNode.implementation===_t.implementation){k(kt,ht.sibling),ht=Q(ht,_t.children||[]),ht.return=kt,kt=ht;break e}else{k(kt,ht);break}else x(kt,ht);ht=ht.sibling}ht=a2(_t,kt.mode,cr),ht.return=kt,kt=ht}return Pe(kt);case Y:return tn=_t._init,ai(kt,ht,tn(_t._payload),cr)}if(de(_t))return Rr(kt,ht,_t,cr);if(X(_t))return zr(kt,ht,_t,cr);Ya(kt,_t)}return typeof _t=="string"&&_t!==""||typeof _t=="number"?(_t=""+_t,ht!==null&&ht.tag===6?(k(kt,ht.sibling),ht=Q(ht,_t),ht.return=kt,kt=ht):(k(kt,ht),ht=n2(_t,kt.mode,cr),ht.return=kt,kt=ht),Pe(kt)):k(kt,ht)}return ai}var Es=Qa(!0),na=Qa(!1),Is=vl(null),bi=null,Ja=null,$a=null;function Hs(){$a=Ja=bi=null}function Di(h){var x=Is.current;ta(Is),h._currentValue=x}function Go(h,x,k){for(;h!==null;){var F=h.alternate;if((h.childLanes&x)!==x?(h.childLanes|=x,F!==null&&(F.childLanes|=x)):F!==null&&(F.childLanes&x)!==x&&(F.childLanes|=x),h===k)break;h=h.return}}function Za(h,x){bi=h,$a=Ja=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&x)!==0&&(Hl=!0),h.firstContext=null)}function as(h){var x=h._currentValue;if($a!==h)if(h={context:h,memoizedValue:x,next:null},Ja===null){if(bi===null)throw Error(r(308));Ja=h,bi.dependencies={lanes:0,firstContext:h}}else Ja=Ja.next=h;return x}var Ds=null;function Uc(h){Ds===null?Ds=[h]:Ds.push(h)}function eo(h,x,k,F){var Q=x.interleaved;return Q===null?(k.next=k,Uc(x)):(k.next=Q.next,Q.next=k),x.interleaved=k,Yn(h,F)}function Yn(h,x){h.lanes|=x;var k=h.alternate;for(k!==null&&(k.lanes|=x),k=h,h=h.return;h!==null;)h.childLanes|=x,k=h.alternate,k!==null&&(k.childLanes|=x),k=h,h=h.return;return k.tag===3?k.stateNode:null}var Bl=!1;function Ad(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function pu(h,x){h=h.updateQueue,x.updateQueue===h&&(x.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Vo(h,x){return{eventTime:h,lane:x,tag:0,payload:null,callback:null,next:null}}function jo(h,x,k){var F=h.updateQueue;if(F===null)return null;if(F=F.shared,(da&2)!==0){var Q=F.pending;return Q===null?x.next=x:(x.next=Q.next,Q.next=x),F.pending=x,Yn(h,k)}return Q=F.interleaved,Q===null?(x.next=x,Uc(F)):(x.next=Q.next,Q.next=x),F.interleaved=x,Yn(h,k)}function oc(h,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var F=x.lanes;F&=h.pendingLanes,k|=F,x.lanes=k,Rt(h,k)}}function ko(h,x){var k=h.updateQueue,F=h.alternate;if(F!==null&&(F=F.updateQueue,k===F)){var Q=null,ne=null;if(k=k.firstBaseUpdate,k!==null){do{var Pe={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};ne===null?Q=ne=Pe:ne=ne.next=Pe,k=k.next}while(k!==null);ne===null?Q=ne=x:ne=ne.next=x}else Q=ne=x;k={baseState:F.baseState,firstBaseUpdate:Q,lastBaseUpdate:ne,shared:F.shared,effects:F.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=x:h.next=x,k.lastBaseUpdate=x}function Ul(h,x,k,F){var Q=h.updateQueue;Bl=!1;var ne=Q.firstBaseUpdate,Pe=Q.lastBaseUpdate,Ze=Q.shared.pending;if(Ze!==null){Q.shared.pending=null;var it=Ze,Et=it.next;it.next=null,Pe===null?ne=Et:Pe.next=Et,Pe=it;var er=h.alternate;er!==null&&(er=er.updateQueue,Ze=er.lastBaseUpdate,Ze!==Pe&&(Ze===null?er.firstBaseUpdate=Et:Ze.next=Et,er.lastBaseUpdate=it))}if(ne!==null){var nr=Q.baseState;Pe=0,er=Et=it=null,Ze=ne;do{var Zt=Ze.lane,Er=Ze.eventTime;if((F&Zt)===Zt){er!==null&&(er=er.next={eventTime:Er,lane:0,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null});e:{var Rr=h,zr=Ze;switch(Zt=x,Er=k,zr.tag){case 1:if(Rr=zr.payload,typeof Rr=="function"){nr=Rr.call(Er,nr,Zt);break e}nr=Rr;break e;case 3:Rr.flags=Rr.flags&-65537|128;case 0:if(Rr=zr.payload,Zt=typeof Rr=="function"?Rr.call(Er,nr,Zt):Rr,Zt==null)break e;nr=te({},nr,Zt);break e;case 2:Bl=!0}}Ze.callback!==null&&Ze.lane!==0&&(h.flags|=64,Zt=Q.effects,Zt===null?Q.effects=[Ze]:Zt.push(Ze))}else Er={eventTime:Er,lane:Zt,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null},er===null?(Et=er=Er,it=nr):er=er.next=Er,Pe|=Zt;if(Ze=Ze.next,Ze===null){if(Ze=Q.shared.pending,Ze===null)break;Zt=Ze,Ze=Zt.next,Zt.next=null,Q.lastBaseUpdate=Zt,Q.shared.pending=null}}while(!0);if(er===null&&(it=nr),Q.baseState=it,Q.firstBaseUpdate=Et,Q.lastBaseUpdate=er,x=Q.shared.interleaved,x!==null){Q=x;do Pe|=Q.lane,Q=Q.next;while(Q!==x)}else ne===null&&(Q.shared.lanes=0);W0|=Pe,h.lanes=Pe,h.memoizedState=nr}}function Ed(h,x,k){if(h=x.effects,x.effects=null,h!==null)for(x=0;x<h.length;x++){var F=h[x],Q=F.callback;if(Q!==null){if(F.callback=null,F=k,typeof Q!="function")throw Error(r(191,Q));Q.call(F)}}}var xu={},So=vl(xu),gu=vl(xu),qc=vl(xu);function lc(h){if(h===xu)throw Error(r(174));return h}function vu(h,x){switch(oa(qc,x),oa(gu,h),oa(So,xu),h=x.nodeType,h){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:qe(null,"");break;default:h=h===8?x.parentNode:x,x=h.namespaceURI||null,h=h.tagName,x=qe(x,h)}ta(So),oa(So,x)}function ql(){ta(So),ta(gu),ta(qc)}function Qh(h){lc(qc.current);var x=lc(So.current),k=qe(x,h.type);x!==k&&(oa(gu,h),oa(So,k))}function tf(h){gu.current===h&&(ta(So),ta(gu))}var ya=vl(0);function ri(h){for(var x=h;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var cc=[];function q0(){for(var h=0;h<cc.length;h++)cc[h]._workInProgressVersionPrimary=null;cc.length=0}var Td=N.ReactCurrentDispatcher,Wf=N.ReactCurrentBatchConfig,$l=0,za=null,Ts=null,us=null,bu=!1,dc=!1,$c=0,$0=0;function Ls(){throw Error(r(321))}function Gf(h,x){if(x===null)return!1;for(var k=0;k<x.length&&k<h.length;k++)if(!Xn(h[k],x[k]))return!1;return!0}function rf(h,x,k,F,Q,ne){if($l=ne,za=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Td.current=h===null||h.memoizedState===null?vB:bB,h=k(F,Q),dc){ne=0;do{if(dc=!1,$c=0,25<=ne)throw Error(r(301));ne+=1,us=Ts=null,x.updateQueue=null,Td.current=yB,h=k(F,Q)}while(dc)}if(Td.current=Lg,x=Ts!==null&&Ts.next!==null,$l=0,us=Ts=za=null,bu=!1,x)throw Error(r(300));return h}function zl(){var h=$c!==0;return $c=0,h}function Ko(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return us===null?za.memoizedState=us=h:us=us.next=h,us}function to(){if(Ts===null){var h=za.alternate;h=h!==null?h.memoizedState:null}else h=Ts.next;var x=us===null?za.memoizedState:us.next;if(x!==null)us=x,Ts=h;else{if(h===null)throw Error(r(310));Ts=h,h={memoizedState:Ts.memoizedState,baseState:Ts.baseState,baseQueue:Ts.baseQueue,queue:Ts.queue,next:null},us===null?za.memoizedState=us=h:us=us.next=h}return us}function nf(h,x){return typeof x=="function"?x(h):x}function Vf(h){var x=to(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var F=Ts,Q=F.baseQueue,ne=k.pending;if(ne!==null){if(Q!==null){var Pe=Q.next;Q.next=ne.next,ne.next=Pe}F.baseQueue=Q=ne,k.pending=null}if(Q!==null){ne=Q.next,F=F.baseState;var Ze=Pe=null,it=null,Et=ne;do{var er=Et.lane;if(($l&er)===er)it!==null&&(it=it.next={lane:0,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null}),F=Et.hasEagerState?Et.eagerState:h(F,Et.action);else{var nr={lane:er,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null};it===null?(Ze=it=nr,Pe=F):it=it.next=nr,za.lanes|=er,W0|=er}Et=Et.next}while(Et!==null&&Et!==ne);it===null?Pe=F:it.next=Ze,Xn(F,x.memoizedState)||(Hl=!0),x.memoizedState=F,x.baseState=Pe,x.baseQueue=it,k.lastRenderedState=F}if(h=k.interleaved,h!==null){Q=h;do ne=Q.lane,za.lanes|=ne,W0|=ne,Q=Q.next;while(Q!==h)}else Q===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function uc(h){var x=to(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var F=k.dispatch,Q=k.pending,ne=x.memoizedState;if(Q!==null){k.pending=null;var Pe=Q=Q.next;do ne=h(ne,Pe.action),Pe=Pe.next;while(Pe!==Q);Xn(ne,x.memoizedState)||(Hl=!0),x.memoizedState=ne,x.baseQueue===null&&(x.baseState=ne),k.lastRenderedState=ne}return[ne,F]}function Od(){}function af(h,x){var k=za,F=to(),Q=x(),ne=!Xn(F.memoizedState,Q);if(ne&&(F.memoizedState=Q,Hl=!0),F=F.queue,St(H0.bind(null,k,F,h),[h]),F.getSnapshot!==x||ne||us!==null&&us.memoizedState.tag&1){if(k.flags|=2048,he(9,z0.bind(null,k,F,Q,x),void 0,null),no===null)throw Error(r(349));($l&30)!==0||ro(k,x,Q)}return Q}function ro(h,x,k){h.flags|=16384,h={getSnapshot:x,value:k},x=za.updateQueue,x===null?(x={lastEffect:null,stores:null},za.updateQueue=x,x.stores=[h]):(k=x.stores,k===null?x.stores=[h]:k.push(h))}function z0(h,x,k,F){x.value=k,x.getSnapshot=F,fc(x)&&sf(h)}function H0(h,x,k){return k(function(){fc(x)&&sf(h)})}function fc(h){var x=h.getSnapshot;h=h.value;try{var k=x();return!Xn(h,k)}catch{return!0}}function sf(h){var x=Yn(h,1);x!==null&&Ld(x,h,1,-1)}function L(h){var x=Ko();return typeof h=="function"&&(h=h()),x.memoizedState=x.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nf,lastRenderedState:h},x.queue=h,h=h.dispatch=gB.bind(null,za,h),[x.memoizedState,h]}function he(h,x,k,F){return h={tag:h,create:x,destroy:k,deps:F,next:null},x=za.updateQueue,x===null?(x={lastEffect:null,stores:null},za.updateQueue=x,x.lastEffect=h.next=h):(k=x.lastEffect,k===null?x.lastEffect=h.next=h:(F=k.next,k.next=h,h.next=F,x.lastEffect=h)),h}function ye(){return to().memoizedState}function Qe(h,x,k,F){var Q=Ko();za.flags|=h,Q.memoizedState=he(1|x,k,void 0,F===void 0?null:F)}function st(h,x,k,F){var Q=to();F=F===void 0?null:F;var ne=void 0;if(Ts!==null){var Pe=Ts.memoizedState;if(ne=Pe.destroy,F!==null&&Gf(F,Pe.deps)){Q.memoizedState=he(x,k,ne,F);return}}za.flags|=h,Q.memoizedState=he(1|x,k,ne,F)}function Mt(h,x){return Qe(8390656,8,h,x)}function St(h,x){return st(2048,8,h,x)}function Gt(h,x){return st(4,2,h,x)}function Tr(h,x){return st(4,4,h,x)}function jn(h,x){if(typeof x=="function")return h=h(),x(h),function(){x(null)};if(x!=null)return h=h(),x.current=h,function(){x.current=null}}function la(h,x,k){return k=k!=null?k.concat([h]):null,st(4,4,jn.bind(null,x,h),k)}function ca(){}function ni(h,x){var k=to();x=x===void 0?null:x;var F=k.memoizedState;return F!==null&&x!==null&&Gf(x,F[1])?F[0]:(k.memoizedState=[h,x],h)}function Kf(h,x){var k=to();x=x===void 0?null:x;var F=k.memoizedState;return F!==null&&x!==null&&Gf(x,F[1])?F[0]:(h=h(),k.memoizedState=[h,x],h)}function Ty(h,x,k){return($l&21)===0?(h.baseState&&(h.baseState=!1,Hl=!0),h.memoizedState=k):(Xn(k,x)||(k=sa(),za.lanes|=k,W0|=k,h.baseState=!0),x)}function pB(h,x){var k=Cr;Cr=k!==0&&4>k?k:4,h(!0);var F=Wf.transition;Wf.transition={};try{h(!1),x()}finally{Cr=k,Wf.transition=F}}function l_(){return to().memoizedState}function xB(h,x,k){var F=Jf(h);if(k={lane:F,action:k,hasEagerState:!1,eagerState:null,next:null},c_(h))d_(x,k);else if(k=eo(h,x,k,F),k!==null){var Q=yl();Ld(k,h,F,Q),u_(k,x,F)}}function gB(h,x,k){var F=Jf(h),Q={lane:F,action:k,hasEagerState:!1,eagerState:null,next:null};if(c_(h))d_(x,Q);else{var ne=h.alternate;if(h.lanes===0&&(ne===null||ne.lanes===0)&&(ne=x.lastRenderedReducer,ne!==null))try{var Pe=x.lastRenderedState,Ze=ne(Pe,k);if(Q.hasEagerState=!0,Q.eagerState=Ze,Xn(Ze,Pe)){var it=x.interleaved;it===null?(Q.next=Q,Uc(x)):(Q.next=it.next,it.next=Q),x.interleaved=Q;return}}catch{}k=eo(h,x,Q,F),k!==null&&(Q=yl(),Ld(k,h,F,Q),u_(k,x,F))}}function c_(h){var x=h.alternate;return h===za||x!==null&&x===za}function d_(h,x){dc=bu=!0;var k=h.pending;k===null?x.next=x:(x.next=k.next,k.next=x),h.pending=x}function u_(h,x,k){if((k&4194240)!==0){var F=x.lanes;F&=h.pendingLanes,k|=F,x.lanes=k,Rt(h,k)}}var Lg={readContext:as,useCallback:Ls,useContext:Ls,useEffect:Ls,useImperativeHandle:Ls,useInsertionEffect:Ls,useLayoutEffect:Ls,useMemo:Ls,useReducer:Ls,useRef:Ls,useState:Ls,useDebugValue:Ls,useDeferredValue:Ls,useTransition:Ls,useMutableSource:Ls,useSyncExternalStore:Ls,useId:Ls,unstable_isNewReconciler:!1},vB={readContext:as,useCallback:function(h,x){return Ko().memoizedState=[h,x===void 0?null:x],h},useContext:as,useEffect:Mt,useImperativeHandle:function(h,x,k){return k=k!=null?k.concat([h]):null,Qe(4194308,4,jn.bind(null,x,h),k)},useLayoutEffect:function(h,x){return Qe(4194308,4,h,x)},useInsertionEffect:function(h,x){return Qe(4,2,h,x)},useMemo:function(h,x){var k=Ko();return x=x===void 0?null:x,h=h(),k.memoizedState=[h,x],h},useReducer:function(h,x,k){var F=Ko();return x=k!==void 0?k(x):x,F.memoizedState=F.baseState=x,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:x},F.queue=h,h=h.dispatch=xB.bind(null,za,h),[F.memoizedState,h]},useRef:function(h){var x=Ko();return h={current:h},x.memoizedState=h},useState:L,useDebugValue:ca,useDeferredValue:function(h){return Ko().memoizedState=h},useTransition:function(){var h=L(!1),x=h[0];return h=pB.bind(null,h[1]),Ko().memoizedState=h,[x,h]},useMutableSource:function(){},useSyncExternalStore:function(h,x,k){var F=za,Q=Ko();if(Pt){if(k===void 0)throw Error(r(407));k=k()}else{if(k=x(),no===null)throw Error(r(349));($l&30)!==0||ro(F,x,k)}Q.memoizedState=k;var ne={value:k,getSnapshot:x};return Q.queue=ne,Mt(H0.bind(null,F,ne,h),[h]),F.flags|=2048,he(9,z0.bind(null,F,ne,k,x),void 0,null),k},useId:function(){var h=Ko(),x=no.identifierPrefix;if(Pt){var k=Nt,F=wt;k=(F&~(1<<32-Kn(F)-1)).toString(32)+k,x=":"+x+"R"+k,k=$c++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=$0++,x=":"+x+"r"+k.toString(32)+":";return h.memoizedState=x},unstable_isNewReconciler:!1},bB={readContext:as,useCallback:ni,useContext:as,useEffect:St,useImperativeHandle:la,useInsertionEffect:Gt,useLayoutEffect:Tr,useMemo:Kf,useReducer:Vf,useRef:ye,useState:function(){return Vf(nf)},useDebugValue:ca,useDeferredValue:function(h){var x=to();return Ty(x,Ts.memoizedState,h)},useTransition:function(){var h=Vf(nf)[0],x=to().memoizedState;return[h,x]},useMutableSource:Od,useSyncExternalStore:af,useId:l_,unstable_isNewReconciler:!1},yB={readContext:as,useCallback:ni,useContext:as,useEffect:St,useImperativeHandle:la,useInsertionEffect:Gt,useLayoutEffect:Tr,useMemo:Kf,useReducer:uc,useRef:ye,useState:function(){return uc(nf)},useDebugValue:ca,useDeferredValue:function(h){var x=to();return Ts===null?x.memoizedState=h:Ty(x,Ts.memoizedState,h)},useTransition:function(){var h=uc(nf)[0],x=to().memoizedState;return[h,x]},useMutableSource:Od,useSyncExternalStore:af,useId:l_,unstable_isNewReconciler:!1};function Pd(h,x){if(h&&h.defaultProps){x=te({},x),h=h.defaultProps;for(var k in h)x[k]===void 0&&(x[k]=h[k]);return x}return x}function Oy(h,x,k,F){x=h.memoizedState,k=k(F,x),k=k==null?x:te({},x,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var Fg={isMounted:function(h){return(h=h._reactInternals)?Fe(h)===h:!1},enqueueSetState:function(h,x,k){h=h._reactInternals;var F=yl(),Q=Jf(h),ne=Vo(F,Q);ne.payload=x,k!=null&&(ne.callback=k),x=jo(h,ne,Q),x!==null&&(Ld(x,h,Q,F),oc(x,h,Q))},enqueueReplaceState:function(h,x,k){h=h._reactInternals;var F=yl(),Q=Jf(h),ne=Vo(F,Q);ne.tag=1,ne.payload=x,k!=null&&(ne.callback=k),x=jo(h,ne,Q),x!==null&&(Ld(x,h,Q,F),oc(x,h,Q))},enqueueForceUpdate:function(h,x){h=h._reactInternals;var k=yl(),F=Jf(h),Q=Vo(k,F);Q.tag=2,x!=null&&(Q.callback=x),x=jo(h,Q,F),x!==null&&(Ld(x,h,F,k),oc(x,h,F))}};function f_(h,x,k,F,Q,ne,Pe){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(F,ne,Pe):x.prototype&&x.prototype.isPureReactComponent?!Il(k,F)||!Il(Q,ne):!0}function h_(h,x,k){var F=!1,Q=Rc,ne=x.contextType;return typeof ne=="object"&&ne!==null?ne=as(ne):(Q=Zi(x)?Rl:As.current,F=x.contextTypes,ne=(F=F!=null)?Cd(h,Q):Rc),x=new x(k,ne),h.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Fg,h.stateNode=x,x._reactInternals=h,F&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=Q,h.__reactInternalMemoizedMaskedChildContext=ne),x}function m_(h,x,k,F){h=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,F),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,F),x.state!==h&&Fg.enqueueReplaceState(x,x.state,null)}function Py(h,x,k,F){var Q=h.stateNode;Q.props=k,Q.state=h.memoizedState,Q.refs={},Ad(h);var ne=x.contextType;typeof ne=="object"&&ne!==null?Q.context=as(ne):(ne=Zi(x)?Rl:As.current,Q.context=Cd(h,ne)),Q.state=h.memoizedState,ne=x.getDerivedStateFromProps,typeof ne=="function"&&(Oy(h,x,ne,k),Q.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(x=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),x!==Q.state&&Fg.enqueueReplaceState(Q,Q.state,null),Ul(h,k,Q,F),Q.state=h.memoizedState),typeof Q.componentDidMount=="function"&&(h.flags|=4194308)}function Jh(h,x){try{var k="",F=x;do k+=U(F),F=F.return;while(F);var Q=k}catch(ne){Q=`
Error generating stack: `+ne.message+`
`+ne.stack}return{value:h,source:x,stack:Q,digest:null}}function Iy(h,x,k){return{value:h,source:null,stack:k??null,digest:x??null}}function Dy(h,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var wB=typeof WeakMap=="function"?WeakMap:Map;function p_(h,x,k){k=Vo(-1,k),k.tag=3,k.payload={element:null};var F=x.value;return k.callback=function(){zg||(zg=!0,Xy=F),Dy(h,x)},k}function x_(h,x,k){k=Vo(-1,k),k.tag=3;var F=h.type.getDerivedStateFromError;if(typeof F=="function"){var Q=x.value;k.payload=function(){return F(Q)},k.callback=function(){Dy(h,x)}}var ne=h.stateNode;return ne!==null&&typeof ne.componentDidCatch=="function"&&(k.callback=function(){Dy(h,x),typeof F!="function"&&(Yf===null?Yf=new Set([this]):Yf.add(this));var Pe=x.stack;this.componentDidCatch(x.value,{componentStack:Pe!==null?Pe:""})}),k}function g_(h,x,k){var F=h.pingCache;if(F===null){F=h.pingCache=new wB;var Q=new Set;F.set(x,Q)}else Q=F.get(x),Q===void 0&&(Q=new Set,F.set(x,Q));Q.has(k)||(Q.add(k),h=LB.bind(null,h,x,k),x.then(h,h))}function v_(h){do{var x;if((x=h.tag===13)&&(x=h.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return h;h=h.return}while(h!==null);return null}function b_(h,x,k,F,Q){return(h.mode&1)===0?(h===x?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=Vo(-1,1),x.tag=2,jo(k,x,1))),k.lanes|=1),h):(h.flags|=65536,h.lanes=Q,h)}var NB=N.ReactCurrentOwner,Hl=!1;function bl(h,x,k,F){x.child=h===null?na(x,null,k,F):Es(x,h.child,k,F)}function y_(h,x,k,F,Q){k=k.render;var ne=x.ref;return Za(x,Q),F=rf(h,x,k,F,ne,Q),k=zl(),h!==null&&!Hl?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~Q,of(h,x,Q)):(Pt&&k&&Tt(x),x.flags|=1,bl(h,x,F,Q),x.child)}function w_(h,x,k,F,Q){if(h===null){var ne=k.type;return typeof ne=="function"&&!r2(ne)&&ne.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=ne,N_(h,x,ne,F,Q)):(h=Xg(k.type,null,F,x,x.mode,Q),h.ref=x.ref,h.return=x,x.child=h)}if(ne=h.child,(h.lanes&Q)===0){var Pe=ne.memoizedProps;if(k=k.compare,k=k!==null?k:Il,k(Pe,F)&&h.ref===x.ref)return of(h,x,Q)}return x.flags|=1,h=e0(ne,F),h.ref=x.ref,h.return=x,x.child=h}function N_(h,x,k,F,Q){if(h!==null){var ne=h.memoizedProps;if(Il(ne,F)&&h.ref===x.ref)if(Hl=!1,x.pendingProps=F=ne,(h.lanes&Q)!==0)(h.flags&131072)!==0&&(Hl=!0);else return x.lanes=h.lanes,of(h,x,Q)}return Ly(h,x,k,F,Q)}function j_(h,x,k){var F=x.pendingProps,Q=F.children,ne=h!==null?h.memoizedState:null;if(F.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},oa(em,hc),hc|=k;else{if((k&1073741824)===0)return h=ne!==null?ne.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:h,cachePool:null,transitions:null},x.updateQueue=null,oa(em,hc),hc|=h,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},F=ne!==null?ne.baseLanes:k,oa(em,hc),hc|=F}else ne!==null?(F=ne.baseLanes|k,x.memoizedState=null):F=k,oa(em,hc),hc|=F;return bl(h,x,Q,k),x.child}function k_(h,x){var k=x.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function Ly(h,x,k,F,Q){var ne=Zi(k)?Rl:As.current;return ne=Cd(x,ne),Za(x,Q),k=rf(h,x,k,F,ne,Q),F=zl(),h!==null&&!Hl?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~Q,of(h,x,Q)):(Pt&&F&&Tt(x),x.flags|=1,bl(h,x,k,Q),x.child)}function S_(h,x,k,F,Q){if(Zi(k)){var ne=!0;Bc(x)}else ne=!1;if(Za(x,Q),x.stateNode===null)Rg(h,x),h_(x,k,F),Py(x,k,F,Q),F=!0;else if(h===null){var Pe=x.stateNode,Ze=x.memoizedProps;Pe.props=Ze;var it=Pe.context,Et=k.contextType;typeof Et=="object"&&Et!==null?Et=as(Et):(Et=Zi(k)?Rl:As.current,Et=Cd(x,Et));var er=k.getDerivedStateFromProps,nr=typeof er=="function"||typeof Pe.getSnapshotBeforeUpdate=="function";nr||typeof Pe.UNSAFE_componentWillReceiveProps!="function"&&typeof Pe.componentWillReceiveProps!="function"||(Ze!==F||it!==Et)&&m_(x,Pe,F,Et),Bl=!1;var Zt=x.memoizedState;Pe.state=Zt,Ul(x,F,Pe,Q),it=x.memoizedState,Ze!==F||Zt!==it||vi.current||Bl?(typeof er=="function"&&(Oy(x,k,er,F),it=x.memoizedState),(Ze=Bl||f_(x,k,Ze,F,Zt,it,Et))?(nr||typeof Pe.UNSAFE_componentWillMount!="function"&&typeof Pe.componentWillMount!="function"||(typeof Pe.componentWillMount=="function"&&Pe.componentWillMount(),typeof Pe.UNSAFE_componentWillMount=="function"&&Pe.UNSAFE_componentWillMount()),typeof Pe.componentDidMount=="function"&&(x.flags|=4194308)):(typeof Pe.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=F,x.memoizedState=it),Pe.props=F,Pe.state=it,Pe.context=Et,F=Ze):(typeof Pe.componentDidMount=="function"&&(x.flags|=4194308),F=!1)}else{Pe=x.stateNode,pu(h,x),Ze=x.memoizedProps,Et=x.type===x.elementType?Ze:Pd(x.type,Ze),Pe.props=Et,nr=x.pendingProps,Zt=Pe.context,it=k.contextType,typeof it=="object"&&it!==null?it=as(it):(it=Zi(k)?Rl:As.current,it=Cd(x,it));var Er=k.getDerivedStateFromProps;(er=typeof Er=="function"||typeof Pe.getSnapshotBeforeUpdate=="function")||typeof Pe.UNSAFE_componentWillReceiveProps!="function"&&typeof Pe.componentWillReceiveProps!="function"||(Ze!==nr||Zt!==it)&&m_(x,Pe,F,it),Bl=!1,Zt=x.memoizedState,Pe.state=Zt,Ul(x,F,Pe,Q);var Rr=x.memoizedState;Ze!==nr||Zt!==Rr||vi.current||Bl?(typeof Er=="function"&&(Oy(x,k,Er,F),Rr=x.memoizedState),(Et=Bl||f_(x,k,Et,F,Zt,Rr,it)||!1)?(er||typeof Pe.UNSAFE_componentWillUpdate!="function"&&typeof Pe.componentWillUpdate!="function"||(typeof Pe.componentWillUpdate=="function"&&Pe.componentWillUpdate(F,Rr,it),typeof Pe.UNSAFE_componentWillUpdate=="function"&&Pe.UNSAFE_componentWillUpdate(F,Rr,it)),typeof Pe.componentDidUpdate=="function"&&(x.flags|=4),typeof Pe.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof Pe.componentDidUpdate!="function"||Ze===h.memoizedProps&&Zt===h.memoizedState||(x.flags|=4),typeof Pe.getSnapshotBeforeUpdate!="function"||Ze===h.memoizedProps&&Zt===h.memoizedState||(x.flags|=1024),x.memoizedProps=F,x.memoizedState=Rr),Pe.props=F,Pe.state=Rr,Pe.context=it,F=Et):(typeof Pe.componentDidUpdate!="function"||Ze===h.memoizedProps&&Zt===h.memoizedState||(x.flags|=4),typeof Pe.getSnapshotBeforeUpdate!="function"||Ze===h.memoizedProps&&Zt===h.memoizedState||(x.flags|=1024),F=!1)}return Fy(h,x,k,F,ne,Q)}function Fy(h,x,k,F,Q,ne){k_(h,x);var Pe=(x.flags&128)!==0;if(!F&&!Pe)return Q&&Yh(x,k,!1),of(h,x,ne);F=x.stateNode,NB.current=x;var Ze=Pe&&typeof k.getDerivedStateFromError!="function"?null:F.render();return x.flags|=1,h!==null&&Pe?(x.child=Es(x,h.child,null,ne),x.child=Es(x,null,Ze,ne)):bl(h,x,Ze,ne),x.memoizedState=F.state,Q&&Yh(x,k,!0),x.child}function __(h){var x=h.stateNode;x.pendingContext?Hf(h,x.pendingContext,x.pendingContext!==x.context):x.context&&Hf(h,x.context,!1),vu(h,x.containerInfo)}function C_(h,x,k,F,Q){return mn(),ra(Q),x.flags|=256,bl(h,x,k,F),x.child}var My={dehydrated:null,treeContext:null,retryLane:0};function Ry(h){return{baseLanes:h,cachePool:null,transitions:null}}function A_(h,x,k){var F=x.pendingProps,Q=ya.current,ne=!1,Pe=(x.flags&128)!==0,Ze;if((Ze=Pe)||(Ze=h!==null&&h.memoizedState===null?!1:(Q&2)!==0),Ze?(ne=!0,x.flags&=-129):(h===null||h.memoizedState!==null)&&(Q|=1),oa(ya,Q&1),h===null)return gr(x),h=x.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((x.mode&1)===0?x.lanes=1:h.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(Pe=F.children,h=F.fallback,ne?(F=x.mode,ne=x.child,Pe={mode:"hidden",children:Pe},(F&1)===0&&ne!==null?(ne.childLanes=0,ne.pendingProps=Pe):ne=Yg(Pe,F,0,null),h=X0(h,F,k,null),ne.return=x,h.return=x,ne.sibling=h,x.child=ne,x.child.memoizedState=Ry(k),x.memoizedState=My,h):By(x,Pe));if(Q=h.memoizedState,Q!==null&&(Ze=Q.dehydrated,Ze!==null))return jB(h,x,Pe,F,Ze,Q,k);if(ne){ne=F.fallback,Pe=x.mode,Q=h.child,Ze=Q.sibling;var it={mode:"hidden",children:F.children};return(Pe&1)===0&&x.child!==Q?(F=x.child,F.childLanes=0,F.pendingProps=it,x.deletions=null):(F=e0(Q,it),F.subtreeFlags=Q.subtreeFlags&14680064),Ze!==null?ne=e0(Ze,ne):(ne=X0(ne,Pe,k,null),ne.flags|=2),ne.return=x,F.return=x,F.sibling=ne,x.child=F,F=ne,ne=x.child,Pe=h.child.memoizedState,Pe=Pe===null?Ry(k):{baseLanes:Pe.baseLanes|k,cachePool:null,transitions:Pe.transitions},ne.memoizedState=Pe,ne.childLanes=h.childLanes&~k,x.memoizedState=My,F}return ne=h.child,h=ne.sibling,F=e0(ne,{mode:"visible",children:F.children}),(x.mode&1)===0&&(F.lanes=k),F.return=x,F.sibling=null,h!==null&&(k=x.deletions,k===null?(x.deletions=[h],x.flags|=16):k.push(h)),x.child=F,x.memoizedState=null,F}function By(h,x){return x=Yg({mode:"visible",children:x},h.mode,0,null),x.return=h,h.child=x}function Mg(h,x,k,F){return F!==null&&ra(F),Es(x,h.child,null,k),h=By(x,x.pendingProps.children),h.flags|=2,x.memoizedState=null,h}function jB(h,x,k,F,Q,ne,Pe){if(k)return x.flags&256?(x.flags&=-257,F=Iy(Error(r(422))),Mg(h,x,Pe,F)):x.memoizedState!==null?(x.child=h.child,x.flags|=128,null):(ne=F.fallback,Q=x.mode,F=Yg({mode:"visible",children:F.children},Q,0,null),ne=X0(ne,Q,Pe,null),ne.flags|=2,F.return=x,ne.return=x,F.sibling=ne,x.child=F,(x.mode&1)!==0&&Es(x,h.child,null,Pe),x.child.memoizedState=Ry(Pe),x.memoizedState=My,ne);if((x.mode&1)===0)return Mg(h,x,Pe,null);if(Q.data==="$!"){if(F=Q.nextSibling&&Q.nextSibling.dataset,F)var Ze=F.dgst;return F=Ze,ne=Error(r(419)),F=Iy(ne,F,void 0),Mg(h,x,Pe,F)}if(Ze=(Pe&h.childLanes)!==0,Hl||Ze){if(F=no,F!==null){switch(Pe&-Pe){case 4:Q=2;break;case 16:Q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Q=32;break;case 536870912:Q=268435456;break;default:Q=0}Q=(Q&(F.suspendedLanes|Pe))!==0?0:Q,Q!==0&&Q!==ne.retryLane&&(ne.retryLane=Q,Yn(h,Q),Ld(F,h,Q,-1))}return t2(),F=Iy(Error(r(421))),Mg(h,x,Pe,F)}return Q.data==="$?"?(x.flags|=128,x.child=h.child,x=FB.bind(null,h),Q._reactRetry=x,null):(h=ne.treeContext,It=cs(Q.nextSibling),at=x,Pt=!0,Ut=null,h!==null&&(Be[He++]=wt,Be[He++]=Nt,Be[He++]=nt,wt=h.id,Nt=h.overflow,nt=x),x=By(x,F.children),x.flags|=4096,x)}function E_(h,x,k){h.lanes|=x;var F=h.alternate;F!==null&&(F.lanes|=x),Go(h.return,x,k)}function Uy(h,x,k,F,Q){var ne=h.memoizedState;ne===null?h.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:F,tail:k,tailMode:Q}:(ne.isBackwards=x,ne.rendering=null,ne.renderingStartTime=0,ne.last=F,ne.tail=k,ne.tailMode=Q)}function T_(h,x,k){var F=x.pendingProps,Q=F.revealOrder,ne=F.tail;if(bl(h,x,F.children,k),F=ya.current,(F&2)!==0)F=F&1|2,x.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=x.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&E_(h,k,x);else if(h.tag===19)E_(h,k,x);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===x)break e;for(;h.sibling===null;){if(h.return===null||h.return===x)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}F&=1}if(oa(ya,F),(x.mode&1)===0)x.memoizedState=null;else switch(Q){case"forwards":for(k=x.child,Q=null;k!==null;)h=k.alternate,h!==null&&ri(h)===null&&(Q=k),k=k.sibling;k=Q,k===null?(Q=x.child,x.child=null):(Q=k.sibling,k.sibling=null),Uy(x,!1,Q,k,ne);break;case"backwards":for(k=null,Q=x.child,x.child=null;Q!==null;){if(h=Q.alternate,h!==null&&ri(h)===null){x.child=Q;break}h=Q.sibling,Q.sibling=k,k=Q,Q=h}Uy(x,!0,k,null,ne);break;case"together":Uy(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Rg(h,x){(x.mode&1)===0&&h!==null&&(h.alternate=null,x.alternate=null,x.flags|=2)}function of(h,x,k){if(h!==null&&(x.dependencies=h.dependencies),W0|=x.lanes,(k&x.childLanes)===0)return null;if(h!==null&&x.child!==h.child)throw Error(r(153));if(x.child!==null){for(h=x.child,k=e0(h,h.pendingProps),x.child=k,k.return=x;h.sibling!==null;)h=h.sibling,k=k.sibling=e0(h,h.pendingProps),k.return=x;k.sibling=null}return x.child}function kB(h,x,k){switch(x.tag){case 3:__(x),mn();break;case 5:Qh(x);break;case 1:Zi(x.type)&&Bc(x);break;case 4:vu(x,x.stateNode.containerInfo);break;case 10:var F=x.type._context,Q=x.memoizedProps.value;oa(Is,F._currentValue),F._currentValue=Q;break;case 13:if(F=x.memoizedState,F!==null)return F.dehydrated!==null?(oa(ya,ya.current&1),x.flags|=128,null):(k&x.child.childLanes)!==0?A_(h,x,k):(oa(ya,ya.current&1),h=of(h,x,k),h!==null?h.sibling:null);oa(ya,ya.current&1);break;case 19:if(F=(k&x.childLanes)!==0,(h.flags&128)!==0){if(F)return T_(h,x,k);x.flags|=128}if(Q=x.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),oa(ya,ya.current),F)break;return null;case 22:case 23:return x.lanes=0,j_(h,x,k)}return of(h,x,k)}var O_,qy,P_,I_;O_=function(h,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)h.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},qy=function(){},P_=function(h,x,k,F){var Q=h.memoizedProps;if(Q!==F){h=x.stateNode,lc(So.current);var ne=null;switch(k){case"input":Q=Ae(h,Q),F=Ae(h,F),ne=[];break;case"select":Q=te({},Q,{value:void 0}),F=te({},F,{value:void 0}),ne=[];break;case"textarea":Q=Ce(h,Q),F=Ce(h,F),ne=[];break;default:typeof Q.onClick!="function"&&typeof F.onClick=="function"&&(h.onclick=sc)}Yt(k,F);var Pe;k=null;for(Et in Q)if(!F.hasOwnProperty(Et)&&Q.hasOwnProperty(Et)&&Q[Et]!=null)if(Et==="style"){var Ze=Q[Et];for(Pe in Ze)Ze.hasOwnProperty(Pe)&&(k||(k={}),k[Pe]="")}else Et!=="dangerouslySetInnerHTML"&&Et!=="children"&&Et!=="suppressContentEditableWarning"&&Et!=="suppressHydrationWarning"&&Et!=="autoFocus"&&(s.hasOwnProperty(Et)?ne||(ne=[]):(ne=ne||[]).push(Et,null));for(Et in F){var it=F[Et];if(Ze=Q?.[Et],F.hasOwnProperty(Et)&&it!==Ze&&(it!=null||Ze!=null))if(Et==="style")if(Ze){for(Pe in Ze)!Ze.hasOwnProperty(Pe)||it&&it.hasOwnProperty(Pe)||(k||(k={}),k[Pe]="");for(Pe in it)it.hasOwnProperty(Pe)&&Ze[Pe]!==it[Pe]&&(k||(k={}),k[Pe]=it[Pe])}else k||(ne||(ne=[]),ne.push(Et,k)),k=it;else Et==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,Ze=Ze?Ze.__html:void 0,it!=null&&Ze!==it&&(ne=ne||[]).push(Et,it)):Et==="children"?typeof it!="string"&&typeof it!="number"||(ne=ne||[]).push(Et,""+it):Et!=="suppressContentEditableWarning"&&Et!=="suppressHydrationWarning"&&(s.hasOwnProperty(Et)?(it!=null&&Et==="onScroll"&&pa("scroll",h),ne||Ze===it||(ne=[])):(ne=ne||[]).push(Et,it))}k&&(ne=ne||[]).push("style",k);var Et=ne;(x.updateQueue=Et)&&(x.flags|=4)}},I_=function(h,x,k,F){k!==F&&(x.flags|=4)};function yp(h,x){if(!Pt)switch(h.tailMode){case"hidden":x=h.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var F=null;k!==null;)k.alternate!==null&&(F=k),k=k.sibling;F===null?x||h.tail===null?h.tail=null:h.tail.sibling=null:F.sibling=null}}function Xo(h){var x=h.alternate!==null&&h.alternate.child===h.child,k=0,F=0;if(x)for(var Q=h.child;Q!==null;)k|=Q.lanes|Q.childLanes,F|=Q.subtreeFlags&14680064,F|=Q.flags&14680064,Q.return=h,Q=Q.sibling;else for(Q=h.child;Q!==null;)k|=Q.lanes|Q.childLanes,F|=Q.subtreeFlags,F|=Q.flags,Q.return=h,Q=Q.sibling;return h.subtreeFlags|=F,h.childLanes=k,x}function SB(h,x,k){var F=x.pendingProps;switch(ot(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xo(x),null;case 1:return Zi(x.type)&&ef(),Xo(x),null;case 3:return F=x.stateNode,ql(),ta(vi),ta(As),q0(),F.pendingContext&&(F.context=F.pendingContext,F.pendingContext=null),(h===null||h.child===null)&&(Fn(x)?x.flags|=4:h===null||h.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Ut!==null&&(Jy(Ut),Ut=null))),qy(h,x),Xo(x),null;case 5:tf(x);var Q=lc(qc.current);if(k=x.type,h!==null&&x.stateNode!=null)P_(h,x,k,F,Q),h.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!F){if(x.stateNode===null)throw Error(r(166));return Xo(x),null}if(h=lc(So.current),Fn(x)){F=x.stateNode,k=x.type;var ne=x.memoizedProps;switch(F[No]=x,F[mu]=ne,h=(x.mode&1)!==0,k){case"dialog":pa("cancel",F),pa("close",F);break;case"iframe":case"object":case"embed":pa("load",F);break;case"video":case"audio":for(Q=0;Q<ac.length;Q++)pa(ac[Q],F);break;case"source":pa("error",F);break;case"img":case"image":case"link":pa("error",F),pa("load",F);break;case"details":pa("toggle",F);break;case"input":ie(F,ne),pa("invalid",F);break;case"select":F._wrapperState={wasMultiple:!!ne.multiple},pa("invalid",F);break;case"textarea":Xe(F,ne),pa("invalid",F)}Yt(k,ne),Q=null;for(var Pe in ne)if(ne.hasOwnProperty(Pe)){var Ze=ne[Pe];Pe==="children"?typeof Ze=="string"?F.textContent!==Ze&&(ne.suppressHydrationWarning!==!0&&Qu(F.textContent,Ze,h),Q=["children",Ze]):typeof Ze=="number"&&F.textContent!==""+Ze&&(ne.suppressHydrationWarning!==!0&&Qu(F.textContent,Ze,h),Q=["children",""+Ze]):s.hasOwnProperty(Pe)&&Ze!=null&&Pe==="onScroll"&&pa("scroll",F)}switch(k){case"input":Me(F),we(F,ne,!0);break;case"textarea":Me(F),fe(F);break;case"select":case"option":break;default:typeof ne.onClick=="function"&&(F.onclick=sc)}F=Q,x.updateQueue=F,F!==null&&(x.flags|=4)}else{Pe=Q.nodeType===9?Q:Q.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=Se(k)),h==="http://www.w3.org/1999/xhtml"?k==="script"?(h=Pe.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof F.is=="string"?h=Pe.createElement(k,{is:F.is}):(h=Pe.createElement(k),k==="select"&&(Pe=h,F.multiple?Pe.multiple=!0:F.size&&(Pe.size=F.size))):h=Pe.createElementNS(h,k),h[No]=x,h[mu]=F,O_(h,x,!1,!1),x.stateNode=h;e:{switch(Pe=We(k,F),k){case"dialog":pa("cancel",h),pa("close",h),Q=F;break;case"iframe":case"object":case"embed":pa("load",h),Q=F;break;case"video":case"audio":for(Q=0;Q<ac.length;Q++)pa(ac[Q],h);Q=F;break;case"source":pa("error",h),Q=F;break;case"img":case"image":case"link":pa("error",h),pa("load",h),Q=F;break;case"details":pa("toggle",h),Q=F;break;case"input":ie(h,F),Q=Ae(h,F),pa("invalid",h);break;case"option":Q=F;break;case"select":h._wrapperState={wasMultiple:!!F.multiple},Q=te({},F,{value:void 0}),pa("invalid",h);break;case"textarea":Xe(h,F),Q=Ce(h,F),pa("invalid",h);break;default:Q=F}Yt(k,Q),Ze=Q;for(ne in Ze)if(Ze.hasOwnProperty(ne)){var it=Ze[ne];ne==="style"?At(h,it):ne==="dangerouslySetInnerHTML"?(it=it?it.__html:void 0,it!=null&&Le(h,it)):ne==="children"?typeof it=="string"?(k!=="textarea"||it!=="")&&Re(h,it):typeof it=="number"&&Re(h,""+it):ne!=="suppressContentEditableWarning"&&ne!=="suppressHydrationWarning"&&ne!=="autoFocus"&&(s.hasOwnProperty(ne)?it!=null&&ne==="onScroll"&&pa("scroll",h):it!=null&&j(h,ne,it,Pe))}switch(k){case"input":Me(h),we(h,F,!1);break;case"textarea":Me(h),fe(h);break;case"option":F.value!=null&&h.setAttribute("value",""+me(F.value));break;case"select":h.multiple=!!F.multiple,ne=F.value,ne!=null?ce(h,!!F.multiple,ne,!1):F.defaultValue!=null&&ce(h,!!F.multiple,F.defaultValue,!0);break;default:typeof Q.onClick=="function"&&(h.onclick=sc)}switch(k){case"button":case"input":case"select":case"textarea":F=!!F.autoFocus;break e;case"img":F=!0;break e;default:F=!1}}F&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Xo(x),null;case 6:if(h&&x.stateNode!=null)I_(h,x,h.memoizedProps,F);else{if(typeof F!="string"&&x.stateNode===null)throw Error(r(166));if(k=lc(qc.current),lc(So.current),Fn(x)){if(F=x.stateNode,k=x.memoizedProps,F[No]=x,(ne=F.nodeValue!==k)&&(h=at,h!==null))switch(h.tag){case 3:Qu(F.nodeValue,k,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Qu(F.nodeValue,k,(h.mode&1)!==0)}ne&&(x.flags|=4)}else F=(k.nodeType===9?k:k.ownerDocument).createTextNode(F),F[No]=x,x.stateNode=F}return Xo(x),null;case 13:if(ta(ya),F=x.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Pt&&It!==null&&(x.mode&1)!==0&&(x.flags&128)===0)Pn(),mn(),x.flags|=98560,ne=!1;else if(ne=Fn(x),F!==null&&F.dehydrated!==null){if(h===null){if(!ne)throw Error(r(318));if(ne=x.memoizedState,ne=ne!==null?ne.dehydrated:null,!ne)throw Error(r(317));ne[No]=x}else mn(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Xo(x),ne=!1}else Ut!==null&&(Jy(Ut),Ut=null),ne=!0;if(!ne)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=k,x):(F=F!==null,F!==(h!==null&&h.memoizedState!==null)&&F&&(x.child.flags|=8192,(x.mode&1)!==0&&(h===null||(ya.current&1)!==0?Li===0&&(Li=3):t2())),x.updateQueue!==null&&(x.flags|=4),Xo(x),null);case 4:return ql(),qy(h,x),h===null&&kd(x.stateNode.containerInfo),Xo(x),null;case 10:return Di(x.type._context),Xo(x),null;case 17:return Zi(x.type)&&ef(),Xo(x),null;case 19:if(ta(ya),ne=x.memoizedState,ne===null)return Xo(x),null;if(F=(x.flags&128)!==0,Pe=ne.rendering,Pe===null)if(F)yp(ne,!1);else{if(Li!==0||h!==null&&(h.flags&128)!==0)for(h=x.child;h!==null;){if(Pe=ri(h),Pe!==null){for(x.flags|=128,yp(ne,!1),F=Pe.updateQueue,F!==null&&(x.updateQueue=F,x.flags|=4),x.subtreeFlags=0,F=k,k=x.child;k!==null;)ne=k,h=F,ne.flags&=14680066,Pe=ne.alternate,Pe===null?(ne.childLanes=0,ne.lanes=h,ne.child=null,ne.subtreeFlags=0,ne.memoizedProps=null,ne.memoizedState=null,ne.updateQueue=null,ne.dependencies=null,ne.stateNode=null):(ne.childLanes=Pe.childLanes,ne.lanes=Pe.lanes,ne.child=Pe.child,ne.subtreeFlags=0,ne.deletions=null,ne.memoizedProps=Pe.memoizedProps,ne.memoizedState=Pe.memoizedState,ne.updateQueue=Pe.updateQueue,ne.type=Pe.type,h=Pe.dependencies,ne.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),k=k.sibling;return oa(ya,ya.current&1|2),x.child}h=h.sibling}ne.tail!==null&&bt()>tm&&(x.flags|=128,F=!0,yp(ne,!1),x.lanes=4194304)}else{if(!F)if(h=ri(Pe),h!==null){if(x.flags|=128,F=!0,k=h.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),yp(ne,!0),ne.tail===null&&ne.tailMode==="hidden"&&!Pe.alternate&&!Pt)return Xo(x),null}else 2*bt()-ne.renderingStartTime>tm&&k!==1073741824&&(x.flags|=128,F=!0,yp(ne,!1),x.lanes=4194304);ne.isBackwards?(Pe.sibling=x.child,x.child=Pe):(k=ne.last,k!==null?k.sibling=Pe:x.child=Pe,ne.last=Pe)}return ne.tail!==null?(x=ne.tail,ne.rendering=x,ne.tail=x.sibling,ne.renderingStartTime=bt(),x.sibling=null,k=ya.current,oa(ya,F?k&1|2:k&1),x):(Xo(x),null);case 22:case 23:return e2(),F=x.memoizedState!==null,h!==null&&h.memoizedState!==null!==F&&(x.flags|=8192),F&&(x.mode&1)!==0?(hc&1073741824)!==0&&(Xo(x),x.subtreeFlags&6&&(x.flags|=8192)):Xo(x),null;case 24:return null;case 25:return null}throw Error(r(156,x.tag))}function _B(h,x){switch(ot(x),x.tag){case 1:return Zi(x.type)&&ef(),h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 3:return ql(),ta(vi),ta(As),q0(),h=x.flags,(h&65536)!==0&&(h&128)===0?(x.flags=h&-65537|128,x):null;case 5:return tf(x),null;case 13:if(ta(ya),h=x.memoizedState,h!==null&&h.dehydrated!==null){if(x.alternate===null)throw Error(r(340));mn()}return h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 19:return ta(ya),null;case 4:return ql(),null;case 10:return Di(x.type._context),null;case 22:case 23:return e2(),null;case 24:return null;default:return null}}var Bg=!1,Yo=!1,CB=typeof WeakSet=="function"?WeakSet:Set,Pr=null;function Zh(h,x){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(F){Ws(h,x,F)}else k.current=null}function $y(h,x,k){try{k()}catch(F){Ws(h,x,F)}}var D_=!1;function AB(h,x){if(fu=rc,h=Nd(),Ll(h)){if("selectionStart"in h)var k={start:h.selectionStart,end:h.selectionEnd};else e:{k=(k=h.ownerDocument)&&k.defaultView||window;var F=k.getSelection&&k.getSelection();if(F&&F.rangeCount!==0){k=F.anchorNode;var Q=F.anchorOffset,ne=F.focusNode;F=F.focusOffset;try{k.nodeType,ne.nodeType}catch{k=null;break e}var Pe=0,Ze=-1,it=-1,Et=0,er=0,nr=h,Zt=null;t:for(;;){for(var Er;nr!==k||Q!==0&&nr.nodeType!==3||(Ze=Pe+Q),nr!==ne||F!==0&&nr.nodeType!==3||(it=Pe+F),nr.nodeType===3&&(Pe+=nr.nodeValue.length),(Er=nr.firstChild)!==null;)Zt=nr,nr=Er;for(;;){if(nr===h)break t;if(Zt===k&&++Et===Q&&(Ze=Pe),Zt===ne&&++er===F&&(it=Pe),(Er=nr.nextSibling)!==null)break;nr=Zt,Zt=nr.parentNode}nr=Er}k=Ze===-1||it===-1?null:{start:Ze,end:it}}else k=null}k=k||{start:0,end:0}}else k=null;for(hu={focusedElem:h,selectionRange:k},rc=!1,Pr=x;Pr!==null;)if(x=Pr,h=x.child,(x.subtreeFlags&1028)!==0&&h!==null)h.return=x,Pr=h;else for(;Pr!==null;){x=Pr;try{var Rr=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Rr!==null){var zr=Rr.memoizedProps,ai=Rr.memoizedState,kt=x.stateNode,ht=kt.getSnapshotBeforeUpdate(x.elementType===x.type?zr:Pd(x.type,zr),ai);kt.__reactInternalSnapshotBeforeUpdate=ht}break;case 3:var _t=x.stateNode.containerInfo;_t.nodeType===1?_t.textContent="":_t.nodeType===9&&_t.documentElement&&_t.removeChild(_t.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(cr){Ws(x,x.return,cr)}if(h=x.sibling,h!==null){h.return=x.return,Pr=h;break}Pr=x.return}return Rr=D_,D_=!1,Rr}function wp(h,x,k){var F=x.updateQueue;if(F=F!==null?F.lastEffect:null,F!==null){var Q=F=F.next;do{if((Q.tag&h)===h){var ne=Q.destroy;Q.destroy=void 0,ne!==void 0&&$y(x,k,ne)}Q=Q.next}while(Q!==F)}}function Ug(h,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&h)===h){var F=k.create;k.destroy=F()}k=k.next}while(k!==x)}}function zy(h){var x=h.ref;if(x!==null){var k=h.stateNode;h.tag,h=k,typeof x=="function"?x(h):x.current=h}}function L_(h){var x=h.alternate;x!==null&&(h.alternate=null,L_(x)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(x=h.stateNode,x!==null&&(delete x[No],delete x[mu],delete x[Ji],delete x[bp],delete x[$f])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function F_(h){return h.tag===5||h.tag===3||h.tag===4}function M_(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||F_(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function Hy(h,x,k){var F=h.tag;if(F===5||F===6)h=h.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(h,x):k.insertBefore(h,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(h,k)):(x=k,x.appendChild(h)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=sc));else if(F!==4&&(h=h.child,h!==null))for(Hy(h,x,k),h=h.sibling;h!==null;)Hy(h,x,k),h=h.sibling}function Wy(h,x,k){var F=h.tag;if(F===5||F===6)h=h.stateNode,x?k.insertBefore(h,x):k.appendChild(h);else if(F!==4&&(h=h.child,h!==null))for(Wy(h,x,k),h=h.sibling;h!==null;)Wy(h,x,k),h=h.sibling}var _o=null,Id=!1;function Xf(h,x,k){for(k=k.child;k!==null;)R_(h,x,k),k=k.sibling}function R_(h,x,k){if(Vr&&typeof Vr.onCommitFiberUnmount=="function")try{Vr.onCommitFiberUnmount(un,k)}catch{}switch(k.tag){case 5:Yo||Zh(k,x);case 6:var F=_o,Q=Id;_o=null,Xf(h,x,k),_o=F,Id=Q,_o!==null&&(Id?(h=_o,k=k.stateNode,h.nodeType===8?h.parentNode.removeChild(k):h.removeChild(k)):_o.removeChild(k.stateNode));break;case 18:_o!==null&&(Id?(h=_o,k=k.stateNode,h.nodeType===8?Ju(h.parentNode,k):h.nodeType===1&&Ju(h,k),Wi(h)):Ju(_o,k.stateNode));break;case 4:F=_o,Q=Id,_o=k.stateNode.containerInfo,Id=!0,Xf(h,x,k),_o=F,Id=Q;break;case 0:case 11:case 14:case 15:if(!Yo&&(F=k.updateQueue,F!==null&&(F=F.lastEffect,F!==null))){Q=F=F.next;do{var ne=Q,Pe=ne.destroy;ne=ne.tag,Pe!==void 0&&((ne&2)!==0||(ne&4)!==0)&&$y(k,x,Pe),Q=Q.next}while(Q!==F)}Xf(h,x,k);break;case 1:if(!Yo&&(Zh(k,x),F=k.stateNode,typeof F.componentWillUnmount=="function"))try{F.props=k.memoizedProps,F.state=k.memoizedState,F.componentWillUnmount()}catch(Ze){Ws(k,x,Ze)}Xf(h,x,k);break;case 21:Xf(h,x,k);break;case 22:k.mode&1?(Yo=(F=Yo)||k.memoizedState!==null,Xf(h,x,k),Yo=F):Xf(h,x,k);break;default:Xf(h,x,k)}}function B_(h){var x=h.updateQueue;if(x!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new CB),x.forEach(function(F){var Q=MB.bind(null,h,F);k.has(F)||(k.add(F),F.then(Q,Q))})}}function Dd(h,x){var k=x.deletions;if(k!==null)for(var F=0;F<k.length;F++){var Q=k[F];try{var ne=h,Pe=x,Ze=Pe;e:for(;Ze!==null;){switch(Ze.tag){case 5:_o=Ze.stateNode,Id=!1;break e;case 3:_o=Ze.stateNode.containerInfo,Id=!0;break e;case 4:_o=Ze.stateNode.containerInfo,Id=!0;break e}Ze=Ze.return}if(_o===null)throw Error(r(160));R_(ne,Pe,Q),_o=null,Id=!1;var it=Q.alternate;it!==null&&(it.return=null),Q.return=null}catch(Et){Ws(Q,x,Et)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)U_(x,h),x=x.sibling}function U_(h,x){var k=h.alternate,F=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(Dd(x,h),yu(h),F&4){try{wp(3,h,h.return),Ug(3,h)}catch(zr){Ws(h,h.return,zr)}try{wp(5,h,h.return)}catch(zr){Ws(h,h.return,zr)}}break;case 1:Dd(x,h),yu(h),F&512&&k!==null&&Zh(k,k.return);break;case 5:if(Dd(x,h),yu(h),F&512&&k!==null&&Zh(k,k.return),h.flags&32){var Q=h.stateNode;try{Re(Q,"")}catch(zr){Ws(h,h.return,zr)}}if(F&4&&(Q=h.stateNode,Q!=null)){var ne=h.memoizedProps,Pe=k!==null?k.memoizedProps:ne,Ze=h.type,it=h.updateQueue;if(h.updateQueue=null,it!==null)try{Ze==="input"&&ne.type==="radio"&&ne.name!=null&&Z(Q,ne),We(Ze,Pe);var Et=We(Ze,ne);for(Pe=0;Pe<it.length;Pe+=2){var er=it[Pe],nr=it[Pe+1];er==="style"?At(Q,nr):er==="dangerouslySetInnerHTML"?Le(Q,nr):er==="children"?Re(Q,nr):j(Q,er,nr,Et)}switch(Ze){case"input":Ee(Q,ne);break;case"textarea":xe(Q,ne);break;case"select":var Zt=Q._wrapperState.wasMultiple;Q._wrapperState.wasMultiple=!!ne.multiple;var Er=ne.value;Er!=null?ce(Q,!!ne.multiple,Er,!1):Zt!==!!ne.multiple&&(ne.defaultValue!=null?ce(Q,!!ne.multiple,ne.defaultValue,!0):ce(Q,!!ne.multiple,ne.multiple?[]:"",!1))}Q[mu]=ne}catch(zr){Ws(h,h.return,zr)}}break;case 6:if(Dd(x,h),yu(h),F&4){if(h.stateNode===null)throw Error(r(162));Q=h.stateNode,ne=h.memoizedProps;try{Q.nodeValue=ne}catch(zr){Ws(h,h.return,zr)}}break;case 3:if(Dd(x,h),yu(h),F&4&&k!==null&&k.memoizedState.isDehydrated)try{Wi(x.containerInfo)}catch(zr){Ws(h,h.return,zr)}break;case 4:Dd(x,h),yu(h);break;case 13:Dd(x,h),yu(h),Q=h.child,Q.flags&8192&&(ne=Q.memoizedState!==null,Q.stateNode.isHidden=ne,!ne||Q.alternate!==null&&Q.alternate.memoizedState!==null||(Ky=bt())),F&4&&B_(h);break;case 22:if(er=k!==null&&k.memoizedState!==null,h.mode&1?(Yo=(Et=Yo)||er,Dd(x,h),Yo=Et):Dd(x,h),yu(h),F&8192){if(Et=h.memoizedState!==null,(h.stateNode.isHidden=Et)&&!er&&(h.mode&1)!==0)for(Pr=h,er=h.child;er!==null;){for(nr=Pr=er;Pr!==null;){switch(Zt=Pr,Er=Zt.child,Zt.tag){case 0:case 11:case 14:case 15:wp(4,Zt,Zt.return);break;case 1:Zh(Zt,Zt.return);var Rr=Zt.stateNode;if(typeof Rr.componentWillUnmount=="function"){F=Zt,k=Zt.return;try{x=F,Rr.props=x.memoizedProps,Rr.state=x.memoizedState,Rr.componentWillUnmount()}catch(zr){Ws(F,k,zr)}}break;case 5:Zh(Zt,Zt.return);break;case 22:if(Zt.memoizedState!==null){z_(nr);continue}}Er!==null?(Er.return=Zt,Pr=Er):z_(nr)}er=er.sibling}e:for(er=null,nr=h;;){if(nr.tag===5){if(er===null){er=nr;try{Q=nr.stateNode,Et?(ne=Q.style,typeof ne.setProperty=="function"?ne.setProperty("display","none","important"):ne.display="none"):(Ze=nr.stateNode,it=nr.memoizedProps.style,Pe=it!=null&&it.hasOwnProperty("display")?it.display:null,Ze.style.display=vt("display",Pe))}catch(zr){Ws(h,h.return,zr)}}}else if(nr.tag===6){if(er===null)try{nr.stateNode.nodeValue=Et?"":nr.memoizedProps}catch(zr){Ws(h,h.return,zr)}}else if((nr.tag!==22&&nr.tag!==23||nr.memoizedState===null||nr===h)&&nr.child!==null){nr.child.return=nr,nr=nr.child;continue}if(nr===h)break e;for(;nr.sibling===null;){if(nr.return===null||nr.return===h)break e;er===nr&&(er=null),nr=nr.return}er===nr&&(er=null),nr.sibling.return=nr.return,nr=nr.sibling}}break;case 19:Dd(x,h),yu(h),F&4&&B_(h);break;case 21:break;default:Dd(x,h),yu(h)}}function yu(h){var x=h.flags;if(x&2){try{e:{for(var k=h.return;k!==null;){if(F_(k)){var F=k;break e}k=k.return}throw Error(r(160))}switch(F.tag){case 5:var Q=F.stateNode;F.flags&32&&(Re(Q,""),F.flags&=-33);var ne=M_(h);Wy(h,ne,Q);break;case 3:case 4:var Pe=F.stateNode.containerInfo,Ze=M_(h);Hy(h,Ze,Pe);break;default:throw Error(r(161))}}catch(it){Ws(h,h.return,it)}h.flags&=-3}x&4096&&(h.flags&=-4097)}function EB(h,x,k){Pr=h,q_(h)}function q_(h,x,k){for(var F=(h.mode&1)!==0;Pr!==null;){var Q=Pr,ne=Q.child;if(Q.tag===22&&F){var Pe=Q.memoizedState!==null||Bg;if(!Pe){var Ze=Q.alternate,it=Ze!==null&&Ze.memoizedState!==null||Yo;Ze=Bg;var Et=Yo;if(Bg=Pe,(Yo=it)&&!Et)for(Pr=Q;Pr!==null;)Pe=Pr,it=Pe.child,Pe.tag===22&&Pe.memoizedState!==null?H_(Q):it!==null?(it.return=Pe,Pr=it):H_(Q);for(;ne!==null;)Pr=ne,q_(ne),ne=ne.sibling;Pr=Q,Bg=Ze,Yo=Et}$_(h)}else(Q.subtreeFlags&8772)!==0&&ne!==null?(ne.return=Q,Pr=ne):$_(h)}}function $_(h){for(;Pr!==null;){var x=Pr;if((x.flags&8772)!==0){var k=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:Yo||Ug(5,x);break;case 1:var F=x.stateNode;if(x.flags&4&&!Yo)if(k===null)F.componentDidMount();else{var Q=x.elementType===x.type?k.memoizedProps:Pd(x.type,k.memoizedProps);F.componentDidUpdate(Q,k.memoizedState,F.__reactInternalSnapshotBeforeUpdate)}var ne=x.updateQueue;ne!==null&&Ed(x,ne,F);break;case 3:var Pe=x.updateQueue;if(Pe!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}Ed(x,Pe,k)}break;case 5:var Ze=x.stateNode;if(k===null&&x.flags&4){k=Ze;var it=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":it.autoFocus&&k.focus();break;case"img":it.src&&(k.src=it.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Et=x.alternate;if(Et!==null){var er=Et.memoizedState;if(er!==null){var nr=er.dehydrated;nr!==null&&Wi(nr)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Yo||x.flags&512&&zy(x)}catch(Zt){Ws(x,x.return,Zt)}}if(x===h){Pr=null;break}if(k=x.sibling,k!==null){k.return=x.return,Pr=k;break}Pr=x.return}}function z_(h){for(;Pr!==null;){var x=Pr;if(x===h){Pr=null;break}var k=x.sibling;if(k!==null){k.return=x.return,Pr=k;break}Pr=x.return}}function H_(h){for(;Pr!==null;){var x=Pr;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{Ug(4,x)}catch(it){Ws(x,k,it)}break;case 1:var F=x.stateNode;if(typeof F.componentDidMount=="function"){var Q=x.return;try{F.componentDidMount()}catch(it){Ws(x,Q,it)}}var ne=x.return;try{zy(x)}catch(it){Ws(x,ne,it)}break;case 5:var Pe=x.return;try{zy(x)}catch(it){Ws(x,Pe,it)}}}catch(it){Ws(x,x.return,it)}if(x===h){Pr=null;break}var Ze=x.sibling;if(Ze!==null){Ze.return=x.return,Pr=Ze;break}Pr=x.return}}var TB=Math.ceil,qg=N.ReactCurrentDispatcher,Gy=N.ReactCurrentOwner,zc=N.ReactCurrentBatchConfig,da=0,no=null,yi=null,Co=0,hc=0,em=vl(0),Li=0,Np=null,W0=0,$g=0,Vy=0,jp=null,Wl=null,Ky=0,tm=1/0,lf=null,zg=!1,Xy=null,Yf=null,Hg=!1,Qf=null,Wg=0,kp=0,Yy=null,Gg=-1,Vg=0;function yl(){return(da&6)!==0?bt():Gg!==-1?Gg:Gg=bt()}function Jf(h){return(h.mode&1)===0?1:(da&2)!==0&&Co!==0?Co&-Co:Bn.transition!==null?(Vg===0&&(Vg=sa()),Vg):(h=Cr,h!==0||(h=window.event,h=h===void 0?16:Hn(h.type)),h)}function Ld(h,x,k,F){if(50<kp)throw kp=0,Yy=null,Error(r(185));rr(h,k,F),((da&2)===0||h!==no)&&(h===no&&((da&2)===0&&($g|=k),Li===4&&Zf(h,Co)),Gl(h,F),k===1&&da===0&&(x.mode&1)===0&&(tm=bt()+500,qa&&oe()))}function Gl(h,x){var k=h.callbackNode;pr(h,x);var F=lr(h,h===no?Co:0);if(F===0)k!==null&&Ke(k),h.callbackNode=null,h.callbackPriority=0;else if(x=F&-F,h.callbackPriority!==x){if(k!=null&&Ke(k),x===1)h.tag===0?ee(G_.bind(null,h)):M(G_.bind(null,h)),_d(function(){(da&6)===0&&oe()}),k=null;else{switch(Vt(F)){case 1:k=ir;break;case 4:k=Kt;break;case 16:k=yr;break;case 536870912:k=Ur;break;default:k=yr}k=e6(k,W_.bind(null,h))}h.callbackPriority=x,h.callbackNode=k}}function W_(h,x){if(Gg=-1,Vg=0,(da&6)!==0)throw Error(r(327));var k=h.callbackNode;if(rm()&&h.callbackNode!==k)return null;var F=lr(h,h===no?Co:0);if(F===0)return null;if((F&30)!==0||(F&h.expiredLanes)!==0||x)x=Kg(h,F);else{x=F;var Q=da;da|=2;var ne=K_();(no!==h||Co!==x)&&(lf=null,tm=bt()+500,V0(h,x));do try{IB();break}catch(Ze){V_(h,Ze)}while(!0);Hs(),qg.current=ne,da=Q,yi!==null?x=0:(no=null,Co=0,x=Li)}if(x!==0){if(x===2&&(Q=Mr(h),Q!==0&&(F=Q,x=Qy(h,Q))),x===1)throw k=Np,V0(h,0),Zf(h,F),Gl(h,bt()),k;if(x===6)Zf(h,F);else{if(Q=h.current.alternate,(F&30)===0&&!OB(Q)&&(x=Kg(h,F),x===2&&(ne=Mr(h),ne!==0&&(F=ne,x=Qy(h,ne))),x===1))throw k=Np,V0(h,0),Zf(h,F),Gl(h,bt()),k;switch(h.finishedWork=Q,h.finishedLanes=F,x){case 0:case 1:throw Error(r(345));case 2:K0(h,Wl,lf);break;case 3:if(Zf(h,F),(F&130023424)===F&&(x=Ky+500-bt(),10<x)){if(lr(h,0)!==0)break;if(Q=h.suspendedLanes,(Q&F)!==F){yl(),h.pingedLanes|=h.suspendedLanes&Q;break}h.timeoutHandle=B0(K0.bind(null,h,Wl,lf),x);break}K0(h,Wl,lf);break;case 4:if(Zf(h,F),(F&4194240)===F)break;for(x=h.eventTimes,Q=-1;0<F;){var Pe=31-Kn(F);ne=1<<Pe,Pe=x[Pe],Pe>Q&&(Q=Pe),F&=~ne}if(F=Q,F=bt()-F,F=(120>F?120:480>F?480:1080>F?1080:1920>F?1920:3e3>F?3e3:4320>F?4320:1960*TB(F/1960))-F,10<F){h.timeoutHandle=B0(K0.bind(null,h,Wl,lf),F);break}K0(h,Wl,lf);break;case 5:K0(h,Wl,lf);break;default:throw Error(r(329))}}}return Gl(h,bt()),h.callbackNode===k?W_.bind(null,h):null}function Qy(h,x){var k=jp;return h.current.memoizedState.isDehydrated&&(V0(h,x).flags|=256),h=Kg(h,x),h!==2&&(x=Wl,Wl=k,x!==null&&Jy(x)),h}function Jy(h){Wl===null?Wl=h:Wl.push.apply(Wl,h)}function OB(h){for(var x=h;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var F=0;F<k.length;F++){var Q=k[F],ne=Q.getSnapshot;Q=Q.value;try{if(!Xn(ne(),Q))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Zf(h,x){for(x&=~Vy,x&=~$g,h.suspendedLanes|=x,h.pingedLanes&=~x,h=h.expirationTimes;0<x;){var k=31-Kn(x),F=1<<k;h[k]=-1,x&=~F}}function G_(h){if((da&6)!==0)throw Error(r(327));rm();var x=lr(h,0);if((x&1)===0)return Gl(h,bt()),null;var k=Kg(h,x);if(h.tag!==0&&k===2){var F=Mr(h);F!==0&&(x=F,k=Qy(h,F))}if(k===1)throw k=Np,V0(h,0),Zf(h,x),Gl(h,bt()),k;if(k===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=x,K0(h,Wl,lf),Gl(h,bt()),null}function Zy(h,x){var k=da;da|=1;try{return h(x)}finally{da=k,da===0&&(tm=bt()+500,qa&&oe())}}function G0(h){Qf!==null&&Qf.tag===0&&(da&6)===0&&rm();var x=da;da|=1;var k=zc.transition,F=Cr;try{if(zc.transition=null,Cr=1,h)return h()}finally{Cr=F,zc.transition=k,da=x,(da&6)===0&&oe()}}function e2(){hc=em.current,ta(em)}function V0(h,x){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==-1&&(h.timeoutHandle=-1,Lc(k)),yi!==null)for(k=yi.return;k!==null;){var F=k;switch(ot(F),F.tag){case 1:F=F.type.childContextTypes,F!=null&&ef();break;case 3:ql(),ta(vi),ta(As),q0();break;case 5:tf(F);break;case 4:ql();break;case 13:ta(ya);break;case 19:ta(ya);break;case 10:Di(F.type._context);break;case 22:case 23:e2()}k=k.return}if(no=h,yi=h=e0(h.current,null),Co=hc=x,Li=0,Np=null,Vy=$g=W0=0,Wl=jp=null,Ds!==null){for(x=0;x<Ds.length;x++)if(k=Ds[x],F=k.interleaved,F!==null){k.interleaved=null;var Q=F.next,ne=k.pending;if(ne!==null){var Pe=ne.next;ne.next=Q,F.next=Pe}k.pending=F}Ds=null}return h}function V_(h,x){do{var k=yi;try{if(Hs(),Td.current=Lg,bu){for(var F=za.memoizedState;F!==null;){var Q=F.queue;Q!==null&&(Q.pending=null),F=F.next}bu=!1}if($l=0,us=Ts=za=null,dc=!1,$c=0,Gy.current=null,k===null||k.return===null){Li=1,Np=x,yi=null;break}e:{var ne=h,Pe=k.return,Ze=k,it=x;if(x=Co,Ze.flags|=32768,it!==null&&typeof it=="object"&&typeof it.then=="function"){var Et=it,er=Ze,nr=er.tag;if((er.mode&1)===0&&(nr===0||nr===11||nr===15)){var Zt=er.alternate;Zt?(er.updateQueue=Zt.updateQueue,er.memoizedState=Zt.memoizedState,er.lanes=Zt.lanes):(er.updateQueue=null,er.memoizedState=null)}var Er=v_(Pe);if(Er!==null){Er.flags&=-257,b_(Er,Pe,Ze,ne,x),Er.mode&1&&g_(ne,Et,x),x=Er,it=Et;var Rr=x.updateQueue;if(Rr===null){var zr=new Set;zr.add(it),x.updateQueue=zr}else Rr.add(it);break e}else{if((x&1)===0){g_(ne,Et,x),t2();break e}it=Error(r(426))}}else if(Pt&&Ze.mode&1){var ai=v_(Pe);if(ai!==null){(ai.flags&65536)===0&&(ai.flags|=256),b_(ai,Pe,Ze,ne,x),ra(Jh(it,Ze));break e}}ne=it=Jh(it,Ze),Li!==4&&(Li=2),jp===null?jp=[ne]:jp.push(ne),ne=Pe;do{switch(ne.tag){case 3:ne.flags|=65536,x&=-x,ne.lanes|=x;var kt=p_(ne,it,x);ko(ne,kt);break e;case 1:Ze=it;var ht=ne.type,_t=ne.stateNode;if((ne.flags&128)===0&&(typeof ht.getDerivedStateFromError=="function"||_t!==null&&typeof _t.componentDidCatch=="function"&&(Yf===null||!Yf.has(_t)))){ne.flags|=65536,x&=-x,ne.lanes|=x;var cr=x_(ne,Ze,x);ko(ne,cr);break e}}ne=ne.return}while(ne!==null)}Y_(k)}catch(Xr){x=Xr,yi===k&&k!==null&&(yi=k=k.return);continue}break}while(!0)}function K_(){var h=qg.current;return qg.current=Lg,h===null?Lg:h}function t2(){(Li===0||Li===3||Li===2)&&(Li=4),no===null||(W0&268435455)===0&&($g&268435455)===0||Zf(no,Co)}function Kg(h,x){var k=da;da|=2;var F=K_();(no!==h||Co!==x)&&(lf=null,V0(h,x));do try{PB();break}catch(Q){V_(h,Q)}while(!0);if(Hs(),da=k,qg.current=F,yi!==null)throw Error(r(261));return no=null,Co=0,Li}function PB(){for(;yi!==null;)X_(yi)}function IB(){for(;yi!==null&&!ct();)X_(yi)}function X_(h){var x=Z_(h.alternate,h,hc);h.memoizedProps=h.pendingProps,x===null?Y_(h):yi=x,Gy.current=null}function Y_(h){var x=h;do{var k=x.alternate;if(h=x.return,(x.flags&32768)===0){if(k=SB(k,x,hc),k!==null){yi=k;return}}else{if(k=_B(k,x),k!==null){k.flags&=32767,yi=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Li=6,yi=null;return}}if(x=x.sibling,x!==null){yi=x;return}yi=x=h}while(x!==null);Li===0&&(Li=5)}function K0(h,x,k){var F=Cr,Q=zc.transition;try{zc.transition=null,Cr=1,DB(h,x,k,F)}finally{zc.transition=Q,Cr=F}return null}function DB(h,x,k,F){do rm();while(Qf!==null);if((da&6)!==0)throw Error(r(327));k=h.finishedWork;var Q=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var ne=k.lanes|k.childLanes;if(xr(h,ne),h===no&&(yi=no=null,Co=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||Hg||(Hg=!0,e6(yr,function(){return rm(),null})),ne=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||ne){ne=zc.transition,zc.transition=null;var Pe=Cr;Cr=1;var Ze=da;da|=4,Gy.current=null,AB(h,k),U_(k,h),Uo(hu),rc=!!fu,hu=fu=null,h.current=k,EB(k),jt(),da=Ze,Cr=Pe,zc.transition=ne}else h.current=k;if(Hg&&(Hg=!1,Qf=h,Wg=Q),ne=h.pendingLanes,ne===0&&(Yf=null),aa(k.stateNode),Gl(h,bt()),x!==null)for(F=h.onRecoverableError,k=0;k<x.length;k++)Q=x[k],F(Q.value,{componentStack:Q.stack,digest:Q.digest});if(zg)throw zg=!1,h=Xy,Xy=null,h;return(Wg&1)!==0&&h.tag!==0&&rm(),ne=h.pendingLanes,(ne&1)!==0?h===Yy?kp++:(kp=0,Yy=h):kp=0,oe(),null}function rm(){if(Qf!==null){var h=Vt(Wg),x=zc.transition,k=Cr;try{if(zc.transition=null,Cr=16>h?16:h,Qf===null)var F=!1;else{if(h=Qf,Qf=null,Wg=0,(da&6)!==0)throw Error(r(331));var Q=da;for(da|=4,Pr=h.current;Pr!==null;){var ne=Pr,Pe=ne.child;if((Pr.flags&16)!==0){var Ze=ne.deletions;if(Ze!==null){for(var it=0;it<Ze.length;it++){var Et=Ze[it];for(Pr=Et;Pr!==null;){var er=Pr;switch(er.tag){case 0:case 11:case 15:wp(8,er,ne)}var nr=er.child;if(nr!==null)nr.return=er,Pr=nr;else for(;Pr!==null;){er=Pr;var Zt=er.sibling,Er=er.return;if(L_(er),er===Et){Pr=null;break}if(Zt!==null){Zt.return=Er,Pr=Zt;break}Pr=Er}}}var Rr=ne.alternate;if(Rr!==null){var zr=Rr.child;if(zr!==null){Rr.child=null;do{var ai=zr.sibling;zr.sibling=null,zr=ai}while(zr!==null)}}Pr=ne}}if((ne.subtreeFlags&2064)!==0&&Pe!==null)Pe.return=ne,Pr=Pe;else e:for(;Pr!==null;){if(ne=Pr,(ne.flags&2048)!==0)switch(ne.tag){case 0:case 11:case 15:wp(9,ne,ne.return)}var kt=ne.sibling;if(kt!==null){kt.return=ne.return,Pr=kt;break e}Pr=ne.return}}var ht=h.current;for(Pr=ht;Pr!==null;){Pe=Pr;var _t=Pe.child;if((Pe.subtreeFlags&2064)!==0&&_t!==null)_t.return=Pe,Pr=_t;else e:for(Pe=ht;Pr!==null;){if(Ze=Pr,(Ze.flags&2048)!==0)try{switch(Ze.tag){case 0:case 11:case 15:Ug(9,Ze)}}catch(Xr){Ws(Ze,Ze.return,Xr)}if(Ze===Pe){Pr=null;break e}var cr=Ze.sibling;if(cr!==null){cr.return=Ze.return,Pr=cr;break e}Pr=Ze.return}}if(da=Q,oe(),Vr&&typeof Vr.onPostCommitFiberRoot=="function")try{Vr.onPostCommitFiberRoot(un,h)}catch{}F=!0}return F}finally{Cr=k,zc.transition=x}}return!1}function Q_(h,x,k){x=Jh(k,x),x=p_(h,x,1),h=jo(h,x,1),x=yl(),h!==null&&(rr(h,1,x),Gl(h,x))}function Ws(h,x,k){if(h.tag===3)Q_(h,h,k);else for(;x!==null;){if(x.tag===3){Q_(x,h,k);break}else if(x.tag===1){var F=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof F.componentDidCatch=="function"&&(Yf===null||!Yf.has(F))){h=Jh(k,h),h=x_(x,h,1),x=jo(x,h,1),h=yl(),x!==null&&(rr(x,1,h),Gl(x,h));break}}x=x.return}}function LB(h,x,k){var F=h.pingCache;F!==null&&F.delete(x),x=yl(),h.pingedLanes|=h.suspendedLanes&k,no===h&&(Co&k)===k&&(Li===4||Li===3&&(Co&130023424)===Co&&500>bt()-Ky?V0(h,0):Vy|=k),Gl(h,x)}function J_(h,x){x===0&&((h.mode&1)===0?x=1:(x=Lt,Lt<<=1,(Lt&130023424)===0&&(Lt=4194304)));var k=yl();h=Yn(h,x),h!==null&&(rr(h,x,k),Gl(h,k))}function FB(h){var x=h.memoizedState,k=0;x!==null&&(k=x.retryLane),J_(h,k)}function MB(h,x){var k=0;switch(h.tag){case 13:var F=h.stateNode,Q=h.memoizedState;Q!==null&&(k=Q.retryLane);break;case 19:F=h.stateNode;break;default:throw Error(r(314))}F!==null&&F.delete(x),J_(h,k)}var Z_;Z_=function(h,x,k){if(h!==null)if(h.memoizedProps!==x.pendingProps||vi.current)Hl=!0;else{if((h.lanes&k)===0&&(x.flags&128)===0)return Hl=!1,kB(h,x,k);Hl=(h.flags&131072)!==0}else Hl=!1,Pt&&(x.flags&1048576)!==0&&Ht(x,De,x.index);switch(x.lanes=0,x.tag){case 2:var F=x.type;Rg(h,x),h=x.pendingProps;var Q=Cd(x,As.current);Za(x,k),Q=rf(null,x,F,h,Q,k);var ne=zl();return x.flags|=1,typeof Q=="object"&&Q!==null&&typeof Q.render=="function"&&Q.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Zi(F)?(ne=!0,Bc(x)):ne=!1,x.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,Ad(x),Q.updater=Fg,x.stateNode=Q,Q._reactInternals=x,Py(x,F,h,k),x=Fy(null,x,F,!0,ne,k)):(x.tag=0,Pt&&ne&&Tt(x),bl(null,x,Q,k),x=x.child),x;case 16:F=x.elementType;e:{switch(Rg(h,x),h=x.pendingProps,Q=F._init,F=Q(F._payload),x.type=F,Q=x.tag=BB(F),h=Pd(F,h),Q){case 0:x=Ly(null,x,F,h,k);break e;case 1:x=S_(null,x,F,h,k);break e;case 11:x=y_(null,x,F,h,k);break e;case 14:x=w_(null,x,F,Pd(F.type,h),k);break e}throw Error(r(306,F,""))}return x;case 0:return F=x.type,Q=x.pendingProps,Q=x.elementType===F?Q:Pd(F,Q),Ly(h,x,F,Q,k);case 1:return F=x.type,Q=x.pendingProps,Q=x.elementType===F?Q:Pd(F,Q),S_(h,x,F,Q,k);case 3:e:{if(__(x),h===null)throw Error(r(387));F=x.pendingProps,ne=x.memoizedState,Q=ne.element,pu(h,x),Ul(x,F,null,k);var Pe=x.memoizedState;if(F=Pe.element,ne.isDehydrated)if(ne={element:F,isDehydrated:!1,cache:Pe.cache,pendingSuspenseBoundaries:Pe.pendingSuspenseBoundaries,transitions:Pe.transitions},x.updateQueue.baseState=ne,x.memoizedState=ne,x.flags&256){Q=Jh(Error(r(423)),x),x=C_(h,x,F,k,Q);break e}else if(F!==Q){Q=Jh(Error(r(424)),x),x=C_(h,x,F,k,Q);break e}else for(It=cs(x.stateNode.containerInfo.firstChild),at=x,Pt=!0,Ut=null,k=na(x,null,F,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(mn(),F===Q){x=of(h,x,k);break e}bl(h,x,F,k)}x=x.child}return x;case 5:return Qh(x),h===null&&gr(x),F=x.type,Q=x.pendingProps,ne=h!==null?h.memoizedProps:null,Pe=Q.children,qf(F,Q)?Pe=null:ne!==null&&qf(F,ne)&&(x.flags|=32),k_(h,x),bl(h,x,Pe,k),x.child;case 6:return h===null&&gr(x),null;case 13:return A_(h,x,k);case 4:return vu(x,x.stateNode.containerInfo),F=x.pendingProps,h===null?x.child=Es(x,null,F,k):bl(h,x,F,k),x.child;case 11:return F=x.type,Q=x.pendingProps,Q=x.elementType===F?Q:Pd(F,Q),y_(h,x,F,Q,k);case 7:return bl(h,x,x.pendingProps,k),x.child;case 8:return bl(h,x,x.pendingProps.children,k),x.child;case 12:return bl(h,x,x.pendingProps.children,k),x.child;case 10:e:{if(F=x.type._context,Q=x.pendingProps,ne=x.memoizedProps,Pe=Q.value,oa(Is,F._currentValue),F._currentValue=Pe,ne!==null)if(Xn(ne.value,Pe)){if(ne.children===Q.children&&!vi.current){x=of(h,x,k);break e}}else for(ne=x.child,ne!==null&&(ne.return=x);ne!==null;){var Ze=ne.dependencies;if(Ze!==null){Pe=ne.child;for(var it=Ze.firstContext;it!==null;){if(it.context===F){if(ne.tag===1){it=Vo(-1,k&-k),it.tag=2;var Et=ne.updateQueue;if(Et!==null){Et=Et.shared;var er=Et.pending;er===null?it.next=it:(it.next=er.next,er.next=it),Et.pending=it}}ne.lanes|=k,it=ne.alternate,it!==null&&(it.lanes|=k),Go(ne.return,k,x),Ze.lanes|=k;break}it=it.next}}else if(ne.tag===10)Pe=ne.type===x.type?null:ne.child;else if(ne.tag===18){if(Pe=ne.return,Pe===null)throw Error(r(341));Pe.lanes|=k,Ze=Pe.alternate,Ze!==null&&(Ze.lanes|=k),Go(Pe,k,x),Pe=ne.sibling}else Pe=ne.child;if(Pe!==null)Pe.return=ne;else for(Pe=ne;Pe!==null;){if(Pe===x){Pe=null;break}if(ne=Pe.sibling,ne!==null){ne.return=Pe.return,Pe=ne;break}Pe=Pe.return}ne=Pe}bl(h,x,Q.children,k),x=x.child}return x;case 9:return Q=x.type,F=x.pendingProps.children,Za(x,k),Q=as(Q),F=F(Q),x.flags|=1,bl(h,x,F,k),x.child;case 14:return F=x.type,Q=Pd(F,x.pendingProps),Q=Pd(F.type,Q),w_(h,x,F,Q,k);case 15:return N_(h,x,x.type,x.pendingProps,k);case 17:return F=x.type,Q=x.pendingProps,Q=x.elementType===F?Q:Pd(F,Q),Rg(h,x),x.tag=1,Zi(F)?(h=!0,Bc(x)):h=!1,Za(x,k),h_(x,F,Q),Py(x,F,Q,k),Fy(null,x,F,!0,h,k);case 19:return T_(h,x,k);case 22:return j_(h,x,k)}throw Error(r(156,x.tag))};function e6(h,x){return ve(h,x)}function RB(h,x,k,F){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=F,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hc(h,x,k,F){return new RB(h,x,k,F)}function r2(h){return h=h.prototype,!(!h||!h.isReactComponent)}function BB(h){if(typeof h=="function")return r2(h)?1:0;if(h!=null){if(h=h.$$typeof,h===_)return 11;if(h===H)return 14}return 2}function e0(h,x){var k=h.alternate;return k===null?(k=Hc(h.tag,x,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=x,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,x=h.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function Xg(h,x,k,F,Q,ne){var Pe=2;if(F=h,typeof h=="function")r2(h)&&(Pe=1);else if(typeof h=="string")Pe=5;else e:switch(h){case A:return X0(k.children,Q,ne,x);case P:Pe=8,Q|=8;break;case I:return h=Hc(12,k,x,Q|2),h.elementType=I,h.lanes=ne,h;case R:return h=Hc(13,k,x,Q),h.elementType=R,h.lanes=ne,h;case z:return h=Hc(19,k,x,Q),h.elementType=z,h.lanes=ne,h;case J:return Yg(k,Q,ne,x);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case B:Pe=10;break e;case T:Pe=9;break e;case _:Pe=11;break e;case H:Pe=14;break e;case Y:Pe=16,F=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return x=Hc(Pe,k,x,Q),x.elementType=h,x.type=F,x.lanes=ne,x}function X0(h,x,k,F){return h=Hc(7,h,F,x),h.lanes=k,h}function Yg(h,x,k,F){return h=Hc(22,h,F,x),h.elementType=J,h.lanes=k,h.stateNode={isHidden:!1},h}function n2(h,x,k){return h=Hc(6,h,null,x),h.lanes=k,h}function a2(h,x,k){return x=Hc(4,h.children!==null?h.children:[],h.key,x),x.lanes=k,x.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},x}function UB(h,x,k,F,Q){this.tag=x,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=En(0),this.expirationTimes=En(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=En(0),this.identifierPrefix=F,this.onRecoverableError=Q,this.mutableSourceEagerHydrationData=null}function s2(h,x,k,F,Q,ne,Pe,Ze,it){return h=new UB(h,x,k,Ze,it),x===1?(x=1,ne===!0&&(x|=8)):x=0,ne=Hc(3,null,null,x),h.current=ne,ne.stateNode=h,ne.memoizedState={element:F,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ad(ne),h}function qB(h,x,k){var F=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E,key:F==null?null:""+F,children:h,containerInfo:x,implementation:k}}function t6(h){if(!h)return Rc;h=h._reactInternals;e:{if(Fe(h)!==h||h.tag!==1)throw Error(r(170));var x=h;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Zi(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(r(171))}if(h.tag===1){var k=h.type;if(Zi(k))return U0(h,k,x)}return x}function r6(h,x,k,F,Q,ne,Pe,Ze,it){return h=s2(k,F,!0,h,Q,ne,Pe,Ze,it),h.context=t6(null),k=h.current,F=yl(),Q=Jf(k),ne=Vo(F,Q),ne.callback=x??null,jo(k,ne,Q),h.current.lanes=Q,rr(h,Q,F),Gl(h,F),h}function Qg(h,x,k,F){var Q=x.current,ne=yl(),Pe=Jf(Q);return k=t6(k),x.context===null?x.context=k:x.pendingContext=k,x=Vo(ne,Pe),x.payload={element:h},F=F===void 0?null:F,F!==null&&(x.callback=F),h=jo(Q,x,Pe),h!==null&&(Ld(h,Q,Pe,ne),oc(h,Q,Pe)),Pe}function Jg(h){return h=h.current,h.child?(h.child.tag===5,h.child.stateNode):null}function n6(h,x){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<x?k:x}}function i2(h,x){n6(h,x),(h=h.alternate)&&n6(h,x)}function $B(){return null}var a6=typeof reportError=="function"?reportError:function(h){console.error(h)};function o2(h){this._internalRoot=h}Zg.prototype.render=o2.prototype.render=function(h){var x=this._internalRoot;if(x===null)throw Error(r(409));Qg(h,x,null,null)},Zg.prototype.unmount=o2.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var x=h.containerInfo;G0(function(){Qg(null,h,null,null)}),x[ds]=null}};function Zg(h){this._internalRoot=h}Zg.prototype.unstable_scheduleHydration=function(h){if(h){var x=ar();h={blockedOn:null,target:h,priority:x};for(var k=0;k<Or.length&&x!==0&&x<Or[k].priority;k++);Or.splice(k,0,h),k===0&&ws(h)}};function l2(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function ev(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function s6(){}function zB(h,x,k,F,Q){if(Q){if(typeof F=="function"){var ne=F;F=function(){var Et=Jg(Pe);ne.call(Et)}}var Pe=r6(x,F,h,0,null,!1,!1,"",s6);return h._reactRootContainer=Pe,h[ds]=Pe.current,kd(h.nodeType===8?h.parentNode:h),G0(),Pe}for(;Q=h.lastChild;)h.removeChild(Q);if(typeof F=="function"){var Ze=F;F=function(){var Et=Jg(it);Ze.call(Et)}}var it=s2(h,0,!1,null,null,!1,!1,"",s6);return h._reactRootContainer=it,h[ds]=it.current,kd(h.nodeType===8?h.parentNode:h),G0(function(){Qg(x,it,k,F)}),it}function tv(h,x,k,F,Q){var ne=k._reactRootContainer;if(ne){var Pe=ne;if(typeof Q=="function"){var Ze=Q;Q=function(){var it=Jg(Pe);Ze.call(it)}}Qg(x,Pe,h,Q)}else Pe=zB(k,x,h,Q,F);return Jg(Pe)}Ma=function(h){switch(h.tag){case 3:var x=h.stateNode;if(x.current.memoizedState.isDehydrated){var k=Ot(x.pendingLanes);k!==0&&(Rt(x,k|1),Gl(x,bt()),(da&6)===0&&(tm=bt()+500,oe()))}break;case 13:G0(function(){var F=Yn(h,1);if(F!==null){var Q=yl();Ld(F,h,1,Q)}}),i2(h,1)}},Ca=function(h){if(h.tag===13){var x=Yn(h,134217728);if(x!==null){var k=yl();Ld(x,h,134217728,k)}i2(h,134217728)}},Aa=function(h){if(h.tag===13){var x=Jf(h),k=Yn(h,x);if(k!==null){var F=yl();Ld(k,h,x,F)}i2(h,x)}},ar=function(){return Cr},nn=function(h,x){var k=Cr;try{return Cr=h,x()}finally{Cr=k}},Jt=function(h,x,k){switch(x){case"input":if(Ee(h,k),x=k.name,k.type==="radio"&&x!=null){for(k=h;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var F=k[x];if(F!==h&&F.form===h.form){var Q=Zu(F);if(!Q)throw Error(r(90));ue(F),Ee(F,Q)}}}break;case"textarea":xe(h,k);break;case"select":x=k.value,x!=null&&ce(h,!!k.multiple,x,!1)}},Sr=Zy,Jr=G0;var HB={usingClientEntryPoint:!1,Events:[Ml,Mc,Zu,Dt,mr,Zy]},Sp={findFiberByHostInstance:Fc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},WB={bundleType:Sp.bundleType,version:Sp.version,rendererPackageName:Sp.rendererPackageName,rendererConfig:Sp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:N.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=xt(h),h===null?null:h.stateNode},findFiberByHostInstance:Sp.findFiberByHostInstance||$B,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rv.isDisabled&&rv.supportsFiber)try{un=rv.inject(WB),Vr=rv}catch{}}return Vl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HB,Vl.createPortal=function(h,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!l2(x))throw Error(r(200));return qB(h,x,null,k)},Vl.createRoot=function(h,x){if(!l2(h))throw Error(r(299));var k=!1,F="",Q=a6;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(F=x.identifierPrefix),x.onRecoverableError!==void 0&&(Q=x.onRecoverableError)),x=s2(h,1,!1,null,null,k,!1,F,Q),h[ds]=x.current,kd(h.nodeType===8?h.parentNode:h),new o2(x)},Vl.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var x=h._reactInternals;if(x===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=xt(x),h=h===null?null:h.stateNode,h},Vl.flushSync=function(h){return G0(h)},Vl.hydrate=function(h,x,k){if(!ev(x))throw Error(r(200));return tv(null,h,x,!0,k)},Vl.hydrateRoot=function(h,x,k){if(!l2(h))throw Error(r(405));var F=k!=null&&k.hydratedSources||null,Q=!1,ne="",Pe=a6;if(k!=null&&(k.unstable_strictMode===!0&&(Q=!0),k.identifierPrefix!==void 0&&(ne=k.identifierPrefix),k.onRecoverableError!==void 0&&(Pe=k.onRecoverableError)),x=r6(x,null,h,1,k??null,Q,!1,ne,Pe),h[ds]=x.current,kd(h),F)for(h=0;h<F.length;h++)k=F[h],Q=k._getVersion,Q=Q(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,Q]:x.mutableSourceEagerHydrationData.push(k,Q);return new Zg(x)},Vl.render=function(h,x,k){if(!ev(x))throw Error(r(200));return tv(null,h,x,!1,k)},Vl.unmountComponentAtNode=function(h){if(!ev(h))throw Error(r(40));return h._reactRootContainer?(G0(function(){tv(null,null,h,!1,function(){h._reactRootContainer=null,h[ds]=null})}),!0):!1},Vl.unstable_batchedUpdates=Zy,Vl.unstable_renderSubtreeIntoContainer=function(h,x,k,F){if(!ev(k))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return tv(h,x,k,!1,F)},Vl.version="18.3.1-next-f1338f8080-20240426",Vl}var h6;function C8(){if(h6)return u2.exports;h6=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),u2.exports=JB(),u2.exports}var m6;function ZB(){if(m6)return av;m6=1;var e=C8();return av.createRoot=e.createRoot,av.hydrateRoot=e.hydrateRoot,av}var eU=ZB();const tU=La(eU),rU="modulepreload",nU=function(e){return"/"+e},p6={},s1=function(t,r,a){let s=Promise.resolve();if(r&&r.length>0){let c=function(d){return Promise.all(d.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(d=>{if(d=nU(d),d in p6)return;p6[d]=!0;const u=d.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":rU,u||(p.as="script"),p.crossOrigin="",p.href=d,l&&p.setAttribute("nonce",l),document.head.appendChild(p),u)return new Promise((m,b)=>{p.addEventListener("load",m),p.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};const aU=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),A8=(...e)=>e.filter((t,r,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===r).join(" ").trim();var sU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const iU=D.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:a,className:s="",children:i,iconNode:o,...l},c)=>D.createElement("svg",{ref:c,...sU,width:t,height:t,stroke:e,strokeWidth:a?Number(r)*24/Number(t):r,className:A8("lucide",s),...l},[...o.map(([d,u])=>D.createElement(d,u)),...Array.isArray(i)?i:[i]]));const zt=(e,t)=>{const r=D.forwardRef(({className:a,...s},i)=>D.createElement(iU,{ref:i,iconNode:t,className:A8(`lucide-${aU(e)}`,a),...s}));return r.displayName=`${e}`,r};const x6=zt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const oU=zt("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);const Cu=zt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const Qk=zt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const To=zt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const lU=zt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const wh=zt("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);const sv=zt("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const Pb=zt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const ci=zt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const g6=zt("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const i1=zt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const Cl=zt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const Gv=zt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const dl=zt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Jn=zt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const v6=zt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const E8=zt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const ex=zt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);const cd=zt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Fs=zt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Wj=zt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const wa=zt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const o1=zt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const $n=zt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Nn=zt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const T8=zt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const cU=zt("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);const Ib=zt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Pu=zt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const is=zt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const l0=zt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);const Gj=zt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);const O8=zt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const P8=zt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const Mu=zt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Iu=zt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const b6=zt("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Jk=zt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const ps=zt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const dU=zt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Xd=zt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const uU=zt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const Vv=zt("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);const fU=zt("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);const xx=zt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const Qn=zt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const y6=zt("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);const hU=zt("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);const mU=zt("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const mc=zt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const bf=zt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Yd=zt("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const fh=zt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const pU=zt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const pc=zt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const xU=zt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const ad=zt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const gU=zt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const Sl=zt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const iv=zt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const y0=zt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Vj=zt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Kj=zt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const c0=zt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const hh=zt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);const Db=zt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const vU=zt("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const gt=zt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const bU=zt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const I8=zt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const rs=zt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const Zk=zt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Kv=zt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const yU=zt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const wU=zt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Xv=zt("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);const NU=zt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const co=zt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const jU=zt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const kU=zt("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const eS=zt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const Xj=zt("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const J0=zt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const SU=zt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const Yj=zt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const Do=zt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Qj=zt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const _U=zt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const ln=zt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Jj=zt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const sd=zt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const D8=zt("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const l1=zt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const di=zt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const CU=zt("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);const Jl=zt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Xl=zt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const w6=zt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const Zj=zt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const c1=zt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const AU=zt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const Lb=zt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const gx=zt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Ri=zt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const _i=zt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const EU=zt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const TU=zt("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const yf=zt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const Ms=zt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const Cp=zt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Lr=zt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const OU=zt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);const PU=zt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Qd=zt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const w0=zt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const kc=zt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const ov=zt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const id=zt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const qi=zt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const x0=zt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const ah=zt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const IU=zt("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);const tr=zt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const d1=zt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),L8=[{id:"dashboard",label:"Dashboard",icon:n.jsx(gU,{className:"w-5 h-5"})},{id:"tasks",label:"Tasks",icon:n.jsx(_i,{className:"w-5 h-5"})},{id:"schedule",label:"Schedule",icon:n.jsx(Jn,{className:"w-5 h-5"})}],Yv=[{id:"sales-crm",label:"Sales & CRM",icon:n.jsx(Cl,{className:"w-5 h-5"}),items:[{id:"crm",label:"CRM",icon:n.jsx(x0,{className:"w-5 h-5"})},{id:"pipeline",label:"Deal Pipeline",icon:n.jsx(Cl,{className:"w-5 h-5"})},{id:"playbooks",label:"Playbooks",icon:n.jsx(ci,{className:"w-5 h-5"})},{id:"products-services",label:"Products & Services",icon:n.jsx(eS,{className:"w-5 h-5"})}]},{id:"client-management",label:"Client Management",icon:n.jsx(rs,{className:"w-5 h-5"}),items:[{id:"inbox",label:"Shared Inbox",icon:n.jsx(rs,{className:"w-5 h-5"})},{id:"satisfaction",label:"Client Satisfaction",icon:n.jsx(yf,{className:"w-5 h-5"})},{id:"contracts",label:"Contracts & Legal",icon:n.jsx(Vv,{className:"w-5 h-5"})}]},{id:"finance",label:"Finance",icon:n.jsx(Mu,{className:"w-5 h-5"}),items:[{id:"invoices",label:"Billing & Invoicing",icon:n.jsx(Mu,{className:"w-5 h-5"})},{id:"expenses",label:"Expenses",icon:n.jsx(Jj,{className:"w-5 h-5"})},{id:"budget",label:"Budget Management",icon:n.jsx(ex,{className:"w-5 h-5"})}]},{id:"projects",label:"Projects",icon:n.jsx(Qn,{className:"w-5 h-5"}),items:[{id:"projects",label:"Projects",icon:n.jsx(Qn,{className:"w-5 h-5"})}]}],F8={id:"system",label:"System",icon:n.jsx(Zj,{className:"w-5 h-5"}),items:[{id:"integrations",label:"Integrations",icon:n.jsx(c1,{className:"w-5 h-5"})},{id:"roadmap",label:"Roadmap",icon:n.jsx(Kv,{className:"w-5 h-5"})},{id:"settings",label:"Settings",icon:n.jsx(Zj,{className:"w-5 h-5"})},{id:"data-hygiene",label:"Data Hygiene",icon:n.jsx(Lb,{className:"w-5 h-5"})},{id:"import-history",label:"Import History",icon:n.jsx(ad,{className:"w-5 h-5"})}]},DU=F8.items;[...L8,...Yv.flatMap(e=>e.items),...DU];const Qv=[{id:"u1",name:"Alex Rivera",email:"alex@impact247.com",role:"Admin",avatar:"https://picsum.photos/seed/alex/100/100",active:!0}],lv=[{id:"new-lead",label:"New Lead",description:"Alerts when a new lead is assigned to you",inApp:!0,email:!0},{id:"deal-update",label:"Deal Update",description:"Alerts when a deal status or stage changes",inApp:!0,email:!1},{id:"task-assigned",label:"Task Assigned",description:"Alerts when a teammate assigns a task to you",inApp:!0,email:!0},{id:"task-comment",label:"Task Comment/Note Added",description:"Alerts when someone posts in the Notes & Comments section of a task you're assigned to or involved in",inApp:!0,email:!1},{id:"task-mention",label:"Task @Mention",description:"Alerts when someone uses @ to mention you in a task comment",inApp:!0,email:!0},{id:"task-status-changed",label:"Task Status Changed",description:"Alerts when a task you're assigned to or created moves between statuses",inApp:!0,email:!1},{id:"task-due-date-reminder",label:"Task Due Date Reminder",description:"Alert before a task is due",inApp:!0,email:!0},{id:"project-update",label:"Project Update",description:"Alerts when milestone or status updates occur",inApp:!1,email:!0},{id:"company-update",label:"Company Update",description:"Alerts when company information or details are updated",inApp:!0,email:!1},{id:"contact-update",label:"Contact Update",description:"Alerts when contact information or details are updated",inApp:!0,email:!1},{id:"email-routing",label:"Email Auto-Assigned",description:"Alerts when an email is automatically assigned to you via routing rules",inApp:!0,email:!0},{id:"email-assigned",label:"Email Assigned",description:"Alerts when an email is manually assigned to you",inApp:!0,email:!1},{id:"email-mention",label:"Email Mentions",description:"Alerts when you are mentioned in an email note",inApp:!0,email:!0},{id:"new-email",label:"New Email",description:"Alerts when a new email is received in shared inbox",inApp:!1,email:!1}],LU=e=>{const t=e.match(/UTC([+-]?)(\d+)(?::(\d+))?/);if(!t)return 0;const r=t[1]==="-"?-1:1,a=parseInt(t[2],10),s=t[3]?parseInt(t[3],10):0;return r*(a+s/60)},tx=[{value:"UTC-12",label:"UTC-12 (Baker Island Time)"},{value:"UTC-11",label:"UTC-11 (Hawaii-Aleutian Standard Time)"},{value:"UTC-10",label:"UTC-10 (Hawaii Standard Time)"},{value:"UTC-9:30",label:"UTC-9:30 (Marquesas Time)"},{value:"UTC-9",label:"UTC-9 (Alaska Standard Time)"},{value:"UTC-8",label:"UTC-8 (Pacific Standard Time - PST)"},{value:"UTC-7",label:"UTC-7 (Mountain Standard Time - MST)"},{value:"UTC-6",label:"UTC-6 (Central Standard Time - CST)"},{value:"UTC-5",label:"UTC-5 (Eastern Standard Time - EST)"},{value:"UTC-4",label:"UTC-4 (Atlantic Standard Time - AST)"},{value:"UTC-3:30",label:"UTC-3:30 (Newfoundland Standard Time)"},{value:"UTC-3",label:"UTC-3 (Argentina Time)"},{value:"UTC-2",label:"UTC-2 (South Georgia Time)"},{value:"UTC-1",label:"UTC-1 (Cape Verde Time)"},{value:"UTC+0",label:"UTC+0 (Greenwich Mean Time - GMT)"},{value:"UTC+1",label:"UTC+1 (Central European Time - CET)"},{value:"UTC+2",label:"UTC+2 (Eastern European Time - EET)"},{value:"UTC+3",label:"UTC+3 (Moscow Time - MSK)"},{value:"UTC+3:30",label:"UTC+3:30 (Iran Standard Time)"},{value:"UTC+4",label:"UTC+4 (Gulf Standard Time)"},{value:"UTC+4:30",label:"UTC+4:30 (Afghanistan Time)"},{value:"UTC+5",label:"UTC+5 (Pakistan Standard Time)"},{value:"UTC+5:30",label:"UTC+5:30 (India Standard Time - IST)"},{value:"UTC+5:45",label:"UTC+5:45 (Nepal Time)"},{value:"UTC+6",label:"UTC+6 (Bangladesh Standard Time)"},{value:"UTC+6:30",label:"UTC+6:30 (Myanmar Time)"},{value:"UTC+7",label:"UTC+7 (Indochina Time)"},{value:"UTC+8",label:"UTC+8 (China Standard Time - CST)"},{value:"UTC+8:45",label:"UTC+8:45 (Australian Central Western Time)"},{value:"UTC+9",label:"UTC+9 (Japan Standard Time - JST)"},{value:"UTC+9:30",label:"UTC+9:30 (Australian Central Standard Time)"},{value:"UTC+10",label:"UTC+10 (Australian Eastern Standard Time)"},{value:"UTC+10:30",label:"UTC+10:30 (Lord Howe Standard Time)"},{value:"UTC+11",label:"UTC+11 (Solomon Islands Time)"},{value:"UTC+12",label:"UTC+12 (New Zealand Standard Time)"},{value:"UTC+12:45",label:"UTC+12:45 (Chatham Standard Time)"},{value:"UTC+13",label:"UTC+13 (Tonga Time)"},{value:"UTC+14",label:"UTC+14 (Line Islands Time)"}],Ap=()=>{try{const e=-new Date().getTimezoneOffset(),t=e/60,r=e%60;if(r===0){const l=`UTC${t>=0?"+":""}${t}`;if(tx.find(c=>c.value===l))return l}else{const o=Math.floor(Math.abs(t)),l=Math.abs(r),d=`UTC${t>=0?"+":"-"}${o}:${l}`;if(tx.find(u=>u.value===d))return d}const a=t;let s="UTC+0",i=1/0;return tx.forEach(o=>{const l=LU(o.value),c=Math.abs(l-a);c<i&&(i=c,s=o.value)}),s}catch{return"UTC+0"}},N6=[{value:"English",label:"English"},{value:"Spanish",label:"Spanish (Espaol)"},{value:"French",label:"French (Franais)"}];function M8(e){var t,r,a="";if(typeof e=="string"||typeof e=="number")a+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=M8(e[t]))&&(a&&(a+=" "),a+=r)}else for(r in e)e[r]&&(a&&(a+=" "),a+=r);return a}function fa(){for(var e,t,r=0,a="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=M8(e))&&(a&&(a+=" "),a+=t);return a}var m2,j6;function ec(){if(j6)return m2;j6=1;var e=Array.isArray;return m2=e,m2}var p2,k6;function R8(){if(k6)return p2;k6=1;var e=typeof nv=="object"&&nv&&nv.Object===Object&&nv;return p2=e,p2}var x2,S6;function Bu(){if(S6)return x2;S6=1;var e=R8(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return x2=r,x2}var g2,_6;function gg(){if(_6)return g2;_6=1;var e=Bu(),t=e.Symbol;return g2=t,g2}var v2,C6;function FU(){if(C6)return v2;C6=1;var e=gg(),t=Object.prototype,r=t.hasOwnProperty,a=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),c=o[s];try{o[s]=void 0;var d=!0}catch{}var u=a.call(o);return d&&(l?o[s]=c:delete o[s]),u}return v2=i,v2}var b2,A6;function MU(){if(A6)return b2;A6=1;var e=Object.prototype,t=e.toString;function r(a){return t.call(a)}return b2=r,b2}var y2,E6;function Pf(){if(E6)return y2;E6=1;var e=gg(),t=FU(),r=MU(),a="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:a:i&&i in Object(l)?t(l):r(l)}return y2=o,y2}var w2,T6;function If(){if(T6)return w2;T6=1;function e(t){return t!=null&&typeof t=="object"}return w2=e,w2}var N2,O6;function ap(){if(O6)return N2;O6=1;var e=Pf(),t=If(),r="[object Symbol]";function a(s){return typeof s=="symbol"||t(s)&&e(s)==r}return N2=a,N2}var j2,P6;function tS(){if(P6)return j2;P6=1;var e=ec(),t=ap(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:a.test(i)||!r.test(i)||o!=null&&i in Object(o)}return j2=s,j2}var k2,I6;function A0(){if(I6)return k2;I6=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return k2=e,k2}var S2,D6;function rS(){if(D6)return S2;D6=1;var e=Pf(),t=A0(),r="[object AsyncFunction]",a="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==a||c==s||c==r||c==i}return S2=o,S2}var _2,L6;function RU(){if(L6)return _2;L6=1;var e=Bu(),t=e["__core-js_shared__"];return _2=t,_2}var C2,F6;function BU(){if(F6)return C2;F6=1;var e=RU(),t=(function(){var a=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""})();function r(a){return!!t&&t in a}return C2=r,C2}var A2,M6;function B8(){if(M6)return A2;M6=1;var e=Function.prototype,t=e.toString;function r(a){if(a!=null){try{return t.call(a)}catch{}try{return a+""}catch{}}return""}return A2=r,A2}var E2,R6;function UU(){if(R6)return E2;R6=1;var e=rS(),t=BU(),r=A0(),a=B8(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,d=l.hasOwnProperty,u=RegExp("^"+c.call(d).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function f(p){if(!r(p)||t(p))return!1;var m=e(p)?u:i;return m.test(a(p))}return E2=f,E2}var T2,B6;function qU(){if(B6)return T2;B6=1;function e(t,r){return t?.[r]}return T2=e,T2}var O2,U6;function Fh(){if(U6)return O2;U6=1;var e=UU(),t=qU();function r(a,s){var i=t(a,s);return e(i)?i:void 0}return O2=r,O2}var P2,q6;function Fb(){if(q6)return P2;q6=1;var e=Fh(),t=e(Object,"create");return P2=t,P2}var I2,$6;function $U(){if($6)return I2;$6=1;var e=Fb();function t(){this.__data__=e?e(null):{},this.size=0}return I2=t,I2}var D2,z6;function zU(){if(z6)return D2;z6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return D2=e,D2}var L2,H6;function HU(){if(H6)return L2;H6=1;var e=Fb(),t="__lodash_hash_undefined__",r=Object.prototype,a=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return a.call(o,i)?o[i]:void 0}return L2=s,L2}var F2,W6;function WU(){if(W6)return F2;W6=1;var e=Fb(),t=Object.prototype,r=t.hasOwnProperty;function a(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return F2=a,F2}var M2,G6;function GU(){if(G6)return M2;G6=1;var e=Fb(),t="__lodash_hash_undefined__";function r(a,s){var i=this.__data__;return this.size+=this.has(a)?0:1,i[a]=e&&s===void 0?t:s,this}return M2=r,M2}var R2,V6;function VU(){if(V6)return R2;V6=1;var e=$U(),t=zU(),r=HU(),a=WU(),s=GU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,R2=i,R2}var B2,K6;function KU(){if(K6)return B2;K6=1;function e(){this.__data__=[],this.size=0}return B2=e,B2}var U2,X6;function nS(){if(X6)return U2;X6=1;function e(t,r){return t===r||t!==t&&r!==r}return U2=e,U2}var q2,Y6;function Mb(){if(Y6)return q2;Y6=1;var e=nS();function t(r,a){for(var s=r.length;s--;)if(e(r[s][0],a))return s;return-1}return q2=t,q2}var $2,Q6;function XU(){if(Q6)return $2;Q6=1;var e=Mb(),t=Array.prototype,r=t.splice;function a(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return $2=a,$2}var z2,J6;function YU(){if(J6)return z2;J6=1;var e=Mb();function t(r){var a=this.__data__,s=e(a,r);return s<0?void 0:a[s][1]}return z2=t,z2}var H2,Z6;function QU(){if(Z6)return H2;Z6=1;var e=Mb();function t(r){return e(this.__data__,r)>-1}return H2=t,H2}var W2,eC;function JU(){if(eC)return W2;eC=1;var e=Mb();function t(r,a){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,a])):s[i][1]=a,this}return W2=t,W2}var G2,tC;function Rb(){if(tC)return G2;tC=1;var e=KU(),t=XU(),r=YU(),a=QU(),s=JU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,G2=i,G2}var V2,rC;function aS(){if(rC)return V2;rC=1;var e=Fh(),t=Bu(),r=e(t,"Map");return V2=r,V2}var K2,nC;function ZU(){if(nC)return K2;nC=1;var e=VU(),t=Rb(),r=aS();function a(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return K2=a,K2}var X2,aC;function eq(){if(aC)return X2;aC=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return X2=e,X2}var Y2,sC;function Bb(){if(sC)return Y2;sC=1;var e=eq();function t(r,a){var s=r.__data__;return e(a)?s[typeof a=="string"?"string":"hash"]:s.map}return Y2=t,Y2}var Q2,iC;function tq(){if(iC)return Q2;iC=1;var e=Bb();function t(r){var a=e(this,r).delete(r);return this.size-=a?1:0,a}return Q2=t,Q2}var J2,oC;function rq(){if(oC)return J2;oC=1;var e=Bb();function t(r){return e(this,r).get(r)}return J2=t,J2}var Z2,lC;function nq(){if(lC)return Z2;lC=1;var e=Bb();function t(r){return e(this,r).has(r)}return Z2=t,Z2}var ew,cC;function aq(){if(cC)return ew;cC=1;var e=Bb();function t(r,a){var s=e(this,r),i=s.size;return s.set(r,a),this.size+=s.size==i?0:1,this}return ew=t,ew}var tw,dC;function sS(){if(dC)return tw;dC=1;var e=ZU(),t=tq(),r=rq(),a=nq(),s=aq();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var d=o[l];this.set(d[0],d[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=a,i.prototype.set=s,tw=i,tw}var rw,uC;function U8(){if(uC)return rw;uC=1;var e=sS(),t="Expected a function";function r(a,s){if(typeof a!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var d=a.apply(this,o);return i.cache=c.set(l,d)||c,d};return i.cache=new(r.Cache||e),i}return r.Cache=e,rw=r,rw}var nw,fC;function sq(){if(fC)return nw;fC=1;var e=U8(),t=500;function r(a){var s=e(a,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return nw=r,nw}var aw,hC;function iq(){if(hC)return aw;hC=1;var e=sq(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,a=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,c,d){i.push(c?d.replace(r,"$1"):l||o)}),i});return aw=a,aw}var sw,mC;function iS(){if(mC)return sw;mC=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=Array(s);++a<s;)i[a]=r(t[a],a,t);return i}return sw=e,sw}var iw,pC;function oq(){if(pC)return iw;pC=1;var e=gg(),t=iS(),r=ec(),a=ap(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(a(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return iw=o,iw}var ow,xC;function q8(){if(xC)return ow;xC=1;var e=oq();function t(r){return r==null?"":e(r)}return ow=t,ow}var lw,gC;function $8(){if(gC)return lw;gC=1;var e=ec(),t=tS(),r=iq(),a=q8();function s(i,o){return e(i)?i:t(i,o)?[i]:r(a(i))}return lw=s,lw}var cw,vC;function Ub(){if(vC)return cw;vC=1;var e=ap();function t(r){if(typeof r=="string"||e(r))return r;var a=r+"";return a=="0"&&1/r==-1/0?"-0":a}return cw=t,cw}var dw,bC;function oS(){if(bC)return dw;bC=1;var e=$8(),t=Ub();function r(a,s){s=e(s,a);for(var i=0,o=s.length;a!=null&&i<o;)a=a[t(s[i++])];return i&&i==o?a:void 0}return dw=r,dw}var uw,yC;function z8(){if(yC)return uw;yC=1;var e=oS();function t(r,a,s){var i=r==null?void 0:e(r,a);return i===void 0?s:i}return uw=t,uw}var lq=z8();const od=La(lq);var fw,wC;function cq(){if(wC)return fw;wC=1;function e(t){return t==null}return fw=e,fw}var dq=cq();const Vn=La(dq);var hw,NC;function uq(){if(NC)return hw;NC=1;var e=Pf(),t=ec(),r=If(),a="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==a}return hw=s,hw}var fq=uq();const Nh=La(fq);var hq=rS();const Dn=La(hq);var mq=A0();const sp=La(mq);var mw={exports:{}},Sa={};var jC;function pq(){if(jC)return Sa;jC=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.offscreen"),b;b=Symbol.for("react.module.reference");function v(g){if(typeof g=="object"&&g!==null){var w=g.$$typeof;switch(w){case e:switch(g=g.type,g){case r:case s:case a:case d:case u:return g;default:switch(g=g&&g.$$typeof,g){case l:case o:case c:case p:case f:case i:return g;default:return w}}case t:return w}}}return Sa.ContextConsumer=o,Sa.ContextProvider=i,Sa.Element=e,Sa.ForwardRef=c,Sa.Fragment=r,Sa.Lazy=p,Sa.Memo=f,Sa.Portal=t,Sa.Profiler=s,Sa.StrictMode=a,Sa.Suspense=d,Sa.SuspenseList=u,Sa.isAsyncMode=function(){return!1},Sa.isConcurrentMode=function(){return!1},Sa.isContextConsumer=function(g){return v(g)===o},Sa.isContextProvider=function(g){return v(g)===i},Sa.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},Sa.isForwardRef=function(g){return v(g)===c},Sa.isFragment=function(g){return v(g)===r},Sa.isLazy=function(g){return v(g)===p},Sa.isMemo=function(g){return v(g)===f},Sa.isPortal=function(g){return v(g)===t},Sa.isProfiler=function(g){return v(g)===s},Sa.isStrictMode=function(g){return v(g)===a},Sa.isSuspense=function(g){return v(g)===d},Sa.isSuspenseList=function(g){return v(g)===u},Sa.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===a||g===d||g===u||g===m||typeof g=="object"&&g!==null&&(g.$$typeof===p||g.$$typeof===f||g.$$typeof===i||g.$$typeof===o||g.$$typeof===c||g.$$typeof===b||g.getModuleId!==void 0)},Sa.typeOf=v,Sa}var kC;function xq(){return kC||(kC=1,mw.exports=pq()),mw.exports}var gq=xq(),pw,SC;function H8(){if(SC)return pw;SC=1;var e=Pf(),t=If(),r="[object Number]";function a(s){return typeof s=="number"||t(s)&&e(s)==r}return pw=a,pw}var xw,_C;function vq(){if(_C)return xw;_C=1;var e=H8();function t(r){return e(r)&&r!=+r}return xw=t,xw}var bq=vq();const ip=La(bq);var yq=H8();const wq=La(yq);var Gd=function(t){return t===0?0:t>0?1:-1},sh=function(t){return Nh(t)&&t.indexOf("%")===t.length-1},ur=function(t){return wq(t)&&!ip(t)},Nq=function(t){return Vn(t)},$i=function(t){return ur(t)||Nh(t)},jq=0,vg=function(t){var r=++jq;return"".concat(t||"").concat(r)},jh=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ur(t)&&!Nh(t))return a;var i;if(sh(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return ip(i)&&(i=a),s&&i>r&&(i=r),i},d0=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},kq=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,a={},s=0;s<r;s++)if(!a[t[s]])a[t[s]]=!0;else return!0;return!1},rd=function(t,r){return ur(t)&&ur(r)?function(a){return t+a*(r-t)}:function(){return r}};function u1(e,t,r){return!e||!e.length?null:e.find(function(a){return a&&(typeof t=="function"?t(a):od(a,t))===r})}var Sq=function(t,r){return ur(t)&&ur(r)?t-r:Nh(t)&&Nh(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function bm(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var a in t)if({}.hasOwnProperty.call(t,a)&&!{}.hasOwnProperty.call(e,a))return!1;return!0}function e4(e){"@babel/helpers - typeof";return e4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e4(e)}var _q=["viewBox","children"],Cq=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],CC=["points","pathLength"],gw={svg:_q,polygon:CC,polyline:CC},lS=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],f1=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(D.isValidElement(t)&&(a=t.props),!sp(a))return null;var s={};return Object.keys(a).forEach(function(i){lS.includes(i)&&(s[i]=r||function(o){return a[i](a,o)})}),s},Aq=function(t,r,a){return function(s){return t(r,a,s),null}},h1=function(t,r,a){if(!sp(t)||e4(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];lS.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=Aq(o,r,a))}),s},Eq=["children"],Tq=["children"];function AC(e,t){if(e==null)return{};var r=Oq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Oq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function t4(e){"@babel/helpers - typeof";return t4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t4(e)}var EC={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},wf=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},TC=null,vw=null,cS=function e(t){if(t===TC&&Array.isArray(vw))return vw;var r=[];return D.Children.forEach(t,function(a){Vn(a)||(gq.isFragment(a)?r=r.concat(e(a.props.children)):r.push(a))}),vw=r,TC=t,r};function Jd(e,t){var r=[],a=[];return Array.isArray(t)?a=t.map(function(s){return wf(s)}):a=[wf(t)],cS(e).forEach(function(s){var i=od(s,"type.displayName")||od(s,"type.name");a.indexOf(i)!==-1&&r.push(s)}),r}function gc(e,t){var r=Jd(e,t);return r&&r[0]}var OC=function(t){if(!t||!t.props)return!1;var r=t.props,a=r.width,s=r.height;return!(!ur(a)||a<=0||!ur(s)||s<=0)},Pq=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Iq=function(t){return t&&t.type&&Nh(t.type)&&Pq.indexOf(t.type)>=0},Dq=function(t){return t&&t4(t)==="object"&&"clipDot"in t},Lq=function(t,r,a,s){var i,o=(i=gw?.[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!Dn(t)&&(s&&o.includes(r)||Cq.includes(r))||a&&lS.includes(r)},Gn=function(t,r,a){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(D.isValidElement(t)&&(s=t.props),!sp(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;Lq((l=s)===null||l===void 0?void 0:l[o],o,r,a)&&(i[o]=s[o])}),i},r4=function e(t,r){if(t===r)return!0;var a=D.Children.count(t);if(a!==D.Children.count(r))return!1;if(a===0)return!0;if(a===1)return PC(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<a;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!PC(i,o))return!1}return!0},PC=function(t,r){if(Vn(t)&&Vn(r))return!0;if(!Vn(t)&&!Vn(r)){var a=t.props||{},s=a.children,i=AC(a,Eq),o=r.props||{},l=o.children,c=AC(o,Tq);return s&&l?bm(i,c)&&r4(s,l):!s&&!l?bm(i,c):!1}return!1},IC=function(t,r){var a=[],s={};return cS(t).forEach(function(i,o){if(Iq(i))a.push(i);else if(i){var l=wf(i.type),c=r[l]||{},d=c.handler,u=c.once;if(d&&(!u||!s[l])){var f=d(i,l,o);a.push(f),s[l]=!0}}}),a},Fq=function(t){var r=t&&t.type;return r&&EC[r]?EC[r]:null},Mq=function(t,r){return cS(r).indexOf(t)},Rq=["children","width","height","viewBox","className","style","title","desc"];function n4(){return n4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},n4.apply(this,arguments)}function Bq(e,t){if(e==null)return{};var r=Uq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Uq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function a4(e){var t=e.children,r=e.width,a=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=Bq(e,Rq),u=s||{width:r,height:a,x:0,y:0},f=fa("recharts-surface",i);return ft.createElement("svg",n4({},Gn(d,!0,"svg"),{className:f,width:r,height:a,style:o,viewBox:"".concat(u.x," ").concat(u.y," ").concat(u.width," ").concat(u.height)}),ft.createElement("title",null,l),ft.createElement("desc",null,c),t)}var qq=["children","className"];function s4(){return s4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},s4.apply(this,arguments)}function $q(e,t){if(e==null)return{};var r=zq(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function zq(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var Rs=ft.forwardRef(function(e,t){var r=e.children,a=e.className,s=$q(e,qq),i=fa("recharts-layer",a);return ft.createElement("g",s4({className:i},Gn(s,!0),{ref:t}),r)}),Nf=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i]},bw,DC;function Hq(){if(DC)return bw;DC=1;function e(t,r,a){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),a=a>i?i:a,a<0&&(a+=i),i=r>a?0:a-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return bw=e,bw}var yw,LC;function Wq(){if(LC)return yw;LC=1;var e=Hq();function t(r,a,s){var i=r.length;return s=s===void 0?i:s,!a&&s>=i?r:e(r,a,s)}return yw=t,yw}var ww,FC;function W8(){if(FC)return ww;FC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function c(d){return l.test(d)}return ww=c,ww}var Nw,MC;function Gq(){if(MC)return Nw;MC=1;function e(t){return t.split("")}return Nw=e,Nw}var jw,RC;function Vq(){if(RC)return jw;RC=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",a="\\u20d0-\\u20ff",s=t+r+a,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+c+")",u="[^"+e+"]",f="(?:\\ud83c[\\udde6-\\uddff]){2}",p="[\\ud800-\\udbff][\\udc00-\\udfff]",m="\\u200d",b=d+"?",v="["+i+"]?",g="(?:"+m+"(?:"+[u,f,p].join("|")+")"+v+b+")*",w=v+b+g,y="(?:"+[u+l+"?",l,f,p,o].join("|")+")",j=RegExp(c+"(?="+c+")|"+y+w,"g");function N(S){return S.match(j)||[]}return jw=N,jw}var kw,BC;function Kq(){if(BC)return kw;BC=1;var e=Gq(),t=W8(),r=Vq();function a(s){return t(s)?r(s):e(s)}return kw=a,kw}var Sw,UC;function Xq(){if(UC)return Sw;UC=1;var e=Wq(),t=W8(),r=Kq(),a=q8();function s(i){return function(o){o=a(o);var l=t(o)?r(o):void 0,c=l?l[0]:o.charAt(0),d=l?e(l,1).join(""):o.slice(1);return c[i]()+d}}return Sw=s,Sw}var _w,qC;function Yq(){if(qC)return _w;qC=1;var e=Xq(),t=e("toUpperCase");return _w=t,_w}var Qq=Yq();const qb=La(Qq);function ss(e){return function(){return e}}const G8=Math.cos,m1=Math.sin,tu=Math.sqrt,p1=Math.PI,$b=2*p1,i4=Math.PI,o4=2*i4,Z0=1e-6,Jq=o4-Z0;function V8(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Zq(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return V8;const r=10**t;return function(a){this._+=a[0];for(let s=1,i=a.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+a[s]}}class e${constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?V8:Zq(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,a,s){this._append`Q${+t},${+r},${this._x1=+a},${this._y1=+s}`}bezierCurveTo(t,r,a,s,i,o){this._append`C${+t},${+r},${+a},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,a,s,i){if(t=+t,r=+r,a=+a,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=a-t,d=s-r,u=o-t,f=l-r,p=u*u+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>Z0)if(!(Math.abs(f*c-d*u)>Z0)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let m=a-o,b=s-l,v=c*c+d*d,g=m*m+b*b,w=Math.sqrt(v),y=Math.sqrt(p),j=i*Math.tan((i4-Math.acos((v+p-g)/(2*w*y)))/2),N=j/y,S=j/w;Math.abs(N-1)>Z0&&this._append`L${t+N*u},${r+N*f}`,this._append`A${i},${i},0,0,${+(f*m>u*b)},${this._x1=t+S*c},${this._y1=r+S*d}`}}arc(t,r,a,s,i,o){if(t=+t,r=+r,a=+a,o=!!o,a<0)throw new Error(`negative radius: ${a}`);let l=a*Math.cos(s),c=a*Math.sin(s),d=t+l,u=r+c,f=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${d},${u}`:(Math.abs(this._x1-d)>Z0||Math.abs(this._y1-u)>Z0)&&this._append`L${d},${u}`,a&&(p<0&&(p=p%o4+o4),p>Jq?this._append`A${a},${a},0,1,${f},${t-l},${r-c}A${a},${a},0,1,${f},${this._x1=d},${this._y1=u}`:p>Z0&&this._append`A${a},${a},0,${+(p>=i4)},${f},${this._x1=t+a*Math.cos(i)},${this._y1=r+a*Math.sin(i)}`)}rect(t,r,a,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${a=+a}v${+s}h${-a}Z`}toString(){return this._}}function dS(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const a=Math.floor(r);if(!(a>=0))throw new RangeError(`invalid digits: ${r}`);t=a}return e},()=>new e$(t)}function uS(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function K8(e){this._context=e}K8.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function zb(e){return new K8(e)}function X8(e){return e[0]}function Y8(e){return e[1]}function Q8(e,t){var r=ss(!0),a=null,s=zb,i=null,o=dS(l);e=typeof e=="function"?e:e===void 0?X8:ss(e),t=typeof t=="function"?t:t===void 0?Y8:ss(t);function l(c){var d,u=(c=uS(c)).length,f,p=!1,m;for(a==null&&(i=s(m=o())),d=0;d<=u;++d)!(d<u&&r(f=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(f,d,c),+t(f,d,c));if(m)return i=null,m+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ss(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ss(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ss(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,a!=null&&(i=s(a)),l):s},l.context=function(c){return arguments.length?(c==null?a=i=null:i=s(a=c),l):a},l}function cv(e,t,r){var a=null,s=ss(!0),i=null,o=zb,l=null,c=dS(d);e=typeof e=="function"?e:e===void 0?X8:ss(+e),t=typeof t=="function"?t:ss(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?Y8:ss(+r);function d(f){var p,m,b,v=(f=uS(f)).length,g,w=!1,y,j=new Array(v),N=new Array(v);for(i==null&&(l=o(y=c())),p=0;p<=v;++p){if(!(p<v&&s(g=f[p],p,f))===w)if(w=!w)m=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=p-1;b>=m;--b)l.point(j[b],N[b]);l.lineEnd(),l.areaEnd()}w&&(j[p]=+e(g,p,f),N[p]=+t(g,p,f),l.point(a?+a(g,p,f):j[p],r?+r(g,p,f):N[p]))}if(y)return l=null,y+""||null}function u(){return Q8().defined(s).curve(o).context(i)}return d.x=function(f){return arguments.length?(e=typeof f=="function"?f:ss(+f),a=null,d):e},d.x0=function(f){return arguments.length?(e=typeof f=="function"?f:ss(+f),d):e},d.x1=function(f){return arguments.length?(a=f==null?null:typeof f=="function"?f:ss(+f),d):a},d.y=function(f){return arguments.length?(t=typeof f=="function"?f:ss(+f),r=null,d):t},d.y0=function(f){return arguments.length?(t=typeof f=="function"?f:ss(+f),d):t},d.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:ss(+f),d):r},d.lineX0=d.lineY0=function(){return u().x(e).y(t)},d.lineY1=function(){return u().x(e).y(r)},d.lineX1=function(){return u().x(a).y(t)},d.defined=function(f){return arguments.length?(s=typeof f=="function"?f:ss(!!f),d):s},d.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),d):o},d.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),d):i},d}class J8{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function t$(e){return new J8(e,!0)}function r$(e){return new J8(e,!1)}const fS={draw(e,t){const r=tu(t/p1);e.moveTo(r,0),e.arc(0,0,r,0,$b)}},n$={draw(e,t){const r=tu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},Z8=tu(1/3),a$=Z8*2,s$={draw(e,t){const r=tu(t/a$),a=r*Z8;e.moveTo(0,-r),e.lineTo(a,0),e.lineTo(0,r),e.lineTo(-a,0),e.closePath()}},i$={draw(e,t){const r=tu(t),a=-r/2;e.rect(a,a,r,r)}},o$=.8908130915292852,eL=m1(p1/10)/m1(7*p1/10),l$=m1($b/10)*eL,c$=-G8($b/10)*eL,d$={draw(e,t){const r=tu(t*o$),a=l$*r,s=c$*r;e.moveTo(0,-r),e.lineTo(a,s);for(let i=1;i<5;++i){const o=$b*i/5,l=G8(o),c=m1(o);e.lineTo(c*r,-l*r),e.lineTo(l*a-c*s,c*a+l*s)}e.closePath()}},Cw=tu(3),u$={draw(e,t){const r=-tu(t/(Cw*3));e.moveTo(0,r*2),e.lineTo(-Cw*r,-r),e.lineTo(Cw*r,-r),e.closePath()}},Wc=-.5,Gc=tu(3)/2,l4=1/tu(12),f$=(l4/2+1)*3,h$={draw(e,t){const r=tu(t/f$),a=r/2,s=r*l4,i=a,o=r*l4+r,l=-i,c=o;e.moveTo(a,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Wc*a-Gc*s,Gc*a+Wc*s),e.lineTo(Wc*i-Gc*o,Gc*i+Wc*o),e.lineTo(Wc*l-Gc*c,Gc*l+Wc*c),e.lineTo(Wc*a+Gc*s,Wc*s-Gc*a),e.lineTo(Wc*i+Gc*o,Wc*o-Gc*i),e.lineTo(Wc*l+Gc*c,Wc*c-Gc*l),e.closePath()}};function m$(e,t){let r=null,a=dS(s);e=typeof e=="function"?e:ss(e||fS),t=typeof t=="function"?t:ss(t===void 0?64:+t);function s(){let i;if(r||(r=i=a()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:ss(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:ss(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function x1(){}function g1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function tL(e){this._context=e}tL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:g1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:g1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function p$(e){return new tL(e)}function rL(e){this._context=e}rL.prototype={areaStart:x1,areaEnd:x1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:g1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function x$(e){return new rL(e)}function nL(e){this._context=e}nL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,a=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,a):this._context.moveTo(r,a);break;case 3:this._point=4;default:g1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function g$(e){return new nL(e)}function aL(e){this._context=e}aL.prototype={areaStart:x1,areaEnd:x1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function v$(e){return new aL(e)}function $C(e){return e<0?-1:1}function zC(e,t,r){var a=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(a||s<0&&-0),o=(r-e._y1)/(s||a<0&&-0),l=(i*s+o*a)/(a+s);return($C(i)+$C(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function HC(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Aw(e,t,r){var a=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-a)/3;e._context.bezierCurveTo(a+l,s+l*t,i-l,o-l*r,i,o)}function v1(e){this._context=e}v1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Aw(this,this._t0,HC(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Aw(this,HC(this,r=zC(this,e,t)),r);break;default:Aw(this,this._t0,r=zC(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function sL(e){this._context=new iL(e)}(sL.prototype=Object.create(v1.prototype)).point=function(e,t){v1.prototype.point.call(this,t,e)};function iL(e){this._context=e}iL.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,a,s,i){this._context.bezierCurveTo(t,e,a,r,i,s)}};function b$(e){return new v1(e)}function y$(e){return new sL(e)}function oL(e){this._context=e}oL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var a=WC(e),s=WC(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(a[0][i],s[0][i],a[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function WC(e){var t,r=e.length-1,a,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)a=s[t]/i[t-1],i[t]-=a,o[t]-=a*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function w$(e){return new oL(e)}function Hb(e,t){this._context=e,this._t=t}Hb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function N$(e){return new Hb(e,.5)}function j$(e){return new Hb(e,0)}function k$(e){return new Hb(e,1)}function Om(e,t){if((o=e.length)>1)for(var r=1,a,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],a=0;a<l;++a)i[a][1]+=i[a][0]=isNaN(s[a][1])?s[a][0]:s[a][1]}function c4(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function S$(e,t){return e[t]}function _$(e){const t=[];return t.key=e,t}function C$(){var e=ss([]),t=c4,r=Om,a=S$;function s(i){var o=Array.from(e.apply(this,arguments),_$),l,c=o.length,d=-1,u;for(const f of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+a(f,o[l].key,d,i)]).data=f;for(l=0,u=uS(t(o));l<c;++l)o[u[l]].index=l;return r(o,u),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ss(Array.from(i)),s):e},s.value=function(i){return arguments.length?(a=typeof i=="function"?i:ss(+i),s):a},s.order=function(i){return arguments.length?(t=i==null?c4:typeof i=="function"?i:ss(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??Om,s):r},s}function A$(e,t){if((a=e.length)>0){for(var r,a,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<a;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<a;++r)e[r][s][1]/=o}Om(e,t)}}function E$(e,t){if((s=e.length)>0){for(var r=0,a=e[t[0]],s,i=a.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;a[r][1]+=a[r][0]=-l/2}Om(e,t)}}function T$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,a=1,s,i,o;a<i;++a){for(var l=0,c=0,d=0;l<o;++l){for(var u=e[t[l]],f=u[a][1]||0,p=u[a-1][1]||0,m=(f-p)/2,b=0;b<l;++b){var v=e[t[b]],g=v[a][1]||0,w=v[a-1][1]||0;m+=g-w}c+=f,d+=m*f}s[a-1][1]+=s[a-1][0]=r,c&&(r-=d/c)}s[a-1][1]+=s[a-1][0]=r,Om(e,t)}}function vx(e){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vx(e)}var O$=["type","size","sizeType"];function d4(){return d4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},d4.apply(this,arguments)}function GC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function VC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GC(Object(r),!0).forEach(function(a){P$(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function P$(e,t,r){return t=I$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I$(e){var t=D$(e,"string");return vx(t)=="symbol"?t:t+""}function D$(e,t){if(vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(vx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function L$(e,t){if(e==null)return{};var r=F$(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function F$(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var lL={symbolCircle:fS,symbolCross:n$,symbolDiamond:s$,symbolSquare:i$,symbolStar:d$,symbolTriangle:u$,symbolWye:h$},M$=Math.PI/180,R$=function(t){var r="symbol".concat(qb(t));return lL[r]||fS},B$=function(t,r,a){if(r==="area")return t;switch(a){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*M$;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},U$=function(t,r){lL["symbol".concat(qb(t))]=r},hS=function(t){var r=t.type,a=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=L$(t,O$),d=VC(VC({},c),{},{type:a,size:i,sizeType:l}),u=function(){var g=R$(a),w=m$().type(g).size(B$(i,l,a));return w()},f=d.className,p=d.cx,m=d.cy,b=Gn(d,!0);return p===+p&&m===+m&&i===+i?ft.createElement("path",d4({},b,{className:fa("recharts-symbols",f),transform:"translate(".concat(p,", ").concat(m,")"),d:u()})):null};hS.registerSymbol=U$;function Pm(e){"@babel/helpers - typeof";return Pm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pm(e)}function u4(){return u4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},u4.apply(this,arguments)}function KC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function q$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KC(Object(r),!0).forEach(function(a){bx(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KC(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z$(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,dL(a.key),a)}}function H$(e,t,r){return t&&z$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function W$(e,t,r){return t=b1(t),G$(e,cL()?Reflect.construct(t,r||[],b1(e).constructor):t.apply(e,r))}function G$(e,t){if(t&&(Pm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V$(e)}function V$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cL=function(){return!!e})()}function b1(e){return b1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},b1(e)}function K$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f4(e,t)}function f4(e,t){return f4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},f4(e,t)}function bx(e,t,r){return t=dL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dL(e){var t=X$(e,"string");return Pm(t)=="symbol"?t:t+""}function X$(e,t){if(Pm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Pm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vc=32,mS=(function(e){function t(){return $$(this,t),W$(this,t,arguments)}return K$(t,e),H$(t,[{key:"renderIcon",value:function(a){var s=this.props.inactiveColor,i=Vc/2,o=Vc/6,l=Vc/3,c=a.inactive?s:a.color;if(a.type==="plainline")return ft.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:a.payload.strokeDasharray,x1:0,y1:i,x2:Vc,y2:i,className:"recharts-legend-icon"});if(a.type==="line")return ft.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Vc,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(a.type==="rect")return ft.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Vc/8,"h").concat(Vc,"v").concat(Vc*3/4,"h").concat(-Vc,"z"),className:"recharts-legend-icon"});if(ft.isValidElement(a.legendIcon)){var d=q$({},a);return delete d.legendIcon,ft.cloneElement(a.legendIcon,d)}return ft.createElement(hS,{fill:c,cx:i,cy:i,size:Vc,sizeType:"diameter",type:a.type})}},{key:"renderItems",value:function(){var a=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,u={x:0,y:0,width:Vc,height:Vc},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(m,b){var v=m.formatter||c,g=fa(bx(bx({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",m.inactive));if(m.type==="none")return null;var w=Dn(m.value)?null:m.value;Nf(!Dn(m.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=m.inactive?d:m.color;return ft.createElement("li",u4({className:g,style:f,key:"legend-item-".concat(b)},h1(a.props,m,b)),ft.createElement(a4,{width:o,height:o,viewBox:u,style:p},a.renderIcon(m)),ft.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},v?v(w,m,b):w))})}},{key:"render",value:function(){var a=this.props,s=a.payload,i=a.layout,o=a.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return ft.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(D.PureComponent);bx(mS,"displayName","Legend");bx(mS,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var Ew,XC;function Y$(){if(XC)return Ew;XC=1;var e=Rb();function t(){this.__data__=new e,this.size=0}return Ew=t,Ew}var Tw,YC;function Q$(){if(YC)return Tw;YC=1;function e(t){var r=this.__data__,a=r.delete(t);return this.size=r.size,a}return Tw=e,Tw}var Ow,QC;function J$(){if(QC)return Ow;QC=1;function e(t){return this.__data__.get(t)}return Ow=e,Ow}var Pw,JC;function Z$(){if(JC)return Pw;JC=1;function e(t){return this.__data__.has(t)}return Pw=e,Pw}var Iw,ZC;function ez(){if(ZC)return Iw;ZC=1;var e=Rb(),t=aS(),r=sS(),a=200;function s(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<a-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,o),this.size=l.size,this}return Iw=s,Iw}var Dw,eA;function uL(){if(eA)return Dw;eA=1;var e=Rb(),t=Y$(),r=Q$(),a=J$(),s=Z$(),i=ez();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=a,o.prototype.has=s,o.prototype.set=i,Dw=o,Dw}var Lw,tA;function tz(){if(tA)return Lw;tA=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return Lw=t,Lw}var Fw,rA;function rz(){if(rA)return Fw;rA=1;function e(t){return this.__data__.has(t)}return Fw=e,Fw}var Mw,nA;function fL(){if(nA)return Mw;nA=1;var e=sS(),t=tz(),r=rz();function a(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return a.prototype.add=a.prototype.push=t,a.prototype.has=r,Mw=a,Mw}var Rw,aA;function hL(){if(aA)return Rw;aA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(r(t[a],a,t))return!0;return!1}return Rw=e,Rw}var Bw,sA;function mL(){if(sA)return Bw;sA=1;function e(t,r){return t.has(r)}return Bw=e,Bw}var Uw,iA;function pL(){if(iA)return Uw;iA=1;var e=fL(),t=hL(),r=mL(),a=1,s=2;function i(o,l,c,d,u,f){var p=c&a,m=o.length,b=l.length;if(m!=b&&!(p&&b>m))return!1;var v=f.get(o),g=f.get(l);if(v&&g)return v==l&&g==o;var w=-1,y=!0,j=c&s?new e:void 0;for(f.set(o,l),f.set(l,o);++w<m;){var N=o[w],S=l[w];if(d)var E=p?d(S,N,w,l,o,f):d(N,S,w,o,l,f);if(E!==void 0){if(E)continue;y=!1;break}if(j){if(!t(l,function(A,P){if(!r(j,P)&&(N===A||u(N,A,c,d,f)))return j.push(P)})){y=!1;break}}else if(!(N===S||u(N,S,c,d,f))){y=!1;break}}return f.delete(o),f.delete(l),y}return Uw=i,Uw}var qw,oA;function nz(){if(oA)return qw;oA=1;var e=Bu(),t=e.Uint8Array;return qw=t,qw}var $w,lA;function az(){if(lA)return $w;lA=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s,i){a[++r]=[i,s]}),a}return $w=e,$w}var zw,cA;function pS(){if(cA)return zw;cA=1;function e(t){var r=-1,a=Array(t.size);return t.forEach(function(s){a[++r]=s}),a}return zw=e,zw}var Hw,dA;function sz(){if(dA)return Hw;dA=1;var e=gg(),t=nz(),r=nS(),a=pL(),s=az(),i=pS(),o=1,l=2,c="[object Boolean]",d="[object Date]",u="[object Error]",f="[object Map]",p="[object Number]",m="[object RegExp]",b="[object Set]",v="[object String]",g="[object Symbol]",w="[object ArrayBuffer]",y="[object DataView]",j=e?e.prototype:void 0,N=j?j.valueOf:void 0;function S(E,A,P,I,B,T,_){switch(P){case y:if(E.byteLength!=A.byteLength||E.byteOffset!=A.byteOffset)return!1;E=E.buffer,A=A.buffer;case w:return!(E.byteLength!=A.byteLength||!T(new t(E),new t(A)));case c:case d:case p:return r(+E,+A);case u:return E.name==A.name&&E.message==A.message;case m:case v:return E==A+"";case f:var R=s;case b:var z=I&o;if(R||(R=i),E.size!=A.size&&!z)return!1;var H=_.get(E);if(H)return H==A;I|=l,_.set(E,A);var Y=a(R(E),R(A),I,B,T,_);return _.delete(E),Y;case g:if(N)return N.call(E)==N.call(A)}return!1}return Hw=S,Hw}var Ww,uA;function xL(){if(uA)return Ww;uA=1;function e(t,r){for(var a=-1,s=r.length,i=t.length;++a<s;)t[i+a]=r[a];return t}return Ww=e,Ww}var Gw,fA;function iz(){if(fA)return Gw;fA=1;var e=xL(),t=ec();function r(a,s,i){var o=s(a);return t(a)?o:e(o,i(a))}return Gw=r,Gw}var Vw,hA;function oz(){if(hA)return Vw;hA=1;function e(t,r){for(var a=-1,s=t==null?0:t.length,i=0,o=[];++a<s;){var l=t[a];r(l,a,t)&&(o[i++]=l)}return o}return Vw=e,Vw}var Kw,mA;function lz(){if(mA)return Kw;mA=1;function e(){return[]}return Kw=e,Kw}var Xw,pA;function cz(){if(pA)return Xw;pA=1;var e=oz(),t=lz(),r=Object.prototype,a=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return a.call(o,l)}))}:t;return Xw=i,Xw}var Yw,xA;function dz(){if(xA)return Yw;xA=1;function e(t,r){for(var a=-1,s=Array(t);++a<t;)s[a]=r(a);return s}return Yw=e,Yw}var Qw,gA;function uz(){if(gA)return Qw;gA=1;var e=Pf(),t=If(),r="[object Arguments]";function a(s){return t(s)&&e(s)==r}return Qw=a,Qw}var Jw,vA;function xS(){if(vA)return Jw;vA=1;var e=uz(),t=If(),r=Object.prototype,a=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&a.call(o,"callee")&&!s.call(o,"callee")};return Jw=i,Jw}var Gp={exports:{}},Zw,bA;function fz(){if(bA)return Zw;bA=1;function e(){return!1}return Zw=e,Zw}Gp.exports;var yA;function gL(){return yA||(yA=1,(function(e,t){var r=Bu(),a=fz(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||a;e.exports=d})(Gp,Gp.exports)),Gp.exports}var eN,wA;function gS(){if(wA)return eN;wA=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(a,s){var i=typeof a;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(a))&&a>-1&&a%1==0&&a<s}return eN=r,eN}var tN,NA;function vS(){if(NA)return tN;NA=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return tN=t,tN}var rN,jA;function hz(){if(jA)return rN;jA=1;var e=Pf(),t=vS(),r=If(),a="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",d="[object Map]",u="[object Number]",f="[object Object]",p="[object RegExp]",m="[object Set]",b="[object String]",v="[object WeakMap]",g="[object ArrayBuffer]",w="[object DataView]",y="[object Float32Array]",j="[object Float64Array]",N="[object Int8Array]",S="[object Int16Array]",E="[object Int32Array]",A="[object Uint8Array]",P="[object Uint8ClampedArray]",I="[object Uint16Array]",B="[object Uint32Array]",T={};T[y]=T[j]=T[N]=T[S]=T[E]=T[A]=T[P]=T[I]=T[B]=!0,T[a]=T[s]=T[g]=T[i]=T[w]=T[o]=T[l]=T[c]=T[d]=T[u]=T[f]=T[p]=T[m]=T[b]=T[v]=!1;function _(R){return r(R)&&t(R.length)&&!!T[e(R)]}return rN=_,rN}var nN,kA;function vL(){if(kA)return nN;kA=1;function e(t){return function(r){return t(r)}}return nN=e,nN}var Vp={exports:{}};Vp.exports;var SA;function mz(){return SA||(SA=1,(function(e,t){var r=R8(),a=t&&!t.nodeType&&t,s=a&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===a,o=i&&r.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Vp,Vp.exports)),Vp.exports}var aN,_A;function bL(){if(_A)return aN;_A=1;var e=hz(),t=vL(),r=mz(),a=r&&r.isTypedArray,s=a?t(a):e;return aN=s,aN}var sN,CA;function pz(){if(CA)return sN;CA=1;var e=dz(),t=xS(),r=ec(),a=gL(),s=gS(),i=bL(),o=Object.prototype,l=o.hasOwnProperty;function c(d,u){var f=r(d),p=!f&&t(d),m=!f&&!p&&a(d),b=!f&&!p&&!m&&i(d),v=f||p||m||b,g=v?e(d.length,String):[],w=g.length;for(var y in d)(u||l.call(d,y))&&!(v&&(y=="length"||m&&(y=="offset"||y=="parent")||b&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||s(y,w)))&&g.push(y);return g}return sN=c,sN}var iN,AA;function xz(){if(AA)return iN;AA=1;var e=Object.prototype;function t(r){var a=r&&r.constructor,s=typeof a=="function"&&a.prototype||e;return r===s}return iN=t,iN}var oN,EA;function yL(){if(EA)return oN;EA=1;function e(t,r){return function(a){return t(r(a))}}return oN=e,oN}var lN,TA;function gz(){if(TA)return lN;TA=1;var e=yL(),t=e(Object.keys,Object);return lN=t,lN}var cN,OA;function vz(){if(OA)return cN;OA=1;var e=xz(),t=gz(),r=Object.prototype,a=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))a.call(i,l)&&l!="constructor"&&o.push(l);return o}return cN=s,cN}var dN,PA;function bg(){if(PA)return dN;PA=1;var e=rS(),t=vS();function r(a){return a!=null&&t(a.length)&&!e(a)}return dN=r,dN}var uN,IA;function Wb(){if(IA)return uN;IA=1;var e=pz(),t=vz(),r=bg();function a(s){return r(s)?e(s):t(s)}return uN=a,uN}var fN,DA;function bz(){if(DA)return fN;DA=1;var e=iz(),t=cz(),r=Wb();function a(s){return e(s,r,t)}return fN=a,fN}var hN,LA;function yz(){if(LA)return hN;LA=1;var e=bz(),t=1,r=Object.prototype,a=r.hasOwnProperty;function s(i,o,l,c,d,u){var f=l&t,p=e(i),m=p.length,b=e(o),v=b.length;if(m!=v&&!f)return!1;for(var g=m;g--;){var w=p[g];if(!(f?w in o:a.call(o,w)))return!1}var y=u.get(i),j=u.get(o);if(y&&j)return y==o&&j==i;var N=!0;u.set(i,o),u.set(o,i);for(var S=f;++g<m;){w=p[g];var E=i[w],A=o[w];if(c)var P=f?c(A,E,w,o,i,u):c(E,A,w,i,o,u);if(!(P===void 0?E===A||d(E,A,l,c,u):P)){N=!1;break}S||(S=w=="constructor")}if(N&&!S){var I=i.constructor,B=o.constructor;I!=B&&"constructor"in i&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof B=="function"&&B instanceof B)&&(N=!1)}return u.delete(i),u.delete(o),N}return hN=s,hN}var mN,FA;function wz(){if(FA)return mN;FA=1;var e=Fh(),t=Bu(),r=e(t,"DataView");return mN=r,mN}var pN,MA;function Nz(){if(MA)return pN;MA=1;var e=Fh(),t=Bu(),r=e(t,"Promise");return pN=r,pN}var xN,RA;function wL(){if(RA)return xN;RA=1;var e=Fh(),t=Bu(),r=e(t,"Set");return xN=r,xN}var gN,BA;function jz(){if(BA)return gN;BA=1;var e=Fh(),t=Bu(),r=e(t,"WeakMap");return gN=r,gN}var vN,UA;function kz(){if(UA)return vN;UA=1;var e=wz(),t=aS(),r=Nz(),a=wL(),s=jz(),i=Pf(),o=B8(),l="[object Map]",c="[object Object]",d="[object Promise]",u="[object Set]",f="[object WeakMap]",p="[object DataView]",m=o(e),b=o(t),v=o(r),g=o(a),w=o(s),y=i;return(e&&y(new e(new ArrayBuffer(1)))!=p||t&&y(new t)!=l||r&&y(r.resolve())!=d||a&&y(new a)!=u||s&&y(new s)!=f)&&(y=function(j){var N=i(j),S=N==c?j.constructor:void 0,E=S?o(S):"";if(E)switch(E){case m:return p;case b:return l;case v:return d;case g:return u;case w:return f}return N}),vN=y,vN}var bN,qA;function Sz(){if(qA)return bN;qA=1;var e=uL(),t=pL(),r=sz(),a=yz(),s=kz(),i=ec(),o=gL(),l=bL(),c=1,d="[object Arguments]",u="[object Array]",f="[object Object]",p=Object.prototype,m=p.hasOwnProperty;function b(v,g,w,y,j,N){var S=i(v),E=i(g),A=S?u:s(v),P=E?u:s(g);A=A==d?f:A,P=P==d?f:P;var I=A==f,B=P==f,T=A==P;if(T&&o(v)){if(!o(g))return!1;S=!0,I=!1}if(T&&!I)return N||(N=new e),S||l(v)?t(v,g,w,y,j,N):r(v,g,A,w,y,j,N);if(!(w&c)){var _=I&&m.call(v,"__wrapped__"),R=B&&m.call(g,"__wrapped__");if(_||R){var z=_?v.value():v,H=R?g.value():g;return N||(N=new e),j(z,H,w,y,N)}}return T?(N||(N=new e),a(v,g,w,y,j,N)):!1}return bN=b,bN}var yN,$A;function bS(){if($A)return yN;$A=1;var e=Sz(),t=If();function r(a,s,i,o,l){return a===s?!0:a==null||s==null||!t(a)&&!t(s)?a!==a&&s!==s:e(a,s,i,o,r,l)}return yN=r,yN}var wN,zA;function _z(){if(zA)return wN;zA=1;var e=uL(),t=bS(),r=1,a=2;function s(i,o,l,c){var d=l.length,u=d,f=!c;if(i==null)return!u;for(i=Object(i);d--;){var p=l[d];if(f&&p[2]?p[1]!==i[p[0]]:!(p[0]in i))return!1}for(;++d<u;){p=l[d];var m=p[0],b=i[m],v=p[1];if(f&&p[2]){if(b===void 0&&!(m in i))return!1}else{var g=new e;if(c)var w=c(b,v,m,i,o,g);if(!(w===void 0?t(v,b,r|a,c,g):w))return!1}}return!0}return wN=s,wN}var NN,HA;function NL(){if(HA)return NN;HA=1;var e=A0();function t(r){return r===r&&!e(r)}return NN=t,NN}var jN,WA;function Cz(){if(WA)return jN;WA=1;var e=NL(),t=Wb();function r(a){for(var s=t(a),i=s.length;i--;){var o=s[i],l=a[o];s[i]=[o,l,e(l)]}return s}return jN=r,jN}var kN,GA;function jL(){if(GA)return kN;GA=1;function e(t,r){return function(a){return a==null?!1:a[t]===r&&(r!==void 0||t in Object(a))}}return kN=e,kN}var SN,VA;function Az(){if(VA)return SN;VA=1;var e=_z(),t=Cz(),r=jL();function a(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return SN=a,SN}var _N,KA;function Ez(){if(KA)return _N;KA=1;function e(t,r){return t!=null&&r in Object(t)}return _N=e,_N}var CN,XA;function Tz(){if(XA)return CN;XA=1;var e=$8(),t=xS(),r=ec(),a=gS(),s=vS(),i=Ub();function o(l,c,d){c=e(c,l);for(var u=-1,f=c.length,p=!1;++u<f;){var m=i(c[u]);if(!(p=l!=null&&d(l,m)))break;l=l[m]}return p||++u!=f?p:(f=l==null?0:l.length,!!f&&s(f)&&a(m,f)&&(r(l)||t(l)))}return CN=o,CN}var AN,YA;function Oz(){if(YA)return AN;YA=1;var e=Ez(),t=Tz();function r(a,s){return a!=null&&t(a,s,e)}return AN=r,AN}var EN,QA;function Pz(){if(QA)return EN;QA=1;var e=bS(),t=z8(),r=Oz(),a=tS(),s=NL(),i=jL(),o=Ub(),l=1,c=2;function d(u,f){return a(u)&&s(f)?i(o(u),f):function(p){var m=t(p,u);return m===void 0&&m===f?r(p,u):e(f,m,l|c)}}return EN=d,EN}var TN,JA;function op(){if(JA)return TN;JA=1;function e(t){return t}return TN=e,TN}var ON,ZA;function Iz(){if(ZA)return ON;ZA=1;function e(t){return function(r){return r?.[t]}}return ON=e,ON}var PN,eE;function Dz(){if(eE)return PN;eE=1;var e=oS();function t(r){return function(a){return e(a,r)}}return PN=t,PN}var IN,tE;function Lz(){if(tE)return IN;tE=1;var e=Iz(),t=Dz(),r=tS(),a=Ub();function s(i){return r(i)?e(a(i)):t(i)}return IN=s,IN}var DN,rE;function E0(){if(rE)return DN;rE=1;var e=Az(),t=Pz(),r=op(),a=ec(),s=Lz();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?a(o)?t(o[0],o[1]):e(o):s(o)}return DN=i,DN}var LN,nE;function kL(){if(nE)return LN;nE=1;function e(t,r,a,s){for(var i=t.length,o=a+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return LN=e,LN}var FN,aE;function Fz(){if(aE)return FN;aE=1;function e(t){return t!==t}return FN=e,FN}var MN,sE;function Mz(){if(sE)return MN;sE=1;function e(t,r,a){for(var s=a-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return MN=e,MN}var RN,iE;function Rz(){if(iE)return RN;iE=1;var e=kL(),t=Fz(),r=Mz();function a(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return RN=a,RN}var BN,oE;function Bz(){if(oE)return BN;oE=1;var e=Rz();function t(r,a){var s=r==null?0:r.length;return!!s&&e(r,a,0)>-1}return BN=t,BN}var UN,lE;function Uz(){if(lE)return UN;lE=1;function e(t,r,a){for(var s=-1,i=t==null?0:t.length;++s<i;)if(a(r,t[s]))return!0;return!1}return UN=e,UN}var qN,cE;function qz(){if(cE)return qN;cE=1;function e(){}return qN=e,qN}var $N,dE;function $z(){if(dE)return $N;dE=1;var e=wL(),t=qz(),r=pS(),a=1/0,s=e&&1/r(new e([,-0]))[1]==a?function(i){return new e(i)}:t;return $N=s,$N}var zN,uE;function zz(){if(uE)return zN;uE=1;var e=fL(),t=Bz(),r=Uz(),a=mL(),s=$z(),i=pS(),o=200;function l(c,d,u){var f=-1,p=t,m=c.length,b=!0,v=[],g=v;if(u)b=!1,p=r;else if(m>=o){var w=d?null:s(c);if(w)return i(w);b=!1,p=a,g=new e}else g=d?[]:v;e:for(;++f<m;){var y=c[f],j=d?d(y):y;if(y=u||y!==0?y:0,b&&j===j){for(var N=g.length;N--;)if(g[N]===j)continue e;d&&g.push(j),v.push(y)}else p(g,j,u)||(g!==v&&g.push(j),v.push(y))}return v}return zN=l,zN}var HN,fE;function Hz(){if(fE)return HN;fE=1;var e=E0(),t=zz();function r(a,s){return a&&a.length?t(a,e(s,2)):[]}return HN=r,HN}var Wz=Hz();const hE=La(Wz);function SL(e,t,r){return t===!0?hE(e,r):Dn(t)?hE(e,t):e}function Im(e){"@babel/helpers - typeof";return Im=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Im(e)}var Gz=["ref"];function mE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mE(Object(r),!0).forEach(function(a){Gb(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Vz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pE(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,CL(a.key),a)}}function Kz(e,t,r){return t&&pE(e.prototype,t),r&&pE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Xz(e,t,r){return t=y1(t),Yz(e,_L()?Reflect.construct(t,r||[],y1(e).constructor):t.apply(e,r))}function Yz(e,t){if(t&&(Im(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Qz(e)}function Qz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _L(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_L=function(){return!!e})()}function y1(e){return y1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},y1(e)}function Jz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h4(e,t)}function h4(e,t){return h4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},h4(e,t)}function Gb(e,t,r){return t=CL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CL(e){var t=Zz(e,"string");return Im(t)=="symbol"?t:t+""}function Zz(e,t){if(Im(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Im(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function eH(e,t){if(e==null)return{};var r=tH(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function tH(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function rH(e){return e.value}function nH(e,t){if(ft.isValidElement(e))return ft.cloneElement(e,t);if(typeof e=="function")return ft.createElement(e,t);t.ref;var r=eH(t,Gz);return ft.createElement(mS,r)}var xE=1,ym=(function(e){function t(){var r;Vz(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Xz(this,t,[].concat(s)),Gb(r,"lastBoundingBox",{width:-1,height:-1}),r}return Jz(t,e),Kz(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();return a.height=this.wrapperNode.offsetHeight,a.width=this.wrapperNode.offsetWidth,a}return null}},{key:"updateBBox",value:function(){var a=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>xE||Math.abs(s.height-this.lastBoundingBox.height)>xE)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,a&&a(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,a&&a(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?cf({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(a){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,u=s.chartHeight,f,p;if(!a||(a.left===void 0||a.left===null)&&(a.right===void 0||a.right===null))if(o==="center"&&i==="vertical"){var m=this.getBBoxSnapshot();f={left:((d||0)-m.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!a||(a.top===void 0||a.top===null)&&(a.bottom===void 0||a.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();p={top:((u||0)-b.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return cf(cf({},f),p)}},{key:"render",value:function(){var a=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,u=s.payload,f=cf(cf({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return ft.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(m){a.wrapperNode=m}},nH(i,cf(cf({},this.props),{},{payload:SL(u,d,rH)})))}}],[{key:"getWithHeight",value:function(a,s){var i=cf(cf({},this.defaultProps),a.props),o=i.layout;return o==="vertical"&&ur(a.props.height)?{height:a.props.height}:o==="horizontal"?{width:a.props.width||s}:null}}])})(D.PureComponent);Gb(ym,"displayName","Legend");Gb(ym,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var WN,gE;function aH(){if(gE)return WN;gE=1;var e=gg(),t=xS(),r=ec(),a=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(a&&i&&i[a])}return WN=s,WN}var GN,vE;function AL(){if(vE)return GN;vE=1;var e=xL(),t=aH();function r(a,s,i,o,l){var c=-1,d=a.length;for(i||(i=t),l||(l=[]);++c<d;){var u=a[c];s>0&&i(u)?s>1?r(u,s-1,i,o,l):e(l,u):o||(l[l.length]=u)}return l}return GN=r,GN}var VN,bE;function sH(){if(bE)return VN;bE=1;function e(t){return function(r,a,s){for(var i=-1,o=Object(r),l=s(r),c=l.length;c--;){var d=l[t?c:++i];if(a(o[d],d,o)===!1)break}return r}}return VN=e,VN}var KN,yE;function iH(){if(yE)return KN;yE=1;var e=sH(),t=e();return KN=t,KN}var XN,wE;function EL(){if(wE)return XN;wE=1;var e=iH(),t=Wb();function r(a,s){return a&&e(a,s,t)}return XN=r,XN}var YN,NE;function oH(){if(NE)return YN;NE=1;var e=bg();function t(r,a){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=a?o:-1,c=Object(s);(a?l--:++l<o)&&i(c[l],l,c)!==!1;);return s}}return YN=t,YN}var QN,jE;function yS(){if(jE)return QN;jE=1;var e=EL(),t=oH(),r=t(e);return QN=r,QN}var JN,kE;function TL(){if(kE)return JN;kE=1;var e=yS(),t=bg();function r(a,s){var i=-1,o=t(a)?Array(a.length):[];return e(a,function(l,c,d){o[++i]=s(l,c,d)}),o}return JN=r,JN}var ZN,SE;function lH(){if(SE)return ZN;SE=1;function e(t,r){var a=t.length;for(t.sort(r);a--;)t[a]=t[a].value;return t}return ZN=e,ZN}var e5,_E;function cH(){if(_E)return e5;_E=1;var e=ap();function t(r,a){if(r!==a){var s=r!==void 0,i=r===null,o=r===r,l=e(r),c=a!==void 0,d=a===null,u=a===a,f=e(a);if(!d&&!f&&!l&&r>a||l&&c&&u&&!d&&!f||i&&c&&u||!s&&u||!o)return 1;if(!i&&!l&&!f&&r<a||f&&s&&o&&!i&&!l||d&&s&&o||!c&&o||!u)return-1}return 0}return e5=t,e5}var t5,CE;function dH(){if(CE)return t5;CE=1;var e=cH();function t(r,a,s){for(var i=-1,o=r.criteria,l=a.criteria,c=o.length,d=s.length;++i<c;){var u=e(o[i],l[i]);if(u){if(i>=d)return u;var f=s[i];return u*(f=="desc"?-1:1)}}return r.index-a.index}return t5=t,t5}var r5,AE;function uH(){if(AE)return r5;AE=1;var e=iS(),t=oS(),r=E0(),a=TL(),s=lH(),i=vL(),o=dH(),l=op(),c=ec();function d(u,f,p){f.length?f=e(f,function(v){return c(v)?function(g){return t(g,v.length===1?v[0]:v)}:v}):f=[l];var m=-1;f=e(f,i(r));var b=a(u,function(v,g,w){var y=e(f,function(j){return j(v)});return{criteria:y,index:++m,value:v}});return s(b,function(v,g){return o(v,g,p)})}return r5=d,r5}var n5,EE;function fH(){if(EE)return n5;EE=1;function e(t,r,a){switch(a.length){case 0:return t.call(r);case 1:return t.call(r,a[0]);case 2:return t.call(r,a[0],a[1]);case 3:return t.call(r,a[0],a[1],a[2])}return t.apply(r,a)}return n5=e,n5}var a5,TE;function hH(){if(TE)return a5;TE=1;var e=fH(),t=Math.max;function r(a,s,i){return s=t(s===void 0?a.length-1:s,0),function(){for(var o=arguments,l=-1,c=t(o.length-s,0),d=Array(c);++l<c;)d[l]=o[s+l];l=-1;for(var u=Array(s+1);++l<s;)u[l]=o[l];return u[s]=i(d),e(a,this,u)}}return a5=r,a5}var s5,OE;function mH(){if(OE)return s5;OE=1;function e(t){return function(){return t}}return s5=e,s5}var i5,PE;function OL(){if(PE)return i5;PE=1;var e=Fh(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return i5=t,i5}var o5,IE;function pH(){if(IE)return o5;IE=1;var e=mH(),t=OL(),r=op(),a=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return o5=a,o5}var l5,DE;function xH(){if(DE)return l5;DE=1;var e=800,t=16,r=Date.now;function a(s){var i=0,o=0;return function(){var l=r(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return l5=a,l5}var c5,LE;function gH(){if(LE)return c5;LE=1;var e=pH(),t=xH(),r=t(e);return c5=r,c5}var d5,FE;function vH(){if(FE)return d5;FE=1;var e=op(),t=hH(),r=gH();function a(s,i){return r(t(s,i,e),s+"")}return d5=a,d5}var u5,ME;function Vb(){if(ME)return u5;ME=1;var e=nS(),t=bg(),r=gS(),a=A0();function s(i,o,l){if(!a(l))return!1;var c=typeof o;return(c=="number"?t(l)&&r(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return u5=s,u5}var f5,RE;function bH(){if(RE)return f5;RE=1;var e=AL(),t=uH(),r=vH(),a=Vb(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&a(i,o[0],o[1])?o=[]:l>2&&a(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return f5=s,f5}var yH=bH();const wS=La(yH);function yx(e){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(e)}function m4(){return m4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},m4.apply(this,arguments)}function wH(e,t){return SH(e)||kH(e,t)||jH(e,t)||NH()}function NH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jH(e,t){if(e){if(typeof e=="string")return BE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return BE(e,t)}}function BE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function kH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function SH(e){if(Array.isArray(e))return e}function UE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function h5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UE(Object(r),!0).forEach(function(a){_H(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function _H(e,t,r){return t=CH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function CH(e){var t=AH(e,"string");return yx(t)=="symbol"?t:t+""}function AH(e,t){if(yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(yx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function EH(e){return Array.isArray(e)&&$i(e[0])&&$i(e[1])?e.join(" ~ "):e}var TH=function(t){var r=t.separator,a=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,u=t.payload,f=t.formatter,p=t.itemSorter,m=t.wrapperClassName,b=t.labelClassName,v=t.label,g=t.labelFormatter,w=t.accessibilityLayer,y=w===void 0?!1:w,j=function(){if(u&&u.length){var _={padding:0,margin:0},R=(p?wS(u,p):u).map(function(z,H){if(z.type==="none")return null;var Y=h5({display:"block",paddingTop:4,paddingBottom:4,color:z.color||"#000"},l),J=z.formatter||f||EH,re=z.value,X=z.name,te=re,W=X;if(J&&te!=null&&W!=null){var O=J(re,X,z,H,u);if(Array.isArray(O)){var q=wH(O,2);te=q[0],W=q[1]}else te=O}return ft.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(H),style:Y},$i(W)?ft.createElement("span",{className:"recharts-tooltip-item-name"},W):null,$i(W)?ft.createElement("span",{className:"recharts-tooltip-item-separator"},a):null,ft.createElement("span",{className:"recharts-tooltip-item-value"},te),ft.createElement("span",{className:"recharts-tooltip-item-unit"},z.unit||""))});return ft.createElement("ul",{className:"recharts-tooltip-item-list",style:_},R)}return null},N=h5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=h5({margin:0},d),E=!Vn(v),A=E?v:"",P=fa("recharts-default-tooltip",m),I=fa("recharts-tooltip-label",b);E&&g&&u!==void 0&&u!==null&&(A=g(v,u));var B=y?{role:"status","aria-live":"assertive"}:{};return ft.createElement("div",m4({className:P,style:N},B),ft.createElement("p",{className:I,style:S},ft.isValidElement(A)?A:"".concat(A)),j())};function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}function dv(e,t,r){return t=OH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OH(e){var t=PH(e,"string");return wx(t)=="symbol"?t:t+""}function PH(e,t){if(wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(wx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ep="recharts-tooltip-wrapper",IH={visibility:"hidden"};function DH(e){var t=e.coordinate,r=e.translateX,a=e.translateY;return fa(Ep,dv(dv(dv(dv({},"".concat(Ep,"-right"),ur(r)&&t&&ur(t.x)&&r>=t.x),"".concat(Ep,"-left"),ur(r)&&t&&ur(t.x)&&r<t.x),"".concat(Ep,"-bottom"),ur(a)&&t&&ur(t.y)&&a>=t.y),"".concat(Ep,"-top"),ur(a)&&t&&ur(t.y)&&a<t.y))}function qE(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&ur(i[a]))return i[a];var u=r[a]-l-s,f=r[a]+s;if(t[a])return o[a]?u:f;if(o[a]){var p=u,m=c[a];return p<m?Math.max(f,c[a]):Math.max(u,c[a])}var b=f+l,v=c[a]+d;return b>v?Math.max(u,c[a]):Math.max(f,c[a])}function LH(e){var t=e.translateX,r=e.translateY,a=e.useTranslate3d;return{transform:a?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function FH(e){var t=e.allowEscapeViewBox,r=e.coordinate,a=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,u,f;return o.height>0&&o.width>0&&r?(u=qE({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=qE({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:a,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=LH({translateX:u,translateY:f,useTranslate3d:l})):d=IH,{cssProperties:d,cssClasses:DH({translateX:u,translateY:f,coordinate:r})}}function Dm(e){"@babel/helpers - typeof";return Dm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dm(e)}function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function zE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(a){x4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function MH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RH(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,IL(a.key),a)}}function BH(e,t,r){return t&&RH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UH(e,t,r){return t=w1(t),qH(e,PL()?Reflect.construct(t,r||[],w1(e).constructor):t.apply(e,r))}function qH(e,t){if(t&&(Dm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $H(e)}function $H(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PL=function(){return!!e})()}function w1(e){return w1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},w1(e)}function zH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p4(e,t)}function p4(e,t){return p4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},p4(e,t)}function x4(e,t,r){return t=IL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IL(e){var t=HH(e,"string");return Dm(t)=="symbol"?t:t+""}function HH(e,t){if(Dm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Dm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var HE=1,WH=(function(e){function t(){var r;MH(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=UH(this,t,[].concat(s)),x4(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),x4(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,u;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(u=r.props.coordinate)===null||u===void 0?void 0:u.y)!==null&&d!==void 0?d:0}})}}),r}return zH(t,e),BH(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var a=this.wrapperNode.getBoundingClientRect();(Math.abs(a.width-this.state.lastBoundingBox.width)>HE||Math.abs(a.height-this.state.lastBoundingBox.height)>HE)&&this.setState({lastBoundingBox:{width:a.width,height:a.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var a,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((a=this.props.coordinate)===null||a===void 0?void 0:a.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,u=s.coordinate,f=s.hasPayload,p=s.isAnimationActive,m=s.offset,b=s.position,v=s.reverseDirection,g=s.useTranslate3d,w=s.viewBox,y=s.wrapperStyle,j=FH({allowEscapeViewBox:o,coordinate:u,offsetTopLeft:m,position:b,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:w}),N=j.cssClasses,S=j.cssProperties,E=zE(zE({transition:p&&i?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&f?"visible":"hidden",position:"absolute",top:0,left:0},y);return ft.createElement("div",{tabIndex:-1,className:N,style:E,ref:function(P){a.wrapperNode=P}},d)}}])})(D.PureComponent),GH=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},lp={isSsr:GH()};function Lm(e){"@babel/helpers - typeof";return Lm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lm(e)}function WE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function GE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?WE(Object(r),!0).forEach(function(a){NS(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):WE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function VH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KH(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,LL(a.key),a)}}function XH(e,t,r){return t&&KH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function YH(e,t,r){return t=N1(t),QH(e,DL()?Reflect.construct(t,r||[],N1(e).constructor):t.apply(e,r))}function QH(e,t){if(t&&(Lm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JH(e)}function JH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function DL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(DL=function(){return!!e})()}function N1(e){return N1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},N1(e)}function ZH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&g4(e,t)}function g4(e,t){return g4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},g4(e,t)}function NS(e,t,r){return t=LL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LL(e){var t=eW(e,"string");return Lm(t)=="symbol"?t:t+""}function eW(e,t){if(Lm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Lm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function tW(e){return e.dataKey}function rW(e,t){return ft.isValidElement(e)?ft.cloneElement(e,t):typeof e=="function"?ft.createElement(e,t):ft.createElement(TH,t)}var _u=(function(e){function t(){return VH(this,t),YH(this,t,arguments)}return ZH(t,e),XH(t,[{key:"render",value:function(){var a=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,u=s.coordinate,f=s.filterNull,p=s.isAnimationActive,m=s.offset,b=s.payload,v=s.payloadUniqBy,g=s.position,w=s.reverseDirection,y=s.useTranslate3d,j=s.viewBox,N=s.wrapperStyle,S=b??[];f&&S.length&&(S=SL(b.filter(function(A){return A.value!=null&&(A.hide!==!0||a.props.includeHidden)}),v,tW));var E=S.length>0;return ft.createElement(WH,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:i,coordinate:u,hasPayload:E,offset:m,position:g,reverseDirection:w,useTranslate3d:y,viewBox:j,wrapperStyle:N},rW(d,GE(GE({},this.props),{},{payload:S})))}}])})(D.PureComponent);NS(_u,"displayName","Tooltip");NS(_u,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!lp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var m5,VE;function nW(){if(VE)return m5;VE=1;var e=Bu(),t=function(){return e.Date.now()};return m5=t,m5}var p5,KE;function aW(){if(KE)return p5;KE=1;var e=/\s/;function t(r){for(var a=r.length;a--&&e.test(r.charAt(a)););return a}return p5=t,p5}var x5,XE;function sW(){if(XE)return x5;XE=1;var e=aW(),t=/^\s+/;function r(a){return a&&a.slice(0,e(a)+1).replace(t,"")}return x5=r,x5}var g5,YE;function FL(){if(YE)return g5;YE=1;var e=sW(),t=A0(),r=ap(),a=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(d){if(typeof d=="number")return d;if(r(d))return a;if(t(d)){var u=typeof d.valueOf=="function"?d.valueOf():d;d=t(u)?u+"":u}if(typeof d!="string")return d===0?d:+d;d=e(d);var f=i.test(d);return f||o.test(d)?l(d.slice(2),f?2:8):s.test(d)?a:+d}return g5=c,g5}var v5,QE;function iW(){if(QE)return v5;QE=1;var e=A0(),t=nW(),r=FL(),a="Expected a function",s=Math.max,i=Math.min;function o(l,c,d){var u,f,p,m,b,v,g=0,w=!1,y=!1,j=!0;if(typeof l!="function")throw new TypeError(a);c=r(c)||0,e(d)&&(w=!!d.leading,y="maxWait"in d,p=y?s(r(d.maxWait)||0,c):p,j="trailing"in d?!!d.trailing:j);function N(R){var z=u,H=f;return u=f=void 0,g=R,m=l.apply(H,z),m}function S(R){return g=R,b=setTimeout(P,c),w?N(R):m}function E(R){var z=R-v,H=R-g,Y=c-z;return y?i(Y,p-H):Y}function A(R){var z=R-v,H=R-g;return v===void 0||z>=c||z<0||y&&H>=p}function P(){var R=t();if(A(R))return I(R);b=setTimeout(P,E(R))}function I(R){return b=void 0,j&&u?N(R):(u=f=void 0,m)}function B(){b!==void 0&&clearTimeout(b),g=0,u=v=f=b=void 0}function T(){return b===void 0?m:I(t())}function _(){var R=t(),z=A(R);if(u=arguments,f=this,v=R,z){if(b===void 0)return S(v);if(y)return clearTimeout(b),b=setTimeout(P,c),N(v)}return b===void 0&&(b=setTimeout(P,c)),m}return _.cancel=B,_.flush=T,_}return v5=o,v5}var b5,JE;function oW(){if(JE)return b5;JE=1;var e=iW(),t=A0(),r="Expected a function";function a(s,i,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(s,i,{leading:l,maxWait:i,trailing:c})}return b5=a,b5}var lW=oW();const ML=La(lW);function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function ZE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function uv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZE(Object(r),!0).forEach(function(a){cW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZE(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cW(e,t,r){return t=dW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dW(e){var t=uW(e,"string");return Nx(t)=="symbol"?t:t+""}function uW(e,t){if(Nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Nx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function fW(e,t){return xW(e)||pW(e,t)||mW(e,t)||hW()}function hW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mW(e,t){if(e){if(typeof e=="string")return eT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return eT(e,t)}}function eT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function pW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function xW(e){if(Array.isArray(e))return e}var gW=D.forwardRef(function(e,t){var r=e.aspect,a=e.initialDimension,s=a===void 0?{width:-1,height:-1}:a,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,u=d===void 0?0:d,f=e.minHeight,p=e.maxHeight,m=e.children,b=e.debounce,v=b===void 0?0:b,g=e.id,w=e.className,y=e.onResize,j=e.style,N=j===void 0?{}:j,S=D.useRef(null),E=D.useRef();E.current=y,D.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var A=D.useState({containerWidth:s.width,containerHeight:s.height}),P=fW(A,2),I=P[0],B=P[1],T=D.useCallback(function(R,z){B(function(H){var Y=Math.round(R),J=Math.round(z);return H.containerWidth===Y&&H.containerHeight===J?H:{containerWidth:Y,containerHeight:J}})},[]);D.useEffect(function(){var R=function(X){var te,W=X[0].contentRect,O=W.width,q=W.height;T(O,q),(te=E.current)===null||te===void 0||te.call(E,O,q)};v>0&&(R=ML(R,v,{trailing:!0,leading:!1}));var z=new ResizeObserver(R),H=S.current.getBoundingClientRect(),Y=H.width,J=H.height;return T(Y,J),z.observe(S.current),function(){z.disconnect()}},[T,v]);var _=D.useMemo(function(){var R=I.containerWidth,z=I.containerHeight;if(R<0||z<0)return null;Nf(sh(o)||sh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Nf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var H=sh(o)?R:o,Y=sh(c)?z:c;r&&r>0&&(H?Y=H/r:Y&&(H=Y*r),p&&Y>p&&(Y=p)),Nf(H>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,H,Y,o,c,u,f,r);var J=!Array.isArray(m)&&wf(m.type).endsWith("Chart");return ft.Children.map(m,function(re){return ft.isValidElement(re)?D.cloneElement(re,uv({width:H,height:Y},J?{style:uv({height:"100%",width:"100%",maxHeight:Y,maxWidth:H},re.props.style)}:{})):re})},[r,m,c,p,f,u,I,o]);return ft.createElement("div",{id:g?"".concat(g):void 0,className:fa("recharts-responsive-container",w),style:uv(uv({},N),{},{width:o,height:c,minWidth:u,minHeight:f,maxHeight:p}),ref:S},_)}),RL=function(t){return null};RL.displayName="Cell";function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}function tT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function v4(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tT(Object(r),!0).forEach(function(a){vW(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tT(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function vW(e,t,r){return t=bW(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bW(e){var t=yW(e,"string");return jx(t)=="symbol"?t:t+""}function yW(e,t){if(jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(jx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nm={widthCache:{},cacheCount:0},wW=2e3,NW={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},rT="recharts_measurement_span";function jW(e){var t=v4({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var rx=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||lp.isSsr)return{width:0,height:0};var a=jW(r),s=JSON.stringify({text:t,copyStyle:a});if(nm.widthCache[s])return nm.widthCache[s];try{var i=document.getElementById(rT);i||(i=document.createElement("span"),i.setAttribute("id",rT),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=v4(v4({},NW),a);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return nm.widthCache[s]=c,++nm.cacheCount>wW&&(nm.cacheCount=0,nm.widthCache={}),c}catch{return{width:0,height:0}}},kW=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function kx(e){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kx(e)}function j1(e,t){return AW(e)||CW(e,t)||_W(e,t)||SW()}function SW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _W(e,t){if(e){if(typeof e=="string")return nT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nT(e,t)}}function nT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function CW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function AW(e){if(Array.isArray(e))return e}function EW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aT(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,OW(a.key),a)}}function TW(e,t,r){return t&&aT(e.prototype,t),r&&aT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function OW(e){var t=PW(e,"string");return kx(t)=="symbol"?t:t+""}function PW(e,t){if(kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(kx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,iT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,IW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,DW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,BL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},LW=Object.keys(BL),mm="NaN";function FW(e,t){return e*BL[t]}var fv=(function(){function e(t,r){EW(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!IW.test(r)&&(this.num=NaN,this.unit=""),LW.includes(r)&&(this.num=FW(t,r),this.unit="px")}return TW(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var a,s=(a=DW.exec(r))!==null&&a!==void 0?a:[],i=j1(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function UL(e){if(e.includes(mm))return mm;for(var t=e;t.includes("*")||t.includes("/");){var r,a=(r=sT.exec(t))!==null&&r!==void 0?r:[],s=j1(a,4),i=s[1],o=s[2],l=s[3],c=fv.parse(i??""),d=fv.parse(l??""),u=o==="*"?c.multiply(d):c.divide(d);if(u.isNaN())return mm;t=t.replace(sT,u.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,p=(f=iT.exec(t))!==null&&f!==void 0?f:[],m=j1(p,4),b=m[1],v=m[2],g=m[3],w=fv.parse(b??""),y=fv.parse(g??""),j=v==="+"?w.add(y):w.subtract(y);if(j.isNaN())return mm;t=t.replace(iT,j.toString())}return t}var oT=/\(([^()]*)\)/;function MW(e){for(var t=e;t.includes("(");){var r=oT.exec(t),a=j1(r,2),s=a[1];t=t.replace(oT,UL(s))}return t}function RW(e){var t=e.replace(/\s+/g,"");return t=MW(t),t=UL(t),t}function BW(e){try{return RW(e)}catch{return mm}}function y5(e){var t=BW(e.slice(5,-1));return t===mm?"":t}var UW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],qW=["dx","dy","angle","className","breakAll"];function b4(){return b4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},b4.apply(this,arguments)}function lT(e,t){if(e==null)return{};var r=$W(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function $W(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function cT(e,t){return GW(e)||WW(e,t)||HW(e,t)||zW()}function zW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HW(e,t){if(e){if(typeof e=="string")return dT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dT(e,t)}}function dT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function WW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function GW(e){if(Array.isArray(e))return e}var qL=/[ \f\n\r\t\v\u2028\u2029]+/,$L=function(t){var r=t.children,a=t.breakAll,s=t.style;try{var i=[];Vn(r)||(a?i=r.toString().split(""):i=r.toString().split(qL));var o=i.map(function(c){return{word:c,width:rx(c,s).width}}),l=a?0:rx("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},VW=function(t,r,a,s,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,u=ur(o),f=l,p=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return H.reduce(function(Y,J){var re=J.word,X=J.width,te=Y[Y.length-1];if(te&&(s==null||i||te.width+X+a<Number(s)))te.words.push(re),te.width+=X+a;else{var W={words:[re],width:X};Y.push(W)}return Y},[])},m=p(r),b=function(H){return H.reduce(function(Y,J){return Y.width>J.width?Y:J})};if(!u)return m;for(var v="",g=function(H){var Y=f.slice(0,H),J=$L({breakAll:d,style:c,children:Y+v}).wordsWithComputedWidth,re=p(J),X=re.length>o||b(re).width>Number(s);return[X,re]},w=0,y=f.length-1,j=0,N;w<=y&&j<=f.length-1;){var S=Math.floor((w+y)/2),E=S-1,A=g(E),P=cT(A,2),I=P[0],B=P[1],T=g(S),_=cT(T,1),R=_[0];if(!I&&!R&&(w=S+1),I&&R&&(y=S-1),!I&&R){N=B;break}j++}return N||m},uT=function(t){var r=Vn(t)?[]:t.toString().split(qL);return[{words:r}]},KW=function(t){var r=t.width,a=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||a)&&!lp.isSsr){var c,d,u=$L({breakAll:o,children:s,style:i});if(u){var f=u.wordsWithComputedWidth,p=u.spaceWidth;c=f,d=p}else return uT(s);return VW({breakAll:o,children:s,maxLines:l,style:i},c,d,r,a)}return uT(s)},fT="#808080",k1=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,u=t.scaleToFit,f=u===void 0?!1:u,p=t.textAnchor,m=p===void 0?"start":p,b=t.verticalAnchor,v=b===void 0?"end":b,g=t.fill,w=g===void 0?fT:g,y=lT(t,UW),j=D.useMemo(function(){return KW({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:f,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,f,y.style,y.width]),N=y.dx,S=y.dy,E=y.angle,A=y.className,P=y.breakAll,I=lT(y,qW);if(!$i(a)||!$i(i))return null;var B=a+(ur(N)?N:0),T=i+(ur(S)?S:0),_;switch(v){case"start":_=y5("calc(".concat(d,")"));break;case"middle":_=y5("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:_=y5("calc(".concat(j.length-1," * -").concat(l,")"));break}var R=[];if(f){var z=j[0].width,H=y.width;R.push("scale(".concat((ur(H)?H/z:1)/z,")"))}return E&&R.push("rotate(".concat(E,", ").concat(B,", ").concat(T,")")),R.length&&(I.transform=R.join(" ")),ft.createElement("text",b4({},Gn(I,!0),{x:B,y:T,className:fa("recharts-text",A),textAnchor:m,fill:w.includes("url")?fT:w}),j.map(function(Y,J){var re=Y.words.join(P?"":" ");return ft.createElement("tspan",{x:B,dy:J===0?_:l,key:"".concat(re,"-").concat(J)},re)}))};function g0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function jS(e){let t,r,a;e.length!==2?(t=g0,r=(l,c)=>g0(e(l),c),a=(l,c)=>e(l)-c):(t=e===g0||e===XW?e:YW,r=e,a=e);function s(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<0?d=f+1:u=f}while(d<u)}return d}function i(l,c,d=0,u=l.length){if(d<u){if(t(c,c)!==0)return u;do{const f=d+u>>>1;r(l[f],c)<=0?d=f+1:u=f}while(d<u)}return d}function o(l,c,d=0,u=l.length){const f=s(l,c,d,u-1);return f>d&&a(l[f-1],c)>-a(l[f],c)?f-1:f}return{left:s,center:o,right:i}}function YW(){return 0}function zL(e){return e===null?NaN:+e}function*QW(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const JW=jS(g0),yg=JW.right;jS(zL).center;class hT extends Map{constructor(t,r=tG){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[a,s]of t)this.set(a,s)}get(t){return super.get(mT(this,t))}has(t){return super.has(mT(this,t))}set(t,r){return super.set(ZW(this,t),r)}delete(t){return super.delete(eG(this,t))}}function mT({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):r}function ZW({_intern:e,_key:t},r){const a=t(r);return e.has(a)?e.get(a):(e.set(a,r),r)}function eG({_intern:e,_key:t},r){const a=t(r);return e.has(a)&&(r=e.get(a),e.delete(a)),r}function tG(e){return e!==null&&typeof e=="object"?e.valueOf():e}function rG(e=g0){if(e===g0)return HL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const a=e(t,r);return a||a===0?a:(e(r,r)===0)-(e(t,t)===0)}}function HL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const nG=Math.sqrt(50),aG=Math.sqrt(10),sG=Math.sqrt(2);function S1(e,t,r){const a=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(a)),i=a/Math.pow(10,s),o=i>=nG?10:i>=aG?5:i>=sG?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?S1(e,t,r*2):[l,c,d]}function y4(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const a=t<e,[s,i,o]=a?S1(t,e,r):S1(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(a)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function w4(e,t,r){return t=+t,e=+e,r=+r,S1(e,t,r)[2]}function N4(e,t,r){t=+t,e=+e,r=+r;const a=t<e,s=a?w4(t,e,r):w4(e,t,r);return(a?-1:1)*(s<0?1/-s:s)}function pT(e,t){let r;for(const a of e)a!=null&&(r<a||r===void 0&&a>=a)&&(r=a);return r}function xT(e,t){let r;for(const a of e)a!=null&&(r>a||r===void 0&&a>=a)&&(r=a);return r}function WL(e,t,r=0,a=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),a=Math.floor(Math.min(e.length-1,a)),!(r<=t&&t<=a))return e;for(s=s===void 0?HL:rG(s);a>r;){if(a-r>600){const c=a-r+1,d=t-r+1,u=Math.log(c),f=.5*Math.exp(2*u/3),p=.5*Math.sqrt(u*f*(c-f)/c)*(d-c/2<0?-1:1),m=Math.max(r,Math.floor(t-d*f/c+p)),b=Math.min(a,Math.floor(t+(c-d)*f/c+p));WL(e,t,m,b,s)}const i=e[t];let o=r,l=a;for(Tp(e,r,t),s(e[a],i)>0&&Tp(e,r,a);o<l;){for(Tp(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?Tp(e,r,l):(++l,Tp(e,l,a)),l<=t&&(r=l+1),t<=l&&(a=l-1)}return e}function Tp(e,t,r){const a=e[t];e[t]=e[r],e[r]=a}function iG(e,t,r){if(e=Float64Array.from(QW(e)),!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return xT(e);if(t>=1)return pT(e);var a,s=(a-1)*t,i=Math.floor(s),o=pT(WL(e,i).subarray(0,i+1)),l=xT(e.subarray(i+1));return o+(l-o)*(s-i)}}function oG(e,t,r=zL){if(!(!(a=e.length)||isNaN(t=+t))){if(t<=0||a<2)return+r(e[0],0,e);if(t>=1)return+r(e[a-1],a-1,e);var a,s=(a-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function lG(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var a=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++a<s;)i[a]=e+a*r;return i}function hd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Df(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const j4=Symbol("implicit");function kS(){var e=new hT,t=[],r=[],a=j4;function s(i){let o=e.get(i);if(o===void 0){if(a!==j4)return a;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new hT;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return kS(t,r).unknown(a)},hd.apply(s,arguments),s}function Sx(){var e=kS().unknown(void 0),t=e.domain,r=e.range,a=0,s=1,i,o,l=!1,c=0,d=0,u=.5;delete e.unknown;function f(){var p=t().length,m=s<a,b=m?s:a,v=m?a:s;i=(v-b)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),b+=(v-b-i*(p-c))*u,o=i*(1-c),l&&(b=Math.round(b),o=Math.round(o));var g=lG(p).map(function(w){return b+i*w});return r(m?g.reverse():g)}return e.domain=function(p){return arguments.length?(t(p),f()):t()},e.range=function(p){return arguments.length?([a,s]=p,a=+a,s=+s,f()):[a,s]},e.rangeRound=function(p){return[a,s]=p,a=+a,s=+s,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,f()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),f()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),f()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,f()):d},e.align=function(p){return arguments.length?(u=Math.max(0,Math.min(1,p)),f()):u},e.copy=function(){return Sx(t(),[a,s]).round(l).paddingInner(c).paddingOuter(d).align(u)},hd.apply(f(),arguments)}function GL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return GL(t())},e}function nx(){return GL(Sx.apply(null,arguments).paddingInner(1))}function SS(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function VL(e,t){var r=Object.create(e.prototype);for(var a in t)r[a]=t[a];return r}function wg(){}var _x=.7,_1=1/_x,wm="\\s*([+-]?\\d+)\\s*",Cx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Du="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",cG=/^#([0-9a-f]{3,8})$/,dG=new RegExp(`^rgb\\(${wm},${wm},${wm}\\)$`),uG=new RegExp(`^rgb\\(${Du},${Du},${Du}\\)$`),fG=new RegExp(`^rgba\\(${wm},${wm},${wm},${Cx}\\)$`),hG=new RegExp(`^rgba\\(${Du},${Du},${Du},${Cx}\\)$`),mG=new RegExp(`^hsl\\(${Cx},${Du},${Du}\\)$`),pG=new RegExp(`^hsla\\(${Cx},${Du},${Du},${Cx}\\)$`),gT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};SS(wg,Ax,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:vT,formatHex:vT,formatHex8:xG,formatHsl:gG,formatRgb:bT,toString:bT});function vT(){return this.rgb().formatHex()}function xG(){return this.rgb().formatHex8()}function gG(){return KL(this).formatHsl()}function bT(){return this.rgb().formatRgb()}function Ax(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=cG.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?yT(t):r===3?new Yl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?hv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?hv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dG.exec(e))?new Yl(t[1],t[2],t[3],1):(t=uG.exec(e))?new Yl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=fG.exec(e))?hv(t[1],t[2],t[3],t[4]):(t=hG.exec(e))?hv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=mG.exec(e))?jT(t[1],t[2]/100,t[3]/100,1):(t=pG.exec(e))?jT(t[1],t[2]/100,t[3]/100,t[4]):gT.hasOwnProperty(e)?yT(gT[e]):e==="transparent"?new Yl(NaN,NaN,NaN,0):null}function yT(e){return new Yl(e>>16&255,e>>8&255,e&255,1)}function hv(e,t,r,a){return a<=0&&(e=t=r=NaN),new Yl(e,t,r,a)}function vG(e){return e instanceof wg||(e=Ax(e)),e?(e=e.rgb(),new Yl(e.r,e.g,e.b,e.opacity)):new Yl}function k4(e,t,r,a){return arguments.length===1?vG(e):new Yl(e,t,r,a??1)}function Yl(e,t,r,a){this.r=+e,this.g=+t,this.b=+r,this.opacity=+a}SS(Yl,k4,VL(wg,{brighter(e){return e=e==null?_1:Math.pow(_1,e),new Yl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?_x:Math.pow(_x,e),new Yl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Yl(mh(this.r),mh(this.g),mh(this.b),C1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wT,formatHex:wT,formatHex8:bG,formatRgb:NT,toString:NT}));function wT(){return`#${ih(this.r)}${ih(this.g)}${ih(this.b)}`}function bG(){return`#${ih(this.r)}${ih(this.g)}${ih(this.b)}${ih((isNaN(this.opacity)?1:this.opacity)*255)}`}function NT(){const e=C1(this.opacity);return`${e===1?"rgb(":"rgba("}${mh(this.r)}, ${mh(this.g)}, ${mh(this.b)}${e===1?")":`, ${e})`}`}function C1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function mh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function ih(e){return e=mh(e),(e<16?"0":"")+e.toString(16)}function jT(e,t,r,a){return a<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Wd(e,t,r,a)}function KL(e){if(e instanceof Wd)return new Wd(e.h,e.s,e.l,e.opacity);if(e instanceof wg||(e=Ax(e)),!e)return new Wd;if(e instanceof Wd)return e;e=e.rgb();var t=e.r/255,r=e.g/255,a=e.b/255,s=Math.min(t,r,a),i=Math.max(t,r,a),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-a)/l+(r<a)*6:r===i?o=(a-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Wd(o,l,c,e.opacity)}function yG(e,t,r,a){return arguments.length===1?KL(e):new Wd(e,t,r,a??1)}function Wd(e,t,r,a){this.h=+e,this.s=+t,this.l=+r,this.opacity=+a}SS(Wd,yG,VL(wg,{brighter(e){return e=e==null?_1:Math.pow(_1,e),new Wd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?_x:Math.pow(_x,e),new Wd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,a=r+(r<.5?r:1-r)*t,s=2*r-a;return new Yl(w5(e>=240?e-240:e+120,s,a),w5(e,s,a),w5(e<120?e+240:e-120,s,a),this.opacity)},clamp(){return new Wd(kT(this.h),mv(this.s),mv(this.l),C1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=C1(this.opacity);return`${e===1?"hsl(":"hsla("}${kT(this.h)}, ${mv(this.s)*100}%, ${mv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function kT(e){return e=(e||0)%360,e<0?e+360:e}function mv(e){return Math.max(0,Math.min(1,e||0))}function w5(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const _S=e=>()=>e;function wG(e,t){return function(r){return e+r*t}}function NG(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(a){return Math.pow(e+a*t,r)}}function jG(e){return(e=+e)==1?XL:function(t,r){return r-t?NG(t,r,e):_S(isNaN(t)?r:t)}}function XL(e,t){var r=t-e;return r?wG(e,r):_S(isNaN(e)?t:e)}const ST=(function e(t){var r=jG(t);function a(s,i){var o=r((s=k4(s)).r,(i=k4(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=XL(s.opacity,i.opacity);return function(u){return s.r=o(u),s.g=l(u),s.b=c(u),s.opacity=d(u),s+""}}return a.gamma=e,a})(1);function kG(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,a=t.slice(),s;return function(i){for(s=0;s<r;++s)a[s]=e[s]*(1-i)+t[s]*i;return a}}function SG(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function _G(e,t){var r=t?t.length:0,a=e?Math.min(r,e.length):0,s=new Array(a),i=new Array(r),o;for(o=0;o<a;++o)s[o]=cp(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<a;++o)i[o]=s[o](l);return i}}function CG(e,t){var r=new Date;return e=+e,t=+t,function(a){return r.setTime(e*(1-a)+t*a),r}}function A1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function AG(e,t){var r={},a={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=cp(e[s],t[s]):a[s]=t[s];return function(i){for(s in r)a[s]=r[s](i);return a}}var S4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,N5=new RegExp(S4.source,"g");function EG(e){return function(){return e}}function TG(e){return function(t){return e(t)+""}}function OG(e,t){var r=S4.lastIndex=N5.lastIndex=0,a,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(a=S4.exec(e))&&(s=N5.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(a=a[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:A1(a,s)})),r=N5.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?TG(c[0].x):EG(t):(t=c.length,function(d){for(var u=0,f;u<t;++u)l[(f=c[u]).i]=f.x(d);return l.join("")})}function cp(e,t){var r=typeof t,a;return t==null||r==="boolean"?_S(t):(r==="number"?A1:r==="string"?(a=Ax(t))?(t=a,ST):OG:t instanceof Ax?ST:t instanceof Date?CG:SG(t)?kG:Array.isArray(t)?_G:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?AG:A1)(e,t)}function CS(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function PG(e,t){t===void 0&&(t=e,e=cp);for(var r=0,a=t.length-1,s=t[0],i=new Array(a<0?0:a);r<a;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(a-1,Math.floor(o*=a)));return i[l](o-l)}}function IG(e){return function(){return e}}function E1(e){return+e}var _T=[0,1];function _l(e){return e}function _4(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:IG(isNaN(t)?NaN:.5)}function DG(e,t){var r;return e>t&&(r=e,e=t,t=r),function(a){return Math.max(e,Math.min(t,a))}}function LG(e,t,r){var a=e[0],s=e[1],i=t[0],o=t[1];return s<a?(a=_4(s,a),i=r(o,i)):(a=_4(a,s),i=r(i,o)),function(l){return i(a(l))}}function FG(e,t,r){var a=Math.min(e.length,t.length)-1,s=new Array(a),i=new Array(a),o=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<a;)s[o]=_4(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=yg(e,l,1,a)-1;return i[c](s[c](l))}}function Ng(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Kb(){var e=_T,t=_T,r=cp,a,s,i,o=_l,l,c,d;function u(){var p=Math.min(e.length,t.length);return o!==_l&&(o=DG(e[0],e[p-1])),l=p>2?FG:LG,c=d=null,f}function f(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(a),t,r)))(a(o(p)))}return f.invert=function(p){return o(s((d||(d=l(t,e.map(a),A1)))(p)))},f.domain=function(p){return arguments.length?(e=Array.from(p,E1),u()):e.slice()},f.range=function(p){return arguments.length?(t=Array.from(p),u()):t.slice()},f.rangeRound=function(p){return t=Array.from(p),r=CS,u()},f.clamp=function(p){return arguments.length?(o=p?!0:_l,u()):o!==_l},f.interpolate=function(p){return arguments.length?(r=p,u()):r},f.unknown=function(p){return arguments.length?(i=p,f):i},function(p,m){return a=p,s=m,u()}}function AS(){return Kb()(_l,_l)}function MG(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function T1(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),a=e.slice(0,r);return[a.length>1?a[0]+a.slice(2):a,+e.slice(r+1)]}function Fm(e){return e=T1(Math.abs(e)),e?e[1]:NaN}function RG(e,t){return function(r,a){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>a&&(l=Math.max(1,a-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>a));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function BG(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var UG=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ex(e){if(!(t=UG.exec(e)))throw new Error("invalid format: "+e);var t;return new ES({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ex.prototype=ES.prototype;function ES(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ES.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function qG(e){e:for(var t=e.length,r=1,a=-1,s;r<t;++r)switch(e[r]){case".":a=s=r;break;case"0":a===0&&(a=r),s=r;break;default:if(!+e[r])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(s+1):e}var O1;function $G(e,t){var r=T1(e,t);if(!r)return O1=void 0,e.toPrecision(t);var a=r[0],s=r[1],i=s-(O1=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=a.length;return i===o?a:i>o?a+new Array(i-o+1).join("0"):i>0?a.slice(0,i)+"."+a.slice(i):"0."+new Array(1-i).join("0")+T1(e,Math.max(0,t+i-1))[0]}function CT(e,t){var r=T1(e,t);if(!r)return e+"";var a=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+a:a.length>s+1?a.slice(0,s+1)+"."+a.slice(s+1):a+new Array(s-a.length+2).join("0")}const AT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:MG,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>CT(e*100,t),r:CT,s:$G,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ET(e){return e}var TT=Array.prototype.map,OT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function zG(e){var t=e.grouping===void 0||e.thousands===void 0?ET:RG(TT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?ET:BG(TT.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(f,p){f=Ex(f);var m=f.fill,b=f.align,v=f.sign,g=f.symbol,w=f.zero,y=f.width,j=f.comma,N=f.precision,S=f.trim,E=f.type;E==="n"?(j=!0,E="g"):AT[E]||(N===void 0&&(N=12),S=!0,E="g"),(w||m==="0"&&b==="=")&&(w=!0,m="0",b="=");var A=(p&&p.prefix!==void 0?p.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():""),P=(g==="$"?a:/[%p]/.test(E)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),I=AT[E],B=/[defgprs%]/.test(E);N=N===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,N)):Math.max(0,Math.min(20,N));function T(_){var R=A,z=P,H,Y,J;if(E==="c")z=I(_)+z,_="";else{_=+_;var re=_<0||1/_<0;if(_=isNaN(_)?c:I(Math.abs(_),N),S&&(_=qG(_)),re&&+_==0&&v!=="+"&&(re=!1),R=(re?v==="("?v:l:v==="-"||v==="("?"":v)+R,z=(E==="s"&&!isNaN(_)&&O1!==void 0?OT[8+O1/3]:"")+z+(re&&v==="("?")":""),B){for(H=-1,Y=_.length;++H<Y;)if(J=_.charCodeAt(H),48>J||J>57){z=(J===46?s+_.slice(H+1):_.slice(H))+z,_=_.slice(0,H);break}}}j&&!w&&(_=t(_,1/0));var X=R.length+_.length+z.length,te=X<y?new Array(y-X+1).join(m):"";switch(j&&w&&(_=t(te+_,te.length?y-z.length:1/0),te=""),b){case"<":_=R+_+z+te;break;case"=":_=R+te+_+z;break;case"^":_=te.slice(0,X=te.length>>1)+R+_+z+te.slice(X);break;default:_=te+R+_+z;break}return i(_)}return T.toString=function(){return f+""},T}function u(f,p){var m=Math.max(-8,Math.min(8,Math.floor(Fm(p)/3)))*3,b=Math.pow(10,-m),v=d((f=Ex(f),f.type="f",f),{suffix:OT[8+m/3]});return function(g){return v(b*g)}}return{format:d,formatPrefix:u}}var pv,TS,YL;HG({thousands:",",grouping:[3],currency:["$",""]});function HG(e){return pv=zG(e),TS=pv.format,YL=pv.formatPrefix,pv}function WG(e){return Math.max(0,-Fm(Math.abs(e)))}function GG(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fm(t)/3)))*3-Fm(Math.abs(e)))}function VG(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fm(t)-Fm(e))+1}function QL(e,t,r,a){var s=N4(e,t,r),i;switch(a=Ex(a??",f"),a.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(i=GG(s,o))&&(a.precision=i),YL(a,o)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(i=VG(s,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=i-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(i=WG(s))&&(a.precision=i-(a.type==="%")*2);break}}return TS(a)}function T0(e){var t=e.domain;return e.ticks=function(r){var a=t();return y4(a[0],a[a.length-1],r??10)},e.tickFormat=function(r,a){var s=t();return QL(s[0],s[s.length-1],r??10,a)},e.nice=function(r){r==null&&(r=10);var a=t(),s=0,i=a.length-1,o=a[s],l=a[i],c,d,u=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);u-- >0;){if(d=w4(o,l,r),d===c)return a[s]=o,a[i]=l,t(a);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function P1(){var e=AS();return e.copy=function(){return Ng(e,P1())},hd.apply(e,arguments),T0(e)}function JL(e){var t;function r(a){return a==null||isNaN(a=+a)?t:a}return r.invert=r,r.domain=r.range=function(a){return arguments.length?(e=Array.from(a,E1),r):e.slice()},r.unknown=function(a){return arguments.length?(t=a,r):t},r.copy=function(){return JL(e).unknown(t)},e=arguments.length?Array.from(e,E1):[0,1],T0(r)}function ZL(e,t){e=e.slice();var r=0,a=e.length-1,s=e[r],i=e[a],o;return i<s&&(o=r,r=a,a=o,o=s,s=i,i=o),e[r]=t.floor(s),e[a]=t.ceil(i),e}function PT(e){return Math.log(e)}function IT(e){return Math.exp(e)}function KG(e){return-Math.log(-e)}function XG(e){return-Math.exp(-e)}function YG(e){return isFinite(e)?+("1e"+e):e<0?0:e}function QG(e){return e===10?YG:e===Math.E?Math.exp:t=>Math.pow(e,t)}function JG(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function DT(e){return(t,r)=>-e(-t,r)}function OS(e){const t=e(PT,IT),r=t.domain;let a=10,s,i;function o(){return s=JG(a),i=QG(a),r()[0]<0?(s=DT(s),i=DT(i),e(KG,XG)):e(PT,IT),t}return t.base=function(l){return arguments.length?(a=+l,o()):a},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],u=c[c.length-1];const f=u<d;f&&([d,u]=[u,d]);let p=s(d),m=s(u),b,v;const g=l==null?10:+l;let w=[];if(!(a%1)&&m-p<g){if(p=Math.floor(p),m=Math.ceil(m),d>0){for(;p<=m;++p)for(b=1;b<a;++b)if(v=p<0?b/i(-p):b*i(p),!(v<d)){if(v>u)break;w.push(v)}}else for(;p<=m;++p)for(b=a-1;b>=1;--b)if(v=p>0?b/i(-p):b*i(p),!(v<d)){if(v>u)break;w.push(v)}w.length*2<g&&(w=y4(d,u,g))}else w=y4(p,m,Math.min(m-p,g)).map(i);return f?w.reverse():w},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=a===10?"s":","),typeof c!="function"&&(!(a%1)&&(c=Ex(c)).precision==null&&(c.trim=!0),c=TS(c)),l===1/0)return c;const d=Math.max(1,a*l/t.ticks().length);return u=>{let f=u/i(Math.round(s(u)));return f*a<a-.5&&(f*=a),f<=d?c(u):""}},t.nice=()=>r(ZL(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function eF(){const e=OS(Kb()).domain([1,10]);return e.copy=()=>Ng(e,eF()).base(e.base()),hd.apply(e,arguments),e}function LT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function FT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function PS(e){var t=1,r=e(LT(t),FT(t));return r.constant=function(a){return arguments.length?e(LT(t=+a),FT(t)):t},T0(r)}function tF(){var e=PS(Kb());return e.copy=function(){return Ng(e,tF()).constant(e.constant())},hd.apply(e,arguments)}function MT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function ZG(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function eV(e){return e<0?-e*e:e*e}function IS(e){var t=e(_l,_l),r=1;function a(){return r===1?e(_l,_l):r===.5?e(ZG,eV):e(MT(r),MT(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,a()):r},T0(t)}function DS(){var e=IS(Kb());return e.copy=function(){return Ng(e,DS()).exponent(e.exponent())},hd.apply(e,arguments),e}function tV(){return DS.apply(null,arguments).exponent(.5)}function RT(e){return Math.sign(e)*e*e}function rV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function rF(){var e=AS(),t=[0,1],r=!1,a;function s(i){var o=rV(e(i));return isNaN(o)?a:r?Math.round(o):o}return s.invert=function(i){return e.invert(RT(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,E1)).map(RT)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(a=i,s):a},s.copy=function(){return rF(e.domain(),t).round(r).clamp(e.clamp()).unknown(a)},hd.apply(s,arguments),T0(s)}function nF(){var e=[],t=[],r=[],a;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=oG(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?a:t[yg(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(g0),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(a=o,i):a},i.quantiles=function(){return r.slice()},i.copy=function(){return nF().domain(e).range(t).unknown(a)},hd.apply(i,arguments)}function aF(){var e=0,t=1,r=1,a=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[yg(a,c,0,r)]:i}function l(){var c=-1;for(a=new Array(r);++c<r;)a[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,a[0]]:d>=r?[a[r-1],t]:[a[d-1],a[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return a.slice()},o.copy=function(){return aF().domain([e,t]).range(s).unknown(i)},hd.apply(T0(o),arguments)}function sF(){var e=[.5],t=[0,1],r,a=1;function s(i){return i!=null&&i<=i?t[yg(e,i,0,a)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),a=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),a=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return sF().domain(e).range(t).unknown(r)},hd.apply(s,arguments)}const j5=new Date,k5=new Date;function Hi(e,t,r,a){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>Hi(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(j5.setTime(+i),k5.setTime(+o),e(j5),e(k5),Math.floor(r(j5,k5))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(a?o=>a(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const I1=Hi(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);I1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Hi(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):I1);I1.range;const hf=1e3,nd=hf*60,mf=nd*60,Cf=mf*24,LS=Cf*7,BT=Cf*30,S5=Cf*365,oh=Hi(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*hf)},(e,t)=>(t-e)/hf,e=>e.getUTCSeconds());oh.range;const FS=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hf)},(e,t)=>{e.setTime(+e+t*nd)},(e,t)=>(t-e)/nd,e=>e.getMinutes());FS.range;const MS=Hi(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*nd)},(e,t)=>(t-e)/nd,e=>e.getUTCMinutes());MS.range;const RS=Hi(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*hf-e.getMinutes()*nd)},(e,t)=>{e.setTime(+e+t*mf)},(e,t)=>(t-e)/mf,e=>e.getHours());RS.range;const BS=Hi(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*mf)},(e,t)=>(t-e)/mf,e=>e.getUTCHours());BS.range;const jg=Hi(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*nd)/Cf,e=>e.getDate()-1);jg.range;const Xb=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cf,e=>e.getUTCDate()-1);Xb.range;const iF=Hi(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Cf,e=>Math.floor(e/Cf));iF.range;function Mh(e){return Hi(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*nd)/LS)}const Yb=Mh(0),D1=Mh(1),nV=Mh(2),aV=Mh(3),Mm=Mh(4),sV=Mh(5),iV=Mh(6);Yb.range;D1.range;nV.range;aV.range;Mm.range;sV.range;iV.range;function Rh(e){return Hi(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/LS)}const Qb=Rh(0),L1=Rh(1),oV=Rh(2),lV=Rh(3),Rm=Rh(4),cV=Rh(5),dV=Rh(6);Qb.range;L1.range;oV.range;lV.range;Rm.range;cV.range;dV.range;const US=Hi(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());US.range;const qS=Hi(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());qS.range;const Af=Hi(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Af.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Af.range;const Ef=Hi(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ef.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Hi(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Ef.range;function oF(e,t,r,a,s,i){const o=[[oh,1,hf],[oh,5,5*hf],[oh,15,15*hf],[oh,30,30*hf],[i,1,nd],[i,5,5*nd],[i,15,15*nd],[i,30,30*nd],[s,1,mf],[s,3,3*mf],[s,6,6*mf],[s,12,12*mf],[a,1,Cf],[a,2,2*Cf],[r,1,LS],[t,1,BT],[t,3,3*BT],[e,1,S5]];function l(d,u,f){const p=u<d;p&&([d,u]=[u,d]);const m=f&&typeof f.range=="function"?f:c(d,u,f),b=m?m.range(d,+u+1):[];return p?b.reverse():b}function c(d,u,f){const p=Math.abs(u-d)/f,m=jS(([,,g])=>g).right(o,p);if(m===o.length)return e.every(N4(d/S5,u/S5,f));if(m===0)return I1.every(Math.max(N4(d,u,f),1));const[b,v]=o[p/o[m-1][2]<o[m][2]/p?m-1:m];return b.every(v)}return[l,c]}const[uV,fV]=oF(Ef,qS,Qb,iF,BS,MS),[hV,mV]=oF(Af,US,Yb,jg,RS,FS);function _5(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function C5(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Op(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function pV(e){var t=e.dateTime,r=e.date,a=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Pp(s),u=Ip(s),f=Pp(i),p=Ip(i),m=Pp(o),b=Ip(o),v=Pp(l),g=Ip(l),w=Pp(c),y=Ip(c),j={a:J,A:re,b:X,B:te,c:null,d:WT,e:WT,f:RV,g:KV,G:YV,H:LV,I:FV,j:MV,L:lF,m:BV,M:UV,p:W,q:O,Q:KT,s:XT,S:qV,u:$V,U:zV,V:HV,w:WV,W:GV,x:null,X:null,y:VV,Y:XV,Z:QV,"%":VT},N={a:q,A:G,b:U,B:K,c:null,d:GT,e:GT,f:tK,g:uK,G:hK,H:JV,I:ZV,j:eK,L:dF,m:rK,M:nK,p:ae,q:me,Q:KT,s:XT,S:aK,u:sK,U:iK,V:oK,w:lK,W:cK,x:null,X:null,y:dK,Y:fK,Z:mK,"%":VT},S={a:B,A:T,b:_,B:R,c:z,d:zT,e:zT,f:OV,g:$T,G:qT,H:HT,I:HT,j:CV,L:TV,m:_V,M:AV,p:I,q:SV,Q:IV,s:DV,S:EV,u:yV,U:wV,V:NV,w:bV,W:jV,x:H,X:Y,y:$T,Y:qT,Z:kV,"%":PV};j.x=E(r,j),j.X=E(a,j),j.c=E(t,j),N.x=E(r,N),N.X=E(a,N),N.c=E(t,N);function E(se,le){return function(Me){var ue=[],Ue=-1,Ae=0,ie=se.length,Z,Ee,we;for(Me instanceof Date||(Me=new Date(+Me));++Ue<ie;)se.charCodeAt(Ue)===37&&(ue.push(se.slice(Ae,Ue)),(Ee=UT[Z=se.charAt(++Ue)])!=null?Z=se.charAt(++Ue):Ee=Z==="e"?" ":"0",(we=le[Z])&&(Z=we(Me,Ee)),ue.push(Z),Ae=Ue+1);return ue.push(se.slice(Ae,Ue)),ue.join("")}}function A(se,le){return function(Me){var ue=Op(1900,void 0,1),Ue=P(ue,se,Me+="",0),Ae,ie;if(Ue!=Me.length)return null;if("Q"in ue)return new Date(ue.Q);if("s"in ue)return new Date(ue.s*1e3+("L"in ue?ue.L:0));if(le&&!("Z"in ue)&&(ue.Z=0),"p"in ue&&(ue.H=ue.H%12+ue.p*12),ue.m===void 0&&(ue.m="q"in ue?ue.q:0),"V"in ue){if(ue.V<1||ue.V>53)return null;"w"in ue||(ue.w=1),"Z"in ue?(Ae=C5(Op(ue.y,0,1)),ie=Ae.getUTCDay(),Ae=ie>4||ie===0?L1.ceil(Ae):L1(Ae),Ae=Xb.offset(Ae,(ue.V-1)*7),ue.y=Ae.getUTCFullYear(),ue.m=Ae.getUTCMonth(),ue.d=Ae.getUTCDate()+(ue.w+6)%7):(Ae=_5(Op(ue.y,0,1)),ie=Ae.getDay(),Ae=ie>4||ie===0?D1.ceil(Ae):D1(Ae),Ae=jg.offset(Ae,(ue.V-1)*7),ue.y=Ae.getFullYear(),ue.m=Ae.getMonth(),ue.d=Ae.getDate()+(ue.w+6)%7)}else("W"in ue||"U"in ue)&&("w"in ue||(ue.w="u"in ue?ue.u%7:"W"in ue?1:0),ie="Z"in ue?C5(Op(ue.y,0,1)).getUTCDay():_5(Op(ue.y,0,1)).getDay(),ue.m=0,ue.d="W"in ue?(ue.w+6)%7+ue.W*7-(ie+5)%7:ue.w+ue.U*7-(ie+6)%7);return"Z"in ue?(ue.H+=ue.Z/100|0,ue.M+=ue.Z%100,C5(ue)):_5(ue)}}function P(se,le,Me,ue){for(var Ue=0,Ae=le.length,ie=Me.length,Z,Ee;Ue<Ae;){if(ue>=ie)return-1;if(Z=le.charCodeAt(Ue++),Z===37){if(Z=le.charAt(Ue++),Ee=S[Z in UT?le.charAt(Ue++):Z],!Ee||(ue=Ee(se,Me,ue))<0)return-1}else if(Z!=Me.charCodeAt(ue++))return-1}return ue}function I(se,le,Me){var ue=d.exec(le.slice(Me));return ue?(se.p=u.get(ue[0].toLowerCase()),Me+ue[0].length):-1}function B(se,le,Me){var ue=m.exec(le.slice(Me));return ue?(se.w=b.get(ue[0].toLowerCase()),Me+ue[0].length):-1}function T(se,le,Me){var ue=f.exec(le.slice(Me));return ue?(se.w=p.get(ue[0].toLowerCase()),Me+ue[0].length):-1}function _(se,le,Me){var ue=w.exec(le.slice(Me));return ue?(se.m=y.get(ue[0].toLowerCase()),Me+ue[0].length):-1}function R(se,le,Me){var ue=v.exec(le.slice(Me));return ue?(se.m=g.get(ue[0].toLowerCase()),Me+ue[0].length):-1}function z(se,le,Me){return P(se,t,le,Me)}function H(se,le,Me){return P(se,r,le,Me)}function Y(se,le,Me){return P(se,a,le,Me)}function J(se){return o[se.getDay()]}function re(se){return i[se.getDay()]}function X(se){return c[se.getMonth()]}function te(se){return l[se.getMonth()]}function W(se){return s[+(se.getHours()>=12)]}function O(se){return 1+~~(se.getMonth()/3)}function q(se){return o[se.getUTCDay()]}function G(se){return i[se.getUTCDay()]}function U(se){return c[se.getUTCMonth()]}function K(se){return l[se.getUTCMonth()]}function ae(se){return s[+(se.getUTCHours()>=12)]}function me(se){return 1+~~(se.getUTCMonth()/3)}return{format:function(se){var le=E(se+="",j);return le.toString=function(){return se},le},parse:function(se){var le=A(se+="",!1);return le.toString=function(){return se},le},utcFormat:function(se){var le=E(se+="",N);return le.toString=function(){return se},le},utcParse:function(se){var le=A(se+="",!0);return le.toString=function(){return se},le}}}var UT={"-":"",_:" ",0:"0"},fo=/^\s*\d+/,xV=/^%/,gV=/[\\^$*+?|[\]().{}]/g;function va(e,t,r){var a=e<0?"-":"",s=(a?-e:e)+"",i=s.length;return a+(i<r?new Array(r-i+1).join(t)+s:s)}function vV(e){return e.replace(gV,"\\$&")}function Pp(e){return new RegExp("^(?:"+e.map(vV).join("|")+")","i")}function Ip(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function bV(e,t,r){var a=fo.exec(t.slice(r,r+1));return a?(e.w=+a[0],r+a[0].length):-1}function yV(e,t,r){var a=fo.exec(t.slice(r,r+1));return a?(e.u=+a[0],r+a[0].length):-1}function wV(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.U=+a[0],r+a[0].length):-1}function NV(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.V=+a[0],r+a[0].length):-1}function jV(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.W=+a[0],r+a[0].length):-1}function qT(e,t,r){var a=fo.exec(t.slice(r,r+4));return a?(e.y=+a[0],r+a[0].length):-1}function $T(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.y=+a[0]+(+a[0]>68?1900:2e3),r+a[0].length):-1}function kV(e,t,r){var a=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return a?(e.Z=a[1]?0:-(a[2]+(a[3]||"00")),r+a[0].length):-1}function SV(e,t,r){var a=fo.exec(t.slice(r,r+1));return a?(e.q=a[0]*3-3,r+a[0].length):-1}function _V(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.m=a[0]-1,r+a[0].length):-1}function zT(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.d=+a[0],r+a[0].length):-1}function CV(e,t,r){var a=fo.exec(t.slice(r,r+3));return a?(e.m=0,e.d=+a[0],r+a[0].length):-1}function HT(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.H=+a[0],r+a[0].length):-1}function AV(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.M=+a[0],r+a[0].length):-1}function EV(e,t,r){var a=fo.exec(t.slice(r,r+2));return a?(e.S=+a[0],r+a[0].length):-1}function TV(e,t,r){var a=fo.exec(t.slice(r,r+3));return a?(e.L=+a[0],r+a[0].length):-1}function OV(e,t,r){var a=fo.exec(t.slice(r,r+6));return a?(e.L=Math.floor(a[0]/1e3),r+a[0].length):-1}function PV(e,t,r){var a=xV.exec(t.slice(r,r+1));return a?r+a[0].length:-1}function IV(e,t,r){var a=fo.exec(t.slice(r));return a?(e.Q=+a[0],r+a[0].length):-1}function DV(e,t,r){var a=fo.exec(t.slice(r));return a?(e.s=+a[0],r+a[0].length):-1}function WT(e,t){return va(e.getDate(),t,2)}function LV(e,t){return va(e.getHours(),t,2)}function FV(e,t){return va(e.getHours()%12||12,t,2)}function MV(e,t){return va(1+jg.count(Af(e),e),t,3)}function lF(e,t){return va(e.getMilliseconds(),t,3)}function RV(e,t){return lF(e,t)+"000"}function BV(e,t){return va(e.getMonth()+1,t,2)}function UV(e,t){return va(e.getMinutes(),t,2)}function qV(e,t){return va(e.getSeconds(),t,2)}function $V(e){var t=e.getDay();return t===0?7:t}function zV(e,t){return va(Yb.count(Af(e)-1,e),t,2)}function cF(e){var t=e.getDay();return t>=4||t===0?Mm(e):Mm.ceil(e)}function HV(e,t){return e=cF(e),va(Mm.count(Af(e),e)+(Af(e).getDay()===4),t,2)}function WV(e){return e.getDay()}function GV(e,t){return va(D1.count(Af(e)-1,e),t,2)}function VV(e,t){return va(e.getFullYear()%100,t,2)}function KV(e,t){return e=cF(e),va(e.getFullYear()%100,t,2)}function XV(e,t){return va(e.getFullYear()%1e4,t,4)}function YV(e,t){var r=e.getDay();return e=r>=4||r===0?Mm(e):Mm.ceil(e),va(e.getFullYear()%1e4,t,4)}function QV(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+va(t/60|0,"0",2)+va(t%60,"0",2)}function GT(e,t){return va(e.getUTCDate(),t,2)}function JV(e,t){return va(e.getUTCHours(),t,2)}function ZV(e,t){return va(e.getUTCHours()%12||12,t,2)}function eK(e,t){return va(1+Xb.count(Ef(e),e),t,3)}function dF(e,t){return va(e.getUTCMilliseconds(),t,3)}function tK(e,t){return dF(e,t)+"000"}function rK(e,t){return va(e.getUTCMonth()+1,t,2)}function nK(e,t){return va(e.getUTCMinutes(),t,2)}function aK(e,t){return va(e.getUTCSeconds(),t,2)}function sK(e){var t=e.getUTCDay();return t===0?7:t}function iK(e,t){return va(Qb.count(Ef(e)-1,e),t,2)}function uF(e){var t=e.getUTCDay();return t>=4||t===0?Rm(e):Rm.ceil(e)}function oK(e,t){return e=uF(e),va(Rm.count(Ef(e),e)+(Ef(e).getUTCDay()===4),t,2)}function lK(e){return e.getUTCDay()}function cK(e,t){return va(L1.count(Ef(e)-1,e),t,2)}function dK(e,t){return va(e.getUTCFullYear()%100,t,2)}function uK(e,t){return e=uF(e),va(e.getUTCFullYear()%100,t,2)}function fK(e,t){return va(e.getUTCFullYear()%1e4,t,4)}function hK(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Rm(e):Rm.ceil(e),va(e.getUTCFullYear()%1e4,t,4)}function mK(){return"+0000"}function VT(){return"%"}function KT(e){return+e}function XT(e){return Math.floor(+e/1e3)}var am,fF,hF;pK({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function pK(e){return am=pV(e),fF=am.format,am.parse,hF=am.utcFormat,am.utcParse,am}function xK(e){return new Date(e)}function gK(e){return e instanceof Date?+e:+new Date(+e)}function $S(e,t,r,a,s,i,o,l,c,d){var u=AS(),f=u.invert,p=u.domain,m=d(".%L"),b=d(":%S"),v=d("%I:%M"),g=d("%I %p"),w=d("%a %d"),y=d("%b %d"),j=d("%B"),N=d("%Y");function S(E){return(c(E)<E?m:l(E)<E?b:o(E)<E?v:i(E)<E?g:a(E)<E?s(E)<E?w:y:r(E)<E?j:N)(E)}return u.invert=function(E){return new Date(f(E))},u.domain=function(E){return arguments.length?p(Array.from(E,gK)):p().map(xK)},u.ticks=function(E){var A=p();return e(A[0],A[A.length-1],E??10)},u.tickFormat=function(E,A){return A==null?S:d(A)},u.nice=function(E){var A=p();return(!E||typeof E.range!="function")&&(E=t(A[0],A[A.length-1],E??10)),E?p(ZL(A,E)):u},u.copy=function(){return Ng(u,$S(e,t,r,a,s,i,o,l,c,d))},u}function vK(){return hd.apply($S(hV,mV,Af,US,Yb,jg,RS,FS,oh,fF).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function bK(){return hd.apply($S(uV,fV,Ef,qS,Qb,Xb,BS,MS,oh,hF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Jb(){var e=0,t=1,r,a,s,i,o=_l,l=!1,c;function d(f){return f==null||isNaN(f=+f)?c:o(s===0?.5:(f=(i(f)-r)*s,l?Math.max(0,Math.min(1,f)):f))}d.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),a=i(t=+t),s=r===a?0:1/(a-r),d):[e,t]},d.clamp=function(f){return arguments.length?(l=!!f,d):l},d.interpolator=function(f){return arguments.length?(o=f,d):o};function u(f){return function(p){var m,b;return arguments.length?([m,b]=p,o=f(m,b),d):[o(0),o(1)]}}return d.range=u(cp),d.rangeRound=u(CS),d.unknown=function(f){return arguments.length?(c=f,d):c},function(f){return i=f,r=f(e),a=f(t),s=r===a?0:1/(a-r),d}}function O0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function mF(){var e=T0(Jb()(_l));return e.copy=function(){return O0(e,mF())},Df.apply(e,arguments)}function pF(){var e=OS(Jb()).domain([1,10]);return e.copy=function(){return O0(e,pF()).base(e.base())},Df.apply(e,arguments)}function xF(){var e=PS(Jb());return e.copy=function(){return O0(e,xF()).constant(e.constant())},Df.apply(e,arguments)}function zS(){var e=IS(Jb());return e.copy=function(){return O0(e,zS()).exponent(e.exponent())},Df.apply(e,arguments)}function yK(){return zS.apply(null,arguments).exponent(.5)}function gF(){var e=[],t=_l;function r(a){if(a!=null&&!isNaN(a=+a))return t((yg(e,a,1)-1)/(e.length-1))}return r.domain=function(a){if(!arguments.length)return e.slice();e=[];for(let s of a)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(g0),r},r.interpolator=function(a){return arguments.length?(t=a,r):t},r.range=function(){return e.map((a,s)=>t(s/(e.length-1)))},r.quantiles=function(a){return Array.from({length:a+1},(s,i)=>iG(e,i/a))},r.copy=function(){return gF(t).domain(e)},Df.apply(r,arguments)}function Zb(){var e=0,t=.5,r=1,a=1,s,i,o,l,c,d=_l,u,f=!1,p;function m(v){return isNaN(v=+v)?p:(v=.5+((v=+u(v))-i)*(a*v<a*i?l:c),d(f?Math.max(0,Math.min(1,v)):v))}m.domain=function(v){return arguments.length?([e,t,r]=v,s=u(e=+e),i=u(t=+t),o=u(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,m):[e,t,r]},m.clamp=function(v){return arguments.length?(f=!!v,m):f},m.interpolator=function(v){return arguments.length?(d=v,m):d};function b(v){return function(g){var w,y,j;return arguments.length?([w,y,j]=g,d=PG(v,[w,y,j]),m):[d(0),d(.5),d(1)]}}return m.range=b(cp),m.rangeRound=b(CS),m.unknown=function(v){return arguments.length?(p=v,m):p},function(v){return u=v,s=v(e),i=v(t),o=v(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),a=i<s?-1:1,m}}function vF(){var e=T0(Zb()(_l));return e.copy=function(){return O0(e,vF())},Df.apply(e,arguments)}function bF(){var e=OS(Zb()).domain([.1,1,10]);return e.copy=function(){return O0(e,bF()).base(e.base())},Df.apply(e,arguments)}function yF(){var e=PS(Zb());return e.copy=function(){return O0(e,yF()).constant(e.constant())},Df.apply(e,arguments)}function HS(){var e=IS(Zb());return e.copy=function(){return O0(e,HS()).exponent(e.exponent())},Df.apply(e,arguments)}function wK(){return HS.apply(null,arguments).exponent(.5)}const YT=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Sx,scaleDiverging:vF,scaleDivergingLog:bF,scaleDivergingPow:HS,scaleDivergingSqrt:wK,scaleDivergingSymlog:yF,scaleIdentity:JL,scaleImplicit:j4,scaleLinear:P1,scaleLog:eF,scaleOrdinal:kS,scalePoint:nx,scalePow:DS,scaleQuantile:nF,scaleQuantize:aF,scaleRadial:rF,scaleSequential:mF,scaleSequentialLog:pF,scaleSequentialPow:zS,scaleSequentialQuantile:gF,scaleSequentialSqrt:yK,scaleSequentialSymlog:xF,scaleSqrt:tV,scaleSymlog:tF,scaleThreshold:sF,scaleTime:vK,scaleUtc:bK,tickFormat:QL},Symbol.toStringTag,{value:"Module"}));var A5,QT;function wF(){if(QT)return A5;QT=1;var e=ap();function t(r,a,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],c=a(l);if(c!=null&&(d===void 0?c===c&&!e(c):s(c,d)))var d=c,u=l}return u}return A5=t,A5}var E5,JT;function NK(){if(JT)return E5;JT=1;function e(t,r){return t>r}return E5=e,E5}var T5,ZT;function jK(){if(ZT)return T5;ZT=1;var e=wF(),t=NK(),r=op();function a(s){return s&&s.length?e(s,r,t):void 0}return T5=a,T5}var kK=jK();const u0=La(kK);var O5,eO;function SK(){if(eO)return O5;eO=1;function e(t,r){return t<r}return O5=e,O5}var P5,tO;function _K(){if(tO)return P5;tO=1;var e=wF(),t=SK(),r=op();function a(s){return s&&s.length?e(s,r,t):void 0}return P5=a,P5}var CK=_K();const ey=La(CK);var I5,rO;function AK(){if(rO)return I5;rO=1;var e=iS(),t=E0(),r=TL(),a=ec();function s(i,o){var l=a(i)?e:r;return l(i,t(o,3))}return I5=s,I5}var D5,nO;function EK(){if(nO)return D5;nO=1;var e=AL(),t=AK();function r(a,s){return e(t(a,s),1)}return D5=r,D5}var TK=EK();const OK=La(TK);var L5,aO;function NF(){if(aO)return L5;aO=1;var e=bS();function t(r,a){return e(r,a)}return L5=t,L5}var PK=NF();const Tx=La(PK);var dp=1e9,IK={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},GS,Ps=!0,dd="[DecimalError] ",ph=dd+"Invalid argument: ",WS=dd+"Exponent out of range: ",up=Math.floor,eh=Math.pow,DK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,yc,so=1e7,hs=7,jF=9007199254740991,F1=up(jF/hs),Ir={};Ir.absoluteValue=Ir.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ir.comparedTo=Ir.cmp=function(e){var t,r,a,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(a=i.d.length,s=e.d.length,t=0,r=a<s?a:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return a===s?0:a>s^i.s<0?1:-1};Ir.decimalPlaces=Ir.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*hs;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ir.dividedBy=Ir.div=function(e){return jf(this,new this.constructor(e))};Ir.dividedToIntegerBy=Ir.idiv=function(e){var t=this,r=t.constructor;return ts(jf(t,new r(e),0,1),r.precision)};Ir.equals=Ir.eq=function(e){return!this.cmp(e)};Ir.exponent=function(){return Ci(this)};Ir.greaterThan=Ir.gt=function(e){return this.cmp(e)>0};Ir.greaterThanOrEqualTo=Ir.gte=function(e){return this.cmp(e)>=0};Ir.isInteger=Ir.isint=function(){return this.e>this.d.length-2};Ir.isNegative=Ir.isneg=function(){return this.s<0};Ir.isPositive=Ir.ispos=function(){return this.s>0};Ir.isZero=function(){return this.s===0};Ir.lessThan=Ir.lt=function(e){return this.cmp(e)<0};Ir.lessThanOrEqualTo=Ir.lte=function(e){return this.cmp(e)<1};Ir.logarithm=Ir.log=function(e){var t,r=this,a=r.constructor,s=a.precision,i=s+5;if(e===void 0)e=new a(10);else if(e=new a(e),e.s<1||e.eq(yc))throw Error(dd+"NaN");if(r.s<1)throw Error(dd+(r.s?"NaN":"-Infinity"));return r.eq(yc)?new a(0):(Ps=!1,t=jf(Ox(r,i),Ox(e,i),i),Ps=!0,ts(t,s))};Ir.minus=Ir.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?_F(t,e):kF(t,(e.s=-e.s,e))};Ir.modulo=Ir.mod=function(e){var t,r=this,a=r.constructor,s=a.precision;if(e=new a(e),!e.s)throw Error(dd+"NaN");return r.s?(Ps=!1,t=jf(r,e,0,1).times(e),Ps=!0,r.minus(t)):ts(new a(r),s)};Ir.naturalExponential=Ir.exp=function(){return SF(this)};Ir.naturalLogarithm=Ir.ln=function(){return Ox(this)};Ir.negated=Ir.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ir.plus=Ir.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?kF(t,e):_F(t,(e.s=-e.s,e))};Ir.precision=Ir.sd=function(e){var t,r,a,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(ph+e);if(t=Ci(s)+1,a=s.d.length-1,r=a*hs+1,a=s.d[a],a){for(;a%10==0;a/=10)r--;for(a=s.d[0];a>=10;a/=10)r++}return e&&t>r?t:r};Ir.squareRoot=Ir.sqrt=function(){var e,t,r,a,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(dd+"NaN")}for(e=Ci(l),Ps=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Au(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=up((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),a=new c(t)):a=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=a,a=i.plus(jf(l,i,o+2)).times(.5),Au(i.d).slice(0,o)===(t=Au(a.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(ts(i,r+1,0),i.times(i).eq(l)){a=i;break}}else if(t!="9999")break;o+=4}return Ps=!0,ts(a,r)};Ir.times=Ir.mul=function(e){var t,r,a,s,i,o,l,c,d,u=this,f=u.constructor,p=u.d,m=(e=new f(e)).d;if(!u.s||!e.s)return new f(0);for(e.s*=u.s,r=u.e+e.e,c=p.length,d=m.length,c<d&&(i=p,p=m,m=i,o=c,c=d,d=o),i=[],o=c+d,a=o;a--;)i.push(0);for(a=d;--a>=0;){for(t=0,s=c+a;s>a;)l=i[s]+m[a]*p[s-a-1]+t,i[s--]=l%so|0,t=l/so|0;i[s]=(i[s]+t)%so|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,Ps?ts(e,f.precision):e};Ir.toDecimalPlaces=Ir.todp=function(e,t){var r=this,a=r.constructor;return r=new a(r),e===void 0?r:(Ru(e,0,dp),t===void 0?t=a.rounding:Ru(t,0,8),ts(r,e+Ci(r)+1,t))};Ir.toExponential=function(e,t){var r,a=this,s=a.constructor;return e===void 0?r=kh(a,!0):(Ru(e,0,dp),t===void 0?t=s.rounding:Ru(t,0,8),a=ts(new s(a),e+1,t),r=kh(a,!0,e+1)),r};Ir.toFixed=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?kh(s):(Ru(e,0,dp),t===void 0?t=i.rounding:Ru(t,0,8),a=ts(new i(s),e+Ci(s)+1,t),r=kh(a.abs(),!1,e+Ci(a)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Ir.toInteger=Ir.toint=function(){var e=this,t=e.constructor;return ts(new t(e),Ci(e)+1,t.rounding)};Ir.toNumber=function(){return+this};Ir.toPower=Ir.pow=function(e){var t,r,a,s,i,o,l=this,c=l.constructor,d=12,u=+(e=new c(e));if(!e.s)return new c(yc);if(l=new c(l),!l.s){if(e.s<1)throw Error(dd+"Infinity");return l}if(l.eq(yc))return l;if(a=c.precision,e.eq(yc))return ts(l,a);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=u<0?-u:u)<=jF){for(s=new c(yc),t=Math.ceil(a/hs+4),Ps=!1;r%2&&(s=s.times(l),iO(s.d,t)),r=up(r/2),r!==0;)l=l.times(l),iO(l.d,t);return Ps=!0,e.s<0?new c(yc).div(s):ts(s,a)}}else if(i<0)throw Error(dd+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,Ps=!1,s=e.times(Ox(l,a+d)),Ps=!0,s=SF(s),s.s=i,s};Ir.toPrecision=function(e,t){var r,a,s=this,i=s.constructor;return e===void 0?(r=Ci(s),a=kh(s,r<=i.toExpNeg||r>=i.toExpPos)):(Ru(e,1,dp),t===void 0?t=i.rounding:Ru(t,0,8),s=ts(new i(s),e,t),r=Ci(s),a=kh(s,e<=r||r<=i.toExpNeg,e)),a};Ir.toSignificantDigits=Ir.tosd=function(e,t){var r=this,a=r.constructor;return e===void 0?(e=a.precision,t=a.rounding):(Ru(e,1,dp),t===void 0?t=a.rounding:Ru(t,0,8)),ts(new a(r),e,t)};Ir.toString=Ir.valueOf=Ir.val=Ir.toJSON=Ir[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ci(e),r=e.constructor;return kh(e,t<=r.toExpNeg||t>=r.toExpPos)};function kF(e,t){var r,a,s,i,o,l,c,d,u=e.constructor,f=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),Ps?ts(t,f):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(a=c,i=-i,l=d.length):(a=d,s=o,l=c.length),o=Math.ceil(f/hs),l=o>l?o+1:l+1,i>l&&(i=l,a.length=1),a.reverse();i--;)a.push(0);a.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,a=d,d=c,c=a),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/so|0,c[i]%=so;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,Ps?ts(t,f):t}function Ru(e,t,r){if(e!==~~e||e<t||e>r)throw Error(ph+e)}function Au(e){var t,r,a,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)a=e[t]+"",r=hs-a.length,r&&(i+=o0(r)),i+=a;o=e[t],a=o+"",r=hs-a.length,r&&(i+=o0(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var jf=(function(){function e(a,s){var i,o=0,l=a.length;for(a=a.slice();l--;)i=a[l]*s+o,a[l]=i%so|0,o=i/so|0;return o&&a.unshift(o),a}function t(a,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(a[l]!=s[l]){c=a[l]>s[l]?1:-1;break}return c}function r(a,s,i){for(var o=0;i--;)a[i]-=o,o=a[i]<s[i]?1:0,a[i]=o*so+a[i]-s[i];for(;!a[0]&&a.length>1;)a.shift()}return function(a,s,i,o){var l,c,d,u,f,p,m,b,v,g,w,y,j,N,S,E,A,P,I=a.constructor,B=a.s==s.s?1:-1,T=a.d,_=s.d;if(!a.s)return new I(a);if(!s.s)throw Error(dd+"Division by zero");for(c=a.e-s.e,A=_.length,S=T.length,m=new I(B),b=m.d=[],d=0;_[d]==(T[d]||0);)++d;if(_[d]>(T[d]||0)&&--c,i==null?y=i=I.precision:o?y=i+(Ci(a)-Ci(s))+1:y=i,y<0)return new I(0);if(y=y/hs+2|0,d=0,A==1)for(u=0,_=_[0],y++;(d<S||u)&&y--;d++)j=u*so+(T[d]||0),b[d]=j/_|0,u=j%_|0;else{for(u=so/(_[0]+1)|0,u>1&&(_=e(_,u),T=e(T,u),A=_.length,S=T.length),N=A,v=T.slice(0,A),g=v.length;g<A;)v[g++]=0;P=_.slice(),P.unshift(0),E=_[0],_[1]>=so/2&&++E;do u=0,l=t(_,v,A,g),l<0?(w=v[0],A!=g&&(w=w*so+(v[1]||0)),u=w/E|0,u>1?(u>=so&&(u=so-1),f=e(_,u),p=f.length,g=v.length,l=t(f,v,p,g),l==1&&(u--,r(f,A<p?P:_,p))):(u==0&&(l=u=1),f=_.slice()),p=f.length,p<g&&f.unshift(0),r(v,f,g),l==-1&&(g=v.length,l=t(_,v,A,g),l<1&&(u++,r(v,A<g?P:_,g))),g=v.length):l===0&&(u++,v=[0]),b[d++]=u,l&&v[0]?v[g++]=T[N]||0:(v=[T[N]],g=1);while((N++<S||v[0]!==void 0)&&y--)}return b[0]||b.shift(),m.e=c,ts(m,o?i+Ci(m)+1:i)}})();function SF(e,t){var r,a,s,i,o,l,c=0,d=0,u=e.constructor,f=u.precision;if(Ci(e)>16)throw Error(WS+Ci(e));if(!e.s)return new u(yc);for(Ps=!1,l=f,o=new u(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(a=Math.log(eh(2,d))/Math.LN10*2+5|0,l+=a,r=s=i=new u(yc),u.precision=l;;){if(s=ts(s.times(e),l),r=r.times(++c),o=i.plus(jf(s,r,l)),Au(o.d).slice(0,l)===Au(i.d).slice(0,l)){for(;d--;)i=ts(i.times(i),l);return u.precision=f,t==null?(Ps=!0,ts(i,f)):i}i=o}}function Ci(e){for(var t=e.e*hs,r=e.d[0];r>=10;r/=10)t++;return t}function F5(e,t,r){if(t>e.LN10.sd())throw Ps=!0,r&&(e.precision=r),Error(dd+"LN10 precision limit exceeded");return ts(new e(e.LN10),t)}function o0(e){for(var t="";e--;)t+="0";return t}function Ox(e,t){var r,a,s,i,o,l,c,d,u,f=1,p=10,m=e,b=m.d,v=m.constructor,g=v.precision;if(m.s<1)throw Error(dd+(m.s?"NaN":"-Infinity"));if(m.eq(yc))return new v(0);if(t==null?(Ps=!1,d=g):d=t,m.eq(10))return t==null&&(Ps=!0),F5(v,d);if(d+=p,v.precision=d,r=Au(b),a=r.charAt(0),i=Ci(m),Math.abs(i)<15e14){for(;a<7&&a!=1||a==1&&r.charAt(1)>3;)m=m.times(e),r=Au(m.d),a=r.charAt(0),f++;i=Ci(m),a>1?(m=new v("0."+r),i++):m=new v(a+"."+r.slice(1))}else return c=F5(v,d+2,g).times(i+""),m=Ox(new v(a+"."+r.slice(1)),d-p).plus(c),v.precision=g,t==null?(Ps=!0,ts(m,g)):m;for(l=o=m=jf(m.minus(yc),m.plus(yc),d),u=ts(m.times(m),d),s=3;;){if(o=ts(o.times(u),d),c=l.plus(jf(o,new v(s),d)),Au(c.d).slice(0,d)===Au(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(F5(v,d+2,g).times(i+""))),l=jf(l,new v(f),d),v.precision=g,t==null?(Ps=!0,ts(l,g)):l;l=c,s+=2}}function sO(e,t){var r,a,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(a=t.search(/e/i))>0?(r<0&&(r=a),r+=+t.slice(a+1),t=t.substring(0,a)):r<0&&(r=t.length),a=0;t.charCodeAt(a)===48;)++a;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(a,s),t){if(s-=a,r=r-a-1,e.e=up(r/hs),e.d=[],a=(r+1)%hs,r<0&&(a+=hs),a<s){for(a&&e.d.push(+t.slice(0,a)),s-=hs;a<s;)e.d.push(+t.slice(a,a+=hs));t=t.slice(a),a=hs-t.length}else a-=s;for(;a--;)t+="0";if(e.d.push(+t),Ps&&(e.e>F1||e.e<-F1))throw Error(WS+r)}else e.s=0,e.e=0,e.d=[0];return e}function ts(e,t,r){var a,s,i,o,l,c,d,u,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(a=t-o,a<0)a+=hs,s=t,d=f[u=0];else{if(u=Math.ceil((a+1)/hs),i=f.length,u>=i)return e;for(d=i=f[u],o=1;i>=10;i/=10)o++;a%=hs,s=a-hs+o}if(r!==void 0&&(i=eh(10,o-s-1),l=d/i%10|0,c=t<0||f[u+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(a>0?s>0?d/eh(10,o-s):0:f[u-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=Ci(e),f.length=1,t=t-i-1,f[0]=eh(10,(hs-t%hs)%hs),e.e=up(-t/hs)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(a==0?(f.length=u,i=1,u--):(f.length=u+1,i=eh(10,hs-a),f[u]=s>0?(d/eh(10,o-s)%eh(10,s)|0)*i:0),c)for(;;)if(u==0){(f[0]+=i)==so&&(f[0]=1,++e.e);break}else{if(f[u]+=i,f[u]!=so)break;f[u--]=0,i=1}for(a=f.length;f[--a]===0;)f.pop();if(Ps&&(e.e>F1||e.e<-F1))throw Error(WS+Ci(e));return e}function _F(e,t){var r,a,s,i,o,l,c,d,u,f,p=e.constructor,m=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),Ps?ts(t,m):t;if(c=e.d,f=t.d,a=t.e,d=e.e,c=c.slice(),o=d-a,o){for(u=o<0,u?(r=c,o=-o,l=f.length):(r=f,a=d,l=c.length),s=Math.max(Math.ceil(m/hs),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=f.length,u=s<l,u&&(l=s),s=0;s<l;s++)if(c[s]!=f[s]){u=c[s]<f[s];break}o=0}for(u&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,s=f.length-l;s>0;--s)c[l++]=0;for(s=f.length;s>o;){if(c[--s]<f[s]){for(i=s;i&&c[--i]===0;)c[i]=so-1;--c[i],c[s]+=so}c[s]-=f[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--a;return c[0]?(t.d=c,t.e=a,Ps?ts(t,m):t):new p(0)}function kh(e,t,r){var a,s=Ci(e),i=Au(e.d),o=i.length;return t?(r&&(a=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+o0(a):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+o0(-s-1)+i,r&&(a=r-o)>0&&(i+=o0(a))):s>=o?(i+=o0(s+1-o),r&&(a=r-s-1)>0&&(i=i+"."+o0(a))):((a=s+1)<o&&(i=i.slice(0,a)+"."+i.slice(a)),r&&(a=r-o)>0&&(s+1===o&&(i+="."),i+=o0(a))),e.s<0?"-"+i:i}function iO(e,t){if(e.length>t)return e.length=t,!0}function CF(e){var t,r,a;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(ph+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return sO(o,i.toString())}else if(typeof i!="string")throw Error(ph+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,DK.test(i))sO(o,i);else throw Error(ph+i)}if(s.prototype=Ir,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=CF,s.config=s.set=LK,e===void 0&&(e={}),e)for(a=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<a.length;)e.hasOwnProperty(r=a[t++])||(e[r]=this[r]);return s.config(e),s}function LK(e){if(!e||typeof e!="object")throw Error(dd+"Object expected");var t,r,a,s=["precision",1,dp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((a=e[r=s[t]])!==void 0)if(up(a)===a&&a>=s[t+1]&&a<=s[t+2])this[r]=a;else throw Error(ph+r+": "+a);if((a=e[r="LN10"])!==void 0)if(a==Math.LN10)this[r]=new this(a);else throw Error(ph+r+": "+a);return this}var GS=CF(IK);yc=new GS(1);const Ha=GS;function FK(e){return UK(e)||BK(e)||RK(e)||MK()}function MK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RK(e,t){if(e){if(typeof e=="string")return C4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C4(e,t)}}function BK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function UK(e){if(Array.isArray(e))return C4(e)}function C4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var qK=function(t){return t},AF={},EF=function(t){return t===AF},oO=function(t){return function r(){return arguments.length===0||arguments.length===1&&EF(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},$K=function e(t,r){return t===1?r:oO(function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==AF}).length;return o>=t?r.apply(void 0,s):e(t-o,oO(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var u=s.map(function(f){return EF(f)?c.shift():f});return r.apply(void 0,FK(u).concat(c))}))})},ty=function(t){return $K(t.length,t)},A4=function(t,r){for(var a=[],s=t;s<r;++s)a[s-t]=s;return a},zK=ty(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),HK=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];if(!r.length)return qK;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},E4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},TF=function(t){var r=null,a=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,a=t.apply(void 0,i)),a}};function WK(e){var t;return e===0?t=1:t=Math.floor(new Ha(e).abs().log(10).toNumber())+1,t}function GK(e,t,r){for(var a=new Ha(e),s=0,i=[];a.lt(t)&&s<1e5;)i.push(a.toNumber()),a=a.add(r),s++;return i}var VK=ty(function(e,t,r){var a=+e,s=+t;return a+r*(s-a)}),KK=ty(function(e,t,r){var a=t-+e;return a=a||1/0,(r-e)/a}),XK=ty(function(e,t,r){var a=t-+e;return a=a||1/0,Math.max(0,Math.min(1,(r-e)/a))});const ry={rangeStep:GK,getDigitCount:WK,interpolateNumber:VK,uninterpolateNumber:KK,uninterpolateTruncation:XK};function T4(e){return JK(e)||QK(e)||OF(e)||YK()}function YK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function QK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function JK(e){if(Array.isArray(e))return O4(e)}function Px(e,t){return tX(e)||eX(e,t)||OF(e,t)||ZK()}function ZK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OF(e,t){if(e){if(typeof e=="string")return O4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return O4(e,t)}}function O4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function eX(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],a=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(a=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));a=!0);}catch(c){s=!0,i=c}finally{try{!a&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function tX(e){if(Array.isArray(e))return e}function PF(e){var t=Px(e,2),r=t[0],a=t[1],s=r,i=a;return r>a&&(s=a,i=r),[s,i]}function IF(e,t,r){if(e.lte(0))return new Ha(0);var a=ry.getDigitCount(e.toNumber()),s=new Ha(10).pow(a),i=e.div(s),o=a!==1?.05:.1,l=new Ha(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new Ha(Math.ceil(c))}function rX(e,t,r){var a=1,s=new Ha(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(a=new Ha(10).pow(ry.getDigitCount(e)-1),s=new Ha(Math.floor(s.div(a).toNumber())).mul(a)):i>1&&(s=new Ha(Math.floor(e)))}else e===0?s=new Ha(Math.floor((t-1)/2)):r||(s=new Ha(Math.floor(e)));var o=Math.floor((t-1)/2),l=HK(zK(function(c){return s.add(new Ha(c-o).mul(a)).toNumber()}),A4);return l(0,t)}function DF(e,t,r,a){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ha(0),tickMin:new Ha(0),tickMax:new Ha(0)};var i=IF(new Ha(t).sub(e).div(r-1),a,s),o;e<=0&&t>=0?o=new Ha(0):(o=new Ha(e).add(t).div(2),o=o.sub(new Ha(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Ha(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?DF(e,t,r,a,s+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new Ha(l).mul(i)),tickMax:o.add(new Ha(c).mul(i))})}function nX(e){var t=Px(e,2),r=t[0],a=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=PF([r,a]),c=Px(l,2),d=c[0],u=c[1];if(d===-1/0||u===1/0){var f=u===1/0?[d].concat(T4(A4(0,s-1).map(function(){return 1/0}))):[].concat(T4(A4(0,s-1).map(function(){return-1/0})),[u]);return r>a?E4(f):f}if(d===u)return rX(d,s,i);var p=DF(d,u,o,i),m=p.step,b=p.tickMin,v=p.tickMax,g=ry.rangeStep(b,v.add(new Ha(.1).mul(m)),m);return r>a?E4(g):g}function aX(e,t){var r=Px(e,2),a=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=PF([a,s]),l=Px(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[a,s];if(c===d)return[c];var u=Math.max(t,2),f=IF(new Ha(d).sub(c).div(u-1),i,0),p=[].concat(T4(ry.rangeStep(new Ha(c),new Ha(d).sub(new Ha(.99).mul(f)),f)),[d]);return a>s?E4(p):p}var sX=TF(nX),iX=TF(aX),oX="Invariant failed";function Sh(e,t){throw new Error(oX)}var lX=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Bm(e){"@babel/helpers - typeof";return Bm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bm(e)}function M1(){return M1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},M1.apply(this,arguments)}function cX(e,t){return hX(e)||fX(e,t)||uX(e,t)||dX()}function dX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function uX(e,t){if(e){if(typeof e=="string")return lO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return lO(e,t)}}function lO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function fX(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function hX(e){if(Array.isArray(e))return e}function mX(e,t){if(e==null)return{};var r=pX(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function pX(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function xX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gX(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,MF(a.key),a)}}function vX(e,t,r){return t&&gX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bX(e,t,r){return t=R1(t),yX(e,LF()?Reflect.construct(t,r||[],R1(e).constructor):t.apply(e,r))}function yX(e,t){if(t&&(Bm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wX(e)}function wX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LF=function(){return!!e})()}function R1(e){return R1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},R1(e)}function NX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P4(e,t)}function P4(e,t){return P4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},P4(e,t)}function FF(e,t,r){return t=MF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MF(e){var t=jX(e,"string");return Bm(t)=="symbol"?t:t+""}function jX(e,t){if(Bm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ny=(function(e){function t(){return xX(this,t),bX(this,t,arguments)}return NX(t,e),vX(t,[{key:"render",value:function(){var a=this.props,s=a.offset,i=a.layout,o=a.width,l=a.dataKey,c=a.data,d=a.dataPointFormatter,u=a.xAxis,f=a.yAxis,p=mX(a,lX),m=Gn(p,!1);this.props.direction==="x"&&u.type!=="number"&&Sh();var b=c.map(function(v){var g=d(v,l),w=g.x,y=g.y,j=g.value,N=g.errorVal;if(!N)return null;var S=[],E,A;if(Array.isArray(N)){var P=cX(N,2);E=P[0],A=P[1]}else E=A=N;if(i==="vertical"){var I=u.scale,B=y+s,T=B+o,_=B-o,R=I(j-E),z=I(j+A);S.push({x1:z,y1:T,x2:z,y2:_}),S.push({x1:R,y1:B,x2:z,y2:B}),S.push({x1:R,y1:T,x2:R,y2:_})}else if(i==="horizontal"){var H=f.scale,Y=w+s,J=Y-o,re=Y+o,X=H(j-E),te=H(j+A);S.push({x1:J,y1:te,x2:re,y2:te}),S.push({x1:Y,y1:X,x2:Y,y2:te}),S.push({x1:J,y1:X,x2:re,y2:X})}return ft.createElement(Rs,M1({className:"recharts-errorBar",key:"bar-".concat(S.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},m),S.map(function(W){return ft.createElement("line",M1({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return ft.createElement(Rs,{className:"recharts-errorBars"},b)}}])})(ft.Component);FF(ny,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});FF(ny,"displayName","ErrorBar");function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}function cO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Y0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cO(Object(r),!0).forEach(function(a){kX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function kX(e,t,r){return t=SX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SX(e){var t=_X(e,"string");return Ix(t)=="symbol"?t:t+""}function _X(e,t){if(Ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ix(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var RF=function(t){var r=t.children,a=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=gc(r,ym);if(!o)return null;var l=ym.defaultProps,c=l!==void 0?Y0(Y0({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(a||[]).reduce(function(u,f){var p=f.item,m=f.props,b=m.sectors||m.data||[];return u.concat(b.map(function(v){return{type:o.props.iconType||p.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):d=(a||[]).map(function(u){var f=u.item,p=f.type.defaultProps,m=p!==void 0?Y0(Y0({},p),f.props):{},b=m.dataKey,v=m.name,g=m.legendType,w=m.hide;return{inactive:w,dataKey:b,type:c.iconType||g||"square",color:VS(f),value:v||b,payload:m}}),Y0(Y0(Y0({},c),ym.getWithHeight(o,s)),{},{payload:d,item:o})};function Dx(e){"@babel/helpers - typeof";return Dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dx(e)}function dO(e){return TX(e)||EX(e)||AX(e)||CX()}function CX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AX(e,t){if(e){if(typeof e=="string")return I4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return I4(e,t)}}function EX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TX(e){if(Array.isArray(e))return I4(e)}function I4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function uO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(r),!0).forEach(function(a){Nm(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nm(e,t,r){return t=OX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OX(e){var t=PX(e,"string");return Dx(t)=="symbol"?t:t+""}function PX(e,t){if(Dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Dx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Sc(e,t,r){return Vn(e)||Vn(t)?r:$i(t)?od(e,t,r):Dn(t)?t(e):r}function ax(e,t,r,a){var s=OK(e,function(l){return Sc(l,t)});if(r==="number"){var i=s.filter(function(l){return ur(l)||parseFloat(l)});return i.length?[ey(i),u0(i)]:[1/0,-1/0]}var o=a?s.filter(function(l){return!Vn(l)}):s;return o.map(function(l){return $i(l)||l instanceof Date?l:""})}var IX=function(t){var r,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=a?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var u=d>0?s[d-1].coordinate:s[l-1].coordinate,f=s[d].coordinate,p=d>=l-1?s[0].coordinate:s[d+1].coordinate,m=void 0;if(Gd(f-u)!==Gd(p-f)){var b=[];if(Gd(p-f)===Gd(c[1]-c[0])){m=p;var v=f+c[1]-c[0];b[0]=Math.min(v,(v+u)/2),b[1]=Math.max(v,(v+u)/2)}else{m=u;var g=p+c[1]-c[0];b[0]=Math.min(f,(g+f)/2),b[1]=Math.max(f,(g+f)/2)}var w=[Math.min(f,(m+f)/2),Math.max(f,(m+f)/2)];if(t>w[0]&&t<=w[1]||t>=b[0]&&t<=b[1]){o=s[d].index;break}}else{var y=Math.min(u,p),j=Math.max(u,p);if(t>(y+f)/2&&t<=(j+f)/2){o=s[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N>0&&N<l-1&&t>(a[N].coordinate+a[N-1].coordinate)/2&&t<=(a[N].coordinate+a[N+1].coordinate)/2||N===l-1&&t>(a[N].coordinate+a[N-1].coordinate)/2){o=a[N].index;break}return o},VS=function(t){var r,a=t,s=a.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Vs(Vs({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},DX=function(t){var r=t.barSize,a=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var u=i[l[c]].stackGroups,f=Object.keys(u),p=0,m=f.length;p<m;p++){var b=u[f[p]],v=b.items,g=b.cateAxisId,w=v.filter(function(A){return wf(A.type).indexOf("Bar")>=0});if(w&&w.length){var y=w[0].type.defaultProps,j=y!==void 0?Vs(Vs({},y),w[0].props):w[0].props,N=j.barSize,S=j[g];o[S]||(o[S]=[]);var E=Vn(N)?r:N;o[S].push({item:w[0],stackList:w.slice(1),barSize:Vn(E)?void 0:jh(E,a,0)})}}return o},LX=function(t){var r=t.barGap,a=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=jh(r,s,0,!0),u,f=[];if(o[0].barSize===+o[0].barSize){var p=!1,m=s/c,b=o.reduce(function(N,S){return N+S.barSize||0},0);b+=(c-1)*d,b>=s&&(b-=(c-1)*d,d=0),b>=s&&m>0&&(p=!0,m*=.9,b=c*m);var v=(s-b)/2>>0,g={offset:v-d,size:0};u=o.reduce(function(N,S){var E={item:S.item,position:{offset:g.offset+g.size+d,size:p?m:S.barSize}},A=[].concat(dO(N),[E]);return g=A[A.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){A.push({item:P,position:g})}),A},f)}else{var w=jh(a,s,0,!0);s-2*w-(c-1)*d<=0&&(d=0);var y=(s-2*w-(c-1)*d)/c;y>1&&(y>>=0);var j=l===+l?Math.min(y,l):y;u=o.reduce(function(N,S,E){var A=[].concat(dO(N),[{item:S.item,position:{offset:w+(y+d)*E+(y-j)/2,size:j}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(P){A.push({item:P,position:A[A.length-1].position})}),A},f)}return u},FX=function(t,r,a,s){var i=a.children,o=a.width,l=a.margin,c=o-(l.left||0)-(l.right||0),d=RF({children:i,legendWidth:c});if(d){var u=s||{},f=u.width,p=u.height,m=d.align,b=d.verticalAlign,v=d.layout;if((v==="vertical"||v==="horizontal"&&b==="middle")&&m!=="center"&&ur(t[m]))return Vs(Vs({},t),{},Nm({},m,t[m]+(f||0)));if((v==="horizontal"||v==="vertical"&&m==="center")&&b!=="middle"&&ur(t[b]))return Vs(Vs({},t),{},Nm({},b,t[b]+(p||0)))}return t},MX=function(t,r,a){return Vn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||a==="x"?r==="xAxis":a==="y"?r==="yAxis":!0},BF=function(t,r,a,s,i){var o=r.props.children,l=Jd(o,ny).filter(function(d){return MX(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,u){var f=Sc(u,a);if(Vn(f))return d;var p=Array.isArray(f)?[ey(f),u0(f)]:[f,f],m=c.reduce(function(b,v){var g=Sc(u,v,0),w=p[0]-Math.abs(Array.isArray(g)?g[0]:g),y=p[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(w,b[0]),Math.max(y,b[1])]},[1/0,-1/0]);return[Math.min(m[0],d[0]),Math.max(m[1],d[1])]},[1/0,-1/0])}return null},RX=function(t,r,a,s,i){var o=r.map(function(l){return BF(t,l,a,i,s)}).filter(function(l){return!Vn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},UF=function(t,r,a,s,i){var o=r.map(function(c){var d=c.props.dataKey;return a==="number"&&d&&BF(t,c,d,s)||ax(t,d,a,i)});if(a==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var u=0,f=d.length;u<f;u++)l[d[u]]||(l[d[u]]=!0,c.push(d[u]));return c},[])},qF=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},$F=function(t,r,a,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===a&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(a),l},pf=function(t,r,a){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||a)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&l?.length>=2?Gd(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var u=(t.ticks||t.niceTicks).map(function(f){var p=i?i.indexOf(f):f;return{coordinate:s(p)+d,value:f,offset:d}});return u.filter(function(f){return!ip(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,p){return{coordinate:s(f)+d,value:f,index:p,offset:d}}):s.ticks&&!a?s.ticks(t.tickCount).map(function(f){return{coordinate:s(f)+d,value:f,offset:d}}):s.domain().map(function(f,p){return{coordinate:s(f)+d,value:i?i[f]:f,index:p,offset:d}})},M5=new WeakMap,xv=function(t,r){if(typeof r!="function")return t;M5.has(t)||M5.set(t,new WeakMap);var a=M5.get(t);if(a.has(r))return a.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return a.set(r,s),s},BX=function(t,r,a){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Sx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:P1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!a)?{scale:nx(),realScaleType:"point"}:i==="category"?{scale:Sx(),realScaleType:"band"}:{scale:P1(),realScaleType:"linear"};if(Nh(s)){var c="scale".concat(qb(s));return{scale:(YT[c]||nx)(),realScaleType:YT[c]?c:"point"}}return Dn(s)?{scale:s}:{scale:nx(),realScaleType:"point"}},fO=1e-4,UX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var a=r.length,s=t.range(),i=Math.min(s[0],s[1])-fO,o=Math.max(s[0],s[1])+fO,l=t(r[0]),c=t(r[a-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[a-1]])}},qX=function(t,r){if(!t)return null;for(var a=0,s=t.length;a<s;a++)if(t[a].item===r)return t[a].position;return null},$X=function(t,r){if(!r||r.length!==2||!ur(r[0])||!ur(r[1]))return t;var a=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!ur(t[0])||t[0]<a)&&(i[0]=a),(!ur(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<a&&(i[1]=a),i},zX=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0,l=0;l<r;++l){var c=ip(t[l][a][1])?t[l][a][0]:t[l][a][1];c>=0?(t[l][a][0]=i,t[l][a][1]=i+c,i=t[l][a][1]):(t[l][a][0]=o,t[l][a][1]=o+c,o=t[l][a][1])}},HX=function(t){var r=t.length;if(!(r<=0))for(var a=0,s=t[0].length;a<s;++a)for(var i=0,o=0;o<r;++o){var l=ip(t[o][a][1])?t[o][a][0]:t[o][a][1];l>=0?(t[o][a][0]=i,t[o][a][1]=i+l,i=t[o][a][1]):(t[o][a][0]=0,t[o][a][1]=0)}},WX={sign:zX,expand:A$,none:Om,silhouette:E$,wiggle:T$,positive:HX},GX=function(t,r,a){var s=r.map(function(l){return l.props.dataKey}),i=WX[a],o=C$().keys(s).value(function(l,c){return+Sc(l,c,0)}).order(c4).offset(i);return o(t)},VX=function(t,r,a,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(f,p){var m,b=(m=p.type)!==null&&m!==void 0&&m.defaultProps?Vs(Vs({},p.type.defaultProps),p.props):p.props,v=b.stackId,g=b.hide;if(g)return f;var w=b[a],y=f[w]||{hasStack:!1,stackGroups:{}};if($i(v)){var j=y.stackGroups[v]||{numericAxisId:a,cateAxisId:s,items:[]};j.items.push(p),y.hasStack=!0,y.stackGroups[v]=j}else y.stackGroups[vg("_stackId_")]={numericAxisId:a,cateAxisId:s,items:[p]};return Vs(Vs({},f),{},Nm({},w,y))},c),u={};return Object.keys(d).reduce(function(f,p){var m=d[p];if(m.hasStack){var b={};m.stackGroups=Object.keys(m.stackGroups).reduce(function(v,g){var w=m.stackGroups[g];return Vs(Vs({},v),{},Nm({},g,{numericAxisId:a,cateAxisId:s,items:w.items,stackedData:GX(t,w.items,i)}))},b)}return Vs(Vs({},f),{},Nm({},p,m))},u)},KX=function(t,r){var a=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=a||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var u=sX(d,i,l);return t.domain([ey(u),u0(u)]),{niceTicks:u}}if(i&&s==="number"){var f=t.domain(),p=iX(f,i,l);return{niceTicks:p}}return null};function hO(e){var t=e.axis,r=e.ticks,a=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Vn(s[t.dataKey])){var l=u1(r,"value",s[t.dataKey]);if(l)return l.coordinate+a/2}return r[i]?r[i].coordinate+a/2:null}var c=Sc(s,Vn(o)?t.dataKey:o);return Vn(c)?null:t.scale(c)}var mO=function(t){var r=t.axis,a=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return a[l]?a[l].coordinate+s:null;var c=Sc(o,r.dataKey,r.domain[l]);return Vn(c)?null:r.scale(c)-i/2+s},XX=function(t){var r=t.numericAxis,a=r.scale.domain();if(r.type==="number"){var s=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return s<=0&&i>=0?0:i<0?i:s}return a[0]},YX=function(t,r){var a,s=(a=t.type)!==null&&a!==void 0&&a.defaultProps?Vs(Vs({},t.type.defaultProps),t.props):t.props,i=s.stackId;if($i(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},QX=function(t){return t.reduce(function(r,a){return[ey(a.concat([r[0]]).filter(ur)),u0(a.concat([r[1]]).filter(ur))]},[1/0,-1/0])},zF=function(t,r,a){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,u){var f=QX(u.slice(r,a+1));return[Math.min(d[0],f[0]),Math.max(d[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},pO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,D4=function(t,r,a){if(Dn(t))return t(r,a);if(!Array.isArray(t))return r;var s=[];if(ur(t[0]))s[0]=a?t[0]:Math.min(t[0],r[0]);else if(pO.test(t[0])){var i=+pO.exec(t[0])[1];s[0]=r[0]-i}else Dn(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(ur(t[1]))s[1]=a?t[1]:Math.max(t[1],r[1]);else if(xO.test(t[1])){var o=+xO.exec(t[1])[1];s[1]=r[1]+o}else Dn(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},B1=function(t,r,a){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!a||s>0)return s}if(t&&r&&r.length>=2){for(var i=wS(r,function(f){return f.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],u=i[l-1];o=Math.min((d.coordinate||0)-(u.coordinate||0),o)}return o===1/0?0:o}return a?void 0:0},gO=function(t,r,a){return!t||!t.length||Tx(t,od(a,"type.defaultProps.domain"))?r:t},HF=function(t,r){var a=t.type.defaultProps?Vs(Vs({},t.type.defaultProps),t.props):t.props,s=a.dataKey,i=a.name,o=a.unit,l=a.formatter,c=a.tooltipType,d=a.chartType,u=a.hide;return Vs(Vs({},Gn(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:VS(t),value:Sc(r,s),type:c,payload:r,chartType:d,hide:u})};function Lx(e){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lx(e)}function vO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function bO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vO(Object(r),!0).forEach(function(a){JX(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function JX(e,t,r){return t=ZX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZX(e){var t=eY(e,"string");return Lx(t)=="symbol"?t:t+""}function eY(e,t){if(Lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Lx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U1=Math.PI/180,tY=function(t){return t*180/Math.PI},Io=function(t,r,a,s){return{x:t+Math.cos(-U1*s)*a,y:r+Math.sin(-U1*s)*a}},rY=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(a-i,2)+Math.pow(s-o,2))},nY=function(t,r){var a=t.x,s=t.y,i=r.cx,o=r.cy,l=rY({x:a,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(a-i)/l,d=Math.acos(c);return s>o&&(d=2*Math.PI-d),{radius:l,angle:tY(d),angleInRadian:d}},aY=function(t){var r=t.startAngle,a=t.endAngle,s=Math.floor(r/360),i=Math.floor(a/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:a-o*360}},sY=function(t,r){var a=r.startAngle,s=r.endAngle,i=Math.floor(a/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},yO=function(t,r){var a=t.x,s=t.y,i=nY({x:a,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var u=aY(r),f=u.startAngle,p=u.endAngle,m=l,b;if(f<=p){for(;m>p;)m-=360;for(;m<f;)m+=360;b=m>=f&&m<=p}else{for(;m>f;)m-=360;for(;m<p;)m+=360;b=m>=p&&m<=f}return b?bO(bO({},r),{},{radius:o,angle:sY(m,r)}):null};function Fx(e){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fx(e)}var iY=["offset"];function oY(e){return uY(e)||dY(e)||cY(e)||lY()}function lY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cY(e,t){if(e){if(typeof e=="string")return L4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return L4(e,t)}}function dY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uY(e){if(Array.isArray(e))return L4(e)}function L4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function fY(e,t){if(e==null)return{};var r=hY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function hY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function wO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Mi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(r),!0).forEach(function(a){mY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function mY(e,t,r){return t=pY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pY(e){var t=xY(e,"string");return Fx(t)=="symbol"?t:t+""}function xY(e,t){if(Fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Fx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mx(){return Mx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Mx.apply(this,arguments)}var gY=function(t){var r=t.value,a=t.formatter,s=Vn(t.children)?r:t.children;return Dn(a)?a(s):s},vY=function(t,r){var a=Gd(r-t),s=Math.min(Math.abs(r-t),360);return a*s},bY=function(t,r,a){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,u=c.cy,f=c.innerRadius,p=c.outerRadius,m=c.startAngle,b=c.endAngle,v=c.clockWise,g=(f+p)/2,w=vY(m,b),y=w>=0?1:-1,j,N;s==="insideStart"?(j=m+y*o,N=v):s==="insideEnd"?(j=b-y*o,N=!v):s==="end"&&(j=b+y*o,N=v),N=w<=0?N:!N;var S=Io(d,u,g,j),E=Io(d,u,g,j+(N?1:-1)*359),A="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(N?0:1,`,
    `).concat(E.x,",").concat(E.y),P=Vn(t.id)?vg("recharts-radial-line-"):t.id;return ft.createElement("text",Mx({},a,{dominantBaseline:"central",className:fa("recharts-radial-bar-label",l)}),ft.createElement("defs",null,ft.createElement("path",{id:P,d:A})),ft.createElement("textPath",{xlinkHref:"#".concat(P)},r))},yY=function(t){var r=t.viewBox,a=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,u=i.startAngle,f=i.endAngle,p=(u+f)/2;if(s==="outside"){var m=Io(o,l,d+a,p),b=m.x,v=m.y;return{x:b,y:v,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+d)/2,w=Io(o,l,g,p),y=w.x,j=w.y;return{x:y,y:j,textAnchor:"middle",verticalAnchor:"middle"}},wY=function(t){var r=t.viewBox,a=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,u=o.height,f=u>=0?1:-1,p=f*s,m=f>0?"end":"start",b=f>0?"start":"end",v=d>=0?1:-1,g=v*s,w=v>0?"end":"start",y=v>0?"start":"end";if(i==="top"){var j={x:l+d/2,y:c-f*s,textAnchor:"middle",verticalAnchor:m};return Mi(Mi({},j),a?{height:Math.max(c-a.y,0),width:d}:{})}if(i==="bottom"){var N={x:l+d/2,y:c+u+p,textAnchor:"middle",verticalAnchor:b};return Mi(Mi({},N),a?{height:Math.max(a.y+a.height-(c+u),0),width:d}:{})}if(i==="left"){var S={x:l-g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"};return Mi(Mi({},S),a?{width:Math.max(S.x-a.x,0),height:u}:{})}if(i==="right"){var E={x:l+d+g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"};return Mi(Mi({},E),a?{width:Math.max(a.x+a.width-E.x,0),height:u}:{})}var A=a?{width:d,height:u}:{};return i==="insideLeft"?Mi({x:l+g,y:c+u/2,textAnchor:y,verticalAnchor:"middle"},A):i==="insideRight"?Mi({x:l+d-g,y:c+u/2,textAnchor:w,verticalAnchor:"middle"},A):i==="insideTop"?Mi({x:l+d/2,y:c+p,textAnchor:"middle",verticalAnchor:b},A):i==="insideBottom"?Mi({x:l+d/2,y:c+u-p,textAnchor:"middle",verticalAnchor:m},A):i==="insideTopLeft"?Mi({x:l+g,y:c+p,textAnchor:y,verticalAnchor:b},A):i==="insideTopRight"?Mi({x:l+d-g,y:c+p,textAnchor:w,verticalAnchor:b},A):i==="insideBottomLeft"?Mi({x:l+g,y:c+u-p,textAnchor:y,verticalAnchor:m},A):i==="insideBottomRight"?Mi({x:l+d-g,y:c+u-p,textAnchor:w,verticalAnchor:m},A):sp(i)&&(ur(i.x)||sh(i.x))&&(ur(i.y)||sh(i.y))?Mi({x:l+jh(i.x,d),y:c+jh(i.y,u),textAnchor:"end",verticalAnchor:"end"},A):Mi({x:l+d/2,y:c+u/2,textAnchor:"middle",verticalAnchor:"middle"},A)},NY=function(t){return"cx"in t&&ur(t.cx)};function sl(e){var t=e.offset,r=t===void 0?5:t,a=fY(e,iY),s=Mi({offset:r},a),i=s.viewBox,o=s.position,l=s.value,c=s.children,d=s.content,u=s.className,f=u===void 0?"":u,p=s.textBreakAll;if(!i||Vn(l)&&Vn(c)&&!D.isValidElement(d)&&!Dn(d))return null;if(D.isValidElement(d))return D.cloneElement(d,s);var m;if(Dn(d)){if(m=D.createElement(d,s),D.isValidElement(m))return m}else m=gY(s);var b=NY(i),v=Gn(s,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return bY(s,m,v);var g=b?yY(s):wY(s);return ft.createElement(k1,Mx({className:fa("recharts-label",f)},v,g,{breakAll:p}),m)}sl.displayName="Label";var WF=function(t){var r=t.cx,a=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,u=t.outerRadius,f=t.x,p=t.y,m=t.top,b=t.left,v=t.width,g=t.height,w=t.clockWise,y=t.labelViewBox;if(y)return y;if(ur(v)&&ur(g)){if(ur(f)&&ur(p))return{x:f,y:p,width:v,height:g};if(ur(m)&&ur(b))return{x:m,y:b,width:v,height:g}}return ur(f)&&ur(p)?{x:f,y:p,width:0,height:0}:ur(r)&&ur(a)?{cx:r,cy:a,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:u||c||l||0,clockWise:w}:t.viewBox?t.viewBox:{}},jY=function(t,r){return t?t===!0?ft.createElement(sl,{key:"label-implicit",viewBox:r}):$i(t)?ft.createElement(sl,{key:"label-implicit",viewBox:r,value:t}):D.isValidElement(t)?t.type===sl?D.cloneElement(t,{key:"label-implicit",viewBox:r}):ft.createElement(sl,{key:"label-implicit",content:t,viewBox:r}):Dn(t)?ft.createElement(sl,{key:"label-implicit",content:t,viewBox:r}):sp(t)?ft.createElement(sl,Mx({viewBox:r},t,{key:"label-implicit"})):null:null},kY=function(t,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&a&&!t.label)return null;var s=t.children,i=WF(t),o=Jd(s,sl).map(function(c,d){return D.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!a)return o;var l=jY(t.label,r||i);return[l].concat(oY(o))};sl.parseViewBox=WF;sl.renderCallByParent=kY;var R5,NO;function SY(){if(NO)return R5;NO=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return R5=e,R5}var _Y=SY();const CY=La(_Y);function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}var AY=["valueAccessor"],EY=["data","dataKey","clockWise","id","textBreakAll"];function TY(e){return DY(e)||IY(e)||PY(e)||OY()}function OY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function PY(e,t){if(e){if(typeof e=="string")return F4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return F4(e,t)}}function IY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function DY(e){if(Array.isArray(e))return F4(e)}function F4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},q1.apply(this,arguments)}function jO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function kO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jO(Object(r),!0).forEach(function(a){LY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function LY(e,t,r){return t=FY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FY(e){var t=MY(e,"string");return Rx(t)=="symbol"?t:t+""}function MY(e,t){if(Rx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Rx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function SO(e,t){if(e==null)return{};var r=RY(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function RY(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var BY=function(t){return Array.isArray(t.value)?CY(t.value):t.value};function v0(e){var t=e.valueAccessor,r=t===void 0?BY:t,a=SO(e,AY),s=a.data,i=a.dataKey,o=a.clockWise,l=a.id,c=a.textBreakAll,d=SO(a,EY);return!s||!s.length?null:ft.createElement(Rs,{className:"recharts-label-list"},s.map(function(u,f){var p=Vn(i)?r(u,f):Sc(u&&u.payload,i),m=Vn(l)?{}:{id:"".concat(l,"-").concat(f)};return ft.createElement(sl,q1({},Gn(u,!0),d,m,{parentViewBox:u.parentViewBox,value:p,textBreakAll:c,viewBox:sl.parseViewBox(Vn(o)?u:kO(kO({},u),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}v0.displayName="LabelList";function UY(e,t){return e?e===!0?ft.createElement(v0,{key:"labelList-implicit",data:t}):ft.isValidElement(e)||Dn(e)?ft.createElement(v0,{key:"labelList-implicit",data:t,content:e}):sp(e)?ft.createElement(v0,q1({data:t},e,{key:"labelList-implicit"})):null:null}function qY(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var a=e.children,s=Jd(a,v0).map(function(o,l){return D.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=UY(e.label,t);return[i].concat(TY(s))}v0.renderCallByParent=qY;function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function M4(){return M4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},M4.apply(this,arguments)}function _O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function CO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(r),!0).forEach(function(a){$Y(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_O(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function $Y(e,t,r){return t=zY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function zY(e){var t=HY(e,"string");return Bx(t)=="symbol"?t:t+""}function HY(e,t){if(Bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Bx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var WY=function(t,r){var a=Gd(r-t),s=Math.min(Math.abs(r-t),359.999);return a*s},gv=function(t){var r=t.cx,a=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,u=c*(l?1:-1)+s,f=Math.asin(c/u)/U1,p=d?i:i+o*f,m=Io(r,a,u,p),b=Io(r,a,s,p),v=d?i-o*f:i,g=Io(r,a,u*Math.cos(f*U1),v);return{center:m,circleTangency:b,lineTangency:g,theta:f}},GF=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=WY(o,l),d=o+c,u=Io(r,a,i,o),f=Io(r,a,i,d),p="M ".concat(u.x,",").concat(u.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(s>0){var m=Io(r,a,s,o),b=Io(r,a,s,d);p+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(m.x,",").concat(m.y," Z")}else p+="L ".concat(r,",").concat(a," Z");return p},GY=function(t){var r=t.cx,a=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,u=t.endAngle,f=Gd(u-d),p=gv({cx:r,cy:a,radius:i,angle:d,sign:f,cornerRadius:o,cornerIsExternal:c}),m=p.circleTangency,b=p.lineTangency,v=p.theta,g=gv({cx:r,cy:a,radius:i,angle:u,sign:-f,cornerRadius:o,cornerIsExternal:c}),w=g.circleTangency,y=g.lineTangency,j=g.theta,N=c?Math.abs(d-u):Math.abs(d-u)-v-j;if(N<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):GF({cx:r,cy:a,innerRadius:s,outerRadius:i,startAngle:d,endAngle:u});var S="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(m.x,",").concat(m.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(f<0),",").concat(w.x,",").concat(w.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(y.x,",").concat(y.y,`
  `);if(s>0){var E=gv({cx:r,cy:a,radius:s,angle:d,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=E.circleTangency,P=E.lineTangency,I=E.theta,B=gv({cx:r,cy:a,radius:s,angle:u,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=B.circleTangency,_=B.lineTangency,R=B.theta,z=c?Math.abs(d-u):Math.abs(d-u)-I-R;if(z<0&&o===0)return"".concat(S,"L").concat(r,",").concat(a,"Z");S+="L".concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(z>180),",").concat(+(f>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(P.x,",").concat(P.y,"Z")}else S+="L".concat(r,",").concat(a,"Z");return S},VY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},VF=function(t){var r=CO(CO({},VY),t),a=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,u=r.startAngle,f=r.endAngle,p=r.className;if(o<i||u===f)return null;var m=fa("recharts-sector",p),b=o-i,v=jh(l,b,0,!0),g;return v>0&&Math.abs(u-f)<360?g=GY({cx:a,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:u,endAngle:f}):g=GF({cx:a,cy:s,innerRadius:i,outerRadius:o,startAngle:u,endAngle:f}),ft.createElement("path",M4({},Gn(r,!0),{className:m,d:g,role:"img"}))};function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function R4(){return R4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},R4.apply(this,arguments)}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function EO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(a){KY(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KY(e,t,r){return t=XY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XY(e){var t=YY(e,"string");return Ux(t)=="symbol"?t:t+""}function YY(e,t){if(Ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ux(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var TO={curveBasisClosed:x$,curveBasisOpen:g$,curveBasis:p$,curveBumpX:t$,curveBumpY:r$,curveLinearClosed:v$,curveLinear:zb,curveMonotoneX:b$,curveMonotoneY:y$,curveNatural:w$,curveStep:N$,curveStepAfter:k$,curveStepBefore:j$},vv=function(t){return t.x===+t.x&&t.y===+t.y},Dp=function(t){return t.x},Lp=function(t){return t.y},QY=function(t,r){if(Dn(t))return t;var a="curve".concat(qb(t));return(a==="curveMonotone"||a==="curveBump")&&r?TO["".concat(a).concat(r==="vertical"?"Y":"X")]:TO[a]||zb},JY=function(t){var r=t.type,a=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,u=QY(a,l),f=d?i.filter(function(v){return vv(v)}):i,p;if(Array.isArray(o)){var m=d?o.filter(function(v){return vv(v)}):o,b=f.map(function(v,g){return EO(EO({},v),{},{base:m[g]})});return l==="vertical"?p=cv().y(Lp).x1(Dp).x0(function(v){return v.base.x}):p=cv().x(Dp).y1(Lp).y0(function(v){return v.base.y}),p.defined(vv).curve(u),p(b)}return l==="vertical"&&ur(o)?p=cv().y(Lp).x1(Dp).x0(o):ur(o)?p=cv().x(Dp).y1(Lp).y0(o):p=Q8().x(Dp).y(Lp),p.defined(vv).curve(u),p(f)},sx=function(t){var r=t.className,a=t.points,s=t.path,i=t.pathRef;if((!a||!a.length)&&!s)return null;var o=a&&a.length?JY(t):s;return D.createElement("path",R4({},Gn(t,!1),f1(t),{className:fa("recharts-curve",r),d:o,ref:i}))},B5={exports:{}},U5,OO;function ZY(){if(OO)return U5;OO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return U5=e,U5}var q5,PO;function eQ(){if(PO)return q5;PO=1;var e=ZY();function t(){}function r(){}return r.resetWarningCache=t,q5=function(){function a(o,l,c,d,u,f){if(f!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}a.isRequired=a;function s(){return a}var i={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:s,element:a,elementType:a,instanceOf:s,node:a,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},q5}var IO;function tQ(){return IO||(IO=1,B5.exports=eQ()()),B5.exports}var rQ=tQ();const _a=La(rQ),{getOwnPropertyNames:nQ,getOwnPropertySymbols:aQ}=Object,{hasOwnProperty:sQ}=Object.prototype;function $5(e,t){return function(a,s,i){return e(a,s,i)&&t(a,s,i)}}function bv(e){return function(r,a,s){if(!r||!a||typeof r!="object"||typeof a!="object")return e(r,a,s);const{cache:i}=s,o=i.get(r),l=i.get(a);if(o&&l)return o===a&&l===r;i.set(r,a),i.set(a,r);const c=e(r,a,s);return i.delete(r),i.delete(a),c}}function iQ(e){return e?.[Symbol.toStringTag]}function DO(e){return nQ(e).concat(aQ(e))}const oQ=Object.hasOwn||((e,t)=>sQ.call(e,t));function Bh(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const lQ="__v",cQ="__o",dQ="_owner",{getOwnPropertyDescriptor:LO,keys:FO}=Object;function uQ(e,t){return e.byteLength===t.byteLength&&$1(new Uint8Array(e),new Uint8Array(t))}function fQ(e,t,r){let a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function hQ(e,t){return e.byteLength===t.byteLength&&$1(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function mQ(e,t){return Bh(e.getTime(),t.getTime())}function pQ(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function xQ(e,t){return e===t}function MO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let u=!1,f=0;for(;(l=d.next())&&!l.done;){if(s[f]){f++;continue}const p=o.value,m=l.value;if(r.equals(p[0],m[0],c,f,e,t,r)&&r.equals(p[1],m[1],p[0],m[0],e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1;c++}return!0}const gQ=Bh;function vQ(e,t,r){const a=FO(e);let s=a.length;if(FO(t).length!==s)return!1;for(;s-- >0;)if(!KF(e,t,r,a[s]))return!1;return!0}function Fp(e,t,r){const a=DO(e);let s=a.length;if(DO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=a[s],!KF(e,t,r,i)||(o=LO(e,i),l=LO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function bQ(e,t){return Bh(e.valueOf(),t.valueOf())}function yQ(e,t){return e.source===t.source&&e.flags===t.flags}function RO(e,t,r){const a=e.size;if(a!==t.size)return!1;if(!a)return!0;const s=new Array(a),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let d=!1,u=0;for(;(l=c.next())&&!l.done;){if(!s[u]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=s[u]=!0;break}u++}if(!d)return!1}return!0}function $1(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function wQ(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function KF(e,t,r,a){return(a===dQ||a===cQ||a===lQ)&&(e.$$typeof||t.$$typeof)?!0:oQ(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}const NQ="[object ArrayBuffer]",jQ="[object Arguments]",kQ="[object Boolean]",SQ="[object DataView]",_Q="[object Date]",CQ="[object Error]",AQ="[object Map]",EQ="[object Number]",TQ="[object Object]",OQ="[object RegExp]",PQ="[object Set]",IQ="[object String]",DQ={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},LQ="[object URL]",FQ=Object.prototype.toString;function MQ({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:a,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:u,areSetsEqual:f,areTypedArraysEqual:p,areUrlsEqual:m,unknownTagComparators:b}){return function(g,w,y){if(g===w)return!0;if(g==null||w==null)return!1;const j=typeof g;if(j!==typeof w)return!1;if(j!=="object")return j==="number"?l(g,w,y):j==="function"?i(g,w,y):!1;const N=g.constructor;if(N!==w.constructor)return!1;if(N===Object)return c(g,w,y);if(Array.isArray(g))return t(g,w,y);if(N===Date)return a(g,w,y);if(N===RegExp)return u(g,w,y);if(N===Map)return o(g,w,y);if(N===Set)return f(g,w,y);const S=FQ.call(g);if(S===_Q)return a(g,w,y);if(S===OQ)return u(g,w,y);if(S===AQ)return o(g,w,y);if(S===PQ)return f(g,w,y);if(S===TQ)return typeof g.then!="function"&&typeof w.then!="function"&&c(g,w,y);if(S===LQ)return m(g,w,y);if(S===CQ)return s(g,w,y);if(S===jQ)return c(g,w,y);if(DQ[S])return p(g,w,y);if(S===NQ)return e(g,w,y);if(S===SQ)return r(g,w,y);if(S===kQ||S===EQ||S===IQ)return d(g,w,y);if(b){let E=b[S];if(!E){const A=iQ(g);A&&(E=b[A])}if(E)return E(g,w,y)}return!1}}function RQ({circular:e,createCustomConfig:t,strict:r}){let a={areArrayBuffersEqual:uQ,areArraysEqual:r?Fp:fQ,areDataViewsEqual:hQ,areDatesEqual:mQ,areErrorsEqual:pQ,areFunctionsEqual:xQ,areMapsEqual:r?$5(MO,Fp):MO,areNumbersEqual:gQ,areObjectsEqual:r?Fp:vQ,arePrimitiveWrappersEqual:bQ,areRegExpsEqual:yQ,areSetsEqual:r?$5(RO,Fp):RO,areTypedArraysEqual:r?$5($1,Fp):$1,areUrlsEqual:wQ,unknownTagComparators:void 0};if(t&&(a=Object.assign({},a,t(a))),e){const s=bv(a.areArraysEqual),i=bv(a.areMapsEqual),o=bv(a.areObjectsEqual),l=bv(a.areSetsEqual);a=Object.assign({},a,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return a}function BQ(e){return function(t,r,a,s,i,o,l){return e(t,r,l)}}function UQ({circular:e,comparator:t,createState:r,equals:a,strict:s}){if(r)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:u}=r();return t(l,c,{cache:d,equals:a,meta:u,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:a,meta:void 0,strict:s})};const i={cache:void 0,equals:a,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const qQ=P0();P0({strict:!0});P0({circular:!0});P0({circular:!0,strict:!0});P0({createInternalComparator:()=>Bh});P0({strict:!0,createInternalComparator:()=>Bh});P0({circular:!0,createInternalComparator:()=>Bh});P0({circular:!0,createInternalComparator:()=>Bh,strict:!0});function P0(e={}){const{circular:t=!1,createInternalComparator:r,createState:a,strict:s=!1}=e,i=RQ(e),o=MQ(i),l=r?r(o):BQ(o);return UQ({circular:t,comparator:o,createState:a,equals:l,strict:s})}function $Q(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function BO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,a=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):$Q(s)};requestAnimationFrame(a)}function B4(e){"@babel/helpers - typeof";return B4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},B4(e)}function zQ(e){return VQ(e)||GQ(e)||WQ(e)||HQ()}function HQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WQ(e,t){if(e){if(typeof e=="string")return UO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UO(e,t)}}function UO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function GQ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VQ(e){if(Array.isArray(e))return e}function KQ(){var e={},t=function(){return null},r=!1,a=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=zQ(o),c=l[0],d=l.slice(1);if(typeof c=="number"){BO(s.bind(null,d),c);return}s(c),BO(s.bind(null,d));return}B4(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,a(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $O(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(a){XF(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function XF(e,t,r){return t=XQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XQ(e){var t=YQ(e,"string");return qx(t)==="symbol"?t:String(t)}function YQ(e,t){if(qx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qx(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var QQ=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(a,s){return a.filter(function(i){return s.includes(i)})})},JQ=function(t){return t},ZQ=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},ix=function(t,r){return Object.keys(r).reduce(function(a,s){return $O($O({},a),{},XF({},s,t(s,r[s])))},{})},zO=function(t,r,a){return t.map(function(s){return"".concat(ZQ(s)," ").concat(r,"ms ").concat(a)}).join(",")};function eJ(e,t){return nJ(e)||rJ(e,t)||YF(e,t)||tJ()}function tJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function nJ(e){if(Array.isArray(e))return e}function aJ(e){return oJ(e)||iJ(e)||YF(e)||sJ()}function sJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YF(e,t){if(e){if(typeof e=="string")return U4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return U4(e,t)}}function iJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function oJ(e){if(Array.isArray(e))return U4(e)}function U4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var z1=1e-4,QF=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},JF=function(t,r){return t.map(function(a,s){return a*Math.pow(r,s)}).reduce(function(a,s){return a+s})},HO=function(t,r){return function(a){var s=QF(t,r);return JF(s,a)}},lJ=function(t,r){return function(a){var s=QF(t,r),i=[].concat(aJ(s.map(function(o,l){return o*l}).slice(1)),[0]);return JF(i,a)}},WO=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),u=eJ(d,4);s=u[0],i=u[1],o=u[2],l=u[3]}}}var f=HO(s,o),p=HO(i,l),m=lJ(s,o),b=function(w){return w>1?1:w<0?0:w},v=function(w){for(var y=w>1?1:w,j=y,N=0;N<8;++N){var S=f(j)-y,E=m(j);if(Math.abs(S-y)<z1||E<z1)return p(j);j=b(j-S/E)}return p(j)};return v.isStepper=!1,v},cJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,a=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(u,f,p){var m=-(u-f)*a,b=p*i,v=p+(m-b)*l/1e3,g=p*l/1e3+u;return Math.abs(g-f)<z1&&Math.abs(v)<z1?[f,0]:[g,v]};return c.isStepper=!0,c.dt=l,c},dJ=function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return WO(s);case"spring":return cJ();default:if(s.split("(")[0]==="cubic-bezier")return WO(s)}return typeof s=="function"?s:null};function $x(e){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(e)}function GO(e){return hJ(e)||fJ(e)||ZF(e)||uJ()}function uJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hJ(e){if(Array.isArray(e))return $4(e)}function VO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VO(Object(r),!0).forEach(function(a){q4(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function q4(e,t,r){return t=mJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mJ(e){var t=pJ(e,"string");return $x(t)==="symbol"?t:String(t)}function pJ(e,t){if($x(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if($x(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function xJ(e,t){return bJ(e)||vJ(e,t)||ZF(e,t)||gJ()}function gJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZF(e,t){if(e){if(typeof e=="string")return $4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $4(e,t)}}function $4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function vJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function bJ(e){if(Array.isArray(e))return e}var H1=function(t,r,a){return t+(r-t)*a},z4=function(t){var r=t.from,a=t.to;return r!==a},yJ=function e(t,r,a){var s=ix(function(i,o){if(z4(o)){var l=t(o.from,o.to,o.velocity),c=xJ(l,2),d=c[0],u=c[1];return Eo(Eo({},o),{},{from:d,velocity:u})}return o},r);return a<1?ix(function(i,o){return z4(o)?Eo(Eo({},o),{},{velocity:H1(o.velocity,s[i].velocity,a),from:H1(o.from,s[i].from,a)}):o},r):e(t,s,a-1)};const wJ=(function(e,t,r,a,s){var i=QQ(e,t),o=i.reduce(function(g,w){return Eo(Eo({},g),{},q4({},w,[e[w],t[w]]))},{}),l=i.reduce(function(g,w){return Eo(Eo({},g),{},q4({},w,{from:e[w],velocity:0,to:t[w]}))},{}),c=-1,d,u,f=function(){return null},p=function(){return ix(function(w,y){return y.from},l)},m=function(){return!Object.values(l).filter(z4).length},b=function(w){d||(d=w);var y=w-d,j=y/r.dt;l=yJ(r,l,j),s(Eo(Eo(Eo({},e),t),p())),d=w,m()||(c=requestAnimationFrame(f))},v=function(w){u||(u=w);var y=(w-u)/a,j=ix(function(S,E){return H1.apply(void 0,GO(E).concat([r(y)]))},o);if(s(Eo(Eo(Eo({},e),t),j)),y<1)c=requestAnimationFrame(f);else{var N=ix(function(S,E){return H1.apply(void 0,GO(E).concat([r(1)]))},o);s(Eo(Eo(Eo({},e),t),N))}};return f=r.isStepper?b:v,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}});function Um(e){"@babel/helpers - typeof";return Um=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Um(e)}var NJ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function jJ(e,t){if(e==null)return{};var r=kJ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function kJ(e,t){if(e==null)return{};var r={},a=Object.keys(e),s,i;for(i=0;i<a.length;i++)s=a[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function z5(e){return AJ(e)||CJ(e)||_J(e)||SJ()}function SJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _J(e,t){if(e){if(typeof e=="string")return H4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H4(e,t)}}function CJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AJ(e){if(Array.isArray(e))return H4(e)}function H4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function KO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KO(Object(r),!0).forEach(function(a){Kp(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Kp(e,t,r){return t=e7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EJ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TJ(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,e7(a.key),a)}}function OJ(e,t,r){return t&&TJ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function e7(e){var t=PJ(e,"string");return Um(t)==="symbol"?t:String(t)}function PJ(e,t){if(Um(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Um(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function IJ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W4(e,t)}function W4(e,t){return W4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},W4(e,t)}function DJ(e){var t=LJ();return function(){var a=W1(e),s;if(t){var i=W1(this).constructor;s=Reflect.construct(a,arguments,i)}else s=a.apply(this,arguments);return G4(this,s)}}function G4(e,t){if(t&&(Um(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V4(e)}function V4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LJ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function W1(e){return W1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W1(e)}var Tf=(function(e){IJ(r,e);var t=DJ(r);function r(a,s){var i;EJ(this,r),i=t.call(this,a,s);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,u=o.to,f=o.steps,p=o.children,m=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(V4(i)),i.changeStyle=i.changeStyle.bind(V4(i)),!l||m<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:u}),G4(i);if(f&&f.length)i.state={style:f[0].style};else if(d){if(typeof p=="function")return i.state={style:d},G4(i);i.state={style:c?Kp({},c,d):d}}else i.state={style:{}};return i}return OJ(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,u=i.to,f=i.from,p=this.state.style;if(l){if(!o){var m={style:c?Kp({},c,u):u};this.state&&p&&(c&&p[c]!==u||!c&&p!==u)&&this.setState(m);return}if(!(qQ(s.to,u)&&s.canBegin&&s.isActive)){var b=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=b||d?f:s.to;if(this.state&&p){var g={style:c?Kp({},c,v):v};(c&&p[c]!==v||!c&&p!==v)&&this.setState(g)}this.runAnimation(Fd(Fd({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,d=s.easing,u=s.begin,f=s.onAnimationEnd,p=s.onAnimationStart,m=wJ(o,l,dJ(d),c,this.changeStyle),b=function(){i.stopJSAnimation=m()};this.manager.start([p,u,b,c,f])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,d=o[0],u=d.style,f=d.duration,p=f===void 0?0:f,m=function(v,g,w){if(w===0)return v;var y=g.duration,j=g.easing,N=j===void 0?"ease":j,S=g.style,E=g.properties,A=g.onAnimationEnd,P=w>0?o[w-1]:g,I=E||Object.keys(S);if(typeof N=="function"||N==="spring")return[].concat(z5(v),[i.runJSAnimation.bind(i,{from:P.style,to:S,duration:y,easing:N}),y]);var B=zO(I,y,N),T=Fd(Fd(Fd({},P.style),S),{},{transition:B});return[].concat(z5(v),[T,y,A]).filter(JQ)};return this.manager.start([c].concat(z5(o.reduce(m,[u,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=KQ());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,d=s.easing,u=s.onAnimationStart,f=s.onAnimationEnd,p=s.steps,m=s.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof m=="function"||d==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var v=l?Kp({},l,c):c,g=zO(Object.keys(v),o,d);b.start([u,i,Fd(Fd({},v),{},{transition:g}),o,f])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=jJ(s,NJ),d=D.Children.count(i),u=this.state.style;if(typeof i=="function")return i(u);if(!l||d===0||o<=0)return i;var f=function(m){var b=m.props,v=b.style,g=v===void 0?{}:v,w=b.className,y=D.cloneElement(m,Fd(Fd({},c),{},{style:Fd(Fd({},g),u),className:w}));return y};return d===1?f(D.Children.only(i)):ft.createElement("div",null,D.Children.map(i,function(p){return f(p)}))}}]),r})(D.PureComponent);Tf.displayName="Animate";Tf.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Tf.propTypes={from:_a.oneOfType([_a.object,_a.string]),to:_a.oneOfType([_a.object,_a.string]),attributeName:_a.string,duration:_a.number,begin:_a.number,easing:_a.oneOfType([_a.string,_a.func]),steps:_a.arrayOf(_a.shape({duration:_a.number.isRequired,style:_a.object.isRequired,easing:_a.oneOfType([_a.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),_a.func]),properties:_a.arrayOf("string"),onAnimationEnd:_a.func})),children:_a.oneOfType([_a.node,_a.func]),isActive:_a.bool,canBegin:_a.bool,onAnimationEnd:_a.func,shouldReAnimate:_a.bool,onAnimationStart:_a.func,onAnimationReStart:_a.func};function zx(e){"@babel/helpers - typeof";return zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zx(e)}function G1(){return G1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},G1.apply(this,arguments)}function FJ(e,t){return UJ(e)||BJ(e,t)||RJ(e,t)||MJ()}function MJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RJ(e,t){if(e){if(typeof e=="string")return XO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XO(e,t)}}function XO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function BJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function UJ(e){if(Array.isArray(e))return e}function YO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function QO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(r),!0).forEach(function(a){qJ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function qJ(e,t,r){return t=$J(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $J(e){var t=zJ(e,"string");return zx(t)=="symbol"?t:t+""}function zJ(e,t){if(zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var JO=function(t,r,a,s,i){var o=Math.min(Math.abs(a)/2,Math.abs(s)/2),l=s>=0?1:-1,c=a>=0?1:-1,d=s>=0&&a>=0||s<0&&a<0?1:0,u;if(o>0&&i instanceof Array){for(var f=[0,0,0,0],p=0,m=4;p<m;p++)f[p]=i[p]>o?o:i[p];u="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(u+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(d,",").concat(t+c*f[0],",").concat(r)),u+="L ".concat(t+a-c*f[1],",").concat(r),f[1]>0&&(u+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(d,`,
        `).concat(t+a,",").concat(r+l*f[1])),u+="L ".concat(t+a,",").concat(r+s-l*f[2]),f[2]>0&&(u+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(d,`,
        `).concat(t+a-c*f[2],",").concat(r+s)),u+="L ".concat(t+c*f[3],",").concat(r+s),f[3]>0&&(u+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-l*f[3])),u+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);u="M ".concat(t,",").concat(r+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+c*b,",").concat(r,`
            L `).concat(t+a-c*b,",").concat(r,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+a,",").concat(r+l*b,`
            L `).concat(t+a,",").concat(r+s-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+a-c*b,",").concat(r+s,`
            L `).concat(t+c*b,",").concat(r+s,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t,",").concat(r+s-l*b," Z")}else u="M ".concat(t,",").concat(r," h ").concat(a," v ").concat(s," h ").concat(-a," Z");return u},HJ=function(t,r){if(!t||!r)return!1;var a=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),u=Math.max(i,i+l),f=Math.min(o,o+c),p=Math.max(o,o+c);return a>=d&&a<=u&&s>=f&&s<=p}return!1},WJ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},KS=function(t){var r=QO(QO({},WJ),t),a=D.useRef(),s=D.useState(-1),i=FJ(s,2),o=i[0],l=i[1];D.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var N=a.current.getTotalLength();N&&l(N)}catch{}},[]);var c=r.x,d=r.y,u=r.width,f=r.height,p=r.radius,m=r.className,b=r.animationEasing,v=r.animationDuration,g=r.animationBegin,w=r.isAnimationActive,y=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||u===0||f===0)return null;var j=fa("recharts-rectangle",m);return y?ft.createElement(Tf,{canBegin:o>0,from:{width:u,height:f,x:c,y:d},to:{width:u,height:f,x:c,y:d},duration:v,animationEasing:b,isActive:y},function(N){var S=N.width,E=N.height,A=N.x,P=N.y;return ft.createElement(Tf,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,isActive:w,easing:b},ft.createElement("path",G1({},Gn(r,!0),{className:j,d:JO(A,P,S,E,p),ref:a})))}):ft.createElement("path",G1({},Gn(r,!0),{className:j,d:JO(c,d,u,f,p)}))};function K4(){return K4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},K4.apply(this,arguments)}var XS=function(t){var r=t.cx,a=t.cy,s=t.r,i=t.className,o=fa("recharts-dot",i);return r===+r&&a===+a&&s===+s?D.createElement("circle",K4({},Gn(t,!1),f1(t),{className:o,cx:r,cy:a,r:s})):null};function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}var GJ=["x","y","top","left","width","height","className"];function X4(){return X4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X4.apply(this,arguments)}function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function VJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(a){KJ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function KJ(e,t,r){return t=XJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function XJ(e){var t=YJ(e,"string");return Hx(t)=="symbol"?t:t+""}function YJ(e,t){if(Hx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function QJ(e,t){if(e==null)return{};var r=JJ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function JJ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var ZJ=function(t,r,a,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(a)},eZ=function(t){var r=t.x,a=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,u=t.width,f=u===void 0?0:u,p=t.height,m=p===void 0?0:p,b=t.className,v=QJ(t,GJ),g=VJ({x:a,y:i,top:l,left:d,width:f,height:m},v);return!ur(a)||!ur(i)||!ur(f)||!ur(m)||!ur(l)||!ur(d)?null:ft.createElement("path",X4({},Gn(g,!0),{className:fa("recharts-cross",b),d:ZJ(a,i,f,m,l,d)}))},H5,eP;function tZ(){if(eP)return H5;eP=1;var e=yL(),t=e(Object.getPrototypeOf,Object);return H5=t,H5}var W5,tP;function rZ(){if(tP)return W5;tP=1;var e=Pf(),t=tZ(),r=If(),a="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,c=o.call(Object);function d(u){if(!r(u)||e(u)!=a)return!1;var f=t(u);if(f===null)return!0;var p=l.call(f,"constructor")&&f.constructor;return typeof p=="function"&&p instanceof p&&o.call(p)==c}return W5=d,W5}var nZ=rZ();const aZ=La(nZ);var G5,rP;function sZ(){if(rP)return G5;rP=1;var e=Pf(),t=If(),r="[object Boolean]";function a(s){return s===!0||s===!1||t(s)&&e(s)==r}return G5=a,G5}var iZ=sZ();const oZ=La(iZ);function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}function V1(){return V1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},V1.apply(this,arguments)}function lZ(e,t){return fZ(e)||uZ(e,t)||dZ(e,t)||cZ()}function cZ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dZ(e,t){if(e){if(typeof e=="string")return nP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nP(e,t)}}function nP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function uZ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function fZ(e){if(Array.isArray(e))return e}function aP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function sP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(r),!0).forEach(function(a){hZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function hZ(e,t,r){return t=mZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mZ(e){var t=pZ(e,"string");return Wx(t)=="symbol"?t:t+""}function pZ(e,t){if(Wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iP=function(t,r,a,s,i){var o=a-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+a,",").concat(r),l+="L ".concat(t+a-o/2,",").concat(r+i),l+="L ".concat(t+a-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},xZ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gZ=function(t){var r=sP(sP({},xZ),t),a=D.useRef(),s=D.useState(-1),i=lZ(s,2),o=i[0],l=i[1];D.useEffect(function(){if(a.current&&a.current.getTotalLength)try{var j=a.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,d=r.y,u=r.upperWidth,f=r.lowerWidth,p=r.height,m=r.className,b=r.animationEasing,v=r.animationDuration,g=r.animationBegin,w=r.isUpdateAnimationActive;if(c!==+c||d!==+d||u!==+u||f!==+f||p!==+p||u===0&&f===0||p===0)return null;var y=fa("recharts-trapezoid",m);return w?ft.createElement(Tf,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:d},to:{upperWidth:u,lowerWidth:f,height:p,x:c,y:d},duration:v,animationEasing:b,isActive:w},function(j){var N=j.upperWidth,S=j.lowerWidth,E=j.height,A=j.x,P=j.y;return ft.createElement(Tf,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,easing:b},ft.createElement("path",V1({},Gn(r,!0),{className:y,d:iP(A,P,N,S,E),ref:a})))}):ft.createElement("g",null,ft.createElement("path",V1({},Gn(r,!0),{className:y,d:iP(c,d,u,f,p)})))},vZ=["option","shapeType","propTransformer","activeClassName","isActive"];function Gx(e){"@babel/helpers - typeof";return Gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(e)}function bZ(e,t){if(e==null)return{};var r=yZ(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function yZ(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function oP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function K1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oP(Object(r),!0).forEach(function(a){wZ(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function wZ(e,t,r){return t=NZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function NZ(e){var t=jZ(e,"string");return Gx(t)=="symbol"?t:t+""}function jZ(e,t){if(Gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kZ(e,t){return K1(K1({},t),e)}function SZ(e,t){return e==="symbols"}function lP(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return ft.createElement(KS,r);case"trapezoid":return ft.createElement(gZ,r);case"sector":return ft.createElement(VF,r);case"symbols":if(SZ(t))return ft.createElement(hS,r);break;default:return null}}function _Z(e){return D.isValidElement(e)?e.props:e}function CZ(e){var t=e.option,r=e.shapeType,a=e.propTransformer,s=a===void 0?kZ:a,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=bZ(e,vZ),d;if(D.isValidElement(t))d=D.cloneElement(t,K1(K1({},c),_Z(t)));else if(Dn(t))d=t(c);else if(aZ(t)&&!oZ(t)){var u=s(t,c);d=ft.createElement(lP,{shapeType:r,elementProps:u})}else{var f=c;d=ft.createElement(lP,{shapeType:r,elementProps:f})}return l?ft.createElement(Rs,{className:o},d):d}function ay(e,t){return t!=null&&"trapezoids"in e.props}function sy(e,t){return t!=null&&"sectors"in e.props}function Vx(e,t){return t!=null&&"points"in e.props}function AZ(e,t){var r,a,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(a=t.labelViewBox)===null||a===void 0?void 0:a.y)||e.y===t.y;return s&&i}function EZ(e,t){var r=e.endAngle===t.endAngle,a=e.startAngle===t.startAngle;return r&&a}function TZ(e,t){var r=e.x===t.x,a=e.y===t.y,s=e.z===t.z;return r&&a&&s}function OZ(e,t){var r;return ay(e,t)?r=AZ:sy(e,t)?r=EZ:Vx(e,t)&&(r=TZ),r}function PZ(e,t){var r;return ay(e,t)?r="trapezoids":sy(e,t)?r="sectors":Vx(e,t)&&(r="points"),r}function IZ(e,t){if(ay(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(sy(e,t)){var a;return(a=t.tooltipPayload)===null||a===void 0||(a=a[0])===null||a===void 0||(a=a.payload)===null||a===void 0?void 0:a.payload}return Vx(e,t)?t.payload:{}}function DZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,a=e.itemData,s=PZ(r,t),i=IZ(r,t),o=a.filter(function(c,d){var u=Tx(i,c),f=r.props[s].filter(function(b){var v=OZ(r,t);return v(b,t)}),p=r.props[s].indexOf(f[f.length-1]),m=d===p;return u&&m}),l=a.indexOf(o[o.length-1]);return l}var V5,cP;function LZ(){if(cP)return V5;cP=1;var e=Math.ceil,t=Math.max;function r(a,s,i,o){for(var l=-1,c=t(e((s-a)/(i||1)),0),d=Array(c);c--;)d[o?c:++l]=a,a+=i;return d}return V5=r,V5}var K5,dP;function t7(){if(dP)return K5;dP=1;var e=FL(),t=1/0,r=17976931348623157e292;function a(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return K5=a,K5}var X5,uP;function FZ(){if(uP)return X5;uP=1;var e=LZ(),t=Vb(),r=t7();function a(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return X5=a,X5}var Y5,fP;function MZ(){if(fP)return Y5;fP=1;var e=FZ(),t=e();return Y5=t,Y5}var RZ=MZ();const X1=La(RZ);function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function hP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function mP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(r),!0).forEach(function(a){r7(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function r7(e,t,r){return t=BZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BZ(e){var t=UZ(e,"string");return Kx(t)=="symbol"?t:t+""}function UZ(e,t){if(Kx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Kx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qZ=["Webkit","Moz","O","ms"],$Z=function(t,r){var a=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=qZ.reduce(function(i,o){return mP(mP({},i),{},r7({},o+a,r))},{});return s[t]=r,s};function qm(e){"@babel/helpers - typeof";return qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qm(e)}function Y1(){return Y1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Y1.apply(this,arguments)}function pP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Q5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pP(Object(r),!0).forEach(function(a){xc(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function zZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a7(a.key),a)}}function HZ(e,t,r){return t&&xP(e.prototype,t),r&&xP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function WZ(e,t,r){return t=Q1(t),GZ(e,n7()?Reflect.construct(t,r||[],Q1(e).constructor):t.apply(e,r))}function GZ(e,t){if(t&&(qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VZ(e)}function VZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function n7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(n7=function(){return!!e})()}function Q1(e){return Q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Q1(e)}function KZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y4(e,t)}function Y4(e,t){return Y4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Y4(e,t)}function xc(e,t,r){return t=a7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a7(e){var t=XZ(e,"string");return qm(t)=="symbol"?t:t+""}function XZ(e,t){if(qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(qm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var YZ=function(t){var r=t.data,a=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=nx().domain(X1(0,c)).range([i,i+o-l]),u=d.domain().map(function(f){return d(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(a),endX:d(s),scale:d,scaleValues:u}},gP=function(t){return t.changedTouches&&!!t.changedTouches.length},$m=(function(e){function t(r){var a;return zZ(this,t),a=WZ(this,t,[r]),xc(a,"handleDrag",function(s){a.leaveTimer&&(clearTimeout(a.leaveTimer),a.leaveTimer=null),a.state.isTravellerMoving?a.handleTravellerMove(s):a.state.isSlideMoving&&a.handleSlideDrag(s)}),xc(a,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&a.handleDrag(s.changedTouches[0])}),xc(a,"handleDragEnd",function(){a.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=a.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),a.detachDragEndListener()}),xc(a,"handleLeaveWrapper",function(){(a.state.isTravellerMoving||a.state.isSlideMoving)&&(a.leaveTimer=window.setTimeout(a.handleDragEnd,a.props.leaveTimeOut))}),xc(a,"handleEnterSlideOrTraveller",function(){a.setState({isTextActive:!0})}),xc(a,"handleLeaveSlideOrTraveller",function(){a.setState({isTextActive:!1})}),xc(a,"handleSlideDragStart",function(s){var i=gP(s)?s.changedTouches[0]:s;a.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),a.attachDragEndListener()}),a.travellerDragStartHandlers={startX:a.handleTravellerDragStart.bind(a,"startX"),endX:a.handleTravellerDragStart.bind(a,"endX")},a.state={},a}return KZ(t,e),HZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(a){var s=a.startX,i=a.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,u=d.length-1,f=Math.min(s,i),p=Math.max(s,i),m=t.getIndexInRange(o,f),b=t.getIndexInRange(o,p);return{startIndex:m-m%c,endIndex:b===u?u:b-b%c}}},{key:"getTextOfTick",value:function(a){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=Sc(i[a],l,a);return Dn(o)?o(c,a):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(a){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,d=c.x,u=c.width,f=c.travellerWidth,p=c.startIndex,m=c.endIndex,b=c.onChange,v=a.pageX-i;v>0?v=Math.min(v,d+u-f-l,d+u-f-o):v<0&&(v=Math.max(v,d-o,d-l));var g=this.getIndex({startX:o+v,endX:l+v});(g.startIndex!==p||g.endIndex!==m)&&b&&b(g),this.setState({startX:o+v,endX:l+v,slideMoveStartX:a.pageX})}},{key:"handleTravellerDragStart",value:function(a,s){var i=gP(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:a,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(a){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[o],u=this.props,f=u.x,p=u.width,m=u.travellerWidth,b=u.onChange,v=u.gap,g=u.data,w={startX:this.state.startX,endX:this.state.endX},y=a.pageX-i;y>0?y=Math.min(y,f+p-m-d):y<0&&(y=Math.max(y,f-d)),w[o]=d+y;var j=this.getIndex(w),N=j.startIndex,S=j.endIndex,E=function(){var P=g.length-1;return o==="startX"&&(l>c?N%v===0:S%v===0)||l<c&&S===P||o==="endX"&&(l>c?S%v===0:N%v===0)||l>c&&S===P};this.setState(xc(xc({},o,d+y),"brushMoveStartX",a.pageX),function(){b&&E()&&b(j)})}},{key:"handleTravellerMoveKeyboard",value:function(a,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,u=this.state[s],f=l.indexOf(u);if(f!==-1){var p=f+a;if(!(p===-1||p>=l.length)){var m=l[p];s==="startX"&&m>=d||s==="endX"&&m<=c||this.setState(xc({},s,m),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.fill,d=a.stroke;return ft.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.data,d=a.children,u=a.padding,f=D.Children.only(d);return f?ft.cloneElement(f,{x:s,y:i,width:o,height:l,margin:u,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(a,s){var i,o,l=this,c=this.props,d=c.y,u=c.travellerWidth,f=c.height,p=c.traveller,m=c.ariaLabel,b=c.data,v=c.startIndex,g=c.endIndex,w=Math.max(a,this.props.x),y=Q5(Q5({},Gn(this.props,!1)),{},{x:w,y:d,width:u,height:f}),j=m||"Min value: ".concat((i=b[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[g])===null||o===void 0?void 0:o.name);return ft.createElement(Rs,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":a,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,y))}},{key:"renderSlide",value:function(a,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,u=Math.min(a,s)+d,f=Math.max(Math.abs(s-a)-d,0);return ft.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:u,y:o,width:f,height:l})}},{key:"renderText",value:function(){var a=this.props,s=a.startIndex,i=a.endIndex,o=a.y,l=a.height,c=a.travellerWidth,d=a.stroke,u=this.state,f=u.startX,p=u.endX,m=5,b={pointerEvents:"none",fill:d};return ft.createElement(Rs,{className:"recharts-brush-texts"},ft.createElement(k1,Y1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,p)-m,y:o+l/2},b),this.getTextOfTick(s)),ft.createElement(k1,Y1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,p)+c+m,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var a=this.props,s=a.data,i=a.className,o=a.children,l=a.x,c=a.y,d=a.width,u=a.height,f=a.alwaysShowText,p=this.state,m=p.startX,b=p.endX,v=p.isTextActive,g=p.isSlideMoving,w=p.isTravellerMoving,y=p.isTravellerFocused;if(!s||!s.length||!ur(l)||!ur(c)||!ur(d)||!ur(u)||d<=0||u<=0)return null;var j=fa("recharts-brush",i),N=ft.Children.count(o)===1,S=$Z("userSelect","none");return ft.createElement(Rs,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(m,b),this.renderTravellerLayer(m,"startX"),this.renderTravellerLayer(b,"endX"),(v||g||w||y||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(a){var s=a.x,i=a.y,o=a.width,l=a.height,c=a.stroke,d=Math.floor(i+l/2)-1;return ft.createElement(ft.Fragment,null,ft.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),ft.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),ft.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(a,s){var i;return ft.isValidElement(a)?i=ft.cloneElement(a,s):Dn(a)?i=a(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(a,s){var i=a.data,o=a.width,l=a.x,c=a.travellerWidth,d=a.updateId,u=a.startIndex,f=a.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return Q5({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?YZ({data:i,width:o,x:l,travellerWidth:c,startIndex:u,endIndex:f}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var p=s.scale.domain().map(function(m){return s.scale(m)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(a.startIndex),endX:s.scale(a.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(a,s){for(var i=a.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);a[c]>s?l=c:o=c}return s>=a[l]?l:o}}])})(D.PureComponent);xc($m,"displayName","Brush");xc($m,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var J5,vP;function QZ(){if(vP)return J5;vP=1;var e=yS();function t(r,a){var s;return e(r,function(i,o,l){return s=a(i,o,l),!s}),!!s}return J5=t,J5}var Z5,bP;function JZ(){if(bP)return Z5;bP=1;var e=hL(),t=E0(),r=QZ(),a=ec(),s=Vb();function i(o,l,c){var d=a(o)?e:r;return c&&s(o,l,c)&&(l=void 0),d(o,t(l,3))}return Z5=i,Z5}var ZZ=JZ();const eee=La(ZZ);var Lu=function(t,r){var a=t.alwaysShow,s=t.ifOverflow;return a&&(s="extendDomain"),s===r},ej,yP;function tee(){if(yP)return ej;yP=1;var e=OL();function t(r,a,s){a=="__proto__"&&e?e(r,a,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[a]=s}return ej=t,ej}var tj,wP;function ree(){if(wP)return tj;wP=1;var e=tee(),t=EL(),r=E0();function a(s,i){var o={};return i=r(i,3),t(s,function(l,c,d){e(o,c,i(l,c,d))}),o}return tj=a,tj}var nee=ree();const aee=La(nee);var rj,NP;function see(){if(NP)return rj;NP=1;function e(t,r){for(var a=-1,s=t==null?0:t.length;++a<s;)if(!r(t[a],a,t))return!1;return!0}return rj=e,rj}var nj,jP;function iee(){if(jP)return nj;jP=1;var e=yS();function t(r,a){var s=!0;return e(r,function(i,o,l){return s=!!a(i,o,l),s}),s}return nj=t,nj}var aj,kP;function oee(){if(kP)return aj;kP=1;var e=see(),t=iee(),r=E0(),a=ec(),s=Vb();function i(o,l,c){var d=a(o)?e:t;return c&&s(o,l,c)&&(l=void 0),d(o,r(l,3))}return aj=i,aj}var lee=oee();const s7=La(lee);var cee=["x","y"];function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function Q4(){return Q4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Q4.apply(this,arguments)}function SP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Mp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SP(Object(r),!0).forEach(function(a){dee(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dee(e,t,r){return t=uee(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uee(e){var t=fee(e,"string");return Xx(t)=="symbol"?t:t+""}function fee(e,t){if(Xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hee(e,t){if(e==null)return{};var r=mee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function mee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function pee(e,t){var r=e.x,a=e.y,s=hee(e,cee),i="".concat(r),o=parseInt(i,10),l="".concat(a),c=parseInt(l,10),d="".concat(t.height||s.height),u=parseInt(d,10),f="".concat(t.width||s.width),p=parseInt(f,10);return Mp(Mp(Mp(Mp(Mp({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:u,width:p,name:t.name,radius:t.radius})}function _P(e){return ft.createElement(CZ,Q4({shapeType:"rectangle",propTransformer:pee,activeClassName:"recharts-active-bar"},e))}var xee=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(a,s){if(typeof t=="number")return t;var i=ur(a)||Nq(a);return i?t(a,s):(i||Sh(),r)}},gee=["value","background"],i7;function zm(e){"@babel/helpers - typeof";return zm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zm(e)}function vee(e,t){if(e==null)return{};var r=bee(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function bee(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function J1(){return J1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},J1.apply(this,arguments)}function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Ni(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(a){f0(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function yee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function AP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,l7(a.key),a)}}function wee(e,t,r){return t&&AP(e.prototype,t),r&&AP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nee(e,t,r){return t=Z1(t),jee(e,o7()?Reflect.construct(t,r||[],Z1(e).constructor):t.apply(e,r))}function jee(e,t){if(t&&(zm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kee(e)}function kee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o7=function(){return!!e})()}function Z1(e){return Z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Z1(e)}function See(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J4(e,t)}function J4(e,t){return J4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},J4(e,t)}function f0(e,t,r){return t=l7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l7(e){var t=_ee(e,"string");return zm(t)=="symbol"?t:t+""}function _ee(e,t){if(zm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(zm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kg=(function(e){function t(){var r;yee(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=Nee(this,t,[].concat(s)),f0(r,"state",{isAnimationFinished:!1}),f0(r,"id",vg("recharts-bar-")),f0(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),f0(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return See(t,e),wee(t,[{key:"renderRectanglesStatically",value:function(a){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,u=Gn(this.props,!1);return a&&a.map(function(f,p){var m=p===c,b=m?d:o,v=Ni(Ni(Ni({},u),f),{},{isActive:m,option:b,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return ft.createElement(Rs,J1({className:"recharts-bar-rectangle"},h1(s.props,f,p),{key:"rectangle-".concat(f?.x,"-").concat(f?.y,"-").concat(f?.value,"-").concat(p)}),ft.createElement(_P,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var a=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,u=s.animationEasing,f=s.animationId,p=this.state.prevData;return ft.createElement(Tf,{begin:c,duration:d,isActive:l,easing:u,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(m){var b=m.t,v=i.map(function(g,w){var y=p&&p[w];if(y){var j=rd(y.x,g.x),N=rd(y.y,g.y),S=rd(y.width,g.width),E=rd(y.height,g.height);return Ni(Ni({},g),{},{x:j(b),y:N(b),width:S(b),height:E(b)})}if(o==="horizontal"){var A=rd(0,g.height),P=A(b);return Ni(Ni({},g),{},{y:g.y+g.height-P,height:P})}var I=rd(0,g.width),B=I(b);return Ni(Ni({},g),{},{width:B})});return ft.createElement(Rs,null,a.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var a=this.props,s=a.data,i=a.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!Tx(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var a=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=Gn(this.props.background,!1);return i.map(function(d,u){d.value;var f=d.background,p=vee(d,gee);if(!f)return null;var m=Ni(Ni(Ni(Ni(Ni({},p),{},{fill:"#eee"},f),c),h1(a.props,d,u)),{},{onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd,dataKey:o,index:u,className:"recharts-bar-background-rectangle"});return ft.createElement(_P,J1({key:"background-bar-".concat(u),option:a.props.background,isActive:u===l},m))})}},{key:"renderErrorBar",value:function(a,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,u=i.children,f=Jd(u,ny);if(!f)return null;var p=d==="vertical"?o[0].height/2:o[0].width/2,m=function(g,w){var y=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:y,errorVal:Sc(g,w)}},b={clipPath:a?"url(#clipPath-".concat(s,")"):null};return ft.createElement(Rs,b,f.map(function(v){return ft.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:p,dataPointFormatter:m})}))}},{key:"render",value:function(){var a=this.props,s=a.hide,i=a.data,o=a.className,l=a.xAxis,c=a.yAxis,d=a.left,u=a.top,f=a.width,p=a.height,m=a.isAnimationActive,b=a.background,v=a.id;if(s||!i||!i.length)return null;var g=this.state.isAnimationFinished,w=fa("recharts-bar",o),y=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,N=y||j,S=Vn(v)?this.id:v;return ft.createElement(Rs,{className:w},y||j?ft.createElement("defs",null,ft.createElement("clipPath",{id:"clipPath-".concat(S)},ft.createElement("rect",{x:y?d:d-f/2,y:j?u:u-p/2,width:y?f:f*2,height:j?p:p*2}))):null,ft.createElement(Rs,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(S,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,S),(!m||g)&&v0.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curData:a.data,prevData:s.curData}:a.data!==s.curData?{curData:a.data}:null}}])})(D.PureComponent);i7=kg;f0(kg,"displayName","Bar");f0(kg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!lp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});f0(kg,"getComposedData",function(e){var t=e.props,r=e.item,a=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,p=e.offset,m=qX(a,r);if(!m)return null;var b=t.layout,v=r.type.defaultProps,g=v!==void 0?Ni(Ni({},v),r.props):r.props,w=g.dataKey,y=g.children,j=g.minPointSize,N=b==="horizontal"?o:i,S=d?N.scale.domain():null,E=XX({numericAxis:N}),A=Jd(y,RL),P=f.map(function(I,B){var T,_,R,z,H,Y;d?T=$X(d[u+B],S):(T=Sc(I,w),Array.isArray(T)||(T=[E,T]));var J=xee(j,i7.defaultProps.minPointSize)(T[1],B);if(b==="horizontal"){var re,X=[o.scale(T[0]),o.scale(T[1])],te=X[0],W=X[1];_=mO({axis:i,ticks:l,bandSize:s,offset:m.offset,entry:I,index:B}),R=(re=W??te)!==null&&re!==void 0?re:void 0,z=m.size;var O=te-W;if(H=Number.isNaN(O)?0:O,Y={x:_,y:o.y,width:z,height:o.height},Math.abs(J)>0&&Math.abs(H)<Math.abs(J)){var q=Gd(H||J)*(Math.abs(J)-Math.abs(H));R-=q,H+=q}}else{var G=[i.scale(T[0]),i.scale(T[1])],U=G[0],K=G[1];if(_=U,R=mO({axis:o,ticks:c,bandSize:s,offset:m.offset,entry:I,index:B}),z=K-U,H=m.size,Y={x:i.x,y:R,width:i.width,height:H},Math.abs(J)>0&&Math.abs(z)<Math.abs(J)){var ae=Gd(z||J)*(Math.abs(J)-Math.abs(z));z+=ae}}return Ni(Ni(Ni({},I),{},{x:_,y:R,width:z,height:H,value:d?T:T[1],payload:I,background:Y},A&&A[B]&&A[B].props),{},{tooltipPayload:[HF(r,I)],tooltipPosition:{x:_+z/2,y:R+H/2}})});return Ni({data:P,layout:b},p)});function Yx(e){"@babel/helpers - typeof";return Yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yx(e)}function Cee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function EP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,c7(a.key),a)}}function Aee(e,t,r){return t&&EP(e.prototype,t),r&&EP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Hd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TP(Object(r),!0).forEach(function(a){iy(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function iy(e,t,r){return t=c7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c7(e){var t=Eee(e,"string");return Yx(t)=="symbol"?t:t+""}function Eee(e,t){if(Yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Yx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tee=function(t,r,a,s,i){var o=t.width,l=t.height,c=t.layout,d=t.children,u=Object.keys(r),f={left:a.left,leftMirror:a.left,right:o-a.right,rightMirror:o-a.right,top:a.top,topMirror:a.top,bottom:l-a.bottom,bottomMirror:l-a.bottom},p=!!gc(d,kg);return u.reduce(function(m,b){var v=r[b],g=v.orientation,w=v.domain,y=v.padding,j=y===void 0?{}:y,N=v.mirror,S=v.reversed,E="".concat(g).concat(N?"Mirror":""),A,P,I,B,T;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var _=w[1]-w[0],R=1/0,z=v.categoricalDomain.sort(Sq);if(z.forEach(function(G,U){U>0&&(R=Math.min((G||0)-(z[U-1]||0),R))}),Number.isFinite(R)){var H=R/_,Y=v.layout==="vertical"?a.height:a.width;if(v.padding==="gap"&&(A=H*Y/2),v.padding==="no-gap"){var J=jh(t.barCategoryGap,H*Y),re=H*Y/2;A=re-J-(re-J)/Y*J}}}s==="xAxis"?P=[a.left+(j.left||0)+(A||0),a.left+a.width-(j.right||0)-(A||0)]:s==="yAxis"?P=c==="horizontal"?[a.top+a.height-(j.bottom||0),a.top+(j.top||0)]:[a.top+(j.top||0)+(A||0),a.top+a.height-(j.bottom||0)-(A||0)]:P=v.range,S&&(P=[P[1],P[0]]);var X=BX(v,i,p),te=X.scale,W=X.realScaleType;te.domain(w).range(P),UX(te);var O=KX(te,Hd(Hd({},v),{},{realScaleType:W}));s==="xAxis"?(T=g==="top"&&!N||g==="bottom"&&N,I=a.left,B=f[E]-T*v.height):s==="yAxis"&&(T=g==="left"&&!N||g==="right"&&N,I=f[E]-T*v.width,B=a.top);var q=Hd(Hd(Hd({},v),O),{},{realScaleType:W,x:I,y:B,scale:te,width:s==="xAxis"?a.width:v.width,height:s==="yAxis"?a.height:v.height});return q.bandSize=B1(q,O),!v.hide&&s==="xAxis"?f[E]+=(T?-1:1)*q.height:v.hide||(f[E]+=(T?-1:1)*q.width),Hd(Hd({},m),{},iy({},b,q))},{})},d7=function(t,r){var a=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(a,i),y:Math.min(s,o),width:Math.abs(i-a),height:Math.abs(o-s)}},Oee=function(t){var r=t.x1,a=t.y1,s=t.x2,i=t.y2;return d7({x:r,y:a},{x:s,y:i})},u7=(function(){function e(t){Cee(this,e),this.scale=t}return Aee(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=a.bandAware,i=a.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var a=this.range(),s=a[0],i=a[a.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();iy(u7,"EPS",1e-4);var YS=function(t){var r=Object.keys(t).reduce(function(a,s){return Hd(Hd({},a),{},iy({},s,u7.create(t[s])))},{});return Hd(Hd({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return aee(s,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return s7(s,function(i,o){return r[o].isInRange(i)})}})};function Pee(e){return(e%180+180)%180}var Iee=function(t){var r=t.width,a=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Pee(s),o=i*Math.PI/180,l=Math.atan(a/r),c=o>l&&o<Math.PI-l?a/Math.sin(o):r/Math.cos(o);return Math.abs(c)},sj,OP;function Dee(){if(OP)return sj;OP=1;var e=E0(),t=bg(),r=Wb();function a(s){return function(i,o,l){var c=Object(i);if(!t(i)){var d=e(o,3);i=r(i),o=function(f){return d(c[f],f,c)}}var u=s(i,o,l);return u>-1?c[d?i[u]:u]:void 0}}return sj=a,sj}var ij,PP;function Lee(){if(PP)return ij;PP=1;var e=t7();function t(r){var a=e(r),s=a%1;return a===a?s?a-s:a:0}return ij=t,ij}var oj,IP;function Fee(){if(IP)return oj;IP=1;var e=kL(),t=E0(),r=Lee(),a=Math.max;function s(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var d=l==null?0:r(l);return d<0&&(d=a(c+d,0)),e(i,t(o,3),d)}return oj=s,oj}var lj,DP;function Mee(){if(DP)return lj;DP=1;var e=Dee(),t=Fee(),r=e(t);return lj=r,lj}var Ree=Mee();const Bee=La(Ree);var Uee=U8();const qee=La(Uee);var $ee=qee(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),QS=D.createContext(void 0),JS=D.createContext(void 0),f7=D.createContext(void 0),h7=D.createContext({}),m7=D.createContext(void 0),p7=D.createContext(0),x7=D.createContext(0),LP=function(t){var r=t.state,a=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,u=$ee(i);return ft.createElement(QS.Provider,{value:a},ft.createElement(JS.Provider,{value:s},ft.createElement(h7.Provider,{value:i},ft.createElement(f7.Provider,{value:u},ft.createElement(m7.Provider,{value:o},ft.createElement(p7.Provider,{value:d},ft.createElement(x7.Provider,{value:c},l)))))))},zee=function(){return D.useContext(m7)},g7=function(t){var r=D.useContext(QS);r==null&&Sh();var a=r[t];return a==null&&Sh(),a},Hee=function(){var t=D.useContext(QS);return d0(t)},Wee=function(){var t=D.useContext(JS),r=Bee(t,function(a){return s7(a.domain,Number.isFinite)});return r||d0(t)},v7=function(t){var r=D.useContext(JS);r==null&&Sh();var a=r[t];return a==null&&Sh(),a},Gee=function(){var t=D.useContext(f7);return t},Vee=function(){return D.useContext(h7)},ZS=function(){return D.useContext(x7)},e3=function(){return D.useContext(p7)};function Hm(e){"@babel/helpers - typeof";return Hm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hm(e)}function Kee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xee(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,y7(a.key),a)}}function Yee(e,t,r){return t&&Xee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qee(e,t,r){return t=eb(t),Jee(e,b7()?Reflect.construct(t,r||[],eb(e).constructor):t.apply(e,r))}function Jee(e,t){if(t&&(Hm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Zee(e)}function Zee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(b7=function(){return!!e})()}function eb(e){return eb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},eb(e)}function ete(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z4(e,t)}function Z4(e,t){return Z4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},Z4(e,t)}function FP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function MP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FP(Object(r),!0).forEach(function(a){t3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function t3(e,t,r){return t=y7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function y7(e){var t=tte(e,"string");return Hm(t)=="symbol"?t:t+""}function tte(e,t){if(Hm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Hm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function rte(e,t){return ite(e)||ste(e,t)||ate(e,t)||nte()}function nte(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ate(e,t){if(e){if(typeof e=="string")return RP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RP(e,t)}}function RP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function ste(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function ite(e){if(Array.isArray(e))return e}function ek(){return ek=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ek.apply(this,arguments)}var ote=function(t,r){var a;return ft.isValidElement(t)?a=ft.cloneElement(t,r):Dn(t)?a=t(r):a=ft.createElement("line",ek({},r,{className:"recharts-reference-line-line"})),a},lte=function(t,r,a,s,i,o,l,c,d){var u=i.x,f=i.y,p=i.width,m=i.height;if(a){var b=d.y,v=t.y.apply(b,{position:o});if(Lu(d,"discard")&&!t.y.isInRange(v))return null;var g=[{x:u+p,y:v},{x:u,y:v}];return c==="left"?g.reverse():g}if(r){var w=d.x,y=t.x.apply(w,{position:o});if(Lu(d,"discard")&&!t.x.isInRange(y))return null;var j=[{x:y,y:f+m},{x:y,y:f}];return l==="top"?j.reverse():j}if(s){var N=d.segment,S=N.map(function(E){return t.apply(E,{position:o})});return Lu(d,"discard")&&eee(S,function(E){return!t.isInRange(E)})?null:S}return null};function cte(e){var t=e.x,r=e.y,a=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=zee(),u=g7(s),f=v7(i),p=Gee();if(!d||!p)return null;Nf(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var m=YS({x:u.scale,y:f.scale}),b=$i(t),v=$i(r),g=a&&a.length===2,w=lte(m,b,v,g,p,e.position,u.orientation,f.orientation,e);if(!w)return null;var y=rte(w,2),j=y[0],N=j.x,S=j.y,E=y[1],A=E.x,P=E.y,I=Lu(e,"hidden")?"url(#".concat(d,")"):void 0,B=MP(MP({clipPath:I},Gn(e,!0)),{},{x1:N,y1:S,x2:A,y2:P});return ft.createElement(Rs,{className:fa("recharts-reference-line",l)},ote(o,B),sl.renderCallByParent(e,Oee({x1:N,y1:S,x2:A,y2:P})))}var r3=(function(e){function t(){return Kee(this,t),Qee(this,t,arguments)}return ete(t,e),Yee(t,[{key:"render",value:function(){return ft.createElement(cte,this.props)}}])})(ft.Component);t3(r3,"displayName","ReferenceLine");t3(r3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function tk(){return tk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},tk.apply(this,arguments)}function Wm(e){"@babel/helpers - typeof";return Wm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wm(e)}function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function UP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(r),!0).forEach(function(a){oy(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ute(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,N7(a.key),a)}}function fte(e,t,r){return t&&ute(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hte(e,t,r){return t=tb(t),mte(e,w7()?Reflect.construct(t,r||[],tb(e).constructor):t.apply(e,r))}function mte(e,t){if(t&&(Wm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pte(e)}function pte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(w7=function(){return!!e})()}function tb(e){return tb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},tb(e)}function xte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rk(e,t)}function rk(e,t){return rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},rk(e,t)}function oy(e,t,r){return t=N7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function N7(e){var t=gte(e,"string");return Wm(t)=="symbol"?t:t+""}function gte(e,t){if(Wm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Wm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vte=function(t){var r=t.x,a=t.y,s=t.xAxis,i=t.yAxis,o=YS({x:s.scale,y:i.scale}),l=o.apply({x:r,y:a},{bandAware:!0});return Lu(t,"discard")&&!o.isInRange(l)?null:l},ly=(function(e){function t(){return dte(this,t),hte(this,t,arguments)}return xte(t,e),fte(t,[{key:"render",value:function(){var a=this.props,s=a.x,i=a.y,o=a.r,l=a.alwaysShow,c=a.clipPathId,d=$i(s),u=$i(i);if(Nf(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!u)return null;var f=vte(this.props);if(!f)return null;var p=f.x,m=f.y,b=this.props,v=b.shape,g=b.className,w=Lu(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=UP(UP({clipPath:w},Gn(this.props,!0)),{},{cx:p,cy:m});return ft.createElement(Rs,{className:fa("recharts-reference-dot",g)},t.renderDot(v,y),sl.renderCallByParent(this.props,{x:p-o,y:m-o,width:2*o,height:2*o}))}}])})(ft.Component);oy(ly,"displayName","ReferenceDot");oy(ly,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});oy(ly,"renderDot",function(e,t){var r;return ft.isValidElement(e)?r=ft.cloneElement(e,t):Dn(e)?r=e(t):r=ft.createElement(XS,tk({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function nk(){return nk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},nk.apply(this,arguments)}function Gm(e){"@babel/helpers - typeof";return Gm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function qP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qP(Object(r),!0).forEach(function(a){cy(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function bte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yte(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,k7(a.key),a)}}function wte(e,t,r){return t&&yte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nte(e,t,r){return t=rb(t),jte(e,j7()?Reflect.construct(t,r||[],rb(e).constructor):t.apply(e,r))}function jte(e,t){if(t&&(Gm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kte(e)}function kte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(j7=function(){return!!e})()}function rb(e){return rb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rb(e)}function Ste(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ak(e,t)}function ak(e,t){return ak=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ak(e,t)}function cy(e,t,r){return t=k7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function k7(e){var t=_te(e,"string");return Gm(t)=="symbol"?t:t+""}function _te(e,t){if(Gm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Gm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Cte=function(t,r,a,s,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,u=i.xAxis,f=i.yAxis;if(!u||!f)return null;var p=YS({x:u.scale,y:f.scale}),m={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:a?p.y.apply(c,{position:"start"}):p.y.rangeMin},b={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(d,{position:"end"}):p.y.rangeMax};return Lu(i,"discard")&&(!p.isInRange(m)||!p.isInRange(b))?null:d7(m,b)},dy=(function(e){function t(){return bte(this,t),Nte(this,t,arguments)}return Ste(t,e),wte(t,[{key:"render",value:function(){var a=this.props,s=a.x1,i=a.x2,o=a.y1,l=a.y2,c=a.className,d=a.alwaysShow,u=a.clipPathId;Nf(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=$i(s),p=$i(i),m=$i(o),b=$i(l),v=this.props.shape;if(!f&&!p&&!m&&!b&&!v)return null;var g=Cte(f,p,m,b,this.props);if(!g&&!v)return null;var w=Lu(this.props,"hidden")?"url(#".concat(u,")"):void 0;return ft.createElement(Rs,{className:fa("recharts-reference-area",c)},t.renderRect(v,$P($P({clipPath:w},Gn(this.props,!0)),g)),sl.renderCallByParent(this.props,g))}}])})(ft.Component);cy(dy,"displayName","ReferenceArea");cy(dy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});cy(dy,"renderRect",function(e,t){var r;return ft.isValidElement(e)?r=ft.cloneElement(e,t):Dn(e)?r=e(t):r=ft.createElement(KS,nk({},t,{className:"recharts-reference-area-rect"})),r});function S7(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var a=[],s=0;s<e.length;s+=t)a.push(e[s]);return a}function Ate(e,t,r){var a={width:e.width+t.width,height:e.height+t.height};return Iee(a,r)}function Ete(e,t,r){var a=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:a?s:i,end:a?s+o:i+l}:{start:a?s+o:i+l,end:a?s:i}}function nb(e,t,r,a,s){if(e*t<e*a||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-a)>=0&&e*(t+e*i/2-s)<=0}function Tte(e,t){return S7(e,t+1)}function Ote(e,t,r,a,s){for(var i=(a||[]).slice(),o=t.start,l=t.end,c=0,d=1,u=o,f=function(){var b=a?.[c];if(b===void 0)return{v:S7(a,d)};var v=c,g,w=function(){return g===void 0&&(g=r(b,v)),g},y=b.coordinate,j=c===0||nb(e,y,w,u,l);j||(c=0,u=o,d+=1),j&&(u=y+e*(w()/2+s),c+=d)},p;d<=i.length;)if(p=f(),p)return p.v;return[]}function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function zP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function rl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zP(Object(r),!0).forEach(function(a){Pte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Pte(e,t,r){return t=Ite(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ite(e){var t=Dte(e,"string");return Qx(t)=="symbol"?t:t+""}function Dte(e,t){if(Qx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Lte(e,t,r,a,s){for(var i=(a||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(p){var m=i[p],b,v=function(){return b===void 0&&(b=r(m,p)),b};if(p===o-1){var g=e*(m.coordinate+e*v()/2-c);i[p]=m=rl(rl({},m),{},{tickCoord:g>0?m.coordinate-g*e:m.coordinate})}else i[p]=m=rl(rl({},m),{},{tickCoord:m.coordinate});var w=nb(e,m.tickCoord,v,l,c);w&&(c=m.tickCoord-e*(v()/2+s),i[p]=rl(rl({},m),{},{isShow:!0}))},u=o-1;u>=0;u--)d(u);return i}function Fte(e,t,r,a,s,i){var o=(a||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var u=a[l-1],f=r(u,l-1),p=e*(u.coordinate+e*f/2-d);o[l-1]=u=rl(rl({},u),{},{tickCoord:p>0?u.coordinate-p*e:u.coordinate});var m=nb(e,u.tickCoord,function(){return f},c,d);m&&(d=u.tickCoord-e*(f/2+s),o[l-1]=rl(rl({},u),{},{isShow:!0}))}for(var b=i?l-1:l,v=function(y){var j=o[y],N,S=function(){return N===void 0&&(N=r(j,y)),N};if(y===0){var E=e*(j.coordinate-e*S()/2-c);o[y]=j=rl(rl({},j),{},{tickCoord:E<0?j.coordinate-E*e:j.coordinate})}else o[y]=j=rl(rl({},j),{},{tickCoord:j.coordinate});var A=nb(e,j.tickCoord,S,c,d);A&&(c=j.tickCoord+e*(S()/2+s),o[y]=rl(rl({},j),{},{isShow:!0}))},g=0;g<b;g++)v(g);return o}function n3(e,t,r){var a=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,u=e.unit,f=e.angle;if(!s||!s.length||!a)return[];if(ur(c)||lp.isSsr)return Tte(s,typeof c=="number"&&ur(c)?c:0);var p=[],m=l==="top"||l==="bottom"?"width":"height",b=u&&m==="width"?rx(u,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(j,N){var S=Dn(d)?d(j.value,N):j.value;return m==="width"?Ate(rx(S,{fontSize:t,letterSpacing:r}),b,f):rx(S,{fontSize:t,letterSpacing:r})[m]},g=s.length>=2?Gd(s[1].coordinate-s[0].coordinate):1,w=Ete(i,g,m);return c==="equidistantPreserveStart"?Ote(g,w,v,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Fte(g,w,v,s,o,c==="preserveStartEnd"):p=Lte(g,w,v,s,o),p.filter(function(y){return y.isShow}))}var Mte=["viewBox"],Rte=["viewBox"],Bte=["ticks"];function Vm(e){"@babel/helpers - typeof";return Vm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vm(e)}function pm(){return pm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},pm.apply(this,arguments)}function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function Fi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(r),!0).forEach(function(a){a3(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cj(e,t){if(e==null)return{};var r=Ute(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Ute(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function qte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function WP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,C7(a.key),a)}}function $te(e,t,r){return t&&WP(e.prototype,t),r&&WP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function zte(e,t,r){return t=ab(t),Hte(e,_7()?Reflect.construct(t,r||[],ab(e).constructor):t.apply(e,r))}function Hte(e,t){if(t&&(Vm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wte(e)}function Wte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_7=function(){return!!e})()}function ab(e){return ab=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ab(e)}function Gte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sk(e,t)}function sk(e,t){return sk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},sk(e,t)}function a3(e,t,r){return t=C7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C7(e){var t=Vte(e,"string");return Vm(t)=="symbol"?t:t+""}function Vte(e,t){if(Vm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Vm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var fp=(function(e){function t(r){var a;return qte(this,t),a=zte(this,t,[r]),a.state={fontSize:"",letterSpacing:""},a}return Gte(t,e),$te(t,[{key:"shouldComponentUpdate",value:function(a,s){var i=a.viewBox,o=cj(a,Mte),l=this.props,c=l.viewBox,d=cj(l,Rte);return!bm(i,c)||!bm(o,d)||!bm(s,this.state)}},{key:"componentDidMount",value:function(){var a=this.layerReference;if(a){var s=a.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(a){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,d=s.orientation,u=s.tickSize,f=s.mirror,p=s.tickMargin,m,b,v,g,w,y,j=f?-1:1,N=a.tickSize||u,S=ur(a.tickCoord)?a.tickCoord:a.coordinate;switch(d){case"top":m=b=a.coordinate,g=o+ +!f*c,v=g-j*N,y=v-j*p,w=S;break;case"left":v=g=a.coordinate,b=i+ +!f*l,m=b-j*N,w=m-j*p,y=S;break;case"right":v=g=a.coordinate,b=i+ +f*l,m=b+j*N,w=m+j*p,y=S;break;default:m=b=a.coordinate,g=o+ +f*c,v=g+j*N,y=v+j*p,w=S;break}return{line:{x1:m,y1:v,x2:b,y2:g},tick:{x:w,y}}}},{key:"getTickTextAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var a=this.props,s=a.orientation,i=a.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var a=this.props,s=a.x,i=a.y,o=a.width,l=a.height,c=a.orientation,d=a.mirror,u=a.axisLine,f=Fi(Fi(Fi({},Gn(this.props,!1)),Gn(u,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!d||c==="bottom"&&d);f=Fi(Fi({},f),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var m=+(c==="left"&&!d||c==="right"&&d);f=Fi(Fi({},f),{},{x1:s+m*o,y1:i,x2:s+m*o,y2:i+l})}return ft.createElement("line",pm({},f,{className:fa("recharts-cartesian-axis-line",od(u,"className"))}))}},{key:"renderTicks",value:function(a,s,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,u=l.tick,f=l.tickFormatter,p=l.unit,m=n3(Fi(Fi({},this.props),{},{ticks:a}),s,i),b=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),g=Gn(this.props,!1),w=Gn(u,!1),y=Fi(Fi({},g),{},{fill:"none"},Gn(c,!1)),j=m.map(function(N,S){var E=o.getTickLineCoord(N),A=E.line,P=E.tick,I=Fi(Fi(Fi(Fi({textAnchor:b,verticalAnchor:v},g),{},{stroke:"none",fill:d},w),P),{},{index:S,payload:N,visibleTicksCount:m.length,tickFormatter:f});return ft.createElement(Rs,pm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},h1(o.props,N,S)),c&&ft.createElement("line",pm({},y,A,{className:fa("recharts-cartesian-axis-tick-line",od(c,"className"))})),u&&t.renderTickItem(u,I,"".concat(Dn(f)?f(N.value,S):N.value).concat(p||"")))});return ft.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var a=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,d=s.className,u=s.hide;if(u)return null;var f=this.props,p=f.ticks,m=cj(f,Bte),b=p;return Dn(c)&&(b=p&&p.length>0?c(this.props):c(m)),o<=0||l<=0||!b||!b.length?null:ft.createElement(Rs,{className:fa("recharts-cartesian-axis",d),ref:function(g){a.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),sl.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(a,s,i){var o,l=fa(s.className,"recharts-cartesian-axis-tick-value");return ft.isValidElement(a)?o=ft.cloneElement(a,Fi(Fi({},s),{},{className:l})):Dn(a)?o=a(Fi(Fi({},s),{},{className:l})):o=ft.createElement(k1,pm({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(D.Component);a3(fp,"displayName","CartesianAxis");a3(fp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Kte=["x1","y1","x2","y2","key"],Xte=["offset"];function _h(e){"@babel/helpers - typeof";return _h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_h(e)}function GP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function il(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GP(Object(r),!0).forEach(function(a){Yte(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yte(e,t,r){return t=Qte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qte(e){var t=Jte(e,"string");return _h(t)=="symbol"?t:t+""}function Jte(e,t){if(_h(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(_h(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function lh(){return lh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lh.apply(this,arguments)}function VP(e,t){if(e==null)return{};var r=Zte(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function Zte(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}var ere=function(t){var r=t.fill;if(!r||r==="none")return null;var a=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return ft.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:a,className:"recharts-cartesian-grid-bg"})};function A7(e,t){var r;if(ft.isValidElement(e))r=ft.cloneElement(e,t);else if(Dn(e))r=e(t);else{var a=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=VP(t,Kte),d=Gn(c,!1);d.offset;var u=VP(d,Xte);r=ft.createElement("line",lh({},u,{x1:a,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function tre(e){var t=e.x,r=e.width,a=e.horizontal,s=a===void 0?!0:a,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=il(il({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return A7(s,d)});return ft.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function rre(e){var t=e.y,r=e.height,a=e.vertical,s=a===void 0?!0:a,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=il(il({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return A7(s,d)});return ft.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function nre(e){var t=e.horizontalFill,r=e.fillOpacity,a=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var u=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,m){return p-m});s!==u[0]&&u.unshift(0);var f=u.map(function(p,m){var b=!u[m+1],v=b?s+o-p:u[m+1]-p;if(v<=0)return null;var g=m%t.length;return ft.createElement("rect",{key:"react-".concat(m),y:p,x:a,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return ft.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function are(e){var t=e.vertical,r=t===void 0?!0:t,a=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!a||!a.length)return null;var u=d.map(function(p){return Math.round(p+i-i)}).sort(function(p,m){return p-m});i!==u[0]&&u.unshift(0);var f=u.map(function(p,m){var b=!u[m+1],v=b?i+l-p:u[m+1]-p;if(v<=0)return null;var g=m%a.length;return ft.createElement("rect",{key:"react-".concat(m),x:p,y:o,width:v,height:c,stroke:"none",fill:a[g],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return ft.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var sre=function(t,r){var a=t.xAxis,s=t.width,i=t.height,o=t.offset;return $F(n3(il(il(il({},fp.defaultProps),a),{},{ticks:pf(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},ire=function(t,r){var a=t.yAxis,s=t.width,i=t.height,o=t.offset;return $F(n3(il(il(il({},fp.defaultProps),a),{},{ticks:pf(a,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},sm={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function E7(e){var t,r,a,s,i,o,l=ZS(),c=e3(),d=Vee(),u=il(il({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:sm.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:sm.fill,horizontal:(a=e.horizontal)!==null&&a!==void 0?a:sm.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:sm.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:sm.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:sm.verticalFill,x:ur(e.x)?e.x:d.left,y:ur(e.y)?e.y:d.top,width:ur(e.width)?e.width:d.width,height:ur(e.height)?e.height:d.height}),f=u.x,p=u.y,m=u.width,b=u.height,v=u.syncWithTicks,g=u.horizontalValues,w=u.verticalValues,y=Hee(),j=Wee();if(!ur(m)||m<=0||!ur(b)||b<=0||!ur(f)||f!==+f||!ur(p)||p!==+p)return null;var N=u.verticalCoordinatesGenerator||sre,S=u.horizontalCoordinatesGenerator||ire,E=u.horizontalPoints,A=u.verticalPoints;if((!E||!E.length)&&Dn(S)){var P=g&&g.length,I=S({yAxis:j?il(il({},j),{},{ticks:P?g:j.ticks}):void 0,width:l,height:c,offset:d},P?!0:v);Nf(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(_h(I),"]")),Array.isArray(I)&&(E=I)}if((!A||!A.length)&&Dn(N)){var B=w&&w.length,T=N({xAxis:y?il(il({},y),{},{ticks:B?w:y.ticks}):void 0,width:l,height:c,offset:d},B?!0:v);Nf(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(_h(T),"]")),Array.isArray(T)&&(A=T)}return ft.createElement("g",{className:"recharts-cartesian-grid"},ft.createElement(ere,{fill:u.fill,fillOpacity:u.fillOpacity,x:u.x,y:u.y,width:u.width,height:u.height,ry:u.ry}),ft.createElement(tre,lh({},u,{offset:d,horizontalPoints:E,xAxis:y,yAxis:j})),ft.createElement(rre,lh({},u,{offset:d,verticalPoints:A,xAxis:y,yAxis:j})),ft.createElement(nre,lh({},u,{horizontalPoints:E})),ft.createElement(are,lh({},u,{verticalPoints:A})))}E7.displayName="CartesianGrid";var ore=["layout","type","stroke","connectNulls","isRange","ref"],lre=["key"],T7;function Km(e){"@babel/helpers - typeof";return Km=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Km(e)}function O7(e,t){if(e==null)return{};var r=cre(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function cre(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function ch(){return ch=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ch.apply(this,arguments)}function KP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function i0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?KP(Object(r),!0).forEach(function(a){Eu(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):KP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function dre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function XP(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,I7(a.key),a)}}function ure(e,t,r){return t&&XP(e.prototype,t),r&&XP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function fre(e,t,r){return t=sb(t),hre(e,P7()?Reflect.construct(t,r||[],sb(e).constructor):t.apply(e,r))}function hre(e,t){if(t&&(Km(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mre(e)}function mre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P7=function(){return!!e})()}function sb(e){return sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sb(e)}function pre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ik(e,t)}function ik(e,t){return ik=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ik(e,t)}function Eu(e,t,r){return t=I7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I7(e){var t=xre(e,"string");return Km(t)=="symbol"?t:t+""}function xre(e,t){if(Km(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Km(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var I0=(function(e){function t(){var r;dre(this,t);for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return r=fre(this,t,[].concat(s)),Eu(r,"state",{isAnimationFinished:!0}),Eu(r,"id",vg("recharts-area-")),Eu(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Dn(o)&&o()}),Eu(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Dn(o)&&o()}),r}return pre(t,e),ure(t,[{key:"renderDots",value:function(a,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,u=c.points,f=c.dataKey,p=Gn(this.props,!1),m=Gn(d,!0),b=u.map(function(g,w){var y=i0(i0(i0({key:"dot-".concat(w),r:3},p),m),{},{index:w,cx:g.x,cy:g.y,dataKey:f,value:g.value,payload:g.payload,points:u});return t.renderDotItem(d,y)}),v={clipPath:a?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return ft.createElement(Rs,ch({className:"recharts-area-dots"},v),b)}},{key:"renderHorizontalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,d=o[o.length-1].x,u=a*Math.abs(c-d),f=u0(o.map(function(p){return p.y||0}));return ur(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(u0(i.map(function(p){return p.y||0})),f)),ur(f)?ft.createElement("rect",{x:c<d?c:c-u,y:0,width:u,height:Math.floor(f+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(a){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,d=o[o.length-1].y,u=a*Math.abs(c-d),f=u0(o.map(function(p){return p.x||0}));return ur(i)&&typeof i=="number"?f=Math.max(i,f):i&&Array.isArray(i)&&i.length&&(f=Math.max(u0(i.map(function(p){return p.x||0})),f)),ur(f)?ft.createElement("rect",{x:0,y:c<d?c:c-u,width:f+(l?parseInt("".concat(l),10):1),height:Math.floor(u)}):null}},{key:"renderClipRect",value:function(a){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(a):this.renderHorizontalRect(a)}},{key:"renderAreaStatically",value:function(a,s,i,o){var l=this.props,c=l.layout,d=l.type,u=l.stroke,f=l.connectNulls,p=l.isRange;l.ref;var m=O7(l,ore);return ft.createElement(Rs,{clipPath:i?"url(#clipPath-".concat(o,")"):null},ft.createElement(sx,ch({},Gn(m,!0),{points:a,connectNulls:f,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),u!=="none"&&ft.createElement(sx,ch({},Gn(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:a})),u!=="none"&&p&&ft.createElement(sx,ch({},Gn(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:f,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(a,s){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,u=o.animationBegin,f=o.animationDuration,p=o.animationEasing,m=o.animationId,b=this.state,v=b.prevPoints,g=b.prevBaseLine;return ft.createElement(Tf,{begin:u,duration:f,isActive:d,easing:p,from:{t:0},to:{t:1},key:"area-".concat(m),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(w){var y=w.t;if(v){var j=v.length/l.length,N=l.map(function(P,I){var B=Math.floor(I*j);if(v[B]){var T=v[B],_=rd(T.x,P.x),R=rd(T.y,P.y);return i0(i0({},P),{},{x:_(y),y:R(y)})}return P}),S;if(ur(c)&&typeof c=="number"){var E=rd(g,c);S=E(y)}else if(Vn(c)||ip(c)){var A=rd(g,0);S=A(y)}else S=c.map(function(P,I){var B=Math.floor(I*j);if(g[B]){var T=g[B],_=rd(T.x,P.x),R=rd(T.y,P.y);return i0(i0({},P),{},{x:_(y),y:R(y)})}return P});return i.renderAreaStatically(N,S,a,s)}return ft.createElement(Rs,null,ft.createElement("defs",null,ft.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(y))),ft.createElement(Rs,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,a,s)))})}},{key:"renderArea",value:function(a,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,u=d.prevPoints,f=d.prevBaseLine,p=d.totalLength;return c&&o&&o.length&&(!u&&p>0||!Tx(u,o)||!Tx(f,l))?this.renderAreaWithAnimation(a,s):this.renderAreaStatically(o,l,a,s)}},{key:"render",value:function(){var a,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.top,u=s.left,f=s.xAxis,p=s.yAxis,m=s.width,b=s.height,v=s.isAnimationActive,g=s.id;if(i||!l||!l.length)return null;var w=this.state.isAnimationFinished,y=l.length===1,j=fa("recharts-area",c),N=f&&f.allowDataOverflow,S=p&&p.allowDataOverflow,E=N||S,A=Vn(g)?this.id:g,P=(a=Gn(o,!1))!==null&&a!==void 0?a:{r:3,strokeWidth:2},I=P.r,B=I===void 0?3:I,T=P.strokeWidth,_=T===void 0?2:T,R=Dq(o)?o:{},z=R.clipDot,H=z===void 0?!0:z,Y=B*2+_;return ft.createElement(Rs,{className:j},N||S?ft.createElement("defs",null,ft.createElement("clipPath",{id:"clipPath-".concat(A)},ft.createElement("rect",{x:N?u:u-m/2,y:S?d:d-b/2,width:N?m:m*2,height:S?b:b*2})),!H&&ft.createElement("clipPath",{id:"clipPath-dots-".concat(A)},ft.createElement("rect",{x:u-Y/2,y:d-Y/2,width:m+Y,height:b+Y}))):null,y?null:this.renderArea(E,A),(o||y)&&this.renderDots(E,H,A),(!v||w)&&v0.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(a,s){return a.animationId!==s.prevAnimationId?{prevAnimationId:a.animationId,curPoints:a.points,curBaseLine:a.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:a.points!==s.curPoints||a.baseLine!==s.curBaseLine?{curPoints:a.points,curBaseLine:a.baseLine}:null}}])})(D.PureComponent);T7=I0;Eu(I0,"displayName","Area");Eu(I0,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!lp.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Eu(I0,"getBaseValue",function(e,t,r,a){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(ur(l)&&typeof l=="number")return l;var c=s==="horizontal"?a:r,d=c.scale.domain();if(c.type==="number"){var u=Math.max(d[0],d[1]),f=Math.min(d[0],d[1]);return l==="dataMin"?f:l==="dataMax"||u<0?u:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Eu(I0,"getComposedData",function(e){var t=e.props,r=e.item,a=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,f=e.displayedData,p=e.offset,m=t.layout,b=d&&d.length,v=T7.getBaseValue(t,r,a,s),g=m==="horizontal",w=!1,y=f.map(function(N,S){var E;b?E=d[u+S]:(E=Sc(N,c),Array.isArray(E)?w=!0:E=[v,E]);var A=E[1]==null||b&&Sc(N,c)==null;return g?{x:hO({axis:a,ticks:i,bandSize:l,entry:N,index:S}),y:A?null:s.scale(E[1]),value:E,payload:N}:{x:A?null:a.scale(E[1]),y:hO({axis:s,ticks:o,bandSize:l,entry:N,index:S}),value:E,payload:N}}),j;return b||w?j=y.map(function(N){var S=Array.isArray(N.value)?N.value[0]:null;return g?{x:N.x,y:S!=null&&N.y!=null?s.scale(S):null}:{x:S!=null?a.scale(S):null,y:N.y}}):j=g?s.scale(v):a.scale(v),i0({points:y,baseLine:j,layout:m,isRange:w},p)});Eu(I0,"renderDotItem",function(e,t){var r;if(ft.isValidElement(e))r=ft.cloneElement(e,t);else if(Dn(e))r=e(t);else{var a=fa("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=O7(t,lre);r=ft.createElement(XS,ch({},i,{key:s,className:a}))}return r});function Xm(e){"@babel/helpers - typeof";return Xm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xm(e)}function gre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,F7(a.key),a)}}function bre(e,t,r){return t&&vre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function yre(e,t,r){return t=ib(t),wre(e,D7()?Reflect.construct(t,r||[],ib(e).constructor):t.apply(e,r))}function wre(e,t){if(t&&(Xm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nre(e)}function Nre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(D7=function(){return!!e})()}function ib(e){return ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ib(e)}function jre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ok(e,t)}function ok(e,t){return ok=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ok(e,t)}function L7(e,t,r){return t=F7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function F7(e){var t=kre(e,"string");return Xm(t)=="symbol"?t:t+""}function kre(e,t){if(Xm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Xm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function lk(){return lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},lk.apply(this,arguments)}function Sre(e){var t=e.xAxisId,r=ZS(),a=e3(),s=g7(t);return s==null?null:D.createElement(fp,lk({},s,{className:fa("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:a},ticksGenerator:function(o){return pf(o,!0)}}))}var uy=(function(e){function t(){return gre(this,t),yre(this,t,arguments)}return jre(t,e),bre(t,[{key:"render",value:function(){return D.createElement(Sre,this.props)}}])})(D.Component);L7(uy,"displayName","XAxis");L7(uy,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ym(e){"@babel/helpers - typeof";return Ym=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ym(e)}function _re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Cre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,B7(a.key),a)}}function Are(e,t,r){return t&&Cre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ere(e,t,r){return t=ob(t),Tre(e,M7()?Reflect.construct(t,r||[],ob(e).constructor):t.apply(e,r))}function Tre(e,t){if(t&&(Ym(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ore(e)}function Ore(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function M7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(M7=function(){return!!e})()}function ob(e){return ob=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ob(e)}function Pre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ck(e,t)}function ck(e,t){return ck=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},ck(e,t)}function R7(e,t,r){return t=B7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function B7(e){var t=Ire(e,"string");return Ym(t)=="symbol"?t:t+""}function Ire(e,t){if(Ym(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Ym(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function dk(){return dk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},dk.apply(this,arguments)}var Dre=function(t){var r=t.yAxisId,a=ZS(),s=e3(),i=v7(r);return i==null?null:D.createElement(fp,dk({},i,{className:fa("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:a,height:s},ticksGenerator:function(l){return pf(l,!0)}}))},fy=(function(e){function t(){return _re(this,t),Ere(this,t,arguments)}return Pre(t,e),Are(t,[{key:"render",value:function(){return D.createElement(Dre,this.props)}}])})(D.Component);R7(fy,"displayName","YAxis");R7(fy,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function YP(e){return Rre(e)||Mre(e)||Fre(e)||Lre()}function Lre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fre(e,t){if(e){if(typeof e=="string")return uk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return uk(e,t)}}function Mre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Rre(e){if(Array.isArray(e))return uk(e)}function uk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var fk=function(t,r,a,s,i){var o=Jd(t,r3),l=Jd(t,ly),c=[].concat(YP(o),YP(l)),d=Jd(t,dy),u="".concat(s,"Id"),f=s[0],p=r;if(c.length&&(p=c.reduce(function(v,g){if(g.props[u]===a&&Lu(g.props,"extendDomain")&&ur(g.props[f])){var w=g.props[f];return[Math.min(v[0],w),Math.max(v[1],w)]}return v},p)),d.length){var m="".concat(f,"1"),b="".concat(f,"2");p=d.reduce(function(v,g){if(g.props[u]===a&&Lu(g.props,"extendDomain")&&ur(g.props[m])&&ur(g.props[b])){var w=g.props[m],y=g.props[b];return[Math.min(v[0],w,y),Math.max(v[1],w,y)]}return v},p)}return i&&i.length&&(p=i.reduce(function(v,g){return ur(g)?[Math.min(v[0],g),Math.max(v[1],g)]:v},p)),p},dj={exports:{}},QP;function Bre(){return QP||(QP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(r=!1));function s(c,d,u){this.fn=c,this.context=d,this.once=u||!1}function i(c,d,u,f,p){if(typeof u!="function")throw new TypeError("The listener must be a function");var m=new s(u,f||c,p),b=r?r+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],m]:c._events[b].push(m):(c._events[b]=m,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new a:delete c._events[d]}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],u,f;if(this._eventsCount===0)return d;for(f in u=this._events)t.call(u,f)&&d.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(u)):d},l.prototype.listeners=function(d){var u=r?r+d:d,f=this._events[u];if(!f)return[];if(f.fn)return[f.fn];for(var p=0,m=f.length,b=new Array(m);p<m;p++)b[p]=f[p].fn;return b},l.prototype.listenerCount=function(d){var u=r?r+d:d,f=this._events[u];return f?f.fn?1:f.length:0},l.prototype.emit=function(d,u,f,p,m,b){var v=r?r+d:d;if(!this._events[v])return!1;var g=this._events[v],w=arguments.length,y,j;if(g.fn){switch(g.once&&this.removeListener(d,g.fn,void 0,!0),w){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,f),!0;case 4:return g.fn.call(g.context,u,f,p),!0;case 5:return g.fn.call(g.context,u,f,p,m),!0;case 6:return g.fn.call(g.context,u,f,p,m,b),!0}for(j=1,y=new Array(w-1);j<w;j++)y[j-1]=arguments[j];g.fn.apply(g.context,y)}else{var N=g.length,S;for(j=0;j<N;j++)switch(g[j].once&&this.removeListener(d,g[j].fn,void 0,!0),w){case 1:g[j].fn.call(g[j].context);break;case 2:g[j].fn.call(g[j].context,u);break;case 3:g[j].fn.call(g[j].context,u,f);break;case 4:g[j].fn.call(g[j].context,u,f,p);break;default:if(!y)for(S=1,y=new Array(w-1);S<w;S++)y[S-1]=arguments[S];g[j].fn.apply(g[j].context,y)}}return!0},l.prototype.on=function(d,u,f){return i(this,d,u,f,!1)},l.prototype.once=function(d,u,f){return i(this,d,u,f,!0)},l.prototype.removeListener=function(d,u,f,p){var m=r?r+d:d;if(!this._events[m])return this;if(!u)return o(this,m),this;var b=this._events[m];if(b.fn)b.fn===u&&(!p||b.once)&&(!f||b.context===f)&&o(this,m);else{for(var v=0,g=[],w=b.length;v<w;v++)(b[v].fn!==u||p&&!b[v].once||f&&b[v].context!==f)&&g.push(b[v]);g.length?this._events[m]=g.length===1?g[0]:g:o(this,m)}return this},l.prototype.removeAllListeners=function(d){var u;return d?(u=r?r+d:d,this._events[u]&&o(this,u)):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(dj)),dj.exports}var Ure=Bre();const qre=La(Ure);var uj=new qre,fj="recharts.syncMouseEvents";function Jx(e){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jx(e)}function $re(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zre(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,U7(a.key),a)}}function Hre(e,t,r){return t&&zre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function hj(e,t,r){return t=U7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function U7(e){var t=Wre(e,"string");return Jx(t)=="symbol"?t:t+""}function Wre(e,t){if(Jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Jx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Gre=(function(){function e(){$re(this,e),hj(this,"activeIndex",0),hj(this,"coordinateList",[]),hj(this,"layout","horizontal")}return Hre(e,[{key:"setDetails",value:function(r){var a,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,u=r.offset,f=u===void 0?null:u,p=r.mouseHandlerCallback,m=p===void 0?null:p;this.coordinateList=(a=i??this.coordinateList)!==null&&a!==void 0?a:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=m??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,a;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,u=((a=window)===null||a===void 0?void 0:a.scrollY)||0,f=i+c+d,p=o+this.offset.top+l/2+u;this.mouseHandlerCallback({pageX:f,pageY:p})}}}])})();function Vre(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var a=e?.[0],s=e?.[1];if(a&&s&&ur(a)&&ur(s))return!0}return!1}function Kre(e,t,r,a){var s=a/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?a:r.width-1,height:e==="horizontal"?r.height-1:a}}function q7(e){var t=e.cx,r=e.cy,a=e.radius,s=e.startAngle,i=e.endAngle,o=Io(t,r,a,s),l=Io(t,r,a,i);return{points:[o,l],cx:t,cy:r,radius:a,startAngle:s,endAngle:i}}function Xre(e,t,r){var a,s,i,o;if(e==="horizontal")a=t.x,i=a,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,a=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,u=t.outerRadius,f=t.angle,p=Io(l,c,d,f),m=Io(l,c,u,f);a=p.x,s=p.y,i=m.x,o=m.y}else return q7(t);return[{x:a,y:s},{x:i,y:o}]}function Zx(e){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zx(e)}function JP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function yv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JP(Object(r),!0).forEach(function(a){Yre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JP(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Yre(e,t,r){return t=Qre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qre(e){var t=Jre(e,"string");return Zx(t)=="symbol"?t:t+""}function Jre(e,t){if(Zx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Zx(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zre(e){var t,r,a=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,u=e.tooltipAxisBandSize,f=e.layout,p=e.chartName,m=(t=a.props.cursor)!==null&&t!==void 0?t:(r=a.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!a||!m||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var b,v=sx;if(p==="ScatterChart")b=o,v=eZ;else if(p==="BarChart")b=Kre(f,o,c,u),v=KS;else if(f==="radial"){var g=q7(o),w=g.cx,y=g.cy,j=g.radius,N=g.startAngle,S=g.endAngle;b={cx:w,cy:y,startAngle:N,endAngle:S,innerRadius:j,outerRadius:j},v=VF}else b={points:Xre(f,o,c)},v=sx;var E=yv(yv(yv(yv({stroke:"#ccc",pointerEvents:"none"},c),b),Gn(m,!1)),{},{payload:l,payloadIndex:d,className:fa("recharts-tooltip-cursor",m.className)});return D.isValidElement(m)?D.cloneElement(m,E):D.createElement(v,E)}var ene=["item"],tne=["children","className","width","height","style","compact","title","desc"];function Qm(e){"@babel/helpers - typeof";return Qm=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qm(e)}function xm(){return xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},xm.apply(this,arguments)}function ZP(e,t){return ane(e)||nne(e,t)||z7(e,t)||rne()}function rne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var a,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(a=i.call(r)).done)&&(l.push(a.value),l.length!==t);c=!0);}catch(u){d=!0,s=u}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function ane(e){if(Array.isArray(e))return e}function eI(e,t){if(e==null)return{};var r=sne(e,t),a,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}function sne(e,t){if(e==null)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}function ine(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function one(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,H7(a.key),a)}}function lne(e,t,r){return t&&one(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function cne(e,t,r){return t=lb(t),dne(e,$7()?Reflect.construct(t,r||[],lb(e).constructor):t.apply(e,r))}function dne(e,t){if(t&&(Qm(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return une(e)}function une(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($7=function(){return!!e})()}function lb(e){return lb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lb(e)}function fne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hk(e,t)}function hk(e,t){return hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,s){return a.__proto__=s,a},hk(e,t)}function Jm(e){return pne(e)||mne(e)||z7(e)||hne()}function hne(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function z7(e,t){if(e){if(typeof e=="string")return mk(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mk(e,t)}}function mne(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pne(e){if(Array.isArray(e))return mk(e)}function mk(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function tI(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,a)}return r}function $t(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tI(Object(r),!0).forEach(function(a){cn(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tI(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function cn(e,t,r){return t=H7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H7(e){var t=xne(e,"string");return Qm(t)=="symbol"?t:t+""}function xne(e,t){if(Qm(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(Qm(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gne={xAxis:["bottom","top"],yAxis:["left","right"]},vne={width:"100%",height:"100%"},W7={x:0,y:0};function wv(e){return e}var bne=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},yne=function(t,r,a,s){var i=r.find(function(u){return u&&u.index===a});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return $t($t($t({},s),Io(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=s.angle;return $t($t($t({},s),Io(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return W7},hy=function(t,r){var a=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(a??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(Jm(l),Jm(d)):l},[]);return o.length>0?o:t&&t.length&&ur(s)&&ur(i)?t.slice(s,i+1):[]};function G7(e){return e==="number"?[0,"auto"]:void 0}var pk=function(t,r,a,s){var i=t.graphicalItems,o=t.tooltipAxis,l=hy(r,t);return a<0||!i||!i.length||a>=l.length?null:i.reduce(function(c,d){var u,f=(u=d.props.data)!==null&&u!==void 0?u:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=a&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var m=f===void 0?l:f;p=u1(m,o.dataKey,s)}else p=f&&f[a]||l[a];return p?[].concat(Jm(c),[HF(d,p)]):c},[])},rI=function(t,r,a,s){var i=s||{x:t.chartX,y:t.chartY},o=bne(i,a),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,u=IX(o,l,d,c);if(u>=0&&d){var f=d[u]&&d[u].value,p=pk(t,r,u,f),m=yne(a,l,u,i);return{activeTooltipIndex:u,activeLabel:f,activePayload:p,activeCoordinate:m}}return null},wne=function(t,r){var a=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,p=t.stackOffset,m=qF(u,i);return a.reduce(function(b,v){var g,w=v.type.defaultProps!==void 0?$t($t({},v.type.defaultProps),v.props):v.props,y=w.type,j=w.dataKey,N=w.allowDataOverflow,S=w.allowDuplicatedCategory,E=w.scale,A=w.ticks,P=w.includeHidden,I=w[o];if(b[I])return b;var B=hy(t.data,{graphicalItems:s.filter(function(O){var q,G=o in O.props?O.props[o]:(q=O.type.defaultProps)===null||q===void 0?void 0:q[o];return G===I}),dataStartIndex:c,dataEndIndex:d}),T=B.length,_,R,z;Vre(w.domain,N,y)&&(_=D4(w.domain,null,N),m&&(y==="number"||E!=="auto")&&(z=ax(B,j,"category")));var H=G7(y);if(!_||_.length===0){var Y,J=(Y=w.domain)!==null&&Y!==void 0?Y:H;if(j){if(_=ax(B,j,y),y==="category"&&m){var re=kq(_);S&&re?(R=_,_=X1(0,T)):S||(_=gO(J,_,v).reduce(function(O,q){return O.indexOf(q)>=0?O:[].concat(Jm(O),[q])},[]))}else if(y==="category")S?_=_.filter(function(O){return O!==""&&!Vn(O)}):_=gO(J,_,v).reduce(function(O,q){return O.indexOf(q)>=0||q===""||Vn(q)?O:[].concat(Jm(O),[q])},[]);else if(y==="number"){var X=RX(B,s.filter(function(O){var q,G,U=o in O.props?O.props[o]:(q=O.type.defaultProps)===null||q===void 0?void 0:q[o],K="hide"in O.props?O.props.hide:(G=O.type.defaultProps)===null||G===void 0?void 0:G.hide;return U===I&&(P||!K)}),j,i,u);X&&(_=X)}m&&(y==="number"||E!=="auto")&&(z=ax(B,j,"category"))}else m?_=X1(0,T):l&&l[I]&&l[I].hasStack&&y==="number"?_=p==="expand"?[0,1]:zF(l[I].stackGroups,c,d):_=UF(B,s.filter(function(O){var q=o in O.props?O.props[o]:O.type.defaultProps[o],G="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return q===I&&(P||!G)}),y,u,!0);if(y==="number")_=fk(f,_,I,i,A),J&&(_=D4(J,_,N));else if(y==="category"&&J){var te=J,W=_.every(function(O){return te.indexOf(O)>=0});W&&(_=te)}}return $t($t({},b),{},cn({},I,$t($t({},w),{},{axisType:i,domain:_,categoricalDomain:z,duplicateDomain:R,originalDomain:(g=w.domain)!==null&&g!==void 0?g:H,isCategorical:m,layout:u})))},{})},Nne=function(t,r){var a=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.layout,f=t.children,p=hy(t.data,{graphicalItems:a,dataStartIndex:c,dataEndIndex:d}),m=p.length,b=qF(u,i),v=-1;return a.reduce(function(g,w){var y=w.type.defaultProps!==void 0?$t($t({},w.type.defaultProps),w.props):w.props,j=y[o],N=G7("number");if(!g[j]){v++;var S;return b?S=X1(0,m):l&&l[j]&&l[j].hasStack?(S=zF(l[j].stackGroups,c,d),S=fk(f,S,j,i)):(S=D4(N,UF(p,a.filter(function(E){var A,P,I=o in E.props?E.props[o]:(A=E.type.defaultProps)===null||A===void 0?void 0:A[o],B="hide"in E.props?E.props.hide:(P=E.type.defaultProps)===null||P===void 0?void 0:P.hide;return I===j&&!B}),"number",u),s.defaultProps.allowDataOverflow),S=fk(f,S,j,i)),$t($t({},g),{},cn({},j,$t($t({axisType:i},s.defaultProps),{},{hide:!0,orientation:od(gne,"".concat(i,".").concat(v%2),null),domain:S,originalDomain:N,isCategorical:b,layout:u})))}return g},{})},jne=function(t,r){var a=r.axisType,s=a===void 0?"xAxis":a,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,u=t.children,f="".concat(s,"Id"),p=Jd(u,i),m={};return p&&p.length?m=wne(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(m=Nne(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),m},kne=function(t){var r=d0(t),a=pf(r,!1,!0);return{tooltipTicks:a,orderedTooltipTicks:wS(a,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:B1(r,a)}},nI=function(t){var r=t.children,a=t.defaultShowTooltip,s=gc(r,$m),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!a}},Sne=function(t){return!t||!t.length?!1:t.some(function(r){var a=wf(r&&r.type);return a&&a.indexOf("Bar")>=0})},aI=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},_ne=function(t,r){var a=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=a.width,u=a.height,f=a.children,p=a.margin||{},m=gc(f,$m),b=gc(f,ym),v=Object.keys(c).reduce(function(S,E){var A=c[E],P=A.orientation;return!A.mirror&&!A.hide?$t($t({},S),{},cn({},P,S[P]+A.width)):S},{left:p.left||0,right:p.right||0}),g=Object.keys(o).reduce(function(S,E){var A=o[E],P=A.orientation;return!A.mirror&&!A.hide?$t($t({},S),{},cn({},P,od(S,"".concat(P))+A.height)):S},{top:p.top||0,bottom:p.bottom||0}),w=$t($t({},g),v),y=w.bottom;m&&(w.bottom+=m.props.height||$m.defaultProps.height),b&&r&&(w=FX(w,s,a,r));var j=d-w.left-w.right,N=u-w.top-w.bottom;return $t($t({brushBottom:y},w),{},{width:Math.max(j,0),height:Math.max(N,0)})},Cne=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Ane=function(t){var r=t.chartName,a=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,u=t.formatAxisMap,f=t.defaultProps,p=function(w,y){var j=y.graphicalItems,N=y.stackGroups,S=y.offset,E=y.updateId,A=y.dataStartIndex,P=y.dataEndIndex,I=w.barSize,B=w.layout,T=w.barGap,_=w.barCategoryGap,R=w.maxBarSize,z=aI(B),H=z.numericAxisName,Y=z.cateAxisName,J=Sne(j),re=[];return j.forEach(function(X,te){var W=hy(w.data,{graphicalItems:[X],dataStartIndex:A,dataEndIndex:P}),O=X.type.defaultProps!==void 0?$t($t({},X.type.defaultProps),X.props):X.props,q=O.dataKey,G=O.maxBarSize,U=O["".concat(H,"Id")],K=O["".concat(Y,"Id")],ae={},me=c.reduce(function(ce,Ce){var Xe=y["".concat(Ce.axisType,"Map")],xe=O["".concat(Ce.axisType,"Id")];Xe&&Xe[xe]||Ce.axisType==="zAxis"||Sh();var fe=Xe[xe];return $t($t({},ce),{},cn(cn({},Ce.axisType,fe),"".concat(Ce.axisType,"Ticks"),pf(fe)))},ae),se=me[Y],le=me["".concat(Y,"Ticks")],Me=N&&N[U]&&N[U].hasStack&&YX(X,N[U].stackGroups),ue=wf(X.type).indexOf("Bar")>=0,Ue=B1(se,le),Ae=[],ie=J&&DX({barSize:I,stackGroups:N,totalSize:Cne(me,Y)});if(ue){var Z,Ee,we=Vn(G)?R:G,Oe=(Z=(Ee=B1(se,le,!0))!==null&&Ee!==void 0?Ee:we)!==null&&Z!==void 0?Z:0;Ae=LX({barGap:T,barCategoryGap:_,bandSize:Oe!==Ue?Oe:Ue,sizeList:ie[K],maxBarSize:we}),Oe!==Ue&&(Ae=Ae.map(function(ce){return $t($t({},ce),{},{position:$t($t({},ce.position),{},{offset:ce.position.offset-Oe/2})})}))}var de=X&&X.type&&X.type.getComposedData;de&&re.push({props:$t($t({},de($t($t({},me),{},{displayedData:W,props:w,dataKey:q,item:X,bandSize:Ue,barPosition:Ae,offset:S,stackedData:Me,layout:B,dataStartIndex:A,dataEndIndex:P}))),{},cn(cn(cn({key:X.key||"item-".concat(te)},H,me[H]),Y,me[Y]),"animationId",E)),childIndex:Mq(X,w.children),item:X})}),re},m=function(w,y){var j=w.props,N=w.dataStartIndex,S=w.dataEndIndex,E=w.updateId;if(!OC({props:j}))return null;var A=j.children,P=j.layout,I=j.stackOffset,B=j.data,T=j.reverseStackOrder,_=aI(P),R=_.numericAxisName,z=_.cateAxisName,H=Jd(A,a),Y=VX(B,H,"".concat(R,"Id"),"".concat(z,"Id"),I,T),J=c.reduce(function(O,q){var G="".concat(q.axisType,"Map");return $t($t({},O),{},cn({},G,jne(j,$t($t({},q),{},{graphicalItems:H,stackGroups:q.axisType===R&&Y,dataStartIndex:N,dataEndIndex:S}))))},{}),re=_ne($t($t({},J),{},{props:j,graphicalItems:H}),y?.legendBBox);Object.keys(J).forEach(function(O){J[O]=u(j,J[O],re,O.replace("Map",""),r)});var X=J["".concat(z,"Map")],te=kne(X),W=p(j,$t($t({},J),{},{dataStartIndex:N,dataEndIndex:S,updateId:E,graphicalItems:H,stackGroups:Y,offset:re}));return $t($t({formattedGraphicalItems:W,graphicalItems:H,offset:re,stackGroups:Y},te),J)},b=(function(g){function w(y){var j,N,S;return ine(this,w),S=cne(this,w,[y]),cn(S,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),cn(S,"accessibilityManager",new Gre),cn(S,"handleLegendBBoxUpdate",function(E){if(E){var A=S.state,P=A.dataStartIndex,I=A.dataEndIndex,B=A.updateId;S.setState($t({legendBBox:E},m({props:S.props,dataStartIndex:P,dataEndIndex:I,updateId:B},$t($t({},S.state),{},{legendBBox:E}))))}}),cn(S,"handleReceiveSyncEvent",function(E,A,P){if(S.props.syncId===E){if(P===S.eventEmitterSymbol&&typeof S.props.syncMethod!="function")return;S.applySyncEvent(A)}}),cn(S,"handleBrushChange",function(E){var A=E.startIndex,P=E.endIndex;if(A!==S.state.dataStartIndex||P!==S.state.dataEndIndex){var I=S.state.updateId;S.setState(function(){return $t({dataStartIndex:A,dataEndIndex:P},m({props:S.props,dataStartIndex:A,dataEndIndex:P,updateId:I},S.state))}),S.triggerSyncEvent({dataStartIndex:A,dataEndIndex:P})}}),cn(S,"handleMouseEnter",function(E){var A=S.getMouseInfo(E);if(A){var P=$t($t({},A),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var I=S.props.onMouseEnter;Dn(I)&&I(P,E)}}),cn(S,"triggeredAfterMouseMove",function(E){var A=S.getMouseInfo(E),P=A?$t($t({},A),{},{isTooltipActive:!0}):{isTooltipActive:!1};S.setState(P),S.triggerSyncEvent(P);var I=S.props.onMouseMove;Dn(I)&&I(P,E)}),cn(S,"handleItemMouseEnter",function(E){S.setState(function(){return{isTooltipActive:!0,activeItem:E,activePayload:E.tooltipPayload,activeCoordinate:E.tooltipPosition||{x:E.cx,y:E.cy}}})}),cn(S,"handleItemMouseLeave",function(){S.setState(function(){return{isTooltipActive:!1}})}),cn(S,"handleMouseMove",function(E){E.persist(),S.throttleTriggeredAfterMouseMove(E)}),cn(S,"handleMouseLeave",function(E){S.throttleTriggeredAfterMouseMove.cancel();var A={isTooltipActive:!1};S.setState(A),S.triggerSyncEvent(A);var P=S.props.onMouseLeave;Dn(P)&&P(A,E)}),cn(S,"handleOuterEvent",function(E){var A=Fq(E),P=od(S.props,"".concat(A));if(A&&Dn(P)){var I,B;/.*touch.*/i.test(A)?B=S.getMouseInfo(E.changedTouches[0]):B=S.getMouseInfo(E),P((I=B)!==null&&I!==void 0?I:{},E)}}),cn(S,"handleClick",function(E){var A=S.getMouseInfo(E);if(A){var P=$t($t({},A),{},{isTooltipActive:!0});S.setState(P),S.triggerSyncEvent(P);var I=S.props.onClick;Dn(I)&&I(P,E)}}),cn(S,"handleMouseDown",function(E){var A=S.props.onMouseDown;if(Dn(A)){var P=S.getMouseInfo(E);A(P,E)}}),cn(S,"handleMouseUp",function(E){var A=S.props.onMouseUp;if(Dn(A)){var P=S.getMouseInfo(E);A(P,E)}}),cn(S,"handleTouchMove",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.throttleTriggeredAfterMouseMove(E.changedTouches[0])}),cn(S,"handleTouchStart",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseDown(E.changedTouches[0])}),cn(S,"handleTouchEnd",function(E){E.changedTouches!=null&&E.changedTouches.length>0&&S.handleMouseUp(E.changedTouches[0])}),cn(S,"handleDoubleClick",function(E){var A=S.props.onDoubleClick;if(Dn(A)){var P=S.getMouseInfo(E);A(P,E)}}),cn(S,"handleContextMenu",function(E){var A=S.props.onContextMenu;if(Dn(A)){var P=S.getMouseInfo(E);A(P,E)}}),cn(S,"triggerSyncEvent",function(E){S.props.syncId!==void 0&&uj.emit(fj,S.props.syncId,E,S.eventEmitterSymbol)}),cn(S,"applySyncEvent",function(E){var A=S.props,P=A.layout,I=A.syncMethod,B=S.state.updateId,T=E.dataStartIndex,_=E.dataEndIndex;if(E.dataStartIndex!==void 0||E.dataEndIndex!==void 0)S.setState($t({dataStartIndex:T,dataEndIndex:_},m({props:S.props,dataStartIndex:T,dataEndIndex:_,updateId:B},S.state)));else if(E.activeTooltipIndex!==void 0){var R=E.chartX,z=E.chartY,H=E.activeTooltipIndex,Y=S.state,J=Y.offset,re=Y.tooltipTicks;if(!J)return;if(typeof I=="function")H=I(re,E);else if(I==="value"){H=-1;for(var X=0;X<re.length;X++)if(re[X].value===E.activeLabel){H=X;break}}var te=$t($t({},J),{},{x:J.left,y:J.top}),W=Math.min(R,te.x+te.width),O=Math.min(z,te.y+te.height),q=re[H]&&re[H].value,G=pk(S.state,S.props.data,H),U=re[H]?{x:P==="horizontal"?re[H].coordinate:W,y:P==="horizontal"?O:re[H].coordinate}:W7;S.setState($t($t({},E),{},{activeLabel:q,activeCoordinate:U,activePayload:G,activeTooltipIndex:H}))}else S.setState(E)}),cn(S,"renderCursor",function(E){var A,P=S.state,I=P.isTooltipActive,B=P.activeCoordinate,T=P.activePayload,_=P.offset,R=P.activeTooltipIndex,z=P.tooltipAxisBandSize,H=S.getTooltipEventType(),Y=(A=E.props.active)!==null&&A!==void 0?A:I,J=S.props.layout,re=E.key||"_recharts-cursor";return ft.createElement(Zre,{key:re,activeCoordinate:B,activePayload:T,activeTooltipIndex:R,chartName:r,element:E,isActive:Y,layout:J,offset:_,tooltipAxisBandSize:z,tooltipEventType:H})}),cn(S,"renderPolarAxis",function(E,A,P){var I=od(E,"type.axisType"),B=od(S.state,"".concat(I,"Map")),T=E.type.defaultProps,_=T!==void 0?$t($t({},T),E.props):E.props,R=B&&B[_["".concat(I,"Id")]];return D.cloneElement(E,$t($t({},R),{},{className:fa(I,R.className),key:E.key||"".concat(A,"-").concat(P),ticks:pf(R,!0)}))}),cn(S,"renderPolarGrid",function(E){var A=E.props,P=A.radialLines,I=A.polarAngles,B=A.polarRadius,T=S.state,_=T.radiusAxisMap,R=T.angleAxisMap,z=d0(_),H=d0(R),Y=H.cx,J=H.cy,re=H.innerRadius,X=H.outerRadius;return D.cloneElement(E,{polarAngles:Array.isArray(I)?I:pf(H,!0).map(function(te){return te.coordinate}),polarRadius:Array.isArray(B)?B:pf(z,!0).map(function(te){return te.coordinate}),cx:Y,cy:J,innerRadius:re,outerRadius:X,key:E.key||"polar-grid",radialLines:P})}),cn(S,"renderLegend",function(){var E=S.state.formattedGraphicalItems,A=S.props,P=A.children,I=A.width,B=A.height,T=S.props.margin||{},_=I-(T.left||0)-(T.right||0),R=RF({children:P,formattedGraphicalItems:E,legendWidth:_,legendContent:d});if(!R)return null;var z=R.item,H=eI(R,ene);return D.cloneElement(z,$t($t({},H),{},{chartWidth:I,chartHeight:B,margin:T,onBBoxUpdate:S.handleLegendBBoxUpdate}))}),cn(S,"renderTooltip",function(){var E,A=S.props,P=A.children,I=A.accessibilityLayer,B=gc(P,_u);if(!B)return null;var T=S.state,_=T.isTooltipActive,R=T.activeCoordinate,z=T.activePayload,H=T.activeLabel,Y=T.offset,J=(E=B.props.active)!==null&&E!==void 0?E:_;return D.cloneElement(B,{viewBox:$t($t({},Y),{},{x:Y.left,y:Y.top}),active:J,label:H,payload:J?z:[],coordinate:R,accessibilityLayer:I})}),cn(S,"renderBrush",function(E){var A=S.props,P=A.margin,I=A.data,B=S.state,T=B.offset,_=B.dataStartIndex,R=B.dataEndIndex,z=B.updateId;return D.cloneElement(E,{key:E.key||"_recharts-brush",onChange:xv(S.handleBrushChange,E.props.onChange),data:I,x:ur(E.props.x)?E.props.x:T.left,y:ur(E.props.y)?E.props.y:T.top+T.height+T.brushBottom-(P.bottom||0),width:ur(E.props.width)?E.props.width:T.width,startIndex:_,endIndex:R,updateId:"brush-".concat(z)})}),cn(S,"renderReferenceElement",function(E,A,P){if(!E)return null;var I=S,B=I.clipPathId,T=S.state,_=T.xAxisMap,R=T.yAxisMap,z=T.offset,H=E.type.defaultProps||{},Y=E.props,J=Y.xAxisId,re=J===void 0?H.xAxisId:J,X=Y.yAxisId,te=X===void 0?H.yAxisId:X;return D.cloneElement(E,{key:E.key||"".concat(A,"-").concat(P),xAxis:_[re],yAxis:R[te],viewBox:{x:z.left,y:z.top,width:z.width,height:z.height},clipPathId:B})}),cn(S,"renderActivePoints",function(E){var A=E.item,P=E.activePoint,I=E.basePoint,B=E.childIndex,T=E.isRange,_=[],R=A.props.key,z=A.item.type.defaultProps!==void 0?$t($t({},A.item.type.defaultProps),A.item.props):A.item.props,H=z.activeDot,Y=z.dataKey,J=$t($t({index:B,dataKey:Y,cx:P.x,cy:P.y,r:4,fill:VS(A.item),strokeWidth:2,stroke:"#fff",payload:P.payload,value:P.value},Gn(H,!1)),f1(H));return _.push(w.renderActiveDot(H,J,"".concat(R,"-activePoint-").concat(B))),I?_.push(w.renderActiveDot(H,$t($t({},J),{},{cx:I.x,cy:I.y}),"".concat(R,"-basePoint-").concat(B))):T&&_.push(null),_}),cn(S,"renderGraphicChild",function(E,A,P){var I=S.filterFormatItem(E,A,P);if(!I)return null;var B=S.getTooltipEventType(),T=S.state,_=T.isTooltipActive,R=T.tooltipAxis,z=T.activeTooltipIndex,H=T.activeLabel,Y=S.props.children,J=gc(Y,_u),re=I.props,X=re.points,te=re.isRange,W=re.baseLine,O=I.item.type.defaultProps!==void 0?$t($t({},I.item.type.defaultProps),I.item.props):I.item.props,q=O.activeDot,G=O.hide,U=O.activeBar,K=O.activeShape,ae=!!(!G&&_&&J&&(q||U||K)),me={};B!=="axis"&&J&&J.props.trigger==="click"?me={onClick:xv(S.handleItemMouseEnter,E.props.onClick)}:B!=="axis"&&(me={onMouseLeave:xv(S.handleItemMouseLeave,E.props.onMouseLeave),onMouseEnter:xv(S.handleItemMouseEnter,E.props.onMouseEnter)});var se=D.cloneElement(E,$t($t({},I.props),me));function le(Ce){return typeof R.dataKey=="function"?R.dataKey(Ce.payload):null}if(ae)if(z>=0){var Me,ue;if(R.dataKey&&!R.allowDuplicatedCategory){var Ue=typeof R.dataKey=="function"?le:"payload.".concat(R.dataKey.toString());Me=u1(X,Ue,H),ue=te&&W&&u1(W,Ue,H)}else Me=X?.[z],ue=te&&W&&W[z];if(K||U){var Ae=E.props.activeIndex!==void 0?E.props.activeIndex:z;return[D.cloneElement(E,$t($t($t({},I.props),me),{},{activeIndex:Ae})),null,null]}if(!Vn(Me))return[se].concat(Jm(S.renderActivePoints({item:I,activePoint:Me,basePoint:ue,childIndex:z,isRange:te})))}else{var ie,Z=(ie=S.getItemByXY(S.state.activeCoordinate))!==null&&ie!==void 0?ie:{graphicalItem:se},Ee=Z.graphicalItem,we=Ee.item,Oe=we===void 0?E:we,de=Ee.childIndex,ce=$t($t($t({},I.props),me),{},{activeIndex:de});return[D.cloneElement(Oe,ce),null,null]}return te?[se,null,null]:[se,null]}),cn(S,"renderCustomized",function(E,A,P){return D.cloneElement(E,$t($t({key:"recharts-customized-".concat(P)},S.props),S.state))}),cn(S,"renderMap",{CartesianGrid:{handler:wv,once:!0},ReferenceArea:{handler:S.renderReferenceElement},ReferenceLine:{handler:wv},ReferenceDot:{handler:S.renderReferenceElement},XAxis:{handler:wv},YAxis:{handler:wv},Brush:{handler:S.renderBrush,once:!0},Bar:{handler:S.renderGraphicChild},Line:{handler:S.renderGraphicChild},Area:{handler:S.renderGraphicChild},Radar:{handler:S.renderGraphicChild},RadialBar:{handler:S.renderGraphicChild},Scatter:{handler:S.renderGraphicChild},Pie:{handler:S.renderGraphicChild},Funnel:{handler:S.renderGraphicChild},Tooltip:{handler:S.renderCursor,once:!0},PolarGrid:{handler:S.renderPolarGrid,once:!0},PolarAngleAxis:{handler:S.renderPolarAxis},PolarRadiusAxis:{handler:S.renderPolarAxis},Customized:{handler:S.renderCustomized}}),S.clipPathId="".concat((j=y.id)!==null&&j!==void 0?j:vg("recharts"),"-clip"),S.throttleTriggeredAfterMouseMove=ML(S.triggeredAfterMouseMove,(N=y.throttleDelay)!==null&&N!==void 0?N:1e3/60),S.state={},S}return fne(w,g),lne(w,[{key:"componentDidMount",value:function(){var j,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(j=this.props.margin.left)!==null&&j!==void 0?j:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var j=this.props,N=j.children,S=j.data,E=j.height,A=j.layout,P=gc(N,_u);if(P){var I=P.props.defaultIndex;if(!(typeof I!="number"||I<0||I>this.state.tooltipTicks.length-1)){var B=this.state.tooltipTicks[I]&&this.state.tooltipTicks[I].value,T=pk(this.state,S,I,B),_=this.state.tooltipTicks[I].coordinate,R=(this.state.offset.top+E)/2,z=A==="horizontal",H=z?{x:_,y:R}:{y:_,x:R},Y=this.state.formattedGraphicalItems.find(function(re){var X=re.item;return X.type.name==="Scatter"});Y&&(H=$t($t({},H),Y.props.points[I].tooltipPosition),T=Y.props.points[I].tooltipPayload);var J={activeTooltipIndex:I,isTooltipActive:!0,activeLabel:B,activePayload:T,activeCoordinate:H};this.setState(J),this.renderCursor(P),this.accessibilityManager.setIndex(I)}}}},{key:"getSnapshotBeforeUpdate",value:function(j,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==j.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==j.margin){var S,E;this.accessibilityManager.setDetails({offset:{left:(S=this.props.margin.left)!==null&&S!==void 0?S:0,top:(E=this.props.margin.top)!==null&&E!==void 0?E:0}})}return null}},{key:"componentDidUpdate",value:function(j){r4([gc(j.children,_u)],[gc(this.props.children,_u)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var j=gc(this.props.children,_u);if(j&&typeof j.props.shared=="boolean"){var N=j.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(j){if(!this.container)return null;var N=this.container,S=N.getBoundingClientRect(),E=kW(S),A={chartX:Math.round(j.pageX-E.left),chartY:Math.round(j.pageY-E.top)},P=S.width/N.offsetWidth||1,I=this.inRange(A.chartX,A.chartY,P);if(!I)return null;var B=this.state,T=B.xAxisMap,_=B.yAxisMap,R=this.getTooltipEventType(),z=rI(this.state,this.props.data,this.props.layout,I);if(R!=="axis"&&T&&_){var H=d0(T).scale,Y=d0(_).scale,J=H&&H.invert?H.invert(A.chartX):null,re=Y&&Y.invert?Y.invert(A.chartY):null;return $t($t({},A),{},{xValue:J,yValue:re},z)}return z?$t($t({},A),z):null}},{key:"inRange",value:function(j,N){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=this.props.layout,A=j/S,P=N/S;if(E==="horizontal"||E==="vertical"){var I=this.state.offset,B=A>=I.left&&A<=I.left+I.width&&P>=I.top&&P<=I.top+I.height;return B?{x:A,y:P}:null}var T=this.state,_=T.angleAxisMap,R=T.radiusAxisMap;if(_&&R){var z=d0(_);return yO({x:A,y:P},z)}return null}},{key:"parseEventsOfWrapper",value:function(){var j=this.props.children,N=this.getTooltipEventType(),S=gc(j,_u),E={};S&&N==="axis"&&(S.props.trigger==="click"?E={onClick:this.handleClick}:E={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var A=f1(this.props,this.handleOuterEvent);return $t($t({},A),E)}},{key:"addListener",value:function(){uj.on(fj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){uj.removeListener(fj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(j,N,S){for(var E=this.state.formattedGraphicalItems,A=0,P=E.length;A<P;A++){var I=E[A];if(I.item===j||I.props.key===j.key||N===wf(I.item.type)&&S===I.childIndex)return I}return null}},{key:"renderClipPath",value:function(){var j=this.clipPathId,N=this.state.offset,S=N.left,E=N.top,A=N.height,P=N.width;return ft.createElement("defs",null,ft.createElement("clipPath",{id:j},ft.createElement("rect",{x:S,y:E,height:A,width:P})))}},{key:"getXScales",value:function(){var j=this.state.xAxisMap;return j?Object.entries(j).reduce(function(N,S){var E=ZP(S,2),A=E[0],P=E[1];return $t($t({},N),{},cn({},A,P.scale))},{}):null}},{key:"getYScales",value:function(){var j=this.state.yAxisMap;return j?Object.entries(j).reduce(function(N,S){var E=ZP(S,2),A=E[0],P=E[1];return $t($t({},N),{},cn({},A,P.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(j){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(j){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[j])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(j){var N=this.state,S=N.formattedGraphicalItems,E=N.activeItem;if(S&&S.length)for(var A=0,P=S.length;A<P;A++){var I=S[A],B=I.props,T=I.item,_=T.type.defaultProps!==void 0?$t($t({},T.type.defaultProps),T.props):T.props,R=wf(T.type);if(R==="Bar"){var z=(B.data||[]).find(function(re){return HJ(j,re)});if(z)return{graphicalItem:I,payload:z}}else if(R==="RadialBar"){var H=(B.data||[]).find(function(re){return yO(j,re)});if(H)return{graphicalItem:I,payload:H}}else if(ay(I,E)||sy(I,E)||Vx(I,E)){var Y=DZ({graphicalItem:I,activeTooltipItem:E,itemData:_.data}),J=_.activeIndex===void 0?Y:_.activeIndex;return{graphicalItem:$t($t({},I),{},{childIndex:J}),payload:Vx(I,E)?_.data[Y]:I.props.data[Y]}}}return null}},{key:"render",value:function(){var j=this;if(!OC(this))return null;var N=this.props,S=N.children,E=N.className,A=N.width,P=N.height,I=N.style,B=N.compact,T=N.title,_=N.desc,R=eI(N,tne),z=Gn(R,!1);if(B)return ft.createElement(LP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ft.createElement(a4,xm({},z,{width:A,height:P,title:T,desc:_}),this.renderClipPath(),IC(S,this.renderMap)));if(this.props.accessibilityLayer){var H,Y;z.tabIndex=(H=this.props.tabIndex)!==null&&H!==void 0?H:0,z.role=(Y=this.props.role)!==null&&Y!==void 0?Y:"application",z.onKeyDown=function(re){j.accessibilityManager.keyboardEvent(re)},z.onFocus=function(){j.accessibilityManager.focus()}}var J=this.parseEventsOfWrapper();return ft.createElement(LP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},ft.createElement("div",xm({className:fa("recharts-wrapper",E),style:$t({position:"relative",cursor:"default",width:A,height:P},I)},J,{ref:function(X){j.container=X}}),ft.createElement(a4,xm({},z,{width:A,height:P,title:T,desc:_,style:vne}),this.renderClipPath(),IC(S,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(D.Component);cn(b,"displayName",r),cn(b,"defaultProps",$t({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),cn(b,"getDerivedStateFromProps",function(g,w){var y=g.dataKey,j=g.data,N=g.children,S=g.width,E=g.height,A=g.layout,P=g.stackOffset,I=g.margin,B=w.dataStartIndex,T=w.dataEndIndex;if(w.updateId===void 0){var _=nI(g);return $t($t($t({},_),{},{updateId:0},m($t($t({props:g},_),{},{updateId:0}),w)),{},{prevDataKey:y,prevData:j,prevWidth:S,prevHeight:E,prevLayout:A,prevStackOffset:P,prevMargin:I,prevChildren:N})}if(y!==w.prevDataKey||j!==w.prevData||S!==w.prevWidth||E!==w.prevHeight||A!==w.prevLayout||P!==w.prevStackOffset||!bm(I,w.prevMargin)){var R=nI(g),z={chartX:w.chartX,chartY:w.chartY,isTooltipActive:w.isTooltipActive},H=$t($t({},rI(w,j,A)),{},{updateId:w.updateId+1}),Y=$t($t($t({},R),z),H);return $t($t($t({},Y),m($t({props:g},Y),w)),{},{prevDataKey:y,prevData:j,prevWidth:S,prevHeight:E,prevLayout:A,prevStackOffset:P,prevMargin:I,prevChildren:N})}if(!r4(N,w.prevChildren)){var J,re,X,te,W=gc(N,$m),O=W&&(J=(re=W.props)===null||re===void 0?void 0:re.startIndex)!==null&&J!==void 0?J:B,q=W&&(X=(te=W.props)===null||te===void 0?void 0:te.endIndex)!==null&&X!==void 0?X:T,G=O!==B||q!==T,U=!Vn(j),K=U&&!G?w.updateId:w.updateId+1;return $t($t({updateId:K},m($t($t({props:g},w),{},{updateId:K,dataStartIndex:O,dataEndIndex:q}),w)),{},{prevChildren:N,dataStartIndex:O,dataEndIndex:q})}return null}),cn(b,"renderActiveDot",function(g,w,y){var j;return D.isValidElement(g)?j=D.cloneElement(g,w):Dn(g)?j=g(w):j=ft.createElement(XS,w),ft.createElement(Rs,{className:"recharts-active-dot",key:y},j)});var v=D.forwardRef(function(w,y){return ft.createElement(b,xm({},w,{ref:y}))});return v.displayName=b.displayName,v},Ene=Ane({chartName:"AreaChart",GraphicalChild:I0,axisComponents:[{axisType:"xAxis",AxisComp:uy},{axisType:"yAxis",AxisComp:fy}],formatAxisMap:Tee});const Tne=e=>{const t=e.toUpperCase().charCodeAt(0),r=[{bg:"bg-indigo-500",text:"text-white"},{bg:"bg-emerald-500",text:"text-white"},{bg:"bg-amber-500",text:"text-white"},{bg:"bg-rose-500",text:"text-white"},{bg:"bg-blue-500",text:"text-white"},{bg:"bg-purple-500",text:"text-white"},{bg:"bg-pink-500",text:"text-white"},{bg:"bg-cyan-500",text:"text-white"},{bg:"bg-orange-500",text:"text-white"},{bg:"bg-teal-500",text:"text-white"},{bg:"bg-lime-500",text:"text-white"},{bg:"bg-violet-500",text:"text-white"},{bg:"bg-fuchsia-500",text:"text-white"},{bg:"bg-sky-500",text:"text-white"},{bg:"bg-red-500",text:"text-white"},{bg:"bg-green-500",text:"text-white"}];return r[t%r.length]},Xs=({src:e,alt:t,className:r,fallbackText:a,isAvatar:s})=>{const[i,o]=D.useState(!1),[l,c]=D.useState(!1),d=D.useMemo(()=>{const g=(a||t||"").trim();if(!g)return"?";if(s){const w=g.match(/[a-zA-Z0-9]/);return w?w[0].toUpperCase():"?"}else{const w=g.split(/\s+/).filter(y=>y.length>0);if(w.length===0)return"?";if(w.length===1){const y=w[0].match(/[a-zA-Z0-9]/);return y?y[0].toUpperCase():"?"}else{const y=w[0].match(/[a-zA-Z0-9]/),j=w[1].match(/[a-zA-Z0-9]/),N=y?y[0].toUpperCase():"",S=j?j[0].toUpperCase():"";return N&&S?`${N}${S}`:N||"?"}}},[a,t,s]),u=D.useMemo(()=>Tne(d),[d]),f=()=>r?.includes("w-5")||r?.includes("h-5")?"text-[10px]":r?.includes("w-6")||r?.includes("h-6")?"text-xs":r?.includes("w-8")||r?.includes("h-8")?"text-sm":r?.includes("w-10")||r?.includes("h-10")?"text-base":r?.includes("w-12")||r?.includes("h-12")||r?.includes("w-14")||r?.includes("h-14")?"text-lg":r?.includes("w-16")||r?.includes("h-16")?"text-xl":r?.includes("w-20")||r?.includes("h-20")?"text-2xl":r?.includes("w-24")||r?.includes("h-24")?"text-3xl":"text-base",m=s?"rounded-full":r?.includes("rounded-3xl")?"rounded-3xl":r?.includes("rounded-xl")?"rounded-xl":r?.includes("rounded-lg")?"rounded-lg":r?.includes("rounded-md")?"rounded-md":r?.includes("rounded-sm")?"rounded-sm":"rounded-lg",b=(r||"").replace(/\brounded-(full|3xl|xl|lg|md|sm)\b/g,"").trim();if(!s){const v=`${b} ${m} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return n.jsx("div",{className:v,children:n.jsx("span",{className:f(),children:d})})}if(!e||i){const v=`${b} ${m} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return n.jsx("div",{className:v,children:n.jsx("span",{className:f(),children:d})})}return n.jsxs(n.Fragment,{children:[!l&&n.jsx("div",{className:`${b} ${m} ${u.bg} ${u.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`,children:n.jsx("span",{className:f(),children:d})}),n.jsx("img",{src:e,alt:t,className:`${b} ${m} object-cover`,onError:()=>o(!0),onLoad:()=>c(!0),style:{display:l?"block":"none"}})]})},sI=(e,t=[])=>{if(typeof window>"u")return t;const r=localStorage.getItem(`impactflow_sim_${e}`);return r?JSON.parse(r):t},Nv=(e,t)=>{typeof window>"u"||localStorage.setItem(`impactflow_sim_${e}`,JSON.stringify(t))},iI=async(e,t={})=>{await new Promise(o=>setTimeout(o,600));const r=t.body?JSON.parse(t.body):{},a=(t.method||"GET").toUpperCase();if(console.info(`[VIRTUAL SERVER] ${a} ${e}`,r),e==="/auth/send-otp"||e==="/auth/request-code"){const o=r.email?.toLowerCase().trim();return console.warn("[VIRTUAL SERVER] Simulator fallback active for AUTH"),Qv.some(c=>c.email.toLowerCase().trim()===o)?{success:!0,message:"Simulated OTP sent to "+o}:{status:404,message:"Account not found - contact your Administrator",success:!1}}if(e==="/auth/verify-otp"||e==="/auth/verify"){const o=r.email?.toLowerCase().trim();return{success:!0,token:"v-token-123",user:Qv.find(c=>c.email.toLowerCase()===o)||{id:"u-gen",name:"Impact Member",email:r.email,role:"User",avatar:`https://picsum.photos/seed/${r.email}/100/100`,active:!0}}}if(e.includes("feedback")){let o=sI("feedback",[]);if(a==="POST"){const l={id:`fb-${Date.now()}`,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return o.unshift(l),Nv("feedback",o),{success:!0,data:l,simulated:!0}}if(a==="PATCH"||a==="PUT"){const l=e.split("/").pop();return o=o.map(c=>c.id===l?{...c,...r,updatedAt:new Date().toISOString()}:c),Nv("feedback",o),{success:!0,simulated:!0}}if(a==="DELETE"){const l=e.split("/").pop();return o=o.filter(c=>c.id!==l),Nv("feedback",o),{success:!0,simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("/satisfaction/templates/default")){if(a==="GET")return{success:!0,data:{id:"sim-template-1",workspaceId:"default",name:"Default NPS Survey",isDefault:!0,questions:[{id:"q1",type:"nps",text:"On a scale of 010, how likely are you to recommend Impact 24x7 to a colleague or partner?",required:!0,order:1},{id:"q2",type:"multiple_choice",text:"What is the main reason for your score?",required:!1,options:["Service Quality","Communication","Timeliness","Value for Money","Technical Expertise","Other"],order:2},{id:"q3",type:"free_text",text:"What could we do to improve your experience?",required:!1,order:3},{id:"q4",type:"free_text",text:"Any additional comments or feedback?",required:!1,order:4}],updatedAt:new Date().toISOString(),updatedBy:"system"},simulated:!0};if(a==="PUT")return{success:!0,data:{...r,updatedAt:new Date().toISOString()},simulated:!0}}const i=["deals","projects","tasks","invoices","companies","contacts","expenses","expense-categories"].find(o=>e.includes(o));if(i){let o=sI(i,[]);if(a==="POST"){const l={id:`sim-${i}-${Date.now()}`,...r,createdAt:new Date().toISOString()};return o.unshift(l),Nv(i,o),{success:!0,data:l,simulated:!0}}if(a==="GET"&&e.split("/").length>2){const l=e.split("/").pop();return{success:!0,data:o.find(d=>d.id===l),simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("data-hygiene")){if(e.includes("duplicate-companies"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("duplicate-contacts"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("incomplete-records"))return{success:!0,data:{companies:[],contacts:[],deals:[],projects:[],invoices:[]},simulated:!0};if(e.includes("domain-mismatches"))return{success:!0,data:{mismatches:[],count:0},simulated:!0}}if(e.startsWith("/shared-inbox/labels"))return{success:!0,labels:[],simulated:!0};if(e.startsWith("/shared-inbox/senders"))return{success:!0,data:[],simulated:!0};if(e.startsWith("/shared-inbox/emails")&&a==="GET"&&!e.match(/\/emails\/[^/]+$/))return{data:[],success:!0,simulated:!0};switch(e){case"/me":case"/auth/me":return Qv[0];case"/google-calendar/status":return{connected:!1,simulated:!0};default:return{data:[],status:"ok",simulated:!0}}},s3=()=>"http://127.0.0.1:8050/api/v1/impactOS",i3=s3();typeof window<"u"&&console.log(`[API] Initializing with Base: ${i3}`);const dt=async(e,t={})=>{const r=localStorage.getItem("auth_token"),a=e.startsWith("/")?e:`/${e}`,s=`${i3}${a}`,i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers};console.log("[API] apiFetch called",{method:t.method||"GET",url:s,endpoint:a,hasToken:!!r});try{const o=await fetch(s,{...t,headers:i});console.log("[API] apiFetch response",{url:s,status:o.status,statusText:o.statusText,ok:o.ok});const l=await o.json().catch(()=>({}));if(!o.ok){const u=!(a.includes("google-calendar")||a.includes("/calendar/"))&&["feedback","deals","projects","tasks","invoices","companies","contacts","automations","notifications","events","expenses","expense-categories","data-hygiene","satisfaction"].some(m=>a.includes(m));if(o.status===404&&u)return console.warn(`[SYSTEM] Live endpoint ${a} not found. Engaging Virtual Engine fallback.`),iI(a,t);let f=`Server Error ${o.status}`;try{if(l&&typeof l=="object"){const m=l.message||l.error?.message||l.error?.error?.message||(typeof l.error=="string"?l.error:null);m&&typeof m=="string"&&m.trim()&&(f=m)}}catch{}const p=new Error(f);throw p.status=o.status,p.response=o,p.data=l,f&&f!==`Server Error ${o.status}`&&(p.message=f),l?.code&&typeof l.code=="string"?p.code=l.code:l?.error?.code&&typeof l.error.code=="string"&&(p.code=l.error.code),p}return l}catch(o){let l="Unknown error",c="Error",d,u;try{o&&typeof o=="object"?(l=o.message||String(o)||l,c=o.name||c,d=typeof o.status=="number"?o.status:void 0,u=typeof o.code=="string"?o.code:void 0):o&&(l=String(o))}catch{}const f=c==="TypeError"||l.includes("Failed to fetch"),p=d!==void 0&&d>=500,m=d!==void 0&&d>=400&&d<500;if(!(a.includes("google-calendar")||a.includes("/calendar/"))&&(f||p&&!m))return console.info("[SYSTEM] Production API unreachable. Engaging Virtual Engine fallback."),iI(a,t);const v=new Error(l);throw d!==void 0&&(v.status=d),u&&(v.code=u),v}},oI=e=>dt("/auth/send-otp",{method:"POST",body:JSON.stringify({email:e.email})}),One=e=>dt("/auth/verify-otp",{method:"POST",body:JSON.stringify({email:e.email,otp:e.verificationCode})}),lI=()=>dt("/auth/me"),Pne=async()=>{try{await dt("/auth/logout",{method:"POST"})}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}},_c=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return dt(`/users${t}`)},Ine=e=>dt("/users",{method:"POST",body:JSON.stringify(e)}),Dne=(e,t)=>dt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),Lne=e=>dt(`/users/${e}/dashboard-layout`),Fne=(e,t)=>dt(`/users/${e}/dashboard-layout`,{method:"PUT",body:JSON.stringify({layout:t})}),Mne=e=>dt(`/users/${e}`,{method:"DELETE"}),Rne=(e,t)=>dt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),md=e=>dt(`/companies${e?`?search=${encodeURIComponent(e)}`:""}`),Bne=e=>dt("/companies",{method:"POST",body:JSON.stringify(e)}),V7=(e,t)=>dt(`/companies/${e}`,{method:"PUT",body:JSON.stringify(t)}),K7=e=>dt(`/companies/${e}`,{method:"DELETE"}),Ch=(e,t)=>{const r=new URLSearchParams;e&&r.append("search",e),t&&r.append("companyId",t);const a=r.toString();return dt(`/contacts${a?`?${a}`:""}`)},cI=e=>dt("/contacts",{method:"POST",body:JSON.stringify(e)}),X7=(e,t)=>dt(`/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)}),Y7=e=>dt(`/contacts/${e}`,{method:"DELETE"}),Sg=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return dt(`/deals${s?`?${s}`:""}`)},Une=e=>dt("/deals",{method:"POST",body:JSON.stringify(e)}),jv=(e,t)=>dt(`/deals/${e}`,{method:"PUT",body:JSON.stringify(t)}),dI=e=>dt(`/deals/${e}`,{method:"DELETE"}),D0=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return dt(`/projects${s?`?${s}`:""}`)},qne=e=>dt(`/projects/${e}`),$ne=e=>dt("/projects",{method:"POST",body:JSON.stringify(e)}),Q7=(e,t)=>dt(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),J7=e=>dt(`/projects/${e}`,{method:"DELETE"}),my=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return dt(`/tasks${s?`?${s}`:""}`)},cb=()=>dt("/tasks/categories"),Z7=e=>dt("/tasks",{method:"POST",body:JSON.stringify(e)}),db=(e,t)=>dt(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),eM=e=>dt(`/tasks/${e}`,{method:"DELETE"}),zne=e=>dt("/tasks/bulk-import",{method:"POST",body:JSON.stringify({tasks:e})}),tM=(e,t,r)=>{const a=new URLSearchParams;e&&a.append("userId",e);const s=a.toString();return dt(`/invoices${s?`?${s}`:""}`)},Hne=e=>dt("/invoices",{method:"POST",body:JSON.stringify(e)}),kv=(e,t)=>dt(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(t)}),uI=e=>dt(`/invoices/${e}`,{method:"DELETE"}),Wne=(e,t)=>dt(`/invoices/revenue-velocity?userId=${e}&timeframe=${t}`),fI=e=>dt(`/automations${e?`?userId=${e}`:""}`),Gne=e=>dt("/automations",{method:"POST",body:JSON.stringify(e)}),Vne=e=>dt(`/automations/${e}/toggle`,{method:"PATCH"}),Kne=e=>dt(`/automations/${e}`,{method:"DELETE"}),rM=(e,t)=>dt(`/notifications?userId=${e}&limitNum=${t}`),Zm=e=>dt("/notifications",{method:"POST",body:JSON.stringify(e)}),nM=(e,t)=>dt(`/notifications/${e}/read`,{method:"POST",body:JSON.stringify({userId:t})}),aM=e=>dt("/notifications/mark-all-read",{method:"POST",body:JSON.stringify({userId:e})}),Xne=e=>dt(`/users/${e}/notification-preferences`),Yne=(e,t)=>dt(`/users/${e}/notification-preferences`,{method:"PUT",body:JSON.stringify({preferences:t})}),Qne=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return dt(`/satisfaction/records${t}`)},Jne=e=>dt(`/satisfaction/records/${e}`),Zne=e=>dt("/satisfaction/records",{method:"POST",body:JSON.stringify(e)}),xk=e=>dt(`/satisfaction/companies/${e}`),eae=e=>dt(`/satisfaction/surveys/${e}`),tae=e=>dt("/satisfaction/surveys",{method:"POST",body:JSON.stringify(e)}),rae=()=>dt("/satisfaction/templates/default"),nae=e=>dt("/satisfaction/templates/default",{method:"PUT",body:JSON.stringify(e)}),aae=(e,t)=>dt(`/satisfaction/surveys/${e}/responses`,{method:"POST",body:JSON.stringify(t)}),sae=()=>dt("/satisfaction/stats"),iae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!=null).map(([r,a])=>[r,String(a)])).toString():"";return dt(`/playbooks/templates${t}`)},oae=e=>dt(`/playbooks/templates/${e}`),lae=e=>dt("/playbooks/templates",{method:"POST",body:JSON.stringify(e)}),cae=(e,t)=>dt(`/playbooks/templates/${e}`,{method:"PUT",body:JSON.stringify(t)}),dae=e=>dt(`/playbooks/templates/${e}`,{method:"DELETE"}),uae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!=null).map(([r,a])=>[r,String(a)])).toString():"";return dt(`/playbooks/instances${t}`)},fae=e=>dt(`/playbooks/instances/${e}`),hae=e=>dt("/playbooks/instances",{method:"POST",body:JSON.stringify(e)}),mae=(e,t)=>dt(`/playbooks/instances/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),pae=(e,t)=>dt(`/playbooks/instances/${e}/steps/${t}/complete`,{method:"POST"}),xae=e=>dt(`/playbooks/instances/${e}/completions`),gae=(e="default")=>dt(`/data-retention/policy?workspaceId=${e}`),vae=(e,t)=>dt("/data-retention/policy",{method:"PUT",body:JSON.stringify({workspaceId:e,...t})}),bae=(e="default")=>dt(`/data-retention/stats?workspaceId=${e}`),yae=(e="default",t=50)=>dt("/data-retention/archive",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),wae=(e="default",t=50)=>dt("/data-retention/cleanup",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),Nae=(e="default",t={})=>{const r=new URLSearchParams({workspaceId:e});return t.format&&r.append("format",t.format),t.startDate&&r.append("startDate",t.startDate),t.endDate&&r.append("endDate",t.endDate),t.limit&&r.append("limit",t.limit.toString()),dt(`/data-retention/export?${r.toString()}`)},hI=()=>dt("/pipelines"),mI=e=>dt("/pipelines",{method:"POST",body:JSON.stringify(e)}),Sv=(e,t)=>dt(`/pipelines/${e}`,{method:"PUT",body:JSON.stringify(t)}),jae=()=>dt("/feedback"),sM=e=>dt("/feedback",{method:"POST",body:JSON.stringify(e)}),mj=(e,t)=>dt(`/feedback/${e}`,{method:"PATCH",body:JSON.stringify(t)}),pI=e=>dt(`/feedback/${e}`,{method:"DELETE"}),kae=e=>{const t=new URLSearchParams;e?.companyId&&t.append("companyId",e.companyId),e?.userId&&t.append("userId",e.userId);const r=t.toString();return dt(`/expenses${r?`?${r}`:""}`)},Sae=e=>dt("/expenses",{method:"POST",body:JSON.stringify(e)}),_ae=(e,t)=>dt(`/expenses/${e}`,{method:"PATCH",body:JSON.stringify(t)}),xI=e=>dt(`/expenses/${e}`,{method:"DELETE"}),iM=()=>dt("/expense-categories"),oM=e=>dt("/expense-categories",{method:"POST",body:JSON.stringify(e)}),Cae=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!==void 0).map(([r,a])=>[r,String(a)])).toString():"";return dt(`/budgets${t}`)},Aae=e=>dt("/budgets",{method:"POST",body:JSON.stringify(e)}),Eae=(e,t)=>dt(`/budgets/${e}`,{method:"PUT",body:JSON.stringify(t)}),Tae=e=>dt(`/budgets/${e}`,{method:"DELETE"}),Oae=e=>{const t="?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a!==void 0).map(([r,a])=>[r,String(a)])).toString();return dt(`/budgets/tracking${t}`)},Pae=()=>dt("/budgets/departments"),lM=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,a])=>a)).toString():"";return dt(`/contracts${t}`)},Iae=e=>dt("/contracts",{method:"POST",body:JSON.stringify(e)}),Dae=(e,t)=>dt(`/contracts/${e}`,{method:"PUT",body:JSON.stringify(t)}),Lae=e=>dt(`/contracts/${e}`,{method:"DELETE"}),Fae=(e,t)=>dt(`/contracts/${e}/sign`,{method:"POST",body:JSON.stringify(t)}),Mae=()=>dt("/contracts/document-types"),Rae=e=>dt("/contracts/document-types",{method:"POST",body:JSON.stringify(e)}),ub=e=>{const t="?"+new URLSearchParams(Object.entries(e)).toString();return dt(`/contracts/google-drive/access-token${t}`)},Bae=e=>dt("/contracts/google-drive/upload",{method:"POST",body:JSON.stringify(e)}),Uae=e=>dt("/contracts/signature/create-doc",{method:"POST",body:JSON.stringify(e)}),qae=(e,t)=>dt("/merge/companies",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),$ae=(e,t)=>dt("/merge/contacts",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),zae=()=>dt("/data-hygiene/duplicate-companies"),Hae=()=>dt("/data-hygiene/duplicate-contacts"),Wae=()=>dt("/data-hygiene/incomplete-records"),Gae=()=>dt("/data-hygiene/domain-mismatches"),Vae=()=>dt("/industries"),Kae=e=>dt("/industries",{method:"POST",body:JSON.stringify(e)}),Xae=(e,t)=>dt(`/industries/${e}`,{method:"PUT",body:JSON.stringify(t)}),Yae=e=>dt(`/industries/${e}`,{method:"DELETE"}),Qae=async(e,t="company")=>{const r=localStorage.getItem("auth_token"),a=s3(),s=new FormData;s.append("file",e),s.append("type",t);const i=await fetch(`${a}/import/upload`,{method:"POST",headers:r?{Authorization:`Bearer ${r}`}:{},body:s});if(!i.ok){const o=await i.json().catch(()=>({message:i.statusText}));throw new Error(o.message||"Upload failed")}return i.json()},Jae=async(e,t="company")=>{try{return await dt("/import/google-sheets",{method:"POST",body:JSON.stringify({url:e,type:t})})}catch(r){let a="Failed to import Google Sheets";r.data?.message?a=r.data.message:r.message&&r.message!=="Server Error 400"?a=r.message:r.error?.message&&(a=r.error.message);const s=new Error(a);throw s.response=r.response,s.data=r.data||r.response?.data,s.error=r.error||r,s.code=r.code||r.data?.code,s}},Zae=(e,t)=>dt(`/import/${e}/mapping`,{method:"POST",body:JSON.stringify({mapping:t})}),ese=e=>dt(`/import/${e}/preview`),tse=(e,t,r)=>dt(`/import/${e}/execute`,{method:"POST",body:JSON.stringify({targetAccountSelections:t,...r?{companySelections:r}:{}})}),rse=e=>dt(`/import/batch/${e}`),nse=e=>{const t=new URLSearchParams;e?.userId&&t.append("userId",e.userId),e?.type&&t.append("type",e.type),e?.status&&t.append("status",e.status),e?.startDate&&t.append("startDate",e.startDate),e?.endDate&&t.append("endDate",e.endDate),t.append("limit",String(e.limit)),e?.offset&&t.append("offset",String(e.offset));const r=t.toString();return dt(`/import/batches${r?`?${r}`:""}`)},o3=e=>dt(`/google-calendar/status?userId=${e}`),cM=e=>dt(`/google-calendar/auth-url?userId=${e}`),ase=e=>dt(`/google-calendar/calendars?userId=${e}`),sse=(e,t,r,a)=>{const s=new URLSearchParams({userId:r,startDate:e,endDate:t});return a?.length&&s.set("calendarIds",a.join(",")),dt(`/google-calendar/events?${s.toString()}`)},ise=e=>dt("/google-calendar/disconnect",{method:"POST",body:JSON.stringify({userId:e})}),gI=(e,t,r)=>dt("/google-calendar/events/create",{method:"POST",body:JSON.stringify({userId:e,calendarId:t,...r})}),ose=(e,t,r,a)=>{const s=new URLSearchParams({userId:e});return t&&s.append("accountEmail",t),r!=null&&s.append("scopeHours",String(r)),a!=null&&s.append("scopeDays",String(a)),dt(`/shared-inbox/sync?${s.toString()}`,{method:"POST"})},lse=e=>dt(`/shared-inbox/accounts?userId=${e}`),cse=(e,t)=>dt("/shared-inbox/accounts",{method:"DELETE",body:JSON.stringify({userId:e,accountEmail:t})}),dse=e=>dt(`/shared-inbox/filtered-accounts?userId=${e}`),use=(e,t)=>dt("/shared-inbox/filtered-accounts",{method:"POST",body:JSON.stringify({userId:e,accountEmail:t})}),fse=(e,t)=>dt(`/shared-inbox/filtered-accounts/${t}?userId=${e}`,{method:"DELETE"}),dM=(e,t)=>{const r=new URLSearchParams({userId:e});return t?(t.search&&r.append("search",t.search),t.status&&r.append("status",t.status),t.from&&r.append("from",t.from),t.subject&&r.append("subject",t.subject),t.subjectOperator&&r.append("subjectOperator",t.subjectOperator),t.hasAttachment!==void 0&&r.append("hasAttachment",String(t.hasAttachment)),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),t.labelId&&r.append("labelId",t.labelId),t.cursor&&r.append("cursor",t.cursor),t.page!==void 0&&!t.cursor&&r.append("page",String(t.page)),t.limit!==void 0&&r.append("limit",String(t.limit)),t.isRead!==void 0&&r.append("isRead",String(t.isRead)),t.isStarred!==void 0&&r.append("isStarred",String(t.isStarred)),dt(`/shared-inbox/emails?${r.toString()}`)):dt(`/shared-inbox/emails?${r.toString()}`)},hse=(e,t)=>dt(`/shared-inbox/senders?userId=${e}${t!=null?`&limit=${t}`:""}`),mse=(e,t)=>dt(`/shared-inbox/emails/${e}?userId=${t}`),vI=(e,t,r)=>dt(`/shared-inbox/emails/${e}/read`,{method:"PUT",body:JSON.stringify({read:t,userId:r})}),pse=(e,t)=>dt(`/shared-inbox/emails/${e}/star`,{method:"PUT",body:JSON.stringify({isStarred:t})}),xse=e=>dt("/shared-inbox/notes",{method:"POST",body:JSON.stringify(e)}),gse=e=>dt(`/shared-inbox/notes/${e}`),vse=(e,t)=>dt(`/shared-inbox/notes/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),bse=(e,t,r)=>dt("/shared-inbox/ai-draft",{method:"POST",body:JSON.stringify({emailId:e,userId:t,templateId:r})}),yse=e=>dt("/shared-inbox/templates",{method:"POST",body:JSON.stringify(e)}),wse=e=>dt(`/shared-inbox/templates?userId=${e}`),Nse=(e,t)=>dt(`/shared-inbox/templates/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),jse=e=>dt("/shared-inbox/send-email",{method:"POST",body:JSON.stringify(e)}),kse=e=>dt("/shared-inbox/reply-email",{method:"POST",body:JSON.stringify(e)}),Sse=e=>dt("/shared-inbox/forward-email",{method:"POST",body:JSON.stringify(e)}),uM=e=>dt(`/shared-inbox/signatures?userId=${e}`),_se=e=>dt("/shared-inbox/signatures",{method:"POST",body:JSON.stringify(e)}),Cse=(e,t)=>dt(`/shared-inbox/signatures/${e}`,{method:"PUT",body:JSON.stringify(t)}),Ase=(e,t)=>dt(`/shared-inbox/signatures/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),bI=(e,t)=>dt(`/shared-inbox/emails/${e}/archive`,{method:"POST",body:JSON.stringify({userId:t})}),yI=(e,t)=>dt(`/shared-inbox/emails/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),Ese=(e,t)=>dt(`/shared-inbox/emails/${e}/restore`,{method:"POST",body:JSON.stringify({userId:t})}),_v=(e,t)=>dt(`/shared-inbox/emails/${e}`,{method:"PUT",body:JSON.stringify(t)}),wI=(e,t,r)=>{const a=s3(),s=localStorage.getItem("auth_token"),i={"Content-Type":"application/json"};return s&&(i.Authorization=`Bearer ${s}`),fetch(`${a}/shared-inbox/emails/${e}/attachments/${t}?userId=${r}`,{method:"GET",headers:i}).then(async o=>{if(!o.ok){const l=await o.json().catch(()=>({message:"Failed to download attachment"}));throw new Error(l.message||"Failed to download attachment")}return o.blob()})},Tse=e=>dt("/shared-inbox/save-draft",{method:"POST",body:JSON.stringify(e)}),Ose=(e,t)=>dt(`/shared-inbox/drafts?userId=${e}&accountEmail=${encodeURIComponent(t)}`),Pse=e=>dt("/shared-inbox/schedule-send",{method:"POST",body:JSON.stringify(e)}),Ise=e=>dt(`/email-sync-filter?userId=${e}`),Dse=(e,t)=>dt("/email-sync-filter",{method:"POST",body:JSON.stringify({userId:e,domain:t})}),Lse=(e,t)=>dt(`/email-sync-filter/${t}?userId=${e}`,{method:"DELETE"}),l3=(e,t)=>dt(`/shared-inbox/activity/${e}/${t}`),Fse=e=>dt("/shared-inbox/link-contact",{method:"POST",body:JSON.stringify(e)}),Mse=e=>dt("/shared-inbox/link-company",{method:"POST",body:JSON.stringify(e)}),Rse=e=>dt("/shared-inbox/link-deal",{method:"POST",body:JSON.stringify(e)}),Bse=e=>dt("/shared-inbox/link-project",{method:"POST",body:JSON.stringify(e)}),Use=e=>dt("/shared-inbox/link-contract",{method:"POST",body:JSON.stringify(e)}),qse=e=>dt(`/shared-inbox/suggested-links?emailId=${e}`),$se=e=>dt("/shared-inbox/create-task",{method:"POST",body:JSON.stringify(e)}),zse=e=>dt(`/shared-inbox/related-tasks/${e}`),Hse=e=>dt(`/shared-inbox/related-projects/${e}`),Wse=e=>dt(`/shared-inbox/related-contracts/${e}`),Gse=e=>dt(`/shared-inbox/labels?userId=${e}`),Vse=e=>dt("/shared-inbox/labels",{method:"POST",body:JSON.stringify(e)}),Kse=(e,t)=>dt(`/shared-inbox/emails/${e}/labels`,{method:"PUT",body:JSON.stringify(t)}),Xse=(e,t)=>dt(`/shared-inbox/emails/${e}/labels/${t}`,{method:"DELETE"}),Yse=e=>dt("/shared-inbox/categorize-email",{method:"POST",body:JSON.stringify(e)}),NI=e=>dt(`/shared-inbox/categorization-rules?userId=${e}`),Qse=(e,t=30)=>dt(`/shared-inbox/categorization-accuracy?userId=${e}&days=${t}`),Jse=e=>dt("/shared-inbox/categorization-rules",{method:"POST",body:JSON.stringify(e)}),Zse=(e,t)=>dt(`/shared-inbox/categorization-rules/${e}?userId=${t}`,{method:"DELETE"}),eie=e=>dt(`/shared-inbox/folder-mapping?userId=${e}`),tie=e=>dt("/shared-inbox/folder-mapping",{method:"POST",body:JSON.stringify(e)}),gk=(e,t,r,a)=>{const s=new URLSearchParams({userId:e});return t&&s.append("emailId",t),r&&s.append("startDate",r),a&&s.append("endDate",a),dt(`/shared-inbox/calendar-events?${s.toString()}`)},rie=e=>dt("/shared-inbox/calendar-events",{method:"POST",body:JSON.stringify(e)}),nie=(e,t,r,a)=>{const s=new URLSearchParams({userId:e,teamMemberIds:t.join(","),startDate:r,endDate:a});return dt(`/shared-inbox/calendar-availability?${s.toString()}`)},aie=(e,t,r,a,s,i)=>{const o=new URLSearchParams({userId:e});return t&&o.append("accountEmail",t),a&&o.append("query",a),s&&o.append("pageToken",s),dt(`/shared-inbox/drive-files?${o.toString()}`)},jI=e=>dt("/shared-inbox/attach-drive-file",{method:"POST",body:JSON.stringify(e)}),sie=e=>dt("/calendar/events",{method:"POST",body:JSON.stringify(e)}),fM=(e,t)=>dt(`/calendar/events/${e}`,{method:"PUT",body:JSON.stringify(t)}),iie=e=>(console.log("[API] apiDeleteEvent called with id:",e),dt(`/calendar/events/${e}`,{method:"DELETE"})),oie=(e,t,r,a)=>dt("/google-calendar/events/update",{method:"PATCH",body:JSON.stringify({userId:e,calendarId:t,eventId:r,...a})}),kI=(e,t,r)=>{const a=`/google-calendar/events/delete?userId=${encodeURIComponent(e)}&calendarId=${encodeURIComponent(t)}&eventId=${encodeURIComponent(r)}`;return console.log("[API] apiDeleteGoogleCalendarEvent called",{userId:e,calendarId:t,eventId:r,url:a}),dt(a,{method:"DELETE"})},hM=e=>dt("/lead-sources?active=true"),lie=async(e,t)=>{const r=localStorage.getItem("auth_token"),a=new FormData;a.append("file",e),a.append("userId",t);const s=await fetch(`${i3}/scanner/business-card/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:a});if(!s.ok){const i=await s.json().catch(()=>({message:"Upload failed"}));throw new Error(i.message||"Failed to upload business card")}return s.json()},cie=e=>dt("/scanner/business-card/confirm",{method:"POST",body:JSON.stringify(e)}),die=e=>dt("/scanner/linkedin/fetch",{method:"POST",body:JSON.stringify(e)}),uie=e=>dt("/scanner/linkedin/confirm",{method:"POST",body:JSON.stringify(e)}),fie=({toast:e,onRemove:t})=>{D.useEffect(()=>{const s=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(s)},[e.id,e.duration,t]);const r=()=>{switch(e.type){case"success":return n.jsx(Nn,{className:"w-5 h-5 text-emerald-600"});case"error":return n.jsx(Ib,{className:"w-5 h-5 text-red-600"});case"warning":return n.jsx($n,{className:"w-5 h-5 text-amber-600"});case"info":return n.jsx(y0,{className:"w-5 h-5 text-blue-600"});default:return n.jsx(y0,{className:"w-5 h-5 text-blue-600"})}},a=()=>{switch(e.type){case"success":return"bg-emerald-50 border-emerald-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-amber-50 border-amber-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-blue-50 border-blue-200"}};return n.jsxs("div",{className:`${a()} border rounded-xl shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md animate-in slide-in-from-right duration-300`,children:[n.jsx("div",{className:"shrink-0",children:r()}),n.jsx("p",{className:"flex-1 text-sm font-medium text-slate-900",children:e.message}),n.jsx("button",{onClick:()=>t(e.id),className:"shrink-0 p-1 hover:bg-white/50 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-4 h-4 text-slate-400"})})]})},hie=({toasts:e,onRemove:t})=>n.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(r=>n.jsx("div",{className:"pointer-events-auto",children:n.jsx(fie,{toast:r,onRemove:t})},r.id))}),mM=D.createContext(void 0),Cn=()=>{const e=D.useContext(mM);if(!e)throw new Error("useToast must be used within ToastProvider");return e},mie=({children:e})=>{const[t,r]=D.useState([]),a=D.useCallback(d=>{r(u=>u.filter(f=>f.id!==d))},[]),s=D.useCallback((d,u="info",f=3e3)=>{const m={id:Math.random().toString(36).substring(2,9),message:d,type:u,duration:f};r(b=>[...b,m])},[]),i=D.useCallback((d,u)=>{s(d,"success",u)},[s]),o=D.useCallback((d,u)=>{s(d,"error",u||5e3)},[s]),l=D.useCallback((d,u)=>{s(d,"warning",u)},[s]),c=D.useCallback((d,u)=>{s(d,"info",u)},[s]);return n.jsxs(mM.Provider,{value:{showToast:s,showSuccess:i,showError:o,showWarning:l,showInfo:c},children:[e,n.jsx(hie,{toasts:t,onRemove:a})]})},ep=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"ZAR",symbol:"R",name:"South African Rand"}],Si="USD",vk=e=>ep.find(t=>t.code===e),ff=e=>e?vk(e)?.symbol||"$":ep.find(r=>r.code===Si)?.symbol||"$",xf=(e,t)=>`${ff(t)}${e.toLocaleString()}`,SI=[{id:"stat-pipeline",order:0,size:"medium"},{id:"stat-projects",order:1,size:"medium"},{id:"stat-invoices",order:2,size:"medium"},{id:"stat-tasks",order:3,size:"medium"},{id:"revenue-chart",order:4,size:"large"},{id:"inbox-card",order:5,size:"medium"},{id:"tasks-card",order:6,size:"medium"},{id:"nps-average",order:7,size:"medium"},{id:"nps-needing-attention",order:8,size:"medium"},{id:"nps-recent-feedback",order:9,size:"medium"},{id:"nps-awaiting-feedback",order:10,size:"medium"}],_I=({onNavigate:e})=>{const{showError:t,showSuccess:r}=Cn(),[a,s]=D.useState(null),[i,o]=D.useState({openPipeline:0,activeProjects:0,unpaidInvoices:0,actionableMail:0}),[l,c]=D.useState([]),[d,u]=D.useState([]),[f,p]=D.useState(!0),[m,b]=D.useState("1M"),[v,g]=D.useState([]),[w,y]=D.useState(!1),[j,N]=D.useState({}),[S,E]=D.useState({}),[A,P]=D.useState(Si),[I,B]=D.useState(!1),[T,_]=D.useState(SI),[R,z]=D.useState(null),[H,Y]=D.useState(!1),[J,re]=D.useState(!1),[X,te]=D.useState(null);D.useRef(0);const[W,O]=D.useState(null),[q,G]=D.useState(!1);D.useEffect(()=>{const de=JSON.parse(localStorage.getItem("user_data")||"null");s(de),de?.id&&U(de.id)},[]);const U=async de=>{try{const ce=await Lne(de);if(ce?.data&&Array.isArray(ce.data)){const Ce=ce.data.flatMap(fe=>fe.id==="stats-grid"?[{id:"stat-pipeline",order:fe.order,size:fe.size||"medium"},{id:"stat-projects",order:fe.order+.1,size:fe.size||"medium"},{id:"stat-invoices",order:fe.order+.2,size:fe.size||"medium"},{id:"stat-tasks",order:fe.order+.3,size:fe.size||"medium"}]:fe.order>0?[{...fe,order:fe.order+3,size:fe.size||"medium"}]:[{...fe,size:fe.size||"medium"}]),Xe=new Set,xe=Ce.filter(fe=>Xe.has(fe.id)?(console.warn(`[DASHBOARD] Duplicate widget found: ${fe.id}, removing duplicate`),!1):(Xe.add(fe.id),!0));_(xe)}}catch{console.log("[DASHBOARD] Using default layout")}},K=async()=>{if(a?.id){re(!0);try{await Fne(a.id,T),r("Dashboard layout saved"),Y(!1)}catch{t("Failed to save layout")}finally{re(!1)}}},ae=()=>{_(SI)},me=(de,ce)=>{_(Ce=>Ce.map(Xe=>Xe.id===de?{...Xe,size:ce}:Xe))},se=(de="medium",ce)=>{if(ce.startsWith("stat-"))return"";switch(de){case"small":return"lg:col-span-1";case"medium":return"lg:col-span-2";case"large":return"lg:col-span-3";default:return"lg:col-span-2"}},le=(de,ce)=>{H&&(z(ce),de.dataTransfer.effectAllowed="move",de.dataTransfer.setData("text/html",ce))},Me=de=>{!H||!R||(de.preventDefault(),de.dataTransfer.dropEffect="move")},ue=(de,ce)=>{if(!H||!R||R===ce)return;de.preventDefault();const Ce=[...T],Xe=Ce.findIndex(fe=>fe.id===R),xe=Ce.findIndex(fe=>fe.id===ce);if(Xe!==-1&&xe!==-1){const fe=Ce[Xe];Ce.splice(Xe,1),Ce.splice(xe,0,fe),Ce.forEach((Se,qe)=>{Se.order=qe}),_(Ce)}z(null)},Ue=()=>{z(null)};D.useEffect(()=>{(async()=>{p(!0);try{const ce=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!ce){p(!1);return}const[Ce,Xe,xe,fe,Se,qe]=await Promise.all([Sg(ce).catch(()=>({data:[]})),D0(ce).catch(()=>({data:[]})),my(ce).catch(()=>({data:[]})),tM(ce).catch(()=>({data:[]})),dM(ce).catch(()=>({data:[]})),_c().catch(()=>({data:[]}))]),je=Ce?.data||Ce||[],Le=Xe?.data||Xe||[],Re=xe?.data||xe||[],Je=fe?.data||fe||[],ut=Se?.data||Se||[],vt=qe?.data||qe||[],At=Array.isArray(je)?je.filter(_r=>_r.stage!=="Won"&&_r.stage!=="Lost"):[],Bt={},Yt={};At.forEach(_r=>{const Wr=_r.currency||Si,sr=_r.value||0;Bt[Wr]=(Bt[Wr]||0)+sr,Yt[Wr]=(Yt[Wr]||0)+1});const We=Array.isArray(Le)?Le.filter(_r=>_r.status!=="Completed"&&_r.status!=="Cancelled").length:0,Ct=Array.isArray(Je)?Je.filter(_r=>_r.status!=="Paid"):[],br={};Ct.forEach(_r=>{const Wr=_r.currency||Si,sr=_r.amount||0;br[Wr]=(br[Wr]||0)+sr,Yt[Wr]=(Yt[Wr]||0)+1});let Jt=0,Dr=Si;Object.keys(Yt).forEach(_r=>{Yt[_r]>Jt&&(Jt=Yt[_r],Dr=_r)}),N(Bt),E(br),P(Dr);const Hr=Bt[Dr]||0,tt=br[Dr]||0,Dt=0,mr=new Date;mr.setHours(0,0,0,0);const Sr=Array.isArray(Re)?Re.filter(_r=>{if(!_r.dueDate)return!1;const Wr=new Date(_r.dueDate);return Wr.setHours(0,0,0,0),Wr.getTime()===mr.getTime()&&_r.status!=="Done"}):[],Jr=await Promise.all(Sr.slice(0,2).map(async _r=>{if(_r.projectId)try{const Wr=await qne(_r.projectId);return{..._r,projectTitle:Wr?.data?.title||"Software"}}catch{return{..._r,projectTitle:"Software"}}return{..._r,projectTitle:"Software"}}));o({openPipeline:Hr,activeProjects:We,unpaidInvoices:tt,actionableMail:Dt}),c(Jr),u(vt.slice(0,3))}catch(ce){console.error("[DASHBOARD] Failed to fetch data:",ce),t("Failed to load dashboard data")}finally{p(!1)}})()},[t]),D.useEffect(()=>{(async()=>{y(!0);try{const ce=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!ce){y(!1);return}const Ce=await Wne(ce,m),Xe=Ce?.data||Ce||[];g(Array.isArray(Xe)?Xe:[])}catch{g([])}finally{y(!1)}})()},[m]),D.useEffect(()=>{(async()=>{G(!0);try{const Ce=(await sae())?.data;Ce&&O({averageNps:Ce.averageNps??null,totalResponses:Ce.totalResponses??0,companiesNeedingAttention:Ce.companiesNeedingAttention??[],recentFeedback:Ce.recentFeedback??[],awaitingFeedback:Ce.awaitingFeedback??[]})}catch{O(null)}finally{G(!1)}})()},[]);const Ae=(de,ce=A)=>{const Ce=ff(ce);return de>=1e3?`${Ce}${(de/1e3).toFixed(1)}k`:`${Ce}${de.toLocaleString()}`},ie=(de,ce)=>{const Ce=R===de,Xe=T.find(qe=>qe.id===de),xe=ce||Xe?.size||"medium",fe={draggable:H,onDragStart:qe=>le(qe,de),onDragOver:Me,onDrop:qe=>ue(qe,de),onDragEnd:Ue,className:`transition-all ${Ce?"opacity-50 scale-95":""} ${H?"cursor-move":""}`},Se=()=>{if(!H)return null;const qe=[{value:"small",icon:n.jsx(jU,{className:"w-3 h-3"}),label:"Small"},{value:"medium",icon:n.jsx(EU,{className:"w-3 h-3"}),label:"Medium"},{value:"large",icon:n.jsx(yU,{className:"w-3 h-3"}),label:"Large"}];return n.jsx("div",{className:"flex items-center gap-1 mb-3 bg-slate-50 rounded-lg p-1 border border-slate-200",children:qe.map(({value:je,icon:Le,label:Re})=>n.jsx("button",{onClick:Je=>{Je.stopPropagation(),me(de,je)},onMouseEnter:()=>te(de),onMouseLeave:()=>te(null),className:`p-1.5 rounded transition-all ${xe===je?"bg-indigo-600 text-white shadow-sm":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,title:Re,children:Le},je))})};switch(de){case"stat-pipeline":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Open Pipeline"})]})}),n.jsxs("button",{onClick:()=>e("pipeline"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-blue-600 bg-blue-50/50 group-hover:scale-110 transition-transform",children:n.jsx(Qd,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Open Pipeline"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Ae(i.openPipeline,A)})]}),n.jsx("button",{onClick:qe=>{qe.stopPropagation(),B(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:n.jsx(fh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},de);case"stat-projects":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Projects"})]})}),n.jsxs("button",{onClick:()=>e("projects"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-indigo-200 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-indigo-600 bg-indigo-50/50 group-hover:scale-110 transition-transform",children:n.jsx(Cl,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Active Projects"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:i.activeProjects})]})})]})]},de);case"stat-invoices":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Unpaid Invoices"})]})}),n.jsxs("button",{onClick:()=>e("invoices"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-emerald-600 bg-emerald-50/50 group-hover:scale-110 transition-transform",children:n.jsx(Mu,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),n.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),n.jsxs("div",{className:"flex items-end justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Unpaid Invoices"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Ae(i.unpaidInvoices,A)})]}),n.jsx("button",{onClick:qe=>{qe.stopPropagation(),B(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:n.jsx(fh,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},de);case"stat-tasks":return n.jsxs("div",{...fe,children:[H&&n.jsx("div",{className:"flex items-center justify-between mb-3",children:n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]})}),n.jsxs("button",{onClick:()=>e("tasks"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[n.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:n.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-purple-600 bg-purple-50/50 group-hover:scale-110 transition-transform",children:n.jsx(_i,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),n.jsx("div",{className:"flex items-end justify-between",children:n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Tasks Due Today"}),n.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:l.length})]})})]})]},de);case"revenue-chart":return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Revenue Chart"})]}),Se()]}),n.jsxs("div",{className:"bg-white p-5 lg:p-8 rounded-[24px] lg:rounded-[32px] border border-slate-100 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 lg:mb-10 gap-4",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg lg:text-xl font-black text-slate-900",children:"Revenue Velocity"}),n.jsx("p",{className:"text-slate-400 text-[10px] lg:text-xs font-medium mt-0.5 lg:mt-1",children:"Digital transformation revenue flow"})]}),n.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-100 w-full sm:w-auto",children:["7D","1M","1Y"].map(qe=>n.jsx("button",{onClick:()=>b(qe),className:`flex-1 sm:flex-none px-4 py-1.5 text-[10px] font-black rounded-lg transition-all ${qe===m?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"text-slate-400 hover:text-slate-600"}`,children:qe},qe))})]}),n.jsx("div",{className:"h-60 lg:h-72 w-full relative",children:w?n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsx(x6,{className:"w-10 h-10 text-slate-300 animate-pulse"})}):v.length===0?n.jsx("div",{className:"h-full flex items-center justify-center",children:n.jsxs("div",{className:"text-center",children:[n.jsx(Qd,{className:"w-10 h-10 text-slate-200 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No revenue data available"})]})}):n.jsx(gW,{width:"100%",height:"100%",children:n.jsxs(Ene,{data:v,children:[n.jsx("defs",{children:n.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[n.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.1}),n.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]})}),n.jsx(E7,{strokeDasharray:"3 3",vertical:!1,stroke:"#f8fafc"}),n.jsx(uy,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},dy:10}),n.jsx(fy,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},width:40,tickFormatter:qe=>`$${qe}`}),n.jsx(_u,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"10px"},itemStyle:{fontWeight:"bold",fontSize:"12px",color:"#4f46e5"}}),n.jsx(I0,{type:"monotone",dataKey:"value",stroke:"#4f46e5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:3,animationDuration:1500})]})})})]})]},de);case"inbox-card":return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Inbox Card"})]}),Se()]}),n.jsxs("div",{onClick:()=>!H&&e("inbox"),className:`bg-[#312E81] rounded-[24px] lg:rounded-[32px] p-6 lg:p-8 text-white relative overflow-hidden group ${H?"":"cursor-pointer hover:scale-[1.02] active:scale-95"} transition-all shadow-xl shadow-indigo-100/50`,children:[n.jsxs("div",{className:"relative z-10",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6 lg:mb-10",children:[n.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/10 group-hover:bg-white/20 transition-all",children:n.jsx(yf,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),!H&&n.jsx("button",{className:"text-white/40 group-hover:text-white transition-colors",children:n.jsx(To,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]}),n.jsx("h3",{className:"text-xl lg:text-2xl font-black mb-2 lg:mb-3",children:"Check Inbox"}),n.jsxs("p",{className:"text-indigo-200 text-[10px] lg:text-xs font-medium leading-relaxed opacity-80 max-w-[200px]",children:["You have ",i.actionableMail," actionable items that need attention."]}),n.jsx("div",{className:"mt-6 lg:mt-8 flex items-center gap-3",children:n.jsxs("div",{className:"flex -space-x-2",children:[d.map((qe,je)=>n.jsx(Xs,{src:qe.avatar,isAvatar:!0,fallbackText:qe.name||qe.email||"U",className:"w-7 h-7 lg:w-9 lg:h-9 border-2 border-[#312E81] shadow-lg"},qe.id||je)),n.jsx("div",{className:"w-7 h-7 lg:w-9 lg:h-9 rounded-full bg-indigo-500 border-2 border-[#312E81] flex items-center justify-center text-[9px] font-black shadow-lg",children:"+1"})]})})]}),n.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 translate-x-1/4 translate-y-1/4 pointer-events-none",children:n.jsx(x0,{className:"w-32 h-32 lg:w-48 lg:h-48"})})]})]},de);case"tasks-card":return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]}),Se()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Tasks Due Today"}),n.jsx(_i,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-4 lg:space-y-6",children:f?n.jsx("div",{className:"space-y-3",children:[1,2].map(qe=>n.jsx("div",{className:"h-4 bg-slate-50 rounded animate-pulse"},qe))}):l.length>0?l.slice(0,2).map(qe=>n.jsxs("div",{className:"flex gap-4 group cursor-pointer",children:[n.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 rounded-full bg-amber-400 mt-1.5 shrink-0 shadow-sm"}),n.jsxs("div",{children:[n.jsx("h5",{className:"text-xs lg:text-sm font-black text-slate-900 group-hover:text-indigo-600 transition-colors line-clamp-1",children:qe.title}),n.jsx("p",{className:"text-[9px] lg:text-[10px] font-black text-slate-400 uppercase mt-0.5",children:qe.projectTitle||"Software"})]})]},qe.id)):n.jsx("div",{className:"text-center py-4",children:n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"No tasks due today"})})}),n.jsx("button",{onClick:()=>!H&&e("tasks"),disabled:H,className:"w-full mt-8 lg:mt-10 py-3 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest flex items-center justify-center gap-2 group border border-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"View All Tasks"})]})]},de);case"nps-average":{const qe=W?.averageNps??null,je=qe===null?"text-slate-400":qe>=9?"text-green-600":qe>=7?"text-amber-600":"text-red-600",Le=qe===null?"bg-slate-50":qe>=9?"bg-green-50":qe>=7?"bg-amber-50":"bg-red-50";return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Average NPS Score"})]}),Se()]}),n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full disabled:opacity-50",children:[n.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:n.jsx("div",{className:`p-2 rounded-lg lg:p-2.5 lg:rounded-xl ${Le} ${je}`,children:n.jsx(yf,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em]",children:"Average NPS Score"}),q?n.jsx("div",{className:"h-8 w-16 bg-slate-100 rounded mt-1 animate-pulse"}):n.jsx("h3",{className:`text-2xl lg:text-3xl font-black mt-0.5 lg:mt-1 ${je}`,children:qe!==null?qe.toFixed(1):""})]})]})]},de)}case"nps-needing-attention":{const qe=W?.companiesNeedingAttention??[];return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Companies Needing Attention"})]}),Se()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Detractors (06)"}),n.jsx(yf,{className:"w-4 h-4 text-red-400"})]}),n.jsx("div",{className:"space-y-3",children:q?[1,2,3].map(je=>n.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},je)):qe.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No detractors"}):qe.map(je=>{const Le=je.accountManagerId&&d?.length?d.find(Re=>Re.id===je.accountManagerId)?.name:null;return n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full flex flex-col gap-0.5 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2",children:[n.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:je.companyName}),n.jsx("span",{className:"text-xs font-bold text-red-600 shrink-0",children:je.npsScore})]}),Le?n.jsxs("span",{className:"text-[10px] text-slate-500 truncate",children:["AM: ",Le]}):null]},je.companyId)})}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},de)}case"nps-recent-feedback":{const qe=W?.recentFeedback??[];return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Recent Feedback"})]}),Se()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Latest 5 responses"}),n.jsx(co,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-4",children:q?[1,2,3].map(je=>n.jsx("div",{className:"h-14 bg-slate-50 rounded animate-pulse"},je)):qe.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No feedback yet"}):qe.map((je,Le)=>n.jsxs("div",{className:"border-b border-slate-100 pb-3 last:border-0 last:pb-0",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-900",children:je.companyName}),n.jsx("span",{className:`text-xs font-bold shrink-0 ${je.npsScore>=9?"text-green-600":je.npsScore>=7?"text-amber-600":"text-red-600"}`,children:je.npsScore})]}),je.feedback?n.jsx("p",{className:"text-[10px] text-slate-500 line-clamp-2",children:je.feedback}):null,n.jsx("p",{className:"text-[9px] text-slate-400 mt-0.5",children:je.date?new Date(je.date).toLocaleDateString():""})]},Le))}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},de)}case"nps-awaiting-feedback":{const qe=W?.awaitingFeedback??[];return n.jsxs("div",{...fe,children:[H&&n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[n.jsx(pc,{className:"w-5 h-5"}),n.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Awaiting Feedback"})]}),Se()]}),n.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[n.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[n.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Survey sent, no response yet"}),n.jsx(rs,{className:"w-4 h-4 text-amber-400"})]}),n.jsx("div",{className:"space-y-3",children:q?[1,2,3].map(je=>n.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},je)):qe.length===0?n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"None"}):qe.map(je=>n.jsxs("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full flex items-center justify-between gap-2 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[n.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:je.companyName}),n.jsxs("span",{className:"text-xs font-bold text-slate-500 shrink-0",children:[je.daysElapsed,"d ago"]})]},je.companyId))}),n.jsx("button",{onClick:()=>!H&&e("satisfaction"),disabled:H,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},de)}default:return null}},Z=a?.name?.split(" ")[0]||"Alex",Ee=a?.avatar||a?.photoURL||"",we=a?.name||a?.email||"Impact Member",Oe=[...T].sort((de,ce)=>de.order-ce.order);return n.jsxs("div",{className:"space-y-6 lg:space-y-8 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xs,{src:Ee,alt:we,fallbackText:we,isAvatar:!0,className:"w-10 h-10 rounded-full border border-slate-200 shadow-sm"}),n.jsxs("div",{className:"flex flex-col gap-1",children:[n.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight",children:["Welcome, ",Z]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:"text-slate-500 text-xs lg:text-sm font-medium",children:"Logistics digitalization hub"})})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:H?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:ae,className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Reset"}),n.jsx("button",{onClick:K,disabled:J,className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black rounded-xl hover:bg-indigo-700 transition-all uppercase tracking-wider flex items-center gap-2 disabled:opacity-50 shadow-lg",children:J?n.jsxs(n.Fragment,{children:[n.jsx(x6,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),"Save Layout"]})}),n.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Cancel"})]}):n.jsxs("button",{onClick:()=>Y(!0),className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-black rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all uppercase tracking-wider flex items-center gap-2 shadow-lg",children:[n.jsx(pc,{className:"w-4 h-4"}),"Customize Dashboard"]})})]}),H&&n.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-2xl p-4 animate-in slide-in-from-top duration-300",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shrink-0",children:n.jsx(pc,{className:"w-5 h-5 text-white"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:"Customize Your Dashboard"}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:"Drag and drop the cards below to rearrange them. Use the size controls to resize widgets (small, medium, large). Your layout will be saved to your account and synced across all devices."})]})]})}),n.jsx("div",{className:"space-y-6 lg:space-y-8",children:Oe.map((de,ce)=>{const Ce=ie(de.id,de.size);if(de.id.startsWith("stat-")){const qe=Oe[ce-1];if(qe&&qe.id.startsWith("stat-"))return null;{const Le=[];for(let Re=ce;Re<Oe.length&&Oe[Re].id.startsWith("stat-");Re++)Le.push(Oe[Re]);return n.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6",children:Le.map(Re=>ie(Re.id,Re.size))},`stat-cards-group-${ce}`)}}if(de.id==="revenue-chart"){const qe=Oe[ce+1],je=Oe[ce+2],Le=de.size||"large";if(qe&&je&&(qe.id==="inbox-card"&&je.id==="tasks-card"||qe.id==="tasks-card"&&je.id==="inbox-card")&&Le==="large")return n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[n.jsx("div",{className:"lg:col-span-2",children:Ce}),n.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[ie(qe.id,qe.size),ie(je.id,je.size)]})]},"revenue-with-sidebar")}const xe=Oe[ce-1],fe=Oe[ce-2];if(xe?.id==="revenue-chart"&&(de.id==="inbox-card"||de.id==="tasks-card")){const qe=xe.size||"large",je=Oe[ce+1];if(qe==="large"&&je&&(de.id==="inbox-card"&&je.id==="tasks-card"||de.id==="tasks-card"&&je.id==="inbox-card"))return null}if(fe?.id==="revenue-chart"&&(de.id==="inbox-card"||de.id==="tasks-card")&&(fe.size||"large")==="large")return null;const Se=se(de.size||"medium",de.id);return Se?n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:n.jsx("div",{className:Se,children:Ce})},de.id):n.jsx("div",{children:Ce},de.id)})}),I&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>B(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-6 lg:p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(fh,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Currency Totals"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"View totals in different currencies"})]})]}),n.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[n.jsx(Qd,{className:"w-4 h-4 text-blue-600"}),"Open Pipeline"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(j).length>0?Object.entries(j).sort((de,ce)=>ce[1]-de[1]).map(([de,ce])=>{const Ce=vk(de),Xe=de===A;return n.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Xe?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-black text-slate-900",children:Ce?.symbol||de}),n.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:de}),Xe&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:xf(ce,de)}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:Ce?.name||de})]},de)}):n.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-slate-400 font-medium",children:"No pipeline data available"})})})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[n.jsx(Mu,{className:"w-4 h-4 text-emerald-600"}),"Unpaid Invoices"]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(S).length>0?Object.entries(S).sort((de,ce)=>ce[1]-de[1]).map(([de,ce])=>{const Ce=vk(de),Xe=de===A;return n.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Xe?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-lg font-black text-slate-900",children:Ce?.symbol||de}),n.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:de}),Xe&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:xf(ce,de)}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:Ce?.name||de})]},de)}):n.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-slate-400 font-medium",children:"No invoice data available"})})})]})]})}),n.jsx("div",{className:"p-6 lg:p-8 border-t border-slate-100 bg-slate-50",children:n.jsxs("button",{onClick:()=>B(!1),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(_i,{className:"w-4 h-4"}),"Close"]})})]})})]})]})},pM=({extractedData:e,suggestions:t,source:r,onConfirm:a,onCancel:s,isProcessing:i=!1,companies:o})=>{const[l,c]=D.useState(""),[d,u]=D.useState(""),[f,p]=D.useState(""),[m,b]=D.useState(""),[v,g]=D.useState(""),[w,y]=D.useState(""),[j,N]=D.useState(""),[S,E]=D.useState(null),[A,P]=D.useState({});D.useEffect(()=>{r==="business_card"?(c(e?.name?.value||""),u(e?.email?.value||""),p(e?.phone?.value||""),b(e?.title?.value||""),g(e?.linkedin?.value||""),y(e?.company?.value||""),N(e?.website?.value||"")):r==="linkedin"&&(c(e?.name||""),u(e?.email||""),p(e?.phone||""),b(e?.currentRole||e?.headline||""),g(e?.profileImageUrl||""),y(e?.currentCompany||""),N(e?.companyWebsite||"")),t?.existingCompany&&E(t.existingCompany.id)},[e,t,r]);const I=R=>R>=95?"text-green-600 bg-green-50":R>=75?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",B=R=>R>=95?"High Confidence":R>=75?"Medium - Verify":"Low - Review",T=()=>{const R={};return l.trim()||(R.name="Name is required"),d&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)&&(R.email="Invalid email format"),!S&&!w.trim()&&(R.company="Company is required"),P(R),Object.keys(R).length===0},_=()=>{if(!T())return;const R={name:l,email:d.toLowerCase(),phone:f,role:m,linkedin:v};a(R,{name:w,website:j},S)};return n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Confirm"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r==="business_card"?"Verify scanned business card data":"Verify LinkedIn profile data"})]}),n.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:n.jsx(tr,{className:"w-6 h-6"})})]}),t?.existingContact&&n.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start",children:[n.jsx(w0,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-semibold text-yellow-900",children:"Duplicate Contact Detected"}),n.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:['A contact with email "',t.existingContact.email,'" already exists.']}),n.jsx("div",{className:"mt-2 flex gap-2",children:n.jsx("button",{type:"button",className:"text-sm text-yellow-900 underline hover:no-underline",onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-contact",{detail:t.existingContact.id})),children:"View Existing Contact"})})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(qi,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:l,onChange:R=>c(R.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),r==="business_card"&&e?.name?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.name.confidence)}`,children:B(e.name.confidence)})]}),A.name&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.name})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(rs,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"email",value:d,onChange:R=>u(R.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),r==="business_card"&&e?.email?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.email.confidence)}`,children:B(e.email.confidence)})]}),A.email&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.email})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),n.jsxs("div",{className:"relative",children:[n.jsx(Qj,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"tel",value:f,onChange:R=>p(R.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),r==="business_card"&&e?.phone?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.phone.confidence)}`,children:B(e.phone.confidence)})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(Cl,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:m,onChange:R=>b(R.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Chief Technology Officer"}),r==="business_card"&&e?.title?.confidence>0&&n.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.title.confidence)}`,children:B(e.title.confidence)})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),n.jsxs("div",{className:"relative",children:[n.jsx(hh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:v,onChange:R=>g(R.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/johndoe"})]})]})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Information"}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company *"}),n.jsxs("select",{value:S||"new",onChange:R=>{const z=R.target.value;if(z==="new")E(null);else{E(z);const H=o.find(Y=>Y.id===z);H&&(y(H.name),N(H.website))}},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.company?"border-red-500":"border-gray-300"}`,children:[n.jsx("option",{value:"new",children:"+ Create New Company"}),o.map(R=>n.jsx("option",{value:R.id,children:R.name},R.id))]}),A.company&&n.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.company})]}),!S&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),n.jsxs("div",{className:"relative",children:[n.jsx(dl,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"text",value:w,onChange:R=>y(R.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.company?"border-red-500":"border-gray-300"}`,placeholder:"TechCorp Industries"})]})]}),n.jsxs("div",{className:"mb-4",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Website"}),n.jsxs("div",{className:"relative",children:[n.jsx(fh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:j,onChange:R=>N(R.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.techcorp.com"})]})]})]})]}),n.jsxs("div",{className:"flex justify-end gap-3",children:[n.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsx("button",{type:"button",onClick:_,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:i?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Nn,{className:"w-5 h-5"}),"Confirm & Save"]})})]})]})},pie=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:a,showError:s}=Cn(),[i,o]=D.useState("select"),[l,c]=D.useState(null),[d,u]=D.useState(null),[f,p]=D.useState(null),[m,b]=D.useState(null),[v,g]=D.useState(null),[w,y]=D.useState(!1),[j,N]=D.useState([]),[S,E]=D.useState([]),A=D.useRef(null),P=D.useRef(null),I=D.useRef(null),B=D.useRef(null);ft.useEffect(()=>{(async()=>{try{const[X,te]=await Promise.all([md(),hM(!0)]);N(X.data||[]),E(te.data||[])}catch(X){console.error("Failed to load data:",X)}})()},[]);const T=async()=>{console.log("Camera button clicked - starting camera..."),g(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera not supported on this browser");o("camera-loading");let re;try{console.log("Requesting rear camera..."),re=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080}}})}catch{console.log("Rear camera not available, trying any camera..."),re=await navigator.mediaDevices.getUserMedia({video:!0})}if(console.log("Camera stream obtained:",re),B.current=re,o("camera"),await new Promise(X=>setTimeout(X,100)),A.current){A.current.srcObject=re,console.log("Stream set to video element");try{await A.current.play(),console.log(" Camera started successfully")}catch(X){console.error("Video play error:",X)}}}catch(re){console.error(" Camera error:",re);let X="Camera access denied. Please grant camera permission or use file upload.";re.name==="NotAllowedError"?X="Camera permission denied. Please allow camera access in your browser settings.":re.name==="NotFoundError"?X="No camera found on this device. Please use file upload instead.":re.name==="NotReadableError"?X="Camera is already in use by another application.":re.name==="NotSupportedError"&&(X="Camera not supported on this browser. Please use file upload."),g(X),o("select"),_()}},_=()=>{B.current&&(B.current.getTracks().forEach(re=>re.stop()),B.current=null),A.current&&(A.current.srcObject=null)},R=()=>{if(!A.current||!P.current)return;const re=A.current,X=P.current,te=X.getContext("2d");te&&(X.width=re.videoWidth,X.height=re.videoHeight,te.drawImage(re,0,0),X.toBlob(W=>{if(W){const O=new File([W],`business-card-${Date.now()}.jpg`,{type:"image/jpeg"});c(O),u(X.toDataURL("image/jpeg")),_(),H(O)}},"image/jpeg",.95))},z=re=>{const X=re.target.files;if(!X||X.length===0)return;const te=X[0];if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(te.type)){g("Invalid file type. Please upload JPG, PNG, or PDF.");return}if(te.size>10*1024*1024){g("File too large. Maximum size is 10MB.");return}if(c(te),te.type.startsWith("image/")){const W=new FileReader;W.onload=O=>{u(O.target?.result)},W.readAsDataURL(te)}H(te)},H=async re=>{o("processing"),g(null),y(!0);try{const X=await lie(re,r);if(X.success)p(X.data.extractedData),b(X.data.suggestions),o("review");else throw new Error("Failed to process business card")}catch(X){console.error("Processing error:",X),g(X.message||"Failed to process business card. Please try again."),o("select")}finally{y(!1)}},Y=async(re,X,te)=>{y(!0),g(null);try{const W=S.find(q=>q.name==="Business Card Scanner");if((await cie({contactData:re,companyData:X,linkToExistingCompany:te,leadSourceId:W?.id||"",scanConfidenceScore:J(f),originalScanData:f,userId:r})).success)o("success"),a("Contact created from business card!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(W){console.error("Confirm error:",W),g(W.message||"Failed to create contact. Please try again."),s(W.message||"Failed to create contact")}finally{y(!1)}},J=re=>{if(!re)return 0;const X=[re.name?.confidence||0,re.email?.confidence||0,re.phone?.confidence||0,re.title?.confidence||0,re.company?.confidence||0].filter(te=>te>0);return X.length===0?0:Math.round(X.reduce((te,W)=>te+W,0)/X.length)};return ft.useEffect(()=>()=>{_()},[]),n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="select"&&n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan Business Card"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose how to capture the business card"})]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(tr,{className:"w-6 h-6"})})]}),v&&n.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:v}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("button",{onClick:re=>{re.preventDefault(),console.log("Camera button clicked"),T()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center cursor-pointer",type:"button",children:[n.jsx(v6,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Use Camera"}),n.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo of the card"})]}),n.jsxs("button",{onClick:()=>I.current?.click(),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:[n.jsx(kc,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),n.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Upload File"}),n.jsx("p",{className:"text-sm text-gray-600",children:"JPG, PNG, or PDF (10MB max)"})]})]}),n.jsx("input",{ref:I,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:z,className:"hidden"})]}),i==="camera-loading"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(gt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Starting Camera..."}),n.jsx("p",{className:"text-gray-600",children:"Please allow camera access when prompted"})]}),i==="camera"&&n.jsxs("div",{className:"relative bg-black",children:[n.jsx("video",{ref:A,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto rounded-t-xl",style:{minHeight:"400px"}}),n.jsx("canvas",{ref:P,className:"hidden"}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:n.jsx("div",{className:"border-4 border-white border-dashed rounded-xl opacity-50",style:{width:"85%",height:"50%"}})}),n.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-center bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:n.jsx("p",{className:"text-sm font-semibold",children:"Center card in frame"})})]}),n.jsx("div",{className:"absolute top-4 left-4",children:n.jsx("button",{onClick:()=>{_(),o("select")},className:"bg-white rounded-full p-2 shadow-lg hover:bg-gray-100",children:n.jsx(Qk,{className:"w-6 h-6 text-gray-700"})})}),n.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center",children:n.jsx("button",{onClick:R,className:"w-16 h-16 bg-white rounded-full border-4 border-blue-600 shadow-lg hover:bg-blue-50 transition-colors active:scale-95",children:n.jsx(v6,{className:"w-8 h-8 mx-auto text-blue-600"})})})]}),i==="processing"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(gt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Business Card..."}),n.jsx("p",{className:"text-gray-600",children:"Extracting contact information"}),d&&n.jsx("div",{className:"mt-6",children:n.jsx("img",{src:d,alt:"Captured",className:"max-w-full max-h-40 mx-auto rounded-lg shadow-md"})})]}),i==="review"&&f&&n.jsx(pM,{extractedData:f,suggestions:m||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"business_card",onConfirm:Y,onCancel:e,isProcessing:w,companies:j}),i==="success"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Nn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),n.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})},xie=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:a,showError:s}=Cn(),[i,o]=D.useState("input"),[l,c]=D.useState(""),[d,u]=D.useState(null),[f,p]=D.useState(null),[m,b]=D.useState(null),[v,g]=D.useState(!1),[w,y]=D.useState([]),[j,N]=D.useState([]);ft.useEffect(()=>{(async()=>{try{const[T,_]=await Promise.all([md(),hM(!0)]);y(T.data||[]),N(_.data||[])}catch(T){console.error("Failed to load data:",T)}})()},[]);const S=B=>/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[a-zA-Z0-9-_]+\/?$/i.test(B),E=B=>{let T=B.trim();return!T.startsWith("http://")&&!T.startsWith("https://")&&(T=`https://${T}`),T.includes("www.")||(T=T.replace("linkedin.com","www.linkedin.com")),T.replace(/\/$/,"")},A=B=>{c(B),b(null)},P=async()=>{if(!l.trim()){b("Please enter a LinkedIn URL");return}const B=E(l);if(!S(B)){b("Invalid LinkedIn URL format. Example: linkedin.com/in/johndoe");return}o("fetching"),b(null),g(!0);try{const T=await die({linkedinUrl:B,userId:r});if(T.success)u(T.data.profile),p(T.data.suggestions),o("review");else throw new Error("Failed to fetch LinkedIn profile")}catch(T){console.error("Fetch error:",T);let _="Failed to fetch LinkedIn profile";T.message?.includes("Invalid LinkedIn URL")?_="Invalid LinkedIn URL format":T.message?.includes("private")?_="This LinkedIn profile is private and cannot be accessed":T.message?.includes("rate limit")&&(_="Rate limit exceeded. Please try again later"),b(_),o("input")}finally{g(!1)}},I=async(B,T,_)=>{g(!0),b(null);try{const R=j.find(H=>H.name==="LinkedIn Scanner");if((await uie({contactData:B,linkedinData:d?{headline:d.headline,currentRole:d.currentRole,profileImageUrl:d.profileImageUrl}:void 0,companyData:T,linkToExistingCompany:_,leadSourceId:R?.id||"",userId:r})).success)o("success"),a("Contact created from LinkedIn profile!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(R){console.error("Confirm error:",R),b(R.message||"Failed to create contact. Please try again."),s(R.message||"Failed to create contact")}finally{g(!1)}};return n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="input"&&n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan LinkedIn Profile"}),n.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import contact from LinkedIn profile"})]}),n.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:n.jsx(tr,{className:"w-6 h-6"})})]}),m&&n.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[n.jsx($n,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),n.jsx("div",{className:"text-red-800",children:m})]}),n.jsxs("div",{className:"mb-6",children:[n.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile URL"}),n.jsxs("div",{className:"relative",children:[n.jsx(hh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),n.jsx("input",{type:"url",value:l,onChange:B=>A(B.target.value),onKeyPress:B=>B.key==="Enter"&&P(),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.linkedin.com/in/johndoe"})]}),n.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Example: linkedin.com/in/johndoe or https://www.linkedin.com/in/johndoe"})]}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[n.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How it works"}),n.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[n.jsx("li",{children:"Paste any public LinkedIn profile URL"}),n.jsx("li",{children:"We'll extract available contact and company information"}),n.jsx("li",{children:"Review and edit before saving to your CRM"}),n.jsx("li",{children:"Note: Email and phone may not be publicly available"})]})]}),n.jsx("div",{className:"flex justify-end",children:n.jsxs("button",{onClick:P,disabled:!l.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(hh,{className:"w-5 h-5"}),"Fetch Profile"]})})]}),i==="fetching"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(gt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fetching LinkedIn Profile..."}),n.jsx("p",{className:"text-gray-600",children:"Extracting contact information"})]}),i==="review"&&d&&n.jsx(pM,{extractedData:d,suggestions:f||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"linkedin",onConfirm:I,onCancel:e,isProcessing:v,companies:w}),i==="success"&&n.jsxs("div",{className:"p-12 text-center",children:[n.jsx(Nn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),n.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})};var hp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},gie={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},vie=class{#e=gie;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},dh=new vie;function bie(e){setTimeout(e,0)}var Ah=typeof window>"u"||"Deno"in globalThis;function Nl(){}function yie(e,t){return typeof e=="function"?e(t):e}function bk(e){return typeof e=="number"&&e>=0&&e!==1/0}function xM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function b0(e,t){return typeof e=="function"?e(t):e}function td(e,t){return typeof e=="function"?e(t):e}function CI(e,t){const{type:r="all",exact:a,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(a){if(t.queryHash!==c3(o,t.options))return!1}else if(!eg(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function AI(e,t){const{exact:r,status:a,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Eh(t.options.mutationKey)!==Eh(i))return!1}else if(!eg(t.options.mutationKey,i))return!1}return!(a&&t.state.status!==a||s&&!s(t))}function c3(e,t){return(t?.queryKeyHashFn||Eh)(e)}function Eh(e){return JSON.stringify(e,(t,r)=>yk(r)?Object.keys(r).sort().reduce((a,s)=>(a[s]=r[s],a),{}):r)}function eg(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>eg(e[r],t[r])):!1}var wie=Object.prototype.hasOwnProperty;function gM(e,t,r=0){if(e===t)return e;if(r>500)return t;const a=EI(e)&&EI(t);if(!a&&!(yk(e)&&yk(t)))return t;const i=(a?e:Object.keys(e)).length,o=a?t:Object.keys(t),l=o.length,c=a?new Array(l):{};let d=0;for(let u=0;u<l;u++){const f=a?u:o[u],p=e[f],m=t[f];if(p===m){c[f]=p,(a?u<i:wie.call(e,f))&&d++;continue}if(p===null||m===null||typeof p!="object"||typeof m!="object"){c[f]=m;continue}const b=gM(p,m,r+1);c[f]=b,b===p&&d++}return i===l&&d===i?e:c}function fb(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function EI(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function yk(e){if(!TI(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!TI(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function TI(e){return Object.prototype.toString.call(e)==="[object Object]"}function Nie(e){return new Promise(t=>{dh.setTimeout(t,e)})}function wk(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?gM(e,t):t}function jie(e,t,r=0){const a=[...e,t];return r&&a.length>r?a.slice(1):a}function kie(e,t,r=0){const a=[t,...e];return r&&a.length>r?a.slice(0,-1):a}var d3=Symbol();function vM(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===d3?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function u3(e,t){return typeof e=="function"?e(...t):!!e}function Sie(e,t,r){let a=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),a||(a=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var _ie=class extends hp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Ah&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},f3=new _ie;function Nk(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function a(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{a({status:"fulfilled",value:s}),e(s)},r.reject=s=>{a({status:"rejected",reason:s}),t(s)},r}var Cie=bie;function Aie(){let e=[],t=0,r=l=>{l()},a=l=>{l()},s=Cie;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{a(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{a=l},setScheduler:l=>{s=l}}}var Bi=Aie(),Eie=class extends hp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Ah&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},hb=new Eie;function Tie(e){return Math.min(1e3*2**e,3e4)}function bM(e){return(e??"online")==="online"?hb.isOnline():!0}var jk=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function yM(e){let t=!1,r=0,a;const s=Nk(),i=()=>s.status!=="pending",o=v=>{if(!i()){const g=new jk(v);p(g),e.onCancel?.(g)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>f3.isFocused()&&(e.networkMode==="always"||hb.isOnline())&&e.canRun(),u=()=>bM(e.networkMode)&&e.canRun(),f=v=>{i()||(a?.(),s.resolve(v))},p=v=>{i()||(a?.(),s.reject(v))},m=()=>new Promise(v=>{a=g=>{(i()||d())&&v(g)},e.onPause?.()}).then(()=>{a=void 0,i()||e.onContinue?.()}),b=()=>{if(i())return;let v;const g=r===0?e.initialPromise:void 0;try{v=g??e.fn()}catch(w){v=Promise.reject(w)}Promise.resolve(v).then(f).catch(w=>{if(i())return;const y=e.retry??(Ah?0:3),j=e.retryDelay??Tie,N=typeof j=="function"?j(r,w):j,S=y===!0||typeof y=="number"&&r<y||typeof y=="function"&&y(r,w);if(t||!S){p(w);return}r++,e.onFail?.(r,w),Nie(N).then(()=>d()?void 0:m()).then(()=>{t?p(w):b()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(a?.(),s),cancelRetry:l,continueRetry:c,canStart:u,start:()=>(u()?b():m().then(b),s)}}var wM=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),bk(this.gcTime)&&(this.#e=dh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ah?1/0:300*1e3))}clearGcTimeout(){this.#e&&(dh.clearTimeout(this.#e),this.#e=void 0)}},Oie=class extends wM{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=PI(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=PI(this.options);t.data!==void 0&&(this.setState(OI(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=wk(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Nl).catch(Nl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>td(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===d3||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>b0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!xM(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,a=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},s=()=>{const l=vM(this.options,t),d=(()=>{const u={client:this.#a,queryKey:this.queryKey,meta:this.meta};return a(u),u})();return this.#o=!1,this.options.persister?this.options.persister(l,d,this):l(d)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:s};return a(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=yM({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof jk&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof jk){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...NM(r.data,this.options),fetchMeta:e.meta??null};case"success":const a={...r,...OI(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?a:void 0,a;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Bi.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function NM(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:bM(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function OI(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function PI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,a=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var jM=class extends hp{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=Nk(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#p;#f;#h;#c;#d;#l;#m=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),II(this.#t,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return kk(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return kk(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof td(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),t._defaulted&&!fb(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const a=this.hasListeners();a&&DI(this.#t,r,this.options,t)&&this.#u(),this.updateResult(),a&&(this.#t!==r||td(this.options.enabled,this.#t)!==td(t.enabled,this.#t)||b0(this.options.staleTime,this.#t)!==b0(t.staleTime,this.#t))&&this.#x();const s=this.#g();a&&(this.#t!==r||td(this.options.enabled,this.#t)!==td(t.enabled,this.#t)||s!==this.#l)&&this.#v(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return Iie(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,a)=>(this.trackProp(a),t?.(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,a))})}trackProp(e){this.#m.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#N();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Nl)),t}#x(){this.#y();const e=b0(this.options.staleTime,this.#t);if(Ah||this.#a.isStale||!bk(e))return;const r=xM(this.#a.dataUpdatedAt,e)+1;this.#c=dh.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!(Ah||td(this.options.enabled,this.#t)===!1||!bk(this.#l)||this.#l===0)&&(this.#d=dh.setInterval(()=>{(this.options.refetchIntervalInBackground||f3.isFocused())&&this.#u()},this.#l))}#b(){this.#x(),this.#v(this.#g())}#y(){this.#c&&(dh.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#d&&(dh.clearInterval(this.#d),this.#d=void 0)}createResult(e,t){const r=this.#t,a=this.options,s=this.#a,i=this.#n,o=this.#i,c=e!==r?e.state:this.#r,{state:d}=e;let u={...d},f=!1,p;if(t._optimisticResults){const P=this.hasListeners(),I=!P&&II(e,t),B=P&&DI(e,r,t,a);(I||B)&&(u={...u,...NM(d.data,e.options)}),t._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:b,status:v}=u;p=u.data;let g=!1;if(t.placeholderData!==void 0&&p===void 0&&v==="pending"){let P;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(P=s.data,g=!0):P=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,P!==void 0&&(v="success",p=wk(s?.data,P,t),f=!0)}if(t.select&&p!==void 0&&!g)if(s&&p===i?.data&&t.select===this.#p)p=this.#f;else try{this.#p=t.select,p=t.select(p),p=wk(s?.data,p,t),this.#f=p,this.#s=null}catch(P){this.#s=P}this.#s&&(m=this.#s,p=this.#f,b=Date.now(),v="error");const w=u.fetchStatus==="fetching",y=v==="pending",j=v==="error",N=y&&w,S=p!==void 0,A={status:v,fetchStatus:u.fetchStatus,isPending:y,isSuccess:v==="success",isError:j,isInitialLoading:N,isLoading:N,data:p,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:b,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>c.dataUpdateCount||u.errorUpdateCount>c.errorUpdateCount,isFetching:w,isRefetching:w&&!y,isLoadingError:j&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:f,isRefetchError:j&&S,isStale:h3(e,t),refetch:this.refetch,promise:this.#o,isEnabled:td(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const P=A.data!==void 0,I=A.status==="error"&&!P,B=R=>{I?R.reject(A.error):P&&R.resolve(A.data)},T=()=>{const R=this.#o=A.promise=Nk();B(R)},_=this.#o;switch(_.status){case"pending":e.queryHash===r.queryHash&&B(_);break;case"fulfilled":(I||A.data!==_.value)&&T();break;case"rejected":(!I||A.error!==_.reason)&&T();break}}return A}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),fb(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:a}=this.options,s=typeof a=="function"?a():a;if(s==="all"||!s&&!this.#m.size)return!0;const i=new Set(s??this.#m);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==e[l]&&i.has(l)})};this.#j({listeners:r()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#j(e){Bi.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Pie(e,t){return td(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function II(e,t){return Pie(e,t)||e.state.data!==void 0&&kk(e,t,t.refetchOnMount)}function kk(e,t,r){if(td(t.enabled,e)!==!1&&b0(t.staleTime,e)!=="static"){const a=typeof r=="function"?r(e):r;return a==="always"||a!==!1&&h3(e,t)}return!1}function DI(e,t,r,a){return(e!==t||td(a.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&h3(e,r)}function h3(e,t){return td(t.enabled,e)!==!1&&e.isStaleByTime(b0(t.staleTime,e))}function Iie(e,t){return!fb(e.getCurrentResult(),t)}function mb(e){return{onFetch:(t,r)=>{const a=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let u=!1;const f=b=>{Sie(b,()=>t.signal,()=>u=!0)},p=vM(t.options,t.fetchOptions),m=async(b,v,g)=>{if(u)return Promise.reject();if(v==null&&b.pages.length)return Promise.resolve(b);const y=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:v,direction:g?"backward":"forward",meta:t.options.meta};return f(E),E})(),j=await p(y),{maxPages:N}=t.options,S=g?kie:jie;return{pages:S(b.pages,j,N),pageParams:S(b.pageParams,v,N)}};if(s&&i.length){const b=s==="backward",v=b?kM:Sk,g={pages:i,pageParams:o},w=v(a,g);l=await m(g,w,b)}else{const b=e??i.length;do{const v=c===0?o[0]??a.initialPageParam:Sk(a,l);if(c>0&&v==null)break;l=await m(l,v),c++}while(c<b)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=d}}}function Sk(e,{pages:t,pageParams:r}){const a=t.length-1;return t.length>0?e.getNextPageParam(t[a],t,r[a],r):void 0}function kM(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function Die(e,t){return t?Sk(e,t)!=null:!1}function Lie(e,t){return!t||!e.getPreviousPageParam?!1:kM(e,t)!=null}var Fie=class extends jM{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:mb()})}getOptimisticResult(e){return e.behavior=mb(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:r}=e,a=super.createResult(e,t),{isFetching:s,isRefetching:i,isError:o,isRefetchError:l}=a,c=r.fetchMeta?.fetchMore?.direction,d=o&&c==="forward",u=s&&c==="forward",f=o&&c==="backward",p=s&&c==="backward";return{...a,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Die(t,r.data),hasPreviousPage:Lie(t,r.data),isFetchNextPageError:d,isFetchingNextPage:u,isFetchPreviousPageError:f,isFetchingPreviousPage:p,isRefetchError:l&&!d&&!f,isRefetching:i&&!u&&!p}}},Mie=class extends wM{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||SM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=yM({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const a=this.state.status==="pending",s=!this.#a.canStart();try{if(a)t();else{this.#n({type:"pending",variables:e,isPaused:s}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#a.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Bi.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function SM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Rie=class extends hp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const a=new Mie({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(a),a}add(e){this.#e.add(e);const t=Cv(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Cv(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const a=r.indexOf(e);a!==-1&&r.splice(a,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Cv(e);if(typeof t=="string"){const a=this.#t.get(t)?.find(s=>s.state.status==="pending");return!a||a===e}else return!0}runNext(e){const t=Cv(e);return typeof t=="string"?this.#t.get(t)?.find(a=>a!==e&&a.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Bi.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>AI(t,r))}findAll(e={}){return this.getAll().filter(t=>AI(e,t))}notify(e){Bi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Bi.batch(()=>Promise.all(e.map(t=>t.continue().catch(Nl))))}};function Cv(e){return e.options.scope?.id}var Bie=class extends hp{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),fb(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&Eh(r.mutationKey)!==Eh(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??SM();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Bi.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,a=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#a.onSuccess?.(t.data,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(t.data,null,r,a,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#a.onError?.(t.error,r,a,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(void 0,t.error,r,a,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},Uie=class extends hp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const a=t.queryKey,s=t.queryHash??c3(a,t);let i=this.get(s);return i||(i=new Oie({client:e,queryKey:a,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(a)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Bi.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>CI(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>CI(e,r)):t}notify(e){Bi.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Bi.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Bi.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},qie=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new Uie,this.#t=e.mutationCache||new Rie,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=f3.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=hb.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),a=r.state.data;return a===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(b0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const a=r.data;return[t,a]})}setQueryData(e,t,r){const a=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(a.queryHash)?.state.data,o=yie(t,i);if(o!==void 0)return this.#e.build(this,a).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Bi.batch(()=>this.#e.findAll(e).map(({queryKey:a})=>[a,this.setQueryData(a,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Bi.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Bi.batch(()=>(r.findAll(e).forEach(a=>{a.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},a=Bi.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(a).then(Nl).catch(Nl)}invalidateQueries(e,t={}){return Bi.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},a=Bi.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(Nl)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(a).then(Nl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(b0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Nl).catch(Nl)}fetchInfiniteQuery(e){return e.behavior=mb(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Nl).catch(Nl)}ensureInfiniteQueryData(e){return e.behavior=mb(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return hb.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(Eh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(a=>{eg(e,a.queryKey)&&Object.assign(r,a.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(Eh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(a=>{eg(e,a.mutationKey)&&Object.assign(r,a.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=c3(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===d3&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},_M=D.createContext(void 0),Fa=e=>{const t=D.useContext(_M);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},$ie=({client:e,children:t})=>(D.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),n.jsx(_M.Provider,{value:e,children:t})),CM=D.createContext(!1),zie=()=>D.useContext(CM);CM.Provider;function Hie(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Wie=D.createContext(Hie()),Gie=()=>D.useContext(Wie),Vie=(e,t,r)=>{const a=r?.state.error&&typeof e.throwOnError=="function"?u3(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||a)&&(t.isReset()||(e.retryOnMount=!1))},Kie=e=>{D.useEffect(()=>{e.clearReset()},[e])},Xie=({result:e,errorResetBoundary:t,throwOnError:r,query:a,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&a&&(s&&e.data===void 0||u3(r,[e.error,a])),Yie=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...s)=>r(a(...s)):r(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Qie=(e,t)=>e.isLoading&&e.isFetching&&!t,Jie=(e,t)=>e?.suspense&&t.isPending,LI=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function AM(e,t,r){const a=zie(),s=Gie(),i=Fa(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=a?"isRestoring":"optimistic",Yie(o),Vie(o,s,l),Kie(s);const c=!i.getQueryCache().get(o.queryHash),[d]=D.useState(()=>new t(i,o)),u=d.getOptimisticResult(o),f=!a&&e.subscribed!==!1;if(D.useSyncExternalStore(D.useCallback(p=>{const m=f?d.subscribe(Bi.batchCalls(p)):Nl;return d.updateResult(),m},[d,f]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),D.useEffect(()=>{d.setOptions(o)},[o,d]),Jie(o,u))throw LI(o,d,s);if(Xie({result:u,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw u.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,u),o.experimental_prefetchInRender&&!Ah&&Qie(u,a)&&(c?LI(o,d,s):l?.promise)?.catch(Nl).finally(()=>{d.updateResult()}),o.notifyOnChangeProps?u:d.trackResult(u)}function Ys(e,t){return AM(e,jM)}function fi(e,t){const r=Fa(),[a]=D.useState(()=>new Bie(r,e));D.useEffect(()=>{a.setOptions(e)},[a,e]);const s=D.useSyncExternalStore(D.useCallback(o=>a.subscribe(Bi.batchCalls(o)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),i=D.useCallback((o,l)=>{a.mutate(o,l).catch(Nl)},[a]);if(s.error&&u3(a.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Zie(e,t){return AM(e,Fie)}const py={companies:e=>["companies",e],contacts:e=>["contacts",e],deals:()=>["deals"],users:()=>["users"]},eoe=e=>Ys({queryKey:py.companies(e),queryFn:async()=>(await md(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),toe=e=>Ys({queryKey:py.contacts(e),queryFn:async()=>(await Ch(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),roe=()=>Ys({queryKey:py.deals(),queryFn:async()=>(await Sg()).data||[],staleTime:60*1e3,gcTime:600*1e3}),noe=()=>Ys({queryKey:py.users(),queryFn:async()=>(await _c()).data||[],staleTime:300*1e3,gcTime:1800*1e3}),aoe=()=>{const e=Fa();return fi({mutationFn:async({id:t,updates:r})=>(await V7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["companies"]});const a=e.getQueriesData({queryKey:["companies"]});return e.setQueriesData({queryKey:["companies"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousCompanies:a}},onError:(t,r,a)=>{a?.previousCompanies&&a.previousCompanies.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]})}})},soe=()=>{const e=Fa();return fi({mutationFn:async({id:t,updates:r})=>(await X7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["contacts"]});const a=e.getQueriesData({queryKey:["contacts"]});return e.setQueriesData({queryKey:["contacts"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousContacts:a}},onError:(t,r,a)=>{a?.previousContacts&&a.previousContacts.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["contacts"]})}})},ioe=()=>{const e=Fa();return fi({mutationFn:async t=>(await K7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(a=>a.id!==t))}})},ooe=()=>{const e=Fa();return fi({mutationFn:async t=>(await Y7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(a=>a.id!==t))}})},loe=()=>{const e=Fa();return fi({mutationFn:async t=>(await Promise.all(t.map(r=>K7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(a=>!t.includes(a.id)))}})},coe=()=>{const e=Fa();return fi({mutationFn:async t=>(await Promise.all(t.map(r=>Y7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(a=>!t.includes(a.id)))}})},doe=()=>{const e=Fa();return fi({mutationFn:async({ids:t,updates:r})=>(await Promise.all(t.map(a=>V7(a,r))),{ids:t,updates:r}),onSuccess:({ids:t,updates:r})=>{e.setQueriesData({queryKey:["companies"]},a=>a?.map(s=>t.includes(s.id)?{...s,...r}:s))}})},Md=["playbooks"],Os={templates:{all:()=>[...Md,"templates"],lists:()=>[...Md,"templates","list"],list:e=>[...Md,"templates","list",e],details:()=>[...Md,"templates","detail"],detail:e=>[...Md,"templates","detail",e]},instances:{all:()=>[...Md,"instances"],lists:()=>[...Md,"instances","list"],list:e=>[...Md,"instances","list",e],details:()=>[...Md,"instances","detail"],detail:e=>[...Md,"instances","detail",e],completions:e=>[...Md,"instances","detail",e,"completions"]}},EM=e=>{const t=Fa();return D.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:Os.templates.lists()})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[t]),Ys({queryKey:Os.templates.list(e),queryFn:async()=>{const r=await iae(e);return r.data||r||[]},staleTime:0,refetchInterval:120*1e3,placeholderData:r=>r})},uoe=e=>Ys({queryKey:Os.templates.detail(e),queryFn:async()=>{const t=await oae(e);return t.data||t},enabled:!!e}),TM=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async a=>{const s=await lae(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:Os.templates.lists()}),e.refetchQueries({queryKey:Os.templates.lists()}),t("Playbook template created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to create playbook template")}})},foe=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async({id:a,data:s})=>{const i=await cae(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:Os.templates.lists()}),e.invalidateQueries({queryKey:Os.templates.detail(s.id)}),e.refetchQueries({queryKey:Os.templates.lists()}),t("Playbook template updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to update playbook template")}})},hoe=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async a=>(await dae(a),a),onSuccess:()=>{e.invalidateQueries({queryKey:Os.templates.lists()}),t("Playbook template deleted successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:a=>{r(a.message||"Failed to delete playbook template")}})},xy=e=>Ys({queryKey:Os.instances.list(e),queryFn:async()=>{const t=await uae(e);return t.data||t||[]},staleTime:0,refetchInterval:120*1e3,placeholderData:t=>t}),moe=e=>Ys({queryKey:Os.instances.detail(e),queryFn:async()=>{const t=await fae(e);return t.data||t},enabled:!!e}),poe=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async a=>{const s=await hae(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:Os.instances.lists()}),e.refetchQueries({queryKey:Os.instances.lists()}),t("Playbook instance created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:a=>{r(a.message||"Failed to create playbook instance")}})},xoe=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async({id:a,status:s})=>{const i=await mae(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:Os.instances.lists()}),e.invalidateQueries({queryKey:Os.instances.detail(s.id)}),t("Playbook instance status updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:a=>{r(a.message||"Failed to update playbook instance status")}})},goe=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async({instanceId:a,stepId:s})=>{const i=await pae(a,s);return i.data||i},onMutate:async({instanceId:a,stepId:s})=>{await e.cancelQueries({queryKey:Os.instances.completions(a)});const i=e.getQueryData(Os.instances.completions(a));return e.setQueryData(Os.instances.completions(a),(o=[])=>{if(o.some(c=>c.stepId===s))return o;const l=JSON.parse(localStorage.getItem("user_data")||"{}");return[...o,{id:`temp-${Date.now()}`,instanceId:a,stepId:s,completedBy:l.id,completedAt:new Date().toISOString()}]}),{previousCompletions:i}},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:Os.instances.completions(s.instanceId)}),e.invalidateQueries({queryKey:Os.instances.detail(s.instanceId)}),e.invalidateQueries({queryKey:Os.instances.lists()}),t("Step marked as complete!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:(a,s,i)=>{i?.previousCompletions&&e.setQueryData(Os.instances.completions(s.instanceId),i.previousCompletions),r(a.message||"Failed to mark step as complete")}})},_g=e=>{const t=Fa();return D.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:Os.instances.completions(e)})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[e,t]),Ys({queryKey:Os.instances.completions(e),queryFn:async()=>{const r=await xae(e);return r.data||r||[]},enabled:!!e,staleTime:0,refetchOnWindowFocus:!1})};const{entries:OM,setPrototypeOf:FI,isFrozen:voe,getPrototypeOf:boe,getOwnPropertyDescriptor:yoe}=Object;let{freeze:El,seal:ud,create:_k}=Object,{apply:Ck,construct:Ak}=typeof Reflect<"u"&&Reflect;El||(El=function(t){return t});ud||(ud=function(t){return t});Ck||(Ck=function(t,r){for(var a=arguments.length,s=new Array(a>2?a-2:0),i=2;i<a;i++)s[i-2]=arguments[i];return t.apply(r,s)});Ak||(Ak=function(t){for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return new t(...a)});const Av=Tl(Array.prototype.forEach),woe=Tl(Array.prototype.lastIndexOf),MI=Tl(Array.prototype.pop),Rp=Tl(Array.prototype.push),Noe=Tl(Array.prototype.splice),Jv=Tl(String.prototype.toLowerCase),pj=Tl(String.prototype.toString),xj=Tl(String.prototype.match),Bp=Tl(String.prototype.replace),joe=Tl(String.prototype.indexOf),koe=Tl(String.prototype.trim),$d=Tl(Object.prototype.hasOwnProperty),wl=Tl(RegExp.prototype.test),Up=Soe(TypeError);function Tl(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,a=new Array(r>1?r-1:0),s=1;s<r;s++)a[s-1]=arguments[s];return Ck(e,t,a)}}function Soe(e){return function(){for(var t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return Ak(e,r)}}function qn(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Jv;FI&&FI(e,null);let a=t.length;for(;a--;){let s=t[a];if(typeof s=="string"){const i=r(s);i!==s&&(voe(t)||(t[a]=i),s=i)}e[s]=!0}return e}function _oe(e){for(let t=0;t<e.length;t++)$d(e,t)||(e[t]=null);return e}function Nu(e){const t=_k(null);for(const[r,a]of OM(e))$d(e,r)&&(Array.isArray(a)?t[r]=_oe(a):a&&typeof a=="object"&&a.constructor===Object?t[r]=Nu(a):t[r]=a);return t}function qp(e,t){for(;e!==null;){const a=yoe(e,t);if(a){if(a.get)return Tl(a.get);if(typeof a.value=="function")return Tl(a.value)}e=boe(e)}function r(){return null}return r}const RI=El(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),gj=El(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vj=El(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Coe=El(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),bj=El(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Aoe=El(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),BI=El(["#text"]),UI=El(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),yj=El(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qI=El(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ev=El(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Eoe=ud(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Toe=ud(/<%[\w\W]*|[\w\W]*%>/gm),Ooe=ud(/\$\{[\w\W]*/gm),Poe=ud(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ioe=ud(/^aria-[\-\w]+$/),PM=ud(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Doe=ud(/^(?:\w+script|data):/i),Loe=ud(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),IM=ud(/^html$/i),Foe=ud(/^[a-z][.\w]*(-[.\w]+)+$/i);var $I=Object.freeze({__proto__:null,ARIA_ATTR:Ioe,ATTR_WHITESPACE:Loe,CUSTOM_ELEMENT:Foe,DATA_ATTR:Poe,DOCTYPE_NAME:IM,ERB_EXPR:Toe,IS_ALLOWED_URI:PM,IS_SCRIPT_OR_DATA:Doe,MUSTACHE_EXPR:Eoe,TMPLIT_EXPR:Ooe});const $p={element:1,text:3,progressingInstruction:7,comment:8,document:9},Moe=function(){return typeof window>"u"?null:window},Roe=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let a=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(a=r.getAttribute(s));const i="dompurify"+(a?"#"+a:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},zI=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function DM(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Moe();const t=ge=>DM(ge);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==$p.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const a=r,s=a.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:f,DOMParser:p,trustedTypes:m}=e,b=c.prototype,v=qp(b,"cloneNode"),g=qp(b,"remove"),w=qp(b,"nextSibling"),y=qp(b,"childNodes"),j=qp(b,"parentNode");if(typeof o=="function"){const ge=r.createElement("template");ge.content&&ge.content.ownerDocument&&(r=ge.content.ownerDocument)}let N,S="";const{implementation:E,createNodeIterator:A,createDocumentFragment:P,getElementsByTagName:I}=r,{importNode:B}=a;let T=zI();t.isSupported=typeof OM=="function"&&typeof j=="function"&&E&&E.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_,ERB_EXPR:R,TMPLIT_EXPR:z,DATA_ATTR:H,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:J,ATTR_WHITESPACE:re,CUSTOM_ELEMENT:X}=$I;let{IS_ALLOWED_URI:te}=$I,W=null;const O=qn({},[...RI,...gj,...vj,...bj,...BI]);let q=null;const G=qn({},[...UI,...yj,...qI,...Ev]);let U=Object.seal(_k(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,ae=null;const me=Object.seal(_k(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let se=!0,le=!0,Me=!1,ue=!0,Ue=!1,Ae=!0,ie=!1,Z=!1,Ee=!1,we=!1,Oe=!1,de=!1,ce=!0,Ce=!1;const Xe="user-content-";let xe=!0,fe=!1,Se={},qe=null;const je=qn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Le=null;const Re=qn({},["audio","video","img","source","image","track"]);let Je=null;const ut=qn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",At="http://www.w3.org/2000/svg",Bt="http://www.w3.org/1999/xhtml";let Yt=Bt,We=!1,Ct=null;const br=qn({},[vt,At,Bt],pj);let Jt=qn({},["mi","mo","mn","ms","mtext"]),Dr=qn({},["annotation-xml"]);const Hr=qn({},["title","style","font","a","script"]);let tt=null;const Dt=["application/xhtml+xml","text/html"],mr="text/html";let Sr=null,Jr=null;const _r=r.createElement("form"),Wr=function(ve){return ve instanceof RegExp||ve instanceof Function},sr=function(){let ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Jr&&Jr===ve)){if((!ve||typeof ve!="object")&&(ve={}),ve=Nu(ve),tt=Dt.indexOf(ve.PARSER_MEDIA_TYPE)===-1?mr:ve.PARSER_MEDIA_TYPE,Sr=tt==="application/xhtml+xml"?pj:Jv,W=$d(ve,"ALLOWED_TAGS")?qn({},ve.ALLOWED_TAGS,Sr):O,q=$d(ve,"ALLOWED_ATTR")?qn({},ve.ALLOWED_ATTR,Sr):G,Ct=$d(ve,"ALLOWED_NAMESPACES")?qn({},ve.ALLOWED_NAMESPACES,pj):br,Je=$d(ve,"ADD_URI_SAFE_ATTR")?qn(Nu(ut),ve.ADD_URI_SAFE_ATTR,Sr):ut,Le=$d(ve,"ADD_DATA_URI_TAGS")?qn(Nu(Re),ve.ADD_DATA_URI_TAGS,Sr):Re,qe=$d(ve,"FORBID_CONTENTS")?qn({},ve.FORBID_CONTENTS,Sr):je,K=$d(ve,"FORBID_TAGS")?qn({},ve.FORBID_TAGS,Sr):Nu({}),ae=$d(ve,"FORBID_ATTR")?qn({},ve.FORBID_ATTR,Sr):Nu({}),Se=$d(ve,"USE_PROFILES")?ve.USE_PROFILES:!1,se=ve.ALLOW_ARIA_ATTR!==!1,le=ve.ALLOW_DATA_ATTR!==!1,Me=ve.ALLOW_UNKNOWN_PROTOCOLS||!1,ue=ve.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ue=ve.SAFE_FOR_TEMPLATES||!1,Ae=ve.SAFE_FOR_XML!==!1,ie=ve.WHOLE_DOCUMENT||!1,we=ve.RETURN_DOM||!1,Oe=ve.RETURN_DOM_FRAGMENT||!1,de=ve.RETURN_TRUSTED_TYPE||!1,Ee=ve.FORCE_BODY||!1,ce=ve.SANITIZE_DOM!==!1,Ce=ve.SANITIZE_NAMED_PROPS||!1,xe=ve.KEEP_CONTENT!==!1,fe=ve.IN_PLACE||!1,te=ve.ALLOWED_URI_REGEXP||PM,Yt=ve.NAMESPACE||Bt,Jt=ve.MATHML_TEXT_INTEGRATION_POINTS||Jt,Dr=ve.HTML_INTEGRATION_POINTS||Dr,U=ve.CUSTOM_ELEMENT_HANDLING||{},ve.CUSTOM_ELEMENT_HANDLING&&Wr(ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=ve.CUSTOM_ELEMENT_HANDLING.tagNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&Wr(ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=ve.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),ve.CUSTOM_ELEMENT_HANDLING&&typeof ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(U.allowCustomizedBuiltInElements=ve.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ue&&(le=!1),Oe&&(we=!0),Se&&(W=qn({},BI),q=[],Se.html===!0&&(qn(W,RI),qn(q,UI)),Se.svg===!0&&(qn(W,gj),qn(q,yj),qn(q,Ev)),Se.svgFilters===!0&&(qn(W,vj),qn(q,yj),qn(q,Ev)),Se.mathMl===!0&&(qn(W,bj),qn(q,qI),qn(q,Ev))),ve.ADD_TAGS&&(typeof ve.ADD_TAGS=="function"?me.tagCheck=ve.ADD_TAGS:(W===O&&(W=Nu(W)),qn(W,ve.ADD_TAGS,Sr))),ve.ADD_ATTR&&(typeof ve.ADD_ATTR=="function"?me.attributeCheck=ve.ADD_ATTR:(q===G&&(q=Nu(q)),qn(q,ve.ADD_ATTR,Sr))),ve.ADD_URI_SAFE_ATTR&&qn(Je,ve.ADD_URI_SAFE_ATTR,Sr),ve.FORBID_CONTENTS&&(qe===je&&(qe=Nu(qe)),qn(qe,ve.FORBID_CONTENTS,Sr)),ve.ADD_FORBID_CONTENTS&&(qe===je&&(qe=Nu(qe)),qn(qe,ve.ADD_FORBID_CONTENTS,Sr)),xe&&(W["#text"]=!0),ie&&qn(W,["html","head","body"]),W.table&&(qn(W,["tbody"]),delete K.tbody),ve.TRUSTED_TYPES_POLICY){if(typeof ve.TRUSTED_TYPES_POLICY.createHTML!="function")throw Up('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof ve.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Up('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=ve.TRUSTED_TYPES_POLICY,S=N.createHTML("")}else N===void 0&&(N=Roe(m,s)),N!==null&&typeof S=="string"&&(S=N.createHTML(""));El&&El(ve),Jr=ve}},en=qn({},[...gj,...vj,...Coe]),Gr=qn({},[...bj,...Aoe]),vn=function(ve){let Ke=j(ve);(!Ke||!Ke.tagName)&&(Ke={namespaceURI:Yt,tagName:"template"});const ct=Jv(ve.tagName),jt=Jv(Ke.tagName);return Ct[ve.namespaceURI]?ve.namespaceURI===At?Ke.namespaceURI===Bt?ct==="svg":Ke.namespaceURI===vt?ct==="svg"&&(jt==="annotation-xml"||Jt[jt]):!!en[ct]:ve.namespaceURI===vt?Ke.namespaceURI===Bt?ct==="math":Ke.namespaceURI===At?ct==="math"&&Dr[jt]:!!Gr[ct]:ve.namespaceURI===Bt?Ke.namespaceURI===At&&!Dr[jt]||Ke.namespaceURI===vt&&!Jt[jt]?!1:!Gr[ct]&&(Hr[ct]||!en[ct]):!!(tt==="application/xhtml+xml"&&Ct[ve.namespaceURI]):!1},kr=function(ve){Rp(t.removed,{element:ve});try{j(ve).removeChild(ve)}catch{g(ve)}},Fr=function(ve,Ke){try{Rp(t.removed,{attribute:Ke.getAttributeNode(ve),from:Ke})}catch{Rp(t.removed,{attribute:null,from:Ke})}if(Ke.removeAttribute(ve),ve==="is")if(we||Oe)try{kr(Ke)}catch{}else try{Ke.setAttribute(ve,"")}catch{}},ke=function(ve){let Ke=null,ct=null;if(Ee)ve="<remove></remove>"+ve;else{const Wt=xj(ve,/^[\r\n\t ]+/);ct=Wt&&Wt[0]}tt==="application/xhtml+xml"&&Yt===Bt&&(ve='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+ve+"</body></html>");const jt=N?N.createHTML(ve):ve;if(Yt===Bt)try{Ke=new p().parseFromString(jt,tt)}catch{}if(!Ke||!Ke.documentElement){Ke=E.createDocument(Yt,"template",null);try{Ke.documentElement.innerHTML=We?S:jt}catch{}}const bt=Ke.body||Ke.documentElement;return ve&&ct&&bt.insertBefore(r.createTextNode(ct),bt.childNodes[0]||null),Yt===Bt?I.call(Ke,ie?"html":"body")[0]:ie?Ke.documentElement:bt},ze=function(ve){return A.call(ve.ownerDocument||ve,ve,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},$e=function(ve){return ve instanceof f&&(typeof ve.nodeName!="string"||typeof ve.textContent!="string"||typeof ve.removeChild!="function"||!(ve.attributes instanceof u)||typeof ve.removeAttribute!="function"||typeof ve.setAttribute!="function"||typeof ve.namespaceURI!="string"||typeof ve.insertBefore!="function"||typeof ve.hasChildNodes!="function")},pe=function(ve){return typeof l=="function"&&ve instanceof l};function _e(ge,ve,Ke){Av(ge,ct=>{ct.call(t,ve,Ke,Jr)})}const Fe=function(ve){let Ke=null;if(_e(T.beforeSanitizeElements,ve,null),$e(ve))return kr(ve),!0;const ct=Sr(ve.nodeName);if(_e(T.uponSanitizeElement,ve,{tagName:ct,allowedTags:W}),Ae&&ve.hasChildNodes()&&!pe(ve.firstElementChild)&&wl(/<[/\w!]/g,ve.innerHTML)&&wl(/<[/\w!]/g,ve.textContent)||ve.nodeType===$p.progressingInstruction||Ae&&ve.nodeType===$p.comment&&wl(/<[/\w]/g,ve.data))return kr(ve),!0;if(!(me.tagCheck instanceof Function&&me.tagCheck(ct))&&(!W[ct]||K[ct])){if(!K[ct]&&mt(ct)&&(U.tagNameCheck instanceof RegExp&&wl(U.tagNameCheck,ct)||U.tagNameCheck instanceof Function&&U.tagNameCheck(ct)))return!1;if(xe&&!qe[ct]){const jt=j(ve)||ve.parentNode,bt=y(ve)||ve.childNodes;if(bt&&jt){const Wt=bt.length;for(let ir=Wt-1;ir>=0;--ir){const Kt=v(bt[ir],!0);Kt.__removalCount=(ve.__removalCount||0)+1,jt.insertBefore(Kt,w(ve))}}}return kr(ve),!0}return ve instanceof c&&!vn(ve)||(ct==="noscript"||ct==="noembed"||ct==="noframes")&&wl(/<\/no(script|embed|frames)/i,ve.innerHTML)?(kr(ve),!0):(Ue&&ve.nodeType===$p.text&&(Ke=ve.textContent,Av([_,R,z],jt=>{Ke=Bp(Ke,jt," ")}),ve.textContent!==Ke&&(Rp(t.removed,{element:ve.cloneNode()}),ve.textContent=Ke)),_e(T.afterSanitizeElements,ve,null),!1)},et=function(ve,Ke,ct){if(ce&&(Ke==="id"||Ke==="name")&&(ct in r||ct in _r))return!1;if(!(le&&!ae[Ke]&&wl(H,Ke))){if(!(se&&wl(Y,Ke))){if(!(me.attributeCheck instanceof Function&&me.attributeCheck(Ke,ve))){if(!q[Ke]||ae[Ke]){if(!(mt(ve)&&(U.tagNameCheck instanceof RegExp&&wl(U.tagNameCheck,ve)||U.tagNameCheck instanceof Function&&U.tagNameCheck(ve))&&(U.attributeNameCheck instanceof RegExp&&wl(U.attributeNameCheck,Ke)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(Ke,ve))||Ke==="is"&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&wl(U.tagNameCheck,ct)||U.tagNameCheck instanceof Function&&U.tagNameCheck(ct))))return!1}else if(!Je[Ke]){if(!wl(te,Bp(ct,re,""))){if(!((Ke==="src"||Ke==="xlink:href"||Ke==="href")&&ve!=="script"&&joe(ct,"data:")===0&&Le[ve])){if(!(Me&&!wl(J,Bp(ct,re,"")))){if(ct)return!1}}}}}}}return!0},mt=function(ve){return ve!=="annotation-xml"&&xj(ve,X)},lt=function(ve){_e(T.beforeSanitizeAttributes,ve,null);const{attributes:Ke}=ve;if(!Ke||$e(ve))return;const ct={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q,forceKeepAttr:void 0};let jt=Ke.length;for(;jt--;){const bt=Ke[jt],{name:Wt,namespaceURI:ir,value:Kt}=bt,yr=Sr(Wt),$r=Kt;let Ur=Wt==="value"?$r:koe($r);if(ct.attrName=yr,ct.attrValue=Ur,ct.keepAttr=!0,ct.forceKeepAttr=void 0,_e(T.uponSanitizeAttribute,ve,ct),Ur=ct.attrValue,Ce&&(yr==="id"||yr==="name")&&(Fr(Wt,ve),Ur=Xe+Ur),Ae&&wl(/((--!?|])>)|<\/(style|title|textarea)/i,Ur)){Fr(Wt,ve);continue}if(yr==="attributename"&&xj(Ur,"href")){Fr(Wt,ve);continue}if(ct.forceKeepAttr)continue;if(!ct.keepAttr){Fr(Wt,ve);continue}if(!ue&&wl(/\/>/i,Ur)){Fr(Wt,ve);continue}Ue&&Av([_,R,z],Vr=>{Ur=Bp(Ur,Vr," ")});const un=Sr(ve.nodeName);if(!et(un,yr,Ur)){Fr(Wt,ve);continue}if(N&&typeof m=="object"&&typeof m.getAttributeType=="function"&&!ir)switch(m.getAttributeType(un,yr)){case"TrustedHTML":{Ur=N.createHTML(Ur);break}case"TrustedScriptURL":{Ur=N.createScriptURL(Ur);break}}if(Ur!==$r)try{ir?ve.setAttributeNS(ir,Wt,Ur):ve.setAttribute(Wt,Ur),$e(ve)?kr(ve):MI(t.removed)}catch{Fr(Wt,ve)}}_e(T.afterSanitizeAttributes,ve,null)},xt=function ge(ve){let Ke=null;const ct=ze(ve);for(_e(T.beforeSanitizeShadowDOM,ve,null);Ke=ct.nextNode();)_e(T.uponSanitizeShadowNode,Ke,null),Fe(Ke),lt(Ke),Ke.content instanceof i&&ge(Ke.content);_e(T.afterSanitizeShadowDOM,ve,null)};return t.sanitize=function(ge){let ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ke=null,ct=null,jt=null,bt=null;if(We=!ge,We&&(ge="<!-->"),typeof ge!="string"&&!pe(ge))if(typeof ge.toString=="function"){if(ge=ge.toString(),typeof ge!="string")throw Up("dirty is not a string, aborting")}else throw Up("toString is not a function");if(!t.isSupported)return ge;if(Z||sr(ve),t.removed=[],typeof ge=="string"&&(fe=!1),fe){if(ge.nodeName){const Kt=Sr(ge.nodeName);if(!W[Kt]||K[Kt])throw Up("root node is forbidden and cannot be sanitized in-place")}}else if(ge instanceof l)Ke=ke("<!---->"),ct=Ke.ownerDocument.importNode(ge,!0),ct.nodeType===$p.element&&ct.nodeName==="BODY"||ct.nodeName==="HTML"?Ke=ct:Ke.appendChild(ct);else{if(!we&&!Ue&&!ie&&ge.indexOf("<")===-1)return N&&de?N.createHTML(ge):ge;if(Ke=ke(ge),!Ke)return we?null:de?S:""}Ke&&Ee&&kr(Ke.firstChild);const Wt=ze(fe?ge:Ke);for(;jt=Wt.nextNode();)Fe(jt),lt(jt),jt.content instanceof i&&xt(jt.content);if(fe)return ge;if(we){if(Oe)for(bt=P.call(Ke.ownerDocument);Ke.firstChild;)bt.appendChild(Ke.firstChild);else bt=Ke;return(q.shadowroot||q.shadowrootmode)&&(bt=B.call(a,bt,!0)),bt}let ir=ie?Ke.outerHTML:Ke.innerHTML;return ie&&W["!doctype"]&&Ke.ownerDocument&&Ke.ownerDocument.doctype&&Ke.ownerDocument.doctype.name&&wl(IM,Ke.ownerDocument.doctype.name)&&(ir="<!DOCTYPE "+Ke.ownerDocument.doctype.name+`>
`+ir),Ue&&Av([_,R,z],Kt=>{ir=Bp(ir,Kt," ")}),N&&de?N.createHTML(ir):ir},t.setConfig=function(){let ge=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};sr(ge),Z=!0},t.clearConfig=function(){Jr=null,Z=!1},t.isValidAttribute=function(ge,ve,Ke){Jr||sr({});const ct=Sr(ge),jt=Sr(ve);return et(ct,jt,Ke)},t.addHook=function(ge,ve){typeof ve=="function"&&Rp(T[ge],ve)},t.removeHook=function(ge,ve){if(ve!==void 0){const Ke=woe(T[ge],ve);return Ke===-1?void 0:Noe(T[ge],Ke,1)[0]}return MI(T[ge])},t.removeHooks=function(ge){T[ge]=[]},t.removeAllHooks=function(){T=zI()},t}var tg=DM();const Xp={all:["users"],lists:()=>[...Xp.all,"list"],list:e=>[...Xp.lists(),{search:e}],details:()=>[...Xp.all,"detail"],detail:e=>[...Xp.details(),e]},m3=e=>Ys({queryKey:Xp.list(e),queryFn:async()=>{const t=await _c(void 0);return Array.isArray(t)?t:t?.data&&Array.isArray(t.data)||t?.success&&t?.data&&Array.isArray(t.data)?t.data:[]},staleTime:300*1e3,refetchInterval:600*1e3,placeholderData:t=>t}),gy=({instanceId:e,isOpen:t,onClose:r})=>{const{showSuccess:a,showError:s}=Cn(),[i,o]=D.useState(new Set),[l,c]=D.useState(new Set),[d,u]=D.useState(null),[f,p]=D.useState(new Map),m=D.useRef(!1),{data:b,isLoading:v}=moe(e),{data:g=[],isLoading:w}=_g(e),{data:y=[]}=m3(),j=goe(),N=xoe(),S=H=>y.find(J=>J.id===H)?.name||H;D.useEffect(()=>{if(b?.templateSnapshot?.sections){const H=b.templateSnapshot.sections.map(J=>String(J.id)).filter(Boolean),Y=new Set(H);o(Y)}},[b]);const E=D.useMemo(()=>{if(!b?.templateSnapshot?.sections)return{completed:0,total:0,percentage:0};let H=0;b.templateSnapshot.sections.forEach(re=>{re.steps&&(H+=re.steps.length)});const Y=g.length,J=H>0?Math.round(Y/H*100):0;return{completed:Y,total:H,percentage:J}},[b,g]);D.useEffect(()=>{b&&E.total>0&&E.completed>=E.total&&b.status!=="completed"&&!m.current&&!N.isPending&&(m.current=!0,N.mutate({id:e,status:"completed"})),b?.status==="completed"&&(m.current=!1)},[E.completed,E.total,b?.status,e,N.isPending]),D.useEffect(()=>{if(!N.isPending&&m.current){const H=setTimeout(()=>{b?.status==="completed"&&(m.current=!1)},500);return()=>clearTimeout(H)}},[N.isPending,b?.status]);const A=H=>g.some(Y=>Y.stepId===H),P=H=>g.find(Y=>Y.stepId===H),I=H=>{if(!H.steps)return{completed:0,total:0};const Y=H.steps.length;return{completed:H.steps.filter(re=>A(re.id)).length,total:Y}},B=H=>{o(Y=>{const J=new Set(Y);return J.has(H)?J.delete(H):J.add(H),J})},T=H=>{c(Y=>{const J=new Set(Y);return J.has(H)?J.delete(H):J.add(H),J})},_=async H=>{if(!A(H)){u(H);try{await j.mutateAsync({instanceId:e,stepId:H}),setTimeout(()=>{u(null)},300)}catch{u(null)}}},R=(H,Y)=>{const J=document.createElement("a");J.href=H,J.download=Y,J.target="_blank",document.body.appendChild(J),J.click(),document.body.removeChild(J)};if(!t)return null;const z=v||w;return n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:r}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(ci,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:b?.templateSnapshot?.name||"Loading..."}),(b?.templateSnapshot?.version||b?.templateVersion)&&n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Version ",b.templateSnapshot?.version||b.templateVersion]})]})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]}),!z&&n.jsxs("div",{className:"mt-6",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-700",children:[E.completed," of ",E.total," steps complete"]}),n.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[E.percentage,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:n.jsx("div",{className:`h-3 rounded-full transition-all ${E.percentage===100?"bg-green-500":E.percentage>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${E.percentage}%`}})}),E.percentage===100&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(Nn,{className:"w-4 h-4 text-green-500"}),n.jsx("span",{className:"text-xs font-semibold text-green-700",children:"All steps completed!"})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:z?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):b?.templateSnapshot?.sections?n.jsx("div",{className:"space-y-4",children:b.templateSnapshot.sections.sort((H,Y)=>(H.order||0)-(Y.order||0)).map(H=>{const Y=I(H),J=i.has(H.id);return n.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden bg-white",children:[n.jsxs("button",{onClick:()=>B(H.id),className:"w-full p-5 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1 text-left",children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-transform ${J?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-400"}`,children:n.jsx(Fs,{className:`w-5 h-5 transition-transform ${J?"":"-rotate-90"}`})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:H.name}),n.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[Y.completed," of ",Y.total," steps completed"]})]})]}),Y.completed===Y.total&&Y.total>0&&n.jsx(Nn,{className:"w-5 h-5 text-green-500"})]}),J&&H.steps&&n.jsx("div",{className:"border-t border-slate-100 bg-slate-50/50",children:H.steps.sort((re,X)=>(re.order||0)-(X.order||0)).map(re=>{const X=A(re.id),te=P(re.id),W=l.has(re.id);return n.jsxs("div",{className:"border-b border-slate-100 last:border-b-0",children:[n.jsxs("div",{className:"p-4 flex items-start gap-4",children:[n.jsx("div",{className:"pt-1",children:n.jsx("button",{onClick:()=>_(re.id),disabled:X||d===re.id||j.isPending,className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${X?"bg-green-500 border-green-500 text-white":d===re.id?"bg-indigo-50 border-indigo-500":"bg-white border-slate-300 hover:border-indigo-500"} disabled:opacity-50 disabled:cursor-not-allowed`,children:d===re.id?n.jsx(gt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):X?n.jsx(_i,{className:"w-4 h-4"}):null})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:`text-sm font-semibold ${X?"text-slate-600 line-through":"text-slate-900"}`,children:re.name}),te&&n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx(qi,{className:"w-3 h-3 text-slate-400"}),n.jsxs("span",{className:"text-xs text-slate-500",children:["Completed by ",te.completedBy?S(te.completedBy):"Unknown"," on"," ",te.completedAt?new Date(te.completedAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"Unknown date"]})]})]}),(re.instructions||re.checklistItems?.length>0||re.attachments?.length>0)&&n.jsx("button",{onClick:()=>T(re.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:n.jsx(wa,{className:`w-4 h-4 text-slate-400 transition-transform ${W?"rotate-90":""}`})})]})})]}),W&&n.jsxs("div",{className:"px-4 pb-4 pl-14 space-y-4",children:[re.instructions&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-2 flex items-center gap-2",children:[n.jsx(Qn,{className:"w-3.5 h-3.5"}),"Instructions"]}),n.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:tg.sanitize(re.instructions)}})]}),re.checklistItems&&re.checklistItems.length>0&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[n.jsx(Db,{className:"w-3.5 h-3.5"}),"Checklist"]}),n.jsx("div",{className:"space-y-2",children:re.checklistItems.map((O,q)=>{`${re.id}${q}`;const U=(f.get(re.id)||new Set).has(q);return n.jsxs("div",{className:"flex items-start gap-2 cursor-pointer hover:bg-slate-50 rounded-lg p-1 -ml-1 transition-colors",onClick:()=>{const K=f.get(re.id)||new Set,ae=new Set(K);U?ae.delete(q):ae.add(q),p(me=>{const se=new Map(me);return ae.size>0?se.set(re.id,ae):se.delete(re.id),se})},children:[n.jsx("div",{className:`w-4 h-4 rounded border-2 mt-0.5 flex-shrink-0 flex items-center justify-center transition-all ${U?"bg-green-500 border-green-500":"border-slate-300 hover:border-indigo-500"}`,children:U&&n.jsx(_i,{className:"w-3 h-3 text-white"})}),n.jsx("span",{className:`text-sm flex-1 ${U?"text-slate-500 line-through":"text-slate-700"}`,children:O})]},q)})})]}),re.attachments&&re.attachments.length>0&&n.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[n.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[n.jsx(Qn,{className:"w-3.5 h-3.5"}),"Attachments"]}),n.jsx("div",{className:"space-y-2",children:re.attachments.map((O,q)=>n.jsx("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:O.type==="pdf"?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-50 flex items-center justify-center",children:n.jsx(Qn,{className:"w-5 h-5 text-red-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.name||"Document.pdf"}),n.jsx("p",{className:"text-xs text-slate-500",children:"PDF Document"})]}),n.jsx("button",{onClick:()=>R(O.url,O.name||"document.pdf"),className:"p-2 hover:bg-white rounded-lg transition-colors",title:"Download PDF",children:n.jsx(Iu,{className:"w-4 h-4 text-indigo-600"})})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center",children:n.jsx(l0,{className:"w-5 h-5 text-blue-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.name||"Google Drive File"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Google Drive"})]}),n.jsx("a",{href:O.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-white rounded-lg transition-colors flex items-center gap-1 text-indigo-600 hover:text-indigo-700",title:"View in Google Drive",children:n.jsx(ps,{className:"w-4 h-4"})})]})},q))})]})]})]},re.id)})})]},H.id)})}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ci,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Playbook Data"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Unable to load playbook instance data."})]})}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:n.jsx("button",{onClick:r,className:"w-full px-6 py-3 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm",children:"Close"})})]})})]})},Boe=[{value:"companyName",label:"Company Name",required:!0},{value:"domain",label:"Domain",required:!0},{value:"industry",label:"Industry",required:!1}],Uoe=[{value:"contactName",label:"Contact Name",required:!0},{value:"companyDomain",label:"Company Domain",required:!0},{value:"email",label:"Email",required:!1},{value:"phone",label:"Phone",required:!1},{value:"jobTitle",label:"Job Title",required:!1},{value:"linkedinUrl",label:"LinkedIn URL",required:!1}],qoe={company:"companyName",organization:"companyName","business name":"companyName","company name":"companyName",website:"domain",domain:"domain",url:"domain",industry:"industry",segment:"industry",sector:"industry"},$oe={name:"contactName","contact name":"contactName","full name":"contactName","first name":"contactName","last name":"contactName","company domain":"companyDomain",domain:"companyDomain",website:"companyDomain","company website":"companyDomain",email:"email","email address":"email",phone:"phone","phone number":"phone","job title":"jobTitle",title:"jobTitle",position:"jobTitle",role:"jobTitle",linkedin:"linkedinUrl","linkedin url":"linkedinUrl","linkedin profile":"linkedinUrl"},zoe=`Company,Website,Industry
Acme Corp,https://acme.com,Technology
Beta Inc,https://beta.io,Logistics
Gamma LLC,https://gamma.com,Healthcare
Delta Solutions,delta-solutions.com,Retail
Epsilon Group,www.epsilon-group.org,Technology`,Hoe=`Contact Name,Company Domain,Email,Phone,Job Title,LinkedIn URL
John Doe,acme.com,john.doe@acme.com,+1-555-0101,CEO,https://linkedin.com/in/johndoe
Jane Smith,beta.io,jane.smith@beta.io,+1-555-0102,CTO,https://linkedin.com/in/janesmith
Bob Johnson,gamma.com,bob.johnson@gamma.com,+1-555-0103,CFO,https://linkedin.com/in/bobjohnson`,Woe=({onClose:e,onSuccess:t,type:r="company"})=>{const a=r,{showSuccess:s,showError:i}=Cn(),[o,l]=D.useState(1),[c,d]=D.useState(null),[u,f]=D.useState(!1),[p,m]=D.useState(null),[b,v]=D.useState([]),[g,w]=D.useState(0),[y,j]=D.useState({}),[N,S]=D.useState(!1),[E,A]=D.useState(null),[P,I]=D.useState(!1),[B,T]=D.useState({}),[_,R]=D.useState({}),[z,H]=D.useState(!1),[Y,J]=D.useState(null),[re,X]=D.useState("all"),[te,W]=D.useState(!1),[O,q]=D.useState(""),[G,U]=D.useState(!1),[K,ae]=D.useState(null),me=a==="contact"?Uoe:Boe,se=a==="contact"?$oe:qoe,le=a==="contact"?Hoe:zoe,Me=()=>{const fe=new Blob([le],{type:"text/csv;charset=utf-8"}),Se=URL.createObjectURL(fe),qe=document.createElement("a");qe.href=Se,qe.download=`${a==="contact"?"contacts":"companies"}-sample.csv`,qe.click(),URL.revokeObjectURL(Se),s(`Sample CSV downloaded. Fill it with your ${a} data and upload.`)},ue=async()=>{if(!O.trim()){ae("Please enter a Google Sheets URL"),i("Please enter a Google Sheets URL");return}ae(null),U(!0);try{const fe=await Jae(O.trim(),a);if(!fe.success){const qe=fe.message||fe.error?.message||"Failed to load Google Sheets";console.log("[WIZARD] API returned error:",qe),ae(qe),i(qe);return}const Se=fe.headers||[];if(Se.length===0){const qe="No columns found in the Google Sheet. Please ensure the first row contains column headers.";ae(qe),i(qe);return}console.log("[WIZARD] Google Sheets loaded:",{uploadId:fe.uploadId,headers:Se.length,rows:fe.rowCount}),m(fe.uploadId),v(Se),w(fe.rowCount||0),ae(null),l(2),s(`Google Sheets loaded successfully: ${Se.length} columns, ${fe.rowCount||0} rows`)}catch(fe){console.error("[WIZARD] Google Sheets error:",fe);let Se="Failed to load Google Sheets.";fe.data?.message&&typeof fe.data.message=="string"&&fe.data.message.trim()?Se=fe.data.message:fe.message&&typeof fe.message=="string"&&fe.message.trim()&&fe.message!=="Server Error 400"&&fe.message!=="Failed to load Google Sheets."&&fe.message!=="Failed to import Google Sheets"&&!fe.message.startsWith("Server Error")?Se=fe.message:fe.response?.data?.message?Se=fe.response.data.message:fe.response?.data?.error?.message?Se=fe.response.data.error.message:fe.data?.error?.message?Se=fe.data.error.message:fe.error?.message?Se=fe.error.message:fe.error?.data?.message?Se=fe.error.data.message:typeof fe=="string"&&(Se=fe),console.log("[WIZARD] Extracted error message:",Se),console.log("[WIZARD] Full error object:",JSON.stringify({message:fe.message,data:fe.data,response:fe.response?{status:fe.response.status,data:fe.response.data}:void 0,code:fe.code||fe.data?.code,error:fe.error},null,2)),ae(Se),i(Se)}finally{U(!1)}},Ue=fe=>{const Se=fe.target.files?.[0];if(!Se)return;const qe=Se.name.toLowerCase();if(!qe.endsWith(".csv")&&!qe.endsWith(".xlsx")&&!qe.endsWith(".xls")){i("Please select a CSV or Excel (.xlsx) file.");return}d(Se)},Ae=D.useCallback(async()=>{if(!c){i("Please select a file first.");return}f(!0);try{const fe=await Qae(c,a);m(fe.uploadId),v(fe.headers||[]),w(fe.rowCount||0),j({}),S(!1),A(null),T({}),J(null),l(2)}catch(fe){i(fe?.message||"Upload failed")}finally{f(!1)}},[c,i]),ie=D.useCallback(()=>{const fe={};b.forEach(Se=>{const qe=(Se||"").trim().toLowerCase(),je=se[qe];je&&(fe[Se]=je)}),j(Se=>({...Se,...fe}))},[b,se]),Z=D.useCallback(async()=>{const fe=new Set(Object.values(y).filter(Boolean));if(a==="company"){if(!fe.has("companyName")||!fe.has("domain")){i("Please map both Company Name and Domain.");return}}else if(!fe.has("contactName")||!fe.has("companyDomain")){i("Please map both Contact Name and Company Domain.");return}if(p){W(!0);try{await Zae(p,y),S(!0),l(3),I(!0);try{const Se=await ese(p);if(!Se.success){i(Se.message||"Failed to load preview"),A(null);return}A({summary:Se.summary||{total:0,new:0,updates:0,errors:0},rows:Se.rows||[],errors:Se.errors||[],companies:Se.companies||[]});const qe={};(Se.rows||[]).forEach(je=>{(je.status==="new"||je.status==="update")&&(qe[String(je.rowIndex-1)]=!1)}),T(qe),R({})}catch(Se){i(Se?.message||"Failed to load preview. Please try again."),A(null)}finally{I(!1)}}catch(Se){i(Se?.message||"Failed to save mapping")}finally{W(!1)}}},[p,y,i]),Ee=D.useCallback(()=>{if(!E?.errors?.length)return;const fe=["Row,Message",...E.errors.map(Le=>`${Le.rowIndex},${(Le.message||"").replace(/"/g,'""')}`)],Se=new Blob([fe.join(`
`)],{type:"text/csv;charset=utf-8"}),qe=URL.createObjectURL(Se),je=document.createElement("a");je.href=qe,je.download="import-errors.csv",je.click(),URL.revokeObjectURL(qe)},[E?.errors]),we=D.useCallback(async()=>{if(p){if(a==="contact"&&E&&E.rows.some(Se=>Se.needsCompanySelection&&!_[String(Se.rowIndex-1)])){i("Please select a company for all contacts that require it.");return}if(E&&E.summary.errors>0&&E.errors.some(Se=>{const qe=E.rows.find(je=>je.rowIndex===Se.rowIndex);return qe&&!qe.needsCompanySelection})){i("Fix all errors before importing. Download the error report and correct your file.");return}H(!0);try{const fe=await tse(p,B,a==="contact"?_:void 0);J(fe.summary||{created:0,updated:0,targetAccounts:0,failed:0}),l(5),s(`Import complete: ${fe.summary?.created||0} created, ${fe.summary?.updated||0} updated.`),t?.()}catch(fe){i(fe?.message||"Import failed")}finally{H(!1)}}},[p,E,B,_,a,i,s,t]),Oe=E?.rows?.filter(fe=>re==="all"?!0:re==="error"?fe.status==="error"||fe.status==="needs_company_selection":fe.status===re)||[],de=50,[ce,Ce]=D.useState(0),Xe=Oe.slice(ce*de,(ce+1)*de),xe=Math.ceil(Oe.length/de)||1;return n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-4xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-100 flex items-center justify-center",children:n.jsx(dl,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-lg font-bold text-slate-900",children:["Upload ",a==="contact"?"contacts":"companies"]}),n.jsxs("p",{className:"text-sm text-slate-500",children:["Step ",o," of 5"]})]})]}),n.jsx("button",{type:"button",onClick:e,className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[o===1&&n.jsxs("div",{className:"space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Upload a CSV or Excel file, or import from Google Sheets (max 1,000 rows). The first row will be used as headers."}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-sm text-slate-500",children:"Need a template?"}),n.jsxs("button",{type:"button",onClick:Me,className:"inline-flex items-center gap-2 px-3 py-2 rounded-lg border border-slate-200 bg-white text-slate-700 text-sm font-medium hover:bg-slate-50 hover:border-indigo-200 hover:text-indigo-700 transition-colors",children:[n.jsx(Iu,{className:"w-4 h-4"}),"Download sample CSV"]})]}),n.jsxs("div",{className:"border border-slate-200 rounded-xl p-4 space-y-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xx,{className:"w-5 h-5 text-slate-500"}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:"Import from Google Sheets"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Paste a Google Sheets URL. The sheet must be publicly accessible (Anyone with the link can view)."}),n.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:[n.jsx("p",{className:"text-xs font-medium text-blue-900 mb-1",children:"How to make your sheet publicly accessible:"}),n.jsxs("ol",{className:"text-xs text-blue-800 space-y-1 ml-4 list-decimal",children:[n.jsx("li",{children:"Open your Google Sheet"}),n.jsxs("li",{children:["Click the ",n.jsx("strong",{children:'"Share"'})," button (top right)"]}),n.jsxs("li",{children:["Click ",n.jsx("strong",{children:'"Change to anyone with the link"'})]}),n.jsxs("li",{children:["Set permission to ",n.jsx("strong",{children:'"Viewer"'})]}),n.jsxs("li",{children:["Click ",n.jsx("strong",{children:'"Done"'})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-xs flex-wrap",children:[n.jsx("span",{className:"text-slate-500",children:"Example URL format:"}),n.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded text-slate-700",children:"https://docs.google.com/spreadsheets/d/YOUR_SHEET_ID/edit"}),n.jsx("span",{className:"text-slate-400 text-xs",children:"(Make sure your sheet is publicly accessible)"})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",value:O,onChange:fe=>{q(fe.target.value),ae(null)},placeholder:"https://docs.google.com/spreadsheets/d/...",className:`flex-1 px-3 py-2 border rounded-lg text-sm ${K?"border-red-300 bg-red-50":"border-slate-200"}`}),n.jsxs("button",{type:"button",disabled:!O.trim()||G,onClick:ue,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[G?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):null,"Import"]})]}),K&&n.jsx("div",{className:"p-4 bg-red-50 border-2 border-red-300 rounded-lg",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx($n,{className:"w-5 h-5 text-red-600 shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("p",{className:"text-sm font-semibold text-red-900",children:"Sheet Not Accessible"}),n.jsx("p",{className:"text-sm text-red-800 whitespace-pre-line leading-relaxed",children:K}),(K.includes("publicly accessible")||K.includes("Access denied")||K.includes("SHEET_FETCH_FAILED"))&&n.jsxs("div",{className:"mt-3 pt-3 border-t border-red-200",children:[n.jsx("p",{className:"text-xs font-semibold text-red-900 mb-2",children:"Quick fix:"}),n.jsxs("ol",{className:"text-xs text-red-800 space-y-1.5 ml-4 list-decimal",children:[n.jsx("li",{children:"Open your Google Sheet in a new tab"}),n.jsxs("li",{children:["Click the ",n.jsx("strong",{children:'"Share"'})," button (top right corner)"]}),n.jsxs("li",{children:['Change access from "Restricted" to ',n.jsx("strong",{children:'"Anyone with the link"'})]}),n.jsxs("li",{children:["Make sure the permission is set to ",n.jsx("strong",{children:'"Viewer"'})]}),n.jsxs("li",{children:["Click ",n.jsx("strong",{children:'"Done"'})," and try importing again"]})]})]})]}),n.jsx("button",{type:"button",onClick:()=>ae(null),className:"shrink-0 p-1 hover:bg-red-100 rounded transition-colors","aria-label":"Dismiss error",children:n.jsx(tr,{className:"w-4 h-4 text-red-600"})})]})})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute inset-0 flex items-center",children:n.jsx("div",{className:"w-full border-t border-slate-200"})}),n.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:n.jsx("span",{className:"bg-white px-2 text-slate-500",children:"Or"})})]}),n.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-40 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-colors",children:[n.jsx("input",{type:"file",accept:".csv,.xlsx,.xls",onChange:Ue,className:"hidden"}),c?n.jsxs("div",{className:"flex items-center gap-3 text-slate-700",children:[n.jsx(xx,{className:"w-10 h-10 text-indigo-500"}),n.jsx("span",{className:"font-medium",children:c.name}),n.jsxs("span",{className:"text-slate-400 text-sm",children:["(",(c.size/1024).toFixed(1)," KB)"]})]}):n.jsxs(n.Fragment,{children:[n.jsx(kc,{className:"w-10 h-10 text-slate-400 mb-2"}),n.jsx("span",{className:"text-sm font-medium text-slate-600",children:"Click to select CSV or Excel file"})]})]}),n.jsxs("button",{type:"button",disabled:!c||u,onClick:Ae,className:"w-full py-3 bg-indigo-600 text-white rounded-xl font-semibold flex items-center justify-center gap-2 disabled:opacity-50",children:[u?n.jsx(gt,{className:"w-5 h-5 animate-spin"}):null,"Upload and continue"]})]}),o===2&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Map your file columns to CRM fields. ",a==="contact"?"Contact Name and Company Domain":"Company Name and Domain"," are required."]}),b.length===0?n.jsx("div",{className:"p-4 bg-red-50 border border-red-200 rounded-xl",children:n.jsx("p",{className:"text-sm text-red-700",children:"No columns detected. Please go back and ensure your file has column headers in the first row."})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{type:"button",onClick:ie,className:"text-sm font-medium text-indigo-600 hover:text-indigo-700",children:"Auto-map by column name"}),n.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"File column"}),n.jsx("th",{className:"text-left p-3 font-semibold text-slate-700",children:"Maps to"})]})}),n.jsx("tbody",{children:b.map(fe=>n.jsxs("tr",{className:"border-t border-slate-100",children:[n.jsx("td",{className:"p-3 text-slate-700",children:fe}),n.jsx("td",{className:"p-3",children:n.jsxs("select",{value:y[fe]||"",onChange:Se=>j(qe=>({...qe,[fe]:Se.target.value})),className:"w-full max-w-xs px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:" Ignore "}),me.map(Se=>n.jsxs("option",{value:Se.value,children:[Se.label," ",Se.required?"(required)":""]},Se.value))]})})]},fe))})]})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>l(1),className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Back"}),n.jsxs("button",{type:"button",onClick:Z,disabled:te,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[te&&n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Continue to preview"]})]})]}),o===3&&n.jsx("div",{className:"space-y-4",children:P?n.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-8",children:[n.jsx(gt,{className:"w-6 h-6 animate-spin"}),n.jsx("span",{children:"Validating and loading preview..."})]}):E&&E.rows&&E.rows.length>0?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3",children:[n.jsxs("div",{className:"bg-slate-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Total"}),n.jsx("p",{className:"text-lg font-bold text-slate-900",children:E.summary.total})]}),n.jsxs("div",{className:"bg-green-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-green-600",children:"New"}),n.jsx("p",{className:"text-lg font-bold text-green-700",children:E.summary.new})]}),n.jsxs("div",{className:"bg-blue-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-blue-600",children:"Updates"}),n.jsx("p",{className:"text-lg font-bold text-blue-700",children:E.summary.updates})]}),n.jsxs("div",{className:"bg-red-50 rounded-xl p-3",children:[n.jsx("p",{className:"text-xs text-red-600",children:"Errors"}),n.jsx("p",{className:"text-lg font-bold text-red-700",children:E.summary.errors})]})]}),E.summary.errors>0&&n.jsxs("div",{className:"flex items-center justify-between p-4 bg-red-50 border border-red-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[n.jsx($n,{className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-medium",children:"Fix all errors before importing. Download the error report and re-upload a corrected file."})]}),n.jsxs("button",{type:"button",onClick:Ee,className:"flex items-center gap-2 px-3 py-2 bg-white border border-red-200 rounded-lg text-red-700 text-sm font-medium",children:[n.jsx(Iu,{className:"w-4 h-4"}),"Download error report"]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"text-sm text-slate-500",children:"Filter:"}),["all","new","update","error"].map(fe=>n.jsx("button",{type:"button",onClick:()=>{X(fe),Ce(0)},className:`px-3 py-1.5 rounded-lg text-sm font-medium ${re===fe?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:fe==="all"?"All":fe==="new"?"New":fe==="update"?"Existing":"Errors"},fe))]}),a==="contact"&&E?.rows.some(fe=>fe.needsCompanySelection)&&n.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-xl",children:n.jsxs("p",{className:"text-sm text-amber-800",children:[n.jsx("strong",{children:"Note:"})," Some contacts need a company selected. Please select a company from the dropdown for each contact marked in red."]})}),n.jsx("div",{className:"border border-slate-200 rounded-xl overflow-hidden max-h-64 overflow-y-auto",children:n.jsxs("table",{className:"w-full text-sm",children:[n.jsx("thead",{className:"bg-slate-50 sticky top-0",children:n.jsxs("tr",{children:[n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700 w-12",children:"Row"}),a==="contact"?n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Contact Name"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Company Domain"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Email"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Select Company"})]}):n.jsxs(n.Fragment,{children:[n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Company"}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Domain"})]}),n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Status"}),a==="company"&&n.jsx("th",{className:"text-left p-2 font-semibold text-slate-700",children:"Target account"})]})}),n.jsx("tbody",{children:Xe.map(fe=>{const Se=String(fe.rowIndex-1),qe=a==="contact"&&fe.needsCompanySelection,je=_[Se]||"",Le=fe.status==="error"||fe.status==="needs_company_selection";return n.jsxs("tr",{className:`border-t border-slate-100 ${Le?"bg-red-50":""}`,children:[n.jsx("td",{className:"p-2 text-slate-500",children:fe.rowIndex}),a==="contact"?n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-2",children:fe.data?.contactName||""}),n.jsx("td",{className:"p-2",children:fe.originalCompanyDomain?n.jsx("span",{className:"text-red-600",title:"Company not found",children:fe.data?.companyDomain||""}):fe.data?.companyDomain||""}),n.jsx("td",{className:"p-2",children:fe.data?.email||""}),n.jsx("td",{className:"p-2",children:qe?n.jsxs("select",{value:je,onChange:Re=>R(Je=>({...Je,[Se]:Re.target.value})),className:"w-full max-w-xs px-2 py-1.5 border border-red-300 rounded-lg text-sm bg-white focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:" Select Company "}),E?.companies?.map(Re=>n.jsxs("option",{value:Re.id,children:[Re.name," ",Re.domain?`(${Re.domain})`:""]},Re.id))]}):n.jsx("span",{className:"text-slate-400 text-xs",children:""})})]}):n.jsxs(n.Fragment,{children:[n.jsx("td",{className:"p-2",children:fe.data?.companyName||""}),n.jsx("td",{className:"p-2",children:fe.data?.domain||""})]}),n.jsx("td",{className:"p-2",children:n.jsx("span",{className:`inline-flex items-center gap-1 px-2 py-0.5 rounded text-xs font-medium ${Le?"bg-red-100 text-red-700":fe.status==="new"?"bg-green-100 text-green-700":fe.status==="update"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:Le?fe.status==="needs_company_selection"?"Needs Company":"Error":fe.status==="new"?"New":fe.status==="update"?"Existing":"Error"})}),a==="company"&&n.jsx("td",{className:"p-2",children:fe.status!=="error"&&n.jsx("input",{type:"checkbox",checked:B[Se]||!1,onChange:Re=>T(Je=>({...Je,[Se]:Re.target.checked})),className:"rounded border-slate-300"})})]},fe.rowIndex)})})]})}),xe>1&&n.jsxs("div",{className:"flex items-center gap-2 justify-center text-sm",children:[n.jsx("button",{type:"button",onClick:()=>Ce(fe=>Math.max(0,fe-1)),disabled:ce===0,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50",children:"Prev"}),n.jsxs("span",{className:"text-slate-600",children:["Page ",ce+1," of ",xe]}),n.jsx("button",{type:"button",onClick:()=>Ce(fe=>Math.min(xe-1,fe+1)),disabled:ce>=xe-1,className:"p-2 rounded-lg border border-slate-200 disabled:opacity-50",children:"Next"})]}),n.jsxs("div",{className:"flex gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>l(2),className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Back"}),n.jsx("button",{type:"button",disabled:a==="contact"&&E&&E.rows.some(qe=>qe.needsCompanySelection&&!_[String(qe.rowIndex-1)])?!0:E?.errors.some(Se=>{const qe=E.rows.find(je=>je.rowIndex===Se.rowIndex);return qe&&!qe.needsCompanySelection})||!1,onClick:()=>l(4),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50",children:"Next: Review merge rules"})]})]}):E&&E.summary?n.jsxs("div",{className:"p-8 text-center text-slate-500",children:[n.jsx($n,{className:"w-12 h-12 mx-auto mb-3 text-slate-400"}),n.jsx("p",{className:"text-sm",children:"No rows to preview. Please check your file and try again."})]}):n.jsxs("div",{className:"p-8 text-center text-slate-500",children:[n.jsx($n,{className:"w-12 h-12 mx-auto mb-3 text-red-400"}),n.jsx("p",{className:"text-sm text-red-600",children:"Failed to load preview. Please go back and try again."}),n.jsx("button",{type:"button",onClick:()=>l(2),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-medium hover:bg-indigo-700",children:"Go Back"})]})}),o===4&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-semibold text-slate-900 mb-2",children:"How we match and merge"}),n.jsx("ul",{className:"text-sm text-slate-600 space-y-1 list-disc list-inside",children:a==="contact"?n.jsxs(n.Fragment,{children:[n.jsxs("li",{children:["Contacts are matched by ",n.jsx("strong",{children:"email + company"}),". Same email + company = update; new combination = create."]}),n.jsxs("li",{children:["We only ",n.jsx("strong",{children:"fill blank"})," fields. Existing values are never overwritten."]}),n.jsx("li",{children:"The company domain must exist in your CRM. Import companies first if needed."})]}):n.jsxs(n.Fragment,{children:[n.jsxs("li",{children:["Companies are matched by ",n.jsx("strong",{children:"domain"})," (case-insensitive). Same domain = update; new domain = create."]}),n.jsxs("li",{children:["We only ",n.jsx("strong",{children:"fill blank"})," fields. Existing values are never overwritten."]}),n.jsx("li",{children:"Target account selection is applied to new and updated companies as you chose in the preview."})]})})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>l(3),className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Back"}),n.jsxs("button",{type:"button",disabled:z||(E?.summary?.errors??0)>0,onClick:we,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50 flex items-center gap-2",children:[z?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(D8,{className:"w-4 h-4"}),"Import ",E?.summary?.total??0," companies"]})]})]}),o===5&&Y&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-3 p-4 bg-green-50 border border-green-200 rounded-xl",children:[n.jsx(Nn,{className:"w-10 h-10 text-green-600 shrink-0"}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-green-900",children:"Import completed"}),n.jsxs("p",{className:"text-sm text-green-700",children:[Y.created," created, ",Y.updated," updated, ",Y.targetAccounts," marked as target accounts."]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700",children:"Done"}),n.jsx("button",{type:"button",onClick:()=>{l(1),d(null),m(null),J(null)},className:"px-4 py-2 rounded-xl border border-slate-200 text-slate-700 font-medium text-sm",children:"Upload another file"})]})]})]})]})})},Goe=({instance:e,deals:t,projects:r,onView:a})=>{const{data:s=[]}=_g(e.id),i=e.templateSnapshot?.sections?.reduce((f,p)=>f+(p.steps?.length||0),0)||0,o=s.length,l=i>0?Math.round(o/i*100):0,c=e.dealId?t.find(f=>f.id===e.dealId):null,d=e.projectId?r.find(f=>f.id===e.projectId):null,u=c?{type:"Deal",name:c.title||c.name,id:c.id}:d?{type:"Project",name:d.title||d.name,id:d.id}:null;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center shrink-0",children:n.jsx(ci,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900 truncate",children:e.templateSnapshot?.name||"Unknown Playbook"}),u&&n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[u.type==="Deal"?n.jsx(Cl,{className:"w-3 h-3 text-slate-400"}):n.jsx(Yd,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-xs text-slate-500 truncate",children:u.name})]})]})]}),l===100&&n.jsx(_i,{className:"w-5 h-5 text-green-500 shrink-0"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[o," / ",i," steps completed"]}),n.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[l,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full transition-all ${l===100?"bg-green-500":l>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${l}%`}})})]}),n.jsxs("button",{onClick:()=>{u?.type==="Deal"||u?.type,a(e.id)},className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View ",u?u.type:"Playbook",n.jsx(ps,{className:"w-3 h-3"})]})]})},Voe=({onNavigate:e,onAddCompany:t,onAddContact:r,externalSearchQuery:a=""})=>{const{showSuccess:s,showError:i}=Cn(),o=Fa(),l=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[c,d]=D.useState("companies"),[u,f]=D.useState(""),[p,m]=D.useState(null),[b,v]=D.useState(null),[g,w]=D.useState(null),[y,j]=D.useState(!1),{data:N=[],isLoading:S}=xy({companyId:p?.id}),{data:E=[],isLoading:A,isError:P,refetch:I}=eoe(u),{data:B=[],isLoading:T,isError:_,refetch:R}=toe(u),{data:z=[],isLoading:H}=roe(),{data:Y=[],isLoading:J}=noe(),{data:re=[]}=Ys({queryKey:["projects"],queryFn:async()=>{const Ge=await D0();return Ge.data||Ge||[]},staleTime:300*1e3}),X=aoe(),te=soe(),W=ioe(),O=ooe(),q=loe(),G=coe(),U=doe(),K=A||T||H||J,[ae,me]=D.useState([]),[se,le]=D.useState([]),[Me,ue]=D.useState([]),[Ue,Ae]=D.useState(!1),[ie,Z]=D.useState(!1),[Ee,we]=D.useState({}),[Oe,de]=D.useState(!1),[ce,Ce]=D.useState(!1),[Xe,xe]=D.useState({}),[fe,Se]=D.useState("details"),[qe,je]=D.useState(!1),[Le,Re]=D.useState(null),[Je,ut]=D.useState(null),[vt,At]=D.useState(!1),[Bt,Yt]=D.useState(!1),[We,Ct]=D.useState([]),[br,Jt]=D.useState([]),[Dr,Hr]=D.useState(!1),[tt,Dt]=D.useState(!1),[mr,Sr]=D.useState(!1),[Jr,_r]=D.useState(!1),[Wr,sr]=D.useState(null),[en,Gr]=D.useState(null),[vn,kr]=D.useState(!1),[Fr,ke]=D.useState(""),[ze,$e]=D.useState(!1),[pe,_e]=D.useState(null),[Fe,et]=D.useState(null),[mt,lt]=D.useState(!1),[xt,ge]=D.useState(""),[ve,Ke]=D.useState(0),[ct,jt]=D.useState([]),[bt,Wt]=D.useState(""),[ir,Kt]=D.useState(!1),[yr,$r]=D.useState(null),[Ur,un]=D.useState(null),[Vr,aa]=D.useState(!1),[Kn,Ln]=D.useState(""),[Lo,Na]=D.useState(0),[Ve,Lt]=D.useState([]),[Ot,lr]=D.useState(!1),[jr,pr]=D.useState(!1),[Mr,sa]=D.useState(!1),En=async()=>{sa(!0);try{await Promise.all([o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})]),s("Data refreshed successfully")}catch{i("Failed to refresh data")}finally{setTimeout(()=>sa(!1),500)}};D.useEffect(()=>{a!==void 0&&f(a)},[a]),D.useEffect(()=>{Ct([]),Jt([])},[c,u]),D.useEffect(()=>{const Ge=()=>{console.log(" CRM refresh triggered - invalidating cache"),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})};return window.addEventListener("refresh-crm",Ge),()=>window.removeEventListener("refresh-crm",Ge)},[o]);const rr=async Ge=>{if(p)try{await X.mutateAsync({id:p.id,updates:Ge}),m({...p,...Ge}),s("Account updated")}catch{i("Update failed")}},xr=async()=>{if(!(!b||qe)){if(!Xe.name||!Xe.email){i("Name and Email are required fields");return}je(!0);try{const Ge={...Xe,companyId:Xe.companyId===""?null:Xe.companyId,phone:Xe.phone===""?null:Xe.phone,linkedin:Xe.linkedin===""?null:Xe.linkedin,role:Xe.role===""?null:Xe.role};await te.mutateAsync({id:b.id,updates:Ge});const wr={...b,...Ge};v(wr),Ce(!1),s("Contact profile updated successfully")}catch(Ge){console.error("Contact update error:",Ge),i(Ge.message||"Failed to update contact. Please try again.")}finally{je(!1)}}},Rt=async Ge=>{At(!0);try{await W.mutateAsync(Ge),p?.id===Ge&&(m(null),Z(!1)),Re(null),s("Company deleted successfully")}catch(wr){i(wr.message||"Failed to delete company")}finally{At(!1)}},Cr=async Ge=>{Yt(!0);try{await O.mutateAsync(Ge),b?.id===Ge&&(v(null),Ce(!1)),ut(null),s("Contact deleted successfully")}catch(wr){i(wr.message||"Failed to delete contact")}finally{Yt(!1)}};D.useEffect(()=>{p?.id?(async()=>{try{kr(!0);const wr=await xk(p.id);wr.success&&Gr(wr.data)}catch{Gr(null)}finally{kr(!1)}})():Gr(null)},[p?.id]);const Vt=()=>{m(null),Z(!1),ke(""),lt(!1),Gr(null)},Ma=()=>{v(null),Ce(!1),Wt(""),aa(!1)},Ca=Ge=>{const wr=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,qr=[];let Kr;for(;(Kr=wr.exec(Ge))!==null;){const bn=Kr[1].trim(),Hn=Y.find(ma=>ma.name.toLowerCase()===bn.toLowerCase());Hn&&qr.push(Hn.id)}return[...new Set(qr)]},Aa=Ge=>{const wr=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,qr=[];let Kr=0,bn;for(;(bn=wr.exec(Ge))!==null;){bn.index>Kr&&qr.push(Ge.substring(Kr,bn.index));const Hn=bn[1].trim(),ma=Y.find(Ua=>Ua.name.toLowerCase()===Hn.toLowerCase());ma?qr.push(n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",ma.name]},bn.index)):qr.push(`@${Hn}`),Kr=bn.index+bn[0].length}return Kr<Ge.length&&qr.push(Ge.substring(Kr)),qr.length>0?qr:Ge},ar=Ge=>{const wr=Ge.target.value,qr=Ge.target.selectionStart;ke(wr),Ke(qr);const Kr=wr.substring(0,qr),bn=Kr.lastIndexOf("@");if(bn!==-1){const Hn=Kr.substring(bn+1),ma=bn>0?Kr[bn-1]:" ";if((ma===" "||ma===`
`||bn===0)&&!Hn.includes(" ")&&!Hn.includes(`
`)){ge(Hn);const Ua=Y.filter(Ns=>Ns.name.toLowerCase().includes(Hn.toLowerCase())||Ns.email.toLowerCase().includes(Hn.toLowerCase()));jt(Ua.slice(0,5)),lt(!0);return}}lt(!1)},nn=Ge=>{const qr=Fr.substring(0,ve).lastIndexOf("@"),Kr=Fr.substring(ve),Hn=`${Fr.substring(0,qr)}@${Ge.name} ${Kr}`;ke(Hn),lt(!1)},Ra=async()=>{if(!(!p||!Fr.trim())){$e(!0);try{const Ge=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",wr=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",qr={id:`note_${Date.now()}`,userId:Ge,userName:wr,text:Fr.trim(),createdAt:new Date().toISOString()},Kr=[...p.notes||[],qr];await X.mutateAsync({id:p.id,updates:{notes:Kr}}),m({...p,notes:Kr}),o.invalidateQueries({queryKey:["companies"]});const bn=Ca(Fr);for(const ma of bn)try{await Zm({userId:ma,type:"mention",title:"You were mentioned in a company note",message:`${wr} mentioned you in ${p.name}`,relatedId:p.id,relatedType:"company",read:!1})}catch(Ua){console.error("Failed to send notification:",Ua)}ke("");const Hn=bn.length>0?`Note added and ${bn.length} user(s) notified`:"Note added successfully";s(Hn)}catch(Ge){i(Ge.message||"Failed to add note")}finally{$e(!1)}}},Zn=async()=>{if(!(!p||!l||!Fe))try{_e(Fe);const Ge=p.notes?.filter(wr=>wr.id!==Fe)||[];await X.mutateAsync({id:p.id,updates:{notes:Ge}}),m({...p,notes:Ge}),o.invalidateQueries({queryKey:["companies"]}),s("Note deleted successfully"),et(null)}catch(Ge){i(Ge.message||"Failed to delete note")}finally{_e(null)}},kn=Ge=>{const wr=Ge.target.value,qr=Ge.target.selectionStart;Wt(wr),Na(qr);const Kr=wr.substring(0,qr),bn=Kr.lastIndexOf("@");if(bn!==-1){const Hn=Kr.substring(bn+1),ma=bn>0?Kr[bn-1]:" ";if((ma===" "||ma===`
`||bn===0)&&!Hn.includes(" ")&&!Hn.includes(`
`)){Ln(Hn);const Ua=Y.filter(Ns=>Ns.name.toLowerCase().includes(Hn.toLowerCase())||Ns.email.toLowerCase().includes(Hn.toLowerCase()));Lt(Ua.slice(0,5)),aa(!0);return}}aa(!1)},Ar=Ge=>{const qr=bt.substring(0,Lo).lastIndexOf("@"),Kr=bt.substring(Lo),Hn=`${bt.substring(0,qr)}@${Ge.name} ${Kr}`;Wt(Hn),aa(!1)},an=async()=>{if(!(!b||!bt.trim())){Kt(!0);try{const Ge=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",wr=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",qr={id:`note_${Date.now()}`,userId:Ge,userName:wr,text:bt.trim(),createdAt:new Date().toISOString()},Kr=[...b.notes||[],qr];await te.mutateAsync({id:b.id,updates:{notes:Kr}}),v({...b,notes:Kr}),o.invalidateQueries({queryKey:["contacts"]});const bn=Ca(bt);for(const ma of bn)try{await Zm({userId:ma,type:"mention",title:"You were mentioned in a contact note",message:`${wr} mentioned you in ${b.name}`,relatedId:b.id,relatedType:"contact",read:!1})}catch(Ua){console.error("Failed to send notification:",Ua)}Wt("");const Hn=bn.length>0?`Note added and ${bn.length} user(s) notified`:"Note added successfully";s(Hn)}catch(Ge){i(Ge.message||"Failed to add note")}finally{Kt(!1)}}},dr=async()=>{if(!(!b||!l||!Ur))try{$r(Ur);const Ge=b.notes?.filter(wr=>wr.id!==Ur)||[];await te.mutateAsync({id:b.id,updates:{notes:Ge}}),v({...b,notes:Ge}),o.invalidateQueries({queryKey:["contacts"]}),s("Note deleted successfully"),un(null)}catch(Ge){i(Ge.message||"Failed to delete note")}finally{$r(null)}},Mn=D.useCallback(Ge=>z.some(wr=>wr.companyId===Ge),[z]),Or=D.useMemo(()=>E.filter(Ge=>{if(ae.length>0){const wr=ae.includes("target")&&Ge.isTargetAccount,qr=ae.includes("non-target")&&!Ge.isTargetAccount;if(!wr&&!qr)return!1}if(se.length>0){const wr=se.includes("assigned")&&Ge.ownerId,qr=se.includes("unassigned")&&!Ge.ownerId;if(!wr&&!qr)return!1}if(Me.length>0){const wr=Me.includes("has-deals")&&Mn(Ge.id),qr=Me.includes("no-deals")&&!Mn(Ge.id);if(!wr&&!qr)return!1}return!0}),[E,ae,se,Me,Mn]),Ba=D.useMemo(()=>ae.length>0||se.length>0||Me.length>0,[ae,se,Me]),ho=()=>{me([]),le([]),ue([])},bs=(Ge,wr)=>{Ge==="target"?me(qr=>qr.includes(wr)?qr.filter(Kr=>Kr!==wr):[...qr,wr]):Ge==="assigned"?le(qr=>qr.includes(wr)?qr.filter(Kr=>Kr!==wr):[...qr,wr]):Ge==="deals"&&ue(qr=>qr.includes(wr)?qr.filter(Kr=>Kr!==wr):[...qr,wr])},ys=()=>{We.length===Or.length&&Or.length>0?Ct([]):Ct(Or.map(Ge=>Ge.id))},ws=()=>{br.length===B.length?Jt([]):Jt(B.map(Ge=>Ge.id))},mo=async()=>{Hr(!0);try{const Ge=[...We];await q.mutateAsync(Ge),p&&Ge.includes(p.id)&&(m(null),Z(!1)),Ct([]),sr(null),s(`Successfully deleted ${Ge.length} compan${Ge.length>1?"ies":"y"}`)}catch(Ge){i(Ge.message||"Failed to delete companies")}finally{Hr(!1)}},ml=async()=>{Dt(!0);try{const Ge=[...br];await G.mutateAsync(Ge),b&&Ge.includes(b.id)&&(v(null),Ce(!1)),Jt([]),sr(null),s(`Successfully deleted ${Ge.length} contact${Ge.length>1?"s":""}`)}catch(Ge){i(Ge.message||"Failed to delete contacts")}finally{Dt(!1)}},zu=async()=>{if(We.length!==0){Sr(!0);try{const Ge=[...We];await U.mutateAsync({ids:Ge,updates:{isTargetAccount:!0}}),p&&Ge.includes(p.id)&&m({...p,isTargetAccount:!0}),Ct([]),s(`Successfully marked ${Ge.length} compan${Ge.length>1?"ies":"y"} as target account${Ge.length>1?"s":""}`)}catch(Ge){i(Ge.message||"Failed to mark companies as target accounts")}finally{Sr(!1)}}},po=async()=>{if(We.length!==0){_r(!0);try{const Ge=[...We];await U.mutateAsync({ids:Ge,updates:{isTargetAccount:!1}}),p&&Ge.includes(p.id)&&m({...p,isTargetAccount:!1}),Ct([]),s(`Successfully unmarked ${Ge.length} compan${Ge.length>1?"ies":"y"} as target account${Ge.length>1?"s":""}`)}catch(Ge){i(Ge.message||"Failed to unmark companies as target accounts")}finally{_r(!1)}}},Wi=async()=>{p&&i("AI Intelligence feature is not available. Please install @google/genai package to enable this feature.")},mi=Ge=>z.filter(wr=>wr.companyId===Ge&&wr.stage!=="Won"&&wr.stage!=="Lost").length,rc=Ge=>Ge?Y.find(wr=>wr.id===Ge)?.name||"Unknown":"Unassigned";return n.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 min-w-0 overflow-x-hidden",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 min-w-0",children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight truncate",children:"CRM"}),n.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2",children:[n.jsxs("button",{onClick:()=>{d("companies"),Ct([]),Jt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="companies"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Companies (",c==="companies"?Or.length:E.length,")"]}),n.jsxs("button",{onClick:()=>{d("contacts"),Ct([]),Jt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="contacts"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Contacts (",B.length,")"]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[n.jsxs("button",{onClick:En,disabled:Mr,className:"px-2 sm:px-3 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm disabled:opacity-50 shrink-0",title:"Refresh data",children:[n.jsx(sd,{className:`w-4 h-4 ${Mr?"animate-spin":""}`}),n.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),n.jsxs("button",{onClick:()=>j(!0),className:"px-3 sm:px-4 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm shrink-0",title:`Upload ${c==="companies"?"companies":"contacts"} from CSV, Excel, or Google Sheets`,children:[n.jsx(kc,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"Upload"})]}),n.jsxs("button",{onClick:()=>c==="companies"?t():r(),className:"px-3 sm:px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-indigo-700 transition-all shadow-sm shrink-0",children:[n.jsx(ln,{className:"w-4 h-4 shrink-0"})," ",n.jsxs("span",{className:"whitespace-nowrap",children:["Add ",c==="companies"?"Company":"Contact"]})]}),c==="contacts"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>lr(!0),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-700 transition-all shadow-sm shrink-0",title:"Scan Business Card",children:[n.jsx(CU,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"Scan Card"})]}),n.jsxs("button",{onClick:()=>pr(!0),className:"px-3 sm:px-4 py-2 bg-blue-700 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-800 transition-all shadow-sm shrink-0",title:"Import from LinkedIn",children:[n.jsx(hh,{className:"w-4 h-4 shrink-0"})," ",n.jsx("span",{className:"whitespace-nowrap",children:"LinkedIn"})]})]})]})]}),n.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full min-w-0",children:[n.jsx("div",{className:"w-full min-w-0",children:n.jsxs("div",{className:"relative group w-full min-w-0",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-600 transition-colors shrink-0"}),n.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:u,onChange:Ge=>f(Ge.target.value),className:"w-full min-w-0 pl-10 pr-10 py-3 bg-white border border-slate-200 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]})}),c==="companies"&&P||c==="contacts"&&_?n.jsxs("div",{className:"flex items-center justify-between gap-3 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsxs("p",{className:"text-sm text-amber-800",children:[c==="companies"?"Companies":"Contacts"," could not be loaded. Check your connection and try again."]}),n.jsxs("button",{type:"button",onClick:()=>{c==="companies"?I():R()},className:"shrink-0 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[n.jsx(sd,{className:"w-4 h-4"}),"Retry"]})]}):null,n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 pb-2 min-w-0",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0",disabled:K,checked:c==="companies"?Or.length>0&&We.length===Or.length&&Or.every(Ge=>We.includes(Ge.id)):B.length>0&&br.length===B.length,onChange:c==="companies"?ys:ws}),n.jsxs("span",{className:"text-sm font-semibold text-slate-600 truncate",children:["Select All ",c==="companies"?"Companies":"Contacts"]})]}),n.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4 min-w-0",children:c==="companies"?n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>Ae(!0),disabled:K,className:`px-3 sm:px-4 py-2 rounded-xl border-2 transition-all flex items-center gap-2 w-fit shrink-0 ${Ba?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[n.jsx(bf,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"text-sm font-bold",children:"Filters"}),Ba&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:ae.length+se.length+Me.length})]}),n.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 sm:text-right break-words",children:K?"Loading...":`Showing ${Or.length} of ${E.length} companies`})]}):n.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 text-right",children:K?"Loading...":`Showing ${B.length} contact${B.length!==1?"s":""}`})}),Ue&&c==="companies"&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-3 sm:p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 my-auto",children:[n.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-200 flex items-center justify-between gap-3 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center shrink-0",children:n.jsx(bf,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("h3",{className:"font-black text-lg sm:text-xl text-slate-900 truncate",children:"Filter Companies"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium hidden sm:block",children:"Select multiple filters to refine your search"})]})]}),n.jsx("button",{onClick:()=>Ae(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Cp,{className:"w-4 h-4"}),"Target Account"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:ae.includes("target"),onChange:()=>bs("target","target"),className:"w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Cp,{className:"w-4 h-4 text-amber-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Target Account"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[E.filter(Ge=>Ge.isTargetAccount).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:ae.includes("non-target"),onChange:()=>bs("target","non-target"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(dl,{className:"w-4 h-4 text-slate-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Standard Account"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[E.filter(Ge=>!Ge.isTargetAccount).length," companies"]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ov,{className:"w-4 h-4"}),"Assignment"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:se.includes("assigned"),onChange:()=>bs("assigned","assigned"),className:"w-4 h-4 rounded border-slate-300 text-green-600 focus:ring-green-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(ov,{className:"w-4 h-4 text-green-600"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Assigned"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[E.filter(Ge=>Ge.ownerId).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:se.includes("unassigned"),onChange:()=>bs("assigned","unassigned"),className:"w-4 h-4 rounded border-slate-300 text-orange-500 focus:ring-orange-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Pu,{className:"w-4 h-4 text-orange-500"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Unassigned"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[E.filter(Ge=>!Ge.ownerId).length," companies"]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Cl,{className:"w-4 h-4"}),"Deals"]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:Me.includes("has-deals"),onChange:()=>bs("deals","has-deals"),className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Cl,{className:"w-4 h-4 text-purple-600"}),n.jsx("span",{className:"font-bold text-slate-900",children:"Has Deals"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[E.filter(Ge=>Mn(Ge.id)).length," companies"]})]}),n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[n.jsx("input",{type:"checkbox",checked:Me.includes("no-deals"),onChange:()=>bs("deals","no-deals"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx(Cl,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-bold text-slate-900",children:"No Deals"})]}),n.jsxs("span",{className:"text-xs text-slate-400",children:[E.filter(Ge=>!Mn(Ge.id)).length," companies"]})]})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[n.jsxs("button",{onClick:ho,disabled:!Ba,className:"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[n.jsx(tr,{className:"w-4 h-4"}),"Clear All Filters"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Or.length," of ",E.length," companies"]}),n.jsx("button",{onClick:()=>Ae(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Apply Filters"})]})]})]})}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 min-h-[600px] w-full min-w-0 items-start",children:K?Array.from({length:8}).map((Ge,wr)=>n.jsx("div",{className:`bg-white rounded-2xl border border-slate-200 shadow-sm animate-pulse flex flex-col ${c==="companies"?"p-6":"p-5 h-[220px]"}`,children:c==="companies"?n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-lg"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),n.jsxs("div",{className:"space-y-3 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[n.jsx("div",{className:"h-3 bg-slate-200 rounded w-2/3"}),n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-11 h-11 bg-slate-200 rounded-full"}),n.jsxs("div",{className:"flex-1 space-y-2",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),n.jsxs("div",{className:"space-y-2 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),n.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:n.jsx("div",{className:"h-8 bg-slate-200 rounded-xl w-full"})})]})},`skeleton-${wr}`)):c==="companies"?Or.map(Ge=>{const wr=Y.find(Kr=>Kr.id===Ge.ownerId),qr=We.includes(Ge.id);return n.jsxs("div",{onClick:()=>m(Ge),className:`bg-white p-6 rounded-2xl border ${qr?"border-indigo-400 bg-indigo-50/30":Ge.isTargetAccount?"border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.1)]":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group flex flex-col relative`,children:[Ge.isTargetAccount&&n.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-amber-500 text-white text-[9px] font-black uppercase rounded shadow-sm flex items-center gap-1 whitespace-nowrap",children:[n.jsx(Cp,{className:"w-2.5 h-2.5"})," Target Account"]}),n.jsx("div",{className:"absolute top-4 right-4",onClick:Kr=>Kr.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:qr,onChange:()=>Ct(Kr=>qr?Kr.filter(bn=>bn!==Ge.id):[...Kr,Ge.id])})}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx(Xs,{src:Ge.logo,fallbackText:Ge.name,className:"w-12 h-12 border border-slate-100",isAvatar:!1}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900 truncate group-hover:text-indigo-600 transition-colors",children:Ge.name}),n.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:Ge.industry})]})]}),n.jsxs("div",{className:"space-y-3 mb-6 text-sm text-slate-600",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(fh,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate",children:Ge.website||"No website"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(qi,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate font-medium",children:wr?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[n.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[mi(Ge.id)," Active Deals"]}),n.jsx(wa,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Ge.id)}):B.map(Ge=>{const wr=E.find(Kr=>Kr.id===Ge.companyId),qr=br.includes(Ge.id);return n.jsxs("div",{onClick:()=>v(Ge),className:`bg-white p-5 rounded-2xl border ${qr?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group shadow-sm relative flex flex-col h-[220px]`,children:[n.jsx("div",{className:"absolute top-4 right-4",onClick:Kr=>Kr.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:qr,onChange:()=>Jt(Kr=>qr?Kr.filter(bn=>bn!==Ge.id):[...Kr,Ge.id])})}),n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-11 h-11 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-lg uppercase shadow-inner",children:Ge.name.charAt(0)}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("h3",{className:"font-bold text-base text-slate-900 truncate",children:Ge.name}),n.jsxs("p",{className:"text-slate-500 text-[11px] font-bold uppercase truncate",children:[Ge.role," @ ",wr?.name||"Partner"]})]})]}),n.jsxs("div",{className:"space-y-2 text-sm text-slate-600 flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(rs,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"truncate text-indigo-600 text-[13px]",children:Ge.email})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Qj,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-[13px]",children:Ge.phone})]})]}),Ge.linkedin&&n.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:n.jsxs("a",{href:Ge.linkedin,target:"_blank",rel:"noreferrer",onClick:Kr=>Kr.stopPropagation(),className:"w-full py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[n.jsx(hh,{className:"w-4 h-4"}),"LinkedIn"]})})]},Ge.id)})})]}),(c==="companies"&&We.length>0||c==="contacts"&&br.length>0)&&n.jsx("div",{className:"fixed bottom-6 left-2 right-2 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300 max-w-2xl sm:max-w-none mx-auto",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl sm:rounded-3xl shadow-2xl px-4 sm:px-8 py-3 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3 shrink-0",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:c==="companies"?We.length:br.length}),"Selected"]}),n.jsx("div",{className:"hidden sm:block h-8 w-px bg-white/10 shrink-0"}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[c==="companies"&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:Ge=>{Ge.stopPropagation(),zu()},disabled:mr||Jr,className:"px-3 sm:px-5 py-2 bg-amber-600 hover:bg-amber-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[mr?n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(Cp,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Mark Target"})]}),n.jsxs("button",{onClick:Ge=>{Ge.stopPropagation(),po()},disabled:mr||Jr,className:"px-3 sm:px-5 py-2 bg-slate-600 hover:bg-slate-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[Jr?n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(Pu,{className:"w-3.5 h-3.5 shrink-0"}),n.jsx("span",{className:"whitespace-nowrap",children:"Unmark Target"})]})]}),n.jsxs("button",{onClick:Ge=>{Ge.stopPropagation(),sr(c)},disabled:c==="companies"?Dr:tt,className:"px-3 sm:px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[(c==="companies"?Dr:tt)?n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):n.jsx(Lr,{className:"w-3.5 h-3.5 shrink-0"}),"Delete"]}),n.jsx("button",{onClick:()=>{c==="companies"?Ct([]):Jt([])},className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors shrink-0 ml-auto sm:ml-0",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),p&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:Vt}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx(Xs,{src:p.logo,fallbackText:p.name,className:"w-12 h-12 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:p.name}),n.jsx("button",{onClick:()=>rr({isTargetAccount:!p.isTargetAccount}),className:`p-1 rounded-lg transition-all ${p.isTargetAccount?"text-amber-500 bg-amber-50":"text-slate-300 hover:text-amber-500 hover:bg-amber-50"}`,title:"Mark as Target Account",children:n.jsx(Cp,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-500",children:p.industry})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[ie?n.jsx("button",{onClick:async()=>{await rr(Ee),Z(!1)},className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg",children:n.jsx(di,{className:"w-5 h-5"})}):n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{we({...p}),Z(!0)},className:"p-2 hover:bg-slate-100 rounded-xl text-slate-400",children:n.jsx(Yj,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>Re(p),className:"p-2 hover:bg-red-50 rounded-xl text-red-500 transition-all",title:"Delete Company",children:n.jsx(Lr,{className:"w-5 h-5"})})]}),n.jsx("button",{onClick:Vt,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[ie?n.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[n.jsxs("div",{className:"col-span-2 space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Company Name"}),n.jsx("input",{type:"text",value:Ee.name,onChange:Ge=>we({...Ee,name:Ge.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Industry"}),n.jsx("input",{type:"text",value:Ee.industry,onChange:Ge=>we({...Ee,industry:Ge.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Owner"}),n.jsxs("select",{value:Ee.ownerId,onChange:Ge=>we({...Ee,ownerId:Ge.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"",children:"Unassigned"}),Y.map(Ge=>n.jsx("option",{value:Ge.id,children:Ge.name},Ge.id))]})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Website"}),n.jsx("input",{type:"text",value:Ee.website,onChange:Ge=>we({...Ee,website:Ge.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"LinkedIn"}),n.jsx("input",{type:"text",value:Ee.linkedin,onChange:Ge=>we({...Ee,linkedin:Ge.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Account Manager"}),n.jsxs("span",{className:"text-sm font-bold text-indigo-600 flex items-center gap-2",children:[n.jsx(qi,{className:"w-4 h-4"})," ",rc(p.ownerId)]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),n.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${p.isTargetAccount?"bg-amber-500 text-white":"bg-slate-200 text-slate-500"}`,children:p.isTargetAccount?"Target Account":"Standard Account"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Qd,{className:"w-4 h-4 text-emerald-500"})," Social Signals & Intelligence"]}),n.jsxs("button",{onClick:Wi,disabled:Oe,className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black uppercase hover:bg-indigo-100 transition-all disabled:opacity-50",children:[Oe?n.jsx(gt,{className:"w-3 h-3 animate-spin"}):n.jsx(IU,{className:"w-3 h-3"})," Execute Intelligence Scan"]})]}),n.jsxs("div",{className:"space-y-3",children:[Oe&&n.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-indigo-200 flex flex-col items-center justify-center text-center",children:[n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-400 mb-2"}),n.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-widest",children:"Scanning global digital signals..."})]}),(!p.socialSignals||p.socialSignals.length===0)&&!Oe?n.jsxs("div",{className:"py-12 text-center text-slate-400",children:[n.jsx(Qd,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),n.jsx("p",{className:"text-xs font-medium",children:"No signals found. Use AI Scan to refresh intelligence."})]}):(p.socialSignals||[]).map(Ge=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl hover:border-indigo-200 transition-all shadow-sm group",children:[n.jsxs("div",{className:"flex justify-between items-start mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${Ge.type==="funding"?"bg-emerald-50 text-emerald-600":Ge.type==="hiring"?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"}`,children:[Ge.type==="funding"&&n.jsx(D8,{className:"w-4 h-4"}),Ge.type==="hiring"&&n.jsx(id,{className:"w-4 h-4"}),Ge.type==="acquisition"&&n.jsx(d1,{className:"w-4 h-4"}),Ge.type==="news"&&n.jsx(kU,{className:"w-4 h-4"})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-sm text-slate-900",children:Ge.title}),Ge.isAiGenerated&&n.jsxs("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-tighter flex items-center gap-1",children:[n.jsx(Ri,{className:"w-2 h-2"})," Verified by Impact AI"]})]})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:Ge.date})]}),n.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:Ge.description})]},Ge.id))]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(yf,{className:"w-4 h-4 text-yellow-500"}),"Client Satisfaction"]}),en&&n.jsxs("button",{onClick:()=>e("satisfaction"),className:"text-xs text-indigo-600 hover:text-indigo-700 font-semibold flex items-center gap-1",children:["View Details",n.jsx(wa,{className:"w-3 h-3"})]})]}),vn?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(gt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):en?n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:`p-4 rounded-2xl border-2 ${en.latestNpsScore>=9?"bg-green-50 border-green-200":en.latestNpsScore>=7?"bg-yellow-50 border-yellow-200":en.latestNpsScore!==void 0&&en.latestNpsScore!==null?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Latest NPS Score"}),en.latestNpsScore!==void 0&&en.latestNpsScore!==null?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:`text-2xl font-black ${en.latestNpsScore>=9?"text-green-600":en.latestNpsScore>=7?"text-yellow-600":"text-red-600"}`,children:en.latestNpsScore}),en.npsCategory&&n.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-black uppercase ${en.npsCategory==="Promoter"?"bg-green-100 text-green-700":en.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:en.npsCategory})]}):n.jsx("span",{className:"text-sm text-slate-400",children:"No score yet"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Last Survey"}),en.lastSurveyDate?n.jsxs("span",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[n.jsx(Jn,{className:"w-4 h-4"}),new Date(en.lastSurveyDate).toLocaleDateString()]}):n.jsx("span",{className:"text-sm text-slate-400",children:"Not sent"})]})]}):n.jsx("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-slate-200 text-center",children:n.jsx("p",{className:"text-xs text-slate-400",children:"No satisfaction data available"})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4 text-indigo-500"}),"Playbooks",N.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:N.length})]}),S?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(gt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):N.length>0?n.jsx("div",{className:"space-y-3",children:N.map(Ge=>n.jsx(Goe,{instance:Ge,deals:z,projects:re,onView:wr=>w(wr)},Ge.id))}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[n.jsx(ci,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to deals or projects for this company."})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",p.notes&&p.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:p.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{rows:3,value:Fr,onChange:ar,onBlur:()=>setTimeout(()=>lt(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),mt&&ct.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(wh,{className:"w-3 h-3"}),"Mention User"]}),ct.map(Ge=>n.jsxs("button",{onClick:()=>nn(Ge),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Ge.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Ge.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:Ge.email})]})]},Ge.id))]})})]}),n.jsx("button",{onClick:Ra,disabled:ze||!Fr.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ze?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:p.notes&&p.notes.length>0?[...p.notes].reverse().map(Ge=>{const wr=l?.role==="Admin"||Ge.userId===l?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:Ge.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ge.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Ge.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),wr&&n.jsx("button",{onClick:()=>et(Ge.id),disabled:pe===Ge.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:pe===Ge.id?n.jsx(gt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Ge.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Aa(Ge.text)})]},Ge.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(co,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Active Contacts"}),n.jsx("div",{className:"space-y-3",children:B.filter(Ge=>Ge.companyId===p.id).map(Ge=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl flex items-center justify-between hover:border-indigo-200 transition-all cursor-pointer",onClick:()=>v(Ge),children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 border border-indigo-100 rounded-xl flex items-center justify-center text-xs font-black text-indigo-600 uppercase",children:Ge.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Ge.name}),n.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:Ge.role})]})]}),n.jsx(wa,{className:"w-4 h-4 text-slate-300"})]},Ge.id))})]})]})]})]}),b&&n.jsxs("div",{className:"fixed inset-0 z-[75] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Ma}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:Ma,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-indigo-100 ring-4 ring-indigo-50 shrink-0",children:b.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900 truncate mb-1",children:b.name}),n.jsxs("p",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest truncate",children:[b.role," @ ",E.find(Ge=>Ge.id===b.companyId)?.name||"Direct Contact"]}),n.jsx("div",{className:"flex gap-2 mt-4",children:ce?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:xr,disabled:qe,className:"px-4 py-2 bg-indigo-600 border border-indigo-600 rounded-xl text-xs font-black uppercase tracking-widest text-white hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:qe?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"})," Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-3.5 h-3.5"})," Save Changes"]})}),n.jsxs("button",{onClick:()=>{Ce(!1),xe({...b})},disabled:qe,className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-slate-300 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx(tr,{className:"w-3.5 h-3.5"})," Cancel"]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{onClick:()=>{xe({...b}),Ce(!0)},className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-indigo-300 transition-all flex items-center gap-2",children:[n.jsx(Yj,{className:"w-3.5 h-3.5"})," Edit Profile"]}),n.jsx("a",{href:`mailto:${b.email}`,className:"p-2.5 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-200",children:n.jsx(rs,{className:"w-4 h-4"})}),b.linkedin&&n.jsx("a",{href:b.linkedin,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-[#0077b5] text-white rounded-xl hover:bg-[#006da5] transition-all shadow-lg shadow-blue-100",children:n.jsx(hh,{className:"w-4 h-4"})})]})})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-200 w-fit mt-8",children:[{id:"details",label:"Overview",icon:n.jsx(y0,{className:"w-3.5 h-3.5"})},{id:"notes",label:"Strategic Context",icon:n.jsx(Qn,{className:"w-3.5 h-3.5"})},{id:"activity",label:"History",icon:n.jsx(ad,{className:"w-3.5 h-3.5"})}].map(Ge=>n.jsxs("button",{onClick:()=>{Se(Ge.id),Ce(!1)},className:`flex items-center gap-2 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${fe===Ge.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[Ge.icon," ",Ge.label]},Ge.id))})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[fe==="details"&&n.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:ce?n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-top-2 duration-300",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Full Legal Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{required:!0,type:"text",value:Xe.name||"",onChange:Ge=>xe({...Xe,name:Ge.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Professional Role"}),n.jsx("input",{type:"text",value:Xe.role||"",onChange:Ge=>xe({...Xe,role:Ge.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Linked Organization"}),n.jsxs("select",{value:Xe.companyId||"",onChange:Ge=>xe({...Xe,companyId:Ge.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"No Organization"}),E.map(Ge=>n.jsx("option",{value:Ge.id,children:Ge.name},Ge.id))]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-200 space-y-6",children:[n.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-200 pb-2",children:"Communication Registry"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Enterprise Email ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{required:!0,type:"email",value:Xe.email||"",onChange:Ge=>xe({...Xe,email:Ge.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Mobile Contact"}),n.jsx("input",{type:"tel",value:Xe.phone||"",onChange:Ge=>xe({...Xe,phone:Ge.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),n.jsxs("div",{className:"space-y-2 md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"LinkedIn Intelligence URL"}),n.jsx("input",{type:"url",value:Xe.linkedin||"",onChange:Ge=>xe({...Xe,linkedin:Ge.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Contact Channel"}),n.jsx(rs,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),n.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:b.email}),n.jsx("p",{className:"text-[10px] text-indigo-500 font-bold uppercase mt-2",children:"Verified Enterprise Mail"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Voice Registry"}),n.jsx(Qj,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),n.jsx("p",{className:"text-sm font-black text-slate-900",children:b.phone||"Registry Pending"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-2",children:"Direct Terminal"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4 text-indigo-500"})," Account Context"]}),n.jsxs("div",{className:"p-6 bg-white border border-slate-100 rounded-[36px] shadow-sm flex items-center gap-5 hover:border-indigo-300 transition-all group",children:[n.jsx(Xs,{src:E.find(Ge=>Ge.id===b.companyId)?.logo,className:"w-16 h-16 border-2 border-slate-50",fallbackText:"C",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-lg text-slate-900 leading-none mb-1 group-hover:text-indigo-600 transition-colors",children:E.find(Ge=>Ge.id===b.companyId)?.name||"Independent Partner"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase",children:E.find(Ge=>Ge.id===b.companyId)?.industry||"Uncategorized"}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),n.jsx("span",{className:"text-[10px] text-indigo-500 font-black uppercase",children:"Primary Stakeholder"})]})]}),n.jsx("button",{className:"p-3 text-indigo-600 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all",children:n.jsx(ps,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4 text-amber-500"})," Intelligence Summary"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center gap-3",children:[n.jsx(ov,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase",children:"Influence"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Decision Maker"})]})]}),n.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-2xl border border-blue-100 flex items-center gap-3",children:[n.jsx(c1,{className:"w-5 h-5 text-blue-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Network"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Executive Hub"})]})]})]})]})]})}),fe==="notes"&&n.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4 text-indigo-500"}),"Strategic Context & Notes",b.notes&&b.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:b.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{rows:4,value:bt,onChange:kn,onBlur:()=>setTimeout(()=>aa(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add strategic context, decision-making patterns, or meeting insights... (Use @ to mention users)"}),Vr&&Ve.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(wh,{className:"w-3 h-3"}),"Mention User"]}),Ve.map(Ge=>n.jsxs("button",{onClick:()=>Ar(Ge),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Ge.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Ge.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:Ge.email})]})]},Ge.id))]})})]}),n.jsx("button",{onClick:an,disabled:ir||!bt.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ir?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),b.legacyNotes&&n.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(y0,{className:"w-4 h-4 text-amber-600"}),n.jsx("p",{className:"text-xs font-bold text-amber-900 uppercase tracking-wider",children:"Legacy Notes"})]}),n.jsx("p",{className:"text-sm text-amber-800 leading-relaxed italic",children:b.legacyNotes})]}),n.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:b.notes&&b.notes.length>0?[...b.notes].reverse().map(Ge=>{const wr=l?.role==="Admin"||Ge.userId===l?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:Ge.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ge.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Ge.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),wr&&n.jsx("button",{onClick:()=>un(Ge.id),disabled:yr===Ge.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:yr===Ge.id?n.jsx(gt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Ge.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Aa(Ge.text)})]},Ge.id)}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx(co,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add strategic insights above"})]})})]}),fe==="activity"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Operational Engagement Timeline"}),n.jsxs("button",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-3 py-1.5 rounded-xl hover:bg-slate-200 transition-all flex items-center gap-1.5",children:[n.jsx(fU,{className:"w-3 h-3"})," Audit Log"]})]}),n.jsxs("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:[n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-indigo-600 shadow-xl flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),n.jsx("p",{className:"text-[10px] font-black text-indigo-600 uppercase mb-1 tracking-widest",children:"Digital Touchpoint  Yesterday"}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Enterprise Email Receipt"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Confirmed receipt of Logistics Transformation Proposal V3. Stakeholder requested EMEA regional review by Friday."})]}),n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Registry Update  Last Week"}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Registry Association Linked"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Manually associated with the 'Q4 Global Logistics Consolidation' opportunity by Alex Rivera (Admin)."})]})]})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>ut(b),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[28px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>{v(null),Ce(!1)},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[28px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(ov,{className:"w-5 h-5"})," Save"]})]})]})]}),Le&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Company?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. All associated contacts, deals, and projects will be affected."})]})]}),n.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Xs,{src:Le.logo,fallbackText:Le.name,className:"w-10 h-10 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Le.name}),n.jsx("p",{className:"text-xs text-slate-500",children:Le.industry})]})]})})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Re(null),disabled:vt,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Rt(Le.id),disabled:vt,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:vt?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Company"})]})]})}),Je&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Contact?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The contact will be permanently removed from the enterprise registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-lg border border-indigo-100",children:Je.name.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Je.name}),n.jsx("p",{className:"text-xs text-slate-500",children:Je.email}),Je.role&&n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:Je.role})]})]}),E.find(Ge=>Ge.id===Je.companyId)&&n.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[n.jsx(dl,{className:"w-4 h-4 text-slate-400"}),n.jsx("p",{className:"text-xs font-bold text-slate-600",children:E.find(Ge=>Ge.id===Je.companyId)?.name})]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>ut(null),disabled:Bt,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Cr(Je.id),disabled:Bt,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Bt?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Contact"})]})]})}),Wr&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",Wr==="companies"?We.length:br.length," ",Wr==="companies"?"Compan":"Contact",Wr==="companies"?We.length>1?"ies":"y":br.length>1?"s":"","?"]}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["This action cannot be undone. ",Wr==="companies"?"All associated contacts, deals, and projects will be affected.":"The contacts will be permanently removed from the enterprise registry."]})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[(Wr==="companies"?E.filter(Ge=>We.includes(Ge.id)):B.filter(Ge=>br.includes(Ge.id))).slice(0,5).map(Ge=>n.jsx("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:Wr==="companies"?n.jsxs(n.Fragment,{children:[n.jsx(Xs,{src:Ge.logo,fallbackText:Ge.name,className:"w-8 h-8 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ge.name}),n.jsx("p",{className:"text-[10px] text-slate-500",children:Ge.industry})]})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-xs uppercase",children:Ge.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ge.name}),n.jsx("p",{className:"text-[10px] text-slate-500",children:Ge.email})]})]})},Ge.id)),(Wr==="companies"?We.length:br.length)>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",(Wr==="companies"?We.length:br.length)-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>sr(null),disabled:Wr==="companies"?Dr:tt,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>{Wr==="companies"?mo():ml()},disabled:Wr==="companies"?Dr:tt,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:(Wr==="companies"?Dr:tt)?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${Wr==="companies"?We.length:br.length} ${Wr==="companies"?"Compan":"Contact"}${Wr==="companies"?We.length>1?"ies":"y":br.length>1?"s":""}`})]})]})}),Fe&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(w0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>et(null),disabled:pe===Fe,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Zn,disabled:pe===Fe,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:pe===Fe?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})}),Ur&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx(w0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>un(null),disabled:yr===Ur,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:dr,disabled:yr===Ur,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:yr===Ur?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})}),Ot&&n.jsx(pie,{onClose:()=>lr(!1),onSuccess:()=>{lr(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),jr&&n.jsx(xie,{onClose:()=>pr(!1),onSuccess:()=>{pr(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),y&&n.jsx(Woe,{type:c==="contacts"?"contact":"company",onClose:()=>j(!1),onSuccess:()=>{c==="contacts"?o.invalidateQueries({queryKey:["contacts"]}):o.invalidateQueries({queryKey:["companies"]})}}),g&&n.jsx(gy,{instanceId:g,isOpen:!!g,onClose:()=>w(null)})]})},p3=({isOpen:e,dealId:t,projectId:r,preSelectedTemplateId:a,onClose:s,onSuccess:i})=>{const{showError:o}=Cn(),[l,c]=D.useState(""),[d,u]=D.useState(null),[f,p]=D.useState(!1);D.useEffect(()=>{e&&a?u(a):e||(u(null),c(""))},[e,a]);const{data:m=[],isLoading:b}=EM(),v=poe();if(!e)return null;const g=m.filter(N=>{if(!l)return!0;const S=l.toLowerCase();return N.name?.toLowerCase().includes(S)||N.description?.toLowerCase().includes(S)||N.category?.toLowerCase().includes(S)}),w=N=>!N.sections||!Array.isArray(N.sections)?0:N.sections.reduce((S,E)=>S+(E.steps?.length||0),0),y=N=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[N]||"bg-slate-100 text-slate-700",j=async()=>{if(!d){o("Please select a playbook template");return}if(!t&&!r){o("Either dealId or projectId must be provided");return}p(!0);try{await v.mutateAsync({templateId:d,dealId:t||void 0,projectId:r||void 0}),i?.(),s(),u(null),c("")}catch(N){o(N.message||"Failed to attach playbook")}finally{p(!1)}};return n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:s}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(ci,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:a?"Activate Onboarding Playbook?":"Attach Playbook"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:a?"The Client Onboarding Playbook is ready to activate for this deal.":"Select a playbook template to attach"})]})]}),n.jsx("button",{onClick:s,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[n.jsx("div",{className:"mb-6",children:n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search playbooks...",value:l,onChange:N=>c(N.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]})}),b?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):g.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(ci,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Templates Found"}),n.jsx("p",{className:"text-sm text-slate-500",children:l?"No templates match your search. Try a different query.":"No playbook templates available. Create one first."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:g.map(N=>{const S=w(N),E=N.sections?.length||0,A=d===N.id;return n.jsxs("div",{onClick:()=>u(N.id),className:`p-6 border-2 rounded-xl cursor-pointer transition-all ${A?"border-indigo-500 bg-indigo-50 shadow-lg":"border-slate-200 hover:border-slate-300 hover:shadow-md bg-white"}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:N.name}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${y(N.category||"Custom")}`,children:N.category||"Custom"})]}),A&&n.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center",children:n.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]}),N.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:N.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Qn,{className:"w-4 h-4"}),n.jsxs("span",{children:[E," section",E!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Db,{className:"w-4 h-4"}),n.jsxs("span",{children:[S," step",S!==1?"s":""]})]})]})]},N.id)})})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:a&&d===a?n.jsxs("div",{className:"flex flex-col gap-3",children:[n.jsx("button",{onClick:j,disabled:f,className:"w-full px-6 py-3 bg-green-600 text-white text-sm font-semibold rounded-xl hover:bg-green-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Activating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(_i,{className:"w-4 h-4"}),"Yes, Activate Onboarding Playbook"]})}),n.jsx("button",{onClick:s,disabled:f,className:"w-full px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Maybe Later"})]}):n.jsxs("div",{className:"flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:s,disabled:f,className:"px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:j,disabled:!d||f,className:"px-6 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Attaching..."]}):"Attach Playbook"})]})})]})})]})},HI=[{id:"sales",name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]},{id:"ops",name:"Operations Flow",type:"operations",stages:["Order Received","Processing","In Transit","Delivered"]}],Koe=({instance:e,onView:t})=>{const{data:r=[]}=_g(e.id),a=e.templateSnapshot?.sections?.reduce((o,l)=>o+(l.steps?.length||0),0)||0,s=r.length,i=a>0?Math.round(s/a*100):0;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:n.jsx(ci,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:["Version ",e.templateSnapshot.version]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-semibold ${e.status==="completed"?"bg-green-100 text-green-700":"bg-indigo-100 text-indigo-700"}`,children:e.status==="completed"?"Completed":"Active"})})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Progress"}),n.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:[s," / ",a," steps"]})]}),n.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:n.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${i}%`}})})]}),n.jsxs("button",{onClick:t,className:"w-full px-4 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 text-xs font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4"}),"View Playbook"]})]})},Xoe=({onNavigate:e,onNewDeal:t,currentUser:r})=>{const{showSuccess:a,showError:s,showInfo:i}=Cn(),[o,l]=D.useState([]),[c,d]=D.useState([]),[u,f]=D.useState([]),[p,m]=D.useState([]),[b,v]=D.useState(!0),[g,w]=D.useState(null),[y,j]=D.useState("overview"),[N,S]=D.useState(!1),[E,A]=D.useState(null),{data:P=[],isLoading:I}=xy({dealId:g?.id}),[B,T]=D.useState(!1),[_,R]=D.useState(null),[z,H]=D.useState(null),[Y,J]=D.useState(""),[re,X]=D.useState(null),[te,W]=D.useState(!1),[O,q]=D.useState(!1),[G,U]=D.useState(!1),[K,ae]=D.useState({title:"",companyId:"",value:"",currency:Si,stage:"Discovery",ownerId:"",expectedCloseDate:"",description:""}),[me,se]=D.useState([]),[le,Me]=D.useState(!1),[ue,Ue]=D.useState(!1),[Ae,ie]=D.useState([]),[Z,Ee]=D.useState(!1),[we,Oe]=D.useState([]),[de,ce]=D.useState(""),[Ce]=D.useState("sales"),[Xe,xe]=D.useState(!1),[fe,Se]=D.useState(!1),[qe,je]=D.useState(!0),[Le,Re]=D.useState(!1),[Je,ut]=D.useState(null),[vt,At]=D.useState(""),[Bt,Yt]=D.useState(""),We=we.find(pe=>pe.id===de)||null,[Ct,br]=D.useState(null),Jt=async()=>{try{je(!0);const Fe=((await hI())?.data||[]).filter(et=>et.type==="sales");if(Fe.length===0)try{const et=await mI({name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});et?.data?.id&&await Sv(et.data.id,{isActive:!0});const xt=((await hI())?.data||[]).filter(ve=>ve.type==="sales");Oe(xt);const ge=xt.find(ve=>ve.isActive)||xt[0];ge&&ce(ge.id)}catch(et){console.error("[PIPELINE] Failed to create default sales pipeline:",et);const mt=HI.filter(lt=>lt.type==="sales");Oe(mt),mt.length>0&&ce(mt[0].id)}else{Oe(Fe);const et=Fe.find(mt=>mt.isActive)||Fe[0];et&&ce(et.id)}}catch(pe){console.error("[PIPELINE] Failed to fetch pipelines:",pe);const _e=HI.filter(Fe=>Fe.type==="sales");Oe(_e),_e.length>0&&ce(_e[0].id)}finally{je(!1)}};D.useEffect(()=>{Jt()},[]);const Dr=async()=>{v(!0);try{const[pe,_e,Fe,et]=await Promise.all([Sg(),md(),_c(),Ch()]),lt=(Array.isArray(pe)?pe:pe?.data||[]).filter(xt=>xt.pipelineType?xt.pipelineType==="sales":!["Order Received","Processing","In Transit","Delivered"].includes(xt.stage));l(lt),d(_e?.data||[]),f(Fe?.data||[]),m(et?.data||[])}catch{s("Failed to load pipeline data")}finally{v(!1)}};D.useEffect(()=>{Dr()},[r,Ce]),D.useEffect(()=>{const pe=()=>Dr();return window.addEventListener("refresh-pipeline",pe),()=>window.removeEventListener("refresh-pipeline",pe)},[]);const Hr=(pe,_e)=>{br(_e),pe.dataTransfer.setData("dealId",_e)},tt=async(pe,_e)=>{pe.preventDefault();const Fe=pe.dataTransfer.getData("dealId"),et=o.find(mt=>mt.id===Fe);if(!(!et||et.stage===_e))try{await jv(Fe,{stage:_e,pipelineType:"sales"}),l(mt=>mt.map(lt=>lt.id===Fe?{...lt,stage:_e}:lt)),a(`Deal moved to ${_e}`),et.ownerId&&et.ownerId!==r?.id&&await Zm({userId:et.ownerId,type:"deal",title:"Deal Advanced",message:`The deal "${et.title}" was moved to ${_e}.`,link:"/?tab=pipeline"})}catch{s("Failed to move deal")}finally{br(null)}},Dt=async()=>{if(!(!vt.trim()||!de||Le))try{Re(!0);const pe=we.find(Fe=>Fe.id===de);if(!pe)return;const _e=[...pe.stages,vt.trim()];await Sv(de,{stages:_e}),Oe(Fe=>Fe.map(et=>et.id===de?{...et,stages:_e}:et)),At(""),a("Stage added successfully")}catch(pe){s(pe.message||"Failed to add stage")}finally{Re(!1)}},mr=async pe=>{if(de)try{const _e=we.find(et=>et.id===de);if(!_e)return;const Fe=_e.stages.filter((et,mt)=>mt!==pe);await Sv(de,{stages:Fe}),Oe(et=>et.map(mt=>mt.id===de?{...mt,stages:Fe}:mt)),a("Stage removed successfully")}catch(_e){s(_e.message||"Failed to remove stage")}},Sr=async()=>{if(Bt.trim())try{const pe=await mI({name:Bt.trim(),type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});pe?.data&&(await Jt(),ce(pe.data.id),Yt(""),xe(!1),a("Sales pipeline created successfully"))}catch(pe){s(pe.message||"Failed to create pipeline")}},Jr=async pe=>{try{const _e=we.find(Fe=>Fe.id===pe);if(!_e)return;await Sv(pe,{isActive:!0}),ce(pe),await Jt(),await Dr(),a(`Switched to ${_e.name}`)}catch(_e){s(_e.message||"Failed to switch pipeline")}},_r=async pe=>{W(!0);try{await dI(pe),l(_e=>_e.filter(Fe=>Fe.id!==pe)),g?.id===pe&&w(null),X(null),a("Opportunity removed from pipeline")}catch(_e){s(_e.message||"Failed to delete opportunity")}finally{W(!1)}},Wr=()=>{me.length===o.length?se([]):se(o.map(pe=>pe.id))},sr=async()=>{Me(!0);try{const pe=[...me];await Promise.all(pe.map(_e=>dI(_e))),l(_e=>_e.filter(Fe=>!pe.includes(Fe.id))),g&&pe.includes(g.id)&&w(null),se([]),Ue(!1),a(`Successfully deleted ${pe.length} opportunit${pe.length>1?"ies":"y"}`)}catch(pe){s(pe.message||"Failed to delete opportunities")}finally{Me(!1)}},en=async pe=>{if(!g)return;if(g.stakeholderIds?.includes(pe)){s("Stakeholder already linked");return}R(pe);const _e=[...g.stakeholderIds||[],pe];try{await jv(g.id,{stakeholderIds:_e});const Fe={...g,stakeholderIds:_e};w(Fe),l(et=>et.map(mt=>mt.id===g.id?Fe:mt)),T(!1),J(""),a("Stakeholder linked to opportunity")}catch{s("Link failed")}finally{R(null)}},Gr=c.find(pe=>pe.id===g?.companyId),vn=u.find(pe=>pe.id===g?.ownerId),kr=p.filter(pe=>g?.stakeholderIds?.includes(pe.id)),Fr=p.filter(pe=>!g?.stakeholderIds?.includes(pe.id)&&(pe.name.toLowerCase().includes(Y.toLowerCase())||pe.email.toLowerCase().includes(Y.toLowerCase())));D.useEffect(()=>{g&&!O&&ae({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||Si,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},[g]);const ke=async()=>{if(g){if(!K.title.trim()){s("Deal title is required");return}if(!K.ownerId){s("Opportunity lead is required");return}U(!0);try{const pe={title:K.title.trim(),companyId:K.companyId&&K.companyId.trim()!==""?K.companyId:null,value:parseFloat(K.value)||0,currency:K.currency||Si,stage:K.stage,pipelineType:"sales",ownerId:K.ownerId,expectedCloseDate:K.expectedCloseDate&&K.expectedCloseDate.trim()!==""?K.expectedCloseDate:null,description:K.description.trim()||null};await jv(g.id,pe);const _e={...g,...pe};l(Fe=>Fe.map(et=>et.id===g.id?_e:et)),w(_e),q(!1),a("Deal updated successfully")}catch(pe){s(pe.message||"Failed to update deal")}finally{U(!1)}}},ze=async()=>{if(!(!g||y!=="activity")){Ee(!0);try{const pe=await l3("deal",g.id);ie(pe?.data||[])}catch(pe){console.error("[PIPELINE] Failed to fetch deal activities:",pe),ie([])}finally{Ee(!1)}}};D.useEffect(()=>{g&&y==="activity"?ze():ie([])},[g?.id,y]);const $e=()=>{if(!g)return[];const pe=[];return g.createdAt&&pe.push({id:"created",type:"created",title:"Opportunity Created",description:`Deal "${g.title}" was created${vn?` by ${vn.name}`:""}`,date:g.createdAt,icon:n.jsx(ln,{className:"w-4 h-4"}),color:"indigo"}),pe.push({id:"stage",type:"stage",title:`Current Stage: ${g.stage}`,description:`Opportunity is currently in the ${g.stage} stage`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(Qd,{className:"w-4 h-4"}),color:g.stage==="Won"?"emerald":g.stage==="Lost"?"red":"blue"}),g.value>0&&pe.push({id:"value",type:"value",title:`Deal Value: ${xf(g.value,g.currency)}`,description:`Gross contract revenue for this opportunity: ${xf(g.value,g.currency)}`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(Mu,{className:"w-4 h-4"}),color:"emerald"}),g.expectedCloseDate&&pe.push({id:"close_date",type:"close_date",title:`Expected Close Date: ${g.expectedCloseDate}`,description:"Target date for closing this opportunity",date:g.expectedCloseDate,icon:n.jsx(Jn,{className:"w-4 h-4"}),color:"amber"}),kr.length>0&&pe.push({id:"stakeholders",type:"stakeholder",title:`${kr.length} Stakeholder${kr.length>1?"s":""} Linked`,description:kr.map(_e=>_e.name).join(", "),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(x0,{className:"w-4 h-4"}),color:"purple"}),g.description&&pe.push({id:"description",type:"description",title:"Strategic Context Added",description:g.description.substring(0,100)+(g.description.length>100?"...":""),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:n.jsx(co,{className:"w-4 h-4"}),color:"slate"}),Ae.forEach(_e=>{_e.activityType==="email_linked"&&pe.push({id:_e.id||`email-${_e.emailId}`,type:"email_linked",title:_e.title||"Email Linked",description:_e.description||`Email "${_e.emailSubject||"Untitled"}" from ${_e.emailSender||"Unknown"}`,date:_e.createdAt,icon:n.jsx(rs,{className:"w-4 h-4"}),color:"indigo",emailId:_e.emailId})}),pe.sort((_e,Fe)=>new Date(Fe.date).getTime()-new Date(_e.date).getTime())};return n.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500 relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center shrink-0 gap-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"relative group",children:[n.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl shadow-sm hover:border-indigo-300 transition-all font-bold",children:[n.jsx(Xj,{className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-slate-900",children:We?.name||"Loading..."}),n.jsx(Fs,{className:"w-4 h-4 text-slate-400"})]}),n.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-slate-100 rounded-2xl shadow-xl z-50 overflow-hidden opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all",children:[we.length>0?we.map(pe=>n.jsxs("button",{onClick:()=>Jr(pe.id),className:`w-full px-4 py-3 text-left text-sm font-bold flex items-center justify-between hover:bg-indigo-50 transition-colors ${de===pe.id?"text-indigo-600":"text-slate-600"}`,children:[pe.name," ",de===pe.id&&n.jsx(cd,{className:"w-4 h-4"})]},pe.id)):n.jsx("div",{className:"px-4 py-3 text-sm text-slate-400",children:"No pipelines available"}),n.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:n.jsxs("button",{onClick:()=>xe(!0),className:"w-full text-xs text-indigo-600 font-bold hover:text-indigo-700 flex items-center gap-2",children:[n.jsx(ln,{className:"w-3 h-3"}),"Manage Pipelines"]})}),n.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:n.jsx("input",{type:"text",placeholder:"New Pipeline Name...",value:Bt,onChange:pe=>Yt(pe.target.value),onKeyDown:pe=>pe.key==="Enter"&&Sr(),className:"w-full text-xs px-2 py-1.5 border border-slate-200 rounded-lg outline-none focus:ring-1 focus:ring-indigo-100"})})]})]}),n.jsxs("p",{className:"text-slate-400 text-xs hidden lg:block font-medium",children:["Tracking ",o.length," active opportunities"]})]}),n.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[n.jsx("button",{onClick:()=>xe(!0),className:"p-2 border border-slate-200 bg-white text-slate-600 rounded-lg hover:bg-slate-50 shadow-sm transition-all",children:n.jsx(w6,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:()=>t(),className:"flex-1 sm:flex-none px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all",children:[n.jsx(ln,{className:"w-4 h-4"})," New Deal"]})]})]}),!b&&o.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:o.length>0&&me.length===o.length,onChange:Wr}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Opportunities"})]}),n.jsx("div",{className:"flex-1 min-h-0 flex gap-6 overflow-x-auto overflow-y-hidden pb-6 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-hide",children:b||qe||!We?n.jsx("div",{className:"flex items-center justify-center w-full min-h-[400px]",children:n.jsx(gt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):We.stages.map(pe=>{const _e=o.filter(Fe=>Fe.stage===pe);return n.jsxs("div",{onDragOver:Fe=>Fe.preventDefault(),onDrop:Fe=>tt(Fe,pe),className:"flex flex-col min-h-0 w-[85vw] sm:w-72 lg:w-80 shrink-0 bg-slate-100/40 rounded-3xl p-4 border border-slate-200/50",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("h3",{className:"font-black text-slate-900 text-xs uppercase tracking-widest",children:pe}),n.jsx("span",{className:"text-[10px] bg-white text-slate-400 px-2 py-0.5 rounded-full border border-slate-200 font-bold",children:_e.length})]}),n.jsx(ln,{onClick:()=>t(pe),className:"w-4 h-4 text-slate-300 hover:text-indigo-600 cursor-pointer transition-colors"})]}),n.jsx("div",{className:"flex-1 min-h-0 space-y-4 overflow-y-auto pr-1",children:_e.map(Fe=>{const et=c.find(lt=>lt.id===Fe.companyId),mt=me.includes(Fe.id);return n.jsxs("div",{onClick:()=>w(Fe),draggable:!0,onDragStart:lt=>Hr(lt,Fe.id),className:`bg-white p-5 rounded-2xl border ${mt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all cursor-move group active:scale-[0.98] relative ${Ct===Fe.id?"opacity-30":""}`,children:[n.jsx("div",{className:"absolute top-3 right-3",onClick:lt=>lt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:mt,onChange:()=>se(lt=>mt?lt.filter(xt=>xt!==Fe.id):[...lt,Fe.id])})}),n.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[n.jsx(Xs,{src:et?.logo,fallbackText:et?.name,className:"w-5 h-5 shrink-0 mt-0.5",isAvatar:!1}),n.jsx("h4",{className:"font-bold text-slate-900 text-sm group-hover:text-indigo-600 transition-colors break-words leading-tight flex-1 min-w-0",children:Fe.title})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:et?.name||"Independent"}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("span",{className:"text-indigo-600 font-black text-xs",children:xf(Fe.value,Fe.currency)}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:Fe.expectedCloseDate}),n.jsx("div",{className:"w-6 h-6 bg-slate-50 rounded-full flex items-center justify-center text-[8px] font-black text-slate-300 border border-slate-100 uppercase",children:"DE"})]})]})]},Fe.id)})})]},pe)})}),g&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{w(null),T(!1)}}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[20px] flex items-center justify-center text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:n.jsx(Cl,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[O?n.jsx("input",{type:"text",value:K.title,onChange:pe=>ae(_e=>({..._e,title:pe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-2xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Deal title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:g.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[O?n.jsx("select",{value:K.stage,onChange:pe=>ae(_e=>({..._e,stage:pe.target.value})),className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200 outline-none focus:ring-2 focus:ring-indigo-300",children:We?.stages?.map(pe=>n.jsx("option",{value:pe,children:pe},pe))||[]}):n.jsx("span",{className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200",children:g.stage}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Opportunity ID: #",g.id.substring(0,8)]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[O?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{q(!1),ae({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||Si,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},disabled:G,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:ke,disabled:G||!K.title.trim()||!K.ownerId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:G?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>q(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Do,{className:"w-4 h-4"}),"Edit Deal"]}),n.jsx("button",{onClick:()=>{w(null),T(!1),q(!1)},className:"p-3 hover:bg-white rounded-full text-slate-400 shadow-sm transition-all",children:n.jsx(tr,{className:"w-6 h-6"})})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-100 w-fit",children:[{id:"overview",label:"Overview",icon:n.jsx(y0,{className:"w-4 h-4"})},{id:"activity",label:"Timeline",icon:n.jsx(ad,{className:"w-4 h-4"})},{id:"stakeholders",label:"Stakeholders",icon:n.jsx(x0,{className:"w-4 h-4"})},{id:"playbooks",label:"Playbooks",icon:n.jsx(ci,{className:"w-4 h-4"})}].map(pe=>n.jsxs("button",{onClick:()=>{j(pe.id),T(!1),q(!1)},className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${y===pe.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[pe.icon," ",pe.label]},pe.id))})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10 custom-scrollbar",children:[y==="overview"&&n.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[O?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),n.jsx(ex,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("div",{className:"space-y-3",children:n.jsxs("div",{className:"flex gap-3 items-center",children:[n.jsx("select",{value:K.currency||Si,onChange:pe=>ae(_e=>({..._e,currency:pe.target.value})),className:"px-4 py-3 text-sm font-bold bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 text-indigo-600 appearance-none min-w-[140px] h-[60px]",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236366f1" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px",height:"60px"},children:ep.map(pe=>n.jsxs("option",{value:pe.code,children:[pe.code," (",pe.symbol,")"]},pe.code))}),n.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[n.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-600 font-black text-xl pointer-events-none z-10",children:ff(K.currency||Si)}),n.jsx("input",{type:"number",step:"0.01",min:"0",value:K.value||"",onChange:pe=>ae(_e=>({..._e,value:pe.target.value})),className:"w-full pl-10 pr-4 py-3 text-2xl font-black text-indigo-600 bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-400 placeholder:text-slate-300 h-[60px]",placeholder:"0",autoFocus:!1,style:{WebkitAppearance:"textfield",MozAppearance:"textfield",appearance:"textfield",color:"#4f46e5",fontSize:"1.5rem",fontWeight:"900",height:"60px"}})]})]})}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),n.jsx(Jn,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("input",{type:"date",value:K.expectedCloseDate,onChange:pe=>ae(_e=>({..._e,expectedCloseDate:pe.target.value})),className:"text-xl font-black text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-4 focus:ring-indigo-100 w-full"}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}):n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),n.jsx(ex,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("h3",{className:"text-3xl font-black text-indigo-600",children:xf(g.value,g.currency)}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),n.jsx(Jn,{className:"w-4 h-4 text-indigo-400"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:g.expectedCloseDate||"Not set"}),n.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4"})," Account Association"]}),O?n.jsxs("select",{value:K.companyId,onChange:pe=>ae(_e=>({..._e,companyId:pe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",children:[n.jsx("option",{value:"",children:"Independent/Direct"}),c.map(pe=>n.jsx("option",{value:pe.id,children:pe.name},pe.id))]}):n.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:border-indigo-300 transition-all group flex items-center gap-4",children:[n.jsx(Xs,{src:Gr?.logo,className:"w-14 h-14",fallbackText:Gr?.name||"A",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-slate-900",children:Gr?.name||"Independent/Direct"}),n.jsx("p",{className:"text-xs text-indigo-500 font-bold",children:Gr?.industry||"Uncategorized"})]}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:n.jsx(ps,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Lb,{className:"w-4 h-4"})," Opportunity Lead"]}),O?n.jsxs("select",{value:K.ownerId,onChange:pe=>ae(_e=>({..._e,ownerId:pe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",required:!0,children:[n.jsx("option",{value:"",children:"Select Owner"}),u.map(pe=>n.jsxs("option",{value:pe.id,children:[pe.name," (",pe.role,")"]},pe.id))]}):n.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center gap-4",children:[n.jsx(Xs,{src:vn?.avatar,className:"w-14 h-14",fallbackText:vn?.name||"U",isAvatar:!0}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-black text-slate-900",children:vn?.name||"Unassigned"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:vn?.role||"Teammate"})]})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4"})," Strategic Context"]}),O?n.jsx("textarea",{value:K.description,onChange:pe=>ae(_e=>({..._e,description:pe.target.value})),rows:6,className:"w-full p-8 bg-slate-950 rounded-[40px] text-indigo-50 border-2 border-indigo-200 outline-none focus:ring-4 focus:ring-indigo-100 resize-none text-sm leading-relaxed italic",placeholder:"Enter strategic context and operational notes..."}):n.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group",children:[n.jsx("p",{className:"text-sm leading-relaxed italic opacity-80 z-10 relative",children:g.description||"The logistics assessment phase is currently gathering data points to populate this strategic summary. No specific operational notes are archived yet."}),n.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Digital Readiness & Proposal"}),n.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-[9px] font-black uppercase rounded-full border border-indigo-200 flex items-center gap-1",children:[n.jsx(Ri,{className:"w-2.5 h-2.5"})," AI Engine"]})]}),n.jsxs("div",{className:"p-6 border-2 border-dashed border-slate-200 rounded-[32px] flex flex-col items-center text-center",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:n.jsx(Qn,{className:"w-6 h-6"})}),n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Proposal Engine Coming Soon"}),n.jsx("p",{className:"text-xs text-slate-400 mb-6 max-w-xs",children:"Automated PDF generation and strategic roadmap visualization for this opportunity are in final audit."}),n.jsx("button",{onClick:()=>i("Proposal engine is currently in development."),className:"px-6 py-2.5 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-800 transition-all opacity-50 cursor-not-allowed",children:"Generate Proposal [LOCKED]"})]})]})]}),y==="activity"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"})," Opportunity Timeline"]}),Z?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(gt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):(()=>{const pe=$e();return pe.length===0?n.jsxs("div",{className:"py-20 bg-white border border-dashed border-slate-200 rounded-3xl text-center",children:[n.jsx(ad,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No timeline events available"})]}):n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-slate-200"}),n.jsx("div",{className:"space-y-6",children:pe.map((_e,Fe)=>{const et=ge=>{const ve={indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",blue:"bg-blue-50 text-blue-600 border-blue-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",amber:"bg-amber-50 text-amber-600 border-amber-200",purple:"bg-purple-50 text-purple-600 border-purple-200",red:"bg-red-50 text-red-600 border-red-200",slate:"bg-slate-50 text-slate-600 border-slate-200"};return ve[ge]||ve.slate},mt=new Date(_e.date),lt=mt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),xt=mt.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return n.jsxs("div",{className:"relative flex items-start gap-4",children:[n.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full border-2 ${et(_e.color)} flex items-center justify-center flex-shrink-0`,children:_e.icon}),n.jsx("div",{className:"flex-1 pb-6",children:n.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-2",children:[n.jsx("h4",{className:"font-black text-slate-900 text-sm",children:_e.title}),n.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap ml-4",children:[lt," ",xt]})]}),n.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:_e.description}),_e.type==="email_linked"&&_e.emailId&&n.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${_e.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(ps,{className:"w-3 h-3"})," View Email"]})]})})]},_e.id)})})]})})()]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-8 border-t border-slate-100",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Days in Pipeline"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:g.createdAt?Math.floor((new Date().getTime()-new Date(g.createdAt).getTime())/(1e3*60*60*24)):"N/A"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Stage"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:g.stage})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Stakeholders"}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:kr.length})]})]})]}),y==="stakeholders"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Key Account Decision Makers"}),!B&&n.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(id,{className:"w-3 h-3"})," Link Person"]})]}),B?n.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-[32px] animate-in slide-in-from-top-2",children:[n.jsxs("div",{className:"flex justify-between items-center mb-6",children:[n.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Select Existing Contact"}),n.jsx("button",{onClick:()=>T(!1),className:"p-1 hover:bg-white rounded-lg",children:n.jsx(tr,{className:"w-4 h-4 text-slate-400"})})]}),n.jsxs("div",{className:"relative mb-6",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search global registry...",value:Y,onChange:pe=>J(pe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs"})]}),n.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:Fr.length>0?Fr.map(pe=>{const _e=_===pe.id;return n.jsxs("button",{onClick:()=>en(pe.id),disabled:_e||!!_,className:"w-full p-4 bg-white border border-slate-100 rounded-2xl flex items-center gap-3 hover:border-indigo-400 hover:shadow-sm transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase group-hover:scale-105 transition-transform",children:pe.name.charAt(0)}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:"font-bold text-xs text-slate-900 truncate",children:pe.name}),n.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase truncate",children:pe.role})]}),_e?n.jsx(gt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):n.jsx(ln,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600"})]},pe.id)}):n.jsx("div",{className:"py-10 text-center text-xs text-slate-400",children:"No matching contacts found in CRM."})})]}):kr.length>0?n.jsx("div",{className:"grid grid-cols-1 gap-3",children:kr.map(pe=>n.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-3xl flex items-center justify-between hover:border-indigo-200 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 font-black text-lg",children:pe.name.charAt(0)}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:pe.name}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:pe.role})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:async()=>{if(g){H(pe.id);try{const _e=(g.stakeholderIds||[]).filter(et=>et!==pe.id);await jv(g.id,{stakeholderIds:_e});const Fe={...g,stakeholderIds:_e};w(Fe),l(et=>et.map(mt=>mt.id===g.id?Fe:mt)),a("Stakeholder removed")}catch{s("Failed to remove stakeholder")}finally{H(null)}}},disabled:z===pe.id,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:z===pe.id?n.jsx(gt,{className:"w-4 h-4 animate-spin text-red-500"}):n.jsx(Lr,{className:"w-4 h-4"})}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600",children:n.jsx(wa,{className:"w-5 h-5"})})]})]},pe.id))}):n.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[n.jsx(x0,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No stakeholders linked to this opportunity yet."})]})]}),y==="playbooks"&&n.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),n.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(ln,{className:"w-3 h-3"})," Attach Playbook"]})]}),I?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(gt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):P.length>0?n.jsx("div",{className:"space-y-3",children:P.map(pe=>n.jsx(Koe,{instance:pe,onView:()=>A(pe.id)},pe.id))}):n.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[n.jsx(ci,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this deal yet."})]})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>X(g),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[24px] transition-all group",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>i("Lifecycle management automated through digital registry."),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(_i,{className:"w-5 h-5"})," Confirm Strategic Deployment"]})]})]})]}),re&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Opportunity?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunity will be permanently removed from the pipeline."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Cl,{className:"w-5 h-5 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:re.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:re.stage}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),n.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",re.value.toLocaleString()]})]})]})]}),Gr&&n.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[n.jsx(Xs,{src:Gr.logo,fallbackText:Gr.name,className:"w-6 h-6",isAvatar:!1}),n.jsx("p",{className:"text-xs font-bold text-slate-600",children:Gr.name})]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>X(null),disabled:te,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>_r(re.id),disabled:te,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:te?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Opportunity"})]})]})}),me.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:me.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:pe=>{pe.stopPropagation(),Ue(!0)},disabled:le,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[le?n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>se([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),ue&&me.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",me.length," Opportunit",me.length>1?"ies":"y","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunities will be permanently removed from the pipeline."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(pe=>me.includes(pe.id)).slice(0,5).map(pe=>(c.find(_e=>_e.id===pe.companyId),n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(Cl,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:pe.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[n.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:pe.stage}),n.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),n.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",pe.value.toLocaleString()]})]})]})]},pe.id))),me.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",me.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Ue(!1),disabled:le,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:sr,disabled:le,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:le?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${me.length} Opportunit${me.length>1?"ies":"y"}`})]})]})}),fe&&n.jsxs("div",{className:"fixed inset-0 z-[140] flex",children:[n.jsx("div",{className:"flex-1 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Se(!1)}),n.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl animate-in slide-in-from-right duration-300 overflow-y-auto",children:[n.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 flex items-center justify-between z-10",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(w6,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Pipeline Settings"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Configure your pipeline stages"})]})]}),n.jsx("button",{onClick:()=>Se(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6 space-y-6",children:[n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Sales Pipelines"}),n.jsx("div",{className:"space-y-2",children:we.map(pe=>n.jsx("button",{onClick:()=>Jr(pe.id),className:`w-full p-4 rounded-xl border-2 transition-all text-left ${de===pe.id?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-200"}`,children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:pe.name}),n.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[pe.stages.length," stages"]})]}),de===pe.id&&n.jsx(cd,{className:"w-5 h-5 text-indigo-600"})]})},pe.id))})]}),We&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stages"}),n.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[We.stages.length," stages"]})]}),n.jsx("div",{className:"space-y-2",children:We.stages.map((pe,_e)=>n.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center text-xs font-black text-indigo-600",children:_e+1}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-bold text-sm text-slate-900",children:pe}),n.jsxs("p",{className:"text-xs text-slate-400",children:[o.filter(Fe=>Fe.stage===pe).length," deals"]})]})]},pe))})]}),n.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(ex,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"font-black text-slate-900",children:"Pipeline Overview"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Deals"}),n.jsx("p",{className:"text-2xl font-black text-slate-900 mt-1",children:o.length})]}),n.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Value"}),n.jsxs("p",{className:"text-lg font-black text-slate-900 mt-1",children:["$",o.reduce((pe,_e)=>pe+(_e.value||0),0).toLocaleString()]})]})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Quick Actions"}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{onClick:()=>{Se(!1),xe(!0)},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[n.jsx(Xj,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:"Edit Pipeline"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Add or remove stages"})]}),n.jsx(wa,{className:"w-5 h-5 text-slate-300 ml-auto"})]}),n.jsxs("button",{onClick:()=>{Se(!1),Dr(),a("Pipeline refreshed")},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[n.jsx(sd,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900",children:"Refresh Data"}),n.jsx("p",{className:"text-xs text-slate-400",children:"Reload all deals"})]}),n.jsx(wa,{className:"w-5 h-5 text-slate-300 ml-auto"})]})]})]})]})]})]}),Xe&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Pipeline Configuration"}),n.jsx("button",{onClick:()=>xe(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Select Pipeline"}),n.jsx("div",{className:"space-y-2",children:we.map(pe=>n.jsx("button",{onClick:()=>Jr(pe.id),className:`w-full p-3 rounded-xl border-2 text-left ${de===pe.id?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:n.jsx("p",{className:"font-bold",children:pe.name})},pe.id))})]}),We&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Edit Stages"}),n.jsx("div",{className:"space-y-2",children:We.stages.map((pe,_e)=>n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[n.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1",children:pe}),n.jsx("button",{onClick:()=>mr(_e),disabled:Je!==null,className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Je===_e?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"})})]},_e))}),n.jsxs("div",{className:"flex gap-2 mt-3",children:[n.jsx("input",{type:"text",placeholder:"New stage name...",value:vt,onChange:pe=>At(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"&&vt.trim()&&!Le&&Dt()},disabled:Le,className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),n.jsx("button",{onClick:Dt,disabled:Le||!vt.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:Le?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{children:"Adding..."})]}):"Add"})]})]}),n.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Create New Sales Pipeline"}),n.jsxs("div",{className:"space-y-3",children:[n.jsx("input",{type:"text",placeholder:"Pipeline name...",value:Bt,onChange:pe=>Yt(pe.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-xl text-sm"}),n.jsx("button",{onClick:Sr,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm",children:"Create Sales Pipeline"})]})]})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 flex justify-end",children:n.jsx("button",{onClick:()=>xe(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:"Done"})})]})}),n.jsx(p3,{isOpen:N,dealId:g?.id,onClose:()=>S(!1),onSuccess:()=>{S(!1)}}),E&&n.jsx(gy,{instanceId:E,isOpen:!!E,onClose:()=>A(null)})]})},Uh={projects:e=>["projects",e],companies:["companies"],users:["users"],tasks:e=>["tasks",e],projectActivities:e=>["project-activities",e]},Yoe=e=>Ys({queryKey:Uh.projects(e||""),queryFn:async()=>(await D0()).data||[],enabled:!0,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),Qoe=()=>Ys({queryKey:Uh.companies,queryFn:async()=>(await md()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),Joe=()=>Ys({queryKey:Uh.users,queryFn:async()=>(await _c()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),Zoe=e=>Ys({queryKey:Uh.tasks(e||""),queryFn:async()=>e?(await my(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),ele=e=>Ys({queryKey:Uh.projectActivities(e||""),queryFn:async()=>e?(await l3("project",e))?.data||[]:[],enabled:!!e,staleTime:1e4,refetchOnWindowFocus:!0}),tle=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async({id:a,data:s})=>await Q7(a,s),onSuccess:async(a,s)=>{t("Project updated successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"}),e.refetchQueries({queryKey:Uh.projectActivities(s.id),type:"active"})])},onError:a=>{console.error("Failed to update project:",a),r(a?.message||"Failed to update project")}})},rle=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async a=>await J7(a),onSuccess:async()=>{t("Project deleted successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:a=>{console.error("Failed to delete project:",a),r(a?.message||"Failed to delete project")}})},nle=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async({id:a,archived:s})=>await Q7(a,{archived:s}),onSuccess:async(a,s)=>{t(s.archived?"Project archived successfully":"Project restored successfully"),await e.refetchQueries({queryKey:["projects"],type:"active"}),e.invalidateQueries({queryKey:Uh.projectActivities(s.id)})},onError:a=>{console.error("Failed to archive/restore project:",a),r(a?.message||"Failed to update project")}})},ale=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async a=>{await Promise.all(a.map(s=>J7(s)))},onSuccess:async(a,s)=>{t(`${s.length} project(s) deleted successfully`),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:a=>{console.error("Failed to bulk delete projects:",a),r(a?.message||"Failed to delete projects")}})},sle=({instance:e,onView:t})=>{const{data:r=[]}=_g(e.id),a=e.templateSnapshot?.sections?.reduce((o,l)=>o+(l.steps?.length||0),0)||0,s=r.length,i=a>0?Math.round(s/a*100):0;return n.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:n.jsx(ci,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-bold text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("p",{className:"text-[10px] text-slate-400 font-medium",children:["v",e.templateSnapshot.version]})]})]}),i===100&&n.jsx(_i,{className:"w-5 h-5 text-green-500"})]}),n.jsxs("div",{className:"mb-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[s," / ",a," steps completed"]}),n.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[i,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full transition-all ${i===100?"bg-green-500":i>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${i}%`}})})]}),n.jsxs("button",{onClick:()=>t(e.id),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Playbook",n.jsx(ps,{className:"w-3 h-3"})]})]})},ile=({onNavigate:e,onCreateProject:t,currentUser:r})=>{const{showSuccess:a,showError:s}=Cn(),i=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:o=[],isLoading:l}=Yoe(i),{data:c=[]}=Qoe(),{data:d=[]}=Joe(),{data:u=[]}=Zoe(i),[f,p]=D.useState(null),{data:m=[],isLoading:b}=ele(f?.id||null),[v,g]=D.useState(null),[w,y]=D.useState(!1),{data:j=[],isLoading:N}=xy({projectId:f?.id}),[S,E]=D.useState("active"),A=l,P=tle(),I=rle(),B=nle(),T=ale(),_=Le=>{const Re=u.filter(ut=>ut.projectId===Le);if(Re.length===0)return 0;const Je=Re.filter(ut=>ut.status==="Done").length;return Math.round(Je/Re.length*100)},[R,z]=D.useState(null),[H,Y]=D.useState(null),[J,re]=D.useState(null),[X,te]=D.useState(null),[W,O]=D.useState([]),[q,G]=D.useState(!1),[U,K]=D.useState(!1),[ae,me]=D.useState(!1),[se,le]=D.useState(!1),[Me,ue]=D.useState(!1),[Ue,Ae]=D.useState(""),[ie,Z]=D.useState({title:"",description:"",companyId:"",status:"Planning",engagement:"",startDate:"",endDate:""}),[Ee,we]=D.useState(null),Oe=async Le=>{if(o.find(Je=>Je.id===Le)){Y(Le);try{await B.mutateAsync({id:Le,archived:S==="active"}),re(null),f?.id===Le&&p(null)}finally{Y(null)}}},de=async Le=>{z(Le);try{await I.mutateAsync(Le),te(null),f?.id===Le&&p(null)}finally{z(null)}},ce=()=>{W.length===je.length?O([]):O(je.map(Le=>Le.id))},Ce=async()=>{G(!0);try{const Le=[...W];await T.mutateAsync(Le),O([]),K(!1),f&&Le.includes(f.id)&&p(null),a(`Successfully deleted ${Le.length} project${Le.length>1?"s":""}`)}catch(Le){s(Le.message||"Failed to delete projects")}finally{G(!1)}},Xe=Le=>{if(!Le)return"";try{const Re=new Date(Le);if(isNaN(Re.getTime()))return"";const Je=Re.getFullYear(),ut=String(Re.getMonth()+1).padStart(2,"0"),vt=String(Re.getDate()).padStart(2,"0");return`${Je}-${ut}-${vt}`}catch{return""}},xe=Le=>{p(Le),Z({title:Le.title,description:Le.description||"",companyId:Le.companyId||"",status:Le.status,engagement:Le.engagement||"",startDate:Xe(Le.startDate),endDate:Xe(Le.endDate)}),me(!1)},fe=async()=>{if(f){if(!ie.title.trim()){s("Project title is required");return}le(!0);try{const Le={title:ie.title.trim(),description:ie.description.trim(),status:ie.status,companyId:ie.companyId&&ie.companyId.trim()!==""?ie.companyId:null};await P.mutateAsync({id:f.id,data:Le});const Re={...f,...Le};p(Re),me(!1)}catch{}finally{le(!1)}}},Se=async Le=>{if(f){le(!0);try{await P.mutateAsync({id:f.id,data:{status:Le}});const Re={...f,status:Le};p(Re),Z(Je=>({...Je,status:Le}))}catch{}finally{le(!1)}}},qe=async(Le,Re)=>{we(Le);try{const Je=Re==="Done"?"Todo":"Done";await db(Le,{status:Je}),setTasks(At=>At.map(Bt=>Bt.id===Le?{...Bt,status:Je}:Bt));const ut=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,vt=await apiGetTasks(ut);setTasks(vt.data||[]),a(Je==="Done"?"Task marked as done":"Task marked as todo")}catch(Je){s(Je.message||"Failed to update task status")}finally{we(null)}},je=D.useMemo(()=>o.filter(Le=>{const Re=Le.archived===!0;return S==="archived"?Re:!Re}),[o,S]);return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-24 relative",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Project Workspace"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsx("button",{onClick:()=>{E("active"),O([])},className:`text-sm font-bold pb-1 transition-all ${S==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),n.jsxs("button",{onClick:()=>{E("archived"),O([])},className:`text-sm font-bold pb-1 transition-all ${S==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archived (",o.filter(Le=>Le.archived).length,")"]})]})]}),n.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100",children:[n.jsx(ln,{className:"w-4 h-4"})," Create Project"]})]}),!A&&je.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:je.length>0&&W.length===je.length,onChange:ce}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Projects"})]}),A?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(gt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):je.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white border border-dashed border-slate-300 rounded-[40px] text-center",children:[n.jsx(i1,{className:"w-16 h-16 text-slate-200 mb-6"}),n.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:["No ",S," projects found"]}),n.jsx("p",{className:"text-slate-500 text-sm max-w-xs",children:"Start a new logistics transformation project to see milestones and tracking."})]}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:je.map(Le=>{const Re=c.find(vt=>vt.id===Le.companyId),Je=_(Le.id),ut=W.includes(Le.id);return n.jsxs("div",{onClick:vt=>{!Le.archived&&!ut&&(vt.stopPropagation(),xe(Le))},className:`bg-white rounded-3xl border ${ut?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} overflow-hidden shadow-sm transition-all relative ${Le.archived?"opacity-70 grayscale-[0.5]":"hover:border-indigo-300 hover:shadow-md cursor-pointer active:scale-[0.98] group"}`,children:[n.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-2",children:[n.jsx("button",{onClick:vt=>{vt.stopPropagation(),re(Le)},className:"p-2 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-xl transition-all",title:S==="active"?"Archive":"Restore",children:S==="active"?n.jsx(Cu,{className:"w-4 h-4"}):n.jsx(l1,{className:"w-4 h-4"})}),n.jsx("button",{onClick:vt=>{vt.stopPropagation(),te(Le)},className:"p-2 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})}),n.jsx("div",{onClick:vt=>vt.stopPropagation(),className:`p-1.5 rounded-xl transition-all ${ut?"bg-indigo-50":"bg-slate-50 hover:bg-indigo-50/50"}`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:ut,onChange:()=>O(vt=>ut?vt.filter(At=>At!==Le.id):[...vt,Le.id])})})]}),n.jsxs("div",{className:"p-7",children:[n.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 mb-6 group-hover:scale-110 transition-transform",children:n.jsx(Yd,{className:"w-6 h-6"})}),n.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors truncate",children:Le.title}),n.jsx("p",{className:"text-sm font-medium text-slate-400 mb-8 truncate",children:Re?.name||"Standalone Project"}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[n.jsx("span",{className:"text-slate-400",children:"Implementation Progress"}),n.jsxs("span",{className:"text-indigo-600",children:[Je,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:n.jsx("div",{className:"bg-indigo-600 h-full transition-all duration-700",style:{width:`${Je}%`}})})]})]}),n.jsxs("div",{className:"bg-slate-50/50 px-7 py-4 border-t border-slate-100 flex justify-between items-center",children:[n.jsxs("span",{className:"text-[10px] font-black uppercase text-slate-600 tracking-wider flex items-center gap-2",children:[n.jsx(is,{className:"w-3.5 h-3.5"})," ",Le.status]}),!Le.archived&&n.jsx(wa,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Le.id)})}),J&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:J.archived?n.jsx(l1,{className:"w-6 h-6"}):n.jsx(Cu,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:J.archived?"Restore Project?":"Archive Project?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:J.archived?"This will restore the project to active status.":"This will move the project to archive. You can restore it later."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:J.title}),n.jsx("p",{className:"text-xs text-slate-500",children:c.find(Le=>Le.id===J.companyId)?.name||"Standalone Project"})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>re(null),disabled:H===J.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>Oe(J.id),disabled:H===J.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:H===J.id?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),J.archived?"Restoring...":"Archiving..."]}):J.archived?"Restore Project":"Archive Project"})]})]})}),X&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Project?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The project and all its tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:X.title}),n.jsx("p",{className:"text-xs text-slate-500",children:c.find(Le=>Le.id===X.companyId)?.name||"Standalone Project"})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>te(null),disabled:R===X.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>de(X.id),disabled:R===X.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R===X.id?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Project"})]})]})}),W.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:W.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Le=>{Le.stopPropagation(),K(!0)},disabled:q,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[q?n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>O([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),U&&W.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",W.length," Project",W.length>1?"s":"","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The projects and all their tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Le=>W.includes(Le.id)).slice(0,5).map(Le=>{const Re=c.find(Je=>Je.id===Le.companyId);return n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(Yd,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Le.title}),n.jsx("p",{className:"text-[10px] text-slate-500",children:Re?.name||"Standalone Project"})]})]},Le.id)}),W.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",W.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>K(!1),disabled:q,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Ce,disabled:q,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:q?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${W.length} Project${W.length>1?"s":""}`})]})]})}),f&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{!ae&&!se&&(p(null),me(!1))}}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-3xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[n.jsx("button",{onClick:()=>{!ae&&!se&&(p(null),me(!1))},className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",disabled:se,children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6 pr-12",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[24px] flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(Yd,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[ae?n.jsxs("div",{children:[n.jsx("input",{type:"text",value:ie.title,onChange:Le=>Z(Re=>({...Re,title:Le.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Project name",required:!0}),n.jsxs("p",{className:"text-[9px] text-slate-400 mt-1 px-1",children:[n.jsx("span",{className:"text-red-500",children:"*"})," Required field"]})]}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:f.title}),n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${f.status==="Planning"?"bg-blue-50 text-blue-600 border-blue-200":f.status==="Active"?"bg-emerald-50 text-emerald-600 border-emerald-200":f.status==="On Hold"?"bg-amber-50 text-amber-600 border-amber-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:f.status}),n.jsx("span",{className:"text-xs text-slate-400",children:c.find(Le=>Le.id===f.companyId)?.name||"Standalone Project"})]})]})]}),n.jsx("div",{className:"flex gap-3",children:ae?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{me(!1),Z({title:f.title,description:f.description||"",companyId:f.companyId||"",status:f.status,engagement:f.engagement||"",startDate:Xe(f.startDate),endDate:Xe(f.endDate)})},disabled:se,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:fe,disabled:se||!ie.title.trim()||!ie.engagement.trim()||!ie.startDate.trim()||!ie.endDate.trim(),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:se?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>me(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Do,{className:"w-4 h-4"}),"Edit Project"]})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ms,{className:"w-4 h-4 text-indigo-500"})," Project Details"]}),n.jsx("div",{className:"space-y-4",children:ae?n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Engagement ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:ie.engagement,onChange:Le=>Z(Re=>({...Re,engagement:Le.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"e.g., Consulting, Implementation, Support",required:!0})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Start Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:ie.startDate,onChange:Le=>{if(Z(Re=>({...Re,startDate:Le.target.value})),Le.target.value&&ie.endDate){const Re=new Date(Le.target.value),Je=new Date(ie.endDate);!isNaN(Re.getTime())&&!isNaN(Je.getTime())&&Re>=Je}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["End Date ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"date",value:ie.endDate,onChange:Le=>{if(Z(Re=>({...Re,endDate:Le.target.value})),ie.startDate&&Le.target.value){const Re=new Date(ie.startDate),Je=new Date(Le.target.value);!isNaN(Re.getTime())&&!isNaN(Je.getTime())&&Re>=Je}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),n.jsx("textarea",{value:ie.description,onChange:Le=>Z(Re=>({...Re,description:Le.target.value})),rows:4,className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Project description..."})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company"}),n.jsxs("select",{value:ie.companyId,onChange:Le=>Z(Re=>({...Re,companyId:Le.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-100",children:[n.jsx("option",{value:"",children:"Standalone Project"}),c.map(Le=>n.jsx("option",{value:Le.id,children:Le.name},Le.id))]})]})]}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Name"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.title})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Engagement"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.engagement||""})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Start Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.startDate?new Date(f.startDate).toLocaleDateString():""})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"End Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.endDate?new Date(f.endDate).toLocaleDateString():""})]})]}),f.description&&n.jsx("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-2xl",children:n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:f.description})}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Company"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.find(Le=>Le.id===f.companyId)?.name||"Standalone Project"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Progress"}),n.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[_(f.id),"%"]})]})]}),f.noteImage&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Qn,{className:"w-4 h-4 text-indigo-500"})," Attached File"]}),f.noteImageMimeType?.includes("pdf")?n.jsx("div",{className:"p-5 bg-white border-2 border-slate-200 rounded-2xl hover:border-indigo-300 transition-all group",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center text-red-600 shrink-0",children:n.jsx(Qn,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:f.noteImageName||"Document.pdf"}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"PDF Document"})]}),n.jsxs("button",{onClick:()=>{const Le=window.open();Le&&Le.document.write(`
                                        <html>
                                          <head>
                                            <title>${f.noteImageName||"Document.pdf"}</title>
                                            <style>
                                              body { margin: 0; padding: 0; }
                                              embed { width: 100vw; height: 100vh; }
                                            </style>
                                          </head>
                                          <body>
                                            <embed src="${f.noteImage}" type="application/pdf" width="100%" height="100%" />
                                          </body>
                                        </html>
                                      `)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[n.jsx(Xd,{className:"w-4 h-4"}),"View PDF"]})]})}):n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:f.noteImage,alt:f.noteImageName||"Attachment",className:"w-full max-h-80 object-contain rounded-2xl border-2 border-slate-200 cursor-pointer hover:border-indigo-300 transition-all",onClick:()=>{Ae(f.noteImage||""),ue(!0)}}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-2xl transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:n.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg",children:n.jsx(Xd,{className:"w-5 h-5 text-indigo-600"})})})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),n.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[n.jsx(ln,{className:"w-3 h-3"})," Attach"]})]}),N?n.jsx("div",{className:"flex items-center justify-center py-8",children:n.jsx(gt,{className:"w-5 h-5 animate-spin text-indigo-600"})}):j.length>0?n.jsx("div",{className:"space-y-3",children:j.map(Le=>n.jsx(sle,{instance:Le,onView:Re=>g(Re)},Le.id))}):n.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[n.jsx(ci,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this project yet."})]})]})]})})]}),!ae&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(is,{className:"w-4 h-4 text-indigo-500"})," Change Status"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Planning","Active","On Hold","Completed"].map(Le=>n.jsxs("button",{onClick:()=>Se(Le),disabled:se||f.status===Le,className:`flex items-center gap-2 p-4 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all ${f.status===Le?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[f.status===Le?n.jsx(Nn,{className:"w-4 h-4"}):n.jsx(Pu,{className:"w-4 h-4"}),Le]},Le))})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Db,{className:"w-4 h-4 text-indigo-500"})," Related Tasks"]}),n.jsxs("button",{onClick:()=>{sessionStorage.setItem("selectedProjectId",f.id),e("tasks"),p(null)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View All Tasks",n.jsx(wa,{className:"w-3 h-3"})]})]}),(()=>{const Le=u.filter(Re=>Re.projectId===f.id);return Le.length===0?n.jsxs("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center",children:[n.jsx(i1,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"No tasks found for this project"})]}):n.jsx("div",{className:"space-y-2",children:Le.map(Re=>{const Je=d.find(vt=>vt.id===Re.assigneeId),ut=Ee===Re.id;return n.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 hover:shadow-sm transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("button",{onClick:vt=>{vt.stopPropagation(),ut||qe(Re.id,Re.status)},disabled:ut,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:ut?n.jsx(gt,{className:"w-4 h-4 text-indigo-500 animate-spin"}):Re.status==="Done"?n.jsx(Nn,{className:"w-4 h-4 text-emerald-500 hover:text-emerald-600 transition-colors"}):n.jsx(Pu,{className:"w-4 h-4 text-slate-300 hover:text-indigo-500 transition-colors cursor-pointer"})}),n.jsx("p",{className:`text-sm font-bold ${Re.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Re.title})]}),Re.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 ml-6",children:Re.description}),n.jsxs("div",{className:"flex items-center gap-3 mt-2 ml-6",children:[n.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase ${Re.priority==="High"?"bg-red-50 text-red-600":Re.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Re.priority}),n.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase",children:Re.status}),Re.dueDate&&n.jsxs("span",{className:"text-[9px] text-slate-400 font-bold flex items-center gap-1",children:[n.jsx(Jn,{className:"w-3 h-3"}),Re.dueDate]})]})]}),Je&&n.jsx("div",{className:"flex items-center gap-2",children:n.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600 text-xs font-black",children:Je.name.charAt(0)})})]})},Re.id)})})})()]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),b?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(gt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):m.length===0?n.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[n.jsx(rs,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this project"})]}):n.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:m.map((Le,Re)=>{const Je=new Date(Le.createdAt),vt=new Date().getTime()-Je.getTime(),At=Math.floor(vt/(1e3*60*60*24));let Bt="";At===0?Bt="Today":At===1?Bt="Yesterday":At<7?Bt=`${At} days ago`:At<30?Bt=`${Math.floor(At/7)} week${Math.floor(At/7)>1?"s":""} ago`:Bt=`${Math.floor(At/30)} month${Math.floor(At/30)>1?"s":""} ago`;const Yt=Le.activityType==="email_linked",We=Yt?"border-indigo-600":"border-slate-200",Ct=Yt?"bg-indigo-600":"bg-slate-300",br=Yt?"text-indigo-600":"text-slate-400";return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${We} shadow-xl flex items-center justify-center`,children:Yt?n.jsx(rs,{className:"w-4 h-4 text-indigo-600"}):n.jsx("div",{className:`w-2 h-2 rounded-full ${Ct}`})}),n.jsxs("p",{className:`text-[10px] font-black ${br} uppercase mb-1 tracking-widest`,children:[Yt?"Email Linked":Le.activityType||"Activity","  ",Bt]}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:Le.title||"Email Activity"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:Le.description||Le.title}),Le.emailId&&n.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${Le.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(ps,{className:"w-3 h-3"})," View Email"]})]},Le.id||Re)})})]})]}),n.jsx("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:n.jsxs("button",{onClick:()=>{!ae&&!se&&(p(null),me(!1))},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",disabled:se,children:[n.jsx(Nn,{className:"w-5 h-5"})," Close"]})})]})]}),Me&&n.jsxs("div",{className:"fixed inset-0 z-[150] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>ue(!1)}),n.jsxs("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:[n.jsx("button",{onClick:()=>ue(!1),className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-10 backdrop-blur-sm",children:n.jsx(tr,{className:"w-6 h-6"})}),n.jsx("div",{className:"relative max-w-7xl max-h-[90vh] animate-in zoom-in-95 duration-300",children:n.jsx("img",{src:Ue,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl",onClick:Le=>Le.stopPropagation()})})]})]}),n.jsx(p3,{isOpen:w,projectId:f?.id,onClose:()=>y(!1),onSuccess:()=>{y(!1)}}),v&&n.jsx(gy,{instanceId:v,isOpen:!!v,onClose:()=>g(null)})]})};var Zv={exports:{}};var ole=Zv.exports,WI;function lle(){return WI||(WI=1,(function(e,t){(function(a,s){e.exports=s()})(typeof self<"u"?self:ole,function(){return(function(r){var a={};function s(i){if(a[i])return a[i].exports;var o=a[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=a,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=109)})([(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(17),o=s(18),l=s(19),c=s(45),d=s(46),u=s(47),f=s(48),p=s(49),m=s(12),b=s(32),v=s(33),g=s(31),w=s(1),y={Scope:w.Scope,create:w.create,find:w.find,query:w.query,register:w.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:f.default,Scroll:c.default,Block:u.default,Inline:d.default,Text:p.default,Attributor:{Attribute:m.default,Class:b.default,Style:v.default,Store:g.default}};a.default=y}),(function(r,a,s){var i=this&&this.__extends||(function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(w,y){w.__proto__=y}||function(w,y){for(var j in y)y.hasOwnProperty(j)&&(w[j]=y[j])};return function(w,y){g(w,y);function j(){this.constructor=w}w.prototype=y===null?Object.create(y):(j.prototype=y.prototype,new j)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=(function(g){i(w,g);function w(y){var j=this;return y="[Parchment] "+y,j=g.call(this,y)||this,j.message=y,j.name=j.constructor.name,j}return w})(Error);a.ParchmentError=o;var l={},c={},d={},u={};a.DATA_KEY="__blot";var f;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(f=a.Scope||(a.Scope={}));function p(g,w){var y=b(g);if(y==null)throw new o("Unable to create "+g+" blot");var j=y,N=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:j.create(w);return new j(N,w)}a.create=p;function m(g,w){return w===void 0&&(w=!1),g==null?null:g[a.DATA_KEY]!=null?g[a.DATA_KEY].blot:w?m(g.parentNode,w):null}a.find=m;function b(g,w){w===void 0&&(w=f.ANY);var y;if(typeof g=="string")y=u[g]||l[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)y=u.text;else if(typeof g=="number")g&f.LEVEL&f.BLOCK?y=u.block:g&f.LEVEL&f.INLINE&&(y=u.inline);else if(g instanceof HTMLElement){var j=(g.getAttribute("class")||"").split(/\s+/);for(var N in j)if(y=c[j[N]],y)break;y=y||d[g.tagName]}return y==null?null:w&f.LEVEL&y.scope&&w&f.TYPE&y.scope?y:null}a.query=b;function v(){for(var g=[],w=0;w<arguments.length;w++)g[w]=arguments[w];if(g.length>1)return g.map(function(N){return v(N)});var y=g[0];if(typeof y.blotName!="string"&&typeof y.attrName!="string")throw new o("Invalid definition");if(y.blotName==="abstract")throw new o("Cannot register abstract class");if(u[y.blotName||y.attrName]=y,typeof y.keyName=="string")l[y.keyName]=y;else if(y.className!=null&&(c[y.className]=y),y.tagName!=null){Array.isArray(y.tagName)?y.tagName=y.tagName.map(function(N){return N.toUpperCase()}):y.tagName=y.tagName.toUpperCase();var j=Array.isArray(y.tagName)?y.tagName:[y.tagName];j.forEach(function(N){(d[N]==null||y.className==null)&&(d[N]=y)})}return y}a.register=v}),(function(r,a,s){var i=s(51),o=s(11),l=s(3),c=s(20),d="\0",u=function(f){Array.isArray(f)?this.ops=f:f!=null&&Array.isArray(f.ops)?this.ops=f.ops:this.ops=[]};u.prototype.insert=function(f,p){var m={};return f.length===0?this:(m.insert=f,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m))},u.prototype.delete=function(f){return f<=0?this:this.push({delete:f})},u.prototype.retain=function(f,p){if(f<=0)return this;var m={retain:f};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(m.attributes=p),this.push(m)},u.prototype.push=function(f){var p=this.ops.length,m=this.ops[p-1];if(f=l(!0,{},f),typeof m=="object"){if(typeof f.delete=="number"&&typeof m.delete=="number")return this.ops[p-1]={delete:m.delete+f.delete},this;if(typeof m.delete=="number"&&f.insert!=null&&(p-=1,m=this.ops[p-1],typeof m!="object"))return this.ops.unshift(f),this;if(o(f.attributes,m.attributes)){if(typeof f.insert=="string"&&typeof m.insert=="string")return this.ops[p-1]={insert:m.insert+f.insert},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this;if(typeof f.retain=="number"&&typeof m.retain=="number")return this.ops[p-1]={retain:m.retain+f.retain},typeof f.attributes=="object"&&(this.ops[p-1].attributes=f.attributes),this}}return p===this.ops.length?this.ops.push(f):this.ops.splice(p,0,f),this},u.prototype.chop=function(){var f=this.ops[this.ops.length-1];return f&&f.retain&&!f.attributes&&this.ops.pop(),this},u.prototype.filter=function(f){return this.ops.filter(f)},u.prototype.forEach=function(f){this.ops.forEach(f)},u.prototype.map=function(f){return this.ops.map(f)},u.prototype.partition=function(f){var p=[],m=[];return this.forEach(function(b){var v=f(b)?p:m;v.push(b)}),[p,m]},u.prototype.reduce=function(f,p){return this.ops.reduce(f,p)},u.prototype.changeLength=function(){return this.reduce(function(f,p){return p.insert?f+c.length(p):p.delete?f-p.delete:f},0)},u.prototype.length=function(){return this.reduce(function(f,p){return f+c.length(p)},0)},u.prototype.slice=function(f,p){f=f||0,typeof p!="number"&&(p=1/0);for(var m=[],b=c.iterator(this.ops),v=0;v<p&&b.hasNext();){var g;v<f?g=b.next(f-v):(g=b.next(p-v),m.push(g)),v+=c.length(g)}return new u(m)},u.prototype.compose=function(f){var p=c.iterator(this.ops),m=c.iterator(f.ops),b=[],v=m.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var g=v.retain;p.peekType()==="insert"&&p.peekLength()<=g;)g-=p.peekLength(),b.push(p.next());v.retain-g>0&&m.next(v.retain-g)}for(var w=new u(b);p.hasNext()||m.hasNext();)if(m.peekType()==="insert")w.push(m.next());else if(p.peekType()==="delete")w.push(p.next());else{var y=Math.min(p.peekLength(),m.peekLength()),j=p.next(y),N=m.next(y);if(typeof N.retain=="number"){var S={};typeof j.retain=="number"?S.retain=y:S.insert=j.insert;var E=c.attributes.compose(j.attributes,N.attributes,typeof j.retain=="number");if(E&&(S.attributes=E),w.push(S),!m.hasNext()&&o(w.ops[w.ops.length-1],S)){var A=new u(p.rest());return w.concat(A).chop()}}else typeof N.delete=="number"&&typeof j.retain=="number"&&w.push(N)}return w.chop()},u.prototype.concat=function(f){var p=new u(this.ops.slice());return f.ops.length>0&&(p.push(f.ops[0]),p.ops=p.ops.concat(f.ops.slice(1))),p},u.prototype.diff=function(f,p){if(this.ops===f.ops)return new u;var m=[this,f].map(function(y){return y.map(function(j){if(j.insert!=null)return typeof j.insert=="string"?j.insert:d;var N=y===f?"on":"with";throw new Error("diff() called "+N+" non-document")}).join("")}),b=new u,v=i(m[0],m[1],p),g=c.iterator(this.ops),w=c.iterator(f.ops);return v.forEach(function(y){for(var j=y[1].length;j>0;){var N=0;switch(y[0]){case i.INSERT:N=Math.min(w.peekLength(),j),b.push(w.next(N));break;case i.DELETE:N=Math.min(j,g.peekLength()),g.next(N),b.delete(N);break;case i.EQUAL:N=Math.min(g.peekLength(),w.peekLength(),j);var S=g.next(N),E=w.next(N);o(S.insert,E.insert)?b.retain(N,c.attributes.diff(S.attributes,E.attributes)):b.push(E).delete(N);break}j-=N}}),b.chop()},u.prototype.eachLine=function(f,p){p=p||`
`;for(var m=c.iterator(this.ops),b=new u,v=0;m.hasNext();){if(m.peekType()!=="insert")return;var g=m.peek(),w=c.length(g)-m.peekLength(),y=typeof g.insert=="string"?g.insert.indexOf(p,w)-w:-1;if(y<0)b.push(m.next());else if(y>0)b.push(m.next(y));else{if(f(b,m.next(1).attributes||{},v)===!1)return;v+=1,b=new u}}b.length()>0&&f(b,{},v)},u.prototype.transform=function(f,p){if(p=!!p,typeof f=="number")return this.transformPosition(f,p);for(var m=c.iterator(this.ops),b=c.iterator(f.ops),v=new u;m.hasNext()||b.hasNext();)if(m.peekType()==="insert"&&(p||b.peekType()!=="insert"))v.retain(c.length(m.next()));else if(b.peekType()==="insert")v.push(b.next());else{var g=Math.min(m.peekLength(),b.peekLength()),w=m.next(g),y=b.next(g);if(w.delete)continue;y.delete?v.push(y):v.retain(g,c.attributes.transform(w.attributes,y.attributes,p))}return v.chop()},u.prototype.transformPosition=function(f,p){p=!!p;for(var m=c.iterator(this.ops),b=0;m.hasNext()&&b<=f;){var v=m.peekLength(),g=m.peekType();if(m.next(),g==="delete"){f-=Math.min(v,f-b);continue}else g==="insert"&&(b<f||!p)&&(f+=v);b+=v}return f},r.exports=u}),(function(r,a){var s=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(m){return typeof Array.isArray=="function"?Array.isArray(m):i.call(m)==="[object Array]"},d=function(m){if(!m||i.call(m)!=="[object Object]")return!1;var b=s.call(m,"constructor"),v=m.constructor&&m.constructor.prototype&&s.call(m.constructor.prototype,"isPrototypeOf");if(m.constructor&&!b&&!v)return!1;var g;for(g in m);return typeof g>"u"||s.call(m,g)},u=function(m,b){o&&b.name==="__proto__"?o(m,b.name,{enumerable:!0,configurable:!0,value:b.newValue,writable:!0}):m[b.name]=b.newValue},f=function(m,b){if(b==="__proto__")if(s.call(m,b)){if(l)return l(m,b).value}else return;return m[b]};r.exports=function p(){var m,b,v,g,w,y,j=arguments[0],N=1,S=arguments.length,E=!1;for(typeof j=="boolean"&&(E=j,j=arguments[1]||{},N=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});N<S;++N)if(m=arguments[N],m!=null)for(b in m)v=f(j,b),g=f(m,b),j!==g&&(E&&g&&(d(g)||(w=c(g)))?(w?(w=!1,y=v&&c(v)?v:[]):y=v&&d(v)?v:{},u(j,{name:b,newValue:p(E,y,g)})):typeof g<"u"&&u(j,{name:b,newValue:g}));return j}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BlockEmbed=a.bubbleFormats=void 0;var i=(function(){function T(_,R){for(var z=0;z<R.length;z++){var H=R[z];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(_,H.key,H)}}return function(_,R,z){return R&&T(_.prototype,R),z&&T(_,z),_}})(),o=function T(_,R,z){_===null&&(_=Function.prototype);var H=Object.getOwnPropertyDescriptor(_,R);if(H===void 0){var Y=Object.getPrototypeOf(_);return Y===null?void 0:T(Y,R,z)}else{if("value"in H)return H.value;var J=H.get;return J===void 0?void 0:J.call(z)}},l=s(3),c=j(l),d=s(2),u=j(d),f=s(0),p=j(f),m=s(16),b=j(m),v=s(6),g=j(v),w=s(7),y=j(w);function j(T){return T&&T.__esModule?T:{default:T}}function N(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function S(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function E(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var A=1,P=(function(T){E(_,T);function _(){return N(this,_),S(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return i(_,[{key:"attach",value:function(){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new u.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(z,H){var Y=p.default.query(z,p.default.Scope.BLOCK_ATTRIBUTE);Y!=null&&this.attributes.attribute(Y,H)}},{key:"formatAt",value:function(z,H,Y,J){this.format(Y,J)}},{key:"insertAt",value:function(z,H,Y){if(typeof H=="string"&&H.endsWith(`
`)){var J=p.default.create(I.blotName);this.parent.insertBefore(J,z===0?this:this.next),J.insertAt(0,H.slice(0,-1))}else o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,z,H,Y)}}]),_})(p.default.Embed);P.scope=p.default.Scope.BLOCK_BLOT;var I=(function(T){E(_,T);function _(R){N(this,_);var z=S(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,R));return z.cache={},z}return i(_,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function(z,H){return H.length()===0?z:z.insert(H.value(),B(H))},new u.default).insert(`
`,B(this))),this.cache.delta}},{key:"deleteAt",value:function(z,H){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"deleteAt",this).call(this,z,H),this.cache={}}},{key:"formatAt",value:function(z,H,Y,J){H<=0||(p.default.query(Y,p.default.Scope.BLOCK)?z+H===this.length()&&this.format(Y,J):o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"formatAt",this).call(this,z,Math.min(H,this.length()-z-1),Y,J),this.cache={})}},{key:"insertAt",value:function(z,H,Y){if(Y!=null)return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,z,H,Y);if(H.length!==0){var J=H.split(`
`),re=J.shift();re.length>0&&(z<this.length()-1||this.children.tail==null?o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertAt",this).call(this,Math.min(z,this.length()-1),re):this.children.tail.insertAt(this.children.tail.length(),re),this.cache={});var X=this;J.reduce(function(te,W){return X=X.split(te,!0),X.insertAt(0,W),W.length},z+re.length)}}},{key:"insertBefore",value:function(z,H){var Y=this.children.head;o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"insertBefore",this).call(this,z,H),Y instanceof b.default&&Y.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(z,H){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"moveChildren",this).call(this,z,H),this.cache={}}},{key:"optimize",value:function(z){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"optimize",this).call(this,z),this.cache={}}},{key:"path",value:function(z){return o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"path",this).call(this,z,!0)}},{key:"removeChild",value:function(z){o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"removeChild",this).call(this,z),this.cache={}}},{key:"split",value:function(z){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(H&&(z===0||z>=this.length()-A)){var Y=this.clone();return z===0?(this.parent.insertBefore(Y,this),this):(this.parent.insertBefore(Y,this.next),Y)}else{var J=o(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"split",this).call(this,z,H);return this.cache={},J}}}]),_})(p.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[g.default,p.default.Embed,y.default];function B(T){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return T==null||(typeof T.formats=="function"&&(_=(0,c.default)(_,T.formats())),T.parent==null||T.parent.blotName=="scroll"||T.parent.statics.scope!==T.statics.scope)?_:B(T.parent,_)}a.bubbleFormats=B,a.BlockEmbed=P,a.default=I}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.overload=a.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=(function(){function X(te,W){var O=[],q=!0,G=!1,U=void 0;try{for(var K=te[Symbol.iterator](),ae;!(q=(ae=K.next()).done)&&(O.push(ae.value),!(W&&O.length===W));q=!0);}catch(me){G=!0,U=me}finally{try{!q&&K.return&&K.return()}finally{if(G)throw U}}return O}return function(te,W){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return X(te,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function X(te,W){for(var O=0;O<W.length;O++){var q=W[O];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(te,q.key,q)}}return function(te,W,O){return W&&X(te.prototype,W),O&&X(te,O),te}})();s(50);var c=s(2),d=B(c),u=s(14),f=B(u),p=s(8),m=B(p),b=s(9),v=B(b),g=s(0),w=B(g),y=s(15),j=B(y),N=s(3),S=B(N),E=s(10),A=B(E),P=s(34),I=B(P);function B(X){return X&&X.__esModule?X:{default:X}}function T(X,te,W){return te in X?Object.defineProperty(X,te,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[te]=W,X}function _(X,te){if(!(X instanceof te))throw new TypeError("Cannot call a class as a function")}var R=(0,A.default)("quill"),z=(function(){l(X,null,[{key:"debug",value:function(W){W===!0&&(W="log"),A.default.level(W)}},{key:"find",value:function(W){return W.__quill||w.default.find(W)}},{key:"import",value:function(W){return this.imports[W]==null&&R.error("Cannot import "+W+". Are you sure it was registered?"),this.imports[W]}},{key:"register",value:function(W,O){var q=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof W!="string"){var U=W.attrName||W.blotName;typeof U=="string"?this.register("formats/"+U,W,O):Object.keys(W).forEach(function(K){q.register(K,W[K],O)})}else this.imports[W]!=null&&!G&&R.warn("Overwriting "+W+" with",O),this.imports[W]=O,(W.startsWith("blots/")||W.startsWith("formats/"))&&O.blotName!=="abstract"?w.default.register(O):W.startsWith("modules")&&typeof O.register=="function"&&O.register()}}]);function X(te){var W=this,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(_(this,X),this.options=H(te,O),this.container=this.options.container,this.container==null)return R.error("Invalid Quill container",te);this.options.debug&&X.debug(this.options.debug);var q=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new m.default,this.scroll=w.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new j.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(m.default.events.EDITOR_CHANGE,function(U){U===m.default.events.TEXT_CHANGE&&W.root.classList.toggle("ql-blank",W.editor.isBlank())}),this.emitter.on(m.default.events.SCROLL_UPDATE,function(U,K){var ae=W.selection.lastRange,me=ae&&ae.length===0?ae.index:void 0;Y.call(W,function(){return W.editor.update(null,K,me)},U)});var G=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+q+"<p><br></p></div>");this.setContents(G),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(X,[{key:"addContainer",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof W=="string"){var q=W;W=document.createElement("div"),W.classList.add(q)}return this.container.insertBefore(W,O),W}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(W,O,q){var G=this,U=J(W,O,q),K=o(U,4);return W=K[0],O=K[1],q=K[3],Y.call(this,function(){return G.editor.deleteText(W,O)},q,W,-1*O)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(W),this.container.classList.toggle("ql-disabled",!W)}},{key:"focus",value:function(){var W=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=W,this.scrollIntoView()}},{key:"format",value:function(W,O){var q=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;return Y.call(this,function(){var U=q.getSelection(!0),K=new d.default;if(U==null)return K;if(w.default.query(W,w.default.Scope.BLOCK))K=q.editor.formatLine(U.index,U.length,T({},W,O));else{if(U.length===0)return q.selection.format(W,O),K;K=q.editor.formatText(U.index,U.length,T({},W,O))}return q.setSelection(U,m.default.sources.SILENT),K},G)}},{key:"formatLine",value:function(W,O,q,G,U){var K=this,ae=void 0,me=J(W,O,q,G,U),se=o(me,4);return W=se[0],O=se[1],ae=se[2],U=se[3],Y.call(this,function(){return K.editor.formatLine(W,O,ae)},U,W,0)}},{key:"formatText",value:function(W,O,q,G,U){var K=this,ae=void 0,me=J(W,O,q,G,U),se=o(me,4);return W=se[0],O=se[1],ae=se[2],U=se[3],Y.call(this,function(){return K.editor.formatText(W,O,ae)},U,W,0)}},{key:"getBounds",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=void 0;typeof W=="number"?q=this.selection.getBounds(W,O):q=this.selection.getBounds(W.index,W.length);var G=this.container.getBoundingClientRect();return{bottom:q.bottom-G.top,height:q.height,left:q.left-G.left,right:q.right-G.left,top:q.top-G.top,width:q.width}}},{key:"getContents",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,q=J(W,O),G=o(q,2);return W=G[0],O=G[1],this.editor.getContents(W,O)}},{key:"getFormat",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof W=="number"?this.editor.getFormat(W,O):this.editor.getFormat(W.index,W.length)}},{key:"getIndex",value:function(W){return W.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(W){return this.scroll.leaf(W)}},{key:"getLine",value:function(W){return this.scroll.line(W)}},{key:"getLines",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof W!="number"?this.scroll.lines(W.index,W.length):this.scroll.lines(W,O)}},{key:"getModule",value:function(W){return this.theme.modules[W]}},{key:"getSelection",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return W&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,q=J(W,O),G=o(q,2);return W=G[0],O=G[1],this.editor.getText(W,O)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(W,O,q){var G=this,U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:X.sources.API;return Y.call(this,function(){return G.editor.insertEmbed(W,O,q)},U,W)}},{key:"insertText",value:function(W,O,q,G,U){var K=this,ae=void 0,me=J(W,0,q,G,U),se=o(me,4);return W=se[0],ae=se[2],U=se[3],Y.call(this,function(){return K.editor.insertText(W,O,ae)},U,W,O.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(W,O,q){this.clipboard.dangerouslyPasteHTML(W,O,q)}},{key:"removeFormat",value:function(W,O,q){var G=this,U=J(W,O,q),K=o(U,4);return W=K[0],O=K[1],q=K[3],Y.call(this,function(){return G.editor.removeFormat(W,O)},q,W)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(W){var O=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return Y.call(this,function(){W=new d.default(W);var G=O.getLength(),U=O.editor.deleteText(0,G),K=O.editor.applyDelta(W),ae=K.ops[K.ops.length-1];ae!=null&&typeof ae.insert=="string"&&ae.insert[ae.insert.length-1]===`
`&&(O.editor.deleteText(O.getLength()-1,1),K.delete(1));var me=U.compose(K);return me},q)}},{key:"setSelection",value:function(W,O,q){if(W==null)this.selection.setRange(null,O||X.sources.API);else{var G=J(W,O,q),U=o(G,4);W=U[0],O=U[1],q=U[3],this.selection.setRange(new y.Range(W,O),q),q!==m.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API,q=new d.default().insert(W);return this.setContents(q,O)}},{key:"update",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,O=this.scroll.update(W);return this.selection.update(W),O}},{key:"updateContents",value:function(W){var O=this,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:m.default.sources.API;return Y.call(this,function(){return W=new d.default(W),O.editor.applyDelta(W,q)},q,!0)}}]),X})();z.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},z.events=m.default.events,z.sources=m.default.sources,z.version="1.3.7",z.imports={delta:d.default,parchment:w.default,"core/module":v.default,"core/theme":I.default};function H(X,te){if(te=(0,S.default)(!0,{container:X,modules:{clipboard:!0,keyboard:!0,history:!0}},te),!te.theme||te.theme===z.DEFAULTS.theme)te.theme=I.default;else if(te.theme=z.import("themes/"+te.theme),te.theme==null)throw new Error("Invalid theme "+te.theme+". Did you register it?");var W=(0,S.default)(!0,{},te.theme.DEFAULTS);[W,te].forEach(function(G){G.modules=G.modules||{},Object.keys(G.modules).forEach(function(U){G.modules[U]===!0&&(G.modules[U]={})})});var O=Object.keys(W.modules).concat(Object.keys(te.modules)),q=O.reduce(function(G,U){var K=z.import("modules/"+U);return K==null?R.error("Cannot load "+U+" module. Are you sure you registered it?"):G[U]=K.DEFAULTS||{},G},{});return te.modules!=null&&te.modules.toolbar&&te.modules.toolbar.constructor!==Object&&(te.modules.toolbar={container:te.modules.toolbar}),te=(0,S.default)(!0,{},z.DEFAULTS,{modules:q},W,te),["bounds","container","scrollingContainer"].forEach(function(G){typeof te[G]=="string"&&(te[G]=document.querySelector(te[G]))}),te.modules=Object.keys(te.modules).reduce(function(G,U){return te.modules[U]&&(G[U]=te.modules[U]),G},{}),te}function Y(X,te,W,O){if(this.options.strict&&!this.isEnabled()&&te===m.default.sources.USER)return new d.default;var q=W==null?null:this.getSelection(),G=this.editor.delta,U=X();if(q!=null&&(W===!0&&(W=q.index),O==null?q=re(q,U,te):O!==0&&(q=re(q,W,O,te)),this.setSelection(q,m.default.sources.SILENT)),U.length()>0){var K,ae=[m.default.events.TEXT_CHANGE,U,G,te];if((K=this.emitter).emit.apply(K,[m.default.events.EDITOR_CHANGE].concat(ae)),te!==m.default.sources.SILENT){var me;(me=this.emitter).emit.apply(me,ae)}}return U}function J(X,te,W,O,q){var G={};return typeof X.index=="number"&&typeof X.length=="number"?typeof te!="number"?(q=O,O=W,W=te,te=X.length,X=X.index):(te=X.length,X=X.index):typeof te!="number"&&(q=O,O=W,W=te,te=0),(typeof W>"u"?"undefined":i(W))==="object"?(G=W,q=O):typeof W=="string"&&(O!=null?G[W]=O:q=W),q=q||m.default.sources.API,[X,te,G,q]}function re(X,te,W,O){if(X==null)return null;var q=void 0,G=void 0;if(te instanceof d.default){var U=[X.index,X.index+X.length].map(function(se){return te.transformPosition(se,O!==m.default.sources.USER)}),K=o(U,2);q=K[0],G=K[1]}else{var ae=[X.index,X.index+X.length].map(function(se){return se<te||se===te&&O===m.default.sources.USER?se:W>=0?se+W:Math.max(te,se+W)}),me=o(ae,2);q=me[0],G=me[1]}return new y.Range(q,G-q)}a.expandConfig=H,a.overload=J,a.default=z}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),o=function g(w,y,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,y);if(N===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,y,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(7),c=f(l),d=s(0),u=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function m(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function b(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var v=(function(g){b(w,g);function w(){return p(this,w),m(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"formatAt",value:function(j,N,S,E){if(w.compare(this.statics.blotName,S)<0&&u.default.query(S,u.default.Scope.BLOT)){var A=this.isolate(j,N);E&&A.wrap(S,E)}else o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"formatAt",this).call(this,j,N,S,E)}},{key:"optimize",value:function(j){if(o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"optimize",this).call(this,j),this.parent instanceof w&&w.compare(this.statics.blotName,this.parent.statics.blotName)>0){var N=this.parent.isolate(this.offset(),this.length());this.moveChildren(N),N.wrap(this)}}}],[{key:"compare",value:function(j,N){var S=w.order.indexOf(j),E=w.order.indexOf(N);return S>=0||E>=0?S-E:j===N?0:j<N?-1:1}}]),w})(u.default.Inline);v.allowedChildren=[v,u.default.Embed,c.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default.Text);a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function y(j,N){for(var S=0;S<N.length;S++){var E=N[S];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(j,E.key,E)}}return function(j,N,S){return N&&y(j.prototype,N),S&&y(j,S),j}})(),o=function y(j,N,S){j===null&&(j=Function.prototype);var E=Object.getOwnPropertyDescriptor(j,N);if(E===void 0){var A=Object.getPrototypeOf(j);return A===null?void 0:y(A,N,S)}else{if("value"in E)return E.value;var P=E.get;return P===void 0?void 0:P.call(S)}},l=s(54),c=f(l),d=s(10),u=f(d);function f(y){return y&&y.__esModule?y:{default:y}}function p(y,j){if(!(y instanceof j))throw new TypeError("Cannot call a class as a function")}function m(y,j){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:y}function b(y,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);y.prototype=Object.create(j&&j.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(y,j):y.__proto__=j)}var v=(0,u.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(y){document.addEventListener(y,function(){for(var j=arguments.length,N=Array(j),S=0;S<j;S++)N[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(E){if(E.__quill&&E.__quill.emitter){var A;(A=E.__quill.emitter).handleDOM.apply(A,N)}})})});var w=(function(y){b(j,y);function j(){p(this,j);var N=m(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));return N.listeners={},N.on("error",v.error),N}return i(j,[{key:"emit",value:function(){v.log.apply(v,arguments),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var E=arguments.length,A=Array(E>1?E-1:0),P=1;P<E;P++)A[P-1]=arguments[P];(this.listeners[S.type]||[]).forEach(function(I){var B=I.node,T=I.handler;(S.target===B||B.contains(S.target))&&T.apply(void 0,[S].concat(A))})}},{key:"listenDOM",value:function(S,E,A){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:E,handler:A})}}]),j})(c.default);w.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},w.sources={API:"api",SILENT:"silent",USER:"user"},a.default=w}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=c,this.options=d};o.DEFAULTS={},a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(d){if(i.indexOf(d)<=i.indexOf(o)){for(var u,f=arguments.length,p=Array(f>1?f-1:0),m=1;m<f;m++)p[m-1]=arguments[m];(u=console)[d].apply(u,p)}}function c(d){return i.reduce(function(u,f){return u[f]=l.bind(console,f,d),u},{})}l.level=c.level=function(d){o=d},a.default=c}),(function(r,a,s){var i=Array.prototype.slice,o=s(52),l=s(53),c=r.exports=function(p,m,b){return b||(b={}),p===m?!0:p instanceof Date&&m instanceof Date?p.getTime()===m.getTime():!p||!m||typeof p!="object"&&typeof m!="object"?b.strict?p===m:p==m:f(p,m,b)};function d(p){return p==null}function u(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function f(p,m,b){var v,g;if(d(p)||d(m)||p.prototype!==m.prototype)return!1;if(l(p))return l(m)?(p=i.call(p),m=i.call(m),c(p,m,b)):!1;if(u(p)){if(!u(m)||p.length!==m.length)return!1;for(v=0;v<p.length;v++)if(p[v]!==m[v])return!1;return!0}try{var w=o(p),y=o(m)}catch{return!1}if(w.length!=y.length)return!1;for(w.sort(),y.sort(),v=w.length-1;v>=0;v--)if(w[v]!=y[v])return!1;for(v=w.length-1;v>=0;v--)if(g=w[v],!c(p[g],m[g],b))return!1;return typeof p==typeof m}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c,d,u){u===void 0&&(u={}),this.attrName=c,this.keyName=d;var f=i.Scope.TYPE&i.Scope.ATTRIBUTE;u.scope!=null?this.scope=u.scope&i.Scope.LEVEL|f:this.scope=i.Scope.ATTRIBUTE,u.whitelist!=null&&(this.whitelist=u.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(d){return d.name})},l.prototype.add=function(c,d){return this.canAdd(c,d)?(c.setAttribute(this.keyName,d),!0):!1},l.prototype.canAdd=function(c,d){var u=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return u==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var d=c.getAttribute(this.keyName);return this.canAdd(c,d)&&d?d:""},l})();a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Code=void 0;var i=(function(){function P(I,B){var T=[],_=!0,R=!1,z=void 0;try{for(var H=I[Symbol.iterator](),Y;!(_=(Y=H.next()).done)&&(T.push(Y.value),!(B&&T.length===B));_=!0);}catch(J){R=!0,z=J}finally{try{!_&&H.return&&H.return()}finally{if(R)throw z}}return T}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return P(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(I,B){for(var T=0;T<B.length;T++){var _=B[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(I,_.key,_)}}return function(I,B,T){return B&&P(I.prototype,B),T&&P(I,T),I}})(),l=function P(I,B,T){I===null&&(I=Function.prototype);var _=Object.getOwnPropertyDescriptor(I,B);if(_===void 0){var R=Object.getPrototypeOf(I);return R===null?void 0:P(R,B,T)}else{if("value"in _)return _.value;var z=_.get;return z===void 0?void 0:z.call(T)}},c=s(2),d=y(c),u=s(0),f=y(u),p=s(4),m=y(p),b=s(6),v=y(b),g=s(7),w=y(g);function y(P){return P&&P.__esModule?P:{default:P}}function j(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}function N(P,I){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:P}function S(P,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);P.prototype=Object.create(I&&I.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(P,I):P.__proto__=I)}var E=(function(P){S(I,P);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I})(v.default);E.blotName="code",E.tagName="CODE";var A=(function(P){S(I,P);function I(){return j(this,I),N(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"delta",value:function(){var T=this,_=this.domNode.textContent;return _.endsWith(`
`)&&(_=_.slice(0,-1)),_.split(`
`).reduce(function(R,z){return R.insert(z).insert(`
`,T.formats())},new d.default)}},{key:"format",value:function(T,_){if(!(T===this.statics.blotName&&_)){var R=this.descendant(w.default,this.length()-1),z=i(R,1),H=z[0];H?.deleteAt(H.length()-1,1),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,T,_)}}},{key:"formatAt",value:function(T,_,R,z){if(_!==0&&!(f.default.query(R,f.default.Scope.BLOCK)==null||R===this.statics.blotName&&z===this.statics.formats(this.domNode))){var H=this.newlineIndex(T);if(!(H<0||H>=T+_)){var Y=this.newlineIndex(T,!0)+1,J=H-Y+1,re=this.isolate(Y,J),X=re.next;re.format(R,z),X instanceof I&&X.formatAt(0,T-Y+_-J,R,z)}}}},{key:"insertAt",value:function(T,_,R){if(R==null){var z=this.descendant(w.default,T),H=i(z,2),Y=H[0],J=H[1];Y.insertAt(J,_)}}},{key:"length",value:function(){var T=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?T:T+1}},{key:"newlineIndex",value:function(T){var _=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(_)return this.domNode.textContent.slice(0,T).lastIndexOf(`
`);var R=this.domNode.textContent.slice(T).indexOf(`
`);return R>-1?T+R:-1}},{key:"optimize",value:function(T){this.domNode.textContent.endsWith(`
`)||this.appendChild(f.default.create("text",`
`)),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,T);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===_.statics.formats(_.domNode)&&(_.optimize(T),_.moveChildren(this),_.remove())}},{key:"replace",value:function(T){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,T),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(_){var R=f.default.find(_);R==null?_.parentNode.removeChild(_):R instanceof f.default.Embed?R.remove():R.unwrap()})}}],[{key:"create",value:function(T){var _=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,T);return _.setAttribute("spellcheck",!1),_}},{key:"formats",value:function(){return!0}}]),I})(m.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",a.Code=E,a.default=A}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(X){return typeof X}:function(X){return X&&typeof Symbol=="function"&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},o=(function(){function X(te,W){var O=[],q=!0,G=!1,U=void 0;try{for(var K=te[Symbol.iterator](),ae;!(q=(ae=K.next()).done)&&(O.push(ae.value),!(W&&O.length===W));q=!0);}catch(me){G=!0,U=me}finally{try{!q&&K.return&&K.return()}finally{if(G)throw U}}return O}return function(te,W){if(Array.isArray(te))return te;if(Symbol.iterator in Object(te))return X(te,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function X(te,W){for(var O=0;O<W.length;O++){var q=W[O];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(te,q.key,q)}}return function(te,W,O){return W&&X(te.prototype,W),O&&X(te,O),te}})(),c=s(2),d=_(c),u=s(20),f=_(u),p=s(0),m=_(p),b=s(13),v=_(b),g=s(24),w=_(g),y=s(4),j=_(y),N=s(16),S=_(N),E=s(21),A=_(E),P=s(11),I=_(P),B=s(3),T=_(B);function _(X){return X&&X.__esModule?X:{default:X}}function R(X,te,W){return te in X?Object.defineProperty(X,te,{value:W,enumerable:!0,configurable:!0,writable:!0}):X[te]=W,X}function z(X,te){if(!(X instanceof te))throw new TypeError("Cannot call a class as a function")}var H=/^[ -~]*$/,Y=(function(){function X(te){z(this,X),this.scroll=te,this.delta=this.getDelta()}return l(X,[{key:"applyDelta",value:function(W){var O=this,q=!1;this.scroll.update();var G=this.scroll.length();return this.scroll.batchStart(),W=re(W),W.reduce(function(U,K){var ae=K.retain||K.delete||K.insert.length||1,me=K.attributes||{};if(K.insert!=null){if(typeof K.insert=="string"){var se=K.insert;se.endsWith(`
`)&&q&&(q=!1,se=se.slice(0,-1)),U>=G&&!se.endsWith(`
`)&&(q=!0),O.scroll.insertAt(U,se);var le=O.scroll.line(U),Me=o(le,2),ue=Me[0],Ue=Me[1],Ae=(0,T.default)({},(0,y.bubbleFormats)(ue));if(ue instanceof j.default){var ie=ue.descendant(m.default.Leaf,Ue),Z=o(ie,1),Ee=Z[0];Ae=(0,T.default)(Ae,(0,y.bubbleFormats)(Ee))}me=f.default.attributes.diff(Ae,me)||{}}else if(i(K.insert)==="object"){var we=Object.keys(K.insert)[0];if(we==null)return U;O.scroll.insertAt(U,we,K.insert[we])}G+=ae}return Object.keys(me).forEach(function(Oe){O.scroll.formatAt(U,ae,Oe,me[Oe])}),U+ae},0),W.reduce(function(U,K){return typeof K.delete=="number"?(O.scroll.deleteAt(U,K.delete),U):U+(K.retain||K.insert.length||1)},0),this.scroll.batchEnd(),this.update(W)}},{key:"deleteText",value:function(W,O){return this.scroll.deleteAt(W,O),this.update(new d.default().retain(W).delete(O))}},{key:"formatLine",value:function(W,O){var q=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(G).forEach(function(U){if(!(q.scroll.whitelist!=null&&!q.scroll.whitelist[U])){var K=q.scroll.lines(W,Math.max(O,1)),ae=O;K.forEach(function(me){var se=me.length();if(!(me instanceof v.default))me.format(U,G[U]);else{var le=W-me.offset(q.scroll),Me=me.newlineIndex(le+ae)-le+1;me.formatAt(le,Me,U,G[U])}ae-=se})}}),this.scroll.optimize(),this.update(new d.default().retain(W).retain(O,(0,A.default)(G)))}},{key:"formatText",value:function(W,O){var q=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(G).forEach(function(U){q.scroll.formatAt(W,O,U,G[U])}),this.update(new d.default().retain(W).retain(O,(0,A.default)(G)))}},{key:"getContents",value:function(W,O){return this.delta.slice(W,W+O)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(W,O){return W.concat(O.delta())},new d.default)}},{key:"getFormat",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,q=[],G=[];O===0?this.scroll.path(W).forEach(function(K){var ae=o(K,1),me=ae[0];me instanceof j.default?q.push(me):me instanceof m.default.Leaf&&G.push(me)}):(q=this.scroll.lines(W,O),G=this.scroll.descendants(m.default.Leaf,W,O));var U=[q,G].map(function(K){if(K.length===0)return{};for(var ae=(0,y.bubbleFormats)(K.shift());Object.keys(ae).length>0;){var me=K.shift();if(me==null)return ae;ae=J((0,y.bubbleFormats)(me),ae)}return ae});return T.default.apply(T.default,U)}},{key:"getText",value:function(W,O){return this.getContents(W,O).filter(function(q){return typeof q.insert=="string"}).map(function(q){return q.insert}).join("")}},{key:"insertEmbed",value:function(W,O,q){return this.scroll.insertAt(W,O,q),this.update(new d.default().retain(W).insert(R({},O,q)))}},{key:"insertText",value:function(W,O){var q=this,G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O=O.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(W,O),Object.keys(G).forEach(function(U){q.scroll.formatAt(W,O.length,U,G[U])}),this.update(new d.default().retain(W).insert(O,(0,A.default)(G)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var W=this.scroll.children.head;return W.statics.blotName!==j.default.blotName||W.children.length>1?!1:W.children.head instanceof S.default}},{key:"removeFormat",value:function(W,O){var q=this.getText(W,O),G=this.scroll.line(W+O),U=o(G,2),K=U[0],ae=U[1],me=0,se=new d.default;K!=null&&(K instanceof v.default?me=K.newlineIndex(ae)-ae+1:me=K.length()-ae,se=K.delta().slice(ae,ae+me-1).insert(`
`));var le=this.getContents(W,O+me),Me=le.diff(new d.default().insert(q).concat(se)),ue=new d.default().retain(W).concat(Me);return this.applyDelta(ue)}},{key:"update",value:function(W){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,G=this.delta;if(O.length===1&&O[0].type==="characterData"&&O[0].target.data.match(H)&&m.default.find(O[0].target)){var U=m.default.find(O[0].target),K=(0,y.bubbleFormats)(U),ae=U.offset(this.scroll),me=O[0].oldValue.replace(w.default.CONTENTS,""),se=new d.default().insert(me),le=new d.default().insert(U.value()),Me=new d.default().retain(ae).concat(se.diff(le,q));W=Me.reduce(function(ue,Ue){return Ue.insert?ue.insert(Ue.insert,K):ue.push(Ue)},new d.default),this.delta=G.compose(W)}else this.delta=this.getDelta(),(!W||!(0,I.default)(G.compose(W),this.delta))&&(W=G.diff(this.delta,q));return W}}]),X})();function J(X,te){return Object.keys(te).reduce(function(W,O){return X[O]==null||(te[O]===X[O]?W[O]=te[O]:Array.isArray(te[O])?te[O].indexOf(X[O])<0&&(W[O]=te[O].concat([X[O]])):W[O]=[te[O],X[O]]),W},{})}function re(X){return X.reduce(function(te,W){if(W.insert===1){var O=(0,A.default)(W.attributes);return delete O.image,te.insert({image:W.attributes.image},O)}if(W.attributes!=null&&(W.attributes.list===!0||W.attributes.bullet===!0)&&(W=(0,A.default)(W),W.attributes.list?W.attributes.list="ordered":(W.attributes.list="bullet",delete W.attributes.bullet)),typeof W.insert=="string"){var q=W.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return te.insert(q,W.attributes)}return te.push(W)},new d.default)}a.default=Y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.Range=void 0;var i=(function(){function P(I,B){var T=[],_=!0,R=!1,z=void 0;try{for(var H=I[Symbol.iterator](),Y;!(_=(Y=H.next()).done)&&(T.push(Y.value),!(B&&T.length===B));_=!0);}catch(J){R=!0,z=J}finally{try{!_&&H.return&&H.return()}finally{if(R)throw z}}return T}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return P(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function P(I,B){for(var T=0;T<B.length;T++){var _=B[T];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(I,_.key,_)}}return function(I,B,T){return B&&P(I.prototype,B),T&&P(I,T),I}})(),l=s(0),c=w(l),d=s(21),u=w(d),f=s(11),p=w(f),m=s(8),b=w(m),v=s(10),g=w(v);function w(P){return P&&P.__esModule?P:{default:P}}function y(P){if(Array.isArray(P)){for(var I=0,B=Array(P.length);I<P.length;I++)B[I]=P[I];return B}else return Array.from(P)}function j(P,I){if(!(P instanceof I))throw new TypeError("Cannot call a class as a function")}var N=(0,g.default)("quill:selection"),S=function P(I){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;j(this,P),this.index=I,this.length=B},E=(function(){function P(I,B){var T=this;j(this,P),this.emitter=B,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){T.mouseDown||setTimeout(T.update.bind(T,b.default.sources.USER),1)}),this.emitter.on(b.default.events.EDITOR_CHANGE,function(_,R){_===b.default.events.TEXT_CHANGE&&R.length()>0&&T.update(b.default.sources.SILENT)}),this.emitter.on(b.default.events.SCROLL_BEFORE_UPDATE,function(){if(T.hasFocus()){var _=T.getNativeRange();_!=null&&_.start.node!==T.cursor.textNode&&T.emitter.once(b.default.events.SCROLL_UPDATE,function(){try{T.setNativeRange(_.start.node,_.start.offset,_.end.node,_.end.offset)}catch{}})}}),this.emitter.on(b.default.events.SCROLL_OPTIMIZE,function(_,R){if(R.range){var z=R.range,H=z.startNode,Y=z.startOffset,J=z.endNode,re=z.endOffset;T.setNativeRange(H,Y,J,re)}}),this.update(b.default.sources.SILENT)}return o(P,[{key:"handleComposition",value:function(){var B=this;this.root.addEventListener("compositionstart",function(){B.composing=!0}),this.root.addEventListener("compositionend",function(){if(B.composing=!1,B.cursor.parent){var T=B.cursor.restore();if(!T)return;setTimeout(function(){B.setNativeRange(T.startNode,T.startOffset,T.endNode,T.endOffset)},1)}})}},{key:"handleDragging",value:function(){var B=this;this.emitter.listenDOM("mousedown",document.body,function(){B.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){B.mouseDown=!1,B.update(b.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(B,T){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[B])){this.scroll.update();var _=this.getNativeRange();if(!(_==null||!_.native.collapsed||c.default.query(B,c.default.Scope.BLOCK))){if(_.start.node!==this.cursor.textNode){var R=c.default.find(_.start.node,!1);if(R==null)return;if(R instanceof c.default.Leaf){var z=R.split(_.start.offset);R.parent.insertBefore(this.cursor,z)}else R.insertBefore(this.cursor,_.start.node);this.cursor.attach()}this.cursor.format(B,T),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(B){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,_=this.scroll.length();B=Math.min(B,_-1),T=Math.min(B+T,_-1)-B;var R=void 0,z=this.scroll.leaf(B),H=i(z,2),Y=H[0],J=H[1];if(Y==null)return null;var re=Y.position(J,!0),X=i(re,2);R=X[0],J=X[1];var te=document.createRange();if(T>0){te.setStart(R,J);var W=this.scroll.leaf(B+T),O=i(W,2);if(Y=O[0],J=O[1],Y==null)return null;var q=Y.position(J,!0),G=i(q,2);return R=G[0],J=G[1],te.setEnd(R,J),te.getBoundingClientRect()}else{var U="left",K=void 0;return R instanceof Text?(J<R.data.length?(te.setStart(R,J),te.setEnd(R,J+1)):(te.setStart(R,J-1),te.setEnd(R,J),U="right"),K=te.getBoundingClientRect()):(K=Y.domNode.getBoundingClientRect(),J>0&&(U="right")),{bottom:K.top+K.height,height:K.height,left:K[U],right:K[U],top:K.top,width:0}}}},{key:"getNativeRange",value:function(){var B=document.getSelection();if(B==null||B.rangeCount<=0)return null;var T=B.getRangeAt(0);if(T==null)return null;var _=this.normalizeNative(T);return N.info("getNativeRange",_),_}},{key:"getRange",value:function(){var B=this.getNativeRange();if(B==null)return[null,null];var T=this.normalizedToRange(B);return[T,B]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(B){var T=this,_=[[B.start.node,B.start.offset]];B.native.collapsed||_.push([B.end.node,B.end.offset]);var R=_.map(function(Y){var J=i(Y,2),re=J[0],X=J[1],te=c.default.find(re,!0),W=te.offset(T.scroll);return X===0?W:te instanceof c.default.Container?W+te.length():W+te.index(re,X)}),z=Math.min(Math.max.apply(Math,y(R)),this.scroll.length()-1),H=Math.min.apply(Math,[z].concat(y(R)));return new S(H,z-H)}},{key:"normalizeNative",value:function(B){if(!A(this.root,B.startContainer)||!B.collapsed&&!A(this.root,B.endContainer))return null;var T={start:{node:B.startContainer,offset:B.startOffset},end:{node:B.endContainer,offset:B.endOffset},native:B};return[T.start,T.end].forEach(function(_){for(var R=_.node,z=_.offset;!(R instanceof Text)&&R.childNodes.length>0;)if(R.childNodes.length>z)R=R.childNodes[z],z=0;else if(R.childNodes.length===z)R=R.lastChild,z=R instanceof Text?R.data.length:R.childNodes.length+1;else break;_.node=R,_.offset=z}),T}},{key:"rangeToNative",value:function(B){var T=this,_=B.collapsed?[B.index]:[B.index,B.index+B.length],R=[],z=this.scroll.length();return _.forEach(function(H,Y){H=Math.min(z-1,H);var J=void 0,re=T.scroll.leaf(H),X=i(re,2),te=X[0],W=X[1],O=te.position(W,Y!==0),q=i(O,2);J=q[0],W=q[1],R.push(J,W)}),R.length<2&&(R=R.concat(R)),R}},{key:"scrollIntoView",value:function(B){var T=this.lastRange;if(T!=null){var _=this.getBounds(T.index,T.length);if(_!=null){var R=this.scroll.length()-1,z=this.scroll.line(Math.min(T.index,R)),H=i(z,1),Y=H[0],J=Y;if(T.length>0){var re=this.scroll.line(Math.min(T.index+T.length,R)),X=i(re,1);J=X[0]}if(!(Y==null||J==null)){var te=B.getBoundingClientRect();_.top<te.top?B.scrollTop-=te.top-_.top:_.bottom>te.bottom&&(B.scrollTop+=_.bottom-te.bottom)}}}}},{key:"setNativeRange",value:function(B,T){var _=arguments.length>2&&arguments[2]!==void 0?arguments[2]:B,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:T,z=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(N.info("setNativeRange",B,T,_,R),!(B!=null&&(this.root.parentNode==null||B.parentNode==null||_.parentNode==null))){var H=document.getSelection();if(H!=null)if(B!=null){this.hasFocus()||this.root.focus();var Y=(this.getNativeRange()||{}).native;if(Y==null||z||B!==Y.startContainer||T!==Y.startOffset||_!==Y.endContainer||R!==Y.endOffset){B.tagName=="BR"&&(T=[].indexOf.call(B.parentNode.childNodes,B),B=B.parentNode),_.tagName=="BR"&&(R=[].indexOf.call(_.parentNode.childNodes,_),_=_.parentNode);var J=document.createRange();J.setStart(B,T),J.setEnd(_,R),H.removeAllRanges(),H.addRange(J)}}else H.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(B){var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof T=="string"&&(_=T,T=!1),N.info("setRange",B),B!=null){var R=this.rangeToNative(B);this.setNativeRange.apply(this,y(R).concat([T]))}else this.setNativeRange(null);this.update(_)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:b.default.sources.USER,T=this.lastRange,_=this.getRange(),R=i(_,2),z=R[0],H=R[1];if(this.lastRange=z,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(T,this.lastRange)){var Y;!this.composing&&H!=null&&H.native.collapsed&&H.start.node!==this.cursor.textNode&&this.cursor.restore();var J=[b.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(T),B];if((Y=this.emitter).emit.apply(Y,[b.default.events.EDITOR_CHANGE].concat(J)),B!==b.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,J)}}}}]),P})();function A(P,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),P.contains(I)}a.Range=S,a.default=E}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(0),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"insertInto",value:function(w,y){w.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,w,y):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v})(c.default.Embed);m.blotName="break",m.tagName="BR",a.default=m}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var b in m)m.hasOwnProperty(b)&&(p[b]=m[b])};return function(p,m){f(p,m);function b(){this.constructor=p}p.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(44),l=s(30),c=s(1),d=(function(f){i(p,f);function p(m){var b=f.call(this,m)||this;return b.build(),b}return p.prototype.appendChild=function(m){this.insertBefore(m)},p.prototype.attach=function(){f.prototype.attach.call(this),this.children.forEach(function(m){m.attach()})},p.prototype.build=function(){var m=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(b){try{var v=u(b);m.insertBefore(v,m.children.head||void 0)}catch(g){if(g instanceof c.ParchmentError)return;throw g}})},p.prototype.deleteAt=function(m,b){if(m===0&&b===this.length())return this.remove();this.children.forEachAt(m,b,function(v,g,w){v.deleteAt(g,w)})},p.prototype.descendant=function(m,b){var v=this.children.find(b),g=v[0],w=v[1];return m.blotName==null&&m(g)||m.blotName!=null&&g instanceof m?[g,w]:g instanceof p?g.descendant(m,w):[null,-1]},p.prototype.descendants=function(m,b,v){b===void 0&&(b=0),v===void 0&&(v=Number.MAX_VALUE);var g=[],w=v;return this.children.forEachAt(b,v,function(y,j,N){(m.blotName==null&&m(y)||m.blotName!=null&&y instanceof m)&&g.push(y),y instanceof p&&(g=g.concat(y.descendants(m,j,w))),w-=N}),g},p.prototype.detach=function(){this.children.forEach(function(m){m.detach()}),f.prototype.detach.call(this)},p.prototype.formatAt=function(m,b,v,g){this.children.forEachAt(m,b,function(w,y,j){w.formatAt(y,j,v,g)})},p.prototype.insertAt=function(m,b,v){var g=this.children.find(m),w=g[0],y=g[1];if(w)w.insertAt(y,b,v);else{var j=v==null?c.create("text",b):c.create(b,v);this.appendChild(j)}},p.prototype.insertBefore=function(m,b){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return m instanceof v}))throw new c.ParchmentError("Cannot insert "+m.statics.blotName+" into "+this.statics.blotName);m.insertInto(this,b)},p.prototype.length=function(){return this.children.reduce(function(m,b){return m+b.length()},0)},p.prototype.moveChildren=function(m,b){this.children.forEach(function(v){m.insertBefore(v,b)})},p.prototype.optimize=function(m){if(f.prototype.optimize.call(this,m),this.children.length===0)if(this.statics.defaultChild!=null){var b=c.create(this.statics.defaultChild);this.appendChild(b),b.optimize(m)}else this.remove()},p.prototype.path=function(m,b){b===void 0&&(b=!1);var v=this.children.find(m,b),g=v[0],w=v[1],y=[[this,m]];return g instanceof p?y.concat(g.path(w,b)):(g!=null&&y.push([g,w]),y)},p.prototype.removeChild=function(m){this.children.remove(m)},p.prototype.replace=function(m){m instanceof p&&m.moveChildren(this),f.prototype.replace.call(this,m)},p.prototype.split=function(m,b){if(b===void 0&&(b=!1),!b){if(m===0)return this;if(m===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(m,this.length(),function(g,w,y){g=g.split(w,b),v.appendChild(g)}),v},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(m,b){var v=this,g=[],w=[];m.forEach(function(y){y.target===v.domNode&&y.type==="childList"&&(g.push.apply(g,y.addedNodes),w.push.apply(w,y.removedNodes))}),w.forEach(function(y){if(!(y.parentNode!=null&&y.tagName!=="IFRAME"&&document.body.compareDocumentPosition(y)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var j=c.find(y);j!=null&&(j.domNode.parentNode==null||j.domNode.parentNode===v.domNode)&&j.detach()}}),g.filter(function(y){return y.parentNode==v.domNode}).sort(function(y,j){return y===j?0:y.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(y){var j=null;y.nextSibling!=null&&(j=c.find(y.nextSibling));var N=u(y);(N.next!=j||N.next==null)&&(N.parent!=null&&N.parent.removeChild(v),v.insertBefore(N,j||void 0))})},p})(l.default);function u(f){var p=c.find(f);if(p==null)try{p=c.create(f)}catch{p=c.create(c.Scope.INLINE),[].slice.call(f.childNodes).forEach(function(b){p.domNode.appendChild(b)}),f.parentNode&&f.parentNode.replaceChild(p.domNode,f),p.attach()}return p}a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var b in m)m.hasOwnProperty(b)&&(p[b]=m[b])};return function(p,m){f(p,m);function b(){this.constructor=p}p.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12),l=s(31),c=s(17),d=s(1),u=(function(f){i(p,f);function p(m){var b=f.call(this,m)||this;return b.attributes=new l.default(b.domNode),b}return p.formats=function(m){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return m.tagName.toLowerCase()},p.prototype.format=function(m,b){var v=d.query(m);v instanceof o.default?this.attributes.attribute(v,b):b&&v!=null&&(m!==this.statics.blotName||this.formats()[m]!==b)&&this.replaceWith(m,b)},p.prototype.formats=function(){var m=this.attributes.values(),b=this.statics.formats(this.domNode);return b!=null&&(m[this.statics.blotName]=b),m},p.prototype.replaceWith=function(m,b){var v=f.prototype.replaceWith.call(this,m,b);return this.attributes.copy(v),v},p.prototype.update=function(m,b){var v=this;f.prototype.update.call(this,m,b),m.some(function(g){return g.target===v.domNode&&g.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(m,b){var v=f.prototype.wrap.call(this,m,b);return v instanceof p&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},p})(c.default);a.default=u}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(30),l=s(1),c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.value=function(f){return!0},u.prototype.index=function(f,p){return this.domNode===f||this.domNode.compareDocumentPosition(f)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},u.prototype.position=function(f,p){var m=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return f>0&&(m+=1),[this.parent.domNode,m]},u.prototype.value=function(){var f;return f={},f[this.statics.blotName]=this.statics.value(this.domNode)||!0,f},u.scope=l.Scope.INLINE_BLOT,u})(o.default);a.default=c}),(function(r,a,s){var i=s(11),o=s(3),l={attributes:{compose:function(d,u,f){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var p=o(!0,{},u);f||(p=Object.keys(p).reduce(function(b,v){return p[v]!=null&&(b[v]=p[v]),b},{}));for(var m in d)d[m]!==void 0&&u[m]===void 0&&(p[m]=d[m]);return Object.keys(p).length>0?p:void 0},diff:function(d,u){typeof d!="object"&&(d={}),typeof u!="object"&&(u={});var f=Object.keys(d).concat(Object.keys(u)).reduce(function(p,m){return i(d[m],u[m])||(p[m]=u[m]===void 0?null:u[m]),p},{});return Object.keys(f).length>0?f:void 0},transform:function(d,u,f){if(typeof d!="object")return u;if(typeof u=="object"){if(!f)return u;var p=Object.keys(u).reduce(function(m,b){return d[b]===void 0&&(m[b]=u[b]),m},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(d){return new c(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function c(d){this.ops=d,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(d){d||(d=1/0);var u=this.ops[this.index];if(u){var f=this.offset,p=l.length(u);if(d>=p-f?(d=p-f,this.index+=1,this.offset=0):this.offset+=d,typeof u.delete=="number")return{delete:d};var m={};return u.attributes&&(m.attributes=u.attributes),typeof u.retain=="number"?m.retain=d:typeof u.insert=="string"?m.insert=u.insert.substr(f,d):m.insert=u.insert,m}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,u=this.index,f=this.next(),p=this.ops.slice(this.index);return this.offset=d,this.index=u,[f].concat(p)}else return[]},r.exports=l}),(function(r,a){var s=(function(){function i(v,g){return g!=null&&v instanceof g}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var c;try{c=Promise}catch{c=function(){}}function d(v,g,w,y,j){typeof g=="object"&&(w=g.depth,y=g.prototype,j=g.includeNonEnumerable,g=g.circular);var N=[],S=[],E=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof w>"u"&&(w=1/0);function A(P,I){if(P===null)return null;if(I===0)return P;var B,T;if(typeof P!="object")return P;if(i(P,o))B=new o;else if(i(P,l))B=new l;else if(i(P,c))B=new c(function(te,W){P.then(function(O){te(A(O,I-1))},function(O){W(A(O,I-1))})});else if(d.__isArray(P))B=[];else if(d.__isRegExp(P))B=new RegExp(P.source,b(P)),P.lastIndex&&(B.lastIndex=P.lastIndex);else if(d.__isDate(P))B=new Date(P.getTime());else{if(E&&Buffer.isBuffer(P))return Buffer.allocUnsafe?B=Buffer.allocUnsafe(P.length):B=new Buffer(P.length),P.copy(B),B;i(P,Error)?B=Object.create(P):typeof y>"u"?(T=Object.getPrototypeOf(P),B=Object.create(T)):(B=Object.create(y),T=y)}if(g){var _=N.indexOf(P);if(_!=-1)return S[_];N.push(P),S.push(B)}i(P,o)&&P.forEach(function(te,W){var O=A(W,I-1),q=A(te,I-1);B.set(O,q)}),i(P,l)&&P.forEach(function(te){var W=A(te,I-1);B.add(W)});for(var R in P){var z;T&&(z=Object.getOwnPropertyDescriptor(T,R)),!(z&&z.set==null)&&(B[R]=A(P[R],I-1))}if(Object.getOwnPropertySymbols)for(var H=Object.getOwnPropertySymbols(P),R=0;R<H.length;R++){var Y=H[R],J=Object.getOwnPropertyDescriptor(P,Y);J&&!J.enumerable&&!j||(B[Y]=A(P[Y],I-1),J.enumerable||Object.defineProperty(B,Y,{enumerable:!1}))}if(j)for(var re=Object.getOwnPropertyNames(P),R=0;R<re.length;R++){var X=re[R],J=Object.getOwnPropertyDescriptor(P,X);J&&J.enumerable||(B[X]=A(P[X],I-1),Object.defineProperty(B,X,{enumerable:!1}))}return B}return A(v,w)}d.clonePrototype=function(g){if(g===null)return null;var w=function(){};return w.prototype=g,new w};function u(v){return Object.prototype.toString.call(v)}d.__objToStr=u;function f(v){return typeof v=="object"&&u(v)==="[object Date]"}d.__isDate=f;function p(v){return typeof v=="object"&&u(v)==="[object Array]"}d.__isArray=p;function m(v){return typeof v=="object"&&u(v)==="[object RegExp]"}d.__isRegExp=m;function b(v){var g="";return v.global&&(g+="g"),v.ignoreCase&&(g+="i"),v.multiline&&(g+="m"),g}return d.__getRegExpFlags=b,d})();typeof r=="object"&&r.exports&&(r.exports=s)}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function B(T,_){var R=[],z=!0,H=!1,Y=void 0;try{for(var J=T[Symbol.iterator](),re;!(z=(re=J.next()).done)&&(R.push(re.value),!(_&&R.length===_));z=!0);}catch(X){H=!0,Y=X}finally{try{!z&&J.return&&J.return()}finally{if(H)throw Y}}return R}return function(T,_){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return B(T,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function B(T,_){for(var R=0;R<_.length;R++){var z=_[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(T,z.key,z)}}return function(T,_,R){return _&&B(T.prototype,_),R&&B(T,R),T}})(),l=function B(T,_,R){T===null&&(T=Function.prototype);var z=Object.getOwnPropertyDescriptor(T,_);if(z===void 0){var H=Object.getPrototypeOf(T);return H===null?void 0:B(H,_,R)}else{if("value"in z)return z.value;var Y=z.get;return Y===void 0?void 0:Y.call(R)}},c=s(0),d=N(c),u=s(8),f=N(u),p=s(4),m=N(p),b=s(16),v=N(b),g=s(13),w=N(g),y=s(25),j=N(y);function N(B){return B&&B.__esModule?B:{default:B}}function S(B,T){if(!(B instanceof T))throw new TypeError("Cannot call a class as a function")}function E(B,T){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:B}function A(B,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);B.prototype=Object.create(T&&T.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(B,T):B.__proto__=T)}function P(B){return B instanceof m.default||B instanceof p.BlockEmbed}var I=(function(B){A(T,B);function T(_,R){S(this,T);var z=E(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,_));return z.emitter=R.emitter,Array.isArray(R.whitelist)&&(z.whitelist=R.whitelist.reduce(function(H,Y){return H[Y]=!0,H},{})),z.domNode.addEventListener("DOMNodeInserted",function(){}),z.optimize(),z.enable(),z}return o(T,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(R,z){var H=this.line(R),Y=i(H,2),J=Y[0],re=Y[1],X=this.line(R+z),te=i(X,1),W=te[0];if(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"deleteAt",this).call(this,R,z),W!=null&&J!==W&&re>0){if(J instanceof p.BlockEmbed||W instanceof p.BlockEmbed){this.optimize();return}if(J instanceof w.default){var O=J.newlineIndex(J.length(),!0);if(O>-1&&(J=J.split(O+1),J===W)){this.optimize();return}}else if(W instanceof w.default){var q=W.newlineIndex(0);q>-1&&W.split(q+1)}var G=W.children.head instanceof v.default?null:W.children.head;J.moveChildren(W,G),J.remove()}this.optimize()}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",R)}},{key:"formatAt",value:function(R,z,H,Y){this.whitelist!=null&&!this.whitelist[H]||(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"formatAt",this).call(this,R,z,H,Y),this.optimize())}},{key:"insertAt",value:function(R,z,H){if(!(H!=null&&this.whitelist!=null&&!this.whitelist[z])){if(R>=this.length())if(H==null||d.default.query(z,d.default.Scope.BLOCK)==null){var Y=d.default.create(this.statics.defaultChild);this.appendChild(Y),H==null&&z.endsWith(`
`)&&(z=z.slice(0,-1)),Y.insertAt(0,z,H)}else{var J=d.default.create(z,H);this.appendChild(J)}else l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertAt",this).call(this,R,z,H);this.optimize()}}},{key:"insertBefore",value:function(R,z){if(R.statics.scope===d.default.Scope.INLINE_BLOT){var H=d.default.create(this.statics.defaultChild);H.appendChild(R),R=H}l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"insertBefore",this).call(this,R,z)}},{key:"leaf",value:function(R){return this.path(R).pop()||[null,-1]}},{key:"line",value:function(R){return R===this.length()?this.line(R-1):this.descendant(P,R)}},{key:"lines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,H=function Y(J,re,X){var te=[],W=X;return J.children.forEachAt(re,X,function(O,q,G){P(O)?te.push(O):O instanceof d.default.Container&&(te=te.concat(Y(O,q,W))),W-=G}),te};return H(this,R,z)}},{key:"optimize",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,R,z),R.length>0&&this.emitter.emit(f.default.events.SCROLL_OPTIMIZE,R,z))}},{key:"path",value:function(R){return l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"path",this).call(this,R).slice(1)}},{key:"update",value:function(R){if(this.batch!==!0){var z=f.default.sources.USER;typeof R=="string"&&(z=R),Array.isArray(R)||(R=this.observer.takeRecords()),R.length>0&&this.emitter.emit(f.default.events.SCROLL_BEFORE_UPDATE,z,R),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"update",this).call(this,R.concat([])),R.length>0&&this.emitter.emit(f.default.events.SCROLL_UPDATE,z,R)}}}]),T})(d.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[m.default,p.BlockEmbed,j.default],a.default=I}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SHORTKEY=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=(function(){function K(ae,me){var se=[],le=!0,Me=!1,ue=void 0;try{for(var Ue=ae[Symbol.iterator](),Ae;!(le=(Ae=Ue.next()).done)&&(se.push(Ae.value),!(me&&se.length===me));le=!0);}catch(ie){Me=!0,ue=ie}finally{try{!le&&Ue.return&&Ue.return()}finally{if(Me)throw ue}}return se}return function(ae,me){if(Array.isArray(ae))return ae;if(Symbol.iterator in Object(ae))return K(ae,me);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function K(ae,me){for(var se=0;se<me.length;se++){var le=me[se];le.enumerable=le.enumerable||!1,le.configurable=!0,"value"in le&&(le.writable=!0),Object.defineProperty(ae,le.key,le)}}return function(ae,me,se){return me&&K(ae.prototype,me),se&&K(ae,se),ae}})(),c=s(21),d=B(c),u=s(11),f=B(u),p=s(3),m=B(p),b=s(2),v=B(b),g=s(20),w=B(g),y=s(0),j=B(y),N=s(5),S=B(N),E=s(10),A=B(E),P=s(9),I=B(P);function B(K){return K&&K.__esModule?K:{default:K}}function T(K,ae,me){return ae in K?Object.defineProperty(K,ae,{value:me,enumerable:!0,configurable:!0,writable:!0}):K[ae]=me,K}function _(K,ae){if(!(K instanceof ae))throw new TypeError("Cannot call a class as a function")}function R(K,ae){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ae&&(typeof ae=="object"||typeof ae=="function")?ae:K}function z(K,ae){if(typeof ae!="function"&&ae!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ae);K.prototype=Object.create(ae&&ae.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),ae&&(Object.setPrototypeOf?Object.setPrototypeOf(K,ae):K.__proto__=ae)}var H=(0,A.default)("quill:keyboard"),Y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",J=(function(K){z(ae,K),l(ae,null,[{key:"match",value:function(se,le){return le=U(le),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Me){return!!le[Me]!==se[Me]&&le[Me]!==null})?!1:le.key===(se.which||se.keyCode)}}]);function ae(me,se){_(this,ae);var le=R(this,(ae.__proto__||Object.getPrototypeOf(ae)).call(this,me,se));return le.bindings={},Object.keys(le.options.bindings).forEach(function(Me){Me==="list autofill"&&me.scroll.whitelist!=null&&!me.scroll.whitelist.list||le.options.bindings[Me]&&le.addBinding(le.options.bindings[Me])}),le.addBinding({key:ae.keys.ENTER,shiftKey:null},O),le.addBinding({key:ae.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(le.addBinding({key:ae.keys.BACKSPACE},{collapsed:!0},X),le.addBinding({key:ae.keys.DELETE},{collapsed:!0},te)):(le.addBinding({key:ae.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},X),le.addBinding({key:ae.keys.DELETE},{collapsed:!0,suffix:/^.?$/},te)),le.addBinding({key:ae.keys.BACKSPACE},{collapsed:!1},W),le.addBinding({key:ae.keys.DELETE},{collapsed:!1},W),le.addBinding({key:ae.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},X),le.listen(),le}return l(ae,[{key:"addBinding",value:function(se){var le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Me=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ue=U(se);if(ue==null||ue.key==null)return H.warn("Attempted to add invalid keyboard binding",ue);typeof le=="function"&&(le={handler:le}),typeof Me=="function"&&(Me={handler:Me}),ue=(0,m.default)(ue,le,Me),this.bindings[ue.key]=this.bindings[ue.key]||[],this.bindings[ue.key].push(ue)}},{key:"listen",value:function(){var se=this;this.quill.root.addEventListener("keydown",function(le){if(!le.defaultPrevented){var Me=le.which||le.keyCode,ue=(se.bindings[Me]||[]).filter(function(Re){return ae.match(le,Re)});if(ue.length!==0){var Ue=se.quill.getSelection();if(!(Ue==null||!se.quill.hasFocus())){var Ae=se.quill.getLine(Ue.index),ie=o(Ae,2),Z=ie[0],Ee=ie[1],we=se.quill.getLeaf(Ue.index),Oe=o(we,2),de=Oe[0],ce=Oe[1],Ce=Ue.length===0?[de,ce]:se.quill.getLeaf(Ue.index+Ue.length),Xe=o(Ce,2),xe=Xe[0],fe=Xe[1],Se=de instanceof j.default.Text?de.value().slice(0,ce):"",qe=xe instanceof j.default.Text?xe.value().slice(fe):"",je={collapsed:Ue.length===0,empty:Ue.length===0&&Z.length()<=1,format:se.quill.getFormat(Ue),offset:Ee,prefix:Se,suffix:qe},Le=ue.some(function(Re){if(Re.collapsed!=null&&Re.collapsed!==je.collapsed||Re.empty!=null&&Re.empty!==je.empty||Re.offset!=null&&Re.offset!==je.offset)return!1;if(Array.isArray(Re.format)){if(Re.format.every(function(Je){return je.format[Je]==null}))return!1}else if(i(Re.format)==="object"&&!Object.keys(Re.format).every(function(Je){return Re.format[Je]===!0?je.format[Je]!=null:Re.format[Je]===!1?je.format[Je]==null:(0,f.default)(Re.format[Je],je.format[Je])}))return!1;return Re.prefix!=null&&!Re.prefix.test(je.prefix)||Re.suffix!=null&&!Re.suffix.test(je.suffix)?!1:Re.handler.call(se,Ue,je)!==!0});Le&&le.preventDefault()}}}})}}]),ae})(I.default);J.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},J.DEFAULTS={bindings:{bold:G("bold"),italic:G("italic"),underline:G("underline"),indent:{key:J.keys.TAB,format:["blockquote","indent","list"],handler:function(ae,me){if(me.collapsed&&me.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:J.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(ae,me){if(me.collapsed&&me.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:J.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(ae,me){me.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):me.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":q(!0),"outdent code-block":q(!1),"remove tab":{key:J.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(ae){this.quill.deleteText(ae.index-1,1,S.default.sources.USER)}},tab:{key:J.keys.TAB,handler:function(ae){this.quill.history.cutoff();var me=new v.default().retain(ae.index).delete(ae.length).insert("	");this.quill.updateContents(me,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ae.index+1,S.default.sources.SILENT)}},"list empty enter":{key:J.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(ae,me){this.quill.format("list",!1,S.default.sources.USER),me.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:J.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(ae){var me=this.quill.getLine(ae.index),se=o(me,2),le=se[0],Me=se[1],ue=(0,m.default)({},le.formats(),{list:"checked"}),Ue=new v.default().retain(ae.index).insert(`
`,ue).retain(le.length()-Me-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ue,S.default.sources.USER),this.quill.setSelection(ae.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:J.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(ae,me){var se=this.quill.getLine(ae.index),le=o(se,2),Me=le[0],ue=le[1],Ue=new v.default().retain(ae.index).insert(`
`,me.format).retain(Me.length()-ue-1).retain(1,{header:null});this.quill.updateContents(Ue,S.default.sources.USER),this.quill.setSelection(ae.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(ae,me){var se=me.prefix.length,le=this.quill.getLine(ae.index),Me=o(le,2),ue=Me[0],Ue=Me[1];if(Ue>se)return!0;var Ae=void 0;switch(me.prefix.trim()){case"[]":case"[ ]":Ae="unchecked";break;case"[x]":Ae="checked";break;case"-":case"*":Ae="bullet";break;default:Ae="ordered"}this.quill.insertText(ae.index," ",S.default.sources.USER),this.quill.history.cutoff();var ie=new v.default().retain(ae.index-Ue).delete(se+1).retain(ue.length()-2-Ue).retain(1,{list:Ae});this.quill.updateContents(ie,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(ae.index-se,S.default.sources.SILENT)}},"code exit":{key:J.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(ae){var me=this.quill.getLine(ae.index),se=o(me,2),le=se[0],Me=se[1],ue=new v.default().retain(ae.index+le.length()-Me-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ue,S.default.sources.USER)}},"embed left":re(J.keys.LEFT,!1),"embed left shift":re(J.keys.LEFT,!0),"embed right":re(J.keys.RIGHT,!1),"embed right shift":re(J.keys.RIGHT,!0)}};function re(K,ae){var me,se=K===J.keys.LEFT?"prefix":"suffix";return me={key:K,shiftKey:ae,altKey:null},T(me,se,/^$/),T(me,"handler",function(Me){var ue=Me.index;K===J.keys.RIGHT&&(ue+=Me.length+1);var Ue=this.quill.getLeaf(ue),Ae=o(Ue,1),ie=Ae[0];return ie instanceof j.default.Embed?(K===J.keys.LEFT?ae?this.quill.setSelection(Me.index-1,Me.length+1,S.default.sources.USER):this.quill.setSelection(Me.index-1,S.default.sources.USER):ae?this.quill.setSelection(Me.index,Me.length+1,S.default.sources.USER):this.quill.setSelection(Me.index+Me.length+1,S.default.sources.USER),!1):!0}),me}function X(K,ae){if(!(K.index===0||this.quill.getLength()<=1)){var me=this.quill.getLine(K.index),se=o(me,1),le=se[0],Me={};if(ae.offset===0){var ue=this.quill.getLine(K.index-1),Ue=o(ue,1),Ae=Ue[0];if(Ae!=null&&Ae.length()>1){var ie=le.formats(),Z=this.quill.getFormat(K.index-1,1);Me=w.default.attributes.diff(ie,Z)||{}}}var Ee=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(ae.prefix)?2:1;this.quill.deleteText(K.index-Ee,Ee,S.default.sources.USER),Object.keys(Me).length>0&&this.quill.formatLine(K.index-Ee,Ee,Me,S.default.sources.USER),this.quill.focus()}}function te(K,ae){var me=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(ae.suffix)?2:1;if(!(K.index>=this.quill.getLength()-me)){var se={},le=0,Me=this.quill.getLine(K.index),ue=o(Me,1),Ue=ue[0];if(ae.offset>=Ue.length()-1){var Ae=this.quill.getLine(K.index+1),ie=o(Ae,1),Z=ie[0];if(Z){var Ee=Ue.formats(),we=this.quill.getFormat(K.index,1);se=w.default.attributes.diff(Ee,we)||{},le=Z.length()}}this.quill.deleteText(K.index,me,S.default.sources.USER),Object.keys(se).length>0&&this.quill.formatLine(K.index+le-1,me,se,S.default.sources.USER)}}function W(K){var ae=this.quill.getLines(K),me={};if(ae.length>1){var se=ae[0].formats(),le=ae[ae.length-1].formats();me=w.default.attributes.diff(le,se)||{}}this.quill.deleteText(K,S.default.sources.USER),Object.keys(me).length>0&&this.quill.formatLine(K.index,1,me,S.default.sources.USER),this.quill.setSelection(K.index,S.default.sources.SILENT),this.quill.focus()}function O(K,ae){var me=this;K.length>0&&this.quill.scroll.deleteAt(K.index,K.length);var se=Object.keys(ae.format).reduce(function(le,Me){return j.default.query(Me,j.default.Scope.BLOCK)&&!Array.isArray(ae.format[Me])&&(le[Me]=ae.format[Me]),le},{});this.quill.insertText(K.index,`
`,se,S.default.sources.USER),this.quill.setSelection(K.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(ae.format).forEach(function(le){se[le]==null&&(Array.isArray(ae.format[le])||le!=="link"&&me.quill.format(le,ae.format[le],S.default.sources.USER))})}function q(K){return{key:J.keys.TAB,shiftKey:!K,format:{"code-block":!0},handler:function(me){var se=j.default.query("code-block"),le=me.index,Me=me.length,ue=this.quill.scroll.descendant(se,le),Ue=o(ue,2),Ae=Ue[0],ie=Ue[1];if(Ae!=null){var Z=this.quill.getIndex(Ae),Ee=Ae.newlineIndex(ie,!0)+1,we=Ae.newlineIndex(Z+ie+Me),Oe=Ae.domNode.textContent.slice(Ee,we).split(`
`);ie=0,Oe.forEach(function(de,ce){K?(Ae.insertAt(Ee+ie,se.TAB),ie+=se.TAB.length,ce===0?le+=se.TAB.length:Me+=se.TAB.length):de.startsWith(se.TAB)&&(Ae.deleteAt(Ee+ie,se.TAB.length),ie-=se.TAB.length,ce===0?le-=se.TAB.length:Me-=se.TAB.length),ie+=de.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(le,Me,S.default.sources.SILENT)}}}}function G(K){return{key:K[0].toUpperCase(),shortKey:!0,handler:function(me,se){this.quill.format(K,!se.format[K],S.default.sources.USER)}}}function U(K){if(typeof K=="string"||typeof K=="number")return U({key:K});if((typeof K>"u"?"undefined":i(K))==="object"&&(K=(0,d.default)(K,!1)),typeof K.key=="string")if(J.keys[K.key.toUpperCase()]!=null)K.key=J.keys[K.key.toUpperCase()];else if(K.key.length===1)K.key=K.key.toUpperCase().charCodeAt(0);else return null;return K.shortKey&&(K[Y]=K.shortKey,delete K.shortKey),K}a.default=J,a.SHORTKEY=Y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function w(y,j){var N=[],S=!0,E=!1,A=void 0;try{for(var P=y[Symbol.iterator](),I;!(S=(I=P.next()).done)&&(N.push(I.value),!(j&&N.length===j));S=!0);}catch(B){E=!0,A=B}finally{try{!S&&P.return&&P.return()}finally{if(E)throw A}}return N}return function(y,j){if(Array.isArray(y))return y;if(Symbol.iterator in Object(y))return w(y,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function w(y,j,N){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,j);if(S===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:w(E,j,N)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(N)}},l=(function(){function w(y,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,j,N){return j&&w(y.prototype,j),N&&w(y,N),y}})(),c=s(0),d=p(c),u=s(7),f=p(u);function p(w){return w&&w.__esModule?w:{default:w}}function m(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function b(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function v(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var g=(function(w){v(y,w),l(y,null,[{key:"value",value:function(){}}]);function y(j,N){m(this,y);var S=b(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,j));return S.selection=N,S.textNode=document.createTextNode(y.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return l(y,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(N,S){if(this._length!==0)return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"format",this).call(this,N,S);for(var E=this,A=0;E!=null&&E.statics.scope!==d.default.Scope.BLOCK_BLOT;)A+=E.offset(E.parent),E=E.parent;E!=null&&(this._length=y.CONTENTS.length,E.optimize(),E.formatAt(A,y.CONTENTS.length,N,S),this._length=0)}},{key:"index",value:function(N,S){return N===this.textNode?0:o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,N,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var N=this.textNode,S=this.selection.getNativeRange(),E=void 0,A=void 0,P=void 0;if(S!=null&&S.start.node===N&&S.end.node===N){var I=[N,S.start.offset,S.end.offset];E=I[0],A=I[1],P=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==y.CONTENTS){var B=this.textNode.data.split(y.CONTENTS).join("");this.next instanceof f.default?(E=this.next.domNode,this.next.insertAt(0,B),this.textNode.data=y.CONTENTS):(this.textNode.data=B,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(y.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var T=[A,P].map(function(R){return Math.max(0,Math.min(E.data.length,R-1))}),_=i(T,2);return A=_[0],P=_[1],{startNode:E,startOffset:A,endNode:E,endOffset:P}}}}},{key:"update",value:function(N,S){var E=this;if(N.some(function(P){return P.type==="characterData"&&P.target===E.textNode})){var A=this.restore();A&&(S.range=A)}}},{key:"value",value:function(){return""}}]),y})(d.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",a.default=g}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=d(i),l=s(4),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v})(o.default.Container);m.allowedChildren=[c.default,l.BlockEmbed,m],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.ColorStyle=a.ColorClass=a.ColorAttributor=void 0;var i=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),o=function g(w,y,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,y);if(N===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,y,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(0),c=d(l);function d(g){return g&&g.__esModule?g:{default:g}}function u(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function f(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function p(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var m=(function(g){p(w,g);function w(){return u(this,w),f(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"value",value:function(j){var N=o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"value",this).call(this,j);return N.startsWith("rgb(")?(N=N.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+N.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):N}}]),w})(c.default.Attributor.Style),b=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),v=new m("color","color",{scope:c.default.Scope.INLINE});a.ColorAttributor=m,a.ColorClass=b,a.ColorStyle=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.sanitize=a.default=void 0;var i=(function(){function v(g,w){for(var y=0;y<w.length;y++){var j=w[y];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,w,y){return w&&v(g.prototype,w),y&&v(g,y),g}})(),o=function v(g,w,y){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,w);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,w,y)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(y)}},l=s(6),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function u(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function p(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var m=(function(v){p(g,v);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"format",value:function(y,j){if(y!==this.statics.blotName||!j)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,y,j);j=this.constructor.sanitize(j),this.domNode.setAttribute("href",j)}}],[{key:"create",value:function(y){var j=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,y);return y=this.sanitize(y),j.setAttribute("href",y),j.setAttribute("rel","noopener noreferrer"),j.setAttribute("target","_blank"),j}},{key:"formats",value:function(y){return y.getAttribute("href")}},{key:"sanitize",value:function(y){return b(y,this.PROTOCOL_WHITELIST)?y:this.SANITIZED_URL}}]),g})(c.default);m.blotName="link",m.tagName="A",m.SANITIZED_URL="about:blank",m.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function b(v,g){var w=document.createElement("a");w.href=v;var y=w.href.slice(0,w.href.indexOf(":"));return g.indexOf(y)>-1}a.default=m,a.sanitize=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),l=s(23),c=f(l),d=s(107),u=f(d);function f(g){return g&&g.__esModule?g:{default:g}}function p(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}var m=0;function b(g,w){g.setAttribute(w,g.getAttribute(w)!=="true")}var v=(function(){function g(w){var y=this;p(this,g),this.select=w,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){y.togglePicker()}),this.label.addEventListener("keydown",function(j){switch(j.keyCode){case c.default.keys.ENTER:y.togglePicker();break;case c.default.keys.ESCAPE:y.escape(),j.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),b(this.label,"aria-expanded"),b(this.options,"aria-hidden")}},{key:"buildItem",value:function(y){var j=this,N=document.createElement("span");return N.tabIndex="0",N.setAttribute("role","button"),N.classList.add("ql-picker-item"),y.hasAttribute("value")&&N.setAttribute("data-value",y.getAttribute("value")),y.textContent&&N.setAttribute("data-label",y.textContent),N.addEventListener("click",function(){j.selectItem(N,!0)}),N.addEventListener("keydown",function(S){switch(S.keyCode){case c.default.keys.ENTER:j.selectItem(N,!0),S.preventDefault();break;case c.default.keys.ESCAPE:j.escape(),S.preventDefault();break}}),N}},{key:"buildLabel",value:function(){var y=document.createElement("span");return y.classList.add("ql-picker-label"),y.innerHTML=u.default,y.tabIndex="0",y.setAttribute("role","button"),y.setAttribute("aria-expanded","false"),this.container.appendChild(y),y}},{key:"buildOptions",value:function(){var y=this,j=document.createElement("span");j.classList.add("ql-picker-options"),j.setAttribute("aria-hidden","true"),j.tabIndex="-1",j.id="ql-picker-options-"+m,m+=1,this.label.setAttribute("aria-controls",j.id),this.options=j,[].slice.call(this.select.options).forEach(function(N){var S=y.buildItem(N);j.appendChild(S),N.selected===!0&&y.selectItem(S)}),this.container.appendChild(j)}},{key:"buildPicker",value:function(){var y=this;[].slice.call(this.select.attributes).forEach(function(j){y.container.setAttribute(j.name,j.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var y=this;this.close(),setTimeout(function(){return y.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(y){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,N=this.container.querySelector(".ql-selected");if(y!==N&&(N?.classList.remove("ql-selected"),y!=null&&(y.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(y.parentNode.children,y),y.hasAttribute("data-value")?this.label.setAttribute("data-value",y.getAttribute("data-value")):this.label.removeAttribute("data-value"),y.hasAttribute("data-label")?this.label.setAttribute("data-label",y.getAttribute("data-label")):this.label.removeAttribute("data-label"),j))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var y=void 0;if(this.select.selectedIndex>-1){var j=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];y=this.select.options[this.select.selectedIndex],this.selectItem(j)}else this.selectItem(null);var N=y!=null&&y!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",N)}}]),g})();a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(0),o=H(i),l=s(5),c=H(l),d=s(4),u=H(d),f=s(16),p=H(f),m=s(25),b=H(m),v=s(24),g=H(v),w=s(35),y=H(w),j=s(6),N=H(j),S=s(22),E=H(S),A=s(7),P=H(A),I=s(55),B=H(I),T=s(42),_=H(T),R=s(23),z=H(R);function H(Y){return Y&&Y.__esModule?Y:{default:Y}}c.default.register({"blots/block":u.default,"blots/block/embed":d.BlockEmbed,"blots/break":p.default,"blots/container":b.default,"blots/cursor":g.default,"blots/embed":y.default,"blots/inline":N.default,"blots/scroll":E.default,"blots/text":P.default,"modules/clipboard":B.default,"modules/history":_.default,"modules/keyboard":z.default}),o.default.register(u.default,p.default,g.default,N.default,E.default,P.default),a.default=c.default}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?d=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?d=document.createElement(c):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(c,d){var u=this.isolate(c,d);u.remove()},l.prototype.formatAt=function(c,d,u,f){var p=this.isolate(c,d);if(i.query(u,i.Scope.BLOT)!=null&&f)p.wrap(u,f);else if(i.query(u,i.Scope.ATTRIBUTE)!=null){var m=i.create(this.statics.scope);p.wrap(m),m.format(u,f)}},l.prototype.insertAt=function(c,d,u){var f=u==null?i.create("text",d):i.create(d,u),p=this.split(c);this.parent.insertBefore(f,p)},l.prototype.insertInto=function(c,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var u=null;c.children.insertBefore(this,d),d!=null&&(u=d.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=u)&&c.domNode.insertBefore(this.domNode,u),this.parent=c,this.attach()},l.prototype.isolate=function(c,d){var u=this.split(c);return u.split(d),u},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return u.replace(this),u},l.prototype.split=function(c,d){return c===0?this:this.next},l.prototype.update=function(c,d){},l.prototype.wrap=function(c,d){var u=typeof c=="string"?i.create(c,d):c;return this.parent!=null&&this.parent.insertBefore(u,this.next),u.appendChild(this),u},l.blotName="abstract",l})();a.default=o}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(12),o=s(32),l=s(33),c=s(1),d=(function(){function u(f){this.attributes={},this.domNode=f,this.build()}return u.prototype.attribute=function(f,p){p?f.add(this.domNode,p)&&(f.value(this.domNode)!=null?this.attributes[f.attrName]=f:delete this.attributes[f.attrName]):(f.remove(this.domNode),delete this.attributes[f.attrName])},u.prototype.build=function(){var f=this;this.attributes={};var p=i.default.keys(this.domNode),m=o.default.keys(this.domNode),b=l.default.keys(this.domNode);p.concat(m).concat(b).forEach(function(v){var g=c.query(v,c.Scope.ATTRIBUTE);g instanceof i.default&&(f.attributes[g.attrName]=g)})},u.prototype.copy=function(f){var p=this;Object.keys(this.attributes).forEach(function(m){var b=p.attributes[m].value(p.domNode);f.format(m,b)})},u.prototype.move=function(f){var p=this;this.copy(f),Object.keys(this.attributes).forEach(function(m){p.attributes[m].remove(p.domNode)}),this.attributes={}},u.prototype.values=function(){var f=this;return Object.keys(this.attributes).reduce(function(p,m){return p[m]=f.attributes[m].value(f.domNode),p},{})},u})();a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12);function l(d,u){var f=d.getAttribute("class")||"";return f.split(/\s+/).filter(function(p){return p.indexOf(u+"-")===0})}var c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},u.prototype.add=function(f,p){return this.canAdd(f,p)?(this.remove(f),f.classList.add(this.keyName+"-"+p),!0):!1},u.prototype.remove=function(f){var p=l(f,this.keyName);p.forEach(function(m){f.classList.remove(m)}),f.classList.length===0&&f.removeAttribute("class")},u.prototype.value=function(f){var p=l(f,this.keyName)[0]||"",m=p.slice(this.keyName.length+1);return this.canAdd(f,m)?m:""},u})(o.default);a.default=c}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(12);function l(d){var u=d.split("-"),f=u.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return u[0]+f}var c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.keys=function(f){return(f.getAttribute("style")||"").split(";").map(function(p){var m=p.split(":");return m[0].trim()})},u.prototype.add=function(f,p){return this.canAdd(f,p)?(f.style[l(this.keyName)]=p,!0):!1},u.prototype.remove=function(f){f.style[l(this.keyName)]="",f.getAttribute("style")||f.removeAttribute("style")},u.prototype.value=function(f){var p=f.style[l(this.keyName)];return this.canAdd(f,p)?p:""},u})(o.default);a.default=c}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(d,u){o(this,c),this.quill=d,this.options=u,this.modules={}}return i(c,[{key:"init",value:function(){var u=this;Object.keys(this.options.modules).forEach(function(f){u.modules[f]==null&&u.addModule(f)})}},{key:"addModule",value:function(u){var f=this.quill.constructor.import("modules/"+u);return this.modules[u]=new f(this.quill,this.options.modules[u]||{}),this.modules[u]}}]),c})();l.DEFAULTS={modules:{}},l.themes={default:l},a.default=l}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function w(y,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,j,N){return j&&w(y.prototype,j),N&&w(y,N),y}})(),o=function w(y,j,N){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,j);if(S===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:w(E,j,N)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(N)}},l=s(0),c=f(l),d=s(7),u=f(d);function f(w){return w&&w.__esModule?w:{default:w}}function p(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function m(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function b(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var v="\uFEFF",g=(function(w){b(y,w);function y(j){p(this,y);var N=m(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,j));return N.contentNode=document.createElement("span"),N.contentNode.setAttribute("contenteditable",!1),[].slice.call(N.domNode.childNodes).forEach(function(S){N.contentNode.appendChild(S)}),N.leftGuard=document.createTextNode(v),N.rightGuard=document.createTextNode(v),N.domNode.appendChild(N.leftGuard),N.domNode.appendChild(N.contentNode),N.domNode.appendChild(N.rightGuard),N}return i(y,[{key:"index",value:function(N,S){return N===this.leftGuard?0:N===this.rightGuard?1:o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"index",this).call(this,N,S)}},{key:"restore",value:function(N){var S=void 0,E=void 0,A=N.data.split(v).join("");if(N===this.leftGuard)if(this.prev instanceof u.default){var P=this.prev.length();this.prev.insertAt(P,A),S={startNode:this.prev.domNode,startOffset:P+A.length}}else E=document.createTextNode(A),this.parent.insertBefore(c.default.create(E),this),S={startNode:E,startOffset:A.length};else N===this.rightGuard&&(this.next instanceof u.default?(this.next.insertAt(0,A),S={startNode:this.next.domNode,startOffset:A.length}):(E=document.createTextNode(A),this.parent.insertBefore(c.default.create(E),this.next),S={startNode:E,startOffset:A.length}));return N.data=v,S}},{key:"update",value:function(N,S){var E=this;N.forEach(function(A){if(A.type==="characterData"&&(A.target===E.leftGuard||A.target===E.rightGuard)){var P=E.restore(A.target);P&&(S.range=P)}})}}]),y})(c.default.Embed);a.default=g}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.AlignStyle=a.AlignClass=a.AlignAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new o.default.Attributor.Attribute("align","align",c),u=new o.default.Attributor.Class("align","ql-align",c),f=new o.default.Attributor.Style("align","text-align",c);a.AlignAttribute=d,a.AlignClass=u,a.AlignStyle=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.BackgroundStyle=a.BackgroundClass=void 0;var i=s(0),o=c(i),l=s(26);function c(f){return f&&f.__esModule?f:{default:f}}var d=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),u=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});a.BackgroundClass=d,a.BackgroundStyle=u}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.DirectionStyle=a.DirectionClass=a.DirectionAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},d=new o.default.Attributor.Attribute("direction","dir",c),u=new o.default.Attributor.Class("direction","ql-direction",c),f=new o.default.Attributor.Style("direction","direction",c);a.DirectionAttribute=d,a.DirectionClass=u,a.DirectionStyle=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.FontClass=a.FontStyle=void 0;var i=(function(){function w(y,j){for(var N=0;N<j.length;N++){var S=j[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(y,S.key,S)}}return function(y,j,N){return j&&w(y.prototype,j),N&&w(y,N),y}})(),o=function w(y,j,N){y===null&&(y=Function.prototype);var S=Object.getOwnPropertyDescriptor(y,j);if(S===void 0){var E=Object.getPrototypeOf(y);return E===null?void 0:w(E,j,N)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(N)}},l=s(0),c=d(l);function d(w){return w&&w.__esModule?w:{default:w}}function u(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function f(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function p(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var m={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},b=new c.default.Attributor.Class("font","ql-font",m),v=(function(w){p(y,w);function y(){return u(this,y),f(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,[{key:"value",value:function(N){return o(y.prototype.__proto__||Object.getPrototypeOf(y.prototype),"value",this).call(this,N).replace(/["']/g,"")}}]),y})(c.default.Attributor.Style),g=new v("font","font-family",m);a.FontStyle=g,a.FontClass=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.SizeStyle=a.SizeClass=void 0;var i=s(0),o=l(i);function l(u){return u&&u.__esModule?u:{default:u}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});a.SizeClass=c,a.SizeStyle=d}),(function(r,a,s){r.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.getLastChangeIndex=a.default=void 0;var i=(function(){function j(N,S){for(var E=0;E<S.length;E++){var A=S[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,S,E){return S&&j(N.prototype,S),E&&j(N,E),N}})(),o=s(0),l=p(o),c=s(5),d=p(c),u=s(9),f=p(u);function p(j){return j&&j.__esModule?j:{default:j}}function m(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function b(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function v(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var g=(function(j){v(N,j);function N(S,E){m(this,N);var A=b(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S,E));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(d.default.events.EDITOR_CHANGE,function(P,I,B,T){P!==d.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||T===d.default.sources.USER?A.record(I,B):A.transform(I))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return i(N,[{key:"change",value:function(E,A){if(this.stack[E].length!==0){var P=this.stack[E].pop();this.stack[A].push(P),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(P[E],d.default.sources.USER),this.ignoreChange=!1;var I=y(P[E]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(E,A){if(E.ops.length!==0){this.stack.redo=[];var P=this.quill.getContents().diff(A),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var B=this.stack.undo.pop();P=P.compose(B.undo),E=B.redo.compose(E)}else this.lastRecorded=I;this.stack.undo.push({redo:E,undo:P}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(E){this.stack.undo.forEach(function(A){A.undo=E.transform(A.undo,!0),A.redo=E.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=E.transform(A.undo,!0),A.redo=E.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),N})(f.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function w(j){var N=j.ops[j.ops.length-1];return N==null?!1:N.insert!=null?typeof N.insert=="string"&&N.insert.endsWith(`
`):N.attributes!=null?Object.keys(N.attributes).some(function(S){return l.default.query(S,l.default.Scope.BLOCK)!=null}):!1}function y(j){var N=j.reduce(function(E,A){return E+=A.delete||0,E},0),S=j.length()-N;return w(j)&&(S-=1),S}a.default=g,a.getLastChangeIndex=y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BaseTooltip=void 0;var i=(function(){function O(q,G){for(var U=0;U<G.length;U++){var K=G[U];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(q,K.key,K)}}return function(q,G,U){return G&&O(q.prototype,G),U&&O(q,U),q}})(),o=function O(q,G,U){q===null&&(q=Function.prototype);var K=Object.getOwnPropertyDescriptor(q,G);if(K===void 0){var ae=Object.getPrototypeOf(q);return ae===null?void 0:O(ae,G,U)}else{if("value"in K)return K.value;var me=K.get;return me===void 0?void 0:me.call(U)}},l=s(3),c=I(l),d=s(2),u=I(d),f=s(8),p=I(f),m=s(23),b=I(m),v=s(34),g=I(v),w=s(59),y=I(w),j=s(60),N=I(j),S=s(28),E=I(S),A=s(61),P=I(A);function I(O){return O&&O.__esModule?O:{default:O}}function B(O,q){if(!(O instanceof q))throw new TypeError("Cannot call a class as a function")}function T(O,q){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return q&&(typeof q=="object"||typeof q=="function")?q:O}function _(O,q){if(typeof q!="function"&&q!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof q);O.prototype=Object.create(q&&q.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),q&&(Object.setPrototypeOf?Object.setPrototypeOf(O,q):O.__proto__=q)}var R=[!1,"center","right","justify"],z=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],H=[!1,"serif","monospace"],Y=["1","2","3",!1],J=["small",!1,"large","huge"],re=(function(O){_(q,O);function q(G,U){B(this,q);var K=T(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,G,U)),ae=function me(se){if(!document.body.contains(G.root))return document.body.removeEventListener("click",me);K.tooltip!=null&&!K.tooltip.root.contains(se.target)&&document.activeElement!==K.tooltip.textbox&&!K.quill.hasFocus()&&K.tooltip.hide(),K.pickers!=null&&K.pickers.forEach(function(le){le.container.contains(se.target)||le.close()})};return G.emitter.listenDOM("click",document.body,ae),K}return i(q,[{key:"addModule",value:function(U){var K=o(q.prototype.__proto__||Object.getPrototypeOf(q.prototype),"addModule",this).call(this,U);return U==="toolbar"&&this.extendToolbar(K),K}},{key:"buildButtons",value:function(U,K){U.forEach(function(ae){var me=ae.getAttribute("class")||"";me.split(/\s+/).forEach(function(se){if(se.startsWith("ql-")&&(se=se.slice(3),K[se]!=null))if(se==="direction")ae.innerHTML=K[se][""]+K[se].rtl;else if(typeof K[se]=="string")ae.innerHTML=K[se];else{var le=ae.value||"";le!=null&&K[se][le]&&(ae.innerHTML=K[se][le])}})})}},{key:"buildPickers",value:function(U,K){var ae=this;this.pickers=U.map(function(se){if(se.classList.contains("ql-align"))return se.querySelector("option")==null&&W(se,R),new N.default(se,K.align);if(se.classList.contains("ql-background")||se.classList.contains("ql-color")){var le=se.classList.contains("ql-background")?"background":"color";return se.querySelector("option")==null&&W(se,z,le==="background"?"#ffffff":"#000000"),new y.default(se,K[le])}else return se.querySelector("option")==null&&(se.classList.contains("ql-font")?W(se,H):se.classList.contains("ql-header")?W(se,Y):se.classList.contains("ql-size")&&W(se,J)),new E.default(se)});var me=function(){ae.pickers.forEach(function(le){le.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,me)}}]),q})(g.default);re.DEFAULTS=(0,c.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var q=this,G=this.container.querySelector("input.ql-image[type=file]");G==null&&(G=document.createElement("input"),G.setAttribute("type","file"),G.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),G.classList.add("ql-image"),G.addEventListener("change",function(){if(G.files!=null&&G.files[0]!=null){var U=new FileReader;U.onload=function(K){var ae=q.quill.getSelection(!0);q.quill.updateContents(new u.default().retain(ae.index).delete(ae.length).insert({image:K.target.result}),p.default.sources.USER),q.quill.setSelection(ae.index+1,p.default.sources.SILENT),G.value=""},U.readAsDataURL(G.files[0])}}),this.container.appendChild(G)),G.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var X=(function(O){_(q,O);function q(G,U){B(this,q);var K=T(this,(q.__proto__||Object.getPrototypeOf(q)).call(this,G,U));return K.textbox=K.root.querySelector('input[type="text"]'),K.listen(),K}return i(q,[{key:"listen",value:function(){var U=this;this.textbox.addEventListener("keydown",function(K){b.default.match(K,"enter")?(U.save(),K.preventDefault()):b.default.match(K,"escape")&&(U.cancel(),K.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),K!=null?this.textbox.value=K:U!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+U)||""),this.root.setAttribute("data-mode",U)}},{key:"restoreFocus",value:function(){var U=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=U}},{key:"save",value:function(){var U=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var K=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",U,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",U,p.default.sources.USER)),this.quill.root.scrollTop=K;break}case"video":U=te(U);case"formula":{if(!U)break;var ae=this.quill.getSelection(!0);if(ae!=null){var me=ae.index+ae.length;this.quill.insertEmbed(me,this.root.getAttribute("data-mode"),U,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(me+1," ",p.default.sources.USER),this.quill.setSelection(me+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),q})(P.default);function te(O){var q=O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return q?(q[1]||"https")+"://www.youtube.com/embed/"+q[2]+"?showinfo=0":(q=O.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(q[1]||"https")+"://player.vimeo.com/video/"+q[2]+"/":O}function W(O,q){var G=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;q.forEach(function(U){var K=document.createElement("option");U===G?K.setAttribute("selected","selected"):K.setAttribute("value",U),O.appendChild(K)})}a.BaseTooltip=X,a.default=re}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,d=this.iterator();c=d();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,d=this.head;d!=null;){if(d===l)return c;c+=d.length(),d=d.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var d,u=this.iterator();d=u();){var f=d.length();if(l<f||c&&l===f&&(d.next==null||d.next.length()!==0))return[d,l];l-=f}return[null,0]},o.prototype.forEach=function(l){for(var c,d=this.iterator();c=d();)l(c)},o.prototype.forEachAt=function(l,c,d){if(!(c<=0))for(var u=this.find(l),f=u[0],p=u[1],m,b=l-p,v=this.iterator(f);(m=v())&&b<l+c;){var g=m.length();l>b?d(m,l-b,Math.min(c,b+g-l)):d(m,0,Math.min(g,l+c-b)),b+=g}},o.prototype.map=function(l){return this.reduce(function(c,d){return c.push(l(d)),c},[])},o.prototype.reduce=function(l,c){for(var d,u=this.iterator();d=u();)c=l(c,d);return c},o})();a.default=i}),(function(r,a,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,m){p.__proto__=m}||function(p,m){for(var b in m)m.hasOwnProperty(b)&&(p[b]=m[b])};return function(p,m){f(p,m);function b(){this.constructor=p}p.prototype=m===null?Object.create(m):(b.prototype=m.prototype,new b)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(17),l=s(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,u=(function(f){i(p,f);function p(m){var b=f.call(this,m)||this;return b.scroll=b,b.observer=new MutationObserver(function(v){b.update(v)}),b.observer.observe(b.domNode,c),b.attach(),b}return p.prototype.detach=function(){f.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(m,b){this.update(),m===0&&b===this.length()?this.children.forEach(function(v){v.remove()}):f.prototype.deleteAt.call(this,m,b)},p.prototype.formatAt=function(m,b,v,g){this.update(),f.prototype.formatAt.call(this,m,b,v,g)},p.prototype.insertAt=function(m,b,v){this.update(),f.prototype.insertAt.call(this,m,b,v)},p.prototype.optimize=function(m,b){var v=this;m===void 0&&(m=[]),b===void 0&&(b={}),f.prototype.optimize.call(this,b);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)m.push(g.pop());for(var w=function(S,E){E===void 0&&(E=!0),!(S==null||S===v)&&S.domNode.parentNode!=null&&(S.domNode[l.DATA_KEY].mutations==null&&(S.domNode[l.DATA_KEY].mutations=[]),E&&w(S.parent))},y=function(S){S.domNode[l.DATA_KEY]==null||S.domNode[l.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(y),S.optimize(b))},j=m,N=0;j.length>0;N+=1){if(N>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(j.forEach(function(S){var E=l.find(S.target,!0);E!=null&&(E.domNode===S.target&&(S.type==="childList"?(w(l.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(A){var P=l.find(A,!1);w(P,!1),P instanceof o.default&&P.children.forEach(function(I){w(I,!1)})})):S.type==="attributes"&&w(E.prev)),w(E))}),this.children.forEach(y),j=[].slice.call(this.observer.takeRecords()),g=j.slice();g.length>0;)m.push(g.pop())}},p.prototype.update=function(m,b){var v=this;b===void 0&&(b={}),m=m||this.observer.takeRecords(),m.map(function(g){var w=l.find(g.target,!0);return w==null?null:w.domNode[l.DATA_KEY].mutations==null?(w.domNode[l.DATA_KEY].mutations=[g],w):(w.domNode[l.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===v||g.domNode[l.DATA_KEY]==null||g.update(g.domNode[l.DATA_KEY].mutations||[],b)}),this.domNode[l.DATA_KEY].mutations!=null&&f.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,b),this.optimize(m,b)},p.blotName="scroll",p.defaultChild="block",p.scope=l.Scope.BLOCK_BLOT,p.tagName="DIV",p})(o.default);a.default=u}),(function(r,a,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,p){f.__proto__=p}||function(f,p){for(var m in p)p.hasOwnProperty(m)&&(f[m]=p[m])};return function(f,p){u(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(18),l=s(1);function c(u,f){if(Object.keys(u).length!==Object.keys(f).length)return!1;for(var p in u)if(u[p]!==f[p])return!1;return!0}var d=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(p){if(p.tagName!==f.tagName)return u.formats.call(this,p)},f.prototype.format=function(p,m){var b=this;p===this.statics.blotName&&!m?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(f.blotName,!0)),b.attributes.copy(v)}),this.unwrap()):u.prototype.format.call(this,p,m)},f.prototype.formatAt=function(p,m,b,v){if(this.formats()[b]!=null||l.query(b,l.Scope.ATTRIBUTE)){var g=this.isolate(p,m);g.format(b,v)}else u.prototype.formatAt.call(this,p,m,b,v)},f.prototype.optimize=function(p){u.prototype.optimize.call(this,p);var m=this.formats();if(Object.keys(m).length===0)return this.unwrap();var b=this.next;b instanceof f&&b.prev===this&&c(m,b.formats())&&(b.moveChildren(this),b.remove())},f.blotName="inline",f.scope=l.Scope.INLINE_BLOT,f.tagName="SPAN",f})(o.default);a.default=d}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(18),l=s(1),c=(function(d){i(u,d);function u(){return d!==null&&d.apply(this,arguments)||this}return u.formats=function(f){var p=l.query(u.blotName).tagName;if(f.tagName!==p)return d.formats.call(this,f)},u.prototype.format=function(f,p){l.query(f,l.Scope.BLOCK)!=null&&(f===this.statics.blotName&&!p?this.replaceWith(u.blotName):d.prototype.format.call(this,f,p))},u.prototype.formatAt=function(f,p,m,b){l.query(m,l.Scope.BLOCK)!=null?this.format(m,b):d.prototype.formatAt.call(this,f,p,m,b)},u.prototype.insertAt=function(f,p,m){if(m==null||l.query(p,l.Scope.INLINE)!=null)d.prototype.insertAt.call(this,f,p,m);else{var b=this.split(f),v=l.create(p,m);b.parent.insertBefore(v,b)}},u.prototype.update=function(f,p){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,f,p)},u.blotName="block",u.scope=l.Scope.BLOCK_BLOT,u.tagName="P",u})(o.default);a.default=c}),(function(r,a,s){var i=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,u){d.__proto__=u}||function(d,u){for(var f in u)u.hasOwnProperty(f)&&(d[f]=u[f])};return function(d,u){c(d,u);function f(){this.constructor=d}d.prototype=u===null?Object.create(u):(f.prototype=u.prototype,new f)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(19),l=(function(c){i(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(u){},d.prototype.format=function(u,f){c.prototype.formatAt.call(this,0,this.length(),u,f)},d.prototype.formatAt=function(u,f,p,m){u===0&&f===this.length()?this.format(p,m):c.prototype.formatAt.call(this,u,f,p,m)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d})(o.default);a.default=l}),(function(r,a,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var p in f)f.hasOwnProperty(p)&&(u[p]=f[p])};return function(u,f){d(u,f);function p(){this.constructor=u}u.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}})();Object.defineProperty(a,"__esModule",{value:!0});var o=s(19),l=s(1),c=(function(d){i(u,d);function u(f){var p=d.call(this,f)||this;return p.text=p.statics.value(p.domNode),p}return u.create=function(f){return document.createTextNode(f)},u.value=function(f){var p=f.data;return p.normalize&&(p=p.normalize()),p},u.prototype.deleteAt=function(f,p){this.domNode.data=this.text=this.text.slice(0,f)+this.text.slice(f+p)},u.prototype.index=function(f,p){return this.domNode===f?p:-1},u.prototype.insertAt=function(f,p,m){m==null?(this.text=this.text.slice(0,f)+p+this.text.slice(f),this.domNode.data=this.text):d.prototype.insertAt.call(this,f,p,m)},u.prototype.length=function(){return this.text.length},u.prototype.optimize=function(f){d.prototype.optimize.call(this,f),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof u&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},u.prototype.position=function(f,p){return[this.domNode,f]},u.prototype.split=function(f,p){if(p===void 0&&(p=!1),!p){if(f===0)return this;if(f===this.length())return this.next}var m=l.create(this.domNode.splitText(f));return this.parent.insertBefore(m,this.next),this.text=this.statics.value(this.domNode),m},u.prototype.update=function(f,p){var m=this;f.some(function(b){return b.type==="characterData"&&b.target===m.domNode})&&(this.text=this.statics.value(this.domNode))},u.prototype.value=function(){return this.text},u.blotName="text",u.scope=l.Scope.INLINE_BLOT,u})(o.default);a.default=c}),(function(r,a,s){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var d=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>d.length)&&(c=d.length),c-=l.length;var u=d.indexOf(l,c);return u!==-1&&u===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),u=d.length>>>0,f=arguments[1],p,m=0;m<u;m++)if(p=d[m],c.call(f,p,m,d))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(r,a){var s=-1,i=1,o=0;function l(N,S,E){if(N==S)return N?[[o,N]]:[];(E<0||N.length<E)&&(E=null);var A=f(N,S),P=N.substring(0,A);N=N.substring(A),S=S.substring(A),A=p(N,S);var I=N.substring(N.length-A);N=N.substring(0,N.length-A),S=S.substring(0,S.length-A);var B=c(N,S);return P&&B.unshift([o,P]),I&&B.push([o,I]),b(B),E!=null&&(B=w(B,E)),B=y(B),B}function c(N,S){var E;if(!N)return[[i,S]];if(!S)return[[s,N]];var A=N.length>S.length?N:S,P=N.length>S.length?S:N,I=A.indexOf(P);if(I!=-1)return E=[[i,A.substring(0,I)],[o,P],[i,A.substring(I+P.length)]],N.length>S.length&&(E[0][0]=E[2][0]=s),E;if(P.length==1)return[[s,N],[i,S]];var B=m(N,S);if(B){var T=B[0],_=B[1],R=B[2],z=B[3],H=B[4],Y=l(T,R),J=l(_,z);return Y.concat([[o,H]],J)}return d(N,S)}function d(N,S){for(var E=N.length,A=S.length,P=Math.ceil((E+A)/2),I=P,B=2*P,T=new Array(B),_=new Array(B),R=0;R<B;R++)T[R]=-1,_[R]=-1;T[I+1]=0,_[I+1]=0;for(var z=E-A,H=z%2!=0,Y=0,J=0,re=0,X=0,te=0;te<P;te++){for(var W=-te+Y;W<=te-J;W+=2){var O=I+W,q;W==-te||W!=te&&T[O-1]<T[O+1]?q=T[O+1]:q=T[O-1]+1;for(var G=q-W;q<E&&G<A&&N.charAt(q)==S.charAt(G);)q++,G++;if(T[O]=q,q>E)J+=2;else if(G>A)Y+=2;else if(H){var U=I+z-W;if(U>=0&&U<B&&_[U]!=-1){var K=E-_[U];if(q>=K)return u(N,S,q,G)}}}for(var ae=-te+re;ae<=te-X;ae+=2){var U=I+ae,K;ae==-te||ae!=te&&_[U-1]<_[U+1]?K=_[U+1]:K=_[U-1]+1;for(var me=K-ae;K<E&&me<A&&N.charAt(E-K-1)==S.charAt(A-me-1);)K++,me++;if(_[U]=K,K>E)X+=2;else if(me>A)re+=2;else if(!H){var O=I+z-ae;if(O>=0&&O<B&&T[O]!=-1){var q=T[O],G=I+q-O;if(K=E-K,q>=K)return u(N,S,q,G)}}}}return[[s,N],[i,S]]}function u(N,S,E,A){var P=N.substring(0,E),I=S.substring(0,A),B=N.substring(E),T=S.substring(A),_=l(P,I),R=l(B,T);return _.concat(R)}function f(N,S){if(!N||!S||N.charAt(0)!=S.charAt(0))return 0;for(var E=0,A=Math.min(N.length,S.length),P=A,I=0;E<P;)N.substring(I,P)==S.substring(I,P)?(E=P,I=E):A=P,P=Math.floor((A-E)/2+E);return P}function p(N,S){if(!N||!S||N.charAt(N.length-1)!=S.charAt(S.length-1))return 0;for(var E=0,A=Math.min(N.length,S.length),P=A,I=0;E<P;)N.substring(N.length-P,N.length-I)==S.substring(S.length-P,S.length-I)?(E=P,I=E):A=P,P=Math.floor((A-E)/2+E);return P}function m(N,S){var E=N.length>S.length?N:S,A=N.length>S.length?S:N;if(E.length<4||A.length*2<E.length)return null;function P(J,re,X){for(var te=J.substring(X,X+Math.floor(J.length/4)),W=-1,O="",q,G,U,K;(W=re.indexOf(te,W+1))!=-1;){var ae=f(J.substring(X),re.substring(W)),me=p(J.substring(0,X),re.substring(0,W));O.length<me+ae&&(O=re.substring(W-me,W)+re.substring(W,W+ae),q=J.substring(0,X-me),G=J.substring(X+ae),U=re.substring(0,W-me),K=re.substring(W+ae))}return O.length*2>=J.length?[q,G,U,K,O]:null}var I=P(E,A,Math.ceil(E.length/4)),B=P(E,A,Math.ceil(E.length/2)),T;if(!I&&!B)return null;B?I?T=I[4].length>B[4].length?I:B:T=B:T=I;var _,R,z,H;N.length>S.length?(_=T[0],R=T[1],z=T[2],H=T[3]):(z=T[0],H=T[1],_=T[2],R=T[3]);var Y=T[4];return[_,R,z,H,Y]}function b(N){N.push([o,""]);for(var S=0,E=0,A=0,P="",I="",B;S<N.length;)switch(N[S][0]){case i:A++,I+=N[S][1],S++;break;case s:E++,P+=N[S][1],S++;break;case o:E+A>1?(E!==0&&A!==0&&(B=f(I,P),B!==0&&(S-E-A>0&&N[S-E-A-1][0]==o?N[S-E-A-1][1]+=I.substring(0,B):(N.splice(0,0,[o,I.substring(0,B)]),S++),I=I.substring(B),P=P.substring(B)),B=p(I,P),B!==0&&(N[S][1]=I.substring(I.length-B)+N[S][1],I=I.substring(0,I.length-B),P=P.substring(0,P.length-B))),E===0?N.splice(S-A,E+A,[i,I]):A===0?N.splice(S-E,E+A,[s,P]):N.splice(S-E-A,E+A,[s,P],[i,I]),S=S-E-A+(E?1:0)+(A?1:0)+1):S!==0&&N[S-1][0]==o?(N[S-1][1]+=N[S][1],N.splice(S,1)):S++,A=0,E=0,P="",I="";break}N[N.length-1][1]===""&&N.pop();var T=!1;for(S=1;S<N.length-1;)N[S-1][0]==o&&N[S+1][0]==o&&(N[S][1].substring(N[S][1].length-N[S-1][1].length)==N[S-1][1]?(N[S][1]=N[S-1][1]+N[S][1].substring(0,N[S][1].length-N[S-1][1].length),N[S+1][1]=N[S-1][1]+N[S+1][1],N.splice(S-1,1),T=!0):N[S][1].substring(0,N[S+1][1].length)==N[S+1][1]&&(N[S-1][1]+=N[S+1][1],N[S][1]=N[S][1].substring(N[S+1][1].length)+N[S+1][1],N.splice(S+1,1),T=!0)),S++;T&&b(N)}var v=l;v.INSERT=i,v.DELETE=s,v.EQUAL=o,r.exports=v;function g(N,S){if(S===0)return[o,N];for(var E=0,A=0;A<N.length;A++){var P=N[A];if(P[0]===s||P[0]===o){var I=E+P[1].length;if(S===I)return[A+1,N];if(S<I){N=N.slice();var B=S-E,T=[P[0],P[1].slice(0,B)],_=[P[0],P[1].slice(B)];return N.splice(A,1,T,_),[A+1,N]}else E=I}}throw new Error("cursor_pos is out of bounds!")}function w(N,S){var E=g(N,S),A=E[1],P=E[0],I=A[P],B=A[P+1];if(I==null)return N;if(I[0]!==o)return N;if(B!=null&&I[1]+B[1]===B[1]+I[1])return A.splice(P,2,B,I),j(A,P,2);if(B!=null&&B[1].indexOf(I[1])===0){A.splice(P,2,[B[0],I[1]],[0,I[1]]);var T=B[1].slice(I[1].length);return T.length>0&&A.splice(P+2,0,[B[0],T]),j(A,P,3)}else return N}function y(N){for(var S=!1,E=function(B){return B.charCodeAt(0)>=56320&&B.charCodeAt(0)<=57343},A=function(B){return B.charCodeAt(B.length-1)>=55296&&B.charCodeAt(B.length-1)<=56319},P=2;P<N.length;P+=1)N[P-2][0]===o&&A(N[P-2][1])&&N[P-1][0]===s&&E(N[P-1][1])&&N[P][0]===i&&E(N[P][1])&&(S=!0,N[P-1][1]=N[P-2][1].slice(-1)+N[P-1][1],N[P][1]=N[P-2][1].slice(-1)+N[P][1],N[P-2][1]=N[P-2][1].slice(0,-1));if(!S)return N;for(var I=[],P=0;P<N.length;P+=1)N[P][1].length>0&&I.push(N[P]);return I}function j(N,S,E){for(var A=S+E-1;A>=0&&A>=S-1;A--)if(A+1<N.length){var P=N[A],I=N[A+1];P[0]===I[1]&&N.splice(A,2,[P[0],P[1]+I[1]])}return N}}),(function(r,a){a=r.exports=typeof Object.keys=="function"?Object.keys:s,a.shim=s;function s(i){var o=[];for(var l in i)o.push(l);return o}}),(function(r,a){var s=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";a=r.exports=s?i:o,a.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}a.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}}),(function(r,a){var s=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(d,u,f){this.fn=d,this.context=u,this.once=f||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var u=[],f,p;if(this._eventsCount===0)return u;for(p in f=this._events)s.call(f,p)&&u.push(i?p.slice(1):p);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},c.prototype.listeners=function(u,f){var p=i?i+u:u,m=this._events[p];if(f)return!!m;if(!m)return[];if(m.fn)return[m.fn];for(var b=0,v=m.length,g=new Array(v);b<v;b++)g[b]=m[b].fn;return g},c.prototype.emit=function(u,f,p,m,b,v){var g=i?i+u:u;if(!this._events[g])return!1;var w=this._events[g],y=arguments.length,j,N;if(w.fn){switch(w.once&&this.removeListener(u,w.fn,void 0,!0),y){case 1:return w.fn.call(w.context),!0;case 2:return w.fn.call(w.context,f),!0;case 3:return w.fn.call(w.context,f,p),!0;case 4:return w.fn.call(w.context,f,p,m),!0;case 5:return w.fn.call(w.context,f,p,m,b),!0;case 6:return w.fn.call(w.context,f,p,m,b,v),!0}for(N=1,j=new Array(y-1);N<y;N++)j[N-1]=arguments[N];w.fn.apply(w.context,j)}else{var S=w.length,E;for(N=0;N<S;N++)switch(w[N].once&&this.removeListener(u,w[N].fn,void 0,!0),y){case 1:w[N].fn.call(w[N].context);break;case 2:w[N].fn.call(w[N].context,f);break;case 3:w[N].fn.call(w[N].context,f,p);break;case 4:w[N].fn.call(w[N].context,f,p,m);break;default:if(!j)for(E=1,j=new Array(y-1);E<y;E++)j[E-1]=arguments[E];w[N].fn.apply(w[N].context,j)}}return!0},c.prototype.on=function(u,f,p){var m=new l(f,p||this),b=i?i+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],m]:this._events[b].push(m):(this._events[b]=m,this._eventsCount++),this},c.prototype.once=function(u,f,p){var m=new l(f,p||this,!0),b=i?i+u:u;return this._events[b]?this._events[b].fn?this._events[b]=[this._events[b],m]:this._events[b].push(m):(this._events[b]=m,this._eventsCount++),this},c.prototype.removeListener=function(u,f,p,m){var b=i?i+u:u;if(!this._events[b])return this;if(!f)return--this._eventsCount===0?this._events=new o:delete this._events[b],this;var v=this._events[b];if(v.fn)v.fn===f&&(!m||v.once)&&(!p||v.context===p)&&(--this._eventsCount===0?this._events=new o:delete this._events[b]);else{for(var g=0,w=[],y=v.length;g<y;g++)(v[g].fn!==f||m&&!v[g].once||p&&v[g].context!==p)&&w.push(v[g]);w.length?this._events[b]=w.length===1?w[0]:w:--this._eventsCount===0?this._events=new o:delete this._events[b]}return this},c.prototype.removeAllListeners=function(u){var f;return u?(f=i?i+u:u,this._events[f]&&(--this._eventsCount===0?this._events=new o:delete this._events[f])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.matchText=a.matchSpacing=a.matchNewline=a.matchBlot=a.matchAttributor=a.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(we){return typeof we}:function(we){return we&&typeof Symbol=="function"&&we.constructor===Symbol&&we!==Symbol.prototype?"symbol":typeof we},o=(function(){function we(Oe,de){var ce=[],Ce=!0,Xe=!1,xe=void 0;try{for(var fe=Oe[Symbol.iterator](),Se;!(Ce=(Se=fe.next()).done)&&(ce.push(Se.value),!(de&&ce.length===de));Ce=!0);}catch(qe){Xe=!0,xe=qe}finally{try{!Ce&&fe.return&&fe.return()}finally{if(Xe)throw xe}}return ce}return function(Oe,de){if(Array.isArray(Oe))return Oe;if(Symbol.iterator in Object(Oe))return we(Oe,de);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function we(Oe,de){for(var ce=0;ce<de.length;ce++){var Ce=de[ce];Ce.enumerable=Ce.enumerable||!1,Ce.configurable=!0,"value"in Ce&&(Ce.writable=!0),Object.defineProperty(Oe,Ce.key,Ce)}}return function(Oe,de,ce){return de&&we(Oe.prototype,de),ce&&we(Oe,ce),Oe}})(),c=s(3),d=_(c),u=s(2),f=_(u),p=s(0),m=_(p),b=s(5),v=_(b),g=s(10),w=_(g),y=s(9),j=_(y),N=s(36),S=s(37),E=s(13),A=_(E),P=s(26),I=s(38),B=s(39),T=s(40);function _(we){return we&&we.__esModule?we:{default:we}}function R(we,Oe,de){return Oe in we?Object.defineProperty(we,Oe,{value:de,enumerable:!0,configurable:!0,writable:!0}):we[Oe]=de,we}function z(we,Oe){if(!(we instanceof Oe))throw new TypeError("Cannot call a class as a function")}function H(we,Oe){if(!we)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Oe&&(typeof Oe=="object"||typeof Oe=="function")?Oe:we}function Y(we,Oe){if(typeof Oe!="function"&&Oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Oe);we.prototype=Object.create(Oe&&Oe.prototype,{constructor:{value:we,enumerable:!1,writable:!0,configurable:!0}}),Oe&&(Object.setPrototypeOf?Object.setPrototypeOf(we,Oe):we.__proto__=Oe)}var J=(0,w.default)("quill:clipboard"),re="__ql-matcher",X=[[Node.TEXT_NODE,Ee],[Node.TEXT_NODE,Ae],["br",Me],[Node.ELEMENT_NODE,Ae],[Node.ELEMENT_NODE,le],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,se],[Node.ELEMENT_NODE,Z],["li",Ue],["b",me.bind(me,"bold")],["i",me.bind(me,"italic")],["style",ue]],te=[N.AlignAttribute,I.DirectionAttribute].reduce(function(we,Oe){return we[Oe.keyName]=Oe,we},{}),W=[N.AlignStyle,S.BackgroundStyle,P.ColorStyle,I.DirectionStyle,B.FontStyle,T.SizeStyle].reduce(function(we,Oe){return we[Oe.keyName]=Oe,we},{}),O=(function(we){Y(Oe,we);function Oe(de,ce){z(this,Oe);var Ce=H(this,(Oe.__proto__||Object.getPrototypeOf(Oe)).call(this,de,ce));return Ce.quill.root.addEventListener("paste",Ce.onPaste.bind(Ce)),Ce.container=Ce.quill.addContainer("ql-clipboard"),Ce.container.setAttribute("contenteditable",!0),Ce.container.setAttribute("tabindex",-1),Ce.matchers=[],X.concat(Ce.options.matchers).forEach(function(Xe){var xe=o(Xe,2),fe=xe[0],Se=xe[1];!ce.matchVisual&&Se===ie||Ce.addMatcher(fe,Se)}),Ce}return l(Oe,[{key:"addMatcher",value:function(ce,Ce){this.matchers.push([ce,Ce])}},{key:"convert",value:function(ce){if(typeof ce=="string")return this.container.innerHTML=ce.replace(/\>\r?\n +\</g,"><"),this.convert();var Ce=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ce[A.default.blotName]){var Xe=this.container.innerText;return this.container.innerHTML="",new f.default().insert(Xe,R({},A.default.blotName,Ce[A.default.blotName]))}var xe=this.prepareMatching(),fe=o(xe,2),Se=fe[0],qe=fe[1],je=ae(this.container,Se,qe);return U(je,`
`)&&je.ops[je.ops.length-1].attributes==null&&(je=je.compose(new f.default().retain(je.length()-1).delete(1))),J.log("convert",this.container.innerHTML,je),this.container.innerHTML="",je}},{key:"dangerouslyPasteHTML",value:function(ce,Ce){var Xe=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ce=="string")this.quill.setContents(this.convert(ce),Ce),this.quill.setSelection(0,v.default.sources.SILENT);else{var xe=this.convert(Ce);this.quill.updateContents(new f.default().retain(ce).concat(xe),Xe),this.quill.setSelection(ce+xe.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ce){var Ce=this;if(!(ce.defaultPrevented||!this.quill.isEnabled())){var Xe=this.quill.getSelection(),xe=new f.default().retain(Xe.index),fe=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){xe=xe.concat(Ce.convert()).delete(Xe.length),Ce.quill.updateContents(xe,v.default.sources.USER),Ce.quill.setSelection(xe.length()-Xe.length,v.default.sources.SILENT),Ce.quill.scrollingContainer.scrollTop=fe,Ce.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ce=this,Ce=[],Xe=[];return this.matchers.forEach(function(xe){var fe=o(xe,2),Se=fe[0],qe=fe[1];switch(Se){case Node.TEXT_NODE:Xe.push(qe);break;case Node.ELEMENT_NODE:Ce.push(qe);break;default:[].forEach.call(ce.container.querySelectorAll(Se),function(je){je[re]=je[re]||[],je[re].push(qe)});break}}),[Ce,Xe]}}]),Oe})(j.default);O.DEFAULTS={matchers:[],matchVisual:!0};function q(we,Oe,de){return(typeof Oe>"u"?"undefined":i(Oe))==="object"?Object.keys(Oe).reduce(function(ce,Ce){return q(ce,Ce,Oe[Ce])},we):we.reduce(function(ce,Ce){return Ce.attributes&&Ce.attributes[Oe]?ce.push(Ce):ce.insert(Ce.insert,(0,d.default)({},R({},Oe,de),Ce.attributes))},new f.default)}function G(we){if(we.nodeType!==Node.ELEMENT_NODE)return{};var Oe="__ql-computed-style";return we[Oe]||(we[Oe]=window.getComputedStyle(we))}function U(we,Oe){for(var de="",ce=we.ops.length-1;ce>=0&&de.length<Oe.length;--ce){var Ce=we.ops[ce];if(typeof Ce.insert!="string")break;de=Ce.insert+de}return de.slice(-1*Oe.length)===Oe}function K(we){if(we.childNodes.length===0)return!1;var Oe=G(we);return["block","list-item"].indexOf(Oe.display)>-1}function ae(we,Oe,de){return we.nodeType===we.TEXT_NODE?de.reduce(function(ce,Ce){return Ce(we,ce)},new f.default):we.nodeType===we.ELEMENT_NODE?[].reduce.call(we.childNodes||[],function(ce,Ce){var Xe=ae(Ce,Oe,de);return Ce.nodeType===we.ELEMENT_NODE&&(Xe=Oe.reduce(function(xe,fe){return fe(Ce,xe)},Xe),Xe=(Ce[re]||[]).reduce(function(xe,fe){return fe(Ce,xe)},Xe)),ce.concat(Xe)},new f.default):new f.default}function me(we,Oe,de){return q(de,we,!0)}function se(we,Oe){var de=m.default.Attributor.Attribute.keys(we),ce=m.default.Attributor.Class.keys(we),Ce=m.default.Attributor.Style.keys(we),Xe={};return de.concat(ce).concat(Ce).forEach(function(xe){var fe=m.default.query(xe,m.default.Scope.ATTRIBUTE);fe!=null&&(Xe[fe.attrName]=fe.value(we),Xe[fe.attrName])||(fe=te[xe],fe!=null&&(fe.attrName===xe||fe.keyName===xe)&&(Xe[fe.attrName]=fe.value(we)||void 0),fe=W[xe],fe!=null&&(fe.attrName===xe||fe.keyName===xe)&&(fe=W[xe],Xe[fe.attrName]=fe.value(we)||void 0))}),Object.keys(Xe).length>0&&(Oe=q(Oe,Xe)),Oe}function le(we,Oe){var de=m.default.query(we);if(de==null)return Oe;if(de.prototype instanceof m.default.Embed){var ce={},Ce=de.value(we);Ce!=null&&(ce[de.blotName]=Ce,Oe=new f.default().insert(ce,de.formats(we)))}else typeof de.formats=="function"&&(Oe=q(Oe,de.blotName,de.formats(we)));return Oe}function Me(we,Oe){return U(Oe,`
`)||Oe.insert(`
`),Oe}function ue(){return new f.default}function Ue(we,Oe){var de=m.default.query(we);if(de==null||de.blotName!=="list-item"||!U(Oe,`
`))return Oe;for(var ce=-1,Ce=we.parentNode;!Ce.classList.contains("ql-clipboard");)(m.default.query(Ce)||{}).blotName==="list"&&(ce+=1),Ce=Ce.parentNode;return ce<=0?Oe:Oe.compose(new f.default().retain(Oe.length()-1).retain(1,{indent:ce}))}function Ae(we,Oe){return U(Oe,`
`)||(K(we)||Oe.length()>0&&we.nextSibling&&K(we.nextSibling))&&Oe.insert(`
`),Oe}function ie(we,Oe){if(K(we)&&we.nextElementSibling!=null&&!U(Oe,`

`)){var de=we.offsetHeight+parseFloat(G(we).marginTop)+parseFloat(G(we).marginBottom);we.nextElementSibling.offsetTop>we.offsetTop+de*1.5&&Oe.insert(`
`)}return Oe}function Z(we,Oe){var de={},ce=we.style||{};return ce.fontStyle&&G(we).fontStyle==="italic"&&(de.italic=!0),ce.fontWeight&&(G(we).fontWeight.startsWith("bold")||parseInt(G(we).fontWeight)>=700)&&(de.bold=!0),Object.keys(de).length>0&&(Oe=q(Oe,de)),parseFloat(ce.textIndent||0)>0&&(Oe=new f.default().insert("	").concat(Oe)),Oe}function Ee(we,Oe){var de=we.data;if(we.parentNode.tagName==="O:P")return Oe.insert(de.trim());if(de.trim().length===0&&we.parentNode.classList.contains("ql-clipboard"))return Oe;if(!G(we.parentNode).whiteSpace.startsWith("pre")){var ce=function(Xe,xe){return xe=xe.replace(/[^\u00a0]/g,""),xe.length<1&&Xe?" ":xe};de=de.replace(/\r\n/g," ").replace(/\n/g," "),de=de.replace(/\s\s+/g,ce.bind(ce,!0)),(we.previousSibling==null&&K(we.parentNode)||we.previousSibling!=null&&K(we.previousSibling))&&(de=de.replace(/^\s+/,ce.bind(ce,!1))),(we.nextSibling==null&&K(we.parentNode)||we.nextSibling!=null&&K(we.nextSibling))&&(de=de.replace(/\s+$/,ce.bind(ce,!1)))}return Oe.insert(de)}a.default=O,a.matchAttributor=se,a.matchBlot=le,a.matchNewline=Ae,a.matchSpacing=ie,a.matchText=Ee}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(6),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"optimize",value:function(w){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,w),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v})(c.default);m.blotName="bold",m.tagName=["STRONG","B"],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.addControls=a.default=void 0;var i=(function(){function T(_,R){var z=[],H=!0,Y=!1,J=void 0;try{for(var re=_[Symbol.iterator](),X;!(H=(X=re.next()).done)&&(z.push(X.value),!(R&&z.length===R));H=!0);}catch(te){Y=!0,J=te}finally{try{!H&&re.return&&re.return()}finally{if(Y)throw J}}return z}return function(_,R){if(Array.isArray(_))return _;if(Symbol.iterator in Object(_))return T(_,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function T(_,R){for(var z=0;z<R.length;z++){var H=R[z];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(_,H.key,H)}}return function(_,R,z){return R&&T(_.prototype,R),z&&T(_,z),_}})(),l=s(2),c=w(l),d=s(0),u=w(d),f=s(5),p=w(f),m=s(10),b=w(m),v=s(9),g=w(v);function w(T){return T&&T.__esModule?T:{default:T}}function y(T,_,R){return _ in T?Object.defineProperty(T,_,{value:R,enumerable:!0,configurable:!0,writable:!0}):T[_]=R,T}function j(T,_){if(!(T instanceof _))throw new TypeError("Cannot call a class as a function")}function N(T,_){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:T}function S(T,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);T.prototype=Object.create(_&&_.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(T,_):T.__proto__=_)}var E=(0,b.default)("quill:toolbar"),A=(function(T){S(_,T);function _(R,z){j(this,_);var H=N(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,R,z));if(Array.isArray(H.options.container)){var Y=document.createElement("div");I(Y,H.options.container),R.container.parentNode.insertBefore(Y,R.container),H.container=Y}else typeof H.options.container=="string"?H.container=document.querySelector(H.options.container):H.container=H.options.container;if(!(H.container instanceof HTMLElement)){var J;return J=E.error("Container required for toolbar",H.options),N(H,J)}return H.container.classList.add("ql-toolbar"),H.controls=[],H.handlers={},Object.keys(H.options.handlers).forEach(function(re){H.addHandler(re,H.options.handlers[re])}),[].forEach.call(H.container.querySelectorAll("button, select"),function(re){H.attach(re)}),H.quill.on(p.default.events.EDITOR_CHANGE,function(re,X){re===p.default.events.SELECTION_CHANGE&&H.update(X)}),H.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var re=H.quill.selection.getRange(),X=i(re,1),te=X[0];H.update(te)}),H}return o(_,[{key:"addHandler",value:function(z,H){this.handlers[z]=H}},{key:"attach",value:function(z){var H=this,Y=[].find.call(z.classList,function(re){return re.indexOf("ql-")===0});if(Y){if(Y=Y.slice(3),z.tagName==="BUTTON"&&z.setAttribute("type","button"),this.handlers[Y]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Y]==null){E.warn("ignoring attaching to disabled format",Y,z);return}if(u.default.query(Y)==null){E.warn("ignoring attaching to nonexistent format",Y,z);return}}var J=z.tagName==="SELECT"?"change":"click";z.addEventListener(J,function(re){var X=void 0;if(z.tagName==="SELECT"){if(z.selectedIndex<0)return;var te=z.options[z.selectedIndex];te.hasAttribute("selected")?X=!1:X=te.value||!1}else z.classList.contains("ql-active")?X=!1:X=z.value||!z.hasAttribute("value"),re.preventDefault();H.quill.focus();var W=H.quill.selection.getRange(),O=i(W,1),q=O[0];if(H.handlers[Y]!=null)H.handlers[Y].call(H,X);else if(u.default.query(Y).prototype instanceof u.default.Embed){if(X=prompt("Enter "+Y),!X)return;H.quill.updateContents(new c.default().retain(q.index).delete(q.length).insert(y({},Y,X)),p.default.sources.USER)}else H.quill.format(Y,X,p.default.sources.USER);H.update(q)}),this.controls.push([Y,z])}}},{key:"update",value:function(z){var H=z==null?{}:this.quill.getFormat(z);this.controls.forEach(function(Y){var J=i(Y,2),re=J[0],X=J[1];if(X.tagName==="SELECT"){var te=void 0;if(z==null)te=null;else if(H[re]==null)te=X.querySelector("option[selected]");else if(!Array.isArray(H[re])){var W=H[re];typeof W=="string"&&(W=W.replace(/\"/g,'\\"')),te=X.querySelector('option[value="'+W+'"]')}te==null?(X.value="",X.selectedIndex=-1):te.selected=!0}else if(z==null)X.classList.remove("ql-active");else if(X.hasAttribute("value")){var O=H[re]===X.getAttribute("value")||H[re]!=null&&H[re].toString()===X.getAttribute("value")||H[re]==null&&!X.getAttribute("value");X.classList.toggle("ql-active",O)}else X.classList.toggle("ql-active",H[re]!=null)})}}]),_})(g.default);A.DEFAULTS={};function P(T,_,R){var z=document.createElement("button");z.setAttribute("type","button"),z.classList.add("ql-"+_),R!=null&&(z.value=R),T.appendChild(z)}function I(T,_){Array.isArray(_[0])||(_=[_]),_.forEach(function(R){var z=document.createElement("span");z.classList.add("ql-formats"),R.forEach(function(H){if(typeof H=="string")P(z,H);else{var Y=Object.keys(H)[0],J=H[Y];Array.isArray(J)?B(z,Y,J):P(z,Y,J)}}),T.appendChild(z)})}function B(T,_,R){var z=document.createElement("select");z.classList.add("ql-"+_),R.forEach(function(H){var Y=document.createElement("option");H!==!1?Y.setAttribute("value",H):Y.setAttribute("selected","selected"),z.appendChild(Y)}),T.appendChild(z)}A.DEFAULTS={container:null,handlers:{clean:function(){var _=this,R=this.quill.getSelection();if(R!=null)if(R.length==0){var z=this.quill.getFormat();Object.keys(z).forEach(function(H){u.default.query(H,u.default.Scope.INLINE)!=null&&_.quill.format(H,!1)})}else this.quill.removeFormat(R,p.default.sources.USER)},direction:function(_){var R=this.quill.getFormat().align;_==="rtl"&&R==null?this.quill.format("align","right",p.default.sources.USER):!_&&R==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",_,p.default.sources.USER)},indent:function(_){var R=this.quill.getSelection(),z=this.quill.getFormat(R),H=parseInt(z.indent||0);if(_==="+1"||_==="-1"){var Y=_==="+1"?1:-1;z.direction==="rtl"&&(Y*=-1),this.quill.format("indent",H+Y,p.default.sources.USER)}},link:function(_){_===!0&&(_=prompt("Enter link URL:")),this.quill.format("link",_,p.default.sources.USER)},list:function(_){var R=this.quill.getSelection(),z=this.quill.getFormat(R);_==="check"?z.list==="checked"||z.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",_,p.default.sources.USER)}}},a.default=A,a.addControls=I}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(28),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(g,w){u(this,v);var y=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return y.label.innerHTML=w,y.container.classList.add("ql-color-picker"),[].slice.call(y.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(j){j.classList.add("ql-primary")}),y}return i(v,[{key:"buildItem",value:function(w){var y=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,w);return y.style.backgroundColor=w.getAttribute("value")||"",y}},{key:"selectItem",value:function(w,y){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,w,y);var j=this.label.querySelector(".ql-color-label"),N=w&&w.getAttribute("data-value")||"";j&&(j.tagName==="line"?j.style.stroke=N:j.style.fill=N)}}]),v})(c.default);a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(28),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(g,w){u(this,v);var y=f(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return y.container.classList.add("ql-icon-picker"),[].forEach.call(y.container.querySelectorAll(".ql-picker-item"),function(j){j.innerHTML=w[j.getAttribute("data-value")||""]}),y.defaultItem=y.container.querySelector(".ql-selected"),y.selectItem(y.defaultItem),y}return i(v,[{key:"selectItem",value:function(w,y){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,w,y),w=w||this.defaultItem,this.label.innerHTML=w.innerHTML}}]),v})(c.default);a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function c(d,u){for(var f=0;f<u.length;f++){var p=u[f];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,u,f){return u&&c(d.prototype,u),f&&c(d,f),d}})();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(d,u){var f=this;o(this,c),this.quill=d,this.boundsContainer=u||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){f.root.style.marginTop=-1*f.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(u){var f=u.left+u.width/2-this.root.offsetWidth/2,p=u.bottom+this.quill.root.scrollTop;this.root.style.left=f+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var m=this.boundsContainer.getBoundingClientRect(),b=this.root.getBoundingClientRect(),v=0;if(b.right>m.right&&(v=m.right-b.right,this.root.style.left=f+v+"px"),b.left<m.left&&(v=m.left-b.left,this.root.style.left=f+v+"px"),b.bottom>m.bottom){var g=b.bottom-b.top,w=u.bottom-u.top+g;this.root.style.top=p-w+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c})();a.default=l}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function B(T,_){var R=[],z=!0,H=!1,Y=void 0;try{for(var J=T[Symbol.iterator](),re;!(z=(re=J.next()).done)&&(R.push(re.value),!(_&&R.length===_));z=!0);}catch(X){H=!0,Y=X}finally{try{!z&&J.return&&J.return()}finally{if(H)throw Y}}return R}return function(T,_){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return B(T,_);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function B(T,_,R){T===null&&(T=Function.prototype);var z=Object.getOwnPropertyDescriptor(T,_);if(z===void 0){var H=Object.getPrototypeOf(T);return H===null?void 0:B(H,_,R)}else{if("value"in z)return z.value;var Y=z.get;return Y===void 0?void 0:Y.call(R)}},l=(function(){function B(T,_){for(var R=0;R<_.length;R++){var z=_[R];z.enumerable=z.enumerable||!1,z.configurable=!0,"value"in z&&(z.writable=!0),Object.defineProperty(T,z.key,z)}}return function(T,_,R){return _&&B(T.prototype,_),R&&B(T,R),T}})(),c=s(3),d=j(c),u=s(8),f=j(u),p=s(43),m=j(p),b=s(27),v=j(b),g=s(15),w=s(41),y=j(w);function j(B){return B&&B.__esModule?B:{default:B}}function N(B,T){if(!(B instanceof T))throw new TypeError("Cannot call a class as a function")}function S(B,T){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:B}function E(B,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);B.prototype=Object.create(T&&T.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(B,T):B.__proto__=T)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],P=(function(B){E(T,B);function T(_,R){N(this,T),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=A);var z=S(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,_,R));return z.quill.container.classList.add("ql-snow"),z}return l(T,[{key:"extendToolbar",value:function(R){R.container.classList.add("ql-snow"),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),y.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),y.default),this.tooltip=new I(this.quill,this.options.bounds),R.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(z,H){R.handlers.link.call(R,!H.format.link)})}}]),T})(m.default);P.DEFAULTS=(0,d.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){if(T){var _=this.quill.getSelection();if(_==null||_.length==0)return;var R=this.quill.getText(_);/^\S+@\S+\.\S+$/.test(R)&&R.indexOf("mailto:")!==0&&(R="mailto:"+R);var z=this.quill.theme.tooltip;z.edit("link",R)}else this.quill.format("link",!1)}}}}});var I=(function(B){E(T,B);function T(_,R){N(this,T);var z=S(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,_,R));return z.preview=z.root.querySelector("a.ql-preview"),z}return l(T,[{key:"listen",value:function(){var R=this;o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(z){R.root.classList.contains("ql-editing")?R.save():R.edit("link",R.preview.textContent),z.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(z){if(R.linkRange!=null){var H=R.linkRange;R.restoreFocus(),R.quill.formatText(H,"link",!1,f.default.sources.USER),delete R.linkRange}z.preventDefault(),R.hide()}),this.quill.on(f.default.events.SELECTION_CHANGE,function(z,H,Y){if(z!=null){if(z.length===0&&Y===f.default.sources.USER){var J=R.quill.scroll.descendant(v.default,z.index),re=i(J,2),X=re[0],te=re[1];if(X!=null){R.linkRange=new g.Range(z.index-te,X.length());var W=v.default.formats(X.domNode);R.preview.textContent=W,R.preview.setAttribute("href",W),R.show(),R.position(R.quill.getBounds(R.linkRange));return}}else delete R.linkRange;R.hide()}})}},{key:"show",value:function(){o(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),T})(p.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),a.default=P}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(29),o=Ce(i),l=s(36),c=s(38),d=s(64),u=s(65),f=Ce(u),p=s(66),m=Ce(p),b=s(67),v=Ce(b),g=s(37),w=s(26),y=s(39),j=s(40),N=s(56),S=Ce(N),E=s(68),A=Ce(E),P=s(27),I=Ce(P),B=s(69),T=Ce(B),_=s(70),R=Ce(_),z=s(71),H=Ce(z),Y=s(72),J=Ce(Y),re=s(73),X=Ce(re),te=s(13),W=Ce(te),O=s(74),q=Ce(O),G=s(75),U=Ce(G),K=s(57),ae=Ce(K),me=s(41),se=Ce(me),le=s(28),Me=Ce(le),ue=s(59),Ue=Ce(ue),Ae=s(60),ie=Ce(Ae),Z=s(61),Ee=Ce(Z),we=s(108),Oe=Ce(we),de=s(62),ce=Ce(de);function Ce(Xe){return Xe&&Xe.__esModule?Xe:{default:Xe}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":w.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":y.FontClass,"attributors/class/size":j.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":w.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":y.FontStyle,"attributors/style/size":j.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":d.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":w.ColorStyle,"formats/font":y.FontClass,"formats/size":j.SizeClass,"formats/blockquote":f.default,"formats/code-block":W.default,"formats/header":m.default,"formats/list":v.default,"formats/bold":S.default,"formats/code":te.Code,"formats/italic":A.default,"formats/link":I.default,"formats/script":T.default,"formats/strike":R.default,"formats/underline":H.default,"formats/image":J.default,"formats/video":X.default,"formats/list/item":b.ListItem,"modules/formula":q.default,"modules/syntax":U.default,"modules/toolbar":ae.default,"themes/bubble":Oe.default,"themes/snow":ce.default,"ui/icons":se.default,"ui/picker":Me.default,"ui/icon-picker":ie.default,"ui/color-picker":Ue.default,"ui/tooltip":Ee.default},!0),a.default=o.default}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.IndentClass=void 0;var i=(function(){function v(g,w){for(var y=0;y<w.length;y++){var j=w[y];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,w,y){return w&&v(g.prototype,w),y&&v(g,y),g}})(),o=function v(g,w,y){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,w);if(j===void 0){var N=Object.getPrototypeOf(g);return N===null?void 0:v(N,w,y)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(y)}},l=s(0),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function u(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function p(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var m=(function(v){p(g,v);function g(){return u(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"add",value:function(y,j){if(j==="+1"||j==="-1"){var N=this.value(y)||0;j=j==="+1"?N+1:N-1}return j===0?(this.remove(y),!0):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,y,j)}},{key:"canAdd",value:function(y,j){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,y,j)||o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,y,parseInt(j))}},{key:"value",value:function(y){return parseInt(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,y))||void 0}}]),g})(c.default.Attributor.Class),b=new m("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});a.IndentClass=b}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(4),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="blockquote",f.tagName="blockquote",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function m(b,v){for(var g=0;g<v.length;g++){var w=v[g];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,v,g){return v&&m(b.prototype,v),g&&m(b,g),b}})(),o=s(4),l=c(o);function c(m){return m&&m.__esModule?m:{default:m}}function d(m,b){if(!(m instanceof b))throw new TypeError("Cannot call a class as a function")}function u(m,b){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:m}function f(m,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);m.prototype=Object.create(b&&b.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(m,b):m.__proto__=b)}var p=(function(m){f(b,m);function b(){return d(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),b})(l.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],a.default=p}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.ListItem=void 0;var i=(function(){function N(S,E){for(var A=0;A<E.length;A++){var P=E[A];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(S,P.key,P)}}return function(S,E,A){return E&&N(S.prototype,E),A&&N(S,A),S}})(),o=function N(S,E,A){S===null&&(S=Function.prototype);var P=Object.getOwnPropertyDescriptor(S,E);if(P===void 0){var I=Object.getPrototypeOf(S);return I===null?void 0:N(I,E,A)}else{if("value"in P)return P.value;var B=P.get;return B===void 0?void 0:B.call(A)}},l=s(0),c=m(l),d=s(4),u=m(d),f=s(25),p=m(f);function m(N){return N&&N.__esModule?N:{default:N}}function b(N,S,E){return S in N?Object.defineProperty(N,S,{value:E,enumerable:!0,configurable:!0,writable:!0}):N[S]=E,N}function v(N,S){if(!(N instanceof S))throw new TypeError("Cannot call a class as a function")}function g(N,S){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:N}function w(N,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);N.prototype=Object.create(S&&S.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(N,S):N.__proto__=S)}var y=(function(N){w(S,N);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return i(S,[{key:"format",value:function(A,P){A===j.blotName&&!P?this.replaceWith(c.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,A,P)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,P){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,P),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,A,P))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,A)}}]),S})(u.default);y.blotName="list-item",y.tagName="LI";var j=(function(N){w(S,N),i(S,null,[{key:"create",value:function(A){var P=A==="ordered"?"OL":"UL",I=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,P);return(A==="checked"||A==="unchecked")&&I.setAttribute("data-checked",A==="checked"),I}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(E){v(this,S);var A=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,E)),P=function(B){if(B.target.parentNode===E){var T=A.statics.formats(E),_=c.default.find(B.target);T==="checked"?_.format("list","unchecked"):T==="unchecked"&&_.format("list","checked")}};return E.addEventListener("touchstart",P),E.addEventListener("mousedown",P),A}return i(S,[{key:"format",value:function(A,P){this.children.length>0&&this.children.tail.format(A,P)}},{key:"formats",value:function(){return b({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,P){if(A instanceof y)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,A,P);else{var I=P==null?this.length():P.offset(this),B=this.split(I);B.parent.insertBefore(A,B)}}},{key:"optimize",value:function(A){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,A);var P=this.next;P!=null&&P.prev===this&&P.statics.blotName===this.statics.blotName&&P.domNode.tagName===this.domNode.tagName&&P.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(P.moveChildren(this),P.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var P=c.default.create(this.statics.defaultChild);A.moveChildren(P),this.appendChild(P)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,A)}}]),S})(p.default);j.blotName="list",j.scope=c.default.Scope.BLOCK_BLOT,j.tagName=["OL","UL"],j.defaultChild="list-item",j.allowedChildren=[y],a.ListItem=y,a.default=j}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(56),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="italic",f.tagName=["EM","I"],a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function b(v,g){for(var w=0;w<g.length;w++){var y=g[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,g,w){return g&&b(v.prototype,g),w&&b(v,w),v}})(),o=function b(v,g,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,g);if(y===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:b(j,g,w)}else{if("value"in y)return y.value;var N=y.get;return N===void 0?void 0:N.call(w)}},l=s(6),c=d(l);function d(b){return b&&b.__esModule?b:{default:b}}function u(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function f(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function p(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var m=(function(b){p(v,b);function v(){return u(this,v),f(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,null,[{key:"create",value:function(w){return w==="super"?document.createElement("sup"):w==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,w)}},{key:"formats",value:function(w){if(w.tagName==="SUB")return"sub";if(w.tagName==="SUP")return"super"}}]),v})(c.default);m.blotName="script",m.tagName=["SUB","SUP"],a.default=m}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="strike",f.tagName="S",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,m){if(!(p instanceof m))throw new TypeError("Cannot call a class as a function")}function d(p,m){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:p}function u(p,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);p.prototype=Object.create(m&&m.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(p,m):p.__proto__=m)}var f=(function(p){u(m,p);function m(){return c(this,m),d(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return m})(o.default);f.blotName="underline",f.tagName="U",a.default=f}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),o=function g(w,y,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,y);if(N===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,y,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(0),c=u(l),d=s(27);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function p(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function m(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var b=["alt","height","width"],v=(function(g){m(w,g);function w(){return f(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"format",value:function(j,N){b.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,j);return typeof j=="string"&&N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return b.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"match",value:function(j){return/\.(jpe?g|gif|png)$/.test(j)||/^data:image\/.+;base64/.test(j)}},{key:"sanitize",value:function(j){return(0,d.sanitize)(j,["http","https","data"])?j:"//:0"}},{key:"value",value:function(j){return j.getAttribute("src")}}]),w})(c.default.Embed);v.blotName="image",v.tagName="IMG",a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0});var i=(function(){function g(w,y){for(var j=0;j<y.length;j++){var N=y[j];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(w,N.key,N)}}return function(w,y,j){return y&&g(w.prototype,y),j&&g(w,j),w}})(),o=function g(w,y,j){w===null&&(w=Function.prototype);var N=Object.getOwnPropertyDescriptor(w,y);if(N===void 0){var S=Object.getPrototypeOf(w);return S===null?void 0:g(S,y,j)}else{if("value"in N)return N.value;var E=N.get;return E===void 0?void 0:E.call(j)}},l=s(4),c=s(27),d=u(c);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,w){if(!(g instanceof w))throw new TypeError("Cannot call a class as a function")}function p(g,w){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:g}function m(g,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);g.prototype=Object.create(w&&w.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(g,w):g.__proto__=w)}var b=["height","width"],v=(function(g){m(w,g);function w(){return f(this,w),p(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,[{key:"format",value:function(j,N){b.indexOf(j)>-1?N?this.domNode.setAttribute(j,N):this.domNode.removeAttribute(j):o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"format",this).call(this,j,N)}}],[{key:"create",value:function(j){var N=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,j);return N.setAttribute("frameborder","0"),N.setAttribute("allowfullscreen",!0),N.setAttribute("src",this.sanitize(j)),N}},{key:"formats",value:function(j){return b.reduce(function(N,S){return j.hasAttribute(S)&&(N[S]=j.getAttribute(S)),N},{})}},{key:"sanitize",value:function(j){return d.default.sanitize(j)}},{key:"value",value:function(j){return j.getAttribute("src")}}]),w})(l.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",a.default=v}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.FormulaBlot=void 0;var i=(function(){function j(N,S){for(var E=0;E<S.length;E++){var A=S[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(N,A.key,A)}}return function(N,S,E){return S&&j(N.prototype,S),E&&j(N,E),N}})(),o=function j(N,S,E){N===null&&(N=Function.prototype);var A=Object.getOwnPropertyDescriptor(N,S);if(A===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:j(P,S,E)}else{if("value"in A)return A.value;var I=A.get;return I===void 0?void 0:I.call(E)}},l=s(35),c=m(l),d=s(5),u=m(d),f=s(9),p=m(f);function m(j){return j&&j.__esModule?j:{default:j}}function b(j,N){if(!(j instanceof N))throw new TypeError("Cannot call a class as a function")}function v(j,N){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:j}function g(j,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);j.prototype=Object.create(N&&N.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(j,N):j.__proto__=N)}var w=(function(j){g(N,j);function N(){return b(this,N),v(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,null,[{key:"create",value:function(E){var A=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,E);return typeof E=="string"&&(window.katex.render(E,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",E)),A}},{key:"value",value:function(E){return E.getAttribute("data-value")}}]),N})(c.default);w.blotName="formula",w.className="ql-formula",w.tagName="SPAN";var y=(function(j){g(N,j),i(N,null,[{key:"register",value:function(){u.default.register(w,!0)}}]);function N(){b(this,N);var S=v(this,(N.__proto__||Object.getPrototypeOf(N)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return N})(p.default);a.FormulaBlot=w,a.default=y}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.CodeToken=a.CodeBlock=void 0;var i=(function(){function E(A,P){for(var I=0;I<P.length;I++){var B=P[I];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(A,B.key,B)}}return function(A,P,I){return P&&E(A.prototype,P),I&&E(A,I),A}})(),o=function E(A,P,I){A===null&&(A=Function.prototype);var B=Object.getOwnPropertyDescriptor(A,P);if(B===void 0){var T=Object.getPrototypeOf(A);return T===null?void 0:E(T,P,I)}else{if("value"in B)return B.value;var _=B.get;return _===void 0?void 0:_.call(I)}},l=s(0),c=v(l),d=s(5),u=v(d),f=s(9),p=v(f),m=s(13),b=v(m);function v(E){return E&&E.__esModule?E:{default:E}}function g(E,A){if(!(E instanceof A))throw new TypeError("Cannot call a class as a function")}function w(E,A){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:E}function y(E,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);E.prototype=Object.create(A&&A.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(E,A):E.__proto__=A)}var j=(function(E){y(A,E);function A(){return g(this,A),w(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return i(A,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var B=this.domNode.textContent;this.cachedText!==B&&((B.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(B),this.domNode.normalize(),this.attach()),this.cachedText=B)}}]),A})(b.default);j.className="ql-syntax";var N=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),S=(function(E){y(A,E),i(A,null,[{key:"register",value:function(){u.default.register(N,!0),u.default.register(j,!0)}}]);function A(P,I){g(this,A);var B=w(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,P,I));if(typeof B.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var T=null;return B.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(T),T=setTimeout(function(){B.highlight(),T=null},B.options.interval)}),B.highlight(),B}return i(A,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var B=this.quill.getSelection();this.quill.scroll.descendants(j).forEach(function(T){T.highlight(I.options.highlight)}),this.quill.update(u.default.sources.SILENT),B!=null&&this.quill.setSelection(B,u.default.sources.SILENT)}}}]),A})(p.default);S.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(E){var A=window.hljs.highlightAuto(E);return A.value}})(),interval:1e3},a.CodeBlock=j,a.CodeToken=N,a.default=S}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(r,a){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(r,a){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(r,a){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(r,a){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(r,a){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(r,a,s){Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.BubbleTooltip=void 0;var i=function A(P,I,B){P===null&&(P=Function.prototype);var T=Object.getOwnPropertyDescriptor(P,I);if(T===void 0){var _=Object.getPrototypeOf(P);return _===null?void 0:A(_,I,B)}else{if("value"in T)return T.value;var R=T.get;return R===void 0?void 0:R.call(B)}},o=(function(){function A(P,I){for(var B=0;B<I.length;B++){var T=I[B];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(P,T.key,T)}}return function(P,I,B){return I&&A(P.prototype,I),B&&A(P,B),P}})(),l=s(3),c=g(l),d=s(8),u=g(d),f=s(43),p=g(f),m=s(15),b=s(41),v=g(b);function g(A){return A&&A.__esModule?A:{default:A}}function w(A,P){if(!(A instanceof P))throw new TypeError("Cannot call a class as a function")}function y(A,P){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P&&(typeof P=="object"||typeof P=="function")?P:A}function j(A,P){if(typeof P!="function"&&P!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof P);A.prototype=Object.create(P&&P.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),P&&(Object.setPrototypeOf?Object.setPrototypeOf(A,P):A.__proto__=P)}var N=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=(function(A){j(P,A);function P(I,B){w(this,P),B.modules.toolbar!=null&&B.modules.toolbar.container==null&&(B.modules.toolbar.container=N);var T=y(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,I,B));return T.quill.container.classList.add("ql-bubble"),T}return o(P,[{key:"extendToolbar",value:function(B){this.tooltip=new E(this.quill,this.options.bounds),this.tooltip.root.appendChild(B.container),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),v.default)}}]),P})(p.default);S.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(P){P?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var E=(function(A){j(P,A);function P(I,B){w(this,P);var T=y(this,(P.__proto__||Object.getPrototypeOf(P)).call(this,I,B));return T.quill.on(u.default.events.EDITOR_CHANGE,function(_,R,z,H){if(_===u.default.events.SELECTION_CHANGE)if(R!=null&&R.length>0&&H===u.default.sources.USER){T.show(),T.root.style.left="0px",T.root.style.width="",T.root.style.width=T.root.offsetWidth+"px";var Y=T.quill.getLines(R.index,R.length);if(Y.length===1)T.position(T.quill.getBounds(R));else{var J=Y[Y.length-1],re=T.quill.getIndex(J),X=Math.min(J.length()-1,R.index+R.length-re),te=T.quill.getBounds(new m.Range(re,X));T.position(te)}}else document.activeElement!==T.textbox&&T.quill.hasFocus()&&T.hide()}),T}return o(P,[{key:"listen",value:function(){var B=this;i(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){B.root.classList.remove("ql-editing")}),this.quill.on(u.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!B.root.classList.contains("ql-hidden")){var T=B.quill.getSelection();T!=null&&B.position(B.quill.getBounds(T))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(B){var T=i(P.prototype.__proto__||Object.getPrototypeOf(P.prototype),"position",this).call(this,B),_=this.root.querySelector(".ql-tooltip-arrow");if(_.style.marginLeft="",T===0)return T;_.style.marginLeft=-1*T-_.offsetWidth/2+"px"}}]),P})(f.BaseTooltip);E.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),a.BubbleTooltip=E,a.default=S}),(function(r,a,s){r.exports=s(63)})]).default})})(Zv)),Zv.exports}var Rd,GI;function cle(){if(GI)return Rd;GI=1;var e=Rd&&Rd.__extends||(function(){var u=function(f,p){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,b){m.__proto__=b}||function(m,b){for(var v in b)b.hasOwnProperty(v)&&(m[v]=b[v])},u(f,p)};return function(f,p){u(f,p);function m(){this.constructor=f}f.prototype=p===null?Object.create(p):(m.prototype=p.prototype,new m)}})(),t=Rd&&Rd.__assign||function(){return t=Object.assign||function(u){for(var f,p=1,m=arguments.length;p<m;p++){f=arguments[p];for(var b in f)Object.prototype.hasOwnProperty.call(f,b)&&(u[b]=f[b])}return u},t.apply(this,arguments)},r=Rd&&Rd.__spreadArrays||function(){for(var u=0,f=0,p=arguments.length;f<p;f++)u+=arguments[f].length;for(var m=Array(u),b=0,f=0;f<p;f++)for(var v=arguments[f],g=0,w=v.length;g<w;g++,b++)m[b]=v[g];return m},a=Rd&&Rd.__importDefault||function(u){return u&&u.__esModule?u:{default:u}},s=a(Ob()),i=a(C8()),o=a(NF()),l=a(lle()),c=(function(u){e(f,u);function f(p){var m=u.call(this,p)||this;m.dirtyProps=["modules","formats","bounds","theme","children"],m.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],m.state={generation:0},m.selection=null,m.onEditorChange=function(v,g,w,y){var j,N,S,E;v==="text-change"?(N=(j=m).onEditorChangeText)===null||N===void 0||N.call(j,m.editor.root.innerHTML,g,y,m.unprivilegedEditor):v==="selection-change"&&((E=(S=m).onEditorChangeSelection)===null||E===void 0||E.call(S,g,y,m.unprivilegedEditor))};var b=m.isControlled()?p.value:p.defaultValue;return m.value=b??"",m}return f.prototype.validateProps=function(p){var m;if(s.default.Children.count(p.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(s.default.Children.count(p.children)){var b=s.default.Children.only(p.children);if(((m=b)===null||m===void 0?void 0:m.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&p.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},f.prototype.shouldComponentUpdate=function(p,m){var b=this,v;if(this.validateProps(p),!this.editor||this.state.generation!==m.generation)return!0;if("value"in p){var g=this.getEditorContents(),w=(v=p.value,v??"");this.isEqualValue(w,g)||this.setEditorContents(this.editor,w)}return p.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,p.readOnly),r(this.cleanProps,this.dirtyProps).some(function(y){return!o.default(p[y],b.props[y])})},f.prototype.shouldComponentRegenerate=function(p){var m=this;return this.dirtyProps.some(function(b){return!o.default(p[b],m.props[b])})},f.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},f.prototype.componentWillUnmount=function(){this.destroyEditor()},f.prototype.componentDidUpdate=function(p,m){var b=this;if(this.editor&&this.shouldComponentRegenerate(p)){var v=this.editor.getContents(),g=this.editor.getSelection();this.regenerationSnapshot={delta:v,selection:g},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==m.generation){var w=this.regenerationSnapshot,v=w.delta,y=w.selection;delete this.regenerationSnapshot,this.instantiateEditor();var j=this.editor;j.setContents(v),d(function(){return b.setEditorSelection(j,y)})}},f.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},f.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},f.prototype.isControlled=function(){return"value"in this.props},f.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},f.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},f.prototype.createEditor=function(p,m){var b=new l.default(p,m);return m.tabIndex!=null&&this.setEditorTabIndex(b,m.tabIndex),this.hookEditor(b),b},f.prototype.hookEditor=function(p){this.unprivilegedEditor=this.makeUnprivilegedEditor(p),p.on("editor-change",this.onEditorChange)},f.prototype.unhookEditor=function(p){p.off("editor-change",this.onEditorChange)},f.prototype.getEditorContents=function(){return this.value},f.prototype.getEditorSelection=function(){return this.selection},f.prototype.isDelta=function(p){return p&&p.ops},f.prototype.isEqualValue=function(p,m){return this.isDelta(p)&&this.isDelta(m)?o.default(p.ops,m.ops):o.default(p,m)},f.prototype.setEditorContents=function(p,m){var b=this;this.value=m;var v=this.getEditorSelection();typeof m=="string"?p.setContents(p.clipboard.convert(m)):p.setContents(m),d(function(){return b.setEditorSelection(p,v)})},f.prototype.setEditorSelection=function(p,m){if(this.selection=m,m){var b=p.getLength();m.index=Math.max(0,Math.min(m.index,b-1)),m.length=Math.max(0,Math.min(m.length,b-1-m.index)),p.setSelection(m)}},f.prototype.setEditorTabIndex=function(p,m){var b,v;!((v=(b=p)===null||b===void 0?void 0:b.scroll)===null||v===void 0)&&v.domNode&&(p.scroll.domNode.tabIndex=m)},f.prototype.setEditorReadOnly=function(p,m){m?p.disable():p.enable()},f.prototype.makeUnprivilegedEditor=function(p){var m=p;return{getHTML:function(){return m.root.innerHTML},getLength:m.getLength.bind(m),getText:m.getText.bind(m),getContents:m.getContents.bind(m),getSelection:m.getSelection.bind(m),getBounds:m.getBounds.bind(m)}},f.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var p=i.default.findDOMNode(this.editingArea);if(!p)throw new Error("Cannot find element for editing area");if(p.nodeType===3)throw new Error("Editing area cannot be a text node");return p},f.prototype.renderEditingArea=function(){var p=this,m=this.props,b=m.children,v=m.preserveWhitespace,g=this.state.generation,w={key:g,ref:function(y){p.editingArea=y}};return s.default.Children.count(b)?s.default.cloneElement(s.default.Children.only(b),w):v?s.default.createElement("pre",t({},w)):s.default.createElement("div",t({},w))},f.prototype.render=function(){var p;return s.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(p=this.props.className,p??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},f.prototype.onEditorChangeText=function(p,m,b,v){var g,w;if(this.editor){var y=this.isDelta(this.value)?v.getContents():v.getHTML();y!==this.getEditorContents()&&(this.lastDeltaChangeSet=m,this.value=y,(w=(g=this.props).onChange)===null||w===void 0||w.call(g,p,m,b,v))}},f.prototype.onEditorChangeSelection=function(p,m,b){var v,g,w,y,j,N;if(this.editor){var S=this.getEditorSelection(),E=!S&&p,A=S&&!p;o.default(p,S)||(this.selection=p,(g=(v=this.props).onChangeSelection)===null||g===void 0||g.call(v,p,m,b),E?(y=(w=this.props).onFocus)===null||y===void 0||y.call(w,p,m,b):A&&((N=(j=this.props).onBlur)===null||N===void 0||N.call(j,S,m,b)))}},f.prototype.focus=function(){this.editor&&this.editor.focus()},f.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},f.displayName="React Quill",f.Quill=l.default,f.defaultProps={theme:"snow",modules:{},readOnly:!1},f})(s.default.Component);function d(u){Promise.resolve().then(u)}return Rd=c,Rd}var dle=cle();const x3=La(dle),ule=({isOpen:e,templateId:t,onClose:r,onSuccess:a})=>{const{showSuccess:s,showError:i}=Cn();Fa();const o=JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:l,isLoading:c}=uoe(t||""),d=TM(),u=foe(),[f,p]=D.useState(""),[m,b]=D.useState("Custom"),[v,g]=D.useState(""),[w,y]=D.useState(!1),[j,N]=D.useState(""),[S,E]=D.useState([]),[A,P]=D.useState(!1),[I,B]=D.useState(new Set),[T,_]=D.useState(new Set),[R,z]=D.useState(null),[H,Y]=D.useState(""),[J,re]=D.useState(!1),[X,te]=D.useState(!1),W=D.useRef({});D.useEffect(()=>{t&&l&&e?(p(l.name||""),b(l.category||"Custom"),N(l.description||""),l.sections&&Array.isArray(l.sections)?E(l.sections.map((xe,fe)=>({id:xe.id||`section_${Date.now()}_${fe}`,name:xe.name||`Section ${fe+1}`,order:xe.order!==void 0?xe.order:fe,steps:(xe.steps||[]).map((Se,qe)=>({id:Se.id||`step_${Date.now()}_${fe}_${qe}`,name:Se.name||"",instructions:Se.instructions||"",checklistItems:Array.isArray(Se.checklistItems)?Se.checklistItems:[],attachments:Array.isArray(Se.attachments)?Se.attachments:[],order:Se.order!==void 0?Se.order:qe}))}))):E([])):!t&&e&&(p(""),b("Custom"),g(""),y(!1),N(""),E([]),B(new Set),_(new Set))},[t,l,e]),D.useEffect(()=>{e&&(async()=>{if(o)try{await ub({userId:o}),te(!0)}catch{te(!1)}})()},[o,e]);const O={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},q=["header","bold","italic","underline","strike","list","bullet","link"],G=()=>{const xe={id:`section_${Date.now()}`,name:`Section ${S.length+1}`,order:S.length,steps:[]};E([...S,xe]),B(fe=>new Set([...fe,xe.id]))},U=xe=>{E(S.filter(fe=>fe.id!==xe)),B(fe=>{const Se=new Set(fe);return Se.delete(xe),Se})},K=(xe,fe)=>{E(S.map(Se=>Se.id===xe?{...Se,name:fe}:Se))},ae=(xe,fe)=>{const Se=S.findIndex(Le=>Le.id===xe);if(Se===-1)return;const qe=fe==="up"?Se-1:Se+1;if(qe<0||qe>=S.length)return;const je=[...S];[je[Se],je[qe]]=[je[qe],je[Se]],je.forEach((Le,Re)=>{Le.order=Re}),E(je)},me=xe=>{B(fe=>{const Se=new Set(fe);return Se.has(xe)?Se.delete(xe):Se.add(xe),Se})},se=xe=>{const fe=S.find(qe=>qe.id===xe);if(!fe)return;const Se={id:`step_${Date.now()}`,name:`Step ${fe.steps.length+1}`,instructions:"",checklistItems:[],attachments:[],order:fe.steps.length};E(S.map(qe=>qe.id===xe?{...qe,steps:[...qe.steps,Se]}:qe)),_(qe=>new Set([...qe,Se.id]))},le=(xe,fe)=>{E(S.map(Se=>Se.id===xe?{...Se,steps:Se.steps.filter(qe=>qe.id!==fe)}:Se)),_(Se=>{const qe=new Set(Se);return qe.delete(fe),qe}),z(null)},Me=(xe,fe,Se)=>{E(S.map(qe=>qe.id===xe?{...qe,steps:qe.steps.map(je=>je.id===fe?{...je,name:Se}:je)}:qe))},ue=(xe,fe,Se)=>{const qe=S.find(Je=>Je.id===xe);if(!qe)return;const je=qe.steps.findIndex(Je=>Je.id===fe);if(je===-1)return;const Le=Se==="up"?je-1:je+1;if(Le<0||Le>=qe.steps.length)return;const Re=[...qe.steps];[Re[je],Re[Le]]=[Re[Le],Re[je]],Re.forEach((Je,ut)=>{Je.order=ut}),E(S.map(Je=>Je.id===xe?{...Je,steps:Re}:Je))},Ue=xe=>{_(fe=>{const Se=new Set(fe);return Se.has(xe)?(Se.delete(xe),z(null)):Se.add(xe),Se})},Ae=(xe,fe)=>{const qe=S.find(je=>je.id===xe)?.steps.find(je=>je.id===fe);qe&&(z(fe),Y(qe.instructions))},ie=(xe,fe)=>{E(S.map(Se=>Se.id===xe?{...Se,steps:Se.steps.map(qe=>qe.id===fe?{...qe,instructions:H}:qe)}:Se)),z(null),Y("")},Z=(xe,fe)=>{E(S.map(Se=>Se.id===xe?{...Se,steps:Se.steps.map(qe=>qe.id===fe?{...qe,checklistItems:[...qe.checklistItems,""]}:qe)}:Se))},Ee=(xe,fe,Se,qe)=>{E(S.map(je=>je.id===xe?{...je,steps:je.steps.map(Le=>Le.id===fe?{...Le,checklistItems:Le.checklistItems.map((Re,Je)=>Je===Se?qe:Re)}:Le)}:je))},we=(xe,fe,Se)=>{E(S.map(qe=>qe.id===xe?{...qe,steps:qe.steps.map(je=>je.id===fe?{...je,checklistItems:je.checklistItems.filter((Le,Re)=>Re!==Se)}:je)}:qe))},Oe=(xe,fe,Se)=>{const qe=Se.target.files?.[0];if(!qe)return;if(qe.type!=="application/pdf"){i("Please select a PDF file");return}if(qe.size>10*1024*1024){i("File size must be less than 10MB");return}const je=new FileReader;je.onload=()=>{const Re={type:"pdf",url:je.result,name:qe.name};E(S.map(Je=>Je.id===xe?{...Je,steps:Je.steps.map(ut=>ut.id===fe?{...ut,attachments:[...ut.attachments,Re]}:ut)}:Je)),s("PDF attached successfully")},je.readAsDataURL(qe)},de=async(xe,fe)=>{if(!o){i("User not authenticated");return}re(!0);try{const Se=await ub({userId:o}),{accessToken:qe}=Se?.data||{};if(!qe)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");await new Promise((Re,Je)=>{let ut=0;const vt=50,At=setInterval(()=>{ut++,window.google&&window.google.picker?(clearInterval(At),Re()):ut>=vt&&(clearInterval(At),Je(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const je=window.google.picker;new je.PickerBuilder().setOAuthToken(qe).setCallback(Re=>{if(re(!1),Re[je.Response.ACTION]===je.Action.PICKED){const Je=Re[je.Response.DOCUMENTS];if(Je&&Je.length>0){const ut=Je[0],vt={type:"gdrive",url:ut.url||ut.embedUrl||"",name:ut.name||"Untitled",fileId:ut.id};E(S.map(At=>At.id===xe?{...At,steps:At.steps.map(Bt=>Bt.id===fe?{...Bt,attachments:[...Bt.attachments,vt]}:Bt)}:At)),s("File attached from Google Drive")}}else Re[je.Response.ACTION]===je.Action.CANCEL&&re(!1)}).addView(je.ViewId.DOCS).enableFeature(je.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(Se){re(!1),i(Se.message||"Failed to open Google Drive picker")}},ce=(xe,fe,Se)=>{E(S.map(qe=>qe.id===xe?{...qe,steps:qe.steps.map(je=>je.id===fe?{...je,attachments:je.attachments.filter((Le,Re)=>Re!==Se)}:je)}:qe))},Ce=()=>{if(!f.trim())return"Template name is required";if(S.length===0)return"At least one section is required";for(const xe of S){if(!xe.name.trim())return`Section "${xe.name||"Unnamed"}" must have a name`;if(xe.steps.length===0)return`Section "${xe.name}" must have at least one step`;for(const fe of xe.steps)if(!fe.name.trim())return"All steps must have a name"}return null},Xe=async()=>{const xe=Ce();if(xe){i(xe);return}P(!0);try{const fe=w&&v.trim()?v.trim():m,Se={name:f.trim(),category:fe,description:j,sections:S.map(qe=>({id:qe.id,name:qe.name.trim(),order:qe.order,steps:qe.steps.map(je=>({id:je.id,name:je.name.trim(),instructions:je.instructions,checklistItems:je.checklistItems.filter(Le=>Le.trim()!==""),attachments:je.attachments,order:je.order}))}))};t?await u.mutateAsync({id:t,data:Se}):await d.mutateAsync(Se),a?.(),r()}catch(fe){i(fe.message||"Failed to save template")}finally{P(!1)}};return e?n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:r}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[90vh] shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between shrink-0",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:t?"Edit Playbook Template":"Create New Playbook Template"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t?"Update your playbook template":"Build a reusable workflow template"})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:c&&t?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(gt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Template Name ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:f,onChange:xe=>p(xe.target.value),placeholder:"e.g., Sales Playbook",className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Category"}),n.jsx("div",{className:"flex items-center gap-2",children:w?n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"text",value:v,onChange:xe=>g(xe.target.value),placeholder:"Enter category name",className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsx("button",{onClick:()=>{y(!1),g("")},className:"px-3 py-2.5 text-slate-500 hover:text-slate-700",children:n.jsx(tr,{className:"w-4 h-4"})})]}):n.jsx(n.Fragment,{children:n.jsxs("select",{value:m,onChange:xe=>{xe.target.value==="custom"?y(!0):b(xe.target.value)},className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"Sales",children:"Sales"}),n.jsx("option",{value:"Onboarding",children:"Onboarding"}),n.jsx("option",{value:"Custom",children:"Custom"}),n.jsx("option",{value:"custom",children:"+ Create New Category"})]})})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description"}),n.jsx("textarea",{value:j,onChange:xe=>N(xe.target.value),placeholder:"Brief description of this playbook...",rows:3,className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Sections & Steps"}),n.jsxs("button",{onClick:G,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors",children:[n.jsx(ln,{className:"w-4 h-4"}),"Add Section"]})]}),S.length===0?n.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 rounded-xl",children:[n.jsx(ci,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"No sections yet. Add your first section to get started."})]}):n.jsx("div",{className:"space-y-3",children:S.map((xe,fe)=>n.jsxs("div",{className:"border-2 border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("div",{className:"bg-slate-50 p-4 flex items-center gap-3",children:[n.jsx("button",{onClick:()=>me(xe.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:n.jsx(Fs,{className:`w-4 h-4 text-slate-400 transition-transform ${I.has(xe.id)?"":"-rotate-90"}`})}),n.jsx("input",{type:"text",value:xe.name,onChange:Se=>K(xe.id,Se.target.value),placeholder:"Section name",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-semibold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>ae(xe.id,"up"),disabled:fe===0,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(o1,{className:"w-4 h-4 text-slate-400"})}),n.jsx("button",{onClick:()=>ae(xe.id,"down"),disabled:fe===S.length-1,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:n.jsx(Fs,{className:"w-4 h-4 text-slate-400"})}),n.jsx("button",{onClick:()=>U(xe.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors text-red-600",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]}),I.has(xe.id)&&n.jsxs("div",{className:"p-4 space-y-3 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase",children:[xe.steps.length," Step",xe.steps.length!==1?"s":""]}),n.jsxs("button",{onClick:()=>se(xe.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[n.jsx(ln,{className:"w-3 h-3"}),"Add Step"]})]}),xe.steps.length===0?n.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-lg",children:[n.jsx(Qn,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-xs text-slate-500",children:"No steps yet. Add your first step."})]}):n.jsx("div",{className:"space-y-3",children:xe.steps.map((Se,qe)=>n.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[n.jsxs("div",{className:"bg-white p-3 flex items-center gap-2",children:[n.jsx("button",{onClick:()=>Ue(Se.id),className:"p-1 hover:bg-slate-50 rounded transition-colors",children:n.jsx(Fs,{className:`w-3.5 h-3.5 text-slate-400 transition-transform ${T.has(Se.id)?"":"-rotate-90"}`})}),n.jsx("input",{type:"text",value:Se.name,onChange:je=>Me(xe.id,Se.id,je.target.value),placeholder:"Step name",className:"flex-1 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{onClick:()=>ue(xe.id,Se.id,"up"),disabled:qe===0,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:n.jsx(o1,{className:"w-3 h-3 text-slate-400"})}),n.jsx("button",{onClick:()=>ue(xe.id,Se.id,"down"),disabled:qe===xe.steps.length-1,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:n.jsx(Fs,{className:"w-3 h-3 text-slate-400"})}),n.jsx("button",{onClick:()=>le(xe.id,Se.id),className:"p-1 hover:bg-red-50 rounded transition-colors text-red-600",children:n.jsx(Lr,{className:"w-3 h-3"})})]})]}),T.has(Se.id)&&n.jsxs("div",{className:"p-4 bg-slate-50 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Instructions"}),R===Se.id?n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"bg-white border border-slate-200 rounded-lg",children:n.jsx(x3,{theme:"snow",value:H,onChange:Y,modules:O,formats:q,placeholder:"Add instructions, best practices, talking points...",className:"text-sm"})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>ie(xe.id,Se.id),className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-semibold rounded-lg transition-colors",children:"Save Instructions"}),n.jsx("button",{onClick:()=>{z(null),Y("")},className:"px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg transition-colors",children:"Cancel"})]})]}):n.jsxs("div",{className:"space-y-2",children:[Se.instructions?n.jsx("div",{className:"p-3 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:tg.sanitize(Se.instructions)}}):n.jsx("div",{className:"p-3 bg-white border-2 border-dashed border-slate-200 rounded-lg text-sm text-slate-400 text-center",children:"No instructions added"}),n.jsxs("button",{onClick:()=>Ae(xe.id,Se.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[n.jsx(Do,{className:"w-3 h-3"}),Se.instructions?"Edit Instructions":"Add Instructions"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Checklist Items"}),n.jsxs("div",{className:"space-y-2",children:[Se.checklistItems.length===0?n.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No checklist items"}):Se.checklistItems.map((je,Le)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:je,onChange:Re=>Ee(xe.id,Se.id,Le,Re.target.value),placeholder:"Checklist item",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded text-sm text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),n.jsx("button",{onClick:()=>we(xe.id,Se.id,Le),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",children:n.jsx(tr,{className:"w-3.5 h-3.5"})})]},Le)),n.jsxs("button",{onClick:()=>Z(xe.id,Se.id),className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(ln,{className:"w-3 h-3"}),"Add Checklist Item"]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Attachments"}),n.jsxs("div",{className:"space-y-2",children:[Se.attachments.length===0?n.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No attachments"}):Se.attachments.map((je,Le)=>n.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-slate-200 rounded-lg",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[je.type==="pdf"?n.jsx(Qn,{className:"w-4 h-4 text-red-600 shrink-0"}):n.jsx(l0,{className:"w-4 h-4 text-blue-600 shrink-0"}),n.jsx("span",{className:"text-xs font-medium text-slate-700 truncate",children:je.name}),je.type==="gdrive"&&n.jsx("span",{className:"text-xs text-blue-600 font-semibold shrink-0",children:"Google Drive"})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[je.type==="gdrive"&&n.jsx("a",{href:je.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-blue-50 rounded text-blue-600",children:n.jsx(ps,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:()=>ce(xe.id,Se.id,Le),className:"p-1 hover:bg-red-50 rounded text-red-600",children:n.jsx(tr,{className:"w-3.5 h-3.5"})})]})]},Le)),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{ref:je=>{W.current[`${xe.id}_${Se.id}_pdf`]=je},type:"file",accept:".pdf",onChange:je=>Oe(xe.id,Se.id,je),className:"hidden"}),n.jsxs("button",{onClick:()=>W.current[`${xe.id}_${Se.id}_pdf`]?.click(),className:"flex-1 px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(J0,{className:"w-3 h-3"}),"Upload PDF"]}),n.jsx("button",{onClick:()=>de(xe.id,Se.id),disabled:J||!X,className:"flex-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:J?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-3 h-3 animate-spin"}),"Loading..."]}):n.jsxs(n.Fragment,{children:[n.jsx(l0,{className:"w-3 h-3"}),"Google Drive"]})})]})]})]})]})]},Se.id))})]})]},xe.id))})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 flex items-center justify-end gap-3 shrink-0",children:[n.jsx("button",{onClick:r,className:"px-4 py-2.5 text-slate-600 hover:bg-slate-50 text-sm font-semibold rounded-xl transition-colors",children:"Cancel"}),n.jsx("button",{onClick:Xe,disabled:A||c,className:"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:A?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),t?"Update Template":"Create Template"]})})]})]})})]}):null},fle=({instance:e,getCompanyName:t,getDealName:r,getProjectName:a,getUserName:s,onView:i})=>{const{data:o=[]}=_g(e.id),l=e.templateSnapshot?.sections?.reduce((p,m)=>p+(m.steps?.length||0),0)||0,c=o.length,d=l>0?Math.round(c/l*100):0,u=e.dealId?{type:"Deal",name:r(e.dealId),id:e.dealId}:e.projectId?{type:"Project",name:a(e.projectId),id:e.projectId}:null,f=p=>{if(!p)return"";const m=new Date(p),b=new Date,v=new Date(b);return v.setDate(v.getDate()-1),m.toDateString()===b.toDateString()?"Today":m.toDateString()===v.toDateString()?"Yesterday":m.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})};return n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(ci,{className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:e.templateSnapshot?.name||"Unknown Playbook"}),e.templateSnapshot?.version&&n.jsxs("span",{className:"text-xs text-slate-400",children:["v",e.templateSnapshot.version]})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u?n.jsxs("div",{className:"flex items-center gap-2",children:[u.type==="Deal"?n.jsx(Cl,{className:"w-4 h-4 text-slate-400"}):n.jsx(Yd,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:u.name})]}):n.jsx("span",{className:"text-sm text-slate-400",children:""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(dl,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:e.companyId?t(e.companyId):""})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-[120px]",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[c," / ",l]}),n.jsxs("span",{className:"text-xs text-slate-500",children:[d,"%"]})]}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:n.jsx("div",{className:`h-2 rounded-full transition-all ${d===100?"bg-green-500":d>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${d}%`}})})]}),d===100&&n.jsx(Nn,{className:"w-4 h-4 text-green-500"})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsx("span",{className:"text-sm text-slate-600",children:e.activatedBy?s(e.activatedBy):""})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Jn,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm text-slate-600",children:f(e.activatedAt)})]})}),n.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:n.jsxs("button",{onClick:()=>i(e.id),className:"text-indigo-600 hover:text-indigo-700 text-sm font-semibold flex items-center gap-1.5 transition-colors",children:["View",n.jsx(ps,{className:"w-3.5 h-3.5"})]})})]})},hle=({onNavigate:e,currentUser:t,playbookPrompt:r,onClearPlaybookPrompt:a})=>{const{showSuccess:s,showError:i}=Cn(),[o,l]=D.useState("templates"),[c,d]=D.useState(""),[u,f]=D.useState("all"),[p,m]=D.useState(null),[b,v]=D.useState(!1),[g,w]=D.useState([]),[y,j]=D.useState(!1),[N,S]=D.useState(null),[E,A]=D.useState(!1),[P,I]=D.useState(null),[B,T]=D.useState(!1),[_,R]=D.useState(void 0),[z,H]=D.useState(void 0),[Y,J]=D.useState(""),[re,X]=D.useState("all"),[te,W]=D.useState("all"),{data:O=[],isLoading:q,error:G}=EM({category:u!=="all"?u:void 0,search:c||void 0}),U=hoe(),K=TM(),{data:ae=[],isLoading:me}=xy({companyId:re!=="all"?re:void 0,status:te!=="all"?te:void 0}),{data:se=[]}=Ys({queryKey:["companies"],queryFn:async()=>{const fe=await md();return fe.data||fe||[]},staleTime:300*1e3}),{data:le=[]}=Ys({queryKey:["deals"],queryFn:async()=>{const fe=await Sg();return fe.data||fe||[]},staleTime:300*1e3}),{data:Me=[]}=Ys({queryKey:["projects"],queryFn:async()=>{const fe=await D0();return fe.data||fe||[]},staleTime:300*1e3}),{data:ue=[]}=m3(),Ue=D.useRef("");D.useEffect(()=>{const fe=new Set;O.forEach(je=>{je.category&&fe.add(je.category)});const Se=Array.from(fe).sort(),qe=Se.join(",");qe!==Ue.current&&(Ue.current=qe,w(Se))},[O.length]),D.useEffect(()=>{const fe=()=>{window.dispatchEvent(new Event("refresh-playbooks-queries"))};return window.addEventListener("refresh-playbooks",fe),()=>window.removeEventListener("refresh-playbooks",fe)},[]),D.useEffect(()=>{r&&r.dealId&&(l("templates"),R(r.dealId),H(r.templateId),T(!0),a&&a())},[r,a]),D.useEffect(()=>{E||q||A(!0)},[O.length,q]);const Ae=async fe=>{v(!0);try{await U.mutateAsync(fe.id),m(null)}catch(Se){i(Se.message||"Failed to delete template")}finally{v(!1)}},ie=async fe=>{try{await K.mutateAsync({name:`${fe.name} (Copy)`,category:fe.category||"Custom",description:fe.description||"",sections:fe.sections||[]}),s("Template duplicated successfully!")}catch(Se){i(Se.message||"Failed to duplicate template")}},Z=fe=>!fe.sections||!Array.isArray(fe.sections)?0:fe.sections.reduce((Se,qe)=>Se+(qe.steps?.length||0),0),Ee=fe=>{if(!fe)return"Never";const Se=new Date(fe),je=new Date().getTime()-Se.getTime(),Le=Math.floor(je/(1e3*60*60*24));return Le===0?"Today":Le===1?"Yesterday":Le<7?`${Le} days ago`:Le<30?`${Math.floor(Le/7)} weeks ago`:Se.toLocaleDateString()},we=fe=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[fe]||"bg-slate-100 text-slate-700",Oe=D.useMemo(()=>{if(!c)return O;const fe=c.toLowerCase();return O.filter(Se=>Se.name?.toLowerCase().includes(fe)||Se.description?.toLowerCase().includes(fe))},[O,c]),de=fe=>se.find(qe=>qe.id===fe)?.name||"Unknown Company",ce=fe=>{const Se=le.find(qe=>qe.id===fe);return Se?.title||Se?.name||"Unknown Deal"},Ce=fe=>{const Se=Me.find(qe=>qe.id===fe);return Se?.title||Se?.name||"Unknown Project"},Xe=fe=>ue.find(qe=>qe.id===fe)?.name||fe,xe=D.useMemo(()=>{let fe=ae;if(Y){const Se=Y.toLowerCase();fe=fe.filter(qe=>{const je=qe.templateSnapshot?.name||"",Le=qe.companyId?de(qe.companyId).toLowerCase():"",Re=qe.dealId?ce(qe.dealId).toLowerCase():"",Je=qe.projectId?Ce(qe.projectId).toLowerCase():"";return je.toLowerCase().includes(Se)||Le.includes(Se)||Re.includes(Se)||Je.includes(Se)})}return fe},[ae,Y,se,le,Me]);return n.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 shrink-0",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Playbooks"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Create and manage standardized workflows for your team"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{onClick:()=>l("templates"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="templates"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Template Library"}),n.jsx("button",{onClick:()=>l("active"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="active"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Active Playbooks"})]})]}),o==="templates"&&n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[G&&n.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:n.jsxs("p",{className:"text-red-800 text-sm font-medium",children:["Error loading playbooks: ",G instanceof Error?G.message:"Unknown error"]})}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search playbooks...",value:c,onChange:fe=>d(fe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(bf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:u,onChange:fe=>f(fe.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Categories"}),g.map(fe=>n.jsx("option",{value:fe,children:fe},fe))]}),n.jsx(wa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),n.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[n.jsx(ln,{className:"w-4 h-4"}),"Create New Playbook"]})]}),q?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"flex flex-col items-center gap-3",children:[n.jsx(gt,{className:"w-8 h-8 text-indigo-600 animate-spin"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading playbooks..."})]})}):Oe.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(ci,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No playbooks found"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:c||u!=="all"?"Try adjusting your search or filters":"Get started by creating your first playbook template"}),!c&&u==="all"&&n.jsxs("button",{onClick:()=>{S(null),j(!0)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 mx-auto transition-colors",children:[n.jsx(ln,{className:"w-4 h-4"}),"Create Your First Playbook"]})]})}):n.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-6",children:Oe.map(fe=>{const Se=Z(fe),qe=fe.sections?.length||0;return n.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 hover:border-indigo-300 hover:shadow-lg transition-all cursor-pointer group",children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(ci,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 line-clamp-1",children:fe.name})]}),n.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${we(fe.category||"Custom")}`,children:fe.category||"Custom"})]}),n.jsx("div",{className:"relative",children:n.jsx("button",{onClick:je=>{je.stopPropagation()},className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:n.jsx(Jk,{className:"w-4 h-4 text-slate-400"})})})]}),fe.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:fe.description}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Qn,{className:"w-4 h-4"}),n.jsxs("span",{children:[qe," section",qe!==1?"s":""]})]}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Db,{className:"w-4 h-4"}),n.jsxs("span",{children:[Se," step",Se!==1?"s":""]})]})]}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[n.jsx(Jn,{className:"w-3.5 h-3.5"}),n.jsxs("span",{children:["Updated ",Ee(fe.updatedAt||fe.createdAt)]})]}),n.jsx("div",{className:"flex items-center gap-1",children:n.jsxs("span",{className:"text-xs font-semibold text-slate-400",children:["v",fe.version||1]})})]}),n.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-100",children:[n.jsxs("button",{onClick:je=>{je.stopPropagation(),S(fe.id),j(!0)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(Do,{className:"w-3.5 h-3.5"}),"Edit"]}),n.jsxs("button",{onClick:je=>{je.stopPropagation(),ie(fe)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[n.jsx(Gj,{className:"w-3.5 h-3.5"}),"Duplicate"]}),n.jsx("button",{onClick:je=>{je.stopPropagation(),m(fe)},className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:n.jsx(Lr,{className:"w-3.5 h-3.5"})})]})]},fe.id)})})})]}),o==="active"&&n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by playbook name, company, deal, or project...",value:Y,onChange:fe=>J(fe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(bf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:re,onChange:fe=>X(fe.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Companies"}),se.map(fe=>n.jsx("option",{value:fe.id,children:fe.name},fe.id))]}),n.jsx(wa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),n.jsxs("div",{className:"relative",children:[n.jsx(bf,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsxs("select",{value:te,onChange:fe=>W(fe.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[n.jsx("option",{value:"all",children:"All Status"}),n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"completed",children:"Completed"})]}),n.jsx(wa,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]})]}),me?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):xe.length===0?n.jsx("div",{className:"flex-1 flex items-center justify-center",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx(Yd,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Active Playbooks"}),n.jsx("p",{className:"text-sm text-slate-500",children:Y||re!=="all"||te!=="all"?"No playbooks match your filters. Try adjusting your search criteria.":"No active playbook instances found. Attach a playbook to a Deal or Project to get started."})]})}):n.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:n.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Playbook Name"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Attached To"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Company"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Progress"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated By"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated Date"}),n.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),n.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:xe.map(fe=>n.jsx(fle,{instance:fe,getCompanyName:de,getDealName:ce,getProjectName:Ce,getUserName:Xe,onView:Se=>I(Se)},fe.id))})]})})})})]}),p&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>m(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Playbook Template"}),n.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:['Are you sure you want to delete "',p.name,'"? This action cannot be undone.']})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>m(null),className:"flex-1 py-2.5 text-sm font-semibold text-slate-600 hover:bg-slate-50 rounded-xl transition-colors border border-slate-200",disabled:b,children:"Cancel"}),n.jsx("button",{onClick:()=>Ae(p),disabled:b,className:"flex-1 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50",children:b?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]}),n.jsx(ule,{isOpen:y,templateId:N,onClose:()=>{j(!1),S(null)},onSuccess:()=>{}}),n.jsx(p3,{isOpen:B,dealId:_,preSelectedTemplateId:z,onClose:()=>{T(!1),R(void 0),H(void 0)},onSuccess:()=>{T(!1),R(void 0),H(void 0)}}),P&&n.jsx(gy,{instanceId:P,isOpen:!!P,onClose:()=>I(null)})]})},mle=({onNavigate:e,companyIdFromUrl:t,onClearCompanyIdFromUrl:r})=>{const{showSuccess:a,showError:s}=Cn(),i=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[o,l]=D.useState([]),[c,d]=D.useState(!0),[u,f]=D.useState(""),[p,m]=D.useState(null),[b,v]=D.useState("date"),[g,w]=D.useState("desc"),[y,j]=D.useState([]),[N,S]=D.useState(!1),[E,A]=D.useState(!1),[P,I]=D.useState(null),[B,T]=D.useState([]),[_,R]=D.useState([]),[z,H]=D.useState("email"),[Y,J]=D.useState(!1),[re,X]=D.useState(!1),[te,W]=D.useState(null),[O,q]=D.useState(!1),[G,U]=D.useState({}),[K,ae]=D.useState([]),[me,se]=D.useState({}),le=D.useRef(!1),Me=async()=>{try{q(!0);const xe=await rae();console.log("[SATISFACTION] Template response:",xe),xe&&xe.success&&xe.data?W(xe.data):(console.error("[SATISFACTION] Invalid response format:",xe),s(xe?.error?.message||xe?.message||"Failed to load survey template"))}catch(xe){console.error("[SATISFACTION] Error loading template:",xe),s(xe.message||"Failed to load survey template")}finally{q(!1)}};D.useEffect(()=>{re&&!te&&Me()},[re]),D.useEffect(()=>{(async()=>{try{const fe=await _c(),Se=fe?.data||fe||[];Array.isArray(Se)&&ae(Se)}catch(fe){console.error("[SATISFACTION] Failed to load users",fe)}})()},[]),D.useEffect(()=>{(async()=>{try{const fe=await md(),Se=fe?.data||fe||[];if(Array.isArray(Se)){const qe={};Se.forEach(je=>{je.id&&(qe[je.id]=je)}),se(qe)}}catch(fe){console.error("[SATISFACTION] Failed to load companies",fe)}})()},[]),D.useEffect(()=>{ue()},[]),D.useEffect(()=>{p&&Z(p.id)},[p]),D.useEffect(()=>{(async()=>{if(p?.companyId)try{const fe=await Ch("",p.companyId);if(fe.success&&fe.data){const Se={};fe.data.forEach(qe=>{qe.id&&(Se[qe.id]=qe)}),U(Se)}}catch(fe){console.error("[SATISFACTION] Failed to load contacts for timeline",fe)}})()},[p?.companyId]),D.useEffect(()=>{if(!t||le.current||!r)return;le.current=!0;const xe=t;(async()=>{try{const Se=(await xk(xe))?.data?.satisfactionRecordId;Se&&m({id:Se,companyId:xe,createdAt:"",createdBy:"",source:"manual"}),await Ce(xe)}catch{await Ce(xe)}finally{r()}})()},[t,r]);const ue=async()=>{try{d(!0);const xe=await Qne(u);if(xe.success&&xe.data){const fe=xe.data.map(Se=>({companyId:Se.companyId,companyName:Se.company?.name||"Unknown Company",latestNpsScore:Se.latestNpsScore,npsCategory:Se.npsCategory,accountManagerId:Se.company?.ownerId,accountManagerName:null,lastSurveyDate:Se.lastSurveyDate,status:Se.status||"not_yet_sent",satisfactionRecordId:Se.id}));l(fe)}}catch(xe){s(xe.message||"Failed to load satisfaction records")}finally{d(!1)}},Ue=xe=>xe==null?null:xe>=9?"Promoter":xe>=7?"Passive":"Detractor",Ae=D.useMemo(()=>{const xe=[];return y.forEach(fe=>{(fe.responses||[]).forEach(Se=>{const qe=Se.contactId?G[Se.contactId]:null;let je="";if(Se.answers&&Array.isArray(Se.answers)){const Le=Se.answers.find(Re=>typeof Re.answer=="string"&&Re.questionText&&(Re.questionText.toLowerCase().includes("improve")||Re.questionText.toLowerCase().includes("additional")))||Se.answers.find(Re=>typeof Re.answer=="string");Le&&typeof Le.answer=="string"&&(je=Le.answer)}xe.push({id:Se.id,submittedAt:Se.submittedAt,npsScore:Se.npsScore,contactId:Se.contactId,contactName:qe?.name,feedback:je})})}),xe.sort((fe,Se)=>{const qe=fe.submittedAt?new Date(fe.submittedAt).getTime():0;return(Se.submittedAt?new Date(Se.submittedAt).getTime():0)-qe}),xe},[y,G]),ie=xe=>!xe.accountManagerId||!K||K.length===0?null:K.find(Se=>Se.id===xe.accountManagerId)?.name||null,Z=async xe=>{try{S(!0);const fe=await Jne(xe);fe.success&&fe.data&&j(fe.data.surveys||[])}catch(fe){s(fe.message||"Failed to load record details")}finally{S(!1)}},Ee=xe=>xe==null?"text-slate-400":xe>=9?"text-green-600":xe>=7?"text-yellow-600":"text-red-600",we=xe=>xe==null?"bg-slate-100":xe>=9?"bg-green-50":xe>=7?"bg-yellow-50":"bg-red-50",Oe=xe=>{const Se={awaiting_response:{label:"Awaiting Response",color:"bg-yellow-100 text-yellow-700"},completed:{label:"Completed",color:"bg-green-100 text-green-700"},not_yet_sent:{label:"Not Yet Sent",color:"bg-slate-100 text-slate-700"}}[xe];return n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${Se.color}`,children:Se.label})},de=D.useMemo(()=>[...o.filter(fe=>fe.companyName.toLowerCase().includes(u.toLowerCase()))].sort((fe,Se)=>{let qe=0;if(b==="score"){const je=fe.latestNpsScore??-1,Le=Se.latestNpsScore??-1;qe=je-Le}else if(b==="date"){const je=fe.lastSurveyDate?new Date(fe.lastSurveyDate).getTime():0,Le=Se.lastSurveyDate?new Date(Se.lastSurveyDate).getTime():0;qe=je-Le}else b==="status"&&(qe=fe.status.localeCompare(Se.status));return g==="asc"?qe:-qe}),[o,u,b,g]),ce=async()=>{if(!P||_.length===0){s("Please select a company and at least one contact");return}try{J(!0);let fe=(await xk(P)).data?.satisfactionRecordId;fe||(fe=(await Zne({companyId:P,source:"manual"})).data.id);const Se=await tae({satisfactionRecordId:fe,contactIds:_,deliveryMethod:z});if(z==="link"&&Se.data?.surveyUrl){const qe=Se.data.surveyUrl;navigator.clipboard?navigator.clipboard.writeText(qe).then(()=>{a(`Survey link copied to clipboard! Share: ${qe}`)}).catch(()=>{a(`Survey created! Copy this link: ${qe}`)}):a(`Survey created! Copy this link: ${qe}`)}else a("Survey sent successfully");A(!1),R([]),ue()}catch(xe){s(xe.message||"Failed to send survey")}finally{J(!1)}},Ce=async xe=>{I(xe),A(!0);try{const fe=await Ch("",xe);if(fe.success&&fe.data){const Se=fe.data.filter(qe=>qe.email);T(Se)}}catch(fe){s(fe.message||"Failed to load contacts")}},Xe=xe=>{if(!i)return!1;const fe=i.role==="Admin",Se=i.id===xe.accountManagerId;return fe||Se};return n.jsxs("div",{className:"h-full flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 bg-white",children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Client Satisfaction"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Track NPS scores and client feedback"})]}),!!i&&(i.role==="Admin"||o.some(fe=>fe.accountManagerId===i.id))?n.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold text-sm flex items-center gap-2",children:[n.jsx(Yj,{className:"w-4 h-4"}),"Survey Builder"]}):null]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex-1 relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search companies...",value:u,onChange:xe=>f(xe.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:b,onChange:xe=>v(xe.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"date",children:"Sort by Date"}),n.jsx("option",{value:"score",children:"Sort by Score"}),n.jsx("option",{value:"status",children:"Sort by Status"})]}),n.jsx("button",{onClick:()=>w(g==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:n.jsx(lU,{className:"w-4 h-4"})})]})]})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):de.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(yf,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500",children:"No satisfaction records found"})]}):n.jsx("div",{className:"space-y-4",children:de.map(xe=>n.jsx("div",{onClick:()=>{const fe={id:xe.satisfactionRecordId,companyId:xe.companyId,createdAt:"",createdBy:"",source:"manual"};m(fe)},className:"bg-white border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[n.jsx(Xs,{src:me[xe.companyId]?.logo,fallbackText:me[xe.companyId]?.name||xe.companyName,className:"w-16 h-16 border border-slate-200",isAvatar:!1}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:me[xe.companyId]?.name||xe.companyName}),xe.latestNpsScore!==void 0&&xe.latestNpsScore!==null&&n.jsxs("span",{className:`px-2 py-0.5 rounded-lg text-sm font-bold ${xe.latestNpsScore>=9?"bg-green-100 text-green-700":xe.latestNpsScore>=7?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["NPS ",xe.latestNpsScore]})]}),n.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[xe.npsCategory&&n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${xe.npsCategory==="Promoter"?"bg-green-100 text-green-700":xe.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:xe.npsCategory}),Oe(xe.status),xe.lastSurveyDate&&n.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[n.jsx(Jn,{className:"w-3 h-3"}),new Date(xe.lastSurveyDate).toLocaleDateString()]})]}),ie(xe)&&n.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Account Manager: ",ie(xe)]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[Xe(xe)&&n.jsxs("button",{onClick:fe=>{fe.stopPropagation(),Ce(xe.companyId)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send Survey"]}),n.jsx(wa,{className:"w-5 h-5 text-slate-400"})]})]})},xe.satisfactionRecordId))})}),p&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>m(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Satisfaction Details"}),n.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:N?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"border border-slate-200 rounded-2xl p-4 bg-slate-50/60",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:"Current NPS Score"}),Ae.length===0?n.jsx("p",{className:"text-sm text-slate-500",children:"No responses yet"}):n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${we(Ae[0].npsScore)}`,children:n.jsx("span",{className:`text-3xl font-black ${Ee(Ae[0].npsScore)}`,children:Ae[0].npsScore})}),n.jsxs("div",{className:"flex flex-col gap-1",children:[Ue(Ae[0].npsScore)&&n.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${Ue(Ae[0].npsScore)==="Promoter"?"bg-green-100 text-green-700":Ue(Ae[0].npsScore)==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Ue(Ae[0].npsScore)}),n.jsxs("p",{className:"text-xs text-slate-500",children:["Last response on"," ",Ae[0].submittedAt?new Date(Ae[0].submittedAt).toLocaleDateString():""]})]})]})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Historical Timeline"}),Ae.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No responses yet"}):n.jsx("div",{className:"space-y-3",children:Ae.map(xe=>n.jsxs("div",{className:"flex items-start gap-3 border-l-2 border-slate-200 pl-4 relative",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 absolute -left-[5px] mt-2"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:["NPS ",xe.npsScore]}),xe.contactName&&n.jsx("span",{className:"text-[11px] text-slate-500",children:xe.contactName})]}),n.jsx("span",{className:"text-[10px] text-slate-400",children:xe.submittedAt?new Date(xe.submittedAt).toLocaleDateString():""})]}),xe.feedback&&n.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:xe.feedback})]})]},xe.id))})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Survey History"}),y.length===0?n.jsx("p",{className:"text-slate-500",children:"No surveys sent yet"}):n.jsx("div",{className:"space-y-4",children:y.map(xe=>n.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Sent ",xe.sentAt?new Date(xe.sentAt).toLocaleDateString():""]}),n.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${xe.status==="completed"?"bg-green-100 text-green-700":xe.status==="sent"?"bg-yellow-100 text-yellow-700":xe.status==="expired"?"bg-slate-200 text-slate-700":"bg-slate-100 text-slate-700"}`,children:xe.status==="sent"?"Sent":xe.status==="completed"?"Completed":xe.status==="expired"?"Expired":xe.status})]}),n.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[xe.recipients?.length||0," recipient(s)  ",xe.responses?.length||0," response(s)"]}),xe.recipients&&xe.recipients.length>0&&n.jsxs("div",{className:"text-[11px] text-slate-500 mb-2",children:["Recipients:"," ",xe.recipients.slice(0,3).map(fe=>fe.email||fe.contactId).join(", "),xe.recipients.length>3&&n.jsxs("span",{className:"text-slate-400",children:[" ","+",xe.recipients.length-3," more"]})]}),xe.responses&&xe.responses.length>0&&n.jsx("div",{className:"mt-3 space-y-3",children:xe.responses.map(fe=>n.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-sm font-semibold",children:["NPS: ",fe.npsScore]}),n.jsx("span",{className:"text-xs text-slate-500",children:new Date(fe.submittedAt).toLocaleDateString()})]}),fe.answers.map((Se,qe)=>Se.questionText&&Se.answer&&n.jsxs("div",{className:"mt-2 text-sm",children:[n.jsx("span",{className:"font-medium text-slate-700",children:Se.questionText}),n.jsx("p",{className:"text-slate-600 mt-1",children:String(Se.answer)})]},qe))]},fe.id))})]},xe.id))})]})]})})]})]}),E&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>A(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md pointer-events-auto",onClick:xe=>xe.stopPropagation(),children:[n.jsx("div",{className:"p-6 border-b border-slate-200",children:n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Send Survey"})}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Select Contacts"}),n.jsx("div",{className:"border border-slate-300 rounded-lg max-h-48 overflow-y-auto",children:B.map(xe=>n.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-100 last:border-b-0",children:[n.jsx("input",{type:"checkbox",checked:_.includes(xe.id),onChange:fe=>{fe.target.checked?R([..._,xe.id]):R(_.filter(Se=>Se!==xe.id))},className:"w-4 h-4 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("div",{className:"font-medium text-slate-900",children:xe.name}),n.jsx("div",{className:"text-xs text-slate-500",children:xe.email})]})]},xe.id))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Delivery Method"}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:z==="email",onChange:()=>H("email"),className:"w-4 h-4 text-indigo-600"}),n.jsx(rs,{className:"w-4 h-4"}),n.jsx("span",{children:"Email"})]}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"radio",checked:z==="link",onChange:()=>H("link"),className:"w-4 h-4 text-indigo-600"}),n.jsx(Kj,{className:"w-4 h-4"}),n.jsx("span",{children:"Copy Link"})]})]}),z==="link"&&n.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"A unique survey link will be generated after you send the survey. You can copy and share it via WhatsApp, SMS, or any other channel."})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[n.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsxs("button",{onClick:ce,disabled:Y||_.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[Y&&n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Send Survey"]})]})]})})]}),re&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>X(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col pointer-events-auto",onClick:xe=>xe.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[n.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Survey Builder"}),n.jsx("button",{onClick:()=>X(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:O?n.jsx("div",{className:"flex items-center justify-center h-64",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):te?n.jsx(ple,{template:te,setTemplate:W,onClose:()=>X(!1),showSuccess:a,showError:s}):n.jsxs("div",{className:"text-center py-12",children:[n.jsx($n,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 mb-2",children:"Failed to load survey template"}),n.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Check browser console for details"}),n.jsx("button",{onClick:()=>{Me()},className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",children:"Retry"})]})})]})})]})]})},ple=({template:e,setTemplate:t,onClose:r,showSuccess:a,showError:s})=>{const[i,o]=D.useState(e),[l,c]=D.useState(!1),d=async()=>{try{c(!0),(await nae({questions:i.questions,name:i.name})).success&&(a("Survey template updated successfully"),t(i),r())}catch(b){s(b.message||"Failed to update survey template")}finally{c(!1)}},u=()=>{const b={id:`q${Date.now()}`,type:"free_text",text:"",required:!1,order:i.questions.length+1};o({...i,questions:[...i.questions,b]})},f=b=>{const v=i.questions.find(g=>g.order===1);if(v&&v.id===b){s("Cannot delete Q1 (the first NPS question)");return}o({...i,questions:i.questions.filter(g=>g.id!==b).map((g,w)=>({...g,order:w+1}))})},p=(b,v)=>{o({...i,questions:i.questions.map(g=>g.id===b?{...g,...v}:g)})},m=(b,v)=>{const g=[...i.questions],w=g.findIndex(S=>S.id===b);if(w===-1)return;const y=g.find(S=>S.order===1);if(y&&y.id===b){s("Q1 must remain first");return}if(v==="up"&&w<=0){s("Cannot move question before Q1");return}const j=v==="up"?w-1:w+1;if(j<0||j>=g.length)return;[g[w],g[j]]=[g[j],g[w]];const N=g.map((S,E)=>({...S,order:E+1}));o({...i,questions:N})};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Template Name"}),n.jsx("input",{type:"text",value:i.name||"",onChange:b=>o({...i,name:b.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-4",children:[n.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Questions"}),n.jsxs("button",{onClick:u,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"Add Question"]})]}),n.jsx("div",{className:"space-y-4",children:i.questions.map((b,v)=>n.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[n.jsxs("div",{className:"flex items-start justify-between mb-3",children:[n.jsxs("span",{className:"text-sm font-semibold text-slate-500",children:["Q",b.order]}),n.jsxs("div",{className:"flex items-center gap-2",children:[v>0&&b.type!=="nps"&&n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>m(b.id,"up"),className:"p-1 hover:bg-slate-100 rounded",title:"Move up",children:n.jsx(Qd,{className:"w-4 h-4 text-slate-500"})}),n.jsx("button",{onClick:()=>m(b.id,"down"),className:"p-1 hover:bg-slate-100 rounded",title:"Move down",children:n.jsx(PU,{className:"w-4 h-4 text-slate-500"})})]}),!(b.order===1&&b.type==="nps")&&n.jsx("button",{onClick:()=>f(b.id),className:"p-1 hover:bg-red-50 rounded text-red-500",title:"Delete question",children:n.jsx(tr,{className:"w-4 h-4"})})]})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Type"}),n.jsxs("select",{value:b.type,onChange:g=>p(b.id,{type:g.target.value}),disabled:b.order===1&&b.type==="nps",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm disabled:bg-slate-100",children:[n.jsx("option",{value:"nps",children:"NPS (0-10 scale)"}),n.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),n.jsx("option",{value:"free_text",children:"Free Text"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Text"}),n.jsx("input",{type:"text",value:b.text,onChange:g=>p(b.id,{text:g.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"Enter question text..."})]}),b.type==="multiple_choice"&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-2",children:"Options"}),n.jsxs("div",{className:"space-y-2",children:[(b.options||[]).map((g,w)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:g,onChange:y=>{const j=[...b.options||[]];j[w]=y.target.value,p(b.id,{options:j})},className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Option ${w+1}`}),n.jsx("button",{onClick:()=>{const y=[...b.options||[]];y.splice(w,1),p(b.id,{options:y})},className:"p-2 hover:bg-red-50 rounded-lg text-red-500 transition-colors",title:"Remove option",children:n.jsx(tr,{className:"w-4 h-4"})})]},w)),n.jsxs("button",{onClick:()=>{const g=b.options||[];p(b.id,{options:[...g,""]})},className:"w-full px-3 py-2 border-2 border-dashed border-slate-300 rounded-lg text-sm text-slate-600 hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"Add Option"]}),(!b.options||b.options.length===0)&&n.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:'No options yet. Click "Add Option" to add choices.'})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"checkbox",checked:b.required,onChange:g=>p(b.id,{required:g.target.checked}),disabled:b.order===1&&b.type==="nps",className:"w-4 h-4 text-indigo-600 disabled:opacity-50"}),n.jsx("label",{className:"text-sm text-slate-700",children:"Required"})]})]})]},b.id))})]}),n.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[n.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),n.jsxs("button",{onClick:d,disabled:l,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l&&n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Save Template"]})]})]})},xle=({surveyId:e})=>{const[t,r]=D.useState(null),[a,s]=D.useState(!0),[i,o]=D.useState(!1),[l,c]=D.useState(!1),[d,u]=D.useState(null),[f,p]=D.useState({}),[m,b]=D.useState(null);D.useEffect(()=>{v()},[e]);const v=async()=>{try{s(!0);const y=await eae(e);if(y.success&&y.data){r(y.data);const j={};y.data.templateSnapshot.forEach(E=>{E.type==="nps"?j[E.id]=null:(E.type,j[E.id]="")}),p(j);const S=new URLSearchParams(window.location.search).get("contact");S?b(S):y.data.recipients&&y.data.recipients.length>0&&b(y.data.recipients[0].contactId)}else u("Survey not found")}catch(y){u(y.message||"Failed to load survey")}finally{s(!1)}},g=(y,j)=>{p(N=>({...N,[y]:j}))},w=async()=>{if(!m){u("Contact information is missing");return}const y=t.templateSnapshot.find(j=>j.type==="nps");if(y&&(f[y.id]===null||f[y.id]===void 0)){u("Please answer the NPS question (required)");return}for(const j of t.templateSnapshot)if(j.required&&(!f[j.id]||f[j.id]==="")){u(`Please answer: ${j.text}`);return}try{o(!0),u(null);const j=Object.entries(f).filter(([N,S])=>S!==null&&S!=="").map(([N,S])=>({questionId:N,answer:S}));await aae(e,{contactId:m,answers:j}),c(!0)}catch(j){u(j.message||"Failed to submit survey")}finally{o(!1)}};return a?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center",children:[n.jsx(gt,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-600",children:"Loading survey..."})]})}):d&&!t?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md",children:[n.jsx($n,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Survey Not Found"}),n.jsx("p",{className:"text-slate-600",children:d})]})}):l?n.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center max-w-md bg-white rounded-xl shadow-lg p-8",children:[n.jsx(Nn,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),n.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Thank You!"}),n.jsx("p",{className:"text-slate-600",children:"Your feedback has been submitted successfully."})]})}):t?(t.templateSnapshot.find(y=>y.type==="nps"),n.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:n.jsx("div",{className:"max-w-2xl mx-auto",children:n.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[n.jsxs("div",{className:"mb-8",children:[n.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Client Satisfaction Survey"}),n.jsx("p",{className:"text-slate-600",children:"We value your feedback. Please take a few moments to share your experience."})]}),d&&n.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:n.jsx("p",{className:"text-red-700 text-sm",children:d})}),n.jsx("div",{className:"space-y-8",children:t.templateSnapshot.map((y,j)=>n.jsxs("div",{className:"space-y-3",children:[n.jsxs("label",{className:"block text-sm font-semibold text-slate-900",children:[y.text,y.required&&n.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),y.type==="nps"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("div",{className:"flex items-center justify-between gap-2",children:[0,1,2,3,4,5,6,7,8,9,10].map(N=>n.jsx("button",{type:"button",onClick:()=>g(y.id,N),className:`flex-1 py-3 px-2 rounded-lg border-2 font-semibold transition-all ${f[y.id]===N?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:border-indigo-400"}`,children:N},N))}),n.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-2",children:[n.jsx("span",{children:"Not at all likely"}),n.jsx("span",{children:"Extremely likely"})]})]}),y.type==="multiple_choice"&&n.jsx("div",{className:"space-y-2",children:y.options?.map(N=>n.jsxs("label",{className:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer",children:[n.jsx("input",{type:"radio",name:y.id,value:N,checked:f[y.id]===N,onChange:S=>g(y.id,S.target.value),className:"w-4 h-4 text-indigo-600"}),n.jsx("span",{className:"text-slate-700",children:N})]},N))}),y.type==="free_text"&&n.jsx("textarea",{value:f[y.id]||"",onChange:N=>g(y.id,N.target.value),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your answer..."})]},y.id))}),n.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:n.jsx("button",{onClick:w,disabled:i,className:"w-full py-3 px-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):"Submit Survey"})})]})})})):null};var pb={};pb.version="0.18.5";var LM=1252,gle=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],g3={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},v3=function(e){gle.indexOf(e)!=-1&&(LM=g3[0]=e)};function vle(){v3(1252)}var Vd=function(e){v3(e)};function b3(){Vd(1200),vle()}function VI(e){for(var t=[],r=0,a=e.length;r<a;++r)t[r]=e.charCodeAt(r);return t}function ble(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function FM(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Yp=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?ble(e.slice(2)):t==254&&r==255?FM(e.slice(2)):t==65279?e.slice(1):e},Tv=function(t){return String.fromCharCode(t)},KI=function(t){return String.fromCharCode(t)},rg,h0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ng(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,a=e.charCodeAt(d++),o=(r&3)<<4|a>>4,s=e.charCodeAt(d++),l=(a&15)<<2|s>>6,c=s&63,isNaN(a)?l=c=64:isNaN(s)&&(c=64),t+=h0.charAt(i)+h0.charAt(o)+h0.charAt(l)+h0.charAt(c);return t}function Cc(e){var t="",r=0,a=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=h0.indexOf(e.charAt(d++)),o=h0.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=h0.indexOf(e.charAt(d++)),a=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(a)),c=h0.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var Rn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),Lf=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function N0(e){return Rn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function XI(e){return Rn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var wc=function(t){return Rn?Lf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function vy(e){if(typeof ArrayBuffer>"u")return wc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),a=0;a!=e.length;++a)r[a]=e.charCodeAt(a)&255;return t}function L0(e){if(Array.isArray(e))return e.map(function(a){return String.fromCharCode(a)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function yle(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function y3(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return y3(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var lo=Rn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Lf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var a=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)a.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";a.set(new Uint8Array(e[t]),r)}return a}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function wle(e){for(var t=[],r=0,a=e.length+250,s=N0(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>a&&(t.push(s.slice(0,r)),r=0,s=N0(65535),a=65530)}return t.push(s.slice(0,r)),lo(t)}var Al=/\u0000/g,Qp=/[\u0001-\u0006]/g;function jm(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Kd(e,t){var r=""+e;return r.length>=t?r:Ks("0",t-r.length)+r}function w3(e,t){var r=""+e;return r.length>=t?r:Ks(" ",t-r.length)+r}function xb(e,t){var r=""+e;return r.length>=t?r:r+Ks(" ",t-r.length)}function Nle(e,t){var r=""+Math.round(e);return r.length>=t?r:Ks("0",t-r.length)+r}function jle(e,t){var r=""+e;return r.length>=t?r:Ks("0",t-r.length)+r}var YI=Math.pow(2,32);function im(e,t){if(e>YI||e<-YI)return Nle(e,t);var r=Math.round(e);return jle(r,t)}function gb(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var QI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],wj=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function kle(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var dn={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},JI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},Sle={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function vb(e,t,r){for(var a=e<0?-1:1,s=e*a,i=0,o=1,l=0,c=1,d=0,u=0,f=Math.floor(s);d<t&&(f=Math.floor(s),l=f*o+i,u=f*d+c,!(s-f<5e-8));)s=1/(s-f),i=o,o=l,c=d,d=u;if(u>t&&(d>t?(u=c,l=i):(u=d,l=o)),!r)return[0,a*l,u];var p=Math.floor(a*l/u);return[p,a*l-p*u,u]}function uh(e,t,r){if(e>2958465||e<0)return null;var a=e|0,s=Math.floor(86400*(e-a)),i=0,o=[],l={D:a,T:s,u:86400*(e-a)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(a+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++a,++l.D)),a===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(a===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{a>60&&--a;var c=new Date(1900,0,1);c.setDate(c.getDate()+a-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),a<60&&(i=(i+6)%7),r&&(i=Ole(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var MM=new Date(1899,11,31,0,0,0),_le=MM.getTime(),Cle=new Date(1900,2,1,0,0,0);function RM(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=Cle&&(r+=1440*60*1e3),(r-(_le+(e.getTimezoneOffset()-MM.getTimezoneOffset())*6e4))/(1440*60*1e3)}function N3(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Ale(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Ele(e){var t=e<0?12:11,r=N3(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Tle(e){var t=N3(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function ag(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Ele(e):t===10?r=e.toFixed(10).substr(0,12):r=Tle(e),N3(Ale(r.toUpperCase()))}function Th(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):ag(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return fd(14,RM(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Ole(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Ple(e,t,r,a){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return wj[r.m-1][1];case 5:return wj[r.m-1][0];default:return wj[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return QI[r.q][0];default:return QI[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Kd(r.S,t.length):(a>=2?o=a===3?1e3:100:o=a===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Kd(i,2+a),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var u=d>0?Kd(c,d):"";return u}function m0(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,a=e.substr(0,r);r!=e.length;r+=t)a+=(a.length>0?",":"")+e.substr(r,t);return a}var BM=/%/g;function Ile(e,t,r){var a=t.replace(BM,""),s=t.length-a.length;return kf(e,a,r*Math.pow(10,2*s))+Ks("%",s)}function Dle(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return kf(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function UM(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+UM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var qM=/# (\?+)( ?)\/( ?)(\d+)/;function Lle(e,t,r){var a=parseInt(e[4],10),s=Math.round(t*a),i=Math.floor(s/a),o=s-i*a,l=a;return r+(i===0?"":""+i)+" "+(o===0?Ks(" ",e[1].length+1+e[4].length):w3(o,e[1].length)+e[2]+"/"+e[3]+Kd(l,e[4].length))}function Fle(e,t,r){return r+(t===0?"":""+t)+Ks(" ",e[1].length+2+e[4].length)}var $M=/^#*0*\.([0#]+)/,zM=/\).*[0#]/,HM=/\(###\) ###\\?-####/;function jl(e){for(var t="",r,a=0;a!=e.length;++a)switch(r=e.charCodeAt(a)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function ZI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function eD(e,t){var r=e-Math.floor(e),a=Math.pow(10,t);return t<(""+Math.round(r*a)).length?0:Math.round(r*a)}function Mle(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Rle(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Yc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(zM)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Yc("n",a,r):"("+Yc("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Dle(e,t,r);if(t.indexOf("%")!==-1)return Ile(e,t,r);if(t.indexOf("E")!==-1)return UM(t,r);if(t.charCodeAt(0)===36)return"$"+Yc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+im(c,t.length);if(t.match(/^[#?]+$/))return s=im(r,0),s==="0"&&(s=""),s.length>t.length?s:jl(t.substr(0,t.length-s.length))+s;if(i=t.match(qM))return Lle(i,c,d);if(t.match(/^#+0+$/))return d+im(c,t.length-t.indexOf("0"));if(i=t.match($M))return s=ZI(r,i[1].length).replace(/^([^\.]+)$/,"$1."+jl(i[1])).replace(/\.$/,"."+jl(i[1])).replace(/\.(\d*)$/,function(b,v){return"."+v+Ks("0",jl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+ZI(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+m0(im(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Yc(e,t,-r):m0(""+(Math.floor(r)+Mle(r,i[1].length)))+"."+Kd(eD(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Yc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jm(Yc(e,t.replace(/[\\-]/g,""),r)),o=0,jm(jm(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(HM))return s=Yc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=vb(c,Math.pow(10,o)-1,!1),s=""+d,u=kf("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=xb(l[2],o),u.length<i[4].length&&(u=jl(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=vb(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?w3(l[1],o)+i[2]+"/"+i[3]+xb(l[2],o):Ks(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=im(r,0),t.length<=s.length?s:jl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,p=t.length-s.length-f;return jl(t.substr(0,f)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=eD(r,i[1].length),r<0?"-"+Yc(e,t,-r):m0(Rle(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Kd(0,3-b.length):"")+b})+"."+Kd(o,i[1].length);switch(t){case"###,##0.00":return Yc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var m=m0(im(c,0));return m!=="0"?d+m:"";case"###,###.00":return Yc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Yc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Ble(e,t,r){for(var a=t.length-1;t.charCodeAt(a-1)===44;)--a;return kf(e,t.substr(0,a),r/Math.pow(10,3*(t.length-a)))}function Ule(e,t,r){var a=t.replace(BM,""),s=t.length-a.length;return kf(e,a,r*Math.pow(10,2*s))+Ks("%",s)}function WM(e,t){var r,a=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+WM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(a+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,u){return c+d+u.substr(0,(s+i)%s)+"."+u.substr(i)+"E"})}else r=t.toExponential(a);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function ju(e,t,r){if(e.charCodeAt(0)===40&&!t.match(zM)){var a=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ju("n",a,r):"("+ju("n",a,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Ble(e,t,r);if(t.indexOf("%")!==-1)return Ule(e,t,r);if(t.indexOf("E")!==-1)return WM(t,r);if(t.charCodeAt(0)===36)return"$"+ju(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Kd(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:jl(t.substr(0,t.length-s.length))+s;if(i=t.match(qM))return Fle(i,c,d);if(t.match(/^#+0+$/))return d+Kd(c,t.length-t.indexOf("0"));if(i=t.match($M))return s=(""+r).replace(/^([^\.]+)$/,"$1."+jl(i[1])).replace(/\.$/,"."+jl(i[1])),s=s.replace(/\.(\d*)$/,function(b,v){return"."+v+Ks("0",jl(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+m0(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ju(e,t,-r):m0(""+r)+"."+Ks("0",i[1].length);if(i=t.match(/^#,#*,#0/))return ju(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=jm(ju(e,t.replace(/[\\-]/g,""),r)),o=0,jm(jm(t.replace(/\\/g,"")).replace(/[0#]/g,function(b){return o<s.length?s.charAt(o++):b==="0"?"0":""}));if(t.match(HM))return s=ju(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var u="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=vb(c,Math.pow(10,o)-1,!1),s=""+d,u=kf("n",i[1],l[1]),u.charAt(u.length-1)==" "&&(u=u.substr(0,u.length-1)+"0"),s+=u+i[2]+"/"+i[3],u=xb(l[2],o),u.length<i[4].length&&(u=jl(i[4].substr(i[4].length-u.length))+u),s+=u,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=vb(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?w3(l[1],o)+i[2]+"/"+i[3]+xb(l[2],o):Ks(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:jl(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var f=t.indexOf(".")-o,p=t.length-s.length-f;return jl(t.substr(0,f)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+ju(e,t,-r):m0(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(b){return"00,"+(b.length<3?Kd(0,3-b.length):"")+b})+"."+Kd(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var m=m0(""+c);return m!=="0"?d+m:"";default:if(t.match(/\.[0#?]*$/))return ju(e,t.slice(0,t.lastIndexOf(".")),r)+jl(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function kf(e,t,r){return(r|0)===r?ju(e,t,r):Yc(e,t,r)}function qle(e){for(var t=[],r=!1,a=0,s=0;a<e.length;++a)switch(e.charCodeAt(a)){case 34:r=!r;break;case 95:case 42:case 92:++a;break;case 59:t[t.length]=e.substr(s,a-s),s=a+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var GM=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function mp(e){for(var t=0,r="",a="";t<e.length;)switch(r=e.charAt(t)){case"G":gb(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(a=r;e.charAt(t++)!=="]"&&t<e.length;)a+=e.charAt(t);if(a.match(GM))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function $le(e,t,r,a){for(var s=[],i="",o=0,l="",c="t",d,u,f,p="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!gb(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(f=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(f);s[s.length]={t:"t",v:i},++o;break;case"\\":var m=e.charAt(++o),b=m==="("||m===")"?m:"t";s[s.length]={t:b,v:m},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=uh(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=uh(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var v={t:l,v:l};if(d==null&&(d=uh(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(v.v=d.H>=12?"P":"A"),v.t="T",p="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(v.v=d.H>=12?"PM":"AM"),v.t="T",o+=5,p="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(v.v=d.H>=12?"":""),v.t="T",o+=5,p="h"):(v.t="t",++o),d==null&&v.t==="T")return"";s[s.length]=v,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(GM)){if(d==null&&(d=uh(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",mp(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:a===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var g=0,w=0,y;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=p,c="h",g<1&&(g=1);break;case"s":(y=s[o].v.match(/\.0+$/))&&(w=Math.max(w,y[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[o].v.match(/[Hh]/)&&(g=1),g<2&&s[o].v.match(/[Mm]/)&&(g=2),g<3&&s[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var j="",N;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Ple(s[o].t.charCodeAt(0),s[o].v,d,w),s[o].t="t";break;case"n":case"?":for(N=o+1;s[N]!=null&&((l=s[N].t)==="?"||l==="D"||(l===" "||l==="t")&&s[N+1]!=null&&(s[N+1].t==="?"||s[N+1].t==="t"&&s[N+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[N].v==="/"||s[N].v===" "&&s[N+1]!=null&&s[N+1].t=="?"));)s[o].v+=s[N].v,s[N]={v:"",t:";"},++N;j+=s[o].v,o=N-1;break;case"G":s[o].t="t",s[o].v=Th(t,r);break}var S="",E,A;if(j.length>0){j.charCodeAt(0)==40?(E=t<0&&j.charCodeAt(0)===45?-t:t,A=kf("n",j,E)):(E=t<0&&a>1?-t:t,A=kf("n",j,E),E<0&&s[0]&&s[0].t=="t"&&(A=A.substr(1),s[0].v="-"+s[0].v)),N=A.length-1;var P=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){P=o;break}var I=s.length;if(P===s.length&&A.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(N>=s[o].v.length-1?(N-=s[o].v.length,s[o].v=A.substr(N+1,s[o].v.length)):N<0?s[o].v="":(s[o].v=A.substr(0,N+1),N=-1),s[o].t="t",I=o);N>=0&&I<s.length&&(s[I].v=A.substr(0,N+1)+s[I].v)}else if(P!==s.length&&A.indexOf("E")===-1){for(N=A.indexOf(".")-1,o=P;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(u=s[o].v.indexOf(".")>-1&&o===P?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(u+1);u>=0;--u)N>=0&&(s[o].v.charAt(u)==="0"||s[o].v.charAt(u)==="#")&&(S=A.charAt(N--)+S);s[o].v=S,s[o].t="t",I=o}for(N>=0&&I<s.length&&(s[I].v=A.substr(0,N+1)+s[I].v),N=A.indexOf(".")+1,o=P;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==P)){for(u=s[o].v.indexOf(".")>-1&&o===P?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,u);u<s[o].v.length;++u)N<A.length&&(S+=A.charAt(N++));s[o].v=S,s[o].t="t",I=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(E=a>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=kf(s[o].t,s[o].v,E),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var tD=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function rD(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function zle(e,t){var r=qle(e),a=r.length,s=r[a-1].indexOf("@");if(a<4&&s>-1&&--a,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[a,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(tD),l=r[1].match(tD);return rD(t,o)?[a,r[0]]:rD(t,l)?[a,r[1]]:[a,r[o!=null&&l!=null?2:1]]}return[a,i]}function fd(e,t,r){r==null&&(r={});var a="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?a=r.dateNF:a=e;break;case"number":e==14&&r.dateNF?a=r.dateNF:a=(r.table!=null?r.table:dn)[e],a==null&&(a=r.table&&r.table[JI[e]]||dn[JI[e]]),a==null&&(a=Sle[e]||"General");break}if(gb(a,0))return Th(t,r);t instanceof Date&&(t=RM(t,r.date1904));var s=zle(a,t);if(gb(s[1]))return Th(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return $le(s[1],t,r,s[0])}function Sf(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(dn[r]==null){t<0&&(t=r);continue}if(dn[r]==e){t=r;break}}t<0&&(t=391)}return dn[t]=e,t}function by(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Sf(e[t],t)}function pp(){dn=kle()}var Hle={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},VM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Wle(e){var t=typeof e=="number"?dn[e]:e;return t=t.replace(VM,"(\\d+)"),new RegExp("^"+t+"$")}function Gle(e,t,r){var a=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(VM)||[]).forEach(function(f,p){var m=parseInt(r[p+1],10);switch(f.toLowerCase().charAt(0)){case"y":a=m;break;case"d":i=m;break;case"h":o=m;break;case"s":c=m;break;case"m":o>=0?l=m:s=m;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(a>=0?a:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var u=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:a==-1&&s==-1&&i==-1?u:d+"T"+u}var Vle=(function(){var e={};e.version="1.2.0";function t(){for(var A=0,P=new Array(256),I=0;I!=256;++I)A=I,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,P[I]=A;return typeof Int32Array<"u"?new Int32Array(P):P}var r=t();function a(A){var P=0,I=0,B=0,T=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)T[B]=A[B];for(B=0;B!=256;++B)for(I=A[B],P=256+B;P<4096;P+=256)I=T[P]=I>>>8^A[I&255];var _=[];for(B=1;B!=16;++B)_[B-1]=typeof Int32Array<"u"?T.subarray(B*256,B*256+256):T.slice(B*256,B*256+256);return _}var s=a(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],u=s[5],f=s[6],p=s[7],m=s[8],b=s[9],v=s[10],g=s[11],w=s[12],y=s[13],j=s[14];function N(A,P){for(var I=P^-1,B=0,T=A.length;B<T;)I=I>>>8^r[(I^A.charCodeAt(B++))&255];return~I}function S(A,P){for(var I=P^-1,B=A.length-15,T=0;T<B;)I=j[A[T++]^I&255]^y[A[T++]^I>>8&255]^w[A[T++]^I>>16&255]^g[A[T++]^I>>>24]^v[A[T++]]^b[A[T++]]^m[A[T++]]^p[A[T++]]^f[A[T++]]^u[A[T++]]^d[A[T++]]^c[A[T++]]^l[A[T++]]^o[A[T++]]^i[A[T++]]^r[A[T++]];for(B+=15;T<B;)I=I>>>8^r[(I^A[T++])&255];return~I}function E(A,P){for(var I=P^-1,B=0,T=A.length,_=0,R=0;B<T;)_=A.charCodeAt(B++),_<128?I=I>>>8^r[(I^_)&255]:_<2048?(I=I>>>8^r[(I^(192|_>>6&31))&255],I=I>>>8^r[(I^(128|_&63))&255]):_>=55296&&_<57344?(_=(_&1023)+64,R=A.charCodeAt(B++)&1023,I=I>>>8^r[(I^(240|_>>8&7))&255],I=I>>>8^r[(I^(128|_>>2&63))&255],I=I>>>8^r[(I^(128|R>>6&15|(_&3)<<4))&255],I=I>>>8^r[(I^(128|R&63))&255]):(I=I>>>8^r[(I^(224|_>>12&15))&255],I=I>>>8^r[(I^(128|_>>6&63))&255],I=I>>>8^r[(I^(128|_&63))&255]);return~I}return e.table=r,e.bstr=N,e.buf=S,e.str=E,e})(),Zr=(function(){var t={};t.version="1.2.1";function r(ke,ze){for(var $e=ke.split("/"),pe=ze.split("/"),_e=0,Fe=0,et=Math.min($e.length,pe.length);_e<et;++_e){if(Fe=$e[_e].length-pe[_e].length)return Fe;if($e[_e]!=pe[_e])return $e[_e]<pe[_e]?-1:1}return $e.length-pe.length}function a(ke){if(ke.charAt(ke.length-1)=="/")return ke.slice(0,-1).indexOf("/")===-1?ke:a(ke.slice(0,-1));var ze=ke.lastIndexOf("/");return ze===-1?ke:ke.slice(0,ze+1)}function s(ke){if(ke.charAt(ke.length-1)=="/")return s(ke.slice(0,-1));var ze=ke.lastIndexOf("/");return ze===-1?ke:ke.slice(ze+1)}function i(ke,ze){typeof ze=="string"&&(ze=new Date(ze));var $e=ze.getHours();$e=$e<<6|ze.getMinutes(),$e=$e<<5|ze.getSeconds()>>>1,ke.write_shift(2,$e);var pe=ze.getFullYear()-1980;pe=pe<<4|ze.getMonth()+1,pe=pe<<5|ze.getDate(),ke.write_shift(2,pe)}function o(ke){var ze=ke.read_shift(2)&65535,$e=ke.read_shift(2)&65535,pe=new Date,_e=$e&31;$e>>>=5;var Fe=$e&15;$e>>>=4,pe.setMilliseconds(0),pe.setFullYear($e+1980),pe.setMonth(Fe-1),pe.setDate(_e);var et=ze&31;ze>>>=5;var mt=ze&63;return ze>>>=6,pe.setHours(ze),pe.setMinutes(mt),pe.setSeconds(et<<1),pe}function l(ke){Oo(ke,0);for(var ze={},$e=0;ke.l<=ke.length-4;){var pe=ke.read_shift(2),_e=ke.read_shift(2),Fe=ke.l+_e,et={};pe===21589&&($e=ke.read_shift(1),$e&1&&(et.mtime=ke.read_shift(4)),_e>5&&($e&2&&(et.atime=ke.read_shift(4)),$e&4&&(et.ctime=ke.read_shift(4))),et.mtime&&(et.mt=new Date(et.mtime*1e3))),ke.l=Fe,ze[pe]=et}return ze}var c;function d(){return c||(c={})}function u(ke,ze){if(ke[0]==80&&ke[1]==75)return Jt(ke,ze);if((ke[0]|32)==109&&(ke[1]|32)==105)return Wr(ke,ze);if(ke.length<512)throw new Error("CFB file size "+ke.length+" < 512");var $e=3,pe=512,_e=0,Fe=0,et=0,mt=0,lt=0,xt=[],ge=ke.slice(0,512);Oo(ge,0);var ve=f(ge);switch($e=ve[0],$e){case 3:pe=512;break;case 4:pe=4096;break;case 0:if(ve[1]==0)return Jt(ke,ze);default:throw new Error("Major Version: Expected 3 or 4 saw "+$e)}pe!==512&&(ge=ke.slice(0,pe),Oo(ge,28));var Ke=ke.slice(0,pe);p(ge,$e);var ct=ge.read_shift(4,"i");if($e===3&&ct!==0)throw new Error("# Directory Sectors: Expected 0 saw "+ct);ge.l+=4,et=ge.read_shift(4,"i"),ge.l+=4,ge.chk("00100000","Mini Stream Cutoff Size: "),mt=ge.read_shift(4,"i"),_e=ge.read_shift(4,"i"),lt=ge.read_shift(4,"i"),Fe=ge.read_shift(4,"i");for(var jt=-1,bt=0;bt<109&&(jt=ge.read_shift(4,"i"),!(jt<0));++bt)xt[bt]=jt;var Wt=m(ke,pe);g(lt,Fe,Wt,pe,xt);var ir=y(Wt,et,xt,pe);ir[et].name="!Directory",_e>0&&mt!==R&&(ir[mt].name="!MiniFAT"),ir[xt[0]].name="!FAT",ir.fat_addrs=xt,ir.ssz=pe;var Kt={},yr=[],$r=[],Ur=[];j(et,ir,Wt,yr,_e,Kt,$r,mt),b($r,Ur,yr),yr.shift();var un={FileIndex:$r,FullPaths:Ur};return ze&&ze.raw&&(un.raw={header:Ke,sectors:Wt}),un}function f(ke){if(ke[ke.l]==80&&ke[ke.l+1]==75)return[0,0];ke.chk(z,"Header Signature: "),ke.l+=16;var ze=ke.read_shift(2,"u");return[ke.read_shift(2,"u"),ze]}function p(ke,ze){var $e=9;switch(ke.l+=2,$e=ke.read_shift(2)){case 9:if(ze!=3)throw new Error("Sector Shift: Expected 9 saw "+$e);break;case 12:if(ze!=4)throw new Error("Sector Shift: Expected 12 saw "+$e);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+$e)}ke.chk("0600","Mini Sector Shift: "),ke.chk("000000000000","Reserved: ")}function m(ke,ze){for(var $e=Math.ceil(ke.length/ze)-1,pe=[],_e=1;_e<$e;++_e)pe[_e-1]=ke.slice(_e*ze,(_e+1)*ze);return pe[$e-1]=ke.slice($e*ze),pe}function b(ke,ze,$e){for(var pe=0,_e=0,Fe=0,et=0,mt=0,lt=$e.length,xt=[],ge=[];pe<lt;++pe)xt[pe]=ge[pe]=pe,ze[pe]=$e[pe];for(;mt<ge.length;++mt)pe=ge[mt],_e=ke[pe].L,Fe=ke[pe].R,et=ke[pe].C,xt[pe]===pe&&(_e!==-1&&xt[_e]!==_e&&(xt[pe]=xt[_e]),Fe!==-1&&xt[Fe]!==Fe&&(xt[pe]=xt[Fe])),et!==-1&&(xt[et]=pe),_e!==-1&&pe!=xt[pe]&&(xt[_e]=xt[pe],ge.lastIndexOf(_e)<mt&&ge.push(_e)),Fe!==-1&&pe!=xt[pe]&&(xt[Fe]=xt[pe],ge.lastIndexOf(Fe)<mt&&ge.push(Fe));for(pe=1;pe<lt;++pe)xt[pe]===pe&&(Fe!==-1&&xt[Fe]!==Fe?xt[pe]=xt[Fe]:_e!==-1&&xt[_e]!==_e&&(xt[pe]=xt[_e]));for(pe=1;pe<lt;++pe)if(ke[pe].type!==0){if(mt=pe,mt!=xt[mt])do mt=xt[mt],ze[pe]=ze[mt]+"/"+ze[pe];while(mt!==0&&xt[mt]!==-1&&mt!=xt[mt]);xt[pe]=-1}for(ze[0]+="/",pe=1;pe<lt;++pe)ke[pe].type!==2&&(ze[pe]+="/")}function v(ke,ze,$e){for(var pe=ke.start,_e=ke.size,Fe=[],et=pe;$e&&_e>0&&et>=0;)Fe.push(ze.slice(et*_,et*_+_)),_e-=_,et=rh($e,et*4);return Fe.length===0?qt(0):lo(Fe).slice(0,ke.size)}function g(ke,ze,$e,pe,_e){var Fe=R;if(ke===R){if(ze!==0)throw new Error("DIFAT chain shorter than expected")}else if(ke!==-1){var et=$e[ke],mt=(pe>>>2)-1;if(!et)return;for(var lt=0;lt<mt&&(Fe=rh(et,lt*4))!==R;++lt)_e.push(Fe);g(rh(et,pe-4),ze-1,$e,pe,_e)}}function w(ke,ze,$e,pe,_e){var Fe=[],et=[];_e||(_e=[]);var mt=pe-1,lt=0,xt=0;for(lt=ze;lt>=0;){_e[lt]=!0,Fe[Fe.length]=lt,et.push(ke[lt]);var ge=$e[Math.floor(lt*4/pe)];if(xt=lt*4&mt,pe<4+xt)throw new Error("FAT boundary crossed: "+lt+" 4 "+pe);if(!ke[ge])break;lt=rh(ke[ge],xt)}return{nodes:Fe,data:mD([et])}}function y(ke,ze,$e,pe){var _e=ke.length,Fe=[],et=[],mt=[],lt=[],xt=pe-1,ge=0,ve=0,Ke=0,ct=0;for(ge=0;ge<_e;++ge)if(mt=[],Ke=ge+ze,Ke>=_e&&(Ke-=_e),!et[Ke]){lt=[];var jt=[];for(ve=Ke;ve>=0;){jt[ve]=!0,et[ve]=!0,mt[mt.length]=ve,lt.push(ke[ve]);var bt=$e[Math.floor(ve*4/pe)];if(ct=ve*4&xt,pe<4+ct)throw new Error("FAT boundary crossed: "+ve+" 4 "+pe);if(!ke[bt]||(ve=rh(ke[bt],ct),jt[ve]))break}Fe[Ke]={nodes:mt,data:mD([lt])}}return Fe}function j(ke,ze,$e,pe,_e,Fe,et,mt){for(var lt=0,xt=pe.length?2:0,ge=ze[ke].data,ve=0,Ke=0,ct;ve<ge.length;ve+=128){var jt=ge.slice(ve,ve+128);Oo(jt,64),Ke=jt.read_shift(2),ct=E3(jt,0,Ke-xt),pe.push(ct);var bt={name:ct,type:jt.read_shift(1),color:jt.read_shift(1),L:jt.read_shift(4,"i"),R:jt.read_shift(4,"i"),C:jt.read_shift(4,"i"),clsid:jt.read_shift(16),state:jt.read_shift(4,"i"),start:0,size:0},Wt=jt.read_shift(2)+jt.read_shift(2)+jt.read_shift(2)+jt.read_shift(2);Wt!==0&&(bt.ct=N(jt,jt.l-8));var ir=jt.read_shift(2)+jt.read_shift(2)+jt.read_shift(2)+jt.read_shift(2);ir!==0&&(bt.mt=N(jt,jt.l-8)),bt.start=jt.read_shift(4,"i"),bt.size=jt.read_shift(4,"i"),bt.size<0&&bt.start<0&&(bt.size=bt.type=0,bt.start=R,bt.name=""),bt.type===5?(lt=bt.start,_e>0&&lt!==R&&(ze[lt].name="!StreamData")):bt.size>=4096?(bt.storage="fat",ze[bt.start]===void 0&&(ze[bt.start]=w($e,bt.start,ze.fat_addrs,ze.ssz)),ze[bt.start].name=bt.name,bt.content=ze[bt.start].data.slice(0,bt.size)):(bt.storage="minifat",bt.size<0?bt.size=0:lt!==R&&bt.start!==R&&ze[lt]&&(bt.content=v(bt,ze[lt].data,(ze[mt]||{}).data))),bt.content&&Oo(bt.content,0),Fe[ct]=bt,et.push(bt)}}function N(ke,ze){return new Date((bc(ke,ze+4)/1e7*Math.pow(2,32)+bc(ke,ze)/1e7-11644473600)*1e3)}function S(ke,ze){return d(),u(c.readFileSync(ke),ze)}function E(ke,ze){var $e=ze&&ze.type;switch($e||Rn&&Buffer.isBuffer(ke)&&($e="buffer"),$e||"base64"){case"file":return S(ke,ze);case"base64":return u(wc(Cc(ke)),ze);case"binary":return u(wc(ke),ze)}return u(ke,ze)}function A(ke,ze){var $e=ze||{},pe=$e.root||"Root Entry";if(ke.FullPaths||(ke.FullPaths=[]),ke.FileIndex||(ke.FileIndex=[]),ke.FullPaths.length!==ke.FileIndex.length)throw new Error("inconsistent CFB structure");ke.FullPaths.length===0&&(ke.FullPaths[0]=pe+"/",ke.FileIndex[0]={name:pe,type:5}),$e.CLSID&&(ke.FileIndex[0].clsid=$e.CLSID),P(ke)}function P(ke){var ze="Sh33tJ5";if(!Zr.find(ke,"/"+ze)){var $e=qt(4);$e[0]=55,$e[1]=$e[3]=50,$e[2]=54,ke.FileIndex.push({name:ze,type:2,content:$e,size:4,L:69,R:69,C:69}),ke.FullPaths.push(ke.FullPaths[0]+ze),I(ke)}}function I(ke,ze){A(ke);for(var $e=!1,pe=!1,_e=ke.FullPaths.length-1;_e>=0;--_e){var Fe=ke.FileIndex[_e];switch(Fe.type){case 0:pe?$e=!0:(ke.FileIndex.pop(),ke.FullPaths.pop());break;case 1:case 2:case 5:pe=!0,isNaN(Fe.R*Fe.L*Fe.C)&&($e=!0),Fe.R>-1&&Fe.L>-1&&Fe.R==Fe.L&&($e=!0);break;default:$e=!0;break}}if(!(!$e&&!ze)){var et=new Date(1987,1,19),mt=0,lt=Object.create?Object.create(null):{},xt=[];for(_e=0;_e<ke.FullPaths.length;++_e)lt[ke.FullPaths[_e]]=!0,ke.FileIndex[_e].type!==0&&xt.push([ke.FullPaths[_e],ke.FileIndex[_e]]);for(_e=0;_e<xt.length;++_e){var ge=a(xt[_e][0]);pe=lt[ge],pe||(xt.push([ge,{name:s(ge).replace("/",""),type:1,clsid:Y,ct:et,mt:et,content:null}]),lt[ge]=!0)}for(xt.sort(function(ct,jt){return r(ct[0],jt[0])}),ke.FullPaths=[],ke.FileIndex=[],_e=0;_e<xt.length;++_e)ke.FullPaths[_e]=xt[_e][0],ke.FileIndex[_e]=xt[_e][1];for(_e=0;_e<xt.length;++_e){var ve=ke.FileIndex[_e],Ke=ke.FullPaths[_e];if(ve.name=s(Ke).replace("/",""),ve.L=ve.R=ve.C=-(ve.color=1),ve.size=ve.content?ve.content.length:0,ve.start=0,ve.clsid=ve.clsid||Y,_e===0)ve.C=xt.length>1?1:-1,ve.size=0,ve.type=5;else if(Ke.slice(-1)=="/"){for(mt=_e+1;mt<xt.length&&a(ke.FullPaths[mt])!=Ke;++mt);for(ve.C=mt>=xt.length?-1:mt,mt=_e+1;mt<xt.length&&a(ke.FullPaths[mt])!=a(Ke);++mt);ve.R=mt>=xt.length?-1:mt,ve.type=1}else a(ke.FullPaths[_e+1]||"")==a(Ke)&&(ve.R=_e+1),ve.type=2}}}function B(ke,ze){var $e=ze||{};if($e.fileType=="mad")return sr(ke,$e);if(I(ke),$e.fileType==="zip")return Hr(ke,$e);var pe=(function(ct){for(var jt=0,bt=0,Wt=0;Wt<ct.FileIndex.length;++Wt){var ir=ct.FileIndex[Wt];if(ir.content){var Kt=ir.content.length;Kt>0&&(Kt<4096?jt+=Kt+63>>6:bt+=Kt+511>>9)}}for(var yr=ct.FullPaths.length+3>>2,$r=jt+7>>3,Ur=jt+127>>7,un=$r+bt+yr+Ur,Vr=un+127>>7,aa=Vr<=109?0:Math.ceil((Vr-109)/127);un+Vr+aa+127>>7>Vr;)aa=++Vr<=109?0:Math.ceil((Vr-109)/127);var Kn=[1,aa,Vr,Ur,yr,bt,jt,0];return ct.FileIndex[0].size=jt<<6,Kn[7]=(ct.FileIndex[0].start=Kn[0]+Kn[1]+Kn[2]+Kn[3]+Kn[4]+Kn[5])+(Kn[6]+7>>3),Kn})(ke),_e=qt(pe[7]<<9),Fe=0,et=0;{for(Fe=0;Fe<8;++Fe)_e.write_shift(1,H[Fe]);for(Fe=0;Fe<8;++Fe)_e.write_shift(2,0);for(_e.write_shift(2,62),_e.write_shift(2,3),_e.write_shift(2,65534),_e.write_shift(2,9),_e.write_shift(2,6),Fe=0;Fe<3;++Fe)_e.write_shift(2,0);for(_e.write_shift(4,0),_e.write_shift(4,pe[2]),_e.write_shift(4,pe[0]+pe[1]+pe[2]+pe[3]-1),_e.write_shift(4,0),_e.write_shift(4,4096),_e.write_shift(4,pe[3]?pe[0]+pe[1]+pe[2]-1:R),_e.write_shift(4,pe[3]),_e.write_shift(-4,pe[1]?pe[0]-1:R),_e.write_shift(4,pe[1]),Fe=0;Fe<109;++Fe)_e.write_shift(-4,Fe<pe[2]?pe[1]+Fe:-1)}if(pe[1])for(et=0;et<pe[1];++et){for(;Fe<236+et*127;++Fe)_e.write_shift(-4,Fe<pe[2]?pe[1]+Fe:-1);_e.write_shift(-4,et===pe[1]-1?R:et+1)}var mt=function(ct){for(et+=ct;Fe<et-1;++Fe)_e.write_shift(-4,Fe+1);ct&&(++Fe,_e.write_shift(-4,R))};for(et=Fe=0,et+=pe[1];Fe<et;++Fe)_e.write_shift(-4,J.DIFSECT);for(et+=pe[2];Fe<et;++Fe)_e.write_shift(-4,J.FATSECT);mt(pe[3]),mt(pe[4]);for(var lt=0,xt=0,ge=ke.FileIndex[0];lt<ke.FileIndex.length;++lt)ge=ke.FileIndex[lt],ge.content&&(xt=ge.content.length,!(xt<4096)&&(ge.start=et,mt(xt+511>>9)));for(mt(pe[6]+7>>3);_e.l&511;)_e.write_shift(-4,J.ENDOFCHAIN);for(et=Fe=0,lt=0;lt<ke.FileIndex.length;++lt)ge=ke.FileIndex[lt],ge.content&&(xt=ge.content.length,!(!xt||xt>=4096)&&(ge.start=et,mt(xt+63>>6)));for(;_e.l&511;)_e.write_shift(-4,J.ENDOFCHAIN);for(Fe=0;Fe<pe[4]<<2;++Fe){var ve=ke.FullPaths[Fe];if(!ve||ve.length===0){for(lt=0;lt<17;++lt)_e.write_shift(4,0);for(lt=0;lt<3;++lt)_e.write_shift(4,-1);for(lt=0;lt<12;++lt)_e.write_shift(4,0);continue}ge=ke.FileIndex[Fe],Fe===0&&(ge.start=ge.size?ge.start-1:R);var Ke=Fe===0&&$e.root||ge.name;if(xt=2*(Ke.length+1),_e.write_shift(64,Ke,"utf16le"),_e.write_shift(2,xt),_e.write_shift(1,ge.type),_e.write_shift(1,ge.color),_e.write_shift(-4,ge.L),_e.write_shift(-4,ge.R),_e.write_shift(-4,ge.C),ge.clsid)_e.write_shift(16,ge.clsid,"hex");else for(lt=0;lt<4;++lt)_e.write_shift(4,0);_e.write_shift(4,ge.state||0),_e.write_shift(4,0),_e.write_shift(4,0),_e.write_shift(4,0),_e.write_shift(4,0),_e.write_shift(4,ge.start),_e.write_shift(4,ge.size),_e.write_shift(4,0)}for(Fe=1;Fe<ke.FileIndex.length;++Fe)if(ge=ke.FileIndex[Fe],ge.size>=4096)if(_e.l=ge.start+1<<9,Rn&&Buffer.isBuffer(ge.content))ge.content.copy(_e,_e.l,0,ge.size),_e.l+=ge.size+511&-512;else{for(lt=0;lt<ge.size;++lt)_e.write_shift(1,ge.content[lt]);for(;lt&511;++lt)_e.write_shift(1,0)}for(Fe=1;Fe<ke.FileIndex.length;++Fe)if(ge=ke.FileIndex[Fe],ge.size>0&&ge.size<4096)if(Rn&&Buffer.isBuffer(ge.content))ge.content.copy(_e,_e.l,0,ge.size),_e.l+=ge.size+63&-64;else{for(lt=0;lt<ge.size;++lt)_e.write_shift(1,ge.content[lt]);for(;lt&63;++lt)_e.write_shift(1,0)}if(Rn)_e.l=_e.length;else for(;_e.l<_e.length;)_e.write_shift(1,0);return _e}function T(ke,ze){var $e=ke.FullPaths.map(function(lt){return lt.toUpperCase()}),pe=$e.map(function(lt){var xt=lt.split("/");return xt[xt.length-(lt.slice(-1)=="/"?2:1)]}),_e=!1;ze.charCodeAt(0)===47?(_e=!0,ze=$e[0].slice(0,-1)+ze):_e=ze.indexOf("/")!==-1;var Fe=ze.toUpperCase(),et=_e===!0?$e.indexOf(Fe):pe.indexOf(Fe);if(et!==-1)return ke.FileIndex[et];var mt=!Fe.match(Qp);for(Fe=Fe.replace(Al,""),mt&&(Fe=Fe.replace(Qp,"!")),et=0;et<$e.length;++et)if((mt?$e[et].replace(Qp,"!"):$e[et]).replace(Al,"")==Fe||(mt?pe[et].replace(Qp,"!"):pe[et]).replace(Al,"")==Fe)return ke.FileIndex[et];return null}var _=64,R=-2,z="d0cf11e0a1b11ae1",H=[208,207,17,224,161,177,26,225],Y="00000000000000000000000000000000",J={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:R,FREESECT:-1,HEADER_SIGNATURE:z,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function re(ke,ze,$e){d();var pe=B(ke,$e);c.writeFileSync(ze,pe)}function X(ke){for(var ze=new Array(ke.length),$e=0;$e<ke.length;++$e)ze[$e]=String.fromCharCode(ke[$e]);return ze.join("")}function te(ke,ze){var $e=B(ke,ze);switch(ze&&ze.type||"buffer"){case"file":return d(),c.writeFileSync(ze.filename,$e),$e;case"binary":return typeof $e=="string"?$e:X($e);case"base64":return ng(typeof $e=="string"?$e:X($e));case"buffer":if(Rn)return Buffer.isBuffer($e)?$e:Lf($e);case"array":return typeof $e=="string"?wc($e):$e}return $e}var W;function O(ke){try{var ze=ke.InflateRaw,$e=new ze;if($e._processChunk(new Uint8Array([3,0]),$e._finishFlushFlag),$e.bytesRead)W=ke;else throw new Error("zlib does not expose bytesRead")}catch(pe){console.error("cannot use native zlib: "+(pe.message||pe))}}function q(ke,ze){if(!W)return Ct(ke,ze);var $e=W.InflateRaw,pe=new $e,_e=pe._processChunk(ke.slice(ke.l),pe._finishFlushFlag);return ke.l+=pe.bytesRead,_e}function G(ke){return W?W.deflateRawSync(ke):Re(ke)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],ae=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function me(ke){var ze=(ke<<1|ke<<11)&139536|(ke<<5|ke<<15)&558144;return(ze>>16|ze>>8|ze)&255}for(var se=typeof Uint8Array<"u",le=se?new Uint8Array(256):[],Me=0;Me<256;++Me)le[Me]=me(Me);function ue(ke,ze){var $e=le[ke&255];return ze<=8?$e>>>8-ze:($e=$e<<8|le[ke>>8&255],ze<=16?$e>>>16-ze:($e=$e<<8|le[ke>>16&255],$e>>>24-ze))}function Ue(ke,ze){var $e=ze&7,pe=ze>>>3;return(ke[pe]|($e<=6?0:ke[pe+1]<<8))>>>$e&3}function Ae(ke,ze){var $e=ze&7,pe=ze>>>3;return(ke[pe]|($e<=5?0:ke[pe+1]<<8))>>>$e&7}function ie(ke,ze){var $e=ze&7,pe=ze>>>3;return(ke[pe]|($e<=4?0:ke[pe+1]<<8))>>>$e&15}function Z(ke,ze){var $e=ze&7,pe=ze>>>3;return(ke[pe]|($e<=3?0:ke[pe+1]<<8))>>>$e&31}function Ee(ke,ze){var $e=ze&7,pe=ze>>>3;return(ke[pe]|($e<=1?0:ke[pe+1]<<8))>>>$e&127}function we(ke,ze,$e){var pe=ze&7,_e=ze>>>3,Fe=(1<<$e)-1,et=ke[_e]>>>pe;return $e<8-pe||(et|=ke[_e+1]<<8-pe,$e<16-pe)||(et|=ke[_e+2]<<16-pe,$e<24-pe)||(et|=ke[_e+3]<<24-pe),et&Fe}function Oe(ke,ze,$e){var pe=ze&7,_e=ze>>>3;return pe<=5?ke[_e]|=($e&7)<<pe:(ke[_e]|=$e<<pe&255,ke[_e+1]=($e&7)>>8-pe),ze+3}function de(ke,ze,$e){var pe=ze&7,_e=ze>>>3;return $e=($e&1)<<pe,ke[_e]|=$e,ze+1}function ce(ke,ze,$e){var pe=ze&7,_e=ze>>>3;return $e<<=pe,ke[_e]|=$e&255,$e>>>=8,ke[_e+1]=$e,ze+8}function Ce(ke,ze,$e){var pe=ze&7,_e=ze>>>3;return $e<<=pe,ke[_e]|=$e&255,$e>>>=8,ke[_e+1]=$e&255,ke[_e+2]=$e>>>8,ze+16}function Xe(ke,ze){var $e=ke.length,pe=2*$e>ze?2*$e:ze+5,_e=0;if($e>=ze)return ke;if(Rn){var Fe=XI(pe);if(ke.copy)ke.copy(Fe);else for(;_e<ke.length;++_e)Fe[_e]=ke[_e];return Fe}else if(se){var et=new Uint8Array(pe);if(et.set)et.set(ke);else for(;_e<$e;++_e)et[_e]=ke[_e];return et}return ke.length=pe,ke}function xe(ke){for(var ze=new Array(ke),$e=0;$e<ke;++$e)ze[$e]=0;return ze}function fe(ke,ze,$e){var pe=1,_e=0,Fe=0,et=0,mt=0,lt=ke.length,xt=se?new Uint16Array(32):xe(32);for(Fe=0;Fe<32;++Fe)xt[Fe]=0;for(Fe=lt;Fe<$e;++Fe)ke[Fe]=0;lt=ke.length;var ge=se?new Uint16Array(lt):xe(lt);for(Fe=0;Fe<lt;++Fe)xt[_e=ke[Fe]]++,pe<_e&&(pe=_e),ge[Fe]=0;for(xt[0]=0,Fe=1;Fe<=pe;++Fe)xt[Fe+16]=mt=mt+xt[Fe-1]<<1;for(Fe=0;Fe<lt;++Fe)mt=ke[Fe],mt!=0&&(ge[Fe]=xt[mt+16]++);var ve=0;for(Fe=0;Fe<lt;++Fe)if(ve=ke[Fe],ve!=0)for(mt=ue(ge[Fe],pe)>>pe-ve,et=(1<<pe+4-ve)-1;et>=0;--et)ze[mt|et<<ve]=ve&15|Fe<<4;return pe}var Se=se?new Uint16Array(512):xe(512),qe=se?new Uint16Array(32):xe(32);if(!se){for(var je=0;je<512;++je)Se[je]=0;for(je=0;je<32;++je)qe[je]=0}(function(){for(var ke=[],ze=0;ze<32;ze++)ke.push(5);fe(ke,qe,32);var $e=[];for(ze=0;ze<=143;ze++)$e.push(8);for(;ze<=255;ze++)$e.push(9);for(;ze<=279;ze++)$e.push(7);for(;ze<=287;ze++)$e.push(8);fe($e,Se,288)})();var Le=(function(){for(var ze=se?new Uint8Array(32768):[],$e=0,pe=0;$e<ae.length-1;++$e)for(;pe<ae[$e+1];++pe)ze[pe]=$e;for(;pe<32768;++pe)ze[pe]=29;var _e=se?new Uint8Array(259):[];for($e=0,pe=0;$e<K.length-1;++$e)for(;pe<K[$e+1];++pe)_e[pe]=$e;function Fe(mt,lt){for(var xt=0;xt<mt.length;){var ge=Math.min(65535,mt.length-xt),ve=xt+ge==mt.length;for(lt.write_shift(1,+ve),lt.write_shift(2,ge),lt.write_shift(2,~ge&65535);ge-- >0;)lt[lt.l++]=mt[xt++]}return lt.l}function et(mt,lt){for(var xt=0,ge=0,ve=se?new Uint16Array(32768):[];ge<mt.length;){var Ke=Math.min(65535,mt.length-ge);if(Ke<10){for(xt=Oe(lt,xt,+(ge+Ke==mt.length)),xt&7&&(xt+=8-(xt&7)),lt.l=xt/8|0,lt.write_shift(2,Ke),lt.write_shift(2,~Ke&65535);Ke-- >0;)lt[lt.l++]=mt[ge++];xt=lt.l*8;continue}xt=Oe(lt,xt,+(ge+Ke==mt.length)+2);for(var ct=0;Ke-- >0;){var jt=mt[ge];ct=(ct<<5^jt)&32767;var bt=-1,Wt=0;if((bt=ve[ct])&&(bt|=ge&-32768,bt>ge&&(bt-=32768),bt<ge))for(;mt[bt+Wt]==mt[ge+Wt]&&Wt<250;)++Wt;if(Wt>2){jt=_e[Wt],jt<=22?xt=ce(lt,xt,le[jt+1]>>1)-1:(ce(lt,xt,3),xt+=5,ce(lt,xt,le[jt-23]>>5),xt+=3);var ir=jt<8?0:jt-4>>2;ir>0&&(Ce(lt,xt,Wt-K[jt]),xt+=ir),jt=ze[ge-bt],xt=ce(lt,xt,le[jt]>>3),xt-=3;var Kt=jt<4?0:jt-2>>1;Kt>0&&(Ce(lt,xt,ge-bt-ae[jt]),xt+=Kt);for(var yr=0;yr<Wt;++yr)ve[ct]=ge&32767,ct=(ct<<5^mt[ge])&32767,++ge;Ke-=Wt-1}else jt<=143?jt=jt+48:xt=de(lt,xt,1),xt=ce(lt,xt,le[jt]),ve[ct]=ge&32767,++ge}xt=ce(lt,xt,0)-1}return lt.l=(xt+7)/8|0,lt.l}return function(lt,xt){return lt.length<8?Fe(lt,xt):et(lt,xt)}})();function Re(ke){var ze=qt(50+Math.floor(ke.length*1.1)),$e=Le(ke,ze);return ze.slice(0,$e)}var Je=se?new Uint16Array(32768):xe(32768),ut=se?new Uint16Array(32768):xe(32768),vt=se?new Uint16Array(128):xe(128),At=1,Bt=1;function Yt(ke,ze){var $e=Z(ke,ze)+257;ze+=5;var pe=Z(ke,ze)+1;ze+=5;var _e=ie(ke,ze)+4;ze+=4;for(var Fe=0,et=se?new Uint8Array(19):xe(19),mt=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],lt=1,xt=se?new Uint8Array(8):xe(8),ge=se?new Uint8Array(8):xe(8),ve=et.length,Ke=0;Ke<_e;++Ke)et[U[Ke]]=Fe=Ae(ke,ze),lt<Fe&&(lt=Fe),xt[Fe]++,ze+=3;var ct=0;for(xt[0]=0,Ke=1;Ke<=lt;++Ke)ge[Ke]=ct=ct+xt[Ke-1]<<1;for(Ke=0;Ke<ve;++Ke)(ct=et[Ke])!=0&&(mt[Ke]=ge[ct]++);var jt=0;for(Ke=0;Ke<ve;++Ke)if(jt=et[Ke],jt!=0){ct=le[mt[Ke]]>>8-jt;for(var bt=(1<<7-jt)-1;bt>=0;--bt)vt[ct|bt<<jt]=jt&7|Ke<<3}var Wt=[];for(lt=1;Wt.length<$e+pe;)switch(ct=vt[Ee(ke,ze)],ze+=ct&7,ct>>>=3){case 16:for(Fe=3+Ue(ke,ze),ze+=2,ct=Wt[Wt.length-1];Fe-- >0;)Wt.push(ct);break;case 17:for(Fe=3+Ae(ke,ze),ze+=3;Fe-- >0;)Wt.push(0);break;case 18:for(Fe=11+Ee(ke,ze),ze+=7;Fe-- >0;)Wt.push(0);break;default:Wt.push(ct),lt<ct&&(lt=ct);break}var ir=Wt.slice(0,$e),Kt=Wt.slice($e);for(Ke=$e;Ke<286;++Ke)ir[Ke]=0;for(Ke=pe;Ke<30;++Ke)Kt[Ke]=0;return At=fe(ir,Je,286),Bt=fe(Kt,ut,30),ze}function We(ke,ze){if(ke[0]==3&&!(ke[1]&3))return[N0(ze),2];for(var $e=0,pe=0,_e=XI(ze||1<<18),Fe=0,et=_e.length>>>0,mt=0,lt=0;(pe&1)==0;){if(pe=Ae(ke,$e),$e+=3,pe>>>1)pe>>1==1?(mt=9,lt=5):($e=Yt(ke,$e),mt=At,lt=Bt);else{$e&7&&($e+=8-($e&7));var xt=ke[$e>>>3]|ke[($e>>>3)+1]<<8;if($e+=32,xt>0)for(!ze&&et<Fe+xt&&(_e=Xe(_e,Fe+xt),et=_e.length);xt-- >0;)_e[Fe++]=ke[$e>>>3],$e+=8;continue}for(;;){!ze&&et<Fe+32767&&(_e=Xe(_e,Fe+32767),et=_e.length);var ge=we(ke,$e,mt),ve=pe>>>1==1?Se[ge]:Je[ge];if($e+=ve&15,ve>>>=4,(ve>>>8&255)===0)_e[Fe++]=ve;else{if(ve==256)break;ve-=257;var Ke=ve<8?0:ve-4>>2;Ke>5&&(Ke=0);var ct=Fe+K[ve];Ke>0&&(ct+=we(ke,$e,Ke),$e+=Ke),ge=we(ke,$e,lt),ve=pe>>>1==1?qe[ge]:ut[ge],$e+=ve&15,ve>>>=4;var jt=ve<4?0:ve-2>>1,bt=ae[ve];for(jt>0&&(bt+=we(ke,$e,jt),$e+=jt),!ze&&et<ct&&(_e=Xe(_e,ct+100),et=_e.length);Fe<ct;)_e[Fe]=_e[Fe-bt],++Fe}}}return ze?[_e,$e+7>>>3]:[_e.slice(0,Fe),$e+7>>>3]}function Ct(ke,ze){var $e=ke.slice(ke.l||0),pe=We($e,ze);return ke.l+=pe[1],pe[0]}function br(ke,ze){if(ke)typeof console<"u"&&console.error(ze);else throw new Error(ze)}function Jt(ke,ze){var $e=ke;Oo($e,0);var pe=[],_e=[],Fe={FileIndex:pe,FullPaths:_e};A(Fe,{root:ze.root});for(var et=$e.length-4;($e[et]!=80||$e[et+1]!=75||$e[et+2]!=5||$e[et+3]!=6)&&et>=0;)--et;$e.l=et+4,$e.l+=4;var mt=$e.read_shift(2);$e.l+=6;var lt=$e.read_shift(4);for($e.l=lt,et=0;et<mt;++et){$e.l+=20;var xt=$e.read_shift(4),ge=$e.read_shift(4),ve=$e.read_shift(2),Ke=$e.read_shift(2),ct=$e.read_shift(2);$e.l+=8;var jt=$e.read_shift(4),bt=l($e.slice($e.l+ve,$e.l+ve+Ke));$e.l+=ve+Ke+ct;var Wt=$e.l;$e.l=jt+4,Dr($e,xt,ge,Fe,bt),$e.l=Wt}return Fe}function Dr(ke,ze,$e,pe,_e){ke.l+=2;var Fe=ke.read_shift(2),et=ke.read_shift(2),mt=o(ke);if(Fe&8257)throw new Error("Unsupported ZIP encryption");for(var lt=ke.read_shift(4),xt=ke.read_shift(4),ge=ke.read_shift(4),ve=ke.read_shift(2),Ke=ke.read_shift(2),ct="",jt=0;jt<ve;++jt)ct+=String.fromCharCode(ke[ke.l++]);if(Ke){var bt=l(ke.slice(ke.l,ke.l+Ke));(bt[21589]||{}).mt&&(mt=bt[21589].mt),((_e||{})[21589]||{}).mt&&(mt=_e[21589].mt)}ke.l+=Ke;var Wt=ke.slice(ke.l,ke.l+xt);switch(et){case 8:Wt=q(ke,ge);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+et)}var ir=!1;Fe&8&&(lt=ke.read_shift(4),lt==134695760&&(lt=ke.read_shift(4),ir=!0),xt=ke.read_shift(4),ge=ke.read_shift(4)),xt!=ze&&br(ir,"Bad compressed size: "+ze+" != "+xt),ge!=$e&&br(ir,"Bad uncompressed size: "+$e+" != "+ge),Gr(pe,ct,Wt,{unsafe:!0,mt})}function Hr(ke,ze){var $e=ze||{},pe=[],_e=[],Fe=qt(1),et=$e.compression?8:0,mt=0,lt=0,xt=0,ge=0,ve=0,Ke=ke.FullPaths[0],ct=Ke,jt=ke.FileIndex[0],bt=[],Wt=0;for(lt=1;lt<ke.FullPaths.length;++lt)if(ct=ke.FullPaths[lt].slice(Ke.length),jt=ke.FileIndex[lt],!(!jt.size||!jt.content||ct=="Sh33tJ5")){var ir=ge,Kt=qt(ct.length);for(xt=0;xt<ct.length;++xt)Kt.write_shift(1,ct.charCodeAt(xt)&127);Kt=Kt.slice(0,Kt.l),bt[ve]=Vle.buf(jt.content,0);var yr=jt.content;et==8&&(yr=G(yr)),Fe=qt(30),Fe.write_shift(4,67324752),Fe.write_shift(2,20),Fe.write_shift(2,mt),Fe.write_shift(2,et),jt.mt?i(Fe,jt.mt):Fe.write_shift(4,0),Fe.write_shift(-4,bt[ve]),Fe.write_shift(4,yr.length),Fe.write_shift(4,jt.content.length),Fe.write_shift(2,Kt.length),Fe.write_shift(2,0),ge+=Fe.length,pe.push(Fe),ge+=Kt.length,pe.push(Kt),ge+=yr.length,pe.push(yr),Fe=qt(46),Fe.write_shift(4,33639248),Fe.write_shift(2,0),Fe.write_shift(2,20),Fe.write_shift(2,mt),Fe.write_shift(2,et),Fe.write_shift(4,0),Fe.write_shift(-4,bt[ve]),Fe.write_shift(4,yr.length),Fe.write_shift(4,jt.content.length),Fe.write_shift(2,Kt.length),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(4,0),Fe.write_shift(4,ir),Wt+=Fe.l,_e.push(Fe),Wt+=Kt.length,_e.push(Kt),++ve}return Fe=qt(22),Fe.write_shift(4,101010256),Fe.write_shift(2,0),Fe.write_shift(2,0),Fe.write_shift(2,ve),Fe.write_shift(2,ve),Fe.write_shift(4,Wt),Fe.write_shift(4,ge),Fe.write_shift(2,0),lo([lo(pe),lo(_e),Fe])}var tt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Dt(ke,ze){if(ke.ctype)return ke.ctype;var $e=ke.name||"",pe=$e.match(/\.([^\.]+)$/);return pe&&tt[pe[1]]||ze&&(pe=($e=ze).match(/[\.\\]([^\.\\])+$/),pe&&tt[pe[1]])?tt[pe[1]]:"application/octet-stream"}function mr(ke){for(var ze=ng(ke),$e=[],pe=0;pe<ze.length;pe+=76)$e.push(ze.slice(pe,pe+76));return $e.join(`\r
`)+`\r
`}function Sr(ke){var ze=ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(xt){var ge=xt.charCodeAt(0).toString(16).toUpperCase();return"="+(ge.length==1?"0"+ge:ge)});ze=ze.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),ze.charAt(0)==`
`&&(ze="=0D"+ze.slice(1)),ze=ze.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var $e=[],pe=ze.split(`\r
`),_e=0;_e<pe.length;++_e){var Fe=pe[_e];if(Fe.length==0){$e.push("");continue}for(var et=0;et<Fe.length;){var mt=76,lt=Fe.slice(et,et+mt);lt.charAt(mt-1)=="="?mt--:lt.charAt(mt-2)=="="?mt-=2:lt.charAt(mt-3)=="="&&(mt-=3),lt=Fe.slice(et,et+mt),et+=mt,et<Fe.length&&(lt+="="),$e.push(lt)}}return $e.join(`\r
`)}function Jr(ke){for(var ze=[],$e=0;$e<ke.length;++$e){for(var pe=ke[$e];$e<=ke.length&&pe.charAt(pe.length-1)=="=";)pe=pe.slice(0,pe.length-1)+ke[++$e];ze.push(pe)}for(var _e=0;_e<ze.length;++_e)ze[_e]=ze[_e].replace(/[=][0-9A-Fa-f]{2}/g,function(Fe){return String.fromCharCode(parseInt(Fe.slice(1),16))});return wc(ze.join(`\r
`))}function _r(ke,ze,$e){for(var pe="",_e="",Fe="",et,mt=0;mt<10;++mt){var lt=ze[mt];if(!lt||lt.match(/^\s*$/))break;var xt=lt.match(/^(.*?):\s*([^\s].*)$/);if(xt)switch(xt[1].toLowerCase()){case"content-location":pe=xt[2].trim();break;case"content-type":Fe=xt[2].trim();break;case"content-transfer-encoding":_e=xt[2].trim();break}}switch(++mt,_e.toLowerCase()){case"base64":et=wc(Cc(ze.slice(mt).join("")));break;case"quoted-printable":et=Jr(ze.slice(mt));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+_e)}var ge=Gr(ke,pe.slice($e.length),et,{unsafe:!0});Fe&&(ge.ctype=Fe)}function Wr(ke,ze){if(X(ke.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var $e=ze&&ze.root||"",pe=(Rn&&Buffer.isBuffer(ke)?ke.toString("binary"):X(ke)).split(`\r
`),_e=0,Fe="";for(_e=0;_e<pe.length;++_e)if(Fe=pe[_e],!!/^Content-Location:/i.test(Fe)&&(Fe=Fe.slice(Fe.indexOf("file")),$e||($e=Fe.slice(0,Fe.lastIndexOf("/")+1)),Fe.slice(0,$e.length)!=$e))for(;$e.length>0&&($e=$e.slice(0,$e.length-1),$e=$e.slice(0,$e.lastIndexOf("/")+1),Fe.slice(0,$e.length)!=$e););var et=(pe[1]||"").match(/boundary="(.*?)"/);if(!et)throw new Error("MAD cannot find boundary");var mt="--"+(et[1]||""),lt=[],xt=[],ge={FileIndex:lt,FullPaths:xt};A(ge);var ve,Ke=0;for(_e=0;_e<pe.length;++_e){var ct=pe[_e];ct!==mt&&ct!==mt+"--"||(Ke++&&_r(ge,pe.slice(ve,_e),$e),ve=_e)}return ge}function sr(ke,ze){var $e=ze||{},pe=$e.boundary||"SheetJS";pe="------="+pe;for(var _e=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+pe.slice(2)+'"',"","",""],Fe=ke.FullPaths[0],et=Fe,mt=ke.FileIndex[0],lt=1;lt<ke.FullPaths.length;++lt)if(et=ke.FullPaths[lt].slice(Fe.length),mt=ke.FileIndex[lt],!(!mt.size||!mt.content||et=="Sh33tJ5")){et=et.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Wt){return"_x"+Wt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Wt){return"_u"+Wt.charCodeAt(0).toString(16)+"_"});for(var xt=mt.content,ge=Rn&&Buffer.isBuffer(xt)?xt.toString("binary"):X(xt),ve=0,Ke=Math.min(1024,ge.length),ct=0,jt=0;jt<=Ke;++jt)(ct=ge.charCodeAt(jt))>=32&&ct<128&&++ve;var bt=ve>=Ke*4/5;_e.push(pe),_e.push("Content-Location: "+($e.root||"file:///C:/SheetJS/")+et),_e.push("Content-Transfer-Encoding: "+(bt?"quoted-printable":"base64")),_e.push("Content-Type: "+Dt(mt,et)),_e.push(""),_e.push(bt?Sr(ge):mr(ge))}return _e.push(pe+`--\r
`),_e.join(`\r
`)}function en(ke){var ze={};return A(ze,ke),ze}function Gr(ke,ze,$e,pe){var _e=pe&&pe.unsafe;_e||A(ke);var Fe=!_e&&Zr.find(ke,ze);if(!Fe){var et=ke.FullPaths[0];ze.slice(0,et.length)==et?et=ze:(et.slice(-1)!="/"&&(et+="/"),et=(et+ze).replace("//","/")),Fe={name:s(ze),type:2},ke.FileIndex.push(Fe),ke.FullPaths.push(et),_e||Zr.utils.cfb_gc(ke)}return Fe.content=$e,Fe.size=$e?$e.length:0,pe&&(pe.CLSID&&(Fe.clsid=pe.CLSID),pe.mt&&(Fe.mt=pe.mt),pe.ct&&(Fe.ct=pe.ct)),Fe}function vn(ke,ze){A(ke);var $e=Zr.find(ke,ze);if($e){for(var pe=0;pe<ke.FileIndex.length;++pe)if(ke.FileIndex[pe]==$e)return ke.FileIndex.splice(pe,1),ke.FullPaths.splice(pe,1),!0}return!1}function kr(ke,ze,$e){A(ke);var pe=Zr.find(ke,ze);if(pe){for(var _e=0;_e<ke.FileIndex.length;++_e)if(ke.FileIndex[_e]==pe)return ke.FileIndex[_e].name=s($e),ke.FullPaths[_e]=$e,!0}return!1}function Fr(ke){I(ke,!0)}return t.find=T,t.read=E,t.parse=u,t.write=te,t.writeFile=re,t.utils={cfb_new:en,cfb_add:Gr,cfb_del:vn,cfb_mov:kr,cfb_gc:Fr,ReadShift:ox,CheckField:pR,prep_blob:Oo,bconcat:lo,use_zlib:O,_deflateRaw:Re,_inflateRaw:Ct,consts:J},t})();function Kle(e){return typeof e=="string"?vy(e):Array.isArray(e)?yle(e):e}function Cg(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=vy(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var a=r=="utf8"?Tu(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(a,e);if(typeof Blob<"u"){var s=new Blob([Kle(a)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=L0(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Xle(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(a){if(!a.message||!a.message.match(/onstruct/))throw a}throw new Error("Cannot access file "+e)}function Js(e){for(var t=Object.keys(e),r=[],a=0;a<t.length;++a)Object.prototype.hasOwnProperty.call(e,t[a])&&r.push(t[a]);return r}function nD(e,t){for(var r=[],a=Js(e),s=0;s!==a.length;++s)r[e[a[s]][t]]==null&&(r[e[a[s]][t]]=a[s]);return r}function yy(e){for(var t=[],r=Js(e),a=0;a!==r.length;++a)t[e[r[a]]]=r[a];return t}function wy(e){for(var t=[],r=Js(e),a=0;a!==r.length;++a)t[e[r[a]]]=parseInt(r[a],10);return t}function Yle(e){for(var t=[],r=Js(e),a=0;a!==r.length;++a)t[e[r[a]]]==null&&(t[e[r[a]]]=[]),t[e[r[a]]].push(r[a]);return t}var bb=new Date(1899,11,30,0,0,0);function zi(e,t){var r=e.getTime(),a=bb.getTime()+(e.getTimezoneOffset()-bb.getTimezoneOffset())*6e4;return(r-a)/(1440*60*1e3)}var KM=new Date,Qle=bb.getTime()+(KM.getTimezoneOffset()-bb.getTimezoneOffset())*6e4,aD=KM.getTimezoneOffset();function Ny(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Qle),t.getTimezoneOffset()!==aD&&t.setTime(t.getTime()+(t.getTimezoneOffset()-aD)*6e4),t}function Jle(e){var t=0,r=0,a=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(a=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(a)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var sD=new Date("2017-02-19T19:06:09.000Z"),XM=isNaN(sD.getFullYear())?new Date("2/19/17"):sD,Zle=XM.getFullYear()==2017;function gs(e,t){var r=new Date(e);if(Zle)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(XM.getFullYear()==1917&&!isNaN(r.getFullYear())){var a=r.getFullYear();return e.indexOf(""+a)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function Oh(e,t){if(Rn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return Tu(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return Tu(FM(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return Tu(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return Tu(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var a=[],s=0;s!=e.length;++s)a.push(String.fromCharCode(e[s]));return a.join("")}function vs(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=vs(e[r]));return t}function Ks(e,t){for(var r="";r.length<t;)r+=e;return r}function Zd(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,a=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(a))||(a=a.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(a)))?t/r:t}var ece=["january","february","march","april","may","june","july","august","september","october","november","december"];function tp(e){var t=new Date(e),r=new Date(NaN),a=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&ece.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return a<0||a>8099?r:(s>0||i>1)&&a!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var tce=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,a,s){if(e||typeof a=="string")return r.split(a);for(var i=r.split(a),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function YM(e){return e?e.content&&e.type?Oh(e.content,!0):e.data?Yp(e.data):e.asNodeBuffer&&Rn?Yp(e.asNodeBuffer().toString("binary")):e.asBinary?Yp(e.asBinary()):e._data&&e._data.getContent?Yp(Oh(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function QM(e){if(!e)return null;if(e.data)return VI(e.data);if(e.asNodeBuffer&&Rn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?VI(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function rce(e){return e&&e.name.slice(-4)===".bin"?QM(e):YM(e)}function Zc(e,t){for(var r=e.FullPaths||Js(e.files),a=t.toLowerCase().replace(/[\/]/g,"\\"),s=a.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(a==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function j3(e,t){var r=Zc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function ji(e,t,r){if(!r)return rce(j3(e,t));if(!t)return null;try{return ji(e,t)}catch{return null}}function Nc(e,t,r){if(!r)return YM(j3(e,t));if(!t)return null;try{return Nc(e,t)}catch{return null}}function nce(e,t,r){return QM(j3(e,t))}function iD(e){for(var t=e.FullPaths||Js(e.files),r=[],a=0;a<t.length;++a)t[a].slice(-1)!="/"&&r.push(t[a].replace(/^Root Entry[\/]/,""));return r.sort()}function In(e,t,r){if(e.FullPaths){if(typeof r=="string"){var a;return Rn?a=Lf(r):a=wle(r),Zr.utils.cfb_add(e,t,a)}Zr.utils.cfb_add(e,t,r)}else e.file(t,r)}function k3(){return Zr.utils.cfb_new()}function JM(e,t){switch(t.type){case"base64":return Zr.read(e,{type:"base64"});case"binary":return Zr.read(e,{type:"binary"});case"buffer":case"array":return Zr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Jp(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var a=e.split("/");a.length!==0;){var s=a.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var hi=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ace=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,oD=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,sce=/<[^>]*>/g,hl=hi.match(oD)?oD:sce,ice=/<\w*:/,oce=/<(\/?)\w+:/;function yn(e,t,r){for(var a={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(a[0]=e.slice(0,s)),s===e.length)return a;var o=e.match(ace),l=0,c="",d=0,u="",f="",p=1;if(o)for(d=0;d!=o.length;++d){for(f=o[d],i=0;i!=f.length&&f.charCodeAt(i)!==61;++i);for(u=f.slice(0,i).trim();f.charCodeAt(i+1)==32;)++i;for(p=(s=f.charCodeAt(i+1))==34||s==39?1:0,c=f.slice(i+1+p,f.length-p),l=0;l!=u.length&&u.charCodeAt(l)!==58;++l);if(l===u.length)u.indexOf("_")>0&&(u=u.slice(0,u.indexOf("_"))),a[u]=c,a[u.toLowerCase()]=c;else{var m=(l===5&&u.slice(0,5)==="xmlns"?"xmlns":"")+u.slice(l+1);if(a[m]&&u.slice(l-3,l)=="ext")continue;a[m]=c,a[m.toLowerCase()]=c}}return a}function Uu(e){return e.replace(oce,"<$1")}var ZM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},S3=yy(ZM),ua=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(a){var s=a+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return ZM[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),_3=/[&<>'"]/g,lce=/[\u0000-\u0008\u000b-\u001f]/g;function Ia(e){var t=e+"";return t.replace(_3,function(r){return S3[r]}).replace(lce,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function lD(e){return Ia(e).replace(/ /g,"_x0020_")}var eR=/[\u0000-\u001f]/g;function C3(e){var t=e+"";return t.replace(_3,function(r){return S3[r]}).replace(/\n/g,"<br/>").replace(eR,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function cce(e){var t=e+"";return t.replace(_3,function(r){return S3[r]}).replace(eR,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var cD=(function(){var e=/&#(\d+);/g;function t(r,a){return String.fromCharCode(parseInt(a,10))}return function(a){return a.replace(e,t)}})();function dce(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function ms(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function Nj(e){for(var t="",r=0,a=0,s=0,i=0,o=0,l=0;r<e.length;){if(a=e.charCodeAt(r++),a<128){t+=String.fromCharCode(a);continue}if(s=e.charCodeAt(r++),a>191&&a<224){o=(a&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),a<240){t+=String.fromCharCode((a&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((a&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function dD(e){var t=N0(2*e.length),r,a,s=1,i=0,o=0,l;for(a=0;a<e.length;a+=s)s=1,(l=e.charCodeAt(a))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(a+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(a+1)&63)*64+(e.charCodeAt(a+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(a+1)&63)*4096+(e.charCodeAt(a+2)&63)*64+(e.charCodeAt(a+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function uD(e){return Lf(e,"binary").toString("utf8")}var Ov="foo bar baz",Wa=Rn&&(uD(Ov)==Nj(Ov)&&uD||dD(Ov)==Nj(Ov)&&dD)||Nj,Tu=Rn?function(e){return Lf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,a=0,s=0;r<e.length;)switch(a=e.charCodeAt(r++),!0){case a<128:t.push(String.fromCharCode(a));break;case a<2048:t.push(String.fromCharCode(192+(a>>6))),t.push(String.fromCharCode(128+(a&63)));break;case(a>=55296&&a<57344):a-=55296,s=e.charCodeAt(r++)-56320+(a<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(a>>12))),t.push(String.fromCharCode(128+(a>>6&63))),t.push(String.fromCharCode(128+(a&63)))}return t.join("")},sg=(function(){var e={};return function(r,a){var s=r+"|"+(a||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",a||"")}})(),tR=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var a=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)a=a.replace(e[s][0],e[s][1]);return a}})(),uce=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),fce=/<\/?(?:vt:)?variant>/g,hce=/<(?:vt:)([^>]*)>([\s\S]*)</;function fD(e,t){var r=yn(e),a=e.match(uce(r.baseType))||[],s=[];if(a.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+a.length+" != "+r.size);return s}return a.forEach(function(i){var o=i.replace(fce,"").match(hce);o&&s.push({v:Wa(o[2]),t:o[1]})}),s}var rR=/(^\s|\s$|\n)/;function Po(e,t){return"<"+e+(t.match(rR)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function ig(e){return Js(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function hr(e,t,r){return"<"+e+(r!=null?ig(r):"")+(t!=null?(t.match(rR)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function Ek(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function mce(e,t){switch(typeof e){case"string":var r=hr("vt:lpwstr",Ia(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return hr((e|0)==e?"vt:i4":"vt:r8",Ia(String(e)));case"boolean":return hr("vt:bool",e?"true":"false")}if(e instanceof Date)return hr("vt:filetime",Ek(e));throw new Error("Unable to serialize "+e)}function A3(e){if(Rn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Wa(L0(y3(e)));throw new Error("Bad input format: expected Buffer or string")}var og=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Ui={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},qh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],vc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function pce(e,t){for(var r=1-2*(e[t+7]>>>7),a=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return a==2047?s==0?r*(1/0):NaN:(a==0?a=-1022:(a-=1023,s+=Math.pow(2,52)),r*Math.pow(2,a-52)*s)}function xce(e,t,r){var a=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=a?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|a}var hD=function(e){for(var t=[],r=10240,a=0;a<e[0].length;++a)if(e[0][a])for(var s=0,i=e[0][a].length;s<i;s+=r)t.push.apply(t,e[0][a].slice(s,s+r));return t},mD=Rn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Lf(t)})):hD(e)}:hD,pD=function(e,t,r){for(var a=[],s=t;s<r;s+=2)a.push(String.fromCharCode(gf(e,s)));return a.join("").replace(Al,"")},E3=Rn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(Al,""):pD(e,t,r)}:pD,xD=function(e,t,r){for(var a=[],s=t;s<t+r;++s)a.push(("0"+e[s].toString(16)).slice(-2));return a.join("")},nR=Rn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):xD(e,t,r)}:xD,gD=function(e,t,r){for(var a=[],s=t;s<r;s++)a.push(String.fromCharCode(um(e,s)));return a.join("")},Ag=Rn?function(t,r,a){return Buffer.isBuffer(t)?t.toString("utf8",r,a):gD(t,r,a)}:gD,aR=function(e,t){var r=bc(e,t);return r>0?Ag(e,t+4,t+4+r-1):""},sR=aR,iR=function(e,t){var r=bc(e,t);return r>0?Ag(e,t+4,t+4+r-1):""},oR=iR,lR=function(e,t){var r=2*bc(e,t);return r>0?Ag(e,t+4,t+4+r-1):""},cR=lR,dR=function(t,r){var a=bc(t,r);return a>0?E3(t,r+4,r+4+a):""},uR=dR,fR=function(e,t){var r=bc(e,t);return r>0?Ag(e,t+4,t+4+r):""},hR=fR,mR=function(e,t){return pce(e,t)},yb=mR,T3=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Rn&&(sR=function(t,r){if(!Buffer.isBuffer(t))return aR(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},oR=function(t,r){if(!Buffer.isBuffer(t))return iR(t,r);var a=t.readUInt32LE(r);return a>0?t.toString("utf8",r+4,r+4+a-1):""},cR=function(t,r){if(!Buffer.isBuffer(t))return lR(t,r);var a=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a-1)},uR=function(t,r){if(!Buffer.isBuffer(t))return dR(t,r);var a=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+a)},hR=function(t,r){if(!Buffer.isBuffer(t))return fR(t,r);var a=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+a)},yb=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):mR(t,r)},T3=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var um=function(e,t){return e[t]},gf=function(e,t){return e[t+1]*256+e[t]},gce=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},bc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},rh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},vce=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function ox(e,t){var r="",a,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,Rn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(gf(this,d)),d+=2;e*=2;break;case"utf8":r=Ag(this,this.l,this.l+e);break;case"utf16le":e*=2,r=E3(this,this.l,this.l+e);break;case"wstr":return ox.call(this,e,"dbcs");case"lpstr-ansi":r=sR(this,this.l),e=4+bc(this,this.l);break;case"lpstr-cp":r=oR(this,this.l),e=4+bc(this,this.l);break;case"lpwstr":r=cR(this,this.l),e=4+2*bc(this,this.l);break;case"lpp4":e=4+bc(this,this.l),r=uR(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+bc(this,this.l),r=hR(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=um(this,this.l+e++))!==0;)i.push(Tv(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=gf(this,this.l+e))!==0;)i.push(Tv(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=um(this,d),this.l=d+1,l=ox.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Tv(gf(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=um(this,d),this.l=d+1,l=ox.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Tv(um(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return a=um(this,this.l),this.l++,a;case 2:return a=(t==="i"?gce:gf)(this,this.l),this.l+=2,a;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(a=(e>0?rh:vce)(this,this.l),this.l+=4,a):(s=bc(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=yb(this,this.l):s=yb([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=nR(this,this.l,e);break}}return this.l+=e,r}var bce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},yce=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},wce=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function Nce(e,t,r){var a=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)wce(this,t.charCodeAt(s),this.l+2*s);a=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;a=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:a=1,this[this.l]=t&255;break;case 2:a=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:a=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:a=4,bce(this,t,this.l);break;case 8:if(a=8,r==="f"){xce(this,t,this.l);break}case 16:break;case-4:a=4,yce(this,t,this.l);break}return this.l+=a,this}function pR(e,t){var r=nR(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Oo(e,t){e.l=t,e.read_shift=ox,e.chk=pR,e.write_shift=Nce}function fl(e,t){e.l+=t}function qt(e){var t=N0(e);return Oo(t,0),t}function Ff(e,t,r){if(e){var a,s,i;Oo(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=hg[l]||hg[65535];for(a=e.read_shift(1),i=a&127,s=1;s<4&&a&128;++s)i+=((a=e.read_shift(1))&127)<<7*s;c=e.l+i;var u=d.f&&d.f(e,i,r);if(e.l=c,t(u,d,l))return}}}function Ql(){var e=[],t=Rn?256:2048,r=function(d){var u=qt(d);return Oo(u,0),u},a=r(t),s=function(){a&&(a.length>a.l&&(a=a.slice(0,a.l),a.l=a.length),a.length>0&&e.push(a),a=null)},i=function(d){return a&&d<a.length-a.l?a:(s(),a=r(Math.max(d+1,t)))},o=function(){return s(),lo(e)},l=function(d){s(),a=d,a.l==null&&(a.l=a.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Xt(e,t,r,a){var s=+t,i;if(!isNaN(s)){a||(a=hg[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,a>=128&&++i,a>=16384&&++i,a>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(a>=128)o.write_shift(1,(a&127)+128),a>>=7;else{o.write_shift(1,a);break}a>0&&T3(r)&&e.push(r)}}function lx(e,t,r){var a=vs(e);if(t.s?(a.cRel&&(a.c+=t.s.c),a.rRel&&(a.r+=t.s.r)):(a.cRel&&(a.c+=t.c),a.rRel&&(a.r+=t.r)),!r||r.biff<12){for(;a.c>=256;)a.c-=256;for(;a.r>=65536;)a.r-=65536}return a}function vD(e,t,r){var a=vs(e);return a.s=lx(a.s,t.s,r),a.e=lx(a.e,t.s,r),a}function cx(e,t){if(e.cRel&&e.c<0)for(e=vs(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=vs(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=gn(e);return!e.cRel&&e.cRel!=null&&(r=Sce(r)),!e.rRel&&e.rRel!=null&&(r=jce(r)),r}function jj(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Bs(e.s.c)+":"+(e.e.cRel?"":"$")+Bs(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+ui(e.s.r)+":"+(e.e.rRel?"":"$")+ui(e.e.r):cx(e.s,t.biff)+":"+cx(e.e,t.biff)}function O3(e){return parseInt(kce(e),10)-1}function ui(e){return""+(e+1)}function jce(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function kce(e){return e.replace(/\$(\d+)$/,"$1")}function P3(e){for(var t=_ce(e),r=0,a=0;a!==t.length;++a)r=26*r+t.charCodeAt(a)-64;return r-1}function Bs(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function Sce(e){return e.replace(/^([A-Z])/,"$$$1")}function _ce(e){return e.replace(/^\$([A-Z])/,"$1")}function Cce(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Us(e){for(var t=0,r=0,a=0;a<e.length;++a){var s=e.charCodeAt(a);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function gn(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Zl(e){var t=e.indexOf(":");return t==-1?{s:Us(e),e:Us(e)}:{s:Us(e.slice(0,t)),e:Us(e.slice(t+1))}}function An(e,t){return typeof t>"u"||typeof t=="number"?An(e.s,e.e):(typeof e!="string"&&(e=gn(e)),typeof t!="string"&&(t=gn(t)),e==t?e:e+":"+t)}function ha(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,a=0,s=0,i=e.length;for(r=0;a<i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.s.c=--r,r=0;a<i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;if(t.s.r=--r,a===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++a,r=0;a!=i&&!((s=e.charCodeAt(a)-64)<1||s>26);++a)r=26*r+s;for(t.e.c=--r,r=0;a!=i&&!((s=e.charCodeAt(a)-48)<0||s>9);++a)r=10*r+s;return t.e.r=--r,t}function bD(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=fd(e.z,r?zi(t):t)}catch{}try{return e.w=fd((e.XF||{}).numFmtId||(r?14:0),r?zi(t):t)}catch{return""+t}}function Of(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Mf[e.v]||e.v:t==null?bD(e,e.v):bD(e,t))}function F0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",a={};return a[r]=e,{SheetNames:[r],Sheets:a}}function xR(e,t,r){var a=r||{},s=e?Array.isArray(e):a.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&a.origin!=null){if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Us(a.origin):a.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var u=ha(i["!ref"]);d.s.c=u.s.c,d.s.r=u.s.r,d.e.c=Math.max(d.e.c,u.e.c),d.e.r=Math.max(d.e.r,u.e.r),o==-1&&(d.e.r=o=u.e.r+1)}for(var f=0;f!=t.length;++f)if(t[f]){if(!Array.isArray(t[f]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[f].length;++p)if(!(typeof t[f][p]>"u")){var m={v:t[f][p]},b=o+f,v=l+p;if(d.s.r>b&&(d.s.r=b),d.s.c>v&&(d.s.c=v),d.e.r<b&&(d.e.r=b),d.e.c<v&&(d.e.c=v),t[f][p]&&typeof t[f][p]=="object"&&!Array.isArray(t[f][p])&&!(t[f][p]instanceof Date))m=t[f][p];else if(Array.isArray(m.v)&&(m.f=t[f][p][1],m.v=m.v[0]),m.v===null)if(m.f)m.t="n";else if(a.nullError)m.t="e",m.v=0;else if(a.sheetStubs)m.t="z";else continue;else typeof m.v=="number"?m.t="n":typeof m.v=="boolean"?m.t="b":m.v instanceof Date?(m.z=a.dateNF||dn[14],a.cellDates?(m.t="d",m.w=fd(m.z,zi(m.v))):(m.t="n",m.v=zi(m.v),m.w=fd(m.z,m.v))):m.t="s";if(s)i[b]||(i[b]=[]),i[b][v]&&i[b][v].z&&(m.z=i[b][v].z),i[b][v]=m;else{var g=gn({c:v,r:b});i[g]&&i[g].z&&(m.z=i[g].z),i[g]=m}}}return d.s.c<1e7&&(i["!ref"]=An(d)),i}function xp(e,t){return xR(null,e,t)}function Ace(e){return e.read_shift(4,"i")}function eu(e,t){return t||(t=qt(4)),t.write_shift(4,e),t}function ul(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function uo(e,t){var r=!1;return t==null&&(r=!0,t=qt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Ece(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Tce(e,t){return t||(t=qt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function I3(e,t){var r=e.l,a=e.read_shift(1),s=ul(e),i=[],o={t:s,h:s};if((a&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Ece(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Oce(e,t){var r=!1;return t==null&&(r=!0,t=qt(15+4*e.t.length)),t.write_shift(1,0),uo(e.t,t),r?t.slice(0,t.l):t}var Pce=I3;function Ice(e,t){var r=!1;return t==null&&(r=!0,t=qt(23+4*e.t.length)),t.write_shift(1,1),uo(e.t,t),t.write_shift(4,1),Tce({},t),r?t.slice(0,t.l):t}function pd(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function $h(e,t){return t==null&&(t=qt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function zh(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function Hh(e,t){return t==null&&(t=qt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Dce=ul,gR=uo;function D3(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function wb(e,t){var r=!1;return t==null&&(r=!0,t=qt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Lce=ul,Tk=D3,L3=wb;function F3(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,a=t[0]&2;e.l+=4;var s=a===0?yb([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):rh(t,0)>>2;return r?s/100:s}function vR(e,t){t==null&&(t=qt(4));var r=0,a=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?a=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(a=1,r=1),a)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function bR(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Fce(e,t){return t||(t=qt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var Wh=bR,gp=Fce;function ll(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function Ph(e,t){return(t||qt(8)).write_shift(8,e,"f")}function Mce(e){var t={},r=e.read_shift(1),a=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,a){case 0:t.auto=1;break;case 1:t.index=s;var d=xh[s];d&&(t.rgb=cg(d));break;case 2:t.rgb=cg([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function Nb(e,t){if(t||(t=qt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var a=e.rgb||"FFFFFF";typeof a=="number"&&(a=("000000"+a.toString(16)).slice(-6)),t.write_shift(1,parseInt(a.slice(0,2),16)),t.write_shift(1,parseInt(a.slice(2,4),16)),t.write_shift(1,parseInt(a.slice(4,6),16)),t.write_shift(1,255)}return t}function Rce(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Bce(e,t){t||(t=qt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function yR(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},a=e.read_shift(4);switch(a){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(a>400)throw new Error("Unsupported Clipboard: "+a.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Uce(e){return yR(e,1)}function qce(e){return yR(e,2)}var M3=2,Kl=3,Pv=11,yD=12,jb=19,Iv=64,$ce=65,zce=71,Hce=4108,Wce=4126,io=80,wR=81,Gce=[io,wR],Ok={1:{n:"CodePage",t:M3},2:{n:"Category",t:io},3:{n:"PresentationFormat",t:io},4:{n:"ByteCount",t:Kl},5:{n:"LineCount",t:Kl},6:{n:"ParagraphCount",t:Kl},7:{n:"SlideCount",t:Kl},8:{n:"NoteCount",t:Kl},9:{n:"HiddenCount",t:Kl},10:{n:"MultimediaClipCount",t:Kl},11:{n:"ScaleCrop",t:Pv},12:{n:"HeadingPairs",t:Hce},13:{n:"TitlesOfParts",t:Wce},14:{n:"Manager",t:io},15:{n:"Company",t:io},16:{n:"LinksUpToDate",t:Pv},17:{n:"CharacterCount",t:Kl},19:{n:"SharedDoc",t:Pv},22:{n:"HyperlinksChanged",t:Pv},23:{n:"AppVersion",t:Kl,p:"version"},24:{n:"DigSig",t:$ce},26:{n:"ContentType",t:io},27:{n:"ContentStatus",t:io},28:{n:"Language",t:io},29:{n:"Version",t:io},255:{},2147483648:{n:"Locale",t:jb},2147483651:{n:"Behavior",t:jb},1919054434:{}},Pk={1:{n:"CodePage",t:M3},2:{n:"Title",t:io},3:{n:"Subject",t:io},4:{n:"Author",t:io},5:{n:"Keywords",t:io},6:{n:"Comments",t:io},7:{n:"Template",t:io},8:{n:"LastAuthor",t:io},9:{n:"RevNumber",t:io},10:{n:"EditTime",t:Iv},11:{n:"LastPrinted",t:Iv},12:{n:"CreatedDate",t:Iv},13:{n:"ModifiedDate",t:Iv},14:{n:"PageCount",t:Kl},15:{n:"WordCount",t:Kl},16:{n:"CharCount",t:Kl},17:{n:"Thumbnail",t:zce},18:{n:"Application",t:io},19:{n:"DocSecurity",t:Kl},255:{},2147483648:{n:"Locale",t:jb},2147483651:{n:"Behavior",t:jb},1919054434:{}},wD={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Vce=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Kce(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Xce=Kce([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),xh=vs(Xce),Mf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},NR={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},Ik={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Dv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function R3(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Yce(e){var t=R3();if(!e||!e.match)return t;var r={};if((e.match(hl)||[]).forEach(function(a){var s=yn(a);switch(s[0].replace(ice,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[Ik[s.ContentType]]!==void 0&&t[Ik[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Ui.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function jR(e,t){var r=Yle(Ik),a=[],s;a[a.length]=hi,a[a.length]=hr("Types",null,{xmlns:Ui.CT,"xmlns:xsd":Ui.xsd,"xmlns:xsi":Ui.xsi}),a=a.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return hr("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],a[a.length]=hr("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Dv[c][t.bookType]||Dv[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){a[a.length]=hr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Dv[c][t.bookType]||Dv[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){a[a.length]=hr("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),a.length>2&&(a[a.length]="</Types>",a[1]=a[1].replace("/>",">")),a.join("")}var zn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function lg(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function dx(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var a={};return(e.match(hl)||[]).forEach(function(s){var i=yn(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Jp(i.Target,t);r[l]=o,a[i.Id]=o}}),r["!id"]=a,r}function km(e){var t=[hi,hr("Relationships",null,{xmlns:Ui.RELS})];return Js(e["!id"]).forEach(function(r){t[t.length]=hr("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function Pa(e,t,r,a,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=a,s.Target=r,[zn.HLINK,zn.XPATH,zn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var Qce="application/vnd.oasis.opendocument.spreadsheet";function Jce(e,t){for(var r=A3(e),a,s;a=og.exec(r);)switch(a[3]){case"manifest":break;case"file-entry":if(s=yn(a[0],!1),s.path=="/"&&s.type!==Qce)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw a}}function Zce(e){var t=[hi];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function ND(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function ede(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function tde(e){var t=[hi];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(ND(e[r][0],e[r][1])),t.push(ede("",e[r][0]));return t.push(ND("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function kR(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+pb.version+"</meta:generator></office:meta></office:document-meta>"}var ld=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],rde=(function(){for(var e=new Array(ld.length),t=0;t<ld.length;++t){var r=ld[t],a="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+a+"[^>]*>([\\s\\S]*?)</"+a+">")}return e})();function SR(e){var t={};e=Wa(e);for(var r=0;r<ld.length;++r){var a=ld[r],s=e.match(rde[r]);s!=null&&s.length>0&&(t[a[1]]=ua(s[1])),a[2]==="date"&&t[a[1]]&&(t[a[1]]=gs(t[a[1]]))}return t}function kj(e,t,r,a,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Ia(t),a[a.length]=r?hr(e,t,r):Po(e,t))}function _R(e,t){var r=t||{},a=[hi,hr("cp:coreProperties",null,{"xmlns:cp":Ui.CORE_PROPS,"xmlns:dc":Ui.dc,"xmlns:dcterms":Ui.dcterms,"xmlns:dcmitype":Ui.dcmitype,"xmlns:xsi":Ui.xsi})],s={};if(!e&&!r.Props)return a.join("");e&&(e.CreatedDate!=null&&kj("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:Ek(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s),e.ModifiedDate!=null&&kj("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:Ek(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},a,s));for(var i=0;i!=ld.length;++i){var o=ld[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&kj(o[0],l,null,a,s)}return a.length>2&&(a[a.length]="</cp:coreProperties>",a[1]=a[1].replace("/>",">")),a.join("")}var gh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],CR=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function AR(e,t,r,a){var s=[];if(typeof e=="string")s=fD(e,a);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(u){return{v:u}}));var o=typeof t=="string"?fD(t,a).map(function(u){return u.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function nde(e,t,r){var a={};return t||(t={}),e=Wa(e),gh.forEach(function(s){var i=(e.match(sg(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=ua(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(a[s[1]]=o[1]);break}}),a.HeadingPairs&&a.TitlesOfParts&&AR(a.HeadingPairs,a.TitlesOfParts,t,r),t}function ER(e){var t=[],r=hr;return e||(e={}),e.Application="SheetJS",t[t.length]=hi,t[t.length]=hr("Properties",null,{xmlns:Ui.EXT_PROPS,"xmlns:vt":Ui.vt}),gh.forEach(function(a){if(e[a[1]]!==void 0){var s;switch(a[2]){case"string":s=Ia(String(e[a[1]]));break;case"bool":s=e[a[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(a[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(a){return"<vt:lpstr>"+Ia(a)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ade=/<[^>]+>[^<]*/g;function sde(e,t){var r={},a="",s=e.match(ade);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=yn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":a=ua(l.name);break;case"</property>":a=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),u=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[a]=ua(u);break;case"bool":r[a]=ms(u);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[a]=parseInt(u,10);break;case"r4":case"r8":case"decimal":r[a]=parseFloat(u);break;case"filetime":case"date":r[a]=gs(u);break;case"cy":case"error":r[a]=ua(u);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function TR(e){var t=[hi,hr("Properties",null,{xmlns:Ui.CUST_PROPS,"xmlns:vt":Ui.vt})];if(!e)return t.join("");var r=1;return Js(e).forEach(function(s){++r,t[t.length]=hr("property",mce(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Ia(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var Dk={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},Sj;function ide(e,t,r){Sj||(Sj=yy(Dk)),t=Sj[t]||t,e[t]=r}function ode(e,t){var r=[];return Js(Dk).map(function(a){for(var s=0;s<ld.length;++s)if(ld[s][1]==a)return ld[s];for(s=0;s<gh.length;++s)if(gh[s][1]==a)return gh[s];throw a}).forEach(function(a){if(e[a[1]]!=null){var s=t&&t.Props&&t.Props[a[1]]!=null?t.Props[a[1]]:e[a[1]];a[2]==="date"&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Po(Dk[a[1]]||a[1],s))}}),hr("DocumentProperties",r.join(""),{xmlns:vc.o})}function lde(e,t){var r=["Worksheets","SheetNames"],a="CustomDocumentProperties",s=[];return e&&Js(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<ld.length;++o)if(i==ld[o][1])return;for(o=0;o<gh.length;++o)if(i==gh[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(hr(lD(i),l,{"dt:dt":c}))}}),t&&Js(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(hr(lD(i),o,{"dt:dt":l}))}}),"<"+a+' xmlns="'+vc.o+'">'+s.join("")+"</"+a+">"}function B3(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function cde(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,a=r%Math.pow(2,32),s=(r-a)/Math.pow(2,32);a*=1e7,s*=1e7;var i=a/Math.pow(2,32)|0;i>0&&(a=a%Math.pow(2,32),s+=i);var o=qt(8);return o.write_shift(4,a),o.write_shift(4,s),o}function OR(e,t,r){var a=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-a&3;)++e.l;return s}function PR(e,t,r){var a=e.read_shift(0,"lpwstr");return a}function IR(e,t,r){return t===31?PR(e):OR(e,t,r)}function Lk(e,t,r){return IR(e,t,r===!1?0:4)}function dde(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return IR(e,t,0)}function ude(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a){var s=e.l;r[a]=e.read_shift(0,"lpwstr").replace(Al,""),e.l-s&2&&(e.l+=2)}return r}function fde(e){for(var t=e.read_shift(4),r=[],a=0;a!=t;++a)r[a]=e.read_shift(0,"lpstr-cp").replace(Al,"");return r}function hde(e){var t=e.l,r=kb(e,wR);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var a=kb(e,Kl);return[r,a]}function mde(e){for(var t=e.read_shift(4),r=[],a=0;a<t/2;++a)r.push(hde(e));return r}function jD(e,t){for(var r=e.read_shift(4),a={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);a[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(Al,"").replace(Qp,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),a}function DR(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function pde(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function kb(e,t,r){var a=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==yD&&a!==t&&Gce.indexOf(t)===-1&&!((t&65534)==4126&&(a&65534)==4126))throw new Error("Expected type "+t+" saw "+a);switch(t===yD?a:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return OR(e,a,4).replace(Al,"");case 31:return PR(e);case 64:return B3(e);case 65:return DR(e);case 71:return pde(e);case 80:return Lk(e,a,!i.raw).replace(Al,"");case 81:return dde(e,a).replace(Al,"");case 4108:return mde(e);case 4126:case 4127:return a==4127?ude(e):fde(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+a)}}function kD(e,t){var r=qt(4),a=qt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:a.write_shift(-4,t);break;case 5:a=qt(8),a.write_shift(8,t,"f");break;case 11:a.write_shift(4,t?1:0);break;case 64:a=cde(t);break;case 31:case 80:for(a=qt(4+2*(t.length+1)+(t.length%2?0:2)),a.write_shift(4,t.length+1),a.write_shift(0,t,"dbcs");a.l!=a.length;)a.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return lo([r,a])}function SD(e,t){var r=e.l,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var u=e.read_shift(4),f=e.read_shift(4);i[o]=[u,f+r]}i.sort(function(y,j){return y[1]-j[1]});var p={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var m=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,m=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],m=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(m=!1,e.l=i[o][1]),m)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var b=t[i[o][0]];if(p[b.n]=kb(e,b.t,{raw:!0}),b.p==="version"&&(p[b.n]=String(p[b.n]>>16)+"."+("0000"+String(p[b.n]&65535)).slice(-4)),b.n=="CodePage")switch(p[b.n]){case 0:p[b.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Vd(l=p[b.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[b.n])}}else if(i[o][0]===1){if(l=p.CodePage=kb(e,M3),Vd(l),c!==-1){var v=e.l;e.l=i[c][1],d=jD(e,l),e.l=v}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=jD(e,l)}else{var g=d[i[o][0]],w;switch(e[e.l]){case 65:e.l+=4,w=DR(e);break;case 30:e.l+=4,w=Lk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,w=Lk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,w=e.read_shift(4,"i");break;case 19:e.l+=4,w=e.read_shift(4);break;case 5:e.l+=4,w=e.read_shift(8,"f");break;case 11:e.l+=4,w=si(e,4);break;case 64:e.l+=4,w=gs(B3(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[g]=w}}return e.l=r+a,p}var LR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function xde(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function _D(e,t,r){var a=qt(8),s=[],i=[],o=8,l=0,c=qt(8),d=qt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=qt(8),d.write_shift(4,0),s.unshift(d);var u=[qt(4)];for(u[0].write_shift(4,e.length),l=0;l<e.length;++l){var f=e[l][0];for(c=qt(8+2*(f.length+1)+(f.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,f.length+1),c.write_shift(0,f,"dbcs");c.l!=c.length;)c.write_shift(1,0);u.push(c)}c=lo(u),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(LR.indexOf(e[l][0])>-1||CR.indexOf(e[l][0])>-1)&&e[l][1]!=null){var p=e[l][1],m=0;if(t){m=+t[e[l][0]];var b=r[m];if(b.p=="version"&&typeof p=="string"){var v=p.split(".");p=(+v[0]<<16)+(+v[1]||0)}c=kD(b.t,p)}else{var g=xde(p);g==-1&&(g=31,p=String(p)),c=kD(g,p)}i.push(c),d=qt(8),d.write_shift(4,t?m:2+l),s.push(d),o+=8+c.length}var w=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,w),w+=i[l].length;return a.write_shift(4,o),a.write_shift(4,i.length),lo([a].concat(s).concat(i))}function CD(e,t,r){var a=e.content;if(!a)return{};Oo(a,0);var s,i,o,l,c=0;a.chk("feff","Byte Order: "),a.read_shift(2);var d=a.read_shift(4),u=a.read_shift(16);if(u!==Zr.utils.consts.HEADER_CLSID&&u!==r)throw new Error("Bad PropertySet CLSID "+u);if(s=a.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=a.read_shift(16),l=a.read_shift(4),s===1&&l!==a.l)throw new Error("Length mismatch: "+l+" !== "+a.l);s===2&&(o=a.read_shift(16),c=a.read_shift(4));var f=SD(a,t),p={SystemIdentifier:d};for(var m in f)p[m]=f[m];if(p.FMTID=i,s===1)return p;if(c-a.l==2&&(a.l+=2),a.l!==c)throw new Error("Length mismatch 2: "+a.l+" !== "+c);var b;try{b=SD(a,null)}catch{}for(m in b)p[m]=b[m];return p.FMTID=[i,o],p}function AD(e,t,r,a,s,i){var o=qt(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Zr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=_D(e,r,a);if(l.push(c),s){var d=_D(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return lo(l)}function r0(e,t){return e.read_shift(t),null}function gde(e,t){t||(t=qt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function vde(e,t,r){for(var a=[],s=e.l+t;e.l<s;)a.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return a}function si(e,t){return e.read_shift(t)===1}function kl(e,t){return t||(t=qt(2)),t.write_shift(2,+!!e),t}function ki(e){return e.read_shift(2,"u")}function ed(e,t){return t||(t=qt(2)),t.write_shift(2,e),t}function FR(e,t){return vde(e,t,ki)}function bde(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function MR(e,t,r){return r||(r=qt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function Eg(e,t,r){var a=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=a?e.read_shift(a,s):"";return o}function yde(e){var t=e.read_shift(2),r=e.read_shift(1),a=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),a&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",u=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),a&&(e.l+=l),c.t=u,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function wde(e){var t=e.t||"",r=qt(3);r.write_shift(2,t.length),r.write_shift(1,1);var a=qt(2*t.length);a.write_shift(2*t.length,t,"utf16le");var s=[r,a];return lo(s)}function Ih(e,t,r){var a;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?a=e.read_shift(t,"sbcs-cont"):a=e.read_shift(t,"dbcs-cont"),a}function Tg(e,t,r){var a=e.read_shift(r&&r.biff==2?1:2);return a===0?(e.l++,""):Ih(e,a,r)}function Gh(e,t,r){if(r.biff>5)return Tg(e,t,r);var a=e.read_shift(1);return a===0?(e.l++,""):e.read_shift(a,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function RR(e,t,r){return r||(r=qt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function Nde(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function jde(e){var t=e.read_shift(4),r=e.l,a=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(a=!0),e.l=r);var s=e.read_shift((a?t-24:t)>>1,"utf16le").replace(Al,"");return a&&(e.l+=24),s}function kde(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var a=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+a.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(Al,"");return r+o}function Sde(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return jde(e);case"0303000000000000c000000000000046":return kde(e);default:throw new Error("Unsupported Moniker "+r)}}function Lv(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(Al,""):"";return r}function ED(e,t){t||(t=qt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function _de(e,t){var r=e.l+t,a=e.read_shift(4);if(a!==2)throw new Error("Unrecognized streamVersion: "+a);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",u,f;s&16&&(i=Lv(e,r-e.l)),s&128&&(o=Lv(e,r-e.l)),(s&257)===257&&(l=Lv(e,r-e.l)),(s&257)===1&&(c=Sde(e,r-e.l)),s&8&&(d=Lv(e,r-e.l)),s&32&&(u=e.read_shift(16)),s&64&&(f=B3(e)),e.l=r;var p=o||l||c||"";p&&d&&(p+="#"+d),p||(p="#"+d),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var m={Target:p};return u&&(m.guid=u),f&&(m.time=f),i&&(m.Tooltip=i),m}function Cde(e){var t=qt(512),r=0,a=e.Target;a.slice(0,7)=="file://"&&(a=a.slice(7));var s=a.indexOf("#"),i=s>-1?31:23;switch(a.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)a=a.slice(1),ED(a,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?a.slice(0,s):a;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&ED(s>-1?a.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;a.slice(c*3,c*3+3)=="../"||a.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,a.length-3*c+1),r=0;r<a.length-3*c;++r)t.write_shift(1,a.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function BR(e){var t=e.read_shift(1),r=e.read_shift(1),a=e.read_shift(1),s=e.read_shift(1);return[t,r,a,s]}function UR(e,t){var r=BR(e);return r[3]=0,r}function qu(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return{r:t,c:r,ixfe:a}}function Dh(e,t,r,a){return a||(a=qt(6)),a.write_shift(2,e),a.write_shift(2,t),a.write_shift(2,r||0),a}function Ade(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Ede(e,t,r){return t===0?"":Gh(e,t,r)}function Tde(e,t,r){var a=r.biff>8?4:2,s=e.read_shift(a),i=e.read_shift(a,"i"),o=e.read_shift(a,"i");return[s,i,o]}function qR(e){var t=e.read_shift(2),r=F3(e);return[t,r]}function Ode(e,t,r){e.l+=4,t-=4;var a=e.l+t,s=Eg(e,t,r),i=e.read_shift(2);if(a-=e.l,i!==a)throw new Error("Malformed AddinUdf: padding = "+a+" != "+i);return e.l+=i,s}function jy(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2);return{s:{c:a,r:t},e:{c:s,r}}}function $R(e,t){return t||(t=qt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function zR(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(1),s=e.read_shift(1);return{s:{c:a,r:t},e:{c:s,r}}}var Pde=zR;function HR(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2);return e.l+=12,[r,t,a]}function Ide(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Dde(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Qo(e){e.l+=2,e.l+=e.read_shift(2)}var Lde={0:Qo,4:Qo,5:Qo,6:Qo,7:Dde,8:Qo,9:Qo,10:Qo,11:Qo,12:Qo,13:Ide,14:Qo,15:Qo,16:Qo,17:Qo,18:Qo,19:Qo,20:Qo,21:HR};function Fde(e,t){for(var r=e.l+t,a=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{a.push(Lde[s](e,r-e.l))}catch{return e.l=r,a}}return e.l!=r&&(e.l=r),a}function Fv(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function U3(e,t,r){var a=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":a=1280,s=8;break;case"biff4":a=4,s=6;break;case"biff3":a=3,s=6;break;case"biff2":a=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=qt(s);return i.write_shift(2,a),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Mde(e,t){return t===0||e.read_shift(2),1200}function Rde(e,t,r){if(r.enc)return e.l+=t,"";var a=e.l,s=Gh(e,0,r);return e.read_shift(t+a-e.l),s}function Bde(e,t){var r=!t||t.biff==8,a=qt(r?112:54);for(a.write_shift(t.biff==8?2:1,7),r&&a.write_shift(1,0),a.write_shift(4,859007059),a.write_shift(4,5458548|(r?0:536870912));a.l<a.length;)a.write_shift(1,r?0:32);return a}function Ude(e,t,r){var a=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:a&16,fBelow:a&64,fRight:a&128}}function qde(e,t,r){var a=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=Eg(e,0,r);return o.length===0&&(o="Sheet1"),{pos:a,hs:s,dt:i,name:o}}function $de(e,t){var r=!t||t.biff>=8?2:1,a=qt(8+r*e.name.length);a.write_shift(4,e.pos),a.write_shift(1,e.hs||0),a.write_shift(1,e.dt),a.write_shift(1,e.name.length),t.biff>=8&&a.write_shift(1,1),a.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=a.slice(0,a.l);return s.l=a.l,s}function zde(e,t){for(var r=e.l+t,a=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(yde(e));return i.Count=a,i.Unique=s,i}function Hde(e,t){var r=qt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var a=[],s=0;s<e.length;++s)a[s]=wde(e[s]);var i=lo([r].concat(a));return i.parts=[r.length].concat(a.map(function(o){return o.length})),i}function Wde(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Gde(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var a=e.read_shift(1);return e.l+=3,a&7&&(t.level=a&7),a&32&&(t.hidden=!0),a&64&&(t.hpt=r/20),t}function Vde(e){var t=Ade(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Kde(e){return e.read_shift(2),e.read_shift(4)}function TD(e,t,r){var a=0;r&&r.biff==2||(a=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(a=1-(s>>15),s&=32767);var i={Unsynced:a&1,DyZero:(a&2)>>1,ExAsc:(a&4)>>2,ExDsc:(a&8)>>3};return[i,s]}function Xde(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[a,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function Yde(){var e=qt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Qde(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var a=e.read_shift(2);return{RTL:a&64}}function Jde(e){var t=qt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Zde(){}function eue(e,t,r){var a={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return a.name=Eg(e,0,r),a}function tue(e,t){var r=e.name||"Arial",a=t&&t.biff==5,s=a?15+r.length:16+2*r.length,i=qt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),a||i.write_shift(1,1),i.write_shift((a?1:2)*r.length,r,a?"sbcs":"utf16le"),i}function rue(e){var t=qu(e);return t.isst=e.read_shift(4),t}function nue(e,t,r,a){var s=qt(10);return Dh(e,t,a,s),s.write_shift(4,r),s}function aue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=e.l+t,s=qu(e);r.biff==2&&e.l++;var i=Tg(e,a-e.l,r);return s.val=i,s}function sue(e,t,r,a,s){var i=!s||s.biff==8,o=qt(8+ +i+(1+i)*r.length);return Dh(e,t,a,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function iue(e,t,r){var a=e.read_shift(2),s=Gh(e,0,r);return[a,s]}function oue(e,t,r,a){var s=r&&r.biff==5;a||(a=qt(s?3+t.length:5+2*t.length)),a.write_shift(2,e),a.write_shift(s?1:2,t.length),s||a.write_shift(1,1),a.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=a.length>a.l?a.slice(0,a.l):a;return i.l==null&&(i.l=i.length),i}var lue=Gh;function OD(e,t,r){var a=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=a,{s:{r:i,c:l},e:{r:o,c}}}function cue(e,t){var r=t.biff==8||!t.biff?4:2,a=qt(2*r+6);return a.write_shift(r,e.s.r),a.write_shift(r,e.e.r+1),a.write_shift(2,e.s.c),a.write_shift(2,e.e.c+1),a.write_shift(2,0),a}function due(e){var t=e.read_shift(2),r=e.read_shift(2),a=qR(e);return{r:t,c:r,ixfe:a[0],rknum:a[1]}}function uue(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(qR(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:a,c:s,C:o,rkrec:i}}function fue(e,t){for(var r=e.l+t-2,a=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:a,c:s,C:o,ixfe:i}}function hue(e,t,r,a){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=Vce[l>>26],a.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function mue(e,t,r){var a={};return a.ifnt=e.read_shift(2),a.numFmtId=e.read_shift(2),a.flags=e.read_shift(2),a.fStyle=a.flags>>2&1,t-=6,a.data=hue(e,t,a.fStyle,r),a}function PD(e,t,r,a){var s=r&&r.biff==5;a||(a=qt(s?16:20)),a.write_shift(2,0),e.style?(a.write_shift(2,e.numFmtId||0),a.write_shift(2,65524)):(a.write_shift(2,e.numFmtId||0),a.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),a.write_shift(4,i),a.write_shift(4,0),s||a.write_shift(4,0),a.write_shift(2,0),a}function pue(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function xue(e){var t=qt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function ID(e,t,r){var a=qu(e);(r.biff==2||t==9)&&++e.l;var s=bde(e);return a.val=s,a.t=s===!0||s===!1?"b":"e",a}function gue(e,t,r,a,s,i){var o=qt(8);return Dh(e,t,a,o),MR(r,i,o),o}function vue(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var a=qu(e),s=ll(e);return a.val=s,a}function bue(e,t,r,a){var s=qt(14);return Dh(e,t,a,s),Ph(r,s),s}var DD=Ede;function yue(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=Ih(e,i),l=[];a>e.l;)l.push(Tg(e));return[i,s,o,l]}function LD(e,t,r){var a=e.read_shift(2),s,i={fBuiltIn:a&1,fWantAdvise:a>>>1&1,fWantPict:a>>>2&1,fOle:a>>>3&1,fOleLink:a>>>4&1,cf:a>>>5&1023,fIcon:a>>>15&1};return r.sbcch===14849&&(s=Ode(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var wue=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function FD(e,t,r){var a=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=Ih(e,o,r);s&32&&(d=wue[d.charCodeAt(0)]);var u=a-e.l;r&&r.biff==2&&--u;var f=a==e.l||l===0||!(u>0)?[]:Fme(e,u,r,l);return{chKey:i,Name:d,itab:c,rgce:f}}function WR(e,t,r){if(r.biff<8)return Nue(e,t,r);for(var a=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)a.push(Tde(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return a}function Nue(e,t,r){e[e.l+1]==3&&e[e.l]++;var a=Eg(e,t,r);return a.charCodeAt(0)==3?a.slice(1):a}function jue(e,t,r){if(r.biff<8){e.l+=t;return}var a=e.read_shift(2),s=e.read_shift(2),i=Ih(e,a,r),o=Ih(e,s,r);return[i,o]}function kue(e,t,r){var a=zR(e);e.l++;var s=e.read_shift(1);return t-=8,[Mme(e,t,r),s,a]}function MD(e,t,r){var a=Pde(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[a,Dme(e,t,r)]}function Sue(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,a=e.read_shift(4);return[t,r,a]}function _ue(e,t,r){if(!(r.biff<8)){var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=Gh(e,0,r);return r.biff<8&&e.read_shift(1),[{r:a,c:s},l,o,i]}}function Cue(e,t,r){return _ue(e,t,r)}function Aue(e,t){for(var r=[],a=e.read_shift(2);a--;)r.push(jy(e));return r}function Eue(e){var t=qt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)$R(e[r],t);return t}function Tue(e,t,r){if(r&&r.biff<8)return Pue(e,t,r);var a=HR(e),s=Fde(e,t-22,a[1]);return{cmo:a,ft:s}}var Oue={8:function(e,t){var r=e.l+t;e.l+=10;var a=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:a}}};function Pue(e,t,r){e.l+=4;var a=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Oue[a]||fl)(e,t,r)),{cmo:[s,a,i],ft:o}}function Iue(e,t,r){var a=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=Nde(e,6,r);var l=e.read_shift(2);e.read_shift(2),ki(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-a!=e.lens[d])throw new Error("TxO: bad continue record");var u=e[e.l],f=Ih(e,e.lens[d+1]-e.lens[d]-1);if(s+=f,s.length>=(u?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=a+t,{t:s}}catch{return e.l=a+t,{t:s}}}function Due(e,t){var r=jy(e);e.l+=16;var a=_de(e,t-24);return[r,a]}function Lue(e){var t=qt(24),r=Us(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var a="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(a[s],16));return lo([t,Cde(e[1])])}function Fue(e,t){e.read_shift(2);var r=jy(e),a=e.read_shift((t-10)/2,"dbcs-cont");return a=a.replace(Al,""),[r,a]}function Mue(e){var t=e[1].Tooltip,r=qt(10+2*(t.length+1));r.write_shift(2,2048);var a=Us(e[0]);r.write_shift(2,a.r),r.write_shift(2,a.r),r.write_shift(2,a.c),r.write_shift(2,a.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Rue(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=wD[r]||r,r=e.read_shift(2),t[1]=wD[r]||r,t}function Bue(e){return e||(e=qt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Uue(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(UR(e));return r}function que(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(UR(e));return r}function $ue(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function GR(e,t,r){if(!r.cellStyles)return fl(e,t);var a=r&&r.biff>=12?4:2,s=e.read_shift(a),i=e.read_shift(a),o=e.read_shift(a),l=e.read_shift(a),c=e.read_shift(2);a==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function zue(e,t){var r=qt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var a=0;return e.hidden&&(a|=1),r.write_shift(1,a),a=e.level||0,r.write_shift(1,a),r.write_shift(2,0),r}function Hue(e,t){var r={};return t<32||(e.l+=16,r.header=ll(e),r.footer=ll(e),e.l+=2),r}function Wue(e,t,r){var a={area:!1};if(r.biff!=5)return e.l+=t,a;var s=e.read_shift(1);return e.l+=3,s&16&&(a.area=!0),a}function Gue(e){for(var t=qt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Vue=qu,Kue=FR,Xue=Tg;function Yue(e){var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s={fmt:t,env:r,len:a,data:e.slice(e.l,e.l+a)};return e.l+=a,s}function Que(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var a=qu(e);++e.l;var s=Gh(e,t-7,r);return a.t="str",a.val=s,a}function Jue(e){var t=qu(e);++e.l;var r=ll(e);return t.t="n",t.val=r,t}function Zue(e,t,r){var a=qt(15);return Dg(a,e,t),a.write_shift(8,r,"f"),a}function efe(e){var t=qu(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function tfe(e,t,r){var a=qt(9);return Dg(a,e,t),a.write_shift(2,r),a}function rfe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function nfe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function afe(e,t,r){var a=e.l+t,s=qu(e),i=e.read_shift(2),o=Ih(e,i,r);return e.l=a,s.t="str",s.val=o,s}var sfe=[2,3,48,49,131,139,140,245],Fk=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=yy({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],u=N0(1);switch(c.type){case"base64":u=wc(Cc(l));break;case"binary":u=wc(l);break;case"buffer":case"array":u=l;break}Oo(u,0);var f=u.read_shift(1),p=!!(f&136),m=!1,b=!1;switch(f){case 2:break;case 3:break;case 48:m=!0,p=!0;break;case 49:m=!0,p=!0;break;case 131:break;case 139:break;case 140:b=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+f.toString(16))}var v=0,g=521;f==2&&(v=u.read_shift(2)),u.l+=3,f!=2&&(v=u.read_shift(4)),v>1048576&&(v=1e6),f!=2&&(g=u.read_shift(2));var w=u.read_shift(2),y=c.codepage||1252;f!=2&&(u.l+=16,u.read_shift(1),u[u.l]!==0&&(y=e[u[u.l]]),u.l+=1,u.l+=2),b&&(u.l+=36);for(var j=[],N={},S=Math.min(u.length,f==2?521:g-10-(m?264:0)),E=b?32:11;u.l<S&&u[u.l]!=13;)switch(N={},N.name=rg.utils.decode(y,u.slice(u.l,u.l+E)).replace(/[\u0000\r\n].*$/g,""),u.l+=E,N.type=String.fromCharCode(u.read_shift(1)),f!=2&&!b&&(N.offset=u.read_shift(4)),N.len=u.read_shift(1),f==2&&(N.offset=u.read_shift(2)),N.dec=u.read_shift(1),N.name.length&&j.push(N),f!=2&&(u.l+=b?13:14),N.type){case"B":(!m||N.len!=8)&&c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+N.name+":"+N.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+N.type)}if(u[u.l]!==13&&(u.l=g-1),u.read_shift(1)!==13)throw new Error("DBF Terminator not found "+u.l+" "+u[u.l]);u.l=g;var A=0,P=0;for(d[0]=[],P=0;P!=j.length;++P)d[0][P]=j[P].name;for(;v-- >0;){if(u[u.l]===42){u.l+=w;continue}for(++u.l,d[++A]=[],P=0,P=0;P!=j.length;++P){var I=u.slice(u.l,u.l+j[P].len);u.l+=j[P].len,Oo(I,0);var B=rg.utils.decode(y,I);switch(j[P].type){case"C":B.trim().length&&(d[A][P]=B.replace(/\s+$/,""));break;case"D":B.length===8?d[A][P]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):d[A][P]=B;break;case"F":d[A][P]=parseFloat(B.trim());break;case"+":case"I":d[A][P]=b?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":d[A][P]=!0;break;case"N":case"F":d[A][P]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+f.toString(16));d[A][P]="##MEMO##"+(b?parseInt(B.trim(),10):I.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(d[A][P]=+B||0);break;case"@":d[A][P]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":d[A][P]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":d[A][P]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[A][P]=-I.read_shift(-8,"f");break;case"B":if(m&&j[P].len==8){d[A][P]=I.read_shift(8,"f");break}case"G":case"P":I.l+=j[P].len;break;case"0":if(j[P].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[P].type)}}}if(f!=2&&u.l<u.length&&u[u.l++]!=26)throw new Error("DBF EOF Marker missing "+(u.l-1)+" of "+u.length+" "+u[u.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=j,d}function a(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var u=xp(r(l,d),d);return u["!cols"]=d.DBF.map(function(f){return{wch:f.len,DBF:f}}),delete d.DBF,u}function s(l,c){try{return F0(a(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&Vd(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var u=Ql(),f=Ab(l,{header:1,raw:!0,cellDates:!0}),p=f[0],m=f.slice(1),b=l["!cols"]||[],v=0,g=0,w=0,y=1;for(v=0;v<p.length;++v){if(((b[v]||{}).DBF||{}).name){p[v]=b[v].DBF.name,++w;continue}if(p[v]!=null){if(++w,typeof p[v]=="number"&&(p[v]=p[v].toString(10)),typeof p[v]!="string")throw new Error("DBF Invalid column name "+p[v]+" |"+typeof p[v]+"|");if(p.indexOf(p[v])!==v){for(g=0;g<1024;++g)if(p.indexOf(p[v]+"_"+g)==-1){p[v]+="_"+g;break}}}}var j=ha(l["!ref"]),N=[],S=[],E=[];for(v=0;v<=j.e.c-j.s.c;++v){var A="",P="",I=0,B=[];for(g=0;g<m.length;++g)m[g][v]!=null&&B.push(m[g][v]);if(B.length==0||p[v]==null){N[v]="?";continue}for(g=0;g<B.length;++g){switch(typeof B[g]){case"number":P="B";break;case"string":P="C";break;case"boolean":P="L";break;case"object":P=B[g]instanceof Date?"D":"C";break;default:P="C"}I=Math.max(I,String(B[g]).length),A=A&&A!=P?"C":P}I>250&&(I=250),P=((b[v]||{}).DBF||{}).type,P=="C"&&b[v].DBF.len>I&&(I=b[v].DBF.len),A=="B"&&P=="N"&&(A="N",E[v]=b[v].DBF.dec,I=b[v].DBF.len),S[v]=A=="C"||P=="N"?I:i[A]||0,y+=S[v],N[v]=A}var T=u.next(32);for(T.write_shift(4,318902576),T.write_shift(4,m.length),T.write_shift(2,296+32*w),T.write_shift(2,y),v=0;v<4;++v)T.write_shift(4,0);for(T.write_shift(4,0|(+t[LM]||3)<<8),v=0,g=0;v<p.length;++v)if(p[v]!=null){var _=u.next(32),R=(p[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);_.write_shift(1,R,"sbcs"),_.write_shift(1,N[v]=="?"?"C":N[v],"sbcs"),_.write_shift(4,g),_.write_shift(1,S[v]||i[N[v]]||0),_.write_shift(1,E[v]||0),_.write_shift(1,2),_.write_shift(4,0),_.write_shift(1,0),_.write_shift(4,0),_.write_shift(4,0),g+=S[v]||i[N[v]]||0}var z=u.next(264);for(z.write_shift(4,13),v=0;v<65;++v)z.write_shift(4,0);for(v=0;v<m.length;++v){var H=u.next(y);for(H.write_shift(1,0),g=0;g<p.length;++g)if(p[g]!=null)switch(N[g]){case"L":H.write_shift(1,m[v][g]==null?63:m[v][g]?84:70);break;case"B":H.write_shift(8,m[v][g]||0,"f");break;case"N":var Y="0";for(typeof m[v][g]=="number"&&(Y=m[v][g].toFixed(E[g]||0)),w=0;w<S[g]-Y.length;++w)H.write_shift(1,32);H.write_shift(1,Y,"sbcs");break;case"D":m[v][g]?(H.write_shift(4,("0000"+m[v][g].getFullYear()).slice(-4),"sbcs"),H.write_shift(2,("00"+(m[v][g].getMonth()+1)).slice(-2),"sbcs"),H.write_shift(2,("00"+m[v][g].getDate()).slice(-2),"sbcs")):H.write_shift(8,"00000000","sbcs");break;case"C":var J=String(m[v][g]!=null?m[v][g]:"").slice(0,S[g]);for(H.write_shift(1,J,"sbcs"),w=0;w<S[g]-J.length;++w)H.write_shift(1,32);break}}return u.next(1).write_shift(1,26),u.end()}return{to_workbook:s,to_sheet:a,from_sheet:o}})(),VR=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Js(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,m){var b=e[m];return typeof b=="number"?KI(b):b},a=function(p,m,b){var v=m.charCodeAt(0)-32<<4|b.charCodeAt(0)-48;return v==59?p:KI(v)};e["|"]=254;function s(p,m){switch(m.type){case"base64":return i(Cc(p),m);case"binary":return i(p,m);case"buffer":return i(Rn&&Buffer.isBuffer(p)?p.toString("binary"):L0(p),m);case"array":return i(Oh(p),m)}throw new Error("Unrecognized type "+m.type)}function i(p,m){var b=p.split(/[\n\r]+/),v=-1,g=-1,w=0,y=0,j=[],N=[],S=null,E={},A=[],P=[],I=[],B=0,T;for(+m.codepage>=0&&Vd(+m.codepage);w!==b.length;++w){B=0;var _=b[w].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,a).replace(t,r),R=_.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),z=R[0],H;if(_.length>0)switch(z){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":R[1].charAt(0)=="P"&&N.push(_.slice(3).replace(/;;/g,";"));break;case"C":var Y=!1,J=!1,re=!1,X=!1,te=-1,W=-1;for(y=1;y<R.length;++y)switch(R[y].charAt(0)){case"A":break;case"X":g=parseInt(R[y].slice(1))-1,J=!0;break;case"Y":for(v=parseInt(R[y].slice(1))-1,J||(g=0),T=j.length;T<=v;++T)j[T]=[];break;case"K":H=R[y].slice(1),H.charAt(0)==='"'?H=H.slice(1,H.length-1):H==="TRUE"?H=!0:H==="FALSE"?H=!1:isNaN(Zd(H))?isNaN(tp(H).getDate())||(H=gs(H)):(H=Zd(H),S!==null&&mp(S)&&(H=Ny(H))),Y=!0;break;case"E":X=!0;var O=Sm(R[y].slice(1),{r:v,c:g});j[v][g]=[j[v][g],O];break;case"S":re=!0,j[v][g]=[j[v][g],"S5S"];break;case"G":break;case"R":te=parseInt(R[y].slice(1))-1;break;case"C":W=parseInt(R[y].slice(1))-1;break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+_)}if(Y&&(j[v][g]&&j[v][g].length==2?j[v][g][0]=H:j[v][g]=H,S=null),re){if(X)throw new Error("SYLK shared formula cannot have own formula");var q=te>-1&&j[te][W];if(!q||!q[1])throw new Error("SYLK shared formula cannot find base");j[v][g][1]=u9(q[1],{r:v-te,c:g-W})}break;case"F":var G=0;for(y=1;y<R.length;++y)switch(R[y].charAt(0)){case"X":g=parseInt(R[y].slice(1))-1,++G;break;case"Y":for(v=parseInt(R[y].slice(1))-1,T=j.length;T<=v;++T)j[T]=[];break;case"M":B=parseInt(R[y].slice(1))/20;break;case"F":break;case"G":break;case"P":S=N[parseInt(R[y].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=R[y].slice(1).split(" "),T=parseInt(I[0],10);T<=parseInt(I[1],10);++T)B=parseInt(I[2],10),P[T-1]=B===0?{hidden:!0}:{wch:B},j0(P[T-1]);break;case"C":g=parseInt(R[y].slice(1))-1,P[g]||(P[g]={});break;case"R":v=parseInt(R[y].slice(1))-1,A[v]||(A[v]={}),B>0?(A[v].hpt=B,A[v].hpx=np(B)):B===0&&(A[v].hidden=!0);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+_)}G<1&&(S=null);break;default:if(m&&m.WTF)throw new Error("SYLK bad record "+_)}}return A.length>0&&(E["!rows"]=A),P.length>0&&(E["!cols"]=P),m&&m.sheetRows&&(j=j.slice(0,m.sheetRows)),[j,E]}function o(p,m){var b=s(p,m),v=b[0],g=b[1],w=xp(v,m);return Js(g).forEach(function(y){w[y]=g[y]}),w}function l(p,m){return F0(o(p,m),m)}function c(p,m,b,v){var g="C;Y"+(b+1)+";X"+(v+1)+";K";switch(p.t){case"n":g+=p.v||0,p.f&&!p.F&&(g+=";E"+G3(p.f,{r:b,c:v}));break;case"b":g+=p.v?"TRUE":"FALSE";break;case"e":g+=p.w||p.v;break;case"d":g+='"'+(p.w||p.v)+'"';break;case"s":g+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function d(p,m){m.forEach(function(b,v){var g="F;W"+(v+1)+" "+(v+1)+" ";b.hidden?g+="0":(typeof b.width=="number"&&!b.wpx&&(b.wpx=dg(b.width)),typeof b.wpx=="number"&&!b.wch&&(b.wch=ug(b.wpx)),typeof b.wch=="number"&&(g+=Math.round(b.wch))),g.charAt(g.length-1)!=" "&&p.push(g)})}function u(p,m){m.forEach(function(b,v){var g="F;";b.hidden?g+="M0;":b.hpt?g+="M"+20*b.hpt+";":b.hpx&&(g+="M"+20*fg(b.hpx)+";"),g.length>2&&p.push(g+"R"+(v+1))})}function f(p,m){var b=["ID;PWXL;N;E"],v=[],g=ha(p["!ref"]),w,y=Array.isArray(p),j=`\r
`;b.push("P;PGeneral"),b.push("F;P0;DG0G8;M255"),p["!cols"]&&d(b,p["!cols"]),p["!rows"]&&u(b,p["!rows"]),b.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var N=g.s.r;N<=g.e.r;++N)for(var S=g.s.c;S<=g.e.c;++S){var E=gn({r:N,c:S});w=y?(p[N]||[])[S]:p[E],!(!w||w.v==null&&(!w.f||w.F))&&v.push(c(w,p,N,S))}return b.join(j)+j+v.join(j)+j+"E"+j}return{to_workbook:l,to_sheet:o,from_sheet:f}})(),KR=(function(){function e(i,o){switch(o.type){case"base64":return t(Cc(i),o);case"binary":return t(i,o);case"buffer":return t(Rn&&Buffer.isBuffer(i)?i.toString("binary"):L0(i),o);case"array":return t(Oh(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,u=0,f=[];u!==l.length;++u){if(l[u].trim()==="BOT"){f[++c]=[],d=0;continue}if(!(c<0)){var p=l[u].trim().split(","),m=p[0],b=p[1];++u;for(var v=l[u]||"";(v.match(/["]/g)||[]).length&1&&u<l.length-1;)v+=`
`+l[++u];switch(v=v.trim(),+m){case-1:if(v==="BOT"){f[++c]=[],d=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?f[c][d]=!0:v==="FALSE"?f[c][d]=!1:isNaN(Zd(b))?isNaN(tp(b).getDate())?f[c][d]=b:f[c][d]=gs(b):f[c][d]=Zd(b),++d;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),f[c][d++]=v!==""?v:null;break}if(v==="EOD")break}}return o&&o.sheetRows&&(f=f.slice(0,o.sheetRows)),f}function r(i,o){return xp(e(i,o),o)}function a(i,o){return F0(r(i,o),o)}var s=(function(){var i=function(c,d,u,f,p){c.push(d),c.push(u+","+f),c.push('"'+p.replace(/"/g,'""')+'"')},o=function(c,d,u,f){c.push(d+","+u),c.push(d==1?'"'+f.replace(/"/g,'""')+'"':f)};return function(c){var d=[],u=ha(c["!ref"]),f,p=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,u.e.r-u.s.r+1,""),i(d,"TUPLES",0,u.e.c-u.s.c+1,""),i(d,"DATA",0,0,"");for(var m=u.s.r;m<=u.e.r;++m){o(d,-1,0,"BOT");for(var b=u.s.c;b<=u.e.c;++b){var v=gn({r:m,c:b});if(f=p?(c[m]||[])[b]:c[v],!f){o(d,1,0,"");continue}switch(f.t){case"n":var g=f.w;!g&&f.v!=null&&(g=f.v),g==null?f.f&&!f.F?o(d,1,0,"="+f.f):o(d,1,0,""):o(d,0,g,"V");break;case"b":o(d,0,f.v?1:0,f.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(f.v)?f.v:'="'+f.v+'"');break;case"d":f.w||(f.w=fd(f.z||dn[14],zi(gs(f.v)))),o(d,0,f.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var w=`\r
`,y=d.join(w);return y}})();return{to_workbook:a,to_sheet:r,from_sheet:s}})(),XR=(function(){function e(f){return f.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(f){return f.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(f,p){for(var m=f.split(`
`),b=-1,v=-1,g=0,w=[];g!==m.length;++g){var y=m[g].trim().split(":");if(y[0]==="cell"){var j=Us(y[1]);if(w.length<=j.r)for(b=w.length;b<=j.r;++b)w[b]||(w[b]=[]);switch(b=j.r,v=j.c,y[2]){case"t":w[b][v]=e(y[3]);break;case"v":w[b][v]=+y[3];break;case"vtf":var N=y[y.length-1];case"vtc":y[3]==="nl"?w[b][v]=!!+y[4]:w[b][v]=+y[4],y[2]=="vtf"&&(w[b][v]=[w[b][v],N])}}}return p&&p.sheetRows&&(w=w.slice(0,p.sheetRows)),w}function a(f,p){return xp(r(f,p),p)}function s(f,p){return F0(a(f,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(f){if(!f||!f["!ref"])return"";for(var p=[],m=[],b,v="",g=Zl(f["!ref"]),w=Array.isArray(f),y=g.s.r;y<=g.e.r;++y)for(var j=g.s.c;j<=g.e.c;++j)if(v=gn({r:y,c:j}),b=w?(f[y]||[])[j]:f[v],!(!b||b.v==null||b.t==="z")){switch(m=["cell",v,"t"],b.t){case"s":case"str":m.push(t(b.v));break;case"n":b.f?(m[2]="vtf",m[3]="n",m[4]=b.v,m[5]=t(b.f)):(m[2]="v",m[3]=b.v);break;case"b":m[2]="vt"+(b.f?"f":"c"),m[3]="nl",m[4]=b.v?"1":"0",m[5]=t(b.f||(b.v?"TRUE":"FALSE"));break;case"d":var N=zi(gs(b.v));m[2]="vtc",m[3]="nd",m[4]=""+N,m[5]=b.w||fd(b.z||dn[14],N);break;case"e":continue}p.push(m.join(":"))}return p.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function u(f){return[i,o,l,o,d(f),c].join(`
`)}return{to_workbook:s,to_sheet:a,from_sheet:u}})(),rp=(function(){function e(u,f,p,m,b){b.raw?f[p][m]=u:u===""||(u==="TRUE"?f[p][m]=!0:u==="FALSE"?f[p][m]=!1:isNaN(Zd(u))?isNaN(tp(u).getDate())?f[p][m]=u:f[p][m]=gs(u):f[p][m]=Zd(u))}function t(u,f){var p=f||{},m=[];if(!u||u.length===0)return m;for(var b=u.split(/[\r\n]/),v=b.length-1;v>=0&&b[v].length===0;)--v;for(var g=10,w=0,y=0;y<=v;++y)w=b[y].indexOf(" "),w==-1?w=b[y].length:w++,g=Math.max(g,w);for(y=0;y<=v;++y){m[y]=[];var j=0;for(e(b[y].slice(0,g).trim(),m,y,j,p),j=1;j<=(b[y].length-g)/10+1;++j)e(b[y].slice(g+(j-1)*10,g+j*10).trim(),m,y,j,p)}return p.sheetRows&&(m=m.slice(0,p.sheetRows)),m}var r={44:",",9:"	",59:";",124:"|"},a={44:3,9:2,59:1,124:0};function s(u){for(var f={},p=!1,m=0,b=0;m<u.length;++m)(b=u.charCodeAt(m))==34?p=!p:!p&&b in r&&(f[b]=(f[b]||0)+1);b=[];for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&b.push([f[m],m]);if(!b.length){f=a;for(m in f)Object.prototype.hasOwnProperty.call(f,m)&&b.push([f[m],m])}return b.sort(function(v,g){return v[0]-g[0]||a[v[1]]-a[g[1]]}),r[b.pop()[1]]||44}function i(u,f){var p=f||{},m="",b=p.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};u.slice(0,4)=="sep="?u.charCodeAt(5)==13&&u.charCodeAt(6)==10?(m=u.charAt(4),u=u.slice(7)):u.charCodeAt(5)==13||u.charCodeAt(5)==10?(m=u.charAt(4),u=u.slice(6)):m=s(u.slice(0,1024)):p&&p.FS?m=p.FS:m=s(u.slice(0,1024));var g=0,w=0,y=0,j=0,N=0,S=m.charCodeAt(0),E=!1,A=0,P=u.charCodeAt(0);u=u.replace(/\r\n/mg,`
`);var I=p.dateNF!=null?Wle(p.dateNF):null;function B(){var T=u.slice(j,N),_={};if(T.charAt(0)=='"'&&T.charAt(T.length-1)=='"'&&(T=T.slice(1,-1).replace(/""/g,'"')),T.length===0)_.t="z";else if(p.raw)_.t="s",_.v=T;else if(T.trim().length===0)_.t="s",_.v=T;else if(T.charCodeAt(0)==61)T.charCodeAt(1)==34&&T.charCodeAt(T.length-1)==34?(_.t="s",_.v=T.slice(2,-1).replace(/""/g,'"')):yhe(T)?(_.t="n",_.f=T.slice(1)):(_.t="s",_.v=T);else if(T=="TRUE")_.t="b",_.v=!0;else if(T=="FALSE")_.t="b",_.v=!1;else if(!isNaN(y=Zd(T)))_.t="n",p.cellText!==!1&&(_.w=T),_.v=y;else if(!isNaN(tp(T).getDate())||I&&T.match(I)){_.z=p.dateNF||dn[14];var R=0;I&&T.match(I)&&(T=Gle(T,p.dateNF,T.match(I)||[]),R=1),p.cellDates?(_.t="d",_.v=gs(T,R)):(_.t="n",_.v=zi(gs(T,R))),p.cellText!==!1&&(_.w=fd(_.z,_.v instanceof Date?zi(_.v):_.v)),p.cellNF||delete _.z}else _.t="s",_.v=T;if(_.t=="z"||(p.dense?(b[g]||(b[g]=[]),b[g][w]=_):b[gn({c:w,r:g})]=_),j=N+1,P=u.charCodeAt(j),v.e.c<w&&(v.e.c=w),v.e.r<g&&(v.e.r=g),A==S)++w;else if(w=0,++g,p.sheetRows&&p.sheetRows<=g)return!0}e:for(;N<u.length;++N)switch(A=u.charCodeAt(N)){case 34:P===34&&(E=!E);break;case S:case 10:case 13:if(!E&&B())break e;break}return N-j>0&&B(),b["!ref"]=An(v),b}function o(u,f){return!(f&&f.PRN)||f.FS||u.slice(0,4)=="sep="||u.indexOf("	")>=0||u.indexOf(",")>=0||u.indexOf(";")>=0?i(u,f):xp(t(u,f),f)}function l(u,f){var p="",m=f.type=="string"?[0,0,0,0]:e_(u,f);switch(f.type){case"base64":p=Cc(u);break;case"binary":p=u;break;case"buffer":f.codepage==65001?p=u.toString("utf8"):f.codepage&&typeof rg<"u"||(p=Rn&&Buffer.isBuffer(u)?u.toString("binary"):L0(u));break;case"array":p=Oh(u);break;case"string":p=u;break;default:throw new Error("Unrecognized type "+f.type)}return m[0]==239&&m[1]==187&&m[2]==191?p=Wa(p.slice(3)):f.type!="string"&&f.type!="buffer"&&f.codepage==65001?p=Wa(p):f.type=="binary"&&typeof rg<"u",p.slice(0,19)=="socialcalc:version:"?XR.to_sheet(f.type=="string"?p:Wa(p),f):o(p,f)}function c(u,f){return F0(l(u,f),f)}function d(u){for(var f=[],p=ha(u["!ref"]),m,b=Array.isArray(u),v=p.s.r;v<=p.e.r;++v){for(var g=[],w=p.s.c;w<=p.e.c;++w){var y=gn({r:v,c:w});if(m=b?(u[v]||[])[w]:u[y],!m||m.v==null){g.push("          ");continue}for(var j=(m.w||(Of(m),m.w)||"").slice(0,10);j.length<10;)j+=" ";g.push(j+(w===0?" ":""))}f.push(g.join(""))}return f.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}})();function ife(e,t){var r=t||{},a=!!r.WTF;r.WTF=!0;try{var s=VR.to_workbook(e,r);return r.WTF=a,s}catch(i){if(r.WTF=a,!i.message.match(/SYLK bad record ID/)&&a)throw i;return rp.to_workbook(e,t)}}var vh=(function(){function e(O,q,G){if(O){Oo(O,O.l||0);for(var U=G.Enum||te;O.l<O.length;){var K=O.read_shift(2),ae=U[K]||U[65535],me=O.read_shift(2),se=O.l+me,le=ae.f&&ae.f(O,me,G);if(O.l=se,q(le,ae,K))return}}}function t(O,q){switch(q.type){case"base64":return r(wc(Cc(O)),q);case"binary":return r(wc(O),q);case"buffer":case"array":return r(O,q)}throw"Unsupported type "+q.type}function r(O,q){if(!O)return O;var G=q||{},U=G.dense?[]:{},K="Sheet1",ae="",me=0,se={},le=[],Me=[],ue={s:{r:0,c:0},e:{r:0,c:0}},Ue=G.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)G.Enum=te,e(O,function(Ee,we,Oe){switch(Oe){case 0:G.vers=Ee,Ee>=4096&&(G.qpro=!0);break;case 6:ue=Ee;break;case 204:Ee&&(ae=Ee);break;case 222:ae=Ee;break;case 15:case 51:G.qpro||(Ee[1].v=Ee[1].v.slice(1));case 13:case 14:case 16:Oe==14&&(Ee[2]&112)==112&&(Ee[2]&15)>1&&(Ee[2]&15)<15&&(Ee[1].z=G.dateNF||dn[14],G.cellDates&&(Ee[1].t="d",Ee[1].v=Ny(Ee[1].v))),G.qpro&&Ee[3]>me&&(U["!ref"]=An(ue),se[K]=U,le.push(K),U=G.dense?[]:{},ue={s:{r:0,c:0},e:{r:0,c:0}},me=Ee[3],K=ae||"Sheet"+(me+1),ae="");var de=G.dense?(U[Ee[0].r]||[])[Ee[0].c]:U[gn(Ee[0])];if(de){de.t=Ee[1].t,de.v=Ee[1].v,Ee[1].z!=null&&(de.z=Ee[1].z),Ee[1].f!=null&&(de.f=Ee[1].f);break}G.dense?(U[Ee[0].r]||(U[Ee[0].r]=[]),U[Ee[0].r][Ee[0].c]=Ee[1]):U[gn(Ee[0])]=Ee[1];break}},G);else if(O[2]==26||O[2]==14)G.Enum=W,O[2]==14&&(G.qpro=!0,O.l=0),e(O,function(Ee,we,Oe){switch(Oe){case 204:K=Ee;break;case 22:Ee[1].v=Ee[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ee[3]>me&&(U["!ref"]=An(ue),se[K]=U,le.push(K),U=G.dense?[]:{},ue={s:{r:0,c:0},e:{r:0,c:0}},me=Ee[3],K="Sheet"+(me+1)),Ue>0&&Ee[0].r>=Ue)break;G.dense?(U[Ee[0].r]||(U[Ee[0].r]=[]),U[Ee[0].r][Ee[0].c]=Ee[1]):U[gn(Ee[0])]=Ee[1],ue.e.c<Ee[0].c&&(ue.e.c=Ee[0].c),ue.e.r<Ee[0].r&&(ue.e.r=Ee[0].r);break;case 27:Ee[14e3]&&(Me[Ee[14e3][0]]=Ee[14e3][1]);break;case 1537:Me[Ee[0]]=Ee[1],Ee[0]==me&&(K=Ee[1]);break}},G);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(U["!ref"]=An(ue),se[ae||K]=U,le.push(ae||K),!Me.length)return{SheetNames:le,Sheets:se};for(var Ae={},ie=[],Z=0;Z<Me.length;++Z)se[le[Z]]?(ie.push(Me[Z]||le[Z]),Ae[Me[Z]]=se[Me[Z]]||se[le[Z]]):(ie.push(Me[Z]),Ae[Me[Z]]={"!ref":"A1"});return{SheetNames:ie,Sheets:Ae}}function a(O,q){var G=q||{};if(+G.codepage>=0&&Vd(+G.codepage),G.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Ql(),K=ha(O["!ref"]),ae=Array.isArray(O),me=[];vr(U,0,i(1030)),vr(U,6,c(K));for(var se=Math.min(K.e.r,8191),le=K.s.r;le<=se;++le)for(var Me=ui(le),ue=K.s.c;ue<=K.e.c;++ue){le===K.s.r&&(me[ue]=Bs(ue));var Ue=me[ue]+Me,Ae=ae?(O[le]||[])[ue]:O[Ue];if(!(!Ae||Ae.t=="z"))if(Ae.t=="n")(Ae.v|0)==Ae.v&&Ae.v>=-32768&&Ae.v<=32767?vr(U,13,m(le,ue,Ae.v)):vr(U,14,v(le,ue,Ae.v));else{var ie=Of(Ae);vr(U,15,f(le,ue,ie.slice(0,239)))}}return vr(U,1),U.end()}function s(O,q){var G=q||{};if(+G.codepage>=0&&Vd(+G.codepage),G.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Ql();vr(U,0,o(O));for(var K=0,ae=0;K<O.SheetNames.length;++K)(O.Sheets[O.SheetNames[K]]||{})["!ref"]&&vr(U,27,X(O.SheetNames[K],ae++));var me=0;for(K=0;K<O.SheetNames.length;++K){var se=O.Sheets[O.SheetNames[K]];if(!(!se||!se["!ref"])){for(var le=ha(se["!ref"]),Me=Array.isArray(se),ue=[],Ue=Math.min(le.e.r,8191),Ae=le.s.r;Ae<=Ue;++Ae)for(var ie=ui(Ae),Z=le.s.c;Z<=le.e.c;++Z){Ae===le.s.r&&(ue[Z]=Bs(Z));var Ee=ue[Z]+ie,we=Me?(se[Ae]||[])[Z]:se[Ee];if(!(!we||we.t=="z"))if(we.t=="n")vr(U,23,B(Ae,Z,me,we.v));else{var Oe=Of(we);vr(U,22,A(Ae,Z,me,Oe.slice(0,239)))}}++me}}return vr(U,1),U.end()}function i(O){var q=qt(2);return q.write_shift(2,O),q}function o(O){var q=qt(26);q.write_shift(2,4096),q.write_shift(2,4),q.write_shift(4,0);for(var G=0,U=0,K=0,ae=0;ae<O.SheetNames.length;++ae){var me=O.SheetNames[ae],se=O.Sheets[me];if(!(!se||!se["!ref"])){++K;var le=Zl(se["!ref"]);G<le.e.r&&(G=le.e.r),U<le.e.c&&(U=le.e.c)}}return G>8191&&(G=8191),q.write_shift(2,G),q.write_shift(1,K),q.write_shift(1,U),q.write_shift(2,0),q.write_shift(2,0),q.write_shift(1,1),q.write_shift(1,2),q.write_shift(4,0),q.write_shift(4,0),q}function l(O,q,G){var U={s:{c:0,r:0},e:{c:0,r:0}};return q==8&&G.qpro?(U.s.c=O.read_shift(1),O.l++,U.s.r=O.read_shift(2),U.e.c=O.read_shift(1),O.l++,U.e.r=O.read_shift(2),U):(U.s.c=O.read_shift(2),U.s.r=O.read_shift(2),q==12&&G.qpro&&(O.l+=2),U.e.c=O.read_shift(2),U.e.r=O.read_shift(2),q==12&&G.qpro&&(O.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(O){var q=qt(8);return q.write_shift(2,O.s.c),q.write_shift(2,O.s.r),q.write_shift(2,O.e.c),q.write_shift(2,O.e.r),q}function d(O,q,G){var U=[{c:0,r:0},{t:"n",v:0},0,0];return G.qpro&&G.vers!=20768?(U[0].c=O.read_shift(1),U[3]=O.read_shift(1),U[0].r=O.read_shift(2),O.l+=2):(U[2]=O.read_shift(1),U[0].c=O.read_shift(2),U[0].r=O.read_shift(2)),U}function u(O,q,G){var U=O.l+q,K=d(O,q,G);if(K[1].t="s",G.vers==20768){O.l++;var ae=O.read_shift(1);return K[1].v=O.read_shift(ae,"utf8"),K}return G.qpro&&O.l++,K[1].v=O.read_shift(U-O.l,"cstr"),K}function f(O,q,G){var U=qt(7+G.length);U.write_shift(1,255),U.write_shift(2,q),U.write_shift(2,O),U.write_shift(1,39);for(var K=0;K<U.length;++K){var ae=G.charCodeAt(K);U.write_shift(1,ae>=128?95:ae)}return U.write_shift(1,0),U}function p(O,q,G){var U=d(O,q,G);return U[1].v=O.read_shift(2,"i"),U}function m(O,q,G){var U=qt(7);return U.write_shift(1,255),U.write_shift(2,q),U.write_shift(2,O),U.write_shift(2,G,"i"),U}function b(O,q,G){var U=d(O,q,G);return U[1].v=O.read_shift(8,"f"),U}function v(O,q,G){var U=qt(13);return U.write_shift(1,255),U.write_shift(2,q),U.write_shift(2,O),U.write_shift(8,G,"f"),U}function g(O,q,G){var U=O.l+q,K=d(O,q,G);if(K[1].v=O.read_shift(8,"f"),G.qpro)O.l=U;else{var ae=O.read_shift(2);N(O.slice(O.l,O.l+ae),K),O.l+=ae}return K}function w(O,q,G){var U=q&32768;return q&=-32769,q=(U?O:0)+(q>=8192?q-16384:q),(U?"":"$")+(G?Bs(q):ui(q))}var y={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function N(O,q){Oo(O,0);for(var G=[],U=0,K="",ae="",me="",se="";O.l<O.length;){var le=O[O.l++];switch(le){case 0:G.push(O.read_shift(8,"f"));break;case 1:ae=w(q[0].c,O.read_shift(2),!0),K=w(q[0].r,O.read_shift(2),!1),G.push(ae+K);break;case 2:{var Me=w(q[0].c,O.read_shift(2),!0),ue=w(q[0].r,O.read_shift(2),!1);ae=w(q[0].c,O.read_shift(2),!0),K=w(q[0].r,O.read_shift(2),!1),G.push(Me+ue+":"+ae+K)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:G.push("("+G.pop()+")");break;case 5:G.push(O.read_shift(2));break;case 6:{for(var Ue="";le=O[O.l++];)Ue+=String.fromCharCode(le);G.push('"'+Ue.replace(/"/g,'""')+'"')}break;case 8:G.push("-"+G.pop());break;case 23:G.push("+"+G.pop());break;case 22:G.push("NOT("+G.pop()+")");break;case 20:case 21:se=G.pop(),me=G.pop(),G.push(["AND","OR"][le-20]+"("+me+","+se+")");break;default:if(le<32&&j[le])se=G.pop(),me=G.pop(),G.push(me+j[le]+se);else if(y[le]){if(U=y[le][1],U==69&&(U=O[O.l++]),U>G.length){console.error("WK1 bad formula parse 0x"+le.toString(16)+":|"+G.join("|")+"|");return}var Ae=G.slice(-U);G.length-=U,G.push(y[le][0]+"("+Ae.join(",")+")")}else return le<=7?console.error("WK1 invalid opcode "+le.toString(16)):le<=24?console.error("WK1 unsupported op "+le.toString(16)):le<=30?console.error("WK1 invalid opcode "+le.toString(16)):le<=115?console.error("WK1 unsupported function opcode "+le.toString(16)):console.error("WK1 unrecognized opcode "+le.toString(16))}}G.length==1?q[1].f=""+G[0]:console.error("WK1 bad formula parse |"+G.join("|")+"|")}function S(O){var q=[{c:0,r:0},{t:"n",v:0},0];return q[0].r=O.read_shift(2),q[3]=O[O.l++],q[0].c=O[O.l++],q}function E(O,q){var G=S(O);return G[1].t="s",G[1].v=O.read_shift(q-4,"cstr"),G}function A(O,q,G,U){var K=qt(6+U.length);K.write_shift(2,O),K.write_shift(1,G),K.write_shift(1,q),K.write_shift(1,39);for(var ae=0;ae<U.length;++ae){var me=U.charCodeAt(ae);K.write_shift(1,me>=128?95:me)}return K.write_shift(1,0),K}function P(O,q){var G=S(O);G[1].v=O.read_shift(2);var U=G[1].v>>1;if(G[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return G[1].v=U,G}function I(O,q){var G=S(O),U=O.read_shift(4),K=O.read_shift(4),ae=O.read_shift(2);if(ae==65535)return U===0&&K===3221225472?(G[1].t="e",G[1].v=15):U===0&&K===3489660928?(G[1].t="e",G[1].v=42):G[1].v=0,G;var me=ae&32768;return ae=(ae&32767)-16446,G[1].v=(1-me*2)*(K*Math.pow(2,ae+32)+U*Math.pow(2,ae)),G}function B(O,q,G,U){var K=qt(14);if(K.write_shift(2,O),K.write_shift(1,G),K.write_shift(1,q),U==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var ae=0,me=0,se=0,le=0;return U<0&&(ae=1,U=-U),me=Math.log2(U)|0,U/=Math.pow(2,me-31),le=U>>>0,(le&2147483648)==0&&(U/=2,++me,le=U>>>0),U-=le,le|=2147483648,le>>>=0,U*=Math.pow(2,32),se=U>>>0,K.write_shift(4,se),K.write_shift(4,le),me+=16383+(ae?32768:0),K.write_shift(2,me),K}function T(O,q){var G=I(O);return O.l+=q-14,G}function _(O,q){var G=S(O),U=O.read_shift(4);return G[1].v=U>>6,G}function R(O,q){var G=S(O),U=O.read_shift(8,"f");return G[1].v=U,G}function z(O,q){var G=R(O);return O.l+=q-10,G}function H(O,q){return O[O.l+q-1]==0?O.read_shift(q,"cstr"):""}function Y(O,q){var G=O[O.l++];G>q-1&&(G=q-1);for(var U="";U.length<G;)U+=String.fromCharCode(O[O.l++]);return U}function J(O,q,G){if(!(!G.qpro||q<21)){var U=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var K=O.read_shift(q-21,"cstr");return[U,K]}}function re(O,q){for(var G={},U=O.l+q;O.l<U;){var K=O.read_shift(2);if(K==14e3){for(G[K]=[0,""],G[K][0]=O.read_shift(2);O[O.l];)G[K][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return G}function X(O,q){var G=qt(5+O.length);G.write_shift(2,14e3),G.write_shift(2,q);for(var U=0;U<O.length;++U){var K=O.charCodeAt(U);G[G.l++]=K>127?95:K}return G[G.l++]=0,G}var te={0:{n:"BOF",f:ki},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:b},15:{n:"LABEL",f:u},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f:u},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:H},222:{n:"SHEETNAMELP",f:Y},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:E},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:P},25:{n:"FORMULA19",f:T},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:re},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:_},38:{n:"??"},39:{n:"NUMBER27",f:R},40:{n:"FORMULA28",f:z},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:H},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:J},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:a,book_to_wk3:s,to_workbook:t}})();function ofe(e){var t={},r=e.match(hl),a=0,s=!1;if(r)for(;a!=r.length;++a){var i=yn(r[a]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=g3[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var lfe=(function(){var e=sg("t"),t=sg("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:ua(o[1])},c=i.match(t);return c&&(l.s=ofe(c[1])),l}var a=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(a,"").split(s).map(r).filter(function(l){return l.v})}})(),cfe=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function a(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(a).join("")}})(),dfe=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,ufe=/<(?:\w+:)?r>/,ffe=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function q3(e,t){var r=t?t.cellHTML:!0,a={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(a.t=ua(Wa(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),a.r=Wa(e),r&&(a.h=C3(a.t))):e.match(ufe)&&(a.r=Wa(e),a.t=ua(Wa((e.replace(ffe,"").match(dfe)||[]).join("").replace(hl,""))),r&&(a.h=cfe(lfe(a.r)))),a):{t:""}}var hfe=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,mfe=/<(?:\w+:)?(?:si|sstItem)>/g,pfe=/<\/(?:\w+:)?(?:si|sstItem)>/;function xfe(e,t){var r=[],a="";if(!e)return r;var s=e.match(hfe);if(s){a=s[2].replace(mfe,"").split(pfe);for(var i=0;i!=a.length;++i){var o=q3(a[i].trim(),t);o!=null&&(r[r.length]=o)}s=yn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var gfe=/^\s|\s$|[\t\n\r]/;function YR(e,t){if(!t.bookSST)return"";var r=[hi];r[r.length]=hr("sst",null,{xmlns:qh[0],count:e.Count,uniqueCount:e.Unique});for(var a=0;a!=e.length;++a)if(e[a]!=null){var s=e[a],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(gfe)&&(i+=' xml:space="preserve"'),i+=">"+Ia(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function vfe(e){return[e.read_shift(4),e.read_shift(4)]}function bfe(e,t){var r=[],a=!1;return Ff(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:a=!0;break;case 36:a=!1;break;default:if(o.T,!a||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function yfe(e,t){return t||(t=qt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var wfe=Oce;function Nfe(e){var t=Ql();Xt(t,159,yfe(e));for(var r=0;r<e.length;++r)Xt(t,19,wfe(e[r]));return Xt(t,160),t.end()}function QR(e){for(var t=[],r=e.split(""),a=0;a<r.length;++a)t[a]=r[a].charCodeAt(0);return t}function _f(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function jfe(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=_f(e,4),t.U=_f(e,4),t.W=_f(e,4),t}function kfe(e){for(var t=e.read_shift(4),r=e.l+t-4,a={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(a.name=e.read_shift(0,"lpp4"),a.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return a}function Sfe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(kfe(e));return t}function _fe(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function Cfe(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=_f(e,4),t.U=_f(e,4),t.W=_f(e,4),t}function Afe(e){var t=Cfe(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function JR(e,t){var r=e.l+t,a={};a.Flags=e.read_shift(4)&63,e.l+=4,a.AlgID=e.read_shift(4);var s=!1;switch(a.AlgID){case 26126:case 26127:case 26128:s=a.Flags==36;break;case 26625:s=a.Flags==4;break;case 0:s=a.Flags==16||a.Flags==4||a.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+a.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return a.AlgIDHash=e.read_shift(4),a.KeySize=e.read_shift(4),a.ProviderType=e.read_shift(4),e.l+=8,a.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,a}function ZR(e,t){var r={},a=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,a),e.l=a,r}function Efe(e){var t=_f(e);switch(t.Minor){case 2:return[t.Minor,Tfe(e)];case 3:return[t.Minor,Ofe()];case 4:return[t.Minor,Pfe(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Tfe(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),a=JR(e,r),s=ZR(e,e.length-e.l);return{t:"Std",h:a,v:s}}function Ofe(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Pfe(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),a={};return r.replace(hl,function(i){var o=yn(i);switch(Uu(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){a[l]=o[l]});break;case"<dataIntegrity":a.encryptedHmacKey=o.encryptedHmacKey,a.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":a.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":a.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":a.encs.push(o);break;default:throw o[0]}}),a}function Ife(e,t){var r={},a=r.EncryptionVersionInfo=_f(e,4);if(t-=4,a.Minor!=2)throw new Error("unrecognized minor version code: "+a.Minor);if(a.Major>4||a.Major<2)throw new Error("unrecognized major version code: "+a.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=JR(e,s),t-=s,r.EncryptionVerifier=ZR(e,t),r}function Dfe(e){var t={},r=t.EncryptionVersionInfo=_f(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function $3(e){var t=0,r,a=QR(e),s=a.length+1,i,o,l,c,d;for(r=N0(s),r[0]=a.length,i=1;i!=s;++i)r[i]=a[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var e9=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],a=function(o){return(o/2|o*128)&255},s=function(o,l){return a(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var u=o[d],f=0;f!=7;++f)u&64&&(l^=r[c]),u*=2,--c;return l};return function(o){for(var l=QR(o),c=i(l),d=l.length,u=N0(16),f=0;f!=16;++f)u[f]=0;var p,m,b;for((d&1)===1&&(p=c>>8,u[d]=s(e[0],p),--d,p=c&255,m=l[l.length-1],u[d]=s(m,p));d>0;)--d,p=c>>8,u[d]=s(l[d],p),--d,p=c&255,u[d]=s(l[d],p);for(d=15,b=15-l.length;b>0;)p=c>>8,u[d]=s(e[b],p),--d,--b,p=c&255,u[d]=s(l[d],p),--d,--b;return u}})(),Lfe=function(e,t,r,a,s){s||(s=t),a||(a=e9(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=a[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,a]},Ffe=function(e){var t=0,r=e9(e);return function(a){var s=Lfe("",a,t,r);return t=s[1],s[0]}};function Mfe(e,t,r,a){var s={key:ki(e),verificationBytes:ki(e)};return r.password&&(s.verifier=$3(r.password)),a.valid=s.verificationBytes===s.verifier,a.valid&&(a.insitu=Ffe(r.password)),s}function Rfe(e,t,r){var a=r||{};return a.Info=e.read_shift(2),e.l-=2,a.Info===1?a.Data=Dfe(e):a.Data=Ife(e,t),a}function Bfe(e,t,r){var a={Type:r.biff>=8?e.read_shift(2):0};return a.Type?Rfe(e,t-2,a):Mfe(e,r.biff>=8?t:t-2,r,a),a}var t9=(function(){function e(s,i){switch(i.type){case"base64":return t(Cc(s),i);case"binary":return t(s,i);case"buffer":return t(Rn&&Buffer.isBuffer(s)?s.toString("binary"):L0(s),i);case"array":return t(Oh(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(u,f){Array.isArray(l)&&(l[f]=[]);for(var p=/\\\w+\b/g,m=0,b,v=-1;b=p.exec(u);){switch(b[0]){case"\\cell":var g=u.slice(m,p.lastIndex-b[0].length);if(g[0]==" "&&(g=g.slice(1)),++v,g.length){var w={v:g,t:"s"};Array.isArray(l)?l[f][v]=w:l[gn({r:f,c:v})]=w}break}m=p.lastIndex}v>d.e.c&&(d.e.c=v)}),l["!ref"]=An(d),l}function r(s,i){return F0(e(s,i),i)}function a(s){for(var i=["{\\rtf1\\ansi"],o=ha(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var u=o.s.c;u<=o.e.c;++u)i.push("\\cellx"+(u+1));for(i.push("\\pard\\intbl"),u=o.s.c;u<=o.e.c;++u){var f=gn({r:d,c:u});l=c?(s[d]||[])[u]:s[f],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Of(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:a}})();function Ufe(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function cg(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function qfe(e){var t=e[0]/255,r=e[1]/255,a=e[2]/255,s=Math.max(t,r,a),i=Math.min(t,r,a),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-a)/o+6)%6;break;case r:l=(a-t)/o+2;break;case a:l=(t-r)/o+4;break}return[l/6,c,d/2]}function $fe(e){var t=e[0],r=e[1],a=e[2],s=r*2*(a<.5?a:1-a),i=a-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function Sb(e,t){if(t===0)return e;var r=qfe(Ufe(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),cg($fe(r))}var r9=6,zfe=15,Hfe=1,ol=r9;function dg(e){return Math.floor((e+Math.round(128/ol)/256)*ol)}function ug(e){return Math.floor((e-5)/ol*100+.5)/100}function _b(e){return Math.round((e*ol+5)/ol*256)/256}function _j(e){return _b(ug(dg(e)))}function z3(e){var t=Math.abs(e-_j(e)),r=ol;if(t>.005)for(ol=Hfe;ol<zfe;++ol)Math.abs(e-_j(e))<=t&&(t=Math.abs(e-_j(e)),r=ol);ol=r}function j0(e){e.width?(e.wpx=dg(e.width),e.wch=ug(e.wpx),e.MDW=ol):e.wpx?(e.wch=ug(e.wpx),e.width=_b(e.wch),e.MDW=ol):typeof e.wch=="number"&&(e.width=_b(e.wch),e.wpx=dg(e.width),e.MDW=ol),e.customWidth&&delete e.customWidth}var Wfe=96,n9=Wfe;function fg(e){return e*96/n9}function np(e){return e*n9/96}var Gfe={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Vfe(e,t,r,a){t.Borders=[];var s={},i=!1;(e[0].match(hl)||[]).forEach(function(o){var l=yn(o);switch(Uu(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=ms(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=ms(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function Kfe(e,t,r,a){t.Fills=[];var s={},i=!1;(e[0].match(hl)||[]).forEach(function(o){var l=yn(o);switch(Uu(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function Xfe(e,t,r,a){t.Fonts=[];var s={},i=!1;(e[0].match(hl)||[]).forEach(function(o){var l=yn(o);switch(Uu(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Wa(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?ms(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?ms(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?ms(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?ms(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?ms(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?ms(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?ms(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=g3[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=ms(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=xh[s.color.index];s.color.index==81&&(c=xh[1]),c||(c=xh[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=Sb(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(a&&a.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Yfe(e,t,r){t.NumberFmt=[];for(var a=Js(dn),s=0;s<a.length;++s)t.NumberFmt[a[s]]=dn[a[s]];var i=e[0].match(hl);if(i)for(s=0;s<i.length;++s){var o=yn(i[s]);switch(Uu(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=ua(Wa(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Sf(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function Qfe(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var a=r[0];a<=r[1];++a)e[a]!=null&&(t[t.length]=hr("numFmt",null,{numFmtId:a,formatCode:Ia(e[a])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=hr("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Mv=["numFmtId","fillId","fontId","borderId","xfId"],Rv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Jfe(e,t,r){t.CellXf=[];var a,s=!1;(e[0].match(hl)||[]).forEach(function(i){var o=yn(i),l=0;switch(Uu(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(a=o,delete a[0],l=0;l<Mv.length;++l)a[Mv[l]]&&(a[Mv[l]]=parseInt(a[Mv[l]],10));for(l=0;l<Rv.length;++l)a[Rv[l]]&&(a[Rv[l]]=ms(a[Rv[l]]));if(t.NumberFmt&&a.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[a.numFmtId]==t.NumberFmt[l]){a.numFmtId=l;break}}t.CellXf.push(a);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=ms(o.wrapText)),a.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function Zfe(e){var t=[];return t[t.length]=hr("cellXfs",null),e.forEach(function(r){t[t.length]=hr("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=hr("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var e0e=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,a=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var u={};if(!l)return u;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var f;return(f=l.match(t))&&Yfe(f,u,d),(f=l.match(s))&&Xfe(f,u,c,d),(f=l.match(a))&&Kfe(f,u,c,d),(f=l.match(i))&&Vfe(f,u,c,d),(f=l.match(r))&&Jfe(f,u,d),u}})();function a9(e,t){var r=[hi,hr("styleSheet",null,{xmlns:qh[0],"xmlns:vt":Ui.vt})],a;return e.SSF&&(a=Qfe(e.SSF))!=null&&(r[r.length]=a),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(a=Zfe(t.cellXfs))&&(r[r.length]=a),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function t0e(e,t){var r=e.read_shift(2),a=ul(e);return[r,a]}function r0e(e,t,r){r||(r=qt(6+4*t.length)),r.write_shift(2,e),uo(t,r);var a=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),a}function n0e(e,t,r){var a={};a.sz=e.read_shift(2)/20;var s=Rce(e);s.fItalic&&(a.italic=1),s.fCondense&&(a.condense=1),s.fExtend&&(a.extend=1),s.fShadow&&(a.shadow=1),s.fOutline&&(a.outline=1),s.fStrikeout&&(a.strike=1);var i=e.read_shift(2);switch(i===700&&(a.bold=1),e.read_shift(2)){case 1:a.vertAlign="superscript";break;case 2:a.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(a.underline=o);var l=e.read_shift(1);l>0&&(a.family=l);var c=e.read_shift(1);switch(c>0&&(a.charset=c),e.l++,a.color=Mce(e),e.read_shift(1)){case 1:a.scheme="major";break;case 2:a.scheme="minor";break}return a.name=ul(e),a}function a0e(e,t){t||(t=qt(153)),t.write_shift(2,e.sz*20),Bce(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),Nb(e.color,t);var a=0;return a=2,t.write_shift(1,a),uo(e.name,t),t.length>t.l?t.slice(0,t.l):t}var s0e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],Cj,i0e=fl;function RD(e,t){t||(t=qt(84)),Cj||(Cj=yy(s0e));var r=Cj[e.patternType];r==null&&(r=40),t.write_shift(4,r);var a=0;if(r!=40)for(Nb({auto:1},t),Nb({auto:1},t);a<12;++a)t.write_shift(4,0);else{for(;a<4;++a)t.write_shift(4,0);for(;a<12;++a)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function o0e(e,t){var r=e.l+t,a=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:a,numFmtId:s}}function s9(e,t,r){r||(r=qt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var a=0;return r.write_shift(1,a),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function zp(e,t){return t||(t=qt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var l0e=fl;function c0e(e,t){return t||(t=qt(51)),t.write_shift(1,0),zp(null,t),zp(null,t),zp(null,t),zp(null,t),zp(null,t),t.length>t.l?t.slice(0,t.l):t}function d0e(e,t){return t||(t=qt(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),wb(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function u0e(e,t,r){var a=qt(2052);return a.write_shift(4,e),wb(t,a),wb(r,a),a.length>a.l?a.slice(0,a.l):a}function f0e(e,t,r){var a={};a.NumberFmt=[];for(var s in dn)a.NumberFmt[s]=dn[s];a.CellXf=[],a.Fonts=[];var i=[],o=!1;return Ff(e,function(c,d,u){switch(u){case 44:a.NumberFmt[c[0]]=c[1],Sf(c[1],c[0]);break;case 43:a.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=Sb(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&a.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(u),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(u);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+u.toString(16))}}),a}function h0e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&++r}),r!=0&&(Xt(e,615,eu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&Xt(e,44,r0e(s,t[s]))}),Xt(e,616))}}function m0e(e){var t=1;Xt(e,611,eu(t)),Xt(e,43,a0e({sz:12,color:{theme:1},name:"Calibri",family:2})),Xt(e,612)}function p0e(e){var t=2;Xt(e,603,eu(t)),Xt(e,45,RD({patternType:"none"})),Xt(e,45,RD({patternType:"gray125"})),Xt(e,604)}function x0e(e){var t=1;Xt(e,613,eu(t)),Xt(e,46,c0e()),Xt(e,614)}function g0e(e){var t=1;Xt(e,626,eu(t)),Xt(e,47,s9({numFmtId:0},65535)),Xt(e,627)}function v0e(e,t){Xt(e,617,eu(t.length)),t.forEach(function(r){Xt(e,47,s9(r,0))}),Xt(e,618)}function b0e(e){var t=1;Xt(e,619,eu(t)),Xt(e,48,d0e({xfId:0,name:"Normal"})),Xt(e,620)}function y0e(e){var t=0;Xt(e,505,eu(t)),Xt(e,506)}function w0e(e){var t=0;Xt(e,508,u0e(t,"TableStyleMedium9","PivotStyleMedium4")),Xt(e,509)}function N0e(e,t){var r=Ql();return Xt(r,278),h0e(r,e.SSF),m0e(r),p0e(r),x0e(r),g0e(r),v0e(r,t.cellXfs),b0e(r),y0e(r),w0e(r),Xt(r,279),r.end()}var j0e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function k0e(e,t,r){t.themeElements.clrScheme=[];var a={};(e[0].match(hl)||[]).forEach(function(s){var i=yn(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":a.rgb=i.val;break;case"<a:sysClr":a.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[j0e.indexOf(i[0])]=a,a={}):a.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function S0e(){}function _0e(){}var C0e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,A0e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,E0e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function T0e(e,t,r){t.themeElements={};var a;[["clrScheme",C0e,k0e],["fontScheme",A0e,S0e],["fmtScheme",E0e,_0e]].forEach(function(s){if(!(a=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](a,t,r)})}var O0e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function i9(e,t){(!e||e.length===0)&&(e=H3());var r,a={};if(!(r=e.match(O0e)))throw new Error("themeElements not found in theme");return T0e(r[0],a,t),a.raw=e,a}function H3(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[hi];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function P0e(e,t,r){var a=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=a;return}var i=e.slice(e.l);e.l=a;var o;try{o=JM(i,{type:"array"})}catch{return}var l=Nc(o,"theme/theme/theme1.xml",!0);if(l)return i9(l,r)}}function I0e(e){return e.read_shift(4)}function D0e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=L0e(e,4);break;case 2:t.xclrValue=BR(e);break;case 3:t.xclrValue=I0e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function L0e(e,t){return fl(e,t)}function F0e(e,t){return fl(e,t)}function M0e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,a=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:a[1]=D0e(e);break;case 6:a[1]=F0e(e,r);break;case 14:case 15:a[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return a}function R0e(e,t){var r=e.l+t;e.l+=2;var a=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(M0e(e,r-e.l));return{ixfe:a,ext:i}}function B0e(e,t){t.forEach(function(r){r[0]})}function U0e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:ul(e)}}function q0e(e){var t=qt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),uo(e.name,t),t.slice(0,t.l)}function $0e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function z0e(e){var t=qt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function H0e(e,t){var r=qt(8+2*t.length);return r.write_shift(4,e),uo(t,r),r.slice(0,r.l)}function W0e(e){return e.l+=4,e.read_shift(4)!=0}function G0e(e,t){var r=qt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function V0e(e,t,r){var a={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Ff(e,function(c,d,u){switch(u){case 335:a.Types.push({name:c.name});break;case 51:c.forEach(function(f){l==1?a.Cell.push({type:a.Types[f[0]-1].name,index:f[1]}):l==0&&a.Value.push({type:a.Types[f[0]-1].name,index:f[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(u),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}}),a}function K0e(){var e=Ql();return Xt(e,332),Xt(e,334,eu(1)),Xt(e,335,q0e({name:"XLDAPR",version:12e4,flags:3496657072})),Xt(e,336),Xt(e,339,H0e(1,"XLDAPR")),Xt(e,52),Xt(e,35,eu(514)),Xt(e,4096,eu(0)),Xt(e,4097,ed(1)),Xt(e,36),Xt(e,53),Xt(e,340),Xt(e,337,G0e(1)),Xt(e,51,z0e([[1,0]])),Xt(e,338),Xt(e,333),e.end()}function X0e(e,t,r){var a={Types:[],Cell:[],Value:[]};if(!e)return a;var s=!1,i=2,o;return e.replace(hl,function(l){var c=yn(l);switch(Uu(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":a.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<a.Types.length;++d)a.Types[d].name==c.name&&(o=a.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?a.Cell.push({type:a.Types[c.t-1].name,index:+c.v}):i==0&&a.Value.push({type:a.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),a}function o9(){var e=[hi];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Y0e(e){var t=[];if(!e)return t;var r=1;return(e.match(hl)||[]).forEach(function(a){var s=yn(a);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function Q0e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=gn(r);var a=e.read_shift(1);return a&2&&(t.l="1"),a&8&&(t.a="1"),t}function J0e(e,t,r){var a=[];return Ff(e,function(i,o,l){switch(l){case 63:a.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),a}function Z0e(e,t,r,a){if(!e)return e;var s=a||{},i=!1;Ff(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function ehe(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var gm=1024;function l9(e,t){for(var r=[21600,21600],a=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[hr("xml",null,{"xmlns:v":vc.v,"xmlns:o":vc.o,"xmlns:x":vc.x,"xmlns:mv":vc.mv}).replace(/\/>/,">"),hr("o:shapelayout",hr("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),hr("v:shapetype",[hr("v:stroke",null,{joinstyle:"miter"}),hr("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:a})];gm<e*1e3;)gm+=1e3;return t.forEach(function(i){var o=Us(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?hr("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=hr("v:fill",c,l),u={on:"t",obscured:"t"};++gm,s=s.concat(["<v:shape"+ig({id:"_x0000_s"+gm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,hr("v:shadow",null,u),hr("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Po("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Po("x:AutoFill","False"),Po("x:Row",String(o.r)),Po("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function BD(e,t,r,a){var s=Array.isArray(e),i;t.forEach(function(o){var l=Us(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=ha(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=An(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var u={a:o.author,t:o.t,r:o.r,T:r};o.h&&(u.h=o.h);for(var f=i.c.length-1;f>=0;--f){if(!r&&i.c[f].T)return;r&&!i.c[f].T&&i.c.splice(f,1)}if(r&&a){for(f=0;f<a.length;++f)if(u.a==a[f].id){u.a=a[f].name||u.a;break}}i.c.push(u)})}function the(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],a=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=yn(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},u=Us(c.ref);if(!(t.sheetRows&&t.sheetRows<=u.r)){var f=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!f&&!!f[1]&&q3(f[1])||{r:"",t:"",h:""};d.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),d.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=p.h),a.push(d)}}}}),a}function c9(e){var t=[hi,hr("comments",null,{xmlns:qh[0]})],r=[];return t.push("<authors>"),e.forEach(function(a){a[1].forEach(function(s){var i=Ia(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(a){var s=0,i=[];if(a[1][0]&&a[1][0].T&&a[1][0].ID?s=r.indexOf("tc="+a[1][0].ID):a[1].forEach(function(c){c.a&&(s=r.indexOf(Ia(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+a[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(Po("t",Ia(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Po("t",Ia(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function rhe(e,t){var r=[],a=!1,s={},i=0;return e.replace(hl,function(l,c){var d=yn(l);switch(Uu(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":a=!0;break;case"</mentions>":a=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function nhe(e,t,r){var a=[hi,hr("ThreadedComments",null,{xmlns:Ui.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),a.push(hr("threadedComment",Po("text",o.t||""),c))})}),a.push("</ThreadedComments>"),a.join("")}function ahe(e,t){var r=[],a=!1;return e.replace(hl,function(i){var o=yn(i);switch(Uu(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;default:if(!a&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function she(e){var t=[hi,hr("personList",null,{xmlns:Ui.TCMNT,"xmlns:x":qh[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,a){t.push(hr("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+a).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function ihe(e){var t={};t.iauthor=e.read_shift(4);var r=Wh(e);return t.rfx=r.s,t.ref=gn(r.s),e.l+=16,t}function ohe(e,t){return t==null&&(t=qt(36)),t.write_shift(4,e[1].iauthor),gp(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var lhe=ul;function che(e){return uo(e.slice(0,54))}function dhe(e,t){var r=[],a=[],s={},i=!1;return Ff(e,function(l,c,d){switch(d){case 632:a.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=a[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function uhe(e){var t=Ql(),r=[];return Xt(t,628),Xt(t,630),e.forEach(function(a){a[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Xt(t,632,che(s.a)))})}),Xt(t,631),Xt(t,633),e.forEach(function(a){a[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Us(a[0]),e:Us(a[0])};Xt(t,635,ohe([i,s])),s.t&&s.t.length>0&&Xt(t,637,Ice(s)),Xt(t,636),delete s.iauthor})}),Xt(t,634),Xt(t,629),t.end()}var fhe="application/vnd.ms-office.vbaProject";function hhe(e){var t=Zr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,a){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Zr.utils.cfb_add(t,s,e.FileIndex[a].content)}}),Zr.write(t)}function mhe(e,t){t.FullPaths.forEach(function(r,a){if(a!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Zr.utils.cfb_add(e,s,t.FileIndex[a].content)}})}var d9=["xlsb","xlsm","xlam","biff8","xla"];function phe(){return{"!type":"dialog"}}function xhe(){return{"!type":"dialog"}}function ghe(){return{"!type":"macro"}}function vhe(){return{"!type":"macro"}}var Sm=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(a,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,u=o.length>0?parseInt(o,10)|0:0;return l?u+=t.c:--u,c?d+=t.r:--d,s+(l?"":"$")+Bs(u)+(c?"":"$")+ui(d)}return function(s,i){return t=i,s.replace(e,r)}})(),W3=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,G3=(function(){return function(t,r){return t.replace(W3,function(a,s,i,o,l,c){var d=P3(o)-(i?0:r.c),u=O3(c)-(l?0:r.r),f=u==0?"":l?u+1:"["+u+"]",p=d==0?"":i?d+1:"["+d+"]";return s+"R"+f+"C"+p})}})();function u9(e,t){return e.replace(W3,function(r,a,s,i,o,l){return a+(s=="$"?s+i:Bs(P3(i)+t.c))+(o=="$"?o+l:ui(O3(l)+t.r))})}function bhe(e,t,r){var a=Zl(t),s=a.s,i=Us(r),o={r:i.r-s.r,c:i.c-s.c};return u9(e,o)}function yhe(e){return e.length!=1}function UD(e){return e.replace(/_xlfn\./g,"")}function wi(e){e.l+=1}function k0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function f9(e,t,r){var a=2;if(r){if(r.biff>=2&&r.biff<=5)return h9(e);r.biff==12&&(a=4)}var s=e.read_shift(a),i=e.read_shift(a),o=k0(e),l=k0(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function h9(e){var t=k0(e),r=k0(e),a=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:a,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function whe(e,t,r){if(r.biff<8)return h9(e);var a=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=k0(e),o=k0(e);return{s:{r:a,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function m9(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return Nhe(e);var a=e.read_shift(r&&r.biff==12?4:2),s=k0(e);return{r:a,c:s[0],cRel:s[1],rRel:s[2]}}function Nhe(e){var t=k0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function jhe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function khe(e,t,r){var a=r&&r.biff?r.biff:8;if(a>=2&&a<=5)return She(e);var s=e.read_shift(a>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function She(e){var t=e.read_shift(2),r=e.read_shift(1),a=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,a==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:a}}function _he(e,t,r){var a=(e[e.l++]&96)>>5,s=f9(e,r.biff>=2&&r.biff<=5?6:8,r);return[a,s]}function Che(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=f9(e,i,r);return[a,s,o]}function Ahe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[a]}function Ehe(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[a,s]}function The(e,t,r){var a=(e[e.l++]&96)>>5,s=whe(e,t-1,r);return[a,s]}function Ohe(e,t,r){var a=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[a]}function qD(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Phe(e,t,r){e.l+=2;for(var a=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=a;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Ihe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Dhe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=2,[a,e.read_shift(r&&r.biff==2?1:2)]}function Lhe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Fhe(e,t,r){var a=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[a]}function p9(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Mhe(e){return e.read_shift(2),p9(e)}function Rhe(e){return e.read_shift(2),p9(e)}function Bhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=m9(e,0,r);return[a,s]}function Uhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=khe(e,0,r);return[a,s]}function qhe(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=m9(e,0,r);return[a,s,i]}function $he(e,t,r){var a=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[Wme[s],v9[s],a]}function zhe(e,t,r){var a=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[a==88?-1:0,e.read_shift(1)]:Hhe(e);return[s,(i[0]===0?v9:Hme)[i[1]]]}function Hhe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Whe(e,t,r){e.l+=r&&r.biff==2?3:4}function Ghe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var a=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function Vhe(e){return e.l++,Mf[e.read_shift(1)]}function Khe(e){return e.l++,e.read_shift(2)}function Xhe(e){return e.l++,e.read_shift(1)!==0}function Yhe(e){return e.l++,ll(e)}function Qhe(e,t,r){return e.l++,Eg(e,t-1,r)}function Jhe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=si(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Mf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=ll(e);break;case 2:r[1]=Gh(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Zhe(e,t,r){for(var a=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=a;++i)s.push((r.biff==12?Wh:jy)(e));return s}function eme(e,t,r){var a=0,s=0;r.biff==12?(a=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),a=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--a,--s==0&&(s=256));for(var i=0,o=[];i!=a&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=Jhe(e,r.biff);return o}function tme(e,t,r){var a=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[a,0,i]}function rme(e,t,r){if(r.biff==5)return nme(e);var a=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[a,s,i]}function nme(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var a=e.read_shift(2);return e.l+=12,[t,r,a]}function ame(e,t,r){var a=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function sme(e,t,r){var a=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[a,s]}function ime(e,t,r){var a=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[a]}function ome(e,t,r){var a=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[a,s]}var lme=fl,cme=fl,dme=fl;function Og(e,t,r){return e.l+=2,[jhe(e)]}function V3(e){return e.l+=6,[]}var ume=Og,fme=V3,hme=V3,mme=Og;function x9(e){return e.l+=2,[ki(e),e.read_shift(2)&1]}var pme=Og,xme=x9,gme=V3,vme=Og,bme=Og,yme=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function wme(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),a=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=yme[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:a,c:s,C:i}}function Nme(e){return e.l+=2,[e.read_shift(4)]}function jme(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function kme(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function Sme(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function _me(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function Cme(e){return e.l+=4,[0,0]}var $D={1:{n:"PtgExp",f:Ghe},2:{n:"PtgTbl",f:dme},3:{n:"PtgAdd",f:wi},4:{n:"PtgSub",f:wi},5:{n:"PtgMul",f:wi},6:{n:"PtgDiv",f:wi},7:{n:"PtgPower",f:wi},8:{n:"PtgConcat",f:wi},9:{n:"PtgLt",f:wi},10:{n:"PtgLe",f:wi},11:{n:"PtgEq",f:wi},12:{n:"PtgGe",f:wi},13:{n:"PtgGt",f:wi},14:{n:"PtgNe",f:wi},15:{n:"PtgIsect",f:wi},16:{n:"PtgUnion",f:wi},17:{n:"PtgRange",f:wi},18:{n:"PtgUplus",f:wi},19:{n:"PtgUminus",f:wi},20:{n:"PtgPercent",f:wi},21:{n:"PtgParen",f:wi},22:{n:"PtgMissArg",f:wi},23:{n:"PtgStr",f:Qhe},26:{n:"PtgSheet",f:jme},27:{n:"PtgEndSheet",f:kme},28:{n:"PtgErr",f:Vhe},29:{n:"PtgBool",f:Xhe},30:{n:"PtgInt",f:Khe},31:{n:"PtgNum",f:Yhe},32:{n:"PtgArray",f:Ohe},33:{n:"PtgFunc",f:$he},34:{n:"PtgFuncVar",f:zhe},35:{n:"PtgName",f:tme},36:{n:"PtgRef",f:Bhe},37:{n:"PtgArea",f:_he},38:{n:"PtgMemArea",f:ame},39:{n:"PtgMemErr",f:lme},40:{n:"PtgMemNoMem",f:cme},41:{n:"PtgMemFunc",f:sme},42:{n:"PtgRefErr",f:ime},43:{n:"PtgAreaErr",f:Ahe},44:{n:"PtgRefN",f:Uhe},45:{n:"PtgAreaN",f:The},46:{n:"PtgMemAreaN",f:Sme},47:{n:"PtgMemNoMemN",f:_me},57:{n:"PtgNameX",f:rme},58:{n:"PtgRef3d",f:qhe},59:{n:"PtgArea3d",f:Che},60:{n:"PtgRefErr3d",f:ome},61:{n:"PtgAreaErr3d",f:Ehe},255:{}},Ame={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},Eme={1:{n:"PtgElfLel",f:x9},2:{n:"PtgElfRw",f:vme},3:{n:"PtgElfCol",f:ume},6:{n:"PtgElfRwV",f:bme},7:{n:"PtgElfColV",f:mme},10:{n:"PtgElfRadical",f:pme},11:{n:"PtgElfRadicalS",f:gme},13:{n:"PtgElfColS",f:fme},15:{n:"PtgElfColSV",f:hme},16:{n:"PtgElfRadicalLel",f:xme},25:{n:"PtgList",f:wme},29:{n:"PtgSxName",f:Nme},255:{}},Tme={0:{n:"PtgAttrNoop",f:Cme},1:{n:"PtgAttrSemi",f:Fhe},2:{n:"PtgAttrIf",f:Dhe},4:{n:"PtgAttrChoose",f:Phe},8:{n:"PtgAttrGoto",f:Ihe},16:{n:"PtgAttrSum",f:Whe},32:{n:"PtgAttrBaxcel",f:qD},33:{n:"PtgAttrBaxcel",f:qD},64:{n:"PtgAttrSpace",f:Mhe},65:{n:"PtgAttrSpaceSemi",f:Rhe},128:{n:"PtgAttrIfError",f:Lhe},255:{}};function Pg(e,t,r,a){if(a.biff<8)return fl(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=eme(e,0,a),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Zhe(e,r[o][1],a),i.push(r[o][2]);break;case"PtgExp":a&&a.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(fl(e,t)),i}function Ig(e,t,r){for(var a=e.l+t,s,i,o=[];a!=e.l;)t=a-e.l,i=e[e.l],s=$D[i]||$D[Ame[i]],(i===24||i===25)&&(s=(i===24?Eme:Tme)[e[e.l+1]]),!s||!s.f?fl(e,t):o.push([s.n,s.f(e,t,r)]);return o}function Ome(e){for(var t=[],r=0;r<e.length;++r){for(var a=e[r],s=[],i=0;i<a.length;++i){var o=a[i];o?o[0]===2?s.push('"'+o[1].replace(/"/g,'""')+'"'):s.push(o[1]):s.push("")}t.push(s.join(","))}return t.join(";")}var Pme={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function Ime(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function g9(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var a=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!a)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[a[0]][0]){case 357:return s=a[1]==-1?"#REF":e.SheetNames[a[1]],a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[a[0]][0];default:return"SH33TJSSRC"+e[a[0]][0]}switch(e[a[0]][0][0]){case 1025:return s=a[1]==-1?"#REF":e.SheetNames[a[1]]||"SH33TJSERR3",a[1]==a[2]?s:s+":"+e.SheetNames[a[2]];case 14849:return e[a[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[a[0]][0][3]?(s=a[1]==-1?"#REF":e[a[0]][0][3][a[1]]||"SH33TJSERR4",a[1]==a[2]?s:s+":"+e[a[0]][0][3][a[2]]):"SH33TJSERR2"}}function zD(e,t,r){var a=g9(e,t,r);return a=="#REF"?a:Ime(a,r)}function al(e,t,r,a,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,u,f=0,p=0,m,b="";if(!e[0]||!e[0][0])return"";for(var v=-1,g="",w=0,y=e[0].length;w<y;++w){var j=e[0][w];switch(j[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),v>=0){switch(e[0][v][1][0]){case 0:g=Ks(" ",e[0][v][1][1]);break;case 1:g=Ks("\r",e[0][v][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}d=d+g,v=-1}l.push(d+Pme[j[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":u=lx(j[1][1],o,s),l.push(cx(u,i));break;case"PtgRefN":u=r?lx(j[1][1],r,s):j[1][1],l.push(cx(u,i));break;case"PtgRef3d":f=j[1][1],u=lx(j[1][2],o,s),b=zD(a,f,s),l.push(b+"!"+cx(u,i));break;case"PtgFunc":case"PtgFuncVar":var N=j[1][0],S=j[1][1];N||(N=0),N&=127;var E=N==0?[]:l.slice(-N);l.length-=N,S==="User"&&(S=E.shift()),l.push(S+"("+E.join(",")+")");break;case"PtgBool":l.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(j[1]);break;case"PtgNum":l.push(String(j[1]));break;case"PtgStr":l.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(j[1]);break;case"PtgAreaN":m=vD(j[1][1],r?{s:r}:o,s),l.push(jj(m,s));break;case"PtgArea":m=vD(j[1][1],o,s),l.push(jj(m,s));break;case"PtgArea3d":f=j[1][1],m=j[1][2],b=zD(a,f,s),l.push(b+"!"+jj(m,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=j[1][2];var A=(a.names||[])[p-1]||(a[0]||[])[p],P=A?A.Name:"SH33TJSNAME"+String(p);P&&P.slice(0,6)=="_xlfn."&&!s.xlfn&&(P=P.slice(6)),l.push(P);break;case"PtgNameX":var I=j[1][1];p=j[1][2];var B;if(s.biff<=5)I<0&&(I=-I),a[I]&&(B=a[I][p]);else{var T="";if(((a[I]||[])[0]||[])[0]==14849||(((a[I]||[])[0]||[])[0]==1025?a[I][p]&&a[I][p].itab>0&&(T=a.SheetNames[a[I][p].itab-1]+"!"):T=a.SheetNames[p-1]+"!"),a[I]&&a[I][p])T+=a[I][p].Name;else if(a[0]&&a[0][p])T+=a[0][p].Name;else{var _=(g9(a,I,s)||"").split(";;");_[p-1]?T=_[p-1]:T+="SH33TJSERRX"}l.push(T);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var R="(",z=")";if(v>=0){switch(g="",e[0][v][1][0]){case 2:R=Ks(" ",e[0][v][1][1])+R;break;case 3:R=Ks("\r",e[0][v][1][1])+R;break;case 4:z=Ks(" ",e[0][v][1][1])+z;break;case 5:z=Ks("\r",e[0][v][1][1])+z;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}l.push(R+l.pop()+z);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":u={c:j[1][1],r:j[1][0]};var H={c:r.c,r:r.r};if(a.sharedf[gn(u)]){var Y=a.sharedf[gn(u)];l.push(al(Y,o,H,a,s))}else{var J=!1;for(c=0;c!=a.arrayf.length;++c)if(d=a.arrayf[c],!(u.c<d[0].s.c||u.c>d[0].e.c)&&!(u.r<d[0].s.r||u.r>d[0].e.r)){l.push(al(d[1],o,H,a,s)),J=!0;break}J||l.push(j[1])}break;case"PtgArray":l.push("{"+Ome(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=w;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var re=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&re.indexOf(e[0][w][0])==-1){j=e[0][v];var X=!0;switch(j[1][0]){case 4:X=!1;case 0:g=Ks(" ",j[1][1]);break;case 5:X=!1;case 1:g=Ks("\r",j[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}l.push((X?g:"")+l.pop()+(X?"":g)),v=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function Dme(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],fl(e,t-2)];var l=Ig(e,o,r);return t!==o+s&&(i=Pg(e,t-o-s,l,r)),e.l=a,[l,i]}function Lme(e,t,r){var a=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],fl(e,t-2)];var l=Ig(e,o,r);return t!==o+s&&(i=Pg(e,t-o-s,l,r)),e.l=a,[l,i]}function Fme(e,t,r,a){var s=e.l+t,i=Ig(e,a,r),o;return s!==e.l&&(o=Pg(e,s-e.l,i,r)),[i,o]}function Mme(e,t,r){var a=e.l+t,s,i=e.read_shift(2),o=Ig(e,i,r);return i==65535?[[],fl(e,t-2)]:(t!==i+2&&(s=Pg(e,a-i-2,o,r)),[o,s])}function Rme(e){var t;if(gf(e,e.l+6)!==65535)return[ll(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function Bme(e){if(e==null){var t=qt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return Ph(e);return Ph(0)}function Aj(e,t,r){var a=e.l+t,s=qu(e);r.biff==2&&++e.l;var i=Rme(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=Lme(e,a-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function Ume(e,t,r,a,s){var i=Dh(t,r,s),o=Bme(e.v),l=qt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=qt(e.bf.length),u=0;u<e.bf.length;++u)d[u]=e.bf[u];var f=lo([i,o,l,d]);return f}function ky(e,t,r){var a=e.read_shift(4),s=Ig(e,a,r),i=e.read_shift(4),o=i>0?Pg(e,i,s,r):null;return[s,o]}var qme=ky,Sy=ky,$me=ky,zme=ky,Hme={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},v9={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},Wme={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function HD(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function Gme(e){var t="of:="+e.replace(W3,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function Ej(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function Vme(e){return e.replace(/\./,"!")}var ux={},_m={},fx=typeof Map<"u";function K3(e,t,r){var a=0,s=e.length;if(r){if(fx?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=fx?r.get(t):r[t];a<i.length;++a)if(e[i[a]].t===t)return e.Count++,i[a]}}else for(;a<s;++a)if(e[a].t===t)return e.Count++,a;return e[s]={t},e.Count++,e.Unique++,r&&(fx?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function _y(e,t){var r={min:e+1,max:e+1},a=-1;return t.MDW&&(ol=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?a=ug(t.wpx):t.wch!=null&&(a=t.wch),a>-1?(r.width=_b(a),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function bh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function M0(e,t,r){var a=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(a==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Sf(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=a=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===a)return s;return e[i]={numFmtId:a,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function b9(e,t,r,a,s,i){try{a.cellNF&&(e.z=dn[t])}catch(l){if(a.WTF)throw l}if(!(e.t==="z"&&!a.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=gs(e.v)),(!a||a.cellText!==!1)&&e.t!=="z")try{if(dn[t]==null&&Sf(Hle[t]||"General",t),e.t==="e")e.w=e.w||Mf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ag(e.v);else if(e.t==="d"){var o=zi(e.v);(o|0)===o?e.w=o.toString(10):e.w=ag(o)}else{if(e.v===void 0)return"";e.w=Th(e.v,_m)}else e.t==="d"?e.w=fd(t,zi(e.v),_m):e.w=fd(t,e.v,_m)}catch(l){if(a.WTF)throw l}if(a.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=Sb(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),a.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=Sb(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),a.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(a.WTF&&i.Fills)throw l}}}function Kme(e,t,r){if(e&&e["!ref"]){var a=ha(e["!ref"]);if(a.e.c<a.s.c||a.e.r<a.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function Xme(e,t){var r=ha(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=An(r))}var Yme=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Qme=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,Jme=/<(?:\w:)?hyperlink [^>]*>/mg,Zme=/"(\w*:\w*)"/,epe=/<(?:\w:)?col\b[^>]*[\/]?>/g,tpe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,rpe=/<(?:\w:)?pageMargins[^>]*\/>/g,y9=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,npe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,ape=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function spe(e,t,r,a,s,i,o){if(!e)return e;a||(a={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",u="",f=e.match(Qme);f?(d=e.slice(0,f.index),u=e.slice(f.index+f[0].length)):d=u=e;var p=d.match(y9);p?X3(p[0],l,s,r):(p=d.match(npe))&&ope(p[0],p[1]||"",l,s,r);var m=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(m>0){var b=d.slice(m,m+50).match(Zme);b&&Xme(l,b[1])}var v=d.match(ape);v&&v[1]&&ype(v[1],s);var g=[];if(t.cellStyles){var w=d.match(epe);w&&ppe(g,w)}f&&jpe(f[1],l,t,c,i,o);var y=u.match(tpe);y&&(l["!autofilter"]=gpe(y[0]));var j=[],N=u.match(Yme);if(N)for(m=0;m!=N.length;++m)j[m]=ha(N[m].slice(N[m].indexOf('"')+1));var S=u.match(Jme);S&&fpe(l,S,a);var E=u.match(rpe);if(E&&(l["!margins"]=hpe(yn(E[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=An(c)),t.sheetRows>0&&l["!ref"]){var A=ha(l["!ref"]);t.sheetRows<=+A.e.r&&(A.e.r=t.sheetRows-1,A.e.r>c.e.r&&(A.e.r=c.e.r),A.e.r<A.s.r&&(A.s.r=A.e.r),A.e.c>c.e.c&&(A.e.c=c.e.c),A.e.c<A.s.c&&(A.s.c=A.e.c),l["!fullref"]=l["!ref"],l["!ref"]=An(A))}return g.length>0&&(l["!cols"]=g),j.length>0&&(l["!merges"]=j),l}function ipe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+An(e[r])+'"/>';return t+"</mergeCells>"}function X3(e,t,r,a){var s=yn(e);r.Sheets[a]||(r.Sheets[a]={}),s.codeName&&(r.Sheets[a].CodeName=ua(Wa(s.codeName)))}function ope(e,t,r,a,s){X3(e.slice(0,e.indexOf(">")),r,a,s)}function lpe(e,t,r,a,s){var i=!1,o={},l=null;if(a.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=Tu(Ia(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+hr("outlinePr",null,d)}!i&&!l||(s[s.length]=hr("sheetPr",l,o))}var cpe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],dpe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function upe(e){var t={sheet:1};return cpe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),dpe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=$3(e.password).toString(16).toUpperCase()),hr("sheetProtection",null,t)}function fpe(e,t,r){for(var a=Array.isArray(e),s=0;s!=t.length;++s){var i=yn(Wa(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+ua(i.location))):(i.Target="#"+ua(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=ha(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var u=gn({c:d,r:c});a?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[u]||(e[u]={t:"z",v:void 0}),e[u].l=i)}}}function hpe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function mpe(e){return bh(e),hr("pageMargins",null,e)}function ppe(e,t){for(var r=!1,a=0;a!=t.length;++a){var s=yn(t[a],!0);s.hidden&&(s.hidden=ms(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,z3(s.width)),j0(s);i<=o;)e[i++]=vs(s)}}function xpe(e,t){for(var r=["<cols>"],a,s=0;s!=t.length;++s)(a=t[s])&&(r[r.length]=hr("col",null,_y(s,a)));return r[r.length]="</cols>",r.join("")}function gpe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function vpe(e,t,r,a){var s=typeof e.ref=="string"?e.ref:An(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Zl(s);o.s.r==o.e.r&&(o.e.r=Zl(t["!ref"]).e.r,s=An(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==a){c.Ref="'"+r.SheetNames[a]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+s}),hr("autoFilter",null,{ref:s})}var bpe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function ype(e,t){t.Views||(t.Views=[{}]),(e.match(bpe)||[]).forEach(function(r,a){var s=yn(r);t.Views[a]||(t.Views[a]={}),+s.zoomScale&&(t.Views[a].zoom=+s.zoomScale),ms(s.rightToLeft)&&(t.Views[a].RTL=!0)})}function wpe(e,t,r,a){var s={workbookViewId:"0"};return(((a||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=a.Workbook.Views[0].RTL?"1":"0"),hr("sheetViews",hr("sheetView",null,s),{})}function Npe(e,t,r,a){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Mf[e.v];break;case"d":a&&a.cellDates?s=gs(e.v,-1).toISOString():(e=vs(e),e.t="n",s=""+(e.v=zi(gs(e.v)))),typeof e.z>"u"&&(e.z=dn[14]);break;default:s=e.v;break}var l=Po("v",Ia(s)),c={r:t},d=M0(a.cellXfs,e,a);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(a&&a.bookSST){l=Po("v",""+K3(a.Strings,e.v,a.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var u=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=hr("f",Ia(e.f),u)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),hr("c",l,c)}var jpe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,a=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=sg("v"),o=sg("f");return function(c,d,u,f,p,m){for(var b=0,v="",g=[],w=[],y=0,j=0,N=0,S="",E,A,P=0,I=0,B,T,_=0,R=0,z=Array.isArray(m.CellXf),H,Y=[],J=[],re=Array.isArray(d),X=[],te={},W=!1,O=!!u.sheetStubs,q=c.split(t),G=0,U=q.length;G!=U;++G){v=q[G].trim();var K=v.length;if(K!==0){var ae=0;e:for(b=0;b<K;++b)switch(v[b]){case">":if(v[b-1]!="/"){++b;break e}if(u&&u.cellStyles){if(A=yn(v.slice(ae,b),!0),P=A.r!=null?parseInt(A.r,10):P+1,I=-1,u.sheetRows&&u.sheetRows<P)continue;te={},W=!1,A.ht&&(W=!0,te.hpt=parseFloat(A.ht),te.hpx=np(te.hpt)),A.hidden=="1"&&(W=!0,te.hidden=!0),A.outlineLevel!=null&&(W=!0,te.level=+A.outlineLevel),W&&(X[P-1]=te)}break;case"<":ae=b;break}if(ae>=b)break;if(A=yn(v.slice(ae,b),!0),P=A.r!=null?parseInt(A.r,10):P+1,I=-1,!(u.sheetRows&&u.sheetRows<P)){f.s.r>P-1&&(f.s.r=P-1),f.e.r<P-1&&(f.e.r=P-1),u&&u.cellStyles&&(te={},W=!1,A.ht&&(W=!0,te.hpt=parseFloat(A.ht),te.hpx=np(te.hpt)),A.hidden=="1"&&(W=!0,te.hidden=!0),A.outlineLevel!=null&&(W=!0,te.level=+A.outlineLevel),W&&(X[P-1]=te)),g=v.slice(b).split(e);for(var me=0;me!=g.length&&g[me].trim().charAt(0)=="<";++me);for(g=g.slice(me),b=0;b!=g.length;++b)if(v=g[b].trim(),v.length!==0){if(w=v.match(r),y=b,j=0,N=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,w!=null&&w.length===2){for(y=0,S=w[1],j=0;j!=S.length&&!((N=S.charCodeAt(j)-64)<1||N>26);++j)y=26*y+N;--y,I=y}else++I;for(j=0;j!=v.length&&v.charCodeAt(j)!==62;++j);if(++j,A=yn(v.slice(0,j),!0),A.r||(A.r=gn({r:P-1,c:I})),S=v.slice(j),E={t:""},(w=S.match(i))!=null&&w[1]!==""&&(E.v=ua(w[1])),u.cellFormula){if((w=S.match(o))!=null&&w[1]!==""){if(E.f=ua(Wa(w[1])).replace(/\r\n/g,`
`),u.xlfn||(E.f=UD(E.f)),w[0].indexOf('t="array"')>-1)E.F=(S.match(s)||[])[1],E.F.indexOf(":")>-1&&Y.push([ha(E.F),E.F]);else if(w[0].indexOf('t="shared"')>-1){T=yn(w[0]);var se=ua(Wa(w[1]));u.xlfn||(se=UD(se)),J[parseInt(T.si,10)]=[T,se,A.r]}}else(w=S.match(/<f[^>]*\/>/))&&(T=yn(w[0]),J[T.si]&&(E.f=bhe(J[T.si][1],J[T.si][2],A.r)));var le=Us(A.r);for(j=0;j<Y.length;++j)le.r>=Y[j][0].s.r&&le.r<=Y[j][0].e.r&&le.c>=Y[j][0].s.c&&le.c<=Y[j][0].e.c&&(E.F=Y[j][1])}if(A.t==null&&E.v===void 0)if(E.f||E.F)E.v=0,E.t="n";else if(O)E.t="z";else continue;else E.t=A.t||"n";switch(f.s.c>I&&(f.s.c=I),f.e.c<I&&(f.e.c=I),E.t){case"n":if(E.v==""||E.v==null){if(!O)continue;E.t="z"}else E.v=parseFloat(E.v);break;case"s":if(typeof E.v>"u"){if(!O)continue;E.t="z"}else B=ux[parseInt(E.v,10)],E.v=B.t,E.r=B.r,u.cellHTML&&(E.h=B.h);break;case"str":E.t="s",E.v=E.v!=null?Wa(E.v):"",u.cellHTML&&(E.h=C3(E.v));break;case"inlineStr":w=S.match(a),E.t="s",w!=null&&(B=q3(w[1]))?(E.v=B.t,u.cellHTML&&(E.h=B.h)):E.v="";break;case"b":E.v=ms(E.v);break;case"d":u.cellDates?E.v=gs(E.v,1):(E.v=zi(gs(E.v,1)),E.t="n");break;case"e":(!u||u.cellText!==!1)&&(E.w=E.v),E.v=NR[E.v];break}if(_=R=0,H=null,z&&A.s!==void 0&&(H=m.CellXf[A.s],H!=null&&(H.numFmtId!=null&&(_=H.numFmtId),u.cellStyles&&H.fillId!=null&&(R=H.fillId))),b9(E,_,R,u,p,m),u.cellDates&&z&&E.t=="n"&&mp(dn[_])&&(E.t="d",E.v=Ny(E.v)),A.cm&&u.xlmeta){var Me=(u.xlmeta.Cell||[])[+A.cm-1];Me&&Me.type=="XLDAPR"&&(E.D=!0)}if(re){var ue=Us(A.r);d[ue.r]||(d[ue.r]=[]),d[ue.r][ue.c]=E}else d[A.r]=E}}}}X.length>0&&(d["!rows"]=X)}})();function kpe(e,t,r,a){var s=[],i=[],o=ha(e["!ref"]),l="",c,d="",u=[],f=0,p=0,m=e["!rows"],b=Array.isArray(e),v={r:d},g,w=-1;for(p=o.s.c;p<=o.e.c;++p)u[p]=Bs(p);for(f=o.s.r;f<=o.e.r;++f){for(i=[],d=ui(f),p=o.s.c;p<=o.e.c;++p){c=u[p]+d;var y=b?(e[f]||[])[p]:e[c];y!==void 0&&(l=Npe(y,c,e,t))!=null&&i.push(l)}(i.length>0||m&&m[f])&&(v={r:d},m&&m[f]&&(g=m[f],g.hidden&&(v.hidden=1),w=-1,g.hpx?w=fg(g.hpx):g.hpt&&(w=g.hpt),w>-1&&(v.ht=w,v.customHeight=1),g.level&&(v.outlineLevel=g.level)),s[s.length]=hr("row",i.join(""),v))}if(m)for(;f<m.length;++f)m&&m[f]&&(v={r:f+1},g=m[f],g.hidden&&(v.hidden=1),w=-1,g.hpx?w=fg(g.hpx):g.hpt&&(w=g.hpt),w>-1&&(v.ht=w,v.customHeight=1),g.level&&(v.outlineLevel=g.level),s[s.length]=hr("row","",v));return s.join("")}function w9(e,t,r,a){var s=[hi,hr("worksheet",null,{xmlns:qh[0],"xmlns:r":Ui.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",u=ha(d);if(u.e.c>16383||u.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");u.e.c=Math.min(u.e.c,16383),u.e.r=Math.min(u.e.c,1048575),d=An(u)}a||(a={}),c["!comments"]=[];var f=[];lpe(c,r,e,t,s),s[s.length]=hr("dimension",null,{ref:d}),s[s.length]=wpe(c,t,e,r),t.sheetFormat&&(s[s.length]=hr("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=xpe(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=kpe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=upe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=vpe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=ipe(c["!merges"]));var p=-1,m,b=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(v){v[1].Target&&(m={ref:v[0]},v[1].Target.charAt(0)!="#"&&(b=Pa(a,-1,Ia(v[1].Target).replace(/#.*$/,""),zn.HLINK),m["r:id"]="rId"+b),(p=v[1].Target.indexOf("#"))>-1&&(m.location=Ia(v[1].Target.slice(p+1))),v[1].Tooltip&&(m.tooltip=Ia(v[1].Tooltip)),s[s.length]=hr("hyperlink",null,m))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=mpe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Po("ignoredErrors",hr("ignoredError",null,{numberStoredAsText:1,sqref:d}))),f.length>0&&(b=Pa(a,-1,"../drawings/drawing"+(e+1)+".xml",zn.DRAW),s[s.length]=hr("drawing",null,{"r:id":"rId"+b}),c["!drawing"]=f),c["!comments"].length>0&&(b=Pa(a,-1,"../drawings/vmlDrawing"+(e+1)+".vml",zn.VML),s[s.length]=hr("legacyDrawing",null,{"r:id":"rId"+b}),c["!legacy"]=b),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function Spe(e,t){var r={},a=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=a,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function _pe(e,t,r){var a=qt(145),s=(r["!rows"]||[])[e]||{};a.write_shift(4,e),a.write_shift(4,0);var i=320;s.hpx?i=fg(s.hpx)*20:s.hpt&&(i=s.hpt*20),a.write_shift(2,i),a.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),a.write_shift(1,o),a.write_shift(1,0);var l=0,c=a.l;a.l+=4;for(var d={r:e,c:0},u=0;u<16;++u)if(!(t.s.c>u+1<<10||t.e.c<u<<10)){for(var f=-1,p=-1,m=u<<10;m<u+1<<10;++m){d.c=m;var b=Array.isArray(r)?(r[d.r]||[])[d.c]:r[gn(d)];b&&(f<0&&(f=m),p=m)}f<0||(++l,a.write_shift(4,f),a.write_shift(4,p))}var v=a.l;return a.l=c,a.write_shift(4,l),a.l=v,a.length>a.l?a.slice(0,a.l):a}function Cpe(e,t,r,a){var s=_pe(a,r,t);(s.length>17||(t["!rows"]||[])[a])&&Xt(e,0,s)}var Ape=Wh,Epe=gp;function Tpe(){}function Ope(e,t){var r={},a=e[e.l];return++e.l,r.above=!(a&64),r.left=!(a&128),e.l+=18,r.name=Dce(e),r}function Ppe(e,t,r){r==null&&(r=qt(84+4*e.length));var a=192;t&&(t.above&&(a&=-65),t.left&&(a&=-129)),r.write_shift(1,a);for(var s=1;s<3;++s)r.write_shift(1,0);return Nb({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),gR(e,r),r.slice(0,r.l)}function Ipe(e){var t=pd(e);return[t]}function Dpe(e,t,r){return r==null&&(r=qt(8)),$h(t,r)}function Lpe(e){var t=zh(e);return[t]}function Fpe(e,t,r){return r==null&&(r=qt(4)),Hh(t,r)}function Mpe(e){var t=pd(e),r=e.read_shift(1);return[t,r,"b"]}function Rpe(e,t,r){return r==null&&(r=qt(9)),$h(t,r),r.write_shift(1,e.v?1:0),r}function Bpe(e){var t=zh(e),r=e.read_shift(1);return[t,r,"b"]}function Upe(e,t,r){return r==null&&(r=qt(5)),Hh(t,r),r.write_shift(1,e.v?1:0),r}function qpe(e){var t=pd(e),r=e.read_shift(1);return[t,r,"e"]}function $pe(e,t,r){return r==null&&(r=qt(9)),$h(t,r),r.write_shift(1,e.v),r}function zpe(e){var t=zh(e),r=e.read_shift(1);return[t,r,"e"]}function Hpe(e,t,r){return r==null&&(r=qt(8)),Hh(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Wpe(e){var t=pd(e),r=e.read_shift(4);return[t,r,"s"]}function Gpe(e,t,r){return r==null&&(r=qt(12)),$h(t,r),r.write_shift(4,t.v),r}function Vpe(e){var t=zh(e),r=e.read_shift(4);return[t,r,"s"]}function Kpe(e,t,r){return r==null&&(r=qt(8)),Hh(t,r),r.write_shift(4,t.v),r}function Xpe(e){var t=pd(e),r=ll(e);return[t,r,"n"]}function Ype(e,t,r){return r==null&&(r=qt(16)),$h(t,r),Ph(e.v,r),r}function N9(e){var t=zh(e),r=ll(e);return[t,r,"n"]}function Qpe(e,t,r){return r==null&&(r=qt(12)),Hh(t,r),Ph(e.v,r),r}function Jpe(e){var t=pd(e),r=F3(e);return[t,r,"n"]}function Zpe(e,t,r){return r==null&&(r=qt(12)),$h(t,r),vR(e.v,r),r}function exe(e){var t=zh(e),r=F3(e);return[t,r,"n"]}function txe(e,t,r){return r==null&&(r=qt(8)),Hh(t,r),vR(e.v,r),r}function rxe(e){var t=pd(e),r=I3(e);return[t,r,"is"]}function nxe(e){var t=pd(e),r=ul(e);return[t,r,"str"]}function axe(e,t,r){return r==null&&(r=qt(12+4*e.v.length)),$h(t,r),uo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function sxe(e){var t=zh(e),r=ul(e);return[t,r,"str"]}function ixe(e,t,r){return r==null&&(r=qt(8+4*e.v.length)),Hh(t,r),uo(e.v,r),r.length>r.l?r.slice(0,r.l):r}function oxe(e,t,r){var a=e.l+t,s=pd(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=Sy(e,a-e.l,r);o[3]=al(l,null,s,r.supbooks,r)}else e.l=a;return o}function lxe(e,t,r){var a=e.l+t,s=pd(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=Sy(e,a-e.l,r);o[3]=al(l,null,s,r.supbooks,r)}else e.l=a;return o}function cxe(e,t,r){var a=e.l+t,s=pd(e);s.r=r["!row"];var i=ll(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=Sy(e,a-e.l,r);o[3]=al(l,null,s,r.supbooks,r)}else e.l=a;return o}function dxe(e,t,r){var a=e.l+t,s=pd(e);s.r=r["!row"];var i=ul(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=Sy(e,a-e.l,r);o[3]=al(l,null,s,r.supbooks,r)}else e.l=a;return o}var uxe=Wh,fxe=gp;function hxe(e,t){return t==null&&(t=qt(4)),t.write_shift(4,e),t}function mxe(e,t){var r=e.l+t,a=Wh(e),s=D3(e),i=ul(e),o=ul(e),l=ul(e);e.l=r;var c={rfx:a,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function pxe(e,t){var r=qt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));gp({s:Us(e[0]),e:Us(e[0])},r),L3("rId"+t,r);var a=e[1].Target.indexOf("#"),s=a==-1?"":e[1].Target.slice(a+1);return uo(s||"",r),uo(e[1].Tooltip||"",r),uo("",r),r.slice(0,r.l)}function xxe(){}function gxe(e,t,r){var a=e.l+t,s=bR(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=qme(e,a-e.l,r);o[1]=l}else e.l=a;return o}function vxe(e,t,r){var a=e.l+t,s=Wh(e),i=[s];if(r.cellFormula){var o=zme(e,a-e.l,r);i[1]=o,e.l=a}else e.l=a;return i}function bxe(e,t,r){r==null&&(r=qt(18));var a=_y(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(a.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof a.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var j9=["left","right","top","bottom","header","footer"];function yxe(e){var t={};return j9.forEach(function(r){t[r]=ll(e)}),t}function wxe(e,t){return t==null&&(t=qt(48)),bh(e),j9.forEach(function(r){Ph(e[r],t)}),t}function Nxe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function jxe(e,t,r){r==null&&(r=qt(30));var a=924;return(((t||{}).Views||[])[0]||{}).RTL&&(a|=32),r.write_shift(2,a),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function kxe(e){var t=qt(24);return t.write_shift(4,4),t.write_shift(4,1),gp(e,t),t}function Sxe(e,t){return t==null&&(t=qt(66)),t.write_shift(2,e.password?$3(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function _xe(){}function Cxe(){}function Axe(e,t,r,a,s,i,o){if(!e)return e;var l=t||{};a||(a={"!id":{}});var c=l.dense?[]:{},d,u={s:{r:2e6,c:2e6},e:{r:0,c:0}},f=!1,p=!1,m,b,v,g,w,y,j,N,S,E=[];l.biff=12,l["!row"]=0;var A=0,P=!1,I=[],B={},T=l.supbooks||s.supbooks||[[]];if(T.sharedf=B,T.arrayf=I,T.SheetNames=s.SheetNames||s.Sheets.map(function(re){return re.name}),!l.supbooks&&(l.supbooks=T,s.Names))for(var _=0;_<s.Names.length;++_)T[0][_+1]=s.Names[_];var R=[],z=[],H=!1;hg[16]={n:"BrtShortReal",f:N9};var Y;if(Ff(e,function(X,te,W){if(!p)switch(W){case 148:d=X;break;case 0:m=X,l.sheetRows&&l.sheetRows<=m.r&&(p=!0),N=ui(g=m.r),l["!row"]=m.r,(X.hidden||X.hpt||X.level!=null)&&(X.hpt&&(X.hpx=np(X.hpt)),z[X.r]=X);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(b={t:X[2]},X[2]){case"n":b.v=X[1];break;case"s":j=ux[X[1]],b.v=j.t,b.r=j.r;break;case"b":b.v=!!X[1];break;case"e":b.v=X[1],l.cellText!==!1&&(b.w=Mf[b.v]);break;case"str":b.t="s",b.v=X[1];break;case"is":b.t="s",b.v=X[1].t;break}if((v=o.CellXf[X[0].iStyleRef])&&b9(b,v.numFmtId,null,l,i,o),w=X[0].c==-1?w+1:X[0].c,l.dense?(c[g]||(c[g]=[]),c[g][w]=b):c[Bs(w)+N]=b,l.cellFormula){for(P=!1,A=0;A<I.length;++A){var O=I[A];m.r>=O[0].s.r&&m.r<=O[0].e.r&&w>=O[0].s.c&&w<=O[0].e.c&&(b.F=An(O[0]),P=!0)}!P&&X.length>3&&(b.f=X[3])}if(u.s.r>m.r&&(u.s.r=m.r),u.s.c>w&&(u.s.c=w),u.e.r<m.r&&(u.e.r=m.r),u.e.c<w&&(u.e.c=w),l.cellDates&&v&&b.t=="n"&&mp(dn[v.numFmtId])){var q=uh(b.v);q&&(b.t="d",b.v=new Date(q.y,q.m-1,q.d,q.H,q.M,q.S,q.u))}Y&&(Y.type=="XLDAPR"&&(b.D=!0),Y=void 0);break;case 1:case 12:if(!l.sheetStubs||f)break;b={t:"z",v:void 0},w=X[0].c==-1?w+1:X[0].c,l.dense?(c[g]||(c[g]=[]),c[g][w]=b):c[Bs(w)+N]=b,u.s.r>m.r&&(u.s.r=m.r),u.s.c>w&&(u.s.c=w),u.e.r<m.r&&(u.e.r=m.r),u.e.c<w&&(u.e.c=w),Y&&(Y.type=="XLDAPR"&&(b.D=!0),Y=void 0);break;case 176:E.push(X);break;case 49:Y=((l.xlmeta||{}).Cell||[])[X-1];break;case 494:var G=a["!id"][X.relId];for(G?(X.Target=G.Target,X.loc&&(X.Target+="#"+X.loc),X.Rel=G):X.relId==""&&(X.Target="#"+X.loc),g=X.rfx.s.r;g<=X.rfx.e.r;++g)for(w=X.rfx.s.c;w<=X.rfx.e.c;++w)l.dense?(c[g]||(c[g]=[]),c[g][w]||(c[g][w]={t:"z",v:void 0}),c[g][w].l=X):(y=gn({c:w,r:g}),c[y]||(c[y]={t:"z",v:void 0}),c[y].l=X);break;case 426:if(!l.cellFormula)break;I.push(X),S=l.dense?c[g][w]:c[Bs(w)+N],S.f=al(X[1],u,{r:m.r,c:w},T,l),S.F=An(X[0]);break;case 427:if(!l.cellFormula)break;B[gn(X[0].s)]=X[1],S=l.dense?c[g][w]:c[Bs(w)+N],S.f=al(X[1],u,{r:m.r,c:w},T,l);break;case 60:if(!l.cellStyles)break;for(;X.e>=X.s;)R[X.e--]={width:X.w/256,hidden:!!(X.flags&1),level:X.level},H||(H=!0,z3(X.w/256)),j0(R[X.e+1]);break;case 161:c["!autofilter"]={ref:An(X)};break;case 476:c["!margins"]=X;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),X.name&&(s.Sheets[r].CodeName=X.name),(X.above||X.left)&&(c["!outline"]={above:X.above,left:X.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),X.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:f=!0;break;case 36:f=!1;break;case 37:f=!0;break;case 38:f=!1;break;default:if(!te.T){if(!f||l.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(u.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=An(d||u)),l.sheetRows&&c["!ref"]){var J=ha(c["!ref"]);l.sheetRows<=+J.e.r&&(J.e.r=l.sheetRows-1,J.e.r>u.e.r&&(J.e.r=u.e.r),J.e.r<J.s.r&&(J.s.r=J.e.r),J.e.c>u.e.c&&(J.e.c=u.e.c),J.e.c<J.s.c&&(J.s.c=J.e.c),c["!fullref"]=c["!ref"],c["!ref"]=An(J))}return E.length>0&&(c["!merges"]=E),R.length>0&&(c["!cols"]=R),z.length>0&&(c["!rows"]=z),c}function Exe(e,t,r,a,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=vs(t),t.z=t.z||dn[14],t.v=zi(gs(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:a};switch(c.s=M0(s.cellXfs,t,s),t.l&&i["!links"].push([gn(c),t.l]),t.c&&i["!comments"].push([gn(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=K3(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Xt(e,18,Kpe(t,c)):Xt(e,7,Gpe(t,c))):(c.t="str",o?Xt(e,17,ixe(t,c)):Xt(e,6,axe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Xt(e,13,txe(t,c)):Xt(e,2,Zpe(t,c)):o?Xt(e,16,Qpe(t,c)):Xt(e,5,Ype(t,c)),!0;case"b":return c.t="b",o?Xt(e,15,Upe(t,c)):Xt(e,4,Rpe(t,c)),!0;case"e":return c.t="e",o?Xt(e,14,Hpe(t,c)):Xt(e,3,$pe(t,c)),!0}return o?Xt(e,12,Fpe(t,c)):Xt(e,1,Dpe(t,c)),!0}function Txe(e,t,r,a){var s=ha(t["!ref"]||"A1"),i,o="",l=[];Xt(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var u=s.s.r;u<=d;++u){o=ui(u),Cpe(e,t,s,u);var f=!1;if(u<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){u===s.s.r&&(l[p]=Bs(p)),i=l[p]+o;var m=c?(t[u]||[])[p]:t[i];if(!m){f=!1;continue}f=Exe(e,m,u,p,a,t,f)}}Xt(e,146)}function Oxe(e,t){!t||!t["!merges"]||(Xt(e,177,hxe(t["!merges"].length)),t["!merges"].forEach(function(r){Xt(e,176,fxe(r))}),Xt(e,178))}function Pxe(e,t){!t||!t["!cols"]||(Xt(e,390),t["!cols"].forEach(function(r,a){r&&Xt(e,60,bxe(a,r))}),Xt(e,391))}function Ixe(e,t){!t||!t["!ref"]||(Xt(e,648),Xt(e,649,kxe(ha(t["!ref"]))),Xt(e,650))}function Dxe(e,t,r){t["!links"].forEach(function(a){if(a[1].Target){var s=Pa(r,-1,a[1].Target.replace(/#.*$/,""),zn.HLINK);Xt(e,494,pxe(a,s))}}),delete t["!links"]}function Lxe(e,t,r,a){if(t["!comments"].length>0){var s=Pa(a,-1,"../drawings/vmlDrawing"+(r+1)+".vml",zn.VML);Xt(e,551,L3("rId"+s)),t["!legacy"]=s}}function Fxe(e,t,r,a){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:An(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Zl(i);l.s.r==l.e.r&&(l.e.r=Zl(t["!ref"]).e.r,i=An(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==a){d.Ref="'"+r.SheetNames[a]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:a,Ref:"'"+r.SheetNames[a]+"'!"+i}),Xt(e,161,gp(ha(i))),Xt(e,162)}}function Mxe(e,t,r){Xt(e,133),Xt(e,137,jxe(t,r)),Xt(e,138),Xt(e,134)}function Rxe(e,t){t["!protect"]&&Xt(e,535,Sxe(t["!protect"]))}function Bxe(e,t,r,a){var s=Ql(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=ha(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Xt(s,129),(r.vbaraw||o["!outline"])&&Xt(s,147,Ppe(l,o["!outline"])),Xt(s,148,Epe(c)),Mxe(s,o,r.Workbook),Pxe(s,o),Txe(s,o,e,t),Rxe(s,o),Fxe(s,o,r,e),Oxe(s,o),Dxe(s,o,a),o["!margins"]&&Xt(s,476,wxe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Ixe(s,o),Lxe(s,o,e,a),Xt(s,130),s.end()}function Uxe(e){var t=[],r=e.match(/^<c:numCache>/),a;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=ua((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){a=i.replace(/<.*?>/g,"")}),[t,s,a]}function qxe(e,t,r,a,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",u={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(f){var p=Uxe(f);u.s.r=u.s.c=0,u.e.c=l,d=Bs(l),p[0].forEach(function(m,b){o[d+ui(b)]={t:"n",v:m,z:p[1]},c=b}),u.e.r<c&&(u.e.r=c),++l}),l>0&&(o["!ref"]=An(u)),o}function $xe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(y9);return l&&X3(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}function zxe(e,t){e.l+=10;var r=ul(e);return{name:r}}function Hxe(e,t,r,a,s){if(!e)return e;a||(a={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Ff(e,function(c,d,u){switch(u){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}},t),a["!id"][i["!rel"]]&&(i["!drawel"]=a["!id"][i["!rel"]]),i}var Y3=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Wxe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Gxe=[],Vxe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function WD(e,t){for(var r=0;r!=e.length;++r)for(var a=e[r],s=0;s!=t.length;++s){var i=t[s];if(a[i[0]]==null)a[i[0]]=i[1];else switch(i[2]){case"bool":typeof a[i[0]]=="string"&&(a[i[0]]=ms(a[i[0]]));break;case"int":typeof a[i[0]]=="string"&&(a[i[0]]=parseInt(a[i[0]],10));break}}}function GD(e,t){for(var r=0;r!=t.length;++r){var a=t[r];if(e[a[0]]==null)e[a[0]]=a[1];else switch(a[2]){case"bool":typeof e[a[0]]=="string"&&(e[a[0]]=ms(e[a[0]]));break;case"int":typeof e[a[0]]=="string"&&(e[a[0]]=parseInt(e[a[0]],10));break}}}function k9(e){GD(e.WBProps,Y3),GD(e.CalcPr,Vxe),WD(e.WBView,Wxe),WD(e.Sheets,Gxe),_m.date1904=ms(e.WBProps.date1904)}function Kxe(e){return!e.Workbook||!e.Workbook.WBProps?"false":ms(e.Workbook.WBProps.date1904)?"true":"false"}var Xxe="][*?/\\".split("");function S9(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Xxe.forEach(function(a){if(e.indexOf(a)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Yxe(e,t,r){e.forEach(function(a,s){S9(a);for(var i=0;i<s;++i)if(a==e[i])throw new Error("Duplicate Sheet Name: "+a);if(r){var o=t&&t[s]&&t[s].CodeName||a;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function Qxe(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Yxe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)Kme(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var Jxe=/<\w+:workbook/;function Zxe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},a=!1,s="xmlns",i={},o=0;if(e.replace(hl,function(c,d){var u=yn(c);switch(Uu(u[0])){case"<?xml":break;case"<workbook":c.match(Jxe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=u[s];break;case"</workbook>":break;case"<fileVersion":delete u[0],r.AppVersion=u;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":Y3.forEach(function(f){if(u[f[0]]!=null)switch(f[2]){case"bool":r.WBProps[f[0]]=ms(u[f[0]]);break;case"int":r.WBProps[f[0]]=parseInt(u[f[0]],10);break;default:r.WBProps[f[0]]=u[f[0]]}}),u.codeName&&(r.WBProps.CodeName=Wa(u.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete u[0],r.WBView.push(u);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(u.state){case"hidden":u.Hidden=1;break;case"veryHidden":u.Hidden=2;break;default:u.Hidden=0}delete u.state,u.name=ua(Wa(u.name)),delete u[0],r.Sheets.push(u);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":a=!0;break;case"</definedNames>":a=!1;break;case"<definedName":i={},i.Name=Wa(u.name),u.comment&&(i.Comment=u.comment),u.localSheetId&&(i.Sheet=+u.localSheetId),ms(u.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=ua(Wa(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete u[0],r.CalcPr=u;break;case"<calcPr/>":delete u[0],r.CalcPr=u;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":a=!0;break;case"</ext>":a=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":a=!0;break;case"</AlternateContent>":a=!1;break;case"<revisionPtr":break;default:if(!a&&t.WTF)throw new Error("unrecognized "+u[0]+" in workbook")}return c}),qh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return k9(r),r}function _9(e){var t=[hi];t[t.length]=hr("workbook",null,{xmlns:qh[0],"xmlns:r":Ui.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,a={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(Y3.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(a[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(a.codeName=e.Workbook.WBProps.CodeName,delete a.CodeName)),t[t.length]=hr("workbookPr",null,a);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Ia(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=hr("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=hr("definedName",Ia(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function ege(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=Tk(e),r.name=ul(e),r}function tge(e,t){return t||(t=qt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),L3(e.strRelID,t),uo(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function rge(e,t){var r={},a=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?ul(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(a&65536),r.backupFile=!!(a&64),r.checkCompatibility=!!(a&4096),r.date1904=!!(a&1),r.filterPrivacy=!!(a&8),r.hidePivotFieldList=!!(a&1024),r.promptedSolutions=!!(a&16),r.publishItems=!!(a&2048),r.refreshAllConnections=!!(a&262144),r.saveExternalLinkValues=!!(a&128),r.showBorderUnselectedTables=!!(a&4),r.showInkAnnotation=!!(a&32),r.showObjects=["all","placeholders","none"][a>>13&3],r.showPivotChartFilter=!!(a&32768),r.updateLinks=["userSet","never","always"][a>>8&3],r}function nge(e,t){t||(t=qt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),gR(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function age(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function sge(e,t,r){var a=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Lce(e),o=$me(e,0,r),l=D3(e);e.l=a;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function ige(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},a=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],hg[16]={n:"BrtFRTArchID$",f:age},Ff(e,function(c,d,u){switch(u){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=al(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([u,c]):o[0]=[u,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:a.push(u),s=!0;break;case 36:a.pop(),s=!1;break;case 37:a.push(u),s=!0;break;case 38:a.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&a[a.length-1]!=37&&a[a.length-1]!=35)throw new Error("Unexpected record 0x"+u.toString(16))}}},t),k9(r),r.Names=i,r.supbooks=o,r}function oge(e,t){Xt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var a=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:a,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Xt(e,156,tge(s))}Xt(e,144)}function lge(e,t){t||(t=qt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return uo("SheetJS",t),uo(pb.version,t),uo(pb.version,t),uo("7262",t),t.length>t.l?t.slice(0,t.l):t}function cge(e,t){t||(t=qt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function dge(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,a=0,s=-1,i=-1;a<r.length;++a)!r[a]||!r[a].Hidden&&s==-1?s=a:r[a].Hidden==1&&i==-1&&(i=a);i>s||(Xt(e,135),Xt(e,158,cge(s)),Xt(e,136))}}function uge(e,t){var r=Ql();return Xt(r,131),Xt(r,128,lge()),Xt(r,153,nge(e.Workbook&&e.Workbook.WBProps||null)),dge(r,e),oge(r,e),Xt(r,132),r.end()}function fge(e,t,r){return t.slice(-4)===".bin"?ige(e,r):Zxe(e,r)}function hge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Axe(e,a,r,s,i,o,l):spe(e,a,r,s,i,o,l)}function mge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?Hxe(e,a,r,s,i):$xe(e,a,r,s,i)}function pge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?ghe():vhe()}function xge(e,t,r,a,s,i,o,l){return t.slice(-4)===".bin"?phe():xhe()}function gge(e,t,r,a){return t.slice(-4)===".bin"?f0e(e,r,a):e0e(e,r,a)}function vge(e,t,r){return i9(e,r)}function bge(e,t,r){return t.slice(-4)===".bin"?bfe(e,r):xfe(e,r)}function yge(e,t,r){return t.slice(-4)===".bin"?dhe(e,r):the(e,r)}function wge(e,t,r){return t.slice(-4)===".bin"?J0e(e):Y0e(e)}function Nge(e,t,r,a){return r.slice(-4)===".bin"?Z0e(e,t,r,a):void 0}function jge(e,t,r){return t.slice(-4)===".bin"?V0e(e,t,r):X0e(e,t,r)}function kge(e,t,r){return(t.slice(-4)===".bin"?uge:_9)(e)}function Sge(e,t,r,a,s){return(t.slice(-4)===".bin"?Bxe:w9)(e,r,a,s)}function _ge(e,t,r){return(t.slice(-4)===".bin"?N0e:a9)(e,r)}function Cge(e,t,r){return(t.slice(-4)===".bin"?Nfe:YR)(e,r)}function Age(e,t,r){return(t.slice(-4)===".bin"?uhe:c9)(e)}function Ege(e){return(e.slice(-4)===".bin"?K0e:o9)()}var C9=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,A9=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Bd(e,t){var r=e.split(/\s+/),a=[];if(a[0]=r[0],r.length===1)return a;var s=e.match(C9),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(A9),(o=i[1].indexOf(":"))===-1?a[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),a[l]=i[2].slice(1,i[2].length-1));return a}function Tge(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var a=e.match(C9),s,i,o,l;if(a)for(l=0;l!=a.length;++l)s=a[l].match(A9),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var hx;function Oge(e,t){var r=hx[e]||ua(e);return r==="General"?Th(t):fd(r,t)}function Pge(e,t,r,a){var s=a;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=ms(a);break;case"i2":case"int":s=parseInt(a,10);break;case"r4":case"float":s=parseFloat(a);break;case"date":case"dateTime.tz":s=gs(a);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[ua(t)]=s}function Ige(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Mf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ag(e.v):e.w=Th(e.v):e.w=Oge(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var a=hx[t]||t||"General";if(r.cellNF&&(e.z=a),r.cellDates&&e.t=="n"&&mp(a)){var s=uh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Dge(e,t,r){if(r.cellStyles&&t.Interior){var a=t.Interior;a.Pattern&&(a.patternType=Gfe[a.Pattern]||a.Pattern)}e[t.ID]=t}function Lge(e,t,r,a,s,i,o,l,c,d){var u="General",f=a.StyleID,p={};d=d||{};var m=[],b=0;for(f===void 0&&l&&(f=l.StyleID),f===void 0&&o&&(f=o.StyleID);i[f]!==void 0&&(i[f].nf&&(u=i[f].nf),i[f].Interior&&m.push(i[f].Interior),!!i[f].Parent);)f=i[f].Parent;switch(r.Type){case"Boolean":a.t="b",a.v=ms(e);break;case"String":a.t="s",a.r=cD(ua(e)),a.v=e.indexOf("<")>-1?ua(t||e).replace(/<.*?>/g,""):a.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),a.v=(gs(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),a.v!==a.v?a.v=ua(e):a.v<60&&(a.v=a.v-1),(!u||u=="General")&&(u="yyyy-mm-dd");case"Number":a.v===void 0&&(a.v=+e),a.t||(a.t="n");break;case"Error":a.t="e",a.v=NR[e],d.cellText!==!1&&(a.w=e);break;default:e==""&&t==""?a.t="z":(a.t="s",a.v=cD(t||e));break}if(Ige(a,u,d),d.cellFormula!==!1)if(a.Formula){var v=ua(a.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),a.f=Sm(v,s),delete a.Formula,a.ArrayRange=="RC"?a.F=Sm("RC:RC",s):a.ArrayRange&&(a.F=Sm(a.ArrayRange,s),c.push([ha(a.F),a.F]))}else for(b=0;b<c.length;++b)s.r>=c[b][0].s.r&&s.r<=c[b][0].e.r&&s.c>=c[b][0].s.c&&s.c<=c[b][0].e.c&&(a.F=c[b][1]);d.cellStyles&&(m.forEach(function(g){!p.patternType&&g.patternType&&(p.patternType=g.patternType)}),a.s=p),a.StyleID!==void 0&&(a.ixfe=a.StyleID)}function Fge(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function Tj(e,t){var r=t||{};pp();var a=Yp(A3(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(a=Wa(a));var s=a.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=vs(r);return o.type="string",rp.to_workbook(a,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(we){s.indexOf("<"+we)>=0&&(i=!0)}),i)return wve(a,r);hx={"General Number":"General","General Date":dn[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":dn[15],"Short Date":dn[14],"Long Time":dn[19],"Medium Time":dn[18],"Short Time":dn[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:dn[2],Standard:dn[4],Percent:dn[10],Scientific:dn[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,u={},f=[],p=r.dense?[]:{},m="",b={},v={},g=Bd('<Data ss:Type="String">'),w=0,y=0,j=0,N={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},E={},A="",P=0,I=[],B={},T={},_=0,R=[],z=[],H={},Y=[],J,re=!1,X=[],te=[],W={},O=0,q=0,G={Sheets:[],WBProps:{date1904:!1}},U={};og.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";l=og.exec(a);)switch(l[3]=(K=l[3]).toLowerCase()){case"data":if(K=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Lge(a.slice(w,l.index),A,g,c[c.length-1][0]=="comment"?H:b,{c:y,r:j},S,Y[y],v,X,r):(A="",g=Bd(l[0]),w=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(z.length>0&&(b.c=z),(!r.sheetRows||r.sheetRows>j)&&b.v!==void 0&&(r.dense?(p[j]||(p[j]=[]),p[j][y]=b):p[Bs(y)+ui(j)]=b),b.HRef&&(b.l={Target:ua(b.HRef)},b.HRefScreenTip&&(b.l.Tooltip=b.HRefScreenTip),delete b.HRef,delete b.HRefScreenTip),(b.MergeAcross||b.MergeDown)&&(O=y+(parseInt(b.MergeAcross,10)|0),q=j+(parseInt(b.MergeDown,10)|0),I.push({s:{c:y,r:j},e:{c:O,r:q}})),!r.sheetStubs)b.MergeAcross?y=O+1:++y;else if(b.MergeAcross||b.MergeDown){for(var ae=y;ae<=O;++ae)for(var me=j;me<=q;++me)(ae>y||me>j)&&(r.dense?(p[me]||(p[me]=[]),p[me][ae]={t:"z"}):p[Bs(ae)+ui(me)]={t:"z"});y=O+1}else++y;else b=Tge(l[0]),b.Index&&(y=+b.Index-1),y<N.s.c&&(N.s.c=y),y>N.e.c&&(N.e.c=y),l[0].slice(-2)==="/>"&&++y,z=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(j<N.s.r&&(N.s.r=j),j>N.e.r&&(N.e.r=j),l[0].slice(-2)==="/>"&&(v=Bd(l[0]),v.Index&&(j=+v.Index-1)),y=0,++j):(v=Bd(l[0]),v.Index&&(j=+v.Index-1),W={},(v.AutoFitHeight=="0"||v.Height)&&(W.hpx=parseInt(v.Height,10),W.hpt=fg(W.hpx),te[j]=W),v.Hidden=="1"&&(W.hidden=!0,te[j]=W));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));f.push(m),N.s.r<=N.e.r&&N.s.c<=N.e.c&&(p["!ref"]=An(N),r.sheetRows&&r.sheetRows<=N.e.r&&(p["!fullref"]=p["!ref"],N.e.r=r.sheetRows-1,p["!ref"]=An(N))),I.length&&(p["!merges"]=I),Y.length>0&&(p["!cols"]=Y),te.length>0&&(p["!rows"]=te),u[m]=p}else N={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=y=0,c.push([l[3],!1]),d=Bd(l[0]),m=ua(d.Name),p=r.dense?[]:{},I=[],X=[],te=[],U={name:m,Hidden:0},G.Sheets.push(U);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Y=[],re=!1}break;case"style":l[1]==="/"?Dge(S,E,r):E=Bd(l[0]);break;case"numberformat":E.nf=ua(Bd(l[0]).Format||"General"),hx[E.nf]&&(E.nf=hx[E.nf]);for(var se=0;se!=392&&dn[se]!=E.nf;++se);if(se==392){for(se=57;se!=392;++se)if(dn[se]==null){Sf(E.nf,se);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(J=Bd(l[0]),J.Hidden&&(J.hidden=!0,delete J.Hidden),J.Width&&(J.wpx=parseInt(J.Width,10)),!re&&J.wpx>10){re=!0,ol=r9;for(var le=0;le<Y.length;++le)Y[le]&&j0(Y[le])}re&&j0(J),Y[J.Index-1||Y.length]=J;for(var Me=0;Me<+J.Span;++Me)Y[Y.length]=vs(J);break;case"namedrange":if(l[1]==="/")break;G.Names||(G.Names=[]);var ue=yn(l[0]),Ue={Name:ue.Name,Ref:Sm(ue.RefersTo.slice(1),{r:0,c:0})};G.Sheets.length>0&&(Ue.Sheet=G.Sheets.length-1),G.Names.push(Ue);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?A+=a.slice(P,l.index):P=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;E.Interior=Bd(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?ide(B,K,a.slice(_,l.index)):_=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));Fge(H),z.push(H)}else c.push([l[3],!1]),d=Bd(l[0]),H={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Ae=Bd(l[0]);p["!autofilter"]={ref:Sm(Ae.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return QD(a,r);var ie=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ie=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ie=!1}break;case"excelworkbook":switch(l[3]){case"date1904":G.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ie=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ie=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(a.slice(_,l.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2;break}else _=l.index+l[0].length;break;case"header":p["!margins"]||bh(p["!margins"]={},"xlml"),isNaN(+yn(l[0]).Margin)||(p["!margins"].header=+yn(l[0]).Margin);break;case"footer":p["!margins"]||bh(p["!margins"]={},"xlml"),isNaN(+yn(l[0]).Margin)||(p["!margins"].footer=+yn(l[0]).Margin);break;case"pagemargins":var Z=yn(l[0]);p["!margins"]||bh(p["!margins"]={},"xlml"),isNaN(+Z.Top)||(p["!margins"].top=+Z.Top),isNaN(+Z.Left)||(p["!margins"].left=+Z.Left),isNaN(+Z.Right)||(p["!margins"].right=+Z.Right),isNaN(+Z.Bottom)||(p["!margins"].bottom=+Z.Bottom);break;case"displayrighttoleft":G.Views||(G.Views=[]),G.Views[0]||(G.Views[0]={}),G.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ie=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ie=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ie=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ie=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ie=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ie=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ie=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ie=!1}break;case"smarttags":break;default:ie=!1;break}if(ie||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Pge(T,K,R,a.slice(_,l.index)):(R=l,_=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Ee={};return!r.bookSheets&&!r.bookProps&&(Ee.Sheets=u),Ee.SheetNames=f,Ee.Workbook=G,Ee.SSF=vs(dn),Ee.Props=B,Ee.Custprops=T,Ee}function Mk(e,t){switch(J3(t=t||{}),t.type||"base64"){case"base64":return Tj(Cc(e),t);case"binary":case"buffer":case"file":return Tj(e,t);case"array":return Tj(L0(e),t)}}function Mge(e,t){var r=[];return e.Props&&r.push(ode(e.Props,t)),e.Custprops&&r.push(lde(e.Props,e.Custprops)),r.join("")}function Rge(){return""}function Bge(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(a,s){var i=[];i.push(hr("NumberFormat",null,{"ss:Format":Ia(dn[a.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(hr("Style",i.join(""),o))}),hr("Styles",r.join(""))}function E9(e){return hr("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+G3(e.Ref,{r:0,c:0})})}function Uge(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],a=0;a<t.length;++a){var s=t[a];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(E9(s)))}return hr("Names",r.join(""))}function qge(e,t,r,a){if(!e||!((a||{}).Workbook||{}).Names)return"";for(var s=a.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(E9(l)))}return i.join("")}function $ge(e,t,r,a){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(hr("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(hr("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(hr("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),a&&a.Workbook&&a.Workbook.Sheets&&a.Workbook.Sheets[r])if(a.Workbook.Sheets[r].Hidden)s.push(hr("Visible",a.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(a.Workbook.Sheets[i]&&!a.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((a||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Po("ProtectContents","True")),e["!protect"].objects&&s.push(Po("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Po("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Po("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Po("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":hr("WorksheetOptions",s.join(""),{xmlns:vc.x})}function zge(e){return e.map(function(t){var r=dce(t.t||""),a=hr("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return hr("Comment",a,{"ss:Author":t.a})}).join("")}function Hge(e,t,r,a,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Ia(G3(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Us(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Ia(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Ia(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],u=0;u!=d.length;++u)d[u].s.c!=o.c||d[u].s.r!=o.r||(d[u].e.c>d[u].s.c&&(l["ss:MergeAcross"]=d[u].e.c-d[u].s.c),d[u].e.r>d[u].s.r&&(l["ss:MergeDown"]=d[u].e.r-d[u].s.r));var f="",p="";switch(e.t){case"z":if(!a.sheetStubs)return"";break;case"n":f="Number",p=String(e.v);break;case"b":f="Boolean",p=e.v?"1":"0";break;case"e":f="Error",p=Mf[e.v];break;case"d":f="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||dn[14]);break;case"s":f="String",p=cce(e.v||"");break}var m=M0(a.cellXfs,e,a);l["ss:StyleID"]="s"+(21+m),l["ss:Index"]=o.c+1;var b=e.v!=null?p:"",v=e.t=="z"?"":'<Data ss:Type="'+f+'">'+b+"</Data>";return(e.c||[]).length>0&&(v+=zge(e.c)),hr("Cell",v,l)}function Wge(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=np(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Gge(e,t,r,a){if(!e["!ref"])return"";var s=ha(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(g,w){j0(g);var y=!!g.width,j=_y(w,g),N={"ss:Index":w+1};y&&(N["ss:Width"]=dg(j.width)),g.hidden&&(N["ss:Hidden"]="1"),l.push(hr("Column",null,N))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var u=[Wge(d,(e["!rows"]||[])[d])],f=s.s.c;f<=s.e.c;++f){var p=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>f)&&!(i[o].s.r>d)&&!(i[o].e.c<f)&&!(i[o].e.r<d)){(i[o].s.c!=f||i[o].s.r!=d)&&(p=!0);break}if(!p){var m={r:d,c:f},b=gn(m),v=c?(e[d]||[])[f]:e[b];u.push(Hge(v,b,e,t,r,a,m))}}u.push("</Row>"),u.length>2&&l.push(u.join(""))}return l.join("")}function Vge(e,t,r){var a=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?qge(i,t,e,r):"";return o.length>0&&a.push("<Names>"+o+"</Names>"),o=i?Gge(i,t,e,r):"",o.length>0&&a.push("<Table>"+o+"</Table>"),a.push($ge(i,t,e,r)),a.join("")}function Kge(e,t){t||(t={}),e.SSF||(e.SSF=vs(dn)),e.SSF&&(pp(),by(e.SSF),t.revssf=wy(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],M0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Mge(e,t)),r.push(Rge()),r.push(""),r.push("");for(var a=0;a<e.SheetNames.length;++a)r.push(hr("Worksheet",Vge(a,t,e),{"ss:Name":Ia(e.SheetNames[a])}));return r[2]=Bge(e,t),r[3]=Uge(e),hi+hr("Workbook",r.join(""),{xmlns:vc.ss,"xmlns:o":vc.o,"xmlns:x":vc.x,"xmlns:ss":vc.ss,"xmlns:dt":vc.dt,"xmlns:html":vc.html})}function Xge(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Uce(r),r.length-r.l<=4)return t;var a=r.read_shift(4);if(a==0||a>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(a=r.read_shift(4),a!==1907505652)||(t.UnicodeClipboardFormat=qce(r),a=r.read_shift(4),a==0||a>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Yge=[60,1084,2066,2165,2175];function Qge(e,t,r,a,s){var i=a,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=gf(r,r.l),d=Rk[c],u=0;d!=null&&Yge.indexOf(c)>-1;)i=gf(r,r.l+2),u=r.l+4,c==2066?u+=4:(c==2165||c==2175)&&(u+=12),l=r.slice(u,r.l+4+i),o.push(l),r.l+=4+i,d=Rk[c=gf(r,r.l)];var f=lo(o);Oo(f,0);var p=0;f.lens=[];for(var m=0;m<o.length;++m)f.lens.push(p),p+=o[m].length;if(f.length<a)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+f.length+" < "+a;return t.f(f,f.length,s)}function wu(e,t,r){if(e.t!=="z"&&e.XF){var a=0;try{a=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=dn[a])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Mf[e.v]:a===0||a=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=ag(e.v):e.w=Th(e.v):e.w=fd(a,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&a&&e.t=="n"&&mp(dn[a]||String(a))){var s=uh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Bv(e,t,r){return{v:e,ixfe:t,t:r}}function Jge(e,t){var r={opts:{}},a={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",u={},f,p="",m,b,v,g,w={},y=[],j,N,S=[],E=[],A={Sheets:[],WBProps:{date1904:!1},Views:[{}]},P={},I=function(Re){return Re<8?xh[Re]:Re<64&&E[Re-8]||xh[Re]},B=function(Re,Je,ut){var vt=Je.XF.data;if(!(!vt||!vt.patternType||!ut||!ut.cellStyles)){Je.s={},Je.s.patternType=vt.patternType;var At;(At=cg(I(vt.icvFore)))&&(Je.s.fgColor={rgb:At}),(At=cg(I(vt.icvBack)))&&(Je.s.bgColor={rgb:At})}},T=function(Re,Je,ut){if(!(W>1)&&!(ut.sheetRows&&Re.r>=ut.sheetRows)){if(ut.cellStyles&&Je.XF&&Je.XF.data&&B(Re,Je,ut),delete Je.ixfe,delete Je.XF,f=Re,p=gn(Re),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Re.r<o.s.r&&(o.s.r=Re.r),Re.c<o.s.c&&(o.s.c=Re.c),Re.r+1>o.e.r&&(o.e.r=Re.r+1),Re.c+1>o.e.c&&(o.e.c=Re.c+1),ut.cellFormula&&Je.f){for(var vt=0;vt<y.length;++vt)if(!(y[vt][0].s.c>Re.c||y[vt][0].s.r>Re.r)&&!(y[vt][0].e.c<Re.c||y[vt][0].e.r<Re.r)){Je.F=An(y[vt][0]),(y[vt][0].s.c!=Re.c||y[vt][0].s.r!=Re.r)&&delete Je.f,Je.f&&(Je.f=""+al(y[vt][1],o,Re,X,_));break}}ut.dense?(s[Re.r]||(s[Re.r]=[]),s[Re.r][Re.c]=Je):s[p]=Je}},_={enc:!1,sbcch:0,snames:[],sharedf:w,arrayf:y,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(_.password=t.password);var R,z=[],H=[],Y=[],J=[],re=!1,X=[];X.SheetNames=_.snames,X.sharedf=_.sharedf,X.arrayf=_.arrayf,X.names=[],X.XTI=[];var te=0,W=0,O=0,q=[],G=[],U;_.codepage=1200,Vd(1200);for(var K=!1;e.l<e.length-1;){var ae=e.l,me=e.read_shift(2);if(me===0&&te===10)break;var se=e.l===e.length?0:e.read_shift(2),le=Rk[me];if(le&&le.f){if(t.bookSheets&&te===133&&me!==133)break;if(te=me,le.r===2||le.r==12){var Me=e.read_shift(2);if(se-=2,!_.enc&&Me!==me&&((Me&255)<<8|Me>>8)!==me)throw new Error("rt mismatch: "+Me+"!="+me);le.r==12&&(e.l+=10,se-=10)}var ue={};if(me===10?ue=le.f(e,se,_):ue=Qge(me,le,e,se,_),W==0&&[9,521,1033,2057].indexOf(te)===-1)continue;switch(me){case 34:r.opts.Date1904=A.WBProps.date1904=ue;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(_.enc||(e.l=0),_.enc=ue,!t.password)throw new Error("File is password-protected");if(ue.valid==null)throw new Error("Encryption scheme unsupported");if(!ue.valid)throw new Error("Password is incorrect");break;case 92:_.lastuser=ue;break;case 66:var Ue=Number(ue);switch(Ue){case 21010:Ue=1200;break;case 32768:Ue=1e4;break;case 32769:Ue=1252;break}Vd(_.codepage=Ue),K=!0;break;case 317:_.rrtabid=ue;break;case 25:_.winlocked=ue;break;case 439:r.opts.RefreshAll=ue;break;case 12:r.opts.CalcCount=ue;break;case 16:r.opts.CalcDelta=ue;break;case 17:r.opts.CalcIter=ue;break;case 13:r.opts.CalcMode=ue;break;case 14:r.opts.CalcPrecision=ue;break;case 95:r.opts.CalcSaveRecalc=ue;break;case 15:_.CalcRefMode=ue;break;case 2211:r.opts.FullCalc=ue;break;case 129:ue.fDialog&&(s["!type"]="dialog"),ue.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ue.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(ue);break;case 430:X.push([ue]),X[X.length-1].XTI=[];break;case 35:case 547:X[X.length-1].push(ue);break;case 24:case 536:U={Name:ue.Name,Ref:al(ue.rgce,o,null,X,_)},ue.itab>0&&(U.Sheet=ue.itab-1),X.names.push(U),X[0]||(X[0]=[],X[0].XTI=[]),X[X.length-1].push(ue),ue.Name=="_xlnm._FilterDatabase"&&ue.itab>0&&ue.rgce&&ue.rgce[0]&&ue.rgce[0][0]&&ue.rgce[0][0][0]=="PtgArea3d"&&(G[ue.itab-1]={ref:An(ue.rgce[0][0][1][2])});break;case 22:_.ExternCount=ue;break;case 23:X.length==0&&(X[0]=[],X[0].XTI=[]),X[X.length-1].XTI=X[X.length-1].XTI.concat(ue),X.XTI=X.XTI.concat(ue);break;case 2196:if(_.biff<8)break;U!=null&&(U.Comment=ue[1]);break;case 18:s["!protect"]=ue;break;case 19:ue!==0&&_.WTF&&console.error("Password verifier: "+ue);break;case 133:i[ue.pos]=ue,_.snames.push(ue.name);break;case 10:{if(--W)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=An(o),t.sheetRows&&t.sheetRows<=o.e.r){var Ae=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=An(o),o.e.r=Ae}o.e.r++,o.e.c++}z.length>0&&(s["!merges"]=z),H.length>0&&(s["!objects"]=H),Y.length>0&&(s["!cols"]=Y),J.length>0&&(s["!rows"]=J),A.Sheets.push(P)}d===""?u=s:a[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(_.biff===8&&(_.biff={9:2,521:3,1033:4}[me]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ue.BIFFVer]||8),_.biffguess=ue.BIFFVer==0,ue.BIFFVer==0&&ue.dt==4096&&(_.biff=5,K=!0,Vd(_.codepage=28591)),_.biff==8&&ue.BIFFVer==0&&ue.dt==16&&(_.biff=2),W++)break;if(s=t.dense?[]:{},_.biff<8&&!K&&(K=!0,Vd(_.codepage=t.codepage||1252)),_.biff<5||ue.BIFFVer==0&&ue.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ie={pos:e.l-se,name:d};i[ie.pos]=ie,_.snames.push(d)}else d=(i[ae]||{name:""}).name;ue.dt==32&&(s["!type"]="chart"),ue.dt==64&&(s["!type"]="macro"),z=[],H=[],_.arrayf=y=[],Y=[],J=[],re=!1,P={Hidden:(i[ae]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[ue.r]||[])[ue.c]:s[gn({c:ue.c,r:ue.r})])&&++ue.c,j={ixfe:ue.ixfe,XF:S[ue.ixfe]||{},v:ue.val,t:"n"},O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T({c:ue.c,r:ue.r},j,t);break;case 5:case 517:j={ixfe:ue.ixfe,XF:S[ue.ixfe],v:ue.val,t:ue.t},O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T({c:ue.c,r:ue.r},j,t);break;case 638:j={ixfe:ue.ixfe,XF:S[ue.ixfe],v:ue.rknum,t:"n"},O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T({c:ue.c,r:ue.r},j,t);break;case 189:for(var Z=ue.c;Z<=ue.C;++Z){var Ee=ue.rkrec[Z-ue.c][0];j={ixfe:Ee,XF:S[Ee],v:ue.rkrec[Z-ue.c][1],t:"n"},O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T({c:Z,r:ue.r},j,t)}break;case 6:case 518:case 1030:{if(ue.val=="String"){l=ue;break}if(j=Bv(ue.val,ue.cell.ixfe,ue.tt),j.XF=S[j.ixfe],t.cellFormula){var we=ue.formula;if(we&&we[0]&&we[0][0]&&we[0][0][0]=="PtgExp"){var Oe=we[0][0][1][0],de=we[0][0][1][1],ce=gn({r:Oe,c:de});w[ce]?j.f=""+al(ue.formula,o,ue.cell,X,_):j.F=((t.dense?(s[Oe]||[])[de]:s[ce])||{}).F}else j.f=""+al(ue.formula,o,ue.cell,X,_)}O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T(ue.cell,j,t),l=ue}break;case 7:case 519:if(l)l.val=ue,j=Bv(ue,l.cell.ixfe,"s"),j.XF=S[j.ixfe],t.cellFormula&&(j.f=""+al(l.formula,o,l.cell,X,_)),O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T(l.cell,j,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{y.push(ue);var Ce=gn(ue[0].s);if(m=t.dense?(s[ue[0].s.r]||[])[ue[0].s.c]:s[Ce],t.cellFormula&&m){if(!l||!Ce||!m)break;m.f=""+al(ue[1],o,ue[0],X,_),m.F=An(ue[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!l)break;w[gn(l.cell)]=ue[0],m=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[gn(l.cell)],(m||{}).f=""+al(ue[0],o,f,X,_)}}break;case 253:j=Bv(c[ue.isst].t,ue.ixfe,"s"),c[ue.isst].h&&(j.h=c[ue.isst].h),j.XF=S[j.ixfe],O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T({c:ue.c,r:ue.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:ue.ixfe,XF:S[ue.ixfe],t:"z"},O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T({c:ue.c,r:ue.r},j,t));break;case 190:if(t.sheetStubs)for(var Xe=ue.c;Xe<=ue.C;++Xe){var xe=ue.ixfe[Xe-ue.c];j={ixfe:xe,XF:S[xe],t:"z"},O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T({c:Xe,r:ue.r},j,t)}break;case 214:case 516:case 4:j=Bv(ue.val,ue.ixfe,"s"),j.XF=S[j.ixfe],O>0&&(j.z=q[j.ixfe>>8&63]),wu(j,t,r.opts.Date1904),T({c:ue.c,r:ue.r},j,t);break;case 0:case 512:W===1&&(o=ue);break;case 252:c=ue;break;case 1054:if(_.biff==4){q[O++]=ue[1];for(var fe=0;fe<O+163&&dn[fe]!=ue[1];++fe);fe>=163&&Sf(ue[1],O+163)}else Sf(ue[1],ue[0]);break;case 30:{q[O++]=ue;for(var Se=0;Se<O+163&&dn[Se]!=ue;++Se);Se>=163&&Sf(ue,O+163)}break;case 229:z=z.concat(ue);break;case 93:H[ue.cmo[0]]=_.lastobj=ue;break;case 438:_.lastobj.TxO=ue;break;case 127:_.lastobj.ImData=ue;break;case 440:for(g=ue[0].s.r;g<=ue[0].e.r;++g)for(v=ue[0].s.c;v<=ue[0].e.c;++v)m=t.dense?(s[g]||[])[v]:s[gn({c:v,r:g})],m&&(m.l=ue[1]);break;case 2048:for(g=ue[0].s.r;g<=ue[0].e.r;++g)for(v=ue[0].s.c;v<=ue[0].e.c;++v)m=t.dense?(s[g]||[])[v]:s[gn({c:v,r:g})],m&&m.l&&(m.l.Tooltip=ue[1]);break;case 28:{if(_.biff<=5&&_.biff>=2)break;m=t.dense?(s[ue[0].r]||[])[ue[0].c]:s[gn(ue[0])];var qe=H[ue[2]];m||(t.dense?(s[ue[0].r]||(s[ue[0].r]=[]),m=s[ue[0].r][ue[0].c]={t:"z"}):m=s[gn(ue[0])]={t:"z"},o.e.r=Math.max(o.e.r,ue[0].r),o.s.r=Math.min(o.s.r,ue[0].r),o.e.c=Math.max(o.e.c,ue[0].c),o.s.c=Math.min(o.s.c,ue[0].c)),m.c||(m.c=[]),b={a:ue[1],t:qe.TxO.t},m.c.push(b)}break;case 2173:B0e(S[ue.ixfe],ue.ext);break;case 125:{if(!_.cellStyles)break;for(;ue.e>=ue.s;)Y[ue.e--]={width:ue.w/256,level:ue.level||0,hidden:!!(ue.flags&1)},re||(re=!0,z3(ue.w/256)),j0(Y[ue.e+1])}break;case 520:{var je={};ue.level!=null&&(J[ue.r]=je,je.level=ue.level),ue.hidden&&(J[ue.r]=je,je.hidden=!0),ue.hpt&&(J[ue.r]=je,je.hpt=ue.hpt,je.hpx=np(ue.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||bh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[me]]=ue;break;case 161:s["!margins"]||bh(s["!margins"]={}),s["!margins"].header=ue.header,s["!margins"].footer=ue.footer;break;case 574:ue.RTL&&(A.Views[0].RTL=!0);break;case 146:E=ue;break;case 2198:R=ue;break;case 140:N=ue;break;case 442:d?P.CodeName=ue||P.name:A.WBProps.CodeName=ue||"ThisWorkbook";break}}else le||console.error("Missing Info for XLS Record 0x"+me.toString(16)),e.l+=se}return r.SheetNames=Js(i).sort(function(Le,Re){return Number(Le)-Number(Re)}).map(function(Le){return i[Le].name}),t.bookSheets||(r.Sheets=a),!r.SheetNames.length&&u["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=u)):r.Preamble=u,r.Sheets&&G.forEach(function(Le,Re){r.Sheets[r.SheetNames[Re]]["!autofilter"]=Le}),r.Strings=c,r.SSF=vs(dn),_.enc&&(r.Encryption=_.enc),R&&(r.Themes=R),r.Metadata={},N!==void 0&&(r.Metadata.Country=N),X.names.length>0&&(A.Names=X.names),r.Workbook=A,r}var mx={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Zge(e,t,r){var a=Zr.find(e,"/!DocumentSummaryInformation");if(a&&a.size>0)try{var s=CD(a,Ok,mx.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Zr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=CD(o,Pk,mx.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(AR(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function eve(e,t){var r=[],a=[],s=[],i=0,o,l=nD(Ok,"n"),c=nD(Pk,"n");if(e.Props)for(o=Js(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Js(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?a:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)LR.indexOf(s[i][0])>-1||CR.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);a.length&&Zr.utils.cfb_add(t,"/SummaryInformation",AD(a,mx.SI,c,Pk)),(r.length||d.length)&&Zr.utils.cfb_add(t,"/DocumentSummaryInformation",AD(r,mx.DSI,l,Ok,d.length?d:null,mx.UDI))}function T9(e,t){t||(t={}),J3(t),b3(),t.codepage&&v3(t.codepage);var r,a;if(e.FullPaths){if(Zr.find(e,"/encryption"))throw new Error("File is password-protected");r=Zr.find(e,"!CompObj"),a=Zr.find(e,"/Workbook")||Zr.find(e,"/Book")}else{switch(t.type){case"base64":e=wc(Cc(e));break;case"binary":e=wc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Oo(e,0),a={content:e}}var s,i;if(r&&Xge(r),t.bookProps&&!t.bookSheets)s={};else{var o=Rn?"buffer":"array";if(a&&a.content)s=Jge(a.content,t);else if((i=Zr.find(e,"PerfectOffice_MAIN"))&&i.content)s=vh.to_workbook(i.content,(t.type=o,t));else if((i=Zr.find(e,"NativeContent_MAIN"))&&i.content)s=vh.to_workbook(i.content,(t.type=o,t));else throw(i=Zr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Zr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=hhe(e))}var l={};return e.FullPaths&&Zge(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function tve(e,t){var r=t||{},a=Zr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Zr.utils.cfb_add(a,s,O9(e,r)),r.biff==8&&(e.Props||e.Custprops)&&eve(e,a),r.biff==8&&e.vbaraw&&mhe(a,Zr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),a}var hg={0:{f:Spe},1:{f:Ipe},2:{f:Jpe},3:{f:qpe},4:{f:Mpe},5:{f:Xpe},6:{f:nxe},7:{f:Wpe},8:{f:dxe},9:{f:cxe},10:{f:oxe},11:{f:lxe},12:{f:Lpe},13:{f:exe},14:{f:zpe},15:{f:Bpe},16:{f:N9},17:{f:sxe},18:{f:Vpe},19:{f:I3},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:sge},40:{},42:{},43:{f:n0e},44:{f:t0e},45:{f:i0e},46:{f:l0e},47:{f:o0e},48:{},49:{f:Ace},50:{},51:{f:$0e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:GR},62:{f:rxe},63:{f:Q0e},64:{f:_xe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:fl,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:Nxe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:Ope},148:{f:Ape,p:16},151:{f:xxe},152:{},153:{f:rge},154:{},155:{},156:{f:ege},157:{},158:{},159:{T:1,f:vfe},160:{T:-1},161:{T:1,f:Wh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:uxe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:U0e},336:{T:-1},337:{f:W0e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:Tk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:WR},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:gxe},427:{f:vxe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:yxe},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Tpe},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:mxe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:Tk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:lhe},633:{T:1},634:{T:-1},635:{T:1,f:ihe},636:{T:-1},637:{f:Pce},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:zxe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:Cxe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},Rk={6:{f:Aj},10:{f:r0},12:{f:ki},13:{f:ki},14:{f:si},15:{f:si},16:{f:ll},17:{f:si},18:{f:si},19:{f:ki},20:{f:DD},21:{f:DD},23:{f:WR},24:{f:FD},25:{f:si},26:{},27:{},28:{f:Cue},29:{},34:{f:si},35:{f:LD},38:{f:ll},39:{f:ll},40:{f:ll},41:{f:ll},42:{f:si},43:{f:si},47:{f:Bfe},49:{f:eue},51:{f:ki},60:{},61:{f:Xde},64:{f:si},65:{f:Zde},66:{f:ki},77:{},80:{},81:{},82:{},85:{f:ki},89:{},90:{},91:{},92:{f:Rde},93:{f:Tue},94:{},95:{f:si},96:{},97:{},99:{f:si},125:{f:GR},128:{f:pue},129:{f:Ude},130:{f:ki},131:{f:si},132:{f:si},133:{f:qde},134:{},140:{f:Rue},141:{f:ki},144:{},146:{f:que},151:{},152:{},153:{},154:{},155:{},156:{f:ki},157:{},158:{},160:{f:Kue},161:{f:Hue},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:uue},190:{f:fue},193:{f:r0},197:{},198:{},199:{},200:{},201:{},202:{f:si},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:ki},220:{},221:{f:si},222:{},224:{f:mue},225:{f:Mde},226:{f:r0},227:{},229:{f:Aue},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:zde},253:{f:rue},255:{f:Wde},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:FR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:si},353:{f:r0},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:yue},431:{f:si},432:{},433:{},434:{},437:{},438:{f:Iue},439:{f:si},440:{f:Due},441:{},442:{f:Tg},443:{},444:{f:ki},445:{},446:{},448:{f:r0},449:{f:Kde,r:2},450:{f:r0},512:{f:OD},513:{f:Vue},515:{f:vue},516:{f:aue},517:{f:ID},519:{f:Xue},520:{f:Gde},523:{},545:{f:MD},549:{f:TD},566:{},574:{f:Qde},638:{f:due},659:{},1048:{},1054:{f:iue},1084:{},1212:{f:kue},2048:{f:Fue},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Fv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:r0},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:$ue,r:12},2173:{f:R0e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:si,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:jue,r:12},2197:{},2198:{f:P0e,r:12},2199:{},2200:{},2201:{},2202:{f:Sue,r:12},2203:{f:r0},2204:{},2205:{},2206:{},2207:{},2211:{f:Vde},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:ki},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Wue},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Uue},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:OD},1:{},2:{f:efe},3:{f:Jue},4:{f:Que},5:{f:ID},7:{f:rfe},8:{},9:{f:Fv},11:{},22:{f:ki},30:{f:lue},31:{},32:{},33:{f:MD},36:{},37:{f:TD},50:{f:nfe},62:{},52:{},67:{},68:{f:ki},69:{},86:{},126:{},127:{f:Yue},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:afe},223:{},234:{},354:{},421:{},518:{f:Aj},521:{f:Fv},536:{f:FD},547:{f:LD},561:{},579:{},1030:{f:Aj},1033:{f:Fv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function vr(e,t,r,a){var s=t;if(!isNaN(s)){var i=a||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&T3(r)&&e.push(r)}}function rve(e,t,r,a){var s=(r||[]).length||0;if(s<=8224)return vr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var u=e.next(4);for(u.write_shift(2,i),u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(u=e.next(4),u.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;u.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function Dg(e,t,r){return e||(e=qt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function nve(e,t,r,a){var s=qt(9);return Dg(s,e,t),MR(r,a||"b",s),s}function ave(e,t,r){var a=qt(8+2*r.length);return Dg(a,e,t),a.write_shift(1,r.length),a.write_shift(r.length,r,"sbcs"),a.l<a.length?a.slice(0,a.l):a}function sve(e,t,r,a){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?zi(gs(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?vr(e,2,tfe(r,a,s)):vr(e,3,Zue(r,a,s));return;case"b":case"e":vr(e,5,nve(r,a,t.v,t.t));return;case"s":case"str":vr(e,4,ave(r,a,(t.v||"").slice(0,255)));return}vr(e,1,Dg(null,r,a))}function ive(e,t,r,a){var s=Array.isArray(t),i=ha(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(a.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=An(i)}for(var d=i.s.r;d<=i.e.r;++d){l=ui(d);for(var u=i.s.c;u<=i.e.c;++u){d===i.s.r&&(c[u]=Bs(u)),o=c[u]+l;var f=s?(t[d]||[])[u]:t[o];f&&sve(e,f,d,u)}}}function ove(e,t){for(var r=t||{},a=Ql(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return vr(a,r.biff==4?1033:r.biff==3?521:9,U3(e,16,r)),ive(a,e.Sheets[e.SheetNames[s]],s,r),vr(a,10),a.end()}function lve(e,t,r){vr(e,49,tue({sz:12,name:"Arial"},r))}function cve(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(a){for(var s=a[0];s<=a[1];++s)t[s]!=null&&vr(e,1054,oue(s,t[s],r))})}function dve(e,t){var r=qt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),vr(e,2151,r),r=qt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),$R(ha(t["!ref"]||"A1"),r),r.write_shift(4,4),vr(e,2152,r)}function uve(e,t){for(var r=0;r<16;++r)vr(e,224,PD({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(a){vr(e,224,PD(a,0,t))})}function fve(e,t){for(var r=0;r<t["!links"].length;++r){var a=t["!links"][r];vr(e,440,Lue(a)),a[1].Tooltip&&vr(e,2048,Mue(a))}delete t["!links"]}function hve(e,t){if(t){var r=0;t.forEach(function(a,s){++r<=256&&a&&vr(e,125,zue(_y(s,a),s))})}}function mve(e,t,r,a,s){var i=16+M0(s.cellXfs,t,s);if(t.v==null&&!t.bf){vr(e,513,Dh(r,a,i));return}if(t.bf)vr(e,6,Ume(t,r,a,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?zi(gs(t.v)):t.v;vr(e,515,bue(r,a,o,i));break;case"b":case"e":vr(e,517,gue(r,a,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=K3(s.Strings,t.v,s.revStrings);vr(e,253,nue(r,a,l,i))}else vr(e,516,sue(r,a,(t.v||"").slice(0,255),i,s));break;default:vr(e,513,Dh(r,a,i))}}function pve(e,t,r){var a=Ql(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,u,f="",p=[],m=ha(i["!ref"]||"A1"),b=d?65536:16384;if(m.e.c>255||m.e.r>=b){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");m.e.c=Math.min(m.e.c,255),m.e.r=Math.min(m.e.c,b-1)}vr(a,2057,U3(r,16,t)),vr(a,13,ed(1)),vr(a,12,ed(100)),vr(a,15,kl(!0)),vr(a,17,kl(!1)),vr(a,16,Ph(.001)),vr(a,95,kl(!0)),vr(a,42,kl(!1)),vr(a,43,kl(!1)),vr(a,130,ed(1)),vr(a,128,xue()),vr(a,131,kl(!1)),vr(a,132,kl(!1)),d&&hve(a,i["!cols"]),vr(a,512,cue(m,t)),d&&(i["!links"]=[]);for(var v=m.s.r;v<=m.e.r;++v){f=ui(v);for(var g=m.s.c;g<=m.e.c;++g){v===m.s.r&&(p[g]=Bs(g)),u=p[g]+f;var w=c?(i[v]||[])[g]:i[u];w&&(mve(a,w,v,g,t),d&&w.l&&i["!links"].push([u,w.l]))}}var y=l.CodeName||l.name||s;return d&&vr(a,574,Jde((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&vr(a,229,Eue(i["!merges"])),d&&fve(a,i),vr(a,442,RR(y)),d&&dve(a,i),vr(a,10),a.end()}function xve(e,t,r){var a=Ql(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(vr(a,2057,U3(e,5,r)),r.bookType=="xla"&&vr(a,135),vr(a,225,l?ed(1200):null),vr(a,193,gde(2)),c&&vr(a,191),c&&vr(a,192),vr(a,226),vr(a,92,Bde("SheetJS",r)),vr(a,66,ed(l?1200:1252)),l&&vr(a,353,ed(0)),l&&vr(a,448),vr(a,317,Gue(e.SheetNames.length)),l&&e.vbaraw&&vr(a,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";vr(a,442,RR(d))}vr(a,156,ed(17)),vr(a,25,kl(!1)),vr(a,18,kl(!1)),vr(a,19,ed(0)),l&&vr(a,431,kl(!1)),l&&vr(a,444,ed(0)),vr(a,61,Yde()),vr(a,64,kl(!1)),vr(a,141,ed(0)),vr(a,34,kl(Kxe(e)=="true")),vr(a,14,kl(!0)),l&&vr(a,439,kl(!1)),vr(a,218,ed(0)),lve(a,e,r),cve(a,e.SSF,r),uve(a,r),l&&vr(a,352,kl(!1));var u=a.end(),f=Ql();l&&vr(f,140,Bue()),l&&r.Strings&&rve(f,252,Hde(r.Strings)),vr(f,10);var p=f.end(),m=Ql(),b=0,v=0;for(v=0;v<e.SheetNames.length;++v)b+=(l?12:11)+(l?2:1)*e.SheetNames[v].length;var g=u.length+b+p.length;for(v=0;v<e.SheetNames.length;++v){var w=i[v]||{};vr(m,133,$de({pos:g,hs:w.Hidden||0,dt:0,name:e.SheetNames[v]},r)),g+=t[v].length}var y=m.end();if(b!=y.length)throw new Error("BS8 "+b+" != "+y.length);var j=[];return u.length&&j.push(u),y.length&&j.push(y),p.length&&j.push(p),lo(j)}function gve(e,t){var r=t||{},a=[];e&&!e.SSF&&(e.SSF=vs(dn)),e&&e.SSF&&(pp(),by(e.SSF),r.revssf=wy(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,Z3(r),r.cellXfs=[],M0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)a[a.length]=pve(s,r,e);return a.unshift(xve(e,a,r)),lo(a)}function O9(e,t){for(var r=0;r<=e.SheetNames.length;++r){var a=e.Sheets[e.SheetNames[r]];if(!(!a||!a["!ref"])){var s=Zl(a["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return gve(e,t);case 4:case 3:case 2:return ove(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function VD(e,t){var r=t||{},a=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=tce(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,u=0,f=0,p=0,m={s:{r:1e7,c:1e7},e:{r:0,c:0}},b=[];for(o=0;o<c.length;++o){var v=c[o].trim(),g=v.slice(0,3).toLowerCase();if(g=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}u=0;continue}if(!(g!="<td"&&g!="<th")){var w=v.split(/<\/t[dh]>/i);for(l=0;l<w.length;++l){var y=w[l].trim();if(y.match(/<t[dh]/i)){for(var j=y,N=0;j.charAt(0)=="<"&&(N=j.indexOf(">"))>-1;)j=j.slice(N+1);for(var S=0;S<b.length;++S){var E=b[S];E.s.c==u&&E.s.r<d&&d<=E.e.r&&(u=E.e.c+1,S=-1)}var A=yn(y.slice(0,y.indexOf(">")));p=A.colspan?+A.colspan:1,((f=+A.rowspan)>1||p>1)&&b.push({s:{r:d,c:u},e:{r:d+(f||1)-1,c:u+p-1}});var P=A.t||A["data-t"]||"";if(!j.length){u+=p;continue}if(j=tR(j),m.s.r>d&&(m.s.r=d),m.e.r<d&&(m.e.r=d),m.s.c>u&&(m.s.c=u),m.e.c<u&&(m.e.c=u),!j.length){u+=p;continue}var I={t:"s",v:j};r.raw||!j.trim().length||P=="s"||(j==="TRUE"?I={t:"b",v:!0}:j==="FALSE"?I={t:"b",v:!1}:isNaN(Zd(j))?isNaN(tp(j).getDate())||(I={t:"d",v:gs(j)},r.cellDates||(I={t:"n",v:zi(I.v)}),I.z=r.dateNF||dn[14]):I={t:"n",v:Zd(j)}),r.dense?(a[d]||(a[d]=[]),a[d][u]=I):a[gn({r:d,c:u})]=I,u+=p}}}}return a["!ref"]=An(m),b.length&&(a["!merges"]=b),a}function vve(e,t,r,a){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var u=gn({r,c:o}),f=a.dense?(e[r]||[])[o]:e[u],p=f&&f.v!=null&&(f.h||C3(f.w||(Of(f),f.w)||""))||"",m={};l>1&&(m.rowspan=l),c>1&&(m.colspan=c),a.editable?p='<span contenteditable="true">'+p+"</span>":f&&(m["data-t"]=f&&f.t||"z",f.v!=null&&(m["data-v"]=f.v),f.z!=null&&(m["data-z"]=f.z),f.l&&(f.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+f.l.Target+'">'+p+"</a>")),m.id=(a.id||"sjs")+"-"+u,i.push(hr("td",p,m))}}var b="<tr>";return b+i.join("")+"</tr>"}var bve='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',yve="</body></html>";function wve(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return F0(VD(r[0],t),t);var a=r_();return r.forEach(function(s,i){n_(a,VD(s,t),"Sheet"+(i+1))}),a}function Nve(e,t,r){var a=[];return a.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function P9(e,t){var r=t||{},a=r.header!=null?r.header:bve,s=r.footer!=null?r.footer:yve,i=[a],o=Zl(e["!ref"]);r.dense=Array.isArray(e),i.push(Nve(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(vve(e,o,l,r));return i.push("</table>"+s),i.join("")}function I9(e,t,r){var a=r||{},s=0,i=0;if(a.origin!=null)if(typeof a.origin=="number")s=a.origin;else{var o=typeof a.origin=="string"?Us(a.origin):a.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(a.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var u=Zl(e["!ref"]);d.s.r=Math.min(d.s.r,u.s.r),d.s.c=Math.min(d.s.c,u.s.c),d.e.r=Math.max(d.e.r,u.e.r),d.e.c=Math.max(d.e.c,u.e.c),s==-1&&(d.e.r=s=u.e.r+1)}var f=[],p=0,m=e["!rows"]||(e["!rows"]=[]),b=0,v=0,g=0,w=0,y=0,j=0;for(e["!cols"]||(e["!cols"]=[]);b<l.length&&v<c;++b){var N=l[b];if(KD(N)){if(a.display)continue;m[v]={hidden:!0}}var S=N.children;for(g=w=0;g<S.length;++g){var E=S[g];if(!(a.display&&KD(E))){var A=E.hasAttribute("data-v")?E.getAttribute("data-v"):E.hasAttribute("v")?E.getAttribute("v"):tR(E.innerHTML),P=E.getAttribute("data-z")||E.getAttribute("z");for(p=0;p<f.length;++p){var I=f[p];I.s.c==w+i&&I.s.r<v+s&&v+s<=I.e.r&&(w=I.e.c+1-i,p=-1)}j=+E.getAttribute("colspan")||1,((y=+E.getAttribute("rowspan")||1)>1||j>1)&&f.push({s:{r:v+s,c:w+i},e:{r:v+s+(y||1)-1,c:w+i+(j||1)-1}});var B={t:"s",v:A},T=E.getAttribute("data-t")||E.getAttribute("t")||"";A!=null&&(A.length==0?B.t=T||"z":a.raw||A.trim().length==0||T=="s"||(A==="TRUE"?B={t:"b",v:!0}:A==="FALSE"?B={t:"b",v:!1}:isNaN(Zd(A))?isNaN(tp(A).getDate())||(B={t:"d",v:gs(A)},a.cellDates||(B={t:"n",v:zi(B.v)}),B.z=a.dateNF||dn[14]):B={t:"n",v:Zd(A)})),B.z===void 0&&P!=null&&(B.z=P);var _="",R=E.getElementsByTagName("A");if(R&&R.length)for(var z=0;z<R.length&&!(R[z].hasAttribute("href")&&(_=R[z].getAttribute("href"),_.charAt(0)!="#"));++z);_&&_.charAt(0)!="#"&&(B.l={Target:_}),a.dense?(e[v+s]||(e[v+s]=[]),e[v+s][w+i]=B):e[gn({c:w+i,r:v+s})]=B,d.e.c<w+i&&(d.e.c=w+i),w+=j}}++v}return f.length&&(e["!merges"]=(e["!merges"]||[]).concat(f)),d.e.r=Math.max(d.e.r,v-1+s),e["!ref"]=An(d),v>=c&&(e["!fullref"]=An((d.e.r=l.length-b+v-1+s,d))),e}function D9(e,t){var r=t||{},a=r.dense?[]:{};return I9(a,e,t)}function jve(e,t){return F0(D9(e,t),t)}function KD(e){var t="",r=kve(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function kve(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function Sve(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(a,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=ua(t.replace(/<[^>]*>/g,""));return[r]}var XD={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function L9(e,t){var r=t||{},a=A3(e),s=[],i,o,l={name:""},c="",d=0,u,f,p={},m=[],b=r.dense?[]:{},v,g,w={value:""},y="",j=0,N=[],S=-1,E=-1,A={s:{r:1e6,c:1e7},e:{r:0,c:0}},P=0,I={},B=[],T={},_=0,R=0,z=[],H=1,Y=1,J=[],re={Names:[]},X={},te=["",""],W=[],O={},q="",G=0,U=!1,K=!1,ae=0;for(og.lastIndex=0,a=a.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=og.exec(a);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(A.e.c>=A.s.c&&A.e.r>=A.s.r?b["!ref"]=An(A):b["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=A.e.r&&(b["!fullref"]=b["!ref"],A.e.r=r.sheetRows-1,b["!ref"]=An(A)),B.length&&(b["!merges"]=B),z.length&&(b["!rows"]=z),u.name=u.||u.name,typeof JSON<"u"&&JSON.stringify(u),m.push(u.name),p[u.name]=b,K=!1):v[0].charAt(v[0].length-2)!=="/"&&(u=yn(v[0],!1),S=E=-1,A.s.r=A.s.c=1e7,A.e.r=A.e.c=0,b=r.dense?[]:{},B=[],z=[],K=!0);break;case"table-row-group":v[1]==="/"?--P:++P;break;case"table-row":case"":if(v[1]==="/"){S+=H,H=1;break}if(f=yn(v[0],!1),f.?S=f.-1:S==-1&&(S=0),H=+f["number-rows-repeated"]||1,H<10)for(ae=0;ae<H;++ae)P>0&&(z[S+ae]={level:P});E=-1;break;case"covered-table-cell":v[1]!=="/"&&++E,r.sheetStubs&&(r.dense?(b[S]||(b[S]=[]),b[S][E]={t:"z"}):b[gn({r:S,c:E})]={t:"z"}),y="",N=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++E,w=yn(v[0],!1),Y=parseInt(w["number-columns-repeated"]||"1",10),g={t:"z",v:null},w.formula&&r.cellFormula!=!1&&(g.f=HD(ua(w.formula))),(w.||w["value-type"])=="string"&&(g.t="s",g.v=ua(w["string-value"]||""),r.dense?(b[S]||(b[S]=[]),b[S][E]=g):b[gn({r:S,c:E})]=g),E+=Y-1;else if(v[1]!=="/"){++E,y="",j=0,N=[],Y=1;var me=H?S+H-1:S;if(E>A.e.c&&(A.e.c=E),E<A.s.c&&(A.s.c=E),S<A.s.r&&(A.s.r=S),me>A.e.r&&(A.e.r=me),w=yn(v[0],!1),W=[],O={},g={t:w.||w["value-type"],v:null},r.cellFormula)if(w.formula&&(w.formula=ua(w.formula)),w["number-matrix-columns-spanned"]&&w["number-matrix-rows-spanned"]&&(_=parseInt(w["number-matrix-rows-spanned"],10)||0,R=parseInt(w["number-matrix-columns-spanned"],10)||0,T={s:{r:S,c:E},e:{r:S+_-1,c:E+R-1}},g.F=An(T),J.push([T,g.F])),w.formula)g.f=HD(w.formula);else for(ae=0;ae<J.length;++ae)S>=J[ae][0].s.r&&S<=J[ae][0].e.r&&E>=J[ae][0].s.c&&E<=J[ae][0].e.c&&(g.F=J[ae][1]);switch((w["number-columns-spanned"]||w["number-rows-spanned"])&&(_=parseInt(w["number-rows-spanned"],10)||0,R=parseInt(w["number-columns-spanned"],10)||0,T={s:{r:S,c:E},e:{r:S+_-1,c:E+R-1}},B.push(T)),w["number-columns-repeated"]&&(Y=parseInt(w["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=ms(w["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(w.value);break;case"percentage":g.t="n",g.v=parseFloat(w.value);break;case"currency":g.t="n",g.v=parseFloat(w.value);break;case"date":g.t="d",g.v=gs(w["date-value"]),r.cellDates||(g.t="n",g.v=zi(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=Jle(w["time-value"])/86400,r.cellDates&&(g.t="d",g.v=Ny(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(w.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",w["string-value"]!=null&&(y=ua(w["string-value"]),N=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(U=!1,g.t==="s"&&(g.v=y||"",N.length&&(g.R=N),U=j==0),X.Target&&(g.l=X),W.length>0&&(g.c=W,W=[]),y&&r.cellText!==!1&&(g.w=y),U&&(g.t="z",delete g.v),(!U||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var se=0;se<H;++se){if(Y=parseInt(w["number-columns-repeated"]||"1",10),r.dense)for(b[S+se]||(b[S+se]=[]),b[S+se][E]=se==0?g:vs(g);--Y>0;)b[S+se][E+Y]=vs(g);else for(b[gn({r:S+se,c:E})]=g;--Y>0;)b[gn({r:S+se,c:E+Y})]=vs(g);A.e.c<=E&&(A.e.c=E)}Y=parseInt(w["number-columns-repeated"]||"1",10),E+=Y-1,Y=0,g={},y="",N=[]}X={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;O.t=y,N.length&&(O.R=N),O.a=q,W.push(O)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);q="",G=0,y="",j=0,N=[];break;case"creator":v[1]==="/"?q=a.slice(G,v.index):G=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);y="",j=0,N=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(I[l.name]=c,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(c="",l=yn(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=yn(v[0],!1),c+=XD[v[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=yn(v[0],!1),c+=XD[v[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=a.slice(d,v.index);break}else d=v.index+v[0].length;break;case"named-range":o=yn(v[0],!1),te=Ej(o["cell-range-address"]);var le={Name:o.name,Ref:te[0]+"!"+te[1]};K&&(le.Sheet=m.length),re.Names.push(le);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!w||!w["string-value"])){var Me=Sve(a.slice(j,v.index));y=(y.length>0?y+`
`:"")+Me[0]}else yn(v[0],!1),j=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{te=Ej(yn(v[0])["target-range-address"]),p[te[0]]["!autofilter"]={ref:te[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(X=yn(v[0],!1),!X.href)break;X.Target=ua(X.href),delete X.href,X.Target.charAt(0)=="#"&&X.Target.indexOf(".")>-1?(te=Ej(X.Target.slice(1)),X.Target="#"+te[0]+"!"+te[1]):X.Target.match(/^\.\.[\\\/]/)&&(X.Target=X.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var ue={Sheets:p,SheetNames:m,Workbook:re};return r.bookSheets&&delete ue.Sheets,ue}function YD(e,t){t=t||{},Zc(e,"META-INF/manifest.xml")&&Jce(ji(e,"META-INF/manifest.xml"),t);var r=Nc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var a=L9(Wa(r),t);return Zc(e,"meta.xml")&&(a.Props=SR(ji(e,"meta.xml"))),a}function QD(e,t){return L9(e,t)}var _ve=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+ig({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return hi+t}})(),JD=(function(){var e=function(i){return Ia(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,a=function(i,o,l){var c=[];c.push('      <table:table table:name="'+Ia(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,u=0,f=Zl(i["!ref"]||"A1"),p=i["!merges"]||[],m=0,b=Array.isArray(i);if(i["!cols"])for(u=0;u<=f.e.c;++u)c.push("        <table:table-column"+(i["!cols"][u]?' table:style-name="co'+i["!cols"][u].ods+'"':"")+`></table:table-column>
`);var v="",g=i["!rows"]||[];for(d=0;d<f.s.r;++d)v=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+v+`></table:table-row>
`);for(;d<=f.e.r;++d){for(v=g[d]?' table:style-name="ro'+g[d].ods+'"':"",c.push("        <table:table-row"+v+`>
`),u=0;u<f.s.c;++u)c.push(t);for(;u<=f.e.c;++u){var w=!1,y={},j="";for(m=0;m!=p.length;++m)if(!(p[m].s.c>u)&&!(p[m].s.r>d)&&!(p[m].e.c<u)&&!(p[m].e.r<d)){(p[m].s.c!=u||p[m].s.r!=d)&&(w=!0),y["table:number-columns-spanned"]=p[m].e.c-p[m].s.c+1,y["table:number-rows-spanned"]=p[m].e.r-p[m].s.r+1;break}if(w){c.push(r);continue}var N=gn({r:d,c:u}),S=b?(i[d]||[])[u]:i[N];if(S&&S.f&&(y["table:formula"]=Ia(Gme(S.f)),S.F&&S.F.slice(0,N.length)==N)){var E=Zl(S.F);y["table:number-matrix-columns-spanned"]=E.e.c-E.s.c+1,y["table:number-matrix-rows-spanned"]=E.e.r-E.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":j=S.v?"TRUE":"FALSE",y["office:value-type"]="boolean",y["office:boolean-value"]=S.v?"true":"false";break;case"n":j=S.w||String(S.v||0),y["office:value-type"]="float",y["office:value"]=S.v||0;break;case"s":case"str":j=S.v==null?"":S.v,y["office:value-type"]="string";break;case"d":j=S.w||gs(S.v).toISOString(),y["office:value-type"]="date",y["office:date-value"]=gs(S.v).toISOString(),y["table:style-name"]="ce1";break;default:c.push(t);continue}var A=e(j);if(S.l&&S.l.Target){var P=S.l.Target;P=P.charAt(0)=="#"?"#"+Vme(P.slice(1)):P,P.charAt(0)!="#"&&!P.match(/^\w+:/)&&(P="../"+P),A=hr("text:a",A,{"xlink:href":P.replace(/&/g,"&amp;")})}c.push("          "+hr("table:table-cell",hr("text:p",A,{}),y)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var u=0;u<d["!cols"].length;++u)if(d["!cols"][u]){var f=d["!cols"][u];if(f.width==null&&f.wpx==null&&f.wch==null)continue;j0(f),f.ods=l;var p=d["!cols"][u].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var u=0;u<d["!rows"].length;++u)if(d["!rows"][u]){d["!rows"][u].ods=c;var f=d["!rows"][u].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+f+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[hi],d=ig({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),u=ig({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+u+`>
`),c.push(kR().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var f=0;f!=o.SheetNames.length;++f)c.push(a(o.Sheets[o.SheetNames[f]],o,f));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function F9(e,t){if(t.bookType=="fods")return JD(e,t);var r=k3(),a="",s=[],i=[];return a="mimetype",In(r,a,"application/vnd.oasis.opendocument.spreadsheet"),a="content.xml",In(r,a,JD(e,t)),s.push([a,"text/xml"]),i.push([a,"ContentFile"]),a="styles.xml",In(r,a,_ve(e,t)),s.push([a,"text/xml"]),i.push([a,"StylesFile"]),a="meta.xml",In(r,a,hi+kR()),s.push([a,"text/xml"]),i.push([a,"MetadataFile"]),a="manifest.rdf",In(r,a,tde(i)),s.push([a,"application/rdf+xml"]),a="META-INF/manifest.xml",In(r,a,Zce(s)),r}function Lh(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function Bk(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Wa(L0(e))}function Cve(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):wc(Tu(e))}function Ave(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var a=0;a<t.length;++a)if(e[r+a]!=t[a])continue e;return!0}return!1}function S0(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),a=0;return e.forEach(function(s){r.set(s,a),a+=s.length}),r}function ZD(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Eve(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,a=e[t+14]&1,s=t+13;s>=t;--s)a=a*256+e[s];return(e[t+15]&128?-a:a)*Math.pow(10,r-6176)}function Tve(e,t,r){var a=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,a-6176);e[t+15]|=a>>7,e[t+14]|=(a&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function mg(e,t){var r=t?t[0]:0,a=e[r]&127;e:if(e[r++]>=128&&(a|=(e[r]&127)<<7,e[r++]<128||(a|=(e[r]&127)<<14,e[r++]<128)||(a|=(e[r]&127)<<21,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(a+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),a}function Oa(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Qs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ga(e){for(var t=[],r=[0];r[0]<e.length;){var a=r[0],s=mg(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=mg(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(a))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Ao(e){var t=[];return e.forEach(function(r,a){r.forEach(function(s){s.data&&(t.push(Oa(a*8+s.type)),s.type==2&&t.push(Oa(s.data.length)),t.push(s.data))})}),S0(t)}function Q3(e,t){return e?.map(function(r){return t(r.data)})||[]}function Qc(e){for(var t,r=[],a=[0];a[0]<e.length;){var s=mg(e,a),i=ga(e.slice(a[0],a[0]+s));a[0]+=s;var o={id:Qs(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=ga(l.data),d=Qs(c[3][0].data);o.messages.push({meta:c,data:e.slice(a[0],a[0]+d)}),a[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=Qs(i[3][0].data)>>>0>0),r.push(o)}return r}function om(e){var t=[];return e.forEach(function(r){var a=[];a[1]=[{data:Oa(r.id),type:0}],a[2]=[],r.merge!=null&&(a[3]=[{data:Oa(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:Oa(o.data.length)}],a[2].push({data:Ao(o.meta),type:2})});var i=Ao(a);t.push(Oa(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),S0(t)}function Ove(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],a=mg(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[S0(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var u=S0(s);if(u.length!=a)throw new Error("Unexpected length: ".concat(u.length," != ").concat(a));return u}function Jc(e){for(var t=[],r=0;r<e.length;){var a=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Ove(a,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return S0(t)}function lm(e){for(var t=[],r=0;r<e.length;){var a=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=Oa(a),o=i.length;t.push(i),a<=60?(o++,t.push(new Uint8Array([a-1<<2]))):a<=256?(o+=2,t.push(new Uint8Array([240,a-1&255]))):a<=65536?(o+=3,t.push(new Uint8Array([244,a-1&255,a-1>>8&255]))):a<=16777216?(o+=4,t.push(new Uint8Array([248,a-1&255,a-1>>8&255,a-1>>16&255]))):a<=4294967296&&(o+=5,t.push(new Uint8Array([252,a-1&255,a-1>>8&255,a-1>>16&255,a-1>>>24&255]))),t.push(e.slice(r,r+a)),o+=a,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=a}return S0(t)}function Pve(e,t,r,a){var s=Lh(e),i=s.getUint32(4,!0),o=(a>1?12:8)+ZD(i&(a>1?3470:398))*4,l=-1,c=-1,d=NaN,u=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=ZD(i&(a>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(u.setTime(u.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var f;switch(e[2]){case 0:break;case 2:f={t:"n",v:d};break;case 3:f={t:"s",v:t[c]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(l>-1)f={t:"s",v:r[l]};else if(c>-1)f={t:"s",v:t[c]};else if(!isNaN(d))f={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return f}function Ive(e,t,r){var a=Lh(e),s=a.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,u=new Date(2001,0,1);s&1&&(c=Eve(e,i),i+=16),s&2&&(d=a.getFloat64(i,!0),i+=8),s&4&&(u.setTime(u.getTime()+a.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=a.getUint32(i,!0),i+=4),s&16&&(o=a.getUint32(i,!0),i+=4);var f;switch(e[1]){case 0:break;case 2:f={t:"n",v:c};break;case 3:f={t:"s",v:t[l]};break;case 5:f={t:"d",v:u};break;case 6:f={t:"b",v:d>0};break;case 7:f={t:"n",v:d/86400};break;case 8:f={t:"e",v:0};break;case 9:if(o>-1)f={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:f={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return f}function Oj(e,t){var r=new Uint8Array(32),a=Lh(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Tve(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,a.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(8,i,!0),r.slice(0,s)}function Pj(e,t){var r=new Uint8Array(32),a=Lh(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,a.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,a.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,a.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return a.setUint32(4,i,!0),r.slice(0,s)}function Dve(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Pve(e,t,r,e[0]);case 5:return Ive(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function nl(e){var t=ga(e);return mg(t[1][0].data)}function e8(e,t){var r=ga(t.data),a=Qs(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=ga(o.data),c=Qs(l[1][0].data)>>>0;switch(a){case 1:i[c]=Bk(l[3][0].data);break;case 8:{var d=e[nl(l[9][0].data)][0],u=ga(d.data),f=e[nl(u[1][0].data)][0],p=Qs(f.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var m=ga(f.data);i[c]=m[3].map(function(b){return Bk(b.data)}).join("")}break}}),i}function Lve(e,t){var r,a,s,i,o,l,c,d,u,f,p,m,b,v,g=ga(e),w=Qs(g[1][0].data)>>>0,y=Qs(g[2][0].data)>>>0,j=((a=(r=g[8])==null?void 0:r[0])==null?void 0:a.data)&&Qs(g[8][0].data)>0||!1,N,S;if((i=(s=g[7])==null?void 0:s[0])!=null&&i.data&&t!=0)N=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,S=(d=(c=g[6])==null?void 0:c[0])==null?void 0:d.data;else if((f=(u=g[4])==null?void 0:u[0])!=null&&f.data&&t!=1)N=(m=(p=g[4])==null?void 0:p[0])==null?void 0:m.data,S=(v=(b=g[3])==null?void 0:b[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var E=j?4:1,A=Lh(N),P=[],I=0;I<N.length/2;++I){var B=A.getUint16(I*2,!0);B<65535&&P.push([I,B])}if(P.length!=y)throw"Expected ".concat(y," cells, found ").concat(P.length);var T=[];for(I=0;I<P.length-1;++I)T[P[I][0]]=S.subarray(P[I][1]*E,P[I+1][1]*E);return P.length>=1&&(T[P[P.length-1][0]]=S.subarray(P[P.length-1][1]*E)),{R:w,cells:T}}function Fve(e,t){var r,a=ga(t.data),s=(r=a?.[7])!=null&&r[0]?Qs(a[7][0].data)>>>0>0?1:0:-1,i=Q3(a[5],function(o){return Lve(o,s)});return{nrows:Qs(a[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function Mve(e,t,r){var a,s=ga(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Qs(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Qs(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=An(i);var o=ga(s[4][0].data),l=e8(e,e[nl(o[4][0].data)][0]),c=(a=o[17])!=null&&a[0]?e8(e,e[nl(o[17][0].data)][0]):[],d=ga(o[3][0].data),u=0;d[1].forEach(function(f){var p=ga(f.data),m=e[nl(p[2][0].data)][0],b=Qs(m.meta[1][0].data);if(b!=6002)throw new Error("6001 unexpected reference to ".concat(b));var v=Fve(e,m);v.data.forEach(function(g,w){g.forEach(function(y,j){var N=gn({r:u+w,c:j}),S=Dve(y,l,c);S&&(r[N]=S)})}),u+=v.nrows})}function Rve(e,t){var r=ga(t.data),a={"!ref":"A1"},s=e[nl(r[2][0].data)],i=Qs(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Mve(e,s[0],a),a}function Bve(e,t){var r,a=ga(t.data),s={name:(r=a[1])!=null&&r[0]?Bk(a[1][0].data):"",sheets:[]},i=Q3(a[2],nl);return i.forEach(function(o){e[o].forEach(function(l){var c=Qs(l.meta[1][0].data);c==6e3&&s.sheets.push(Rve(e,l))})}),s}function Uve(e,t){var r=r_(),a=ga(t.data),s=Q3(a[1],nl);if(s.forEach(function(i){e[i].forEach(function(o){var l=Qs(o.meta[1][0].data);if(l==2){var c=Bve(e,o);c.sheets.forEach(function(d,u){n_(r,d,u==0?c.name:c.name+"_"+u,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function Ij(e){var t,r,a,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=Jc(c.content)}catch(f){return console.log("?? "+c.content.length+" "+(f.message||f))}var u;try{u=Qc(d)}catch(f){return console.log("## "+(f.message||f))}u.forEach(function(f){i[f.id]=f.messages,o.push(f.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(a=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:a[1])==null?void 0:s[0].data)&&Qs(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var u=Qs(d.meta[1][0].data)>>>0;if(u==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Uve(i,l)}function qve(e,t,r){var a,s,i,o;if(!((a=e[6])!=null&&a[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Qs(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=Lh(e[7][0].data),u=0,f=[],p=Lh(e[4][0].data),m=0,b=[],v=0;v<t.length;++v){if(t[v]==null){d.setUint16(v*2,65535,!0),p.setUint16(v*2,65535);continue}d.setUint16(v*2,u,!0),p.setUint16(v*2,m,!0);var g,w;switch(typeof t[v]){case"string":g=Oj({t:"s",v:t[v]},r),w=Pj({t:"s",v:t[v]},r);break;case"number":g=Oj({t:"n",v:t[v]},r),w=Pj({t:"n",v:t[v]},r);break;case"boolean":g=Oj({t:"b",v:t[v]},r),w=Pj({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}f.push(g),u+=g.length,b.push(w),m+=w.length,++c}for(e[2][0].data=Oa(c);v<e[7][0].data.length/2;++v)d.setUint16(v*2,65535,!0),p.setUint16(v*2,65535,!0);return e[6][0].data=S0(f),e[3][0].data=S0(b),c}function $ve(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var a=Zl(r["!ref"]);a.s.r=a.s.c=0;var s=!1;a.e.c>9&&(s=!0,a.e.c=9),a.e.r>49&&(s=!0,a.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(An(a)));var i=Ab(r,{range:a,header:1}),o=["~Sh33tJ5~"];i.forEach(function(q){return q.forEach(function(G){typeof G=="string"&&o.push(G)})});var l={},c=[],d=Zr.read(t.numbers,{type:"base64"});d.FileIndex.map(function(q,G){return[q,d.FullPaths[G]]}).forEach(function(q){var G=q[0],U=q[1];if(G.type==2&&G.name.match(/\.iwa/)){var K=G.content,ae=Jc(K),me=Qc(ae);me.forEach(function(se){c.push(se.id),l[se.id]={deps:[],location:U,type:Qs(se.messages[0].meta[1][0].data)}})}}),c.sort(function(q,G){return q-G});var u=c.filter(function(q){return q>1}).map(function(q){return[q,Oa(q)]});d.FileIndex.map(function(q,G){return[q,d.FullPaths[G]]}).forEach(function(q){var G=q[0];if(q[1],!!G.name.match(/\.iwa/)){var U=Qc(Jc(G.content));U.forEach(function(K){K.messages.forEach(function(ae){u.forEach(function(me){K.messages.some(function(se){return Qs(se.meta[1][0].data)!=11006&&Ave(se.data,me[1])})&&l[me[0]].deps.push(K.id)})})})}});for(var f=Zr.find(d,l[1].location),p=Qc(Jc(f.content)),m,b=0;b<p.length;++b){var v=p[b];v.id==1&&(m=v)}var g=nl(ga(m.messages[0].data)[1][0].data);for(f=Zr.find(d,l[g].location),p=Qc(Jc(f.content)),b=0;b<p.length;++b)v=p[b],v.id==g&&(m=v);for(g=nl(ga(m.messages[0].data)[2][0].data),f=Zr.find(d,l[g].location),p=Qc(Jc(f.content)),b=0;b<p.length;++b)v=p[b],v.id==g&&(m=v);for(g=nl(ga(m.messages[0].data)[2][0].data),f=Zr.find(d,l[g].location),p=Qc(Jc(f.content)),b=0;b<p.length;++b)v=p[b],v.id==g&&(m=v);var w=ga(m.messages[0].data);{w[6][0].data=Oa(a.e.r+1),w[7][0].data=Oa(a.e.c+1);var y=nl(w[46][0].data),j=Zr.find(d,l[y].location),N=Qc(Jc(j.content));{for(var S=0;S<N.length&&N[S].id!=y;++S);if(N[S].id!=y)throw"Bad ColumnRowUIDMapArchive";var E=ga(N[S].messages[0].data);E[1]=[],E[2]=[],E[3]=[];for(var A=0;A<=a.e.c;++A){var P=[];P[1]=P[2]=[{type:0,data:Oa(A+420690)}],E[1].push({type:2,data:Ao(P)}),E[2].push({type:0,data:Oa(A)}),E[3].push({type:0,data:Oa(A)})}E[4]=[],E[5]=[],E[6]=[];for(var I=0;I<=a.e.r;++I)P=[],P[1]=P[2]=[{type:0,data:Oa(I+726270)}],E[4].push({type:2,data:Ao(P)}),E[5].push({type:0,data:Oa(I)}),E[6].push({type:0,data:Oa(I)});N[S].messages[0].data=Ao(E)}j.content=lm(om(N)),j.size=j.content.length,delete w[46];var B=ga(w[4][0].data);{B[7][0].data=Oa(a.e.r+1);var T=ga(B[1][0].data),_=nl(T[2][0].data);j=Zr.find(d,l[_].location),N=Qc(Jc(j.content));{if(N[0].id!=_)throw"Bad HeaderStorageBucket";var R=ga(N[0].messages[0].data);for(I=0;I<i.length;++I){var z=ga(R[2][0].data);z[1][0].data=Oa(I),z[4][0].data=Oa(i[I].length),R[2][I]={type:R[2][0].type,data:Ao(z)}}N[0].messages[0].data=Ao(R)}j.content=lm(om(N)),j.size=j.content.length;var H=nl(B[2][0].data);j=Zr.find(d,l[H].location),N=Qc(Jc(j.content));{if(N[0].id!=H)throw"Bad HeaderStorageBucket";for(R=ga(N[0].messages[0].data),A=0;A<=a.e.c;++A)z=ga(R[2][0].data),z[1][0].data=Oa(A),z[4][0].data=Oa(a.e.r+1),R[2][A]={type:R[2][0].type,data:Ao(z)};N[0].messages[0].data=Ao(R)}j.content=lm(om(N)),j.size=j.content.length;var Y=nl(B[4][0].data);(function(){for(var q=Zr.find(d,l[Y].location),G=Qc(Jc(q.content)),U,K=0;K<G.length;++K){var ae=G[K];ae.id==Y&&(U=ae)}var me=ga(U.messages[0].data);{me[3]=[];var se=[];o.forEach(function(ue,Ue){se[1]=[{type:0,data:Oa(Ue)}],se[2]=[{type:0,data:Oa(1)}],se[3]=[{type:2,data:Cve(ue)}],me[3].push({type:2,data:Ao(se)})})}U.messages[0].data=Ao(me);var le=om(G),Me=lm(le);q.content=Me,q.size=q.content.length})();var J=ga(B[3][0].data);{var re=J[1][0];delete J[2];var X=ga(re.data);{var te=nl(X[2][0].data);(function(){for(var q=Zr.find(d,l[te].location),G=Qc(Jc(q.content)),U,K=0;K<G.length;++K){var ae=G[K];ae.id==te&&(U=ae)}var me=ga(U.messages[0].data);{delete me[6],delete J[7];var se=new Uint8Array(me[5][0].data);me[5]=[];for(var le=0,Me=0;Me<=a.e.r;++Me){var ue=ga(se);le+=qve(ue,i[Me],o),ue[1][0].data=Oa(Me),me[5].push({data:Ao(ue),type:2})}me[1]=[{type:0,data:Oa(a.e.c+1)}],me[2]=[{type:0,data:Oa(a.e.r+1)}],me[3]=[{type:0,data:Oa(le)}],me[4]=[{type:0,data:Oa(a.e.r+1)}]}U.messages[0].data=Ao(me);var Ue=om(G),Ae=lm(Ue);q.content=Ae,q.size=q.content.length})()}re.data=Ao(X)}B[3][0].data=Ao(J)}w[4][0].data=Ao(B)}m.messages[0].data=Ao(w);var W=om(p),O=lm(W);return f.content=O,f.size=f.content.length,d}function M9(e){return function(r){for(var a=0;a!=e.length;++a){var s=e[a];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function J3(e){M9([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function Z3(e){M9([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function zve(e){return zn.WS.indexOf(e)>-1?"sheet":e==zn.CS?"chart":e==zn.DS?"dialog":e==zn.MS?"macro":e&&e.length?e:"sheet"}function Hve(e,t){if(!e)return 0;try{e=t.map(function(a){return a.id||(a.id=a.strRelID),[a.name,e["!id"][a.id].Target,zve(e["!id"][a.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Wve(e,t,r,a,s,i,o,l,c,d,u,f){try{i[a]=dx(Nc(e,r,!0),t);var p=ji(e,t),m;switch(l){case"sheet":m=hge(p,t,s,c,i[a],d,u,f);break;case"chart":if(m=mge(p,t,s,c,i[a],d,u,f),!m||!m["!drawel"])break;var b=Jp(m["!drawel"].Target,t),v=lg(b),g=ehe(Nc(e,b,!0),dx(Nc(e,v,!0),b)),w=Jp(g,b),y=lg(w);m=qxe(Nc(e,w,!0),w,c,dx(Nc(e,y,!0),w),d,m);break;case"macro":m=pge(p,t,s,c,i[a],d,u,f);break;case"dialog":m=xge(p,t,s,c,i[a],d,u,f);break;default:throw new Error("Unrecognized sheet type "+l)}o[a]=m;var j=[];i&&i[a]&&Js(i[a]).forEach(function(N){var S="";if(i[a][N].Type==zn.CMNT){S=Jp(i[a][N].Target,t);var E=yge(ji(e,S,!0),S,c);if(!E||!E.length)return;BD(m,E,!1)}i[a][N].Type==zn.TCMNT&&(S=Jp(i[a][N].Target,t),j=j.concat(rhe(ji(e,S,!0),c)))}),j&&j.length&&BD(m,j,!0,c.people||[])}catch(N){if(c.WTF)throw N}}function Kc(e){return e.charAt(0)=="/"?e.slice(1):e}function Gve(e,t){if(pp(),t=t||{},J3(t),Zc(e,"META-INF/manifest.xml")||Zc(e,"objectdata.xml"))return YD(e,t);if(Zc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof Ij<"u"){if(e.FileIndex)return Ij(e);var r=Zr.utils.cfb_new();return iD(e).forEach(function(z){In(r,z,nce(e,z))}),Ij(r)}throw new Error("Unsupported NUMBERS file")}if(!Zc(e,"[Content_Types].xml"))throw Zc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Zc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var a=iD(e),s=Yce(Nc(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",ji(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!ji(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(ux=[],s.sst)try{ux=bge(ji(e,Kc(s.sst)),s.sst,t)}catch(z){if(t.WTF)throw z}t.cellStyles&&s.themes.length&&(c=vge(Nc(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=gge(ji(e,Kc(s.style)),s.style,c,t))}s.links.map(function(z){try{var H=dx(Nc(e,lg(Kc(z))),z);return Nge(ji(e,Kc(z)),H,z,t)}catch{}});var u=fge(ji(e,Kc(s.workbooks[0])),s.workbooks[0],t),f={},p="";s.coreprops.length&&(p=ji(e,Kc(s.coreprops[0]),!0),p&&(f=SR(p)),s.extprops.length!==0&&(p=ji(e,Kc(s.extprops[0]),!0),p&&nde(p,f,t)));var m={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(p=Nc(e,Kc(s.custprops[0]),!0),p&&(m=sde(p,t)));var b={};if((t.bookSheets||t.bookProps)&&(u.Sheets?o=u.Sheets.map(function(H){return H.name}):f.Worksheets&&f.SheetNames.length>0&&(o=f.SheetNames),t.bookProps&&(b.Props=f,b.Custprops=m),t.bookSheets&&typeof o<"u"&&(b.SheetNames=o),t.bookSheets?b.SheetNames:t.bookProps))return b;o={};var v={};t.bookDeps&&s.calcchain&&(v=wge(ji(e,Kc(s.calcchain)),s.calcchain));var g=0,w={},y,j;{var N=u.Sheets;f.Worksheets=N.length,f.SheetNames=[];for(var S=0;S!=N.length;++S)f.SheetNames[S]=N[S].name}var E=i?"bin":"xml",A=s.workbooks[0].lastIndexOf("/"),P=(s.workbooks[0].slice(0,A+1)+"_rels/"+s.workbooks[0].slice(A+1)+".rels").replace(/^\//,"");Zc(e,P)||(P="xl/_rels/workbook."+E+".rels");var I=dx(Nc(e,P,!0),P.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=jge(ji(e,Kc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=ahe(ji(e,Kc(s.people[0])),t)),I&&(I=Hve(I,u.Sheets));var B=ji(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=f.Worksheets;++g){var T="sheet";if(I&&I[g]?(y="xl/"+I[g][1].replace(/[\/]?xl\//,""),Zc(e,y)||(y=I[g][1]),Zc(e,y)||(y=P.replace(/_rels\/.*$/,"")+I[g][1]),T=I[g][2]):(y="xl/worksheets/sheet"+(g+1-B)+"."+E,y=y.replace(/sheet0\./,"sheet.")),j=y.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(f.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var _=!1,R=0;R!=t.sheets.length;++R)typeof t.sheets[R]=="number"&&t.sheets[R]==g&&(_=1),typeof t.sheets[R]=="string"&&t.sheets[R].toLowerCase()==f.SheetNames[g].toLowerCase()&&(_=1);if(!_)continue e}}Wve(e,y,j,f.SheetNames[g],g,w,o,T,t,u,c,d)}return b={Directory:s,Workbook:u,Props:f,Custprops:m,Deps:v,Sheets:o,SheetNames:f.SheetNames,Strings:ux,Styles:d,Themes:c,SSF:vs(dn)},t&&t.bookFiles&&(e.files?(b.keys=a,b.files=e.files):(b.keys=[],b.files={},e.FullPaths.forEach(function(z,H){z=z.replace(/^Root Entry[\/]/,""),b.keys.push(z),b.files[z]=e.FileIndex[H]}))),t&&t.bookVBA&&(s.vba.length>0?b.vbaraw=ji(e,Kc(s.vba[0]),!0):s.defaults&&s.defaults.bin===fhe&&(b.vbaraw=ji(e,"xl/vbaProject.bin",!0))),b}function Vve(e,t){var r=t||{},a="Workbook",s=Zr.find(e,a);try{if(a="/!DataSpaces/Version",s=Zr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(jfe(s.content),a="/!DataSpaces/DataSpaceMap",s=Zr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var i=Sfe(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Zr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var o=_fe(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+a);if(a="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Zr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);Afe(s.content)}catch{}if(a="/EncryptionInfo",s=Zr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);var l=Efe(s.content);if(a="/EncryptedPackage",s=Zr.find(e,a),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+a);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Kve(e,t){return t.bookType=="ods"?F9(e,t):t.bookType=="numbers"?$ve(e,t):t.bookType=="xlsb"?Xve(e,t):Yve(e,t)}function Xve(e,t){gm=1024,e&&!e.SSF&&(e.SSF=vs(dn)),e&&e.SSF&&(pp(),by(e.SSF),t.revssf=wy(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,fx?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",a=d9.indexOf(t.bookType)>-1,s=R3();Z3(t=t||{});var i=k3(),o="",l=0;if(t.cellXfs=[],M0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",In(i,o,_R(e.Props,t)),s.coreprops.push(o),Pa(t.rels,2,o,zn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,In(i,o,ER(e.Props)),s.extprops.push(o),Pa(t.rels,3,o,zn.EXT_PROPS),e.Custprops!==e.Props&&Js(e.Custprops||{}).length>0&&(o="docProps/custom.xml",In(i,o,TR(e.Custprops)),s.custprops.push(o),Pa(t.rels,4,o,zn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},f=e.Sheets[e.SheetNames[l-1]],p=(f||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,In(i,o,Sge(l-1,o,t,e,u)),s.sheets.push(o),Pa(t.wbrels,-1,"worksheets/sheet"+l+"."+r,zn.WS[0]),f){var m=f["!comments"],b=!1,v="";m&&m.length>0&&(v="xl/comments"+l+"."+r,In(i,v,Age(m,v)),s.comments.push(v),Pa(u,-1,"../comments"+l+"."+r,zn.CMNT),b=!0),f["!legacy"]&&b&&In(i,"xl/drawings/vmlDrawing"+l+".vml",l9(l,f["!comments"])),delete f["!comments"],delete f["!legacy"]}u["!id"].rId1&&In(i,lg(o),km(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,In(i,o,Cge(t.Strings,o,t)),s.strs.push(o),Pa(t.wbrels,-1,"sharedStrings."+r,zn.SST)),o="xl/workbook."+r,In(i,o,kge(e,o)),s.workbooks.push(o),Pa(t.rels,1,o,zn.WB),o="xl/theme/theme1.xml",In(i,o,H3(e.Themes,t)),s.themes.push(o),Pa(t.wbrels,-1,"theme/theme1.xml",zn.THEME),o="xl/styles."+r,In(i,o,_ge(e,o,t)),s.styles.push(o),Pa(t.wbrels,-1,"styles."+r,zn.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",In(i,o,e.vbaraw),s.vba.push(o),Pa(t.wbrels,-1,"vbaProject.bin",zn.VBA)),o="xl/metadata."+r,In(i,o,Ege(o)),s.metadata.push(o),Pa(t.wbrels,-1,"metadata."+r,zn.XLMETA),In(i,"[Content_Types].xml",jR(s,t)),In(i,"_rels/.rels",km(t.rels)),In(i,"xl/_rels/workbook."+r+".rels",km(t.wbrels)),delete t.revssf,delete t.ssf,i}function Yve(e,t){gm=1024,e&&!e.SSF&&(e.SSF=vs(dn)),e&&e.SSF&&(pp(),by(e.SSF),t.revssf=wy(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,fx?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",a=d9.indexOf(t.bookType)>-1,s=R3();Z3(t=t||{});var i=k3(),o="",l=0;if(t.cellXfs=[],M0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",In(i,o,_R(e.Props,t)),s.coreprops.push(o),Pa(t.rels,2,o,zn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,In(i,o,ER(e.Props)),s.extprops.push(o),Pa(t.rels,3,o,zn.EXT_PROPS),e.Custprops!==e.Props&&Js(e.Custprops||{}).length>0&&(o="docProps/custom.xml",In(i,o,TR(e.Custprops)),s.custprops.push(o),Pa(t.rels,4,o,zn.CUST_PROPS));var u=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},p=e.Sheets[e.SheetNames[l-1]],m=(p||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,In(i,o,w9(l-1,t,e,f)),s.sheets.push(o),Pa(t.wbrels,-1,"worksheets/sheet"+l+"."+r,zn.WS[0]),p){var b=p["!comments"],v=!1,g="";if(b&&b.length>0){var w=!1;b.forEach(function(y){y[1].forEach(function(j){j.T==!0&&(w=!0)})}),w&&(g="xl/threadedComments/threadedComment"+l+"."+r,In(i,g,nhe(b,u,t)),s.threadedcomments.push(g),Pa(f,-1,"../threadedComments/threadedComment"+l+"."+r,zn.TCMNT)),g="xl/comments"+l+"."+r,In(i,g,c9(b)),s.comments.push(g),Pa(f,-1,"../comments"+l+"."+r,zn.CMNT),v=!0}p["!legacy"]&&v&&In(i,"xl/drawings/vmlDrawing"+l+".vml",l9(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}f["!id"].rId1&&In(i,lg(o),km(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,In(i,o,YR(t.Strings,t)),s.strs.push(o),Pa(t.wbrels,-1,"sharedStrings."+r,zn.SST)),o="xl/workbook."+r,In(i,o,_9(e)),s.workbooks.push(o),Pa(t.rels,1,o,zn.WB),o="xl/theme/theme1.xml",In(i,o,H3(e.Themes,t)),s.themes.push(o),Pa(t.wbrels,-1,"theme/theme1.xml",zn.THEME),o="xl/styles."+r,In(i,o,a9(e,t)),s.styles.push(o),Pa(t.wbrels,-1,"styles."+r,zn.STY),e.vbaraw&&a&&(o="xl/vbaProject.bin",In(i,o,e.vbaraw),s.vba.push(o),Pa(t.wbrels,-1,"vbaProject.bin",zn.VBA)),o="xl/metadata."+r,In(i,o,o9()),s.metadata.push(o),Pa(t.wbrels,-1,"metadata."+r,zn.XLMETA),u.length>1&&(o="xl/persons/person.xml",In(i,o,she(u)),s.people.push(o),Pa(t.wbrels,-1,"persons/person.xml",zn.PEOPLE)),In(i,"[Content_Types].xml",jR(s,t)),In(i,"_rels/.rels",km(t.rels)),In(i,"xl/_rels/workbook."+r+".rels",km(t.wbrels)),delete t.revssf,delete t.ssf,i}function e_(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Cc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Qve(e,t){return Zr.find(e,"EncryptedPackage")?Vve(e,t):T9(e,t)}function Jve(e,t){var r,a=e,s=t||{};return s.type||(s.type=Rn&&Buffer.isBuffer(e)?"buffer":"base64"),r=JM(a,s),Gve(r,s)}function R9(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return Mk(e.slice(r),t);default:break e}return rp.to_workbook(e,t)}function Zve(e,t){var r="",a=e_(e,t);switch(t.type){case"base64":r=Cc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=Oh(e);break;default:throw new Error("Unrecognized type "+t.type)}return a[0]==239&&a[1]==187&&a[2]==191&&(r=Wa(r)),t.type="binary",R9(r,t)}function e1e(e,t){var r=e;return t.type=="base64"&&(r=Cc(r)),r=rg.utils.decode(1200,r.slice(2),"str"),t.type="binary",R9(r,t)}function t1e(e){return e.match(/[^\x00-\x7F]/)?Tu(e):e}function Dj(e,t,r,a){return a?(r.type="string",rp.to_workbook(e,r)):rp.to_workbook(t,r)}function Cb(e,t){b3();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return Cb(new Uint8Array(e),(r=vs(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var a=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),_m={},r.dateNF&&(_m.dateNF=r.dateNF),r.type||(r.type=Rn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Rn?"buffer":"binary",a=Xle(e),typeof Uint8Array<"u"&&!Rn&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,a=t1e(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=vs(r),r.type="array",Cb(y3(a),r)}switch((s=e_(a,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Qve(Zr.read(a,r),r);break;case 9:if(s[1]<=8)return T9(a,r);break;case 60:return Mk(a,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return ife(a,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return KR.to_workbook(a,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Jve(a,r):Dj(e,a,r,i);case 239:return s[3]===60?Mk(a,r):Dj(e,a,r,i);case 255:if(s[1]===254)return e1e(a,r);if(s[1]===0&&s[2]===2&&s[3]===0)return vh.to_workbook(a,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return vh.to_workbook(a,r);break;case 3:case 131:case 139:case 140:return Fk.to_workbook(a,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return t9.to_workbook(a,r);break;case 10:case 13:case 32:return Zve(a,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return sfe.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?Fk.to_workbook(a,r):Dj(e,a,r,i)}function B9(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return Cg(t.file,Zr.write(e,{type:Rn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Zr.write(e,t)}function r1e(e,t){var r=vs(t||{}),a=Kve(e,r);return n1e(a,r)}function n1e(e,t){var r={},a=Rn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=a;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=a;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Zr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(vy(s))}return t.password&&typeof encrypt_agile<"u"?B9(encrypt_agile(s,t.password),t):t.type==="file"?Cg(t.file,s):t.type=="string"?Wa(s):s}function a1e(e,t){var r=t||{},a=tve(e,r);return B9(a,r)}function ku(e,t,r){r||(r="");var a=r+e;switch(t.type){case"base64":return ng(Tu(a));case"binary":return Tu(a);case"string":return e;case"file":return Cg(t.file,a,"utf8");case"buffer":return Rn?Lf(a,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(a):ku(a,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function s1e(e,t){switch(t.type){case"base64":return ng(e);case"binary":return e;case"string":return e;case"file":return Cg(t.file,e,"binary");case"buffer":return Rn?Lf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Uv(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",a=0;a<e.length;++a)r+=String.fromCharCode(e[a]);return t.type=="base64"?ng(r):t.type=="string"?Wa(r):r;case"file":return Cg(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function U9(e,t){b3(),Qxe(e);var r=vs(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var a=U9(e,r);return r.type="array",vy(a)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ku(Kge(e,r),r);case"slk":case"sylk":return ku(VR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ku(P9(e.Sheets[e.SheetNames[s]],r),r);case"txt":return s1e(q9(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ku(t_(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ku(KR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Uv(Fk.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ku(rp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ku(t9.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ku(XR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ku(F9(e,r),r);case"wk1":return Uv(vh.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Uv(vh.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Uv(O9(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),a1e(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return r1e(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function i1e(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function o1e(e,t,r){var a={};return a.type="file",a.file=t,i1e(a),U9(e,a)}function l1e(e,t,r,a,s,i,o,l){var c=ui(r),d=l.defval,u=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),f=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||e[r])for(var m=t.s.c;m<=t.e.c;++m){var b=o?e[r][m]:e[a[m]+c];if(b===void 0||b.t===void 0){if(d===void 0)continue;i[m]!=null&&(p[i[m]]=d);continue}var v=b.v;switch(b.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+b.t)}if(i[m]!=null){if(v==null)if(b.t=="e"&&v===null)p[i[m]]=null;else if(d!==void 0)p[i[m]]=d;else if(u&&v===null)p[i[m]]=null;else continue;else p[i[m]]=u&&(b.t!=="n"||b.t==="n"&&l.rawNumbers!==!1)?v:Of(b,v,l);v!=null&&(f=!1)}}return{row:p,isempty:f}}function Ab(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},a=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},u=d.range!=null?d.range:e["!ref"];switch(d.header===1?a=1:d.header==="A"?a=2:Array.isArray(d.header)?a=3:d.header==null&&(a=0),typeof u){case"string":c=ha(u);break;case"number":c=ha(e["!ref"]),c.s.r=u;break;default:c=u}a>0&&(s=0);var f=ui(c.s.r),p=[],m=[],b=0,v=0,g=Array.isArray(e),w=c.s.r,y=0,j={};g&&!e[w]&&(e[w]=[]);var N=d.skipHidden&&e["!cols"]||[],S=d.skipHidden&&e["!rows"]||[];for(y=c.s.c;y<=c.e.c;++y)if(!(N[y]||{}).hidden)switch(p[y]=Bs(y),r=g?e[w][y]:e[p[y]+f],a){case 1:i[y]=y-c.s.c;break;case 2:i[y]=p[y];break;case 3:i[y]=d.header[y-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Of(r,null,d),v=j[o]||0,!v)j[o]=1;else{do l=o+"_"+v++;while(j[l]);j[o]=v,j[l]=1}i[y]=l}for(w=c.s.r+s;w<=c.e.r;++w)if(!(S[w]||{}).hidden){var E=l1e(e,c,w,p,a,i,g,d);(E.isempty===!1||(a===1?d.blankrows!==!1:d.blankrows))&&(m[b++]=E.row)}return m.length=b,m}var t8=/"/g;function c1e(e,t,r,a,s,i,o,l){for(var c=!0,d=[],u="",f=ui(r),p=t.s.c;p<=t.e.c;++p)if(a[p]){var m=l.dense?(e[r]||[])[p]:e[a[p]+f];if(m==null)u="";else if(m.v!=null){c=!1,u=""+(l.rawNumbers&&m.t=="n"?m.v:Of(m,null,l));for(var b=0,v=0;b!==u.length;++b)if((v=u.charCodeAt(b))===s||v===i||v===34||l.forceQuotes){u='"'+u.replace(t8,'""')+'"';break}u=="ID"&&(u='"ID"')}else m.f!=null&&!m.F?(c=!1,u="="+m.f,u.indexOf(",")>=0&&(u='"'+u.replace(t8,'""')+'"')):u="";d.push(u)}return l.blankrows===!1&&c?null:d.join(o)}function t_(e,t){var r=[],a=t??{};if(e==null||e["!ref"]==null)return"";var s=ha(e["!ref"]),i=a.FS!==void 0?a.FS:",",o=i.charCodeAt(0),l=a.RS!==void 0?a.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),u="",f=[];a.dense=Array.isArray(e);for(var p=a.skipHidden&&e["!cols"]||[],m=a.skipHidden&&e["!rows"]||[],b=s.s.c;b<=s.e.c;++b)(p[b]||{}).hidden||(f[b]=Bs(b));for(var v=0,g=s.s.r;g<=s.e.r;++g)(m[g]||{}).hidden||(u=c1e(e,s,g,f,o,c,i,a),u!=null&&(a.strip&&(u=u.replace(d,"")),(u||a.blankrows!==!1)&&r.push((v++?l:"")+u)));return delete a.dense,r.join("")}function q9(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=t_(e,t);return r}function d1e(e){var t="",r,a="";if(e==null||e["!ref"]==null)return[];var s=ha(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=Bs(l);for(var u=s.s.r;u<=s.e.r;++u)for(i=ui(u),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[u]||[])[l]:e[t],a="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;a=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)a=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)a=""+r.v;else if(r.t=="b")a=r.v?"TRUE":"FALSE";else if(r.w!==void 0)a="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?a="'"+r.v:a=""+r.v}}c[c.length]=t+"="+a}return c}function $9(e,t,r){var a=r||{},s=+!a.skipHeader,i=e||{},o=0,l=0;if(i&&a.origin!=null)if(typeof a.origin=="number")o=a.origin;else{var c=typeof a.origin=="string"?Us(a.origin):a.origin;o=c.r,l=c.c}var d,u={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var f=ha(i["!ref"]);u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(o=f.e.r+1,u.e.r=o+t.length-1+s)}else o==-1&&(o=0,u.e.r=t.length-1+s);var p=a.header||[],m=0;t.forEach(function(v,g){Js(v).forEach(function(w){(m=p.indexOf(w))==-1&&(p[m=p.length]=w);var y=v[w],j="z",N="",S=gn({c:l+m,r:o+g+s});d=pg(i,S),y&&typeof y=="object"&&!(y instanceof Date)?i[S]=y:(typeof y=="number"?j="n":typeof y=="boolean"?j="b":typeof y=="string"?j="s":y instanceof Date?(j="d",a.cellDates||(j="n",y=zi(y)),N=a.dateNF||dn[14]):y===null&&a.nullError&&(j="e",y=0),d?(d.t=j,d.v=y,delete d.w,delete d.R,N&&(d.z=N)):i[S]=d={t:j,v:y},N&&(d.z=N))})}),u.e.c=Math.max(u.e.c,l+p.length-1);var b=ui(o);if(s)for(m=0;m<p.length;++m)i[Bs(m+l)+b]={t:"s",v:p[m]};return i["!ref"]=An(u),i}function u1e(e,t){return $9(null,e,t)}function pg(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var a=Us(t);return e[a.r]||(e[a.r]=[]),e[a.r][a.c]||(e[a.r][a.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?pg(e,gn(t)):pg(e,gn({r:t,c:r||0}))}function f1e(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function r_(){return{SheetNames:[],Sheets:{}}}function n_(e,t,r,a){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(a&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(S9(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function h1e(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var a=f1e(e,t);switch(e.Workbook.Sheets[a]||(e.Workbook.Sheets[a]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[a].Hidden=r}function m1e(e,t){return e.z=t,e}function z9(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function p1e(e,t,r){return z9(e,"#"+t,r)}function x1e(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function g1e(e,t,r,a){for(var s=typeof t!="string"?t:ha(t),i=typeof t=="string"?t:An(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=pg(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,a&&(c.D=!0))}return e}var Q0={encode_col:Bs,encode_row:ui,encode_cell:gn,encode_range:An,decode_col:P3,decode_row:O3,split_cell:Cce,decode_cell:Us,decode_range:Zl,format_cell:Of,sheet_add_aoa:xR,sheet_add_json:$9,sheet_add_dom:I9,aoa_to_sheet:xp,json_to_sheet:u1e,table_to_sheet:D9,table_to_book:jve,sheet_to_csv:t_,sheet_to_txt:q9,sheet_to_json:Ab,sheet_to_html:P9,sheet_to_formulae:d1e,sheet_to_row_object_array:Ab,sheet_get_cell:pg,book_new:r_,book_append_sheet:n_,book_set_sheet_visibility:h1e,cell_set_number_format:m1e,cell_set_hyperlink:z9,cell_set_internal_link:p1e,cell_add_comment:x1e,sheet_set_array_formula:g1e,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const v1e={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},b1e=["header","bold","italic","underline","list","bullet","link","image"],a_=({value:e,onChange:t,placeholder:r="Enter text...",readOnly:a=!1,className:s=""})=>n.jsx("div",{className:s,children:n.jsx(x3,{theme:"snow",value:e||"",onChange:t,modules:a?{toolbar:!1}:v1e,formats:b1e,readOnly:a,placeholder:r})}),H9=({content:e,className:t=""})=>{if(!e||e.trim()==="")return null;const r=tg.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","ul","ol","li","a","img","h1","h2","h3"],ALLOWED_ATTR:["href","src","alt","class","target","rel"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i});return n.jsx("div",{className:t+" [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1",dangerouslySetInnerHTML:{__html:r}})},vf={all:["tasks"],lists:()=>[...vf.all,"list"],list:e=>[...vf.lists(),e],details:()=>[...vf.all,"detail"],detail:e=>[...vf.details(),e]},y1e=(e,t,r)=>Ys({queryKey:vf.list({userId:e,projectId:t,status:r}),queryFn:async()=>{const a=await my(e);return Array.isArray(a)?a:a?.data&&Array.isArray(a.data)||a?.success&&a?.data&&Array.isArray(a.data)?a.data:[]},staleTime:30*1e3,refetchInterval:60*1e3,placeholderData:a=>a}),w1e=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async a=>{const s=await Z7(a);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:vf.lists()}),t("Task created successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to create task")}})},N1e=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async({id:a,data:s})=>{const i=await db(a,s);return i.data||i},onSuccess:(a,s)=>{e.invalidateQueries({queryKey:vf.lists()}),e.invalidateQueries({queryKey:vf.detail(s.id)}),t("Task updated successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to update task")}})},j1e=()=>{const e=Fa(),{showSuccess:t,showError:r}=Cn();return fi({mutationFn:async a=>(await eM(a),a),onSuccess:()=>{e.invalidateQueries({queryKey:vf.lists()}),t("Task deleted successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:a=>{r(a.message||"Failed to delete task")}})},Zp={all:["projects"],lists:()=>[...Zp.all,"list"],list:e=>[...Zp.lists(),e],details:()=>[...Zp.all,"detail"],detail:e=>[...Zp.details(),e]},k1e=(e,t,r)=>Ys({queryKey:Zp.list({userId:e,companyId:t,status:r}),queryFn:async()=>{const a=await D0(e);return Array.isArray(a)?a:a?.data&&Array.isArray(a.data)||a?.success&&a?.data&&Array.isArray(a.data)?a.data:[]},staleTime:60*1e3,refetchInterval:120*1e3,placeholderData:a=>a}),S1e=({onCreateTask:e,currentUser:t})=>{const{showSuccess:r,showError:a,showInfo:s}=Cn(),i=Fa(),{data:o=[],isLoading:l,error:c}=y1e(),{data:d=[],isLoading:u}=k1e(),{data:f=[],isLoading:p}=m3(),m=N1e(),b=j1e();w1e();const v=l||u||p,[g,w]=D.useState(""),[y,j]=D.useState("active"),[N,S]=D.useState("list"),[E,A]=D.useState("none"),[P,I]=D.useState(!1),[B,T]=D.useState("upload"),[_,R]=D.useState([]),[z,H]=D.useState([]),[Y,J]=D.useState({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),[re,X]=D.useState(!1),[te,W]=D.useState(null),[O,q]=D.useState(null),[G,U]=D.useState(null),[K,ae]=D.useState(null),[me,se]=D.useState(null),[le,Me]=D.useState(null),[ue,Ue]=D.useState(!1),[Ae,ie]=D.useState(!1),[Z,Ee]=D.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[we,Oe]=D.useState([]),[de,ce]=D.useState(!1),[Ce,Xe]=D.useState(!1),[xe,fe]=D.useState(!1),[Se,qe]=D.useState(!1),[je,Le]=D.useState(""),[Re,Je]=D.useState(""),[ut,vt]=D.useState(""),[At,Bt]=D.useState(null),[Yt,We]=D.useState(!1),[Ct,br]=D.useState(null),[Jt,Dr]=D.useState(null),[Hr,tt]=D.useState(!1),[Dt,mr]=D.useState(""),[Sr,Jr]=D.useState(0),[_r,Wr]=D.useState([]),[sr,en]=D.useState(!1),[Gr,vn]=D.useState([]),[kr,Fr]=D.useState(!1),ke=D.useRef(null),ze=D.useRef(null),$e=D.useRef(null),pe=Ve=>{const Lt=Ve.getFullYear(),Ot=Ve.getMonth(),lr=Ve.getDate();return`${Lt}-${String(Ot+1).padStart(2,"0")}-${String(lr).padStart(2,"0")}`},_e=Ve=>{if(!Ve||!/^\d{4}-\d{2}-\d{2}$/.test(Ve))return Ve;const[Lt,Ot,lr]=Ve.split("-").map(Number);return new Date(Lt,Ot-1,lr).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Fe=Ve=>{const Lt=new Date(Ve),Ot=Lt.getDay(),lr=Lt.getDate()-Ot+(Ot===0?-6:1);return new Date(Lt.setDate(lr))},et=Ve=>{const Lt=new Date(Ve);Lt.setHours(0,0,0,0);const Ot=new Date(Lt);return Ot.setDate(Lt.getDate()+6),Ot.setHours(23,59,59,999),{start:Lt,end:Ot}},mt=Ve=>{if(!Ve||!/^\d{4}-\d{2}-\d{2}$/.test(Ve))return null;const[Lt,Ot,lr]=Ve.split("-").map(Number),jr=new Date(Lt,Ot-1,lr),pr=Fe(jr);return`${pr.getFullYear()}-${String(pr.getMonth()+1).padStart(2,"0")}-${String(pr.getDate()).padStart(2,"0")}`};D.useEffect(()=>{c&&(console.error("[TASKS] React Query error:",c),a("Failed to load tasks"))},[c,a]),D.useEffect(()=>{le&&!ue&&Ee({title:le.title,category:le.category||"",description:le.description||"",dueDate:le.dueDate||"",priority:le.priority||"Medium",status:le.status||"Todo",assigneeId:le.assigneeId,projectId:le.projectId||""})},[le,ue]),D.useEffect(()=>{if(!le)return;let Ve=!1;return(async()=>{try{const Lt=await cb(),Ot=Array.isArray(Lt?.data)?Lt.data:[];Ve||vn(Ot)}catch{Ve||vn([])}})(),()=>{Ve=!0}},[le?.id]),D.useEffect(()=>{if(!ue){Fr(!1);return}Z.category&&Gr.includes(Z.category)?Fr(!1):Z.category&&!Gr.includes(Z.category)&&Fr(!0)},[ue,Z.category,Gr]);const lt=async Ve=>{if(o.find(Ot=>Ot.id===Ve)){q(Ve);try{await m.mutateAsync({id:Ve,data:{archived:y==="active"}}),ae(null)}catch{}finally{q(null)}}},xt=async Ve=>{W(Ve);try{await b.mutateAsync(Ve),se(null)}catch{}finally{W(null)}},ge=()=>{we.length===Na.length?Oe([]):Oe(Na.map(Ve=>Ve.id))},ve=async()=>{ce(!0);try{const Ve=[...we];await Promise.all(Ve.map(Lt=>b.mutateAsync(Lt))),Oe([]),Xe(!1),r(`Successfully deleted ${Ve.length} task${Ve.length>1?"s":""}`)}catch(Ve){a(Ve.message||"Failed to delete tasks")}finally{ce(!1)}},Ke=async()=>{if(!je){a("Please select a project");return}qe(!0);try{const Ve=[...we];await Promise.all(Ve.map(Lt=>m.mutateAsync({id:Lt,data:{projectId:je==="__none__"?null:je}}))),Oe([]),fe(!1),Le(""),r(`Assigned ${Ve.length} task${Ve.length>1?"s":""} to ${je==="__none__"?"No project":d.find(Lt=>Lt.id===je)?.title||"project"}`)}catch(Ve){a(Ve.message||"Failed to assign project")}finally{qe(!1)}},ct=()=>{const Ve=new Date;Ve.setDate(Ve.getDate()+30);const Lt=Ve.getDate(),Ot=Ve.getMonth()+1,lr=Ve.getFullYear(),jr=`${Lt}-${Ot}-${lr}`,pr=Q0.aoa_to_sheet([["Title","Task Category","Due Date","Priority (Low/Medium/High)","Description","Owner (Name or Email)"],["Update Logistics Map","Operations",jr,"High","Audit the EMEA transit routes","rpk@wx.agency"]]),Mr=Q0.book_new();Q0.book_append_sheet(Mr,pr,"Tasks"),o1e(Mr,"ImpactFlow_Task_Import_Template.xlsx"),s("Registry template downloaded")},jt=async()=>{if(!Y.title){a("Please map the required field: Title");return}if(z.length===0){a("No data to import");return}X(!0);try{console.log("[IMPORT] ===== STARTING IMPORT PROCESS ====="),console.log("[IMPORT] Column mapping:",Y),console.log("[IMPORT] Parsed data rows:",z.length),console.log("[IMPORT] Sample parsed row:",z[0]);const Ve=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ve){a("Please log in to import tasks"),X(!1);return}console.log("[IMPORT] Starting import with:",{parsedDataRows:z.length,columnMapping:Y,usersCount:f.length,currentUserId:Ve});const Lt=z.map((rr,xr)=>{console.log(`[IMPORT] Processing row ${xr}:`,rr),console.log("[IMPORT] Column mapping:",Y);const Rt=String(rr[Y.title]||"").trim(),Cr=Y.category?String(rr[Y.category]||"").trim():"",Vt=String(rr[Y.dueDate]||"").trim(),Ma=Y.description?String(rr[Y.description]||"").trim():"",Ca=Y.priority?String(rr[Y.priority]||"").trim():"Medium",Aa=Y.owner?String(rr[Y.owner]||"").trim():"";console.log(`[IMPORT] Extracted values for row ${xr}:`,{title:Rt,category:Cr,dueDateRaw:Vt,description:Ma,priorityRaw:Ca,ownerRaw:Aa,rowKeys:Object.keys(rr),mappedTitleKey:Y.title,mappedDueDateKey:Y.dueDate});let ar="";if(Vt&&Vt.toLowerCase().trim()==="ongoing")ar="";else if(Vt)if(/^\d+$/.test(Vt)&&parseFloat(Vt)>25569){const Ar=new Date(1900,0,1),an=parseFloat(Vt)-2,dr=new Date(Ar.getTime()+an*24*60*60*1e3);isNaN(dr.getTime())||(ar=pe(dr))}else{let Ar=null;if(/^\d{4}-\d{2}-\d{2}$/.test(Vt))ar=Vt,Ar=new Date(0);else if(Vt.includes("-")&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(Vt)){const an=Vt.split("-").map(dr=>dr.trim());if(an.length===3){const dr=parseInt(an[0],10),Mn=parseInt(an[1],10)-1,Or=parseInt(an[2],10);!isNaN(dr)&&!isNaN(Mn)&&!isNaN(Or)&&dr>=1&&dr<=31&&Mn>=0&&Mn<=11&&(Ar=new Date(Or,Mn,dr),console.log(`[IMPORT] Parsed hyphen-separated date "${Vt}" as day-month-year -> ${pe(Ar)}`))}}else if(Vt.includes("/")){const an=Vt.split("/").map(dr=>dr.trim());if(an.length===3){const dr=parseInt(an[0],10),Mn=parseInt(an[1],10)-1;let Or=parseInt(an[2],10);Or<100&&(Or+=2e3),!isNaN(dr)&&!isNaN(Mn)&&!isNaN(Or)&&(Ar=new Date(Or,Mn,dr))}}else if(Vt.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)){const an=Vt.split("/"),dr=parseInt(an[0],10)-1,Mn=parseInt(an[1],10),Or=parseInt(an[2],10);!isNaN(Mn)&&!isNaN(dr)&&!isNaN(Or)&&(Ar=new Date(Or,dr,Mn))}else if(!Ar||isNaN(Ar.getTime())){const an=Vt.match(/^([A-Za-z]+)\s+(\d{1,2}),?\s*(\d{4})$/);if(an){const[,dr,Mn,Or]=an,Ba=["january","february","march","april","may","june","july","august","september","october","november","december"],ho=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],bs=dr.toLowerCase().trim();let ys=-1;for(let ws=0;ws<Ba.length;ws++)if(bs.startsWith(Ba[ws])||bs.startsWith(ho[ws])){ys=ws;break}if(ys>=0){const ws=parseInt(Mn,10),mo=parseInt(Or,10);Ar=new Date(mo,ys,ws),Ar.getFullYear()!==mo||Ar.getMonth()!==ys||Ar.getDate()!==ws?(console.warn(`[IMPORT] Invalid date parsed from "${Vt}": year=${mo}, month=${ys}, day=${ws}`),Ar=null):console.log(`[IMPORT] Successfully parsed date "${Vt}" -> ${pe(Ar)}`)}else console.warn(`[IMPORT] Could not match month name in "${Vt}"`)}}if(!Ar||isNaN(Ar.getTime())){const an=new Date(Vt);if(!isNaN(an.getTime())){const dr=an.getFullYear(),Mn=an.getMonth(),Or=an.getDate();Ar=new Date(dr,Mn,Or),console.log(`[IMPORT] Used fallback date parsing for "${Vt}" -> ${pe(Ar)}`)}}Ar&&!isNaN(Ar.getTime())&&!ar?(ar=pe(Ar),console.log(`[IMPORT] Final dueDate for row ${xr}: "${Vt}" -> "${ar}"`)):Vt&&!ar&&console.error(`[IMPORT] Failed to parse date "${Vt}" for row ${xr}`)}const Ra={low:"Low",medium:"Medium",high:"High",l:"Low",m:"Medium",h:"High"}[Ca.toLowerCase()]||"Medium";let Zn=Ve;if(Aa&&f.length>0){const Ar=Aa.toLowerCase().trim(),an=f.find(dr=>dr.name.toLowerCase().trim()===Ar||dr.email.toLowerCase().trim()===Ar||dr.name.toLowerCase().trim().includes(Ar)||dr.email.toLowerCase().trim().includes(Ar));an?(Zn=an.id,console.log(`[IMPORT] Matched owner "${Aa}" to user:`,an.name,an.id)):console.warn(`[IMPORT] Could not match owner "${Aa}", using current user`)}Zn||(console.error("[IMPORT] No assigneeId available, using current user as fallback"),Zn=Ve);const kn={title:Rt.trim(),category:Cr||void 0,dueDate:ar||null,description:Ma.trim()||"",priority:Ra,status:"Todo",assigneeId:Zn,_rowIndex:xr,_rawDate:Vt};return(!kn.title||!kn.assigneeId)&&console.error(`[IMPORT] Row ${xr} missing required fields:`,{hasTitle:!!kn.title,hasAssigneeId:!!kn.assigneeId,taskData:kn}),Zn||console.warn(`[IMPORT] Row ${xr}: No assigneeId found, using current user:`,{title:Rt,ownerRaw:Aa,userId:Ve}),console.log(`[IMPORT] Task data for row ${xr}:`,kn),kn}).filter(rr=>{const xr=rr.title&&rr.assigneeId;return xr?console.log("[IMPORT] Valid task:",{title:rr.title,dueDate:rr.dueDate||"Not set",assigneeId:rr.assigneeId,priority:rr.priority,status:rr.status}):console.error("[IMPORT] Filtered out invalid task:",{title:rr.title,dueDate:rr.dueDate,assigneeId:rr.assigneeId,rawDate:rr._rawDate,rowIndex:rr._rowIndex,fullTask:rr,missingFields:{title:!rr.title,assigneeId:!rr.assigneeId}}),xr}).map(({_rowIndex:rr,_rawDate:xr,...Rt})=>(Rt.assigneeId||(console.warn("[IMPORT] Task missing assigneeId, using current user:",Rt),Rt.assigneeId=Ve),Rt));if(console.log("[IMPORT] Final tasks to import:",Lt),console.log("[IMPORT] Tasks count:",Lt.length),Lt.length===0){const rr=z[0],xr=rr?String(rr[Y.title]||"").trim():"N/A",Rt=rr?String(rr[Y.dueDate]||"").trim():"N/A";console.error("[IMPORT] Validation failed - no valid tasks:",{totalRows:z.length,columnMapping:Y,mappedTitle:Y.title,mappedDueDate:Y.dueDate,sampleRow:rr,sampleTitle:xr,sampleDate:Rt,sampleRowKeys:rr?Object.keys(rr):[],parsedData:z.slice(0,3)}),a(`No valid tasks found to import. Please check that:
1. Title column is mapped correctly (current: "${Y.title}")
2. Due Date column is mapped correctly (current: "${Y.dueDate}")
3. Date format is valid (15-2-2026, DD-MM-YYYY, YYYY-MM-DD, February 15 2026, or "Ongoing" for no date)

Sample data - Title: "${xr}", Date: "${Rt}"

Available columns: ${_.join(", ")}`),X(!1);return}console.log("[IMPORT] ===== STARTING API CALL =====");const Ot=Lt.map(({_rowIndex:rr,_rawDate:xr,...Rt})=>Rt);console.log("[IMPORT] Tasks to import count:",Ot.length),console.log("[IMPORT] Tasks for API (cleaned):",JSON.stringify(Ot,null,2)),console.log("[IMPORT] Sample task structure:",{title:Ot[0]?.title,dueDate:Ot[0]?.dueDate,assigneeId:Ot[0]?.assigneeId,priority:Ot[0]?.priority,status:Ot[0]?.status,description:Ot[0]?.description,hasProjectId:!!Ot[0]?.projectId});const lr=Ot.filter(rr=>!rr.title||!rr.assigneeId);if(lr.length>0){console.error("[IMPORT] Invalid tasks found:",lr),a(`Cannot import: ${lr.length} task(s) missing required fields (title or assigneeId)`),X(!1);return}let jr;try{jr=await zne(Ot),console.log("[IMPORT] API call successful")}catch(rr){console.error("[IMPORT] API call failed:",rr),console.error("[IMPORT] Error details:",{message:rr.message,status:rr.status,code:rr.code,stack:rr.stack}),a(`Failed to import tasks: ${rr.message||"Unknown error"}`),X(!1);return}console.log("[IMPORT] Raw API Response:",JSON.stringify(jr,null,2)),console.log("[IMPORT] Response type:",typeof jr),console.log("[IMPORT] Response keys:",jr?Object.keys(jr):"null");let pr={},Mr=[];if(jr)jr.success&&jr.data?(pr=jr.data,Mr=pr.created||[]):jr.data&&Array.isArray(jr.data.created)?(pr=jr.data,Mr=pr.created||[]):jr.created&&Array.isArray(jr.created)?(pr=jr,Mr=pr.created||[]):(console.warn("[IMPORT] Unexpected response structure, searching for created tasks..."),pr=jr.data||jr,Mr=pr.created||pr.data?.created||[]),console.log("[IMPORT] Extracted importData:",pr),console.log("[IMPORT] Created tasks:",Mr),console.log("[IMPORT] Created tasks count:",Mr.length),console.log("[IMPORT] Created task IDs:",Mr.map(rr=>rr?.id)),console.log("[IMPORT] Created task details:",Mr.map(rr=>({id:rr.id,title:rr.title,assigneeId:rr.assigneeId})));else{console.error("[IMPORT] No response received from API"),a("No response received from server. Please check your connection."),X(!1);return}const sa=pr.successful??Mr.length??0,En=pr.failed??0;if(console.log("[IMPORT] Import results:",{successCount:sa,failedCount:En,total:Lt.length,createdTasks:Mr.length,createdTaskIds:Mr.map(rr=>rr.id),errors:pr.errors}),Mr&&Mr.length>0?(console.log("[IMPORT] ===== INVALIDATING TASKS CACHE ====="),console.log("[IMPORT] Created tasks:",Mr.length),i.invalidateQueries({queryKey:["tasks"]})):(console.error("[IMPORT] ===== NO TASKS CREATED ====="),console.error("[IMPORT] No created tasks. createdTasks:",Mr),console.error("[IMPORT] Response structure:",jr),console.error("[IMPORT] Import data:",pr)),En>0){const rr=pr.errors?.map(xr=>`Row ${xr.index+1}: ${xr.error}`).join(`
`)||"";a(`Imported ${sa} task(s), but ${En} failed.
${rr}`)}else r(`Successfully imported ${sa} task(s)`);H([]),R([]),J({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),ke.current&&(ke.current.value=""),I(!1),window.dispatchEvent(new Event("refresh-tasks"))}catch(Ve){console.error("Import error:",Ve),a(Ve.message||"Failed to import tasks. Please check your data format.")}finally{X(!1)}},bt=Ve=>{if(!Ve||Ve.length===0)return console.log("[IMPORT] Header detection: empty or null firstRow"),!1;console.log("[IMPORT] Header detection - firstRow:",Ve),console.log("[IMPORT] Header detection - firstRow length:",Ve.length),console.log("[IMPORT] Header detection - firstRow values:",Ve.map((pr,Mr)=>`[${Mr}]: "${pr}"`));const Lt=["task","title","name","category","due","date","priority","description","owner","assignee","status","project","desc"];let Ot=0;const lr=Ve.filter(pr=>pr&&String(pr).trim()!=="");console.log("[IMPORT] Header detection - non-empty cells:",lr);for(const pr of lr){const Mr=String(pr).toLowerCase().trim();Lt.some(sa=>Mr.includes(sa))&&(Ot++,console.log(`[IMPORT] Header detection - matched keyword in: "${pr}"`)),Mr.match(/^(task|due|owner|assignee|priority|description|category|status)/)&&(Ot++,console.log(`[IMPORT] Header detection - matched pattern in: "${pr}"`))}const jr=lr.length>0?Ot/lr.length:0;return console.log("[IMPORT] Header detection result:",{firstRow:Ve,totalCells:Ve.length,cellsToCheck:lr.length,matchCount:Ot,matchRatio:jr,isHeader:jr>=.4}),jr>=.4},Wt=async Ve=>{const Lt=Ve.target.files?.[0];if(Lt)try{const Ot=Lt.name.split(".").pop()?.toLowerCase();if(Ot==="csv"){const lr=new FileReader;lr.onload=jr=>{try{const pr=new Uint8Array(jr.target?.result),Mr=Cb(pr,{type:"array",sheetStubs:!0}),sa=Mr.SheetNames[0],En=Mr.Sheets[sa],rr=Q0.decode_range(En["!ref"]||"A1"),xr=rr.e.c-rr.s.c+1;console.log("[IMPORT] CSV worksheet range:",En["!ref"]),console.log("[IMPORT] CSV number of columns from range:",xr);const Rt=Q0.sheet_to_json(En,{header:1,defval:"",raw:!1,dateNF:"yyyy-mm-dd",blankrows:!0});if(console.log("[IMPORT] CSV raw data length:",Rt.length),console.log("[IMPORT] CSV first row length:",Rt[0]?.length),console.log("[IMPORT] CSV first row:",Rt[0]),Rt.length===0){a("File is empty");return}if(Rt[0]&&Rt[0].length<xr)for(console.log(`[IMPORT] CSV: Padding first row from ${Rt[0].length} to ${xr} columns`);Rt[0].length<xr;)Rt[0].push("");const Cr=bt(Rt[0]);console.log("[IMPORT] CSV Header detection result:",Cr);let Vt,Ma;if(Cr?(Vt=Rt[0].map((ar,nn)=>String(ar||"").trim()||`Column ${nn+1}`),Ma=1,console.log("[IMPORT] CSV raw first row:",Rt[0]),console.log("[IMPORT] CSV processed headers:",Vt)):(Vt=Rt[0].map((ar,nn)=>`Column ${nn+1}`),Ma=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),Vt.length===0){a("No columns found in file");return}console.log("[IMPORT] CSV detected headers:",Vt),console.log("[IMPORT] CSV detected headers count:",Vt.length),console.log("[IMPORT] CSV detected headers array:",Vt),R(Vt),console.log("[IMPORT] CSV setDetectedColumns called with:",Vt);const Ca=[];for(let ar=Ma;ar<Rt.length;ar++){const nn={},Ra=Rt[ar]||[];for(;Ra.length<Vt.length;)Ra.push("");Vt.forEach((Zn,kn)=>{const Ar=Ra[kn];if(typeof Ar=="number"&&Ar>25569&&Zn.toLowerCase().includes("date")){const an=new Date(1900,0,1),dr=Ar-2,Mn=new Date(an.getTime()+dr*24*60*60*1e3);nn[Zn]=Mn.toISOString().split("T")[0]}else nn[Zn]=Ar!=null?String(Ar).trim():""}),Object.values(nn).some(Zn=>Zn)&&Ca.push(nn)}console.log("[IMPORT] CSV parsed rows:",Ca),console.log("[IMPORT] CSV parsed rows count:",Ca.length),H(Ca);const Aa={title:Vt.find(ar=>ar.toLowerCase().includes("title")||ar.toLowerCase().includes("task")&&ar.toLowerCase().includes("name")||!ar.toLowerCase().includes("category")&&ar.toLowerCase().includes("name"))||"",category:Vt.find(ar=>ar.toLowerCase().includes("category")||ar.toLowerCase().includes("task")&&ar.toLowerCase().includes("cat"))||"",dueDate:Vt.find(ar=>ar.toLowerCase().includes("due")||ar.toLowerCase().includes("date")&&!ar.toLowerCase().includes("created")&&!ar.toLowerCase().includes("updated"))||"",description:Vt.find(ar=>ar.toLowerCase().includes("description")||ar.toLowerCase().includes("desc"))||"",priority:Vt.find(ar=>ar.toLowerCase().includes("priority")||ar.toLowerCase().includes("prio"))||"",owner:Vt.find(ar=>ar.toLowerCase().includes("owner")||ar.toLowerCase().includes("assignee")||ar.toLowerCase().includes("assigned")||ar.toLowerCase().includes("task")&&ar.toLowerCase().includes("owner"))||""};J(Aa),T("mapping")}catch(pr){console.error("CSV parse error:",pr),a("Failed to parse CSV file: "+(pr.message||"Unknown error"))}},lr.readAsArrayBuffer(Lt)}else if(Ot==="xlsx"||Ot==="xls"){const lr=new FileReader;lr.onload=jr=>{const pr=new Uint8Array(jr.target?.result),Mr=Cb(pr,{type:"array"}),sa=Mr.SheetNames[0],En=Mr.Sheets[sa],rr=Q0.decode_range(En["!ref"]||"A1"),xr=rr.e.c-rr.s.c+1;console.log("[IMPORT] Excel worksheet range:",En["!ref"]),console.log("[IMPORT] Excel number of columns from range:",xr);const Rt=Q0.sheet_to_json(En,{header:1,raw:!0,defval:"",blankrows:!0});if(console.log("[IMPORT] Excel raw data length:",Rt.length),console.log("[IMPORT] Excel first row length:",Rt[0]?.length),console.log("[IMPORT] Excel first row:",Rt[0]),Rt.length===0){a("File is empty");return}if(Rt[0]&&Rt[0].length<xr)for(console.log(`[IMPORT] Padding first row from ${Rt[0].length} to ${xr} columns`);Rt[0].length<xr;)Rt[0].push("");const Cr=bt(Rt[0]);console.log("[IMPORT] Excel Header detection result:",Cr);let Vt,Ma;Cr?(Vt=Rt[0].map((ar,nn)=>String(ar||"").trim()||`Column ${nn+1}`),Ma=1,console.log("[IMPORT] Excel raw first row:",Rt[0]),console.log("[IMPORT] Excel processed headers:",Vt)):(Vt=Rt[0].map((ar,nn)=>`Column ${nn+1}`),Ma=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),console.log("[IMPORT] Detected headers:",Vt),console.log("[IMPORT] Detected headers count:",Vt.length),console.log("[IMPORT] Detected headers array:",Vt),console.log("[IMPORT] Raw JSON data:",Rt),R(Vt),console.log("[IMPORT] setDetectedColumns called with:",Vt);const Ca=[];for(let ar=Ma;ar<Rt.length;ar++){const nn={},Ra=Rt[ar]||[];for(;Ra.length<Vt.length;)Ra.push("");Vt.forEach((Zn,kn)=>{const Ar=Ra[kn];if(typeof Ar=="number"&&Ar>25569&&Zn.toLowerCase().includes("date")){const an=new Date(1900,0,1),dr=Ar-2,Mn=new Date(an.getTime()+dr*24*60*60*1e3),Or=Mn.getFullYear(),Ba=Mn.getMonth(),ho=Mn.getDate();nn[Zn]=`${Or}-${String(Ba+1).padStart(2,"0")}-${String(ho).padStart(2,"0")}`}else nn[Zn]=Ar!=null?String(Ar).trim():""}),Object.values(nn).some(Zn=>Zn)&&Ca.push(nn)}console.log("[IMPORT] Parsed rows:",Ca),console.log("[IMPORT] Parsed rows count:",Ca.length),H(Ca);const Aa={title:Vt.find(ar=>ar.toLowerCase().includes("title")||ar.toLowerCase().includes("task")&&ar.toLowerCase().includes("name")||!ar.toLowerCase().includes("category")&&ar.toLowerCase().includes("name"))||"",category:Vt.find(ar=>ar.toLowerCase().includes("category")||ar.toLowerCase().includes("task")&&ar.toLowerCase().includes("cat"))||"",dueDate:Vt.find(ar=>ar.toLowerCase().includes("due")||ar.toLowerCase().includes("date")&&!ar.toLowerCase().includes("created")&&!ar.toLowerCase().includes("updated"))||"",description:Vt.find(ar=>ar.toLowerCase().includes("description")||ar.toLowerCase().includes("desc"))||"",priority:Vt.find(ar=>ar.toLowerCase().includes("priority")||ar.toLowerCase().includes("prio"))||"",owner:Vt.find(ar=>ar.toLowerCase().includes("owner")||ar.toLowerCase().includes("assignee")||ar.toLowerCase().includes("assigned")||ar.toLowerCase().includes("task")&&ar.toLowerCase().includes("owner"))||""};console.log("[IMPORT] Auto-mapping:",Aa),J(Aa),T("mapping")},lr.readAsArrayBuffer(Lt)}else a("Unsupported file format. Please use CSV, XLS, or XLSX.")}catch(Ot){console.error("Error parsing file:",Ot),a("Failed to parse file: "+(Ot.message||"Unknown error"))}},ir=async(Ve,Lt,Ot)=>{Ot.stopPropagation();const lr=Lt==="Done"?"Todo":"Done";U(Ve);try{await m.mutateAsync({id:Ve,data:{status:lr}}),le?.id===Ve&&Me({...le,status:lr})}catch{}finally{U(null)}},Kt=async()=>{if(le){if(!Z.title.trim()){a("Task title is required");return}if(!Z.assigneeId){a("Assignee is required");return}ie(!0);try{await m.mutateAsync({id:le.id,data:{title:Z.title.trim(),category:Z.category.trim()||void 0,description:Z.description.trim()||"",dueDate:Z.dueDate||null,priority:Z.priority,status:Z.status,assigneeId:Z.assigneeId,projectId:Z.projectId||null}}),Me({...le,title:Z.title.trim(),category:Z.category.trim()||void 0,description:Z.description.trim()||"",dueDate:Z.dueDate||"",priority:Z.priority,status:Z.status,assigneeId:Z.assigneeId,projectId:Z.projectId||void 0}),Ue(!1)}catch{}finally{ie(!1)}}},yr=(Ve,Lt=1200,Ot=1200,lr=.8)=>new Promise((jr,pr)=>{const Mr=new FileReader;Mr.onload=sa=>{const En=new Image;En.onload=()=>{let rr=En.width,xr=En.height;rr>xr?rr>Lt&&(xr=xr*Lt/rr,rr=Lt):xr>Ot&&(rr=rr*Ot/xr,xr=Ot);const Rt=document.createElement("canvas");Rt.width=rr,Rt.height=xr;const Cr=Rt.getContext("2d");Cr?(Cr.drawImage(En,0,0,rr,xr),jr(Rt.toDataURL("image/jpeg",lr))):pr(new Error("Canvas context not available"))},En.onerror=()=>pr(new Error("Failed to load image")),En.src=sa.target?.result},Mr.onerror=()=>pr(new Error("Failed to read file")),Mr.readAsDataURL(Ve)}),$r=async Ve=>{const Lt=Ve.target.files?.[0];if(Lt){if(!Lt.type.startsWith("image/")){a("Please select an image file");return}if(Lt.size>10*1024*1024){a("Image size must be less than 10MB");return}try{const Ot=await yr(Lt,1200,1200,.8);vt(Ot),Bt(Lt)}catch(Ot){a(Ot.message||"Failed to process image")}}},Ur=Ve=>{const Lt=Ve.target.value,Ot=Ve.target.selectionStart;Je(Lt),Jr(Ot);const lr=Lt.substring(0,Ot),jr=lr.lastIndexOf("@");if(jr!==-1){const pr=lr.substring(jr+1),Mr=jr>0?lr[jr-1]:" ";if((Mr===" "||Mr===`
`||jr===0)&&!pr.includes(" ")&&!pr.includes(`
`)){mr(pr);const sa=f.filter(En=>En.name.toLowerCase().includes(pr.toLowerCase())||En.email.toLowerCase().includes(pr.toLowerCase()));Wr(sa.slice(0,5)),tt(!0);return}}tt(!1)},un=Ve=>{const Ot=Re.substring(0,Sr).lastIndexOf("@"),lr=Re.substring(Sr),pr=`${Re.substring(0,Ot)}@${Ve.name} ${lr}`;if(Je(pr),tt(!1),$e.current){$e.current.focus();const Mr=Ot+Ve.name.length+2;$e.current.setSelectionRange(Mr,Mr)}},Vr=Ve=>{const Lt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Ot=[];let lr;for(;(lr=Lt.exec(Ve))!==null;){const jr=lr[1].trim(),pr=f.find(Mr=>Mr.name.toLowerCase()===jr.toLowerCase());pr&&pr.id!==(t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Ot.push(pr.id)}return[...new Set(Ot)]};D.useEffect(()=>{if($e.current){const Ve=$e.current;Ve.style.height="auto";const Lt=24,Ot=5*Lt,lr=15*Lt,jr=Math.min(Math.max(Ve.scrollHeight,Ot),lr);Ve.style.height=`${jr}px`}},[Re]);const aa=Ve=>{const Lt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Ot=[];let lr=0,jr;for(;(jr=Lt.exec(Ve))!==null;){jr.index>lr&&Ot.push(Ve.substring(lr,jr.index));const pr=jr[1].trim(),Mr=f.find(sa=>sa.name.toLowerCase()===pr.toLowerCase());Mr?Ot.push(n.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",Mr.name]},jr.index)):Ot.push(`@${pr}`),lr=jr.index+jr[0].length}return lr<Ve.length&&Ot.push(Ve.substring(lr)),Ot.length>0?Ot:Ve},Kn=async()=>{if(le){if(!Re.trim()&&!At){a("Please enter a note or upload an image");return}We(!0);try{const Ve=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Lt=t?.name||JSON.parse(localStorage.getItem("user_data")||"{}").name||"Unknown User",Ot={id:`note_${Date.now()}`,userId:Ve,userName:Lt,text:Re.trim(),imageUrl:ut||void 0,imageName:At?.name||void 0,imageMimeType:At?.type||void 0,createdAt:new Date().toISOString()},lr=[...le.notes||[],Ot];await m.mutateAsync({id:le.id,data:{notes:lr}}),Me({...le,notes:lr});const jr=Vr(Re);for(const Mr of jr)try{await Zm({userId:Mr,type:"task-mention",title:"You were mentioned in a task",message:`${Lt} mentioned you in task "${le.title}"`,relatedId:le.id,relatedType:"task",read:!1})}catch(sa){console.error("Failed to send notification:",sa)}Je(""),vt(""),Bt(null),ze.current&&(ze.current.value="");const pr=jr.length>0?`Note added and ${jr.length} user(s) notified`:"Note added successfully";r(pr)}catch(Ve){a(Ve.message||"Failed to add note")}finally{We(!1)}}},Ln=async()=>{if(!(!le||!t||!Jt))try{br(Jt);const Ve=le.notes?.filter(Lt=>Lt.id!==Jt)||[];await m.mutateAsync({id:le.id,data:{notes:Ve}}),Me({...le,notes:Ve}),r("Note deleted successfully"),Dr(null)}catch(Ve){a(Ve.message||"Failed to delete note")}finally{br(null)}},Lo=()=>{Me(null),Ue(!1),Je(""),vt(""),Bt(null),tt(!1),en(!1),ze.current&&(ze.current.value="")};let Na=o.filter(Ve=>{if(y==="archived"){if(!Ve.archived)return!1}else if(y==="week"){if(Ve.archived)return!1}else if(Ve.archived)return!1;return g.trim()?Ve.title.toLowerCase().includes(g.toLowerCase()):!0});if(E==="dueDate")Na=[...Na].sort((Ve,Lt)=>!Ve.dueDate&&!Lt.dueDate?0:Ve.dueDate?Lt.dueDate?(Ve.dueDate||"").localeCompare(Lt.dueDate||""):-1:1);else if(E==="priority"){const Ve={High:1,Medium:2,Low:3};Na=[...Na].sort((Lt,Ot)=>{const lr=Ve[Lt.priority]||4,jr=Ve[Ot.priority]||4;return lr-jr})}else E==="category"?Na=[...Na].sort((Ve,Lt)=>{const Ot=(Ve.category||"Uncategorized").toLowerCase(),lr=(Lt.category||"Uncategorized").toLowerCase();return Ot.localeCompare(lr)}):E==="owner"&&(Na=[...Na].sort((Ve,Lt)=>{const Ot=f.find(jr=>jr.id===Ve.assigneeId)?.name||"Unassigned",lr=f.find(jr=>jr.id===Lt.assigneeId)?.name||"Unassigned";return Ot.localeCompare(lr)}));return n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Tasks"}),n.jsxs("div",{className:"flex gap-4 mt-2",children:[n.jsx("button",{onClick:()=>{j("active"),Oe([])},className:`text-sm font-bold pb-1 transition-all ${y==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),n.jsxs("button",{onClick:()=>{j("archived"),Oe([])},className:`text-sm font-bold pb-1 transition-all ${y==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archive (",o.filter(Ve=>Ve.archived).length,")"]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>{I(!0),T("upload")},className:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition-all",children:[n.jsx(y6,{className:"w-4 h-4"})," Bulk Import"]}),n.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[n.jsx(ln,{className:"w-4 h-4"})," New Task"]})]})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search tasks...",value:g,onChange:Ve=>{w(Ve.target.value),Oe([])},className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:E,onChange:Ve=>A(Ve.target.value),className:"appearance-none pl-4 pr-10 py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer hover:bg-slate-50 transition-all",children:[n.jsx("option",{value:"none",children:"No Sort"}),n.jsx("option",{value:"dueDate",children:"Sort by Due Date"}),n.jsx("option",{value:"priority",children:"Sort by Priority"}),n.jsx("option",{value:"category",children:"Sort by Category"}),n.jsx("option",{value:"owner",children:"Sort by Owner"})]}),n.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:n.jsx(Fs,{className:"w-4 h-4 text-slate-400"})})]}),n.jsxs("div",{className:"flex bg-white p-1 border border-slate-200 rounded-xl shadow-sm",children:[n.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-lg ${N==="list"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:n.jsx(vU,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>S("card"),className:`p-2 rounded-lg ${N==="card"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:n.jsx(pU,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>{j(y==="week"?"active":"week"),Oe([])},className:`p-2 rounded-lg ${y==="week"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,title:"Week View",children:n.jsx(Jn,{className:"w-4 h-4"})})]})]}),!v&&Na.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Na.length>0&&we.length===Na.length,onChange:ge}),n.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Tasks"})]}),v?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden min-h-[400px]",children:n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):Na.length===0?n.jsxs("div",{className:"py-20 bg-white rounded-3xl border border-dashed border-slate-200 text-center",children:[n.jsx(i1,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),n.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:["No ",y==="week"?"tasks":y," tasks found"]})]}):y==="week"?n.jsx("div",{className:"space-y-8",children:(()=>{const Ve=Na.filter(xr=>!mt(xr.dueDate)),Lt=Na.filter(xr=>mt(xr.dueDate)),Ot={};Lt.forEach(xr=>{const Rt=mt(xr.dueDate);Ot[Rt]||(Ot[Rt]=[]),Ot[Rt].push(xr)});const lr=Object.keys(Ot).sort(),jr=(()=>{const xr=Fe(new Date);return`${xr.getFullYear()}-${String(xr.getMonth()+1).padStart(2,"0")}-${String(xr.getDate()).padStart(2,"0")}`})(),pr=(()=>{const xr=Fe(new Date),Rt=new Date(xr);return Rt.setDate(xr.getDate()+7),`${Rt.getFullYear()}-${String(Rt.getMonth()+1).padStart(2,"0")}-${String(Rt.getDate()).padStart(2,"0")}`})(),Mr=(xr,Rt)=>{const Cr=xr.toLocaleDateString("en-US",{month:"short",day:"numeric"}),Vt=Rt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Cr} - ${Vt}`},sa=xr=>{if(xr===jr)return"This Week";if(xr===pr)return"Next Week";const[Rt,Cr,Vt]=xr.split("-").map(Number),Ma=new Date(Rt,Cr-1,Vt),{start:Ca,end:Aa}=et(Ma);return`Week of ${Mr(Ca,Aa)}`},En=xr=>{const[Rt,Cr,Vt]=xr.split("-").map(Number);return et(new Date(Rt,Cr-1,Vt))};lr.forEach(xr=>{Ot[xr].sort((Rt,Cr)=>(Rt.dueDate||"").localeCompare(Cr.dueDate||""))});const rr=xr=>xr.length===0?null:N==="list"?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-50",children:xr.map(Rt=>{const Cr=we.includes(Rt.id);return n.jsxs("div",{onClick:()=>Me(Rt),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Cr?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[n.jsx("div",{onClick:Vt=>Vt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Cr,onChange:()=>Oe(Vt=>Cr?Vt.filter(Ma=>Ma!==Rt.id):[...Vt,Rt.id])})}),n.jsx("button",{onClick:Vt=>ir(Rt.id,Rt.status,Vt),disabled:G===Rt.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:G===Rt.id?n.jsx(gt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Rt.status==="Done"?n.jsx(Nn,{className:"w-6 h-6 text-emerald-500"}):n.jsx(Pu,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:`font-bold text-sm ${Rt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Rt.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Rt.category&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Ms,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Rt.category})]}),n.jsx("span",{className:"text-slate-300",children:""})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(Vt=>Vt.id===Rt.projectId)?.title||"General"}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Jn,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Rt.dueDate?_e(Rt.dueDate):"Ongoing"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Rt.priority==="High"?"bg-red-50 text-red-600":Rt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Rt.priority}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-full",children:[n.jsx(qi,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:f.find(Vt=>Vt.id===Rt.assigneeId)?.name||"Unassigned"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:Vt=>{Vt.stopPropagation(),Me(Rt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:n.jsx(Xd,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Vt=>{Vt.stopPropagation(),ae(Rt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:n.jsx(Cu,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Vt=>{Vt.stopPropagation(),se(Rt)},className:"p-1.5 hover:bg-red-50 rounded-lg text-red-400 transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]})]},Rt.id)})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:xr.map(Rt=>{const Cr=we.includes(Rt.id);return n.jsxs("div",{onClick:()=>Me(Rt),className:`bg-white p-6 rounded-3xl border ${Cr?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[n.jsx("div",{className:"absolute top-4 left-4",onClick:Vt=>Vt.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:`${Cr?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer`,checked:Cr,onChange:()=>Oe(Vt=>Cr?Vt.filter(Ma=>Ma!==Rt.id):[...Vt,Rt.id])})}),n.jsxs("div",{className:"mt-6",children:[n.jsx("p",{className:`font-bold text-sm mb-3 ${Rt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Rt.title}),n.jsxs("div",{className:"space-y-2 mb-4",children:[Rt.category&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Ms,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Rt.category})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(Vt=>Vt.id===Rt.projectId)?.title||"General"})]})]}),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Rt.dueDate?n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Jn,{className:"w-3.5 h-3.5 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:_e(Rt.dueDate)})]}):n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Rt.priority==="High"?"bg-red-50 text-red-600":Rt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Rt.priority})]})]},Rt.id)})});return n.jsxs(n.Fragment,{children:[lr.map(xr=>{const Rt=Ot[xr];if(!Rt||Rt.length===0)return null;const Cr=En(xr),Vt=sa(xr);return n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:Vt}),n.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black",children:Mr(Cr.start,Cr.end)}),n.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Rt.length,")"]})]}),rr(Rt)]},xr)}),Ve.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Ongoing"}),n.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Ve.length," tasks)"]})]}),rr(Ve)]})]})})()}):N==="list"?n.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-50",children:Na.map(Ve=>{const Lt=we.includes(Ve.id);return n.jsxs("div",{onClick:()=>Me(Ve),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Ve.archived?"bg-slate-50/50":""} ${Lt?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[n.jsx("div",{onClick:Ot=>Ot.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Lt,onChange:()=>Oe(Ot=>Lt?Ot.filter(lr=>lr!==Ve.id):[...Ot,Ve.id])})}),n.jsx("button",{onClick:Ot=>ir(Ve.id,Ve.status,Ot),disabled:G===Ve.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:G===Ve.id?n.jsx(gt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Ve.status==="Done"?n.jsx(Nn,{className:"w-6 h-6 text-emerald-500"}):n.jsx(Pu,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 overflow-hidden",children:[n.jsx("p",{className:`font-bold text-sm ${Ve.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Ve.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Ve.category&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Ms,{className:"w-3 h-3 text-indigo-400"}),n.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Ve.category})]}),n.jsx("span",{className:"text-slate-300",children:""})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:d.find(Ot=>Ot.id===Ve.projectId)?.title||"General"}),n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Jn,{className:"w-3 h-3 text-slate-400"}),n.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Ve.dueDate?_e(Ve.dueDate):"Ongoing"})]})]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Ve.priority==="High"?"bg-red-50 text-red-600":Ve.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ve.priority}),Ve.assigneeId&&(()=>{const Ot=f.find(lr=>lr.id===Ve.assigneeId);return Ot?n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-full",title:Ot.name,children:[n.jsx(qi,{className:"w-3 h-3 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600 max-w-[120px] truncate",children:Ot.name})]}):null})()]}),n.jsxs("div",{className:"flex items-center gap-3 ml-3",children:[n.jsx("button",{onClick:Ot=>{Ot.stopPropagation(),Me(Ve)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",title:"View task",children:n.jsx(Xd,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Ot=>{Ot.stopPropagation(),ae(Ve)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",children:Ve.archived?n.jsx(l1,{className:"w-4 h-4"}):n.jsx(Cu,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Ot=>{Ot.stopPropagation(),se(Ve)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-white rounded-lg transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},Ve.id)})})}):n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Na.map(Ve=>{const Lt=we.includes(Ve.id);return n.jsxs("div",{onClick:()=>Me(Ve),className:`bg-white p-6 rounded-3xl border ${Lt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600",children:n.jsx(_i,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[n.jsx("button",{onClick:Ot=>{Ot.stopPropagation(),Me(Ve)},className:"p-1.5 text-slate-400 hover:text-indigo-600",title:"View task",children:n.jsx(Xd,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:Ot=>{Ot.stopPropagation(),ae(Ve)},className:"p-1.5 text-slate-400 hover:text-indigo-600",children:n.jsx(Cu,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:Ot=>{Ot.stopPropagation(),se(Ve)},className:"p-1.5 text-slate-400 hover:text-red-500",children:n.jsx(Lr,{className:"w-3.5 h-3.5"})})]}),n.jsx("div",{onClick:Ot=>Ot.stopPropagation(),className:`${Lt?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Lt,onChange:()=>Oe(Ot=>Lt?Ot.filter(lr=>lr!==Ve.id):[...Ot,Ve.id])})})]})]}),n.jsx("h4",{className:`font-bold text-slate-900 mb-2 ${Ve.status==="Done"?"line-through opacity-40":""}`,children:Ve.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mb-4",children:Ve.description}),Ve.category&&n.jsx("div",{className:"flex items-center gap-2 mb-2",children:n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-50 rounded-full",children:[n.jsx(Ms,{className:"w-3.5 h-3.5 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600",children:Ve.category})]})}),Ve.assigneeId&&(()=>{const Ot=f.find(lr=>lr.id===Ve.assigneeId);return Ot?n.jsx("div",{className:"flex items-center gap-2 mb-4",children:n.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 rounded-full",children:[n.jsx(qi,{className:"w-3.5 h-3.5 text-emerald-600"}),n.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:Ot.name})]})}):null})(),n.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Ve.dueDate?n.jsxs("div",{className:"flex items-center gap-1.5",children:[n.jsx(Jn,{className:"w-3.5 h-3.5 text-slate-400"}),n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:_e(Ve.dueDate)})]}):n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),n.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Ve.priority==="High"?"bg-red-50 text-red-600":Ve.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ve.priority})]})]},Ve.id)})}),P&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(y6,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Enterprise Registry Import"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Logistical Data Migration"})]})]}),n.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(tr,{className:"w-6 h-6 text-slate-400"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:B==="upload"?n.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-3xl p-8",children:[n.jsxs("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-2 mb-6",children:[n.jsx(y0,{className:"w-4 h-4"})," Registry Data Requirements"]}),n.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Title *"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Official objective identifier."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Category"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Organizational category (optional). New categories from the file are added automatically."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Due Date *"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:'e.g. 15-2-2026, YYYY-MM-DD, or February 15, 2026. Use "Ongoing" for no date.'})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Priority"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Low, Medium, or High."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Description"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Strategic context/notes."})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[n.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Owner"]}),n.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Task owner name or email (optional)."})]})]})]}),n.jsxs("div",{className:"flex flex-col gap-5",children:[n.jsxs("button",{onClick:()=>ke.current?.click(),className:"w-full py-16 border-4 border-dashed border-slate-100 rounded-[40px] flex flex-col items-center justify-center gap-4 hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group shadow-sm bg-white",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-300 group-hover:text-indigo-600 group-hover:scale-110 transition-all border border-slate-100 shadow-inner",children:n.jsx(xx,{className:"w-8 h-8"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("span",{className:"text-lg font-black text-slate-900 block mb-1",children:"Select Local Registry"}),n.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Supports CSV, XLS, XLSX"})]})]}),n.jsxs("button",{onClick:ct,className:"w-full py-5 bg-white border-2 border-slate-100 text-slate-600 rounded-[24px] text-xs font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-slate-50 transition-all shadow-sm",children:[n.jsx(Iu,{className:"w-5 h-5 text-indigo-500"})," Download Registry Schema (Excel Template)"]})]})]}):n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-300",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h4",{className:"text-lg font-black text-slate-900",children:"Smart Mapping Interface"}),n.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Data Detected"]})]}),n.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:["We've detected ",_.length," columns and ",z.length," rows in your file. Ensure the ImpactFlow system properties are correctly mapped below."]}),n.jsx("div",{className:"space-y-4 bg-slate-50 p-8 rounded-[32px] border border-slate-100",children:[{label:"Task Name (Title)",key:"title",required:!0,icon:n.jsx(Qn,{className:"w-4 h-4"})},{label:"Task Category",key:"category",required:!1,icon:n.jsx(Ms,{className:"w-4 h-4"})},{label:"Due Date",key:"dueDate",required:!0,icon:n.jsx(Jn,{className:"w-4 h-4"})},{label:"Task Description",key:"description",required:!1,icon:n.jsx(y0,{className:"w-4 h-4"})},{label:"Priority Level",key:"priority",required:!1,icon:n.jsx(Ms,{className:"w-4 h-4"})},{label:"Task Owner",key:"owner",required:!1,icon:n.jsx(qi,{className:"w-4 h-4"})}].map(Ve=>n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 group",children:[n.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-white border border-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-200 transition-all",children:Ve.icon}),n.jsx("div",{children:n.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter",children:[Ve.label," ",Ve.required&&n.jsx("span",{className:"text-red-500",children:"*"})]})})]}),n.jsx(To,{className:"w-4 h-4 text-slate-300 hidden sm:block"}),n.jsxs("select",{value:Y[Ve.key]||"",onChange:Lt=>J({...Y,[Ve.key]:Lt.target.value}),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-indigo-100",children:[n.jsx("option",{value:"",children:"-- Select Source Column --"}),_.map(Lt=>n.jsx("option",{value:Lt,children:Lt},Lt))]})]},Ve.key))}),n.jsxs("div",{className:"flex gap-4 pt-6",children:[n.jsx("button",{onClick:()=>{T("upload"),H([]),R([]),J({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),ke.current&&(ke.current.value="")},className:"flex-1 py-5 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Back to Upload"}),n.jsx("button",{onClick:jt,disabled:re||!Y.title||!Y.dueDate,className:"flex-[2] py-5 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:re?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-5 h-5 animate-spin"})," Importing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-5 h-5"})," Execute Registry Deploy"]})})]})]})}),n.jsx("input",{ref:ke,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:Wt})]})}),K&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:K.archived?n.jsx(l1,{className:"w-6 h-6"}):n.jsx(Cu,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:K.archived?"Restore Task?":"Archive Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:K.archived?"This will restore the task to active status.":"This will move the task to archive. You can restore it later."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:K.title}),K.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:K.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>ae(null),disabled:O===K.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>lt(K.id),disabled:O===K.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O===K.id?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),K.archived?"Restoring...":"Archiving..."]}):K.archived?"Restore Task":"Archive Task"})]})]})}),me&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:me.title}),me.description&&n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:me.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>se(null),disabled:te===me.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>xt(me.id),disabled:te===me.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:te===me.id?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Task"})]})]})}),we.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:we.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Ve=>{Ve.stopPropagation(),fe(!0),Le("")},disabled:Se,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[n.jsx(Yd,{className:"w-3.5 h-3.5"}),"Assign to project"]}),n.jsxs("button",{onClick:Ve=>{Ve.stopPropagation(),Xe(!0)},disabled:de,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[de?n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>Oe([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),xe&&we.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:n.jsx(Yd,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Assign to project"}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["Change the linked project for ",we.length," selected task",we.length>1?"s":"","."]})]})]}),n.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Project"}),n.jsxs("select",{value:je,onChange:Ve=>Le(Ve.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"Select project..."}),n.jsx("option",{value:"__none__",children:"None (General)"}),d.filter(Ve=>!Ve.archived).map(Ve=>n.jsx("option",{value:Ve.id,children:Ve.title},Ve.id))]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>{fe(!1),Le("")},disabled:Se,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Ke,disabled:Se||!je,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Se?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):`Assign ${we.length} task${we.length>1?"s":""}`})]})]})}),Ce&&we.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",we.length," Task",we.length>1?"s":"","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The tasks will be permanently removed."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Ve=>we.includes(Ve.id)).slice(0,5).map(Ve=>n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[n.jsx(_i,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ve.title}),n.jsx("p",{className:"text-[10px] text-slate-500",children:d.find(Lt=>Lt.id===Ve.projectId)?.title||"General"})]})]},Ve.id)),we.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",we.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Xe(!1),disabled:de,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:ve,disabled:de,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:de?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${we.length} Task${we.length>1?"s":""}`})]})]})}),le&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Lo}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:Lo,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:n.jsx(_i,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[ue?n.jsx("input",{type:"text",value:Z.title,onChange:Ve=>Ee(Lt=>({...Lt,title:Ve.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:le.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${le.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":le.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":le.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:le.status}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",le.id.substring(0,8)]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:ue?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{Ue(!1),Ee({title:le.title,description:le.description||"",dueDate:le.dueDate||"",priority:le.priority||"Medium",status:le.status||"Todo",assigneeId:le.assigneeId,projectId:le.projectId||""})},disabled:Ae,className:"px-4 py-2 border border-slate-200 text-slate-500 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"CANCEL"}),n.jsx("button",{onClick:Kt,disabled:Ae||!Z.title.trim()||!Z.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Ae?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),"SAVE CHANGES"]})})]}):n.jsxs("button",{onClick:()=>Ue(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Do,{className:"w-4 h-4"}),"Edit Task"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"ASSIGNEE"}),ue?n.jsxs("select",{value:Z.assigneeId,onChange:Ve=>Ee(Lt=>({...Lt,assigneeId:Ve.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"Select Assignee"}),f.map(Ve=>n.jsx("option",{value:Ve.id,children:Ve.name},Ve.id))]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:f.find(Ve=>Ve.id===le.assigneeId)?.name?.charAt(0)||"U"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.find(Ve=>Ve.id===le.assigneeId)?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"LINKED PROJECT"}),ue?n.jsxs("select",{value:Z.projectId,onChange:Ve=>Ee(Lt=>({...Lt,projectId:Ve.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"None"}),d.filter(Ve=>!Ve.archived).map(Ve=>n.jsx("option",{value:Ve.id,children:Ve.title},Ve.id))]}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:le.projectId?d.find(Ve=>Ve.id===le.projectId)?.title||"Unknown Project":"None"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] flex items-center gap-2 px-1",children:[n.jsx(Qn,{className:"w-4 h-4 text-indigo-500"})," DESCRIPTION"]}),ue?n.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:n.jsx(a_,{value:Z.description||"",onChange:Ve=>Ee(Lt=>({...Lt,description:Ve})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):n.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[le.description?n.jsx(H9,{content:le.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert max-w-none prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50 [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1"}):n.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[n.jsx(Ms,{className:"w-3.5 h-3.5"})," TASK CATEGORY"]}),ue?n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsxs("select",{value:kr?"__new__":Z.category||"",onChange:Ve=>{const Lt=Ve.target.value;Lt==="__new__"?(Fr(!0),Ee(Ot=>({...Ot,category:""}))):(Fr(!1),Ee(Ot=>({...Ot,category:Lt})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),Gr.map(Ve=>n.jsx("option",{value:Ve,children:Ve},Ve)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),kr&&n.jsx("input",{type:"text",value:Z.category,onChange:Ve=>Ee(Lt=>({...Lt,category:Ve.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):n.jsx("div",{className:"flex items-center gap-2 mt-2",children:le.category?n.jsxs(n.Fragment,{children:[n.jsx(Ms,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-sm font-bold text-indigo-700",children:le.category})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"DUE DATE"}),ue?n.jsx("input",{type:"date",value:Z.dueDate,onChange:Ve=>Ee(Lt=>({...Lt,dueDate:Ve.target.value})),placeholder:"dd/mm/yyyy",className:"w-full px-4 py-2 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-600 mt-2 [color-scheme:light]"}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:le.dueDate?_e(le.dueDate):"Ongoing"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"PRIORITY"}),ue?n.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200 mt-2",children:["Low","Medium","High"].map(Ve=>n.jsx("button",{onClick:()=>Ee(Lt=>({...Lt,priority:Ve})),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${Z.priority===Ve?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:Ve.toUpperCase()},Ve))}):n.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${le.priority==="High"?"bg-red-50 text-red-600":le.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:le.priority})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"STATUS"}),ue?n.jsxs("select",{value:Z.status,onChange:Ve=>Ee(Lt=>({...Lt,status:Ve.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"Todo",children:"Todo"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Review",children:"Review"}),n.jsx("option",{value:"Done",children:"Done"})]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[le.status==="Done"?n.jsx(Nn,{className:"w-5 h-5 text-emerald-500"}):le.status==="In Progress"?n.jsx(is,{className:"w-5 h-5 text-blue-500 animate-pulse"}):n.jsx(Pu,{className:"w-5 h-5 text-slate-400"}),n.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:le.status})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",le.notes&&le.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:le.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:$e,rows:5,value:Re,onChange:Ur,onBlur:()=>{setTimeout(()=>tt(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),Hr&&_r.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(wh,{className:"w-3 h-3"}),"Mention User"]}),_r.map(Ve=>n.jsxs("button",{onClick:()=>un(Ve),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Ve.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Ve.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:Ve.email})]})]},Ve.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:ut?n.jsx(Sl,{className:"w-4 h-4"}):n.jsx(kc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ut?At?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:ze,type:"file",accept:"image/*",onChange:$r,className:"hidden"})]}),n.jsx("button",{onClick:Kn,disabled:Yt||!Re.trim()&&!At,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:Yt?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),ut&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:ut,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{vt(""),Bt(null),ze.current&&(ze.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(tr,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:le.notes&&le.notes.length>0?[...le.notes].reverse().map(Ve=>{const Lt=t?.role==="Admin"||Ve.userId===t?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:Ve.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ve.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Ve.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Lt&&n.jsx("button",{onClick:()=>Dr(Ve.id),disabled:Ct===Ve.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Ct===Ve.id?n.jsx(gt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Ve.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:aa(Ve.text)}),Ve.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsx("img",{src:Ve.imageUrl,alt:Ve.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Ot=window.open();Ot&&Ot.document.write(`<img src="${Ve.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},Ve.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(co,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("button",{onClick:()=>en(!sr),className:"w-full flex items-center justify-between group",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),n.jsx(wa,{className:`w-4 h-4 text-slate-400 transition-transform ${sr?"rotate-90":""}`})]}),sr&&n.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:le.createdAt?new Date(le.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),le.updatedAt&&le.updatedAt!==le.createdAt&&n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(le.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),le.notes&&le.notes.map((Ve,Lt)=>n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[Ve.userName," added a comment"]}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(Ve.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},Ve.id)),(!le.notes||le.notes.length===0)&&(!le.updatedAt||le.updatedAt===le.createdAt)&&n.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>{se(le),Lo()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:Lo,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(Nn,{className:"w-5 h-5"})," CLOSE"]})]})]})]}),Jt&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:n.jsx($n,{className:"w-6 h-6"})}),n.jsxs("div",{className:"text-center",children:[n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[n.jsx("button",{onClick:()=>Dr(null),disabled:Ct===Jt,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:Ln,disabled:Ct===Jt,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ct===Jt?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})};function Da(e){"@babel/helpers - typeof";return Da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Da(e)}var cl=Uint8Array,jc=Uint16Array,s_=Int32Array,Cy=new cl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Ay=new cl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Uk=new cl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),W9=function(e,t){for(var r=new jc(31),a=0;a<31;++a)r[a]=t+=1<<e[a-1];for(var s=new s_(r[30]),a=1;a<30;++a)for(var i=r[a];i<r[a+1];++i)s[i]=i-r[a]<<5|a;return{b:r,r:s}},G9=W9(Cy,2),V9=G9.b,qk=G9.r;V9[28]=258,qk[258]=28;var K9=W9(Ay,0),_1e=K9.b,r8=K9.r,$k=new jc(32768);for(var xs=0;xs<32768;++xs){var n0=(xs&43690)>>1|(xs&21845)<<1;n0=(n0&52428)>>2|(n0&13107)<<2,n0=(n0&61680)>>4|(n0&3855)<<4,$k[xs]=((n0&65280)>>8|(n0&255)<<8)>>1}var Fu=(function(e,t,r){for(var a=e.length,s=0,i=new jc(t);s<a;++s)e[s]&&++i[e[s]-1];var o=new jc(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new jc(1<<t);var c=15-t;for(s=0;s<a;++s)if(e[s])for(var d=s<<4|e[s],u=t-e[s],f=o[e[s]-1]++<<u,p=f|(1<<u)-1;f<=p;++f)l[$k[f]>>c]=d}else for(l=new jc(a),s=0;s<a;++s)e[s]&&(l[s]=$k[o[e[s]-1]++]>>15-e[s]);return l}),_0=new cl(288);for(var xs=0;xs<144;++xs)_0[xs]=8;for(var xs=144;xs<256;++xs)_0[xs]=9;for(var xs=256;xs<280;++xs)_0[xs]=7;for(var xs=280;xs<288;++xs)_0[xs]=8;var xg=new cl(32);for(var xs=0;xs<32;++xs)xg[xs]=5;var C1e=Fu(_0,9,0),A1e=Fu(_0,9,1),E1e=Fu(xg,5,0),T1e=Fu(xg,5,1),Lj=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Ud=function(e,t,r){var a=t/8|0;return(e[a]|e[a+1]<<8)>>(t&7)&r},Fj=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},i_=function(e){return(e+7)/8|0},X9=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new cl(e.subarray(t,r))},O1e=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],zd=function(e,t,r){var a=new Error(t||O1e[e]);if(a.code=e,Error.captureStackTrace&&Error.captureStackTrace(a,zd),!r)throw a;return a},P1e=function(e,t,r,a){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new cl(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new cl(s*3));var d=function(Me){var ue=r.length;if(Me>ue){var Ue=new cl(Math.max(ue*2,Me));Ue.set(r),r=Ue}},u=t.f||0,f=t.p||0,p=t.b||0,m=t.l,b=t.d,v=t.m,g=t.n,w=s*8;do{if(!m){u=Ud(e,f,1);var y=Ud(e,f+1,3);if(f+=3,y)if(y==1)m=A1e,b=T1e,v=9,g=5;else if(y==2){var E=Ud(e,f,31)+257,A=Ud(e,f+10,15)+4,P=E+Ud(e,f+5,31)+1;f+=14;for(var I=new cl(P),B=new cl(19),T=0;T<A;++T)B[Uk[T]]=Ud(e,f+T*3,7);f+=A*3;for(var _=Lj(B),R=(1<<_)-1,z=Fu(B,_,1),T=0;T<P;){var H=z[Ud(e,f,R)];f+=H&15;var j=H>>4;if(j<16)I[T++]=j;else{var Y=0,J=0;for(j==16?(J=3+Ud(e,f,3),f+=2,Y=I[T-1]):j==17?(J=3+Ud(e,f,7),f+=3):j==18&&(J=11+Ud(e,f,127),f+=7);J--;)I[T++]=Y}}var re=I.subarray(0,E),X=I.subarray(E);v=Lj(re),g=Lj(X),m=Fu(re,v,1),b=Fu(X,g,1)}else zd(1);else{var j=i_(f)+4,N=e[j-4]|e[j-3]<<8,S=j+N;if(S>s){c&&zd(0);break}l&&d(p+N),r.set(e.subarray(j,S),p),t.b=p+=N,t.p=f=S*8,t.f=u;continue}if(f>w){c&&zd(0);break}}l&&d(p+131072);for(var te=(1<<v)-1,W=(1<<g)-1,O=f;;O=f){var Y=m[Fj(e,f)&te],q=Y>>4;if(f+=Y&15,f>w){c&&zd(0);break}if(Y||zd(2),q<256)r[p++]=q;else if(q==256){O=f,m=null;break}else{var G=q-254;if(q>264){var T=q-257,U=Cy[T];G=Ud(e,f,(1<<U)-1)+V9[T],f+=U}var K=b[Fj(e,f)&W],ae=K>>4;K||zd(3),f+=K&15;var X=_1e[ae];if(ae>3){var U=Ay[ae];X+=Fj(e,f)&(1<<U)-1,f+=U}if(f>w){c&&zd(0);break}l&&d(p+131072);var me=p+G;if(p<X){var se=i-X,le=Math.min(X,me);for(se+p<0&&zd(3);p<le;++p)r[p]=a[se+p]}for(;p<me;++p)r[p]=r[p-X]}}t.l=m,t.p=O,t.b=p,t.f=u,m&&(u=1,t.m=v,t.d=b,t.n=g)}while(!u);return p!=r.length&&o?X9(r,0,p):r.subarray(0,p)},df=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8},Hp=function(e,t,r){r<<=t&7;var a=t/8|0;e[a]|=r,e[a+1]|=r>>8,e[a+2]|=r>>16},Mj=function(e,t){for(var r=[],a=0;a<e.length;++a)e[a]&&r.push({s:a,f:e[a]});var s=r.length,i=r.slice();if(!s)return{t:Q9,l:0};if(s==1){var o=new cl(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,E){return S.f-E.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,u=1,f=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};u!=s-1;)l=r[r[d].f<r[f].f?d++:f++],c=r[d!=u&&r[d].f<r[f].f?d++:f++],r[u++]={s:-1,f:l.f+c.f,l,r:c};for(var p=i[0].s,a=1;a<s;++a)i[a].s>p&&(p=i[a].s);var m=new jc(p+1),b=zk(r[u-1],m,0);if(b>t){var a=0,v=0,g=b-t,w=1<<g;for(i.sort(function(E,A){return m[A.s]-m[E.s]||E.f-A.f});a<s;++a){var y=i[a].s;if(m[y]>t)v+=w-(1<<b-m[y]),m[y]=t;else break}for(v>>=g;v>0;){var j=i[a].s;m[j]<t?v-=1<<t-m[j]++-1:++a}for(;a>=0&&v;--a){var N=i[a].s;m[N]==t&&(--m[N],++v)}b=t}return{t:new cl(m),l:b}},zk=function(e,t,r){return e.s==-1?Math.max(zk(e.l,t,r+1),zk(e.r,t,r+1)):t[e.s]=r},n8=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new jc(++t),a=0,s=e[0],i=1,o=function(c){r[a++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,a),n:t}},Wp=function(e,t){for(var r=0,a=0;a<t.length;++a)r+=e[a]*t[a];return r},Y9=function(e,t,r){var a=r.length,s=i_(t+2);e[s]=a&255,e[s+1]=a>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<a;++i)e[s+i+4]=r[i];return(s+4+a)*8},a8=function(e,t,r,a,s,i,o,l,c,d,u){df(t,u++,r),++s[256];for(var f=Mj(s,15),p=f.t,m=f.l,b=Mj(i,15),v=b.t,g=b.l,w=n8(p),y=w.c,j=w.n,N=n8(v),S=N.c,E=N.n,A=new jc(19),P=0;P<y.length;++P)++A[y[P]&31];for(var P=0;P<S.length;++P)++A[S[P]&31];for(var I=Mj(A,7),B=I.t,T=I.l,_=19;_>4&&!B[Uk[_-1]];--_);var R=d+5<<3,z=Wp(s,_0)+Wp(i,xg)+o,H=Wp(s,p)+Wp(i,v)+o+14+3*_+Wp(A,B)+2*A[16]+3*A[17]+7*A[18];if(c>=0&&R<=z&&R<=H)return Y9(t,u,e.subarray(c,c+d));var Y,J,re,X;if(df(t,u,1+(H<z)),u+=2,H<z){Y=Fu(p,m,0),J=p,re=Fu(v,g,0),X=v;var te=Fu(B,T,0);df(t,u,j-257),df(t,u+5,E-1),df(t,u+10,_-4),u+=14;for(var P=0;P<_;++P)df(t,u+3*P,B[Uk[P]]);u+=3*_;for(var W=[y,S],O=0;O<2;++O)for(var q=W[O],P=0;P<q.length;++P){var G=q[P]&31;df(t,u,te[G]),u+=B[G],G>15&&(df(t,u,q[P]>>5&127),u+=q[P]>>12)}}else Y=C1e,J=_0,re=E1e,X=xg;for(var P=0;P<l;++P){var U=a[P];if(U>255){var G=U>>18&31;Hp(t,u,Y[G+257]),u+=J[G+257],G>7&&(df(t,u,U>>23&31),u+=Cy[G]);var K=U&31;Hp(t,u,re[K]),u+=X[K],K>3&&(Hp(t,u,U>>5&8191),u+=Ay[K])}else Hp(t,u,Y[U]),u+=J[U]}return Hp(t,u,Y[256]),u+J[256]},I1e=new s_([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Q9=new cl(0),D1e=function(e,t,r,a,s,i){var o=i.z||e.length,l=new cl(a+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(a,l.length-s),d=i.l,u=(i.r||0)&7;if(t){u&&(c[0]=i.r>>3);for(var f=I1e[t-1],p=f>>13,m=f&8191,b=(1<<r)-1,v=i.p||new jc(32768),g=i.h||new jc(b+1),w=Math.ceil(r/3),y=2*w,j=function(Ae){return(e[Ae]^e[Ae+1]<<w^e[Ae+2]<<y)&b},N=new s_(25e3),S=new jc(288),E=new jc(32),A=0,P=0,I=i.i||0,B=0,T=i.w||0,_=0;I+2<o;++I){var R=j(I),z=I&32767,H=g[R];if(v[z]=H,g[R]=z,T<=I){var Y=o-I;if((A>7e3||B>24576)&&(Y>423||!d)){u=a8(e,c,0,N,S,E,P,B,_,I-_,u),B=A=P=0,_=I;for(var J=0;J<286;++J)S[J]=0;for(var J=0;J<30;++J)E[J]=0}var re=2,X=0,te=m,W=z-H&32767;if(Y>2&&R==j(I-W))for(var O=Math.min(p,Y)-1,q=Math.min(32767,I),G=Math.min(258,Y);W<=q&&--te&&z!=H;){if(e[I+re]==e[I+re-W]){for(var U=0;U<G&&e[I+U]==e[I+U-W];++U);if(U>re){if(re=U,X=W,U>O)break;for(var K=Math.min(W,U-2),ae=0,J=0;J<K;++J){var me=I-W+J&32767,se=v[me],le=me-se&32767;le>ae&&(ae=le,H=me)}}}z=H,H=v[z],W+=z-H&32767}if(X){N[B++]=268435456|qk[re]<<18|r8[X];var Me=qk[re]&31,ue=r8[X]&31;P+=Cy[Me]+Ay[ue],++S[257+Me],++E[ue],T=I+re,++A}else N[B++]=e[I],++S[e[I]]}}for(I=Math.max(I,T);I<o;++I)N[B++]=e[I],++S[e[I]];u=a8(e,c,d,N,S,E,P,B,_,I-_,u),d||(i.r=u&7|c[u/8|0]<<3,u-=7,i.h=g,i.p=v,i.i=I,i.w=T)}else{for(var I=i.w||0;I<o+d;I+=65535){var Ue=I+65535;Ue>=o&&(c[u/8|0]=d,Ue=o),u=Y9(c,u+1,e.subarray(I,Ue))}i.i=o}return X9(l,0,a+i_(u)+s)},J9=function(){var e=1,t=0;return{p:function(r){for(var a=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=a+=r[o];a=(a&65535)+15*(a>>16),s=(s&65535)+15*(s>>16)}e=a,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},L1e=function(e,t,r,a,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new cl(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return D1e(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,a,s)},Z9=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},F1e=function(e,t){var r=t.level,a=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=a<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=J9();s.p(t.dictionary),Z9(e,2,s.d())}},M1e=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&zd(6,"invalid zlib data"),(e[1]>>5&1)==1&&zd(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function Hk(e,t){t||(t={});var r=J9();r.p(e);var a=L1e(e,t,t.dictionary?6:2,4);return F1e(a,t),Z9(a,a.length-4,r.d()),a}function R1e(e,t){return P1e(e.subarray(M1e(e),-4),{i:2},t,t)}var B1e=typeof TextDecoder<"u"&&new TextDecoder,U1e=0;try{B1e.decode(Q9,{stream:!0}),U1e=1}catch{}var xn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function Rj(){xn.console&&typeof xn.console.log=="function"&&xn.console.log.apply(xn.console,arguments)}var es={log:Rj,warn:function(e){xn.console&&(typeof xn.console.warn=="function"?xn.console.warn.apply(xn.console,arguments):Rj.call(null,arguments))},error:function(e){xn.console&&(typeof xn.console.error=="function"?xn.console.error.apply(xn.console,arguments):Rj(e))}};function Bj(e,t,r){var a=new XMLHttpRequest;a.open("GET",e),a.responseType="blob",a.onload=function(){th(a.response,t,r)},a.onerror=function(){es.error("could not download file")},a.send()}function s8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function qv(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var px,Wk,th=xn.saveAs||((typeof window>"u"?"undefined":Da(window))!=="object"||window!==xn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var a=xn.URL||xn.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?s8(s.href)?Bj(e,t,r):qv(s,s.target="_blank"):qv(s)):(s.href=a.createObjectURL(e),setTimeout((function(){a.revokeObjectURL(s.href)}),4e4),setTimeout((function(){qv(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(s8(e))Bj(e,t,r);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){qv(a)}))}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:Da(i)!=="object"&&(es.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(e,r),t)}:function(e,t,r,a){if((a=a||open("","_blank"))&&(a.document.title=a.document.body.innerText="downloading..."),typeof e=="string")return Bj(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(xn.HTMLElement)||xn.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":Da(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var u=l.result;u=o?u:u.replace(/^data:[^;]*;/,"data:attachment/file;"),a?a.location.href=u:location=u,a=null},l.readAsDataURL(e)}else{var c=xn.URL||xn.webkitURL,d=c.createObjectURL(e);a?a.location=d:location.href=d,a=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});function eB(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],a=0;a<r.length;a++){var s=r[a].re,i=r[a].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}function Uj(e,t){var r=e[0],a=e[1],s=e[2],i=e[3];r=Jo(r,a,s,i,t[0],7,-680876936),i=Jo(i,r,a,s,t[1],12,-389564586),s=Jo(s,i,r,a,t[2],17,606105819),a=Jo(a,s,i,r,t[3],22,-1044525330),r=Jo(r,a,s,i,t[4],7,-176418897),i=Jo(i,r,a,s,t[5],12,1200080426),s=Jo(s,i,r,a,t[6],17,-1473231341),a=Jo(a,s,i,r,t[7],22,-45705983),r=Jo(r,a,s,i,t[8],7,1770035416),i=Jo(i,r,a,s,t[9],12,-1958414417),s=Jo(s,i,r,a,t[10],17,-42063),a=Jo(a,s,i,r,t[11],22,-1990404162),r=Jo(r,a,s,i,t[12],7,1804603682),i=Jo(i,r,a,s,t[13],12,-40341101),s=Jo(s,i,r,a,t[14],17,-1502002290),r=Zo(r,a=Jo(a,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=Zo(i,r,a,s,t[6],9,-1069501632),s=Zo(s,i,r,a,t[11],14,643717713),a=Zo(a,s,i,r,t[0],20,-373897302),r=Zo(r,a,s,i,t[5],5,-701558691),i=Zo(i,r,a,s,t[10],9,38016083),s=Zo(s,i,r,a,t[15],14,-660478335),a=Zo(a,s,i,r,t[4],20,-405537848),r=Zo(r,a,s,i,t[9],5,568446438),i=Zo(i,r,a,s,t[14],9,-1019803690),s=Zo(s,i,r,a,t[3],14,-187363961),a=Zo(a,s,i,r,t[8],20,1163531501),r=Zo(r,a,s,i,t[13],5,-1444681467),i=Zo(i,r,a,s,t[2],9,-51403784),s=Zo(s,i,r,a,t[7],14,1735328473),r=el(r,a=Zo(a,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=el(i,r,a,s,t[8],11,-2022574463),s=el(s,i,r,a,t[11],16,1839030562),a=el(a,s,i,r,t[14],23,-35309556),r=el(r,a,s,i,t[1],4,-1530992060),i=el(i,r,a,s,t[4],11,1272893353),s=el(s,i,r,a,t[7],16,-155497632),a=el(a,s,i,r,t[10],23,-1094730640),r=el(r,a,s,i,t[13],4,681279174),i=el(i,r,a,s,t[0],11,-358537222),s=el(s,i,r,a,t[3],16,-722521979),a=el(a,s,i,r,t[6],23,76029189),r=el(r,a,s,i,t[9],4,-640364487),i=el(i,r,a,s,t[12],11,-421815835),s=el(s,i,r,a,t[15],16,530742520),r=tl(r,a=el(a,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=tl(i,r,a,s,t[7],10,1126891415),s=tl(s,i,r,a,t[14],15,-1416354905),a=tl(a,s,i,r,t[5],21,-57434055),r=tl(r,a,s,i,t[12],6,1700485571),i=tl(i,r,a,s,t[3],10,-1894986606),s=tl(s,i,r,a,t[10],15,-1051523),a=tl(a,s,i,r,t[1],21,-2054922799),r=tl(r,a,s,i,t[8],6,1873313359),i=tl(i,r,a,s,t[15],10,-30611744),s=tl(s,i,r,a,t[6],15,-1560198380),a=tl(a,s,i,r,t[13],21,1309151649),r=tl(r,a,s,i,t[4],6,-145523070),i=tl(i,r,a,s,t[11],10,-1120210379),s=tl(s,i,r,a,t[2],15,718787259),a=tl(a,s,i,r,t[9],21,-343485551),e[0]=p0(r,e[0]),e[1]=p0(a,e[1]),e[2]=p0(s,e[2]),e[3]=p0(i,e[3])}function Ey(e,t,r,a,s,i){return t=p0(p0(t,e),p0(a,i)),p0(t<<s|t>>>32-s,r)}function Jo(e,t,r,a,s,i,o){return Ey(t&r|~t&a,e,t,s,i,o)}function Zo(e,t,r,a,s,i,o){return Ey(t&a|r&~a,e,t,s,i,o)}function el(e,t,r,a,s,i,o){return Ey(t^r^a,e,t,s,i,o)}function tl(e,t,r,a,s,i,o){return Ey(r^(t|~a),e,t,s,i,o)}function tB(e){var t,r=e.length,a=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)Uj(a,q1e(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(Uj(a,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,Uj(a,s),a}function q1e(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}px=xn.atob.bind(xn),Wk=xn.btoa.bind(xn);var i8="0123456789abcdef".split("");function $1e(e){for(var t="",r=0;r<4;r++)t+=i8[e>>8*r+4&15]+i8[e>>8*r&15];return t}function z1e(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Gk(e){return tB(e).map(z1e).join("")}var H1e=(function(e){for(var t=0;t<e.length;t++)e[t]=$1e(e[t]);return e.join("")})(tB("hello"))!="5d41402abc4b2a76b9719d911017c592";function p0(e,t){if(H1e){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function Vk(e,t){var r,a,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var u=l[c];d=(d+u+o.charCodeAt(c))%256,l[c]=l[d],l[d]=u}r=e,a=l}else l=a;var f=t.length,p=0,m=0,b="";for(c=0;c<f;c++)m=(m+(u=l[p=(p+1)%256]))%256,l[p]=l[m],l[m]=u,o=l[(l[p]+l[m])%256],b+=String.fromCharCode(t.charCodeAt(c)^o);return b}var o8={print:4,modify:8,copy:16,"annot-forms":32};function fm(e,t,r,a){this.v=1,this.r=2;var s=192;e.forEach((function(l){if(o8.perm!==void 0)throw new Error("Invalid permission: "+l);s+=o8[l]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=Gk(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(a)).substr(0,5),this.U=Vk(this.encryptionKey,this.padding)}function hm(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,a=0;a<r;a++){var s=e.charCodeAt(a);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[a]}return t}function l8(e){if(Da(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,a,s){if(s=s||!1,typeof r!="string"||typeof a!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[a,!!s],i},this.unsubscribe=function(r){for(var a in t)if(t[a][r])return delete t[a][r],Object.keys(t[a]).length===0&&delete t[a],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var a=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,a)}catch(l){xn.console&&es.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Eb(e){if(!(this instanceof Eb))return new Eb(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function rB(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function nh(e,t,r,a,s){if(!(this instanceof nh))return new nh(e,t,r,a,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,rB.call(this,a,s)}function vm(e,t,r,a,s){if(!(this instanceof vm))return new vm(e,t,r,a,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,rB.call(this,a,s)}function pn(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",a=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",u=null;Da(e=e||{})==="object"&&(r=e.orientation,a=e.unit||a,s=e.format||s,i=e.compress||e.compressPdf||i,(u=e.encryption||null)!==null&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),a=a||"mm",r=(""+(r||"P")).toLowerCase();var f=e.putOnlyUsedFonts||!1,p={},m={internal:{},__private__:{}};m.__private__.PubSub=l8;var b="1.3",v=m.__private__.getPdfVersion=function(){return b};m.__private__.setPdfVersion=function(V){b=V};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return g};var w=m.__private__.getPageFormat=function(V){return g[V]};s=s||"a4";var y={COMPAT:"compat",ADVANCED:"advanced"},j=y.COMPAT;function N(){this.saveGraphicsState(),Z(new sr(Je,0,0,-Je,0,nc()*Je).toString()+" cm"),this.setFontSize(this.getFontSize()/Je),d="n",j=y.ADVANCED}function S(){this.restoreGraphicsState(),d="S",j=y.COMPAT}var E=m.__private__.combineFontStyleAndFontWeight=function(V,Ne){if(V=="bold"&&Ne=="normal"||V=="bold"&&Ne==400||V=="normal"&&Ne=="italic"||V=="bold"&&Ne=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ne&&(V=Ne==400||Ne==="normal"?V==="italic"?"italic":"normal":Ne!=700&&Ne!=="bold"||V!=="normal"?(Ne==700?"bold":Ne)+""+V:"bold"),V};m.advancedAPI=function(V){var Ne=j===y.COMPAT;return Ne&&N.call(this),typeof V!="function"||(V(this),Ne&&S.call(this)),this},m.compatAPI=function(V){var Ne=j===y.ADVANCED;return Ne&&S.call(this),typeof V!="function"||(V(this),Ne&&N.call(this)),this},m.isAdvancedAPI=function(){return j===y.ADVANCED};var A,P=function(V){if(j!==y.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=m.roundToPrecision=m.__private__.roundToPrecision=function(V,Ne){var Ye=t||Ne;if(isNaN(V)||isNaN(Ye))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed(Ye).replace(/0+$/,"")};A=m.hpf=m.__private__.hpf=typeof c=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return I(V,c)}:c==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return I(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return I(V,16)};var B=m.f2=m.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return I(V,2)},T=m.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return I(V,3)},_=m.scale=m.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return j===y.COMPAT?V*Je:j===y.ADVANCED?V:void 0},R=function(V){return j===y.COMPAT?nc()-V:j===y.ADVANCED?V:void 0},z=function(V){return _(R(V))};m.__private__.setPrecision=m.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(t=parseInt(V,10))};var H,Y="00000000000000000000000000000000",J=m.__private__.getFileId=function(){return Y},re=m.__private__.setFileId=function(V){return Y=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():Y.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),u!==null&&(kn=new fm(u.userPermissions,u.userPassword,u.ownerPassword,Y)),Y};m.setFileId=function(V){return re(V),this},m.getFileId=function(){return J()};var X=m.__private__.convertDateToPDFDate=function(V){var Ne=V.getTimezoneOffset(),Ye=Ne<0?"+":"-",rt=Math.floor(Math.abs(Ne/60)),yt=Math.abs(Ne%60),Ft=[Ye,G(rt),"'",G(yt),"'"].join("");return["D:",V.getFullYear(),G(V.getMonth()+1),G(V.getDate()),G(V.getHours()),G(V.getMinutes()),G(V.getSeconds()),Ft].join("")},te=m.__private__.convertPDFDateToDate=function(V){var Ne=parseInt(V.substr(2,4),10),Ye=parseInt(V.substr(6,2),10)-1,rt=parseInt(V.substr(8,2),10),yt=parseInt(V.substr(10,2),10),Ft=parseInt(V.substr(12,2),10),Qt=parseInt(V.substr(14,2),10);return new Date(Ne,Ye,rt,yt,Ft,Qt,0)},W=m.__private__.setCreationDate=function(V){var Ne;if(V===void 0&&(V=new Date),V instanceof Date)Ne=X(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ne=V}return H=Ne},O=m.__private__.getCreationDate=function(V){var Ne=H;return V==="jsDate"&&(Ne=te(H)),Ne};m.setCreationDate=function(V){return W(V),this},m.getCreationDate=function(V){return O(V)};var q,G=m.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},U=m.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},K=0,ae=[],me=[],se=0,le=[],Me=[],ue=!1,Ue=me,Ae=function(){K=0,se=0,me=[],ae=[],le=[],$e=Fr(),pe=Fr()};m.__private__.setCustomOutputDestination=function(V){ue=!0,Ue=V};var ie=function(V){ue||(Ue=V)};m.__private__.resetCustomOutputDestination=function(){ue=!1,Ue=me};var Z=m.__private__.out=function(V){return V=V.toString(),se+=V.length+1,Ue.push(V),Ue},Ee=m.__private__.write=function(V){return Z(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},we=m.__private__.getArrayBuffer=function(V){for(var Ne=V.length,Ye=new ArrayBuffer(Ne),rt=new Uint8Array(Ye);Ne--;)rt[Ne]=V.charCodeAt(Ne);return Ye},Oe=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return Oe};var de=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(V){return de=j===y.ADVANCED?V/Je:V,this};var ce,Ce=m.__private__.getFontSize=m.getFontSize=function(){return j===y.COMPAT?de:de*Je},Xe=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(V){return Xe=V,this},m.__private__.getR2L=m.getR2L=function(){return Xe};var xe,fe=m.__private__.setZoomMode=function(V){var Ne=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))ce=V;else if(isNaN(V)){if(Ne.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');ce=V}else ce=parseInt(V,10)};m.__private__.getZoomMode=function(){return ce};var Se,qe=m.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');xe=V};m.__private__.getPageMode=function(){return xe};var je=m.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');Se=V};m.__private__.getLayoutMode=function(){return Se},m.__private__.setDisplayMode=m.setDisplayMode=function(V,Ne,Ye){return fe(V),je(Ne),qe(Ye),this};var Le={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(V){if(Object.keys(Le).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Le[V]},m.__private__.getDocumentProperties=function(){return Le},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(V){for(var Ne in Le)Le.hasOwnProperty(Ne)&&V[Ne]&&(Le[Ne]=V[Ne]);return this},m.__private__.setDocumentProperty=function(V,Ne){if(Object.keys(Le).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Le[V]=Ne};var Re,Je,ut,vt,At,Bt={},Yt={},We=[],Ct={},br={},Jt={},Dr={},Hr=null,tt=0,Dt=[],mr=new l8(m),Sr=e.hotfixes||[],Jr={},_r={},Wr=[],sr=function V(Ne,Ye,rt,yt,Ft,Qt){if(!(this instanceof V))return new V(Ne,Ye,rt,yt,Ft,Qt);isNaN(Ne)&&(Ne=1),isNaN(Ye)&&(Ye=0),isNaN(rt)&&(rt=0),isNaN(yt)&&(yt=1),isNaN(Ft)&&(Ft=0),isNaN(Qt)&&(Qt=0),this._matrix=[Ne,Ye,rt,yt,Ft,Qt]};Object.defineProperty(sr.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(sr.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(sr.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(sr.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(sr.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(sr.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(sr.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(sr.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(sr.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(sr.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(sr.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(sr.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(sr.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(sr.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(sr.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(sr.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),sr.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(V)},sr.prototype.multiply=function(V){var Ne=V.sx*this.sx+V.shy*this.shx,Ye=V.sx*this.shy+V.shy*this.sy,rt=V.shx*this.sx+V.sy*this.shx,yt=V.shx*this.shy+V.sy*this.sy,Ft=V.tx*this.sx+V.ty*this.shx+this.tx,Qt=V.tx*this.shy+V.ty*this.sy+this.ty;return new sr(Ne,Ye,rt,yt,Ft,Qt)},sr.prototype.decompose=function(){var V=this.sx,Ne=this.shy,Ye=this.shx,rt=this.sy,yt=this.tx,Ft=this.ty,Qt=Math.sqrt(V*V+Ne*Ne),Nr=(V/=Qt)*Ye+(Ne/=Qt)*rt;Ye-=V*Nr,rt-=Ne*Nr;var Yr=Math.sqrt(Ye*Ye+rt*rt);return Nr/=Yr,V*(rt/=Yr)<Ne*(Ye/=Yr)&&(V=-V,Ne=-Ne,Nr=-Nr,Qt=-Qt),{scale:new sr(Qt,0,0,Yr,0,0),translate:new sr(1,0,0,1,yt,Ft),rotate:new sr(V,Ne,-Ne,V,0,0),skew:new sr(1,0,Nr,1,0,0)}},sr.prototype.toString=function(V){return this.join(" ")},sr.prototype.inversed=function(){var V=this.sx,Ne=this.shy,Ye=this.shx,rt=this.sy,yt=this.tx,Ft=this.ty,Qt=1/(V*rt-Ne*Ye),Nr=rt*Qt,Yr=-Ne*Qt,fn=-Ye*Qt,sn=V*Qt;return new sr(Nr,Yr,fn,sn,-Nr*yt-fn*Ft,-Yr*yt-sn*Ft)},sr.prototype.applyToPoint=function(V){var Ne=V.x*this.sx+V.y*this.shx+this.tx,Ye=V.x*this.shy+V.y*this.sy+this.ty;return new Ei(Ne,Ye)},sr.prototype.applyToRectangle=function(V){var Ne=this.applyToPoint(V),Ye=this.applyToPoint(new Ei(V.x+V.w,V.y+V.h));return new Mo(Ne.x,Ne.y,Ye.x-Ne.x,Ye.y-Ne.y)},sr.prototype.clone=function(){var V=this.sx,Ne=this.shy,Ye=this.shx,rt=this.sy,yt=this.tx,Ft=this.ty;return new sr(V,Ne,Ye,rt,yt,Ft)},m.Matrix=sr;var en=m.matrixMult=function(V,Ne){return Ne.multiply(V)},Gr=new sr(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=Gr;var vn=function(V,Ne){if(!br[V]){var Ye=(Ne instanceof nh?"Sh":"P")+(Object.keys(Ct).length+1).toString(10);Ne.id=Ye,br[V]=Ye,Ct[Ye]=Ne,mr.publish("addPattern",Ne)}};m.ShadingPattern=nh,m.TilingPattern=vm,m.addShadingPattern=function(V,Ne){return P("addShadingPattern()"),vn(V,Ne),this},m.beginTilingPattern=function(V){P("beginTilingPattern()"),Hu(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},m.endTilingPattern=function(V,Ne){P("endTilingPattern()"),Ne.stream=Me[q].join(`
`),vn(V,Ne),mr.publish("endTilingPattern",Ne),Wr.pop().restore()};var kr=m.__private__.newObject=function(){var V=Fr();return ke(V,!0),V},Fr=m.__private__.newObjectDeferred=function(){return K++,ae[K]=function(){return se},K},ke=function(V,Ne){return Ne=typeof Ne=="boolean"&&Ne,ae[V]=se,Ne&&Z(V+" 0 obj"),V},ze=m.__private__.newAdditionalObject=function(){var V={objId:Fr(),content:""};return le.push(V),V},$e=Fr(),pe=Fr(),_e=m.__private__.decodeColorString=function(V){var Ne=V.split(" ");if(Ne.length!==2||Ne[1]!=="g"&&Ne[1]!=="G")Ne.length===5&&(Ne[4]==="k"||Ne[4]==="K")&&(Ne=[(1-Ne[0])*(1-Ne[3]),(1-Ne[1])*(1-Ne[3]),(1-Ne[2])*(1-Ne[3]),"r"]);else{var Ye=parseFloat(Ne[0]);Ne=[Ye,Ye,Ye,"r"]}for(var rt="#",yt=0;yt<3;yt++)rt+=("0"+Math.floor(255*parseFloat(Ne[yt])).toString(16)).slice(-2);return rt},Fe=m.__private__.encodeColorString=function(V){var Ne;typeof V=="string"&&(V={ch1:V});var Ye=V.ch1,rt=V.ch2,yt=V.ch3,Ft=V.ch4,Qt=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ye=="string"&&Ye.charAt(0)!=="#"){var Nr=new eB(Ye);if(Nr.ok)Ye=Nr.toHex();else if(!/^\d*\.?\d*$/.test(Ye))throw new Error('Invalid color "'+Ye+'" passed to jsPDF.encodeColorString.')}if(typeof Ye=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ye)&&(Ye="#"+Ye[1]+Ye[1]+Ye[2]+Ye[2]+Ye[3]+Ye[3]),typeof Ye=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ye)){var Yr=parseInt(Ye.substr(1),16);Ye=Yr>>16&255,rt=Yr>>8&255,yt=255&Yr}if(rt===void 0||Ft===void 0&&Ye===rt&&rt===yt)typeof Ye=="string"?Ne=Ye+" "+Qt[0]:V.precision===2?Ne=B(Ye/255)+" "+Qt[0]:Ne=T(Ye/255)+" "+Qt[0];else if(Ft===void 0||Da(Ft)==="object"){if(Ft&&!isNaN(Ft.a)&&Ft.a===0)return Ne=["1.","1.","1.",Qt[1]].join(" ");if(typeof Ye=="string")Ne=[Ye,rt,yt,Qt[1]].join(" ");else switch(V.precision){case 2:Ne=[B(Ye/255),B(rt/255),B(yt/255),Qt[1]].join(" ");break;default:case 3:Ne=[T(Ye/255),T(rt/255),T(yt/255),Qt[1]].join(" ")}}else typeof Ye=="string"?Ne=[Ye,rt,yt,Ft,Qt[2]].join(" "):V.precision===2?Ne=[B(Ye),B(rt),B(yt),B(Ft),Qt[2]].join(" "):Ne=[T(Ye),T(rt),T(yt),T(Ft),Qt[2]].join(" ");return Ne},et=m.__private__.getFilters=function(){return o},mt=m.__private__.putStream=function(V){var Ne=(V=V||{}).data||"",Ye=V.filters||et(),rt=V.alreadyAppliedFilters||[],yt=V.addLength1||!1,Ft=Ne.length,Qt=V.objectId,Nr=function(Zs){return Zs};if(u!==null&&Qt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");u!==null&&(Nr=kn.encryptor(Qt,0));var Yr={};Ye===!0&&(Ye=["FlateEncode"]);var fn=V.additionalKeyValues||[],sn=(Yr=pn.API.processDataByFilters!==void 0?pn.API.processDataByFilters(Ne,Ye):{data:Ne,reverseChain:[]}).reverseChain+(Array.isArray(rt)?rt.join(" "):rt.toString());if(Yr.data.length!==0&&(fn.push({key:"Length",value:Yr.data.length}),yt===!0&&fn.push({key:"Length1",value:Ft})),sn.length!=0)if(sn.split("/").length-1==1)fn.push({key:"Filter",value:sn});else{fn.push({key:"Filter",value:"["+sn+"]"});for(var Tn=0;Tn<fn.length;Tn+=1)if(fn[Tn].key==="DecodeParms"){for(var Ga=[],Va=0;Va<Yr.reverseChain.split("/").length-1;Va+=1)Ga.push("null");Ga.push(fn[Tn].value),fn[Tn].value="["+Ga.join(" ")+"]"}}Z("<<");for(var ks=0;ks<fn.length;ks++)Z("/"+fn[ks].key+" "+fn[ks].value);Z(">>"),Yr.data.length!==0&&(Z("stream"),Z(Nr(Yr.data)),Z("endstream"))},lt=m.__private__.putPage=function(V){var Ne=V.number,Ye=V.data,rt=V.objId,yt=V.contentsObjId;ke(rt,!0),Z("<</Type /Page"),Z("/Parent "+V.rootDictionaryObjId+" 0 R"),Z("/Resources "+V.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(A(V.mediaBox.bottomLeftX))+" "+parseFloat(A(V.mediaBox.bottomLeftY))+" "+A(V.mediaBox.topRightX)+" "+A(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&Z("/CropBox ["+A(V.cropBox.bottomLeftX)+" "+A(V.cropBox.bottomLeftY)+" "+A(V.cropBox.topRightX)+" "+A(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&Z("/BleedBox ["+A(V.bleedBox.bottomLeftX)+" "+A(V.bleedBox.bottomLeftY)+" "+A(V.bleedBox.topRightX)+" "+A(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&Z("/TrimBox ["+A(V.trimBox.bottomLeftX)+" "+A(V.trimBox.bottomLeftY)+" "+A(V.trimBox.topRightX)+" "+A(V.trimBox.topRightY)+"]"),V.artBox!==null&&Z("/ArtBox ["+A(V.artBox.bottomLeftX)+" "+A(V.artBox.bottomLeftY)+" "+A(V.artBox.topRightX)+" "+A(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&Z("/UserUnit "+V.userUnit),mr.publish("putPage",{objId:rt,pageContext:Dt[Ne],pageNumber:Ne,page:Ye}),Z("/Contents "+yt+" 0 R"),Z(">>"),Z("endobj");var Ft=Ye.join(`
`);return j===y.ADVANCED&&(Ft+=`
Q`),ke(yt,!0),mt({data:Ft,filters:et(),objectId:yt}),Z("endobj"),rt},xt=m.__private__.putPages=function(){var V,Ne,Ye=[];for(V=1;V<=tt;V++)Dt[V].objId=Fr(),Dt[V].contentsObjId=Fr();for(V=1;V<=tt;V++)Ye.push(lt({number:V,data:Me[V],objId:Dt[V].objId,contentsObjId:Dt[V].contentsObjId,mediaBox:Dt[V].mediaBox,cropBox:Dt[V].cropBox,bleedBox:Dt[V].bleedBox,trimBox:Dt[V].trimBox,artBox:Dt[V].artBox,userUnit:Dt[V].userUnit,rootDictionaryObjId:$e,resourceDictionaryObjId:pe}));ke($e,!0),Z("<</Type /Pages");var rt="/Kids [";for(Ne=0;Ne<tt;Ne++)rt+=Ye[Ne]+" 0 R ";Z(rt+"]"),Z("/Count "+tt),Z(">>"),Z("endobj"),mr.publish("postPutPages")},ge=function(V){mr.publish("putFont",{font:V,out:Z,newObject:kr,putStream:mt}),V.isAlreadyPutted!==!0&&(V.objectNumber=kr(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+hm(V.postScriptName)),Z("/Subtype /Type1"),typeof V.encoding=="string"&&Z("/Encoding /"+V.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},ve=function(){for(var V in Bt)Bt.hasOwnProperty(V)&&(f===!1||f===!0&&p.hasOwnProperty(V))&&ge(Bt[V])},Ke=function(V){V.objectNumber=kr();var Ne=[];Ne.push({key:"Type",value:"/XObject"}),Ne.push({key:"Subtype",value:"/Form"}),Ne.push({key:"BBox",value:"["+[A(V.x),A(V.y),A(V.x+V.width),A(V.y+V.height)].join(" ")+"]"}),Ne.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var Ye=V.pages[1].join(`
`);mt({data:Ye,additionalKeyValues:Ne,objectId:V.objectNumber}),Z("endobj")},ct=function(){for(var V in Jr)Jr.hasOwnProperty(V)&&Ke(Jr[V])},jt=function(V,Ne){var Ye,rt=[],yt=1/(Ne-1);for(Ye=0;Ye<1;Ye+=yt)rt.push(Ye);if(rt.push(1),V[0].offset!=0){var Ft={offset:0,color:V[0].color};V.unshift(Ft)}if(V[V.length-1].offset!=1){var Qt={offset:1,color:V[V.length-1].color};V.push(Qt)}for(var Nr="",Yr=0,fn=0;fn<rt.length;fn++){for(Ye=rt[fn];Ye>V[Yr+1].offset;)Yr++;var sn=V[Yr].offset,Tn=(Ye-sn)/(V[Yr+1].offset-sn),Ga=V[Yr].color,Va=V[Yr+1].color;Nr+=U(Math.round((1-Tn)*Ga[0]+Tn*Va[0]).toString(16))+U(Math.round((1-Tn)*Ga[1]+Tn*Va[1]).toString(16))+U(Math.round((1-Tn)*Ga[2]+Tn*Va[2]).toString(16))}return Nr.trim()},bt=function(V,Ne){Ne||(Ne=21);var Ye=kr(),rt=jt(V.colors,Ne),yt=[];yt.push({key:"FunctionType",value:"0"}),yt.push({key:"Domain",value:"[0.0 1.0]"}),yt.push({key:"Size",value:"["+Ne+"]"}),yt.push({key:"BitsPerSample",value:"8"}),yt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),yt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),mt({data:rt,additionalKeyValues:yt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ye}),Z("endobj"),V.objectNumber=kr(),Z("<< /ShadingType "+V.type),Z("/ColorSpace /DeviceRGB");var Ft="/Coords ["+A(parseFloat(V.coords[0]))+" "+A(parseFloat(V.coords[1]))+" ";V.type===2?Ft+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3])):Ft+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3]))+" "+A(parseFloat(V.coords[4]))+" "+A(parseFloat(V.coords[5])),Z(Ft+="]"),V.matrix&&Z("/Matrix ["+V.matrix.toString()+"]"),Z("/Function "+Ye+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},Wt=function(V,Ne){var Ye=Fr(),rt=kr();Ne.push({resourcesOid:Ye,objectOid:rt}),V.objectNumber=rt;var yt=[];yt.push({key:"Type",value:"/Pattern"}),yt.push({key:"PatternType",value:"1"}),yt.push({key:"PaintType",value:"1"}),yt.push({key:"TilingType",value:"1"}),yt.push({key:"BBox",value:"["+V.boundingBox.map(A).join(" ")+"]"}),yt.push({key:"XStep",value:A(V.xStep)}),yt.push({key:"YStep",value:A(V.yStep)}),yt.push({key:"Resources",value:Ye+" 0 R"}),V.matrix&&yt.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),mt({data:V.stream,additionalKeyValues:yt,objectId:V.objectNumber}),Z("endobj")},ir=function(V){var Ne;for(Ne in Ct)Ct.hasOwnProperty(Ne)&&(Ct[Ne]instanceof nh?bt(Ct[Ne]):Ct[Ne]instanceof vm&&Wt(Ct[Ne],V))},Kt=function(V){for(var Ne in V.objectNumber=kr(),Z("<<"),V)switch(Ne){case"opacity":Z("/ca "+B(V[Ne]));break;case"stroke-opacity":Z("/CA "+B(V[Ne]))}Z(">>"),Z("endobj")},yr=function(){var V;for(V in Jt)Jt.hasOwnProperty(V)&&Kt(Jt[V])},$r=function(){for(var V in Z("/XObject <<"),Jr)Jr.hasOwnProperty(V)&&Jr[V].objectNumber>=0&&Z("/"+V+" "+Jr[V].objectNumber+" 0 R");mr.publish("putXobjectDict"),Z(">>")},Ur=function(){kn.oid=kr(),Z("<<"),Z("/Filter /Standard"),Z("/V "+kn.v),Z("/R "+kn.r),Z("/U <"+kn.toHexString(kn.U)+">"),Z("/O <"+kn.toHexString(kn.O)+">"),Z("/P "+kn.P),Z(">>"),Z("endobj")},un=function(){for(var V in Z("/Font <<"),Bt)Bt.hasOwnProperty(V)&&(f===!1||f===!0&&p.hasOwnProperty(V))&&Z("/"+V+" "+Bt[V].objectNumber+" 0 R");Z(">>")},Vr=function(){if(Object.keys(Ct).length>0){for(var V in Z("/Shading <<"),Ct)Ct.hasOwnProperty(V)&&Ct[V]instanceof nh&&Ct[V].objectNumber>=0&&Z("/"+V+" "+Ct[V].objectNumber+" 0 R");mr.publish("putShadingPatternDict"),Z(">>")}},aa=function(V){if(Object.keys(Ct).length>0){for(var Ne in Z("/Pattern <<"),Ct)Ct.hasOwnProperty(Ne)&&Ct[Ne]instanceof m.TilingPattern&&Ct[Ne].objectNumber>=0&&Ct[Ne].objectNumber<V&&Z("/"+Ne+" "+Ct[Ne].objectNumber+" 0 R");mr.publish("putTilingPatternDict"),Z(">>")}},Kn=function(){if(Object.keys(Jt).length>0){var V;for(V in Z("/ExtGState <<"),Jt)Jt.hasOwnProperty(V)&&Jt[V].objectNumber>=0&&Z("/"+V+" "+Jt[V].objectNumber+" 0 R");mr.publish("putGStateDict"),Z(">>")}},Ln=function(V){ke(V.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),un(),Vr(),aa(V.objectOid),Kn(),$r(),Z(">>"),Z("endobj")},Lo=function(){var V=[];ve(),yr(),ct(),ir(V),mr.publish("putResources"),V.forEach(Ln),Ln({resourcesOid:pe,objectOid:Number.MAX_SAFE_INTEGER}),mr.publish("postPutResources")},Na=function(){mr.publish("putAdditionalObjects");for(var V=0;V<le.length;V++){var Ne=le[V];ke(Ne.objId,!0),Z(Ne.content),Z("endobj")}mr.publish("postPutAdditionalObjects")},Ve=function(V){Yt[V.fontName]=Yt[V.fontName]||{},Yt[V.fontName][V.fontStyle]=V.id},Lt=function(V,Ne,Ye,rt,yt){var Ft={id:"F"+(Object.keys(Bt).length+1).toString(10),postScriptName:V,fontName:Ne,fontStyle:Ye,encoding:rt,isStandardFont:yt||!1,metadata:{}};return mr.publish("addFont",{font:Ft,instance:this}),Bt[Ft.id]=Ft,Ve(Ft),Ft.id},Ot=function(V){for(var Ne=0,Ye=Oe.length;Ne<Ye;Ne++){var rt=Lt.call(this,V[Ne][0],V[Ne][1],V[Ne][2],Oe[Ne][3],!0);f===!1&&(p[rt]=!0);var yt=V[Ne][0].split("-");Ve({id:rt,fontName:yt[0],fontStyle:yt[1]||""})}mr.publish("addFonts",{fonts:Bt,dictionary:Yt})},lr=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(rt){var Ne=rt.stack||"";~Ne.indexOf(" at ")&&(Ne=Ne.split(" at ")[1]);var Ye="Error in function "+Ne.split(`
`)[0].split("<")[0]+": "+rt.message;if(!xn.console)throw new Error(Ye);xn.console.error(Ye,rt),xn.alert&&alert(Ye)}},V.foo.bar=V,V.foo},jr=function(V,Ne){var Ye,rt,yt,Ft,Qt,Nr,Yr,fn,sn;if(yt=(Ne=Ne||{}).sourceEncoding||"Unicode",Qt=Ne.outputEncoding,(Ne.autoencode||Qt)&&Bt[Re].metadata&&Bt[Re].metadata[yt]&&Bt[Re].metadata[yt].encoding&&(Ft=Bt[Re].metadata[yt].encoding,!Qt&&Bt[Re].encoding&&(Qt=Bt[Re].encoding),!Qt&&Ft.codePages&&(Qt=Ft.codePages[0]),typeof Qt=="string"&&(Qt=Ft[Qt]),Qt)){for(Yr=!1,Nr=[],Ye=0,rt=V.length;Ye<rt;Ye++)(fn=Qt[V.charCodeAt(Ye)])?Nr.push(String.fromCharCode(fn)):Nr.push(V[Ye]),Nr[Ye].charCodeAt(0)>>8&&(Yr=!0);V=Nr.join("")}for(Ye=V.length;Yr===void 0&&Ye!==0;)V.charCodeAt(Ye-1)>>8&&(Yr=!0),Ye--;if(!Yr)return V;for(Nr=Ne.noBOM?[]:[254,255],Ye=0,rt=V.length;Ye<rt;Ye++){if((sn=(fn=V.charCodeAt(Ye))>>8)>>8)throw new Error("Character at position "+Ye+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Nr.push(sn),Nr.push(fn-(sn<<8))}return String.fromCharCode.apply(void 0,Nr)},pr=m.__private__.pdfEscape=m.pdfEscape=function(V,Ne){return jr(V,Ne).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Mr=m.__private__.beginPage=function(V){Me[++tt]=[],Dt[tt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},rr(tt),ie(Me[q])},sa=function(V,Ne){var Ye,rt,yt;switch(r=Ne||r,typeof V=="string"&&(Ye=w(V.toLowerCase()),Array.isArray(Ye)&&(rt=Ye[0],yt=Ye[1])),Array.isArray(V)&&(rt=V[0]*Je,yt=V[1]*Je),isNaN(rt)&&(rt=s[0],yt=s[1]),(rt>14400||yt>14400)&&(es.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),rt=Math.min(14400,rt),yt=Math.min(14400,yt)),s=[rt,yt],r.substr(0,1)){case"l":yt>rt&&(s=[yt,rt]);break;case"p":rt>yt&&(s=[yt,rt])}Mr(s),Kr(wr),Z(Ai),Ac!==0&&Z(Ac+" J"),gd!==0&&Z(gd+" j"),mr.publish("addPage",{pageNumber:tt})},En=function(V){V>0&&V<=tt&&(Me.splice(V,1),Dt.splice(V,1),tt--,q>tt&&(q=tt),this.setPage(q))},rr=function(V){V>0&&V<=tt&&(q=V)},xr=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Me.length-1},Rt=function(V,Ne,Ye){var rt,yt=void 0;return Ye=Ye||{},V=V!==void 0?V:Bt[Re].fontName,Ne=Ne!==void 0?Ne:Bt[Re].fontStyle,rt=V.toLowerCase(),Yt[rt]!==void 0&&Yt[rt][Ne]!==void 0?yt=Yt[rt][Ne]:Yt[V]!==void 0&&Yt[V][Ne]!==void 0?yt=Yt[V][Ne]:Ye.disableWarning===!1&&es.warn("Unable to look up font label for font '"+V+"', '"+Ne+"'. Refer to getFontList() for available fonts."),yt||Ye.noFallback||(yt=Yt.times[Ne])==null&&(yt=Yt.times.normal),yt},Cr=m.__private__.putInfo=function(){var V=kr(),Ne=function(rt){return rt};for(var Ye in u!==null&&(Ne=kn.encryptor(V,0)),Z("<<"),Z("/Producer ("+pr(Ne("jsPDF "+pn.version))+")"),Le)Le.hasOwnProperty(Ye)&&Le[Ye]&&Z("/"+Ye.substr(0,1).toUpperCase()+Ye.substr(1)+" ("+pr(Ne(Le[Ye]))+")");Z("/CreationDate ("+pr(Ne(H))+")"),Z(">>"),Z("endobj")},Vt=m.__private__.putCatalog=function(V){var Ne=(V=V||{}).rootDictionaryObjId||$e;switch(kr(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+Ne+" 0 R"),ce||(ce="fullwidth"),ce){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ye=""+ce;Ye.substr(Ye.length-1)==="%"&&(ce=parseInt(ce)/100),typeof ce=="number"&&Z("/OpenAction [3 0 R /XYZ null null "+B(ce)+"]")}switch(Se||(Se="continuous"),Se){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}xe&&Z("/PageMode /"+xe),mr.publish("putCatalog"),Z(">>"),Z("endobj")},Ma=m.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(K+1)),Z("/Root "+K+" 0 R"),Z("/Info "+(K-1)+" 0 R"),u!==null&&Z("/Encrypt "+kn.oid+" 0 R"),Z("/ID [ <"+Y+"> <"+Y+"> ]"),Z(">>")},Ca=m.__private__.putHeader=function(){Z("%PDF-"+b),Z("%")},Aa=m.__private__.putXRef=function(){var V="0000000000";Z("xref"),Z("0 "+(K+1)),Z("0000000000 65535 f ");for(var Ne=1;Ne<=K;Ne++)typeof ae[Ne]=="function"?Z((V+ae[Ne]()).slice(-10)+" 00000 n "):ae[Ne]!==void 0?Z((V+ae[Ne]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},ar=m.__private__.buildDocument=function(){Ae(),ie(me),mr.publish("buildDocument"),Ca(),xt(),Na(),Lo(),u!==null&&Ur(),Cr(),Vt();var V=se;return Aa(),Ma(),Z("startxref"),Z(""+V),Z("%%EOF"),ie(Me[q]),me.join(`
`)},nn=m.__private__.getBlob=function(V){return new Blob([we(V)],{type:"application/pdf"})},Ra=m.output=m.__private__.output=lr((function(V,Ne){switch(typeof(Ne=Ne||{})=="string"?Ne={filename:Ne}:Ne.filename=Ne.filename||"generated.pdf",V){case void 0:return ar();case"save":m.save(Ne.filename);break;case"arraybuffer":return we(ar());case"blob":return nn(ar());case"bloburi":case"bloburl":if(xn.URL!==void 0&&typeof xn.URL.createObjectURL=="function")return xn.URL&&xn.URL.createObjectURL(nn(ar()))||void 0;es.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ye="",rt=ar();try{Ye=Wk(rt)}catch{Ye=Wk(unescape(encodeURIComponent(rt)))}return"data:application/pdf;filename="+Ne.filename+";base64,"+Ye;case"pdfobjectnewwindow":if(Object.prototype.toString.call(xn)==="[object Window]"){var yt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ft=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ne.pdfObjectUrl&&(yt=Ne.pdfObjectUrl,Ft="");var Qt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+yt+'"'+Ft+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ne)+");<\/script></body></html>",Nr=xn.open();return Nr!==null&&Nr.document.write(Qt),Nr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(xn)==="[object Window]"){var Yr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ne.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ne.filename+'" width="500px" height="400px" /></body></html>',fn=xn.open();if(fn!==null){fn.document.write(Yr);var sn=this;fn.document.documentElement.querySelector("#pdfViewer").onload=function(){fn.document.title=Ne.filename,fn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(sn.output("bloburl"))}}return fn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(xn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Tn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ne)+'"></iframe></body></html>',Ga=xn.open();if(Ga!==null&&(Ga.document.write(Tn),Ga.document.title=Ne.filename),Ga||typeof safari>"u")return Ga;break;case"datauri":case"dataurl":return xn.document.location.href=this.output("datauristring",Ne);default:return null}})),Zn=function(V){return Array.isArray(Sr)===!0&&Sr.indexOf(V)>-1};switch(a){case"pt":Je=1;break;case"mm":Je=72/25.4;break;case"cm":Je=72/2.54;break;case"in":Je=72;break;case"px":Je=Zn("px_scaling")==1?.75:96/72;break;case"pc":case"em":Je=12;break;case"ex":Je=6;break;default:if(typeof a!="number")throw new Error("Invalid unit: "+a);Je=a}var kn=null;W(),re();var Ar=function(V){return u!==null?kn.encryptor(V,0):function(Ne){return Ne}},an=m.__private__.getPageInfo=m.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Dt[V].objId,pageNumber:V,pageContext:Dt[V]}},dr=m.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ne in Dt)if(Dt[Ne].objId===V)break;return an(Ne)},Mn=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Dt[q].objId,pageNumber:q,pageContext:Dt[q]}};m.addPage=function(){return sa.apply(this,arguments),this},m.setPage=function(){return rr.apply(this,arguments),ie.call(this,Me[q]),this},m.insertPage=function(V){return this.addPage(),this.movePage(q,V),this},m.movePage=function(V,Ne){var Ye,rt;if(V>Ne){Ye=Me[V],rt=Dt[V];for(var yt=V;yt>Ne;yt--)Me[yt]=Me[yt-1],Dt[yt]=Dt[yt-1];Me[Ne]=Ye,Dt[Ne]=rt,this.setPage(Ne)}else if(V<Ne){Ye=Me[V],rt=Dt[V];for(var Ft=V;Ft<Ne;Ft++)Me[Ft]=Me[Ft+1],Dt[Ft]=Dt[Ft+1];Me[Ne]=Ye,Dt[Ne]=rt,this.setPage(Ne)}return this},m.deletePage=function(){return En.apply(this,arguments),this},m.__private__.text=m.text=function(V,Ne,Ye,rt,yt){var Ft,Qt,Nr,Yr,fn,sn,Tn,Ga,Va,ks=(rt=rt||{}).scope||this;if(typeof V=="number"&&typeof Ne=="number"&&(typeof Ye=="string"||Array.isArray(Ye))){var Zs=Ye;Ye=Ne,Ne=V,V=Zs}if(arguments[3]instanceof sr?(P("The transform parameter of text() with a Matrix value"),Va=yt):(Nr=arguments[4],Yr=arguments[5],Da(Tn=arguments[3])==="object"&&Tn!==null||(typeof Nr=="string"&&(Yr=Nr,Nr=null),typeof Tn=="string"&&(Yr=Tn,Tn=null),typeof Tn=="number"&&(Nr=Tn,Tn=null),rt={flags:Tn,angle:Nr,align:Yr})),isNaN(Ne)||isNaN(Ye)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return ks;var qs="",Ro=!1,ei=typeof rt.lineHeightFactor=="number"?rt.lineHeightFactor:Ge,go=ks.internal.scaleFactor;function vo(ia){return ia=ia.split("	").join(Array(rt.TabLen||9).join(" ")),pr(ia,Tn)}function iu(ia){for(var ea,On=ia.concat(),Ta=[],qo=On.length;qo--;)typeof(ea=On.shift())=="string"?Ta.push(ea):Array.isArray(ia)&&(ea.length===1||ea[1]===void 0&&ea[2]===void 0)?Ta.push(ea[0]):Ta.push([ea[0],ea[1],ea[2]]);return Ta}function ou(ia,ea){var On;if(typeof ia=="string")On=ea(ia)[0];else if(Array.isArray(ia)){for(var Ta,qo,cu=ia.concat(),$o=[],jd=cu.length;jd--;)typeof(Ta=cu.shift())=="string"?$o.push(ea(Ta)[0]):Array.isArray(Ta)&&typeof Ta[0]=="string"&&(qo=ea(Ta[0],Ta[1],Ta[2]),$o.push([qo[0],qo[1],qo[2]]));On=$o}return On}var Tc=!1,bd=!0;if(typeof V=="string")Tc=!0;else if(Array.isArray(V)){var yd=V.concat();Qt=[];for(var wd,Ea=yd.length;Ea--;)(typeof(wd=yd.shift())!="string"||Array.isArray(wd)&&typeof wd[0]!="string")&&(bd=!1);Tc=bd}if(Tc===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var bo=de/ks.internal.scaleFactor,xl=bo*(ei-1);switch(rt.baseline){case"bottom":Ye-=xl;break;case"top":Ye+=bo-xl;break;case"hanging":Ye+=bo-2*xl;break;case"middle":Ye+=bo/2-xl}if((sn=rt.maxWidth||0)>0&&(typeof V=="string"?V=ks.splitTextToSize(V,sn):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce((function(ia,ea){return ia.concat(ks.splitTextToSize(ea,sn))}),[]))),Ft={text:V,x:Ne,y:Ye,options:rt,mutex:{pdfEscape:pr,activeFontKey:Re,fonts:Bt,activeFontSize:de}},mr.publish("preProcessText",Ft),V=Ft.text,Nr=(rt=Ft.options).angle,!(Va instanceof sr)&&Nr&&typeof Nr=="number"){Nr*=Math.PI/180,rt.rotationDirection===0&&(Nr=-Nr),j===y.ADVANCED&&(Nr=-Nr);var ns=Math.cos(Nr),Oc=Math.sin(Nr);Va=new sr(ns,Oc,-Oc,ns,0,0)}else Nr&&Nr instanceof sr&&(Va=Nr);j!==y.ADVANCED||Va||(Va=Gr),(fn=rt.charSpace||Fo)!==void 0&&(qs+=A(_(fn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ga=rt.horizontalScale)!==void 0&&(qs+=A(100*Ga)+` Tz
`),rt.lang;var hn=-1,os=rt.renderingMode!==void 0?rt.renderingMode:rt.stroke,ba=ks.internal.getCurrentPageInfo().pageContext;switch(os){case 0:case!1:case"fill":hn=0;break;case 1:case!0:case"stroke":hn=1;break;case 2:case"fillThenStroke":hn=2;break;case 3:case"invisible":hn=3;break;case 4:case"fillAndAddForClipping":hn=4;break;case 5:case"strokeAndAddPathForClipping":hn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":hn=6;break;case 7:case"addToPathForClipping":hn=7}var pi=ba.usedRenderingMode!==void 0?ba.usedRenderingMode:-1;hn!==-1?qs+=hn+` Tr
`:pi!==-1&&(qs+=`0 Tr
`),hn!==-1&&(ba.usedRenderingMode=hn),Yr=rt.align||"left";var Wn,$s=de*ei,Ka=ks.internal.pageSize.getWidth(),Vi=Bt[Re];fn=rt.charSpace||Fo,sn=rt.maxWidth||0,Tn=Object.assign({autoencode:!0,noBOM:!0},rt.flags);var Xa=[],Ss=function(ia){return ks.getStringUnitWidth(ia,{font:Vi,charSpace:fn,fontSize:de,doKerning:!1})*de/go};if(Object.prototype.toString.call(V)==="[object Array]"){var ka;Qt=iu(V),Yr!=="left"&&(Wn=Qt.map(Ss));var ls,Ki=0;if(Yr==="right"){Ne-=Wn[0],V=[],Ea=Qt.length;for(var Pl=0;Pl<Ea;Pl++)Pl===0?(ls=Ua(Ne),ka=Ns(Ye)):(ls=_(Ki-Wn[Pl]),ka=-$s),V.push([Qt[Pl],ls,ka]),Ki=Wn[Pl]}else if(Yr==="center"){Ne-=Wn[0]/2,V=[],Ea=Qt.length;for(var Bo=0;Bo<Ea;Bo++)Bo===0?(ls=Ua(Ne),ka=Ns(Ye)):(ls=_((Ki-Wn[Bo])/2),ka=-$s),V.push([Qt[Bo],ls,ka]),Ki=Wn[Bo]}else if(Yr==="left"){V=[],Ea=Qt.length;for(var lu=0;lu<Ea;lu++)V.push(Qt[lu])}else if(Yr==="justify"&&Vi.encoding==="Identity-H"){V=[],Ea=Qt.length,sn=sn!==0?sn:Ka;for(var gl=0,Xn=0;Xn<Ea;Xn++)if(ka=Xn===0?Ns(Ye):-$s,ls=Xn===0?Ua(Ne):gl,Xn<Ea-1){var Il=_((sn-Wn[Xn])/(Qt[Xn].split(" ").length-1)),ti=Qt[Xn].split(" ");V.push([ti[0]+" ",ls,ka]),gl=0;for(var Ti=1;Ti<ti.length;Ti++){var Dl=(Ss(ti[Ti-1]+" "+ti[Ti])-Ss(ti[Ti]))*go+Il;Ti==ti.length-1?V.push([ti[Ti],Dl,0]):V.push([ti[Ti]+" ",Dl,0]),gl-=Dl}}else V.push([Qt[Xn],ls,ka]);V.push(["",gl,0])}else{if(Yr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],Ea=Qt.length,sn=sn!==0?sn:Ka,Xn=0;Xn<Ea;Xn++)ka=Xn===0?Ns(Ye):-$s,ls=Xn===0?Ua(Ne):0,Xn<Ea-1?Xa.push(A(_((sn-Wn[Xn])/(Qt[Xn].split(" ").length-1)))):Xa.push(0),V.push([Qt[Xn],ls,ka])}}var Nd=typeof rt.R2L=="boolean"?rt.R2L:Xe;Nd===!0&&(V=ou(V,(function(ia,ea,On){return[ia.split("").reverse().join(""),ea,On]}))),Ft={text:V,x:Ne,y:Ye,options:rt,mutex:{pdfEscape:pr,activeFontKey:Re,fonts:Bt,activeFontSize:de}},mr.publish("postProcessText",Ft),V=Ft.text,Ro=Ft.mutex.isHex||!1;var Ll=Bt[Re].encoding;Ll!=="WinAnsiEncoding"&&Ll!=="StandardEncoding"||(V=ou(V,(function(ia,ea,On){return[vo(ia),ea,On]}))),Qt=iu(V),V=[];for(var Uo,Xi,zs,Yi=0,Oi=1,Qi=Array.isArray(Qt[0])?Oi:Yi,yo="",Pc=function(ia,ea,On){var Ta="";return On instanceof sr?(On=typeof rt.angle=="number"?en(On,new sr(1,0,0,1,ia,ea)):en(new sr(1,0,0,1,ia,ea),On),j===y.ADVANCED&&(On=en(new sr(1,0,0,-1,0,0),On)),Ta=On.join(" ")+` Tm
`):Ta=A(ia)+" "+A(ea)+` Td
`,Ta},_s=0;_s<Qt.length;_s++){switch(yo="",Qi){case Oi:zs=(Ro?"<":"(")+Qt[_s][0]+(Ro?">":")"),Uo=parseFloat(Qt[_s][1]),Xi=parseFloat(Qt[_s][2]);break;case Yi:zs=(Ro?"<":"(")+Qt[_s]+(Ro?">":")"),Uo=Ua(Ne),Xi=Ns(Ye)}Xa!==void 0&&Xa[_s]!==void 0&&(yo=Xa[_s]+` Tw
`),_s===0?V.push(yo+Pc(Uo,Xi,Va)+zs):Qi===Yi?V.push(yo+zs):Qi===Oi&&V.push(yo+Pc(Uo,Xi,Va)+zs)}V=Qi===Yi?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var Cs=`BT
/`;return Cs+=Re+" "+de+` Tf
`,Cs+=A(de*ei)+` TL
`,Cs+=js+`
`,Cs+=qs,Cs+=V,Z(Cs+="ET"),p[Re]=!0,ks};var Or=m.__private__.clip=m.clip=function(V){return Z(V==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Or("evenodd")},m.__private__.discardPath=m.discardPath=function(){return Z("n"),this};var Ba=m.__private__.isValidStyle=function(V){var Ne=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(Ne=!0),Ne};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(V){return Ba(V)&&(d=V),this};var ho=m.__private__.getStyle=m.getStyle=function(V){var Ne=d;switch(V){case"D":case"S":Ne="S";break;case"F":Ne="f";break;case"FD":case"DF":Ne="B";break;case"f":case"f*":case"B":case"B*":Ne=V}return Ne},bs=m.close=function(){return Z("h"),this};m.stroke=function(){return Z("S"),this},m.fill=function(V){return ys("f",V),this},m.fillEvenOdd=function(V){return ys("f*",V),this},m.fillStroke=function(V){return ys("B",V),this},m.fillStrokeEvenOdd=function(V){return ys("B*",V),this};var ys=function(V,Ne){Da(Ne)==="object"?ml(Ne,V):Z(V)},ws=function(V){V===null||j===y.ADVANCED&&V===void 0||(V=ho(V),Z(V))};function mo(V,Ne,Ye,rt,yt){var Ft=new vm(Ne||this.boundingBox,Ye||this.xStep,rt||this.yStep,this.gState,yt||this.matrix);Ft.stream=this.stream;var Qt=V+"$$"+this.cloneIndex+++"$$";return vn(Qt,Ft),Ft}var ml=function(V,Ne){var Ye=br[V.key],rt=Ct[Ye];if(rt instanceof nh)Z("q"),Z(zu(Ne)),rt.gState&&m.setGState(rt.gState),Z(V.matrix.toString()+" cm"),Z("/"+Ye+" sh"),Z("Q");else if(rt instanceof vm){var yt=new sr(1,0,0,-1,0,nc());V.matrix&&(yt=yt.multiply(V.matrix||Gr),Ye=mo.call(rt,V.key,V.boundingBox,V.xStep,V.yStep,yt).id),Z("q"),Z("/Pattern cs"),Z("/"+Ye+" scn"),rt.gState&&m.setGState(rt.gState),Z(Ne),Z("Q")}},zu=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},po=m.moveTo=function(V,Ne){return Z(A(_(V))+" "+A(z(Ne))+" m"),this},Wi=m.lineTo=function(V,Ne){return Z(A(_(V))+" "+A(z(Ne))+" l"),this},mi=m.curveTo=function(V,Ne,Ye,rt,yt,Ft){return Z([A(_(V)),A(z(Ne)),A(_(Ye)),A(z(rt)),A(_(yt)),A(z(Ft)),"c"].join(" ")),this};m.__private__.line=m.line=function(V,Ne,Ye,rt,yt){if(isNaN(V)||isNaN(Ne)||isNaN(Ye)||isNaN(rt)||!Ba(yt))throw new Error("Invalid arguments passed to jsPDF.line");return j===y.COMPAT?this.lines([[Ye-V,rt-Ne]],V,Ne,[1,1],yt||"S"):this.lines([[Ye-V,rt-Ne]],V,Ne,[1,1]).stroke()},m.__private__.lines=m.lines=function(V,Ne,Ye,rt,yt,Ft){var Qt,Nr,Yr,fn,sn,Tn,Ga,Va,ks,Zs,qs,Ro;if(typeof V=="number"&&(Ro=Ye,Ye=Ne,Ne=V,V=Ro),rt=rt||[1,1],Ft=Ft||!1,isNaN(Ne)||isNaN(Ye)||!Array.isArray(V)||!Array.isArray(rt)||!Ba(yt)||typeof Ft!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(po(Ne,Ye),Qt=rt[0],Nr=rt[1],fn=V.length,Zs=Ne,qs=Ye,Yr=0;Yr<fn;Yr++)(sn=V[Yr]).length===2?(Zs=sn[0]*Qt+Zs,qs=sn[1]*Nr+qs,Wi(Zs,qs)):(Tn=sn[0]*Qt+Zs,Ga=sn[1]*Nr+qs,Va=sn[2]*Qt+Zs,ks=sn[3]*Nr+qs,Zs=sn[4]*Qt+Zs,qs=sn[5]*Nr+qs,mi(Tn,Ga,Va,ks,Zs,qs));return Ft&&bs(),ws(yt),this},m.path=function(V){for(var Ne=0;Ne<V.length;Ne++){var Ye=V[Ne],rt=Ye.c;switch(Ye.op){case"m":po(rt[0],rt[1]);break;case"l":Wi(rt[0],rt[1]);break;case"c":mi.apply(this,rt);break;case"h":bs()}}return this},m.__private__.rect=m.rect=function(V,Ne,Ye,rt,yt){if(isNaN(V)||isNaN(Ne)||isNaN(Ye)||isNaN(rt)||!Ba(yt))throw new Error("Invalid arguments passed to jsPDF.rect");return j===y.COMPAT&&(rt=-rt),Z([A(_(V)),A(z(Ne)),A(_(Ye)),A(_(rt)),"re"].join(" ")),ws(yt),this},m.__private__.triangle=m.triangle=function(V,Ne,Ye,rt,yt,Ft,Qt){if(isNaN(V)||isNaN(Ne)||isNaN(Ye)||isNaN(rt)||isNaN(yt)||isNaN(Ft)||!Ba(Qt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ye-V,rt-Ne],[yt-Ye,Ft-rt],[V-yt,Ne-Ft]],V,Ne,[1,1],Qt,!0),this},m.__private__.roundedRect=m.roundedRect=function(V,Ne,Ye,rt,yt,Ft,Qt){if(isNaN(V)||isNaN(Ne)||isNaN(Ye)||isNaN(rt)||isNaN(yt)||isNaN(Ft)||!Ba(Qt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Nr=4/3*(Math.SQRT2-1);return yt=Math.min(yt,.5*Ye),Ft=Math.min(Ft,.5*rt),this.lines([[Ye-2*yt,0],[yt*Nr,0,yt,Ft-Ft*Nr,yt,Ft],[0,rt-2*Ft],[0,Ft*Nr,-yt*Nr,Ft,-yt,Ft],[2*yt-Ye,0],[-yt*Nr,0,-yt,-Ft*Nr,-yt,-Ft],[0,2*Ft-rt],[0,-Ft*Nr,yt*Nr,-Ft,yt,-Ft]],V+yt,Ne,[1,1],Qt,!0),this},m.__private__.ellipse=m.ellipse=function(V,Ne,Ye,rt,yt){if(isNaN(V)||isNaN(Ne)||isNaN(Ye)||isNaN(rt)||!Ba(yt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ft=4/3*(Math.SQRT2-1)*Ye,Qt=4/3*(Math.SQRT2-1)*rt;return po(V+Ye,Ne),mi(V+Ye,Ne-Qt,V+Ft,Ne-rt,V,Ne-rt),mi(V-Ft,Ne-rt,V-Ye,Ne-Qt,V-Ye,Ne),mi(V-Ye,Ne+Qt,V-Ft,Ne+rt,V,Ne+rt),mi(V+Ft,Ne+rt,V+Ye,Ne+Qt,V+Ye,Ne),ws(yt),this},m.__private__.circle=m.circle=function(V,Ne,Ye,rt){if(isNaN(V)||isNaN(Ne)||isNaN(Ye)||!Ba(rt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,Ne,Ye,Ye,rt)},m.setFont=function(V,Ne,Ye){return Ye&&(Ne=E(Ne,Ye)),Re=Rt(V,Ne,{disableWarning:!1}),this};var rc=m.__private__.getFont=m.getFont=function(){return Bt[Rt.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var V,Ne,Ye={};for(V in Yt)if(Yt.hasOwnProperty(V))for(Ne in Ye[V]=[],Yt[V])Yt[V].hasOwnProperty(Ne)&&Ye[V].push(Ne);return Ye},m.addFont=function(V,Ne,Ye,rt,yt){var Ft=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ft.indexOf(arguments[3])!==-1?yt=arguments[3]:arguments[3]&&Ft.indexOf(arguments[3])==-1&&(Ye=E(Ye,rt)),yt=yt||"Identity-H",Lt.call(this,V,Ne,Ye,yt)};var Ge,wr=e.lineWidth||.200025,qr=m.__private__.getLineWidth=m.getLineWidth=function(){return wr},Kr=m.__private__.setLineWidth=m.setLineWidth=function(V){return wr=V,Z(A(_(V))+" w"),this};m.__private__.setLineDash=pn.API.setLineDash=pn.API.setLineDashPattern=function(V,Ne){if(V=V||[],Ne=Ne||0,isNaN(Ne)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map((function(Ye){return A(_(Ye))})).join(" "),Ne=A(_(Ne)),Z("["+V+"] "+Ne+" d"),this};var bn=m.__private__.getLineHeight=m.getLineHeight=function(){return de*Ge};m.__private__.getLineHeight=m.getLineHeight=function(){return de*Ge};var Hn=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(Ge=V),this},ma=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Ge};Hn(e.lineHeight);var Ua=m.__private__.getHorizontalCoordinate=function(V){return _(V)},Ns=m.__private__.getVerticalCoordinate=function(V){return j===y.ADVANCED?V:Dt[q].mediaBox.topRightY-Dt[q].mediaBox.bottomLeftY-_(V)},Rf=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(V){return A(Ua(V))},Gi=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(V){return A(Ns(V))},Ai=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return _e(Ai)},m.__private__.setStrokeColor=m.setDrawColor=function(V,Ne,Ye,rt){return Ai=Fe({ch1:V,ch2:Ne,ch3:Ye,ch4:rt,pdfColorType:"draw",precision:2}),Z(Ai),this};var Ol=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return _e(Ol)},m.__private__.setFillColor=m.setFillColor=function(V,Ne,Ye,rt){return Ol=Fe({ch1:V,ch2:Ne,ch3:Ye,ch4:rt,pdfColorType:"fill",precision:2}),Z(Ol),this};var js=e.textColor||"0 g",xo=m.__private__.getTextColor=m.getTextColor=function(){return _e(js)};m.__private__.setTextColor=m.setTextColor=function(V,Ne,Ye,rt){return js=Fe({ch1:V,ch2:Ne,ch3:Ye,ch4:rt,pdfColorType:"text",precision:3}),this};var Fo=e.charSpace,xd=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Fo||0)};m.__private__.setCharSpace=m.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Fo=V,this};var Ac=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(V){var Ne=m.CapJoinStyles[V];if(Ne===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ac=Ne,Z(Ne+" J"),this};var gd=0;m.__private__.setLineJoin=m.setLineJoin=function(V){var Ne=m.CapJoinStyles[V];if(Ne===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gd=Ne,Z(Ne+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(A(_(V))+" M"),this},m.GState=Eb,m.setGState=function(V){(V=typeof V=="string"?Jt[Dr[V]]:pl(null,V)).equals(Hr)||(Z("/"+V.id+" gs"),Hr=V)};var pl=function(V,Ne){if(!V||!Dr[V]){var Ye=!1;for(var rt in Jt)if(Jt.hasOwnProperty(rt)&&Jt[rt].equals(Ne)){Ye=!0;break}if(Ye)Ne=Jt[rt];else{var yt="GS"+(Object.keys(Jt).length+1).toString(10);Jt[yt]=Ne,Ne.id=yt}return V&&(Dr[V]=Ne.id),mr.publish("addGState",Ne),Ne}};m.addGState=function(V,Ne){return pl(V,Ne),this},m.saveGraphicsState=function(){return Z("q"),We.push({key:Re,size:de,color:js}),this},m.restoreGraphicsState=function(){Z("Q");var V=We.pop();return Re=V.key,de=V.size,js=V.color,Hr=null,this},m.setCurrentTransformationMatrix=function(V){return Z(V.toString()+" cm"),this},m.comment=function(V){return Z("#"+V),this};var Ei=function(V,Ne){var Ye=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ye},set:function(Ft){isNaN(Ft)||(Ye=parseFloat(Ft))}});var rt=Ne||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return rt},set:function(Ft){isNaN(Ft)||(rt=parseFloat(Ft))}});var yt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return yt},set:function(Ft){yt=Ft.toString()}}),this},Mo=function(V,Ne,Ye,rt){Ei.call(this,V,Ne),this.type="rect";var yt=Ye||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return yt},set:function(Qt){isNaN(Qt)||(yt=parseFloat(Qt))}});var Ft=rt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ft},set:function(Qt){isNaN(Qt)||(Ft=parseFloat(Qt))}}),this},vd=function(){this.page=tt,this.currentPage=q,this.pages=Me.slice(0),this.pagesContext=Dt.slice(0),this.x=ut,this.y=vt,this.matrix=At,this.width=ja(q),this.height=nc(q),this.outputDestination=Ue,this.id="",this.objectNumber=-1};vd.prototype.restore=function(){tt=this.page,q=this.currentPage,Dt=this.pagesContext,Me=this.pages,ut=this.x,vt=this.y,At=this.matrix,Wu(q,this.width),su(q,this.height),Ue=this.outputDestination};var Hu=function(V,Ne,Ye,rt,yt){Wr.push(new vd),tt=q=0,Me=[],ut=V,vt=Ne,At=yt,Mr([Ye,rt])},au=function(V){if(_r[V])Wr.pop().restore();else{var Ne=new vd,Ye="Xo"+(Object.keys(Jr).length+1).toString(10);Ne.id=Ye,_r[V]=Ye,Jr[Ye]=Ne,mr.publish("addFormObject",Ne),Wr.pop().restore()}};for(var Ec in m.beginFormObject=function(V,Ne,Ye,rt,yt){return Hu(V,Ne,Ye,rt,yt),this},m.endFormObject=function(V){return au(V),this},m.doFormObject=function(V,Ne){var Ye=Jr[_r[V]];return Z("q"),Z(Ne.toString()+" cm"),Z("/"+Ye.id+" Do"),Z("Q"),this},m.getFormObject=function(V){var Ne=Jr[_r[V]];return{x:Ne.x,y:Ne.y,width:Ne.width,height:Ne.height,matrix:Ne.matrix}},m.save=function(V,Ne){return V=V||"generated.pdf",(Ne=Ne||{}).returnPromise=Ne.returnPromise||!1,Ne.returnPromise===!1?(th(nn(ar()),V),typeof th.unload=="function"&&xn.setTimeout&&setTimeout(th.unload,911),this):new Promise((function(Ye,rt){try{var yt=th(nn(ar()),V);typeof th.unload=="function"&&xn.setTimeout&&setTimeout(th.unload,911),Ye(yt)}catch(Ft){rt(Ft.message)}}))},pn.API)pn.API.hasOwnProperty(Ec)&&(Ec==="events"&&pn.API.events.length?(function(V,Ne){var Ye,rt,yt;for(yt=Ne.length-1;yt!==-1;yt--)Ye=Ne[yt][0],rt=Ne[yt][1],V.subscribe.apply(V,[Ye].concat(typeof rt=="function"?[rt]:rt))})(mr,pn.API.events):m[Ec]=pn.API[Ec]);var ja=m.getPageWidth=function(V){return(Dt[V=V||q].mediaBox.topRightX-Dt[V].mediaBox.bottomLeftX)/Je},Wu=m.setPageWidth=function(V,Ne){Dt[V].mediaBox.topRightX=Ne*Je+Dt[V].mediaBox.bottomLeftX},nc=m.getPageHeight=function(V){return(Dt[V=V||q].mediaBox.topRightY-Dt[V].mediaBox.bottomLeftY)/Je},su=m.setPageHeight=function(V,Ne){Dt[V].mediaBox.topRightY=Ne*Je+Dt[V].mediaBox.bottomLeftY};return m.internal={pdfEscape:pr,getStyle:ho,getFont:rc,getFontSize:Ce,getCharSpace:xd,getTextColor:xo,getLineHeight:bn,getLineHeightFactor:ma,getLineWidth:qr,write:Ee,getHorizontalCoordinate:Ua,getVerticalCoordinate:Ns,getCoordinateString:Rf,getVerticalCoordinateString:Gi,collections:{},newObject:kr,newAdditionalObject:ze,newObjectDeferred:Fr,newObjectDeferredBegin:ke,getFilters:et,putStream:mt,events:mr,scaleFactor:Je,pageSize:{getWidth:function(){return ja(q)},setWidth:function(V){Wu(q,V)},getHeight:function(){return nc(q)},setHeight:function(V){su(q,V)}},encryptionOptions:u,encryption:kn,getEncryptor:Ar,output:Ra,getNumberOfPages:xr,pages:Me,out:Z,f2:B,f3:T,getPageInfo:an,getPageInfoByObjId:dr,getCurrentPageInfo:Mn,getPDFVersion:v,Point:Ei,Rectangle:Mo,Matrix:sr,hasHotfix:Zn},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return ja(q)},set:function(V){Wu(q,V)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return nc(q)},set:function(V){su(q,V)},enumerable:!0,configurable:!0}),Ot.call(m,Oe),Re="F1",sa(s,r),mr.publish("initialized"),m}fm.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},fm.prototype.toHexString=function(e){return e.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},fm.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},fm.prototype.processOwnerPassword=function(e,t){return Vk(Gk(t).substr(0,5),e)},fm.prototype.encryptor=function(e,t){var r=Gk(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(a){return Vk(r,a)}},Eb.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||Da(e)!==Da(this))return!1;var a=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;a++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&a--;return a===0},pn.API={events:[]},pn.version="2.5.2";var Gs=pn.API,o_=1,Vh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cm=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},_n=function(e){return e.toFixed(2)},a0=function(e){return e.toFixed(5)};Gs.__acroform__={};var tc=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},c8=function(e){return e*o_},Su=function(e){var t=new aB,r=Br.internal.getHeight(e)||0,a=Br.internal.getWidth(e)||0;return t.BBox=[0,0,Number(_n(a)),Number(_n(r))],t},W1e=Gs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},G1e=Gs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},V1e=Gs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},ii=Gs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return V1e(e,t-1)},oi=Gs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return W1e(e,t-1)},li=Gs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return G1e(e,t-1)},K1e=Gs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,a=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=a(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=a(i)||0,[Number(_n(c.lowerLeft_X)),Number(_n(c.lowerLeft_Y)),Number(_n(c.upperRight_X)),Number(_n(c.upperRight_Y))]},X1e=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,a=Kk(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+_n(a.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(a.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Su(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},Kk=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,a={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map((function(T){return T.split(`
`)})):s.map((function(T){return[T]}));var i=r,o=Br.internal.getHeight(e)||0;o=o<0?-o:o;var l=Br.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(T,_,R){if(T+1<s.length){var z=_+" "+s[T+1][0];return $v(z,e,R).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,u,f=$v("3",e,i).height,p=e.multiline?o-i:(o-f)/2,m=p+=2,b=0,v=0,g=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+$v(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var w="",y=0,j=0;j<s.length;j++)if(s.hasOwnProperty(j)){var N=!1;if(s[j].length!==1&&g!==s[j].length-1){if((f+2)*(y+2)+2>o)continue e;w+=s[j][g],N=!0,v=j,j--}else{w=(w+=s[j][g]+" ").substr(w.length-1)==" "?w.substr(0,w.length-1):w;var S=parseInt(j),E=c(S,w,i),A=j>=s.length-1;if(E&&!A){w+=" ",g=0;continue}if(E||A){if(A)v=S;else if(e.multiline&&(f+2)*(y+2)+2>o)continue e}else{if(!e.multiline||(f+2)*(y+2)+2>o)continue e;v=S}}for(var P="",I=b;I<=v;I++){var B=s[I];if(e.multiline){if(I===v){P+=B[g]+" ",g=(g+1)%B.length;continue}if(I===b){P+=B[B.length-1]+" ";continue}}P+=B[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,u=$v(P,e,i).width,e.textAlign){case"right":d=l-u-2;break;case"center":d=(l-u)/2;break;default:d=2}t+=_n(d)+" "+_n(m)+` Td
`,t+="("+Vh(P)+`) Tj
`,t+=-_n(d)+` 0 Td
`,m=-(i+2),u=0,b=N?v:v+1,y++,w=""}break}return a.text=t,a.fontSize=i,a},$v=function(e,t,r){var a=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:a,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Y1e={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Q1e=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find((function(a){return a.type===r.type&&a.object===r.object}))===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},J1e=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var a=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),Da(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[a]}},Z1e=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(ru.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Y1e)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");o_=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new sB,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)})),e.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var a=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in a)if(a.hasOwnProperty(s)){var i=a[s];i.objId=void 0,i.hasAnnotation&&Q1e(i,r)}})(e)})),e.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)})),e.internal.events.subscribe("postPutPages",(function(r){(function(a,s){var i=!a;for(var o in a||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),a=a||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(a.hasOwnProperty(o)){var l=a[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=K1e(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Br.createDefaultAppearanceStream(l),Da(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var u=X1e(l);c.push({key:"AP",value:"<</N "+u+">>"}),s.internal.acroformPlugin.xForms.push(u)}if(l.appearanceStreamContent){var f="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var m=l.appearanceStreamContent[p];if(f+="/"+p+" ",f+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var b=m[o];typeof b=="function"&&(b=b.call(s,l)),f+="/"+o+" "+b+" ",s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b)}}else typeof(b=m)=="function"&&(b=b.call(s,l)),f+="/"+o+" "+b,s.internal.acroformPlugin.xForms.indexOf(b)>=0||s.internal.acroformPlugin.xForms.push(b);f+=">>"}c.push({key:"AP",value:`<<
`+f+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&J1e(s.internal.acroformPlugin.xForms,s)})(r,e)})),e.internal.acroformPlugin.isInitialized=!0}},nB=Gs.__acroform__.arrayToPdfArray=function(e,t,r){var a=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),Da(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(a=r.internal.getEncryptor(t)),s+="("+Vh(a(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},qj=function(e,t,r){var a=function(s){return s};return t!==void 0&&r&&(a=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+Vh(a(e))+")"},Ou=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ou.prototype.toString=function(){return this.objId+" 0 R"},Ou.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ou.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"}));for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var a=t[r],s=this[a];s&&(Array.isArray(s)?e.push({key:a,value:nB(s,this.objId,this.scope)}):s instanceof Ou?(s.scope=this.scope,e.push({key:a,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:a,value:s}))}return e};var aB=function(){Ou.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};tc(aB,Ou);var sB=function(){Ou.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(a){return a};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Vh(r(e))+")"}},set:function(r){e=r}})};tc(sB,Ou);var ru=function e(){Ou.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute F supplied.');t=w}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ii(t,3)},set:function(w){w?this.F=oi(t,3):this.F=li(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(w){if(isNaN(w))throw new Error('Invalid value "'+w+'" for attribute Ff supplied.');r=w}});var a=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(a.length!==0)return a},set:function(w){a=w!==void 0?w:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[0])?0:a[0]},set:function(w){a[0]=w}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[1])?0:a[1]},set:function(w){a[1]=w}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[2])?0:a[2]},set:function(w){a[2]=w}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!a||isNaN(a[3])?0:a[3]},set:function(w){a[3]=w}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(w){switch(w){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=w;break;default:throw new Error('Invalid value "'+w+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Tb)return;i="FieldObject"+e.FieldNum++}var w=function(y){return y};return this.scope&&(w=this.scope.internal.getEncryptor(this.objId)),"("+Vh(w(i))+")"},set:function(w){i=w.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(w){i=w}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(w){o=w}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(w){l=w}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(w){c=w}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/o_:d},set:function(w){d=w}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(w){u=w}});var f="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!f||this instanceof Tb||this instanceof yh))return qj(f,this.objId,this.scope)},set:function(w){w=w.toString(),f=w}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof oo?p:qj(p,this.objId,this.scope)},set:function(w){w=w.toString(),p=this instanceof oo?w:w.substr(0,1)==="("?cm(w.substr(1,w.length-2)):cm(w)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof oo?cm(p.substr(1,p.length-1)):p},set:function(w){w=w.toString(),p=this instanceof oo?"/"+w:w}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(w){this.V=w}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof oo?m:qj(m,this.objId,this.scope)},set:function(w){w=w.toString(),m=this instanceof oo?w:w.substr(0,1)==="("?cm(w.substr(1,w.length-2)):cm(w)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof oo?cm(m.substr(1,m.length-1)):m},set:function(w){w=w.toString(),m=this instanceof oo?"/"+w:w}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var b,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(w){w=!!w,v=w}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(b)return b},set:function(w){b=w}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,1)},set:function(w){w?this.Ff=oi(this.Ff,1):this.Ff=li(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,2)},set:function(w){w?this.Ff=oi(this.Ff,2):this.Ff=li(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,3)},set:function(w){w?this.Ff=oi(this.Ff,3):this.Ff=li(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(w){if([0,1,2].indexOf(w)===-1)throw new Error('Invalid value "'+w+'" for attribute Q supplied.');g=w}}),Object.defineProperty(this,"textAlign",{get:function(){var w;switch(g){case 0:default:w="left";break;case 1:w="center";break;case 2:w="right"}return w},configurable:!0,enumerable:!0,set:function(w){switch(w){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};tc(ru,Ou);var Cm=function(){ru.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return nB(t,this.objId,this.scope)},set:function(r){var a,s;s=[],typeof(a=r)=="string"&&(s=(function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d})(a,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,a){for(a=a||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),a!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,18)},set:function(r){r?this.Ff=oi(this.Ff,18):this.Ff=li(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=oi(this.Ff,19):this.Ff=li(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,20)},set:function(r){r?(this.Ff=oi(this.Ff,20),t.sort()):this.Ff=li(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,22)},set:function(r){r?this.Ff=oi(this.Ff,22):this.Ff=li(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,23)},set:function(r){r?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,27)},set:function(r){r?this.Ff=oi(this.Ff,27):this.Ff=li(this.Ff,27)}}),this.hasAppearanceStream=!1};tc(Cm,ru);var Am=function(){Cm.call(this),this.fontName="helvetica",this.combo=!1};tc(Am,Cm);var Em=function(){Am.call(this),this.combo=!0};tc(Em,Am);var e1=function(){Em.call(this),this.edit=!0};tc(e1,Em);var oo=function(){ru.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,15)},set:function(r){r?this.Ff=oi(this.Ff,15):this.Ff=li(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,16)},set:function(r){r?this.Ff=oi(this.Ff,16):this.Ff=li(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,17)},set:function(r){r?this.Ff=oi(this.Ff,17):this.Ff=li(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,26)},set:function(r){r?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var a,s=[];for(a in s.push("<<"),t)s.push("/"+a+" ("+Vh(r(t[a]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){Da(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};tc(oo,ru);var t1=function(){oo.call(this),this.pushButton=!0};tc(t1,oo);var Tm=function(){oo.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};tc(Tm,oo);var Tb=function(){var e,t;ru.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,a={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),a)o.push("/"+i+" ("+Vh(s(a[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){Da(s)==="object"&&(a=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return a.CA||""},set:function(s){typeof s=="string"&&(a.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Br.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};tc(Tb,ru),Tm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Tm.prototype.createOption=function(e){var t=new Tb;return t.Parent=this,t.optionName=e,this.Kids.push(t),ebe.call(this.scope,t),t};var r1=function(){oo.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Br.CheckBox.createAppearanceStream()};tc(r1,oo);var yh=function(){ru.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,13)},set:function(t){t?this.Ff=oi(this.Ff,13):this.Ff=li(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,21)},set:function(t){t?this.Ff=oi(this.Ff,21):this.Ff=li(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,23)},set:function(t){t?this.Ff=oi(this.Ff,23):this.Ff=li(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,24)},set:function(t){t?this.Ff=oi(this.Ff,24):this.Ff=li(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,25)},set:function(t){t?this.Ff=oi(this.Ff,25):this.Ff=li(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,26)},set:function(t){t?this.Ff=oi(this.Ff,26):this.Ff=li(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};tc(yh,ru);var n1=function(){yh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ii(this.Ff,14)},set:function(e){e?this.Ff=oi(this.Ff,14):this.Ff=li(this.Ff,14)}}),this.password=!0};tc(n1,yh);var Br={CheckBox:{createAppearanceStream:function(){return{N:{On:Br.CheckBox.YesNormal},D:{On:Br.CheckBox.YesPushDown,Off:Br.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Su(e);t.scope=e.scope;var r=[],a=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=Kk(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+_n(Br.internal.getWidth(e))+" "+_n(Br.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+a+" "+_n(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Su(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),s=[],i=Br.internal.getHeight(e),o=Br.internal.getWidth(e),l=Kk(e,e.caption);return s.push("1 g"),s.push("0 0 "+_n(o)+" "+_n(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+_n(o-1)+" "+_n(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+_n(l.fontSize)+" Tf "+a),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Su(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+_n(Br.internal.getWidth(e))+" "+_n(Br.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Br.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Br.RadioButton.Circle.YesNormal,t.D[e]=Br.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Su(e);t.scope=e.scope;var r=[],a=Br.internal.getWidth(e)<=Br.internal.getHeight(e)?Br.internal.getWidth(e)/4:Br.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Br.internal.Bezier_C,i=Number((a*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+a0(Br.internal.getWidth(e)/2)+" "+a0(Br.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Su(e);t.scope=e.scope;var r=[],a=Br.internal.getWidth(e)<=Br.internal.getHeight(e)?Br.internal.getWidth(e)/4:Br.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Br.internal.Bezier_C).toFixed(5)),o=Number((a*Br.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+a0(Br.internal.getWidth(e)/2)+" "+a0(Br.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+a0(Br.internal.getWidth(e)/2)+" "+a0(Br.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+o+" "+o+" "+a+" 0 "+a+" c"),r.push("-"+o+" "+a+" -"+a+" "+o+" -"+a+" 0 c"),r.push("-"+a+" -"+o+" -"+o+" -"+a+" 0 -"+a+" c"),r.push(o+" -"+a+" "+a+" -"+o+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Su(e);t.scope=e.scope;var r=[],a=Br.internal.getWidth(e)<=Br.internal.getHeight(e)?Br.internal.getWidth(e)/4:Br.internal.getHeight(e)/4;a=Number((.9*a).toFixed(5));var s=Number((2*a).toFixed(5)),i=Number((s*Br.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+a0(Br.internal.getWidth(e)/2)+" "+a0(Br.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Br.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Br.RadioButton.Cross.YesNormal,t.D[e]=Br.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Su(e);t.scope=e.scope;var r=[],a=Br.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+_n(Br.internal.getWidth(e)-2)+" "+_n(Br.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(_n(a.x1.x)+" "+_n(a.x1.y)+" m"),r.push(_n(a.x2.x)+" "+_n(a.x2.y)+" l"),r.push(_n(a.x4.x)+" "+_n(a.x4.y)+" m"),r.push(_n(a.x3.x)+" "+_n(a.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Su(e);t.scope=e.scope;var r=Br.internal.calculateCross(e),a=[];return a.push("0.749023 g"),a.push("0 0 "+_n(Br.internal.getWidth(e))+" "+_n(Br.internal.getHeight(e))+" re"),a.push("f"),a.push("q"),a.push("1 1 "+_n(Br.internal.getWidth(e)-2)+" "+_n(Br.internal.getHeight(e)-2)+" re"),a.push("W"),a.push("n"),a.push(_n(r.x1.x)+" "+_n(r.x1.y)+" m"),a.push(_n(r.x2.x)+" "+_n(r.x2.y)+" l"),a.push(_n(r.x4.x)+" "+_n(r.x4.y)+" m"),a.push(_n(r.x3.x)+" "+_n(r.x3.y)+" l"),a.push("s"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=Su(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+_n(Br.internal.getWidth(e))+" "+_n(Br.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Br.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Br.internal.getWidth(e),r=Br.internal.getHeight(e),a=Math.min(t,r);return{x1:{x:(t-a)/2,y:(r-a)/2+a},x2:{x:(t-a)/2+a,y:(r-a)/2},x3:{x:(t-a)/2,y:(r-a)/2},x4:{x:(t-a)/2+a,y:(r-a)/2+a}}}},Br.internal.getWidth=function(e){var t=0;return Da(e)==="object"&&(t=c8(e.Rect[2])),t},Br.internal.getHeight=function(e){var t=0;return Da(e)==="object"&&(t=c8(e.Rect[3])),t};var ebe=Gs.addField=function(e){if(Z1e(this,e),!(e instanceof ru))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Gs.AcroFormChoiceField=Cm,Gs.AcroFormListBox=Am,Gs.AcroFormComboBox=Em,Gs.AcroFormEditBox=e1,Gs.AcroFormButton=oo,Gs.AcroFormPushButton=t1,Gs.AcroFormRadioButton=Tm,Gs.AcroFormCheckBox=r1,Gs.AcroFormTextField=yh,Gs.AcroFormPasswordField=n1,Gs.AcroFormAppearance=Br,Gs.AcroForm={ChoiceField:Cm,ListBox:Am,ComboBox:Em,EditBox:e1,Button:oo,PushButton:t1,RadioButton:Tm,CheckBox:r1,TextField:yh,PasswordField:n1,Appearance:Br},pn.AcroForm={ChoiceField:Cm,ListBox:Am,ComboBox:Em,EditBox:e1,Button:oo,PushButton:t1,RadioButton:Tm,CheckBox:r1,TextField:yh,PasswordField:n1,Appearance:Br};pn.AcroForm;function iB(e){return e.reduce((function(t,r,a){return t[r]=a,t}),{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(T,_){var R,z,H,Y,J,re=t;if((_=_||t)==="RGBA"||T.data!==void 0&&T.data instanceof Uint8ClampedArray&&"height"in T&&"width"in T)return"RGBA";if(E(T))for(J in r)for(H=r[J],R=0;R<H.length;R+=1){for(Y=!0,z=0;z<H[R].length;z+=1)if(H[R][z]!==void 0&&H[R][z]!==T[z]){Y=!1;break}if(Y===!0){re=J;break}}else for(J in r)for(H=r[J],R=0;R<H.length;R+=1){for(Y=!0,z=0;z<H[R].length;z+=1)if(H[R][z]!==void 0&&H[R][z]!==T.charCodeAt(z)){Y=!1;break}if(Y===!0){re=J;break}}return re===t&&_!==t&&(re=_),re},s=function T(_){for(var R=this.internal.write,z=this.internal.putStream,H=(0,this.internal.getFilters)();H.indexOf("FlateEncode")!==-1;)H.splice(H.indexOf("FlateEncode"),1);_.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:_.width}),Y.push({key:"Height",value:_.height}),_.colorSpace===g.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(_.palette.length/3-1)+" "+("sMask"in _&&_.sMask!==void 0?_.objectId+2:_.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+_.colorSpace}),_.colorSpace===g.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:_.bitsPerComponent}),"decodeParameters"in _&&_.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+_.decodeParameters+">>"}),"transparency"in _&&Array.isArray(_.transparency)){for(var J="",re=0,X=_.transparency.length;re<X;re++)J+=_.transparency[re]+" "+_.transparency[re]+" ";Y.push({key:"Mask",value:"["+J+"]"})}_.sMask!==void 0&&Y.push({key:"SMask",value:_.objectId+1+" 0 R"});var te=_.filter!==void 0?["/"+_.filter]:void 0;if(z({data:_.data,additionalKeyValues:Y,alreadyAppliedFilters:te,objectId:_.objectId}),R("endobj"),"sMask"in _&&_.sMask!==void 0){var W="/Predictor "+_.predictor+" /Colors 1 /BitsPerComponent "+_.bitsPerComponent+" /Columns "+_.width,O={width:_.width,height:_.height,colorSpace:"DeviceGray",bitsPerComponent:_.bitsPerComponent,decodeParameters:W,data:_.sMask};"filter"in _&&(O.filter=_.filter),T.call(this,O)}if(_.colorSpace===g.INDEXED){var q=this.internal.newObject();z({data:P(new Uint8Array(_.palette)),objectId:q}),R("endobj")}},i=function(){var T=this.internal.collections.addImage_images;for(var _ in T)s.call(this,T[_])},o=function(){var T,_=this.internal.collections.addImage_images,R=this.internal.write;for(var z in _)R("/I"+(T=_[z]).index,T.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var T=this.internal.collections.addImage_images;return l.call(this),T},d=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(T){return typeof e["process"+T.toUpperCase()]=="function"},f=function(T){return Da(T)==="object"&&T.nodeType===1},p=function(T,_){if(T.nodeName==="IMG"&&T.hasAttribute("src")){var R=""+T.getAttribute("src");if(R.indexOf("data:image/")===0)return px(unescape(R).split("base64,").pop());var z=e.loadFile(R,!0);if(z!==void 0)return z}if(T.nodeName==="CANVAS"){if(T.width===0||T.height===0)throw new Error("Given canvas must have data. Canvas width: "+T.width+", height: "+T.height);var H;switch(_){case"PNG":H="image/png";break;case"WEBP":H="image/webp";break;default:H="image/jpeg"}return px(T.toDataURL(H,1).split("base64,").pop())}},m=function(T){var _=this.internal.collections.addImage_images;if(_){for(var R in _)if(T===_[R].alias)return _[R]}},b=function(T,_,R){return T||_||(T=-96,_=-96),T<0&&(T=-1*R.width*72/T/this.internal.scaleFactor),_<0&&(_=-1*R.height*72/_/this.internal.scaleFactor),T===0&&(T=_*R.width/R.height),_===0&&(_=T*R.height/R.width),[T,_]},v=function(T,_,R,z,H,Y){var J=b.call(this,R,z,H),re=this.internal.getCoordinateString,X=this.internal.getVerticalCoordinateString,te=c.call(this);if(R=J[0],z=J[1],te[H.index]=H,Y){Y*=Math.PI/180;var W=Math.cos(Y),O=Math.sin(Y),q=function(U){return U.toFixed(4)},G=[q(W),q(O),q(-1*O),q(W),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,re(T),X(_+z),"cm"].join(" ")),this.internal.write(G.join(" ")),this.internal.write([re(R),"0","0",re(z),"0","0","cm"].join(" "))):this.internal.write([re(R),"0","0",re(z),re(T),X(_+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+H.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var w=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},y=e.__addimage__.sHashCode=function(T){var _,R,z=0;if(typeof T=="string")for(R=T.length,_=0;_<R;_++)z=(z<<5)-z+T.charCodeAt(_),z|=0;else if(E(T))for(R=T.byteLength/2,_=0;_<R;_++)z=(z<<5)-z+T[_],z|=0;return z},j=e.__addimage__.validateStringAsBase64=function(T){(T=T||"").toString().trim();var _=!0;return T.length===0&&(_=!1),T.length%4!=0&&(_=!1),/^[A-Za-z0-9+/]+$/.test(T.substr(0,T.length-2))===!1&&(_=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(T.substr(-2))===!1&&(_=!1),_},N=e.__addimage__.extractImageFromDataUrl=function(T){var _=(T=T||"").split("base64,"),R=null;if(_.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(_[0]);Array.isArray(z)&&(R={mimeType:z[1],charset:z[2],data:_[1]})}return R},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(T){return S()&&T instanceof ArrayBuffer};var E=e.__addimage__.isArrayBufferView=function(T){return S()&&typeof Uint32Array<"u"&&(T instanceof Int8Array||T instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array||T instanceof Float64Array)},A=e.__addimage__.binaryStringToUint8Array=function(T){for(var _=T.length,R=new Uint8Array(_),z=0;z<_;z++)R[z]=T.charCodeAt(z);return R},P=e.__addimage__.arrayBufferToBinaryString=function(T){for(var _="",R=E(T)?T:new Uint8Array(T),z=0;z<R.length;z+=8192)_+=String.fromCharCode.apply(null,R.subarray(z,z+8192));return _};e.addImage=function(){var T,_,R,z,H,Y,J,re,X;if(typeof arguments[1]=="number"?(_=t,R=arguments[1],z=arguments[2],H=arguments[3],Y=arguments[4],J=arguments[5],re=arguments[6],X=arguments[7]):(_=arguments[1],R=arguments[2],z=arguments[3],H=arguments[4],Y=arguments[5],J=arguments[6],re=arguments[7],X=arguments[8]),Da(T=arguments[0])==="object"&&!f(T)&&"imageData"in T){var te=T;T=te.imageData,_=te.format||_||t,R=te.x||R||0,z=te.y||z||0,H=te.w||te.width||H,Y=te.h||te.height||Y,J=te.alias||J,re=te.compression||re,X=te.rotation||te.angle||X}var W=this.internal.getFilters();if(re===void 0&&W.indexOf("FlateEncode")!==-1&&(re="SLOW"),isNaN(R)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var O=I.call(this,T,_,J,re);return v.call(this,R,z,H,Y,O,X),this};var I=function(T,_,R,z){var H,Y,J;if(typeof T=="string"&&a(T)===t){T=unescape(T);var re=B(T,!1);(re!==""||(re=e.loadFile(T,!0))!==void 0)&&(T=re)}if(f(T)&&(T=p(T,_)),_=a(T,_),!u(_))throw new Error("addImage does not support files of type '"+_+"', please ensure that a plugin for '"+_+"' support is added.");if(((J=R)==null||J.length===0)&&(R=(function(X){return typeof X=="string"||E(X)?y(X):E(X.data)?y(X.data):null})(T)),(H=m.call(this,R))||(S()&&(T instanceof Uint8Array||_==="RGBA"||(Y=T,T=A(T))),H=this["process"+_.toUpperCase()](T,d.call(this),R,(function(X){return X&&typeof X=="string"&&(X=X.toUpperCase()),X in e.image_compression?X:w.NONE})(z),Y)),!H)throw new Error("An unknown error occurred whilst processing the image.");return H},B=e.__addimage__.convertBase64ToBinaryString=function(T,_){var R;_=typeof _!="boolean"||_;var z,H="";if(typeof T=="string"){z=(R=N(T))!==null?R.data:T;try{H=px(z)}catch(Y){if(_)throw j(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return H};e.getImageProperties=function(T){var _,R,z="";if(f(T)&&(T=p(T)),typeof T=="string"&&a(T)===t&&((z=B(T,!1))===""&&(z=e.loadFile(T)||""),T=z),R=a(T),!u(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(!S()||T instanceof Uint8Array||(T=A(T)),!(_=this["process"+R.toUpperCase()](T)))throw new Error("An unknown error occurred whilst processing the image");return _.fileType=R,_}})(pn.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};pn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var a,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,u=!1,f=0;f<d.length&&!u;f++)switch((a=d[f]).type){case"link":(t(a.options.url)||t(a.options.pageNumber))&&(u=!0);break;case"reference":case"text":case"freetext":u=!0}if(u!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){a=d[p];var m=this.internal.pdfEscape,b=this.internal.getEncryptor(r.objId);switch(a.type){case"reference":this.internal.write(" "+a.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),w=this.internal.getEncryptor(v.objId),y=a.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y)+"] ")+"/Contents ("+m(w(a.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+m(w(y))+") >>",v.content=i;var j=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(a.bounds.x+30)+" "+l(a.bounds.y+a.bounds.h)+" "+o(a.bounds.x+a.bounds.w+30)+" "+l(a.bounds.y)+"] ")+" /Parent "+j,a.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(v.objId,"0 R",g.objId,"0 R");break;case"freetext":s="/Rect ["+o(a.bounds.x)+" "+l(a.bounds.y)+" "+o(a.bounds.x+a.bounds.w)+" "+l(a.bounds.y+a.bounds.h)+"] ";var N=a.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(b(a.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(a.options.name){var S=this.annotations._nameMap[a.options.name];a.options.pageNumber=S.page,a.options.top=S.y}else a.options.top||(a.options.top=0);if(s="/Rect ["+a.finalBounds.x+" "+a.finalBounds.y+" "+a.finalBounds.w+" "+a.finalBounds.h+"] ",i="",a.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(b(a.options.url))+") >>";else if(a.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(a.options.pageNumber).objId+" 0 R",a.options.magFactor=a.options.magFactor||"XYZ",a.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+a.options.top+"]";break;case"FitV":a.options.left=a.options.left||0,i+=" /FitV "+a.options.left+"]";break;default:var E=l(a.options.top);a.options.left=a.options.left||0,a.options.zoom===void 0&&(a.options.zoom=0),i+=" /XYZ "+a.options.left+" "+E+" "+a.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var a=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":a.pageContext.annotations.push(r)}},e.link=function(r,a,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(a),w:c(r+s),h:d(a+i)},options:o,type:"link"})},e.textWithLink=function(r,a,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var u=this.splitTextToSize(r,l).length;o=Math.ceil(d*u)}else l=c,o=d;return this.text(r,a,s,i),s+=.2*d,i.align==="center"&&(a-=c/2),i.align==="right"&&(a-=c),this.link(a,s-d,l,o,i),c},e.getTextWidth=function(r){var a=this.internal.getFontSize();return this.getStringUnitWidth(r)*a/this.internal.scaleFactor}})(pn.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},a={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=e.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&s.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var u=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},f=e.__arabicParser__.resolveLigatures=function(v){var g=0,w=r,y="",j=0;for(g=0;g<v.length;g+=1)w[v.charCodeAt(g)]!==void 0?(j++,typeof(w=w[v.charCodeAt(g)])=="number"&&(y+=String.fromCharCode(w),w=r,j=0),g===v.length-1&&(w=r,y+=v.charAt(g-(j-1)),g-=j-1,j=0)):(w=r,y+=v.charAt(g-j),g-=j,j=0);return y};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&a[v.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(v,g,w){return o(v)?i(v)===!1?-1:!d(v)||!o(g)&&!o(w)||!o(w)&&l(g)||l(v)&&!o(g)||l(v)&&c(g)||l(v)&&l(g)?0:u(v)&&o(g)&&!l(g)&&o(w)&&d(w)?3:l(v)||!o(w)?1:2:-1},m=function(v){var g=0,w=0,y=0,j="",N="",S="",E=(v=v||"").split("\\s+"),A=[];for(g=0;g<E.length;g+=1){for(A.push(""),w=0;w<E[g].length;w+=1)j=E[g][w],N=E[g][w-1],S=E[g][w+1],o(j)?(y=p(j,N,S),A[g]+=y!==-1?String.fromCharCode(t[j.charCodeAt(0)][y]):j):A[g]+=j;A[g]=f(A[g])}return A.join(" ")},b=e.__arabicParser__.processArabic=e.processArabic=function(){var v,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,w=[];if(Array.isArray(g)){var y=0;for(w=[],y=0;y<g.length;y+=1)Array.isArray(g[y])?w.push([m(g[y][0]),g[y][1],g[y][2]]):w.push([m(g[y])]);v=w}else v=m(g);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",b])})(pn.API),pn.API.autoPrint=function(e){var t;return((e=e||{}).variant=e.variant||"non-conform",e.variant)==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var a=150;Object.defineProperty(this,"width",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=a+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,a){var s;if((r=r||"2d")!=="2d")return null;for(s in a)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=a[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(pn.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,a=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var u=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var f=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var b=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return b},set:function(v){b=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return a.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){a.call(this);var u=(d=d||{}).fontSize||this.getFontSize(),f=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,m=0,b=0,v=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var w=d.maxWidth;w>0?typeof c=="string"?c=this.splitTextToSize(c,w):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce((function(j,N){return j.concat(g.splitTextToSize(N,w))}),[])):c=Array.isArray(c)?c:[c];for(var y=0;y<c.length;y++)m<(v=this.getStringUnitWidth(c[y],{font:f})*u)&&(m=v);return m!==0&&(b=c.length),{w:m/=p,h:Math.max((b*u*this.getLineHeightFactor()-u*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){a.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),a.call(this);var d=this.internal.__cell__.lastCell,u=this.internal.__cell__.padding,f=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+f.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=f.top,m&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-u,c.y+u,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+u,{align:"center",baseline:"top",maxWidth:c.width-u-u}):this.text(c.text,c.x+u,c.y+u,{align:"left",baseline:"top",maxWidth:c.width-u-u})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,u,f,p){if(a.call(this),!u)throw new Error("No data for PDF table.");var m,b,v,g,w=[],y=[],j=[],N={},S={},E=[],A=[],P=(p=p||{}).autoSize||!1,I=p.printHeaders!==!1,B=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,T=p.margins||Object.assign({width:this.getPageWidth()},t),_=typeof p.padding=="number"?p.padding:3,R=p.headerBackgroundColor||"#c8c8c8",z=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=R,this.internal.__cell__.headerTextColor=z,this.setFontSize(B),f==null)y=w=Object.keys(u[0]),j=w.map((function(){return"left"}));else if(Array.isArray(f)&&Da(f[0])==="object")for(w=f.map((function(te){return te.name})),y=f.map((function(te){return te.prompt||te.name||""})),j=f.map((function(te){return te.align||"left"})),m=0;m<f.length;m+=1)S[f[m].name]=f[m].width*(19.049976/25.4);else Array.isArray(f)&&typeof f[0]=="string"&&(y=w=f,j=w.map((function(){return"left"})));if(P||Array.isArray(f)&&typeof f[0]=="string")for(m=0;m<w.length;m+=1){for(N[g=w[m]]=u.map((function(te){return te[g]})),this.setFont(void 0,"bold"),E.push(this.getTextDimensions(y[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),b=N[g],this.setFont(void 0,"normal"),v=0;v<b.length;v+=1)E.push(this.getTextDimensions(b[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[g]=Math.max.apply(null,E)+_+_,E=[]}if(I){var H={};for(m=0;m<w.length;m+=1)H[w[m]]={},H[w[m]].text=y[m],H[w[m]].align=j[m];var Y=l.call(this,H,S);A=w.map((function(te){return new i(c,d,S[te],Y,H[te].text,void 0,H[te].align)})),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var J=f.reduce((function(te,W){return te[W.name]=W.align,te}),{});for(m=0;m<u.length;m+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:m,data:u[m]},this);var re=l.call(this,u[m],S);for(v=0;v<w.length;v+=1){var X=u[m][w[v]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:m,col:v,data:X},this),o.call(this,new i(c,d,S[w[v]],re,X,m+2,J[w[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var u=this.internal.__cell__.padding,f=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map((function(m){var b=c[m];return this.splitTextToSize(b.hasOwnProperty("text")?b.text:b,d[m]-u-u)}),this).map((function(m){return this.getLineHeightFactor()*m.length*f/p+u+u}),this).reduce((function(m,b){return Math.max(m,b)}),0)};e.setTableHeaderRow=function(c){a.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(a.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var u;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var f=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(f[0],f[1],f[2],f[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){u=this.internal.__cell__.tableHeaderRow[m].clone(),d&&(u.y=this.internal.__cell__.margins.top||0,p.push(u)),u.lineNumber=c;var b=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,u),this.setTextColor(b)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}})(pn.API);var oB={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},lB=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Xk=iB(lB),cB=[100,200,300,400,500,600,700,800,900],tbe=iB(cB);function Yk(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return oB[i=i||"normal"]?i:"normal"})(e.style),a=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),s=(function(i){return typeof Xk[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:a,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,a].join(" ")}}}function d8(e,t,r,a){var s;for(s=r;s>=0&&s<t.length;s+=a)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=a)if(e[t[s]])return e[t[s]]}var rbe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},u8={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function f8(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function nbe(e,t,r){for(var a=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},rbe,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=Yk(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[a]))throw new Error("Could not find a font-family for the rule '"+f8(i)+"' and default family '"+a+"'.");if(o=(function(c,d){if(d[c])return d[c];var u=Xk[c],f=u<=Xk.normal?-1:1,p=d8(d,lB,u,f);if(!p)throw new Error("Could not find a matching font-stretch value for "+c);return p})(i.stretch,o),o=(function(c,d){if(d[c])return d[c];for(var u=oB[c],f=0;f<u.length;++f)if(d[u[f]])return d[u[f]];throw new Error("Could not find a matching font-style for "+c)})(i.style,o),!(o=(function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var u=tbe[c],f=d8(d,cB,u,c<400?-1:1);if(!f)throw new Error("Could not find a matching font-weight for value "+c);return f})(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+f8(i)+"'.");return o}function h8(e){return e.trimLeft()}function abe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function sbe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var zv,m8,p8,$j=["times"];(function(e){var t,r,a,s,i,o,l,c,d,u=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new f(this),t=this.internal.f2,r=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new u}]);var f=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=O;Object.defineProperty(this,"pdf",{get:function(){return q}});var G=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return G},set:function(ie){G=!!ie}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(ie){U=!!ie}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(ie){isNaN(ie)||(K=ie)}});var ae=0;Object.defineProperty(this,"posY",{get:function(){return ae},set:function(ie){isNaN(ie)||(ae=ie)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ie){var Z;typeof ie=="number"?Z=[ie,ie,ie,ie]:((Z=new Array(4))[0]=ie[0],Z[1]=ie.length>=2?ie[1]:Z[0],Z[2]=ie.length>=3?ie[2]:Z[0],Z[3]=ie.length>=4?ie[3]:Z[1]),d.margin=Z}});var me=!1;Object.defineProperty(this,"autoPaging",{get:function(){return me},set:function(ie){me=ie}});var se=0;Object.defineProperty(this,"lastBreak",{get:function(){return se},set:function(ie){se=ie}});var le=[];Object.defineProperty(this,"pageBreaks",{get:function(){return le},set:function(ie){le=ie}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ie){ie instanceof u&&(d=ie)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ie){d.path=ie}});var Me=[];Object.defineProperty(this,"ctxStack",{get:function(){return Me},set:function(ie){Me=ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ie){var Z;Z=p(ie),this.ctx.fillStyle=Z.style,this.ctx.isFillTransparent=Z.a===0,this.ctx.fillOpacity=Z.a,this.pdf.setFillColor(Z.r,Z.g,Z.b,{a:Z.a}),this.pdf.setTextColor(Z.r,Z.g,Z.b,{a:Z.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ie){var Z=p(ie);this.ctx.strokeStyle=Z.style,this.ctx.isStrokeTransparent=Z.a===0,this.ctx.strokeOpacity=Z.a,Z.a===0?this.pdf.setDrawColor(255,255,255):(Z.a,this.pdf.setDrawColor(Z.r,Z.g,Z.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ie){["butt","round","square"].indexOf(ie)!==-1&&(this.ctx.lineCap=ie,this.pdf.setLineCap(ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ie){isNaN(ie)||(this.ctx.lineWidth=ie,this.pdf.setLineWidth(ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ie){["bevel","round","miter"].indexOf(ie)!==-1&&(this.ctx.lineJoin=ie,this.pdf.setLineJoin(ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ie){isNaN(ie)||(this.ctx.miterLimit=ie,this.pdf.setMiterLimit(ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ie){this.ctx.textBaseline=ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ie){["right","end","center","left","start"].indexOf(ie)!==-1&&(this.ctx.textAlign=ie)}});var ue=null;function Ue(ie,Z){if(ue===null){var Ee=(function(we){var Oe=[];return Object.keys(we).forEach((function(de){we[de].forEach((function(ce){var Ce=null;switch(ce){case"bold":Ce={family:de,weight:"bold"};break;case"italic":Ce={family:de,style:"italic"};break;case"bolditalic":Ce={family:de,weight:"bold",style:"italic"};break;case"":case"normal":Ce={family:de}}Ce!==null&&(Ce.ref={name:de,style:ce},Oe.push(Ce))}))})),Oe})(ie.getFontList());ue=(function(we){for(var Oe={},de=0;de<we.length;++de){var ce=Yk(we[de]),Ce=ce.family,Xe=ce.stretch,xe=ce.style,fe=ce.weight;Oe[Ce]=Oe[Ce]||{},Oe[Ce][Xe]=Oe[Ce][Xe]||{},Oe[Ce][Xe][xe]=Oe[Ce][Xe][xe]||{},Oe[Ce][Xe][xe][fe]=ce}return Oe})(Ee.concat(Z))}return ue}var Ae=null;Object.defineProperty(this,"fontFaces",{get:function(){return Ae},set:function(ie){ue=null,Ae=ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ie){var Z;if(this.ctx.font=ie,(Z=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ie))!==null){var Ee=Z[1],we=(Z[2],Z[3]),Oe=Z[4],de=(Z[5],Z[6]),ce=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Oe)[2];Oe=Math.floor(ce==="px"?parseFloat(Oe)*this.pdf.internal.scaleFactor:ce==="em"?parseFloat(Oe)*this.pdf.getFontSize():parseFloat(Oe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Oe);var Ce=(function(Le){var Re,Je,ut=[],vt=Le.trim();if(vt==="")return $j;if(vt in u8)return[u8[vt]];for(;vt!=="";){switch(Je=null,Re=(vt=h8(vt)).charAt(0)){case'"':case"'":Je=abe(vt.substring(1),Re);break;default:Je=sbe(vt)}if(Je===null||(ut.push(Je[0]),(vt=h8(Je[1]))!==""&&vt.charAt(0)!==","))return $j;vt=vt.replace(/^,/,"")}return ut})(de);if(this.fontFaces){var Xe=nbe(Ue(this.pdf,this.fontFaces),Ce.map((function(Le){return{family:Le,stretch:"normal",weight:we,style:Ee}})));this.pdf.setFont(Xe.ref.name,Xe.ref.style)}else{var xe="";(we==="bold"||parseInt(we,10)>=700||Ee==="bold")&&(xe="bold"),Ee==="italic"&&(xe+="italic"),xe.length===0&&(xe="normal");for(var fe="",Se={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qe=0;qe<Ce.length;qe++){if(this.pdf.internal.getFont(Ce[qe],xe,{noFallback:!0,disableWarning:!0})!==void 0){fe=Ce[qe];break}if(xe==="bolditalic"&&this.pdf.internal.getFont(Ce[qe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)fe=Ce[qe],xe="bold";else if(this.pdf.internal.getFont(Ce[qe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){fe=Ce[qe],xe="normal";break}}if(fe===""){for(var je=0;je<Ce.length;je++)if(Se[Ce[je]]){fe=Se[Ce[je]];break}}fe=fe===""?"Times":fe,this.pdf.setFont(fe,xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ie){this.ctx.globalCompositeOperation=ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ie){this.ctx.globalAlpha=ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ie){this.ctx.lineDashOffset=ie,W.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ie){this.ctx.lineDash=ie,W.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ie){this.ctx.ignoreClearRect=!!ie}})};f.prototype.setLineDash=function(O){this.lineDash=O},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){N.call(this,"fill",!1)},f.prototype.stroke=function(){N.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(O,q){if(isNaN(O)||isNaN(q))throw es.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var G=this.ctx.transform.applyToPoint(new o(O,q));this.path.push({type:"mt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(O,q)},f.prototype.closePath=function(){var O=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&Da(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){O=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},f.prototype.lineTo=function(O,q){if(isNaN(O)||isNaN(q))throw es.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var G=this.ctx.transform.applyToPoint(new o(O,q));this.path.push({type:"lt",x:G.x,y:G.y}),this.ctx.lastPoint=new o(G.x,G.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},f.prototype.quadraticCurveTo=function(O,q,G,U){if(isNaN(G)||isNaN(U)||isNaN(O)||isNaN(q))throw es.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new o(G,U)),ae=this.ctx.transform.applyToPoint(new o(O,q));this.path.push({type:"qct",x1:ae.x,y1:ae.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},f.prototype.bezierCurveTo=function(O,q,G,U,K,ae){if(isNaN(K)||isNaN(ae)||isNaN(O)||isNaN(q)||isNaN(G)||isNaN(U))throw es.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var me=this.ctx.transform.applyToPoint(new o(K,ae)),se=this.ctx.transform.applyToPoint(new o(O,q)),le=this.ctx.transform.applyToPoint(new o(G,U));this.path.push({type:"bct",x1:se.x,y1:se.y,x2:le.x,y2:le.y,x:me.x,y:me.y}),this.ctx.lastPoint=new o(me.x,me.y)},f.prototype.arc=function(O,q,G,U,K,ae){if(isNaN(O)||isNaN(q)||isNaN(G)||isNaN(U)||isNaN(K))throw es.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ae=!!ae,!this.ctx.transform.isIdentity){var me=this.ctx.transform.applyToPoint(new o(O,q));O=me.x,q=me.y;var se=this.ctx.transform.applyToPoint(new o(0,G)),le=this.ctx.transform.applyToPoint(new o(0,0));G=Math.sqrt(Math.pow(se.x-le.x,2)+Math.pow(se.y-le.y,2))}Math.abs(K-U)>=2*Math.PI&&(U=0,K=2*Math.PI),this.path.push({type:"arc",x:O,y:q,radius:G,startAngle:U,endAngle:K,counterclockwise:ae})},f.prototype.arcTo=function(O,q,G,U,K){throw new Error("arcTo not implemented.")},f.prototype.rect=function(O,q,G,U){if(isNaN(O)||isNaN(q)||isNaN(G)||isNaN(U))throw es.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,q),this.lineTo(O+G,q),this.lineTo(O+G,q+U),this.lineTo(O,q+U),this.lineTo(O,q),this.lineTo(O+G,q),this.lineTo(O,q)},f.prototype.fillRect=function(O,q,G,U){if(isNaN(O)||isNaN(q)||isNaN(G)||isNaN(U))throw es.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,q,G,U),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},f.prototype.strokeRect=function(O,q,G,U){if(isNaN(O)||isNaN(q)||isNaN(G)||isNaN(U))throw es.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");b.call(this)||(this.beginPath(),this.rect(O,q,G,U),this.stroke())},f.prototype.clearRect=function(O,q,G,U){if(isNaN(O)||isNaN(q)||isNaN(G)||isNaN(U))throw es.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,q,G,U))},f.prototype.save=function(O){O=typeof O!="boolean"||O;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},f.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,G=0;G<this.pdf.internal.getNumberOfPages();G++)this.pdf.setPage(G+1),this.pdf.internal.out("Q");this.pdf.setPage(q),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(O){var q,G,U,K;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))q=0,G=0,U=0,K=0;else{var ae=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(ae!==null)q=parseInt(ae[1]),G=parseInt(ae[2]),U=parseInt(ae[3]),K=1;else if((ae=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)q=parseInt(ae[1]),G=parseInt(ae[2]),U=parseInt(ae[3]),K=parseFloat(ae[4]);else{if(K=1,typeof O=="string"&&O.charAt(0)!=="#"){var me=new eB(O);O=me.ok?me.toHex():"#000000"}O.length===4?(q=O.substring(1,2),q+=q,G=O.substring(2,3),G+=G,U=O.substring(3,4),U+=U):(q=O.substring(1,3),G=O.substring(3,5),U=O.substring(5,7)),q=parseInt(q,16),G=parseInt(G,16),U=parseInt(U,16)}}return{r:q,g:G,b:U,a:K,style:O}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},b=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};f.prototype.fillText=function(O,q,G,U){if(isNaN(q)||isNaN(G)||typeof O!="string")throw es.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!m.call(this)){var K=re(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;_.call(this,{text:O,x:q,y:G,scale:ae,angle:K,align:this.textAlign,maxWidth:U})}},f.prototype.strokeText=function(O,q,G,U){if(isNaN(q)||isNaN(G)||typeof O!="string")throw es.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!b.call(this)){U=isNaN(U)?void 0:U;var K=re(this.ctx.transform.rotation),ae=this.ctx.transform.scaleX;_.call(this,{text:O,x:q,y:G,scale:ae,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:U})}},f.prototype.measureText=function(O){if(typeof O!="string")throw es.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,G=this.pdf.internal.scaleFactor,U=q.internal.getFontSize(),K=q.getStringUnitWidth(O)*U/q.internal.scaleFactor,ae=function(me){var se=(me=me||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return se}}),this};return new ae({width:K*=Math.round(96*G/72*1e4)/1e4})},f.prototype.scale=function(O,q){if(isNaN(O)||isNaN(q))throw es.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var G=new c(O,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.rotate=function(O){if(isNaN(O))throw es.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},f.prototype.translate=function(O,q){if(isNaN(O)||isNaN(q))throw es.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var G=new c(1,0,0,1,O,q);this.ctx.transform=this.ctx.transform.multiply(G)},f.prototype.transform=function(O,q,G,U,K,ae){if(isNaN(O)||isNaN(q)||isNaN(G)||isNaN(U)||isNaN(K)||isNaN(ae))throw es.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var me=new c(O,q,G,U,K,ae);this.ctx.transform=this.ctx.transform.multiply(me)},f.prototype.setTransform=function(O,q,G,U,K,ae){O=isNaN(O)?1:O,q=isNaN(q)?0:q,G=isNaN(G)?0:G,U=isNaN(U)?1:U,K=isNaN(K)?0:K,ae=isNaN(ae)?0:ae,this.ctx.transform=new c(O,q,G,U,K,ae)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(O,q,G,U,K,ae,me,se,le){var Me=this.pdf.getImageProperties(O),ue=1,Ue=1,Ae=1,ie=1;U!==void 0&&se!==void 0&&(Ae=se/U,ie=le/K,ue=Me.width/U*se/U,Ue=Me.height/K*le/K),ae===void 0&&(ae=q,me=G,q=0,G=0),U!==void 0&&se===void 0&&(se=U,le=K),U===void 0&&se===void 0&&(se=Me.width,le=Me.height);for(var Z,Ee=this.ctx.transform.decompose(),we=re(Ee.rotate.shx),Oe=new c,de=(Oe=(Oe=(Oe=Oe.multiply(Ee.translate)).multiply(Ee.skew)).multiply(Ee.scale)).applyToRectangle(new l(ae-q*Ae,me-G*ie,U*ue,K*Ue)),ce=g.call(this,de),Ce=[],Xe=0;Xe<ce.length;Xe+=1)Ce.indexOf(ce[Xe])===-1&&Ce.push(ce[Xe]);if(j(Ce),this.autoPaging)for(var xe=Ce[0],fe=Ce[Ce.length-1],Se=xe;Se<fe+1;Se++){this.pdf.setPage(Se);var qe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],je=Se===1?this.posY+this.margin[0]:this.margin[0],Le=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Re=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Je=Se===1?0:Le+(Se-2)*Re;if(this.ctx.clip_path.length!==0){var ut=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(Z,this.posX+this.margin[3],-Je+je+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=ut}var vt=JSON.parse(JSON.stringify(de));vt=y([vt],this.posX+this.margin[3],-Je+je+this.ctx.prevPageLastElemOffset)[0];var At=(Se>xe||Se<fe)&&v.call(this);At&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qe,Re,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,we),At&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",de.x,de.y,de.w,de.h,null,null,we)};var g=function(O,q,G){var U=[];q=q||this.pdf.internal.pageSize.width,G=G||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":U.push(Math.floor((O.y+K)/G)+1);break;case"arc":U.push(Math.floor((O.y+K-O.radius)/G)+1),U.push(Math.floor((O.y+K+O.radius)/G)+1);break;case"qct":var ae=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);U.push(Math.floor((ae.y+K)/G)+1),U.push(Math.floor((ae.y+ae.h+K)/G)+1);break;case"bct":var me=te(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);U.push(Math.floor((me.y+K)/G)+1),U.push(Math.floor((me.y+me.h+K)/G)+1);break;case"rect":U.push(Math.floor((O.y+K)/G)+1),U.push(Math.floor((O.y+O.h+K)/G)+1)}for(var se=0;se<U.length;se+=1)for(;this.pdf.internal.getNumberOfPages()<U[se];)w.call(this);return U},w=function(){var O=this.fillStyle,q=this.strokeStyle,G=this.font,U=this.lineCap,K=this.lineWidth,ae=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=q,this.font=G,this.lineCap=U,this.lineWidth=K,this.lineJoin=ae},y=function(O,q,G){for(var U=0;U<O.length;U++)switch(O[U].type){case"bct":O[U].x2+=q,O[U].y2+=G;case"qct":O[U].x1+=q,O[U].y1+=G;default:O[U].x+=q,O[U].y+=G}return O},j=function(O){return O.sort((function(q,G){return q-G}))},N=function(O,q){for(var G,U,K=this.fillStyle,ae=this.strokeStyle,me=this.lineCap,se=this.lineWidth,le=Math.abs(se*this.ctx.transform.scaleX),Me=this.lineJoin,ue=JSON.parse(JSON.stringify(this.path)),Ue=JSON.parse(JSON.stringify(this.path)),Ae=[],ie=0;ie<Ue.length;ie++)if(Ue[ie].x!==void 0)for(var Z=g.call(this,Ue[ie]),Ee=0;Ee<Z.length;Ee+=1)Ae.indexOf(Z[Ee])===-1&&Ae.push(Z[Ee]);for(var we=0;we<Ae.length;we++)for(;this.pdf.internal.getNumberOfPages()<Ae[we];)w.call(this);if(j(Ae),this.autoPaging)for(var Oe=Ae[0],de=Ae[Ae.length-1],ce=Oe;ce<de+1;ce++){this.pdf.setPage(ce),this.fillStyle=K,this.strokeStyle=ae,this.lineCap=me,this.lineWidth=le,this.lineJoin=Me;var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Xe=ce===1?this.posY+this.margin[0]:this.margin[0],xe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],fe=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Se=ce===1?0:xe+(ce-2)*fe;if(this.ctx.clip_path.length!==0){var qe=this.path;G=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(G,this.posX+this.margin[3],-Se+Xe+this.ctx.prevPageLastElemOffset),S.call(this,O,!0),this.path=qe}if(U=JSON.parse(JSON.stringify(ue)),this.path=y(U,this.posX+this.margin[3],-Se+Xe+this.ctx.prevPageLastElemOffset),q===!1||ce===0){var je=(ce>Oe||ce<de)&&v.call(this);je&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,fe,null).clip().discardPath()),S.call(this,O,q),je&&this.pdf.restoreGraphicsState()}this.lineWidth=se}else this.lineWidth=le,S.call(this,O,q),this.lineWidth=se;this.path=ue},S=function(O,q){if((O!=="stroke"||q||!b.call(this))&&(O==="stroke"||q||!m.call(this))){for(var G,U,K=[],ae=this.path,me=0;me<ae.length;me++){var se=ae[me];switch(se.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:se,deltas:[],abs:[]});break;case"lt":var le=K.length;if(ae[me-1]&&!isNaN(ae[me-1].x)&&(G=[se.x-ae[me-1].x,se.y-ae[me-1].y],le>0)){for(;le>=0;le--)if(K[le-1].close!==!0&&K[le-1].begin!==!0){K[le-1].deltas.push(G),K[le-1].abs.push(se);break}}break;case"bct":G=[se.x1-ae[me-1].x,se.y1-ae[me-1].y,se.x2-ae[me-1].x,se.y2-ae[me-1].y,se.x-ae[me-1].x,se.y-ae[me-1].y],K[K.length-1].deltas.push(G);break;case"qct":var Me=ae[me-1].x+2/3*(se.x1-ae[me-1].x),ue=ae[me-1].y+2/3*(se.y1-ae[me-1].y),Ue=se.x+2/3*(se.x1-se.x),Ae=se.y+2/3*(se.y1-se.y),ie=se.x,Z=se.y;G=[Me-ae[me-1].x,ue-ae[me-1].y,Ue-ae[me-1].x,Ae-ae[me-1].y,ie-ae[me-1].x,Z-ae[me-1].y],K[K.length-1].deltas.push(G);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push(se)}}U=q?null:O==="stroke"?"stroke":"fill";for(var Ee=!1,we=0;we<K.length;we++)if(K[we].arc)for(var Oe=K[we].abs,de=0;de<Oe.length;de++){var ce=Oe[de];ce.type==="arc"?P.call(this,ce.x,ce.y,ce.radius,ce.startAngle,ce.endAngle,ce.counterclockwise,void 0,q,!Ee):R.call(this,ce.x,ce.y),Ee=!0}else if(K[we].close===!0)this.pdf.internal.out("h"),Ee=!1;else if(K[we].begin!==!0){var Ce=K[we].start.x,Xe=K[we].start.y;z.call(this,K[we].deltas,Ce,Xe),Ee=!0}U&&I.call(this,U),q&&B.call(this)}},E=function(O){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,G=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-G;case"top":return O+q-G;case"hanging":return O+q-2*G;case"middle":return O+q/2-G;case"ideographic":return O;default:return O}},A=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(q,G){this.colorStops.push([q,G])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(O,q,G,U,K,ae,me,se,le){for(var Me=Y.call(this,G,U,K,ae),ue=0;ue<Me.length;ue++){var Ue=Me[ue];ue===0&&(le?T.call(this,Ue.x1+O,Ue.y1+q):R.call(this,Ue.x1+O,Ue.y1+q)),H.call(this,O,q,Ue.x2,Ue.y2,Ue.x3,Ue.y3,Ue.x4,Ue.y4)}se?B.call(this):I.call(this,me)},I=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(O,q){this.pdf.internal.out(r(O)+" "+a(q)+" m")},_=function(O){var q;switch(O.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var G=this.pdf.getTextDimensions(O.text),U=E.call(this,O.y),K=A.call(this,U)-G.h,ae=this.ctx.transform.applyToPoint(new o(O.x,U)),me=this.ctx.transform.decompose(),se=new c;se=(se=(se=se.multiply(me.translate)).multiply(me.skew)).multiply(me.scale);for(var le,Me,ue,Ue=this.ctx.transform.applyToRectangle(new l(O.x,U,G.w,G.h)),Ae=se.applyToRectangle(new l(O.x,K,G.w,G.h)),ie=g.call(this,Ae),Z=[],Ee=0;Ee<ie.length;Ee+=1)Z.indexOf(ie[Ee])===-1&&Z.push(ie[Ee]);if(j(Z),this.autoPaging)for(var we=Z[0],Oe=Z[Z.length-1],de=we;de<Oe+1;de++){this.pdf.setPage(de);var ce=de===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Xe=this.pdf.internal.pageSize.height-this.margin[2],xe=Xe-this.margin[0],fe=this.pdf.internal.pageSize.width-this.margin[1],Se=fe-this.margin[3],qe=de===1?0:Ce+(de-2)*xe;if(this.ctx.clip_path.length!==0){var je=this.path;le=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=y(le,this.posX+this.margin[3],-1*qe+ce),S.call(this,"fill",!0),this.path=je}var Le=y([JSON.parse(JSON.stringify(Ae))],this.posX+this.margin[3],-qe+ce+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*O.scale),ue=this.lineWidth,this.lineWidth=ue*O.scale);var Re=this.autoPaging!=="text";if(Re||Le.y+Le.h<=Xe){if(Re||Le.y>=ce&&Le.x<=fe){var Je=Re?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||fe-Le.x)[0],ut=y([JSON.parse(JSON.stringify(Ue))],this.posX+this.margin[3],-qe+ce+this.ctx.prevPageLastElemOffset)[0],vt=Re&&(de>we||de<Oe)&&v.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Se,xe,null).clip().discardPath()),this.pdf.text(Je,ut.x,ut.y,{angle:O.angle,align:q,renderingMode:O.renderingMode}),vt&&this.pdf.restoreGraphicsState()}}else Le.y<Xe&&(this.ctx.prevPageLastElemOffset+=Xe-Le.y);O.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=ue)}else O.scale>=.01&&(Me=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Me*O.scale),ue=this.lineWidth,this.lineWidth=ue*O.scale),this.pdf.text(O.text,ae.x+this.posX,ae.y+this.posY,{angle:O.angle,align:q,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Me),this.lineWidth=ue)},R=function(O,q,G,U){G=G||0,U=U||0,this.pdf.internal.out(r(O+G)+" "+a(q+U)+" l")},z=function(O,q,G){return this.pdf.lines(O,q,G,null,null)},H=function(O,q,G,U,K,ae,me,se){this.pdf.internal.out([t(s(G+O)),t(i(U+q)),t(s(K+O)),t(i(ae+q)),t(s(me+O)),t(i(se+q)),"c"].join(" "))},Y=function(O,q,G,U){for(var K=2*Math.PI,ae=Math.PI/2;q>G;)q-=K;var me=Math.abs(G-q);me<K&&U&&(me=K-me);for(var se=[],le=U?-1:1,Me=q;me>1e-5;){var ue=Me+le*Math.min(me,ae);se.push(J.call(this,O,Me,ue)),me-=Math.abs(ue-Me),Me=ue}return se},J=function(O,q,G){var U=(G-q)/2,K=O*Math.cos(U),ae=O*Math.sin(U),me=K,se=-ae,le=me*me+se*se,Me=le+me*K+se*ae,ue=4/3*(Math.sqrt(2*le*Me)-Me)/(me*ae-se*K),Ue=me-ue*se,Ae=se+ue*me,ie=Ue,Z=-Ae,Ee=U+q,we=Math.cos(Ee),Oe=Math.sin(Ee);return{x1:O*Math.cos(q),y1:O*Math.sin(q),x2:Ue*we-Ae*Oe,y2:Ue*Oe+Ae*we,x3:ie*we-Z*Oe,y3:ie*Oe+Z*we,x4:O*Math.cos(G),y4:O*Math.sin(G)}},re=function(O){return 180*O/Math.PI},X=function(O,q,G,U,K,ae){var me=O+.5*(G-O),se=q+.5*(U-q),le=K+.5*(G-K),Me=ae+.5*(U-ae),ue=Math.min(O,K,me,le),Ue=Math.max(O,K,me,le),Ae=Math.min(q,ae,se,Me),ie=Math.max(q,ae,se,Me);return new l(ue,Ae,Ue-ue,ie-Ae)},te=function(O,q,G,U,K,ae,me,se){var le,Me,ue,Ue,Ae,ie,Z,Ee,we,Oe,de,ce,Ce,Xe,xe=G-O,fe=U-q,Se=K-G,qe=ae-U,je=me-K,Le=se-ae;for(Me=0;Me<41;Me++)we=(Z=(ue=O+(le=Me/40)*xe)+le*((Ae=G+le*Se)-ue))+le*(Ae+le*(K+le*je-Ae)-Z),Oe=(Ee=(Ue=q+le*fe)+le*((ie=U+le*qe)-Ue))+le*(ie+le*(ae+le*Le-ie)-Ee),Me==0?(de=we,ce=Oe,Ce=we,Xe=Oe):(de=Math.min(de,we),ce=Math.min(ce,Oe),Ce=Math.max(Ce,we),Xe=Math.max(Xe,Oe));return new l(Math.round(de),Math.round(ce),Math.round(Ce-de),Math.round(Xe-ce))},W=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,q,G=(O=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:q}));this.prevLineDash!==G&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=G)}}})(pn.API),(function(e){var t=function(i){var o,l,c,d,u,f,p,m,b,v;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(u=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(f=(u=((u=((u=((u=(u-(v=u%85))/85)-(b=u%85))/85)-(m=u%85))/85)-(p=u%85))/85)%85,l.push(f+33,p+33,m+33,b+33,v+33)):l.push(122);return(function(g,w){for(var y=w;y>0;y--)g.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,u,f=String,p="length",m=255,b="charCodeAt",v="slice",g="replace";for(i[v](-2),i=i[v](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],d=0,u=(i+=o="uuuuu"[v](i[p]%5||5))[p];u>d;d+=5)l=52200625*(i[b](d)-33)+614125*(i[b](d+1)-33)+7225*(i[b](d+2)-33)+85*(i[b](d+3)-33)+(i[b](d+4)-33),c.push(m&l>>24,m&l>>16,m&l>>8,m&l);return(function(w,y){for(var j=y;j>0;j--)w.pop()})(c,o[p]),f.fromCharCode.apply(f,c)},a=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=Hk(o)).reduce((function(c,d){return c+String.fromCharCode(d)}),"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=a(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map((function(u){return("0"+u.charCodeAt().toString(16)).slice(-2)})).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}})(pn.API),(function(e){e.loadFile=function(t,r,a){return(function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,d,u){var f=new XMLHttpRequest,p=0,m=function(b){var v=b.length,g=[],w=String.fromCharCode;for(p=0;p<v;p+=1)g.push(w(255&b.charCodeAt(p)));return g.join("")};if(f.open("GET",c,!d),f.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(f.onload=function(){f.status===200?u(m(this.responseText)):u(void 0)}),f.send(null),d&&f.status===200)return m(f.responseText)})(s,i,o)}catch{}return l})(t,r,a)},e.loadImageFile=e.loadFile})(pn.API),(function(e){function t(){return(xn.html2canvas?Promise.resolve(xn.html2canvas):s1(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))})).then((function(o){return o.default?o.default:o}))}function r(){return(xn.DOMPurify?Promise.resolve(xn.DOMPurify):s1(()=>import("./purify.es-BpVZ_uCt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load dompurify: "+o))})).then((function(o){return o.default?o.default:o}))}var a=function(o){var l=Da(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then((function(){switch(l=l||(function(c){switch(a(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o)){case"string":return this.then(r).then((function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})}));case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=(function c(d,u){for(var f=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)u!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||f.appendChild(c(p,u));return d.nodeType===1&&(d.nodeName==="CANVAS"?(f.width=d.width,f.height=d.height,f.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(f.value=d.value),f.addEventListener("load",(function(){f.scrollTop=d.scrollTop,f.scrollLeft=d.scrollLeft}),!0)),f})(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)})).then((function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,u=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,f=Object.assign({async:!0,allowTaint:!0,scale:u,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete f.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var p=0;p<d.length;++p){var m=d[p],b=m.src.find((function(v){return v.format==="truetype"}));b&&c.addFont(b.url,m.ref.name,m.ref.style)}return f.windowHeight=f.windowHeight||0,f.windowHeight=f.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):f.windowHeight,c.context2d.save(!0),l(this.prop.container,f)})).then((function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(o,l)}))},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}}))},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(o){if(a(o)!=="object")return this;var l=Object.keys(o||{}).map((function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}}),this);return this.then((function(){return this.thenList(l)}))},i.prototype.get=function(o,l){return this.then((function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c}))},i.prototype.setMargin=function(o){return this.then((function(){switch(a(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o})).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then((function(){(o=o||pn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o}))},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,(function(d,u){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,(function(f){return c.updateProgress(null,d),f})).then(d,u).then((function(f){return c.updateProgress(1),f}))}))},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),u=c.call(d,o,l);return i.convert(u,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach((function(c){l=l.thenCore(c)})),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then((function(){throw new Error(o)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,pn.getPageSize=function(o,l,c){if(Da(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var u,f=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":u=1;break;case"mm":u=72/25.4;break;case"cm":u=72/2.54;break;case"in":u=72;break;case"px":u=.75;break;case"pc":case"em":u=12;break;case"ex":u=6;break;default:throw"Invalid unit: "+l}var m,b=0,v=0;if(p.hasOwnProperty(f))b=p[f][1]/u,v=p[f][0]/u;else try{b=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",v>b&&(m=v,v=b,b=m);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",b>v&&(m=v,v=b,b=m)}return{width:v,height:b,unit:l,k:u,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(Yk):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}})(pn.API),pn.API.addJS=function(e){return p8=e,this.internal.events.subscribe("postPutResources",(function(){zv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),m8=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+p8+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){zv!==void 0&&m8!==void 0&&this.internal.out("/Names <</JavaScript "+zv+" 0 R>>")})),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,a=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=a.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,u=[];for(i=0;i<d;i++){var f=r.internal.newObject();u.push(f);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<u.length;i++)r.internal.write("(page_"+(i+1)+")"+u[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(a,s,i){var o={title:s,options:i,children:[]};return a==null&&(a=this.root),a.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(a){a.id=r.internal.newObjectDeferred();for(var s=0;s<a.children.length;s++)this.genIds_r(a.children[s])},r.outline.renderRoot=function(a){this.objStart(a),this.line("/Type /Outlines"),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1]))),this.line("/Count "+this.count_r({count:0},a)),this.objEnd()},r.outline.renderItems=function(a){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<a.children.length;i++){var o=a.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(a)),i>0&&this.line("/Prev "+this.makeRef(a.children[i-1])),i<a.children.length-1&&this.line("/Next "+this.makeRef(a.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<a.children.length;d++)this.renderItems(a.children[d])},r.outline.line=function(a){this.ctx.val+=a+`\r
`},r.outline.makeRef=function(a){return a.id+" 0 R"},r.outline.makeString=function(a){return"("+r.internal.pdfEscape(a)+")"},r.outline.objStart=function(a){this.ctx.val+=`\r
`+a.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(a,s){for(var i=0;i<s.children.length;i++)a.count++,this.count_r(a,s.children[i]);return a.count}}])})(pn.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,a,s,i,o,l){var c,d=this.decode.DCT_DECODE,u=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=(function(f){for(var p,m=256*f.charCodeAt(4)+f.charCodeAt(5),b=f.length,v={width:0,height:0,numcomponents:1},g=4;g<b;g+=2){if(g+=m,t.indexOf(f.charCodeAt(g+1))!==-1){p=256*f.charCodeAt(g+5)+f.charCodeAt(g+6),v={width:256*f.charCodeAt(g+7)+f.charCodeAt(g+8),height:p,numcomponents:f.charCodeAt(g+9)};break}m=256*f.charCodeAt(g+2)+f.charCodeAt(g+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}u={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:a,alias:s}}return u}})(pn.API);var dm,Hv,x8,g8,v8,ibe=(function(){var e,t,r;function a(i){var o,l,c,d,u,f,p,m,b,v,g,w,y,j;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},f=null;;){switch(o=this.readUInt32(),b=(function(){var N,S;for(S=[],N=0;N<4;++N)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":f&&this.animation.frames.push(f),this.pos+=4,f={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},u=this.readUInt16(),d=this.readUInt16()||100,f.delay=1e3*u/d,f.disposeOp=this.data[this.pos++],f.blendOp=this.data[this.pos++],f.data=[];break;case"IDAT":case"fdAT":for(b==="fdAT"&&(this.pos+=4,o-=4),i=f?.data||this.imgData,w=0;0<=o?w<o:w>o;0<=o?++w:--w)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(y=0;0<=v?y<v:y>v;0<=v?++y:--y)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":p=(g=this.read(o)).indexOf(0),m=String.fromCharCode.apply(String,g.slice(0,p)),this.text[m]=String.fromCharCode.apply(String,g.slice(p+1));break;case"IEND":return f&&this.animation.frames.push(f),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}a.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},a.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},a.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function u(f,p,m,b){var v,g,w,y,j,N,S,E,A,P,I,B,T,_,R,z,H,Y,J,re,X,te=Math.ceil((d.width-f)/m),W=Math.ceil((d.height-p)/b),O=d.width==te&&d.height==W;for(_=o*te,B=O?l:new Uint8Array(_*W),N=i.length,T=0,g=0;T<W&&c<N;){switch(i[c++]){case 0:for(y=H=0;H<_;y=H+=1)B[g++]=i[c++];break;case 1:for(y=Y=0;Y<_;y=Y+=1)v=i[c++],j=y<o?0:B[g-o],B[g++]=(v+j)%256;break;case 2:for(y=J=0;J<_;y=J+=1)v=i[c++],w=(y-y%o)/o,R=T&&B[(T-1)*_+w*o+y%o],B[g++]=(R+v)%256;break;case 3:for(y=re=0;re<_;y=re+=1)v=i[c++],w=(y-y%o)/o,j=y<o?0:B[g-o],R=T&&B[(T-1)*_+w*o+y%o],B[g++]=(v+Math.floor((j+R)/2))%256;break;case 4:for(y=X=0;X<_;y=X+=1)v=i[c++],w=(y-y%o)/o,j=y<o?0:B[g-o],T===0?R=z=0:(R=B[(T-1)*_+w*o+y%o],z=w&&B[(T-1)*_+(w-1)*o+y%o]),S=j+R-z,E=Math.abs(S-j),P=Math.abs(S-R),I=Math.abs(S-z),A=E<=P&&E<=I?j:P<=I?R:z,B[g++]=(v+A)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!O){var q=((p+T*b)*d.width+f)*o,G=T*_;for(y=0;y<te;y+=1){for(var U=0;U<o;U+=1)l[q++]=B[G++];q+=(m-1)*o}}T++}}return i=R1e(i),d.interlaceMethod==1?(u(0,0,8,8),u(4,0,8,8),u(0,4,4,8),u(2,0,4,4),u(0,2,2,4),u(1,0,2,2),u(0,1,1,2)):u(0,0,1,1),l},a.prototype.decodePalette=function(){var i,o,l,c,d,u,f,p,m;for(l=this.palette,u=this.transparency.indexed||[],d=new Uint8Array((u.length||0)+l.length),c=0,i=0,o=f=0,p=l.length;f<p;o=f+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(m=u[i++])!=null?m:255;return d},a.prototype.copyToImageData=function(i,o){var l,c,d,u,f,p,m,b,v,g,w;if(c=this.colors,v=null,l=this.hasAlphaChannel,this.palette.length&&(v=(w=this._decodedPalette)!=null?w:this._decodedPalette=this.decodePalette(),c=4,l=!0),b=(d=i.data||i).length,f=v||o,u=p=0,c===1)for(;u<b;)m=v?4*o[u/4]:p,g=f[m++],d[u++]=g,d[u++]=g,d[u++]=g,d[u++]=l?f[m++]:255,p=m;else for(;u<b;)m=v?4*o[u/4]:p,d[u++]=f[m++],d[u++]=f[m++],d[u++]=f[m++],d[u++]=l?f[m++]:255,p=m},a.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(xn)==="[object Window]"){try{t=xn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},a.prototype.decodeFrames=function(i){var o,l,c,d,u,f,p,m;if(this.animation){for(m=[],l=u=0,f=(p=this.animation.frames).length;u<f;l=++u)o=p[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,m.push(o.image=e(c));return m}},a.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},a.prototype.animate=function(i){var o,l,c,d,u,f,p=this;return l=0,f=this.animation,d=f.numFrames,c=f.frames,u=f.numPlays,(o=function(){var m,b;if(m=l++%d,b=c[m],p.renderFrame(i,m),d>1&&l/d<u)return p.animation._timeout=setTimeout(o,b.delay)})()},a.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},a.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},a})();function obe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,a=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,u=[],f=0,p=null,m=0,b=null;for(this.width=r,this.height=a;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,b=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];f=e[t++]|e[t++]<<8,p=e[t++],(1&v)==0&&(p=null),m=v>>2&7,t++;break;case 254:for(;;){if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,y=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,N=e[t++],S=N>>6&1,E=1<<(7&N)+1,A=l,P=c,I=!1;N>>7&&(I=!0,A=t,P=E,t+=3*E);var B=t;for(t++;;){var T;if(!((T=e[t++])>=0))throw Error("Invalid block size");if(T===0)break;t+=T}u.push({x:g,y:w,width:y,height:j,has_local_palette:I,palette_offset:A,palette_size:P,data_offset:B,data_length:t-B,transparent_index:p,interlaced:!!S,delay:f,disposal:m});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return b},this.frameInfo=function(_){if(_<0||_>=u.length)throw new Error("Frame index out of range.");return u[_]},this.decodeAndBlitFrameBGRA=function(_,R){var z=this.frameInfo(_),H=z.width*z.height,Y=new Uint8Array(H);b8(e,z.data_offset,Y,H);var J=z.palette_offset,re=z.transparent_index;re===null&&(re=256);var X=z.width,te=r-X,W=X,O=4*(z.y*r+z.x),q=4*((z.y+z.height)*r+z.x),G=O,U=4*te;z.interlaced===!0&&(U+=4*r*7);for(var K=8,ae=0,me=Y.length;ae<me;++ae){var se=Y[ae];if(W===0&&(W=X,(G+=U)>=q&&(U=4*te+4*r*(K-1),G=O+(X+te)*(K<<1),K>>=1)),se===re)G+=4;else{var le=e[J+3*se],Me=e[J+3*se+1],ue=e[J+3*se+2];R[G++]=ue,R[G++]=Me,R[G++]=le,R[G++]=255}--W}},this.decodeAndBlitFrameRGBA=function(_,R){var z=this.frameInfo(_),H=z.width*z.height,Y=new Uint8Array(H);b8(e,z.data_offset,Y,H);var J=z.palette_offset,re=z.transparent_index;re===null&&(re=256);var X=z.width,te=r-X,W=X,O=4*(z.y*r+z.x),q=4*((z.y+z.height)*r+z.x),G=O,U=4*te;z.interlaced===!0&&(U+=4*r*7);for(var K=8,ae=0,me=Y.length;ae<me;++ae){var se=Y[ae];if(W===0&&(W=X,(G+=U)>=q&&(U=4*te+4*r*(K-1),G=O+(X+te)*(K<<1),K>>=1)),se===re)G+=4;else{var le=e[J+3*se],Me=e[J+3*se+1],ue=e[J+3*se+2];R[G++]=le,R[G++]=Me,R[G++]=ue,R[G++]=255}--W}}}function b8(e,t,r,a){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,u=0,f=0,p=0,m=e[t++],b=new Int32Array(4096),v=null;;){for(;u<16&&m!==0;)f|=e[t++]<<u,u+=8,m===1?m=e[t++]:--m;if(u<c)break;var g=f&d;if(f>>=c,u-=c,g!==i){if(g===o)break;for(var w=g<l?g:v,y=0,j=w;j>i;)j=b[j]>>8,++y;var N=j;if(p+y+(w!==g?1:0)>a)return void es.log("Warning, gif stream longer than expected.");r[p++]=N;var S=p+=y;for(w!==g&&(r[p++]=N),j=w;y--;)j=b[j],r[--S]=255&j,j>>=8;v!==null&&l<4096&&(b[l++]=v<<8|N,l>=d+1&&c<12&&(++c,d=d<<1|1)),v=g}else l=o+1,d=(1<<(c=s+1))-1,v=null}return p!==a&&es.log("Warning, gif stream shorter than expected."),r}function zj(e){var t,r,a,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),u=new Array(64),f=new Array(65535),p=new Array(65535),m=new Array(64),b=new Array(64),v=[],g=0,w=7,y=new Array(64),j=new Array(64),N=new Array(64),S=new Array(256),E=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],T=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],R=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],H=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(O,q){for(var G=0,U=0,K=new Array,ae=1;ae<=16;ae++){for(var me=1;me<=O[ae];me++)K[q[U]]=[],K[q[U]][0]=G,K[q[U]][1]=ae,U++,G++;G*=2}return K}function J(O){for(var q=O[0],G=O[1]-1;G>=0;)q&1<<G&&(g|=1<<w),G--,--w<0&&(g==255?(re(255),re(0)):re(g),w=7,g=0)}function re(O){v.push(O)}function X(O){re(O>>8&255),re(255&O)}function te(O,q,G,U,K){for(var ae,me=K[0],se=K[240],le=(function(Oe,de){var ce,Ce,Xe,xe,fe,Se,qe,je,Le,Re,Je=0;for(Le=0;Le<8;++Le){ce=Oe[Je],Ce=Oe[Je+1],Xe=Oe[Je+2],xe=Oe[Je+3],fe=Oe[Je+4],Se=Oe[Je+5],qe=Oe[Je+6];var ut=ce+(je=Oe[Je+7]),vt=ce-je,At=Ce+qe,Bt=Ce-qe,Yt=Xe+Se,We=Xe-Se,Ct=xe+fe,br=xe-fe,Jt=ut+Ct,Dr=ut-Ct,Hr=At+Yt,tt=At-Yt;Oe[Je]=Jt+Hr,Oe[Je+4]=Jt-Hr;var Dt=.707106781*(tt+Dr);Oe[Je+2]=Dr+Dt,Oe[Je+6]=Dr-Dt;var mr=.382683433*((Jt=br+We)-(tt=Bt+vt)),Sr=.5411961*Jt+mr,Jr=1.306562965*tt+mr,_r=.707106781*(Hr=We+Bt),Wr=vt+_r,sr=vt-_r;Oe[Je+5]=sr+Sr,Oe[Je+3]=sr-Sr,Oe[Je+1]=Wr+Jr,Oe[Je+7]=Wr-Jr,Je+=8}for(Je=0,Le=0;Le<8;++Le){ce=Oe[Je],Ce=Oe[Je+8],Xe=Oe[Je+16],xe=Oe[Je+24],fe=Oe[Je+32],Se=Oe[Je+40],qe=Oe[Je+48];var en=ce+(je=Oe[Je+56]),Gr=ce-je,vn=Ce+qe,kr=Ce-qe,Fr=Xe+Se,ke=Xe-Se,ze=xe+fe,$e=xe-fe,pe=en+ze,_e=en-ze,Fe=vn+Fr,et=vn-Fr;Oe[Je]=pe+Fe,Oe[Je+32]=pe-Fe;var mt=.707106781*(et+_e);Oe[Je+16]=_e+mt,Oe[Je+48]=_e-mt;var lt=.382683433*((pe=$e+ke)-(et=kr+Gr)),xt=.5411961*pe+lt,ge=1.306562965*et+lt,ve=.707106781*(Fe=ke+kr),Ke=Gr+ve,ct=Gr-ve;Oe[Je+40]=ct+xt,Oe[Je+24]=ct-xt,Oe[Je+8]=Ke+ge,Oe[Je+56]=Ke-ge,Je++}for(Le=0;Le<64;++Le)Re=Oe[Le]*de[Le],m[Le]=Re>0?Re+.5|0:Re-.5|0;return m})(O,q),Me=0;Me<64;++Me)b[A[Me]]=le[Me];var ue=b[0]-G;G=b[0],ue==0?J(U[0]):(J(U[p[ae=32767+ue]]),J(f[ae]));for(var Ue=63;Ue>0&&b[Ue]==0;)Ue--;if(Ue==0)return J(me),G;for(var Ae,ie=1;ie<=Ue;){for(var Z=ie;b[ie]==0&&ie<=Ue;)++ie;var Ee=ie-Z;if(Ee>=16){Ae=Ee>>4;for(var we=1;we<=Ae;++we)J(se);Ee&=15}ae=32767+b[ie],J(K[(Ee<<4)+p[ae]]),J(f[ae]),ie++}return Ue!=63&&J(me),G}function W(O){O=Math.min(Math.max(O,1),100),i!=O&&((function(q){for(var G=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var K=o((G[U]*q+50)/100);K=Math.min(Math.max(K,1),255),l[A[U]]=K}for(var ae=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],me=0;me<64;me++){var se=o((ae[me]*q+50)/100);se=Math.min(Math.max(se,1),255),c[A[me]]=se}for(var le=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Me=0,ue=0;ue<8;ue++)for(var Ue=0;Ue<8;Ue++)d[Me]=1/(l[A[Me]]*le[ue]*le[Ue]*8),u[Me]=1/(c[A[Me]]*le[ue]*le[Ue]*8),Me++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),i=O)}this.encode=function(O,q){q&&W(q),v=new Array,g=0,w=7,X(65496),X(65504),X(16),re(74),re(70),re(73),re(70),re(0),re(1),re(1),re(0),X(1),X(1),re(0),re(0),(function(){X(65499),X(132),re(0);for(var Ce=0;Ce<64;Ce++)re(l[Ce]);re(1);for(var Xe=0;Xe<64;Xe++)re(c[Xe])})(),(function(Ce,Xe){X(65472),X(17),re(8),X(Xe),X(Ce),re(3),re(1),re(17),re(0),re(2),re(17),re(1),re(3),re(17),re(1)})(O.width,O.height),(function(){X(65476),X(418),re(0);for(var Ce=0;Ce<16;Ce++)re(P[Ce+1]);for(var Xe=0;Xe<=11;Xe++)re(I[Xe]);re(16);for(var xe=0;xe<16;xe++)re(B[xe+1]);for(var fe=0;fe<=161;fe++)re(T[fe]);re(1);for(var Se=0;Se<16;Se++)re(_[Se+1]);for(var qe=0;qe<=11;qe++)re(R[qe]);re(17);for(var je=0;je<16;je++)re(z[je+1]);for(var Le=0;Le<=161;Le++)re(H[Le])})(),X(65498),X(12),re(3),re(1),re(0),re(2),re(17),re(3),re(17),re(0),re(63),re(0);var G=0,U=0,K=0;g=0,w=7,this.encode.displayName="_encode_";for(var ae,me,se,le,Me,ue,Ue,Ae,ie,Z=O.data,Ee=O.width,we=O.height,Oe=4*Ee,de=0;de<we;){for(ae=0;ae<Oe;){for(Me=Oe*de+ae,Ue=-1,Ae=0,ie=0;ie<64;ie++)ue=Me+(Ae=ie>>3)*Oe+(Ue=4*(7&ie)),de+Ae>=we&&(ue-=Oe*(de+1+Ae-we)),ae+Ue>=Oe&&(ue-=ae+Ue-Oe+4),me=Z[ue++],se=Z[ue++],le=Z[ue++],y[ie]=(E[me]+E[se+256>>0]+E[le+512>>0]>>16)-128,j[ie]=(E[me+768>>0]+E[se+1024>>0]+E[le+1280>>0]>>16)-128,N[ie]=(E[me+1280>>0]+E[se+1536>>0]+E[le+1792>>0]>>16)-128;G=te(y,d,G,t,a),U=te(j,u,U,r,s),K=te(N,u,K,r,s),ae+=32}de+=8}if(w>=0){var ce=[];ce[1]=w+1,ce[0]=(1<<w+1)-1,J(ce)}return X(65497),new Uint8Array(v)},e=e||50,(function(){for(var O=String.fromCharCode,q=0;q<256;q++)S[q]=O(q)})(),t=Y(P,I),r=Y(_,R),a=Y(B,T),s=Y(z,H),(function(){for(var O=1,q=2,G=1;G<=15;G++){for(var U=O;U<q;U++)p[32767+U]=G,f[32767+U]=[],f[32767+U][1]=G,f[32767+U][0]=U;for(var K=-(q-1);K<=-O;K++)p[32767+K]=G,f[32767+K]=[],f[32767+K][1]=G,f[32767+K][0]=q-1+K;O<<=1,q<<=1}})(),(function(){for(var O=0;O<256;O++)E[O]=19595*O,E[O+256>>0]=38470*O,E[O+512>>0]=7471*O+32768,E[O+768>>0]=-11059*O,E[O+1024>>0]=-21709*O,E[O+1280>>0]=32768*O+8421375,E[O+1536>>0]=-27439*O,E[O+1792>>0]=-5329*O})(),W(e)}function qd(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function y8(e){function t(P){if(!P)throw Error("assert :P")}function r(P,I,B){for(var T=0;4>T;T++)if(P[I+T]!=B.charCodeAt(T))return!0;return!1}function a(P,I,B,T,_){for(var R=0;R<_;R++)P[I+R]=B[T+R]}function s(P,I,B,T){for(var _=0;_<T;_++)P[I+_]=B}function i(P){return new Int32Array(P)}function o(P,I){for(var B=[],T=0;T<P;T++)B.push(new I);return B}function l(P,I){var B=[];return(function T(_,R,z){for(var H=z[R],Y=0;Y<H&&(_.push(z.length>R+1?[]:new I),!(z.length<R+1));Y++)T(_[Y],R+1,z)})(B,0,P),B}var c=function(){var P=this;function I(C,M){for(var ee=1<<M-1>>>0;C&ee;)ee>>>=1;return ee?(C&ee-1)+ee:C}function B(C,M,ee,oe,be){t(!(oe%ee));do C[M+(oe-=ee)]=be;while(0<oe)}function T(C,M,ee,oe,be){if(t(2328>=be),512>=be)var Te=i(512);else if((Te=i(be))==null)return 0;return(function(Ie,De,Be,He,nt,wt){var Nt,pt,Ht=De,Tt=1<<Be,ot=i(16),at=i(16);for(t(nt!=0),t(He!=null),t(Ie!=null),t(0<Be),pt=0;pt<nt;++pt){if(15<He[pt])return 0;++ot[He[pt]]}if(ot[0]==nt)return 0;for(at[1]=0,Nt=1;15>Nt;++Nt){if(ot[Nt]>1<<Nt)return 0;at[Nt+1]=at[Nt]+ot[Nt]}for(pt=0;pt<nt;++pt)Nt=He[pt],0<He[pt]&&(wt[at[Nt]++]=pt);if(at[15]==1)return(He=new _).g=0,He.value=wt[0],B(Ie,Ht,1,Tt,He),Tt;var It,Pt=-1,Ut=Tt-1,fr=0,or=1,Qr=1,gr=1<<Be;for(pt=0,Nt=1,nt=2;Nt<=Be;++Nt,nt<<=1){if(or+=Qr<<=1,0>(Qr-=ot[Nt]))return 0;for(;0<ot[Nt];--ot[Nt])(He=new _).g=Nt,He.value=wt[pt++],B(Ie,Ht+fr,nt,gr,He),fr=I(fr,Nt)}for(Nt=Be+1,nt=2;15>=Nt;++Nt,nt<<=1){if(or+=Qr<<=1,0>(Qr-=ot[Nt]))return 0;for(;0<ot[Nt];--ot[Nt]){if(He=new _,(fr&Ut)!=Pt){for(Ht+=gr,It=1<<(Pt=Nt)-Be;15>Pt&&!(0>=(It-=ot[Pt]));)++Pt,It<<=1;Tt+=gr=1<<(It=Pt-Be),Ie[De+(Pt=fr&Ut)].g=It+Be,Ie[De+Pt].value=Ht-De-Pt}He.g=Nt-Be,He.value=wt[pt++],B(Ie,Ht+(fr>>Be),nt,gr,He),fr=I(fr,Nt)}}return or!=2*at[15]-1?0:Tt})(C,M,ee,oe,be,Te)}function _(){this.value=this.g=0}function R(){this.value=this.g=0}function z(){this.G=o(5,_),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ea,R)}function H(C,M,ee,oe){t(C!=null),t(M!=null),t(2147483648>oe),C.Ca=254,C.I=0,C.b=-8,C.Ka=0,C.oa=M,C.pa=ee,C.Jd=M,C.Yc=ee+oe,C.Zc=4<=oe?ee+oe-4+1:ee,ae(C)}function Y(C,M){for(var ee=0;0<M--;)ee|=se(C,128)<<M;return ee}function J(C,M){var ee=Y(C,M);return me(C)?-ee:ee}function re(C,M,ee,oe){var be,Te=0;for(t(C!=null),t(M!=null),t(4294967288>oe),C.Sb=oe,C.Ra=0,C.u=0,C.h=0,4<oe&&(oe=4),be=0;be<oe;++be)Te+=M[ee+be]<<8*be;C.Ra=Te,C.bb=oe,C.oa=M,C.pa=ee}function X(C){for(;8<=C.u&&C.bb<C.Sb;)C.Ra>>>=8,C.Ra+=C.oa[C.pa+C.bb]<<ns-8>>>0,++C.bb,C.u-=8;G(C)&&(C.h=1,C.u=0)}function te(C,M){if(t(0<=M),!C.h&&M<=xl){var ee=q(C)&bo[M];return C.u+=M,X(C),ee}return C.h=1,C.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function q(C){return C.Ra>>>(C.u&ns-1)>>>0}function G(C){return t(C.bb<=C.Sb),C.h||C.bb==C.Sb&&C.u>ns}function U(C,M){C.u=M,C.h=G(C)}function K(C){C.u>=Oc&&(t(C.u>=Oc),X(C))}function ae(C){t(C!=null&&C.oa!=null),C.pa<C.Zc?(C.I=(C.oa[C.pa++]|C.I<<8)>>>0,C.b+=8):(t(C!=null&&C.oa!=null),C.pa<C.Yc?(C.b+=8,C.I=C.oa[C.pa++]|C.I<<8):C.Ka?C.b=0:(C.I<<=8,C.b+=8,C.Ka=1))}function me(C){return Y(C,1)}function se(C,M){var ee=C.Ca;0>C.b&&ae(C);var oe=C.b,be=ee*M>>>8,Te=(C.I>>>oe>be)+0;for(Te?(ee-=be,C.I-=be+1<<oe>>>0):ee=be+1,oe=ee,be=0;256<=oe;)be+=8,oe>>=8;return oe=7^be+hn[oe],C.b-=oe,C.Ca=(ee<<oe)-1,Te}function le(C,M,ee){C[M+0]=ee>>24&255,C[M+1]=ee>>16&255,C[M+2]=ee>>8&255,C[M+3]=ee>>0&255}function Me(C,M){return C[M+0]<<0|C[M+1]<<8}function ue(C,M){return Me(C,M)|C[M+2]<<16}function Ue(C,M){return Me(C,M)|Me(C,M+2)<<16}function Ae(C,M){var ee=1<<M;return t(C!=null),t(0<M),C.X=i(ee),C.X==null?0:(C.Mb=32-M,C.Xa=M,1)}function ie(C,M){t(C!=null),t(M!=null),t(C.Xa==M.Xa),a(M.X,0,C.X,0,1<<M.Xa)}function Z(){this.X=[],this.Xa=this.Mb=0}function Ee(C,M,ee,oe){t(ee!=null),t(oe!=null);var be=ee[0],Te=oe[0];return be==0&&(be=(C*Te+M/2)/M),Te==0&&(Te=(M*be+C/2)/C),0>=be||0>=Te?0:(ee[0]=be,oe[0]=Te,1)}function we(C,M){return C+(1<<M)-1>>>M}function Oe(C,M){return((4278255360&C)+(4278255360&M)>>>0&4278255360)+((16711935&C)+(16711935&M)>>>0&16711935)>>>0}function de(C,M){P[M]=function(ee,oe,be,Te,Ie,De,Be){var He;for(He=0;He<Ie;++He){var nt=P[C](De[Be+He-1],be,Te+He);De[Be+He]=Oe(ee[oe+He],nt)}}}function ce(){this.ud=this.hd=this.jd=0}function Ce(C,M){return((4278124286&(C^M))>>>1)+(C&M)>>>0}function Xe(C){return 0<=C&&256>C?C:0>C?0:255<C?255:void 0}function xe(C,M){return Xe(C+(C-M+.5>>1))}function fe(C,M,ee){return Math.abs(M-ee)-Math.abs(C-ee)}function Se(C,M,ee,oe,be,Te,Ie){for(oe=Te[Ie-1],ee=0;ee<be;++ee)Te[Ie+ee]=oe=Oe(C[M+ee],oe)}function qe(C,M,ee,oe,be){var Te;for(Te=0;Te<ee;++Te){var Ie=C[M+Te],De=Ie>>8&255,Be=16711935&(Be=(Be=16711935&Ie)+((De<<16)+De));oe[be+Te]=(4278255360&Ie)+Be>>>0}}function je(C,M){M.jd=C>>0&255,M.hd=C>>8&255,M.ud=C>>16&255}function Le(C,M,ee,oe,be,Te){var Ie;for(Ie=0;Ie<oe;++Ie){var De=M[ee+Ie],Be=De>>>8,He=De,nt=255&(nt=(nt=De>>>16)+((C.jd<<24>>24)*(Be<<24>>24)>>>5));He=255&(He=(He=He+((C.hd<<24>>24)*(Be<<24>>24)>>>5))+((C.ud<<24>>24)*(nt<<24>>24)>>>5)),be[Te+Ie]=(4278255360&De)+(nt<<16)+He}}function Re(C,M,ee,oe,be){P[M]=function(Te,Ie,De,Be,He,nt,wt,Nt,pt){for(Be=wt;Be<Nt;++Be)for(wt=0;wt<pt;++wt)He[nt++]=be(De[oe(Te[Ie++])])},P[C]=function(Te,Ie,De,Be,He,nt,wt){var Nt=8>>Te.b,pt=Te.Ea,Ht=Te.K[0],Tt=Te.w;if(8>Nt)for(Te=(1<<Te.b)-1,Tt=(1<<Nt)-1;Ie<De;++Ie){var ot,at=0;for(ot=0;ot<pt;++ot)ot&Te||(at=oe(Be[He++])),nt[wt++]=be(Ht[at&Tt]),at>>=Nt}else P["VP8LMapColor"+ee](Be,He,Ht,Tt,nt,wt,Ie,De,pt)}}function Je(C,M,ee,oe,be){for(ee=M+ee;M<ee;){var Te=C[M++];oe[be++]=Te>>16&255,oe[be++]=Te>>8&255,oe[be++]=Te>>0&255}}function ut(C,M,ee,oe,be){for(ee=M+ee;M<ee;){var Te=C[M++];oe[be++]=Te>>16&255,oe[be++]=Te>>8&255,oe[be++]=Te>>0&255,oe[be++]=Te>>24&255}}function vt(C,M,ee,oe,be){for(ee=M+ee;M<ee;){var Te=(Ie=C[M++])>>16&240|Ie>>12&15,Ie=Ie>>0&240|Ie>>28&15;oe[be++]=Te,oe[be++]=Ie}}function At(C,M,ee,oe,be){for(ee=M+ee;M<ee;){var Te=(Ie=C[M++])>>16&248|Ie>>13&7,Ie=Ie>>5&224|Ie>>3&31;oe[be++]=Te,oe[be++]=Ie}}function Bt(C,M,ee,oe,be){for(ee=M+ee;M<ee;){var Te=C[M++];oe[be++]=Te>>0&255,oe[be++]=Te>>8&255,oe[be++]=Te>>16&255}}function Yt(C,M,ee,oe,be,Te){if(Te==0)for(ee=M+ee;M<ee;)le(oe,((Te=C[M++])[0]>>24|Te[1]>>8&65280|Te[2]<<8&16711680|Te[3]<<24)>>>0),be+=32;else a(oe,be,C,M,ee)}function We(C,M){P[M][0]=P[C+"0"],P[M][1]=P[C+"1"],P[M][2]=P[C+"2"],P[M][3]=P[C+"3"],P[M][4]=P[C+"4"],P[M][5]=P[C+"5"],P[M][6]=P[C+"6"],P[M][7]=P[C+"7"],P[M][8]=P[C+"8"],P[M][9]=P[C+"9"],P[M][10]=P[C+"10"],P[M][11]=P[C+"11"],P[M][12]=P[C+"12"],P[M][13]=P[C+"13"],P[M][14]=P[C+"0"],P[M][15]=P[C+"0"]}function Ct(C){return C==Ic||C==kd||C==uu||C==Ku}function br(){this.eb=[],this.size=this.A=this.fb=0}function Jt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Dr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new br,this.f.kb=new Jt,this.sd=null}function Hr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Dt(C){return alert("todo:WebPSamplerProcessPlane"),C.T}function mr(C,M){var ee=C.T,oe=M.ba.f.RGBA,be=oe.eb,Te=oe.fb+C.ka*oe.A,Ie=Ji[M.ba.S],De=C.y,Be=C.O,He=C.f,nt=C.N,wt=C.ea,Nt=C.W,pt=M.cc,Ht=M.dc,Tt=M.Mc,ot=M.Nc,at=C.ka,It=C.ka+C.T,Pt=C.U,Ut=Pt+1>>1;for(at==0?Ie(De,Be,null,null,He,nt,wt,Nt,He,nt,wt,Nt,be,Te,null,null,Pt):(Ie(M.ec,M.fc,De,Be,pt,Ht,Tt,ot,He,nt,wt,Nt,be,Te-oe.A,be,Te,Pt),++ee);at+2<It;at+=2)pt=He,Ht=nt,Tt=wt,ot=Nt,nt+=C.Rc,Nt+=C.Rc,Te+=2*oe.A,Ie(De,(Be+=2*C.fa)-C.fa,De,Be,pt,Ht,Tt,ot,He,nt,wt,Nt,be,Te-oe.A,be,Te,Pt);return Be+=C.fa,C.j+It<C.o?(a(M.ec,M.fc,De,Be,Pt),a(M.cc,M.dc,He,nt,Ut),a(M.Mc,M.Nc,wt,Nt,Ut),ee--):1&It||Ie(De,Be,null,null,He,nt,wt,Nt,He,nt,wt,Nt,be,Te+oe.A,null,null,Pt),ee}function Sr(C,M,ee){var oe=C.F,be=[C.J];if(oe!=null){var Te=C.U,Ie=M.ba.S,De=Ie==Vu||Ie==uu;M=M.ba.f.RGBA;var Be=[0],He=C.ka;Be[0]=C.T,C.Kb&&(He==0?--Be[0]:(--He,be[0]-=C.width),C.j+C.ka+C.T==C.o&&(Be[0]=C.o-C.j-He));var nt=M.eb;He=M.fb+He*M.A,C=ea(oe,be[0],C.width,Te,Be,nt,He+(De?0:3),M.A),t(ee==Be),C&&Ct(Ie)&&Cs(nt,He,De,Te,Be,M.A)}return 0}function Jr(C){var M=C.ma,ee=M.ba.S,oe=11>ee,be=ee==ac||ee==du||ee==Vu||ee==pa||ee==12||Ct(ee);if(M.memory=null,M.Ib=null,M.Jb=null,M.Nd=null,!bd(M.Oa,C,be?11:12))return 0;if(be&&Ct(ee)&&Qt(),C.da)alert("todo:use_scaling");else{if(oe){if(M.Ib=Dt,C.Kb){if(ee=C.U+1>>1,M.memory=i(C.U+2*ee),M.memory==null)return 0;M.ec=M.memory,M.fc=0,M.cc=M.ec,M.dc=M.fc+C.U,M.Mc=M.cc,M.Nc=M.dc+ee,M.Ib=mr,Qt()}}else alert("todo:EmitYUV");be&&(M.Jb=Sr,oe&&yt())}if(oe&&!As){for(C=0;256>C;++C)vi[C]=89858*(C-128)+vl>>Ho,Zi[C]=-22014*(C-128)+vl,Cd[C]=-45773*(C-128),Rl[C]=113618*(C-128)+vl>>Ho;for(C=ta;C<oa;++C)M=76283*(C-16)+vl>>Ho,ef[C-ta]=ei(M,255),Hf[C-ta]=ei(M+8>>4,15);As=1}return 1}function _r(C){var M=C.ma,ee=C.U,oe=C.T;return t(!(1&C.ka)),0>=ee||0>=oe?0:(ee=M.Ib(C,M),M.Jb!=null&&M.Jb(C,M,ee),M.Dc+=ee,1)}function Wr(C){C.ma.memory=null}function sr(C,M,ee,oe){return te(C,8)!=47?0:(M[0]=te(C,14)+1,ee[0]=te(C,14)+1,oe[0]=te(C,1),te(C,3)!=0?0:!C.h)}function en(C,M){if(4>C)return C+1;var ee=C-2>>1;return(2+(1&C)<<ee)+te(M,ee)+1}function Gr(C,M){return 120<M?M-120:1<=(ee=((ee=Xh[M-1])>>4)*C+(8-(15&ee)))?ee:1;var ee}function vn(C,M,ee){var oe=q(ee),be=C[M+=255&oe].g-8;return 0<be&&(U(ee,ee.u+8),oe=q(ee),M+=C[M].value,M+=oe&(1<<be)-1),U(ee,ee.u+C[M].g),C[M].value}function kr(C,M,ee){return ee.g+=C.g,ee.value+=C.value<<M>>>0,t(8>=ee.g),C.g}function Fr(C,M,ee){var oe=C.xc;return t((M=oe==0?0:C.vc[C.md*(ee>>oe)+(M>>oe)])<C.Wb),C.Ya[M]}function ke(C,M,ee,oe){var be=C.ab,Te=C.c*M,Ie=C.C;M=Ie+M;var De=ee,Be=oe;for(oe=C.Ta,ee=C.Ua;0<be--;){var He=C.gc[be],nt=Ie,wt=M,Nt=De,pt=Be,Ht=(Be=oe,De=ee,He.Ea);switch(t(nt<wt),t(wt<=He.nc),He.hc){case 2:pi(Nt,pt,(wt-nt)*Ht,Be,De);break;case 0:var Tt=nt,ot=wt,at=Be,It=De,Pt=(gr=He).Ea;Tt==0&&(os(Nt,pt,null,null,1,at,It),Se(Nt,pt+1,0,0,Pt-1,at,It+1),pt+=Pt,It+=Pt,++Tt);for(var Ut=1<<gr.b,fr=Ut-1,or=we(Pt,gr.b),Qr=gr.K,gr=gr.w+(Tt>>gr.b)*or;Tt<ot;){var Sn=Qr,Fn=gr,Pn=1;for(ba(Nt,pt,at,It-Pt,1,at,It);Pn<Pt;){var mn=(Pn&~fr)+Ut;mn>Pt&&(mn=Pt),(0,Xa[Sn[Fn++]>>8&15])(Nt,pt+ +Pn,at,It+Pn-Pt,mn-Pn,at,It+Pn),Pn=mn}pt+=Pt,It+=Pt,++Tt&fr||(gr+=or)}wt!=He.nc&&a(Be,De-Ht,Be,De+(wt-nt-1)*Ht,Ht);break;case 1:for(Ht=Nt,ot=pt,Pt=(Nt=He.Ea)-(It=Nt&~(at=(pt=1<<He.b)-1)),Tt=we(Nt,He.b),Ut=He.K,He=He.w+(nt>>He.b)*Tt;nt<wt;){for(fr=Ut,or=He,Qr=new ce,gr=ot+It,Sn=ot+Nt;ot<gr;)je(fr[or++],Qr),Ss(Qr,Ht,ot,pt,Be,De),ot+=pt,De+=pt;ot<Sn&&(je(fr[or++],Qr),Ss(Qr,Ht,ot,Pt,Be,De),ot+=Pt,De+=Pt),++nt&at||(He+=Tt)}break;case 3:if(Nt==Be&&pt==De&&0<He.b){for(ot=Be,Nt=Ht=De+(wt-nt)*Ht-(It=(wt-nt)*we(He.Ea,He.b)),pt=Be,at=De,Tt=[],It=(Pt=It)-1;0<=It;--It)Tt[It]=pt[at+It];for(It=Pt-1;0<=It;--It)ot[Nt+It]=Tt[It];Wn(He,nt,wt,Be,Ht,Be,De)}else Wn(He,nt,wt,Nt,pt,Be,De)}De=oe,Be=ee}Be!=ee&&a(oe,ee,De,Be,Te)}function ze(C,M){var ee=C.V,oe=C.Ba+C.c*C.C,be=M-C.C;if(t(M<=C.l.o),t(16>=be),0<be){var Te=C.l,Ie=C.Ta,De=C.Ua,Be=Te.width;if(ke(C,be,ee,oe),be=De=[De],t((ee=C.C)<(oe=M)),t(Te.v<Te.va),oe>Te.o&&(oe=Te.o),ee<Te.j){var He=Te.j-ee;ee=Te.j,be[0]+=He*Be}if(ee>=oe?ee=0:(be[0]+=4*Te.v,Te.ka=ee-Te.j,Te.U=Te.va-Te.v,Te.T=oe-ee,ee=1),ee){if(De=De[0],11>(ee=C.ca).S){var nt=ee.f.RGBA,wt=(oe=ee.S,be=Te.U,Te=Te.T,He=nt.eb,nt.A),Nt=Te;for(nt=nt.fb+C.Ma*nt.A;0<Nt--;){var pt=Ie,Ht=De,Tt=be,ot=He,at=nt;switch(oe){case Gu:ka(pt,Ht,Tt,ot,at);break;case ac:ls(pt,Ht,Tt,ot,at);break;case Ic:ls(pt,Ht,Tt,ot,at),Cs(ot,at,0,Tt,1,0);break;case Kh:Bo(pt,Ht,Tt,ot,at);break;case du:Yt(pt,Ht,Tt,ot,at,1);break;case kd:Yt(pt,Ht,Tt,ot,at,1),Cs(ot,at,0,Tt,1,0);break;case Vu:Yt(pt,Ht,Tt,ot,at,0);break;case uu:Yt(pt,Ht,Tt,ot,at,0),Cs(ot,at,1,Tt,1,0);break;case pa:Ki(pt,Ht,Tt,ot,at);break;case Ku:Ki(pt,Ht,Tt,ot,at),ia(ot,at,Tt,1,0);break;case Bf:Pl(pt,Ht,Tt,ot,at);break;default:t(0)}De+=Be,nt+=wt}C.Ma+=Te}else alert("todo:EmitRescaledRowsYUVA");t(C.Ma<=ee.height)}}C.C=M,t(C.C<=C.i)}function $e(C){var M;if(0<C.ua)return 0;for(M=0;M<C.Wb;++M){var ee=C.Ya[M].G,oe=C.Ya[M].H;if(0<ee[1][oe[1]+0].g||0<ee[2][oe[2]+0].g||0<ee[3][oe[3]+0].g)return 0}return 1}function pe(C,M,ee,oe,be,Te){if(C.Z!=0){var Ie=C.qd,De=C.rd;for(t(ds[C.Z]!=null);M<ee;++M)ds[C.Z](Ie,De,oe,be,oe,be,Te),Ie=oe,De=be,be+=Te;C.qd=Ie,C.rd=De}}function _e(C,M){var ee=C.l.ma,oe=ee.Z==0||ee.Z==1?C.l.j:C.C;if(oe=C.C<oe?oe:C.C,t(M<=C.l.o),M>oe){var be=C.l.width,Te=ee.ca,Ie=ee.tb+be*oe,De=C.V,Be=C.Ba+C.c*oe,He=C.gc;t(C.ab==1),t(He[0].hc==3),Ka(He[0],oe,M,De,Be,Te,Ie),pe(ee,oe,M,Te,Ie,be)}C.C=C.Ma=M}function Fe(C,M,ee,oe,be,Te,Ie){var De=C.$/oe,Be=C.$%oe,He=C.m,nt=C.s,wt=ee+C.$,Nt=wt;be=ee+oe*be;var pt=ee+oe*Te,Ht=280+nt.ua,Tt=C.Pb?De:16777216,ot=0<nt.ua?nt.Wa:null,at=nt.wc,It=wt<pt?Fr(nt,Be,De):null;t(C.C<Te),t(pt<=be);var Pt=!1;e:for(;;){for(;Pt||wt<pt;){var Ut=0;if(De>=Tt){var fr=wt-ee;t((Tt=C).Pb),Tt.wd=Tt.m,Tt.xd=fr,0<Tt.s.ua&&ie(Tt.s.Wa,Tt.s.vb),Tt=De+Qu}if(Be&at||(It=Fr(nt,Be,De)),t(It!=null),It.Qb&&(M[wt]=It.qb,Pt=!0),!Pt)if(K(He),It.jc){Ut=He,fr=M;var or=wt,Qr=It.pd[q(Ut)&Ea-1];t(It.jc),256>Qr.g?(U(Ut,Ut.u+Qr.g),fr[or]=Qr.value,Ut=0):(U(Ut,Ut.u+Qr.g-256),t(256<=Qr.value),Ut=Qr.value),Ut==0&&(Pt=!0)}else Ut=vn(It.G[0],It.H[0],He);if(He.h)break;if(Pt||256>Ut){if(!Pt)if(It.nd)M[wt]=(It.qb|Ut<<8)>>>0;else{if(K(He),Pt=vn(It.G[1],It.H[1],He),K(He),fr=vn(It.G[2],It.H[2],He),or=vn(It.G[3],It.H[3],He),He.h)break;M[wt]=(or<<24|Pt<<16|Ut<<8|fr)>>>0}if(Pt=!1,++wt,++Be>=oe&&(Be=0,++De,Ie!=null&&De<=Te&&!(De%16)&&Ie(C,De),ot!=null))for(;Nt<wt;)Ut=M[Nt++],ot.X[(506832829*Ut&4294967295)>>>ot.Mb]=Ut}else if(280>Ut){if(Ut=en(Ut-256,He),fr=vn(It.G[4],It.H[4],He),K(He),fr=Gr(oe,fr=en(fr,He)),He.h)break;if(wt-ee<fr||be-wt<Ut)break e;for(or=0;or<Ut;++or)M[wt+or]=M[wt+or-fr];for(wt+=Ut,Be+=Ut;Be>=oe;)Be-=oe,++De,Ie!=null&&De<=Te&&!(De%16)&&Ie(C,De);if(t(wt<=be),Be&at&&(It=Fr(nt,Be,De)),ot!=null)for(;Nt<wt;)Ut=M[Nt++],ot.X[(506832829*Ut&4294967295)>>>ot.Mb]=Ut}else{if(!(Ut<Ht))break e;for(Pt=Ut-280,t(ot!=null);Nt<wt;)Ut=M[Nt++],ot.X[(506832829*Ut&4294967295)>>>ot.Mb]=Ut;Ut=wt,t(!(Pt>>>(fr=ot).Xa)),M[Ut]=fr.X[Pt],Pt=!0}Pt||t(He.h==G(He))}if(C.Pb&&He.h&&wt<be)t(C.m.h),C.a=5,C.m=C.wd,C.$=C.xd,0<C.s.ua&&ie(C.s.vb,C.s.Wa);else{if(He.h)break e;Ie?.(C,De>Te?Te:De),C.a=0,C.$=wt-ee}return 1}return C.a=3,0}function et(C){t(C!=null),C.vc=null,C.yc=null,C.Ya=null;var M=C.Wa;M!=null&&(M.X=null),C.vb=null,t(C!=null)}function mt(){var C=new au;return C==null?null:(C.a=0,C.xb=mu,We("Predictor","VP8LPredictors"),We("Predictor","VP8LPredictors_C"),We("PredictorAdd","VP8LPredictorsAdd"),We("PredictorAdd","VP8LPredictorsAdd_C"),pi=qe,Ss=Le,ka=Je,ls=ut,Ki=vt,Pl=At,Bo=Bt,P.VP8LMapColor32b=$s,P.VP8LMapColor8b=Vi,C)}function lt(C,M,ee,oe,be){var Te=1,Ie=[C],De=[M],Be=oe.m,He=oe.s,nt=null,wt=0;e:for(;;){if(ee)for(;Te&&te(Be,1);){var Nt=Ie,pt=De,Ht=oe,Tt=1,ot=Ht.m,at=Ht.gc[Ht.ab],It=te(ot,2);if(Ht.Oc&1<<It)Te=0;else{switch(Ht.Oc|=1<<It,at.hc=It,at.Ea=Nt[0],at.nc=pt[0],at.K=[null],++Ht.ab,t(4>=Ht.ab),It){case 0:case 1:at.b=te(ot,3)+2,Tt=lt(we(at.Ea,at.b),we(at.nc,at.b),0,Ht,at.K),at.K=at.K[0];break;case 3:var Pt,Ut=te(ot,8)+1,fr=16<Ut?0:4<Ut?1:2<Ut?2:3;if(Nt[0]=we(at.Ea,fr),at.b=fr,Pt=Tt=lt(Ut,1,0,Ht,at.K)){var or,Qr=Ut,gr=at,Sn=1<<(8>>gr.b),Fn=i(Sn);if(Fn==null)Pt=0;else{var Pn=gr.K[0],mn=gr.w;for(Fn[0]=gr.K[0][0],or=1;or<1*Qr;++or)Fn[or]=Oe(Pn[mn+or],Fn[or-1]);for(;or<4*Sn;++or)Fn[or]=0;gr.K[0]=null,gr.K[0]=Fn,Pt=1}}Tt=Pt;break;case 2:break;default:t(0)}Te=Tt}}if(Ie=Ie[0],De=De[0],Te&&te(Be,1)&&!(Te=1<=(wt=te(Be,4))&&11>=wt)){oe.a=3;break e}var ra;if(ra=Te)t:{var Bn,on,Ya,Ii=oe,Qa=Ie,Es=De,na=wt,Is=ee,bi=Ii.m,Ja=Ii.s,$a=[null],Hs=1,Di=0,Go=Yu[na];r:for(;;){if(Is&&te(bi,1)){var Za=te(bi,3)+2,as=we(Qa,Za),Ds=we(Es,Za),Uc=as*Ds;if(!lt(as,Ds,0,Ii,$a))break r;for($a=$a[0],Ja.xc=Za,Bn=0;Bn<Uc;++Bn){var eo=$a[Bn]>>8&65535;$a[Bn]=eo,eo>=Hs&&(Hs=eo+1)}}if(bi.h)break r;for(on=0;5>on;++on){var Yn=Sd[on];!on&&0<na&&(Yn+=1<<na),Di<Yn&&(Di=Yn)}var Bl=o(Hs*Go,_),Ad=Hs,pu=o(Ad,z);if(pu==null)var Vo=null;else t(65536>=Ad),Vo=pu;var jo=i(Di);if(Vo==null||jo==null||Bl==null){Ii.a=1;break r}var oc=Bl;for(Bn=Ya=0;Bn<Hs;++Bn){var ko=Vo[Bn],Ul=ko.G,Ed=ko.H,xu=0,So=1,gu=0;for(on=0;5>on;++on){Yn=Sd[on],Ul[on]=oc,Ed[on]=Ya,!on&&0<na&&(Yn+=1<<na);a:{var qc,lc=Yn,vu=Ii,ql=jo,Qh=oc,tf=Ya,ya=0,ri=vu.m,cc=te(ri,1);if(s(ql,0,0,lc),cc){var q0=te(ri,1)+1,Td=te(ri,1),Wf=te(ri,Td==0?1:8);ql[Wf]=1,q0==2&&(ql[Wf=te(ri,8)]=1);var $l=1}else{var za=i(19),Ts=te(ri,4)+4;if(19<Ts){vu.a=3;var us=0;break a}for(qc=0;qc<Ts;++qc)za[Uf[qc]]=te(ri,3);var bu=void 0,dc=void 0,$c=vu,$0=za,Ls=lc,Gf=ql,rf=0,zl=$c.m,Ko=8,to=o(128,_);n:for(;T(to,0,7,$0,19);){if(te(zl,1)){var nf=2+2*te(zl,3);if((bu=2+te(zl,nf))>Ls)break n}else bu=Ls;for(dc=0;dc<Ls&&bu--;){K(zl);var Vf=to[0+(127&q(zl))];U(zl,zl.u+Vf.g);var uc=Vf.value;if(16>uc)Gf[dc++]=uc,uc!=0&&(Ko=uc);else{var Od=uc==16,af=uc-16,ro=Xu[af],z0=te(zl,Dc[af])+ro;if(dc+z0>Ls)break n;for(var H0=Od?Ko:0;0<z0--;)Gf[dc++]=H0}}rf=1;break n}rf||($c.a=3),$l=rf}($l=$l&&!ri.h)&&(ya=T(Qh,tf,8,ql,lc)),$l&&ya!=0?us=ya:(vu.a=3,us=0)}if(us==0)break r;if(So&&R0[on]==1&&(So=oc[Ya].g==0),xu+=oc[Ya].g,Ya+=us,3>=on){var fc,sf=jo[0];for(fc=1;fc<Yn;++fc)jo[fc]>sf&&(sf=jo[fc]);gu+=sf}}if(ko.nd=So,ko.Qb=0,So&&(ko.qb=(Ul[3][Ed[3]+0].value<<24|Ul[1][Ed[1]+0].value<<16|Ul[2][Ed[2]+0].value)>>>0,xu==0&&256>Ul[0][Ed[0]+0].value&&(ko.Qb=1,ko.qb+=Ul[0][Ed[0]+0].value<<8)),ko.jc=!ko.Qb&&6>gu,ko.jc){var L,he=ko;for(L=0;L<Ea;++L){var ye=L,Qe=he.pd[ye],st=he.G[0][he.H[0]+ye];256<=st.value?(Qe.g=st.g+256,Qe.value=st.value):(Qe.g=0,Qe.value=0,ye>>=kr(st,8,Qe),ye>>=kr(he.G[1][he.H[1]+ye],16,Qe),ye>>=kr(he.G[2][he.H[2]+ye],0,Qe),kr(he.G[3][he.H[3]+ye],24,Qe))}}}Ja.vc=$a,Ja.Wb=Hs,Ja.Ya=Vo,Ja.yc=Bl,ra=1;break t}ra=0}if(!(Te=ra)){oe.a=3;break e}if(0<wt){if(He.ua=1<<wt,!Ae(He.Wa,wt)){oe.a=1,Te=0;break e}}else He.ua=0;var Mt=oe,St=Ie,Gt=De,Tr=Mt.s,jn=Tr.xc;if(Mt.c=St,Mt.i=Gt,Tr.md=we(St,jn),Tr.wc=jn==0?-1:(1<<jn)-1,ee){oe.xb=No;break e}if((nt=i(Ie*De))==null){oe.a=1,Te=0;break e}Te=(Te=Fe(oe,nt,0,Ie,De,De,null))&&!Be.h;break e}return Te?(be!=null?be[0]=nt:(t(nt==null),t(ee)),oe.$=0,ee||et(He)):et(He),Te}function xt(C,M){var ee=C.c*C.i,oe=ee+M+16*M;return t(C.c<=M),C.V=i(oe),C.V==null?(C.Ta=null,C.Ua=0,C.a=1,0):(C.Ta=C.V,C.Ua=C.Ba+ee+M,1)}function ge(C,M){var ee=C.C,oe=M-ee,be=C.V,Te=C.Ba+C.c*ee;for(t(M<=C.l.o);0<oe;){var Ie=16<oe?16:oe,De=C.l.ma,Be=C.l.width,He=Be*Ie,nt=De.ca,wt=De.tb+Be*ee,Nt=C.Ta,pt=C.Ua;ke(C,Ie,be,Te),On(Nt,pt,nt,wt,He),pe(De,ee,ee+Ie,nt,wt,Be),oe-=Ie,be+=Ie*C.c,ee+=Ie}t(ee==M),C.C=C.Ma=M}function ve(){this.ub=this.yd=this.td=this.Rb=0}function Ke(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function ct(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function jt(){this.Yb=(function(){var C=[];return(function M(ee,oe,be){for(var Te=be[oe],Ie=0;Ie<Te&&(ee.push(be.length>oe+1?[]:0),!(be.length<oe+1));Ie++)M(ee[Ie],oe+1,be)})(C,0,[3,11]),C})()}function bt(){this.jb=i(3),this.Wc=l([4,8],jt),this.Xc=l([4,17],jt)}function Wt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function ir(){this.ld=this.La=this.dd=this.tc=0}function Kt(){this.Na=this.la=0}function yr(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $r(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ur(){this.uc=this.M=this.Nb=0,this.wa=Array(new ir),this.Y=0,this.ya=Array(new $r),this.aa=0,this.l=new aa}function un(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Vr(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new ve,this.Kc=new Ke,this.ed=new Wt,this.Qa=new ct,this.Ic=this.$c=this.Aa=0,this.D=new Ur,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,W),this.ia=0,this.pb=o(4,yr),this.Pa=new bt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new un),this.Hd=0,this.rb=Array(new Kt),this.sb=0,this.wa=Array(new ir),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $r),this.L=this.aa=0,this.gd=l([4,2],ir),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function aa(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Kn(){var C=new Vr;return C!=null&&(C.a=0,C.sc="OK",C.cb=0,C.Xb=0,hu||(hu=Ve)),C}function Ln(C,M,ee){return C.a==0&&(C.a=M,C.sc=ee,C.cb=0),0}function Lo(C,M,ee){return 3<=ee&&C[M+0]==157&&C[M+1]==1&&C[M+2]==42}function Na(C,M){if(C==null)return 0;if(C.a=0,C.sc="OK",M==null)return Ln(C,2,"null VP8Io passed to VP8GetHeaders()");var ee=M.data,oe=M.w,be=M.ha;if(4>be)return Ln(C,7,"Truncated header.");var Te=ee[oe+0]|ee[oe+1]<<8|ee[oe+2]<<16,Ie=C.Od;if(Ie.Rb=!(1&Te),Ie.td=Te>>1&7,Ie.yd=Te>>4&1,Ie.ub=Te>>5,3<Ie.td)return Ln(C,3,"Incorrect keyframe parameters.");if(!Ie.yd)return Ln(C,4,"Frame not displayable.");oe+=3,be-=3;var De=C.Kc;if(Ie.Rb){if(7>be)return Ln(C,7,"cannot parse picture header");if(!Lo(ee,oe,be))return Ln(C,3,"Bad code word");De.c=16383&(ee[oe+4]<<8|ee[oe+3]),De.Td=ee[oe+4]>>6,De.i=16383&(ee[oe+6]<<8|ee[oe+5]),De.Ud=ee[oe+6]>>6,oe+=7,be-=7,C.za=De.c+15>>4,C.Ub=De.i+15>>4,M.width=De.c,M.height=De.i,M.Da=0,M.j=0,M.v=0,M.va=M.width,M.o=M.height,M.da=0,M.ib=M.width,M.hb=M.height,M.U=M.width,M.T=M.height,s((Te=C.Pa).jb,0,255,Te.jb.length),t((Te=C.Qa)!=null),Te.Cb=0,Te.Bb=0,Te.Fb=1,s(Te.Zb,0,0,Te.Zb.length),s(Te.Lb,0,0,Te.Lb)}if(Ie.ub>be)return Ln(C,7,"bad partition length");H(Te=C.m,ee,oe,Ie.ub),oe+=Ie.ub,be-=Ie.ub,Ie.Rb&&(De.Ld=me(Te),De.Kd=me(Te)),De=C.Qa;var Be,He=C.Pa;if(t(Te!=null),t(De!=null),De.Cb=me(Te),De.Cb){if(De.Bb=me(Te),me(Te)){for(De.Fb=me(Te),Be=0;4>Be;++Be)De.Zb[Be]=me(Te)?J(Te,7):0;for(Be=0;4>Be;++Be)De.Lb[Be]=me(Te)?J(Te,6):0}if(De.Bb)for(Be=0;3>Be;++Be)He.jb[Be]=me(Te)?Y(Te,8):255}else De.Bb=0;if(Te.Ka)return Ln(C,3,"cannot parse segment header");if((De=C.ed).zd=me(Te),De.Tb=Y(Te,6),De.wb=Y(Te,3),De.Pc=me(Te),De.Pc&&me(Te)){for(He=0;4>He;++He)me(Te)&&(De.vd[He]=J(Te,6));for(He=0;4>He;++He)me(Te)&&(De.od[He]=J(Te,6))}if(C.L=De.Tb==0?0:De.zd?1:2,Te.Ka)return Ln(C,3,"cannot parse filter header");var nt=be;if(be=Be=oe,oe=Be+nt,De=nt,C.Xb=(1<<Y(C.m,2))-1,nt<3*(He=C.Xb))ee=7;else{for(Be+=3*He,De-=3*He,nt=0;nt<He;++nt){var wt=ee[be+0]|ee[be+1]<<8|ee[be+2]<<16;wt>De&&(wt=De),H(C.Jc[+nt],ee,Be,wt),Be+=wt,De-=wt,be+=3}H(C.Jc[+He],ee,Be,De),ee=Be<oe?0:5}if(ee!=0)return Ln(C,ee,"cannot parse partitions");for(ee=Y(Be=C.m,7),be=me(Be)?J(Be,4):0,oe=me(Be)?J(Be,4):0,De=me(Be)?J(Be,4):0,He=me(Be)?J(Be,4):0,Be=me(Be)?J(Be,4):0,nt=C.Qa,wt=0;4>wt;++wt){if(nt.Cb){var Nt=nt.Zb[wt];nt.Fb||(Nt+=ee)}else{if(0<wt){C.pb[wt]=C.pb[0];continue}Nt=ee}var pt=C.pb[wt];pt.Sc[0]=sc[ei(Nt+be,127)],pt.Sc[1]=fu[ei(Nt+0,127)],pt.Eb[0]=2*sc[ei(Nt+oe,127)],pt.Eb[1]=101581*fu[ei(Nt+De,127)]>>16,8>pt.Eb[1]&&(pt.Eb[1]=8),pt.Qc[0]=sc[ei(Nt+He,117)],pt.Qc[1]=fu[ei(Nt+Be,127)],pt.lc=Nt+Be}if(!Ie.Rb)return Ln(C,4,"Not a key frame.");for(me(Te),Ie=C.Pa,ee=0;4>ee;++ee){for(be=0;8>be;++be)for(oe=0;3>oe;++oe)for(De=0;11>De;++De)He=se(Te,vp[ee][be][oe][De])?Y(Te,8):ic[ee][be][oe][De],Ie.Wc[ee][be].Yb[oe][De]=He;for(be=0;17>be;++be)Ie.Xc[ee][be]=Ie.Wc[ee][Ju[be]]}return C.kc=me(Te),C.kc&&(C.Bd=Y(Te,8)),C.cb=1}function Ve(C,M,ee,oe,be,Te,Ie){var De=M[be].Yb[ee];for(ee=0;16>be;++be){if(!se(C,De[ee+0]))return be;for(;!se(C,De[ee+1]);)if(De=M[++be].Yb[0],ee=0,be==16)return 16;var Be=M[be+1].Yb;if(se(C,De[ee+2])){var He=C,nt=0;if(se(He,(Nt=De)[(wt=ee)+3]))if(se(He,Nt[wt+6])){for(De=0,wt=2*(nt=se(He,Nt[wt+8]))+(Nt=se(He,Nt[wt+9+nt])),nt=0,Nt=qf[wt];Nt[De];++De)nt+=nt+se(He,Nt[De]);nt+=3+(8<<wt)}else se(He,Nt[wt+7])?(nt=7+2*se(He,165),nt+=se(He,145)):nt=5+se(He,159);else nt=se(He,Nt[wt+4])?3+se(He,Nt[wt+5]):2;De=Be[2]}else nt=1,De=Be[1];Be=Ie+B0[be],0>(He=C).b&&ae(He);var wt,Nt=He.b,pt=(wt=He.Ca>>1)-(He.I>>Nt)>>31;--He.b,He.Ca+=pt,He.Ca|=1,He.I-=(wt+1&pt)<<Nt,Te[Be]=((nt^pt)-pt)*oe[(0<be)+0]}return 16}function Lt(C){var M=C.rb[C.sb-1];M.la=0,M.Na=0,s(C.zc,0,0,C.zc.length),C.ja=0}function Ot(C,M){if(C==null)return 0;if(M==null)return Ln(C,2,"NULL VP8Io parameter in VP8Decode().");if(!C.cb&&!Na(C,M))return 0;if(t(C.cb),M.ac==null||M.ac(M)){M.ob&&(C.L=0);var ee=Bc[C.L];if(C.L==2?(C.yb=0,C.zb=0):(C.yb=M.v-ee>>4,C.zb=M.j-ee>>4,0>C.yb&&(C.yb=0),0>C.zb&&(C.zb=0)),C.Va=M.o+15+ee>>4,C.Hb=M.va+15+ee>>4,C.Hb>C.za&&(C.Hb=C.za),C.Va>C.Ub&&(C.Va=C.Ub),0<C.L){var oe=C.ed;for(ee=0;4>ee;++ee){var be;if(C.Qa.Cb){var Te=C.Qa.Lb[ee];C.Qa.Fb||(Te+=oe.Tb)}else Te=oe.Tb;for(be=0;1>=be;++be){var Ie=C.gd[ee][be],De=Te;if(oe.Pc&&(De+=oe.vd[0],be&&(De+=oe.od[0])),0<(De=0>De?0:63<De?63:De)){var Be=De;0<oe.wb&&(Be=4<oe.wb?Be>>2:Be>>1)>9-oe.wb&&(Be=9-oe.wb),1>Be&&(Be=1),Ie.dd=Be,Ie.tc=2*De+Be,Ie.ld=40<=De?2:15<=De?1:0}else Ie.tc=0;Ie.La=be}}}ee=0}else Ln(C,6,"Frame setup failed"),ee=C.a;if(ee=ee==0){if(ee){C.$c=0,0<C.Aa||(C.Ic=Wo);e:{ee=C.Ic,oe=4*(Be=C.za);var He=32*Be,nt=Be+1,wt=0<C.L?Be*(0<C.Aa?2:1):0,Nt=(C.Aa==2?2:1)*Be;if((Ie=oe+832+(be=3*(16*ee+Bc[C.L])/2*He)+(Te=C.Fa!=null&&0<C.Fa.length?C.Kc.c*C.Kc.i:0))!=Ie)ee=0;else{if(Ie>C.Vb){if(C.Vb=0,C.Ec=i(Ie),C.Fc=0,C.Ec==null){ee=Ln(C,1,"no memory during frame initialization.");break e}C.Vb=Ie}Ie=C.Ec,De=C.Fc,C.Ac=Ie,C.Bc=De,De+=oe,C.Gd=o(He,un),C.Hd=0,C.rb=o(nt+1,Kt),C.sb=1,C.wa=wt?o(wt,ir):null,C.Y=0,C.D.Nb=0,C.D.wa=C.wa,C.D.Y=C.Y,0<C.Aa&&(C.D.Y+=Be),t(!0),C.oc=Ie,C.pc=De,De+=832,C.ya=o(Nt,$r),C.aa=0,C.D.ya=C.ya,C.D.aa=C.aa,C.Aa==2&&(C.D.aa+=Be),C.R=16*Be,C.B=8*Be,Be=(He=Bc[C.L])*C.R,He=He/2*C.B,C.sa=Ie,C.ta=De+Be,C.qa=C.sa,C.ra=C.ta+16*ee*C.R+He,C.Ha=C.qa,C.Ia=C.ra+8*ee*C.B+He,C.$c=0,De+=be,C.mb=Te?Ie:null,C.nb=Te?De:null,t(De+Te<=C.Fc+C.Vb),Lt(C),s(C.Ac,C.Bc,0,oe),ee=1}}if(ee){if(M.ka=0,M.y=C.sa,M.O=C.ta,M.f=C.qa,M.N=C.ra,M.ea=C.Ha,M.Vd=C.Ia,M.fa=C.R,M.Rc=C.B,M.F=null,M.J=0,!jd){for(ee=-255;255>=ee;++ee)Ta[255+ee]=0>ee?-ee:ee;for(ee=-1020;1020>=ee;++ee)qo[1020+ee]=-128>ee?-128:127<ee?127:ee;for(ee=-112;112>=ee;++ee)cu[112+ee]=-16>ee?-16:15<ee?15:ee;for(ee=-255;510>=ee;++ee)$o[255+ee]=0>ee?0:255<ee?255:ee;jd=1}lu=Cr,gl=En,Il=rr,ti=xr,Ti=Rt,Xn=sa,Dl=Ol,Nd=js,Ll=xd,Uo=Ac,Xi=xo,zs=Fo,Yi=gd,Oi=pl,Qi=ma,yo=Ua,Pc=Ns,_s=Rf,wo[0]=Ba,wo[1]=Ma,wo[2]=Mn,wo[3]=Or,wo[4]=ho,wo[5]=ys,wo[6]=bs,wo[7]=ws,wo[8]=ml,wo[9]=mo,cs[0]=Zn,cs[1]=Aa,cs[2]=ar,cs[3]=nn,cs[4]=kn,cs[5]=Ar,cs[6]=an,Pi[0]=mi,Pi[1]=Ca,Pi[2]=zu,Pi[3]=po,Pi[4]=Ge,Pi[5]=rc,Pi[6]=wr,ee=1}else ee=0}ee&&(ee=(function(pt,Ht){for(pt.M=0;pt.M<pt.Va;++pt.M){var Tt,ot=pt.Jc[pt.M&pt.Xb],at=pt.m,It=pt;for(Tt=0;Tt<It.za;++Tt){var Pt=at,Ut=It,fr=Ut.Ac,or=Ut.Bc+4*Tt,Qr=Ut.zc,gr=Ut.ya[Ut.aa+Tt];if(Ut.Qa.Bb?gr.$b=se(Pt,Ut.Pa.jb[0])?2+se(Pt,Ut.Pa.jb[2]):se(Pt,Ut.Pa.jb[1]):gr.$b=0,Ut.kc&&(gr.Ad=se(Pt,Ut.Bd)),gr.Za=!se(Pt,145)+0,gr.Za){var Sn=gr.Ob,Fn=0;for(Ut=0;4>Ut;++Ut){var Pn,mn=Qr[0+Ut];for(Pn=0;4>Pn;++Pn){mn=_d[fr[or+Pn]][mn];for(var ra=Lc[se(Pt,mn[0])];0<ra;)ra=Lc[2*ra+se(Pt,mn[ra])];mn=-ra,fr[or+Pn]=mn}a(Sn,Fn,fr,or,4),Fn+=4,Qr[0+Ut]=mn}}else mn=se(Pt,156)?se(Pt,128)?1:3:se(Pt,163)?2:0,gr.Ob[0]=mn,s(fr,or,mn,4),s(Qr,0,mn,4);gr.Dd=se(Pt,142)?se(Pt,114)?se(Pt,183)?1:3:2:0}if(It.m.Ka)return Ln(pt,7,"Premature end-of-partition0 encountered.");for(;pt.ja<pt.za;++pt.ja){if(It=ot,Pt=(at=pt).rb[at.sb-1],fr=at.rb[at.sb+at.ja],Tt=at.ya[at.aa+at.ja],or=at.kc?Tt.Ad:0)Pt.la=fr.la=0,Tt.Za||(Pt.Na=fr.Na=0),Tt.Hc=0,Tt.Gc=0,Tt.ia=0;else{var Bn,on;if(Pt=fr,fr=It,or=at.Pa.Xc,Qr=at.ya[at.aa+at.ja],gr=at.pb[Qr.$b],Ut=Qr.ad,Sn=0,Fn=at.rb[at.sb-1],mn=Pn=0,s(Ut,Sn,0,384),Qr.Za)var Ya=0,Ii=or[3];else{ra=i(16);var Qa=Pt.Na+Fn.Na;if(Qa=hu(fr,or[1],Qa,gr.Eb,0,ra,0),Pt.Na=Fn.Na=(0<Qa)+0,1<Qa)lu(ra,0,Ut,Sn);else{var Es=ra[0]+3>>3;for(ra=0;256>ra;ra+=16)Ut[Sn+ra]=Es}Ya=1,Ii=or[0]}var na=15&Pt.la,Is=15&Fn.la;for(ra=0;4>ra;++ra){var bi=1&Is;for(Es=on=0;4>Es;++Es)na=na>>1|(bi=(Qa=hu(fr,Ii,Qa=bi+(1&na),gr.Sc,Ya,Ut,Sn))>Ya)<<7,on=on<<2|(3<Qa?3:1<Qa?2:Ut[Sn+0]!=0),Sn+=16;na>>=4,Is=Is>>1|bi<<7,Pn=(Pn<<8|on)>>>0}for(Ii=na,Ya=Is>>4,Bn=0;4>Bn;Bn+=2){for(on=0,na=Pt.la>>4+Bn,Is=Fn.la>>4+Bn,ra=0;2>ra;++ra){for(bi=1&Is,Es=0;2>Es;++Es)Qa=bi+(1&na),na=na>>1|(bi=0<(Qa=hu(fr,or[2],Qa,gr.Qc,0,Ut,Sn)))<<3,on=on<<2|(3<Qa?3:1<Qa?2:Ut[Sn+0]!=0),Sn+=16;na>>=2,Is=Is>>1|bi<<5}mn|=on<<4*Bn,Ii|=na<<4<<Bn,Ya|=(240&Is)<<Bn}Pt.la=Ii,Fn.la=Ya,Qr.Hc=Pn,Qr.Gc=mn,Qr.ia=43690&mn?0:gr.ia,or=!(Pn|mn)}if(0<at.L&&(at.wa[at.Y+at.ja]=at.gd[Tt.$b][Tt.Za],at.wa[at.Y+at.ja].La|=!or),It.Ka)return Ln(pt,7,"Premature end-of-file encountered.")}if(Lt(pt),at=Ht,It=1,Tt=(ot=pt).D,Pt=0<ot.L&&ot.M>=ot.zb&&ot.M<=ot.Va,ot.Aa==0)e:{if(Tt.M=ot.M,Tt.uc=Pt,ou(ot,Tt),It=1,Tt=(on=ot.D).Nb,Pt=(mn=Bc[ot.L])*ot.R,fr=mn/2*ot.B,ra=16*Tt*ot.R,Es=8*Tt*ot.B,or=ot.sa,Qr=ot.ta-Pt+ra,gr=ot.qa,Ut=ot.ra-fr+Es,Sn=ot.Ha,Fn=ot.Ia-fr+Es,Is=(na=on.M)==0,Pn=na>=ot.Va-1,ot.Aa==2&&ou(ot,on),on.uc)for(bi=(Qa=ot).D.M,t(Qa.D.uc),on=Qa.yb;on<Qa.Hb;++on){Ya=on,Ii=bi;var Ja=($a=(Yn=Qa).D).Nb;Bn=Yn.R;var $a=$a.wa[$a.Y+Ya],Hs=Yn.sa,Di=Yn.ta+16*Ja*Bn+16*Ya,Go=$a.dd,Za=$a.tc;if(Za!=0)if(t(3<=Za),Yn.L==1)0<Ya&&yo(Hs,Di,Bn,Za+4),$a.La&&_s(Hs,Di,Bn,Za),0<Ii&&Qi(Hs,Di,Bn,Za+4),$a.La&&Pc(Hs,Di,Bn,Za);else{var as=Yn.B,Ds=Yn.qa,Uc=Yn.ra+8*Ja*as+8*Ya,eo=Yn.Ha,Yn=Yn.Ia+8*Ja*as+8*Ya;Ja=$a.ld,0<Ya&&(Nd(Hs,Di,Bn,Za+4,Go,Ja),Uo(Ds,Uc,eo,Yn,as,Za+4,Go,Ja)),$a.La&&(zs(Hs,Di,Bn,Za,Go,Ja),Oi(Ds,Uc,eo,Yn,as,Za,Go,Ja)),0<Ii&&(Dl(Hs,Di,Bn,Za+4,Go,Ja),Ll(Ds,Uc,eo,Yn,as,Za+4,Go,Ja)),$a.La&&(Xi(Hs,Di,Bn,Za,Go,Ja),Yi(Ds,Uc,eo,Yn,as,Za,Go,Ja))}}if(ot.ia&&alert("todo:DitherRow"),at.put!=null){if(on=16*na,na=16*(na+1),Is?(at.y=ot.sa,at.O=ot.ta+ra,at.f=ot.qa,at.N=ot.ra+Es,at.ea=ot.Ha,at.W=ot.Ia+Es):(on-=mn,at.y=or,at.O=Qr,at.f=gr,at.N=Ut,at.ea=Sn,at.W=Fn),Pn||(na-=mn),na>at.o&&(na=at.o),at.F=null,at.J=null,ot.Fa!=null&&0<ot.Fa.length&&on<na&&(at.J=su(ot,at,on,na-on),at.F=ot.mb,at.F==null&&at.F.length==0)){It=Ln(ot,3,"Could not decode alpha data.");break e}on<at.j&&(mn=at.j-on,on=at.j,t(!(1&mn)),at.O+=ot.R*mn,at.N+=ot.B*(mn>>1),at.W+=ot.B*(mn>>1),at.F!=null&&(at.J+=at.width*mn)),on<na&&(at.O+=at.v,at.N+=at.v>>1,at.W+=at.v>>1,at.F!=null&&(at.J+=at.v),at.ka=on-at.j,at.U=at.va-at.v,at.T=na-on,It=at.put(at))}Tt+1!=ot.Ic||Pn||(a(ot.sa,ot.ta-Pt,or,Qr+16*ot.R,Pt),a(ot.qa,ot.ra-fr,gr,Ut+8*ot.B,fr),a(ot.Ha,ot.Ia-fr,Sn,Fn+8*ot.B,fr))}if(!It)return Ln(pt,6,"Output aborted.")}return 1})(C,M)),M.bc!=null&&M.bc(M),ee&=1}return ee?(C.cb=0,ee):0}function lr(C,M,ee,oe,be){be=C[M+ee+32*oe]+(be>>3),C[M+ee+32*oe]=-256&be?0>be?0:255:be}function jr(C,M,ee,oe,be,Te){lr(C,M,0,ee,oe+be),lr(C,M,1,ee,oe+Te),lr(C,M,2,ee,oe-Te),lr(C,M,3,ee,oe-be)}function pr(C){return(20091*C>>16)+C}function Mr(C,M,ee,oe){var be,Te=0,Ie=i(16);for(be=0;4>be;++be){var De=C[M+0]+C[M+8],Be=C[M+0]-C[M+8],He=(35468*C[M+4]>>16)-pr(C[M+12]),nt=pr(C[M+4])+(35468*C[M+12]>>16);Ie[Te+0]=De+nt,Ie[Te+1]=Be+He,Ie[Te+2]=Be-He,Ie[Te+3]=De-nt,Te+=4,M++}for(be=Te=0;4>be;++be)De=(C=Ie[Te+0]+4)+Ie[Te+8],Be=C-Ie[Te+8],He=(35468*Ie[Te+4]>>16)-pr(Ie[Te+12]),lr(ee,oe,0,0,De+(nt=pr(Ie[Te+4])+(35468*Ie[Te+12]>>16))),lr(ee,oe,1,0,Be+He),lr(ee,oe,2,0,Be-He),lr(ee,oe,3,0,De-nt),Te++,oe+=32}function sa(C,M,ee,oe){var be=C[M+0]+4,Te=35468*C[M+4]>>16,Ie=pr(C[M+4]),De=35468*C[M+1]>>16;jr(ee,oe,0,be+Ie,C=pr(C[M+1]),De),jr(ee,oe,1,be+Te,C,De),jr(ee,oe,2,be-Te,C,De),jr(ee,oe,3,be-Ie,C,De)}function En(C,M,ee,oe,be){Mr(C,M,ee,oe),be&&Mr(C,M+16,ee,oe+4)}function rr(C,M,ee,oe){gl(C,M+0,ee,oe,1),gl(C,M+32,ee,oe+128,1)}function xr(C,M,ee,oe){var be;for(C=C[M+0]+4,be=0;4>be;++be)for(M=0;4>M;++M)lr(ee,oe,M,be,C)}function Rt(C,M,ee,oe){C[M+0]&&ti(C,M+0,ee,oe),C[M+16]&&ti(C,M+16,ee,oe+4),C[M+32]&&ti(C,M+32,ee,oe+128),C[M+48]&&ti(C,M+48,ee,oe+128+4)}function Cr(C,M,ee,oe){var be,Te=i(16);for(be=0;4>be;++be){var Ie=C[M+0+be]+C[M+12+be],De=C[M+4+be]+C[M+8+be],Be=C[M+4+be]-C[M+8+be],He=C[M+0+be]-C[M+12+be];Te[0+be]=Ie+De,Te[8+be]=Ie-De,Te[4+be]=He+Be,Te[12+be]=He-Be}for(be=0;4>be;++be)Ie=(C=Te[0+4*be]+3)+Te[3+4*be],De=Te[1+4*be]+Te[2+4*be],Be=Te[1+4*be]-Te[2+4*be],He=C-Te[3+4*be],ee[oe+0]=Ie+De>>3,ee[oe+16]=He+Be>>3,ee[oe+32]=Ie-De>>3,ee[oe+48]=He-Be>>3,oe+=64}function Vt(C,M,ee){var oe,be=M-32,Te=xi,Ie=255-C[be-1];for(oe=0;oe<ee;++oe){var De,Be=Te,He=Ie+C[M-1];for(De=0;De<ee;++De)C[M+De]=Be[He+C[be+De]];M+=32}}function Ma(C,M){Vt(C,M,4)}function Ca(C,M){Vt(C,M,8)}function Aa(C,M){Vt(C,M,16)}function ar(C,M){var ee;for(ee=0;16>ee;++ee)a(C,M+32*ee,C,M-32,16)}function nn(C,M){var ee;for(ee=16;0<ee;--ee)s(C,M,C[M-1],16),M+=32}function Ra(C,M,ee){var oe;for(oe=0;16>oe;++oe)s(M,ee+32*oe,C,16)}function Zn(C,M){var ee,oe=16;for(ee=0;16>ee;++ee)oe+=C[M-1+32*ee]+C[M+ee-32];Ra(oe>>5,C,M)}function kn(C,M){var ee,oe=8;for(ee=0;16>ee;++ee)oe+=C[M-1+32*ee];Ra(oe>>4,C,M)}function Ar(C,M){var ee,oe=8;for(ee=0;16>ee;++ee)oe+=C[M+ee-32];Ra(oe>>4,C,M)}function an(C,M){Ra(128,C,M)}function dr(C,M,ee){return C+2*M+ee+2>>2}function Mn(C,M){var ee,oe=M-32;for(oe=new Uint8Array([dr(C[oe-1],C[oe+0],C[oe+1]),dr(C[oe+0],C[oe+1],C[oe+2]),dr(C[oe+1],C[oe+2],C[oe+3]),dr(C[oe+2],C[oe+3],C[oe+4])]),ee=0;4>ee;++ee)a(C,M+32*ee,oe,0,oe.length)}function Or(C,M){var ee=C[M-1],oe=C[M-1+32],be=C[M-1+64],Te=C[M-1+96];le(C,M+0,16843009*dr(C[M-1-32],ee,oe)),le(C,M+32,16843009*dr(ee,oe,be)),le(C,M+64,16843009*dr(oe,be,Te)),le(C,M+96,16843009*dr(be,Te,Te))}function Ba(C,M){var ee,oe=4;for(ee=0;4>ee;++ee)oe+=C[M+ee-32]+C[M-1+32*ee];for(oe>>=3,ee=0;4>ee;++ee)s(C,M+32*ee,oe,4)}function ho(C,M){var ee=C[M-1+0],oe=C[M-1+32],be=C[M-1+64],Te=C[M-1-32],Ie=C[M+0-32],De=C[M+1-32],Be=C[M+2-32],He=C[M+3-32];C[M+0+96]=dr(oe,be,C[M-1+96]),C[M+1+96]=C[M+0+64]=dr(ee,oe,be),C[M+2+96]=C[M+1+64]=C[M+0+32]=dr(Te,ee,oe),C[M+3+96]=C[M+2+64]=C[M+1+32]=C[M+0+0]=dr(Ie,Te,ee),C[M+3+64]=C[M+2+32]=C[M+1+0]=dr(De,Ie,Te),C[M+3+32]=C[M+2+0]=dr(Be,De,Ie),C[M+3+0]=dr(He,Be,De)}function bs(C,M){var ee=C[M+1-32],oe=C[M+2-32],be=C[M+3-32],Te=C[M+4-32],Ie=C[M+5-32],De=C[M+6-32],Be=C[M+7-32];C[M+0+0]=dr(C[M+0-32],ee,oe),C[M+1+0]=C[M+0+32]=dr(ee,oe,be),C[M+2+0]=C[M+1+32]=C[M+0+64]=dr(oe,be,Te),C[M+3+0]=C[M+2+32]=C[M+1+64]=C[M+0+96]=dr(be,Te,Ie),C[M+3+32]=C[M+2+64]=C[M+1+96]=dr(Te,Ie,De),C[M+3+64]=C[M+2+96]=dr(Ie,De,Be),C[M+3+96]=dr(De,Be,Be)}function ys(C,M){var ee=C[M-1+0],oe=C[M-1+32],be=C[M-1+64],Te=C[M-1-32],Ie=C[M+0-32],De=C[M+1-32],Be=C[M+2-32],He=C[M+3-32];C[M+0+0]=C[M+1+64]=Te+Ie+1>>1,C[M+1+0]=C[M+2+64]=Ie+De+1>>1,C[M+2+0]=C[M+3+64]=De+Be+1>>1,C[M+3+0]=Be+He+1>>1,C[M+0+96]=dr(be,oe,ee),C[M+0+64]=dr(oe,ee,Te),C[M+0+32]=C[M+1+96]=dr(ee,Te,Ie),C[M+1+32]=C[M+2+96]=dr(Te,Ie,De),C[M+2+32]=C[M+3+96]=dr(Ie,De,Be),C[M+3+32]=dr(De,Be,He)}function ws(C,M){var ee=C[M+0-32],oe=C[M+1-32],be=C[M+2-32],Te=C[M+3-32],Ie=C[M+4-32],De=C[M+5-32],Be=C[M+6-32],He=C[M+7-32];C[M+0+0]=ee+oe+1>>1,C[M+1+0]=C[M+0+64]=oe+be+1>>1,C[M+2+0]=C[M+1+64]=be+Te+1>>1,C[M+3+0]=C[M+2+64]=Te+Ie+1>>1,C[M+0+32]=dr(ee,oe,be),C[M+1+32]=C[M+0+96]=dr(oe,be,Te),C[M+2+32]=C[M+1+96]=dr(be,Te,Ie),C[M+3+32]=C[M+2+96]=dr(Te,Ie,De),C[M+3+64]=dr(Ie,De,Be),C[M+3+96]=dr(De,Be,He)}function mo(C,M){var ee=C[M-1+0],oe=C[M-1+32],be=C[M-1+64],Te=C[M-1+96];C[M+0+0]=ee+oe+1>>1,C[M+2+0]=C[M+0+32]=oe+be+1>>1,C[M+2+32]=C[M+0+64]=be+Te+1>>1,C[M+1+0]=dr(ee,oe,be),C[M+3+0]=C[M+1+32]=dr(oe,be,Te),C[M+3+32]=C[M+1+64]=dr(be,Te,Te),C[M+3+64]=C[M+2+64]=C[M+0+96]=C[M+1+96]=C[M+2+96]=C[M+3+96]=Te}function ml(C,M){var ee=C[M-1+0],oe=C[M-1+32],be=C[M-1+64],Te=C[M-1+96],Ie=C[M-1-32],De=C[M+0-32],Be=C[M+1-32],He=C[M+2-32];C[M+0+0]=C[M+2+32]=ee+Ie+1>>1,C[M+0+32]=C[M+2+64]=oe+ee+1>>1,C[M+0+64]=C[M+2+96]=be+oe+1>>1,C[M+0+96]=Te+be+1>>1,C[M+3+0]=dr(De,Be,He),C[M+2+0]=dr(Ie,De,Be),C[M+1+0]=C[M+3+32]=dr(ee,Ie,De),C[M+1+32]=C[M+3+64]=dr(oe,ee,Ie),C[M+1+64]=C[M+3+96]=dr(be,oe,ee),C[M+1+96]=dr(Te,be,oe)}function zu(C,M){var ee;for(ee=0;8>ee;++ee)a(C,M+32*ee,C,M-32,8)}function po(C,M){var ee;for(ee=0;8>ee;++ee)s(C,M,C[M-1],8),M+=32}function Wi(C,M,ee){var oe;for(oe=0;8>oe;++oe)s(M,ee+32*oe,C,8)}function mi(C,M){var ee,oe=8;for(ee=0;8>ee;++ee)oe+=C[M+ee-32]+C[M-1+32*ee];Wi(oe>>4,C,M)}function rc(C,M){var ee,oe=4;for(ee=0;8>ee;++ee)oe+=C[M+ee-32];Wi(oe>>3,C,M)}function Ge(C,M){var ee,oe=4;for(ee=0;8>ee;++ee)oe+=C[M-1+32*ee];Wi(oe>>3,C,M)}function wr(C,M){Wi(128,C,M)}function qr(C,M,ee){var oe=C[M-ee],be=C[M+0],Te=3*(be-oe)+zo[1020+C[M-2*ee]-C[M+ee]],Ie=Fl[112+(Te+4>>3)];C[M-ee]=xi[255+oe+Fl[112+(Te+3>>3)]],C[M+0]=xi[255+be-Ie]}function Kr(C,M,ee,oe){var be=C[M+0],Te=C[M+ee];return gi[255+C[M-2*ee]-C[M-ee]]>oe||gi[255+Te-be]>oe}function bn(C,M,ee,oe){return 4*gi[255+C[M-ee]-C[M+0]]+gi[255+C[M-2*ee]-C[M+ee]]<=oe}function Hn(C,M,ee,oe,be){var Te=C[M-3*ee],Ie=C[M-2*ee],De=C[M-ee],Be=C[M+0],He=C[M+ee],nt=C[M+2*ee],wt=C[M+3*ee];return 4*gi[255+De-Be]+gi[255+Ie-He]>oe?0:gi[255+C[M-4*ee]-Te]<=be&&gi[255+Te-Ie]<=be&&gi[255+Ie-De]<=be&&gi[255+wt-nt]<=be&&gi[255+nt-He]<=be&&gi[255+He-Be]<=be}function ma(C,M,ee,oe){var be=2*oe+1;for(oe=0;16>oe;++oe)bn(C,M+oe,ee,be)&&qr(C,M+oe,ee)}function Ua(C,M,ee,oe){var be=2*oe+1;for(oe=0;16>oe;++oe)bn(C,M+oe*ee,1,be)&&qr(C,M+oe*ee,1)}function Ns(C,M,ee,oe){var be;for(be=3;0<be;--be)ma(C,M+=4*ee,ee,oe)}function Rf(C,M,ee,oe){var be;for(be=3;0<be;--be)Ua(C,M+=4,ee,oe)}function Gi(C,M,ee,oe,be,Te,Ie,De){for(Te=2*Te+1;0<be--;){if(Hn(C,M,ee,Te,Ie))if(Kr(C,M,ee,De))qr(C,M,ee);else{var Be=C,He=M,nt=ee,wt=Be[He-2*nt],Nt=Be[He-nt],pt=Be[He+0],Ht=Be[He+nt],Tt=Be[He+2*nt],ot=27*(It=zo[1020+3*(pt-Nt)+zo[1020+wt-Ht]])+63>>7,at=18*It+63>>7,It=9*It+63>>7;Be[He-3*nt]=xi[255+Be[He-3*nt]+It],Be[He-2*nt]=xi[255+wt+at],Be[He-nt]=xi[255+Nt+ot],Be[He+0]=xi[255+pt-ot],Be[He+nt]=xi[255+Ht-at],Be[He+2*nt]=xi[255+Tt-It]}M+=oe}}function Ai(C,M,ee,oe,be,Te,Ie,De){for(Te=2*Te+1;0<be--;){if(Hn(C,M,ee,Te,Ie))if(Kr(C,M,ee,De))qr(C,M,ee);else{var Be=C,He=M,nt=ee,wt=Be[He-nt],Nt=Be[He+0],pt=Be[He+nt],Ht=Fl[112+((Tt=3*(Nt-wt))+4>>3)],Tt=Fl[112+(Tt+3>>3)],ot=Ht+1>>1;Be[He-2*nt]=xi[255+Be[He-2*nt]+ot],Be[He-nt]=xi[255+wt+Tt],Be[He+0]=xi[255+Nt-Ht],Be[He+nt]=xi[255+pt-ot]}M+=oe}}function Ol(C,M,ee,oe,be,Te){Gi(C,M,ee,1,16,oe,be,Te)}function js(C,M,ee,oe,be,Te){Gi(C,M,1,ee,16,oe,be,Te)}function xo(C,M,ee,oe,be,Te){var Ie;for(Ie=3;0<Ie;--Ie)Ai(C,M+=4*ee,ee,1,16,oe,be,Te)}function Fo(C,M,ee,oe,be,Te){var Ie;for(Ie=3;0<Ie;--Ie)Ai(C,M+=4,1,ee,16,oe,be,Te)}function xd(C,M,ee,oe,be,Te,Ie,De){Gi(C,M,be,1,8,Te,Ie,De),Gi(ee,oe,be,1,8,Te,Ie,De)}function Ac(C,M,ee,oe,be,Te,Ie,De){Gi(C,M,1,be,8,Te,Ie,De),Gi(ee,oe,1,be,8,Te,Ie,De)}function gd(C,M,ee,oe,be,Te,Ie,De){Ai(C,M+4*be,be,1,8,Te,Ie,De),Ai(ee,oe+4*be,be,1,8,Te,Ie,De)}function pl(C,M,ee,oe,be,Te,Ie,De){Ai(C,M+4,1,be,8,Te,Ie,De),Ai(ee,oe+4,1,be,8,Te,Ie,De)}function Ei(){this.ba=new Dr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Mo(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function vd(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Hu(){this.ua=0,this.Wa=new Z,this.vb=new Z,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new _}function au(){this.xb=this.a=0,this.l=new aa,this.ca=new Dr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Hu,this.ab=0,this.gc=o(4,vd),this.Oc=0}function Ec(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new aa,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ja(C,M,ee,oe,be,Te,Ie){for(C=C==null?0:C[M+0],M=0;M<Ie;++M)be[Te+M]=C+ee[oe+M]&255,C=be[Te+M]}function Wu(C,M,ee,oe,be,Te,Ie){var De;if(C==null)ja(null,null,ee,oe,be,Te,Ie);else for(De=0;De<Ie;++De)be[Te+De]=C[M+De]+ee[oe+De]&255}function nc(C,M,ee,oe,be,Te,Ie){if(C==null)ja(null,null,ee,oe,be,Te,Ie);else{var De,Be=C[M+0],He=Be,nt=Be;for(De=0;De<Ie;++De)He=nt+(Be=C[M+De])-He,nt=ee[oe+De]+(-256&He?0>He?0:255:He)&255,He=Be,be[Te+De]=nt}}function su(C,M,ee,oe){var be=M.width,Te=M.o;if(t(C!=null&&M!=null),0>ee||0>=oe||ee+oe>Te)return null;if(!C.Cc){if(C.ga==null){var Ie;if(C.ga=new Ec,(Ie=C.ga==null)||(Ie=M.width*M.o,t(C.Gb.length==0),C.Gb=i(Ie),C.Uc=0,C.Gb==null?Ie=0:(C.mb=C.Gb,C.nb=C.Uc,C.rc=null,Ie=1),Ie=!Ie),!Ie){Ie=C.ga;var De=C.Fa,Be=C.P,He=C.qc,nt=C.mb,wt=C.nb,Nt=Be+1,pt=He-1,Ht=Ie.l;if(t(De!=null&&nt!=null&&M!=null),ds[0]=null,ds[1]=ja,ds[2]=Wu,ds[3]=nc,Ie.ca=nt,Ie.tb=wt,Ie.c=M.width,Ie.i=M.height,t(0<Ie.c&&0<Ie.i),1>=He)M=0;else if(Ie.$a=De[Be+0]>>0&3,Ie.Z=De[Be+0]>>2&3,Ie.Lc=De[Be+0]>>4&3,Be=De[Be+0]>>6&3,0>Ie.$a||1<Ie.$a||4<=Ie.Z||1<Ie.Lc||Be)M=0;else if(Ht.put=_r,Ht.ac=Jr,Ht.bc=Wr,Ht.ma=Ie,Ht.width=M.width,Ht.height=M.height,Ht.Da=M.Da,Ht.v=M.v,Ht.va=M.va,Ht.j=M.j,Ht.o=M.o,Ie.$a)e:{t(Ie.$a==1),M=mt();t:for(;;){if(M==null){M=0;break e}if(t(Ie!=null),Ie.mc=M,M.c=Ie.c,M.i=Ie.i,M.l=Ie.l,M.l.ma=Ie,M.l.width=Ie.c,M.l.height=Ie.i,M.a=0,re(M.m,De,Nt,pt),!lt(Ie.c,Ie.i,1,M,null)||(M.ab==1&&M.gc[0].hc==3&&$e(M.s)?(Ie.ic=1,De=M.c*M.i,M.Ta=null,M.Ua=0,M.V=i(De),M.Ba=0,M.V==null?(M.a=1,M=0):M=1):(Ie.ic=0,M=xt(M,Ie.c)),!M))break t;M=1;break e}Ie.mc=null,M=0}else M=pt>=Ie.c*Ie.i;Ie=!M}if(Ie)return null;C.ga.Lc!=1?C.Ga=0:oe=Te-ee}t(C.ga!=null),t(ee+oe<=Te);e:{if(M=(De=C.ga).c,Te=De.l.o,De.$a==0){if(Nt=C.rc,pt=C.Vc,Ht=C.Fa,Be=C.P+1+ee*M,He=C.mb,nt=C.nb+ee*M,t(Be<=C.P+C.qc),De.Z!=0)for(t(ds[De.Z]!=null),Ie=0;Ie<oe;++Ie)ds[De.Z](Nt,pt,Ht,Be,He,nt,M),Nt=He,pt=nt,nt+=M,Be+=M;else for(Ie=0;Ie<oe;++Ie)a(He,nt,Ht,Be,M),Nt=He,pt=nt,nt+=M,Be+=M;C.rc=Nt,C.Vc=pt}else{if(t(De.mc!=null),M=ee+oe,t((Ie=De.mc)!=null),t(M<=Ie.i),Ie.C>=M)M=1;else if(De.ic||yt(),De.ic){De=Ie.V,Nt=Ie.Ba,pt=Ie.c;var Tt=Ie.i,ot=(Ht=1,Be=Ie.$/pt,He=Ie.$%pt,nt=Ie.m,wt=Ie.s,Ie.$),at=pt*Tt,It=pt*M,Pt=wt.wc,Ut=ot<It?Fr(wt,He,Be):null;t(ot<=at),t(M<=Tt),t($e(wt));t:for(;;){for(;!nt.h&&ot<It;){if(He&Pt||(Ut=Fr(wt,He,Be)),t(Ut!=null),K(nt),256>(Tt=vn(Ut.G[0],Ut.H[0],nt)))De[Nt+ot]=Tt,++ot,++He>=pt&&(He=0,++Be<=M&&!(Be%16)&&_e(Ie,Be));else{if(!(280>Tt)){Ht=0;break t}Tt=en(Tt-256,nt);var fr,or=vn(Ut.G[4],Ut.H[4],nt);if(K(nt),!(ot>=(or=Gr(pt,or=en(or,nt)))&&at-ot>=Tt)){Ht=0;break t}for(fr=0;fr<Tt;++fr)De[Nt+ot+fr]=De[Nt+ot+fr-or];for(ot+=Tt,He+=Tt;He>=pt;)He-=pt,++Be<=M&&!(Be%16)&&_e(Ie,Be);ot<It&&He&Pt&&(Ut=Fr(wt,He,Be))}t(nt.h==G(nt))}_e(Ie,Be>M?M:Be);break t}!Ht||nt.h&&ot<at?(Ht=0,Ie.a=nt.h?5:3):Ie.$=ot,M=Ht}else M=Fe(Ie,Ie.V,Ie.Ba,Ie.c,Ie.i,M,ge);if(!M){oe=0;break e}}ee+oe>=Te&&(C.Cc=1),oe=1}if(!oe)return null;if(C.Cc&&((oe=C.ga)!=null&&(oe.mc=null),C.ga=null,0<C.Ga))return alert("todo:WebPDequantizeLevels"),null}return C.nb+ee*be}function V(C,M,ee,oe,be,Te){for(;0<be--;){var Ie,De=C,Be=M+(ee?1:0),He=C,nt=M+(ee?0:3);for(Ie=0;Ie<oe;++Ie){var wt=He[nt+4*Ie];wt!=255&&(wt*=32897,De[Be+4*Ie+0]=De[Be+4*Ie+0]*wt>>23,De[Be+4*Ie+1]=De[Be+4*Ie+1]*wt>>23,De[Be+4*Ie+2]=De[Be+4*Ie+2]*wt>>23)}M+=Te}}function Ne(C,M,ee,oe,be){for(;0<oe--;){var Te;for(Te=0;Te<ee;++Te){var Ie=C[M+2*Te+0],De=15&(He=C[M+2*Te+1]),Be=4369*De,He=(240&He|He>>4)*Be>>16;C[M+2*Te+0]=(240&Ie|Ie>>4)*Be>>16&240|(15&Ie|Ie<<4)*Be>>16>>4&15,C[M+2*Te+1]=240&He|De}M+=be}}function Ye(C,M,ee,oe,be,Te,Ie,De){var Be,He,nt=255;for(He=0;He<be;++He){for(Be=0;Be<oe;++Be){var wt=C[M+Be];Te[Ie+4*Be]=wt,nt&=wt}M+=ee,Ie+=De}return nt!=255}function rt(C,M,ee,oe,be){var Te;for(Te=0;Te<be;++Te)ee[oe+Te]=C[M+Te]>>8}function yt(){Cs=V,ia=Ne,ea=Ye,On=rt}function Ft(C,M,ee){P[C]=function(oe,be,Te,Ie,De,Be,He,nt,wt,Nt,pt,Ht,Tt,ot,at,It,Pt){var Ut,fr=Pt-1>>1,or=De[Be+0]|He[nt+0]<<16,Qr=wt[Nt+0]|pt[Ht+0]<<16;t(oe!=null);var gr=3*or+Qr+131074>>2;for(M(oe[be+0],255&gr,gr>>16,Tt,ot),Te!=null&&(gr=3*Qr+or+131074>>2,M(Te[Ie+0],255&gr,gr>>16,at,It)),Ut=1;Ut<=fr;++Ut){var Sn=De[Be+Ut]|He[nt+Ut]<<16,Fn=wt[Nt+Ut]|pt[Ht+Ut]<<16,Pn=or+Sn+Qr+Fn+524296,mn=Pn+2*(Sn+Qr)>>3;gr=mn+or>>1,or=(Pn=Pn+2*(or+Fn)>>3)+Sn>>1,M(oe[be+2*Ut-1],255&gr,gr>>16,Tt,ot+(2*Ut-1)*ee),M(oe[be+2*Ut-0],255&or,or>>16,Tt,ot+(2*Ut-0)*ee),Te!=null&&(gr=Pn+Qr>>1,or=mn+Fn>>1,M(Te[Ie+2*Ut-1],255&gr,gr>>16,at,It+(2*Ut-1)*ee),M(Te[Ie+2*Ut+0],255&or,or>>16,at,It+(2*Ut+0)*ee)),or=Sn,Qr=Fn}1&Pt||(gr=3*or+Qr+131074>>2,M(oe[be+Pt-1],255&gr,gr>>16,Tt,ot+(Pt-1)*ee),Te!=null&&(gr=3*Qr+or+131074>>2,M(Te[Ie+Pt-1],255&gr,gr>>16,at,It+(Pt-1)*ee)))}}function Qt(){Ji[Gu]=bp,Ji[ac]=Fc,Ji[Kh]=$f,Ji[du]=Ml,Ji[Vu]=Mc,Ji[pa]=Zu,Ji[Bf]=zf,Ji[Ic]=Fc,Ji[kd]=Ml,Ji[uu]=Mc,Ji[Ku]=Zu}function Nr(C){return C&-16384?0>C?0:255:C>>Rc}function Yr(C,M){return Nr((19077*C>>8)+(26149*M>>8)-14234)}function fn(C,M,ee){return Nr((19077*C>>8)-(6419*M>>8)-(13320*ee>>8)+8708)}function sn(C,M){return Nr((19077*C>>8)+(33050*M>>8)-17685)}function Tn(C,M,ee,oe,be){oe[be+0]=Yr(C,ee),oe[be+1]=fn(C,M,ee),oe[be+2]=sn(C,M)}function Ga(C,M,ee,oe,be){oe[be+0]=sn(C,M),oe[be+1]=fn(C,M,ee),oe[be+2]=Yr(C,ee)}function Va(C,M,ee,oe,be){var Te=fn(C,M,ee);M=Te<<3&224|sn(C,M)>>3,oe[be+0]=248&Yr(C,ee)|Te>>5,oe[be+1]=M}function ks(C,M,ee,oe,be){var Te=240&sn(C,M)|15;oe[be+0]=240&Yr(C,ee)|fn(C,M,ee)>>4,oe[be+1]=Te}function Zs(C,M,ee,oe,be){oe[be+0]=255,Tn(C,M,ee,oe,be+1)}function qs(C,M,ee,oe,be){Ga(C,M,ee,oe,be),oe[be+3]=255}function Ro(C,M,ee,oe,be){Tn(C,M,ee,oe,be),oe[be+3]=255}function ei(C,M){return 0>C?0:C>M?M:C}function go(C,M,ee){P[C]=function(oe,be,Te,Ie,De,Be,He,nt,wt){for(var Nt=nt+(-2&wt)*ee;nt!=Nt;)M(oe[be+0],Te[Ie+0],De[Be+0],He,nt),M(oe[be+1],Te[Ie+0],De[Be+0],He,nt+ee),be+=2,++Ie,++Be,nt+=2*ee;1&wt&&M(oe[be+0],Te[Ie+0],De[Be+0],He,nt)}}function vo(C,M,ee){return ee==0?C==0?M==0?6:5:M==0?4:0:ee}function iu(C,M,ee,oe,be){switch(C>>>30){case 3:gl(M,ee,oe,be,0);break;case 2:Xn(M,ee,oe,be);break;case 1:ti(M,ee,oe,be)}}function ou(C,M){var ee,oe,be=M.M,Te=M.Nb,Ie=C.oc,De=C.pc+40,Be=C.oc,He=C.pc+584,nt=C.oc,wt=C.pc+600;for(ee=0;16>ee;++ee)Ie[De+32*ee-1]=129;for(ee=0;8>ee;++ee)Be[He+32*ee-1]=129,nt[wt+32*ee-1]=129;for(0<be?Ie[De-1-32]=Be[He-1-32]=nt[wt-1-32]=129:(s(Ie,De-32-1,127,21),s(Be,He-32-1,127,9),s(nt,wt-32-1,127,9)),oe=0;oe<C.za;++oe){var Nt=M.ya[M.aa+oe];if(0<oe){for(ee=-1;16>ee;++ee)a(Ie,De+32*ee-4,Ie,De+32*ee+12,4);for(ee=-1;8>ee;++ee)a(Be,He+32*ee-4,Be,He+32*ee+4,4),a(nt,wt+32*ee-4,nt,wt+32*ee+4,4)}var pt=C.Gd,Ht=C.Hd+oe,Tt=Nt.ad,ot=Nt.Hc;if(0<be&&(a(Ie,De-32,pt[Ht].y,0,16),a(Be,He-32,pt[Ht].f,0,8),a(nt,wt-32,pt[Ht].ea,0,8)),Nt.Za){var at=Ie,It=De-32+16;for(0<be&&(oe>=C.za-1?s(at,It,pt[Ht].y[15],4):a(at,It,pt[Ht+1].y,0,4)),ee=0;4>ee;ee++)at[It+128+ee]=at[It+256+ee]=at[It+384+ee]=at[It+0+ee];for(ee=0;16>ee;++ee,ot<<=2)at=Ie,It=De+U0[ee],wo[Nt.Ob[ee]](at,It),iu(ot,Tt,16*+ee,at,It)}else if(at=vo(oe,be,Nt.Ob[0]),cs[at](Ie,De),ot!=0)for(ee=0;16>ee;++ee,ot<<=2)iu(ot,Tt,16*+ee,Ie,De+U0[ee]);for(ee=Nt.Gc,at=vo(oe,be,Nt.Dd),Pi[at](Be,He),Pi[at](nt,wt),ot=Tt,at=Be,It=He,255&(Nt=ee>>0)&&(170&Nt?Il(ot,256,at,It):Ti(ot,256,at,It)),Nt=nt,ot=wt,255&(ee>>=8)&&(170&ee?Il(Tt,320,Nt,ot):Ti(Tt,320,Nt,ot)),be<C.Ub-1&&(a(pt[Ht].y,0,Ie,De+480,16),a(pt[Ht].f,0,Be,He+224,8),a(pt[Ht].ea,0,nt,wt+224,8)),ee=8*Te*C.B,pt=C.sa,Ht=C.ta+16*oe+16*Te*C.R,Tt=C.qa,Nt=C.ra+8*oe+ee,ot=C.Ha,at=C.Ia+8*oe+ee,ee=0;16>ee;++ee)a(pt,Ht+ee*C.R,Ie,De+32*ee,16);for(ee=0;8>ee;++ee)a(Tt,Nt+ee*C.B,Be,He+32*ee,8),a(ot,at+ee*C.B,nt,wt+32*ee,8)}}function Tc(C,M,ee,oe,be,Te,Ie,De,Be){var He=[0],nt=[0],wt=0,Nt=Be!=null?Be.kd:0,pt=Be??new Mo;if(C==null||12>ee)return 7;pt.data=C,pt.w=M,pt.ha=ee,M=[M],ee=[ee],pt.gb=[pt.gb];e:{var Ht=M,Tt=ee,ot=pt.gb;if(t(C!=null),t(Tt!=null),t(ot!=null),ot[0]=0,12<=Tt[0]&&!r(C,Ht[0],"RIFF")){if(r(C,Ht[0]+8,"WEBP")){ot=3;break e}var at=Ue(C,Ht[0]+4);if(12>at||4294967286<at){ot=3;break e}if(Nt&&at>Tt[0]-8){ot=7;break e}ot[0]=at,Ht[0]+=12,Tt[0]-=12}ot=0}if(ot!=0)return ot;for(at=0<pt.gb[0],ee=ee[0];;){e:{var It=C;Tt=M,ot=ee;var Pt=He,Ut=nt,fr=Ht=[0];if((gr=wt=[wt])[0]=0,8>ot[0])ot=7;else{if(!r(It,Tt[0],"VP8X")){if(Ue(It,Tt[0]+4)!=10){ot=3;break e}if(18>ot[0]){ot=7;break e}var or=Ue(It,Tt[0]+8),Qr=1+ue(It,Tt[0]+12);if(2147483648<=Qr*(It=1+ue(It,Tt[0]+15))){ot=3;break e}fr!=null&&(fr[0]=or),Pt!=null&&(Pt[0]=Qr),Ut!=null&&(Ut[0]=It),Tt[0]+=18,ot[0]-=18,gr[0]=1}ot=0}}if(wt=wt[0],Ht=Ht[0],ot!=0)return ot;if(Tt=!!(2&Ht),!at&&wt)return 3;if(Te!=null&&(Te[0]=!!(16&Ht)),Ie!=null&&(Ie[0]=Tt),De!=null&&(De[0]=0),Ie=He[0],Ht=nt[0],wt&&Tt&&Be==null){ot=0;break}if(4>ee){ot=7;break}if(at&&wt||!at&&!wt&&!r(C,M[0],"ALPH")){ee=[ee],pt.na=[pt.na],pt.P=[pt.P],pt.Sa=[pt.Sa];e:{or=C,ot=M,at=ee;var gr=pt.gb;Pt=pt.na,Ut=pt.P,fr=pt.Sa,Qr=22,t(or!=null),t(at!=null),It=ot[0];var Sn=at[0];for(t(Pt!=null),t(fr!=null),Pt[0]=null,Ut[0]=null,fr[0]=0;;){if(ot[0]=It,at[0]=Sn,8>Sn){ot=7;break e}var Fn=Ue(or,It+4);if(4294967286<Fn){ot=3;break e}var Pn=8+Fn+1&-2;if(Qr+=Pn,0<gr&&Qr>gr){ot=3;break e}if(!r(or,It,"VP8 ")||!r(or,It,"VP8L")){ot=0;break e}if(Sn[0]<Pn){ot=7;break e}r(or,It,"ALPH")||(Pt[0]=or,Ut[0]=It+8,fr[0]=Fn),It+=Pn,Sn-=Pn}}if(ee=ee[0],pt.na=pt.na[0],pt.P=pt.P[0],pt.Sa=pt.Sa[0],ot!=0)break}ee=[ee],pt.Ja=[pt.Ja],pt.xa=[pt.xa];e:if(gr=C,ot=M,at=ee,Pt=pt.gb[0],Ut=pt.Ja,fr=pt.xa,or=ot[0],It=!r(gr,or,"VP8 "),Qr=!r(gr,or,"VP8L"),t(gr!=null),t(at!=null),t(Ut!=null),t(fr!=null),8>at[0])ot=7;else{if(It||Qr){if(gr=Ue(gr,or+4),12<=Pt&&gr>Pt-12){ot=3;break e}if(Nt&&gr>at[0]-8){ot=7;break e}Ut[0]=gr,ot[0]+=8,at[0]-=8,fr[0]=Qr}else fr[0]=5<=at[0]&&gr[or+0]==47&&!(gr[or+4]>>5),Ut[0]=at[0];ot=0}if(ee=ee[0],pt.Ja=pt.Ja[0],pt.xa=pt.xa[0],M=M[0],ot!=0)break;if(4294967286<pt.Ja)return 3;if(De==null||Tt||(De[0]=pt.xa?2:1),Ie=[Ie],Ht=[Ht],pt.xa){if(5>ee){ot=7;break}De=Ie,Nt=Ht,Tt=Te,C==null||5>ee?C=0:5<=ee&&C[M+0]==47&&!(C[M+4]>>5)?(at=[0],gr=[0],Pt=[0],re(Ut=new O,C,M,ee),sr(Ut,at,gr,Pt)?(De!=null&&(De[0]=at[0]),Nt!=null&&(Nt[0]=gr[0]),Tt!=null&&(Tt[0]=Pt[0]),C=1):C=0):C=0}else{if(10>ee){ot=7;break}De=Ht,C==null||10>ee||!Lo(C,M+3,ee-3)?C=0:(Nt=C[M+0]|C[M+1]<<8|C[M+2]<<16,Tt=16383&(C[M+7]<<8|C[M+6]),C=16383&(C[M+9]<<8|C[M+8]),1&Nt||3<(Nt>>1&7)||!(Nt>>4&1)||Nt>>5>=pt.Ja||!Tt||!C?C=0:(Ie&&(Ie[0]=Tt),De&&(De[0]=C),C=1))}if(!C||(Ie=Ie[0],Ht=Ht[0],wt&&(He[0]!=Ie||nt[0]!=Ht)))return 3;Be!=null&&(Be[0]=pt,Be.offset=M-Be.w,t(4294967286>M-Be.w),t(Be.offset==Be.ha-ee));break}return ot==0||ot==7&&wt&&Be==null?(Te!=null&&(Te[0]|=pt.na!=null&&0<pt.na.length),oe!=null&&(oe[0]=Ie),be!=null&&(be[0]=Ht),0):ot}function bd(C,M,ee){var oe=M.width,be=M.height,Te=0,Ie=0,De=oe,Be=be;if(M.Da=C!=null&&0<C.Da,M.Da&&(De=C.cd,Be=C.bd,Te=C.v,Ie=C.j,11>ee||(Te&=-2,Ie&=-2),0>Te||0>Ie||0>=De||0>=Be||Te+De>oe||Ie+Be>be))return 0;if(M.v=Te,M.j=Ie,M.va=Te+De,M.o=Ie+Be,M.U=De,M.T=Be,M.da=C!=null&&0<C.da,M.da){if(!Ee(De,Be,ee=[C.ib],Te=[C.hb]))return 0;M.ib=ee[0],M.hb=Te[0]}return M.ob=C!=null&&C.ob,M.Kb=C==null||!C.Sd,M.da&&(M.ob=M.ib<3*oe/4&&M.hb<3*be/4,M.Kb=0),1}function yd(C){if(C==null)return 2;if(11>C.S){var M=C.f.RGBA;M.fb+=(C.height-1)*M.A,M.A=-M.A}else M=C.f.kb,C=C.height,M.O+=(C-1)*M.fa,M.fa=-M.fa,M.N+=(C-1>>1)*M.Ab,M.Ab=-M.Ab,M.W+=(C-1>>1)*M.Db,M.Db=-M.Db,M.F!=null&&(M.J+=(C-1)*M.lb,M.lb=-M.lb);return 0}function wd(C,M,ee,oe){if(oe==null||0>=C||0>=M)return 2;if(ee!=null){if(ee.Da){var be=ee.cd,Te=ee.bd,Ie=-2&ee.v,De=-2&ee.j;if(0>Ie||0>De||0>=be||0>=Te||Ie+be>C||De+Te>M)return 2;C=be,M=Te}if(ee.da){if(!Ee(C,M,be=[ee.ib],Te=[ee.hb]))return 2;C=be[0],M=Te[0]}}oe.width=C,oe.height=M;e:{var Be=oe.width,He=oe.height;if(C=oe.S,0>=Be||0>=He||!(C>=Gu&&13>C))C=2;else{if(0>=oe.Rd&&oe.sd==null){Ie=Te=be=M=0;var nt=(De=Be*qa[C])*He;if(11>C||(Te=(He+1)/2*(M=(Be+1)/2),C==12&&(Ie=(be=Be)*He)),(He=i(nt+2*Te+Ie))==null){C=1;break e}oe.sd=He,11>C?((Be=oe.f.RGBA).eb=He,Be.fb=0,Be.A=De,Be.size=nt):((Be=oe.f.kb).y=He,Be.O=0,Be.fa=De,Be.Fd=nt,Be.f=He,Be.N=0+nt,Be.Ab=M,Be.Cd=Te,Be.ea=He,Be.W=0+nt+Te,Be.Db=M,Be.Ed=Te,C==12&&(Be.F=He,Be.J=0+nt+2*Te),Be.Tc=Ie,Be.lb=be)}if(M=1,be=oe.S,Te=oe.width,Ie=oe.height,be>=Gu&&13>be)if(11>be)C=oe.f.RGBA,M&=(De=Math.abs(C.A))*(Ie-1)+Te<=C.size,M&=De>=Te*qa[be],M&=C.eb!=null;else{C=oe.f.kb,De=(Te+1)/2,nt=(Ie+1)/2,Be=Math.abs(C.fa),He=Math.abs(C.Ab);var wt=Math.abs(C.Db),Nt=Math.abs(C.lb),pt=Nt*(Ie-1)+Te;M&=Be*(Ie-1)+Te<=C.Fd,M&=He*(nt-1)+De<=C.Cd,M=(M&=wt*(nt-1)+De<=C.Ed)&Be>=Te&He>=De&wt>=De,M&=C.y!=null,M&=C.f!=null,M&=C.ea!=null,be==12&&(M&=Nt>=Te,M&=pt<=C.Tc,M&=C.F!=null)}else M=0;C=M?0:2}}return C!=0||ee!=null&&ee.fd&&(C=yd(oe)),C}var Ea=64,bo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],xl=24,ns=32,Oc=8,hn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];de("Predictor0","PredictorAdd0"),P.Predictor0=function(){return 4278190080},P.Predictor1=function(C){return C},P.Predictor2=function(C,M,ee){return M[ee+0]},P.Predictor3=function(C,M,ee){return M[ee+1]},P.Predictor4=function(C,M,ee){return M[ee-1]},P.Predictor5=function(C,M,ee){return Ce(Ce(C,M[ee+1]),M[ee+0])},P.Predictor6=function(C,M,ee){return Ce(C,M[ee-1])},P.Predictor7=function(C,M,ee){return Ce(C,M[ee+0])},P.Predictor8=function(C,M,ee){return Ce(M[ee-1],M[ee+0])},P.Predictor9=function(C,M,ee){return Ce(M[ee+0],M[ee+1])},P.Predictor10=function(C,M,ee){return Ce(Ce(C,M[ee-1]),Ce(M[ee+0],M[ee+1]))},P.Predictor11=function(C,M,ee){var oe=M[ee+0];return 0>=fe(oe>>24&255,C>>24&255,(M=M[ee-1])>>24&255)+fe(oe>>16&255,C>>16&255,M>>16&255)+fe(oe>>8&255,C>>8&255,M>>8&255)+fe(255&oe,255&C,255&M)?oe:C},P.Predictor12=function(C,M,ee){var oe=M[ee+0];return(Xe((C>>24&255)+(oe>>24&255)-((M=M[ee-1])>>24&255))<<24|Xe((C>>16&255)+(oe>>16&255)-(M>>16&255))<<16|Xe((C>>8&255)+(oe>>8&255)-(M>>8&255))<<8|Xe((255&C)+(255&oe)-(255&M)))>>>0},P.Predictor13=function(C,M,ee){var oe=M[ee-1];return(xe((C=Ce(C,M[ee+0]))>>24&255,oe>>24&255)<<24|xe(C>>16&255,oe>>16&255)<<16|xe(C>>8&255,oe>>8&255)<<8|xe(C>>0&255,oe>>0&255))>>>0};var os=P.PredictorAdd0;P.PredictorAdd1=Se,de("Predictor2","PredictorAdd2"),de("Predictor3","PredictorAdd3"),de("Predictor4","PredictorAdd4"),de("Predictor5","PredictorAdd5"),de("Predictor6","PredictorAdd6"),de("Predictor7","PredictorAdd7"),de("Predictor8","PredictorAdd8"),de("Predictor9","PredictorAdd9"),de("Predictor10","PredictorAdd10"),de("Predictor11","PredictorAdd11"),de("Predictor12","PredictorAdd12"),de("Predictor13","PredictorAdd13");var ba=P.PredictorAdd2;Re("ColorIndexInverseTransform","MapARGB","32b",(function(C){return C>>8&255}),(function(C){return C})),Re("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(C){return C}),(function(C){return C>>8&255}));var pi,Wn=P.ColorIndexInverseTransform,$s=P.MapARGB,Ka=P.VP8LColorIndexInverseTransformAlpha,Vi=P.MapAlpha,Xa=P.VP8LPredictorsAdd=[];Xa.length=16,(P.VP8LPredictors=[]).length=16,(P.VP8LPredictorsAdd_C=[]).length=16,(P.VP8LPredictors_C=[]).length=16;var Ss,ka,ls,Ki,Pl,Bo,lu,gl,Xn,Il,ti,Ti,Dl,Nd,Ll,Uo,Xi,zs,Yi,Oi,Qi,yo,Pc,_s,Cs,ia,ea,On,Ta=i(511),qo=i(2041),cu=i(225),$o=i(767),jd=0,zo=qo,Fl=cu,xi=$o,gi=Ta,Gu=0,ac=1,Kh=2,du=3,Vu=4,pa=5,Bf=6,Ic=7,kd=8,uu=9,Ku=10,Dc=[2,3,7],Xu=[3,3,11],Sd=[280,256,256,256,40],R0=[0,1,1,1,0],Uf=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Xh=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Yu=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Qu=8,sc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],fu=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],hu=null,qf=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],B0=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Lc=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ic=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],_d=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],vp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Ju=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],cs=[],wo=[],Pi=[],No=1,mu=2,ds=[],Ji=[];Ft("UpsampleRgbLinePair",Tn,3),Ft("UpsampleBgrLinePair",Ga,3),Ft("UpsampleRgbaLinePair",Ro,4),Ft("UpsampleBgraLinePair",qs,4),Ft("UpsampleArgbLinePair",Zs,4),Ft("UpsampleRgba4444LinePair",ks,2),Ft("UpsampleRgb565LinePair",Va,2);var bp=P.UpsampleRgbLinePair,$f=P.UpsampleBgrLinePair,Fc=P.UpsampleRgbaLinePair,Ml=P.UpsampleBgraLinePair,Mc=P.UpsampleArgbLinePair,Zu=P.UpsampleRgba4444LinePair,zf=P.UpsampleRgb565LinePair,Ho=16,vl=1<<Ho-1,ta=-227,oa=482,Rc=6,As=0,vi=i(256),Rl=i(256),Cd=i(256),Zi=i(256),ef=i(oa-ta),Hf=i(oa-ta);go("YuvToRgbRow",Tn,3),go("YuvToBgrRow",Ga,3),go("YuvToRgbaRow",Ro,4),go("YuvToBgraRow",qs,4),go("YuvToArgbRow",Zs,4),go("YuvToRgba4444Row",ks,2),go("YuvToRgb565Row",Va,2);var U0=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Bc=[0,2,8],Yh=[8,7,6,4,4,2,2,2,1,1,1,1],Wo=1;this.WebPDecodeRGBA=function(C,M,ee,oe,be){var Te=ac,Ie=new Ei,De=new Dr;Ie.ba=De,De.S=Te,De.width=[De.width],De.height=[De.height];var Be=De.width,He=De.height,nt=new Hr;if(nt==null||C==null)var wt=2;else t(nt!=null),wt=Tc(C,M,ee,nt.width,nt.height,nt.Pd,nt.Qd,nt.format,null);if(wt!=0?Be=0:(Be!=null&&(Be[0]=nt.width[0]),He!=null&&(He[0]=nt.height[0]),Be=1),Be){De.width=De.width[0],De.height=De.height[0],oe!=null&&(oe[0]=De.width),be!=null&&(be[0]=De.height);e:{if(oe=new aa,(be=new Mo).data=C,be.w=M,be.ha=ee,be.kd=1,M=[0],t(be!=null),((C=Tc(be.data,be.w,be.ha,null,null,null,M,null,be))==0||C==7)&&M[0]&&(C=4),(M=C)==0){if(t(Ie!=null),oe.data=be.data,oe.w=be.w+be.offset,oe.ha=be.ha-be.offset,oe.put=_r,oe.ac=Jr,oe.bc=Wr,oe.ma=Ie,be.xa){if((C=mt())==null){Ie=1;break e}if((function(Nt,pt){var Ht=[0],Tt=[0],ot=[0];t:for(;;){if(Nt==null)return 0;if(pt==null)return Nt.a=2,0;if(Nt.l=pt,Nt.a=0,re(Nt.m,pt.data,pt.w,pt.ha),!sr(Nt.m,Ht,Tt,ot)){Nt.a=3;break t}if(Nt.xb=mu,pt.width=Ht[0],pt.height=Tt[0],!lt(Ht[0],Tt[0],1,Nt,null))break t;return 1}return t(Nt.a!=0),0})(C,oe)){if(oe=(M=wd(oe.width,oe.height,Ie.Oa,Ie.ba))==0){t:{oe=C;r:for(;;){if(oe==null){oe=0;break t}if(t(oe.s.yc!=null),t(oe.s.Ya!=null),t(0<oe.s.Wb),t((ee=oe.l)!=null),t((be=ee.ma)!=null),oe.xb!=0){if(oe.ca=be.ba,oe.tb=be.tb,t(oe.ca!=null),!bd(be.Oa,ee,du)){oe.a=2;break r}if(!xt(oe,ee.width)||ee.da)break r;if((ee.da||Ct(oe.ca.S))&&yt(),11>oe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),oe.ca.f.kb.F!=null&&yt()),oe.Pb&&0<oe.s.ua&&oe.s.vb.X==null&&!Ae(oe.s.vb,oe.s.Wa.Xa)){oe.a=1;break r}oe.xb=0}if(!Fe(oe,oe.V,oe.Ba,oe.c,oe.i,ee.o,ze))break r;be.Dc=oe.Ma,oe=1;break t}t(oe.a!=0),oe=0}oe=!oe}oe&&(M=C.a)}else M=C.a}else{if((C=new Kn)==null){Ie=1;break e}if(C.Fa=be.na,C.P=be.P,C.qc=be.Sa,Na(C,oe)){if((M=wd(oe.width,oe.height,Ie.Oa,Ie.ba))==0){if(C.Aa=0,ee=Ie.Oa,t((be=C)!=null),ee!=null){if(0<(Be=0>(Be=ee.Md)?0:100<Be?255:255*Be/100)){for(He=nt=0;4>He;++He)12>(wt=be.pb[He]).lc&&(wt.ia=Be*Yh[0>wt.lc?0:wt.lc]>>3),nt|=wt.ia;nt&&(alert("todo:VP8InitRandom"),be.ia=1)}be.Ga=ee.Id,100<be.Ga?be.Ga=100:0>be.Ga&&(be.Ga=0)}Ot(C,oe)||(M=C.a)}}else M=C.a}M==0&&Ie.Oa!=null&&Ie.Oa.fd&&(M=yd(Ie.ba))}Ie=M}Te=Ie!=0?null:11>Te?De.f.RGBA.eb:De.f.kb.y}else Te=null;return Te};var qa=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(P,I){for(var B="",T=0;T<4;T++)B+=String.fromCharCode(P[I++]);return B}function u(P,I){return(P[I+0]<<0|P[I+1]<<8|P[I+2]<<16)>>>0}function f(P,I){return(P[I+0]<<0|P[I+1]<<8|P[I+2]<<16|P[I+3]<<24)>>>0}new c;var p=[0],m=[0],b=[],v=new c,g=e,w=(function(P,I){var B={},T=0,_=!1,R=0,z=0;if(B.frames=[],!(function(q,G,U,K){for(var ae=0;ae<K;ae++)if(q[G+ae]!=U.charCodeAt(ae))return!0;return!1})(P,I,"RIFF",4)){var H,Y;for(f(P,I+=4),I+=8;I<P.length;){var J=d(P,I),re=f(P,I+=4);I+=4;var X=re+(1&re);switch(J){case"VP8 ":case"VP8L":B.frames[T]===void 0&&(B.frames[T]={}),(O=B.frames[T]).src_off=_?z:I-8,O.src_size=R+re+8,T++,_&&(_=!1,R=0,z=0);break;case"VP8X":(O=B.header={}).feature_flags=P[I];var te=I+4;O.canvas_width=1+u(P,te),te+=3,O.canvas_height=1+u(P,te),te+=3;break;case"ALPH":_=!0,R=X+8,z=I-8;break;case"ANIM":(O=B.header).bgcolor=f(P,I),te=I+4,O.loop_count=(H=P)[(Y=te)+0]<<0|H[Y+1]<<8,te+=2;break;case"ANMF":var W,O;(O=B.frames[T]={}).offset_x=2*u(P,I),I+=3,O.offset_y=2*u(P,I),I+=3,O.width=1+u(P,I),I+=3,O.height=1+u(P,I),I+=3,O.duration=u(P,I),I+=3,W=P[I++],O.dispose=1&W,O.blend=W>>1&1}J!="ANMF"&&(I+=X)}return B}})(g,0);w.response=g,w.rgbaoutput=!0,w.dataurl=!1;var y=w.header?w.header:null,j=w.frames?w.frames:null;if(y){y.loop_counter=y.loop_count,p=[y.canvas_height],m=[y.canvas_width];for(var N=0;N<j.length&&j[N].blend!=0;N++);}var S=j[0],E=v.WebPDecodeRGBA(g,S.src_off,S.src_size,m,p);S.rgba=E,S.imgwidth=m[0],S.imgheight=p[0];for(var A=0;A<m[0]*p[0]*4;A++)b[A]=E[A];return this.width=m,this.height=p,this.data=b,this}(function(e){var t=function(){return typeof Hk=="function"},r=function(p,m,b,v){var g=4,w=o;switch(v){case e.image_compression.FAST:g=1,w=i;break;case e.image_compression.MEDIUM:g=6,w=l;break;case e.image_compression.SLOW:g=9,w=c}p=a(p,m,b,w);var y=Hk(p,{level:g});return e.__addimage__.arrayBufferToBinaryString(y)},a=function(p,m,b,v){for(var g,w,y,j=p.length/m,N=new Uint8Array(p.length+j),S=u(),E=0;E<j;E+=1){if(y=E*m,g=p.subarray(y,y+m),v)N.set(v(g,b,w),y+E);else{for(var A,P=S.length,I=[];A<P;A+=1)I[A]=S[A](g,b,w);var B=f(I.concat());N.set(I[B],y+E)}w=g}return N},s=function(p){var m=Array.apply([],p);return m.unshift(0),m},i=function(p,m){var b,v=[],g=p.length;v[0]=1;for(var w=0;w<g;w+=1)b=p[w-m]||0,v[w+1]=p[w]-b+256&255;return v},o=function(p,m,b){var v,g=[],w=p.length;g[0]=2;for(var y=0;y<w;y+=1)v=b&&b[y]||0,g[y+1]=p[y]-v+256&255;return g},l=function(p,m,b){var v,g,w=[],y=p.length;w[0]=3;for(var j=0;j<y;j+=1)v=p[j-m]||0,g=b&&b[j]||0,w[j+1]=p[j]+256-(v+g>>>1)&255;return w},c=function(p,m,b){var v,g,w,y,j=[],N=p.length;j[0]=4;for(var S=0;S<N;S+=1)v=p[S-m]||0,g=b&&b[S]||0,w=b&&b[S-m]||0,y=d(v,g,w),j[S+1]=p[S]-y+256&255;return j},d=function(p,m,b){if(p===m&&m===b)return p;var v=Math.abs(m-b),g=Math.abs(p-b),w=Math.abs(p+m-b-b);return v<=g&&v<=w?p:g<=w?m:b},u=function(){return[s,i,o,l,c]},f=function(p){var m=p.map((function(b){return b.reduce((function(v,g){return v+Math.abs(g)}),0)}));return m.indexOf(Math.min.apply(null,m))};e.processPNG=function(p,m,b,v){var g,w,y,j,N,S,E,A,P,I,B,T,_,R,z,H=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(y=new ibe(p)).imgData,w=y.bits,g=y.colorSpace,N=y.colors,[4,6].indexOf(y.colorType)!==-1){if(y.bits===8){P=(A=y.pixelBitlength==32?new Uint32Array(y.decodePixels().buffer):y.pixelBitlength==16?new Uint16Array(y.decodePixels().buffer):new Uint8Array(y.decodePixels().buffer)).length,B=new Uint8Array(P*y.colors),I=new Uint8Array(P);var J,re=y.pixelBitlength-y.bits;for(R=0,z=0;R<P;R++){for(_=A[R],J=0;J<re;)B[z++]=_>>>J&255,J+=y.bits;I[R]=_>>>J&255}}if(y.bits===16){P=(A=new Uint32Array(y.decodePixels().buffer)).length,B=new Uint8Array(P*(32/y.pixelBitlength)*y.colors),I=new Uint8Array(P*(32/y.pixelBitlength)),T=y.colors>1,R=0,z=0;for(var X=0;R<P;)_=A[R++],B[z++]=_>>>0&255,T&&(B[z++]=_>>>16&255,_=A[R++],B[z++]=_>>>0&255),I[X++]=_>>>16&255;w=8}v!==e.image_compression.NONE&&t()?(p=r(B,y.width*y.colors,y.colors,v),E=r(I,y.width,1,v)):(p=B,E=I,H=void 0)}if(y.colorType===3&&(g=this.color_spaces.INDEXED,S=y.palette,y.transparency.indexed)){var te=y.transparency.indexed,W=0;for(R=0,P=te.length;R<P;++R)W+=te[R];if((W/=255)===P-1&&te.indexOf(0)!==-1)j=[te.indexOf(0)];else if(W!==P){for(A=y.decodePixels(),I=new Uint8Array(A.length),R=0,P=A.length;R<P;R++)I[R]=te[A[R]];E=r(I,y.width,1)}}var O=(function(q){var G;switch(q){case e.image_compression.FAST:G=11;break;case e.image_compression.MEDIUM:G=13;break;case e.image_compression.SLOW:G=14;break;default:G=12}return G})(v);return H===this.decode.FLATE_DECODE&&(Y="/Predictor "+O+" "),Y+="/Colors "+N+" /BitsPerComponent "+w+" /Columns "+y.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(E&&this.__addimage__.isArrayBuffer(E)||this.__addimage__.isArrayBufferView(E))&&(E=this.__addimage__.arrayBufferToBinaryString(E)),{alias:b,data:p,index:m,filter:H,decodeParameters:Y,transparency:j,palette:S,sMask:E,predictor:O,width:y.width,height:y.height,bitsPerComponent:w,colorSpace:g}}}})(pn.API),(function(e){e.processGIF89A=function(t,r,a,s){var i=new obe(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},u=new zj(100).encode(d,100);return e.processJPEG.call(this,u,r,a,s)},e.processGIF87A=e.processGIF89A})(pn.API),qd.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:a,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},qd.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){es.log("bit decode error:"+r)}},qd.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var a=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},qd.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=a*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},qd.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,a=0;a<this.width;a++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*a;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},qd.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var a=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,u=a*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=o,this.data[u+3]=d}this.pos+=e}},qd.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),a=this.height-1;a>=0;a--){for(var s=this.bottom_up?a:this.height-1-a,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,u=s*this.width*4+4*i;this.data[u]=d,this.data[u+1]=c,this.data[u+2]=l,this.data[u+3]=255}this.pos+=e}},qd.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=a,this.data[o+3]=255}this.pos+=this.width%4}},qd.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var a=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=a,this.data[l+3]=o}},qd.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,a,s){var i=new qd(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new zj(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}})(pn.API),y8.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,a,s){var i=new y8(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new zj(100).encode(c,100);return e.processJPEG.call(this,d,r,a,s)}})(pn.API),pn.API.processRGBA=function(e,t,r){for(var a=e.data,s=a.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var u=a[d],f=a[d+1],p=a[d+2],m=a[d+3];i[l++]=u,i[l++]=f,i[l++]=p,o[c++]=m}var b=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:b,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},pn.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},dm=pn.API,Hv=dm.getCharWidthsArray=function(e,t){var r,a,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,u=d.fof?d.fof:1,f=t.doKerning!==!1,p=0,m=e.length,b=0,v=l[0]||c,g=[];for(r=0;r<m;r++)a=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?g.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(a))+o*(1e3/i)||0)/1e3):(p=f&&Da(d[a])==="object"&&!isNaN(parseInt(d[a][b],10))?d[a][b]/u:0,g.push((l[a]||v)/c+p)),b=a;return g},x8=dm.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),a=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return dm.processArabic&&(e=dm.processArabic(e)),typeof a.metadata.widthOfString=="function"?a.metadata.widthOfString(e,r,s)/r:Hv.apply(this,arguments).reduce((function(i,o){return i+o}),0)},g8=function(e,t,r,a){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>a&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},v8=function(e,t,r){r||(r={});var a,s,i,o,l,c,d,u=[],f=[u],p=r.textIndent||0,m=0,b=0,v=e.split(" "),g=Hv.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var w=Array(c).join(" "),y=[];v.map((function(N){(N=N.split(/\s*\n/)).length>1?y=y.concat(N.map((function(S,E){return(E&&S.length?`
`:"")+S}))):y.push(N[0])})),v=y,c=x8.apply(this,[w,r])}for(i=0,o=v.length;i<o;i++){var j=0;if(a=v[i],c&&a[0]==`
`&&(a=a.substr(1),j=1),p+m+(b=(s=Hv.apply(this,[a,r])).reduce((function(N,S){return N+S}),0))>t||j){if(b>t){for(l=g8.apply(this,[a,s,t-(p+m),t]),u.push(l.shift()),u=[l.pop()];l.length;)f.push([l.shift()]);b=s.slice(a.length-(u[0]?u[0].length:0)).reduce((function(N,S){return N+S}),0)}else u=[a];f.push(u),p=b+c,m=g}else u.push(a),p+=m+b,m=g}return d=c?function(N,S){return(S?w:"")+N.join(" ")}:function(N){return N.join(" ")},f.map(d)},dm.splitTextToSize=function(e,t,r){var a,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(u){if(u.widths&&u.kerning)return{widths:u.widths,kerning:u.kerning};var f=this.internal.getFont(u.fontName,u.fontStyle);return f.metadata.Unicode?{widths:f.metadata.Unicode.widths||{0:1},kerning:f.metadata.Unicode.kerning||{}}:{font:f.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);a=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=a.length;l<c;l++)d=d.concat(v8.apply(this,[a[l],o,i]));return d},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},a={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],a["0123456789abcdef"[s]]=t[s];var i=function(f){return"0x"+parseInt(f,10).toString(16)},o=e.__fontmetrics__.compress=function(f){var p,m,b,v,g=["{"];for(var w in f){if(p=f[w],isNaN(parseInt(w,10))?m="'"+w+"'":(w=parseInt(w,10),m=(m=i(w).slice(2)).slice(0,-1)+a[m.slice(-1)]),typeof p=="number")p<0?(b=i(p).slice(3),v="-"):(b=i(p).slice(2),v=""),b=v+b.slice(0,-1)+a[b.slice(-1)];else{if(Da(p)!=="object")throw new Error("Don't know what to do with value type "+Da(p)+".");b=o(p)}g.push(m+b)}return g.push("}"),g.join("")},l=e.__fontmetrics__.uncompress=function(f){if(typeof f!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,m,b,v,g={},w=1,y=g,j=[],N="",S="",E=f.length-1,A=1;A<E;A+=1)(v=f[A])=="'"?p?(b=p.join(""),p=void 0):p=[]:p?p.push(v):v=="{"?(j.push([y,b]),y={},b=void 0):v=="}"?((m=j.pop())[0][m[1]]=y,b=void 0,y=m[0]):v=="-"?w=-1:b===void 0?r.hasOwnProperty(v)?(N+=r[v],b=parseInt(N,16)*w,w=1,N=""):N+=v:r.hasOwnProperty(v)?(S+=r[v],y[b]=parseInt(S,16)*w,w=1,b=void 0,S=""):S+=v;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},u={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(f){var p=f.font,m=u.Unicode[p.postScriptName];m&&(p.metadata.Unicode={},p.metadata.Unicode.widths=m.widths,p.metadata.Unicode.kerning=m.kerning);var b=d.Unicode[p.postScriptName];b&&(p.metadata.Unicode.encoding=b,p.encoding=b.codePages[0])}])})(pn.API),(function(e){var t=function(r){for(var a=r.length,s=new Uint8Array(a),i=0;i<a;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var a=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(a=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(px(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,a)}}])})(pn),(function(e){function t(){return(xn.canvg?Promise.resolve(xn.canvg):s1(()=>import("./index.es-C2nw2T4s.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}pn.API.addSvgAsImage=function(r,a,s,i,o,l,c,d){if(isNaN(a)||isNaN(s))throw es.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw es.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=i,u.height=o;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},m=this;return t().then((function(b){return b.fromString(f,r,p)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(b){return b.render(p)})).then((function(){m.addImage(u.toDataURL("image/jpeg",1),a,s,i,o,c,d)}))}})(),pn.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var a=1;a<=this.internal.getNumberOfPages();a++)for(var s=0;s<this.internal.pages[a].length;s++)this.internal.pages[a][s]=this.internal.pages[a][s].replace(t,r);return this},pn.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var a,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,u=0,f=0;function p(b,v){var g,w=!1;for(g=0;g<b.length;g+=1)b[g]===v&&(w=!0);return w}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(f=0;f<m;f+=1)r[l[f]].value=r[l[f]].defaultValue,r[l[f]].explicitSet=!1}if(Da(e)==="object"){for(s in e)if(i=e[s],p(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&p(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(a=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(u=0;u<i[d].length;u+=1)typeof i[d][u]!="number"&&(a=!1);a===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var b,v=[];for(b in r)r[b].explicitSet===!0&&(r[b].type==="name"?v.push("/"+b+" /"+r[b].value):v.push("/"+b+" "+r[b].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var a='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(a)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(a,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:a,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(pn.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],u=[""],f=0,p=i.length;f<p;++f){if(l=o.metadata.characterToGlyph(i.charCodeAt(f)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(f),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return u.join("");l=l.toString(16),u.push(d[4-l.length],l)}return u.join("")},a=function(i){var o,l,c,d,u,f,p;for(u=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],f=0,p=(l=Object.keys(i).sort((function(m,b){return m-b}))).length;f<p;f++)o=l[f],c.length>=100&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(u+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),u+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var f=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",b=0;b<p.length;b++)m+=String.fromCharCode(p[b]);var v=d();u({data:m,addLength1:!0,objectId:v}),c("endobj");var g=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var w=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+hm(l.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var y=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+hm(l.fontName)),c("/FontDescriptor "+w+" 0 R"),c("/W "+e.API.PDFObject.convert(f)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+hm(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+y+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,u=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var f=l.metadata.rawData,p="",m=0;m<f.length;m++)p+=String.fromCharCode(f[m]);var b=d();u({data:p,addLength1:!0,objectId:b}),c("endobj");var v=d();u({data:a(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var g=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+b+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+hm(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var w=0;w<l.metadata.hmtx.widths.length;w++)l.metadata.hmtx.widths[w]=parseInt(l.metadata.hmtx.widths[w]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+hm(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,u=i.options||{},f=i.mutex||{},p=f.pdfEscape,m=f.activeFontKey,b=f.fonts,v=m,g="",w=0,y="",j=b[v].encoding;if(b[v].encoding!=="Identity-H")return{text:l,x:c,y:d,options:u,mutex:f};for(y=l,v=m,Array.isArray(l)&&(y=l[0]),w=0;w<y.length;w+=1)b[v].metadata.hasOwnProperty("cmap")&&(o=b[v].metadata.cmap.unicode.codeMap[y[w].charCodeAt(0)]),o||y[w].charCodeAt(0)<256&&b[v].metadata.hasOwnProperty("Unicode")?g+=y[w]:g+="";var N="";return parseInt(v.slice(1))<14||j==="WinAnsiEncoding"?N=p(g,v).split("").map((function(S){return S.charCodeAt(0).toString(16)})).join(""):j==="Identity-H"&&(N=r(g,b[v])),f.isHex=!0,{text:N,x:c,y:d,options:u,mutex:f}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])})(pn),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,a){return t.call(this),this.internal.vFS[r]=a,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(pn.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(a){var s,i,o,l,c,d,u,f=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],b={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],w=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),y=!1,j=0;this.__bidiEngine__={};var N=function(T){var _=T.charCodeAt(),R=_>>8,z=v[R];return z!==void 0?f[256*z+(255&_)]:R===252||R===253?"AL":w.test(R)?"L":R===8?"R":"N"},S=function(T){for(var _,R=0;R<T.length;R++){if((_=N(T.charAt(R)))==="L")return!1;if(_==="R")return!0}return!1},E=function(T,_,R,z){var H,Y,J,re,X=_[z];switch(X){case"L":case"R":y=!1;break;case"N":case"AN":break;case"EN":y&&(X="AN");break;case"AL":y=!0,X="R";break;case"WS":X="N";break;case"CS":z<1||z+1>=_.length||(H=R[z-1])!=="EN"&&H!=="AN"||(Y=_[z+1])!=="EN"&&Y!=="AN"?X="N":y&&(Y="AN"),X=Y===H?Y:"N";break;case"ES":X=(H=z>0?R[z-1]:"B")==="EN"&&z+1<_.length&&_[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&R[z-1]==="EN"){X="EN";break}if(y){X="N";break}for(J=z+1,re=_.length;J<re&&_[J]==="ET";)J++;X=J<re&&_[J]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(re=_.length,J=z+1;J<re&&_[J]==="NSM";)J++;if(J<re){var te=T[z],W=te>=1425&&te<=2303||te===64286;if(H=_[J],W&&(H==="R"||H==="AL")){X="R";break}}}X=z<1||(H=_[z-1])==="B"?"N":R[z-1];break;case"B":y=!1,s=!0,X=j;break;case"S":i=!0,X="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":y=!1;break;case"BN":X="N"}return X},A=function(T,_,R){var z=T.split("");return R&&P(z,R,{hiLevel:j}),z.reverse(),_&&_.reverse(),z.join("")},P=function(T,_,R){var z,H,Y,J,re,X=-1,te=T.length,W=0,O=[],q=j?m:p,G=[];for(y=!1,s=!1,i=!1,H=0;H<te;H++)G[H]=N(T[H]);for(Y=0;Y<te;Y++){if(re=W,O[Y]=E(T,G,O,Y),z=240&(W=q[re][b[O[Y]]]),W&=15,_[Y]=J=q[W][5],z>0)if(z===16){for(H=X;H<Y;H++)_[H]=1;X=-1}else X=-1;if(q[W][6])X===-1&&(X=Y);else if(X>-1){for(H=X;H<Y;H++)_[H]=J;X=-1}G[Y]==="B"&&(_[Y]=0),R.hiLevel|=J}i&&(function(U,K,ae){for(var me=0;me<ae;me++)if(U[me]==="S"){K[me]=j;for(var se=me-1;se>=0&&U[se]==="WS";se--)K[se]=j}})(G,_,te)},I=function(T,_,R,z,H){if(!(H.hiLevel<T)){if(T===1&&j===1&&!s)return _.reverse(),void(R&&R.reverse());for(var Y,J,re,X,te=_.length,W=0;W<te;){if(z[W]>=T){for(re=W+1;re<te&&z[re]>=T;)re++;for(X=W,J=re-1;X<J;X++,J--)Y=_[X],_[X]=_[J],_[J]=Y,R&&(Y=R[X],R[X]=R[J],R[J]=Y);W=re}W++}}},B=function(T,_,R){var z=T.split(""),H={hiLevel:j};return R||(R=[]),P(z,R,H),(function(Y,J,re){if(re.hiLevel!==0&&u)for(var X,te=0;te<Y.length;te++)J[te]===1&&(X=g.indexOf(Y[te]))>=0&&(Y[te]=g[X+1])})(z,R,H),I(2,z,_,R,H),I(1,z,_,R,H),z.join("")};return this.__bidiEngine__.doBidiReorder=function(T,_,R){if((function(H,Y){if(Y)for(var J=0;J<H.length;J++)Y[J]=J;l===void 0&&(l=S(H)),d===void 0&&(d=S(H))})(T,_),o||!c||d)if(o&&c&&l^d)j=l?1:0,T=A(T,_,R);else if(!o&&c&&d)j=l?1:0,T=B(T,_,R),T=A(T,_);else if(!o||l||c||d){if(o&&!c&&l^d)T=A(T,_),l?(j=0,T=B(T,_,R)):(j=1,T=B(T,_,R),T=A(T,_));else if(o&&l&&!c&&d)j=1,T=B(T,_,R),T=A(T,_);else if(!o&&!c&&l^d){var z=u;l?(j=1,T=B(T,_,R),j=0,u=!1,T=B(T,_,R),u=z):(j=0,T=B(T,_,R),T=A(T,_),j=1,u=!1,T=B(T,_,R),u=z,T=A(T,_))}}else j=0,T=B(T,_,R);else j=l?1:0,T=B(T,_,R);return T},this.__bidiEngine__.setOptions=function(T){T&&(o=T.isInputVisual,c=T.isOutputVisual,l=T.isInputRtl,d=T.isOutputRtl,u=T.isSymmetricSwapping)},this.__bidiEngine__.setOptions(a),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(a){var s=a.text,i=(a.x,a.y,a.options||{}),o=(a.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);a.text=o}else a.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(pn),pn.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new C0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new Nbe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new lbe(this.contents),this.head=new dbe(this),this.name=new pbe(this),this.cmap=new dB(this),this.toUnicode={},this.hhea=new ube(this),this.maxp=new xbe(this),this.hmtx=new gbe(this),this.post=new hbe(this),this.os2=new fbe(this),this.loca=new wbe(this),this.glyf=new vbe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,a,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(a=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+a)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,a){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+a*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var a;return r==null&&(r=!1),a=r?this.lineGap:0,(this.ascender+a-this.decender)/1e3*t},e})();var nu,C0=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,a;for(a=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)a[r]=String.fromCharCode(this.readByte());return a.join("")},e.prototype.writeString=function(t){var r,a,s;for(s=[],r=0,a=t.length;0<=a?r<a:r>a;r=0<=a?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,a,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),a=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^a)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*a+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,a;return r=Math.floor(t/4294967296),a=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(a>>24&255),this.writeByte(a>>16&255),this.writeByte(a>>8&255),this.writeByte(255&a)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,a;for(r=[],a=0;0<=t?a<t:a>t;a=0<=t?++a:--a)r.push(this.readByte());return r},e.prototype.write=function(t){var r,a,s,i;for(i=[],a=0,s=t.length;a<s;a++)r=t[a],i.push(this.writeByte(r));return i},e})(),lbe=(function(){var e;function t(r){var a,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)a={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[a.tag]=a}return t.prototype.encode=function(r){var a,s,i,o,l,c,d,u,f,p,m,b,v;for(v in m=Object.keys(r).length,c=Math.log(2),f=16*Math.floor(Math.log(m)/c),o=Math.floor(f/c),u=16*m-f,(s=new C0).writeInt(this.scalarType),s.writeShort(m),s.writeShort(f),s.writeShort(o),s.writeShort(u),i=16*m,d=s.pos+i,l=null,b=[],r)for(p=r[v],s.writeString(v),s.writeInt(e(p)),s.writeInt(d),s.writeInt(p.length),b=b.concat(p),v==="head"&&(l=d),d+=p.length;d%4;)b.push(0),d++;return s.write(b),a=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(a),s.data},e=function(r){var a,s,i,o;for(r=uB.call(r);r.length%4;)r.push(0);for(i=new C0(r),s=0,a=0,o=r.length;a<o;a=a+=4)s+=i.readUInt32();return 4294967295&s},t})(),cbe={}.hasOwnProperty,$u=function(e,t){for(var r in t)cbe.call(t,r)&&(e[r]=t[r]);function a(){this.constructor=e}return a.prototype=t.prototype,e.prototype=new a,e.__super__=t.prototype,e};nu=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var dbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var a;return(a=new C0).writeInt(this.version),a.writeInt(this.revision),a.writeInt(this.checkSumAdjustment),a.writeInt(this.magicNumber),a.writeShort(this.flags),a.writeShort(this.unitsPerEm),a.writeLongLong(this.created),a.writeLongLong(this.modified),a.writeShort(this.xMin),a.writeShort(this.yMin),a.writeShort(this.xMax),a.writeShort(this.yMax),a.writeShort(this.macStyle),a.writeShort(this.lowestRecPPEM),a.writeShort(this.fontDirectionHint),a.writeShort(r),a.writeShort(this.glyphDataFormat),a.data},t})(),w8=(function(){function e(t,r){var a,s,i,o,l,c,d,u,f,p,m,b,v,g,w,y,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),f=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(m=t.readUInt16(),p=m/2,t.pos+=6,i=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),t.pos+=2,v=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),d=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),u=(function(){var N,S;for(S=[],c=N=0;0<=p?N<p:N>p;c=0<=p?++N:--N)S.push(t.readUInt16());return S})(),s=(this.length-t.pos+this.offset)/2,l=(function(){var N,S;for(S=[],c=N=0;0<=s?N<s:N>s;c=0<=s?++N:--N)S.push(t.readUInt16());return S})(),c=w=0,j=i.length;w<j;c=++w)for(g=i[c],a=y=b=v[c];b<=g?y<=g:y>=g;a=b<=g?++y:--y)u[c]===0?o=a+d[c]:(o=l[u[c]/2+(a-b)-(p-c)]||0)!==0&&(o+=d[c]),this.codeMap[a]=65535&o}t.pos=f}return e.encode=function(t,r){var a,s,i,o,l,c,d,u,f,p,m,b,v,g,w,y,j,N,S,E,A,P,I,B,T,_,R,z,H,Y,J,re,X,te,W,O,q,G,U,K,ae,me,se,le,Me,ue;switch(z=new C0,o=Object.keys(t).sort((function(Ue,Ae){return Ue-Ae})),r){case"macroman":for(v=0,g=(function(){var Ue=[];for(b=0;b<256;++b)Ue.push(0);return Ue})(),y={0:0},i={},H=0,X=o.length;H<X;H++)y[se=t[s=o[H]]]==null&&(y[se]=++v),i[s]={old:t[s],new:y[t[s]]},g[s]=y[t[s]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(g),{charMap:i,subtable:z.data,maxGlyphID:v+1};case"unicode":for(_=[],f=[],j=0,y={},a={},w=d=null,Y=0,te=o.length;Y<te;Y++)y[S=t[s=o[Y]]]==null&&(y[S]=++j),a[s]={old:S,new:y[S]},l=y[S]-s,w!=null&&l===d||(w&&f.push(w),_.push(s),d=l),w=s;for(w&&f.push(w),f.push(65535),_.push(65535),B=2*(I=_.length),P=2*Math.pow(Math.log(I)/Math.LN2,2),p=Math.log(P/2)/Math.LN2,A=2*I-P,c=[],E=[],m=[],b=J=0,W=_.length;J<W;b=++J){if(T=_[b],u=f[b],T===65535){c.push(0),E.push(0);break}if(T-(R=a[T].new)>=32768)for(c.push(0),E.push(2*(m.length+I-b)),s=re=T;T<=u?re<=u:re>=u;s=T<=u?++re:--re)m.push(a[s].new);else c.push(R-T),E.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*I+2*m.length),z.writeUInt16(0),z.writeUInt16(B),z.writeUInt16(P),z.writeUInt16(p),z.writeUInt16(A),ae=0,O=f.length;ae<O;ae++)s=f[ae],z.writeUInt16(s);for(z.writeUInt16(0),me=0,q=_.length;me<q;me++)s=_[me],z.writeUInt16(s);for(le=0,G=c.length;le<G;le++)l=c[le],z.writeUInt16(l);for(Me=0,U=E.length;Me<U;Me++)N=E[Me],z.writeUInt16(N);for(ue=0,K=m.length;ue<K;ue++)v=m[ue],z.writeUInt16(v);return{charMap:a,subtable:z.data,maxGlyphID:j+1}}},e})(),dB=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="cmap",t.prototype.parse=function(r){var a,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)a=new w8(r,this.offset),this.tables.push(a),a.isUnicode&&this.unicode==null&&(this.unicode=a);return!0},t.encode=function(r,a){var s,i;return a==null&&(a="macroman"),s=w8.encode(r,a),(i=new C0).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t})(),ube=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),fbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var a,s;for(s=[],a=0;a<10;++a)s.push(r.readByte());return s})(),this.charRange=(function(){var a,s;for(s=[],a=0;a<4;++a)s.push(r.readInt());return s})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var a,s;for(s=[],a=0;a<2;a=++a)s.push(r.readInt());return s})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),hbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="post",t.prototype.parse=function(r){var a,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)a=r.readByte(),i.push(this.names.push(r.readString(a)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t})(),mbe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},pbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="name",t.prototype.parse=function(r){var a,s,i,o,l,c,d,u,f,p,m;for(r.pos=this.offset,r.readShort(),a=r.readShort(),c=r.readShort(),s=[],o=0;0<=a?o<a:o>a;o=0<=a?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=f=0,p=s.length;f<p;o=++f)i=s[o],r.pos=i.offset,u=r.readString(i.length),l=new mbe(u,i),d[m=i.nameID]==null&&(d[m]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t})(),xbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),gbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="hmtx",t.prototype.parse=function(r){var a,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],a=0,c=this.file.hhea.numberOfMetrics;0<=c?a<c:a>c;a=0<=c?++a:--a)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var u,f;for(f=[],a=u=0;0<=i?u<i:u>i;a=0<=i?++u:--u)f.push(r.readInt16());return f})(),this.widths=(function(){var u,f,p,m;for(m=[],u=0,f=(p=this.metrics).length;u<f;u++)o=p[u],m.push(o.advance);return m}).call(this),s=this.widths[this.widths.length-1],d=[],a=l=0;0<=i?l<i:l>i;a=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),uB=[].slice,vbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var a,s,i,o,l,c,d,u,f,p;return r in this.cache?this.cache[r]:(o=this.file.loca,a=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(a.pos=this.offset+s,l=(c=new C0(a.read(i))).readShort(),u=c.readShort(),p=c.readShort(),d=c.readShort(),f=c.readShort(),this.cache[r]=l===-1?new ybe(c,u,p,d,f):new bbe(c,l,u,p,d,f),this.cache[r]))},t.prototype.encode=function(r,a,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=a.length;c<d;c++)i=r[a[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t})(),bbe=(function(){function e(t,r,a,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=a,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),ybe=(function(){function e(t,r,a,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=a,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,a;for(r=new C0(uB.call(this.raw.data)),t=0,a=this.glyphIDs.length;t<a;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),wbe=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return $u(t,nu),t.prototype.tag="loca",t.prototype.parse=function(r){var a,s;return r.pos=this.offset,a=this.file.head.indexToLocFormat,this.offsets=a===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,a){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<a.length&&a[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var u=new Array(4*s.length),f=0;f<s.length;++f)u[4*f+3]=255&s[f],u[4*f+2]=(65280&s[f])>>8,u[4*f+1]=(16711680&s[f])>>16,u[4*f]=(4278190080&s[f])>>24;return u},t})(),Nbe=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,a,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)a=i[r],t[r]=s[a];return t},e.prototype.glyphsFor=function(t){var r,a,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(a=s[i])!=null&&a.compound&&r.push.apply(r,a.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))a=c[i],s[i]=a;return s},e.prototype.encode=function(t,r){var a,s,i,o,l,c,d,u,f,p,m,b,v,g,w;for(s in a=dB.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},w=a.charMap)m[(c=w[s]).old]=c.new;for(b in p=a.maxGlyphID,o)b in m||(m[b]=p++);return u=(function(y){var j,N;for(j in N={},y)N[y[j]]=j;return N})(m),f=Object.keys(u).sort((function(y,j){return y-j})),v=(function(){var y,j,N;for(N=[],y=0,j=f.length;y<j;y++)l=f[y],N.push(u[l]);return N})(),i=this.font.glyf.encode(o,v,m),d=this.font.loca.encode(i.offsets,v),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e})();pn.API.PDFObject=(function(){var e;function t(){}return e=function(r,a){return(Array(a+1).join("0")+r).slice(-a)},t.convert=function(r){var a,s,i,o;if(Array.isArray(r))return"["+(function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)a=r[l],d.push(t.convert(a));return d})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();const jbe=({onCreateInvoice:e,currentUser:t})=>{const{showSuccess:r,showError:a,showInfo:s}=Cn(),[i,o]=D.useState([]),[l,c]=D.useState([]),[d,u]=D.useState(null),[f,p]=D.useState(!0),[m,b]=D.useState(!1),[v,g]=D.useState(!1),[w,y]=D.useState([]),[j,N]=D.useState(!1),[S,E]=D.useState(!1),[A,P]=D.useState(!1),[I,B]=D.useState(!1),[T,_]=D.useState([]),[R,z]=D.useState(null),[H,Y]=D.useState({description:"",quantity:1,rate:0}),[J,re]=D.useState(!1),[X,te]=D.useState(!1),[W,O]=D.useState(Si),q=D.useCallback(async()=>{p(!0);try{const Ae=await tM(),ie=Ae?.data||Ae||[];o(Array.isArray(ie)?ie:[]);try{const Z=await md();c(Z?.data||Z||[])}catch{c([])}}catch(Ae){a(Ae.message||"Failed to load invoices")}finally{p(!1)}},[t,a]);D.useEffect(()=>{q()},[q]),D.useEffect(()=>{const Ae=()=>q();return window.addEventListener("refresh-invoices",Ae),()=>window.removeEventListener("refresh-invoices",Ae)},[q]);const G=Ae=>l.find(ie=>ie.id===Ae),U=Ae=>{switch(Ae){case"Paid":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Overdue":return"bg-red-50 text-red-600 border-red-100";case"Sent":return"bg-blue-50 text-blue-600 border-blue-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},K={totalOutstanding:i.filter(Ae=>Ae.status!=="Paid").reduce((Ae,ie)=>Ae+(ie.amount||0),0),awaitingPayment:i.filter(Ae=>Ae.status!=="Paid").reduce((Ae,ie)=>Ae+(ie.amount||0),0),paidThisMonth:i.filter(Ae=>Ae.status==="Paid").reduce((Ae,ie)=>Ae+(ie.amount||0),0)},ae=()=>{w.length===i.length?y([]):y(i.map(Ae=>Ae.id))},me=async()=>{const Ae=[...w];if(Ae.length!==0){N(!0),s(`Processing payment status for ${Ae.length} items...`);try{await Promise.all(Ae.map(ie=>kv(ie,{status:"Paid"}))),o(ie=>ie.map(Z=>Ae.includes(Z.id)?{...Z,status:"Paid"}:Z)),r(`Successfully marked ${Ae.length} invoices as paid`),y([]),q()}catch{a("Bulk update failed. Some items may not have been updated.")}finally{N(!1)}}},se=async()=>{[...w].length!==0&&P(!0)},le=async()=>{const Ae=[...w];if(Ae.length!==0){N(!0),P(!1),s(`Executing batch deletion for ${Ae.length} registry entries...`);try{await Promise.all(Ae.map(ie=>uI(ie))),o(ie=>ie.filter(Z=>!Ae.includes(Z.id))),r(`Successfully removed ${Ae.length} invoices from registry`),y([]),q()}catch{a("Bulk deletion encountered an error. Refresh registry to verify state.")}finally{N(!1)}}};D.useEffect(()=>{if(d){const Ae=d.lineItems||d.items||[];_(Ae),B(!1),z(null),Y({description:"",quantity:1,rate:0}),O(d.currency||Si),te(!1)}},[d]);const Me=async()=>{if(d){b(!0);try{await kv(d.id,{items:T,lineItems:T}),o(Ae=>Ae.map(ie=>ie.id===d.id?{...ie,items:T,lineItems:T}:ie)),u({...d,items:T,lineItems:T}),B(!1),r("Service breakdown saved successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Ae){console.error("Failed to save breakdown:",Ae),a(Ae.message||"Failed to save breakdown")}finally{b(!1)}}},ue=async()=>{if(d){b(!0);try{await kv(d.id,{status:"Paid"}),o(Ae=>Ae.map(ie=>ie.id===d.id?{...ie,status:"Paid"}:ie)),u({...d,status:"Paid"}),r("Invoice marked as paid!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Ae){console.error("Failed to update invoice:",Ae),a(Ae.message||"Failed to update invoice")}finally{b(!1)}}},Ue=async()=>{if(d){g(!0);try{await uI(d.id),o(Ae=>Ae.filter(ie=>ie.id!==d.id)),u(null),E(!1),r("Invoice deleted successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Ae){console.error("Failed to delete invoice:",Ae),a(Ae.message||"Failed to delete invoice")}finally{g(!1)}}};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10 relative h-full",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Billing & Invoicing"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Oversee payments and logistics milestone billing"})]}),n.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(ln,{className:"w-4 h-4"})," Create Invoice"]})]}),n.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[{label:"Total Outstanding",value:`$${K.totalOutstanding.toLocaleString()}`,icon:n.jsx(Mu,{}),color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Awaiting Payment",value:`$${K.awaitingPayment.toLocaleString()}`,icon:n.jsx(is,{}),color:"text-amber-600",bg:"bg-amber-50"},{label:"Paid This Month",value:`$${K.paidThisMonth.toLocaleString()}`,icon:n.jsx(Nn,{}),color:"text-emerald-600",bg:"bg-emerald-50"}].map((Ae,ie)=>n.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl ${Ae.bg} ${Ae.color} flex items-center justify-center`,children:ft.cloneElement(Ae.icon,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Ae.label}),n.jsx("h3",{className:"text-xl font-black text-slate-900",children:Ae.value})]})]},ie))}),n.jsx("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left",children:[n.jsx("thead",{children:n.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50",children:[n.jsx("th",{className:"px-6 py-4 w-10",children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:i.length>0&&w.length===i.length,onChange:ae})}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Invoice"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Due Date"}),n.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),n.jsx("th",{className:"px-6 py-4 text-right"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-50",children:f?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10 text-center",children:n.jsx(gt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})})}):i.length===0?n.jsx("tr",{children:n.jsx("td",{colSpan:7,className:"py-10 text-center text-slate-400 text-sm font-medium",children:"No records found in digital registry."})}):i.map(Ae=>{const ie=w.includes(Ae.id);return n.jsxs("tr",{onClick:()=>u(Ae),className:`group transition-colors cursor-pointer ${ie?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[n.jsx("td",{className:"px-6 py-4",onClick:Z=>Z.stopPropagation(),children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ie,onChange:()=>y(Z=>ie?Z.filter(Ee=>Ee!==Ae.id):[...Z,Ae.id])})}),n.jsxs("td",{className:"px-6 py-4",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Ae.number}),n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["REF: ",Ae.id.substring(0,8)]})]}),n.jsx("td",{className:"px-6 py-4",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xs,{src:G(Ae.companyId)?.logo,fallbackText:G(Ae.companyId)?.name,className:"w-6 h-6",isAvatar:!1}),n.jsx("span",{className:"text-sm font-semibold text-slate-700",children:G(Ae.companyId)?.name||"Unknown Partner"})]})}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:"text-sm font-bold text-slate-900",children:xf(Ae.amount,Ae.currency)})}),n.jsx("td",{className:"px-6 py-4 text-xs font-semibold text-slate-500",children:Ae.dueDate}),n.jsx("td",{className:"px-6 py-4",children:n.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase border ${U(Ae.status)}`,children:Ae.status})}),n.jsx("td",{className:"px-6 py-4 text-right",children:n.jsx(wa,{className:"w-5 h-5 text-slate-300 group-hover:text-indigo-600"})})]},Ae.id)})})]})})}),w.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:w.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),me()},disabled:j,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Nn,{className:"w-3.5 h-3.5"}),"Mark Paid"]}),n.jsxs("button",{onClick:Ae=>{Ae.stopPropagation(),se()},disabled:j,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>y([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),d&&n.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>u(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600",children:n.jsx(Qn,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-slate-900",children:d.number}),n.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Billing Statement"})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),n.jsx("span",{className:`inline-block mt-1 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ${U(d.status)}`,children:d.status})]}),n.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-white rounded-full text-slate-400 shadow-sm border border-transparent hover:border-slate-200 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),n.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[n.jsx(Xs,{src:G(d.companyId)?.logo,fallbackText:G(d.companyId)?.name||"C",className:"w-10 h-10 border border-slate-200",isAvatar:!1}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:G(d.companyId)?.name||"Unknown Company"}),n.jsx("p",{className:"text-xs text-slate-500",children:G(d.companyId)?.website||""})]})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount Due"}),X?n.jsx("button",{onClick:async()=>{b(!0);try{await kv(d.id,{currency:W}),o(Ae=>Ae.map(ie=>ie.id===d.id?{...ie,currency:W}:ie)),u({...d,currency:W}),te(!1),r("Currency updated successfully!")}catch(Ae){a(Ae.message||"Failed to update currency")}finally{b(!1)}},disabled:m,className:"px-2 py-1 text-[9px] font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all disabled:opacity-50",children:n.jsx(di,{className:"w-3 h-3"})}):n.jsx("button",{onClick:()=>te(!0),className:"px-2 py-1 text-[9px] font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:n.jsx(Do,{className:"w-3 h-3"})})]}),X?n.jsx("select",{value:W,onChange:Ae=>O(Ae.target.value),className:"w-full px-4 py-2 rounded-xl text-sm outline-none font-bold appearance-none bg-white border-2 border-indigo-200 focus:ring-4 focus:ring-indigo-100 text-indigo-600",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%234f46e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:ep.map(Ae=>n.jsxs("option",{value:Ae.code,children:[Ae.code," (",Ae.symbol,")"]},Ae.code))}):n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:xf(d.amount,d.currency)})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:d.dueDate})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Registry Narrative"}),n.jsx("p",{className:"text-sm text-slate-700 bg-slate-50 p-6 rounded-3xl border border-slate-100 leading-relaxed italic",children:d.description||"No additional strategic description provided for this statement."})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Service Breakdown"}),I?n.jsxs("button",{onClick:Me,disabled:m,className:"px-3 py-1.5 text-xs font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all flex items-center gap-1 disabled:opacity-50",children:[n.jsx(di,{className:"w-3 h-3"})," ",m?"Saving...":"Save"]}):n.jsxs("button",{onClick:()=>B(!0),className:"px-3 py-1.5 text-xs font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all flex items-center gap-1",children:[n.jsx(Do,{className:"w-3 h-3"})," Edit"]})]}),n.jsxs("div",{className:"divide-y divide-slate-100 border border-slate-100 rounded-3xl overflow-hidden bg-white shadow-sm",children:[T.map(Ae=>n.jsxs("div",{className:"p-5 flex justify-between items-center group",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-slate-800",children:Ae.description}),n.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Qty: ",Ae.quantity," @ ",ff(d.currency),Ae.rate.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),n.jsx("p",{className:"text-sm font-black text-slate-900",children:xf(Ae.amount,d.currency)})]},Ae.id)),T.length===0&&n.jsx("div",{className:"p-8 text-center text-slate-400 italic text-xs",children:"No granular items archived."})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex gap-3",children:[d.status!=="Paid"&&n.jsxs("button",{onClick:ue,disabled:m,className:"flex-1 py-4 bg-indigo-600 text-white text-sm font-black uppercase tracking-[0.1em] rounded-2xl hover:bg-indigo-700 transition-all shadow-xl flex items-center justify-center gap-2",children:[m?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(Nn,{className:"w-4 h-4"})," Confirm Receipt"]}),n.jsx("button",{onClick:()=>E(!0),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-2xl transition-all shadow-sm active:scale-95",children:n.jsx(Lr,{className:"w-5 h-5"})})]})]})]}),S&&d&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>E(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[n.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:n.jsx(Lr,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Archive Invoice?"}),n.jsx("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:"This will permanently remove the billing statement from the digital registry. This action is terminal."}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>E(!1),disabled:v,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),n.jsx("button",{onClick:Ue,disabled:v,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Terminal Delete"})]})]})})]}),A&&w.length>0&&n.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>P(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[n.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:n.jsx(Lr,{className:"w-8 h-8"})}),n.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:["Delete ",w.length," Invoice",w.length>1?"s":"","?"]}),n.jsxs("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:["This will permanently remove ",w.length," invoice",w.length>1?"s":""," from the digital registry. This action is terminal and cannot be undone."]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("button",{onClick:()=>P(!1),disabled:j,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),n.jsx("button",{onClick:le,disabled:j,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${w.length} Invoice${w.length>1?"s":""}`})]})]})})]})]})},kbe=()=>n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Control workspace access and staff roles"})]}),n.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[n.jsx(id,{className:"w-4 h-4"})," Invite Member"]})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsxs("div",{className:"relative w-64",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Find teammate...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active Seats: "}),n.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"12 / 20"})]})]}),n.jsx("div",{className:"divide-y divide-slate-100",children:Qv.map(e=>n.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-5",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Xs,{src:e.avatar,alt:e.name||"",fallbackText:e.name||e.email||"U",className:"w-12 h-12 border-2 border-white shadow-sm object-cover",isAvatar:!0}),e.active&&n.jsx("div",{className:"absolute -bottom-1 -right-1 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white shadow-sm"})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[e.name,e.role==="Admin"&&n.jsx(Lb,{className:"w-4 h-4 text-indigo-600"})]}),n.jsxs("p",{className:"text-xs text-slate-500 font-medium flex items-center gap-1.5 mt-0.5",children:[n.jsx(rs,{className:"w-3 h-3 text-slate-400"})," ",e.email]})]})]}),n.jsxs("div",{className:"flex items-center gap-12",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Permission Tier"}),n.jsx("p",{className:`text-xs font-bold mt-0.5 ${e.role==="Admin"?"text-indigo-600":"text-slate-700"}`,children:e.role})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{className:"px-4 py-2 text-xs font-bold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:"Manage"}),n.jsx("button",{className:"p-2 text-slate-300 hover:text-slate-600 transition-colors",children:n.jsx(Jk,{className:"w-5 h-5"})})]})]})]},e.id))})]})]}),Sbe=({imageSrc:e,onCrop:t,onCancel:r,aspectRatio:a=1,circularCrop:s=!0})=>{const[i,o]=D.useState({x:0,y:0}),[l,c]=D.useState(.5),[d,u]=D.useState(!1),[f,p]=D.useState({x:0,y:0}),[m,b]=D.useState(!1),[v,g]=D.useState(!1),w=D.useRef(null),y=D.useRef(null),j=D.useRef(300),N=D.useCallback(()=>{if(!y.current||!w.current)return null;const B=y.current.getBoundingClientRect(),T=j.current,_=B.width/2,R=B.height/2,z=w.current.getBoundingClientRect(),H=z.left-B.left,Y=z.top-B.top,J=(_-T/2-H-i.x)/l,re=(R-T/2-Y-i.y)/l,X=T/l;return{x:Math.max(0,J*(w.current.naturalWidth/w.current.width)),y:Math.max(0,re*(w.current.naturalHeight/w.current.height)),width:Math.min(w.current.naturalWidth,X*(w.current.naturalWidth/w.current.width)),height:Math.min(w.current.naturalHeight,X*(w.current.naturalHeight/w.current.height))}},[i,l]),S=D.useCallback(async()=>{if(w.current){b(!0);try{const I=N();if(!I)throw new Error("Failed to calculate crop area");const B=w.current,T=document.createElement("canvas"),_=T.getContext("2d");if(!_)throw new Error("Failed to create canvas context");const R=Math.min(I.width,I.height);T.width=R,T.height=R,s&&(_.beginPath(),_.arc(R/2,R/2,R/2,0,2*Math.PI),_.clip()),_.drawImage(B,I.x,I.y,I.width,I.height,0,0,R,R);const z=T.toDataURL("image/jpeg",.9);t(z)}catch(I){console.error("Error cropping image:",I)}finally{b(!1)}}},[N,s,t]),E=D.useCallback(I=>{I.preventDefault(),u(!0),p({x:I.clientX-i.x,y:I.clientY-i.y})},[i]),A=D.useCallback(I=>{if(!d||!y.current||!w.current)return;const B=y.current,T=w.current,_=B.getBoundingClientRect(),R=T.getBoundingClientRect(),z=I.clientX-f.x,H=I.clientY-f.y,Y=R.width*l,J=R.height*l,re=Math.max(0,(Y-_.width)/2),X=Math.max(0,(J-_.height)/2);l<=1?o({x:z,y:H}):o({x:Math.max(-re,Math.min(re,z)),y:Math.max(-X,Math.min(X,H))})},[d,f,l]),P=D.useCallback(()=>{u(!1)},[]);return D.useEffect(()=>{if(d)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",P),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",P)}},[d,A,P]),D.useEffect(()=>{if(y.current){const B=y.current.getBoundingClientRect();j.current=Math.min(B.width*.8,B.height*.8,300)}},[]),n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Crop Your Photo"}),n.jsx("button",{onClick:r,disabled:m,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{ref:y,className:"relative w-full h-[400px] bg-slate-100 rounded-xl overflow-hidden",style:{cursor:d?"grabbing":"grab"},children:[n.jsx("img",{ref:w,src:e,alt:"Crop",className:"absolute top-1/2 left-1/2 select-none",style:{transform:`translate(-50%, -50%) scale(${l}) translate(${i.x/l}px, ${i.y/l}px)`,maxWidth:"none",maxHeight:"none",userSelect:"none",pointerEvents:"none"},onLoad:()=>{if(g(!0),y.current&&w.current){const B=y.current.getBoundingClientRect();j.current=Math.min(B.width*.8,B.height*.8,300)}},draggable:!1}),n.jsxs("div",{className:"absolute inset-0 pointer-events-none",onMouseDown:E,style:{pointerEvents:m?"none":"auto",cursor:d?"grabbing":"grab"},children:[n.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border-2 border-white shadow-lg ${s?"rounded-full":"rounded-lg"}`,style:{width:`${j.current}px`,height:`${j.current}px`,aspectRatio:a.toString()}}),n.jsx("div",{className:"absolute inset-0 bg-slate-900/50",style:{clipPath:s?`circle(${j.current/2}px at 50% 50%)`:`inset(calc(50% - ${j.current/2}px))`}})]})]}),n.jsxs("div",{className:"mt-6",children:[n.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Zoom: ",Math.round(l*100),"%"]}),n.jsx("input",{type:"range",min:"0.3",max:"3",step:"0.05",value:l,onChange:I=>{const B=parseFloat(I.target.value);c(B),B<1&&o({x:0,y:0})},className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer",disabled:m}),n.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[n.jsx("span",{children:"30%"}),n.jsx("span",{children:"300%"})]})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-end gap-3",children:[n.jsx("button",{onClick:r,disabled:m,className:"px-6 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:S,disabled:m||!v,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(cd,{className:"w-4 h-4"}),"Apply Crop"]})})]})]})})},_be=({currentUser:e,showSuccess:t,showError:r})=>{const[a,s]=D.useState({retentionYears:7,coldStorageYears:1,archiveEnabled:!0,autoCleanupEnabled:!0}),[i,o]=D.useState(null),[l,c]=D.useState(!1),[d,u]=D.useState(!1),[f,p]=D.useState(!1),[m,b]=D.useState(!1),[v,g]=D.useState(!1),[w,y]=D.useState(!1);D.useEffect(()=>{j(),N()},[]);const j=async()=>{c(!0);try{const I=await gae("default");I.success&&I.data&&s(I.data)}catch{r("Failed to load retention policy")}finally{c(!1)}},N=async()=>{p(!0);try{const I=await bae("default");I.success&&I.data&&o(I.data)}catch(I){console.error("Failed to load retention stats:",I)}finally{p(!1)}},S=async()=>{u(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;(await vae("default",{...a,updatedBy:I})).success&&(t("Retention policy updated successfully"),await N())}catch(I){r(I.message||"Failed to update retention policy")}finally{u(!1)}},E=async()=>{b(!0);try{const I=await yae("default",50);I.success&&(t(`Archive completed: ${I.data.archived} emails archived`),await N())}catch(I){r(I.message||"Failed to trigger archive")}finally{b(!1)}},A=async()=>{g(!0);try{const I=await wae("default",50);I.success&&(t(`Cleanup completed: ${I.data.deleted} emails deleted`),await N())}catch(I){r(I.message||"Failed to trigger cleanup")}finally{g(!1)}},P=async()=>{y(!0);try{const I=await Nae("default",{format:"csv"});if(typeof I=="string"){const B=new Blob([I],{type:"text/csv"}),T=window.URL.createObjectURL(B),_=document.createElement("a");_.href=T,_.download=`archived-emails-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(_),_.click(),document.body.removeChild(_),window.URL.revokeObjectURL(T),t("Archived emails exported successfully")}else r("Unexpected export format")}catch(I){r(I.message||"Failed to export archived emails")}finally{y(!1)}};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(P8,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Data Retention Policy"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Configure how long emails are retained and archived"})]})]}),l?n.jsx("div",{className:"p-8 text-center",children:n.jsx(gt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Retention Period (Years)"}),n.jsx("input",{type:"number",min:"1",max:"20",value:a.retentionYears,onChange:I=>s({...a,retentionYears:parseInt(I.target.value)||7}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be permanently deleted"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Cold Storage Threshold (Years)"}),n.jsx("input",{type:"number",min:"0",max:a.retentionYears,value:a.coldStorageYears,onChange:I=>s({...a,coldStorageYears:parseInt(I.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be moved to cold storage"})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Archiving"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically move emails to cold storage"})]}),n.jsx("button",{onClick:()=>s({...a,archiveEnabled:!a.archiveEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${a.archiveEnabled?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${a.archiveEnabled?"translate-x-6":"translate-x-0"}`})})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Cleanup"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically delete emails past retention period"})]}),n.jsx("button",{onClick:()=>s({...a,autoCleanupEnabled:!a.autoCleanupEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${a.autoCleanupEnabled?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${a.autoCleanupEnabled?"translate-x-6":"translate-x-0"}`})})]})]}),n.jsx("button",{onClick:S,disabled:d,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:d?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),"Save Retention Policy"]})})]})]}),i&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Cu,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Retention Statistics"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Current data retention status"})]})]}),f?n.jsx("div",{className:"p-8 text-center",children:n.jsx(gt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-slate-900",children:i.totalEmails||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Total Emails"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:i.archivedEmails||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Archived Emails"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.eligibleForArchive||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Archive"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[n.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.eligibleForDeletion||0}),n.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Deletion"})]})]})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(sd,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Manual Actions"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Manually trigger archive, cleanup, or export"})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("button",{onClick:E,disabled:m,className:"p-4 bg-indigo-50 border border-indigo-200 rounded-xl hover:bg-indigo-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[m?n.jsx(gt,{className:"w-5 h-5 animate-spin text-indigo-600"}):n.jsx(Cu,{className:"w-5 h-5 text-indigo-600"}),n.jsx("span",{className:"text-sm font-semibold text-indigo-900",children:"Archive Emails"}),n.jsx("span",{className:"text-xs text-indigo-600",children:"Move to cold storage"})]}),n.jsxs("button",{onClick:A,disabled:v,className:"p-4 bg-red-50 border border-red-200 rounded-xl hover:bg-red-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[v?n.jsx(gt,{className:"w-5 h-5 animate-spin text-red-600"}):n.jsx(OU,{className:"w-5 h-5 text-red-600"}),n.jsx("span",{className:"text-sm font-semibold text-red-900",children:"Cleanup Emails"}),n.jsx("span",{className:"text-xs text-red-600",children:"Delete old emails"})]}),n.jsxs("button",{onClick:P,disabled:w,className:"p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[w?n.jsx(gt,{className:"w-5 h-5 animate-spin text-green-600"}):n.jsx(Iu,{className:"w-5 h-5 text-green-600"}),n.jsx("span",{className:"text-sm font-semibold text-green-900",children:"Export Archived"}),n.jsx("span",{className:"text-xs text-green-600",children:"Download CSV"})]})]})]})]})},Cbe=({currentUser:e,showSuccess:t,showError:r})=>{const[a,s]=D.useState([]),[i,o]=D.useState(!1),[l,c]=D.useState(!1),[d,u]=D.useState(null),[f,p]=D.useState({name:"",content:"",isDefault:!1}),[m,b]=D.useState(!1),[v,g]=D.useState(null),[w,y]=D.useState({layout:"list",density:"comfortable",emailFormat:"html",showPreview:!0,previewLines:3});D.useEffect(()=>{j(),N()},[]);const j=async()=>{o(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I)return;const B=await uM(I);s(B.data||[])}catch(I){console.error("Failed to load signatures:",I)}finally{o(!1)}},N=()=>{try{const I=localStorage.getItem("user_display_preferences");I&&y(JSON.parse(I))}catch(I){console.error("Failed to load display preferences:",I)}},S=()=>{try{localStorage.setItem("user_display_preferences",JSON.stringify(w)),t("Display preferences saved successfully")}catch{r("Failed to save display preferences")}},E=async()=>{if(!f.name||!f.content){r("Name and content are required");return}b(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I){r("Please log in to save signature");return}d?(await Cse(d.id,{userId:I,...f}),t("Signature updated successfully")):(await _se({userId:I,...f}),t("Signature created successfully")),c(!1),u(null),p({name:"",content:"",isDefault:!1}),await j()}catch(I){r(I.message||"Failed to save signature")}finally{b(!1)}},A=async I=>{if(confirm("Are you sure you want to delete this signature?")){g(I);try{const B=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await Ase(I,B),t("Signature deleted successfully"),await j()}catch(B){r(B.message||"Failed to delete signature")}finally{g(null)}}},P=I=>{I?(u(I),p({name:I.name||"",content:I.content||"",isDefault:I.isDefault||!1})):(u(null),p({name:"",content:"",isDefault:!1})),c(!0)};return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:n.jsx(Qn,{className:"w-5 h-5 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Signatures"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Manage your email signatures for replies and new emails"})]})]}),n.jsxs("button",{onClick:()=>P(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"Add Signature"]})]}),i?n.jsx("div",{className:"p-8 text-center",children:n.jsx(gt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.length===0?n.jsxs("div",{className:"text-center py-8 text-slate-500",children:[n.jsx(Qn,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),n.jsx("p",{className:"text-sm font-semibold",children:"No signatures yet"}),n.jsx("p",{className:"text-xs mt-1",children:"Create your first signature to get started"})]}):n.jsx("div",{className:"space-y-3",children:a.map(I=>n.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx("h4",{className:"font-bold text-slate-900",children:I.name}),I.isDefault&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-xs font-bold rounded",children:"Default"})]}),n.jsx("div",{className:"text-sm text-slate-600 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:I.content}})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>P(I),className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:n.jsx(Do,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>A(I.id),disabled:v===I.id,className:"p-2 text-slate-400 hover:text-red-600 transition-colors disabled:opacity-50",children:v===I.id?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"})})]})]})},I.id))})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Xj,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Display Preferences"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Customize how content is displayed"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Layout Style"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:["list","grid","compact"].map(I=>n.jsx("button",{onClick:()=>y({...w,layout:I}),className:`p-4 rounded-xl border-2 transition-all ${w.layout===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:n.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Density"}),n.jsx("div",{className:"grid grid-cols-3 gap-3",children:["comfortable","compact","spacious"].map(I=>n.jsx("button",{onClick:()=>y({...w,density:I}),className:`p-4 rounded-xl border-2 transition-all ${w.density===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:n.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),n.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[n.jsx(di,{className:"w-4 h-4"}),"Save Display Preferences"]})]})]}),n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:n.jsx(Xd,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Display Format"}),n.jsx("p",{className:"text-xs text-slate-500",children:"Choose how emails are displayed"})]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Email Format"}),n.jsxs("select",{value:w.emailFormat,onChange:I=>y({...w,emailFormat:I.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"html",children:"HTML (Rich formatting)"}),n.jsx("option",{value:"plain",children:"Plain Text"}),n.jsx("option",{value:"rich",children:"Rich Text"})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Show Email Preview"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display email preview in list view"})]}),n.jsx("button",{onClick:()=>y({...w,showPreview:!w.showPreview}),className:`relative w-12 h-6 rounded-full transition-colors ${w.showPreview?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${w.showPreview?"translate-x-6":"translate-x-0"}`})})]}),w.showPreview&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Preview Lines"}),n.jsx("input",{type:"number",min:"1",max:"10",value:w.previewLines,onChange:I=>y({...w,previewLines:parseInt(I.target.value)||3}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[n.jsx(di,{className:"w-4 h-4"}),"Save Email Format Preferences"]})]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6 space-y-4 text-left my-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:d?"Edit Signature":"Create Signature"}),n.jsx("button",{onClick:()=>{c(!1),u(null),p({name:"",content:"",isDefault:!1})},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Name"}),n.jsx("input",{type:"text",value:f.name,onChange:I=>p({...f,name:I.target.value}),placeholder:"e.g. Professional, Personal",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Content"}),n.jsx("textarea",{value:f.content,onChange:I=>p({...f,content:I.target.value}),placeholder:"Enter your signature (HTML supported)",rows:8,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none font-mono"}),n.jsx("p",{className:"text-xs text-slate-500",children:"HTML is supported. Example: <strong>Name</strong><br>Title"})]}),n.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Set as Default"}),n.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use this signature by default when composing emails"})]}),n.jsx("button",{onClick:()=>p({...f,isDefault:!f.isDefault}),className:`relative w-12 h-6 rounded-full transition-colors ${f.isDefault?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${f.isDefault?"translate-x-6":"translate-x-0"}`})})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>{c(!1),u(null),p({name:"",content:"",isDefault:!1})},className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:E,disabled:m||!f.name||!f.content,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),d?"Update":"Create"," Signature"]})})]})]})})]})},Abe=({currentUser:e,onUserUpdate:t})=>{const{showSuccess:r,showError:a}=Cn(),[s,i]=D.useState("profile"),[o,l]=D.useState(lv),[c,d]=D.useState(!1),[u,f]=D.useState([]),[p,m]=D.useState(""),[b,v]=D.useState(!1),[g,w]=D.useState(!1),[y,j]=D.useState(!1),[N,S]=D.useState(null),[E,A]=D.useState(!1),[P,I]=D.useState(!1),[B,T]=D.useState([]),[_,R]=D.useState(!1),[z,H]=D.useState(""),[Y,J]=D.useState(!1),[re,X]=D.useState(null),[te,W]=D.useState(null),[O,q]=D.useState(null),[G,U]=D.useState({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:Ap(),language:"English"}),[K,ae]=D.useState(!1),[me,se]=D.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},type:"info"}),[le,Me]=D.useState({name:"",email:"",avatar:"",phone:"",jobTitle:"",department:"",bio:"",timezone:Ap(),language:"English"}),[ue,Ue]=D.useState(!1),[Ae,ie]=D.useState(null),[Z,Ee]=D.useState(""),[we,Oe]=D.useState(!1),[de,ce]=D.useState(!1),[Ce,Xe]=D.useState(""),xe=D.useRef(null),[fe,Se]=D.useState([]),[qe,je]=D.useState(!1),[Le,Re]=D.useState({open:!1,name:""}),[Je,ut]=D.useState(!1),vt=(tt,Dt)=>{l(mr=>mr.map(Sr=>Sr.id===tt?{...Sr,[Dt]:!Sr[Dt]}:Sr))};D.useEffect(()=>{s==="connections"&&(async()=>{const Dt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(Dt)try{const mr=await o3(Dt);j(mr.connected||!1),S(mr.userEmail||null)}catch{j(!1)}})()},[s,e]);const At=async()=>{R(!0);try{const tt=await _c(z||void 0);T(tt.data||[])}catch{T([])}finally{R(!1)}};D.useEffect(()=>{s==="users"&&At()},[s,z]);const Bt=async()=>{je(!0);try{const tt=await Vae();Se(tt?.data||[])}catch{Se([])}finally{je(!1)}};D.useEffect(()=>{s==="crm"&&Bt()},[s]),D.useEffect(()=>{(async()=>{if(s==="notifications")try{const Dt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Dt)return;const Sr=(await Xne(Dt)).data||[];if(Sr.length>0){const Jr=lv.map(_r=>Sr.find(sr=>sr.id===_r.id)||_r);l(Jr)}else l(lv)}catch(Dt){console.error("[SETTINGS] Failed to load notification preferences:",Dt),l(lv)}})()},[s,e]);const Yt=async()=>{A(!0);try{const tt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Dt=await cM(tt);Dt.authUrl&&(window.location.href=Dt.authUrl)}catch{a("Failed to connect Google Calendar"),A(!1)}},We=async()=>{I(!0);try{const tt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await ise(tt),j(!1),S(null),r("Google account disconnected successfully")}catch{a("Failed to disconnect Google account")}finally{I(!1)}};D.useEffect(()=>{(async()=>{let Dt=e||JSON.parse(localStorage.getItem("user_data")||"null");if(Dt){const mr=Ap();Me({name:Dt.name||"",email:Dt.email||"",avatar:Dt.avatar||"",phone:Dt.phone||"",jobTitle:Dt.jobTitle||"",department:Dt.department||"",bio:Dt.bio||"",timezone:Dt.timezone||mr,language:Dt.language||"English"}),Ee(Dt.avatar||"")}})()},[e]);const Ct=(tt,Dt=400,mr=400,Sr=.8)=>new Promise((Jr,_r)=>{if(tt.size>5242880){_r(new Error("Image file is too large. Please use an image smaller than 5MB."));return}const sr=new FileReader;sr.onload=en=>{const Gr=new Image;Gr.onload=()=>{let vn=Gr.width,kr=Gr.height;vn>kr?vn>Dt&&(kr=kr*Dt/vn,vn=Dt):kr>mr&&(vn=vn*mr/kr,kr=mr);const Fr=document.createElement("canvas");Fr.width=vn,Fr.height=kr;const ke=Fr.getContext("2d");if(!ke){_r(new Error("Failed to create canvas context"));return}ke.drawImage(Gr,0,0,vn,kr);const ze=Fr.toDataURL("image/jpeg",Sr);if(ze.length>9e5)if(Sr>.5){Ct(tt,Dt,mr,Sr-.1).then(Jr).catch(_r);return}else{_r(new Error("Image is too large even after compression. Please use a smaller image."));return}Jr(ze)},Gr.onerror=()=>_r(new Error("Failed to load image")),Gr.src=en.target?.result},sr.onerror=()=>_r(new Error("Failed to read file")),sr.readAsDataURL(tt)}),br=async tt=>{const Dt=tt.target.files?.[0];if(Dt){if(!Dt.type.startsWith("image/")){a("Please select a valid image file.");return}ie(null);try{const mr=new FileReader;mr.onload=Sr=>{const Jr=Sr.target?.result;Xe(Jr),ce(!0)},mr.onerror=()=>{a("Failed to read image file.")},mr.readAsDataURL(Dt)}catch(mr){const Sr=mr.message||"Failed to load image. Please try a different image.";a(Sr),ie(Sr),xe.current&&(xe.current.value="")}}},Jt=async tt=>{ce(!1),Oe(!0);try{const mr=await(await fetch(tt)).blob(),Sr=new File([mr],"cropped-image.jpg",{type:"image/jpeg"}),Jr=await Ct(Sr,400,400,.8);Ee(Jr),Me(_r=>({..._r,avatar:Jr})),r('Image cropped and loaded successfully. Click "Save Changes" to update your profile.')}catch(Dt){const mr=Dt.message||"Failed to process cropped image.";a(mr),ie(mr)}finally{Oe(!1),xe.current&&(xe.current.value="")}},Dr=()=>{ce(!1),Xe(""),xe.current&&(xe.current.value="")},Hr=async()=>{if(!le.name.trim()){ie("Full name is required.");return}Ue(!0);try{const tt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Dt=await Rne(tt,le),mr=Dt.data||Dt;localStorage.setItem("user_data",JSON.stringify(mr)),t(mr),r("Profile updated successfully!"),ie(null)}catch{a("Failed to update profile.")}finally{Ue(!1)}};return n.jsxs("div",{className:"w-full space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-end",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-left",children:"Settings"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your personal account and workspace preferences"})]}),s==="profile"&&n.jsxs("button",{onClick:Hr,disabled:ue,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[ue?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(di,{className:"w-4 h-4"}),"Save Changes"]})]}),n.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[n.jsx("aside",{className:"w-full lg:w-64 space-y-1",children:[{id:"profile",label:"Profile Settings",icon:n.jsx(qi,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:n.jsx(Pb,{className:"w-4 h-4"})},{id:"preferences",label:"User Preferences",icon:n.jsx(Zj,{className:"w-4 h-4"})},{id:"connections",label:"Connections & Sync",icon:n.jsx(Kj,{className:"w-4 h-4"})},{id:"users",label:"Team Management",icon:n.jsx(x0,{className:"w-4 h-4"})},{id:"workspace",label:"Workspace Settings",icon:n.jsx(P8,{className:"w-4 h-4"})},{id:"crm",label:"CRM",icon:n.jsx(dl,{className:"w-4 h-4"})}].map(tt=>n.jsxs("button",{onClick:()=>i(tt.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all ${s===tt.id?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[tt.icon,tt.label]},tt.id))}),n.jsxs("div",{className:"flex-1 space-y-6",children:[s==="profile"&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-8 text-left",children:[Ae&&n.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-4 rounded-xl",children:Ae}),n.jsxs("div",{className:"flex items-center gap-6 pb-8 border-b border-slate-100",children:[n.jsxs("div",{className:"relative group",children:[n.jsx(Xs,{src:Z,alt:le.name||"User",fallbackText:le.name||le.email||"U",className:"w-24 h-24 shadow-lg border-2 border-white object-cover",isAvatar:!0}),we&&n.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-3xl flex items-center justify-center z-10",children:n.jsx(gt,{className:"w-6 h-6 text-white animate-spin"})}),n.jsx("button",{onClick:()=>xe.current?.click(),disabled:we,className:"absolute inset-0 bg-black/40 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white disabled:opacity-60 disabled:cursor-not-allowed",children:n.jsx(kc,{className:"w-6 h-6"})}),n.jsx("input",{ref:xe,type:"file",accept:"image/*",onChange:br,className:"hidden",disabled:we})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-bold text-xl text-slate-900",children:le.name||"Set Name"}),n.jsxs("p",{className:"text-slate-500 text-sm",children:[le.jobTitle||"No Title","  ",le.department||"No Dept"]}),n.jsx("p",{className:"text-slate-400 text-xs mt-1",children:le.email})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),n.jsx("input",{type:"text",value:le.name,onChange:tt=>Me({...le,name:tt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(Cl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:le.jobTitle,onChange:tt=>Me({...le,jobTitle:tt.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Senior Logistics Analyst"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),n.jsx("input",{type:"text",value:le.department,onChange:tt=>Me({...le,department:tt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Operations"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),n.jsx("input",{type:"tel",value:le.phone,onChange:tt=>Me({...le,phone:tt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"+1 555-0000"})]}),n.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),n.jsx("textarea",{value:le.bio,onChange:tt=>Me({...le,bio:tt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm min-h-[100px] resize-none",placeholder:"Tell the team a bit about yourself..."})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(b6,{className:"w-3.5 h-3.5"})," Timezone"]}),n.jsx("select",{value:le.timezone,onChange:tt=>Me({...le,timezone:tt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:tx.map(tt=>n.jsx("option",{value:tt.value,children:tt.label},tt.value))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:"Language"}),n.jsx("select",{value:le.language,onChange:tt=>Me({...le,language:tt.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:N6.map(tt=>n.jsx("option",{value:tt.value,children:tt.label},tt.value))})]})]})]}),s==="notifications"&&n.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[n.jsxs("div",{className:"pb-6 border-b border-slate-100",children:[n.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:"Notification Preferences"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Choose how you want to be notified about important updates and activities."})]}),n.jsx("div",{className:"space-y-4",children:o.map(tt=>n.jsx("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h4",{className:"font-bold text-slate-900 text-sm mb-1",children:tt.label}),n.jsx("p",{className:"text-xs text-slate-500",children:tt.description})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"In-App"}),n.jsx("button",{onClick:()=>vt(tt.id,"inApp"),className:`relative w-11 h-6 rounded-full transition-colors ${tt.inApp?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${tt.inApp?"translate-x-5":"translate-x-0"}`})})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Email"}),n.jsx("button",{onClick:()=>vt(tt.id,"email"),className:`relative w-11 h-6 rounded-full transition-colors ${tt.email?"bg-indigo-600":"bg-slate-300"}`,children:n.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${tt.email?"translate-x-5":"translate-x-0"}`})})]})]})]})},tt.id))}),n.jsx("div",{className:"pt-4 border-t border-slate-100",children:n.jsxs("button",{onClick:async()=>{try{const tt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!tt){a("Please log in to save preferences.");return}await Yne(tt,o),r("Notification preferences saved successfully!")}catch(tt){console.error("[SETTINGS] Failed to save notification preferences:",tt),a(tt.message||"Failed to save notification preferences.")}},className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95",children:[n.jsx(di,{className:"w-4 h-4"})," Save Preferences"]})})]}),s==="connections"&&n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white shadow-md flex items-center justify-center",children:n.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 48 48",children:[n.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),n.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),n.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),n.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Google Workspace"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"Connect your Google account to sync Calendar, Drive, Docs, and Gmail"})]})]})}),n.jsx("div",{className:"p-6",children:y?n.jsxs("div",{className:"space-y-6",children:[n.jsx("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Nn,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-emerald-900",children:"Connected"}),N&&n.jsx("p",{className:"text-xs text-emerald-700 mt-0.5",children:N})]})]}),n.jsx("button",{onClick:We,disabled:P,className:"px-4 py-2 bg-red-600 text-white text-xs font-bold uppercase tracking-widest rounded-lg hover:bg-red-700 transition-all disabled:opacity-50 flex items-center gap-2",children:P?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-3 h-3 animate-spin"}),"Disconnecting..."]}):"Disconnect"})]})}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"Connected Services"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:n.jsx(Jn,{className:"w-4 h-4 text-blue-600"})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Calendar"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Sync events and schedules"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Drive"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Store and access documents"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx("svg",{className:"w-4 h-4 text-indigo-600",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Google Docs"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Create and sign documents"})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:n.jsx(rs,{className:"w-4 h-4 text-red-600"})}),n.jsx("span",{className:"font-bold text-slate-900",children:"Gmail"})]}),n.jsx("p",{className:"text-xs text-slate-600",children:"Access email communications"})]})]})]}),n.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx(gx,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Permissions Granted"}),n.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[n.jsx("li",{children:" View and manage calendar events"}),n.jsx("li",{children:" Create, view, and manage files in Google Drive"}),n.jsx("li",{children:" Create and edit documents in Google Docs"}),n.jsx("li",{children:" Read email messages from Gmail"})]})]})]})})]}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"text-center py-8",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-4",children:n.jsx(Kj,{className:"w-8 h-8 text-slate-400"})}),n.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"Not Connected"}),n.jsx("p",{className:"text-sm text-slate-600 max-w-md mx-auto mb-6",children:"Connect your Google account to unlock powerful integrations with Calendar, Drive, Docs, and Gmail"}),n.jsx("button",{onClick:Yt,disabled:E,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 inline-flex items-center gap-2",children:E?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):n.jsxs(n.Fragment,{children:[n.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[n.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),n.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),n.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),n.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Connect with Google"]})})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"What You'll Get"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx(Jn,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Calendar Sync"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Sync events and manage schedules"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Drive Storage"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Store contracts and documents"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:n.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Document Signing"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"E-signature via Google Docs"})]})]}),n.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[n.jsx(rs,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Gmail Access"}),n.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"View email communications"})]})]})]})]})]})})]}),n.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-6",children:n.jsxs("div",{className:"flex items-start gap-4",children:[n.jsx(gx,{className:"w-6 h-6 text-amber-600 shrink-0 mt-0.5"}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-black text-amber-900 mb-2",children:"Security & Privacy"}),n.jsxs("ul",{className:"text-xs text-amber-800 space-y-1",children:[n.jsx("li",{children:" Your data is encrypted and securely stored"}),n.jsx("li",{children:" We only request the minimum permissions needed"}),n.jsx("li",{children:" You can disconnect at any time"}),n.jsx("li",{children:" We never share your data with third parties"})]})]})]})})]}),s==="users"&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden text-left",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-slate-900",children:"Team Management"}),n.jsxs("button",{onClick:()=>{X(null),U({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:Ap(),language:"English"}),J(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg flex items-center gap-2 shadow-md",children:[n.jsx(id,{className:"w-4 h-4"})," Add User"]})]}),n.jsx("div",{className:"p-4 border-b border-slate-100",children:n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search team members...",value:z,onChange:tt=>H(tt.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})}),n.jsx("div",{className:"divide-y divide-slate-100",children:_?n.jsx("div",{className:"p-8 text-center",children:n.jsx(gt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):B.map(tt=>n.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(Xs,{src:tt.avatar,alt:tt.name||"",fallbackText:tt.name||tt.email||"U",className:"w-10 h-10 border",isAvatar:!0}),n.jsxs("div",{children:[n.jsx("p",{className:"font-bold text-slate-900 text-sm",children:tt.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[tt.email,"  ",n.jsx("span",{className:"font-bold text-indigo-600",children:tt.role})]})]})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{onClick:()=>{X(tt),U({email:tt.email,name:tt.name,role:tt.role||"User",jobTitle:tt.jobTitle||"",department:tt.department||"",phone:tt.phone||"",bio:tt.bio||"",timezone:tt.timezone||Ap(),language:tt.language||"English"}),J(!0)},className:"p-2 text-slate-400 hover:text-indigo-600",children:n.jsx(Do,{className:"w-4 h-4"})}),n.jsx("button",{onClick:()=>q(tt),className:"p-2 text-slate-400 hover:text-red-600",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},tt.id))})]}),s==="preferences"&&n.jsx(Cbe,{currentUser:e,showSuccess:r,showError:a}),s==="workspace"&&n.jsx(_be,{currentUser:e,showSuccess:r,showError:a}),s==="crm"&&n.jsx("div",{className:"space-y-6",children:n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-indigo-50/30",children:n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-white shadow-sm flex items-center justify-center",children:n.jsx(dl,{className:"w-6 h-6 text-indigo-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"CRM Settings"}),n.jsx("p",{className:"text-sm text-slate-500 mt-0.5",children:"Manage industries for company imports and CRM data."})]})]})}),n.jsxs("div",{className:"p-6",children:[n.jsx("h4",{className:"text-sm font-bold text-slate-700 mb-3",children:"Industries"}),n.jsx("p",{className:"text-xs text-slate-500 mb-4",children:"Industries are used when uploading companies. Add any industry that may appear in your company import files. Only admins can add, edit, or delete."}),qe?n.jsxs("div",{className:"flex items-center gap-2 text-slate-500 py-6",children:[n.jsx(gt,{className:"w-5 h-5 animate-spin"}),n.jsx("span",{className:"text-sm",children:"Loading industries..."})]}):n.jsxs("div",{className:"space-y-2",children:[e?.role==="Admin"&&n.jsxs("button",{type:"button",onClick:()=>Re({open:!0,name:""}),className:"flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-semibold hover:bg-indigo-700 transition-colors",children:[n.jsx(ln,{className:"w-4 h-4"}),"Add industry"]}),fe.length===0?n.jsx("p",{className:"text-sm text-slate-500 py-4",children:"No industries yet. Add one to use with company uploads."}):n.jsx("ul",{className:"divide-y divide-slate-100",children:fe.map(tt=>n.jsxs("li",{className:"flex items-center justify-between py-3 px-3 rounded-lg hover:bg-slate-50",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:tt.name}),tt.usageCount!==void 0&&n.jsxs("span",{className:"text-xs text-slate-400 ml-2",children:["(",tt.usageCount," companies)"]})]}),e?.role==="Admin"&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Re({open:!0,industry:tt,name:tt.name}),className:"p-2 text-slate-400 hover:text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",title:"Edit",children:n.jsx(Do,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",onClick:async()=>{if((tt.usageCount||0)>0){a("Cannot delete: this industry is in use by companies.");return}try{await Yae(tt.id),r("Industry deleted"),Bt()}catch(Dt){a(Dt?.message||"Failed to delete industry")}},className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},tt.id))})]})]})]})}),Le.open&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-4",children:Le.industry?"Edit industry":"Add industry"}),n.jsx("input",{type:"text",value:Le.name,onChange:tt=>Re(Dt=>({...Dt,name:tt.target.value})),placeholder:"Industry name",className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm mb-4"}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Re({open:!1,name:""}),className:"px-4 py-2 rounded-xl text-slate-600 hover:bg-slate-100 font-medium text-sm",children:"Cancel"}),n.jsxs("button",{type:"button",disabled:Je,onClick:async()=>{const tt=Le.name.trim();if(!tt){a("Name is required");return}ut(!0);try{Le.industry?(await Xae(Le.industry.id,{name:tt}),r("Industry updated")):(await Kae({name:tt}),r("Industry added")),Re({open:!1,name:""}),Bt()}catch(Dt){a(Dt?.message||"Failed to save industry")}finally{ut(!1)}},className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-medium text-sm hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[Je&&n.jsx(gt,{className:"w-4 h-4 animate-spin"}),Le.industry?"Save":"Add"]})]})]})})]})]}),Y&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 space-y-4 text-left my-8",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("h3",{className:"font-bold text-lg text-slate-900",children:re?"Edit User":"Add New User"}),n.jsx("button",{onClick:()=>J(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),n.jsx("input",{type:"text",value:G.name,onChange:tt=>U({...G,name:tt.target.value}),placeholder:"Full Name",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email Address"}),n.jsx("input",{type:"email",value:G.email,onChange:tt=>U({...G,email:tt.target.value}),placeholder:"Email Address",disabled:!!re,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm disabled:opacity-50"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),n.jsxs("select",{value:G.role,onChange:tt=>U({...G,role:tt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[n.jsx("option",{value:"Viewer",children:"Viewer - Read-only access"}),n.jsx("option",{value:"Collaborator",children:"Collaborator - Can comment and draft"}),n.jsx("option",{value:"Admin",children:"Admin - Full access"}),n.jsx("option",{value:"User",children:"User (Legacy - maps to Collaborator)"})]}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[G.role==="Viewer"&&"Read-only access to shared inbox",G.role==="Collaborator"&&"Can add notes, draft responses, manage own templates",G.role==="Admin"&&"Full configuration access, can assign emails, send, manage accounts",G.role==="User"&&"Legacy role - will be treated as Collaborator"]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),n.jsxs("div",{className:"relative",children:[n.jsx(Cl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:G.jobTitle,onChange:tt=>U({...G,jobTitle:tt.target.value}),placeholder:"e.g. Senior Logistics Analyst",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),n.jsx("input",{type:"text",value:G.department,onChange:tt=>U({...G,department:tt.target.value}),placeholder:"e.g. Operations",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),n.jsx("input",{type:"tel",value:G.phone,onChange:tt=>U({...G,phone:tt.target.value}),placeholder:"+1 555-0000",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),n.jsx("textarea",{value:G.bio,onChange:tt=>U({...G,bio:tt.target.value}),placeholder:"Tell the team a bit about yourself...",rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(b6,{className:"w-3.5 h-3.5"})," Timezone"]}),n.jsx("select",{value:G.timezone,onChange:tt=>U({...G,timezone:tt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:tx.map(tt=>n.jsx("option",{value:tt.value,children:tt.label},tt.value))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Language"}),n.jsx("select",{value:G.language,onChange:tt=>U({...G,language:tt.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:N6.map(tt=>n.jsx("option",{value:tt.value,children:tt.label},tt.value))})]})]}),n.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>J(!1),className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{ae(!0);try{re?await Dne(re.id,G):await Ine(G),J(!1),At(),r(re?"User updated successfully!":"User created successfully!")}catch(tt){a(tt.message||"Failed to save user")}finally{ae(!1)}},disabled:K||!G.name||!G.email,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:K?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),re?"Updating...":"Creating..."]}):re?"Update":"Invite"})]})]})}),O&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete User?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The user will be permanently removed from the system."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:O.name}),n.jsx("p",{className:"text-xs text-slate-500",children:O.email}),O.role&&n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:O.role})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>q(null),disabled:te===O.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:async()=>{W(O.id);try{await Mne(O.id),await At(),q(null),r("User deleted successfully")}catch(tt){a(tt.message||"Failed to delete user")}finally{W(null)}},disabled:te===O.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:te===O.id?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete User"})]})]})}),de&&Ce&&n.jsx(Sbe,{imageSrc:Ce,onCrop:Jt,onCancel:Dr,aspectRatio:1,circularCrop:!0})]})},Ebe=({currentUser:e})=>{const{showSuccess:t,showError:r}=Cn(),a=e?.role==="Admin",[s,i]=D.useState("companies"),[o,l]=D.useState({companies:!1,contacts:!1,incomplete:!1,mismatches:!1}),[c,d]=D.useState({groups:[],totalDuplicates:0}),[u,f]=D.useState({groups:[],totalDuplicates:0}),[p,m]=D.useState({companies:[],contacts:[],deals:[],projects:[],invoices:[]}),[b,v]=D.useState({mismatches:[],count:0}),[g,w]=D.useState(null),[y,j]=D.useState(!1),[N,S]=D.useState({}),E=D.useCallback(async()=>{l(J=>({...J,companies:!0}));try{const J=await zae(),re=J?.data??J;d({groups:re.groups||[],totalDuplicates:re.totalDuplicates??0})}catch{r("Failed to load duplicate companies"),d({groups:[],totalDuplicates:0})}finally{l(J=>({...J,companies:!1}))}},[r]),A=D.useCallback(async()=>{l(J=>({...J,contacts:!0}));try{const J=await Hae(),re=J?.data??J;f({groups:re.groups||[],totalDuplicates:re.totalDuplicates??0})}catch{r("Failed to load duplicate contacts"),f({groups:[],totalDuplicates:0})}finally{l(J=>({...J,contacts:!1}))}},[r]),P=D.useCallback(async()=>{l(J=>({...J,incomplete:!0}));try{const J=await Wae(),re=J?.data??J;m({companies:re.companies||[],contacts:re.contacts||[],deals:re.deals||[],projects:re.projects||[],invoices:re.invoices||[]})}catch{r("Failed to load incomplete records"),m({companies:[],contacts:[],deals:[],projects:[],invoices:[]})}finally{l(J=>({...J,incomplete:!1}))}},[r]),I=D.useCallback(async()=>{l(J=>({...J,mismatches:!0}));try{const J=await Gae(),re=J?.data??J;v({mismatches:re.mismatches||[],count:re.count??0})}catch{r("Failed to load domain mismatches"),v({mismatches:[],count:0})}finally{l(J=>({...J,mismatches:!1}))}},[r]);D.useEffect(()=>{a&&(s==="companies"?E():s==="contacts"?A():s==="incomplete"?P():s==="mismatches"&&I())},[a,s,E,A,P,I]);const B=()=>{s==="companies"?E():s==="contacts"?A():s==="incomplete"?P():I()},T=(J,re,X,te,W,O)=>{w({open:!0,type:J,primaryId:re,secondaryId:X,primaryName:te,secondaryName:W,groupKey:O})},_=()=>{y||w(null)},R=async()=>{if(g){j(!0);try{g.type==="company"?(await qae(g.primaryId,g.secondaryId),t("Companies merged successfully"),E()):(await $ae(g.primaryId,g.secondaryId),t("Contacts merged successfully"),A()),w(null)}catch(J){r(J?.message||"Merge failed")}finally{j(!1)}}},z=J=>{S(re=>({...re,[J]:!re[J]}))};if(!a)return n.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:n.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-8 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[n.jsx(AU,{className:"w-12 h-12 text-amber-600 mb-4"}),n.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Admin Only"}),n.jsx("p",{className:"text-slate-600 text-sm",children:"Data Hygiene is available only to administrators. Contact your workspace admin if you need access."})]})});const H=[{id:"companies",label:"Duplicate Companies",icon:n.jsx(dl,{className:"w-4 h-4"}),count:c.totalDuplicates},{id:"contacts",label:"Duplicate Contacts",icon:n.jsx(qi,{className:"w-4 h-4"}),count:u.totalDuplicates},{id:"incomplete",label:"Incomplete Records",icon:n.jsx(mU,{className:"w-4 h-4"}),count:p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length},{id:"mismatches",label:"Domain Mismatches",icon:n.jsx(fh,{className:"w-4 h-4"}),count:b.count}],Y=o[s];return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Hygiene"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-0.5",children:"Find duplicates, incomplete records, and domain mismatches"})]}),n.jsxs("button",{onClick:B,disabled:Y,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm disabled:opacity-60",children:[Y?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(sd,{className:"w-4 h-4"}),"Refresh"]})]}),n.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-4",children:H.map(J=>n.jsxs("button",{onClick:()=>i(J.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${s===J.id?"bg-indigo-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[J.icon,J.label,J.count!=null&&J.count>0&&n.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-xs font-bold ${s===J.id?"bg-white/20":"bg-slate-300 text-slate-700"}`,children:J.count})]},J.id))}),n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[Y&&n.jsx("div",{className:"flex items-center justify-center py-16",children:n.jsx(gt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),!Y&&s==="companies"&&n.jsx("div",{className:"p-6",children:c.groups.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate companies found by domain."}):n.jsx("ul",{className:"space-y-4",children:c.groups.map(J=>{const re=`company-${J.domain}`,X=N[re]!==!1;return n.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("button",{onClick:()=>z(re),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:J.domain}),n.jsxs("span",{className:"text-sm text-slate-500",children:[J.count," companies"]}),X?n.jsx(Fs,{className:"w-5 h-5"}):n.jsx(wa,{className:"w-5 h-5"})]}),X&&n.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:J.companies.map((te,W)=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:te.name||""}),te.industry&&n.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",te.industry,")"]})]}),J.companies.length>=2&&n.jsx("div",{className:"flex gap-2",children:J.companies.filter(O=>O.id!==te.id).map(O=>n.jsxs("button",{onClick:()=>T("company",te.id,O.id,te.name||te.id,O.name||O.id,re),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[n.jsx(Xv,{className:"w-3.5 h-3.5"})," Merge into ",te.name||"this"]},O.id))})]},te.id))})]},re)})})}),!Y&&s==="contacts"&&n.jsx("div",{className:"p-6",children:u.groups.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate contacts found by email."}):n.jsx("ul",{className:"space-y-4",children:u.groups.map(J=>{const re=`contact-${J.email}`,X=N[re]!==!1;return n.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[n.jsxs("button",{onClick:()=>z(re),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[n.jsx("span",{className:"font-semibold text-slate-900",children:J.email}),n.jsxs("span",{className:"text-sm text-slate-500",children:[J.count," contacts"]}),X?n.jsx(Fs,{className:"w-5 h-5"}):n.jsx(wa,{className:"w-5 h-5"})]}),X&&n.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:J.contacts.map(te=>n.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[n.jsxs("div",{children:[n.jsx("span",{className:"font-medium text-slate-900",children:te.name||""}),n.jsx("span",{className:"text-slate-500 text-sm ml-2",children:te.email})]}),J.contacts.filter(W=>W.id!==te.id).map(W=>n.jsxs("button",{onClick:()=>T("contact",te.id,W.id,te.name||te.id,W.name||W.id,re),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[n.jsx(Xv,{className:"w-3.5 h-3.5"})," Merge into ",te.name||"this"]},W.id))]},te.id))})]},re)})})}),!Y&&s==="incomplete"&&n.jsxs("div",{className:"p-6 space-y-6",children:[[{key:"companies",label:"Companies",items:p.companies,recordLabel:J=>J.name||J.id},{key:"contacts",label:"Contacts",items:p.contacts,recordLabel:J=>J.name||J.email||J.id},{key:"deals",label:"Deals",items:p.deals,recordLabel:J=>J.name||J.title||J.id},{key:"projects",label:"Projects",items:p.projects,recordLabel:J=>J.name||J.title||J.id},{key:"invoices",label:"Invoices",items:p.invoices,recordLabel:J=>J.id}].map(({key:J,label:re,items:X,recordLabel:te})=>X.length===0?null:n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:re}),n.jsx("ul",{className:"space-y-2",children:X.map(W=>n.jsxs("li",{className:"flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx($n,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"font-medium text-slate-900",children:te(W.record)}),n.jsx("ul",{className:"text-sm text-amber-800 mt-1 list-disc list-inside",children:W.errors.map((O,q)=>n.jsx("li",{children:O},q))})]})]},W.record.id))})]},J)),p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length===0&&n.jsx("p",{className:"text-slate-500 text-sm",children:"No incomplete records found."})]}),!Y&&s==="mismatches"&&n.jsx("div",{className:"p-6",children:b.mismatches.length===0?n.jsx("p",{className:"text-slate-500 text-sm",children:"No domain mismatches (contact email domain matches company domain)."}):n.jsx("ul",{className:"space-y-3",children:b.mismatches.map((J,re)=>n.jsxs("li",{className:"flex items-center gap-4 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx($n,{className:"w-5 h-5 text-amber-600 shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsxs("p",{className:"font-medium text-slate-900",children:[J.contact?.name," (",J.contact?.email,")"]}),n.jsxs("p",{className:"text-sm text-slate-600",children:["Contact domain: ",n.jsx("strong",{children:J.contactDomain}),"  Company domain: ",n.jsx("strong",{children:J.companyDomain})," (",J.company?.name,")"]})]})]},re))})})]}),g&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:_}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm merge"}),n.jsx("button",{onClick:_,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",disabled:y,children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Merge ",n.jsx("strong",{children:g.secondaryName})," into ",n.jsx("strong",{children:g.primaryName}),"? Related records will point to the primary. The secondary will be removed."]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:_,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200",disabled:y,children:"Cancel"}),n.jsxs("button",{onClick:R,disabled:y,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60",children:[y?n.jsx(gt,{className:"w-5 h-5 animate-spin"}):n.jsx(Xv,{className:"w-5 h-5"}),"Merge"]})]})]})]})})]})]})},Tbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=Cn(),[a,s]=D.useState([]),[i,o]=D.useState(!1),[l,c]=D.useState(null),[d,u]=D.useState(null),[f,p]=D.useState(!1),[m,b]=D.useState([]),v=e?.role==="Admin",[g,w]=D.useState(()=>{const _=!v&&e?.id?e.id:void 0;return _?{userId:_}:{}}),[y,j]=D.useState(!1);D.useEffect(()=>{(async()=>{try{const R=await _c();b(R?.data||[])}catch(R){console.error("Failed to load users:",R)}})()},[]);const N=D.useCallback(async()=>{o(!0);try{const R=(await nse({...g,limit:100}))?.data||[];s(R)}catch(_){r(_.message||"Failed to load import history"),s([])}finally{o(!1)}},[g,r]);D.useEffect(()=>{N()},[N]);const S=async _=>{c(_),p(!0);try{const R=await rse(_.id);u(R?.data||R)}catch(R){r(R.message||"Failed to load batch details"),u(null)}finally{p(!1)}},E=_=>{if(!_)return"N/A";try{return(_.toDate?_.toDate():new Date(_)).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return"Invalid date"}},A=_=>m.find(z=>z.id===_)?.name||_||"Unknown",P=_=>{switch(_){case"completed":return n.jsx(Nn,{className:"w-5 h-5 text-green-600"});case"failed":return n.jsx(Ib,{className:"w-5 h-5 text-red-600"});case"processing":return n.jsx(is,{className:"w-5 h-5 text-yellow-600"});default:return n.jsx(is,{className:"w-5 h-5 text-slate-400"})}},I=_=>{const R="px-2 py-1 rounded-full text-xs font-medium";switch(_){case"completed":return`${R} bg-green-100 text-green-700`;case"failed":return`${R} bg-red-100 text-red-700`;case"processing":return`${R} bg-yellow-100 text-yellow-700`;default:return`${R} bg-slate-100 text-slate-700`}},B=()=>{w({})},T=Object.keys(g).length>0;return n.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[n.jsx(ad,{className:"w-6 h-6 text-indigo-600"}),"Import History"]}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"View and manage past import batches"})]}),n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("button",{onClick:()=>j(!y),className:`px-4 py-2 rounded-lg text-sm font-medium flex items-center gap-2 transition-colors ${y||T?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-700 hover:bg-slate-50"}`,children:[n.jsx(bf,{className:"w-4 h-4"}),"Filters",T&&n.jsx("span",{className:"bg-white text-indigo-600 rounded-full px-2 py-0.5 text-xs font-bold",children:Object.keys(g).length})]}),n.jsxs("button",{onClick:N,disabled:i,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 rounded-lg text-sm font-medium hover:bg-slate-50 flex items-center gap-2 disabled:opacity-50",children:[n.jsx(sd,{className:`w-4 h-4 ${i?"animate-spin":""}`}),"Refresh"]})]})]}),y&&n.jsxs("div",{className:"bg-white border border-slate-200 rounded-xl p-4 space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-700",children:"Filter Imports"}),n.jsx("button",{onClick:B,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear all"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"User"}),n.jsxs("select",{value:g.userId||"",onChange:_=>w(R=>({...R,userId:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"All users"}),m.map(_=>n.jsx("option",{value:_.id,children:_.name||_.email},_.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Type"}),n.jsxs("select",{value:g.type||"",onChange:_=>w(R=>({...R,type:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"All types"}),n.jsx("option",{value:"company",children:"Companies"}),n.jsx("option",{value:"contact",children:"Contacts"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Status"}),n.jsxs("select",{value:g.status||"",onChange:_=>w(R=>({...R,status:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"All statuses"}),n.jsx("option",{value:"completed",children:"Completed"}),n.jsx("option",{value:"failed",children:"Failed"}),n.jsx("option",{value:"processing",children:"Processing"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Start Date"}),n.jsx("input",{type:"date",value:g.startDate||"",onChange:_=>w(R=>({...R,startDate:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"End Date"}),n.jsx("input",{type:"date",value:g.endDate||"",onChange:_=>w(R=>({...R,endDate:_.target.value||void 0})),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm"})]})]})]}),l&&n.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[P(l.status),n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-bold text-slate-900",children:"Import Batch Details"}),n.jsx("p",{className:"text-sm text-slate-500",children:l.fileName})]})]}),n.jsx("button",{onClick:()=>{c(null),u(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:f?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-slate-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-slate-500 mb-1",children:"Total Rows"}),n.jsx("p",{className:"text-2xl font-bold text-slate-900",children:l.totalRows})]}),n.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-green-600 mb-1",children:"Successful"}),n.jsx("p",{className:"text-2xl font-bold text-green-700",children:l.successfulImports})]}),n.jsxs("div",{className:"bg-red-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-red-600 mb-1",children:"Failed"}),n.jsx("p",{className:"text-2xl font-bold text-red-700",children:l.failedRows})]}),n.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-indigo-600 mb-1",children:"Status"}),n.jsx("span",{className:I(l.status),children:l.status})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Type"}),n.jsxs("p",{className:"text-sm text-slate-900 capitalize flex items-center gap-2",children:[l.type==="company"?n.jsx(dl,{className:"w-4 h-4"}):n.jsx(qi,{className:"w-4 h-4"}),l.type]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Uploaded By"}),n.jsx("p",{className:"text-sm text-slate-900",children:A(l.uploadedBy)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"Date"}),n.jsxs("p",{className:"text-sm text-slate-900 flex items-center gap-2",children:[n.jsx(Jn,{className:"w-4 h-4"}),E(l.createdAt)]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-1",children:"File Name"}),n.jsxs("p",{className:"text-sm text-slate-900 flex items-center gap-2",children:[n.jsx(xx,{className:"w-4 h-4"}),l.fileName]})]})]}),l.type==="company"&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Created Companies"}),n.jsx("p",{className:"text-xl font-bold text-blue-700",children:l.createdCompanies||0})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Updated Companies"}),n.jsx("p",{className:"text-xl font-bold text-purple-700",children:l.updatedCompanies||0})]})]}),l.type==="contact"&&n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-blue-600 mb-1",children:"Created Contacts"}),n.jsx("p",{className:"text-xl font-bold text-blue-700",children:l.createdContacts||0})]}),n.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[n.jsx("p",{className:"text-xs text-purple-600 mb-1",children:"Updated Contacts"}),n.jsx("p",{className:"text-xl font-bold text-purple-700",children:l.updatedContacts||0})]})]}),d&&n.jsxs("div",{className:"mt-4",children:[n.jsx("p",{className:"text-xs font-medium text-slate-500 mb-2",children:"Batch ID"}),n.jsx("code",{className:"text-xs bg-slate-100 px-2 py-1 rounded text-slate-700",children:l.id})]})]})]})})]})}),n.jsx("div",{className:"bg-white border border-slate-200 rounded-xl overflow-hidden",children:i?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[n.jsx(ad,{className:"w-12 h-12 text-slate-300 mb-4"}),n.jsx("p",{className:"text-slate-500 font-medium",children:"No import batches found"}),n.jsx("p",{className:"text-sm text-slate-400 mt-1",children:T?"Try adjusting your filters":"Import batches will appear here after you upload companies or contacts"})]}):n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full",children:[n.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:n.jsxs("tr",{children:[n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"File Name"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Type"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Status"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Results"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Uploaded By"}),n.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-slate-700 uppercase",children:"Date"}),n.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-slate-700 uppercase",children:"Actions"})]})}),n.jsx("tbody",{className:"divide-y divide-slate-200",children:a.map(_=>n.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(xx,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:_.fileName})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-slate-100 text-slate-700",children:[_.type==="company"?n.jsx(dl,{className:"w-3 h-3"}):n.jsx(qi,{className:"w-3 h-3"}),_.type]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:I(_.status),children:_.status})}),n.jsx("td",{className:"px-4 py-3",children:n.jsxs("div",{className:"text-sm text-slate-600",children:[n.jsx("span",{className:"text-green-600 font-medium",children:_.successfulImports})," / ",n.jsx("span",{className:"text-slate-900",children:_.totalRows}),_.failedRows>0&&n.jsxs(n.Fragment,{children:[" ",n.jsxs("span",{className:"text-red-600",children:["(",_.failedRows," failed)"]})]})]})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-slate-600",children:A(_.uploadedBy)})}),n.jsx("td",{className:"px-4 py-3",children:n.jsx("span",{className:"text-sm text-slate-600",children:E(_.createdAt)})}),n.jsx("td",{className:"px-4 py-3 text-right",children:n.jsxs("button",{onClick:()=>S(_),className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors",children:[n.jsx(Xd,{className:"w-4 h-4"}),"View"]})})]},_.id))})]})})})]})},uf={meet:/https?:\/\/(?:www\.)?(?:meet\.google\.com|meeting\.google\.com)\/[^\s<>"']+/gi,zoom:/https?:\/\/(?:[a-z0-9.-]+\.)?zoom\.us\/(?:j\/)?[^\s<>"']+/gi,teams:/https?:\/\/(?:teams\.microsoft\.com|.*\.teams\.microsoft\.com)\/[^\s<>"']+/gi,webex:/https?:\/\/(?:[a-z0-9.-]+\.)?webex\.com\/[^\s<>"']+/gi,generic:/https?:\/\/[^\s<>"']+/gi};function Obe(e){const t=e.conferenceData?.entryPoints;if(t?.length){const i=t.find(o=>o.entryPointType==="video"||o.uri?.includes("meet.")||o.uri?.includes("zoom")||o.uri?.includes("teams")||o.uri?.includes("webex"))||t[0];if(i?.uri){const o=i.uri;return o.includes("meet.")||o.includes("meeting.google")?{url:o,platform:"google_meet"}:o.includes("zoom")?{url:o,platform:"zoom"}:o.includes("teams")?{url:o,platform:"teams"}:o.includes("webex")?{url:o,platform:"webex"}:{url:o,platform:"generic"}}}const r=e.location||"";let a=r.match(uf.meet);if(a?.[0])return{url:a[0],platform:"google_meet"};if(a=r.match(uf.zoom),a?.[0])return{url:a[0],platform:"zoom"};if(a=r.match(uf.teams),a?.[0])return{url:a[0],platform:"teams"};if(a=r.match(uf.webex),a?.[0])return{url:a[0],platform:"webex"};const s=e.description||"";if(a=s.match(uf.meet),a?.[0])return{url:a[0],platform:"google_meet"};if(a=s.match(uf.zoom),a?.[0])return{url:a[0],platform:"zoom"};if(a=s.match(uf.teams),a?.[0])return{url:a[0],platform:"teams"};if(a=s.match(uf.webex),a?.[0])return{url:a[0],platform:"webex"};if(a=s.match(uf.generic),a?.[0]&&(a[0].includes("meet")||a[0].includes("zoom")||a[0].includes("teams")||a[0].includes("webex"))){if(a[0].includes("meet"))return{url:a[0],platform:"google_meet"};if(a[0].includes("zoom"))return{url:a[0],platform:"zoom"};if(a[0].includes("teams"))return{url:a[0],platform:"teams"};if(a[0].includes("webex"))return{url:a[0],platform:"webex"}}return null}function Pbe(e){try{const t=Date.now(),r=new Date(e.start).getTime(),a=new Date(e.end).getTime(),s=(r-t)/6e4,i=(t-a)/6e4;return s<=15&&i<=30?"Join Now":i>30?"Rejoin Meeting":s>15?`Join Meeting (starts in ${Math.floor(s)} min)`:"Join Meeting"}catch{return"Join Meeting"}}function Ibe(e){switch(e){case"google_meet":return"Google Meet";case"zoom":return"Zoom";case"teams":return"Microsoft Teams";case"webex":return"Webex";default:return"Video Call"}}const Hj=4;function N8(e){const t=typeof e=="string"?new Date(e):e,r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0"),i=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${r}-${a}-${s}T${i}:${o}`}function j8(e){const t=typeof e=="string"?new Date(e):e,r=t.getFullYear(),a=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return`${r}-${a}-${s}`}const Dbe=({isOpen:e,event:t,onClose:r,onEdit:a,onDelete:s,onEventUpdated:i,onEventDeleted:o,calendarSource:l,calendars:c=[],currentUserId:d})=>{const{showSuccess:u,showError:f}=Cn(),[p,m]=D.useState(!1),[b,v]=D.useState(!1),[g,w]=D.useState(null),[y,j]=D.useState(null),[N,S]=D.useState(!1),[E,A]=D.useState(!1),[P,I]=D.useState("idle"),[B,T]=D.useState(!1),[_,R]=D.useState(!1),[z,H]=D.useState(""),[Y,J]=D.useState(""),re=D.useRef(null),X=l?.accessRole==="reader"||l?.accessRole==="freeBusyReader";D.useEffect(()=>{t&&(w(t),j(t),T(!1),J(""),re.current=null)},[t?.id,t?.updatedAt]);const te=N&&y&&g&&(y.title!==g.title||y.description!==g.description||y.location!==g.location||y.start!==g.start||y.end!==g.end||y.isAllDay!==g.isAllDay),W=D.useMemo(()=>y?Obe(y):null,[y]),O=y?Pbe(y):"",q=W?Ibe(W.platform):"",G=()=>{W?.url&&navigator.clipboard.writeText(W.url).then(()=>{m(!0),setTimeout(()=>m(!1),2e3)})},U=()=>{W?.url&&window.open(W.url,"_blank","noopener,noreferrer")},K=()=>{if(te){R(!0);return}r()},ae=async(ut=!1)=>{if(!y||!d)return;T(!1);const vt={title:y.title,description:y.description??"",start:y.start,end:y.end,location:y.location??"",isAllDay:y.isAllDay??!1};A(!0),I("syncing"),ut||i?.(y);try{if(y.source==="google"&&y.googleEventId){const At=y.calendarId||"primary",Bt=await oie(d,At,y.googleEventId,{summary:vt.title,description:vt.description,start:vt.start,end:vt.end,location:vt.location,isAllDay:vt.isAllDay,attendees:y.attendees?.map(We=>typeof We=="string"?{email:We}:{email:We.email}),reminders:y.reminders?.minutesBefore?.length?{minutesBefore:y.reminders.minutesBefore}:void 0}),Yt=Bt?.data??Bt;w(Yt),j(Yt),u("Event updated"),i?.(Yt)}else{const At=await fM(y.id,{...vt,type:y.type||"meeting",color:y.color,participants:y.participants??y.attendees?.map(We=>typeof We=="string"?We:We.email)??[]}),Bt=At?.data??At,Yt={...y,...Bt};w(Yt),j(Yt),u("Event updated"),i?.(Yt)}S(!1),I("success")}catch(At){I("error");const Bt=At?.status??At?.response?.status,Yt=At?.code??At?.data?.code;Bt===409||Yt==="CONFLICT"?(T(!0),j(g),i?.(g??null)):(j(g),i?.(g??null),f(At?.message??"Failed to save event"))}finally{A(!1)}},me=()=>{T(!1),ae(!0)},se=()=>{T(!1),i?.(null),r()},le=async()=>{console.log("[EventDetailDrawer] handleDelete called");const ut=re.current??y;if(console.log("[EventDetailDrawer] eventToDelete:",{id:ut?.id,source:ut?.source,googleEventId:ut?.googleEventId,calendarId:ut?.calendarId,fullEvent:ut}),re.current=null,!ut){console.error("[EventDetailDrawer] No event to delete"),f("Event not found");return}if(!d){console.error("[EventDetailDrawer] No currentUserId"),f("Please sign in to delete events");return}const vt=ut.googleEventId??(ut.source==="google"&&ut.id?.startsWith("gcal_")?ut.id.replace(/^gcal_/,""):void 0);if(console.log("[EventDetailDrawer] Extracted googleEventId:",vt),ut.source==="google"&&!vt){console.error("[EventDetailDrawer] Google event but no googleEventId"),f("Cannot delete: event ID missing");return}A(!0);try{ut.source==="google"&&vt?(console.log("[EventDetailDrawer] Calling apiDeleteGoogleCalendarEvent",{userId:d,calendarId:ut.calendarId||"primary",eventId:vt}),await kI(d,ut.calendarId||"primary",vt),console.log("[EventDetailDrawer] apiDeleteGoogleCalendarEvent completed successfully")):(console.log("[EventDetailDrawer] Calling apiDeleteEvent",{id:ut.id}),await iie(ut.id),console.log("[EventDetailDrawer] apiDeleteEvent completed successfully")),u("Event deleted"),o?.(ut),r()}catch(At){console.error("[EventDetailDrawer] Delete error:",At);const Bt=At?.message??At?.data?.message??"Failed to delete event";f(Bt)}finally{A(!1)}},Me=async()=>{if(!y||!d||y.source!=="google")return;const ut=y.calendarId||"primary",vt=new Date(y.start),At=new Date(y.end);vt.setHours(vt.getHours()+1),At.setHours(At.getHours()+1),A(!0);try{const Bt=await gI(d,ut,{summary:(y.title||"Untitled")+" (copy)",description:y.description,start:vt.toISOString(),end:At.toISOString(),location:y.location,isAllDay:y.isAllDay,attendees:y.attendees?.map(We=>({email:We.email}))}),Yt=Bt?.data??Bt;u("Event duplicated"),i?.(Yt),r()}catch(Bt){f(Bt?.message??"Failed to duplicate event")}finally{A(!1)}},ue=async()=>{if(!y||!d||!Y||y.source!=="google"||!y.googleEventId)return;const ut=y.calendarId||"primary";A(!0);try{const vt=await gI(d,Y,{summary:y.title||"Untitled",description:y.description,start:y.start,end:y.end,location:y.location,isAllDay:y.isAllDay,attendees:y.attendees?.map(Bt=>({email:Bt.email}))}),At=vt?.data??vt;await kI(d,ut,y.googleEventId),u("Event moved to calendar"),o?.(y),i?.(At),J(""),r()}catch(vt){f(vt?.message??"Failed to move event")}finally{A(!1)}},Ue=D.useRef(K),Ae=D.useRef(ae),ie=D.useRef(le);if(Ue.current=K,Ae.current=ae,ie.current=le,D.useEffect(()=>{if(!e)return;const ut=vt=>{const At=vt.target,Bt=At.tagName==="INPUT"||At.tagName==="TEXTAREA"||At.isContentEditable;if(vt.key==="Escape"){Ue.current();return}if(vt.key==="e"&&!vt.ctrlKey&&!vt.metaKey&&!vt.altKey&&!Bt){vt.preventDefault(),X||S(Yt=>!Yt);return}if((vt.metaKey||vt.ctrlKey)&&vt.key==="s"&&!Bt){vt.preventDefault(),te&&Ae.current();return}if((vt.metaKey||vt.ctrlKey)&&vt.key==="Enter"&&!Bt){vt.preventDefault(),te&&Ae.current().then(()=>r());return}vt.key==="Delete"&&!Bt&&(vt.preventDefault(),ie.current())};return window.addEventListener("keydown",ut),()=>window.removeEventListener("keydown",ut)},[e,X,te,r]),!e||!t)return null;const Z=y??t,Ee=Intl.DateTimeFormat().resolvedOptions().timeZone;let we="",Oe="",de="";try{const ut=new Date(Z.start),vt=new Date(Z.end);if(we=ut.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),Z.isAllDay){Oe="All day";const At=Math.round((vt.getTime()-ut.getTime())/(1440*60*1e3));de=At<=1?"All day":`${At} days`}else{Oe=`${ut.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${vt.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`;const At=Math.round((vt.getTime()-ut.getTime())/6e4);At<60?de=`${At} minutes`:At%60===0?de=`${At/60} hour${At/60!==1?"s":""}`:de=`${Math.floor(At/60)}h ${At%60}m`}}catch{we=Z.start,Oe=Z.end,de=""}const ce=(Z.status||"confirmed").toLowerCase(),Ce=ce==="cancelled"?"bg-red-50 text-red-600 border-red-100":ce==="tentative"?"bg-amber-50 text-amber-600 border-amber-100":"bg-emerald-50 text-emerald-600 border-emerald-100",Xe=ce==="cancelled"?"Cancelled":ce==="tentative"?"Tentative":"Confirmed",xe=l||{name:Z.source==="google"?"Google Calendar":"Calendar",color:Z.color||"#6366f1"},fe=Z.attendees?.length?Z.attendees:Z.participants?.map(ut=>({email:ut,responseStatus:void 0}))||[],Se=(Z.description||"").split(`
`).length>Hj,qe=Se&&!b,je=Z.reminders?.minutesBefore?.length&&Z.reminders.minutesBefore.length>0?Z.reminders.minutesBefore.map(ut=>`${ut} min before`).join(", "):null,Le=Z.recurrence?.length?(Z.recurrence[0]||"").replace(/^RRULE:/i,""):null,Re=y?.start?N8(y.start):"",Je=y?.end?N8(y.end):"";return n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:K,"aria-hidden":!0}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-[480px] bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-300 ease-out flex flex-col",role:"dialog","aria-modal":"true","aria-labelledby":"event-drawer-title",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[n.jsx("button",{type:"button",onClick:K,className:"absolute top-5 right-5 min-h-[48px] min-w-[48px] flex items-center justify-center p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all shadow-sm z-10","aria-label":"Close",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"pr-10",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:`px-2.5 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wide border ${Ce}`,children:Xe}),X&&n.jsx("span",{className:"px-2.5 py-0.5 rounded-full text-[10px] font-medium bg-slate-100 text-slate-600 border border-slate-200",children:"Read-only"}),n.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-slate-500",style:{color:xe.color},children:[n.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:xe.color}}),xe.name]})]}),N&&y?n.jsx("input",{id:"event-drawer-title",value:y.title,onChange:ut=>j({...y,title:ut.target.value}),className:"mt-2 w-full text-xl font-bold text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-2 focus:ring-indigo-100",placeholder:"Event title"}):n.jsx("h2",{id:"event-drawer-title",className:"text-xl font-bold text-slate-900 mt-2 leading-tight",children:Z.title||"No title"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:[W&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("button",{type:"button",onClick:U,className:"w-full flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl shadow-lg shadow-indigo-100 transition-all",children:[n.jsx(ah,{className:"w-5 h-5 shrink-0"}),O,"  ",q]}),n.jsx("div",{className:"flex items-center justify-between gap-2",children:n.jsxs("button",{type:"button",onClick:G,className:"flex items-center gap-2 text-sm text-slate-600 hover:text-indigo-600 transition-colors",children:[p?n.jsx(cd,{className:"w-4 h-4 text-emerald-600"}):n.jsx(Gj,{className:"w-4 h-4"}),p?"Copied!":"Copy meeting link"]})})]}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5",children:[n.jsx(is,{className:"w-3 h-3"})," Time & duration"]}),N&&y?n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[n.jsx("input",{type:"checkbox",checked:y.isAllDay??!1,onChange:ut=>j({...y,isAllDay:ut.target.checked}),className:"rounded border-slate-300"}),"All day"]}),!y.isAllDay&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-slate-500",children:"Start"}),n.jsx("input",{type:"datetime-local",value:Re,onChange:ut=>j({...y,start:ut.target.value?new Date(ut.target.value).toISOString():y.start}),className:"w-full mt-0.5 px-3 py-2 border border-slate-200 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-slate-500",children:"End"}),n.jsx("input",{type:"datetime-local",value:Je,onChange:ut=>j({...y,end:ut.target.value?new Date(ut.target.value).toISOString():y.end}),className:"w-full mt-0.5 px-3 py-2 border border-slate-200 rounded-lg text-sm"})]})]}),y.isAllDay&&n.jsxs(n.Fragment,{children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-slate-500",children:"Start date"}),n.jsx("input",{type:"date",value:y.start?j8(y.start):"",onChange:ut=>{const vt=ut.target.value;if(!vt)return;const At=new Date(vt),Bt=y.end?new Date(y.end):new Date(At);Bt.setDate(At.getDate()),Bt<=At&&Bt.setDate(At.getDate()+1),j({...y,start:At.toISOString(),end:Bt.toISOString()})},className:"w-full mt-0.5 px-3 py-2 border border-slate-200 rounded-lg text-sm"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs text-slate-500",children:"End date"}),n.jsx("input",{type:"date",value:y.end?j8(y.end):"",onChange:ut=>{const vt=ut.target.value;vt&&j({...y,end:new Date(vt).toISOString()})},className:"w-full mt-0.5 px-3 py-2 border border-slate-200 rounded-lg text-sm"})]})]}),n.jsx("p",{className:"text-[10px] text-slate-400",children:Ee})]}):n.jsxs(n.Fragment,{children:[n.jsx("p",{className:"text-sm text-slate-900 font-medium",children:we}),n.jsx("p",{className:"text-sm text-slate-700",children:Oe}),de&&n.jsx("p",{className:"text-xs text-slate-500",children:de}),n.jsx("p",{className:"text-[10px] text-slate-400",children:Ee})]})]}),(fe.length>0||N)&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5",children:[n.jsx(qi,{className:"w-3 h-3"})," People"]}),n.jsx("ul",{className:"space-y-1.5",children:fe.map((ut,vt)=>{const At=typeof ut=="string"?ut:ut.email,Bt=typeof ut=="object"&&ut.displayName?ut.displayName:At,Yt=typeof ut=="object"?ut.responseStatus:void 0,We=(Bt||At).charAt(0).toUpperCase(),Ct=Yt==="accepted"?n.jsx(cd,{className:"w-3.5 h-3.5 text-emerald-500"}):Yt==="declined"?n.jsx(Ib,{className:"w-3.5 h-3.5 text-red-400"}):Yt==="tentative"?n.jsx(T8,{className:"w-3.5 h-3.5 text-amber-500"}):null;return n.jsxs("li",{className:"flex items-center gap-2 text-sm",children:[n.jsx("span",{className:"w-8 h-8 rounded-full bg-slate-200 text-slate-700 flex items-center justify-center text-xs font-bold shrink-0",children:We}),n.jsx("span",{className:"truncate text-slate-900 flex-1 min-w-0",children:Bt||At}),Ct&&n.jsx("span",{className:"shrink-0",children:Ct}),N&&y&&n.jsx("button",{type:"button",onClick:()=>{const br=(y.attendees||y.participants?.map(Jt=>({email:Jt}))||[]).filter((Jt,Dr)=>Dr!==vt);j({...y,attendees:br.length?br:void 0,participants:br.map(Jt=>typeof Jt=="string"?Jt:Jt.email)})},className:"p-1 rounded text-slate-400 hover:text-red-500 hover:bg-red-50 transition-colors shrink-0","aria-label":`Remove ${At}`,children:n.jsx(tr,{className:"w-4 h-4"})})]},vt)})}),N&&y&&n.jsxs("div",{className:"flex gap-2 pt-1",children:[n.jsx("input",{type:"email",value:z,onChange:ut=>H(ut.target.value),placeholder:"Add guest email",className:"flex-1 min-w-0 px-3 py-2 border border-slate-200 rounded-lg text-sm",onKeyDown:ut=>{if(ut.key==="Enter"){ut.preventDefault();const vt=z.trim();if(!vt)return;const At=y.attendees||y.participants?.map(Bt=>({email:Bt}))||[];if(At.some(Bt=>(typeof Bt=="string"?Bt:Bt.email).toLowerCase()===vt.toLowerCase()))return;j({...y,attendees:[...At,{email:vt}],participants:[...y.participants||[],vt]}),H("")}}}),n.jsx("button",{type:"button",onClick:()=>{const ut=z.trim();if(!ut)return;const vt=y.attendees||y.participants?.map(At=>({email:At}))||[];if(vt.some(At=>(typeof At=="string"?At:At.email).toLowerCase()===ut.toLowerCase())){H("");return}j({...y,attendees:[...vt,{email:ut}],participants:[...y.participants||[],ut]}),H("")},className:"px-3 py-2 bg-slate-100 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-200 transition-colors shrink-0",children:"Add"})]})]}),(Z.location||W?.url||N)&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5",children:[n.jsx(Zk,{className:"w-3 h-3"})," Location"]}),N&&y?n.jsx("input",{type:"text",value:y.location??"",onChange:ut=>j({...y,location:ut.target.value}),placeholder:"Location or video link",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm"}):Z.location?n.jsx("p",{className:"text-sm text-slate-700",children:Z.location.startsWith("http")?n.jsx("a",{href:Z.location,target:"_blank",rel:"noopener noreferrer",className:"text-indigo-600 hover:underline truncate block",children:Z.location}):Z.location}):W?.url?n.jsx("a",{href:W.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-indigo-600 hover:underline truncate block",children:W.url}):null]}),(Z.description||N)&&n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-1.5",children:[n.jsx(Qn,{className:"w-3 h-3"})," Description"]}),N&&y?n.jsx("textarea",{value:y.description??"",onChange:ut=>j({...y,description:ut.target.value}),placeholder:"Description",rows:4,className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm resize-y"}):Z.description?.includes("<")?n.jsx("div",{className:"text-sm text-slate-700 break-words prose prose-sm max-w-none",style:qe?{display:"-webkit-box",WebkitLineClamp:Hj,WebkitBoxOrient:"vertical",overflow:"hidden"}:void 0,dangerouslySetInnerHTML:{__html:Z.description}}):Z.description?n.jsx("div",{className:"text-sm text-slate-700 whitespace-pre-wrap break-words",style:qe?{display:"-webkit-box",WebkitLineClamp:Hj,WebkitBoxOrient:"vertical",overflow:"hidden"}:void 0,children:Z.description}):null,!N&&Se&&n.jsxs("button",{type:"button",onClick:()=>v(!b),className:"flex items-center gap-1 text-xs text-indigo-600 hover:underline mt-1",children:[b?n.jsx(o1,{className:"w-3 h-3"}):n.jsx(Fs,{className:"w-3 h-3"}),b?"Show less":"Show more"]})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Jn,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"w-2 h-2 rounded-full shrink-0",style:{backgroundColor:xe.color}}),n.jsxs("span",{children:["Calendar: ",xe.name]})]}),(je||Le)&&n.jsxs("div",{className:"space-y-1 text-xs text-slate-500",children:[je&&n.jsxs("p",{children:["Reminders: ",je]}),Le&&n.jsxs("p",{children:["Repeats: ",Le]})]})]}),n.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/30 space-y-2 shrink-0",children:N?n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{S(!1),j(g)},disabled:E,className:"flex-1 flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 transition-colors disabled:opacity-50",children:"Cancel"}),n.jsxs("button",{type:"button",onClick:()=>ae(),disabled:E||!y?.title?.trim(),className:"flex-1 flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl transition-colors disabled:opacity-50",children:[E?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(di,{className:"w-4 h-4"}),"Save"]})]}):n.jsxs(n.Fragment,{children:[Z.htmlLink&&n.jsxs("a",{href:Z.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold rounded-xl transition-colors",children:[n.jsx(ps,{className:"w-4 h-4"}),"Open in Google Calendar"]}),c&&c.length>1&&!X&&Z.source==="google"&&n.jsx("div",{className:"flex flex-col gap-2",children:n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:Y,onChange:ut=>J(ut.target.value),className:"flex-1 min-h-[48px] py-2 px-3 border border-slate-200 rounded-xl text-sm text-slate-700 bg-white","aria-label":"Move to calendar",children:[n.jsx("option",{value:"",children:"Move to calendar..."}),c.filter(ut=>ut.id!==(Z.calendarId||"primary")).map(ut=>n.jsx("option",{value:ut.id,children:ut.summary},ut.id))]}),n.jsx("button",{type:"button",onClick:ue,disabled:!Y||E,className:"flex items-center justify-center gap-2 min-h-[48px] min-w-[48px] py-3 px-4 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 disabled:opacity-50",children:"Move"})]})}),n.jsx("div",{className:"flex gap-2 flex-wrap",children:!X&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>S(!0),className:"flex-1 min-w-[48px] flex items-center justify-center gap-2 min-h-[48px] py-3 px-4 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 transition-colors",children:[n.jsx(Do,{className:"w-4 h-4"}),"Edit"]}),Z.source==="google"&&n.jsxs("button",{type:"button",onClick:Me,disabled:E,className:"flex items-center justify-center gap-2 min-h-[48px] min-w-[48px] py-3 px-4 border border-slate-200 text-slate-700 font-medium rounded-xl hover:bg-slate-50 transition-colors disabled:opacity-50",title:"Duplicate event",children:[n.jsx(Gj,{className:"w-4 h-4"}),"Duplicate"]}),n.jsxs("button",{type:"button",onClick:ut=>{ut.preventDefault(),ut.stopPropagation(),y&&(re.current=y),le()},disabled:E,className:"flex items-center justify-center gap-2 min-h-[48px] min-w-[48px] py-3 px-4 border border-red-200 text-red-600 font-medium rounded-xl hover:bg-red-50 transition-colors disabled:opacity-50",children:[E?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4"}),"Delete"]})]})})]})})]}),B&&n.jsx("div",{className:"absolute inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/40",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 max-w-sm w-full space-y-4",children:[n.jsx("p",{className:"text-slate-800 font-medium",children:"This event was changed elsewhere. Overwrite with your version or reload the latest?"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:se,className:"flex-1 min-h-[48px] py-3 px-4 border border-slate-200 rounded-xl text-slate-700 font-medium hover:bg-slate-50",children:"Reload"}),n.jsx("button",{type:"button",onClick:me,disabled:E,className:"flex-1 min-h-[48px] py-3 px-4 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-50",children:"Overwrite"})]})]})}),_&&n.jsx("div",{className:"absolute inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/40",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-6 max-w-sm w-full space-y-4",children:[n.jsx("p",{className:"text-slate-800 font-medium",children:"Discard unsaved changes?"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{R(!1),r()},className:"flex-1 min-h-[48px] py-3 px-4 border border-slate-200 rounded-xl text-slate-700 font-medium hover:bg-slate-50",children:"Discard"}),n.jsx("button",{type:"button",onClick:()=>R(!1),className:"flex-1 min-h-[48px] py-3 px-4 bg-indigo-600 text-white font-semibold rounded-xl hover:bg-indigo-700",children:"Keep editing"})]})]})})]})},Lbe=({currentUser:e,onNavigate:t,onNewEvent:r,onEditEvent:a})=>{const{showError:s,showSuccess:i}=Cn(),[o,l]=D.useState(new Date),[c,d]=D.useState("daily"),[u,f]=D.useState([]),[p,m]=D.useState([]),[b,v]=D.useState([]),[g,w]=D.useState([]),[y,j]=D.useState([]),[N,S]=D.useState(!1),[E,A]=D.useState([]),[P,I]=D.useState([]),[B,T]=D.useState(!1),[_,R]=D.useState(null),[z,H]=D.useState(null),[Y,J]=D.useState(0),[re,X]=D.useState(!1),[te,W]=D.useState(!1),[O,q]=D.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[G,U]=D.useState([]),[K,ae]=D.useState(!1),[me,se]=D.useState(""),[le,Me]=D.useState(""),[ue,Ue]=D.useState(null),[Ae,ie]=D.useState(!1),[Z,Ee]=D.useState(null),[we,Oe]=D.useState(null),[de,ce]=D.useState(!1),[Ce,Xe]=D.useState(""),[xe,fe]=D.useState(0),[Se,qe]=D.useState([]),[je,Le]=D.useState(!1),[Re,Je]=D.useState(null),[ut,vt]=D.useState(!0),[At,Bt]=D.useState(!0),Yt=D.useRef(null),We=D.useRef(null),Ct=Array.from({length:24},(ge,ve)=>ve),br=D.useMemo(()=>Intl.DateTimeFormat().resolvedOptions().timeZone,[]),Jt=D.useMemo(()=>{const ge=o.getFullYear(),ve=String(o.getMonth()+1).padStart(2,"0"),Ke=String(o.getDate()).padStart(2,"0");return`${ge}-${ve}-${Ke}`},[o]);D.useEffect(()=>{(async()=>{if(e?.id)try{const ve=await o3(e.id);if(S(ve.connected||!1),ve.connected){const Ke=await ase(e.id),ct=Array.isArray(Ke?.data)?Ke.data:[];A(ct)}else A([])}catch{S(!1),A([])}})()},[e]);const Dr=ge=>ge.filter(ve=>{if(ve.recurringEventId){const Ke=(ve.title||"").toLowerCase().trim();if(["office","working hours","work hours","availability","busy","out of office","lunch","break"].some(bt=>Ke.includes(bt)))return!1}return!0});D.useEffect(()=>{(async()=>{T(!0);const ve=new Date(o),Ke=new Date(o);if(c==="monthly")ve.setDate(1),ve.setHours(0,0,0,0),Ke.setMonth(Ke.getMonth()+1),Ke.setDate(0),Ke.setHours(23,59,59,999);else if(c==="weekly"){const Kt=new Date(o),yr=Kt.getDay(),$r=Kt.getDate()-yr+(yr===0?-6:1),Ur=new Date(Kt.setDate($r));ve.setTime(Ur.getTime()),ve.setHours(0,0,0,0);const un=new Date(Ur);un.setDate(Ur.getDate()+6),Ke.setTime(un.getTime()),Ke.setHours(23,59,59,999)}else ve.setHours(0,0,0,0),Ke.setHours(23,59,59,999);const ct=Kt=>{const yr=Kt.getFullYear(),$r=String(Kt.getMonth()+1).padStart(2,"0"),Ur=String(Kt.getDate()).padStart(2,"0");return`${yr}-${$r}-${Ur}`},jt=ct(ve),bt=ct(Ke),Wt=[];if(N&&e?.id)try{const Kt=P.length>0?P:void 0,$r=(await sse(jt,bt,e.id,Kt)).data||[],Ur=Dr($r);Wt.push(...Ur)}catch(Kt){console.warn("[Schedule] Failed to fetch Google Calendar events:",Kt.message)}if(e?.id)try{const Kt=await gk(e.id,void 0,jt,bt);if(Kt.success&&Kt.data){const yr=Kt.data.map($r=>({id:$r.id,title:$r.title,description:$r.description||"",start:$r.start,end:$r.end,type:$r.type||"meeting",location:$r.location||"",participants:$r.participants||[],color:$r.color||"#4f46e5",isAllDay:$r.isAllDay||!1,source:"firestore",googleEventId:$r.googleEventId||null,htmlLink:$r.htmlLink||null,relatedEntity:$r.relatedEntity||null}));Wt.push(...yr)}}catch(Kt){console.warn("[Schedule] Failed to fetch Firestore calendar events:",Kt.message)}const ir=new Map;Wt.forEach(Kt=>{const yr=Kt.googleEventId||Kt.id;ir.has(yr)||ir.set(yr,Kt)}),f(Array.from(ir.values()));try{const Kt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Kt){v([]),m([]);return}const yr=await my(Kt),Ur=(Array.isArray(yr?.data||yr)?yr?.data||yr:[]).filter(Vr=>{const aa=Vr.dueDate&&Vr.dueDate!==null&&Vr.dueDate!==void 0&&String(Vr.dueDate).trim()!==""&&String(Vr.dueDate).trim().toLowerCase()!=="ongoing";return!Vr.archived&&aa});v(Ur);const un=Ur.filter(Vr=>Vr.dueDate===Jt);m(un)}catch{v([]),m([])}try{const[Kt,yr,$r]=await Promise.all([D0(e?.id),_c(),cb()]);w(Array.isArray(Kt?.data||Kt)?Kt?.data||Kt:[]),j(Array.isArray(yr?.data||yr)?yr?.data||yr:[]),U(Array.isArray($r?.data)?$r.data:[])}catch{w([]),j([]),U([])}T(!1)})()},[Jt,N,e,c,o,Y,P]),D.useEffect(()=>{if(!N||!e?.id)return;const ge=setInterval(()=>J(ve=>ve+1),300*1e3);return()=>clearInterval(ge)},[N,e?.id]);const Hr=()=>{const ge=new Date(o);c==="daily"?ge.setDate(ge.getDate()-1):c==="weekly"?ge.setDate(ge.getDate()-7):ge.setMonth(ge.getMonth()-1),l(ge)},tt=()=>{const ge=new Date(o);c==="daily"?ge.setDate(ge.getDate()+1):c==="weekly"?ge.setDate(ge.getDate()+7):ge.setMonth(ge.getMonth()+1),l(ge)},Dt=()=>{const ge=new Date;return o.toDateString()===ge.toDateString()},mr=ge=>{let ve=new Date(ge.start),Ke=new Date(ge.end);const ct=new Date(o);ct.setHours(0,0,0,0);const jt=(ve.getTime()-ct.getTime())/(1e3*60),bt=(Ke.getTime()-ve.getTime())/(1e3*60),Wt=jt*(80/60)+20,ir=bt*(80/60);return{top:Wt,height:Math.max(ir,50)}},Sr=ge=>{try{return new Date(ge).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return ge}},Jr=ge=>{switch(ge){case"High":return"text-red-500 bg-red-50 border-red-100";case"Medium":return"text-amber-500 bg-amber-50 border-amber-100";default:return"text-blue-500 bg-blue-50 border-blue-100"}},_r=ge=>{if(ge.calendarId&&(ge.calendarName||ge.calendarColor)){const Ke=E.find(ct=>ct.id===ge.calendarId);return{id:ge.calendarId,name:ge.calendarName||Ke?.summary||ge.calendarId,color:ge.calendarColor||Ke?.backgroundColor||ge.color||"#6366f1",accessRole:Ke?.accessRole}}const ve=E.find(Ke=>Ke.primary)||E[0];return{id:ve?.id||"primary",name:ge.source==="google"?ve?.summary||"Google Calendar":(ge.source==="firestore","Calendar"),color:ge.color||ve?.backgroundColor||"#6366f1",accessRole:ve?.accessRole}},Wr=ge=>{const ve=new Date(ge),Ke=ve.getDay(),ct=ve.getDate()-Ke+(Ke===0?-6:1);return new Date(ve.setDate(ct))},sr=ge=>{const ve=Wr(ge);return Array.from({length:7},(Ke,ct)=>{const jt=new Date(ve);return jt.setDate(ve.getDate()+ct),jt})},en=ge=>{const ve=ge.getFullYear(),Ke=ge.getMonth(),ct=new Date(ve,Ke,1),jt=new Date(ve,Ke+1,0),bt=new Date(ct);bt.setDate(bt.getDate()-bt.getDay());const Wt=[],ir=new Date(bt);for(;(ir<=jt||Wt.length<42)&&(Wt.push(new Date(ir)),ir.setDate(ir.getDate()+1),!(Wt.length>=42)););return Wt},Gr=ge=>{const ve=ge.getFullYear(),Ke=String(ge.getMonth()+1).padStart(2,"0"),ct=String(ge.getDate()).padStart(2,"0");return`${ve}-${Ke}-${ct}`},vn=ge=>b.filter(ve=>ve.dueDate===ge),kr=ge=>{Gr(ge);const ve=new Date(ge);ve.setHours(0,0,0,0);const Ke=new Date(ge);return Ke.setHours(23,59,59,999),u.filter(ct=>{const jt=new Date(ct.start),bt=ct.end?new Date(ct.end):jt;return jt<=Ke&&bt>=ve})},Fr=ge=>{if(!ge||!/^\d{4}-\d{2}-\d{2}$/.test(ge))return ge;const[ve,Ke,ct]=ge.split("-").map(Number);return new Date(ve,Ke-1,ct).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};D.useEffect(()=>{_&&!re&&q({title:_.title,category:_.category||"",description:_.description||"",dueDate:_.dueDate||"",priority:_.priority||"Medium",status:_.status||"Todo",assigneeId:_.assigneeId,projectId:_.projectId||""})},[_,re]),D.useEffect(()=>{if(!re){ae(!1);return}_?.category&&!G.includes(_.category)?ae(!0):O.category&&G.includes(O.category)?ae(!1):O.category&&!G.includes(O.category)&&ae(!0)},[re,O.category,G]),D.useEffect(()=>{if(!_)return;let ge=!1;return(async()=>{try{const ve=await cb(),Ke=Array.isArray(ve?.data)?ve.data:[];ge||U(Ke)}catch{ge||U([])}})(),()=>{ge=!0}},[_?.id]);const ke=()=>{R(null),X(!1),se(""),Me(""),Ue(null),ce(!1),Le(!1),We.current&&(We.current.value="")},ze=async()=>{if(_){if(!O.title.trim()){s("Task title is required");return}if(!O.assigneeId){s("Assignee is required");return}W(!0);try{await db(_.id,{title:O.title.trim(),category:O.category.trim()||void 0,description:O.description.trim()||"",dueDate:O.dueDate||null,priority:O.priority,status:O.status,assigneeId:O.assigneeId,projectId:O.projectId||null}),v(ge=>ge.map(ve=>ve.id===_.id?{...ve,title:O.title.trim(),category:O.category.trim()||void 0,description:O.description.trim()||"",dueDate:O.dueDate||"",priority:O.priority,status:O.status,assigneeId:O.assigneeId,projectId:O.projectId||void 0}:ve)),R({..._,title:O.title.trim(),category:O.category.trim()||void 0,description:O.description.trim()||"",dueDate:O.dueDate||"",priority:O.priority,status:O.status,assigneeId:O.assigneeId,projectId:O.projectId||void 0,updatedAt:new Date().toISOString()}),X(!1),i("Task updated successfully")}catch(ge){s(ge.message||"Failed to update task")}finally{W(!1)}}},$e=(ge,ve=1200,Ke=1200,ct=.8)=>new Promise((jt,bt)=>{const Wt=new FileReader;Wt.onload=ir=>{const Kt=new Image;Kt.onload=()=>{let yr=Kt.width,$r=Kt.height;yr>$r?yr>ve&&($r=$r*ve/yr,yr=ve):$r>Ke&&(yr=yr*Ke/$r,$r=Ke);const Ur=document.createElement("canvas");Ur.width=yr,Ur.height=$r;const un=Ur.getContext("2d");un?(un.drawImage(Kt,0,0,yr,$r),jt(Ur.toDataURL("image/jpeg",ct))):bt(new Error("Canvas context not available"))},Kt.onerror=()=>bt(new Error("Failed to load image")),Kt.src=ir.target?.result},Wt.onerror=()=>bt(new Error("Failed to read file")),Wt.readAsDataURL(ge)}),pe=async ge=>{const ve=ge.target.files?.[0];if(ve){if(!ve.type.startsWith("image/")){s("Please select an image file");return}if(ve.size>10*1024*1024){s("Image size must be less than 10MB");return}try{const Ke=await $e(ve,1200,1200,.8);Me(Ke),Ue(ve)}catch(Ke){s(Ke.message||"Failed to process image")}}},_e=ge=>{const ve=ge.target.value,Ke=ge.target.selectionStart;se(ve),fe(Ke);const ct=ve.substring(0,Ke),jt=ct.lastIndexOf("@");if(jt!==-1){const bt=ct.substring(jt+1),Wt=jt>0?ct[jt-1]:" ";if((Wt===" "||Wt===`
`||jt===0)&&!bt.includes(" ")&&!bt.includes(`
`)){Xe(bt);const ir=y.filter(Kt=>Kt.name.toLowerCase().includes(bt.toLowerCase())||Kt.email.toLowerCase().includes(bt.toLowerCase()));qe(ir.slice(0,5)),ce(!0);return}}ce(!1)},Fe=ge=>{const Ke=me.substring(0,xe).lastIndexOf("@"),ct=me.substring(xe),bt=`${me.substring(0,Ke)}@${ge.name} ${ct}`;if(se(bt),ce(!1),Yt.current){Yt.current.focus();const Wt=Ke+ge.name.length+2;Yt.current.setSelectionRange(Wt,Wt)}},et=ge=>{const ve=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Ke=[];let ct;for(;(ct=ve.exec(ge))!==null;){const jt=ct[1].trim(),bt=y.find(Wt=>Wt.name.toLowerCase()===jt.toLowerCase());bt&&bt.id!==(e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Ke.push(bt.id)}return[...new Set(Ke)]};D.useEffect(()=>{if(Yt.current){const ge=Yt.current;ge.style.height="auto";const ve=24,Ke=5*ve,ct=15*ve,jt=Math.min(Math.max(ge.scrollHeight,Ke),ct);ge.style.height=`${jt}px`}},[me]);const mt=ge=>{const ve=[],Ke=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g;let ct=0,jt,bt=0;for(;(jt=Ke.exec(ge))!==null;){jt.index>ct&&ve.push(ge.substring(ct,jt.index));const Wt=jt[1].trim();y.find(Kt=>Kt.name.toLowerCase()===Wt.toLowerCase())?ve.push(n.jsxs("span",{className:"font-bold text-indigo-600",children:["@",Wt]},bt++)):ve.push(`@${Wt}`),ct=Ke.lastIndex}return ct<ge.length&&ve.push(ge.substring(ct)),ve.length>0?ve:ge},lt=async()=>{if(_){if(!me.trim()&&!ue){s("Please add a note or attach an image");return}ie(!0);try{const ge=JSON.parse(localStorage.getItem("user_data")||"{}"),ve={id:`note_${Date.now()}`,userId:ge.id,userName:ge.name||"Unknown User",text:me.trim(),createdAt:new Date().toISOString()};le&&ue&&(ve.imageUrl=le,ve.imageName=ue.name,ve.imageMimeType=ue.type);const Ke=[..._.notes||[],ve];await db(_.id,{notes:Ke});const ct=et(me);if(ct.length>0)for(const jt of ct)try{await Zm({userId:jt,notificationType:"task-mention",title:"You were mentioned in a task",message:`${ge.name||"Someone"} mentioned you in task: "${_.title}"`,link:`/?tab=tasks&task=${_.id}`})}catch(bt){console.error("Failed to send mention notification:",bt)}R({..._,notes:Ke}),v(jt=>jt.map(bt=>bt.id===_.id?{...bt,notes:Ke}:bt)),se(""),Me(""),Ue(null),We.current&&(We.current.value=""),i("Note added successfully")}catch(ge){s(ge.message||"Failed to add note")}finally{ie(!1)}}},xt=()=>{if(c==="daily")return n.jsxs("div",{className:"p-8 pt-12 pb-12 relative min-h-[2000px] bg-white",children:[Ct.map(ge=>{const ve=ge*80+20;return n.jsxs("div",{className:"absolute left-0 right-0 group",style:{top:`${ve}px`},children:[n.jsx("span",{className:"absolute left-4 top-0 -translate-y-1/2 text-[10px] font-black text-slate-300 w-16 text-right pr-6 uppercase tracking-widest",children:ge===0?"12 AM":ge===12?"12 PM":ge>12?`${ge-12} PM`:`${ge} AM`}),n.jsx("div",{className:"absolute left-24 top-0 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-slate-100 group-hover:bg-indigo-200 transition-colors"}),n.jsx("div",{className:"absolute left-24 top-0 right-8 h-px bg-slate-50"})]},ge)}),ut&&u.map(ge=>{const ve=mr(ge);return n.jsxs("div",{role:"button",tabIndex:0,onClick:()=>H(ge),onKeyDown:Ke=>Ke.key==="Enter"&&H(ge),className:"absolute left-28 right-8 p-4 rounded-3xl border shadow-sm transition-all hover:scale-[1.01] hover:shadow-xl group overflow-hidden bg-indigo-50 border-indigo-100 cursor-pointer",style:{top:`${ve.top}px`,height:`${ve.height}px`},children:[n.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 group-hover:w-2 transition-all rounded-l",style:{backgroundColor:(ge.calendarColor||ge.color||"#6366f1")+"40"}}),n.jsxs("div",{className:"flex justify-between items-start gap-4",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"font-black text-sm truncate text-indigo-900",children:ge.title}),n.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-2",children:n.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[n.jsx(is,{className:"w-3 h-3 text-indigo-400"})," ",Sr(ge.start)," - ",Sr(ge.end)]})})]}),ge.htmlLink&&n.jsx("a",{href:ge.htmlLink,target:"_blank",rel:"noopener noreferrer",onClick:Ke=>Ke.stopPropagation(),className:"p-2 bg-white rounded-xl border border-slate-100 shadow-sm text-slate-400 hover:text-indigo-600 transition-all active:scale-95","aria-label":"Open in Google Calendar",children:n.jsx(ps,{className:"w-3.5 h-3.5"})})]})]},ge.id)}),!B&&(ut&&u.length===0||!ut&&(!At||p.length===0))&&n.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center opacity-40",children:[n.jsx(Jn,{className:"w-16 h-16 text-slate-200 mb-4"}),n.jsx("p",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:"No schedule entries for this day"})]})]});if(c==="weekly"){const ge=sr(o),ve=new Date;return ve.setHours(0,0,0,0),n.jsxs("div",{className:"p-6 bg-white",children:[n.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((Ke,ct)=>n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Ke})},Ke))}),n.jsx("div",{className:"grid grid-cols-7 gap-2",children:ge.map((Ke,ct)=>{const jt=Gr(Ke),bt=At?vn(jt):[],Wt=ut?kr(Ke):[];let ir=[],Kt=[];At&&ut?bt.length>0&&Wt.length>0?(ir=bt.slice(0,1),Kt=Wt.slice(0,1)):bt.length>0?ir=bt.slice(0,2):Wt.length>0&&(Kt=Wt.slice(0,2)):At?ir=bt.slice(0,2):ut&&(Kt=Wt.slice(0,2));const yr=[...bt,...Wt],$r=Ke.toDateString()===ve.toDateString(),Ur=Ke.getMonth()===o.getMonth();return n.jsxs("div",{onClick:()=>{l(new Date(Ke)),d("daily")},className:`min-h-[120px] p-2 rounded-xl border-2 transition-all cursor-pointer ${$r?"bg-indigo-50 border-indigo-300":Ur?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[n.jsx("div",{className:`text-xs font-black mb-2 ${$r?"text-indigo-600":Ur?"text-slate-900":"text-slate-400"}`,children:Ke.getDate()}),n.jsxs("div",{className:"space-y-1 max-h-[80px] overflow-y-auto",children:[At&&ir.map(un=>n.jsx("div",{onClick:Vr=>{Vr.stopPropagation(),R(un)},className:`p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${un.priority==="High"?"bg-red-100 text-red-700":un.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:un.title,children:un.title},un.id)),ut&&Kt.map(un=>n.jsx("div",{onClick:Vr=>{Vr.stopPropagation(),H(un)},className:"p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:un.title,children:un.title},un.id)),ir.length+Kt.length<yr.length&&n.jsxs("div",{className:"text-[9px] text-slate-400 font-bold px-1.5",children:["+",yr.length-(ir.length+Kt.length)," more"]})]})]},ct)})})]})}if(c==="monthly"){const ge=en(o),ve=new Date;ve.setHours(0,0,0,0);const Ke=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return n.jsxs("div",{className:"p-6 bg-white",children:[n.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Ke.map(ct=>n.jsx("div",{className:"text-center py-2",children:n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:ct})},ct))}),n.jsx("div",{className:"grid grid-cols-7 gap-1",children:ge.map((ct,jt)=>{const bt=Gr(ct),Wt=At?vn(bt):[],ir=ut?kr(ct):[];let Kt=[],yr=[];At&&ut?Wt.length>0&&ir.length>0?(Kt=Wt.slice(0,1),yr=ir.slice(0,1)):Wt.length>0?Kt=Wt.slice(0,1):ir.length>0&&(yr=ir.slice(0,1)):At?Kt=Wt.slice(0,1):ut&&(yr=ir.slice(0,1));const $r=[...Wt,...ir],Ur=ct.toDateString()===ve.toDateString(),un=ct.getMonth()===o.getMonth();return n.jsxs("div",{onClick:()=>{l(new Date(ct)),d("daily")},className:`min-h-[100px] p-1.5 rounded-lg border transition-all cursor-pointer ${Ur?"bg-indigo-50 border-indigo-300":un?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[n.jsx("div",{className:`text-[10px] font-black mb-1 ${Ur?"text-indigo-600":un?"text-slate-900":"text-slate-400"}`,children:ct.getDate()}),n.jsxs("div",{className:"space-y-0.5 max-h-[70px] overflow-y-auto",children:[At&&Kt.map(Vr=>n.jsx("div",{onClick:aa=>{aa.stopPropagation(),R(Vr)},className:`p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${Vr.priority==="High"?"bg-red-100 text-red-700":Vr.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:Vr.title,children:Vr.title},Vr.id)),ut&&yr.map(Vr=>n.jsx("div",{onClick:aa=>{aa.stopPropagation(),H(Vr)},className:"p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:Vr.title,children:Vr.title},Vr.id)),Kt.length+yr.length<$r.length&&n.jsxs("div",{className:"text-[8px] text-slate-400 font-bold px-1",children:["+",$r.length-(Kt.length+yr.length)]})]})]},jt)})})]})}};return n.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Schedule"}),n.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[c==="monthly"?n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{const ge=new Date(o);ge.setMonth(ge.getMonth()-1),l(ge)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Previous month",children:n.jsx(Wj,{className:"w-4 h-4"})}),n.jsx("p",{className:"text-slate-500 text-sm font-medium min-w-[140px] text-center",children:o.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),n.jsx("button",{onClick:()=>{const ge=new Date(o);ge.setMonth(ge.getMonth()+1),l(ge)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Next month",children:n.jsx(wa,{className:"w-4 h-4"})})]}):c==="weekly"?n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:(()=>{const ge=sr(o),ve=ge[0],Ke=ge[6];return`${ve.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Ke.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`})()}):n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:o.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-indigo-50 border border-indigo-100 rounded-lg",children:[n.jsx(is,{className:"w-3 h-3 text-indigo-600"}),n.jsx("span",{className:"text-[10px] font-bold text-indigo-600 tracking-wide",children:br})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"checkbox",checked:ut,onChange:ge=>vt(ge.target.checked),className:"sr-only"}),n.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${ut?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:ut&&n.jsx(cd,{className:"w-3 h-3 text-white"})})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Events"})]}),n.jsx("div",{className:"w-px h-4 bg-slate-200"}),n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"checkbox",checked:At,onChange:ge=>Bt(ge.target.checked),className:"sr-only"}),n.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${At?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:At&&n.jsx(cd,{className:"w-3 h-3 text-white"})})]}),n.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Tasks"})]})]}),n.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:["daily","weekly","monthly"].map(ge=>n.jsx("button",{onClick:()=>d(ge),className:`px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${c===ge?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:ge},ge))}),n.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsx("button",{onClick:Hr,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:n.jsx(Wj,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>l(new Date),className:`px-4 py-1.5 font-bold text-[10px] uppercase tracking-widest rounded-xl transition-all ${Dt()?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Today"}),n.jsx("button",{onClick:tt,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:n.jsx(wa,{className:"w-5 h-5"})})]}),n.jsxs("button",{onClick:r,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-black shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"New Entry"]})]})]}),n.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex flex-wrap justify-between items-center gap-3",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[n.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Schedule"}),n.jsx("span",{className:"text-slate-300",children:""}),n.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-100 rounded-lg",children:[n.jsx(is,{className:"w-3 h-3 text-slate-500"}),n.jsx("span",{className:"text-[9px] font-bold text-slate-500 tracking-wide",children:br})]}),N&&E.length>1&&n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-[9px] font-bold text-slate-500",children:"Calendars:"}),n.jsxs("select",{value:P.length?P.join(","):"__all__",onChange:ge=>{const ve=ge.target.value;I(ve==="__all__"?[]:ve?ve.split(","):[])},className:"text-[10px] font-medium px-2 py-1 border border-slate-200 rounded-lg bg-white text-slate-700",children:[n.jsx("option",{value:"__all__",children:"All calendars"}),E.map(ge=>n.jsx("option",{value:ge.id,children:ge.summary},ge.id))]})]})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[B&&n.jsx(gt,{className:"w-3 h-3 animate-spin text-indigo-600"}),n.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider ${N?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-100 text-slate-400"}`,children:N?"Google Workspace Connected":"Google Disconnected"})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto relative bg-white",children:[c==="daily"&&At&&p.length>0&&n.jsxs("div",{className:"px-6 py-6 bg-slate-50/50 border-b border-slate-100 space-y-3",children:[n.jsxs("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Nn,{className:"w-3 h-3"})," Today's Deliverables"]}),n.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:p.map(ge=>n.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm group hover:border-indigo-200 transition-all flex items-start gap-3",children:[n.jsx("div",{className:"mt-1",children:ge.status==="Done"?n.jsx(Nn,{className:"w-4 h-4 text-emerald-500"}):n.jsx(Pu,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-400"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:`text-xs font-bold truncate ${ge.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:ge.title}),n.jsx("div",{className:"flex items-center gap-2 mt-1",children:n.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border uppercase ${Jr(ge.priority)}`,children:ge.priority})})]})]},ge.id))})]}),xt()]})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"bg-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group",children:[n.jsxs("div",{className:"relative z-10",children:[n.jsx(Ri,{className:"w-8 h-8 text-indigo-400 mb-6"}),n.jsx("h3",{className:"text-2xl font-black mb-2 leading-tight",children:"Unified Workspace"}),n.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 opacity-80",children:"Synchronize your calendar, billing, and accounting software in one central hub."}),n.jsx("button",{onClick:()=>t("integrations"),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-900 flex items-center justify-center gap-3",children:"Go to Integrations"})]}),n.jsx("div",{className:"absolute -right-8 -bottom-8 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl group-hover:bg-indigo-500/20 transition-all pointer-events-none"})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col items-center justify-center text-center space-y-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300",children:n.jsx(y0,{className:"w-6 h-6"})}),n.jsxs("div",{className:"space-y-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900 uppercase tracking-widest",children:"Workspace Statistics"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:"No data collected for current period. Stats will populate as you add tasks and events."})]})]})]})]}),z&&n.jsx(Dbe,{isOpen:!!z,event:z,onClose:()=>H(null),onEdit:a?ge=>{H(null),a(ge)}:void 0,onEventUpdated:ge=>{if(J(ve=>ve+1),ge===null){H(null);return}H(ge)},onEventDeleted:()=>{J(ge=>ge+1),H(null)},calendarSource:_r(z),calendars:E,currentUserId:e?.id}),_&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:ke}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:ke,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:n.jsx(Nn,{className:"w-8 h-8"})}),n.jsxs("div",{className:"flex-1",children:[re?n.jsx("input",{type:"text",value:O.title,onChange:ge=>q(ve=>({...ve,title:ge.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:_.title}),n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${_.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":_.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":_.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:_.status}),n.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",_.id.substring(0,8)]})]})]})]}),n.jsx("div",{className:"flex items-center gap-2",children:re?n.jsxs(n.Fragment,{children:[n.jsx("button",{onClick:()=>{X(!1),q({title:_.title,category:_.category||"",description:_.description||"",dueDate:_.dueDate||"",priority:_.priority||"Medium",status:_.status||"Todo",assigneeId:_.assigneeId,projectId:_.projectId||""})},disabled:te,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:ze,disabled:te||!O.title.trim()||!O.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:te?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),"Save Changes"]})})]}):n.jsxs("button",{onClick:()=>X(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(Do,{className:"w-4 h-4"}),"Edit Task"]})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),re?n.jsxs("select",{value:O.assigneeId,onChange:ge=>q(ve=>({...ve,assigneeId:ge.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"Select Assignee"}),y.map(ge=>n.jsx("option",{value:ge.id,children:ge.name},ge.id))]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:y.find(ge=>ge.id===_.assigneeId)?.name?.charAt(0)||"U"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:y.find(ge=>ge.id===_.assigneeId)?.name||"Unassigned"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),re?n.jsxs("select",{value:O.projectId,onChange:ge=>q(ve=>({...ve,projectId:ge.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"",children:"None"}),g.filter(ge=>!ge.archived).map(ge=>n.jsx("option",{value:ge.id,children:ge.title},ge.id))]}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:_.projectId?g.find(ge=>ge.id===_.projectId)?.title||"Unknown Project":"None"})]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Qn,{className:"w-4 h-4 text-indigo-500"})," Description"]}),re?n.jsx(a_,{value:O.description||"",onChange:ge=>q(ve=>({...ve,description:ge})),placeholder:"Add task description..."}):n.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[_.description?n.jsx(H9,{content:_.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50"}):n.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[n.jsx(Ms,{className:"w-3.5 h-3.5"})," Task Category"]}),re?n.jsxs("div",{className:"space-y-2 mt-2",children:[n.jsxs("select",{value:K?"__new__":O.category||"",onChange:ge=>{const ve=ge.target.value;ve==="__new__"?(ae(!0),q(Ke=>({...Ke,category:""}))):(ae(!1),q(Ke=>({...Ke,category:ve})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),G.map(ge=>n.jsx("option",{value:ge,children:ge},ge)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),K&&n.jsx("input",{type:"text",value:O.category,onChange:ge=>q(ve=>({...ve,category:ge.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):n.jsx("div",{className:"flex items-center gap-2 mt-2",children:_.category?n.jsxs(n.Fragment,{children:[n.jsx(Ms,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-sm font-bold text-indigo-700",children:_.category})]}):n.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),re?n.jsx("input",{type:"date",value:O.dueDate,onChange:ge=>q(ve=>({...ve,dueDate:ge.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):n.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:_.dueDate?Fr(_.dueDate):"Ongoing"})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),re?n.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(ge=>n.jsx("button",{onClick:()=>q(ve=>({...ve,priority:ge})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${O.priority===ge?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:ge},ge))}):n.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${_.priority==="High"?"bg-red-50 text-red-600":_.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:_.priority})]})]}),n.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),re?n.jsxs("select",{value:O.status,onChange:ge=>q(ve=>({...ve,status:ge.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[n.jsx("option",{value:"Todo",children:"Todo"}),n.jsx("option",{value:"In Progress",children:"In Progress"}),n.jsx("option",{value:"Review",children:"Review"}),n.jsx("option",{value:"Done",children:"Done"})]}):n.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[_.status==="Done"?n.jsx(Nn,{className:"w-5 h-5 text-emerald-500"}):_.status==="In Progress"?n.jsx(is,{className:"w-5 h-5 text-blue-500 animate-pulse"}):n.jsx(Pu,{className:"w-5 h-5 text-slate-400"}),n.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:_.status})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",_.notes&&_.notes.length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:_.notes.length})]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",children:[n.jsx("textarea",{ref:Yt,rows:5,value:me,onChange:_e,onBlur:()=>{setTimeout(()=>ce(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),de&&Se.length>0&&n.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(wh,{className:"w-3 h-3"}),"Mention User"]}),Se.map(ge=>n.jsxs("button",{onClick:()=>Fe(ge),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:ge.name.charAt(0)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:ge.name}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:ge.email})]})]},ge.id))]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:le?n.jsx(Sl,{className:"w-4 h-4"}):n.jsx(kc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:le?ue?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:We,type:"file",accept:"image/*",onChange:pe,className:"hidden"})]}),n.jsx("button",{onClick:lt,disabled:Ae||!me.trim()&&!ue,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:Ae?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),le&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:le,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{Me(""),Ue(null),We.current&&(We.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(tr,{className:"w-4 h-4"})})]})]}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:_.notes&&_.notes.length>0?[..._.notes].reverse().map(ge=>{const ve=e?.role==="Admin"||ge.userId===e?.id;return n.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:ge.userName?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ge.userName}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(ge.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),ve&&n.jsx("button",{onClick:()=>Oe(ge.id),disabled:Z===ge.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Z===ge.id?n.jsx(gt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),ge.text&&n.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:mt(ge.text)}),ge.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsx("img",{src:ge.imageUrl,alt:ge.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Ke=window.open();Ke&&Ke.document.write(`<img src="${ge.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},ge.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(co,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("button",{onClick:()=>Le(!je),className:"w-full flex items-center justify-between group",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),n.jsx(wa,{className:`w-4 h-4 text-slate-400 transition-transform ${je?"rotate-90":""}`})]}),je&&n.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:_.createdAt?new Date(_.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),_.updatedAt&&_.updatedAt!==_.createdAt&&n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(_.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),_.notes&&_.notes.map((ge,ve)=>n.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[n.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[ge.userName," added a comment"]}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(ge.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},ge.id)),(!_.notes||_.notes.length===0)&&(!_.updatedAt||_.updatedAt===_.createdAt)&&n.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:[n.jsx("button",{onClick:()=>{Je(_),ke()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:ke,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(Nn,{className:"w-5 h-5"})," Close"]})]})]})]}),Re&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),n.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:n.jsx("p",{className:"text-xs font-bold text-slate-900",children:Re.title})})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Je(null),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(Re)try{await eM(Re.id),v(ge=>ge.filter(ve=>ve.id!==Re.id)),m(ge=>ge.filter(ve=>ve.id!==Re.id)),Je(null),R(null),i("Task deleted successfully")}catch(ge){s(ge.message||"Failed to delete task")}},className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg",children:"Delete Task"})]})]})})]})},Fbe=()=>{const{showSuccess:e}=Cn(),[t,r]=D.useState(null),[a,s]=D.useState([]),i=l=>{r(l),setTimeout(()=>{s(c=>[...c,l]),r(null),e(`${l.charAt(0).toUpperCase()+l.slice(1)} connected successfully!`)},1500)},o=[{id:"google",name:"Google Workspace",description:"Sync your Gmail, Calendar, and Drive to streamline communication and scheduling.",icon:n.jsx(rs,{className:"w-8 h-8 text-blue-500"}),color:"bg-blue-50",status:"Communication & Scheduling",isComingSoon:!0},{id:"stripe",name:"Stripe",description:"Automate invoice payments and financial reporting with the world's leading payment platform.",icon:n.jsx(O8,{className:"w-8 h-8 text-indigo-500"}),color:"bg-indigo-50",status:"Payment Processing",isComingSoon:!0},{id:"zoho",name:"Zoho Books",description:"Bi-directional sync of contacts, invoices, and accounting data with your Zoho workspace.",icon:n.jsx(fh,{className:"w-8 h-8 text-emerald-500"}),color:"bg-emerald-50",status:"Accounting & Finance",isComingSoon:!0}];return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Integrations"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Connect your favorite tools to the ImpactFlow OS ."})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-black uppercase tracking-widest border border-emerald-100",children:[n.jsx(Lb,{className:"w-4 h-4"})," Secure Enterprise Sync"]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(l=>{const c=a.includes(l.id),d=t===l.id;return n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col h-full hover:border-indigo-300 transition-all group relative overflow-visible",children:[l.isComingSoon&&n.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-indigo-100 text-indigo-700 rounded-full border border-indigo-200 shadow-sm px-3 py-1.5 text-center leading-tight whitespace-nowrap",children:[n.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest",children:"Coming Soon"}),n.jsx("div",{className:"text-[8px] font-bold uppercase tracking-wider text-indigo-600",children:"In Development"})]}),n.jsxs("div",{className:"flex justify-between items-start mb-8",children:[n.jsx("div",{className:`w-16 h-16 ${l.color} rounded-[20px] flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`,children:l.icon}),!l.isComingSoon&&(c?n.jsxs("div",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[n.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Active"]}):n.jsx("div",{className:"px-3 py-1 bg-slate-50 text-slate-400 rounded-full text-[10px] font-black uppercase tracking-tighter",children:"Disconnected"}))]}),n.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:l.name}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4",children:l.status}),n.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-1 mb-8",children:l.description}),n.jsxs("div",{className:"pt-6 border-t border-slate-50 space-y-3",children:[n.jsx("button",{onClick:()=>!c&&!l.isComingSoon&&i(l.id),disabled:d||c||l.isComingSoon,className:`w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c?"bg-slate-50 text-slate-400 cursor-default":l.isComingSoon?"bg-slate-50 text-slate-400 cursor-not-allowed opacity-60":"bg-indigo-600 text-white shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-[0.98]"}`,children:d?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):c?n.jsxs(n.Fragment,{children:["Connected ",n.jsx(Nn,{className:"w-4 h-4"})]}):l.isComingSoon?n.jsx(n.Fragment,{children:"Development in Progress"}):n.jsxs(n.Fragment,{children:["Connect ",l.name," ",n.jsx(To,{className:"w-4 h-4"})]})}),n.jsxs("button",{className:"w-full py-2.5 text-slate-400 hover:text-slate-600 text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2",children:["View API Docs ",n.jsx(ps,{className:"w-3 h-3"})]})]})]},l.id)})}),n.jsxs("div",{className:"bg-slate-900 rounded-[40px] p-12 text-white relative overflow-hidden group shadow-2xl",children:[n.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[n.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-md",children:n.jsx(c1,{className:"w-6 h-6 text-indigo-400"})}),n.jsxs("h2",{className:"text-4xl font-black mb-4 tracking-tight leading-tight",children:["Request Custom ",n.jsx("br",{}),n.jsx("span",{className:"text-indigo-400",children:"Webhooks & API Sync"})]}),n.jsx("p",{className:"text-slate-400 text-lg leading-relaxed mb-10 opacity-80",children:"Need to connect your specialized logistics software or internal ERP? Our engineering team builds custom bridges for Impact Enterprise clients."}),n.jsx("button",{className:"px-10 py-5 bg-white text-slate-900 font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-50 transition-all active:scale-95 shadow-xl",children:"Contact Integration Team"})]}),n.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full opacity-10 translate-x-1/4 pointer-events-none",children:n.jsx(c1,{className:"w-full h-full text-indigo-600"})})]})]})};function Mbe(e){if(e==null||Object.keys(e).length===0)return"";const t=Object.keys(e).sort().reduce((r,a)=>(r[a]=e[a],r),{});return JSON.stringify(t)}const fs={all:["shared-inbox"],emails:()=>[...fs.all,"emails"],emailsList:(e,t)=>[...fs.emails(),e,Mbe(t)],senders:(e,t)=>[...fs.all,"senders",e,t]},Rbe=(e,t,r)=>{const a=t?.limit||50;return Zie({queryKey:fs.emailsList(e||"",t),queryFn:async({pageParam:s})=>{if(!e)return{data:[],hasMore:!1,total:0,nextCursor:void 0};const i={...t,limit:a};typeof s=="string"?i.cursor=s:s!=null&&s!==void 0?i.page=Number(s):i.page=0;const o=await dM(e,i),l=o?.data??o??[],c=Array.isArray(l)?l:[],d=o?.hasMore,u=typeof d=="boolean"?d:c.length>=a;return{data:c,hasMore:u,total:o?.total??c.length,nextCursor:o?.nextCursor}},getNextPageParam:(s,i)=>{if(s.hasMore)return s.nextCursor?s.nextCursor:i.length},initialPageParam:void 0,enabled:!!e&&r?.enabled!==!1,staleTime:r?.staleTime,refetchInterval:r?.refetchInterval,refetchOnWindowFocus:!1,refetchOnMount:!1,placeholderData:s=>s})},Bbe=(e,t)=>Ys({queryKey:fs.senders(e||"",t),queryFn:async()=>{if(!e)return[];const r=await hse(e,t);return r?.data??r??[]},enabled:!!e,staleTime:300*1e3}),Ube=()=>{const e=Fa();return fi({mutationFn:async({userId:t,accountEmail:r,scopeHours:a,scopeDays:s})=>await ose(t,r,a,s),onSuccess:()=>{e.invalidateQueries({queryKey:fs.emails()})}})},qbe=({isOpen:e,onClose:t,userId:r,emailId:a,emailSubject:s,emailBody:i,participants:o=[],extractedDetails:l,onCreateSuccess:c})=>{const{showSuccess:d,showError:u}=Cn(),[f,p]=D.useState(!1),[m,b]=D.useState(!1),[v,g]=D.useState([]),[w,y]=D.useState(!1),[j,N]=D.useState({title:"",description:"",start:"",end:"",location:"",participants:[],createInGoogleCalendar:!0});D.useEffect(()=>{if(!e)return;const A=new Date;A.setDate(A.getDate()+1),A.setHours(10,0,0,0);const P=new Date(A);P.setHours(11,0,0,0);let I=A.toISOString().substring(0,16),B=P.toISOString().substring(0,16);if(l?.date||l?.time)try{const T=l.date||"tomorrow",_=l.time||"10:00 AM";let R=new Date;if(T.toLowerCase().includes("tomorrow"))R.setDate(R.getDate()+1);else if(!T.toLowerCase().includes("today")){const H=T.match(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/);if(H){const[,Y,J,re]=H;R=new Date(parseInt(re)<100?2e3+parseInt(re):parseInt(re),parseInt(Y)-1,parseInt(J))}}const z=_.match(/(\d{1,2}):?(\d{2})?\s*(am|pm)?/i);if(z){let H=parseInt(z[1]);const Y=z[2]?parseInt(z[2]):0,J=z[3]?.toLowerCase();J==="pm"&&H!==12&&(H+=12),J==="am"&&H===12&&(H=0),R.setHours(H,Y,0,0),I=R.toISOString().substring(0,16);const re=new Date(R);re.setHours(re.getHours()+1),B=re.toISOString().substring(0,16)}}catch(T){console.warn("Failed to parse extracted date/time:",T)}N({title:l?.title||s||"Meeting",description:l?.description||i?.substring(0,500)||"",start:I,end:B,location:l?.location||"",participants:l?.participants||o||[],createInGoogleCalendar:!0})},[e,l,s,i,o]);const S=async()=>{if(!j.start||!j.end||j.participants.length===0){u("Please set date/time and add participants to check availability");return}b(!0);try{const A=new Date(j.start).toISOString().split("T")[0],P=new Date(j.end).toISOString().split("T")[0],I=await nie(r,j.participants,A,P);I.success&&I.data&&(g(I.data),y(!0))}catch(A){u(A.message||"Failed to check availability")}finally{b(!1)}},E=async A=>{if(A.preventDefault(),!j.title||!j.start||!j.end){u("Please fill in all required fields");return}if(!a){u("Email ID is required to create meeting");return}p(!0);try{(await rie({userId:r,emailId:a,title:j.title,description:j.description,start:new Date(j.start).toISOString(),end:new Date(j.end).toISOString(),location:j.location,participants:j.participants,createInGoogleCalendar:j.createInGoogleCalendar})).success&&(d("Meeting created successfully!"),c?.(),t())}catch(P){u(P.message||"Failed to create meeting")}finally{p(!1)}};return e?n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[250] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:n.jsx(Jn,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Schedule Meeting"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"From Email"})]})]}),n.jsx("button",{onClick:t,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&(l.date||l.time||l.location)&&n.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex items-start gap-2",children:[n.jsx($n,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-1",children:"Extracted Meeting Details"}),n.jsxs("div",{className:"text-xs text-indigo-700 space-y-0.5",children:[l.date&&n.jsxs("p",{children:["Date: ",l.date]}),l.time&&n.jsxs("p",{children:["Time: ",l.time]}),l.location&&n.jsxs("p",{children:["Location: ",l.location]})]})]})]})}),n.jsxs("form",{onSubmit:E,className:"space-y-5",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Meeting Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync Meeting",value:j.title,onChange:A=>N({...j,title:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(is,{className:"w-3 h-3"})," Start Time *"]}),n.jsx("input",{required:!0,type:"datetime-local",value:j.start,onChange:A=>N({...j,start:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(is,{className:"w-3 h-3"})," End Time *"]}),n.jsx("input",{required:!0,type:"datetime-local",value:j.end,onChange:A=>N({...j,end:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(Zk,{className:"w-3 h-3"})," Location"]}),n.jsx("input",{type:"text",placeholder:"e.g. Conference Room A, Zoom, Google Meet",value:j.location,onChange:A=>N({...j,location:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(x0,{className:"w-3 h-3"})," Participants"]}),j.participants.length>0&&n.jsx("button",{type:"button",onClick:S,disabled:m||!j.start||!j.end,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Checking...":"Check Availability"})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 border border-slate-200 rounded-xl min-h-[50px]",children:[j.participants.map((A,P)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:[A,n.jsx("button",{type:"button",onClick:()=>N({...j,participants:j.participants.filter((I,B)=>B!==P)}),className:"hover:text-indigo-900",children:n.jsx(tr,{className:"w-3 h-3"})})]},P)),n.jsx("input",{type:"email",placeholder:"Add participant email...",onKeyDown:A=>{if(A.key==="Enter"&&A.currentTarget.value.trim()){A.preventDefault();const P=A.currentTarget.value.trim();j.participants.includes(P)||N({...j,participants:[...j.participants,P]}),A.currentTarget.value=""}},className:"flex-1 min-w-[200px] bg-transparent border-none outline-none text-sm"})]})]}),w&&v.length>0&&n.jsxs("div",{className:"space-y-2 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[n.jsx("p",{className:"text-xs font-semibold text-amber-900",children:"Team Availability"}),v.map((A,P)=>n.jsxs("div",{className:"text-xs text-amber-800",children:[n.jsx("p",{className:"font-medium",children:A.userId}),A.busySlots&&A.busySlots.length>0?n.jsxs("p",{className:"text-amber-700 mt-0.5",children:["Busy: ",A.busySlots.length," conflict(s)"]}):n.jsx("p",{className:"text-emerald-700 mt-0.5",children:"Available"})]},P))]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description"}),n.jsx("textarea",{placeholder:"Meeting agenda, notes, or details...",value:j.description,onChange:A=>N({...j,description:A.target.value}),rows:4,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),n.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[n.jsx("input",{type:"checkbox",id:"createInGoogleCalendar",checked:j.createInGoogleCalendar,onChange:A=>N({...j,createInGoogleCalendar:A.target.checked}),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),n.jsx("label",{htmlFor:"createInGoogleCalendar",className:"text-sm text-slate-700 cursor-pointer",children:"Create in Google Calendar"})]})]})]}),n.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:[n.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-white rounded-2xl transition-colors border border-slate-200",children:"Cancel"}),n.jsx("button",{type:"button",onClick:E,disabled:f||!j.title||!j.start||!j.end||!a,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:f?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(cd,{className:"w-4 h-4"}),"Create Meeting"]})})]})]})}):null},$be={"shared-inbox:read":["Viewer","Collaborator","Admin"],"shared-inbox:view-emails":["Viewer","Collaborator","Admin"],"shared-inbox:view-notes":["Viewer","Collaborator","Admin"],"shared-inbox:view-assignments":["Viewer","Collaborator","Admin"],"shared-inbox:add-note":["Collaborator","Admin"],"shared-inbox:edit-note":["Collaborator","Admin"],"shared-inbox:delete-note":["Collaborator","Admin"],"shared-inbox:assign-email":["Admin"],"shared-inbox:unassign-email":["Admin"],"shared-inbox:send-email":["Admin"],"shared-inbox:reply-email":["Admin"],"shared-inbox:forward-email":["Admin"],"shared-inbox:star-email":["Collaborator","Admin"],"shared-inbox:archive-email":["Admin"],"shared-inbox:delete-email":["Admin"],"shared-inbox:update-metadata":["Admin"],"shared-inbox:manage-accounts":["Admin"],"shared-inbox:manage-routing-rules":["Admin"],"shared-inbox:manage-templates":["Collaborator","Admin"],"shared-inbox:manage-signatures":["Collaborator","Admin"],"shared-inbox:manage-labels":["Admin"],"shared-inbox:sync-emails":["Admin"],"admin:manage-users":["Admin"],"admin:manage-settings":["Admin"],"admin:view-analytics":["Admin"]},fB=e=>e?e==="User"||e==="user"?"Collaborator":e==="Admin"||e==="admin"?"Admin":e==="Viewer"||e==="viewer"?"Viewer":e==="Collaborator"||e==="collaborator"?"Collaborator":"Viewer":"Viewer",Xc=(e,t)=>{const r=fB(e);return($be[t]||[]).includes(r)},zbe=e=>fB(e)==="Admin",a1=ft.forwardRef((e,t)=>n.jsx(x3,{...e,ref:t}));a1.displayName="QuillEditor";function k8({content:e,highlightTerm:t}){const r=D.useRef(null),a=e||"No content",s=/<[a-z][\s\S]*>/i.test(a);if(D.useEffect(()=>{if(!r.current)return;const l=r.current.querySelectorAll("img[data-src]");if(l.length===0)return;const c=new IntersectionObserver(d=>{d.forEach(u=>{if(u.isIntersecting){const f=u.target,p=f.getAttribute("data-src");p&&(f.src=p,f.removeAttribute("data-src"),f.loading="lazy",c.unobserve(f))}})},{rootMargin:"50px"});return l.forEach(d=>c.observe(d)),()=>{l.forEach(d=>c.unobserve(d))}},[e]),t&&t.trim()){const l=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`(${l})`,"gi"),u=(s?a.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim():a).replace(c,'<mark class="bg-amber-200 rounded px-0.5">$1</mark>'),f=tg.sanitize(u,{ALLOWED_TAGS:["mark","br"]});return n.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:f}})}const i=s?tg.sanitize(a,{ADD_ATTR:["target","loading"],ADD_TAGS:["img"]}):"";let o=i;return s&&i&&(o=i.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(l,c,d,u)=>`<img${c}data-src="${d}" loading="lazy"${u}>`)),n.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",...s?{dangerouslySetInnerHTML:{__html:o}}:{style:{whiteSpace:"pre-wrap"},children:a}})}const Hbe=90*1e3;let S8=0;const hB=({currentUser:e})=>{const{showSuccess:t,showError:r}=Cn(),a=Fa(),s=e||(typeof window<"u"?JSON.parse(localStorage.getItem("user_data")||"null"):null),i=s?.id,o=s?.role||"Viewer",l=Xc(o,"shared-inbox:add-note"),c=Xc(o,"shared-inbox:assign-email"),d=Xc(o,"shared-inbox:send-email"),u=Xc(o,"shared-inbox:reply-email"),f=Xc(o,"shared-inbox:forward-email"),p=Xc(o,"shared-inbox:star-email"),m=Xc(o,"shared-inbox:archive-email"),b=Xc(o,"shared-inbox:delete-email"),v=Xc(o,"shared-inbox:update-metadata");Xc(o,"shared-inbox:manage-accounts");const g=Xc(o,"shared-inbox:sync-emails"),w=(L,he="An error occurred")=>L?typeof L=="string"?L:typeof L=="object"?typeof L.message=="string"&&L.message?L.message:L.error&&typeof L.error=="object"&&typeof L.error.message=="string"&&L.error.message?L.error.message:he:he:he,y=L=>!L||typeof L!="string"?"":L.replace(/\n/g,"<br/>"),j=async(L,he)=>{try{return await L()}catch(ye){const Qe=w(ye,"An error occurred");return he&&he(Qe),null}},[N,S]=D.useState(null),[E,A]=D.useState(!1),[P,I]=D.useState(!1),[B,T]=D.useState(!1),_=D.useRef(!1),R=D.useRef(null),z=D.useRef(null),[H,Y]=D.useState(""),[J,re]=D.useState(null),[X,te]=D.useState(""),[W,O]=D.useState(""),[q,G]=D.useState("contains"),[U,K]=D.useState(void 0),[ae,me]=D.useState(""),[se,le]=D.useState(""),[Me,ue]=D.useState(void 0),[Ue,Ae]=D.useState(void 0),[ie,Z]=D.useState(""),[Ee,we]=D.useState(!1),[Oe,de]=D.useState(!1),{data:ce=[]}=Bbe(i,Ee?150:void 0),[Ce,Xe]=D.useState([]),[xe,fe]=D.useState(!1),[Se,qe]=D.useState(""),[je,Le]=D.useState(!1),[Re,Je]=D.useState([]),[ut,vt]=D.useState([]),[At,Bt]=D.useState(!1),[Yt,We]=D.useState(""),[Ct,br]=D.useState(null),[Jt,Dr]=D.useState(null),[Hr,tt]=D.useState(null),[Dt,mr]=D.useState("list"),[Sr,Jr]=D.useState(new Set),[_r,Wr]=D.useState(new Set),[sr,en]=D.useState({}),[Gr,vn]=D.useState(""),[kr,Fr]=D.useState(""),[ke,ze]=D.useState(null),[$e,pe]=D.useState(!1),[_e,Fe]=D.useState(null),[et,mt]=D.useState(null),[lt,xt]=D.useState([]),[ge,ve]=D.useState(null),[Ke,ct]=D.useState(!1),jt=D.useRef(null),bt=D.useRef(null),[Wt,ir]=D.useState(!1),[Kt,yr]=D.useState([]),[$r,Ur]=D.useState(null),[un,Vr]=D.useState(!1),[aa,Kn]=D.useState(""),[Ln,Lo]=D.useState([]),[Na,Ve]=D.useState(!1),[Lt,Ot]=D.useState(""),[lr,jr]=D.useState(0),[pr,Mr]=D.useState([]),[sa,En]=D.useState(null),[rr,xr]=D.useState([]),[Rt,Cr]=D.useState(!1),[Vt,Ma]=D.useState(""),Ca=D.useRef(null),[Aa,ar]=D.useState({isOpen:!1,imageUrl:"",imageName:void 0}),[nn,Ra]=D.useState(null),[Zn,kn]=D.useState({}),[Ar,an]=D.useState([]),[dr,Mn]=D.useState(!1),[Or,Ba]=D.useState(null),[ho,bs]=D.useState(!1),[ys,ws]=D.useState(null),[mo,ml]=D.useState([]),[zu,po]=D.useState(null),[Wi,mi]=D.useState(!1),[rc,Ge]=D.useState([]),[wr,qr]=D.useState(""),[Kr,bn]=D.useState(!1),Hn=D.useRef(null),ma=D.useRef(null),Ua=D.useRef(!1),[Ns,Rf]=D.useState("domain"),[Gi,Ai]=D.useState(""),[Ol,js]=D.useState(""),[xo,Fo]=D.useState([]),[xd,Ac]=D.useState(!1),[gd,pl]=D.useState(!1),[Ei,Mo]=D.useState(""),[vd,Hu]=D.useState(!1),[au,Ec]=D.useState(""),[ja,Wu]=D.useState(null),[nc,su]=D.useState(!1),[V,Ne]=D.useState([]),[Ye,rt]=D.useState(!1),[yt,Ft]=D.useState(!1),[Qt,Nr]=D.useState(!1),[Yr,fn]=D.useState(null),[sn,Tn]=D.useState(null),[Ga,Va]=D.useState(null),[ks,Zs]=D.useState(null),[qs,Ro]=D.useState(null),[ei,go]=D.useState([]),[vo,iu]=D.useState(""),[ou,Tc]=D.useState(!1),[bd,yd]=D.useState(!1),[wd,Ea]=D.useState(!1),[bo,xl]=D.useState(!1),[ns,Oc]=D.useState("compose"),[hn,os]=D.useState([]),[ba,pi]=D.useState([]),[Wn,$s]=D.useState([]),[Ka,Vi]=D.useState(""),[Xa,Ss]=D.useState(""),[ka,ls]=D.useState(""),[Ki,Pl]=D.useState(""),[Bo,lu]=D.useState([]),[gl,Xn]=D.useState([]),[Il,ti]=D.useState(!1),[Ti,Dl]=D.useState(!1),[Nd,Ll]=D.useState(!1),[Uo,Xi]=D.useState(""),[zs,Yi]=D.useState(""),[Oi,Qi]=D.useState(""),[yo,Pc]=D.useState([]),[_s,Cs]=D.useState(!1),[ia,ea]=D.useState(0),[On,Ta]=D.useState([]),qo=D.useRef(null),[cu,$o]=D.useState(!1),[jd,zo]=D.useState([]),[Fl,xi]=D.useState(!1),[gi,Gu]=D.useState(""),[ac,Kh]=D.useState(null),[du,Vu]=D.useState([]),[pa,Bf]=D.useState([]),[Ic,kd]=D.useState([]),[uu,Ku]=D.useState([]),[Dc,Xu]=D.useState({contacts:[],companies:[]}),[Sd,R0]=D.useState(!1),[Uf,Xh]=D.useState([]),[Yu,Qu]=D.useState([]),[sc,fu]=D.useState([]),[hu,qf]=D.useState(!1),[B0,Lc]=D.useState(!1),[ic,_d]=D.useState(null),[vp,Ju]=D.useState(!1),[cs,wo]=D.useState(!1),[Pi,No]=D.useState(null),[mu,ds]=D.useState(!1),[Ji,bp]=D.useState(null),[$f,Fc]=D.useState(!1),[Ml,Mc]=D.useState(null),[Zu,zf]=D.useState(!1),[Ho,vl]=D.useState({}),[ta,oa]=D.useState(!1),[Rc,As]=D.useState(!1),[vi,Rl]=D.useState(""),[Cd,Zi]=D.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[ef,Hf]=D.useState([]),[U0,Bc]=D.useState(!1),[Yh,Wo]=D.useState(!1),[qa,C]=D.useState(new Set),[M,ee]=D.useState(!1),[oe,be]=D.useState(!1),[Te,Ie]=D.useState("date"),[De,Be]=D.useState("desc"),[He,nt]=D.useState(!1),[wt,Nt]=D.useState(null),pt=D.useRef(null),Ht=D.useRef(null),Tt=D.useRef(null),ot=D.useRef(null),at=D.useCallback(L=>{const he={searchText:""};if(!L||typeof L!="string")return he;const ye=[];let Qe="",st=!1;for(let St=0;St<L.length;St++){const Gt=L[St];if(Gt==='"'){st=!st;continue}if(!st&&(Gt===" "||Gt==="	")){Qe&&(ye.push(Qe),Qe="");continue}Qe+=Gt}Qe&&ye.push(Qe);const Mt=[];for(const St of ye){const Gt=St.match(/^from:(.+)$/i);if(Gt){he.from=Gt[1].trim();continue}const Tr=St.match(/^subject:(.+)$/i);if(Tr){he.subject=Tr[1].trim();continue}if(/^has:attachment$/i.test(St)){he.hasAttachment=!0;continue}if(/^has:no-attachment$/i.test(St)||/^-has:attachment$/i.test(St)){he.hasAttachment=!1;continue}if(/^is:read$/i.test(St)){he.isRead=!0;continue}if(/^is:unread$/i.test(St)){he.isRead=!1;continue}if(/^is:starred$/i.test(St)){he.isStarred=!0;continue}if(/^is:unstarred$/i.test(St)){he.isStarred=!1;continue}Mt.push(St)}return he.searchText=Mt.join(" ").trim(),he},[]),It=D.useMemo(()=>{const L=at(H),he={};L.searchText&&(he.search=L.searchText),ie&&(he.status=ie);const ye=L.from??X;ye&&(he.from=ye);const Qe=L.subject??W;Qe&&(he.subject=Qe,he.subjectOperator=q);const st=L.hasAttachment!==void 0?L.hasAttachment:U;st!==void 0&&(he.hasAttachment=st),ae&&(he.dateFrom=ae),se&&(he.dateTo=se),Or&&(he.labelId=Or);const Mt=L.isRead!==void 0?L.isRead:Me;Mt!==void 0&&(he.isRead=Mt);const St=L.isStarred!==void 0?L.isStarred:Ue;return St!==void 0&&(he.isStarred=St),he},[H,ie,X,W,q,U,ae,se,Or,Me,Ue,at]),{data:Pt,isLoading:Ut,isFetchingNextPage:fr,hasNextPage:or,fetchNextPage:Qr,error:gr,refetch:Sn}=Rbe(i,Object.keys(It).length>0?It:void 0,{staleTime:60*1e3,refetchInterval:120*1e3}),Fn=D.useMemo(()=>Pt?.pages?Pt.pages.flatMap(ye=>ye.data||[]).filter((ye,Qe,st)=>ye.id&&Qe===st.findIndex(Mt=>Mt.id===ye.id)):[],[Pt]);Pt?.pages[0]?.total??Fn.length;const Pn=Ube(),mn=D.useCallback(()=>{Ua.current||fr||!or||!i||(Ua.current=!0,Qr())},[fr,or,Qr,i]);D.useEffect(()=>{fr||(Ua.current=!1)},[fr]),D.useEffect(()=>{if(gr){const L=gr?.message||"Failed to load inbox";tt(L),(L.toLowerCase().includes("google")||L.toLowerCase().includes("connected"))&&re(!1)}else tt(null)},[gr]),D.useEffect(()=>{const L=Hn.current,he=ma.current;if(!L||!he||!or||fr)return;let ye=null,Qe=null,st=null;const Mt=400;try{ye=new IntersectionObserver(St=>{St[0].isIntersecting&&or&&!fr&&mn()},{threshold:.1,rootMargin:"300px",root:he}),ye.observe(L)}catch(St){console.warn("[INBOX] IntersectionObserver failed, using scroll fallback:",St)}return Qe=()=>{fr||!or||st==null&&(st=setTimeout(()=>{st=null;const St=he,Gt=L;if(!St||!Gt||fr||!or)return;const Tr=St.getBoundingClientRect(),jn=Gt.getBoundingClientRect(),la=Tr.bottom-jn.top;la<500&&la>-100&&mn()},Mt))},he.addEventListener("scroll",Qe,{passive:!0}),()=>{st!=null&&clearTimeout(st),ye&&ye.disconnect(),Qe&&he&&he.removeEventListener("scroll",Qe)}},[or,fr,mn,Dt,Fn.length]);const ra=D.useCallback(async()=>{if(i)try{const L=await o3(i),he=L?.connected===!0||L?.data?.connected===!0;re(he)}catch{re(!1)}},[i]),Bn=D.useCallback(async()=>{if(i){Tc(!0);try{const L=await Ise(i),he=L?.data??L??[],ye=Array.isArray(he)?he:[];go(ye.filter(Qe=>Qe.domain&&String(Qe.domain).trim()||!1))}catch(L){console.error("[INBOX] Failed to load excluded domains:",L),r(w(L,"Failed to load excluded domains")),go([])}finally{Tc(!1)}}},[i,r]),on=D.useCallback(async()=>{if(!(!i||!vo.trim())){yd(!0);try{await Dse(i,vo.trim()),iu(""),await Bn(),t("Domain added to exclusion list"),Sn()}catch(L){console.error("[INBOX] Failed to add excluded domain:",L),r(w(L,"Failed to add excluded domain"))}finally{yd(!1)}}},[i,vo,Bn,Sn,t,r]),Ya=D.useCallback(async L=>{if(i)try{await Lse(i,L),await Bn(),t("Domain removed from exclusion list"),Sn()}catch(he){console.error("[INBOX] Failed to remove excluded domain:",he),r(w(he,"Failed to remove excluded domain"))}},[i,Bn,Sn,t,r]),Ii=L=>L?`${L.toLowerCase().trim().replace(/[^a-z0-9\s]/g,"").split(/\s+/)[0].replace(/[^a-z0-9]/g,"")||"user"}@impact24x7.com`:"",Qa=D.useCallback(async()=>{if(i)try{let L=[],he=[];try{const Mt=await lse(i),St=Mt?.data??Mt??[];L=Array.isArray(St)?St.filter((Gt,Tr,jn)=>{const la=(Gt.email||"").toLowerCase();return jn.findIndex(ca=>(ca.email||"").toLowerCase()===la&&ca.userId===Gt.userId)===Tr}):[]}catch(Mt){console.error("[INBOX] Failed to load Gmail accounts:",Mt)}try{const Mt=await _c(),St=Mt?.data??Mt??[];he=Array.isArray(St)?St.filter(Gt=>Gt.name&&Gt.id).map(Gt=>({email:Ii(Gt.name),userId:Gt.id,ownerName:Gt.name,connectedAt:Gt.createdAt||new Date().toISOString(),lastSyncedAt:Gt.updatedAt||new Date().toISOString(),isCurrentUser:Gt.id===i,isCustomEmail:!0})):[],console.log("[INBOX] Loaded custom email accounts:",he.length)}catch(Mt){console.error("[INBOX] Failed to load users for custom emails:",Mt)}const ye=[...L,...he],Qe=new Map;ye.forEach(Mt=>{const St=(Mt.email||"").toLowerCase(),Gt=Mt.ownerName||"";Gt.toLowerCase()==="unknown user"||Gt.trim()===""||Qe.has(St)||Qe.set(St,Mt)});const st=Array.from(Qe.values());console.log("[INBOX] Total accounts loaded:",{gmail:L.length,custom:he.length,beforeDedup:ye.length,afterDedup:st.length}),Je(st),re(L.length>0),ls(Mt=>st.length>0&&!Mt?st[0].email:Mt)}catch(L){console.error("[INBOX] Failed to load connected accounts:",L)}},[i]),Es=async()=>{if(i)try{const L=await cM(i),he=L?.authUrl||L?.data?.authUrl;he?window.location.href=he:r("Failed to get authorization URL")}catch(L){r(L?.message||"Failed to connect account")}},na=async L=>{if(i){br(L);try{await cse(i,L),t(`Disconnected ${L}`),await Qa(),await Sn()}catch(he){r(he?.message||"Failed to disconnect account")}finally{br(null)}}},Is=D.useCallback(async()=>{if(i)try{const L=await dse(i),he=L?.data??L??[];vt(Array.isArray(he)?he:[])}catch(L){console.error("[INBOX] Failed to load filtered accounts:",L),vt([])}},[i]),bi=async L=>{if(i){Dr(L);try{await use(i,L),await Is(),await a.invalidateQueries({queryKey:fs.emails()}),t(`Emails from ${L} will be hidden`)}catch(he){r(he?.message||"Failed to filter account")}finally{Dr(null)}}},Ja=async(L,he)=>{if(i){Dr(he);try{await fse(i,L),await Is(),await a.invalidateQueries({queryKey:fs.emails()}),t(`Emails from ${he} will now be visible`)}catch(ye){r(ye?.message||"Failed to unfilter account")}finally{Dr(null)}}};D.useEffect(()=>{if(!i){re(!1);return}ra(),Qa(),Bn(),Is()},[i,ra,Qa,Bn,Is]),D.useEffect(()=>{Re.length>0&&!ka&&ls(Re[0].email)},[Re]),D.useEffect(()=>{try{const L=typeof window<"u"?localStorage.getItem("impactOS_savedSearches"):null;if(L){const he=JSON.parse(L);Array.isArray(he)&&Xe(he)}}catch{}},[]),D.useEffect(()=>{if(Ce.length!==0)try{localStorage.setItem("impactOS_savedSearches",JSON.stringify(Ce))}catch{}},[Ce]),D.useEffect(()=>{i&&(async()=>{try{const he=await _c(),ye=he?.data??he??[];Lo(Array.isArray(ye)?ye:[])}catch(he){const ye=he?.message||"Failed to load users";console.error("Failed to load users:",ye)}})()},[i]),D.useEffect(()=>{const L=he=>{Ca.current&&!Ca.current.contains(he.target)&&Cr(!1)};if(Rt)return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[Rt]),D.useEffect(()=>{i&&(async()=>{try{const he=await Ch(),ye=he?.data??he??[];Xn(Array.isArray(ye)?ye:[])}catch(he){console.error("Failed to load contacts:",he?.message)}})()},[i]);const $a=D.useCallback(async(L=!1)=>{if(i&&!(dr&&!L))try{Mn(!0);const he=await Gse(i),ye=he?.labels??he?.data;an(Array.isArray(ye)?ye:[])}catch(he){console.error("Error fetching labels:",he),an([])}finally{Mn(!1)}},[i]);D.useEffect(()=>{i&&J&&$a()},[i,J,$a]),D.useEffect(()=>{ho&&ys&&i&&$a(!0)},[ho,ys,i,$a]),D.useEffect(()=>{i&&bo&&(async()=>{if(i)try{const he=await uM(i),ye=he?.data??he??[];lu(Array.isArray(ye)?ye:[]);const Qe=ye.find(st=>st.isDefault);Qe&&Pl(Qe.content||"")}catch(he){console.error("Failed to load signatures:",he?.message)}})()},[i,bo]);const Hs=async()=>{if(i){A(!0),tt(null);try{await Pn.mutateAsync({userId:i,scopeDays:"all"}),t("Syncing all emails from connected accounts")}catch(L){const he=L?.message||"Sync failed";r(he),tt(he)}finally{A(!1)}}},Di=D.useRef(Pn),Go=D.useRef(a);D.useEffect(()=>{Di.current=Pn,Go.current=a},[Pn,a]),D.useEffect(()=>{if(!i||!g){R.current&&(clearTimeout(R.current),R.current=null),z.current&&(clearInterval(z.current),z.current=null);return}R.current&&(clearTimeout(R.current),R.current=null),z.current&&(clearInterval(z.current),z.current=null);const L=()=>{const he=Date.now();he-S8<Hbe||_.current||(S8=he,_.current=!0,I(!0),Di.current.mutate({userId:i,scopeDays:"all"},{onSuccess:()=>{_.current=!1,I(!1)},onError:ye=>{console.log("[INBOX] Background sync failed:",ye?.message||"Unknown error"),_.current=!1,I(!1)}}))};return R.current=setTimeout(()=>{L(),R.current=null},30*1e3),z.current=setInterval(()=>{L()},1500*1e3),()=>{R.current&&(clearTimeout(R.current),R.current=null),z.current&&(clearInterval(z.current),z.current=null),_.current=!1}},[i,g]);const Za=async L=>{if(i){R0(!0);try{const he=await qse(L);Xu(he?.data||{contacts:[],companies:[]})}catch(he){console.error("Failed to load suggested links:",he),Xu({contacts:[],companies:[]})}finally{R0(!1)}}},as=async L=>{if(i){qf(!0);try{const[he,ye,Qe]=await Promise.all([zse(L).catch(()=>({success:!0,data:[]})),Hse(L).catch(()=>({success:!0,data:[]})),Wse(L).catch(()=>({success:!0,data:[]}))]);Xh(he?.data||[]),Qu(ye?.data||[]),fu(Qe?.data||[])}catch(he){console.error("Failed to load related items:",he),Xh([]),Qu([]),fu([])}finally{qf(!1)}}};D.useEffect(()=>{(async()=>{if(i)try{const[he,ye,Qe,st]=await Promise.all([md().catch(()=>({data:[]})),Sg(i).catch(()=>({data:[]})),D0(i).catch(()=>({data:[]})),lM({userId:i}).catch(()=>({data:[]}))]);Vu(he?.data||[]),Bf(ye?.data||[]),kd(Qe?.data||[]),Ku(st?.data||[])}catch(he){console.error("Failed to load CRM data:",he)}})()},[i]);const Ds=async(L,he)=>{if(!(!N?.id||!i)){wo(!0);try{const ye=N.id;let Qe;switch(L){case"contact":await Fse({emailId:ye,contactId:he,userId:i}),Qe="contactId";break;case"company":await Mse({emailId:ye,companyId:he,userId:i}),Qe="companyId";break;case"deal":await Rse({emailId:ye,dealId:he,userId:i}),Qe="dealId";break;case"project":await Bse({emailId:ye,projectId:he,userId:i}),Qe="projectId";break;case"contract":await Use({emailId:ye,contractId:he,userId:i}),Qe="contractId";break;default:throw new Error(`Unknown link type: ${L}`)}t(`Email linked to ${L} successfully`),S(st=>st?{...st,linkedRecords:{...st.linkedRecords||{},[Qe]:he}}:null),as(ye),Lc(!1),_d(null)}catch(ye){r(ye?.message||`Failed to link email to ${L}`)}finally{wo(!1)}}},Uc=async L=>{if(!(!N?.id||!i))try{const he=await $se({emailId:N.id,userId:i,title:L.title||N.subject||"Task from Email",description:L.description||N.body||"",dueDate:L.dueDate,priority:L.priority||"Medium",projectId:L.projectId,assigneeId:L.assigneeId});t("Task created successfully"),Ju(!1),as(N.id)}catch(he){r(he?.message||"Failed to create task")}},eo=async L=>{if(!i)return;S(null),ml([]),po(null),mt(null),xt([]),ve(null),T(!0);const he=!L.isRead;he&&a.setQueriesData({queryKey:fs.emails()},ye=>{if(!ye?.pages)return ye;const Qe=ye.pages.map(st=>{const Mt=st.data.map(St=>St.id===L.id?{...St,isRead:!0}:St);return{...st,data:Mt}});return{...ye,pages:Qe}});try{const ye=await mse(L.id,i),Qe=ye?.data??ye??{},st={...L,...Qe,body:Qe.body??L.lastMessage,gmailThreadId:Qe.gmailThreadId??L.gmailThreadId,isRead:!0};S(st),he&&Yn(L.id,!0,!0).catch(Mt=>{console.error("[INBOX] Failed to mark email as read:",Mt?.message),a.setQueryData(fs.emailsList(i||"",It),St=>St?.pages?{...St,pages:St.pages.map(Gt=>({...Gt,data:Gt.data.map(Tr=>Tr.id===L.id?{...Tr,isRead:!1}:Tr)}))}:St)}),L.id&&(Za(L.id),as(L.id));try{const Mt=await gse(L.id),St=Mt?.data??Mt??[];en(Gt=>({...Gt,[L.id]:St.map(Tr=>({id:Tr.id,userId:Tr.userId,userName:Tr.userName,message:Tr.message,timestamp:Tr.createdAt,imageUrl:Tr.imageUrl,imageName:Tr.imageName,markedFor:Tr.markedFor||[]}))}))}catch(Mt){const St=Mt?.message||"Failed to load notes";console.error("Failed to load notes:",St),en(Gt=>({...Gt,[L.id]:[]}))}if(i)try{rt(!0);const Mt=await gk(i,L.id);Mt.success&&Mt.data?Ne(Mt.data):Ne([])}catch(Mt){console.error("Failed to load calendar events:",Mt.message),Ne([])}finally{rt(!1)}}catch(ye){r(ye?.message||"Could not load email")}finally{T(!1)}},Yn=async(L,he,ye=!1)=>{if(i)try{await vI(L,he,i),a.setQueriesData({queryKey:fs.emails()},Qe=>{if(!Qe?.pages)return Qe;const st=Qe.pages.map(Mt=>({...Mt,data:Mt.data.map(St=>St.id===L?{...St,isRead:he,syncStatus:{...St.syncStatus||{},readStatus:"pending"}}:St)}));return{...Qe,pages:st}}),N?.id===L&&S(Qe=>Qe?{...Qe,isRead:he,syncStatus:{...Qe.syncStatus||{},readStatus:"pending"}}:null),ye||t(he?"Marked as read":"Marked as unread")}catch(Qe){ye?console.error("[INBOX] Failed to mark email as read:",Qe?.message):(r(Qe?.message||"Update failed"),Sn())}},Bl=async(L,he)=>{try{await pse(L,he),a.setQueryData(fs.emailsList(i||"",It),ye=>ye?.pages?{...ye,pages:ye.pages.map(Qe=>({...Qe,data:Qe.data.map(st=>st.id===L?{...st,isStarred:he,syncStatus:{...st.syncStatus||{},starredStatus:"pending"}}:st)}))}:ye),N?.id===L&&S(ye=>ye?{...ye,isStarred:he,syncStatus:{...ye.syncStatus||{},starredStatus:"pending"}}:null),a.invalidateQueries({queryKey:fs.emails()}),t(he?"Starred":"Unstarred")}catch(ye){r(ye?.message||"Update failed"),Sn()}},Ad=L=>{if(!L)return null;switch(L){case"synced":return n.jsx(Nn,{className:"w-3 h-3 text-green-500",title:"Synced to Gmail"});case"pending":return n.jsx(is,{className:"w-3 h-3 text-amber-500 animate-pulse",title:"Syncing..."});case"failed":return n.jsx($n,{className:"w-3 h-3 text-red-500",title:"Sync failed"});default:return null}},pu=async(L,he=[],ye=[],Qe=!1,st)=>{try{if(await Kse(L,{addLabelIds:he,removeLabelIds:ye,trackAccuracy:Qe,suggestionId:st}),a.invalidateQueries({queryKey:fs.emails()}),N?.id===L){const St=[...N.labels||[]];he.forEach(Gt=>{St.includes(Gt)||St.push(Gt)}),ye.forEach(Gt=>{const Tr=St.indexOf(Gt);Tr>-1&&St.splice(Tr,1)}),S({...N,labels:St,syncStatus:{...N.syncStatus||{},labelsStatus:"pending"}})}t("Labels updated")}catch(Mt){r(Mt?.message||"Failed to update labels")}},Vo=async(L,he)=>{try{await Xse(L,he),await pu(L,[],[he])}catch(ye){r(ye?.message||"Failed to remove label")}},jo=async(L,he)=>{if(i){Hu(!0);try{await Vse({userId:i,accountEmail:he,labelName:L,messageListVisibility:"show",labelListVisibility:"labelShow"}),t("Label created successfully"),await $a(),Mo(""),pl(!1)}catch(ye){r(ye?.message||"Failed to create label")}finally{Hu(!1)}}},oc=async(L,he)=>{if(i)try{await _v(L,{userId:i,...he}),a.invalidateQueries({queryKey:fs.emails()}),N?.id===L&&S(ye=>ye?{...ye,...he}:null),t("Email updated")}catch(ye){r(ye?.message||"Update failed")}},ko=()=>{ee(!M),C(new Set)},Ul=L=>{C(he=>{const ye=new Set(he);return ye.has(L)?ye.delete(L):ye.add(L),ye})},Ed=()=>{qa.size===ro.length?C(new Set):C(new Set(ro.map(L=>L.id)))},xu=async()=>{if(!(!i||qa.size===0)){be(!0);try{await Promise.all(Array.from(qa).map(L=>vI(L,!0,i))),a.invalidateQueries({queryKey:fs.emails()}),t(`${qa.size} email(s) marked as read`),C(new Set)}catch(L){r(L?.message||"Failed to mark emails as read")}finally{be(!1)}}},So=async L=>{if(i)try{await bI(L,i),a.invalidateQueries({queryKey:fs.emails()}),N?.id===L&&S(he=>he?{...he,threadStatus:"archived"}:null),t("Email archived")}catch(he){r(he?.message||"Failed to archive email")}},gu=async L=>{if(i&&confirm("Are you sure you want to delete this email? This action cannot be undone."))try{await yI(L,i),a.invalidateQueries({queryKey:fs.emails()}),N?.id===L&&S(null),t("Email deleted")}catch(he){r(he?.message||"Failed to delete email")}},qc=async L=>{if(i)try{await Ese(L,i),a.invalidateQueries({queryKey:fs.emails()}),N?.id===L&&S(he=>he?{...he,threadStatus:"active"}:null),t("Email restored")}catch(he){r(he?.message||"Failed to restore email")}},lc=async L=>{if(i)try{await _v(L,{userId:i,threadStatus:"resolved"}),a.invalidateQueries({queryKey:fs.emails()}),N?.id===L&&S(he=>he?{...he,threadStatus:"resolved"}:null),t("Conversation marked as resolved")}catch(he){r(he?.message||"Failed to resolve conversation")}},vu=async()=>{if(!(!i||qa.size===0)){be(!0);try{await Promise.all(Array.from(qa).map(L=>bI(L,i))),a.invalidateQueries({queryKey:fs.emails()}),t(`${qa.size} email(s) archived`),C(new Set)}catch(L){r(L?.message||"Failed to archive emails")}finally{be(!1)}}},ql=async()=>{if(!(!i||qa.size===0)&&confirm(`Are you sure you want to delete ${qa.size} email(s)? This action cannot be undone.`)){be(!0);try{await Promise.all(Array.from(qa).map(he=>yI(he,i)));const L=Array.from(qa);a.invalidateQueries({queryKey:fs.emails()}),N&&qa.has(N.id)&&S(null),t(`${L.length} email(s) deleted`),C(new Set)}catch(L){r(L?.message||"Failed to delete emails")}finally{be(!1)}}},Qh=async(L,he,ye,Qe)=>{if(!i)return;const st=`${L}-${he}-view`;kn(Mt=>({...Mt,[st]:!0}));try{const Mt=await wI(L,he,i),St=window.URL.createObjectURL(Mt);Ra({isOpen:!0,emailId:L,attachmentId:he,filename:ye,mimeType:Qe,url:St})}catch(Mt){r(Mt?.message||"Failed to load attachment")}finally{kn(Mt=>({...Mt,[st]:!1}))}},tf=async(L,he,ye)=>{if(!i)return;const Qe=`${L}-${he}-download`;kn(st=>({...st,[Qe]:!0}));try{const st=await wI(L,he,i),Mt=window.URL.createObjectURL(st),St=document.createElement("a");St.href=Mt,St.download=ye,document.body.appendChild(St),St.click(),window.URL.revokeObjectURL(Mt),document.body.removeChild(St),t("Attachment downloaded")}catch(st){r(st?.message||"Failed to download attachment")}finally{kn(st=>({...st,[Qe]:!1}))}},ya=L=>{if(L===0)return"0 Bytes";const he=1024,ye=["Bytes","KB","MB","GB"],Qe=Math.floor(Math.log(L)/Math.log(he));return Math.round(L/Math.pow(he,Qe)*100)/100+" "+ye[Qe]},ri=L=>L.startsWith("image/"),cc=L=>L==="application/pdf",q0=L=>{const he=L.target.files;if(!he||he.length===0)return;const ye=25*1024*1024,Qe=[];Array.from(he).forEach(st=>{if(st.size>ye){r(`File "${st.name}" is too large. Maximum size is 25MB.`);return}const Mt=`${Date.now()}-${Math.random()}`;let St;st.type.startsWith("image/")&&(St=URL.createObjectURL(st)),Qe.push({file:st,preview:St,id:Mt})}),Ta([...On,...Qe]),qo.current&&(qo.current.value="")},Td=async(L,he)=>{if(i){xi(!0);try{const ye=await aie(i,ka||void 0,void 0,L||gi,he),Qe=ye?.data||ye||{};zo(he?st=>[...st,...Qe.files||[]]:Qe.files||[]),Kh(Qe.nextPageToken||null)}catch(ye){const Qe=ye?.message||"Failed to load Drive files";Qe.includes("not connected")||ye?.code==="ACCOUNT_NOT_CONNECTED"?r(`Google account ${ka||"selected account"} is not connected. Please connect your Google account in Settings.`):r(Qe),he||zo([])}finally{xi(!1)}}},Wf=async L=>{if(!(!i||!bo))try{const he=ns!=="compose"&&N?.id?N.id:`draft_${Date.now()}`;if(ns==="compose"){const ye={id:`drive_${L.id}`,file:new mc([],L.name,{type:L.mimeType}),isDriveFile:!0,driveFileId:L.id,driveWebViewLink:L.webViewLink,driveIconLink:L.iconLink,preview:L.thumbnailLink||L.iconLink};Ta([...On,ye]),$o(!1),t("Drive file added")}else await jI({userId:i,emailId:N.id,fileId:L.id,fileName:L.name,fileMimeType:L.mimeType,webViewLink:L.webViewLink,webContentLink:L.webContentLink,iconLink:L.iconLink}),$o(!1),t("Drive file attached"),N&&eo(N)}catch(he){r(he?.message||"Failed to attach Drive file")}},$l=L=>{const he=On.find(ye=>ye.id===L);he?.preview&&URL.revokeObjectURL(he.preview),vl(ye=>{const Qe={...ye};return delete Qe[L],Qe}),Ta(On.filter(ye=>ye.id!==L))},za=async()=>{if(!i||!ka||!Ka||!Xa){r("Please fill in subject and message to save draft");return}oa(!0);try{await Tse({userId:i,accountEmail:ka||Re[0]?.email,to:hn.length>0?hn:void 0,cc:ba.length>0?ba:void 0,bcc:Wn.length>0?Wn:void 0,subject:Ka,body:Xa}),t("Draft saved to Gmail")}catch(L){const he=w(L,"Failed to save draft");r(he)}finally{oa(!1)}},Ts=async()=>{if(!(!i||!ka)){Bc(!0);try{const L=await Ose(i,ka||Re[0]?.email),he=L?.data||L||[];Hf(Array.isArray(he)?he:[])}catch(L){const he=w(L,"Failed to load drafts");r(he),Hf([])}finally{Bc(!1)}}};D.useEffect(()=>()=>{On.forEach(L=>{L.preview&&URL.revokeObjectURL(L.preview)})},[On]),D.useEffect(()=>{!bo&&On.length>0&&(On.forEach(L=>{L.preview&&URL.revokeObjectURL(L.preview)}),Ta([]))},[bo,On]);const us=(L,he=1200,ye=1200,Qe=.8)=>new Promise((st,Mt)=>{const St=new FileReader;St.onload=Gt=>{const Tr=new Image;Tr.onload=()=>{let jn=Tr.width,la=Tr.height;jn>la?jn>he&&(la=la*he/jn,jn=he):la>ye&&(jn=jn*ye/la,la=ye);const ca=document.createElement("canvas");ca.width=jn,ca.height=la;const ni=ca.getContext("2d");ni?(ni.drawImage(Tr,0,0,jn,la),st(ca.toDataURL("image/jpeg",Qe))):Mt(new Error("Canvas context not available"))},Tr.onerror=Mt,Tr.src=Gt.target?.result},St.onerror=Mt,St.readAsDataURL(L)}),bu=async L=>{const he=L.target.files?.[0];if(he){if(!he.type.startsWith("image/")){r("Please select an image file");return}if(he.size>10*1024*1024){r("Image size must be less than 10MB");return}try{const ye=await us(he,1200,1200,.8);Fr(ye),ze(he)}catch(ye){r(ye.message||"Failed to process image")}}},dc=L=>{const he=document.createElement("div");he.innerHTML=L;const ye=he.textContent||he.innerText||"",Qe=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,st=[];let Mt;for(;(Mt=Qe.exec(ye))!==null;){const St=Mt[1].trim(),Gt=Ln.find(Tr=>Tr.name.toLowerCase()===St.toLowerCase());Gt&&Gt.id!==i&&st.push(Gt.id)}return[...new Set(st)]},$c=D.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]],keyboard:{bindings:{mention:{key:"@",handler:()=>!0}}}}),[]),$0=["header","bold","italic","underline","strike","list","bullet","link"],Ls=D.useCallback((L,he,ye,Qe)=>{if(vn(L),Ht.current=Qe,ye==="user"){const st=Qe.getSelection(!0);if(st){const St=Qe.getText().substring(0,st.index),Gt=St.lastIndexOf("@");if(Gt!==-1){const Tr=St.substring(Gt+1),jn=Gt>0?St[Gt-1]:" ";if(jn===" "||jn===`
`||Gt===0)if(!Tr.includes(" ")&&!Tr.includes(`
`)&&Tr.length<50){En(Gt),Ot(Tr);const la=Ln.filter(ca=>ca.name?.toLowerCase().includes(Tr.toLowerCase())||ca.email?.toLowerCase().includes(Tr.toLowerCase()));Mr(la),Ve(la.length>0)}else Ve(!1),En(null);else Ve(!1),En(null)}else Ve(!1),En(null)}}},[Ln]),Gf=D.useCallback(L=>{const he=Ht.current;if(!he){console.error("[INBOX] Quill editor not available");return}he.focus();const ye=he.getText();let Qe=sa;if((Qe===null||Qe<0)&&(Qe=ye.lastIndexOf("@")),Qe===-1){console.error("[INBOX] Could not find @ symbol for mention"),Ve(!1),En(null);return}const st=ye.substring(Qe+1),Mt=st.indexOf(" "),St=st.indexOf(`
`);let Gt=st.length;Mt!==-1&&(Gt=Math.min(Gt,Mt)),St!==-1&&(Gt=Math.min(Gt,St));const Tr=Qe,jn=Qe+1+Gt,la=jn-Tr;console.log("[INBOX] Inserting mention:",{atIndex:Qe,deleteStartIndex:Tr,deleteEndIndex:jn,deleteLength:la,textAfterAt:st.substring(0,Gt),mentionText:`@${L.name} `}),he.setSelection(Tr,la,"api"),he.deleteText(Tr,la,"api");const ca=`@${L.name} `;he.insertText(Tr,ca,"api"),he.formatText(Tr,ca.length-1,{bold:!0,color:"#4338ca"},"api");const ni=Tr+ca.length;he.setSelection(ni,0,"api");const Kf=he.root.innerHTML;vn(Kf),Ve(!1),En(null)},[sa]),rf=async()=>{if(!N||!Gr.trim()&&!ke||!i||!s){!Gr.trim()&&!ke&&r("Please enter a note or upload an image");return}pe(!0);try{const L=N.id,he=s.name||s.email||"You",ye=document.createElement("div");ye.innerHTML=Gr;const st=(ye.textContent||ye.innerText||"").trim()?Gr.trim():"",Mt={emailId:L,userId:i,userName:he,message:st};if(rr.length>0&&(Mt.markedFor=rr),kr&&kr.trim()){if(kr.length>75e4){r("Image is too large. Please use a smaller image."),pe(!1);return}Mt.imageUrl=kr,ke?.name&&(Mt.imageName=ke.name)}const St=await xse(Mt),Gt=St?.data||{};if(!Gt.id&&!Gt.emailId)throw console.error("[INBOX] Invalid note response:",St),new Error("Invalid response from server. Note was not created.");const Tr={id:Gt.id||`thread-${Date.now()}`,userId:i,userName:he,message:st,timestamp:Gt.createdAt||new Date().toISOString(),imageUrl:kr||void 0,imageName:ke?.name||void 0,markedFor:Gt.markedFor||[]};en(ca=>({...ca,[L]:[Tr,...ca[L]||[]]}));const jn=dc(st);if(jn.length>0)for(const ca of jn)try{await Zm({userId:ca,type:"mention",title:"You were mentioned in an email note",message:`${he} mentioned you in a note on email: "${N.subject||"Untitled"}"`,link:`/?tab=inbox&email=${L}`,read:!1})}catch(ni){const Kf=ni?.message||"Failed to send notification";console.error("Failed to send notification:",Kf)}vn(""),Fr(""),ze(null),xr([]),Tt.current&&(Tt.current.value=""),Ht.current&&Ht.current.setText("");const la=St?.message||(jn.length>0?`Note added and ${jn.length} user(s) notified`:"Internal note added");t(la)}catch(L){const he=w(L,"Failed to add note");console.error("[INBOX] Error adding note:",he),r(he)}finally{pe(!1)}},zl=async(L,he)=>{if(!(!i||!s)){Fe(he);try{await vse(he,i),en(ye=>({...ye,[L]:(ye[L]||[]).filter(Qe=>Qe.id!==he)})),t("Note deleted")}catch(ye){const Qe=w(ye,"Failed to delete note");r(Qe)}finally{Fe(null)}}},Ko=async L=>{if(!(!N||!i)){ct(!0),xt([]),ve(null),mt(null);try{const he=await bse(N.id,i,L),ye=he?.data??he??{};if(ye.variations&&Array.isArray(ye.variations)&&ye.variations.length>0)xt(ye.variations),ve(0),mt(y(ye.variations[0].draft)),t(`Generated ${ye.variations.length} draft variations`);else{let Qe=ye.draft;(!Qe||typeof Qe!="string")&&(Qe=`Hi ${N.sender||"there"},

Thank you for your email regarding "${N.subject||"your inquiry"}".

[AI-generated draft response - customize as needed]

Best regards,
${s?.name||"Team"}`),mt(y(Qe)),xt([{style:"default",description:"AI-generated draft",draft:Qe,confidence:75}]),ve(0),t("AI draft generated")}}catch(he){const ye=w(he,"Failed to generate draft");ct(!1),setTimeout(()=>{console.error("[INBOX] Error generating draft:",ye),r(ye)},0)}finally{ct(!1)}}},to=async()=>{if(!i||!Ka||hn.length===0){r("Please enter a subject and recipient to generate AI draft");return}zf(!0),Mc(null);try{const he=`Hi ${hn[0].split("@")[0]},

${Ka?`Regarding: ${Ka}`:""}

[Your message here]

Best regards,
${s?.name||"Team"}`;await new Promise(ye=>setTimeout(ye,1e3)),Mc(y(he)),t("AI draft generated")}catch(L){const he=w(L,"Failed to generate draft");r(he)}finally{zf(!1)}},nf=()=>{if(!et)return;let L="";try{if(bt.current&&typeof bt.current.getText=="function")L=bt.current.getText();else{const he=document.createElement("div");he.innerHTML=et,L=he.textContent||he.innerText||""}}catch(he){const ye=document.createElement("div");ye.innerHTML=et||"",L=ye.textContent||ye.innerText||"";const Qe=he?.message||"Error extracting text";console.error("[INBOX] Error extracting draft text:",Qe)}navigator.clipboard.writeText(L).then(()=>{t("Draft copied to clipboard! You can paste it into your email client.")}).catch(he=>{try{const ye=document.createElement("textarea");ye.value=L,document.body.appendChild(ye),ye.select(),document.execCommand("copy"),document.body.removeChild(ye),t("Draft copied to clipboard!")}catch(ye){const Qe=ye?.message||"Failed to copy to clipboard";console.error("[INBOX] Clipboard copy failed:",Qe),r("Failed to copy draft. Please select and copy manually.")}})},Vf=()=>{!et||!i||!N||(Kn(""),Vr(!0))},uc=async()=>{if(!aa||!aa.trim()||!et||!i||!N){r("Please enter a template name");return}try{const L=typeof et=="string"?et:String(et||"");await yse({name:aa.trim(),content:L,userId:i,category:"email-response"}),t("Template saved successfully!"),Vr(!1),Kn(""),Od()}catch(L){const he=w(L,"Failed to save template");console.error("[INBOX] Error saving template:",he),r(he)}},Od=async()=>{if(i)try{const L=await wse(i),he=L?.data??L??[];yr(Array.isArray(he)?he:[])}catch(L){const he=L?.message||"Failed to load templates";console.error("Failed to load templates:",he)}};D.useEffect(()=>{i&&Od()},[i]),D.useEffect(()=>{i&&bo&&Od()},[i,bo]);const af=(L,he=100)=>{if(!L)return"";let ye=L.replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim();if(ye=ye.replace(/https?:\/\/[^\s]+/g,"").trim(),ye=ye.replace(/\s+/g," ").trim(),ye.length<=he)return ye;const Qe=ye.substring(0,he),st=Qe.lastIndexOf(" ");return st>he*.7?Qe.substring(0,st)+"...":Qe+"..."},ro=D.useMemo(()=>{let he=[...Fn.filter((ye,Qe,st)=>ye.id&&Qe===st.findIndex(Mt=>Mt.id===ye.id))];return ie==="archived"?he=he.filter(ye=>ye.threadStatus==="archived"):ie&&ie!=="archived"?he=he.filter(ye=>ye.status===ie):ie||(he=he.filter(ye=>ye.threadStatus!=="archived")),Or&&(he=he.filter(ye=>(ye.labels||[]).includes(Or))),He&&i&&(he=he.filter(ye=>ye.owner===i)),wt&&(he=he.filter(ye=>ye.owner===wt)),he.sort((ye,Qe)=>{let st=0;switch(Te){case"date":const Mt=parseInt(ye.internalDate||"0")||0;st=(parseInt(Qe.internalDate||"0")||0)-Mt;break;case"sender":const Gt=(ye.sender||ye.email||"").toLowerCase(),Tr=(Qe.sender||Qe.email||"").toLowerCase();st=Gt.localeCompare(Tr);break;case"subject":const jn=(ye.subject||"").toLowerCase(),la=(Qe.subject||"").toLowerCase();st=jn.localeCompare(la);break;case"unread":if(ye.isRead===Qe.isRead){const ca=parseInt(ye.internalDate||"0")||0;st=(parseInt(Qe.internalDate||"0")||0)-ca}else st=ye.isRead?1:-1;break}return De==="asc"?-st:st}),he},[Fn,Or,He,wt,i,Te,De]);D.useEffect(()=>{N?.id&&(ro.some(he=>he.id===N.id)||(S(null),ml([]),po(null),mt(null),xt([]),ve(null),Ne([]),en(he=>{const ye={...he};return delete ye[N.id],ye})))},[ro,N?.id]);const z0=ro.filter(L=>!L.isRead).length,H0=D.useMemo(()=>{if(Dt==="list")return null;const L=new Map;ro.forEach(ye=>{const Qe=ye.gmailThreadId||ye.id;L.has(Qe)||L.set(Qe,[]),L.get(Qe).push(ye)});const he=Array.from(L.entries()).map(([ye,Qe])=>{const st=[...Qe].sort((Mt,St)=>{const Gt=parseInt(Mt.internalDate||"0")||0;return(parseInt(St.internalDate||"0")||0)-Gt});return{threadId:ye,emails:st,latestEmail:st[0],unreadCount:st.filter(Mt=>!Mt.isRead).length}});return he.sort((ye,Qe)=>{let st=0;const Mt=ye.latestEmail,St=Qe.latestEmail;switch(Te){case"date":const Gt=parseInt(Mt.internalDate||"0")||0;st=(parseInt(St.internalDate||"0")||0)-Gt;break;case"sender":const jn=(Mt.sender||Mt.email||"").toLowerCase(),la=(St.sender||St.email||"").toLowerCase();st=jn.localeCompare(la);break;case"subject":const ca=(Mt.subject||"").toLowerCase(),ni=(St.subject||"").toLowerCase();st=ca.localeCompare(ni);break;case"unread":if(ye.unreadCount>0&&Qe.unreadCount===0)st=-1;else if(ye.unreadCount===0&&Qe.unreadCount>0)st=1;else if(ye.unreadCount===Qe.unreadCount){const Kf=parseInt(Mt.internalDate||"0")||0;st=(parseInt(St.internalDate||"0")||0)-Kf}else st=Qe.unreadCount-ye.unreadCount;break}return De==="asc"?-st:st}),he},[ro,Dt,Te,De]),fc=L=>{Jr(he=>{const ye=new Set(he);return ye.has(L)?ye.delete(L):ye.add(L),ye})},sf=L=>{Wr(he=>{const ye=new Set(he);return ye.has(L)?ye.delete(L):ye.add(L),ye})};return i?n.jsxs("div",{className:"flex-1 min-h-0 flex flex-col animate-in fade-in duration-300 pb-8 min-w-0 relative",children:[P&&n.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white text-xs font-medium rounded-full shadow-lg border border-indigo-500/30 animate-in fade-in duration-200",title:"Auto-syncing emails from connected accounts",role:"status","aria-live":"polite",children:[n.jsx(gt,{className:"w-4 h-4 animate-spin flex-shrink-0"}),n.jsx("span",{children:"Auto-syncing"})]}),n.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4 border-b border-slate-200 shrink-0",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Shared Inbox"}),Or&&n.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:["Filtered: ",Ar.find(L=>L.id===Or)?.name||Or]})]}),n.jsxs("p",{className:"text-slate-500 text-sm mt-0.5",children:["Unified view from all team members' Gmail accounts  ",z0," unread",Or&&`  ${ro.length} email${ro.length!==1?"s":""} with label`]})]}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Ar.length>0&&n.jsx("div",{className:"relative",children:n.jsxs("select",{value:Or||"",onChange:L=>{const he=L.target.value||null;Ba(he);const ye=document.querySelector(".overflow-y-auto");ye&&(ye.scrollTop=0)},className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors cursor-pointer",children:[n.jsx("option",{value:"",children:"All Labels"}),Ar.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]})}),n.jsxs("button",{onClick:()=>mr(Dt==="threads"?"list":"threads"),className:"inline-flex items-center gap-2 px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors",title:Dt==="threads"?"Switch to list view":"Switch to threaded view",children:[n.jsx(co,{className:"w-4 h-4"}),Dt==="threads"?"Threads":"List"]}),g&&n.jsxs("button",{onClick:Hs,disabled:E,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:[E?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(sd,{className:"w-4 h-4"}),E?"Syncing":"Sync from Gmail"]}),Re.length>0&&n.jsxs("button",{onClick:()=>Bt(!0),className:"inline-flex items-center gap-1.5 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700 transition-colors",title:`${Re.length} connected account${Re.length!==1?"s":""}`,children:[n.jsx(Nn,{className:"w-3.5 h-3.5 text-emerald-600"}),n.jsx("span",{className:"hidden sm:inline",children:"Accounts"}),n.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-bold rounded-full",children:Re.length})]})]})]}),J===!1&&Re.length===0&&n.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[n.jsx($n,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-amber-800 font-medium text-sm",children:"Connect Gmail to sync inbox"}),n.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Link your Google account to start syncing emails. You can connect multiple Gmail accounts."}),n.jsxs("button",{onClick:Es,className:"mt-3 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"Connect Gmail Account"]})]})]}),n.jsxs("div",{className:"mt-4 shrink-0 space-y-2 px-1",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsxs("div",{className:"relative flex-1",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search or use from: subject: has:attachment is:read",value:H,onChange:L=>Y(L.target.value),onKeyDown:L=>L.key==="Enter"&&Sn(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),n.jsxs("button",{type:"button",onClick:()=>we(L=>!L),className:`px-3 py-2.5 border rounded-xl text-sm font-medium flex items-center gap-2 shrink-0 ${Ee?"bg-indigo-50 border-indigo-200 text-indigo-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,title:"Advanced filters",children:[n.jsx(bf,{className:"w-4 h-4"}),"Filters",(X||W||U!==void 0||ae||se||Me!==void 0||Ue!==void 0||ie||Or)&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})]})]}),Ee&&n.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl bg-white shadow-sm space-y-4",children:[n.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"ADVANCED FILTERS"}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"From (sender)"}),n.jsx("input",{type:"text",placeholder:"email or name",value:X,onChange:L=>{te(L.target.value),de(!0)},onFocus:()=>de(!0),onBlur:()=>setTimeout(()=>de(!1),180),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),Oe&&ce.length>0&&n.jsx("div",{className:"absolute z-20 top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:ce.filter(L=>!X||[L.email,L.name].some(he=>he?.toLowerCase().includes(X.toLowerCase()))).slice(0,20).map(L=>n.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 flex flex-col",onMouseDown:he=>{he.preventDefault(),te(L.email||L.name),de(!1)},children:[n.jsx("span",{className:"font-medium text-slate-800",children:L.name||L.email}),L.email!==L.name&&n.jsx("span",{className:"text-xs text-slate-500",children:L.email})]},L.email))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Read"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Me===void 0?"":String(Me),onChange:L=>ue(L.target.value===""?void 0:L.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"false",children:"Unread"}),n.jsx("option",{value:"true",children:"Read"})]}),n.jsx(Fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date from"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:ae,onChange:L=>me(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),n.jsx(Jn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date to"}),n.jsxs("div",{className:"relative",children:[n.jsx("input",{type:"date",value:se,onChange:L=>le(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),n.jsx(Jn,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Subject"}),n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"",value:W,onChange:L=>O(L.target.value),className:"flex-1 px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),n.jsxs("div",{className:"relative w-32",children:[n.jsxs("select",{value:q,onChange:L=>G(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-8 hover:border-slate-300",children:[n.jsx("option",{value:"contains",children:"contains"}),n.jsx("option",{value:"equals",children:"equals"}),n.jsx("option",{value:"starts",children:"starts with"}),n.jsx("option",{value:"ends",children:"ends with"})]}),n.jsx(Fs,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Attachment"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:U===void 0?"":String(U),onChange:L=>K(L.target.value===""?void 0:L.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"true",children:"Has attachment"}),n.jsx("option",{value:"false",children:"No attachment"})]}),n.jsx(Fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Status"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:ie,onChange:L=>Z(L.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"open",children:"Open"}),n.jsx("option",{value:"assigned",children:"Assigned to me"})]}),n.jsx(Fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Starred"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Ue===void 0?"":String(Ue),onChange:L=>Ae(L.target.value===""?void 0:L.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any"}),n.jsx("option",{value:"true",children:"Starred"}),n.jsx("option",{value:"false",children:"Not starred"})]}),n.jsx(Fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),Ar.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Label"}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:Or||"",onChange:L=>Ba(L.target.value||null),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"All labels"}),Ar.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx(Fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Assigned To"}),n.jsxs("div",{className:"space-y-2.5",children:[n.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer group",children:[n.jsx("input",{type:"checkbox",checked:He,onChange:L=>{nt(L.target.checked),L.target.checked&&Nt(null)},className:"w-4 h-4 text-indigo-600 border-2 border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 focus:ring-offset-0 focus:border-indigo-500 cursor-pointer transition-colors"}),n.jsx("span",{className:"text-sm text-slate-700 group-hover:text-slate-900 transition-colors",children:"Assigned to me"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("select",{value:wt||"",onChange:L=>{const he=L.target.value||null;Nt(he),he&&nt(!1)},className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[n.jsx("option",{value:"",children:"Any team member"}),Ln.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx(Fs,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>a.invalidateQueries({queryKey:fs.emails()}),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Apply filters"}),n.jsx("button",{type:"button",onClick:()=>{te(""),O(""),G("contains"),K(void 0),me(""),le(""),ue(void 0),Ae(void 0),Z(""),Ba(null),nt(!1),Nt(null),Y(""),setTimeout(()=>a.invalidateQueries({queryKey:fs.emails()}),0)},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Clear all"}),n.jsxs("button",{type:"button",onClick:()=>fe(!0),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[n.jsx(g6,{className:"w-4 h-4"}),"Save search"]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>Le(L=>!L),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[n.jsx(g6,{className:"w-4 h-4"}),"Saved (",Ce.length,")"]}),je&&n.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 w-64 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:Ce.length===0?n.jsx("p",{className:"px-3 py-2 text-sm text-slate-500",children:"No saved searches"}):Ce.map(L=>n.jsxs("div",{className:"flex items-center group",children:[n.jsx("button",{type:"button",className:"flex-1 text-left px-3 py-2 text-sm hover:bg-slate-100 truncate",onClick:()=>{Y(L.filters.search??""),te(L.filters.from??""),O(L.filters.subject??""),G(L.filters.subjectOperator??"contains"),K(L.filters.hasAttachment),me(L.filters.dateFrom??""),le(L.filters.dateTo??""),ue(L.filters.isRead),Ae(L.filters.isStarred),Z(L.filters.status??""),Ba(L.filters.labelId??null),Le(!1),setTimeout(()=>a.invalidateQueries({queryKey:fs.emails()}),0)},children:L.name}),n.jsx("button",{type:"button",className:"p-2 text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100",onClick:()=>{Xe(he=>he.filter(ye=>ye.id!==L.id)),Le(!1)},title:"Delete saved search",children:""})]},L.id))})]}),n.jsxs("button",{type:"button",onClick:()=>{bn(!0),i&&NI(i).then(L=>{const he=L?.data??L??[];Ge(Array.isArray(he)?he:[])}).catch(()=>Ge([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Auto-labeling rules (domain or keyword  label)",children:[n.jsx(bf,{className:"w-4 h-4"}),"Categorization rules"]}),n.jsx("button",{type:"button",onClick:()=>{Ac(!0),i&&eie(i).then(L=>{const he=L?.data??L??[];Fo(Array.isArray(he)?he:[])}).catch(()=>Fo([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Map Gmail labels to Impact OS views",children:"Folder mapping"}),n.jsxs("button",{type:"button",onClick:()=>{Ea(!0),ei.length===0&&Bn()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Manage excluded email domains",children:[n.jsx(sv,{className:"w-4 h-4"}),"Excluded Domains ",ei.length>0&&`(${ei.length})`]})]})]}),(H||X||W||U!==void 0||ae||se||Me!==void 0||Ue!==void 0||ie||Or)&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Active:"}),H&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:['Search "',H.length>20?H.slice(0,20)+"":H,'"',n.jsx("button",{type:"button",onClick:()=>Y(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Or&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs",children:["Label: ",Ar.find(L=>L.id===Or)?.name||Or,n.jsx("button",{type:"button",onClick:()=>Ba(null),className:"hover:bg-indigo-200 rounded p-0.5","aria-label":"Clear",children:""})]}),X&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["From: ",X,n.jsx("button",{type:"button",onClick:()=>te(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),W&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Subject",n.jsx("button",{type:"button",onClick:()=>O(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),U!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[U?"Has attachment":"No attachment",n.jsx("button",{type:"button",onClick:()=>K(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),ie&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Status: ",ie,n.jsx("button",{type:"button",onClick:()=>Z(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Me!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[Me?"Read":"Unread",n.jsx("button",{type:"button",onClick:()=>ue(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Ue!==void 0&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[Ue?"Starred":"Not starred",n.jsx("button",{type:"button",onClick:()=>Ae(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),(ae||se)&&n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Date ",ae&&se?`${ae}  ${se}`:ae||se,n.jsx("button",{type:"button",onClick:()=>{me(""),le("")},className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]})]})]}),n.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>{Z(ie==="archived"?"":"archived")},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${ie==="archived"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[n.jsx(iv,{className:"w-4 h-4 inline mr-1.5"}),ie==="archived"?"Show Active":"Show Archived"]}),ie==="archived"&&n.jsxs("span",{className:"text-sm text-slate-500",children:[ro.length," archived email(s)"]})]}),(M||qa.size>0)&&n.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl flex items-center justify-between gap-4 flex-wrap",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("button",{type:"button",onClick:Ed,className:"text-sm font-medium text-indigo-700 hover:text-indigo-800",children:qa.size===ro.length?"Deselect all":"Select all"}),n.jsxs("span",{className:"text-sm text-indigo-600",children:[qa.size," selected"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:xu,disabled:oe||qa.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Read"}),n.jsx("button",{type:"button",onClick:vu,disabled:oe||qa.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Archive"}),n.jsx("button",{type:"button",onClick:ql,disabled:oe||qa.size===0,className:"px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"}),n.jsx("button",{type:"button",onClick:ko,className:"px-3 py-1.5 text-indigo-700 text-sm font-medium hover:text-indigo-800",children:"Cancel"})]})]}),n.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 flex-wrap",children:[n.jsx("div",{className:"flex items-center gap-2",children:!M&&n.jsxs("button",{type:"button",onClick:ko,className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-2",children:[n.jsx(_i,{className:"w-4 h-4"}),"Select"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("label",{className:"text-sm text-slate-600",children:"Sort by:"}),n.jsxs("select",{value:Te,onChange:L=>Ie(L.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"date",children:"Date"}),n.jsx("option",{value:"sender",children:"Sender"}),n.jsx("option",{value:"subject",children:"Subject"}),n.jsx("option",{value:"unread",children:"Unread"})]}),n.jsx("button",{type:"button",onClick:()=>Be(De==="asc"?"desc":"asc"),className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50",title:De==="asc"?"Ascending":"Descending",children:De==="asc"?n.jsx(o1,{className:"w-4 h-4"}):n.jsx(Fs,{className:"w-4 h-4"})})]})]}),xe&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>{fe(!1),qe("")},children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-4 space-y-3",onClick:L=>L.stopPropagation(),children:[n.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Save current search"}),n.jsx("input",{type:"text",placeholder:"Search name",value:Se,onChange:L=>qe(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",autoFocus:!0}),n.jsxs("div",{className:"flex gap-2 justify-end",children:[n.jsx("button",{type:"button",onClick:()=>{fe(!1),qe("")},className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"button",onClick:()=>{const L=Se.trim()||"Saved search",he={search:H||void 0,status:ie||void 0,from:X||void 0,subject:W||void 0,subjectOperator:q,hasAttachment:U,dateFrom:ae||void 0,dateTo:se||void 0,labelId:Or||void 0,isRead:Me,isStarred:Ue},ye={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`saved-${Date.now()}`,name:L,filters:he};Xe(Qe=>[...Qe,ye]),fe(!1),qe("")},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save"})]})]})}),Kr&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>bn(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col p-4",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Auto-labeling rules"}),n.jsx("button",{type:"button",onClick:async()=>{if(i){su(!0);try{const he=(await Qse(i,30))?.data;Wu(he)}catch(L){console.error("Failed to load accuracy stats:",L)}finally{su(!1)}}},className:"text-xs text-indigo-600 hover:text-indigo-700 hover:underline",disabled:nc,children:nc?"Loading...":"View accuracy stats"})]}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'When an email matches a rule (sender domain or keyword in subject/body), "Suggest labels" will recommend the label. Add rules below.'}),ja&&n.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsxs("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:["Categorization Accuracy (Last ",ja.periodDays," days)"]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Overall Accuracy"}),n.jsxs("p",{className:"text-lg font-semibold text-indigo-600",children:[ja.summary.accuracyRate,"%"]}),n.jsxs("p",{className:"text-xs text-slate-400",children:[ja.summary.accepted," accepted / ",ja.summary.accepted+ja.summary.rejected+ja.summary.changed," resolved"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs text-slate-500",children:"Total Suggestions"}),n.jsx("p",{className:"text-lg font-semibold text-slate-700",children:ja.summary.total}),n.jsxs("p",{className:"text-xs text-slate-400",children:[ja.summary.pending," pending"]})]})]}),n.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200",children:[n.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"By Source:"}),n.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Domain Rules"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ja.bySource.domain.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ja.bySource.domain.accepted,"/",ja.bySource.domain.total]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"Keyword Rules"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ja.bySource.keyword.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ja.bySource.keyword.accepted,"/",ja.bySource.keyword.total]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-slate-500",children:"AI Suggestions"}),n.jsxs("p",{className:"font-semibold text-slate-700",children:[ja.bySource.ai.accuracyRate,"%"]}),n.jsxs("p",{className:"text-slate-400",children:[ja.bySource.ai.accepted,"/",ja.bySource.ai.total]})]})]})]})]}),n.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[n.jsxs("select",{value:Ns,onChange:L=>Rf(L.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"domain",children:"Sender domain"}),n.jsx("option",{value:"keyword",children:"Keyword"})]}),n.jsx("input",{type:"text",placeholder:Ns==="domain"?"e.g. company.com":"e.g. invoice",value:Gi,onChange:L=>Ai(L.target.value),className:"flex-1 min-w-[120px] px-2 py-1.5 border border-slate-200 rounded-lg text-sm"}),n.jsxs("select",{value:Ol,onChange:L=>js(L.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Select label"}),Ar.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx("button",{type:"button",disabled:!Gi.trim()||!Ol||!i,onClick:async()=>{if(!(!i||!Gi.trim()||!Ol))try{await Jse({userId:i,type:Ns,value:Gi.trim(),labelId:Ol,labelName:Ar.find(ye=>ye.id===Ol)?.name});const L=await NI(i),he=L?.data??L??[];Ge(Array.isArray(he)?he:[]),Ai(""),js(""),t("Rule added")}catch(L){r(L?.message||"Failed to add rule")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:"Add rule"})]}),n.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100",children:rc.length===0?n.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No rules yet. Add a domain or keyword rule above."}):rc.map(L=>n.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 text-sm",children:[n.jsxs("span",{className:"text-slate-700",children:[n.jsx("span",{className:"font-medium",children:L.type==="domain"?"Domain":"Keyword"}),n.jsxs("span",{className:"text-slate-500",children:[' "',L.value,'"  ']}),n.jsx("span",{className:"text-indigo-600",children:L.labelName||L.labelId})]}),n.jsx("button",{type:"button",onClick:async()=>{if(i)try{await Zse(L.id,i),Ge(he=>he.filter(ye=>ye.id!==L.id)),t("Rule removed")}catch(he){r(he?.message||"Failed to delete")}},className:"p-1 text-slate-400 hover:text-red-600 rounded",title:"Delete rule",children:n.jsx(tr,{className:"w-4 h-4"})})]},L.id))}),n.jsx("div",{className:"mt-3 flex justify-end",children:n.jsx("button",{type:"button",onClick:()=>bn(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Close"})})]})}),wd&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:()=>Ea(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col overflow-hidden",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-pink-50",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-red-600 rounded-xl text-white shadow-lg shadow-red-100",children:n.jsx(sv,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Excluded Email Domains"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Email Filtering"})]})]}),n.jsx("button",{type:"button",onClick:()=>Ea(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Emails from domains listed below will not sync or appear in your shared inbox. To see emails from a domain again, remove it from this list."})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"e.g. wx.agency",value:vo,onChange:L=>iu(L.target.value),onKeyDown:L=>{L.key==="Enter"&&vo.trim()&&on()},className:"flex-1 px-4 py-2.5 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-red-500 focus:ring-2 focus:ring-red-500/20 focus:outline-none transition-all"}),n.jsx("button",{type:"button",onClick:on,disabled:!vo.trim()||bd,className:"px-4 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm",children:bd?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4"}),"Add"]})})]}),ou?n.jsxs("div",{className:"p-8 text-center",children:[n.jsx(gt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-red-600"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading excluded domains..."})]}):ei.length===0?n.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[n.jsx(sv,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No excluded domains"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add domains above to prevent emails from syncing"})]}):n.jsx("div",{className:"space-y-2",children:ei.filter(L=>L.domain&&String(L.domain).trim()).map(L=>n.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border-2 border-slate-200 hover:border-red-300 transition-all shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:n.jsx(sv,{className:"w-4 h-4 text-red-600"})}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:L.domain})]}),n.jsx("button",{type:"button",onClick:()=>Ya(L.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove domain",children:n.jsx(Lr,{className:"w-4 h-4"})})]},L.id))})]}),n.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end",children:n.jsx("button",{type:"button",onClick:()=>Ea(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})})]})}),xd&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>Ac(!1),children:n.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col p-4",onClick:L=>L.stopPropagation(),children:[n.jsx("p",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Folder mapping"}),n.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Map Gmail labels to display names (view names) in Impact OS. Order determines sort in views."}),n.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100 mb-3",children:xo.length===0?n.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No mappings. Add labels below to create folder-like views."}):xo.map((L,he)=>n.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm",children:[n.jsx("span",{className:"flex-1 text-slate-700 truncate",children:L.labelName||L.labelId}),n.jsx("input",{type:"text",placeholder:"View name",value:L.viewName??"",onChange:ye=>{const Qe=[...xo];Qe[he]={...Qe[he],viewName:ye.target.value},Fo(Qe)},className:"w-32 px-2 py-1 border border-slate-200 rounded text-xs"}),n.jsx("button",{type:"button",onClick:()=>Fo(ye=>ye.filter((Qe,st)=>st!==he)),className:"p-1 text-slate-400 hover:text-red-600 rounded",children:n.jsx(tr,{className:"w-4 h-4"})})]},L.labelId||he))}),n.jsx("div",{className:"flex gap-2 flex-wrap items-center mb-3",children:n.jsxs("select",{value:"",onChange:L=>{const he=L.target.value;if(!he||xo.some(Qe=>Qe.labelId===he))return;const ye=Ar.find(Qe=>Qe.id===he);Fo(Qe=>[...Qe,{labelId:he,labelName:ye?.name,viewName:ye?.name??"",sortOrder:Qe.length}]),L.target.value=""},className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[n.jsx("option",{value:"",children:"Add label to mapping"}),Ar.filter(L=>!xo.some(he=>he.labelId===L.id)).map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]})}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx("button",{type:"button",onClick:()=>Ac(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),n.jsx("button",{type:"button",onClick:async()=>{if(i)try{await tie({userId:i,mappings:xo}),t("Folder mapping saved"),Ac(!1)}catch(L){r(L?.message||"Failed to save")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save mapping"})]})]})}),Hr&&n.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-xl text-red-700 text-sm",children:Hr}),n.jsxs("div",{className:"flex-1 min-h-[50vh] lg:min-h-[400px] flex flex-col lg:flex-row gap-4 mt-4 min-w-0",children:[n.jsx("div",{className:`flex flex-col min-h-0 border border-slate-200 rounded-xl bg-white overflow-hidden ${N?"min-h-[35vh] flex-1 lg:min-h-0 lg:w-[380px] lg:max-w-[380px] lg:flex-shrink-0":"flex-1 min-h-[35vh] lg:min-h-0"}`,children:Ut?n.jsx("div",{className:"flex-1 overflow-y-auto",children:[...Array(10)].map((L,he)=>n.jsx("div",{className:"px-4 py-3 border-b border-slate-100 animate-pulse",children:n.jsxs("div",{className:"flex items-start gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex-shrink-0"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2 mb-1"}),n.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]}),n.jsx("div",{className:"w-16 h-3 bg-slate-200 rounded flex-shrink-0"})]})},he))}):ro.length===0?n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[n.jsx(rs,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-600 font-medium",children:Or?"No emails with this label":"No emails yet"}),n.jsx("p",{className:"text-slate-400 text-sm mt-1",children:Or?"Try selecting a different label or clear the filter to see all emails.":'Connect Gmail and tap "Sync from Gmail" to pull in your inbox (including older mail).'}),(ae||se)&&!Or&&n.jsx("p",{className:"text-slate-500 text-xs mt-2 max-w-sm",children:"To see emails older than your date range, run Sync from Gmail first so full history is available."}),Or&&n.jsx("button",{onClick:()=>Ba(null),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700",children:"Clear Filter"}),!Or&&n.jsx("button",{onClick:Hs,disabled:E,className:"mt-4 px-4 py-2 bg-slate-100 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-200 disabled:opacity-60",children:E?"Syncing":"Sync from Gmail"})]}):Dt==="threads"&&H0?n.jsxs("ul",{ref:ma,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[H0.map(L=>{const he=Sr.has(L.threadId),ye=L.latestEmail,Qe=L.emails.length>1;return n.jsxs("li",{children:[n.jsxs("div",{role:M?void 0:"button",tabIndex:M?void 0:0,onKeyDown:st=>{!M&&(st.key==="Enter"||st.key===" ")&&(st.preventDefault(),Qe?fc(L.threadId):eo(ye))},onClick:()=>!M&&(Qe?fc(L.threadId):eo(ye)),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${N?.id===ye.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[M&&n.jsx("input",{type:"checkbox",checked:qa.has(ye.id),onChange:()=>Ul(ye.id),onClick:st=>st.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.jsx(Xs,{src:void 0,alt:ye.sender||ye.email||"",fallbackText:ye.sender||ye.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),Qe&&n.jsx("div",{role:"button",tabIndex:0,onClick:st=>{st.stopPropagation(),fc(L.threadId)},onKeyDown:st=>{(st.key==="Enter"||st.key===" ")&&(st.preventDefault(),st.stopPropagation(),fc(L.threadId))},className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",children:he?n.jsx(Fs,{className:"w-4 h-4 text-slate-500"}):n.jsx(wa,{className:"w-4 h-4 text-slate-500"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`truncate font-medium ${L.unreadCount>0?"text-slate-900":"text-slate-600"}`,children:ye.subject||"(No subject)"}),ye.isStarred&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(yf,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),ye.syncStatus?.starredStatus&&Ad(ye.syncStatus.starredStatus)]}),ye.attachments&&ye.attachments.length>0&&n.jsx(J0,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${ye.attachments.length} attachment(s)`}),ye.priority&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ye.priority==="high"?"bg-red-100 text-red-700":ye.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:ye.priority==="high"?"High":ye.priority==="low"?"Low":"Medium"}),ye.threadStatus&&ye.threadStatus!=="active"&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ye.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":ye.threadStatus==="pending"?"bg-amber-100 text-amber-700":ye.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:ye.threadStatus.charAt(0).toUpperCase()+ye.threadStatus.slice(1)}),ye.owner&&Ln.find(st=>st.id===ye.owner)&&n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:Ln.find(st=>st.id===ye.owner)?.name||"Assigned"}),Qe&&n.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-[10px] font-medium rounded-full",children:L.emails.length})]}),n.jsxs("p",{className:"text-xs text-slate-500 mt-0 truncate",children:[ye.sender||ye.email,Qe&&`  ${L.emails.length} messages`]}),(()=>{const st=new Set;L.emails.forEach(St=>{St.participants&&Array.isArray(St.participants)&&St.participants.forEach(Gt=>st.add(Gt.toLowerCase())),St.to&&Array.isArray(St.to)&&St.to.forEach(Gt=>st.add(Gt.toLowerCase())),St.cc&&Array.isArray(St.cc)&&St.cc.forEach(Gt=>st.add(Gt.toLowerCase()))});const Mt=Array.from(st).slice(0,5);return Mt.length>0?n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[n.jsx("span",{className:"text-slate-500",children:"To: "}),Mt.map((St,Gt)=>n.jsxs("span",{children:[St.split("@")[0],Gt<Mt.length-1&&", "]},St)),st.size>5&&` +${st.size-5} more`]}):null})(),(ye.accountEmail||ye.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[ye.accountOwnerName&&n.jsxs("span",{className:"text-slate-500",children:["via ",ye.accountOwnerName]}),ye.accountEmail&&n.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:ye.accountEmail})]}),ye.lastMessage&&n.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:af(ye.lastMessage,80)})]})}),n.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:ye.timestamp}),L.unreadCount>0&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!M&&n.jsx(wa,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]}),he&&Qe&&n.jsx("div",{className:"bg-slate-50/50 border-l-4 border-indigo-200 pl-4",children:L.emails.map((st,Mt)=>{const St=_r.has(st.id);return n.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[n.jsxs("button",{type:"button",onClick:()=>sf(st.id),className:`w-full text-left px-4 py-2.5 hover:bg-slate-100 transition-colors flex items-start gap-3 ${N?.id===st.id?"bg-indigo-50":""}`,children:[n.jsx("div",{className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",onClick:Gt=>{Gt.stopPropagation(),sf(st.id)},children:St?n.jsx(Fs,{className:"w-3 h-3 text-slate-500"}):n.jsx(wa,{className:"w-3 h-3 text-slate-500"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`text-xs font-medium ${st.isRead?"text-slate-600":"text-slate-900"}`,children:st.sender||st.email}),!st.isRead&&n.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(st.to?.length>0||st.cc?.length>0)&&n.jsxs("span",{className:"text-xs text-slate-400",children:[st.to?.length>0&&`To: ${st.to.slice(0,2).map(Gt=>Gt.split("@")[0]).join(", ")}${st.to.length>2?"...":""}`,st.cc?.length>0&&` CC: ${st.cc.slice(0,2).map(Gt=>Gt.split("@")[0]).join(", ")}${st.cc.length>2?"...":""}`]})]}),st.lastMessage&&!St&&n.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:af(st.lastMessage,100)})]}),n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap flex-shrink-0",children:st.timestamp})]}),St&&n.jsxs("div",{className:"px-4 pb-3 pt-1 bg-white border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[n.jsx("span",{className:"font-medium",children:st.sender||st.email}),n.jsx("span",{className:"text-slate-400",children:""}),n.jsx("span",{children:st.timestamp})]}),n.jsx("button",{type:"button",onClick:()=>eo(st),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"View full email "})]}),n.jsx("div",{className:"text-xs text-slate-700 mt-2",children:n.jsx(k8,{content:st.lastMessage||"No content"})}),(st.to?.length>0||st.cc?.length>0||st.bcc?.length>0)&&n.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 text-xs text-slate-500",children:[st.to?.length>0&&n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"font-medium",children:"To:"})," ",st.to.join(", ")]}),st.cc?.length>0&&n.jsxs("div",{className:"mb-1",children:[n.jsx("span",{className:"font-medium",children:"CC:"})," ",st.cc.join(", ")]}),st.bcc?.length>0&&n.jsxs("div",{children:[n.jsx("span",{className:"font-medium",children:"BCC:"})," ",st.bcc.join(", ")]})]})]})]},st.id)})})]},L.threadId)}),or&&n.jsx("li",{className:"px-4 py-4 pb-6",ref:Hn,children:fr?n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx(gt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):n.jsx("button",{type:"button",onClick:mn,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`threads-${Or||"all"}`):n.jsxs("ul",{ref:ma,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[ro.map(L=>n.jsx("li",{children:n.jsxs("div",{role:M?void 0:"button",tabIndex:M?void 0:0,onKeyDown:he=>{!M&&(he.key==="Enter"||he.key===" ")&&(he.preventDefault(),eo(L))},onClick:()=>!M&&eo(L),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${N?.id===L.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[M&&n.jsx("input",{type:"checkbox",checked:qa.has(L.id),onChange:()=>Ul(L.id),onClick:he=>he.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("div",{className:"flex-shrink-0 mt-0.5",children:n.jsx(Xs,{src:void 0,alt:L.sender||L.email||"",fallbackText:L.sender||L.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),n.jsx("div",{className:"flex-1 min-w-0",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[n.jsx("span",{className:`truncate font-medium ${L.isRead?"text-slate-600":"text-slate-900"}`,children:L.subject||"(No subject)"}),L.isStarred&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(yf,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),L.syncStatus?.starredStatus&&Ad(L.syncStatus.starredStatus)]}),L.attachments&&L.attachments.length>0&&n.jsx(J0,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${L.attachments.length} attachment(s)`}),L.priority&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${L.priority==="high"?"bg-red-100 text-red-700":L.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:L.priority==="high"?"High":L.priority==="low"?"Low":"Medium"}),L.threadStatus&&L.threadStatus!=="active"&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${L.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":L.threadStatus==="pending"?"bg-amber-100 text-amber-700":L.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:L.threadStatus.charAt(0).toUpperCase()+L.threadStatus.slice(1)}),L.owner&&Ln.find(he=>he.id===L.owner)&&n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:Ln.find(he=>he.id===L.owner)?.name||"Assigned"}),L.labels&&L.labels.length>0&&n.jsxs(n.Fragment,{children:[L.labels.slice(0,3).map(he=>{const ye=Ar.find(Qe=>Qe.id===he);return ye?n.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",title:ye.name,children:ye.name},he):null}),L.labels.length>3&&n.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",children:["+",L.labels.length-3]})]})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-0 truncate",children:L.sender||L.email}),(L.accountEmail||L.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[L.accountOwnerName&&n.jsxs("span",{className:"text-slate-500",children:["via ",L.accountOwnerName]}),L.accountEmail&&n.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:L.accountEmail})]}),L.lastMessage&&n.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:af(L.lastMessage,80)})]})}),n.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:L.timestamp}),!L.isRead&&n.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!M&&n.jsx(wa,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]})},L.id)),or&&n.jsx("li",{ref:Hn,className:"px-4 py-4 pb-6",children:fr?n.jsxs("div",{className:"flex items-center justify-center py-4",children:[n.jsx(gt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):n.jsx("button",{type:"button",onClick:mn,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`list-${Or||"all"}`)}),n.jsx("div",{className:"flex-1 min-h-[200px] lg:min-h-[400px] flex flex-col border border-slate-200 rounded-xl bg-white overflow-hidden min-w-0 max-h-full",children:B?n.jsx("div",{className:"flex-1 flex items-center justify-center py-16",children:n.jsx(gt,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):N?n.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch"},children:[n.jsxs("div",{className:"p-3 border-b border-slate-100 flex flex-col gap-2 overflow-visible",children:[n.jsx("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h2",{className:"text-base font-semibold text-slate-900 break-words",children:N.subject||"(No subject)"}),n.jsxs("p",{className:"text-xs text-slate-500 mt-0.5 flex items-center gap-2 flex-wrap",children:[n.jsx("span",{className:"break-words",children:N.sender||N.email}),n.jsx("span",{children:""}),n.jsx("span",{children:N.timestamp}),N.senderClassification&&n.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded flex-shrink-0 ${N.senderClassification==="internal"?"bg-slate-100 text-slate-700":N.senderClassification==="system"?"bg-slate-200 text-slate-600":"bg-indigo-50 text-indigo-700"}`,children:N.senderClassification==="internal"?"Internal":N.senderClassification==="system"?"System":"Customer"})]}),(N.accountEmail||N.accountOwnerName)&&n.jsxs("p",{className:"text-xs text-slate-400 mt-0.5 flex items-center gap-2 flex-wrap",children:[N.accountOwnerName&&n.jsxs("span",{children:["Synced via ",n.jsx("span",{className:"font-medium text-slate-600",children:N.accountOwnerName})]}),N.accountEmail&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded",children:N.accountEmail})]})]})}),N.linkedRecords&&n.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[N.linkedRecords.contactId&&(()=>{const L=gl.find(he=>he.id===N.linkedRecords?.contactId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg",children:[n.jsx(qi,{className:"w-3 h-3"}),L.name]}):null})(),N.linkedRecords.companyId&&(()=>{const L=du.find(he=>he.id===N.linkedRecords?.companyId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg",children:[n.jsx(dl,{className:"w-3 h-3"}),L.name]}):null})(),N.linkedRecords.dealId&&(()=>{const L=pa.find(he=>he.id===N.linkedRecords?.dealId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-lg",children:[n.jsx(Cl,{className:"w-3 h-3"}),L.title||L.name]}):null})(),N.linkedRecords.projectId&&(()=>{const L=Ic.find(he=>he.id===N.linkedRecords?.projectId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 text-xs font-medium rounded-lg",children:[n.jsx(Yd,{className:"w-3 h-3"}),L.title||L.name]}):null})(),N.linkedRecords.contractId&&(()=>{const L=uu.find(he=>he.id===N.linkedRecords?.contractId);return L?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-50 text-red-700 text-xs font-medium rounded-lg",children:[n.jsx(Qn,{className:"w-3 h-3"}),L.title]}):null})()]}),Sd?n.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-slate-500",children:[n.jsx(gt,{className:"w-3 h-3 animate-spin"}),"Finding matches..."]}):(Dc.contacts.length>0||Dc.companies.length>0)&&n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Suggested links:"}),Dc.contacts.map(L=>n.jsxs("button",{onClick:()=>Ds("contact",L.id),disabled:cs,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[n.jsx(qi,{className:"w-3 h-3"}),L.name,n.jsx(ln,{className:"w-3 h-3"})]},L.id)),Dc.companies.map(L=>n.jsxs("button",{onClick:()=>Ds("company",L.id),disabled:cs,className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:[n.jsx(dl,{className:"w-3 h-3"}),L.name,n.jsx(ln,{className:"w-3 h-3"})]},L.id))]}),n.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 max-w-full",children:[n.jsxs("button",{type:"button",onClick:()=>{_d("contact"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(c0,{className:"w-3 h-3 flex-shrink-0"}),"Link Contact"]}),n.jsxs("button",{type:"button",onClick:()=>{_d("company"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(c0,{className:"w-3 h-3 flex-shrink-0"}),"Link Company"]}),n.jsxs("button",{type:"button",onClick:()=>{_d("deal"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(c0,{className:"w-3 h-3 flex-shrink-0"}),"Link Deal"]}),n.jsxs("button",{type:"button",onClick:()=>{_d("project"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(c0,{className:"w-3 h-3 flex-shrink-0"}),"Link Project"]}),n.jsxs("button",{type:"button",onClick:()=>{_d("contract"),Lc(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(c0,{className:"w-3 h-3 flex-shrink-0"}),"Link Contract"]}),n.jsxs("button",{type:"button",onClick:()=>Ju(!0),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[n.jsx(_i,{className:"w-3 h-3 flex-shrink-0"}),"Create Task"]})]}),N.labels&&N.labels.length>0&&n.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1 max-w-full",children:N.labels.map(L=>{const he=Ar.find(ye=>ye.id===L);return he?n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[n.jsx("span",{className:"truncate max-w-[200px]",children:he.name}),n.jsx("button",{type:"button",onClick:()=>Vo(N.id,L),className:"hover:text-purple-900 flex-shrink-0",title:"Remove label",children:n.jsx(tr,{className:"w-3 h-3"})})]},L):null})}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 max-w-full",children:[n.jsxs("button",{type:"button",disabled:Wi||!i,onClick:async()=>{if(!(!N?.id||!i)){mi(!0),ml([]);try{const he=(await Yse({emailId:N.id,userId:i,useAi:!0,availableLabels:Ar.map(ye=>({id:ye.id,name:ye.name}))}))?.data;he?.suggestedLabels?.length&&(ml(he.suggestedLabels),po(he.suggestionId||null))}catch{ml([])}finally{mi(!1)}}},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50 whitespace-nowrap flex-shrink-0",children:[Wi?n.jsx(gt,{className:"w-3 h-3 animate-spin flex-shrink-0"}):n.jsx(Ri,{className:"w-3 h-3 flex-shrink-0"}),"Suggest labels"]}),mo.length>0&&n.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Suggested:"}),mo.map((L,he)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-800 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[n.jsx("span",{className:"truncate max-w-[150px]",children:L.labelName}),n.jsxs("span",{className:"text-amber-600 text-[10px] flex-shrink-0",children:["(",L.source,")"]}),L.labelId&&n.jsx("button",{type:"button",onClick:()=>{pu(N.id,[L.labelId],[],!0,zu||void 0),ml(ye=>ye.filter((Qe,st)=>st!==he))},className:"hover:bg-amber-100 rounded px-0.5 flex-shrink-0",title:"Add to email",children:n.jsx(ln,{className:"w-3 h-3"})})]},L.labelId||he))]}),n.jsx("div",{className:"mt-1",children:n.jsxs("button",{type:"button",onClick:()=>{ws(N.id),bs(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors",children:[n.jsx(ln,{className:"w-3 h-3"}),N.labels&&N.labels.length>0?"Manage Labels":"Add Labels"]})}),n.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),(N.customTags||[]).map((L,he)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 text-slate-700 text-xs rounded-lg",children:[L,n.jsx("button",{type:"button",onClick:()=>{const ye=(N.customTags||[]).filter((Qe,st)=>st!==he);_v(N.id,{userId:i,customTags:ye}).then(()=>{S(Qe=>Qe?{...Qe,customTags:ye}:null)}).catch(()=>{})},className:"hover:text-red-600",children:n.jsx(tr,{className:"w-3 h-3"})})]},he)),n.jsx("input",{type:"text",placeholder:"Add tag",value:wr,onChange:L=>qr(L.target.value),onKeyDown:L=>{if(L.key==="Enter"&&wr.trim()){const ye=[...N.customTags||[],wr.trim()];_v(N.id,{userId:i,customTags:ye}).then(()=>{S(Qe=>Qe?{...Qe,customTags:ye}:null),qr("")}).catch(()=>{})}},className:"w-24 px-2 py-0.5 text-xs border border-slate-200 rounded-lg"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1.5 border-t border-slate-100",children:[v&&n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("select",{value:N.priority||"medium",onChange:L=>oc(N.id,{priority:L.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Priority",children:[n.jsx("option",{value:"low",children:"Low"}),n.jsx("option",{value:"medium",children:"Medium"}),n.jsx("option",{value:"high",children:"High"})]}),n.jsxs("select",{value:N.threadStatus||"active",onChange:L=>oc(N.id,{threadStatus:L.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Status",children:[n.jsx("option",{value:"active",children:"Active"}),n.jsx("option",{value:"pending",children:"Pending"}),n.jsx("option",{value:"resolved",children:"Resolved"}),n.jsx("option",{value:"archived",children:"Archived"})]}),c&&n.jsxs("select",{value:N.owner||"",onChange:L=>oc(N.id,{owner:L.target.value||null}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[120px]",title:"Assign to",children:[n.jsx("option",{value:"",children:"Unassigned"}),Ln.map(L=>n.jsx("option",{value:L.id,children:L.name||L.email},L.id))]})]}),p&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Bl(N.id,!N.isStarred),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",title:N.isStarred?"Unstar":"Star",children:N.isStarred?n.jsx(yf,{className:"w-4 h-4 text-amber-500 fill-amber-500"}):n.jsx(TU,{className:"w-4 h-4"})}),N.syncStatus?.starredStatus&&n.jsx("div",{className:"flex-shrink-0",children:Ad(N.syncStatus.starredStatus)})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx("button",{type:"button",onClick:()=>Yn(N.id,!N.isRead),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 text-xs font-medium",children:N.isRead?"Mark unread":"Mark read"}),N.syncStatus?.readStatus&&n.jsx("div",{className:"flex-shrink-0",children:Ad(N.syncStatus.readStatus)})]}),m&&n.jsx(n.Fragment,{children:N.threadStatus==="archived"?n.jsxs("button",{type:"button",onClick:()=>qc(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Restore from archive",children:[n.jsx(iv,{className:"w-3 h-3"}),"Restore"]}):n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>So(N.id),className:"px-3 py-1.5 bg-slate-600 text-white text-xs font-medium rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2",title:"Archive email",children:[n.jsx(iv,{className:"w-3 h-3"}),"Archive"]}),N.threadStatus!=="resolved"&&v&&n.jsxs("button",{type:"button",onClick:()=>lc(N.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Mark as resolved",children:[n.jsx(Nn,{className:"w-3 h-3"}),"Resolve"]})]})}),b&&n.jsxs("button",{type:"button",onClick:()=>gu(N.id),className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",title:"Delete email",children:[n.jsx(Lr,{className:"w-3 h-3"}),"Delete"]}),u&&n.jsxs(n.Fragment,{children:[n.jsxs("button",{type:"button",onClick:()=>{Oc("reply"),os([N.email]),pi([]),$s([]),Vi(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),Ss(""),ls(N.accountEmail||Re[0]?.email||""),Dl(!1),Ll(!1),xl(!0)},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[n.jsx(Xl,{className:"w-3 h-3"}),"Reply"]}),n.jsx("button",{type:"button",onClick:()=>{Oc("replyAll");const L=(N.accountEmail||"").toLowerCase(),he=[N.email,...N.to||[],...N.cc||[]].filter((ye,Qe,st)=>{const Mt=ye.toLowerCase();return st.findIndex(St=>St.toLowerCase()===Mt)===Qe&&Mt!==L});os([N.email]),pi(he.filter(ye=>ye.toLowerCase()!==N.email.toLowerCase())),$s([]),Vi(N.subject?.startsWith("Re:")?N.subject:`Re: ${N.subject||""}`),Ss(""),ls(N.accountEmail||Re[0]?.email||""),Dl(!0),Ll(!1),xl(!0)},className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-100 transition-colors",children:"Reply All"})]}),f&&n.jsx("button",{type:"button",onClick:()=>{Oc("forward"),os([]),pi([]),$s([]),Vi(N.subject?.startsWith("Fwd:")||N.subject?.startsWith("Fw:")?N.subject:`Fwd: ${N.subject||""}`);const L=N.body||N.lastMessage||"";Ss(`

--- Forwarded message ---
From: ${N.sender||N.email}
Date: ${N.timestamp}
Subject: ${N.subject}
To: ${N.to?.join(", ")||N.email}

${L}`),ls(N.accountEmail||Re[0]?.email||""),Dl(!1),Ll(!1),xl(!0)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Forward"}),n.jsxs("button",{type:"button",onClick:()=>{if(!i||!N.id)return;const L=(N.body||N.lastMessage||"").replace(/<[^>]+>/g," "),he=`${N.subject||""} ${L}`.toLowerCase(),ye=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Qe;for(const ca of ye){const ni=he.match(ca);if(ni){Qe=ni[0];break}}const st=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Mt;for(const ca of st){const ni=he.match(ca);if(ni){Mt=ni[0];break}}const St=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Gt;for(const ca of St){const ni=he.match(ca);if(ni?.[1]){Gt=ni[1].trim();break}}const Tr=Array.isArray(N.to)?N.to:N.to?[N.to]:[],jn=N.sender||N.from||N.email,la=[...new Set([...Tr,jn].filter(Boolean))];Tn(N.id),Va(N.subject||null),Zs(N.body||N.lastMessage||null),Ro(la.length?la:null),fn({title:N.subject||"Meeting",date:Qe,time:Mt,location:Gt,participants:la,description:(N.body||N.lastMessage||"").substring(0,500)}),Nr(!0)},disabled:!i,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Open schedule meeting modal to review and confirm",children:[n.jsx(Jn,{className:"w-3 h-3"}),"Schedule Meeting"]})]})]}),n.jsxs("div",{className:"p-4 space-y-6",children:[n.jsxs("div",{className:"border-b border-slate-200 pb-6 min-h-[200px]",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Email Content"}),n.jsx("div",{className:"prose prose-slate max-w-none break-words",children:n.jsx(k8,{content:N.body||N.lastMessage||"No content",highlightTerm:at(H).searchText||void 0})})]}),(Uf.length>0||Yu.length>0||sc.length>0)&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Related Items"}),n.jsxs("div",{className:"space-y-3",children:[Uf.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(_i,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Tasks (",Uf.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:Uf.map(L=>n.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg border border-slate-200",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900",children:L.title}),L.status&&n.jsx("span",{className:"text-xs text-slate-500",children:L.status})]},L.id))})]}),Yu.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Yd,{className:"w-4 h-4 text-amber-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Projects (",Yu.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:Yu.map(L=>n.jsxs("div",{className:"p-2 bg-amber-50 rounded-lg border border-amber-200",children:[n.jsx("p",{className:"text-sm font-medium text-amber-900",children:L.title||L.name}),L.status&&n.jsx("span",{className:"text-xs text-amber-600",children:L.status})]},L.id))})]}),sc.length>0&&n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsx(Qn,{className:"w-4 h-4 text-red-500"}),n.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Contracts (",sc.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:sc.map(L=>n.jsxs("div",{className:"p-2 bg-red-50 rounded-lg border border-red-200",children:[n.jsx("p",{className:"text-sm font-medium text-red-900",children:L.title}),L.status&&n.jsx("span",{className:"text-xs text-red-600",children:L.status})]},L.id))})]})]})]}),V.length>0&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(Jn,{className:"w-4 h-4 text-indigo-500"}),n.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Linked Calendar Events (",V.length,")"]})]}),n.jsx("div",{className:"space-y-2",children:V.map(L=>n.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition-colors",children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-1",children:L.title}),n.jsxs("div",{className:"flex flex-col gap-1 text-xs text-indigo-700",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(is,{className:"w-3 h-3"}),n.jsxs("span",{children:[new Date(L.start).toLocaleString()," - ",new Date(L.end).toLocaleString()]})]}),L.location&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Zk,{className:"w-3 h-3"}),n.jsx("span",{children:L.location})]}),L.participants&&L.participants.length>0&&n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(qi,{className:"w-3 h-3"}),n.jsx("span",{children:L.participants.join(", ")})]})]})]}),L.htmlLink&&n.jsx("a",{href:L.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 text-indigo-600 hover:bg-indigo-200 rounded transition-colors",title:"Open in Google Calendar",children:n.jsx(ps,{className:"w-4 h-4"})})]})},L.id))})]}),N.attachments&&N.attachments.length>0&&n.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(J0,{className:"w-4 h-4 text-slate-500"}),n.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Attachments (",N.attachments.length,")"]})]}),n.jsx("div",{className:"grid grid-cols-1 gap-2",children:N.attachments.map((L,he)=>{const ye=L.isDriveFile||L.driveFileId;return n.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${ye?"bg-blue-50/30 border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[ye&&L.iconUrl?n.jsx("img",{src:L.iconUrl,alt:L.filename,className:"w-8 h-8"}):n.jsx("div",{className:`p-2 rounded-lg ${ri(L.mimeType)?"bg-blue-50 text-blue-600":cc(L.mimeType)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:ri(L.mimeType)?n.jsx(Sl,{className:"w-4 h-4"}):cc(L.mimeType)?n.jsx(mc,{className:"w-4 h-4"}):n.jsx(J0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:L.filename}),ye&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:ye?"Google Drive file":`${ya(L.size)}  ${L.mimeType}`})]})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[ye&&L.previewUrl&&n.jsx("a",{href:L.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:n.jsx(ps,{className:"w-4 h-4"})}),!ye&&(ri(L.mimeType)||cc(L.mimeType))&&n.jsx("button",{onClick:()=>Qh(N.id,L.attachmentId,L.filename,L.mimeType),disabled:Zn[`${N.id}-${L.attachmentId}-view`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"View",children:Zn[`${N.id}-${L.attachmentId}-view`]?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(Xd,{className:"w-4 h-4"})}),!ye&&n.jsx("button",{onClick:()=>tf(N.id,L.attachmentId,L.filename),disabled:Zn[`${N.id}-${L.attachmentId}-download`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Download",children:Zn[`${N.id}-${L.attachmentId}-download`]?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(Iu,{className:"w-4 h-4"})}),ye&&L.downloadUrl&&n.jsx("a",{href:L.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-indigo-100 text-indigo-600 transition-colors",title:"Download",children:n.jsx(Iu,{className:"w-4 h-4"})})]})]},L.attachmentId||he)})})]}),N.attachments&&N.attachments.some(L=>(L.isDriveFile||L.driveFileId)&&L.previewUrl&&(L.mimeType?.includes("google-apps")||L.mimeType?.includes("document")||L.mimeType?.includes("spreadsheet")||L.mimeType?.includes("presentation")))&&n.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[n.jsx(mc,{className:"w-4 h-4 text-blue-500"}),n.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Embedded Documents"})]}),n.jsx("div",{className:"space-y-4",children:N.attachments.filter(L=>(L.isDriveFile||L.driveFileId)&&L.previewUrl&&(L.mimeType?.includes("google-apps")||L.mimeType?.includes("document")||L.mimeType?.includes("spreadsheet")||L.mimeType?.includes("presentation"))).map((L,he)=>{const ye=L.previewUrl?.replace("/edit","/preview")||L.previewUrl;return n.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden bg-white",children:[n.jsxs("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[L.iconUrl&&n.jsx("img",{src:L.iconUrl,alt:L.filename,className:"w-5 h-5"}),n.jsx("span",{className:"text-sm font-medium text-slate-900",children:L.filename}),n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),L.previewUrl&&n.jsx("a",{href:L.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-blue-100 text-blue-600 rounded transition-colors",title:"Open in Drive",children:n.jsx(ps,{className:"w-4 h-4"})})]}),n.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:n.jsx("iframe",{src:ye,className:"absolute top-0 left-0 w-full h-full border-0",title:L.filename,allow:"fullscreen"})})]},L.attachmentId||he)})})]}),n.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[n.jsxs("div",{className:"flex items-center justify-between mb-3",children:[n.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4 text-indigo-500"}),"AI Reply Draft"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[lt.length>0&&n.jsx("button",{type:"button",onClick:L=>{L.preventDefault(),L.stopPropagation(),j(()=>Ko(),he=>{})},disabled:Ke,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 disabled:opacity-60",children:Ke?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-3 h-3 animate-spin"}),"Regenerating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(sd,{className:"w-3 h-3"}),"Regenerate"]})}),!et&&n.jsx("button",{type:"button",onClick:L=>{L.preventDefault(),L.stopPropagation(),j(()=>Ko(),he=>{})},disabled:Ke,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-xs font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-60 transition-colors",children:Ke?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-3 h-3 animate-spin"}),"Generating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Ri,{className:"w-3 h-3"}),"Generate Draft"]})})]})]}),lt.length>1&&n.jsxs("div",{className:"mb-3 space-y-2",children:[n.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Select a variation:"}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:lt.map((L,he)=>n.jsxs("button",{type:"button",onClick:()=>{ve(he),mt(y(L.draft))},className:`p-3 rounded-lg border-2 text-left transition-all ${ge===he?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50/30"}`,children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:L.style}),n.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[L.confidence,"%"]})]}),n.jsx("p",{className:"text-[10px] text-slate-500 mb-2",children:L.description}),n.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:n.jsx("div",{className:`h-1.5 rounded-full ${L.confidence>=80?"bg-green-500":L.confidence>=60?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${L.confidence}%`}})})]},he))})]}),et?n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 space-y-3",children:[lt.length>1&&ge!==null&&n.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-indigo-200",children:[n.jsxs("div",{children:[n.jsxs("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:[lt[ge].style," Variation"]}),n.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",lt[ge].description,")"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("span",{className:"text-xs text-slate-500",children:"Confidence:"}),n.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[lt[ge].confidence,"%"]})]})]}),n.jsx("div",{className:"quill-wrapper",children:n.jsx(a1,{ref:L=>{jt.current=L,L&&(bt.current=L.getEditor())},theme:"snow",value:et,onChange:L=>mt(L),modules:$c,formats:$0,placeholder:"Edit your draft..."})}),n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsxs("button",{type:"button",onClick:nf,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[n.jsx(Xl,{className:"w-3 h-3"}),"Copy to Clipboard"]}),n.jsxs("button",{type:"button",onClick:Vf,className:"px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 flex items-center gap-2",children:[n.jsx(ln,{className:"w-3 h-3"}),"Save as Template"]}),n.jsx("button",{type:"button",onClick:()=>{ir(!0),Od()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Templates"}),n.jsx("button",{type:"button",onClick:()=>{mt(null),xt([]),ve(null)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Clear"})]})]}):n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsx("p",{className:"text-xs text-slate-400",children:'Click "Generate Draft" to create AI-powered reply suggestions.'}),n.jsx("button",{type:"button",onClick:()=>{ir(!0),Od()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"View Templates"})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",N?.id&&sr[N.id]&&sr[N.id].length>0&&n.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:sr[N.id].length})]}),l&&n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"relative",style:{position:"relative"},children:[n.jsxs("div",{className:"quill-wrapper",children:[n.jsx("style",{children:`
                          .quill-wrapper .ql-container {
                            border-bottom-left-radius: 0.75rem;
                            border-bottom-right-radius: 0.75rem;
                            font-size: 0.875rem;
                            min-height: 100px;
                          }
                          .quill-wrapper .ql-toolbar {
                            border-top-left-radius: 0.75rem;
                            border-top-right-radius: 0.75rem;
                            border: none;
                            border-bottom: 2px solid #e2e8f0;
                            background: #f8fafc;
                          }
                          .quill-wrapper .ql-editor {
                            min-height: 100px;
                            padding: 1rem;
                          }
                          .quill-wrapper .ql-editor.ql-blank::before {
                            color: #94a3b8;
                            font-style: normal;
                            font-size: 0.875rem;
                          }
                          .quill-wrapper .ql-snow {
                            border: 2px solid #e2e8f0;
                            border-radius: 0.75rem;
                          }
                          .quill-wrapper:focus-within .ql-snow {
                            border-color: #818cf8;
                            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                          }
                        `}),n.jsx(a1,{ref:L=>{pt.current=L,L&&(Ht.current=L.getEditor())},theme:"snow",value:Gr,onChange:Ls,onBlur:()=>{setTimeout(()=>{Na||En(null)},200)},modules:$c,formats:$0,placeholder:"Add a note or comment... (Use @ to mention users)"})]}),Na&&pr.length>0&&n.jsx("div",{className:"absolute top-full mt-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-48 overflow-y-auto",onMouseDown:L=>{L.preventDefault()},children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[n.jsx(wh,{className:"w-3 h-3"}),"Mention User"]}),pr.map(L=>n.jsxs("button",{type:"button",onMouseDown:he=>{he.preventDefault(),he.stopPropagation(),Gf(L)},onClick:he=>{he.preventDefault(),he.stopPropagation()},className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:L.name?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:L.name||"Unknown"}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:L.email||""})]})]},L.id))]})})]}),n.jsxs("div",{className:"relative",ref:Ca,children:[n.jsxs("button",{type:"button",onClick:()=>Cr(!Rt),className:`w-full flex items-center justify-between gap-2 px-4 py-2.5 bg-white border-2 rounded-xl text-sm transition-all ${rr.length>0?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-indigo-200"}`,children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(id,{className:`w-4 h-4 ${rr.length>0?"text-indigo-600":"text-slate-400"}`}),n.jsx("span",{className:`font-medium ${rr.length>0?"text-indigo-900":"text-slate-600"}`,children:rr.length>0?`Marked for ${rr.length} team member${rr.length>1?"s":""}`:"Mark for team member"})]}),rr.length>0&&n.jsx("button",{type:"button",onClick:L=>{L.stopPropagation(),xr([])},className:"p-1 hover:bg-indigo-200 rounded transition-all",children:n.jsx(tr,{className:"w-3 h-3 text-indigo-600"})})]}),Rt&&n.jsx("div",{className:"absolute top-full mt-2 left-0 w-full bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-64 overflow-y-auto",children:n.jsxs("div",{className:"p-2",children:[n.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 mb-2",children:[n.jsx(id,{className:"w-3 h-3"}),"Select Team Members"]}),n.jsx("input",{type:"text",placeholder:"Search team members...",value:Vt,onChange:L=>Ma(L.target.value),className:"w-full px-3 py-2 mb-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-200"}),Ln.filter(L=>L.id!==i&&(Vt===""||L.name?.toLowerCase().includes(Vt.toLowerCase())||L.email?.toLowerCase().includes(Vt.toLowerCase()))).map(L=>{const he=rr.includes(L.id);return n.jsxs("button",{type:"button",onClick:()=>{xr(he?ye=>ye.filter(Qe=>Qe!==L.id):ye=>[...ye,L.id])},className:`w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left ${he?"bg-indigo-50":""}`,children:[n.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-xs ${he?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:L.name?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:L.name||"Unknown"}),n.jsx("p",{className:"text-xs text-slate-400 truncate",children:L.email||""})]}),he&&n.jsx(Nn,{className:"w-4 h-4 text-indigo-600"})]},L.id)})]})})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("label",{className:"flex-1 cursor-pointer group",children:[n.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:kr?n.jsx(Sl,{className:"w-4 h-4"}):n.jsx(kc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:kr?ke?.name||"Image selected":"Attach Image"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),n.jsx("input",{ref:Tt,type:"file",accept:"image/*",onChange:bu,className:"hidden"})]}),n.jsx("button",{onClick:rf,disabled:$e||!Gr.trim()&&!ke,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:$e?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send"]})})]}),kr&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:kr,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),n.jsx("button",{onClick:()=>{Fr(""),ze(null),Tt.current&&(Tt.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:n.jsx(tr,{className:"w-4 h-4"})})]})]}),!l&&n.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-center",children:n.jsx("p",{className:"text-sm text-slate-600",children:"You have read-only access. Contact an admin to add notes or comments."})}),n.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:sr[N?.id]&&sr[N.id]?.length>0?sr[N.id].map(L=>{const he=Xc(o,"shared-inbox:delete-note")&&(zbe(o)||L.userId===i);return n.jsxs("div",{className:`p-4 bg-white border rounded-xl space-y-2 ${(L.markedFor||[]).length>0?"border-indigo-300 bg-indigo-50/30":"border-slate-200"}`,children:[n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:L.userName?.charAt(0)||"U"}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:L.userName}),(L.markedFor||[]).length>0&&n.jsxs("span",{className:"px-1.5 py-0.5 bg-indigo-600 text-white text-[9px] font-bold rounded-full flex items-center gap-1",children:[n.jsx(id,{className:"w-2.5 h-2.5"}),"Marked"]})]}),n.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(L.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),(L.markedFor||[]).length>0&&n.jsxs("p",{className:"text-[10px] text-indigo-600 mt-1",children:["Marked for: ",Ln.filter(ye=>(L.markedFor||[]).includes(ye.id)).map(ye=>ye.name).join(", ")||"Unknown"]})]})]}),he&&n.jsx("button",{onClick:()=>N?.id&&zl(N.id,L.id),disabled:_e===L.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:_e===L.id?n.jsx(gt,{className:"w-4 h-4 text-red-600 animate-spin"}):n.jsx(Lr,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),L.message&&n.jsx("div",{className:"text-sm text-slate-700 leading-relaxed pl-10 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:L.message}}),L.imageUrl&&n.jsx("div",{className:"pl-10",children:n.jsxs("button",{type:"button",onClick:()=>ar({isOpen:!0,imageUrl:L.imageUrl,imageName:L.imageName}),className:"inline-flex items-center gap-2 px-3 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors group",children:[n.jsx(Sl,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-600 transition-colors"}),n.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-indigo-600 transition-colors",children:L.imageName||"View Attachment"})]})})]},L.id)}):n.jsxs("div",{className:"text-center py-8",children:[n.jsx(co,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]})]})]}):n.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[n.jsx(rs,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Select an email to read"})]})})]}),Aa.isOpen&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ar({isOpen:!1,imageUrl:"",imageName:void 0}),children:n.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[n.jsx("button",{onClick:()=>ar({isOpen:!1,imageUrl:"",imageName:void 0}),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:n.jsx(tr,{className:"w-6 h-6"})}),n.jsx("img",{src:Aa.imageUrl,alt:Aa.imageName||"Note attachment",className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:L=>L.stopPropagation()}),Aa.imageName&&n.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg",children:n.jsx("p",{className:"text-sm font-medium text-slate-900",children:Aa.imageName})})]})}),un&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Vr(!1),Kn("")},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Ri,{className:"w-5 h-5 text-indigo-500"}),"Save as Template"]}),n.jsx("button",{onClick:()=>{Vr(!1),Kn("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name"}),n.jsx("input",{type:"text",value:aa,onChange:L=>Kn(L.target.value),onKeyDown:L=>{L.key==="Enter"&&(L.preventDefault(),uc())},placeholder:"Enter template name...",className:"w-full px-4 py-3 border-2 border-slate-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-sm",autoFocus:!0})]}),n.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[n.jsx("button",{onClick:()=>{Vr(!1),Kn("")},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),n.jsxs("button",{onClick:uc,disabled:!aa||!aa.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"Save Template"]})]})]})]})}),Wt&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ir(!1),children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Ri,{className:"w-5 h-5 text-indigo-500"}),"Email Response Templates"]}),n.jsx("button",{onClick:()=>ir(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Kt.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(Ri,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"No templates yet. Create one by saving a draft!"})]}):n.jsx("div",{className:"space-y-3",children:Kt.map(L=>n.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer group",onClick:he=>{he.preventDefault(),he.stopPropagation(),N&&L.content&&(mt(L.content),ir(!1),t("Template loaded"))},children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:L.name}),n.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2",children:[L.content?.replace(/<[^>]*>/g,"").substring(0,100),"..."]}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Created ",new Date(L.createdAt).toLocaleDateString()]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:he=>{he.preventDefault(),he.stopPropagation(),N&&L.content&&(mt(L.content),ir(!1),t("Template loaded"))},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors opacity-0 group-hover:opacity-100",children:"Use"}),n.jsx("button",{onClick:async he=>{he.preventDefault(),he.stopPropagation(),No(L.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:n.jsx(Lr,{className:"w-4 h-4 text-slate-400 hover:text-red-600"})})]})]})},L.id))})})]})}),Pi&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>No(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx($n,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Template?"}),n.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to delete this template? This action cannot be undone."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>No(null),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{const L=Pi;No(null);try{await Nse(L,i),t("Template deleted"),Od()}catch(he){const ye=he?.message||"Failed to delete template";console.error("[INBOX] Error deleting template:",ye),r(ye)}},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-red-600 rounded-xl hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]}),cu&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>$o(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(mc,{className:"w-5 h-5 text-blue-600"}),"Attach from Google Drive"]}),n.jsx("button",{onClick:()=>$o(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"text",value:gi,onChange:L=>Gu(L.target.value),onKeyDown:L=>{L.key==="Enter"&&Td(gi)},placeholder:"Search Drive files...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"}),n.jsx("button",{onClick:()=>Td(gi),disabled:Fl,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:Fl?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):"Search"})]}),Fl&&jd.length===0?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):jd.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(mc,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500",children:"No files found"})]}):n.jsx("div",{className:"space-y-2",children:jd.map(L=>n.jsxs("button",{onClick:()=>Wf(L),className:"w-full flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all text-left",children:[L.iconLink?n.jsx("img",{src:L.iconLink,alt:L.name,className:"w-8 h-8"}):n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:n.jsx(mc,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:L.name}),n.jsxs("p",{className:"text-xs text-slate-500",children:[L.size?ya(L.size):"Drive file","  ",L.mimeType||"Unknown type"]})]}),n.jsx("button",{onClick:he=>{he.stopPropagation(),L.webViewLink&&window.open(L.webViewLink,"_blank")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Open in Drive",children:n.jsx(ps,{className:"w-4 h-4 text-slate-400"})})]},L.id))}),ac&&n.jsx("div",{className:"flex justify-center pt-4",children:n.jsx("button",{onClick:()=>Td(gi,ac),disabled:Fl,className:"px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 disabled:opacity-50",children:Fl?"Loading...":"Load More"})})]})]})})]}),mu&&n.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>ds(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 mx-auto mb-6",children:n.jsx($n,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Discard Email?"}),n.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to discard this email? All unsaved changes will be lost."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>ds(!1),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>{ds(!1),xl(!1),os([]),pi([]),$s([]),Vi(""),Ss(""),Xi(""),Yi(""),Qi("")},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors",children:"Discard"})]})]})})]}),bo&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{ds(!0)},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:ns==="compose"?"Compose Email":ns==="reply"?"Reply":ns==="replyAll"?"Reply All":"Forward"}),n.jsx("button",{onClick:()=>{ds(!0)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[Re.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"From"}),n.jsx("select",{value:ka,onChange:L=>ls(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:Re.map((L,he)=>n.jsxs("option",{value:L.email,children:[L.email," ",L.isCurrentUser?"(You)":`(${L.ownerName})`]},`${L.email}-${L.userId}-${he}`))})]}),Re.length===0&&n.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:"No email accounts available. Please connect a Gmail account or ensure users are configured."}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["To ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px] focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-200",children:[hn.map((L,he)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-medium rounded",children:[L,n.jsx("button",{type:"button",onClick:()=>os(hn.filter((ye,Qe)=>Qe!==he)),className:"hover:text-indigo-900",children:n.jsx(tr,{className:"w-3 h-3"})})]},he)),n.jsx("input",{type:"text",value:Uo,onChange:L=>{const he=L.target.value;if(Xi(he),he.length>0){const ye=gl.filter(Qe=>Qe.email?.toLowerCase().includes(he.toLowerCase())||Qe.name?.toLowerCase().includes(he.toLowerCase())).slice(0,5);Pc(ye),Cs(!0)}else Cs(!1)},onKeyDown:L=>{if(L.key==="Enter"&&Uo.trim()){L.preventDefault();const he=Uo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(he)&&!hn.includes(he)&&(os([...hn,he]),Xi(""),Cs(!1))}else if(L.key==="Backspace"&&Uo===""&&hn.length>0)os(hn.slice(0,-1));else if(L.key==="ArrowDown"&&_s)L.preventDefault(),ea(he=>Math.min(he+1,yo.length-1));else if(L.key==="ArrowUp"&&_s)L.preventDefault(),ea(he=>Math.max(he-1,0));else if(L.key==="Enter"&&_s&&yo[ia]){L.preventDefault();const he=yo[ia];he.email&&!hn.includes(he.email)&&(os([...hn,he.email]),Xi(""),Cs(!1))}else if(L.key===","||L.key===";"){L.preventDefault();const he=Uo.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(he)&&!hn.includes(he)&&(os([...hn,he]),Xi(""),Cs(!1))}},onBlur:()=>{const L=Uo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)&&!hn.includes(L)&&(os([...hn,L]),Xi(""),Cs(!1))},placeholder:hn.length===0?"Recipients":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]}),_s&&yo.length>0&&n.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:yo.map((L,he)=>n.jsxs("button",{type:"button",onClick:()=>{L.email&&!hn.includes(L.email)&&(os([...hn,L.email]),Xi(""),Cs(!1))},className:`w-full text-left px-3 py-2 hover:bg-indigo-50 text-sm ${he===ia?"bg-indigo-50":""}`,children:[n.jsx("div",{className:"font-medium text-slate-900",children:L.name}),n.jsx("div",{className:"text-xs text-slate-500",children:L.email})]},L.id))})]})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Cc"}),n.jsxs("button",{type:"button",onClick:()=>Dl(!Ti),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Ti?"Hide":"Show"," Cc"]})]}),Ti&&n.jsx("div",{className:"relative",children:n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[ba.map((L,he)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[L,n.jsx("button",{type:"button",onClick:()=>pi(ba.filter((ye,Qe)=>Qe!==he)),className:"hover:text-slate-900",children:n.jsx(tr,{className:"w-3 h-3"})})]},he)),n.jsx("input",{type:"text",value:zs,onChange:L=>{Yi(L.target.value)},onKeyDown:L=>{if(L.key==="Enter"&&zs.trim()){L.preventDefault();const he=zs.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(he)&&!ba.includes(he)&&(pi([...ba,he]),Yi(""))}else if(L.key==="Backspace"&&zs===""&&ba.length>0)pi(ba.slice(0,-1));else if(L.key===","||L.key===";"){L.preventDefault();const he=zs.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(he)&&!ba.includes(he)&&(pi([...ba,he]),Yi(""))}},onBlur:()=>{const L=zs.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)&&!ba.includes(L)&&(pi([...ba,L]),Yi(""))},placeholder:ba.length===0?"Cc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})})]}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center justify-between mb-1",children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Bcc"}),n.jsxs("button",{type:"button",onClick:()=>Ll(!Nd),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Nd?"Hide":"Show"," Bcc"]})]}),Nd&&n.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[Wn.map((L,he)=>n.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[L,n.jsx("button",{type:"button",onClick:()=>$s(Wn.filter((ye,Qe)=>Qe!==he)),className:"hover:text-slate-900",children:n.jsx(tr,{className:"w-3 h-3"})})]},he)),n.jsx("input",{type:"text",value:Oi,onChange:L=>{Qi(L.target.value)},onKeyDown:L=>{if(L.key==="Enter"&&Oi.trim()){L.preventDefault();const he=Oi.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(he)&&!Wn.includes(he)&&($s([...Wn,he]),Qi(""))}else if(L.key==="Backspace"&&Oi===""&&Wn.length>0)$s(Wn.slice(0,-1));else if(L.key===","||L.key===";"){L.preventDefault();const he=Oi.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(he)&&!Wn.includes(he)&&($s([...Wn,he]),Qi(""))}},onBlur:()=>{const L=Oi.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L)&&!Wn.includes(L)&&($s([...Wn,L]),Qi(""))},placeholder:Wn.length===0?"Bcc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Subject ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:Ka,onChange:L=>Vi(L.target.value),placeholder:"Subject",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),Kt.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Template"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("select",{value:Ji||"",onChange:L=>{const he=L.target.value||null;if(bp(he),he){const ye=Kt.find(Qe=>Qe.id===he);ye?.content&&(Ss(ye.content),t("Template loaded"))}},className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"",children:"No template"}),Kt.map(L=>n.jsx("option",{value:L.id,children:L.name},L.id))]}),n.jsx("button",{type:"button",onClick:()=>ir(!0),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-1",title:"Manage templates",children:n.jsx(Ri,{className:"w-4 h-4"})})]})]}),ns==="compose"&&n.jsxs("div",{children:[n.jsxs("button",{type:"button",onClick:()=>{Fc(!$f),!$f&&!Ml&&Ka&&hn.length>0&&to()},className:"w-full px-4 py-2.5 border-2 border-dashed border-indigo-200 rounded-lg text-sm font-medium text-indigo-600 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center justify-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4"}),$f?"Hide AI Suggestions":"Get AI Draft Suggestions"]}),$f&&n.jsx("div",{className:"mt-3 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:Zu?n.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-700",children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Generating AI draft..."]}):Ml?n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"flex items-start justify-between gap-2",children:[n.jsx("p",{className:"text-xs font-medium text-indigo-900",children:"AI Draft Suggestion:"}),n.jsx("button",{type:"button",onClick:to,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Regenerate"})]}),n.jsx("div",{className:"p-3 bg-white border border-indigo-200 rounded-lg text-sm text-slate-700 max-h-48 overflow-y-auto",children:n.jsx("div",{dangerouslySetInnerHTML:{__html:Ml}})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{Ss(Ml||""),t("AI draft inserted")},className:"flex-1 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Use This Draft"}),n.jsx("button",{type:"button",onClick:()=>{const L=Ml?.replace(/<[^>]+>/g,"")||"";navigator.clipboard.writeText(L),t("Draft copied to clipboard")},className:"px-3 py-2 border border-indigo-300 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors",children:"Copy"})]})]}):n.jsx("p",{className:"text-xs text-indigo-600",children:"Enter a subject and recipient to generate AI draft suggestions."})})]}),Bo.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Signature"}),n.jsxs("select",{value:Bo.find(L=>L.content===Ki)?.id||"",onChange:L=>{const he=Bo.find(ye=>ye.id===L.target.value);Pl(he?.content||"")},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"",children:"No signature"}),Bo.map(L=>n.jsxs("option",{value:L.id,children:[L.name," ",L.isDefault?"(Default)":""]},L.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Message ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("div",{className:"quill-wrapper",children:[n.jsx("style",{children:`
                    .quill-wrapper .ql-container {
                      border-bottom-left-radius: 0.75rem;
                      border-bottom-right-radius: 0.75rem;
                      font-size: 0.875rem;
                      min-height: 300px;
                    }
                    .quill-wrapper .ql-toolbar {
                      border-top-left-radius: 0.75rem;
                      border-top-right-radius: 0.75rem;
                      border: none;
                      border-bottom: 2px solid #e2e8f0;
                      background: #f8fafc;
                    }
                    .quill-wrapper .ql-editor {
                      min-height: 300px;
                      padding: 1rem;
                    }
                    .quill-wrapper .ql-editor.ql-blank::before {
                      color: #94a3b8;
                      font-style: normal;
                      font-size: 0.875rem;
                    }
                    .quill-wrapper .ql-snow {
                      border: 2px solid #e2e8f0;
                      border-radius: 0.75rem;
                    }
                    .quill-wrapper:focus-within .ql-snow {
                      border-color: #818cf8;
                      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                    }
                  `}),n.jsx(a1,{ref:L=>{ot.current=L},theme:"snow",value:Xa,onChange:L=>{Ss(L)},modules:$c,formats:$0,placeholder:"Compose your message..."})]}),Ki&&n.jsxs("div",{className:"mt-2 p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[n.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Signature:"}),n.jsx("div",{dangerouslySetInnerHTML:{__html:Ki}})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Attachments"}),n.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[n.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:n.jsx(J0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-medium text-slate-900",children:"Add Attachment"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"Max 25MB per file"})]}),n.jsx("input",{ref:qo,type:"file",multiple:!0,onChange:q0,className:"hidden"})]}),n.jsxs("button",{type:"button",onClick:()=>{$o(!0),Gu(""),Td()},className:"px-4 py-3 bg-white border-2 border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center gap-2",title:"Attach from Google Drive",children:[n.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:n.jsx(mc,{className:"w-4 h-4"})}),n.jsx("span",{className:"text-xs font-medium text-slate-900 hidden sm:inline",children:"Drive"})]})]}),On.length>0&&n.jsx("div",{className:"mt-3 space-y-2",children:On.map(L=>n.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${L.isDriveFile?"bg-blue-50/30 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[L.isDriveFile&&L.driveIconLink?n.jsx("img",{src:L.driveIconLink,alt:"Drive file",className:"w-8 h-8"}):n.jsx("div",{className:`p-2 rounded-lg ${ri(L.file.type)?"bg-blue-50 text-blue-600":cc(L.file.type)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:ri(L.file.type)?n.jsx(Sl,{className:"w-4 h-4"}):cc(L.file.type)?n.jsx(mc,{className:"w-4 h-4"}):n.jsx(J0,{className:"w-4 h-4"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:L.file.name}),L.isDriveFile&&n.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("p",{className:"text-xs text-slate-500",children:L.isDriveFile?"Google Drive file":`${ya(L.file.size)}  ${L.file.type}`}),Ho[L.id]!==void 0&&Ho[L.id]<100&&n.jsxs("div",{className:"flex-1 max-w-[100px]",children:[n.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:n.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${Ho[L.id]}%`}})}),n.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:[Ho[L.id],"%"]})]})]})]}),L.isDriveFile&&L.driveWebViewLink&&n.jsx("a",{href:L.driveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:n.jsx(ps,{className:"w-4 h-4"})}),L.preview&&!L.isDriveFile&&n.jsx("button",{type:"button",onClick:()=>{Ra({isOpen:!0,emailId:"",attachmentId:L.id,filename:L.file.name,mimeType:L.file.type,url:L.preview})},className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors",title:"Preview",children:n.jsx(Xd,{className:"w-4 h-4"})}),n.jsx("button",{type:"button",onClick:()=>$l(L.id),className:"p-2 rounded-lg hover:bg-red-50 text-red-600 transition-colors",title:"Remove",children:n.jsx(tr,{className:"w-4 h-4"})})]},L.id))})]})]}),n.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:()=>{ds(!0)},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),ns==="compose"&&n.jsxs("button",{type:"button",onClick:async()=>{Wo(!0),await Ts()},className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2",children:[n.jsx(mc,{className:"w-4 h-4"}),"Load Drafts"]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{type:"button",onClick:za,disabled:ta||!Ka||!Xa,className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ta?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(mc,{className:"w-4 h-4"}),"Save Draft"]})}),ns==="compose"&&n.jsxs("button",{type:"button",onClick:()=>{if(!hn.length||!Ka||!Xa){r("Please fill in all required fields (To, Subject, Message)");return}As(!0)},className:"px-4 py-2 border border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[n.jsx(is,{className:"w-4 h-4"}),"Schedule"]}),ns==="compose"&&n.jsxs("button",{type:"button",onClick:async()=>{if(!i||hn.length===0||!Ka||!Xa){r("Please fill in all required fields (To, Subject, Message)");return}const L=Xa.replace(/<[^>]+>/g," ").toLowerCase(),he=`${Ka} ${L}`,ye=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(monday|tuesday|wednesday|thursday|friday|saturday|sunday),?\s+(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Qe;for(const Tr of ye){const jn=he.match(Tr);if(jn){Qe=jn[0];break}}const st=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Mt;for(const Tr of st){const jn=he.match(Tr);if(jn){Mt=jn[0];break}}const St=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Gt;for(const Tr of St){const jn=he.match(Tr);if(jn&&jn[1]){Gt=jn[1].trim();break}}fn({title:Ka,date:Qe,time:Mt,location:Gt,participants:hn,description:Xa.substring(0,500)}),Tn(null),Nr(!0)},disabled:yt||!i||hn.length===0||!Ka,className:"px-4 py-2 bg-indigo-50 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Schedule a meeting",children:[yt?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(Jn,{className:"w-4 h-4"}),"Schedule Meeting"]}),d?n.jsx("button",{type:"button",onClick:async()=>{if(!i||hn.length===0||!Ka||!Xa){r("Please fill in all required fields (To, Subject, Message)");return}ti(!0);try{let L=Xa;Ki&&(L+=`<br><br>${Ki}`);const he=await Promise.all(On.filter(Qe=>!Qe.isDriveFile).map(async Qe=>new Promise((st,Mt)=>{const St=new FileReader;St.onload=()=>{const Gt=St.result.split(",")[1];st({filename:Qe.file.name,content:Gt,type:Qe.file.type})},St.onerror=Mt,St.readAsDataURL(Qe.file)}))),ye=On.filter(Qe=>Qe.isDriveFile&&Qe.driveWebViewLink);if(ye.length>0&&ns==="compose"){let Qe='<br><br><div style="border-top: 1px solid #e2e8f0; padding-top: 12px; margin-top: 12px;"><p style="font-size: 12px; color: #64748b; margin-bottom: 8px;"><strong>Attached from Google Drive:</strong></p><ul style="margin: 0; padding-left: 20px;">';ye.forEach(st=>{Qe+=`<li style="margin-bottom: 4px;"><a href="${st.driveWebViewLink}" target="_blank" style="color: #4f46e5; text-decoration: none;">${st.file.name}</a></li>`}),Qe+="</ul></div>",L+=Qe}if(ns==="reply"||ns==="replyAll")await kse({emailId:N?.id||"",userId:i,accountEmail:ka||Re[0]?.email,body:L,replyAll:ns==="replyAll",attachments:he.length>0?he:void 0}),t("Reply sent successfully");else if(ns==="forward")await Sse({emailId:N?.id||"",userId:i,accountEmail:ka||Re[0]?.email,to:hn,cc:ba.length>0?ba:void 0,bcc:Wn.length>0?Wn:void 0,body:L,attachments:he.length>0?he:void 0}),t("Email forwarded successfully");else{const st=(await jse({userId:i,accountEmail:ka||Re[0]?.email,to:hn,cc:ba.length>0?ba:void 0,bcc:Wn.length>0?Wn:void 0,subject:Ka,body:L,attachments:he.length>0?he:void 0}))?.data?.id;if(st){const Mt=On.filter(St=>St.isDriveFile&&St.driveFileId);for(const St of Mt)try{await jI({userId:i,emailId:st,fileId:St.driveFileId,fileName:St.file.name,fileMimeType:St.file.type,webViewLink:St.driveWebViewLink,webContentLink:void 0,iconLink:St.driveIconLink})}catch(Gt){console.error("Failed to attach Drive file:",Gt)}}t("Email sent successfully")}On.forEach(Qe=>{Qe.preview&&URL.revokeObjectURL(Qe.preview)}),xl(!1),os([]),pi([]),$s([]),Vi(""),Ss(""),Ta([]),Xi(""),Yi(""),Qi(""),$o(!1),await Sn()}catch(L){const he=w(L,"Failed to send email");r(he)}finally{ti(!1)}},disabled:Il||hn.length===0||!Ka||!Xa||Re.length===0,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Il?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-4 h-4"}),ns==="reply"||ns==="replyAll"?"Send Reply":ns==="forward"?"Forward":"Send"]})}):n.jsxs("div",{className:"px-4 py-2 bg-slate-100 text-slate-500 text-sm font-medium rounded-lg flex items-center gap-2",title:"You don't have permission to send emails. Contact an admin.",children:[n.jsx(Xl,{className:"w-4 h-4"}),"Send (Admin Only)"]})]})]})]})}),nn?.isOpen&&n.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:n.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-[90vh] m-4 flex flex-col bg-white rounded-lg shadow-xl",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[(ri(nn.mimeType)||cc(nn.mimeType))&&n.jsx(Sl,{className:"w-5 h-5 text-indigo-600"}),n.jsx("h3",{className:"text-lg font-semibold text-slate-900 truncate",children:nn.filename})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>{nn.url&&window.URL.revokeObjectURL(nn.url),Ra(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 transition-colors",title:"Close",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("button",{onClick:()=>{N&&nn.url&&tf(nn.emailId,nn.attachmentId,nn.filename)},className:"px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",title:"Download",children:[n.jsx(Iu,{className:"w-4 h-4"}),"Download"]})]})]}),n.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center bg-slate-50",children:nn.url?ri(nn.mimeType)?n.jsx("img",{src:nn.url,alt:nn.filename,className:"max-w-full max-h-full object-contain rounded-lg"}):cc(nn.mimeType)?n.jsx("iframe",{src:nn.url,className:"w-full h-full min-h-[600px] rounded-lg border border-slate-200",title:nn.filename}):n.jsxs("div",{className:"text-center text-slate-500",children:[n.jsx(mc,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),n.jsx("p",{className:"text-sm",children:"Preview not available for this file type"}),n.jsx("button",{onClick:()=>{N&&tf(nn.emailId,nn.attachmentId,nn.filename)},className:"mt-4 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Download File"})]}):n.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"}),n.jsx("p",{className:"text-sm text-slate-500",children:"Loading attachment..."})]})})]})}),ho&&ys&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{bs(!1),ws(null)},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage Labels"}),n.jsx("button",{onClick:()=>{bs(!1),ws(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Re.length>0&&n.jsx("div",{className:"mb-4 pb-4 border-b border-slate-200",children:n.jsxs("button",{onClick:()=>pl(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-50 border-2 border-dashed border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[n.jsx(ln,{className:"w-4 h-4"}),"Create New Label"]})}),dr?n.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[n.jsx(gt,{className:"w-6 h-6 animate-spin text-indigo-600"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Loading labels"})]}):Ar.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"No labels available. Connect Gmail and sync to see labels, or create one below."}),n.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[n.jsxs("button",{type:"button",onClick:()=>$a(!0),className:"inline-flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:[n.jsx(sd,{className:"w-4 h-4"}),"Retry"]}),Re.length>0&&n.jsxs("button",{onClick:()=>pl(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[n.jsx(ln,{className:"w-4 h-4"}),"Create Your First Label"]})]})]}):n.jsx("div",{className:"space-y-2",children:Ar.map(L=>{const ye=Fn.find(Qe=>Qe.id===ys)?.labels?.includes(L.id)||!1;return n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:ye,onChange:Qe=>{ys&&(Qe.target.checked?pu(ys,[L.id],[]):pu(ys,[],[L.id]))},className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),n.jsx("span",{className:"flex-1 text-sm font-medium text-slate-900",children:L.name}),L.type==="system"&&n.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-slate-500 bg-slate-100 rounded",children:"System"})]},L.id)})})]})]})}),gd&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{pl(!1),Mo("")},children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Label"}),n.jsx("button",{onClick:()=>{pl(!1),Mo(""),Ec("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Label Name"}),n.jsx("input",{type:"text",value:Ei,onChange:L=>Mo(L.target.value),placeholder:"e.g., Important, Follow-up, Project X",className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyDown:L=>{if(L.key==="Enter"&&Ei.trim()&&(au||Re.length>0)){const he=au||Re[0].email;jo(Ei.trim(),he)}},autoFocus:!0})]}),Re.length>0&&n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gmail Account"}),n.jsx("select",{value:au||Re[0].email,onChange:L=>Ec(L.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:Re.map(L=>n.jsx("option",{value:L.email,children:L.email},L.email))})]}),n.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[n.jsx("button",{onClick:()=>{pl(!1),Mo(""),Ec("")},className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:()=>{if(Ei.trim()&&Re.length>0){const L=au||Re[0].email;jo(Ei.trim(),L)}},disabled:!Ei.trim()||vd||Re.length===0,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:vd?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4"}),"Create Label"]})})]})]})]})}),Qt&&i&&n.jsx(qbe,{isOpen:Qt,onClose:()=>{Nr(!1),fn(null),Tn(null),Va(null),Zs(null),Ro(null)},userId:i,emailId:sn||void 0,emailSubject:Ga??Ka,emailBody:ks??Xa,participants:qs??hn,extractedDetails:Yr||void 0,onCreateSuccess:()=>{sn&&N?.id===sn&&gk(i,sn).then(L=>{L.success&&L.data&&Ne(L.data)}).catch(()=>{})}}),B0&&ic&&N&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Link to ",ic.charAt(0).toUpperCase()+ic.slice(1)]}),n.jsx("button",{onClick:()=>{Lc(!1),_d(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[ic==="contact"&&n.jsx("div",{className:"space-y-2",children:gl.map(L=>n.jsxs("button",{onClick:()=>Ds("contact",L.id),disabled:cs,className:"w-full text-left p-3 bg-slate-50 hover:bg-blue-50 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.name}),n.jsx("p",{className:"text-xs text-slate-500",children:L.email})]},L.id))}),ic==="company"&&n.jsx("div",{className:"space-y-2",children:du.map(L=>n.jsxs("button",{onClick:()=>Ds("company",L.id),disabled:cs,className:"w-full text-left p-3 bg-slate-50 hover:bg-green-50 rounded-lg border border-slate-200 hover:border-green-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.name}),L.industry&&n.jsx("p",{className:"text-xs text-slate-500",children:L.industry})]},L.id))}),ic==="deal"&&n.jsx("div",{className:"space-y-2",children:pa.map(L=>n.jsxs("button",{onClick:()=>Ds("deal",L.id),disabled:cs,className:"w-full text-left p-3 bg-slate-50 hover:bg-purple-50 rounded-lg border border-slate-200 hover:border-purple-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.title||L.name}),L.stage&&n.jsx("p",{className:"text-xs text-slate-500",children:L.stage})]},L.id))}),ic==="project"&&n.jsx("div",{className:"space-y-2",children:Ic.map(L=>n.jsxs("button",{onClick:()=>Ds("project",L.id),disabled:cs,className:"w-full text-left p-3 bg-slate-50 hover:bg-amber-50 rounded-lg border border-slate-200 hover:border-amber-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.title||L.name}),L.status&&n.jsx("p",{className:"text-xs text-slate-500",children:L.status})]},L.id))}),ic==="contract"&&n.jsx("div",{className:"space-y-2",children:uu.map(L=>n.jsxs("button",{onClick:()=>Ds("contract",L.id),disabled:cs,className:"w-full text-left p-3 bg-slate-50 hover:bg-red-50 rounded-lg border border-slate-200 hover:border-red-300 transition-colors disabled:opacity-50",children:[n.jsx("p",{className:"font-medium text-slate-900",children:L.title}),L.status&&n.jsx("p",{className:"text-xs text-slate-500",children:L.status})]},L.id))})]})]})}),vp&&N&&n.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Task from Email"}),n.jsx("button",{onClick:()=>Ju(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),n.jsx("input",{type:"text",defaultValue:N.subject||"Task from Email",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-title"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-priority",defaultValue:"Medium",children:[n.jsx("option",{value:"Low",children:"Low"}),n.jsx("option",{value:"Medium",children:"Medium"}),n.jsx("option",{value:"High",children:"High"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Project (Optional)"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-project",defaultValue:"",children:[n.jsx("option",{value:"",children:"None"}),Ic.map(L=>n.jsx("option",{value:L.id,children:L.title||L.name},L.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Assign To (Optional)"}),n.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-assignee",defaultValue:"",children:[n.jsx("option",{value:"",children:"Unassigned"}),Ln.map(L=>n.jsx("option",{value:L.id,children:L.name||L.email},L.id))]})]}),n.jsx("button",{onClick:()=>{const L=document.getElementById("task-title"),he=document.getElementById("task-priority"),ye=document.getElementById("task-project"),Qe=document.getElementById("task-assignee");Uc({title:L?.value,priority:he?.value,projectId:ye?.value||void 0,assigneeId:Qe?.value||void 0})},className:"w-full px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Task"})]})]})}),Rc&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(is,{className:"w-5 h-5 text-indigo-500"}),"Schedule Send"]}),n.jsx("button",{onClick:()=>{As(!1),Rl("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Date & Time ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"datetime-local",value:vi,onChange:L=>Rl(L.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Timezone"}),n.jsxs("select",{value:Cd,onChange:L=>Zi(L.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[n.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),n.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),n.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),n.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),n.jsx("option",{value:"UTC",children:"UTC"}),n.jsxs("option",{value:Intl.DateTimeFormat().resolvedOptions().timeZone,children:[Intl.DateTimeFormat().resolvedOptions().timeZone," (Local)"]})]})]}),n.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[n.jsx("button",{onClick:()=>{As(!1),Rl("")},className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),n.jsx("button",{onClick:async()=>{if(!vi){r("Please select a date and time");return}if(!i||hn.length===0||!Ka||!Xa){r("Please fill in all required fields");return}try{const L=await Promise.all(On.filter(ye=>!ye.isDriveFile).map(async ye=>new Promise((Qe,st)=>{const Mt=new FileReader;Mt.onload=()=>{const St=Mt.result.split(",")[1];Qe({filename:ye.file.name,content:St,type:ye.file.type})},Mt.onerror=st,Mt.readAsDataURL(ye.file)})));let he=Xa;Ki&&(he+=`<br><br>${Ki}`),await Pse({userId:i,accountEmail:ka||Re[0]?.email,to:hn,cc:ba.length>0?ba:void 0,bcc:Wn.length>0?Wn:void 0,subject:Ka,body:he,scheduledDateTime:vi,timezone:Cd,attachments:L.length>0?L:void 0}),t("Email scheduled successfully"),As(!1),xl(!1),os([]),pi([]),$s([]),Vi(""),Ss(""),Ta([]),Rl("")}catch(L){const he=w(L,"Failed to schedule email");r(he)}},className:"flex-1 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Schedule Send"})]})]})]})}),Yh&&n.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[n.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(mc,{className:"w-5 h-5 text-indigo-500"}),"Gmail Drafts"]}),n.jsx("button",{onClick:()=>{Wo(!1),Hf([])},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:U0?n.jsxs("div",{className:"flex items-center justify-center py-12",children:[n.jsx(gt,{className:"w-8 h-8 text-indigo-500 animate-spin"}),n.jsx("span",{className:"ml-3 text-slate-600",children:"Loading drafts..."})]}):ef.length===0?n.jsxs("div",{className:"text-center py-12",children:[n.jsx(mc,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"No drafts found in Gmail"})]}):n.jsx("div",{className:"space-y-3",children:ef.map(L=>n.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",onClick:()=>{if(L.payload?.headers){const he=L.payload.headers,ye=he.find(St=>St.name==="To"),Qe=he.find(St=>St.name==="Cc"),st=he.find(St=>St.name==="Bcc"),Mt=he.find(St=>St.name==="Subject");ye?.value&&os(ye.value.split(",").map(St=>St.trim())),Qe?.value&&pi(Qe.value.split(",").map(St=>St.trim())),st?.value&&$s(st.value.split(",").map(St=>St.trim())),Mt?.value&&Vi(Mt.value)}if(L.payload?.body?.data)try{const he=atob(L.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));Ss(he)}catch(he){console.error("Failed to decode draft body:",he),r("Failed to decode draft body")}else if(L.payload?.parts){const he=L.payload.parts.find(ye=>ye.mimeType==="text/html");if(he?.body?.data)try{const ye=atob(he.body.data.replace(/-/g,"+").replace(/_/g,"/"));Ss(ye)}catch(ye){console.error("Failed to decode draft body:",ye),r("Failed to decode draft body")}}Wo(!1),t("Draft loaded")},children:n.jsxs("div",{className:"flex items-start justify-between gap-3",children:[n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-semibold text-slate-900 mb-1 truncate",children:L.payload?.headers?.find(he=>he.name==="Subject")?.value||"(No subject)"}),n.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["To: ",L.payload?.headers?.find(he=>he.name==="To")?.value||"No recipients"]}),n.jsxs("p",{className:"text-[10px] text-slate-400",children:["Created ",L.message?.internalDate?new Date(parseInt(L.message.internalDate)).toLocaleString():"Unknown date"]})]}),n.jsx("button",{onClick:he=>{if(he.stopPropagation(),L.payload?.headers){const ye=L.payload.headers,Qe=ye.find(Gt=>Gt.name==="To"),st=ye.find(Gt=>Gt.name==="Cc"),Mt=ye.find(Gt=>Gt.name==="Bcc"),St=ye.find(Gt=>Gt.name==="Subject");Qe?.value&&os(Qe.value.split(",").map(Gt=>Gt.trim())),st?.value&&pi(st.value.split(",").map(Gt=>Gt.trim())),Mt?.value&&$s(Mt.value.split(",").map(Gt=>Gt.trim())),St?.value&&Vi(St.value)}if(L.payload?.body?.data)try{const ye=atob(L.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));Ss(ye)}catch(ye){console.error("Failed to decode draft body:",ye),r("Failed to decode draft body")}else if(L.payload?.parts){const ye=L.payload.parts.find(Qe=>Qe.mimeType==="text/html");if(ye?.body?.data)try{const Qe=atob(ye.body.data.replace(/-/g,"+").replace(/_/g,"/"));Ss(Qe)}catch(Qe){console.error("Failed to decode draft body:",Qe),r("Failed to decode draft body")}}Wo(!1),t("Draft loaded")},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Load"})]})},L.id))})})]})}),At&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Bt(!1),We("")},children:n.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",onClick:L=>L.stopPropagation(),children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:n.jsx(Nn,{className:"w-5 h-5 text-emerald-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Team Connected Accounts"}),n.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:[Re.length," account",Re.length!==1?"s":""," connected"]})]})]}),n.jsx("button",{onClick:()=>{Bt(!1),We("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-4 border-b border-slate-200 shrink-0",children:n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search by email or owner name...",value:Yt,onChange:L=>We(L.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:(()=>{const L=new Set(ut.map(ye=>ye.accountEmail.toLowerCase())),he=Re.filter((ye,Qe,st)=>st.findIndex(Mt=>Mt.email===ye.email&&Mt.userId===ye.userId)===Qe).filter(ye=>{if(!Yt.trim())return!0;const Qe=Yt.toLowerCase();return ye.email.toLowerCase().includes(Qe)||ye.ownerName.toLowerCase().includes(Qe)});return he.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[n.jsx(x0,{className:"w-12 h-12 text-slate-300 mb-3"}),n.jsx("p",{className:"text-slate-600 font-medium text-sm",children:Yt?"No accounts found matching your search":"No accounts connected"}),Yt&&n.jsx("button",{onClick:()=>We(""),className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear search"})]}):n.jsx("div",{className:"space-y-2",children:he.map((ye,Qe)=>{const st=L.has(ye.email.toLowerCase()),Mt=ut.find(St=>St.accountEmail.toLowerCase()===ye.email.toLowerCase());return n.jsxs("div",{className:`flex items-center justify-between p-4 bg-white border rounded-xl transition-all ${ye.isCurrentUser?"border-indigo-300 bg-indigo-50/30":st?"border-amber-300 bg-amber-50/30":"border-slate-200 hover:border-slate-300"}`,children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm shrink-0 ${st?"bg-amber-100 text-amber-600":"bg-indigo-100 text-indigo-600"}`,children:ye.email.charAt(0).toUpperCase()}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[n.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:ye.email}),ye.isCurrentUser&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-[10px] font-bold rounded uppercase shrink-0",children:"You"}),st&&n.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-bold rounded uppercase shrink-0",children:"Filtered"})]}),n.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:ye.ownerName==="Unknown User"?n.jsxs("span",{className:"italic",children:["Account synced from emails  ",new Date(ye.connectedAt).toLocaleDateString()]}):n.jsxs(n.Fragment,{children:[ye.ownerName,"  Connected ",new Date(ye.connectedAt).toLocaleDateString(),!ye.hasToken&&ye.ownerName!=="Unknown User"&&n.jsx("span",{className:"ml-1 text-amber-600",title:"No active token - emails were synced previously",children:""})]})})]})]}),n.jsxs("div",{className:"ml-3 flex items-center gap-2 shrink-0",children:[st?n.jsx("button",{onClick:()=>Mt&&Ja(Mt.id,ye.email),disabled:Jt===ye.email,className:"px-3 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Show emails from this account",children:Jt===ye.email?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Unfiltering..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(Xd,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Show"})]})}):n.jsx("button",{onClick:()=>bi(ye.email),disabled:Jt===ye.email,className:"px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Hide emails from this account",children:Jt===ye.email?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Hiding..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(dU,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Hide"})]})}),ye.isCurrentUser&&ye.hasToken!==!1&&n.jsx("button",{onClick:()=>na(ye.email),disabled:Ct===ye.email,className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Disconnect your account",children:Ct===ye.email?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"}),n.jsx("span",{children:"Disconnecting..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(I8,{className:"w-3.5 h-3.5"}),n.jsx("span",{children:"Remove"})]})}),ye.isCurrentUser&&ye.hasToken===!1&&n.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded",title:"This account has no active token - cannot be disconnected",children:"No Token"})]})]},`${ye.email}-${ye.userId}-${Qe}`)})})})()}),n.jsx("div",{className:"p-4 border-t border-slate-200 shrink-0",children:n.jsxs("button",{onClick:()=>{Bt(!1),Es()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl transition-colors",children:[n.jsx(ln,{className:"w-4 h-4"}),"Connect Your Gmail Account"]})})]})})]}):n.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 text-center",children:[n.jsx(iv,{className:"w-14 h-14 text-slate-300 mb-4"}),n.jsx("p",{className:"text-slate-500 font-medium",children:"Sign in to view Shared Inbox"})]})},Wbe=()=>{const{showSuccess:e,showError:t}=Cn(),[r,a]=D.useState([]),[s,i]=D.useState(!0),[o,l]=D.useState(!1),[c,d]=D.useState({name:"",trigger:"",action:"",description:""}),[u,f]=D.useState(!1),[p,m]=D.useState(null),[b,v]=D.useState(null),[g,w]=D.useState(null),[y,j]=D.useState(null);D.useEffect(()=>{(async()=>{i(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id,B=await fI(I),T=B?.data||B||[];a(Array.isArray(T)?T:[])}catch(I){console.error("[AUTOMATIONS] Failed to fetch automations:",I),t(I.message||"Failed to load automations"),a([])}finally{i(!1)}})()},[]),D.useEffect(()=>{const P=async()=>{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;try{const B=await fI(I),T=B?.data||B||[];a(Array.isArray(T)?T:[])}catch(B){console.error("Failed to refresh automations:",B)}};return window.addEventListener("refresh-automations",P),()=>window.removeEventListener("refresh-automations",P)},[]);const N=async P=>{m(P);try{await Vne(P);const I=r.find(B=>B.id===P);a(B=>B.map(T=>T.id===P?{...T,active:!T.active}:T)),e(`Automation "${I?.name}" ${I?.active?"deactivated":"activated"}.`),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to toggle automation:",I),t(I.message||"Failed to toggle automation")}finally{m(null)}},S=P=>{j(P),w(P.id)},E=async()=>{if(y){v(y.id);try{await Kne(y.id),a(P=>P.filter(I=>I.id!==y.id)),w(null),j(null),e("Automation rule removed."),window.dispatchEvent(new Event("refresh-automations"))}catch(P){console.error("Failed to delete automation:",P),t(P.message||"Failed to delete automation")}finally{v(null)}}},A=async P=>{P.preventDefault(),f(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;await Gne({name:c.name,trigger:c.trigger,action:c.action,description:c.description,active:!0,userId:I||void 0}),f(!1),l(!1),d({name:"",trigger:"",action:"",description:""}),e("Automation recipe created successfully!"),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to create automation:",I),t(I.message||"Failed to create automation"),f(!1)}};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Logistics Automations"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Event-driven workflows and smart triggers"})]}),n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[n.jsx(ln,{className:"w-4 h-4"})," Create Recipe"]})]}),s?n.jsxs("div",{className:"flex items-center justify-center py-20 bg-white border border-slate-200 rounded-2xl",children:[n.jsx(gt,{className:"w-8 h-8 text-indigo-600 animate-spin mb-4"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Loading automations..."})]}):r.length===0?n.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border border-dashed border-slate-300 rounded-2xl text-center",children:[n.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:n.jsx(d1,{className:"w-8 h-8"})}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Automations Found"}),n.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by creating your first automation recipe."}),n.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-sm",children:[n.jsx(ln,{className:"w-4 h-4"}),"Create Your First Automation"]})]}):n.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.map(P=>n.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-6 lg:p-8 shadow-sm hover:shadow-md transition-all flex flex-col lg:flex-row lg:items-center justify-between gap-6 group",children:[n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsx("div",{onClick:()=>N(P.id),className:`w-14 h-14 rounded-2xl flex items-center justify-center cursor-pointer transition-all active:scale-90 ${P.active?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"bg-slate-100 text-slate-400"}`,children:n.jsx(d1,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:P.name}),P.active&&n.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 text-emerald-600 rounded-full text-[9px] font-black uppercase tracking-tighter",children:[n.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"})," Running"]})]}),n.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed max-w-xl",children:P.description})]})]}),n.jsxs("div",{className:"flex items-center gap-6",children:[n.jsxs("div",{className:"hidden sm:flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[n.jsxs("div",{className:"text-right",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Trigger"}),n.jsx("p",{className:"text-xs font-bold text-slate-700",children:P.trigger})]}),n.jsx(To,{className:"w-4 h-4 text-slate-300"}),n.jsxs("div",{className:"text-left",children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Action"}),n.jsx("p",{className:"text-xs font-bold text-indigo-600",children:P.action})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>N(P.id),disabled:p===P.id,className:`p-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed ${P.active?"text-indigo-600 hover:bg-indigo-50":"text-slate-400 hover:bg-slate-50"}`,title:P.active?"Pause Automation":"Activate Automation",children:p===P.id?n.jsx(gt,{className:"w-5 h-5 animate-spin"}):P.active?n.jsx(SU,{className:"w-5 h-5 fill-indigo-600"}):n.jsx(_U,{className:"w-5 h-5"})}),n.jsx("button",{onClick:()=>S(P),disabled:b===P.id,className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Automation",children:b===P.id?n.jsx(gt,{className:"w-5 h-5 animate-spin"}):n.jsx(Lr,{className:"w-5 h-5"})})]})]})]},P.id)),n.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 lg:p-12 text-white relative overflow-hidden group shadow-2xl",children:[n.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[n.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:n.jsx(Ri,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h3",{className:"text-2xl font-bold",children:"Impact AI Copilot"})]}),n.jsx("h2",{className:"text-3xl font-black mb-4 tracking-tight leading-tight",children:"Describe the automation you need, and we'll build it."}),n.jsx("p",{className:"text-slate-400 text-base font-medium mb-8 italic",children:'"When a deal is won, create a project workspace and notify the logistics team."'}),n.jsxs("div",{className:"flex gap-4",children:[n.jsx("input",{type:"text",placeholder:"I want to automate...",className:"flex-1 bg-white/10 border border-white/10 rounded-2xl px-6 py-4 text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50"}),n.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 py-4 rounded-2xl shadow-xl shadow-indigo-900 transition-all active:scale-95 flex items-center gap-2",children:["Generate ",n.jsx(To,{className:"w-4 h-4"})]})]})]}),n.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-indigo-600/10 blur-[120px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none"})]})]}),o&&n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"New Automation Recipe"}),n.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:A,className:"p-6 space-y-4 text-left",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recipe Name"}),n.jsx("input",{required:!0,type:"text",value:c.name,onChange:P=>d({...c,name:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Lead Auto-Reply"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Trigger Event"}),n.jsx("input",{required:!0,type:"text",value:c.trigger,onChange:P=>d({...c,trigger:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., New Contact Created"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Automation Action"}),n.jsx("input",{required:!0,type:"text",value:c.action,onChange:P=>d({...c,action:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Send Welcome Template"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),n.jsx("textarea",{required:!0,value:c.description,onChange:P=>d({...c,description:P.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none resize-none",rows:3,placeholder:"Briefly explain what this does..."})]}),n.jsxs("div",{className:"flex gap-3 pt-4",children:[n.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsxs("button",{type:"submit",disabled:u,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[u?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(cd,{className:"w-4 h-4"}),"Deploy Automation"]})]})]})]})}),g&&y&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>w(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx(w0,{className:"w-6 h-6 text-red-600"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Automation"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5",children:"This action cannot be undone"})]})]}),n.jsx("button",{onClick:()=>w(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("p",{className:"text-sm text-slate-600",children:["Are you sure you want to delete automation ",n.jsxs("span",{className:"font-bold text-slate-900",children:['"',y.name,'"']}),"?"]}),n.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs text-red-700 font-semibold mb-1",children:" Warning:"}),n.jsx("p",{className:"text-xs text-red-600",children:"This will permanently delete the automation rule and all its configurations. This action cannot be undone."})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>w(null),disabled:b===y.id,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:E,disabled:b===y.id,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:b===y.id?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Automation"]})})]})]})]})})]})]})},Gbe=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:a}=Cn(),[s,i]=D.useState("registry"),[o,l]=D.useState([]),[c,d]=D.useState([]),[u,f]=D.useState(!0),[p,m]=D.useState("all"),[b,v]=D.useState("open"),[g,w]=D.useState(null),[y,j]=D.useState(!1),[N,S]=D.useState(!1),[E,A]=D.useState({type:"feature",title:"",description:""}),[P,I]=D.useState({type:null,item:null}),[B,T]=D.useState(null),[_,R]=D.useState(!1),[z,H]=D.useState([]),[Y,J]=D.useState(!1),[re,X]=D.useState(!1),[te,W]=D.useState(null),[O,q]=D.useState(!1),[G,U]=D.useState(""),[K,ae]=D.useState(null),me=e?.role==="Admin",se=async()=>{if(s==="registry"){f(!0);try{const[ce,Ce]=await Promise.all([jae(),_c()]),Xe=(ce.data||[]).map(xe=>{const fe=xe.url||null;let Se=[];return Array.isArray(xe.attachments)&&xe.attachments.length>0&&(Se=xe.attachments.filter(qe=>qe&&(qe.source==="file"||qe.data)).map(qe=>({type:qe.type||"image",data:qe.data||"",filename:qe.filename||"attachment",mimeType:qe.mimeType||"image/jpeg",source:"file"}))),{...xe,url:fe,attachments:Se}});l(Xe),d(Ce.data||[])}catch{a("Failed to synchronize roadmap registry.")}finally{f(!1)}}};D.useEffect(()=>{se();const ce=()=>se();return window.addEventListener("refresh-roadmap",ce),()=>window.removeEventListener("refresh-roadmap",ce)},[s]),D.useEffect(()=>{const ce=Ce=>{Ce.key==="Escape"&&K&&ae(null)};return window.addEventListener("keydown",ce),()=>window.removeEventListener("keydown",ce)},[K]),D.useEffect(()=>{U(g&&g.description||"")},[g]);const le=async()=>{if(!(!g||!me)){q(!0);try{await mj(g.id,{description:G.trim()}),l(ce=>ce.map(Ce=>Ce.id===g.id?{...Ce,description:G.trim()}:Ce)),w(ce=>ce&&{...ce,description:G.trim()}),r("Context updated")}catch{a("Failed to update context")}finally{q(!1)}}},Me=async(ce,Ce)=>{if(me)try{await mj(ce,{status:Ce}),l(Xe=>Xe.map(xe=>xe.id===ce?{...xe,status:Ce}:xe)),g?.id===ce&&w({...g,status:Ce}),r(`Status updated to ${Ce}`)}catch{a("Update failed.")}},ue=async ce=>{if(me){R(!0);try{await pI(ce),l(Ce=>Ce.filter(Xe=>Xe.id!==ce)),g?.id===ce&&w(null),T(null),r("Entry purged from registry.")}catch{a("Purge failed.")}finally{R(!1)}}},Ue=()=>{z.length===de.length?H([]):H(de.map(ce=>ce.id))},Ae=async()=>{if(!me){a("Only admins can delete entries");return}if(z.length===0){a("No items selected");return}J(!0);try{const ce=[...z],Ce=ce.map(Xe=>pI(Xe));await Promise.all(Ce),l(Xe=>Xe.filter(xe=>!ce.includes(xe.id))),g&&ce.includes(g.id)&&w(null),H([]),X(!1),r(`Successfully deleted ${ce.length} entr${ce.length>1?"ies":"y"}`)}catch(ce){console.error("Bulk delete error:",ce),a(ce.message||"Failed to delete entries. Please try again.")}finally{J(!1)}},ie=async ce=>{if(ce.preventDefault(),!E.title||!E.description){a("Title and description are required");return}S(!0);try{const Ce={...E,userId:e?.id||"anonymous",status:"planned"};await sM(Ce),r("Entry added to Strategic Pipeline"),j(!1),A({type:"feature",title:"",description:""}),se()}catch(Ce){console.error("[FEEDBACK] Creation failed:",Ce),a(`Failed to add entry: ${Ce.message||"Unknown error"}`)}finally{S(!1)}},Z=async()=>{if(!P.item||!P.type)return;let ce,Ce;switch(P.type){case"done":ce="done",Ce="Entry marked as done";break;case"archive":ce="canceled",Ce="Entry archived";break;case"in-execution":ce="in-progress",Ce="Entry marked as in execution";break;default:return}try{await mj(P.item.id,{status:ce}),l(Xe=>Xe.map(xe=>xe.id===P.item.id?{...xe,status:ce}:xe)),g?.id===P.item.id&&w({...g,status:ce}),r(Ce),I({type:null,item:null})}catch{a("Failed to update entry status")}},Ee=(ce,Ce="w-4 h-4")=>{switch(ce){case"done":return n.jsx(Nn,{className:`${Ce} text-emerald-500`});case"in-progress":return n.jsx(is,{className:`${Ce} text-blue-500 animate-pulse`});case"postponed":return n.jsx(cU,{className:`${Ce} text-amber-500`});case"canceled":return n.jsx(Ib,{className:`${Ce} text-slate-400`});default:return n.jsx(Kv,{className:`${Ce} text-indigo-400`})}},we=ce=>{switch(ce){case"bug":return"bg-red-50 text-red-600 border-red-100";case"feature":return"bg-indigo-50 text-indigo-600 border-indigo-100";case"idea":return"bg-amber-50 text-amber-600 border-amber-100"}},Oe=(ce,Ce="w-4 h-4")=>{switch(ce){case"bug":return n.jsx(Gv,{className:Ce});case"feature":return n.jsx(Ri,{className:Ce});case"idea":return n.jsx(Vj,{className:Ce})}},de=o.filter(ce=>(b==="open"?ce.status!=="done"&&ce.status!=="canceled":ce.status==="done"||ce.status==="canceled")?p==="all"?!0:ce.type===p:!1);return n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-32 relative h-full",children:[n.jsxs("div",{className:"flex flex-col gap-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Enterprise Roadmap"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Consolidated future trajectory, communication beta, and workflow automation"})]}),n.jsxs("div",{className:"flex bg-white px-5 py-2.5 rounded-[24px] border border-slate-200 shadow-sm w-fit items-center gap-3",children:[n.jsx(Kv,{className:"w-4 h-4 text-indigo-500"}),n.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700",children:"Trajectory Registry"}),n.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Live"})]})]}),s==="registry"&&n.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[n.jsxs("div",{className:"flex items-center gap-3 bg-white p-1.5 rounded-[20px] border border-slate-200 shadow-sm",children:[n.jsx("button",{onClick:()=>{v("open"),H([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${b==="open"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Strategic Pipeline"}),n.jsx("button",{onClick:()=>{v("completed"),H([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${b==="completed"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Archive & Done"})]}),n.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[["all","bug","feature","idea"].map(ce=>n.jsx("button",{onClick:()=>{m(ce),H([])},className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border transition-all ${p===ce?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:ce},ce)),n.jsxs("button",{onClick:()=>{const Ce=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";A({type:Ce,title:"",description:""}),j(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[n.jsx(ln,{className:"w-3 h-3"})," New Entry"]})]})]}),u?n.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[n.jsx(gt,{className:"w-10 h-10 animate-spin text-indigo-600 mb-4"}),n.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Synchronizing Registry..."})]}):de.length===0?n.jsxs("div",{className:"py-32 bg-white rounded-[40px] border border-dashed border-slate-200 text-center flex flex-col items-center justify-center gap-4",children:[n.jsx(i1,{className:"w-16 h-16 text-slate-100"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-lg font-black text-slate-900",children:"No Registry Entries Found"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mb-4",children:"Add a new strategic entry to get started."}),n.jsxs("button",{onClick:()=>{const Ce=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";A({type:Ce,title:"",description:""}),j(!0)},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 mx-auto",children:[n.jsx(ln,{className:"w-4 h-4"})," Add Entry"]})]})]}):n.jsxs(n.Fragment,{children:[de.length>0&&n.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:de.length>0&&z.length===de.length,onChange:ce=>{ce.stopPropagation(),Ue()}}),n.jsx("span",{className:"text-sm font-semibold text-slate-600 cursor-pointer",onClick:ce=>{ce.stopPropagation(),Ue()},children:"Select All Entries"})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:de.map(ce=>{const Ce=c.find(xe=>xe.id===ce.userId),Xe=z.includes(ce.id);return n.jsxs("div",{onClick:()=>{w(ce),W(null)},className:`bg-white rounded-[32px] border ${Xe?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} p-8 shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all group flex flex-col relative cursor-pointer active:scale-[0.98] hover:scale-[1.02] overflow-visible`,children:[n.jsxs("div",{className:"flex justify-between items-start mb-6",children:[n.jsxs("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border ${we(ce.type)} flex items-center gap-1.5`,children:[Oe(ce.type,"w-2.5 h-2.5"),ce.type]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full text-[9px] font-black text-slate-500 uppercase",children:[Ee(ce.status,"w-2.5 h-2.5"),ce.status]}),n.jsxs("div",{className:"flex items-center gap-1.5",onClick:xe=>xe.stopPropagation(),children:[n.jsx("div",{className:`${Xe?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity flex items-center`,children:n.jsx("label",{className:`px-2 py-1 rounded-lg transition-all border flex items-center justify-center cursor-pointer ${Xe?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200 hover:bg-indigo-50/50 hover:border-indigo-200"}`,children:n.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Xe,onChange:xe=>{xe.stopPropagation(),H(fe=>fe.includes(ce.id)?fe.filter(Se=>Se!==ce.id):[...fe,ce.id])},onClick:xe=>{xe.stopPropagation()}})})}),(ce.status==="planned"||ce.status==="in-progress"||ce.status==="postponed")&&n.jsxs(n.Fragment,{children:[ce.status!=="in-progress"&&n.jsx("button",{onClick:xe=>{xe.stopPropagation(),I({type:"in-execution",item:ce})},className:"px-2 py-1 hover:bg-blue-50 rounded-lg text-blue-600 transition-all border border-blue-100 hover:border-blue-200 flex items-center justify-center",title:"Mark as In Execution",children:n.jsx(is,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:xe=>{xe.stopPropagation(),I({type:"done",item:ce})},className:"px-2 py-1 hover:bg-emerald-50 rounded-lg text-emerald-600 transition-all border border-emerald-100 hover:border-emerald-200 flex items-center justify-center",title:"Mark as Done",children:n.jsx(Nn,{className:"w-3.5 h-3.5"})}),n.jsx("button",{onClick:xe=>{xe.stopPropagation(),I({type:"archive",item:ce})},className:"px-2 py-1 hover:bg-slate-100 rounded-lg text-slate-500 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center",title:"Archive",children:n.jsx(Cu,{className:"w-3.5 h-3.5"})})]}),me&&n.jsxs("div",{className:"relative",children:[n.jsx("button",{onClick:xe=>{xe.stopPropagation(),W(te===ce.id?null:ce.id)},className:`px-2 py-1 hover:bg-slate-50 rounded-lg text-slate-400 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center ${te===ce.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,title:"More options",children:n.jsx(Jk,{className:"w-3.5 h-3.5"})}),te===ce.id&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 z-[55]",onClick:xe=>{xe.stopPropagation(),W(null)}}),n.jsxs("div",{className:"absolute right-0 top-full mt-2 w-52 bg-slate-900 rounded-2xl shadow-2xl overflow-hidden z-[60] animate-in fade-in zoom-in-95 duration-200",children:[n.jsx("div",{className:"p-2 border-b border-white/5 text-[9px] font-black text-white/40 uppercase tracking-widest px-4 py-2",children:"Lifecycle Management"}),n.jsxs("div",{className:"overflow-hidden rounded-b-2xl",children:[["planned","in-progress","done","postponed","canceled"].map(xe=>n.jsxs("button",{onClick:fe=>{fe.stopPropagation(),Me(ce.id,xe),W(null)},className:`w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest transition-colors ${ce.status===xe?"text-indigo-400 bg-white/5":"text-slate-300 hover:bg-white/5"}`,children:["Set ",xe]},xe)),n.jsx("button",{onClick:xe=>{xe.stopPropagation(),T(ce),W(null)},className:"w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest text-red-400 border-t border-white/5 hover:bg-red-500 hover:text-white transition-all",children:"Delete Terminal"})]})]})]})]})]})]})]}),n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-3 leading-tight group-hover:text-indigo-600 transition-colors",children:ce.title}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-4 flex-1 line-clamp-3 italic",children:['"',ce.description,'"']}),ce.url&&n.jsx("div",{className:"mb-6",children:n.jsxs("a",{href:ce.url,target:"_blank",rel:"noopener noreferrer",onClick:xe=>xe.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[ce.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?n.jsx(Sl,{className:"w-3 h-3"}):n.jsx(ah,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[120px]",children:ce.url.length>30?`${ce.url.substring(0,30)}...`:ce.url}),n.jsx(ps,{className:"w-3 h-3"})]})}),ce.attachments&&Array.isArray(ce.attachments)&&ce.attachments.length>0&&n.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:ce.attachments.map((xe,fe)=>xe.type==="image"&&xe.data?n.jsxs("button",{type:"button",onClick:Se=>{Se.stopPropagation(),ae({src:xe.data,alt:xe.filename||"Attachment"})},className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(Sl,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[100px]",children:xe.filename||"Screenshot"})]},fe):xe.type==="video"&&xe.data?n.jsxs("a",{href:xe.data,target:"_blank",rel:"noopener noreferrer",onClick:Se=>Se.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(ah,{className:"w-3 h-3"}),n.jsx("span",{className:"truncate max-w-[100px]",children:xe.filename||"Video"}),n.jsx(ps,{className:"w-3 h-3"})]},fe):null)}),n.jsxs("div",{className:"pt-6 border-t border-slate-50 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase shadow-inner group-hover:scale-110 transition-transform",children:Ce?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black text-slate-900",children:Ce?.name||"Observer"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(ce.createdAt).toLocaleDateString()})]})]}),n.jsx(wa,{className:"w-4 h-4 text-slate-200 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]})]},ce.id)})})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-12",children:[{label:"Total Requests",value:o.length,icon:n.jsx(Kv,{className:"w-4 h-4"})},{label:"Bugs Identified",value:o.filter(ce=>ce.type==="bug").length,icon:n.jsx(Gv,{className:"w-4 h-4 text-red-500"})},{label:"Features Shipped",value:o.filter(ce=>ce.status==="done").length,icon:n.jsx(Ri,{className:"w-4 h-4 text-emerald-500"})},{label:"In Execution",value:o.filter(ce=>ce.status==="in-progress").length,icon:n.jsx(is,{className:"w-4 h-4 text-blue-500"})}].map((ce,Ce)=>n.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[n.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400",children:ce.icon}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:ce.label}),n.jsx("p",{className:"text-xl font-black text-slate-900",children:ce.value})]})]},Ce))})]}),s==="registry"&&n.jsxs("div",{className:"mt-10 space-y-4 pb-12",children:[n.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Ri,{className:"w-4 h-4 text-indigo-500"})," Features in Development"]}),n.jsxs("p",{className:"text-slate-500 text-sm max-w-2xl",children:["These confirmed feature requests are currently"," ",n.jsx("span",{className:"font-semibold text-slate-700",children:"in development"}),". You can preview their beta experiences below while the full workflows mature."]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(rs,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Shared Inbox"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Centralize customer conversations and feedback threads for your logistics team."}),n.jsxs("button",{onClick:()=>i("inbox"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 text-indigo-50 flex items-center justify-center",children:n.jsx(d1,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Smart Automations"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-purple-50 text-purple-600",children:"Beta  In Progress"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Automate repetitive logistics workflows and notifications with configurable recipes."}),n.jsxs("button",{onClick:()=>i("automation"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:n.jsx(O8,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Business Card Scanner"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-blue-50 text-blue-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Scan a business card and create contact and company information directly inside the application."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(hh,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn Scanner"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-indigo-50 text-indigo-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Scan a LinkedIn account and create contact and company information directly inside the application."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center",children:n.jsx(Qd,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Source Signals"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Planned"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Source signals, such as recent funding, new hires, M&A, lay-offs, and attach this information to the company card."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center",children:n.jsx(E8,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Dashboards (Sales KPIs)"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Comprehensive sales dashboards with key performance indicators, revenue tracking, and analytics to monitor sales performance."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-600 flex items-center justify-center",children:n.jsx(hU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Gemini Video Transcript"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Connect Gemini video transcripts and meeting sessions to company accounts for automatic note-taking and insights."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-violet-50 text-violet-600 flex items-center justify-center",children:n.jsx(ci,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Playbooks"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Create and manage sales playbooks, best practices, and standardized workflows for your team."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-pink-50 text-pink-600 flex items-center justify-center",children:n.jsx(xU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Client Satisfaction"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Track and manage client satisfaction scores, feedback, and surveys to improve customer relationships."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-50 text-cyan-600 flex items-center justify-center",children:n.jsx(eS,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Product & Service Library"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Centralized library to manage products, services, pricing, and catalog information for your business."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]}),n.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:n.jsx(NU,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Integration"}),n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn DMs & Sales Nav"})]})]}),n.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),n.jsx("p",{className:"text-xs text-slate-500",children:"Integrate LinkedIn direct messages and LinkedIn Sales Navigator to manage conversations and leads directly in the platform."}),n.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",n.jsx(To,{className:"w-3 h-3"})]})]})]})]}),s==="inbox"&&n.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:n.jsx(hB,{currentUser:e})}),s==="automation"&&n.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:n.jsx(Wbe,{})}),K&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>ae(null),children:n.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[n.jsx("button",{onClick:()=>ae(null),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:n.jsx(tr,{className:"w-6 h-6"})}),n.jsx("img",{src:K.src,alt:K.alt,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:ce=>ce.stopPropagation()})]})}),y&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(ln,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"New Registry Entry"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Strategic Pipeline"})]})]}),n.jsx("button",{onClick:()=>{j(!1),A({type:"feature",title:"",description:""})},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(tr,{className:"w-6 h-6 text-slate-400"})})]}),n.jsxs("form",{onSubmit:ie,className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),n.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:n.jsx(Gv,{className:"w-4 h-4"}),label:"Bug",color:"bg-red-50 text-red-600 border-red-200"},{id:"feature",icon:n.jsx(Ri,{className:"w-4 h-4"}),label:"Feature",color:"bg-indigo-50 text-indigo-600 border-indigo-200"},{id:"idea",icon:n.jsx(Vj,{className:"w-4 h-4"}),label:"Idea",color:"bg-amber-50 text-amber-600 border-amber-200"}].map(ce=>n.jsxs("button",{type:"button",onClick:()=>A({...E,type:ce.id}),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all border ${E.type===ce.id?`${ce.color} shadow-md`:"bg-white text-slate-400 border-transparent hover:text-slate-600"}`,children:[ce.icon," ",ce.label]},ce.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"Enter entry title...",value:E.title,onChange:ce=>A({...E,title:ce.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description *"}),n.jsx("textarea",{required:!0,rows:6,placeholder:"Provide detailed context and strategic notes...",value:E.description,onChange:ce=>A({...E,description:ce.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]})]}),n.jsxs("div",{className:"flex gap-4 pt-8 mt-8 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:()=>{j(!1),A({type:"feature",title:"",description:""})},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:N||!E.title||!E.description,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:N?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-5 h-5 animate-spin"})," Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Xl,{className:"w-5 h-5"})," Add to Pipeline"]})})]})]})]})}),g&&n.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>w(null)}),n.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[n.jsx("button",{onClick:()=>w(null),className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:n.jsx(tr,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[n.jsx("div",{className:`w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl ${g.type==="bug"?"bg-red-500 shadow-red-100":g.type==="feature"?"bg-indigo-500 shadow-indigo-100":"bg-amber-500 shadow-amber-100"}`,children:Oe(g.type,"w-8 h-8")}),n.jsxs("div",{children:[n.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border inline-block mb-1.5 ${we(g.type)}`,children:g.type}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:g.title})]})]}),n.jsxs("div",{className:"flex gap-4",children:[n.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[Ee(g.status,"w-5 h-5"),n.jsxs("div",{children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Pipeline Status"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 capitalize",children:g.status.replace("-"," ")})]})]}),n.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[n.jsx(Jn,{className:"w-5 h-5 text-indigo-400"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Submitted On"}),n.jsx("p",{className:"text-xs font-bold text-slate-900",children:new Date(g.createdAt).toLocaleDateString()})]})]})]})]}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center justify-between gap-3",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(co,{className:"w-4 h-4 text-indigo-500"})," Observation Context"]}),me&&n.jsx("button",{type:"button",onClick:le,disabled:O||G.trim()===(g.description||"").trim(),className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-default flex items-center gap-2",children:O?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-3 h-3 animate-spin"})," Saving"]}):n.jsxs(n.Fragment,{children:[n.jsx(Nn,{className:"w-3 h-3"})," Save Context"]})})]}),me?n.jsxs("div",{className:"p-4 bg-slate-950 rounded-[32px] text-indigo-50 relative shadow-2xl",children:[n.jsx("textarea",{rows:4,value:G,onChange:ce=>U(ce.target.value),className:"w-full bg-transparent border-none outline-none resize-none text-sm leading-relaxed placeholder:text-slate-500",placeholder:"Describe the bug, feature, or idea in more detail..."}),n.jsx("div",{className:"pointer-events-none absolute top-0 right-0 w-40 h-40 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]}):n.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group shadow-2xl",children:[n.jsxs("p",{className:"text-lg leading-relaxed italic opacity-90 z-10 relative",children:['"',g.description,'"']}),n.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),g.url&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(c0,{className:"w-4 h-4 text-indigo-500"})," URL Attachment"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:n.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-50 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[g.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?n.jsx(Sl,{className:"w-4 h-4"}):n.jsx(ah,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[200px]",children:g.url.length>40?`${g.url.substring(0,40)}...`:g.url}),n.jsx(ps,{className:"w-4 h-4"})]})})]}),g.attachments&&g.attachments.length>0&&n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(Sl,{className:"w-4 h-4 text-indigo-500"})," File Attachments"]}),n.jsx("div",{className:"flex flex-wrap gap-3",children:g.attachments.map((ce,Ce)=>ce.type==="image"&&ce.data?n.jsxs("button",{type:"button",onClick:()=>ae({src:ce.data,alt:ce.filename||"Attachment"}),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(Sl,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[150px]",children:ce.filename||"Screenshot"})]},Ce):ce.type==="video"&&ce.data?n.jsxs("a",{href:ce.data,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[n.jsx(ah,{className:"w-4 h-4"}),n.jsx("span",{className:"truncate max-w-[150px]",children:ce.filename||"Video"}),n.jsx(ps,{className:"w-4 h-4"})]},Ce):null)})]}),n.jsxs("div",{className:"space-y-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(qi,{className:"w-4 h-4 text-indigo-500"})," Contributor Details"]}),n.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-[32px] flex items-center gap-5",children:[n.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-indigo-600 text-xl font-black shadow-sm border border-slate-200",children:c.find(ce=>ce.id===g.userId)?.name?.charAt(0)||"U"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-black text-slate-900",children:c.find(ce=>ce.id===g.userId)?.name||"Impact Member"}),n.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:[c.find(ce=>ce.id===g.userId)?.role||"Stakeholder","  Enterprise Contributor"]})]})]})]}),me&&n.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"})," Strategic Alignment"]}),n.jsx("div",{className:"grid grid-cols-2 gap-3",children:["planned","in-progress","done","postponed","canceled"].map(ce=>n.jsxs("button",{onClick:()=>Me(g.id,ce),className:`flex items-center gap-2 p-4 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${g.status===ce?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:[Ee(ce,"w-3 h-3"),ce.replace("-"," ")]},ce))})]})]}),n.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[n.jsx("button",{onClick:()=>T(g),className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:n.jsx(Lr,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),n.jsxs("button",{onClick:()=>w(null),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[n.jsx(Nn,{className:"w-5 h-5"})," Dismiss Audit View"]})]})]})]}),P.type&&P.item&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${P.type==="done"?"bg-emerald-50 text-emerald-600":P.type==="in-execution"?"bg-blue-50 text-blue-600":"bg-slate-100 text-slate-600"}`,children:P.type==="done"?n.jsx(Nn,{className:"w-6 h-6"}):P.type==="in-execution"?n.jsx(is,{className:"w-6 h-6"}):n.jsx(Cu,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:P.type==="done"?"Mark as Done?":P.type==="in-execution"?"Mark as In Execution?":"Archive Entry?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:P.type==="done"?"This will move the entry to Archive & Done":P.type==="in-execution"?"This will mark the entry as in progress":"This will archive the entry"})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:P.item.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:P.item.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>I({type:null,item:null}),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:Z,className:`flex-1 py-3 font-black uppercase text-xs tracking-widest rounded-xl transition-all shadow-lg ${P.type==="done"?"bg-emerald-600 text-white hover:bg-emerald-700":P.type==="in-execution"?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:P.type==="done"?"Mark Done":P.type==="in-execution"?"Start Execution":"Archive"})]})]})}),B&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Entry?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entry will be permanently removed from the registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:B.title}),n.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:B.description})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>T(null),disabled:_,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:()=>ue(B.id),disabled:_,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Entry"})]})]})}),z.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:n.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[n.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[n.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:z.length}),"Selected"]}),n.jsx("div",{className:"h-8 w-px bg-white/10"}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:ce=>{if(ce.preventDefault(),ce.stopPropagation(),!me){a("Only admins can delete entries");return}if(z.length===0){a("No items selected");return}X(!0)},disabled:Y,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Y?n.jsx(gt,{className:"w-3.5 h-3.5 animate-spin"}):n.jsx(Lr,{className:"w-3.5 h-3.5"}),"Delete"]}),n.jsx("button",{onClick:()=>H([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:n.jsx(tr,{className:"w-5 h-5"})})]})]})}),re&&z.length>0&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",z.length," Entr",z.length>1?"ies":"y","?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entries will be permanently removed from the registry."})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(ce=>z.includes(ce.id)).slice(0,5).map(ce=>n.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[Oe(ce.type,"w-4 h-4"),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ce.title}),n.jsx("p",{className:"text-[10px] text-slate-500 capitalize",children:ce.type})]})]},ce.id)),z.length>5&&n.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",z.length-5," more"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>X(!1),disabled:Y,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),n.jsx("button",{onClick:ce=>{ce.preventDefault(),ce.stopPropagation(),Ae()},disabled:Y,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Y?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${z.length} Entr${z.length>1?"ies":"y"}`})]})]})})]})},Vbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=Cn(),[a,s]=D.useState([]),[i,o]=D.useState([]),[l,c]=D.useState([]),[d,u]=D.useState(null),[f,p]=D.useState(!0),[m,b]=D.useState(!1),[v,g]=D.useState([]),[w,y]=D.useState(!1),[j,N]=D.useState("select"),[S,E]=D.useState(""),[A,P]=D.useState(!1),[I,B]=D.useState(!1),[T,_]=D.useState([]),[R,z]=D.useState(!1),[H,Y]=D.useState(!1),[J,re]=D.useState(!1),[X,te]=D.useState(!1),[W,O]=D.useState(!1),[q,G]=D.useState(!1),[U,K]=D.useState(""),[ae,me]=D.useState(!1),se=D.useRef(null),[le,Me]=D.useState({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),ue=D.useCallback(async()=>{try{const je=await iM(),Le=je?.data||je||[];c(Array.isArray(Le)?Le:[])}catch{c([{id:"default-1",name:"Travel",isDefault:!0},{id:"default-2",name:"Meals",isDefault:!0},{id:"default-3",name:"Office Supplies",isDefault:!0},{id:"default-4",name:"Software",isDefault:!0},{id:"default-5",name:"Marketing",isDefault:!0},{id:"default-6",name:"Professional Services",isDefault:!0},{id:"default-7",name:"Utilities",isDefault:!0},{id:"default-8",name:"Equipment",isDefault:!0},{id:"default-9",name:"Other",isDefault:!0}])}},[]),Ue=D.useCallback(async()=>{p(!0);try{const je={};v.length===1&&(je.companyId=v[0]);const Le=await kae(je);let Re=Le?.data||Le||[];Re=Array.isArray(Re)?Re:[],v.length>1&&(Re=Re.filter(Je=>v.includes(Je.companyId))),s(Re);try{const Je=await md();o(Je?.data||Je||[])}catch(Je){console.error("[Expenses] Failed to fetch companies:",Je),o([])}}catch(je){console.error("[Expenses] Error fetching expenses:",je),r(je.message||"Failed to load expenses"),s([])}finally{p(!1)}},[e,v,r]);D.useEffect(()=>{ue()},[ue]),D.useEffect(()=>{Ue()},[Ue]),D.useEffect(()=>{const je=()=>Ue();return window.addEventListener("refresh-expenses",je),()=>window.removeEventListener("refresh-expenses",je)},[Ue]);const Ae=je=>i.find(Le=>Le.id===je),ie=je=>{switch(je){case"Approved":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Rejected":return"bg-red-50 text-red-600 border-red-100";default:return"bg-amber-50 text-amber-600 border-amber-100"}},Z=a,Ee={totalExpenses:Z.reduce((je,Le)=>je+(Le.amount||0),0),pendingCount:Z.filter(je=>je.status==="Pending"||!je.status).length,approvedCount:Z.filter(je=>je.status==="Approved").length,thisMonth:Z.filter(je=>{const Le=new Date(je.date),Re=new Date;return Le.getMonth()===Re.getMonth()&&Le.getFullYear()===Re.getFullYear()}).reduce((je,Le)=>je+(Le.amount||0),0)},we=()=>{T.length===Z.length&&Z.length>0?_([]):_(Z.map(je=>je.id))},Oe=(je,Le=1920,Re=1080,Je=.8)=>new Promise((ut,vt)=>{const At=new FileReader;At.onload=Bt=>{const Yt=new Image;Yt.onload=()=>{let We=Yt.width,Ct=Yt.height;We>Ct?We>Le&&(Ct=Ct*Le/We,We=Le):Ct>Re&&(We=We*Re/Ct,Ct=Re);const br=document.createElement("canvas");br.width=We,br.height=Ct;const Jt=br.getContext("2d");if(!Jt){vt(new Error("Failed to create canvas context"));return}Jt.drawImage(Yt,0,0,We,Ct);const Dr=br.toDataURL("image/jpeg",Je);ut(Dr)},Yt.onerror=()=>vt(new Error("Failed to load image")),Yt.src=Bt.target?.result},At.onerror=()=>vt(new Error("Failed to read file")),At.readAsDataURL(je)}),de=async je=>{const Le=je.target.files?.[0];if(Le){if(!Le.type.startsWith("image/")&&!Le.type.includes("pdf")){r("Please select an image or PDF file");return}if(Le.size>10*1024*1024){r("File size must be less than 10MB");return}G(!0);try{if(Le.type.startsWith("image/")){const Re=await Oe(Le,1920,1080,.8);K(Re),Me(Je=>({...Je,receiptFile:Le}))}else{const Re=new FileReader;Re.onload=()=>{K(Re.result),Me(Je=>({...Je,receiptFile:Le}))},Re.readAsDataURL(Le)}}catch(Re){r(Re.message||"Failed to process receipt")}finally{G(!1)}}},ce=async je=>{if(je.preventDefault(),!le.companyId||!le.title||!le.amount||!le.category||!le.date){r("Please fill in all required fields");return}O(!0);try{const Le=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;let Re="",Je="",ut="";le.receiptFile&&(le.receiptFile.type.startsWith("image/"),Re=U,Je=le.receiptFile.name,ut=le.receiptFile.type),await Sae({companyId:le.companyId,title:le.title,amount:parseFloat(le.amount),category:le.category,date:new Date(le.date).toISOString(),description:le.description,status:le.status,receiptUrl:Re||void 0,receiptFilename:Je||void 0,receiptMimeType:ut||void 0,userId:Le}),t("Expense added successfully"),te(!1),Me({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),se.current&&(se.current.value=""),Ue(),window.dispatchEvent(new Event("refresh-expenses"))}catch(Le){r(Le.message||"Failed to add expense")}finally{O(!1)}},Ce=async()=>{if(S.trim()){P(!0);try{const je=await oM({name:S.trim()});if(je?.data){const Le=je.data;c(Re=>[...Re,Le]),Me(Re=>({...Re,category:Le.name})),E(""),y(!1),t("Category added successfully")}}catch(je){je.message?.includes("already exists")||je.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(je.message||"Failed to add category")}finally{P(!1)}}},Xe=async(je,Le)=>{me(!0);try{await _ae(je,{status:Le}),s(Re=>Re.map(Je=>Je.id===je?{...Je,status:Le}:Je)),d&&d.id===je&&u({...d,status:Le}),t(`Expense status updated to ${Le}`),window.dispatchEvent(new Event("refresh-expenses"))}catch(Re){r(Re.message||"Failed to update expense status")}finally{me(!1)}},xe=async()=>{if(d){b(!0);try{await xI(d.id),s(je=>je.filter(Le=>Le.id!==d.id)),u(null),re(!1),t("Expense deleted successfully"),window.dispatchEvent(new Event("refresh-expenses"))}catch(je){r(je.message||"Failed to delete expense")}finally{b(!1)}}},fe=async()=>{const je=[...T];if(je.length!==0){z(!0),Y(!1);try{await Promise.all(je.map(Le=>xI(Le))),s(Le=>Le.filter(Re=>!je.includes(Re.id))),_([]),t(`Successfully deleted ${je.length} expense(s)`),window.dispatchEvent(new Event("refresh-expenses"))}catch{r("Failed to delete some expenses")}finally{z(!1)}}},Se=je=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(je),qe=je=>new Date(je).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return f?n.jsx("div",{className:"flex items-center justify-center min-h-screen",children:n.jsx(gt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):n.jsxs("div",{className:"w-full pt-0 pb-20 px-0",children:[n.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"Expenses"}),n.jsx("p",{className:"text-slate-500 text-sm",children:"Manage company expenses and receipts"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>{N("manage"),y(!0)},className:"px-4 py-3 bg-white text-indigo-600 rounded-xl font-bold text-sm hover:bg-indigo-50 transition-all flex items-center gap-2 border-2 border-indigo-200",children:[n.jsx(Ms,{className:"w-4 h-4"}),"Manage Categories"]}),n.jsxs("button",{onClick:()=>te(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg",children:[n.jsx(ln,{className:"w-5 h-5"}),"Add Expense"]})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Expenses",value:Se(Ee.totalExpenses),icon:n.jsx(Mu,{className:"w-5 h-5"}),color:"text-indigo-600 bg-indigo-50"},{label:"Pending",value:Ee.pendingCount.toString(),icon:n.jsx(is,{className:"w-5 h-5"}),color:"text-amber-600 bg-amber-50"},{label:"Approved",value:Ee.approvedCount.toString(),icon:n.jsx(_i,{className:"w-5 h-5"}),color:"text-emerald-600 bg-emerald-50"},{label:"This Month",value:Se(Ee.thisMonth),icon:n.jsx(Jn,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50"}].map((je,Le)=>n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsx("div",{className:"flex items-center justify-between mb-2",children:n.jsx("div",{className:`p-2 rounded-lg ${je.color}`,children:je.icon})}),n.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:je.label}),n.jsx("p",{className:"text-2xl font-black text-slate-900",children:je.value})]},Le))}),n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(bf,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Filter by Company:"})]}),n.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm font-bold bg-white hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors flex items-center gap-2",children:[n.jsx("span",{children:v.length===0?"All Companies":v.length===1?i.find(je=>je.id===v[0])?.name||"1 Selected":`${v.length} Companies Selected`}),v.length>0&&n.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:v.length})]}),n.jsxs("div",{className:"text-xs text-slate-400 font-bold ml-auto",children:["Showing ",Z.length," expense(s)"]})]}),T.length>0&&n.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-300",children:n.jsxs("div",{className:"bg-slate-900 rounded-full px-6 py-4 shadow-2xl flex items-center gap-4 min-w-[320px]",children:[n.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center flex-shrink-0",children:n.jsx("span",{className:"text-white text-sm font-black",children:T.length})}),n.jsx("span",{className:"text-white text-sm font-bold",children:"Selected"}),n.jsx("div",{className:"w-px h-6 bg-white/20"}),n.jsx("button",{onClick:()=>Y(!0),disabled:R,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 flex-shrink-0",children:R?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"DELETE"]})}),n.jsx("button",{onClick:()=>_([]),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors flex-shrink-0 ml-auto","aria-label":"Dismiss",children:n.jsx(tr,{className:"w-5 h-5 text-white"})})]})}),n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[n.jsxs("div",{className:`lg:col-span-2 space-y-4 ${d?"lg:pr-6":""}`,children:[Z.length>0&&n.jsx("div",{className:"flex items-center gap-3 mb-4",children:n.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:T.length===Z.length&&Z.length>0,onChange:we,className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Select All"})]})}),Z.length===0?n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[n.jsx(Jj,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"No Expenses Found"}),n.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by adding your first expense"}),n.jsxs("button",{onClick:()=>te(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all",children:[n.jsx(ln,{className:"w-5 h-5 inline mr-2"}),"Add Expense"]})]}):Z.map(je=>{const Le=Ae(je.companyId),Re=T.includes(je.id);return n.jsxs("div",{onClick:()=>u(je),className:`bg-white rounded-2xl border ${Re?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:shadow-xl transition-all cursor-pointer p-6 ${d?.id===je.id?"ring-2 ring-indigo-500":""}`,children:[n.jsxs("div",{className:"flex items-start justify-between mb-4",children:[n.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[n.jsx("input",{type:"checkbox",checked:Re,onChange:Je=>{Je.stopPropagation(),_(ut=>Re?ut.filter(vt=>vt!==je.id):[...ut,je.id])},onClick:Je=>Je.stopPropagation(),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0"}),n.jsx(Xs,{src:Le?.logo,fallbackText:Le?.name,className:"w-10 h-10 rounded-xl shrink-0",isAvatar:!1}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("h3",{className:"font-black text-slate-900 text-lg mb-1 truncate",children:je.title}),n.jsx("p",{className:"text-sm text-slate-500 truncate",children:Le?.name||"Unknown Company"})]})]}),n.jsxs("div",{className:"text-right shrink-0 ml-4",children:[n.jsx("p",{className:"text-2xl font-black text-slate-900 mb-1",children:Se(je.amount)}),n.jsxs("select",{value:je.status||"Pending",onChange:Je=>{Je.stopPropagation(),Xe(je.id,Je.target.value)},onClick:Je=>Je.stopPropagation(),disabled:ae,className:`px-2 py-1 rounded-full text-[10px] font-black uppercase border outline-none cursor-pointer transition-all ${ie(je.status||"Pending")} ${ae?"opacity-50 cursor-not-allowed":""}`,children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Ms,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:je.category})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(Jn,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:qe(je.date)})]}),je.receiptUrl&&n.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[n.jsx(Qn,{className:"w-3 h-3"}),n.jsx("span",{className:"font-bold",children:"Receipt"})]})]}),je.description&&n.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:je.description}),n.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[n.jsxs("button",{onClick:Je=>{Je.stopPropagation(),u(je)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Details",n.jsx(wa,{className:"w-3 h-3"})]}),n.jsx("button",{onClick:Je=>{Je.stopPropagation(),u(je),re(!0)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]},je.id)})]}),d&&n.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl border border-slate-200 shadow-xl p-6 sticky top-6 max-h-[calc(100vh-3rem)] overflow-y-auto",children:[n.jsxs("div",{className:"flex items-center justify-between mb-6",children:[n.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Expense Details"}),n.jsx("button",{onClick:()=>u(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Title"}),n.jsx("p",{className:"text-lg font-black text-slate-900",children:d.title})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Company"}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(Xs,{src:Ae(d.companyId)?.logo,fallbackText:Ae(d.companyId)?.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Ae(d.companyId)?.name||"Unknown"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Amount"}),n.jsx("p",{className:"text-2xl font-black text-indigo-600",children:Se(d.amount)})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Category"}),n.jsx("span",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold",children:d.category})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),n.jsxs("select",{value:d.status||"Pending",onChange:je=>{const Le=je.target.value;Xe(d.id,Le)},disabled:ae,className:`w-full px-3 py-1.5 rounded-lg text-sm font-bold border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${ie(d.status||"Pending")} ${ae?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]}),ae&&n.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[n.jsx(gt,{className:"w-3 h-3 animate-spin text-indigo-600"}),n.jsx("span",{className:"text-xs text-slate-500",children:"Updating..."})]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Date"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:qe(d.date)})]}),d.description&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),n.jsx("p",{className:"text-sm text-slate-600",children:d.description})]}),d.receiptUrl&&n.jsxs("div",{children:[n.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Receipt"}),n.jsx("div",{className:"space-y-2",children:d.receiptMimeType?.startsWith("image/")?n.jsxs("div",{className:"relative group",children:[n.jsx("img",{src:d.receiptUrl,alt:d.receiptFilename||"Receipt",className:"w-full rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const je=window.open();je&&je.document.write(`<img src="${d.receiptUrl}" style="max-width:100%;height:auto;" />`)}}),n.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:n.jsx(Xd,{className:"w-6 h-6 text-white drop-shadow-lg"})})]}):n.jsxs("a",{href:d.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors",children:[n.jsx(Qn,{className:"w-5 h-5 text-indigo-600"}),n.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1 truncate",children:d.receiptFilename||"Receipt"}),n.jsx(Iu,{className:"w-4 h-4 text-slate-400"})]})})]}),n.jsx("div",{className:"pt-4 border-t border-slate-200",children:n.jsx("button",{onClick:()=>{u(d),re(!0)},disabled:m,className:"w-full px-4 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Expense"]})})})]})]})]}),X&&n.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:n.jsx(Jj,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Add Expense"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Company Expense Management"})]})]}),n.jsx("button",{onClick:()=>{te(!1),Me({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),se.current&&(se.current.value="")},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:n.jsx(tr,{className:"w-6 h-6 text-slate-400"})})]}),n.jsxs("form",{onSubmit:ce,className:"p-8 space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company *"}),n.jsxs("select",{required:!0,value:le.companyId,onChange:je=>Me({...le,companyId:je.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[n.jsx("option",{value:"",children:"Select Company"}),i.map(je=>n.jsx("option",{value:je.id,children:je.name},je.id))]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Title *"}),n.jsx("input",{required:!0,type:"text",placeholder:"Expense title...",value:le.title,onChange:je=>Me({...le,title:je.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Amount *"}),n.jsx("input",{required:!0,type:"number",step:"0.01",min:"0",placeholder:"0.00",value:le.amount,onChange:je=>Me({...le,amount:je.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Category *"}),n.jsxs("button",{type:"button",onClick:()=>{N("select"),y(!0)},className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50 text-left flex items-center justify-between ${le.category?"text-slate-900":"text-slate-400"}`,children:[n.jsx("span",{children:le.category||"Select Category"}),n.jsx(wa,{className:"w-4 h-4 text-slate-400"})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Date *"}),n.jsx("input",{required:!0,type:"date",value:le.date,onChange:je=>Me({...le,date:je.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Status"}),n.jsxs("select",{value:le.status,onChange:je=>Me({...le,status:je.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[n.jsx("option",{value:"Pending",children:"Pending"}),n.jsx("option",{value:"Approved",children:"Approved"}),n.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),n.jsx("textarea",{rows:3,placeholder:"Additional details...",value:le.description,onChange:je=>Me({...le,description:je.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),n.jsxs("div",{className:"md:col-span-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Receipt (Image/PDF)"}),n.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:q?n.jsx(gt,{className:"w-5 h-5 animate-spin"}):U?n.jsx(Sl,{className:"w-5 h-5"}):n.jsx(kc,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:U?le.receiptFile?.name||"Receipt uploaded":"Upload Receipt"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, PDF (Max 10MB)"})]}),n.jsx("input",{ref:se,type:"file",accept:"image/*,.pdf",onChange:de,disabled:q,className:"hidden"})]}),U&&le.receiptFile?.type.startsWith("image/")&&n.jsx("div",{className:"mt-3",children:n.jsx("img",{src:U,alt:"Receipt preview",className:"w-full max-h-48 object-contain rounded-lg border border-slate-200"})}),U&&le.receiptFile?.type.includes("pdf")&&n.jsxs("div",{className:"mt-3 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-center gap-3",children:[n.jsx(Qn,{className:"w-8 h-8 text-red-600 shrink-0"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-sm font-bold text-red-900",children:le.receiptFile.name}),n.jsx("p",{className:"text-xs text-red-700 mt-0.5",children:"PDF document ready to upload"})]}),n.jsx("button",{type:"button",onClick:()=>{K(""),Me(je=>({...je,receiptFile:null})),se.current&&(se.current.value="")},className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-all",children:n.jsx(tr,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:()=>{te(!1),Me({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),se.current&&(se.current.value="")},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:W||q,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:W?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4"}),"Add Expense"]})})]})]})]})}),J&&d&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100",children:[n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Expense?"}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]}),n.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[n.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:d.title}),n.jsxs("p",{className:"text-xs text-slate-500",children:[Se(d.amount),"  ",Ae(d.companyId)?.name||"Unknown"]})]})]}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>{re(!1),u(null)},className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:xe,disabled:m,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),w&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:j==="manage"?"Manage Categories":"Select Category"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:j==="manage"?"View and add expense categories":"Choose an expense category"})]}),n.jsx("button",{onClick:()=>{y(!1),E("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:l.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Ms,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):j==="manage"?l.map(je=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Ms,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:je.name})]}),n.jsx(Nn,{className:"w-5 h-5 text-emerald-600"})]},je.id)):l.map(je=>n.jsxs("button",{type:"button",onClick:()=>{Me({...le,category:je.name}),y(!1)},className:`w-full px-4 py-3 rounded-xl text-left transition-all flex items-center justify-between ${le.category===je.name?"bg-indigo-50 text-indigo-600 border-2 border-indigo-200":"bg-slate-50 text-slate-900 border-2 border-transparent hover:bg-slate-100"}`,children:[n.jsx("span",{className:"font-bold text-sm",children:je.name}),le.category===je.name?n.jsx(Nn,{className:"w-5 h-5 text-indigo-600"}):n.jsx(Pu,{className:"w-5 h-5 text-slate-300"})]},je.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New category name...",value:S,onChange:je=>E(je.target.value),onKeyDown:je=>{je.key==="Enter"&&S.trim()&&!A&&(je.preventDefault(),Ce())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Ce,disabled:!S.trim()||A,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:A?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})}),I&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Filter by Company"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Select one or more companies"})]}),n.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[n.jsx("input",{type:"checkbox",checked:v.length===0,onChange:()=>{g([])},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:"All Companies"})]}),i.map(je=>n.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[n.jsx("input",{type:"checkbox",checked:v.includes(je.id),onChange:Le=>{Le.target.checked?g(Re=>[...Re,je.id]):g(Re=>Re.filter(Je=>Je!==je.id))},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),n.jsx(Xs,{src:je.logo,fallbackText:je.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),n.jsx("span",{className:"font-bold text-sm text-slate-900 flex-1",children:je.name})]},je.id))]})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[n.jsxs("button",{onClick:()=>{g([])},disabled:v.length===0,className:"px-4 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[n.jsx(tr,{className:"w-4 h-4"}),"Clear All"]}),n.jsxs("button",{onClick:()=>{B(!1),Ue()},className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:["Apply Filters (",v.length===0?"All":v.length,")"]})]})]})}),H&&n.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsx("div",{className:"p-8 border-b border-slate-100",children:n.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[n.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:n.jsx(Lr,{className:"w-6 h-6"})}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",T.length," Expense(s)?"]}),n.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]})}),n.jsxs("div",{className:"p-6 flex gap-3",children:[n.jsx("button",{onClick:()=>Y(!1),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),n.jsx("button",{onClick:fe,disabled:R,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete All"})]})]})})]})},Kbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=Cn(),[a,s]=D.useState([]),[i,o]=D.useState([]),[l,c]=D.useState([]),[d,u]=D.useState(new Date().getFullYear()),[f,p]=D.useState(""),[m,b]=D.useState(null),[v,g]=D.useState(!0),[w,y]=D.useState(!1),[j,N]=D.useState("yearly"),[S,E]=D.useState(!1),[A,P]=D.useState(!1),[I,B]=D.useState(null),[T,_]=D.useState(!1),[R,z]=D.useState(!1),[H,Y]=D.useState(null),[J,re]=D.useState(!1),[X,te]=D.useState(""),[W,O]=D.useState(!1),[q,G]=D.useState({year:new Date().getFullYear(),department:"",categories:[]}),U=e?.role==="Admin",K=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,ae=Array.from({length:5},(de,ce)=>new Date().getFullYear()-2+ce),me=D.useCallback(async()=>{try{const ce=(await Pae())?.data||[];o(Array.isArray(ce)?ce:[])}catch(de){console.error("[BUDGET] Error fetching departments:",de)}},[]),se=D.useCallback(async()=>{try{const ce=(await iM())?.data||[];c(Array.isArray(ce)?ce:[])}catch(de){console.error("[BUDGET] Error fetching categories:",de)}},[]),le=D.useCallback(async()=>{g(!0);try{const de={year:d};f&&(de.department=f),console.log("[Budget] Fetching budgets with params:",de);const Ce=(await Cae(de))?.data||[];console.log("[Budget] Received budgets:",Ce),s(Array.isArray(Ce)?Ce:[])}catch(de){console.error("[Budget] Error fetching budgets:",de),r(de.message||"Failed to load budgets")}finally{g(!1)}},[d,f,r]),Me=D.useCallback(async()=>{y(!0);try{const de={year:d};f&&(de.department=f),console.log("[Budget] Fetching tracking with params:",de);const ce=await Oae(de);console.log("[Budget] Received tracking:",ce?.data),b(ce?.data||null)}catch(de){console.error("[Budget] Error fetching tracking:",de),b(null)}finally{y(!1)}},[d,f]);D.useEffect(()=>{me(),se()},[me,se]),D.useEffect(()=>{le(),Me()},[le,Me]);const ue=()=>{G({year:d,department:f,categories:l.map(de=>({categoryId:de.id,categoryName:de.name,yearlyBudget:0,q1Budget:0,q2Budget:0,q3Budget:0,q4Budget:0}))})},Ue=async()=>{if(X.trim()){O(!0);try{const de=await oM({name:X.trim()});if(de?.data){const ce=de.data;c(Ce=>[...Ce,ce]),te(""),t("Category added successfully"),se()}}catch(de){de.message?.includes("already exists")||de.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(de.message||"Failed to add category")}finally{O(!1)}}},Ae=async()=>{if(!K){r("User not found");return}if(q.categories.length===0){r("Please add at least one category");return}if(q.categories.reduce((ce,Ce)=>ce+Ce.yearlyBudget,0)===0){r("Total budget cannot be zero");return}_(!0);try{await Aae({year:q.year,department:q.department||null,categories:q.categories,createdBy:K}),t("Budget created successfully"),E(!1),le(),Me()}catch(ce){r(ce.message||"Failed to create budget")}finally{_(!1)}},ie=async()=>{if(!(!I||!K)){_(!0);try{await Eae(I.id,{categories:q.categories,updatedBy:K}),t("Budget updated successfully"),P(!1),B(null),le(),Me()}catch(de){r(de.message||"Failed to update budget")}finally{_(!1)}}},Z=async de=>{z(!0);try{await Tae(de.id),t("Budget deleted successfully"),Y(null),le(),Me()}catch(ce){r(ce.message||"Failed to delete budget")}finally{z(!1)}},Ee=de=>de>=1e6?`$${(de/1e6).toFixed(1)}M`:de>=1e3?`$${(de/1e3).toFixed(1)}k`:`$${de.toLocaleString()}`,we=de=>de>=100?"text-red-600":de>=80?"text-amber-600":"text-emerald-600",Oe=de=>de>=100?"bg-red-500":de>=80?"bg-amber-500":"bg-emerald-500";return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Budget Management"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Track spending against allocated budgets"})]}),U&&n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>re(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[n.jsx(Ms,{className:"w-4 h-4"})," Manage Categories"]}),n.jsxs("button",{onClick:()=>{ue(),E(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(ln,{className:"w-4 h-4"})," Create Budget"]})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Year"}),n.jsx("select",{value:d,onChange:de=>u(parseInt(de.target.value)),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:ae.map(de=>n.jsx("option",{value:de,children:de},de))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),n.jsxs("select",{value:f,onChange:de=>p(de.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Departments"}),i.map(de=>n.jsx("option",{value:de,children:de},de))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"View Mode"}),n.jsx("div",{className:"flex gap-2",children:["yearly","quarterly","monthly"].map(de=>n.jsx("button",{onClick:()=>N(de),className:`flex-1 px-3 py-3 rounded-xl text-xs font-black uppercase transition-all ${j===de?"bg-indigo-600 text-white shadow-lg":"bg-slate-50 text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:de},de))})]})]})}),!v&&a.length>0&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-lg font-black text-slate-900",children:m&&m.hasBudget!==!1?"Current Budget":"Available Budgets"}),n.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1",children:[a.length," budget",a.length!==1?"s":""," for selected filters"]})]}),m&&m.hasBudget!==!1&&U&&n.jsxs("button",{onClick:()=>{const de=a[0];B(de),G({year:de.year,department:de.department||"",categories:de.categories.map(ce=>({...ce,q1Budget:ce.q1Budget||0,q2Budget:ce.q2Budget||0,q3Budget:ce.q3Budget||0,q4Budget:ce.q4Budget||0}))}),P(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[n.jsx(Do,{className:"w-4 h-4"})," Edit Budget"]})]})}),n.jsx("div",{className:"divide-y divide-slate-100",children:a.map(de=>n.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900",children:[de.year," ",de.department&&`- ${de.department}`]}),!de.department&&n.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-600 text-[10px] font-black uppercase rounded-lg border border-purple-200",children:"Global"})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Budget"}),n.jsx("p",{className:"text-lg font-black text-indigo-600",children:Ee(de.totalBudget)})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Categories"}),n.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[de.categories.length," configured"]})]}),n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Created"}),n.jsx("p",{className:"text-xs text-slate-500 font-medium",children:de.createdAt?new Date(de.createdAt).toLocaleDateString():"N/A"})]})]}),n.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:n.jsxs("details",{className:"group",children:[n.jsxs("summary",{className:"text-xs font-bold text-indigo-600 cursor-pointer hover:text-indigo-700 list-none flex items-center gap-2",children:[n.jsx(wa,{className:"w-4 h-4 transition-transform group-open:rotate-90"}),"View category breakdown"]}),n.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:de.categories.map(ce=>n.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:ce.categoryName}),n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Yearly: ",n.jsx("span",{className:"font-black",children:Ee(ce.yearlyBudget)})]})]},ce.categoryId))})]})})]}),U&&!(m&&m.hasBudget!==!1)&&n.jsxs("button",{onClick:()=>{B(de),G({year:de.year,department:de.department||"",categories:de.categories.map(ce=>({...ce,q1Budget:ce.q1Budget||0,q2Budget:ce.q2Budget||0,q3Budget:ce.q3Budget||0,q4Budget:ce.q4Budget||0}))}),P(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[n.jsx(Do,{className:"w-4 h-4"})," View/Edit"]})]})},de.id))})]}),m&&m.hasBudget!==!1&&n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center",children:n.jsx(Mu,{className:"w-5 h-5 text-indigo-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Budget"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Ee(m.totalBudget)})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center",children:n.jsx(Qd,{className:"w-5 h-5 text-blue-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Spent"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Ee(m.totalSpent)})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:`w-10 h-10 rounded-xl ${m.totalRemaining>=0?"bg-emerald-50":"bg-red-50"} flex items-center justify-center`,children:m.totalRemaining>=0?n.jsx(Nn,{className:"w-5 h-5 text-emerald-600"}):n.jsx($n,{className:"w-5 h-5 text-red-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Remaining"})]}),n.jsx("h3",{className:`text-2xl font-black ${m.totalRemaining>=0?"text-emerald-600":"text-red-600"}`,children:Ee(Math.abs(m.totalRemaining))})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-50 flex items-center justify-center",children:n.jsx(ex,{className:"w-5 h-5 text-purple-600"})}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"% Used"})]}),n.jsxs("h3",{className:`text-2xl font-black ${we(m.totalPercentUsed)}`,children:[m.totalPercentUsed.toFixed(1),"%"]})]})]}),m&&m.isOverBudget&&n.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 flex items-start gap-4 animate-in slide-in-from-top-2",children:[n.jsx(w0,{className:"w-6 h-6 text-red-600 shrink-0 mt-1"}),n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-lg font-black text-red-900 mb-1",children:"Budget Exceeded"}),n.jsxs("p",{className:"text-sm text-red-700",children:["You are ",n.jsx("span",{className:"font-black",children:Ee(m.overBudgetAmount)})," over budget (",m.totalPercentUsed.toFixed(1),"% of total budget used)."]})]})]}),!v&&(!m||m.hasBudget===!1)&&n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[n.jsx(E8,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Budget Set"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:U?`No budget has been set for ${d}${f?` - ${f}`:""}. Create one to start tracking.`:`No budget available for ${d}${f?` - ${f}`:""}.`}),U&&n.jsxs("button",{onClick:()=>{ue(),E(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[n.jsx(ln,{className:"w-4 h-4"})," Create Budget"]})]}),m&&m.hasBudget!==!1&&m.categories&&n.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[n.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:n.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Spending vs Budget by Category"})}),n.jsx("div",{className:"divide-y divide-slate-100",children:m.categories.map(de=>n.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[n.jsxs("div",{className:"flex justify-between items-start mb-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:de.categoryName}),n.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[n.jsxs("span",{className:"text-slate-500 font-medium",children:["Budget: ",n.jsx("span",{className:"font-black text-slate-900",children:Ee(de.yearlyBudget)})]}),n.jsxs("span",{className:"text-slate-500 font-medium",children:["Spent: ",n.jsx("span",{className:"font-black text-slate-900",children:Ee(de.yearlySpent)})]}),n.jsxs("span",{className:`font-black ${we(de.yearlyPercentUsed)}`,children:[de.yearlyPercentUsed.toFixed(1),"%"]})]})]}),de.isOverBudget&&n.jsxs("div",{className:"px-3 py-1 bg-red-50 text-red-600 text-xs font-black uppercase rounded-lg border border-red-200",children:["Over by ",Ee(de.overBudgetAmount)]})]}),n.jsxs("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:[n.jsx("div",{className:`absolute left-0 top-0 h-full transition-all ${Oe(de.yearlyPercentUsed)}`,style:{width:`${Math.min(de.yearlyPercentUsed,100)}%`}}),de.yearlyPercentUsed>100&&n.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500/30 border-r-2 border-red-600",style:{width:"100%"}})]}),j==="quarterly"&&n.jsx("div",{className:"grid grid-cols-4 gap-3 mt-4 pt-4 border-t border-slate-100",children:["q1","q2","q3","q4"].map((ce,Ce)=>{const Xe=de.quarters[ce];return n.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[n.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:["Q",Ce+1]}),n.jsxs("p",{className:"text-xs text-slate-600 font-medium",children:[n.jsx("span",{className:"font-black text-slate-900",children:Ee(Xe.spent)})," "," / ",Ee(Xe.budget)]}),n.jsxs("p",{className:`text-xs font-black mt-1 ${we(Xe.percentUsed)}`,children:[Xe.percentUsed.toFixed(0),"%"]})]},ce)})})]},de.categoryId))})]}),S&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>E(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(Mu,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Create Budget"}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Set budget allocations for ",q.year]})]})]}),n.jsx("button",{onClick:()=>E(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Year ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("select",{value:q.year,onChange:de=>G(ce=>({...ce,year:parseInt(de.target.value)})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:ae.map(de=>n.jsx("option",{value:de,children:de},de))})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),n.jsxs("select",{value:q.department,onChange:de=>G(ce=>({...ce,department:de.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"All Departments"}),i.map(de=>n.jsx("option",{value:de,children:de},de))]})]})]}),n.jsxs("div",{children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(Ms,{className:"w-4 h-4 text-indigo-600"})," Category Budgets"]}),n.jsx("div",{className:"space-y-4",children:q.categories.map((de,ce)=>n.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-black text-slate-900 mb-3",children:de.categoryName}),n.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),n.jsx("input",{type:"number",value:de.yearlyBudget||"",onChange:Ce=>{const Xe=[...q.categories];Xe[ce].yearlyBudget=parseFloat(Ce.target.value)||0,G(xe=>({...xe,categories:Xe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ce,Xe)=>n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Xe+1]}),n.jsx("input",{type:"number",value:de[Ce]||"",onChange:xe=>{const fe=[...q.categories];fe[ce][Ce]=parseFloat(xe.target.value)||0,G(Se=>({...Se,categories:fe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ce))]})]},de.categoryId))}),n.jsx("div",{className:"mt-6 p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),n.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Ee(q.categories.reduce((de,ce)=>de+ce.yearlyBudget,0))})]})})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>E(!1),disabled:T,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Ae,disabled:T,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:T?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),"Create Budget"]})})]})]})})]}),A&&I&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{P(!1),B(null)}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(Do,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Edit Budget"}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Update budget allocations for ",I.year,I.department&&` - ${I.department}`]})]})]}),n.jsx("button",{onClick:()=>{P(!1),B(null)},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-4",children:[q.categories.map((de,ce)=>n.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[n.jsx("h4",{className:"font-black text-slate-900 mb-3",children:de.categoryName}),n.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),n.jsx("input",{type:"number",value:de.yearlyBudget||"",onChange:Ce=>{const Xe=[...q.categories];Xe[ce].yearlyBudget=parseFloat(Ce.target.value)||0,G(xe=>({...xe,categories:Xe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ce,Xe)=>n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Xe+1]}),n.jsx("input",{type:"number",value:de[Ce]||"",onChange:xe=>{const fe=[...q.categories];fe[ce][Ce]=parseFloat(xe.target.value)||0,G(Se=>({...Se,categories:fe}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ce))]})]},de.categoryId)),n.jsx("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),n.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Ee(q.categories.reduce((de,ce)=>de+ce.yearlyBudget,0))})]})})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsxs("button",{onClick:()=>Y(I),disabled:T,className:"px-6 py-3 border-2 border-red-200 text-red-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-50 transition-all disabled:opacity-50 flex items-center gap-2",children:[n.jsx(Lr,{className:"w-4 h-4"})," Delete"]}),n.jsx("button",{onClick:()=>{P(!1),B(null)},disabled:T,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:ie,disabled:T,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:T?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):n.jsxs(n.Fragment,{children:[n.jsx(di,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]}),H&&n.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>Y(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx(w0,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Budget?"}),n.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Are you sure you want to delete the budget for ",H.year,H.department&&` - ${H.department}`,"? This action cannot be undone."]})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>Y(null),disabled:R,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:()=>Z(H),disabled:R,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:R?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Budget"]})})]})]})})]}),J&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Categories"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add budget/expense categories"})]}),n.jsx("button",{onClick:()=>{re(!1),te("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:l.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Ms,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):l.map(de=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Ms,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:de.name})]}),n.jsx(Nn,{className:"w-5 h-5 text-emerald-600"})]},de.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New category name...",value:X,onChange:de=>te(de.target.value),onKeyDown:de=>{de.key==="Enter"&&X.trim()&&!W&&(de.preventDefault(),Ue())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Ue,disabled:!X.trim()||W,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:W?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})})]})},_8=["Draft","Pending Signature","Signed","Expired","Terminated"],Xbe=({currentUser:e})=>{const{showSuccess:t,showError:r}=Cn(),[a,s]=D.useState([]),[i,o]=D.useState([]),[l,c]=D.useState([]),[d,u]=D.useState([]),[f,p]=D.useState(null),[m,b]=D.useState(!0),[v,g]=D.useState(!1),[w,y]=D.useState(!1),[j,N]=D.useState(""),[S,E]=D.useState(""),[A,P]=D.useState(""),[I,B]=D.useState(!1),[T,_]=D.useState(!1),[R,z]=D.useState(!1),[H,Y]=D.useState(!1),J=D.useRef(null),[re,X]=D.useState(!1),[te,W]=D.useState(!1),[O,q]=D.useState(!1),[G,U]=D.useState(!1),[K,ae]=D.useState(!1),[me,se]=D.useState(""),[le,Me]=D.useState(!1),[ue,Ue]=D.useState([]),[Ae,ie]=D.useState(!1),[Z,Ee]=D.useState({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),we=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Oe=D.useCallback(async()=>{b(!0);try{const[We,Ct,br,Jt]=await Promise.all([lM(),md(),Ch(),Mae()]);s(We?.data||[]),o(Ct?.data||[]),c(br?.data||[]),u(Jt?.data||[])}catch(We){r(We.message||"Failed to load contracts")}finally{b(!1)}},[r]);D.useEffect(()=>{Oe()},[Oe]);const de=async()=>{if(f){ie(!0);try{const We=await l3("contract",f.id);Ue(We?.data||[])}catch(We){console.error("[CONTRACTS] Failed to fetch contract activities:",We),Ue([])}finally{ie(!1)}}};D.useEffect(()=>{f?de():Ue([])},[f?.id]),D.useEffect(()=>{(async()=>{if(we)try{await ub({userId:we}),q(!0)}catch{q(!1)}})()},[we]);const ce=async()=>{if(!we){r("User not authenticated");return}U(!0);try{let We;try{We=await ub({userId:we})}catch(Hr){throw Hr.message?.includes("Failed to fetch")||Hr.message?.includes("ERR_CONNECTION_REFUSED")||Hr.message?.includes("NetworkError")?new Error("Backend server is not running. Please start the server and try again."):Hr}const{accessToken:Ct,apiKey:br}=We?.data||{};if(!Ct)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");console.log("Google Picker - Access Token:",Ct?"Present":"Missing"),console.log("Google Picker - API Key:",br?`Present (${br.substring(0,10)}...)`:"Not using (optional with OAuth)"),console.log("Full token response:",We?.data),await new Promise((Hr,tt)=>{let Dt=0;const mr=50,Sr=setInterval(()=>{Dt++,window.google&&window.google.picker?(clearInterval(Sr),Hr()):Dt>=mr&&(clearInterval(Sr),tt(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const Jt=window.google.picker;new Jt.PickerBuilder().setOAuthToken(Ct).setCallback(Hr=>{U(!1);try{if(console.log("Google Picker Callback - Full response data:",JSON.stringify(Hr,null,2)),console.log("Google Picker Response Action:",Hr[Jt.Response.ACTION]),console.log("Google Picker Action Constants:",{PICKED:Jt.Action.PICKED,CANCEL:Jt.Action.CANCEL}),Hr[Jt.Response.ACTION]===Jt.Action.PICKED){const tt=Hr[Jt.Response.DOCUMENTS];if(console.log("Google Picker - Documents array:",tt),console.log("Google Picker - Number of documents:",tt?.length),tt&&tt.length>0){const Dt=tt[0];console.log("Google Picker - Selected file data:",JSON.stringify(Dt,null,2)),console.log("Google Picker - File ID:",Dt.id),console.log("Google Picker - File Name:",Dt.name),console.log("Google Picker - File MIME Type:",Dt.mimeType),console.log("Google Picker - File URL:",Dt.url),console.log("Google Picker - File Service ID:",Dt.serviceId),Ce(Dt)}else console.error("Google Picker - No documents in response"),r("No file selected")}else if(Hr[Jt.Response.ACTION]!==Jt.Action.CANCEL){const tt=Hr[Jt.Response.ERROR];tt&&(console.error("Google Picker Error:",tt),console.error("Error details:",JSON.stringify(Hr,null,2)),tt===Jt.ResponseError.ACCESS_DENIED?r("Access denied. Please reconnect your Google account in Settings."):tt===Jt.ResponseError.INVALID_CREDENTIALS?r("Invalid credentials. Please reconnect your Google account."):tt===Jt.ResponseError.INVALID_DEVELOPER_KEY?r("Google Picker configuration error. Please try again."):r(`Google Picker error: ${tt}. Check browser console for details.`))}}catch(tt){console.error("Error handling picker callback:",tt),r("Failed to process selected file")}}).addView(Jt.ViewId.DOCS).enableFeature(Jt.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(We){U(!1),console.error("Google Drive Picker Error:",We),We.message?.includes("Backend server is not running")?r("Backend server is not running. Please start the server on port 8050 and try again."):We.message?.includes("not connected")||We.message?.includes("GOOGLE_NOT_CONNECTED")?r("Google Drive not connected. Please connect your Google account in Settings."):We.message?.includes("Failed to fetch")||We.message?.includes("ERR_CONNECTION_REFUSED")?r("Cannot connect to server. Please ensure the backend server is running on port 8050."):r(We.message||"Failed to open Google Drive picker. Please check your connection and try again.")}},Ce=async We=>{if(we){console.log("handleGoogleDriveFileSelected called with file:",JSON.stringify(We,null,2)),console.log("File data from Google Picker:",{id:We.id,name:We.name,url:We.url,iconUrl:We.iconUrl,mimeType:We.mimeType,serviceId:We.serviceId,type:We.type,sizeBytes:We.sizeBytes});try{const Ct=We.url||We.embedUrl||"",br=We.iconUrl||"",Jt=We.sizeBytes?parseInt(We.sizeBytes):0;console.log("Storing file data:",{googleDriveFileId:We.id,publicUrl:Ct,iconUrl:br,fileName:We.name,fileMimeType:We.mimeType}),Ee(Dr=>({...Dr,isGoogleDriveLinked:!0,googleDriveFileId:We.id,googleDriveWebViewLink:Ct,googleDriveDownloadLink:Ct,googleDriveIconUrl:br,fileName:We.name||"Untitled",fileMimeType:We.mimeType||"",fileSize:Jt,fileUrl:Ct,file:null})),t("File attached from Google Drive")}catch(Ct){console.error("Error handling Google Drive file selection:",Ct),r(Ct.message||"Failed to attach file from Google Drive")}}},Xe=async()=>{if(me.trim()){Me(!0);try{const We=await Rae({name:me.trim()});if(We?.data){const Ct=We.data;u(br=>[...br,Ct]),se(""),t("Document type added successfully")}}catch(We){We.message?.includes("already exists")||We.message?.includes("TYPE_EXISTS")?r("Document type with this name already exists"):r(We.message||"Failed to add document type")}finally{Me(!1)}}},xe=We=>{const Ct=We.target.files?.[0];if(!Ct)return;if(Ct.size>10*1024*1024){r("File size must be less than 10MB");return}Y(!0);const br=new FileReader;br.onload=()=>{const Jt=br.result;Ee(Dr=>({...Dr,file:Ct,fileUrl:Jt,fileName:Ct.name,fileMimeType:Ct.type,fileSize:Ct.size})),Y(!1)},br.onerror=()=>{r("Failed to read file"),Y(!1)},br.readAsDataURL(Ct)},fe=async()=>{if(!Z.fileUrl||!we){r("Please select a file first");return}X(!0);try{const We=await Bae({fileName:Z.fileName,fileContent:Z.fileUrl,fileMimeType:Z.fileMimeType,userId:we});Ee(Ct=>({...Ct,isGoogleDriveLinked:!0,googleDriveFileId:We.data.id,googleDriveWebViewLink:We.data.webViewLink,googleDriveDownloadLink:We.data.webContentLink})),t("File uploaded to Google Drive successfully")}catch(We){r(We.message||"Failed to upload to Google Drive")}finally{X(!1)}},Se=async(We,Ct)=>{W(!0);try{const br=await Uae({contractId:We,userId:we,title:Ct});t("Signature document created in Google Docs"),Oe(),window.open(br.data.documentLink,"_blank")}catch(br){r(br.message||"Failed to create signature document")}finally{W(!1)}},qe=async()=>{if(!Z.title||!Z.documentType||!Z.contractParty){r("Please fill in all required fields");return}z(!0);try{await Iae({title:Z.title,documentType:Z.documentType,contractParty:Z.contractParty,companyId:Z.companyId||null,contactId:Z.contactId||null,expirationDate:Z.expirationDate||null,renewalDate:Z.renewalDate||null,signedDate:Z.signedDate||null,status:Z.status,description:Z.description||null,tags:Z.tags,requiresSignature:Z.requiresSignature,signatureStatus:Z.requiresSignature?"Pending":"Not Required",fileUrl:Z.fileUrl||null,fileName:Z.fileName||null,fileMimeType:Z.fileMimeType||null,fileSize:Z.fileSize||null,isGoogleDriveLinked:Z.isGoogleDriveLinked,googleDriveFileId:Z.googleDriveFileId||null,googleDriveWebViewLink:Z.googleDriveWebViewLink||null,googleDriveDownloadLink:Z.googleDriveDownloadLink||null,googleDriveIconUrl:Z.googleDriveIconUrl||null,userId:we}),t("Contract created successfully"),B(!1),Je(),Oe()}catch(We){r(We.message||"Failed to create contract")}finally{z(!1)}},je=async()=>{if(f){z(!0);try{await Dae(f.id,{title:Z.title,documentType:Z.documentType,contractParty:Z.contractParty,companyId:Z.companyId||null,contactId:Z.contactId||null,expirationDate:Z.expirationDate||null,renewalDate:Z.renewalDate||null,signedDate:Z.signedDate||null,status:Z.status,description:Z.description||null,tags:Z.tags,requiresSignature:Z.requiresSignature,fileUrl:Z.fileUrl||null,fileName:Z.fileName||null,fileMimeType:Z.fileMimeType||null,fileSize:Z.fileSize||null,isGoogleDriveLinked:Z.isGoogleDriveLinked,googleDriveFileId:Z.googleDriveFileId||null,googleDriveWebViewLink:Z.googleDriveWebViewLink||null,googleDriveDownloadLink:Z.googleDriveDownloadLink||null,googleDriveIconUrl:Z.googleDriveIconUrl||null}),t("Contract updated successfully"),_(!1),p(null),Je(),Oe()}catch(We){r(We.message||"Failed to update contract")}finally{z(!1)}}},Le=async()=>{if(f){g(!0);try{await Lae(f.id),t("Contract deleted successfully"),y(!1),p(null),Oe()}catch(We){r(We.message||"Failed to delete contract")}finally{g(!1)}}},Re=async We=>{try{await Fae(We.id,{signedBy:we,signedDate:new Date().toISOString()}),t("Contract marked as signed"),Oe()}catch(Ct){r(Ct.message||"Failed to mark contract as signed")}},Je=()=>{Ee({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),J.current&&(J.current.value="")},ut=We=>{p(We),Ee({title:We.title,documentType:We.documentType,contractParty:We.contractParty,companyId:We.companyId||"",contactId:We.contactId||"",expirationDate:We.expirationDate||"",renewalDate:We.renewalDate||"",signedDate:We.signedDate||"",status:We.status,description:We.description||"",tags:We.tags||[],requiresSignature:We.requiresSignature,file:null,fileUrl:We.fileUrl||"",fileName:We.fileName||"",fileMimeType:We.fileMimeType||"",fileSize:We.fileSize||0,isGoogleDriveLinked:We.isGoogleDriveLinked,googleDriveFileId:We.googleDriveFileId||"",googleDriveWebViewLink:We.googleDriveWebViewLink||"",googleDriveDownloadLink:We.googleDriveDownloadLink||"",googleDriveIconUrl:We.googleDriveIconUrl||""}),_(!0)},vt=We=>{switch(We){case"Signed":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"Pending Signature":return"bg-amber-50 text-amber-600 border-amber-200";case"Draft":return"bg-slate-50 text-slate-600 border-slate-200";case"Expired":return"bg-red-50 text-red-600 border-red-200";case"Terminated":return"bg-gray-50 text-gray-600 border-gray-200";default:return"bg-slate-50 text-slate-600 border-slate-200"}},At=We=>{switch(We){case"Signed":return n.jsx(Nn,{className:"w-4 h-4"});case"Pending Signature":return n.jsx(is,{className:"w-4 h-4"});case"Draft":return n.jsx(Qn,{className:"w-4 h-4"});case"Expired":return n.jsx($n,{className:"w-4 h-4"});case"Terminated":return n.jsx(tr,{className:"w-4 h-4"});default:return n.jsx(Qn,{className:"w-4 h-4"})}},Bt=a.filter(We=>{const Ct=We.title.toLowerCase().includes(j.toLowerCase())||We.contractParty.toLowerCase().includes(j.toLowerCase())||We.documentType.toLowerCase().includes(j.toLowerCase()),br=!S||We.status===S,Jt=!A||We.documentType===A;return Ct&&br&&Jt}),Yt={total:a.length,signed:a.filter(We=>We.status==="Signed").length,pending:a.filter(We=>We.status==="Pending Signature").length,expired:a.filter(We=>We.status==="Expired").length};return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-start",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Contracts & Legal Documents"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Manage contracts with e-signature and Google Drive integration"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>ae(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[n.jsx(Ms,{className:"w-4 h-4"})," Manage Document Types"]}),n.jsxs("button",{onClick:()=>{Je(),B(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[n.jsx(ln,{className:"w-4 h-4"})," Add Contract"]})]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Qn,{className:"w-5 h-5 text-indigo-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total"})]}),n.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Yt.total})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(Nn,{className:"w-5 h-5 text-emerald-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Signed"})]}),n.jsx("h3",{className:"text-2xl font-black text-emerald-600",children:Yt.signed})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx(is,{className:"w-5 h-5 text-amber-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),n.jsx("h3",{className:"text-2xl font-black text-amber-600",children:Yt.pending})]}),n.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx($n,{className:"w-5 h-5 text-red-600"}),n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Expired"})]}),n.jsx("h3",{className:"text-2xl font-black text-red-600",children:Yt.expired})]})]}),n.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",value:j,onChange:We=>N(We.target.value),placeholder:"Search contracts...",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500"})]}),n.jsxs("select",{value:S,onChange:We=>E(We.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Statuses"}),_8.map(We=>n.jsx("option",{value:We,children:We},We))]}),n.jsxs("select",{value:A,onChange:We=>P(We.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[n.jsx("option",{value:"",children:"All Types"}),d.map(We=>n.jsx("option",{value:We.name,children:We.name},We.id))]})]})}),m?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(gt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):Bt.length===0?n.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[n.jsx(Qn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No contracts found"}),n.jsx("p",{className:"text-sm text-slate-500 mb-6",children:j||S||A?"Try adjusting your filters":"Create your first contract to get started"}),!j&&!S&&!A&&n.jsxs("button",{onClick:()=>{Je(),B(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[n.jsx(ln,{className:"w-4 h-4"})," Add Contract"]})]}):n.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:Bt.map(We=>n.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>p(We),children:n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h3",{className:"text-base font-black text-slate-900",children:We.title}),n.jsxs("span",{className:`px-2 py-1 text-xs font-black uppercase rounded-lg border ${vt(We.status)} flex items-center gap-1`,children:[At(We.status),We.status]}),We.isGoogleDriveLinked&&n.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs font-black uppercase rounded-lg border border-blue-200 flex items-center gap-1",children:[We.googleDriveIconUrl?n.jsx("img",{src:We.googleDriveIconUrl,alt:"File type",className:"w-3 h-3",onError:Ct=>{Ct.target.style.display="none"}}):n.jsx(l0,{className:"w-3 h-3"}),"Drive"]})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Ms,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-medium",children:We.documentType})]}),n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(qi,{className:"w-4 h-4 text-slate-400"}),n.jsx("span",{className:"font-medium",children:We.contractParty})]}),We.expirationDate&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[n.jsx(Jn,{className:"w-4 h-4 text-slate-400"}),n.jsxs("span",{className:"font-medium",children:["Expires: ",new Date(We.expirationDate).toLocaleDateString()]})]}),We.requiresSignature&&n.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[n.jsx(Vv,{className:"w-4 h-4"}),n.jsx("span",{className:"font-bold",children:We.signatureStatus})]})]})]}),n.jsxs("div",{className:"flex items-center gap-2",children:[We.googleDriveWebViewLink&&n.jsx("a",{href:We.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",onClick:Ct=>Ct.stopPropagation(),className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-all",title:"View in Google Drive",children:n.jsx(ps,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),ut(We)},className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:n.jsx(Do,{className:"w-4 h-4"})}),n.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),p(We),y(!0)},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:n.jsx(Lr,{className:"w-4 h-4"})})]})]})},We.id))})}),(I||T)&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{B(!1),_(!1),Je()}}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:n.jsx(Qn,{className:"w-7 h-7"})}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:I?"Add Contract":"Edit Contract"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:I?"Create a new contract with metadata and documents":"Update contract details"})]})]}),n.jsx("button",{onClick:()=>{B(!1),_(!1),Je()},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{className:"col-span-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Title ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:Z.title,onChange:We=>Ee(Ct=>({...Ct,title:We.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"e.g., Service Agreement with Acme Corp"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Document Type ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsxs("select",{value:Z.documentType,onChange:We=>Ee(Ct=>({...Ct,documentType:We.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"Select type"}),d.map(We=>n.jsx("option",{value:We.name,children:We.name},We.id))]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Party ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",value:Z.contractParty,onChange:We=>Ee(Ct=>({...Ct,contractParty:We.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"Other party name"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Company"}),n.jsxs("select",{value:Z.companyId,onChange:We=>Ee(Ct=>({...Ct,companyId:We.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"None"}),i.map(We=>n.jsx("option",{value:We.id,children:We.name},We.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Contact"}),n.jsxs("select",{value:Z.contactId,onChange:We=>Ee(Ct=>({...Ct,contactId:We.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[n.jsx("option",{value:"",children:"None"}),l.map(We=>n.jsx("option",{value:We.id,children:We.name},We.id))]})]})]}),n.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Expiration Date"}),n.jsx("input",{type:"date",value:Z.expirationDate,onChange:We=>Ee(Ct=>({...Ct,expirationDate:We.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Renewal Date"}),n.jsx("input",{type:"date",value:Z.renewalDate,onChange:We=>Ee(Ct=>({...Ct,renewalDate:We.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Signed Date"}),n.jsx("input",{type:"date",value:Z.signedDate,onChange:We=>Ee(Ct=>({...Ct,signedDate:We.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),n.jsx("select",{value:Z.status,onChange:We=>Ee(Ct=>({...Ct,status:We.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:_8.map(We=>n.jsx("option",{value:We,children:We},We))})]}),n.jsx("div",{className:"flex items-end",children:n.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[n.jsx("input",{type:"checkbox",checked:Z.requiresSignature,onChange:We=>Ee(Ct=>({...Ct,requiresSignature:We.target.checked})),className:"w-5 h-5 rounded border-2 border-slate-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),n.jsx("span",{className:"text-sm font-bold text-slate-900",children:"Requires E-Signature"})]})})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),n.jsx("textarea",{value:Z.description,onChange:We=>Ee(Ct=>({...Ct,description:We.target.value})),rows:3,className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none",placeholder:"Add notes or description..."})]}),(I||T)&&n.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6",children:[n.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[n.jsx(kc,{className:"w-4 h-4 text-indigo-600"})," Document Upload"]}),n.jsx("input",{ref:J,type:"file",onChange:xe,className:"hidden",accept:".pdf,.doc,.docx,.txt"}),!Z.fileUrl&&!Z.isGoogleDriveLinked?n.jsxs("div",{className:"space-y-3",children:[n.jsx("button",{onClick:()=>J.current?.click(),disabled:H,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600",children:H?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):n.jsxs(n.Fragment,{children:[n.jsx(kc,{className:"w-4 h-4"}),"Choose File"]})}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("div",{className:"flex-1 h-px bg-slate-200"}),n.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"OR"}),n.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),n.jsx("button",{onClick:ce,disabled:!O||G,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:G?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Opening Google Drive..."]}):n.jsxs(n.Fragment,{children:[n.jsx(l0,{className:"w-4 h-4"}),"Attach from Google Drive"]})})]}):n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[Z.isGoogleDriveLinked&&Z.googleDriveIconUrl?n.jsx("img",{src:Z.googleDriveIconUrl,alt:"File type icon",className:"w-5 h-5",onError:We=>{We.target.style.display="none";const Ct=document.createElement("div");Ct.innerHTML='<svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>',We.target.parentNode?.appendChild(Ct)}}):Z.isGoogleDriveLinked?n.jsx(l0,{className:"w-5 h-5 text-blue-600"}):n.jsx(uU,{className:"w-5 h-5 text-emerald-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:Z.fileName}),n.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Z.fileSize>0&&n.jsxs("p",{className:"text-xs text-slate-500",children:[(Z.fileSize/1024).toFixed(1)," KB"]}),Z.isGoogleDriveLinked&&n.jsxs(n.Fragment,{children:[Z.fileSize>0&&n.jsx("span",{className:"text-slate-300",children:""}),n.jsx("span",{className:"text-xs text-blue-600 font-bold",children:"Google Drive"})]})]})]})]}),n.jsx("button",{onClick:()=>{Ee(We=>({...We,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""})),J.current&&(J.current.value="")},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:n.jsx(tr,{className:"w-4 h-4"})})]}),!Z.isGoogleDriveLinked&&Z.fileUrl&&n.jsx("button",{onClick:fe,disabled:re,className:"w-full py-3 bg-blue-600 text-white font-bold text-sm rounded-xl hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:re?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Uploading to Drive..."]}):n.jsxs(n.Fragment,{children:[n.jsx(l0,{className:"w-4 h-4"}),"Upload to Google Drive"]})}),Z.isGoogleDriveLinked&&Z.googleDriveWebViewLink&&n.jsxs("a",{href:Z.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all flex items-center justify-center gap-2 text-sm font-bold text-blue-900",children:[Z.googleDriveIconUrl?n.jsx("img",{src:Z.googleDriveIconUrl,alt:"File type",className:"w-4 h-4",onError:We=>{We.target.style.display="none"}}):n.jsx(ps,{className:"w-4 h-4"}),"View in Google Drive"]})]})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>{B(!1),_(!1),Je()},disabled:R,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:I?qe:je,disabled:R,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:R?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),I?"Creating...":"Updating..."]}):n.jsx(n.Fragment,{children:I?"Create Contract":"Update Contract"})})]})]})})]}),f&&!T&&!w&&n.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>p(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[n.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex-1",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[n.jsx("h2",{className:"text-2xl font-black text-slate-900",children:f.title}),n.jsxs("span",{className:`px-3 py-1 text-xs font-black uppercase rounded-lg border ${vt(f.status)} flex items-center gap-1`,children:[At(f.status),f.status]})]}),n.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[f.documentType," - ",f.contractParty]})]}),n.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:n.jsx(tr,{className:"w-5 h-5"})})]})}),n.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[f.expirationDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Expiration"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.expirationDate).toLocaleDateString()})]}),f.renewalDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Renewal"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.renewalDate).toLocaleDateString()})]}),f.signedDate&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Signed"}),n.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(f.signedDate).toLocaleDateString()})]})]}),f.description&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Description"}),n.jsx("p",{className:"text-sm text-slate-600",children:f.description})]}),(f.fileUrl||f.isGoogleDriveLinked)&&n.jsxs("div",{children:[n.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Documents"}),n.jsxs("div",{className:"space-y-2",children:[f.fileName&&n.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[f.isGoogleDriveLinked&&f.googleDriveIconUrl?n.jsx("img",{src:f.googleDriveIconUrl,alt:"File type",className:"w-5 h-5",onError:We=>{We.target.style.display="none"}}):n.jsx(Qn,{className:"w-5 h-5 text-indigo-600"}),n.jsxs("div",{children:[n.jsx("p",{className:"text-sm font-bold text-slate-900",children:f.fileName}),f.fileSize&&n.jsxs("p",{className:"text-xs text-slate-500",children:[(f.fileSize/1024).toFixed(1)," KB"]})]})]}),f.fileUrl&&n.jsx("a",{href:f.fileUrl,download:f.fileName,className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:n.jsx(Iu,{className:"w-4 h-4"})})]}),f.isGoogleDriveLinked&&f.googleDriveWebViewLink&&n.jsx("a",{href:f.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all",children:n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx(l0,{className:"w-5 h-5 text-blue-600"}),n.jsx("span",{className:"text-sm font-bold text-blue-900",children:"View in Google Drive"})]}),n.jsx(ps,{className:"w-4 h-4 text-blue-600"})]})})]})]}),f.requiresSignature&&n.jsxs("div",{className:"border-2 border-amber-200 bg-amber-50 rounded-xl p-6",children:[n.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[n.jsx(Vv,{className:"w-5 h-5 text-amber-600"}),n.jsx("h3",{className:"text-sm font-black text-amber-900",children:"E-Signature Required"})]}),n.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:["Status: ",n.jsx("span",{className:"font-black",children:f.signatureStatus})]}),f.googleDocsSignatureLink?n.jsx("a",{href:f.googleDocsSignatureLink,target:"_blank",rel:"noopener noreferrer",className:"block py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all text-center",children:"Open Signature Document"}):n.jsx("button",{onClick:()=>Se(f.id,f.title),disabled:te,className:"w-full py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:te?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Creating Document..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Vv,{className:"w-4 h-4"}),"Create Signature Document"]})}),f.status!=="Signed"&&n.jsxs("button",{onClick:()=>Re(f),className:"w-full mt-3 py-3 bg-emerald-600 text-white font-bold text-sm rounded-xl hover:bg-emerald-700 transition-all flex items-center justify-center gap-2",children:[n.jsx(Nn,{className:"w-4 h-4"}),"Mark as Signed"]})]})]}),n.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[n.jsx("div",{className:"flex justify-between items-center",children:n.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[n.jsx(ad,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),Ae?n.jsx("div",{className:"flex items-center justify-center py-12",children:n.jsx(gt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):ue.length===0?n.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[n.jsx(rs,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),n.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this contract"})]}):n.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:ue.map((We,Ct)=>{const br=new Date(We.createdAt),Dr=new Date().getTime()-br.getTime(),Hr=Math.floor(Dr/(1e3*60*60*24));let tt="";Hr===0?tt="Today":Hr===1?tt="Yesterday":Hr<7?tt=`${Hr} days ago`:Hr<30?tt=`${Math.floor(Hr/7)} week${Math.floor(Hr/7)>1?"s":""} ago`:tt=`${Math.floor(Hr/30)} month${Math.floor(Hr/30)>1?"s":""} ago`;const Dt=We.activityType==="email_linked",mr=Dt?"border-indigo-600":"border-slate-200",Sr=Dt?"bg-indigo-600":"bg-slate-300",Jr=Dt?"text-indigo-600":"text-slate-400";return n.jsxs("div",{className:"relative",children:[n.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${mr} shadow-xl flex items-center justify-center`,children:Dt?n.jsx(rs,{className:"w-4 h-4 text-indigo-600"}):n.jsx("div",{className:`w-2 h-2 rounded-full ${Sr}`})}),n.jsxs("p",{className:`text-[10px] font-black ${Jr} uppercase mb-1 tracking-widest`,children:[Dt?"Email Linked":We.activityType||"Activity","  ",tt]}),n.jsx("h4",{className:"text-sm font-black text-slate-900",children:We.title||"Email Activity"}),n.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:We.description||We.title}),We.emailId&&n.jsxs("button",{onClick:()=>{window.location.hash="#inbox",setTimeout(()=>{window.location.hash=`#inbox&email=${We.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[n.jsx(ps,{className:"w-3 h-3"})," View Email"]})]},We.id||Ct)})})]})]}),n.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[n.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all",children:"Close"}),n.jsxs("button",{onClick:()=>{ut(f)},className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[n.jsx(Do,{className:"w-4 h-4"}),"Edit Contract"]})]})]})})]}),w&&f&&n.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>y(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[n.jsxs("div",{className:"p-8 text-center",children:[n.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:n.jsx($n,{className:"w-8 h-8"})}),n.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Contract?"}),n.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:["Are you sure you want to delete ",n.jsx("span",{className:"font-black",children:f.title}),"?"]}),n.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."})]}),n.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[n.jsx("button",{onClick:()=>y(!1),disabled:v,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),n.jsx("button",{onClick:Le,disabled:v,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:v?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):n.jsxs(n.Fragment,{children:[n.jsx(Lr,{className:"w-4 h-4"}),"Delete Contract"]})})]})]})})]}),K&&n.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Document Types"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add contract document types"})]}),n.jsx("button",{onClick:()=>{ae(!1),se("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-400"})})]}),n.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:n.jsx("div",{className:"space-y-2",children:d.length===0?n.jsxs("div",{className:"text-center py-8",children:[n.jsx(Qn,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),n.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No document types yet"}),n.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first document type below"})]}):d.map(We=>n.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:n.jsx(Qn,{className:"w-4 h-4 text-indigo-600"})}),n.jsx("span",{className:"font-bold text-sm text-slate-900",children:We.name})]}),n.jsx(Nn,{className:"w-5 h-5 text-emerald-600"})]},We.id))})}),n.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"text",placeholder:"New document type...",value:me,onChange:We=>se(We.target.value),onKeyDown:We=>{We.key==="Enter"&&me.trim()&&!le&&(We.preventDefault(),Xe())},className:"flex-1 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50"}),n.jsx("button",{type:"button",onClick:Xe,disabled:!me.trim()||le,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:le?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):n.jsxs(n.Fragment,{children:[n.jsx(ln,{className:"w-4 h-4"}),"Add"]})})]}),n.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Document types help categorize your contracts and legal documents"})]})]})})]})},Ybe=()=>n.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-2xl font-bold",children:"Products & Services"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Manage your products and service catalog."})]}),n.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest border border-indigo-100",children:[n.jsx(Ri,{className:"w-4 h-4"})," Coming Soon"]})]}),n.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-12 shadow-sm flex flex-col items-center justify-center min-h-[320px] text-center",children:[n.jsx("div",{className:"w-20 h-20 bg-indigo-50 rounded-[24px] flex items-center justify-center mb-6",children:n.jsx(eS,{className:"w-10 h-10 text-indigo-600"})}),n.jsx("h2",{className:"text-xl font-bold text-slate-800 mb-2",children:"Products & Services"}),n.jsx("p",{className:"text-slate-500 max-w-md",children:"Catalog management, pricing, and service offerings will be available here. This section is in development."})]})]}),Qbe=({onLogin:e})=>{const[t,r]=D.useState("initial"),[a,s]=D.useState(""),[i,o]=D.useState(["","","","","",""]),[l,c]=D.useState(!1),[d,u]=D.useState(null),f=D.useRef([]),p=async()=>{if(!a||!a.includes("@")){u("Please enter a valid email address");return}c(!0),u(null);try{const y=await oI({email:a});if(y?.status===404)throw new Error(y.message);u(null),o(["","","","","",""]),r("verify")}catch(y){console.error("[AUTH UI] Error caught:",y),y.message&&(y.message.includes("Account not found")||y.status===404)?u("Account not found - contact your Administrator"):u(y.message||"Failed to send code. Please check your internet connection.")}finally{c(!1)}},m=async()=>{const y=i.join("");if(y.length===6){if(!/^\d{6}$/.test(y)){u("OTP must contain only numbers");return}c(!0),u(null);try{const j=await One({email:a,verificationCode:y});if(j.token&&j.user)e(j);else throw new Error("Invalid response from server.")}catch(j){console.error("[AUTH] Verification error:",j),j.message?.includes("User not registered")||j.message?.includes("USER_NOT_REGISTERED")||j.message?.includes("Account not found")?u("Account not found - contact your Administrator"):u(j.message||"Invalid or expired code."),o(["","","","","",""]),setTimeout(()=>f.current[0]?.focus(),100)}finally{c(!1)}}},b=(y,j)=>{if(j&&!/^\d$/.test(j))return;const N=[...i];N[y]=j,o(N),d&&u(null),j&&y<5&&f.current[y+1]?.focus(),j&&y===5&&N.every(S=>S!=="")&&setTimeout(()=>m(),100)},v=(y,j)=>{if(j.key==="Backspace"||j.key==="Delete"){j.preventDefault();const N=[...i];i[y]?N[y]="":y>0&&(N[y-1]="",f.current[y-1]?.focus()),o(N),d&&u(null)}else j.key==="Enter"?(j.preventDefault(),m()):j.key==="ArrowLeft"&&y>0?(j.preventDefault(),f.current[y-1]?.focus()):j.key==="ArrowRight"&&y<5&&(j.preventDefault(),f.current[y+1]?.focus())},g=y=>{y.preventDefault();const j=y.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),N=[...i];for(let E=0;E<6;E++)N[E]=j[E]||"";o(N),d&&u(null);const S=N.findIndex(E=>E==="");f.current[S===-1?5:S]?.focus(),j.length===6&&setTimeout(()=>m(),100)};D.useEffect(()=>{t==="verify"?setTimeout(()=>f.current[0]?.focus(),100):o(["","","","","",""])},[t]);const w=y=>{y.preventDefault(),t==="initial"?p():m()};return n.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsx("div",{className:"w-full max-w-md z-10 animate-in fade-in zoom-in-95 duration-500",children:n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl",children:[n.jsx("div",{className:"mb-6 text-center",children:n.jsx("a",{href:"/privacy-policy",onClick:y=>{y.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-xs text-slate-400 hover:text-indigo-400 underline transition-colors",title:"Privacy Policy",children:"Privacy Policy"})}),n.jsxs("div",{className:"flex flex-col items-center mb-10",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl shadow-indigo-900/40 mb-6",children:"I"}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"ImpactFlow OS"}),n.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Team Access Portal"})]}),n.jsxs("form",{onSubmit:w,className:"space-y-5",children:[d&&n.jsxs("div",{className:"p-4 rounded-2xl text-xs font-bold bg-red-500/10 border border-red-500/50 text-red-400 flex items-start gap-3 animate-in slide-in-from-top-2",children:[n.jsx($n,{className:"w-4 h-4 shrink-0 mt-0.5"}),n.jsxs("div",{className:"flex-1",children:[d,d.includes("Administrator")&&n.jsx("p",{className:"text-[10px] mt-1 font-medium opacity-70",children:"New accounts must be provisioned by IT before sign-in."})]})]}),t==="initial"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1",children:"Professional Email"}),n.jsxs("div",{className:"relative",children:[n.jsx(rs,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),n.jsx("input",{type:"email",required:!0,placeholder:"alex@impact247.com",value:a,onChange:y=>s(y.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-white/5 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]})]}),t==="verify"&&n.jsxs("div",{className:"space-y-4 text-center",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Code sent to"}),n.jsx("p",{className:"text-sm font-semibold text-white",children:a})]}),n.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-6",children:"Enter Verification Code"}),n.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-3",children:i.map((y,j)=>n.jsx("input",{ref:N=>{f.current[j]=N},type:"text",inputMode:"numeric",maxLength:1,value:y,onChange:N=>b(j,N.target.value),onKeyDown:N=>v(j,N),onPaste:j===0?g:void 0,className:"w-12 h-14 md:w-14 md:h-16 bg-white/5 border-2 border-white/10 rounded-xl text-white text-center text-2xl md:text-3xl font-bold outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all text-center",autoComplete:"off",disabled:l},j))}),n.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[n.jsx("button",{type:"button",onClick:async()=>{u(null),o(["","","","","",""]),c(!0);try{await oI({email:a}),u(null),setTimeout(()=>f.current[0]?.focus(),100)}catch(y){u(y.message||"Failed to send new code.")}finally{c(!1)}},disabled:l,className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors disabled:opacity-50",children:l?"Sending...":"Request New Code"}),n.jsx("button",{type:"button",onClick:()=>{r("initial"),o(["","","","","",""]),u(null)},className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors",children:"Use a different email"})]})]}),n.jsx("button",{disabled:l||t==="verify"&&i.some(y=>y===""),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-bold rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg active:scale-[0.98]",children:l?n.jsx(gt,{className:"w-5 h-5 animate-spin"}):n.jsxs(n.Fragment,{children:[t==="initial"?"Request Access Code":"Secure Login",n.jsx(To,{className:"w-4 h-4"})]})})]}),n.jsxs("div",{className:"mt-12 pt-8 border-t border-white/5 text-center flex flex-col items-center gap-4",children:[n.jsxs("div",{className:"flex items-center justify-center gap-4",children:[n.jsx(dl,{className:"w-5 h-5 text-slate-700"}),n.jsx("div",{className:"w-1 h-1 bg-slate-800 rounded-full"}),n.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-[0.2em]",children:"Impact 24x7 Enterprise"})]}),n.jsxs("div",{className:"text-[10px] text-slate-500 font-medium max-w-[300px] space-y-2",children:[n.jsx("p",{children:"Access restricted to authorized personnel."}),n.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap pt-2",children:[n.jsx("a",{href:"/help",onClick:y=>{y.preventDefault(),window.history.pushState({},"","/help"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Help & Support",children:"Help"}),n.jsx("span",{className:"text-slate-600",children:""}),n.jsx("a",{href:"/privacy-policy",onClick:y=>{y.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Privacy Policy",children:"Privacy Policy"})]})]})]})]})})]})},Jbe=({children:e,onUserLoaded:t})=>{const[r,a]=D.useState(!0),[s,i]=D.useState(!1);return D.useEffect(()=>{(async()=>{const l=localStorage.getItem("auth_token"),c=localStorage.getItem("user_data");if(!l){c&&localStorage.removeItem("user_data"),a(!1);return}if(c)try{const d=JSON.parse(c);t(d),i(!0),a(!1),lI().then(u=>{const f=u.data||u,p=JSON.parse(localStorage.getItem("user_data")||"{}");JSON.stringify(f)!==JSON.stringify(p)&&(localStorage.setItem("user_data",JSON.stringify(f)),t(f))}).catch(u=>{console.warn("Session expired:",u),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.reload()});return}catch{localStorage.removeItem("user_data")}try{const d=await lI(),u=d.data||d;localStorage.setItem("user_data",JSON.stringify(u)),t(u),i(!0)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),i(!1)}finally{a(!1)}})()},[t]),r?n.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-950 text-white",children:[n.jsx(gt,{className:"w-10 h-10 animate-spin text-indigo-500 mb-4"}),n.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Establishing secure session..."})]}):s?n.jsx(n.Fragment,{children:e}):n.jsx(Qbe,{onLogin:o=>{localStorage.setItem("auth_token",o.token||o.data?.token);const l=o.user||o.data?.user||o.data;l&&(localStorage.setItem("user_data",JSON.stringify(l)),t(l)),i(!0)}})},Zbe=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onRefresh:a,isRefreshing:s=!1,onClose:i,onViewAll:o,onNavigate:l})=>{const c=(u,f)=>{if(u==="note-marked"||f?.toLowerCase().includes("marked"))return n.jsx(id,{className:"w-4 h-4 text-indigo-500"});if(f?.toLowerCase().includes("pipeline"))return n.jsx(Qd,{className:"w-4 h-4 text-purple-500"});switch(u){case"lead":return n.jsx(id,{className:"w-4 h-4 text-blue-500"});case"deal":return n.jsx(co,{className:"w-4 h-4 text-indigo-500"});case"task":return n.jsx(_i,{className:"w-4 h-4 text-emerald-500"});case"payment":return n.jsx(w0,{className:"w-4 h-4 text-red-500"});case"email-routing":return n.jsx(Xl,{className:"w-4 h-4 text-amber-500"});case"email-assigned":return n.jsx(rs,{className:"w-4 h-4 text-blue-500"});case"email-mention":return n.jsx(wh,{className:"w-4 h-4 text-violet-500"});case"new-email":return n.jsx(rs,{className:"w-4 h-4 text-slate-600"});default:return n.jsx(gx,{className:"w-4 h-4 text-slate-400"})}},d=(u,f)=>{if(u==="note-marked"||f?.toLowerCase().includes("marked"))return"bg-indigo-50";if(f?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(u){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}};return n.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[n.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[n.jsx(Pb,{className:"w-4 h-4 text-slate-500"}),"Notifications"]}),n.jsxs("div",{className:"flex items-center gap-3",children:[a&&n.jsx("button",{onClick:a,disabled:s,className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:n.jsx(sd,{className:`w-3.5 h-3.5 text-slate-600 ${s?"animate-spin":""}`})}),n.jsx("button",{onClick:r,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-wider",children:"Mark all as read"})]})]}),n.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length>0?n.jsx("div",{className:"divide-y divide-slate-50",children:e.map(u=>n.jsxs("div",{className:`p-4 flex gap-4 hover:bg-slate-50 transition-colors relative cursor-pointer group ${u.read?"":"bg-indigo-50/10"}`,onClick:()=>{if(t(u.id),u.link)if(u.link.startsWith("/?tab=")&&l){const p=new URL(u.link,window.location.origin).searchParams.get("tab");p?(l(p),localStorage.setItem("activeTab",p),window.history.replaceState(null,"",u.link),i()):window.location.href=u.link}else u.link.startsWith("/"),window.location.href=u.link},children:[n.jsx("div",{className:`shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${d(u.type,u.title)}`,children:c(u.type,u.title)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex justify-between items-start gap-2",children:[n.jsx("p",{className:`text-sm font-semibold truncate ${u.read?"text-slate-600":"text-slate-900"}`,children:u.title}),n.jsx("span",{className:"text-[10px] text-slate-400 font-medium shrink-0",children:u.timestamp})]}),n.jsx("p",{className:`text-xs mt-0.5 line-clamp-2 ${u.read?"text-slate-400":"text-slate-500"}`,children:u.message})]}),!u.read&&n.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:n.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})})]},u.id))}):n.jsxs("div",{className:"p-12 text-center text-slate-400",children:[n.jsx(cd,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),n.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),n.jsx("p",{className:"text-xs",children:"No new notifications at this time."})]})}),n.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50/50 text-center",children:n.jsx("button",{onClick:()=>{i(),o&&o()},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-widest transition-colors",children:"View all activity"})})]})},Wv=20,eye=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:a}=Cn(),[s,i]=D.useState([]),[o,l]=D.useState(!0),[c,d]=D.useState(!1),[u,f]=D.useState(1),[p,m]=D.useState(1),[b,v]=D.useState(0),[g,w]=D.useState(!1),y=D.useCallback(async(z=!1)=>{try{const H=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!H?.id)return;z?d(!0):l(!0);const Y=await rM(H.id,500),J=Y?.data||Y||[],re=(Array.isArray(J)?J:[]).map(X=>{let te="Just now";if(X.createdAt){const W=new Date(X.createdAt),q=new Date().getTime()-W.getTime(),G=Math.floor(q/6e4),U=Math.floor(q/36e5),K=Math.floor(q/864e5);G<1?te="Just now":G<60?te=`${G}m ago`:U<24?te=`${U}h ago`:K<7?te=`${K}d ago`:te=W.toLocaleDateString()}return{id:X.id,userId:X.userId,type:X.type||"system",title:X.title,message:X.message,timestamp:te,read:!!X.read,link:X.link||void 0}});i(re),v(re.length),m(Math.ceil(re.length/Wv))}catch(H){console.error("[NOTIFICATIONS] Failed to load notifications",H),a(H.message||"Failed to load notifications")}finally{l(!1),d(!1)}},[e,a]);D.useEffect(()=>{y(!1)},[y]),D.useEffect(()=>{f(1)},[g]),D.useEffect(()=>{const z=()=>{y(!0)};return window.addEventListener("refresh-notifications",z),()=>{window.removeEventListener("refresh-notifications",z)}},[y]);const j=async z=>{try{const H=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!H?.id)return;await nM(z,H.id),i(Y=>Y.map(J=>J.id===z?{...J,read:!0}:J)),window.dispatchEvent(new Event("refresh-notifications"))}catch(H){console.error("[NOTIFICATIONS] Failed to mark as read",H),a(H.message||"Failed to mark notification as read")}},N=async()=>{try{const z=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!z?.id)return;await aM(z.id),i(H=>H.map(Y=>({...Y,read:!0}))),r("All notifications marked as read"),window.dispatchEvent(new Event("refresh-notifications"))}catch(z){console.error("[NOTIFICATIONS] Failed to mark all as read",z),a(z.message||"Failed to mark all notifications as read")}},S=(z,H)=>{if(z==="note-marked"||H?.toLowerCase().includes("marked"))return n.jsx(id,{className:"w-5 h-5 text-indigo-500"});if(H?.toLowerCase().includes("pipeline"))return n.jsx(Qd,{className:"w-5 h-5 text-purple-500"});switch(z){case"lead":return n.jsx(id,{className:"w-5 h-5 text-blue-500"});case"deal":return n.jsx(co,{className:"w-5 h-5 text-indigo-500"});case"task":return n.jsx(_i,{className:"w-5 h-5 text-emerald-500"});case"payment":return n.jsx(w0,{className:"w-5 h-5 text-red-500"});case"email-routing":return n.jsx(Xl,{className:"w-5 h-5 text-amber-500"});case"email-assigned":return n.jsx(rs,{className:"w-5 h-5 text-blue-500"});case"email-mention":return n.jsx(wh,{className:"w-5 h-5 text-violet-500"});case"new-email":return n.jsx(rs,{className:"w-5 h-5 text-slate-600"});default:return n.jsx(gx,{className:"w-5 h-5 text-slate-400"})}},E=(z,H)=>{if(z==="note-marked"||H?.toLowerCase().includes("marked"))return"bg-indigo-50";if(H?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(z){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}},A=z=>{if(j(z.id),z.link)if(z.link.startsWith("/?tab=")){const Y=new URL(z.link,window.location.origin).searchParams.get("tab");Y&&t?t(Y):window.location.href=z.link}else z.link.startsWith("/"),window.location.href=z.link},P=g?s.filter(z=>z.type==="note-marked"||z.title?.toLowerCase().includes("marked")):s,I=(u-1)*Wv,B=I+Wv,T=P.slice(I,B),_=P.filter(z=>!z.read).length,R=Math.ceil(P.length/Wv);return n.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{children:[n.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[n.jsx(Pb,{className:"w-6 h-6 text-indigo-600"}),"Notifications"]}),n.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:_>0?`${_} unread notification${_!==1?"s":""}`:"All caught up!"})]}),n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsxs("button",{onClick:()=>w(!g),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center gap-2 ${g?"bg-indigo-600 text-white hover:bg-indigo-700":"text-slate-700 hover:bg-slate-100"}`,children:[n.jsx(id,{className:"w-4 h-4"}),g?"Show All":"Marked Notes"]}),n.jsxs("button",{onClick:()=>y(!0),disabled:c,className:"px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh notifications",children:[n.jsx(sd,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]}),_>0&&n.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-semibold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Mark all as read"})]})]}),o?n.jsx("div",{className:"flex items-center justify-center py-20",children:n.jsx(sd,{className:"w-8 h-8 animate-spin text-indigo-600"})}):P.length===0?n.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-12 text-center",children:[n.jsx(cd,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),n.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:g?"No marked notes":"All caught up!"}),n.jsx("p",{className:"text-sm text-slate-500",children:g?"No notes have been marked for you yet.":"No notifications at this time."})]}):n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:n.jsx("div",{className:"divide-y divide-slate-100",children:T.map(z=>n.jsxs("div",{className:`p-6 flex gap-4 hover:bg-slate-50 transition-colors cursor-pointer group ${z.read?"":"bg-indigo-50/30"}`,onClick:()=>A(z),children:[n.jsx("div",{className:`shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${E(z.type,z.title)}`,children:S(z.type,z.title)}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex justify-between items-start gap-4 mb-1",children:[n.jsx("p",{className:`text-sm font-semibold ${z.read?"text-slate-600":"text-slate-900 font-bold"}`,children:z.title}),n.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[n.jsx("span",{className:"text-xs text-slate-400 font-medium",children:z.timestamp}),!z.read&&n.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]})]}),n.jsx("p",{className:`text-sm ${z.read?"text-slate-400":"text-slate-600"}`,children:z.message})]})]},z.id))})}),R>1&&n.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-6 py-4",children:[n.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",n.jsx("span",{className:"font-semibold",children:I+1})," to"," ",n.jsx("span",{className:"font-semibold",children:Math.min(B,P.length)})," of"," ",n.jsx("span",{className:"font-semibold",children:P.length})," notifications"]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("button",{onClick:()=>f(z=>Math.max(1,z-1)),disabled:u===1,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(Wj,{className:"w-5 h-5"})}),n.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:R},(z,H)=>H+1).map(z=>z===1||z===p||z>=u-1&&z<=u+1?n.jsx("button",{onClick:()=>f(z),className:`px-3 py-1.5 text-sm font-semibold rounded-lg transition-colors ${u===z?"bg-indigo-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:z},z):z===u-2||z===u+2?n.jsx("span",{className:"px-2 text-slate-400",children:"..."},z):null)}),n.jsx("button",{onClick:()=>f(z=>Math.min(R,z+1)),disabled:u===R,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:n.jsx(wa,{className:"w-5 h-5"})})]})]})]})]})},s0=e=>{if(!e||!e.trim())return null;const t=e.trim();if(t.includes("@")){const r=t.split("@");if(r.length!==2||!r[1])return null;const a=r[1].toLowerCase().trim();return a.includes(".")?a:null}try{if(!t.includes(".")&&!t.startsWith("http"))return null;const a=(t.startsWith("http")?new URL(t):new URL(`https://${t}`)).hostname.replace(/^www\./,"").toLowerCase();return a.includes(".")?a:null}catch{const a=t.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].toLowerCase().trim()||null;return a&&a.includes(".")?a:null}},tye=(e,t)=>{if(!e||!t)return 0;const r=e.toLowerCase().trim(),a=t.toLowerCase().trim();if(r===a)return 1;const s=r.length,i=a.length;if(s===0||i===0)return 0;const o=[];for(let d=0;d<=s;d++)o[d]=[d];for(let d=0;d<=i;d++)o[0][d]=d;for(let d=1;d<=s;d++)for(let u=1;u<=i;u++){const f=r[d-1]===a[u-1]?0:1;o[d][u]=Math.min(o[d-1][u]+1,o[d][u-1]+1,o[d-1][u-1]+f)}const l=o[s][i],c=Math.max(s,i);return 1-l/c},rye=(e,t)=>{const r=[];if(!e.email)return r;const a=e.email.toLowerCase().trim();return t.forEach(s=>{s.id!==e.id&&s.email&&s.email.toLowerCase().trim()===a&&r.push({record:s,matchType:"exact",confidence:1})}),r},nye=(e,t,r=.8)=>{const a=[];return e.name&&t.forEach(s=>{if(s.id===e.id)return;const i=tye(e.name||"",s.name||"");i>=r&&a.push({record:s,matchType:"fuzzy",confidence:i,similarity:i})}),a},aye=["North America","South America","Europe","Asia","Africa","Middle East","Oceania","Central America","Caribbean","Eastern Europe","Western Europe","Northern Europe","Southern Europe","Southeast Asia","East Asia","South Asia","Central Asia","North Africa","Sub-Saharan Africa","Latin America","United States","Canada","Mexico","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Russia","China","Japan","India","South Korea","Singapore","Australia","New Zealand","Brazil","Argentina","Chile","United Arab Emirates","Saudi Arabia","Israel","South Africa","Global","International"],sye=({type:e,stage:t,lockedType:r,onClose:a,onSuccess:s})=>{const[i,o]=D.useState(e),[l,c]=D.useState("form"),[d,u]=D.useState(!1),[f,p]=D.useState(null),[m,b]=D.useState({}),[v,g]=D.useState([]),[w,y]=D.useState([]),[j,N]=D.useState([]),[S,E]=D.useState([]),[A,P]=D.useState([]),[I,B]=D.useState(!1),[T,_]=D.useState(!1),[R,z]=D.useState(""),H=D.useRef(null),[Y,J]=D.useState(null),[re,X]=D.useState(!1),[te,W]=D.useState(""),[O,q]=D.useState(null),G=D.useRef(null),[U,K]=D.useState({name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",currency:Si,expectedCloseDate:"",stage:"Discovery",status:"Planning",progress:"0",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",priority:"Medium",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:"",lineItems:[]});D.useEffect(()=>{const ie={name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",expectedCloseDate:"",stage:t||"Discovery",status:"Planning",progress:"0",priority:"Medium",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:""};e==="invoice"?(ie.lineItems=[{description:"",quantity:1,rate:0,amount:0}],ie.currency=Si):(ie.lineItems=[],e!=="deal"&&(ie.currency=Si)),K(Z=>({...Z,...ie})),p(null),b({}),c("form"),B(!1),W(""),q(null),G.current&&(G.current.value="")},[e,t]),D.useEffect(()=>{(async()=>{try{const Ee=JSON.parse(localStorage.getItem("user_data")||"{}")?.id,[we,Oe,de,ce]=await Promise.all([_c(),md(),Ch(),D0(Ee)]);N(we.data||[]),g(Oe.data||[]),y(de.data||[]);const Ce=Array.isArray(ce)?ce:ce?.data||[];if(E(Ce.filter(Xe=>!Xe.archived)),i==="task")try{const Xe=await cb(),xe=Array.isArray(Xe?.data)?Xe.data:[];P(xe)}catch{P([])}else P([]);Ee&&K(Xe=>({...Xe,ownerId:Xe.ownerId||Ee,assigneeId:Xe.assigneeId||Ee}))}catch(Z){console.error("[QUICK-CREATE] Data fetch failed:",Z)}})()},[i]),D.useEffect(()=>{const ie=Z=>{H.current&&!H.current.contains(Z.target)&&(_(!1),z(""))};if(T)return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[T]);const ae=aye.filter(ie=>ie.toLowerCase().includes(R.toLowerCase())),me=(ie,Z=1200,Ee=1200,we=.8)=>new Promise((Oe,de)=>{const ce=new FileReader;ce.onload=Ce=>{const Xe=new Image;Xe.onload=()=>{let xe=Xe.width,fe=Xe.height;xe>fe?xe>Z&&(fe=fe*Z/xe,xe=Z):fe>Ee&&(xe=xe*Ee/fe,fe=Ee);const Se=document.createElement("canvas");Se.width=xe,Se.height=fe;const qe=Se.getContext("2d");qe?(qe.drawImage(Xe,0,0,xe,fe),Oe(Se.toDataURL("image/jpeg",we))):de(new Error("Canvas context not available"))},Xe.onerror=()=>de(new Error("Failed to load image")),Xe.src=Ce.target?.result},ce.onerror=()=>de(new Error("Failed to read file")),ce.readAsDataURL(ie)}),se=async ie=>{const Z=ie.target.files?.[0];if(Z){if(!Z.type.startsWith("image/")){p("Please select an image file");return}if(Z.size>10*1024*1024){p("Image size must be less than 10MB");return}try{const Ee=await me(Z,1200,1200,.8);W(Ee),q(Z),p(null)}catch(Ee){p(Ee.message||"Failed to process image")}}},le=()=>{W(""),q(null),G.current&&(G.current.value=""),a()},Me=()=>{const ie={};if(i==="contact")U.name?.trim()||(ie.name="Full Name is required"),U.email?.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U.email)||(ie.email="Please enter a valid email address"):ie.email="Email Address is required";else if(i==="company"){U.name?.trim()||(ie.name="Company Name is required"),(!U.region||U.region.trim()==="")&&(ie.region="Region is required"),U.ownerId?.trim()||(ie.ownerId="Assignee / Lead is required");let Z=U.domain;!Z&&U.website&&(Z=s0(U.website)||""),!Z&&U.email&&(Z=s0(U.email)||""),(!Z||Z.trim()==="")&&(ie.domain="Domain is required (can be auto-populated from website or email)",ie.website="Add website or email to auto-populate domain")}else if(i==="deal")U.title?.trim()||(ie.title="Deal Name is required"),U.companyId?.trim()||(ie.companyId="Organization is required"),(!U.value||parseFloat(U.value)<=0)&&(ie.value="Amount is required and must be greater than $0"),U.stage?.trim()||(ie.stage="Stage is required"),U.ownerId||(ie.ownerId="Assignee / Lead is required");else if(i==="project"){if(U.title?.trim()||(ie.title="Project Name is required"),U.engagement?.trim()||(ie.engagement="Engagement is required"),U.startDate?.trim()||(ie.startDate="Start Date is required"),U.endDate?.trim()||(ie.endDate="End Date is required"),U.startDate&&U.endDate){const Z=new Date(U.startDate),Ee=new Date(U.endDate);!isNaN(Z.getTime())&&!isNaN(Ee.getTime())&&Z>=Ee&&(ie.endDate="End Date must be after Start Date")}U.ownerId||(ie.ownerId="Assignee / Lead is required")}else i==="task"?(U.title?.trim()||(ie.title="Task Title is required"),U.assigneeId||(ie.assigneeId="Designated Lead / Assignee is required")):i==="invoice"&&(U.companyId||(ie.companyId="Client (Organization) is required"),(!U.expectedCloseDate||U.expectedCloseDate.trim()==="")&&(ie.expectedCloseDate=i==="deal"?"Expected Close Date is required":"Due Date is required"),!U.lineItems||U.lineItems.length===0?ie.lineItems="At least one line item is required":(U.lineItems.forEach((Ee,we)=>{(!Ee.description||!Ee.description.trim())&&(ie[`lineItem_${we}_description`]=`Line item ${we+1}: Description is required`),(!Ee.quantity||Ee.quantity<=0)&&(ie[`lineItem_${we}_quantity`]=`Line item ${we+1}: Quantity must be greater than 0`),(!Ee.rate||Ee.rate<=0)&&(ie[`lineItem_${we}_rate`]=`Line item ${we+1}: Rate must be greater than 0`)}),U.lineItems.reduce((Ee,we)=>{const Oe=we.amount||we.rate*we.quantity||0;return Ee+Oe},0)<=0&&(ie.lineItems="Total amount must be greater than $0")));return b(ie),Object.keys(ie).length===0},ue=async ie=>{if(ie.preventDefault(),d)return;if(p(null),!Me()){u(!1);return}u(!0),console.debug(`[QUICK-CREATE] Deployment Start. Type: ${i}`,U);try{const we=JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(i==="contact"){const Oe={name:U.name,email:U.email},de=rye(Oe,w),ce=nye(Oe,w,.8);if(de.length>0||ce.length>0){const Ce=new Map,Xe=new Set;de.forEach(fe=>{const Se=fe.record,qe=Se.id||Se.email?.toLowerCase().trim()||"";qe&&!Ce.has(qe)&&(Ce.set(qe,{...Se,matchType:"exact",matchReason:"email"}),Se.email&&Xe.add(Se.email.toLowerCase().trim()))}),ce.forEach(fe=>{const Se=fe.record,qe=Se.id||Se.email?.toLowerCase().trim()||"",je=Se.email?.toLowerCase().trim();qe&&!Ce.has(qe)&&(!je||!Xe.has(je))&&(Ce.set(qe,{...Se,matchType:"fuzzy",matchReason:"name",similarity:fe.similarity}),je&&Xe.add(je))});const xe=Array.from(Ce.values());J({open:!0,duplicates:xe,newContact:{name:U.name,email:U.email,companyId:U.companyId||void 0,role:U.role,phone:U.phone,linkedin:U.linkedin||void 0}}),u(!1);return}await cI({name:U.name,companyId:U.companyId||void 0,role:U.role,email:U.email,phone:U.phone,linkedin:U.linkedin||void 0})}else if(i==="company"){let Oe=U.domain;!Oe&&U.website&&(Oe=s0(U.website)||void 0),!Oe&&U.email&&(Oe=s0(U.email)||void 0);const de={name:U.name?.trim(),industry:U.industry?.trim(),region:U.region?.trim()||"",website:U.website?.trim()||void 0,email:U.email?.trim()||void 0,domain:Oe||"",linkedin:U.linkedin?.trim()||void 0,ownerId:U.ownerId||we};if(!de.region){b({region:"Region is required"}),u(!1);return}if(!de.domain){b({domain:"Domain is required (can be auto-populated from website or email)"}),u(!1);return}await Bne(de)}else if(i==="deal"){if(!U.companyId||U.companyId.trim()===""){b({companyId:"Organization is required"}),u(!1);return}if(!U.value||parseFloat(U.value)<=0){b({value:"Amount is required and must be greater than $0"}),u(!1);return}if(!U.stage||U.stage.trim()===""){b({stage:"Stage is required"}),u(!1);return}await Une({title:U.title,companyId:U.companyId.trim(),value:parseFloat(U.value),currency:U.currency||Si,stage:U.stage,pipelineType:"sales",ownerId:U.ownerId,expectedCloseDate:U.expectedCloseDate||void 0,description:U.description||void 0})}else if(i==="project"){const Oe={};if(U.title?.trim()||(Oe.title="Project Name is required"),U.engagement?.trim()||(Oe.engagement="Engagement is required"),U.startDate?.trim()||(Oe.startDate="Start Date is required"),U.endDate?.trim()||(Oe.endDate="End Date is required"),U.ownerId?.trim()||(Oe.ownerId="Assignee / Lead is required"),U.startDate&&U.endDate){const ce=new Date(U.startDate),Ce=new Date(U.endDate);!isNaN(ce.getTime())&&!isNaN(Ce.getTime())&&ce>=Ce&&(Oe.endDate="End Date must be after Start Date")}if(Object.keys(Oe).length>0){b(Oe),u(!1);return}console.debug("[QUICK-CREATE] Attempting Project Creation...",{title:U.title,engagement:U.engagement,startDate:U.startDate,endDate:U.endDate,ownerId:U.ownerId});const de={title:U.title.trim(),engagement:U.engagement.trim(),startDate:U.startDate,endDate:U.endDate,companyId:U.companyId&&U.companyId.trim()!==""?U.companyId:void 0,status:U.status,ownerId:U.ownerId,projectManager:U.ownerId,progress:0,description:U.description||void 0};te&&O&&(de.noteImage=te,de.noteImageName=O.name,de.noteImageMimeType=O.type),console.debug("[QUICK-CREATE] Project payload:",de),await $ne(de)}else if(i==="task"){console.debug("[QUICK-CREATE] Attempting Task Creation...",{title:U.title,assigneeId:U.assigneeId});const Oe={title:U.title,projectId:U.projectId||void 0,description:U.description||void 0,dueDate:U.expectedCloseDate||void 0,priority:U.priority,status:"Todo",assigneeId:U.assigneeId,category:U.category&&U.category.trim()?U.category.trim():void 0};if(te||U.description){const de=JSON.parse(localStorage.getItem("user_data")||"{}"),ce={id:`note_${Date.now()}`,userId:we||de.id,userName:de.name||"Unknown User",text:U.description||"",createdAt:new Date().toISOString()};te&&O&&(ce.imageUrl=te,ce.imageName=O.name,ce.imageMimeType=O.type),Oe.notes=[ce]}await Z7(Oe),window.dispatchEvent(new Event("refresh-tasks"))}else if(i==="invoice"){const Oe={};if(U.companyId?.trim()||(Oe.companyId="Client (Organization) is required"),U.expectedCloseDate?.trim()||(Oe.expectedCloseDate="Due Date is required"),(!U.lineItems||U.lineItems.length===0)&&(Oe.lineItems="At least one line item is required"),U.lineItems&&U.lineItems.length>0&&U.lineItems.forEach((Ce,Xe)=>{(!Ce.description||!Ce.description.trim())&&(Oe[`lineItem_${Xe}_description`]=`Line item ${Xe+1}: Description is required`),(!Ce.quantity||Ce.quantity<=0)&&(Oe[`lineItem_${Xe}_quantity`]=`Line item ${Xe+1}: Quantity must be greater than 0`),(!Ce.rate||Ce.rate<=0)&&(Oe[`lineItem_${Xe}_rate`]=`Line item ${Xe+1}: Rate must be greater than 0`)}),Object.keys(Oe).length>0){b(Oe),u(!1);return}const de=U.lineItems.map(Ce=>({description:Ce.description.trim(),quantity:Ce.quantity,rate:Ce.rate,amount:Ce.amount||Ce.rate*Ce.quantity})),ce=de.reduce((Ce,Xe)=>Ce+(Xe.amount||0),0);if(ce<=0){b({lineItems:"At least one line item with a valid amount is required"}),u(!1);return}console.debug("[QUICK-CREATE] Creating invoice with:",{companyId:U.companyId,amount:ce,dueDate:U.expectedCloseDate,lineItemsCount:de.length,lineItems:de,name:U.name,description:U.description}),await Hne({companyId:U.companyId,amount:ce,currency:U.currency||Si,dueDate:U.expectedCloseDate,description:U.name||U.description||"",lineItems:de,items:de,status:"Draft",userId:we||void 0}),window.dispatchEvent(new Event("refresh-invoices"))}console.debug("[QUICK-CREATE] Registry success. Finalizing UI update."),c("success"),W(""),q(null),G.current&&(G.current.value=""),i==="project"?(console.log("[QUICK-CREATE] Dispatching refresh-projects event"),window.dispatchEvent(new Event("refresh-projects"))):i==="invoice"&&(console.log("[QUICK-CREATE] Dispatching refresh-invoices event"),window.dispatchEvent(new Event("refresh-invoices"))),s&&(console.log("[QUICK-CREATE] Calling onSuccess callback"),s()),setTimeout(()=>{a()},1500)}catch(Ee){if(console.error("[QUICK-CREATE] Deployment failed:",Ee),console.error("[QUICK-CREATE] Error details:",{message:Ee.message,code:Ee.code,status:Ee.status,details:Ee.details,type:i}),Ee.code==="DUPLICATE_DETECTED"&&Ee.duplicates&&i==="contact"){const we=new Map;Ee.duplicates.forEach(de=>{if(de.id)if(!we.has(de.id))we.set(de.id,de);else{const ce=we.get(de.id);de.matchType==="exact"&&ce.matchType!=="exact"&&we.set(de.id,de)}});const Oe=Array.from(we.values());J({open:!0,duplicates:Oe,newContact:{name:U.name,email:U.email,companyId:U.companyId||void 0,role:U.role,phone:U.phone,linkedin:U.linkedin||void 0}}),u(!1);return}if(Ee.code==="VALIDATION_ERROR"||Ee.details&&Ee.details.errors){const we={};(Ee.details?.errors||(Ee.message?[Ee.message]:[])).forEach(de=>{const ce=de.toLowerCase();if(ce.includes("name")||ce.includes("title"))we.title=de;else if(ce.includes("industry"))we.industry=de;else if(ce.includes("region"))we.region=de;else if(ce.includes("domain"))we.domain=de;else if(ce.includes("email"))we.email=de;else if(ce.includes("engagement"))we.engagement=de;else if(ce.includes("start date")||ce.includes("startdate"))we.startDate=de;else if(ce.includes("end date")||ce.includes("enddate"))we.endDate=de;else if(ce.includes("project manager")||ce.includes("manager"))we.ownerId=de;else if(ce.includes("assignee")||ce.includes("lead")||ce.includes("owner"))we.ownerId=de;else if(ce.includes("client")||ce.includes("company"))we.companyId=de;else if(ce.includes("due date")||ce.includes("duedate"))we.expectedCloseDate=de;else if(ce.includes("line item")){const Ce=ce.match(/line item (\d+):\s*(.+)/);if(Ce){const Xe=parseInt(Ce[1])-1,xe=Ce[2];xe.includes("description")?we[`lineItem_${Xe}_description`]=de:xe.includes("quantity")?we[`lineItem_${Xe}_quantity`]=de:(xe.includes("rate")||xe.includes("amount"))&&(we[`lineItem_${Xe}_rate`]=de)}else we.lineItems=de}else ce.includes("amount")&&!ce.includes("line item")&&(we.lineItems=de)}),Object.keys(we).length>0?(b(we),p("Please correct the validation errors below")):p(Ee.message||"Validation failed. Please check all required fields.")}else p(Ee.message||"Operational error. Verify mandatory fields and team authorization.");u(!1)}},Ue=()=>{switch(i){case"deal":return"New Opportunity";case"project":return"New Project";case"task":return"New Task";case"invoice":return"New Invoice";case"company":return"Add Company";case"contact":return"Add Contact";default:return"Quick Entry"}},Ae=()=>n.jsx("span",{className:"text-red-500 ml-1 font-black text-base",children:"*"});return l==="success"?n.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-sm p-12 text-center animate-in zoom-in-95 duration-300 shadow-2xl",children:[n.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 text-emerald-500 ring-8 ring-emerald-50/50",children:n.jsx(Nn,{className:"w-12 h-12 animate-in zoom-in duration-500"})}),n.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Deployment Success"}),n.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Record integrated into ImpactFlow OS."})]})}):n.jsxs("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[n.jsxs("div",{className:"bg-white rounded-[48px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-5",children:[n.jsxs("div",{className:"p-4 bg-indigo-600 rounded-[20px] text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:[(i==="deal"||i==="company")&&n.jsx(dl,{className:"w-6 h-6"}),i==="project"&&n.jsx(Yd,{className:"w-6 h-6"}),i==="task"&&n.jsx(_i,{className:"w-6 h-6"}),i==="invoice"&&n.jsx(Qn,{className:"w-6 h-6"}),i==="contact"&&n.jsx(qi,{className:"w-6 h-6"})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none mb-1",children:Ue()}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black",children:"WORKSPACE UPDATE"})]})]}),n.jsx("button",{onClick:le,className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:n.jsx(tr,{className:"w-6 h-6"})})]}),n.jsxs("form",{onSubmit:ue,className:"p-8 space-y-8 max-h-[75vh] overflow-y-auto custom-scrollbar",children:[!r&&n.jsx("div",{className:"flex bg-slate-100 p-1 rounded-[20px] mb-4 overflow-x-auto scrollbar-hide border border-slate-200",children:["deal","project","task","invoice","company","contact"].map(ie=>n.jsx("button",{type:"button",onClick:()=>o(ie),className:`flex-1 min-w-[80px] flex items-center justify-center py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${i===ie?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:ie},ie))}),f&&Object.keys(m).length===0&&n.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs p-5 rounded-3xl font-bold flex items-start gap-3 animate-in slide-in-from-top-2",children:[n.jsx($n,{className:"w-5 h-5 shrink-0"}),n.jsx("span",{children:f})]}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Name"," ",n.jsx(Ae,{})]}),n.jsx("input",{required:!0,type:"text",placeholder:i==="deal"?"e.g., Q4 Logistics Transformation":"Name...",value:i==="deal"||i==="project"||i==="task"?U.title:U.name,onChange:ie=>{const Z=i==="deal"||i==="project"||i==="task"?"title":"name";K(Ee=>({...Ee,[Z]:ie.target.value})),m[Z]&&b(Ee=>{const we={...Ee};return delete we[Z],we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.title||m.name?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),(m.title||m.name)&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.title||m.name]})]}),(i==="deal"||i==="project"||i==="invoice"||i==="contact")&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Organization ",(i==="deal"||i==="invoice")&&n.jsx(Ae,{})]}),n.jsxs("select",{required:i==="deal"||i==="invoice",value:U.companyId,onChange:ie=>{K(Z=>({...Z,companyId:ie.target.value})),m.companyId&&b(Z=>{const Ee={...Z};return delete Ee.companyId,Ee})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${m.companyId?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${m.companyId?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[n.jsx("option",{value:"",children:i==="deal"||i==="invoice"?"Select Organization":"No Organization"}),v.map(ie=>n.jsx("option",{value:ie.id,children:ie.name},ie.id))]}),m.companyId&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.companyId]})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Email ",n.jsx(Ae,{})]}),n.jsx("input",{required:!0,type:"email",placeholder:"contact@company.com",value:U.email,onChange:ie=>{K(Z=>({...Z,email:ie.target.value})),m.email&&b(Z=>{const Ee={...Z};return delete Ee.email,Ee})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.email&&i==="contact"&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.email]})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Role / Title"}),n.jsx("input",{type:"text",placeholder:"e.g., CEO, Manager",value:U.role,onChange:ie=>K(Z=>({...Z,role:ie.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="contact"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Phone Number"}),n.jsx("input",{type:"tel",placeholder:"+1 (555) 000-0000",value:U.phone,onChange:ie=>K(Z=>({...Z,phone:ie.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Industry"}),n.jsx("input",{type:"text",placeholder:"e.g., Technology, Healthcare",value:U.industry,onChange:ie=>{K(Z=>({...Z,industry:ie.target.value})),m.industry&&b(Z=>{const Ee={...Z};return delete Ee.industry,Ee})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.industry?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.industry&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.industry]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2 relative",ref:H,children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Region ",n.jsx(Ae,{})]}),n.jsxs("div",{className:"relative",children:[n.jsxs("button",{type:"button",onClick:()=>{_(!T),T||z("")},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold text-left flex items-center justify-between ${m.region?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"} ${U.region?"text-slate-900":"text-slate-400"}`,children:[n.jsx("span",{children:U.region||"Select Region"}),n.jsx(Fs,{className:`w-4 h-4 text-slate-400 transition-transform ${T?"rotate-180":""}`})]}),T&&n.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-[20px] shadow-2xl max-h-64 overflow-hidden",children:[n.jsx("div",{className:"p-3 border-b border-slate-100",children:n.jsxs("div",{className:"relative",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{type:"text",placeholder:"Search regions...",value:R,onChange:ie=>z(ie.target.value),onClick:ie=>ie.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]})}),n.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:ae.length>0?ae.map(ie=>n.jsx("button",{type:"button",onClick:()=>{const Z=ie.trim();K(Ee=>({...Ee,region:Z})),_(!1),z(""),b(Ee=>{const we={...Ee};return delete we.region,we}),p(null)},className:`w-full px-6 py-3 text-left text-sm font-bold transition-colors hover:bg-indigo-50 ${U.region===ie?"bg-indigo-50 text-indigo-600":"text-slate-900"}`,children:ie},ie)):n.jsx("div",{className:"px-6 py-4 text-sm text-slate-400 font-bold text-center",children:"No regions found"})})]})]}),m.region&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1 mt-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.region]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Website"}),n.jsx("input",{type:"url",placeholder:"https://www.example.com",value:U.website,onChange:ie=>{const Z=ie.target.value;K(Ee=>{const we={...Ee,website:Z},Oe=Z?s0(Z):null,de=Ee.email?s0(Ee.email):null;return we.domain=Oe||de||"",we}),(m.domain||m.website)&&b(Ee=>{const we={...Ee};return delete we.domain,delete we.website,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.website?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.website&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.website]})]}),i==="company"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Email"}),n.jsx("input",{type:"email",placeholder:"contact@company.com",value:U.email,onChange:ie=>{const Z=ie.target.value;K(Ee=>{const we={...Ee,email:Z},Oe=Ee.website?s0(Ee.website):null,de=Z?s0(Z):null;return we.domain=Oe||de||"",we}),(m.email||m.domain)&&b(Ee=>{const we={...Ee};return delete we.email,delete we.domain,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.email&&i==="contact"&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.email]})]}),i==="company"&&U.domain&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Domain ",n.jsx("span",{className:"text-xs text-slate-400",children:"(auto-populated)"})]}),n.jsx("input",{type:"text",value:U.domain,readOnly:!0,className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold cursor-not-allowed ${m.domain?"bg-red-50 border-2 border-red-500 text-red-600":"bg-slate-100 border border-slate-200 text-slate-600"}`}),m.domain&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.domain]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Linked Project"}),n.jsxs("select",{value:U.projectId||"",onChange:ie=>{const Z=ie.target.value;K(Ee=>({...Ee,projectId:Z===""?"":Z}))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),S.map(ie=>n.jsx("option",{value:ie.id,children:ie.title},ie.id))]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1 flex items-center gap-1.5",children:[n.jsx(Ms,{className:"w-3.5 h-3.5"})," Task Category"]}),n.jsxs("select",{value:I?"__new__":U.category||"",onChange:ie=>{const Z=ie.target.value;Z==="__new__"?(B(!0),K(Ee=>({...Ee,category:""}))):(B(!1),K(Ee=>({...Ee,category:Z})))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[n.jsx("option",{value:"",children:"None"}),A.map(ie=>n.jsx("option",{value:ie,children:ie},ie)),n.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),I&&n.jsx("div",{className:"pt-1",children:n.jsx("input",{type:"text",value:U.category,onChange:ie=>K(Z=>({...Z,category:ie.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-6 py-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 font-medium"})})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["ASSIGNEE / LEAD ",n.jsx(Ae,{})]}),n.jsxs("select",{required:!0,value:i==="task"?U.assigneeId:U.ownerId,onChange:ie=>{const Z=i==="task"?"assigneeId":"ownerId";K(Ee=>({...Ee,[Z]:ie.target.value})),m[Z]&&b(Ee=>{const we={...Ee};return delete we[Z],we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none ${m.ownerId||m.assigneeId?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`,children:[n.jsx("option",{value:"",children:"Select Resource Personnel"}),j.map(ie=>n.jsx("option",{value:ie.id,children:ie.name},ie.id))]}),(m.ownerId||m.assigneeId)&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.ownerId||m.assigneeId]})]}),i==="deal"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Value ",n.jsx(Ae,{})]}),n.jsxs("div",{className:"flex gap-3",children:[n.jsx("div",{className:"relative w-32",children:n.jsx("select",{value:U.currency||Si,onChange:ie=>{K(Z=>({...Z,currency:ie.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:ep.map(ie=>n.jsxs("option",{value:ie.code,children:[ie.code," (",ie.symbol,")"]},ie.code))})}),n.jsxs("div",{className:"relative flex-1",children:[n.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-indigo-500 font-black text-sm",children:ff(U.currency)}),n.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0.00",value:U.value,onChange:ie=>{K(Z=>({...Z,value:ie.target.value})),m.value&&b(Z=>{const Ee={...Z};return delete Ee.value,Ee})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-black transition-all ${m.value?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600 text-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600"}`})]})]}),m.value&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.value]})]}),i==="invoice"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Currency"}),n.jsx("div",{className:"relative w-full",children:n.jsx("select",{value:U.currency||Si,onChange:ie=>{K(Z=>({...Z,currency:ie.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:ep.map(ie=>n.jsxs("option",{value:ie.code,children:[ie.code," (",ie.symbol,")"]},ie.code))})})]}),i==="invoice"&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Line Items ",n.jsx(Ae,{})]}),n.jsxs("div",{className:"space-y-3",children:[U.lineItems.map((ie,Z)=>n.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-[20px] space-y-3",children:[n.jsxs("div",{className:"flex items-center justify-between mb-2",children:[n.jsxs("span",{className:"text-xs font-bold text-slate-600",children:["Item ",Z+1]}),U.lineItems.length>1&&n.jsx("button",{type:"button",onClick:()=>{const Ee=U.lineItems.filter((we,Oe)=>Oe!==Z);K(we=>({...we,lineItems:Ee})),b(we=>{const Oe={...we};return delete Oe[`lineItem_${Z}_description`],delete Oe[`lineItem_${Z}_quantity`],delete Oe[`lineItem_${Z}_rate`],Oe})},className:"text-red-500 hover:text-red-700 text-xs font-bold",children:"Remove"})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Description ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"text",placeholder:"Item description",value:ie.description,onChange:Ee=>{const we=[...U.lineItems];we[Z]={...we[Z],description:Ee.target.value},K(Oe=>({...Oe,lineItems:we})),m[`lineItem_${Z}_description`]&&b(Oe=>{const de={...Oe};return delete de[`lineItem_${Z}_description`],de})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${m[`lineItem_${Z}_description`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),m[`lineItem_${Z}_description`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:m[`lineItem_${Z}_description`]})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Quantity ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"1",value:ie.quantity||"",onChange:Ee=>{const we=parseFloat(Ee.target.value)||0,Oe=ie.rate||0,de=[...U.lineItems];de[Z]={...de[Z],quantity:we,amount:we*Oe},K(ce=>({...ce,lineItems:de})),m[`lineItem_${Z}_quantity`]&&b(ce=>{const Ce={...ce};return delete Ce[`lineItem_${Z}_quantity`],Ce})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${m[`lineItem_${Z}_quantity`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),m[`lineItem_${Z}_quantity`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:m[`lineItem_${Z}_quantity`]})]}),n.jsxs("div",{children:[n.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Rate (",ff(U.currency),") ",n.jsx("span",{className:"text-red-500",children:"*"})]}),n.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:ie.rate||"",onChange:Ee=>{const we=parseFloat(Ee.target.value)||0,Oe=ie.quantity||0,de=[...U.lineItems];de[Z]={...de[Z],rate:we,amount:Oe*we},K(ce=>({...ce,lineItems:de})),m[`lineItem_${Z}_rate`]&&b(ce=>{const Ce={...ce};return delete Ce[`lineItem_${Z}_rate`],Ce})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${m[`lineItem_${Z}_rate`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),m[`lineItem_${Z}_rate`]&&n.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:m[`lineItem_${Z}_rate`]})]})]}),n.jsxs("div",{children:[n.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:"Amount"}),n.jsx("div",{className:"px-4 py-2 bg-indigo-50 border border-indigo-200 rounded-xl",children:n.jsxs("p",{className:"text-sm font-black text-indigo-600",children:[ff(U.currency),((ie.quantity||0)*(ie.rate||0)).toFixed(2)]})})]})]},Z)),n.jsxs("button",{type:"button",onClick:()=>{K(ie=>({...ie,lineItems:[...ie.lineItems,{description:"",quantity:1,rate:0,amount:0}]})),m.lineItems&&b(ie=>{const Z={...ie};return delete Z.lineItems,Z})},className:"w-full px-4 py-3 bg-indigo-50 border-2 border-dashed border-indigo-300 rounded-xl text-sm font-bold text-indigo-600 hover:bg-indigo-100 hover:border-indigo-400 transition-colors flex items-center justify-center gap-2",children:[n.jsx(ln,{className:"w-4 h-4"}),"Add Line Item"]}),m.lineItems&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.lineItems]})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Total Amount (",ff(U.currency),")"]}),n.jsxs("div",{className:"relative",children:[n.jsx(Mu,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-500"}),n.jsxs("div",{className:"w-full pl-12 pr-6 py-4 rounded-[20px] text-sm font-black bg-indigo-50 border-2 border-indigo-200 text-indigo-600",children:[ff(U.currency),U.lineItems.reduce((ie,Z)=>{const Ee=Z.amount||Z.rate*Z.quantity||0;return ie+Ee},0).toFixed(2)]})]})]})]}),i==="deal"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Stage ",n.jsx(Ae,{})]}),n.jsxs("select",{required:!0,value:U.stage,onChange:ie=>{K(Z=>({...Z,stage:ie.target.value})),m.stage&&b(Z=>{const Ee={...Z};return delete Ee.stage,Ee})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${m.stage?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${m.stage?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[n.jsx("option",{value:"",children:"Select Stage"}),n.jsx("option",{value:"Discovery",children:"Discovery"}),n.jsx("option",{value:"Proposal",children:"Proposal"}),n.jsx("option",{value:"Negotiation",children:"Negotiation"}),n.jsx("option",{value:"Won",children:"Won"}),n.jsx("option",{value:"Lost",children:"Lost"})]}),m.stage&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.stage]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Engagement ",n.jsx(Ae,{})]}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g., Consulting, Implementation, Support",value:U.engagement,onChange:ie=>{K(Z=>({...Z,engagement:ie.target.value})),m.engagement&&b(Z=>{const Ee={...Z};return delete Ee.engagement,Ee})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${m.engagement?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),m.engagement&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.engagement]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Start Date ",n.jsx(Ae,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Jn,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:U.startDate,onChange:ie=>{if(K(Z=>({...Z,startDate:ie.target.value})),m.startDate&&b(Z=>{const Ee={...Z};return delete Ee.startDate,Ee}),ie.target.value&&U.endDate){const Z=new Date(ie.target.value),Ee=new Date(U.endDate);!isNaN(Z.getTime())&&!isNaN(Ee.getTime())&&Z>=Ee?b(we=>({...we,endDate:"End Date must be after Start Date"})):m.endDate==="End Date must be after Start Date"&&b(we=>{const Oe={...we};return delete Oe.endDate,Oe})}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${m.startDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),m.startDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.startDate]})]}),i==="project"&&n.jsxs("div",{className:"space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["End Date ",n.jsx(Ae,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Jn,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:U.endDate,onChange:ie=>{if(K(Z=>({...Z,endDate:ie.target.value})),m.endDate&&b(Z=>{const Ee={...Z};return delete Ee.endDate,Ee}),U.startDate&&ie.target.value){const Z=new Date(U.startDate),Ee=new Date(ie.target.value);!isNaN(Z.getTime())&&!isNaN(Ee.getTime())&&Z>=Ee&&b(we=>({...we,endDate:"End Date must be after Start Date"}))}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${m.endDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),m.endDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.endDate]})]}),i==="invoice"&&n.jsxs("div",{className:"md:col-span-2 space-y-2",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Due Date ",n.jsx(Ae,{})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Jn,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),n.jsx("input",{required:!0,type:"date",value:U.expectedCloseDate,onChange:ie=>{K(Z=>({...Z,expectedCloseDate:ie.target.value})),m.expectedCloseDate&&b(Z=>{const Ee={...Z};return delete Ee.expectedCloseDate,Ee})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${m.expectedCloseDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),m.expectedCloseDate&&n.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[n.jsx($n,{className:"w-3 h-3"}),m.expectedCloseDate]})]}),i!=="invoice"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:i==="deal"?"Expected Close Date":"DUE DATE"}),n.jsxs("div",{className:"relative",children:[n.jsx(Jn,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),n.jsx("input",{type:"date",value:U.expectedCloseDate,onChange:ie=>K(Z=>({...Z,expectedCloseDate:ie.target.value})),placeholder:"dd/mm/yyyy",className:"w-full pl-12 pr-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 font-bold placeholder:text-slate-300 [color-scheme:light]"})]})]}),i==="task"&&n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"PRIORITY"}),n.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200",children:["Low","Medium","High"].map(ie=>n.jsx("button",{type:"button",onClick:()=>K({...U,priority:ie}),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${U.priority===ie?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:ie.toUpperCase()},ie))})]}),n.jsxs("div",{className:"md:col-span-2 space-y-3",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"DESCRIPTION"}),i==="task"?n.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:n.jsx(a_,{value:U.description||"",onChange:ie=>K(Z=>({...Z,description:ie})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):n.jsx("textarea",{placeholder:"Add Context or Notes...",value:U.description,onChange:ie=>K(Z=>({...Z,description:ie.target.value})),rows:3,className:"w-full px-6 py-5 bg-slate-50 border border-slate-200 rounded-[32px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 resize-none font-medium placeholder:text-slate-300"}),n.jsxs("label",{className:"cursor-pointer group block mt-4",children:[n.jsxs("div",{className:"flex items-center gap-4 px-5 py-5 bg-slate-50/80 border-2 border-dashed border-slate-200 rounded-[24px] hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all shrink-0",children:te?n.jsx(Sl,{className:"w-6 h-6"}):n.jsx(kc,{className:"w-6 h-6"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx("p",{className:"text-sm font-bold text-slate-800",children:te?O?.name||"Image attached":"Attach Image to Note"}),n.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"PNG, JPG, GIF (Max 10MB)"})]})]}),n.jsx("input",{ref:G,type:"file",accept:"image/*",onChange:se,className:"hidden"})]}),te&&n.jsxs("div",{className:"relative",children:[n.jsx("img",{src:te,alt:"Note attachment preview",className:"w-full max-h-64 object-contain rounded-[24px] border-2 border-slate-200"}),n.jsx("button",{type:"button",onClick:()=>{W(""),q(null),G.current&&(G.current.value="")},className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all shadow-lg",children:n.jsx(tr,{className:"w-4 h-4"})})]})]})]}),n.jsxs("div",{className:"flex gap-6 pt-6 border-t border-slate-100",children:[n.jsx("button",{type:"button",onClick:le,className:"flex-1 py-5 text-sm font-black text-slate-400 hover:text-slate-600 transition-all uppercase tracking-[0.2em]",children:"CANCEL"}),n.jsxs("button",{type:"submit",disabled:d,className:"flex-[2] py-5 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[24px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:[d?n.jsx(gt,{className:"w-5 h-5 animate-spin"}):n.jsx(di,{className:"w-5 h-5"}),"SAVE"]})]})]})]}),Y&&Y.open&&n.jsxs("div",{className:"fixed inset-0 z-[100] overflow-hidden",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>!re&&J(null)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Potential Duplicate Contact"}),n.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Y.duplicates.some(ie=>ie.matchType==="exact"||ie.matchReason==="email")?"A contact with this email already exists":"A contact with a similar name was found"})]}),n.jsx("button",{onClick:()=>!re&&J(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",disabled:re,children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:[n.jsx("p",{className:"text-xs font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"New Contact Data"}),n.jsx("p",{className:"font-semibold text-slate-900",children:Y.newContact.name||""}),Y.newContact.email&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:Y.newContact.email}),Y.newContact.phone&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Y.newContact.phone]}),Y.newContact.role&&n.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Y.newContact.role]})]}),n.jsxs("div",{children:[n.jsxs("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:["Existing Contact",Y.duplicates.length>1?"s":""]}),n.jsx("div",{className:"space-y-3",children:Y.duplicates.map((ie,Z)=>n.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:n.jsxs("div",{className:"flex items-start justify-between gap-4",children:[n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"font-semibold text-slate-900",children:ie.name||""}),ie.email&&n.jsx("p",{className:"text-sm text-slate-600 mt-1",children:ie.email}),n.jsxs("div",{className:"mt-2 space-y-1",children:[ie.role?n.jsxs("p",{className:"text-xs text-slate-500",children:[" ",ie.role]}):Y.newContact.role&&n.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Y.newContact.role," (will be added)"]}),ie.phone?n.jsxs("p",{className:"text-xs text-slate-500",children:[" ",ie.phone]}):Y.newContact.phone&&n.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Y.newContact.phone," (will be added)"]}),!ie.companyId&&Y.newContact.companyId&&n.jsx("p",{className:"text-xs text-amber-600 font-medium",children:" Organization (will be linked)"})]}),ie.matchType==="fuzzy"&&ie.similarity&&n.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium",children:[Math.round(ie.similarity*100),"% name similarity"]}),ie.matchType==="exact"&&n.jsx("p",{className:"text-xs text-red-600 mt-2 font-medium",children:"Exact email match"})]}),n.jsxs("button",{onClick:async()=>{if(!re){X(!0);try{const Ee={};Y.newContact.name&&(!ie.name||ie.name.trim()===""||Y.newContact.name.trim()!==ie.name.trim())&&(Ee.name=Y.newContact.name),Y.newContact.email&&(!ie.email||ie.email.trim()==="")&&(Ee.email=Y.newContact.email),Y.newContact.phone&&(!ie.phone||ie.phone.trim()==="")&&(Ee.phone=Y.newContact.phone),Y.newContact.role&&(!ie.role||ie.role.trim()==="")&&(Ee.role=Y.newContact.role),Y.newContact.companyId&&(!ie.companyId||ie.companyId.trim()==="")&&(Ee.companyId=Y.newContact.companyId),Y.newContact.linkedin&&(!ie.linkedin||ie.linkedin.trim()==="")&&(Ee.linkedin=Y.newContact.linkedin),Object.keys(Ee).length>0&&await X7(ie.id,Ee),J(null),c("success"),s&&s(),setTimeout(()=>a(),1500)}catch(Ee){console.error("[MERGE] Failed:",Ee),p(Ee.message||"Merge failed"),X(!1)}}},disabled:re,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-60 transition-all whitespace-nowrap",children:[re?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(Xv,{className:"w-4 h-4"}),"Merge"]})]})},ie.id||Z))})]})]})}),n.jsxs("div",{className:"p-6 border-t border-slate-100 flex gap-3",children:[n.jsx("button",{type:"button",onClick:()=>J(null),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200 transition-colors",disabled:re,children:"Cancel"}),n.jsxs("button",{onClick:async()=>{if(!re){X(!0);try{await cI(Y.newContact),J(null),c("success"),s&&s(),setTimeout(()=>a(),1500)}catch(ie){console.error("[CREATE] Failed:",ie),p(ie.message||"Failed to create contact"),X(!1),J(null)}}},disabled:re,className:"flex-[2] py-3 bg-slate-900 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60 transition-all",children:[re?n.jsx(gt,{className:"w-5 h-5 animate-spin"}):n.jsx(ln,{className:"w-5 h-5"}),"Create Anyway"]})]})]})})]})]})},iye=({event:e,selectedDate:t,onClose:r,onSuccess:a})=>{const{showSuccess:s,showError:i}=Cn(),[o,l]=D.useState(!1),[c,d]=D.useState({title:"",description:"",start:"",end:"",type:"meeting",color:"#4f46e5"});D.useEffect(()=>{if(e)d({title:e.title,description:e.description||"",start:e.start.substring(0,16),end:e.end.substring(0,16),type:e.type,color:e.color||"#4f46e5"});else if(t){const f=new Date(t);f.setHours(9,0,0,0);const p=new Date(t);p.setHours(10,0,0,0),d(m=>({...m,start:f.toISOString().substring(0,16),end:p.toISOString().substring(0,16)}))}},[e,t]);const u=async f=>{f.preventDefault(),l(!0);try{e?(await fM(e.id,c),s("Event updated successfully")):(await sie({...c,source:"local"}),s("Event created successfully")),a(),r()}catch(p){i(p.message||"Failed to save event")}finally{l(!1)}};return n.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:n.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:n.jsx(Jn,{className:"w-5 h-5"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e?"Edit Event":"New Entry"}),n.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Workspace Schedule"})]})]}),n.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("form",{onSubmit:u,className:"p-6 space-y-5",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Event Title"}),n.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync w/ Client",value:c.title,onChange:f=>d({...c,title:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),n.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(is,{className:"w-3 h-3"})," Start"]}),n.jsx("input",{required:!0,type:"datetime-local",value:c.start,onChange:f=>d({...c,start:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(is,{className:"w-3 h-3"})," End"]}),n.jsx("input",{required:!0,type:"datetime-local",value:c.end,onChange:f=>d({...c,end:f.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(Ms,{className:"w-3 h-3"})," Event Type"]}),n.jsx("div",{className:"flex flex-wrap gap-2",children:["meeting","task","deadline","reminder"].map(f=>n.jsx("button",{type:"button",onClick:()=>d({...c,type:f}),className:`px-4 py-2 rounded-xl text-xs font-bold capitalize transition-all border ${c.type===f?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-100":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300"}`,children:f},f))})]}),n.jsxs("div",{className:"space-y-1.5",children:[n.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[n.jsx(oU,{className:"w-3 h-3"})," Description"]}),n.jsx("textarea",{placeholder:"Add details, notes, or agenda...",value:c.description,onChange:f=>d({...c,description:f.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:r,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-2xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsx("button",{type:"submit",disabled:o,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50",children:o?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsxs(n.Fragment,{children:[n.jsx(cd,{className:"w-4 h-4"}),e?"Save Changes":"Create Entry"]})})]})]})]})})},oye=({currentUser:e})=>{const{showSuccess:t,showError:r}=Cn(),[a,s]=D.useState(!1),[i,o]=D.useState(!1),[l,c]=D.useState(!1),[d,u]=D.useState(!1);D.useEffect(()=>{const H=setTimeout(()=>u(!0),500);return()=>clearTimeout(H)},[]);const[f,p]=D.useState({type:"bug",title:"",description:""}),[m,b]=D.useState([]),[v,g]=D.useState(!1),[w,y]=D.useState("upload"),[j,N]=D.useState(""),[S,E]=D.useState(!1),A=D.useRef(null),P=D.useRef(m);D.useEffect(()=>{P.current=m},[m]),D.useEffect(()=>()=>{P.current.forEach(H=>{H.source==="file"&&H.type==="video"&&H.preview.startsWith("blob:")&&URL.revokeObjectURL(H.preview)})},[]);const I=(H,Y=1920,J=1080,re=.8)=>new Promise((X,te)=>{const W=new FileReader;W.onload=O=>{const q=new Image;q.onload=()=>{let G=q.width,U=q.height;G>U?G>Y&&(U=U*Y/G,G=Y):U>J&&(G=G*J/U,U=J);const K=document.createElement("canvas");K.width=G,K.height=U;const ae=K.getContext("2d");if(!ae){te(new Error("Failed to create canvas context"));return}ae.drawImage(q,0,0,G,U);const me=K.toDataURL("image/jpeg",re);X(me)},q.onerror=()=>te(new Error("Failed to load image")),q.src=O.target?.result},W.onerror=()=>te(new Error("Failed to read file")),W.readAsDataURL(H)}),B=async H=>{const Y=H.target.files;if(!(!Y||Y.length===0)){g(!0);try{const J=[];for(let re=0;re<Y.length;re++){const X=Y[re];if(!X.type.startsWith("image/")&&!X.type.startsWith("video/")){r("Please select only image or video files");continue}if(X.size>10*1024*1024){r(`File "${X.name}" is too large. Maximum size is 10MB`);continue}const te=X.type.startsWith("image/");let W="";te?W=await I(X,1920,1080,.8):W=URL.createObjectURL(X),J.push({file:X,preview:W,type:te?"image":"video",source:"file"})}b(re=>[...re,...J]),A.current&&(A.current.value="")}catch(J){r(J.message||"Failed to process file")}finally{g(!1)}}},T=H=>new Promise(Y=>{const J=new Image,re=document.createElement("video"),X=[".jpg",".jpeg",".png",".gif",".webp",".svg"],te=[".mp4",".mov",".avi",".webm",".mkv"],W=H.toLowerCase(),O=X.some(G=>W.includes(G))||W.includes("image")||W.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i),q=te.some(G=>W.includes(G))||W.includes("video")||W.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i);!O&&!q?(J.onload=()=>Y(!0),J.onerror=()=>{re.onloadedmetadata=()=>Y(!0),re.onerror=()=>Y(!1),re.src=H},J.src=H):Y(!0)}),_=async()=>{if(!j.trim()){r("Please enter a valid URL");return}try{new URL(j.trim())}catch{r("Please enter a valid URL");return}E(!0);try{if(!await T(j.trim())){r("URL does not appear to be a valid image or video");return}const Y=j.toLowerCase(),J=Y.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)||Y.includes("image")||!Y.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)&&!Y.includes("video"),re={url:j.trim(),preview:j.trim(),type:J?"image":"video",source:"url"};b(X=>[...X,re]),N(""),t("URL added successfully")}catch(H){r(H.message||"Failed to validate URL")}finally{E(!1)}},R=H=>{const Y=m[H];Y.source==="file"&&Y.type==="video"&&Y.preview.startsWith("blob:")&&URL.revokeObjectURL(Y.preview),b(J=>J.filter((re,X)=>X!==H))},z=async H=>{if(H.preventDefault(),!(!f.title||!f.description)){o(!0);try{const Y=m.filter(W=>W.source==="url"),J=m.filter(W=>W.source==="file"),re=Y.length>0?Y[0].url:"",X=await Promise.all(J.map(async W=>W.type==="image"?{type:"image",data:W.preview,filename:W.file.name,mimeType:W.file.type,source:"file"}:new Promise((O,q)=>{const G=new FileReader;G.onload=()=>{O({type:"video",data:G.result,filename:W.file.name,mimeType:W.file.type,source:"file"})},G.onerror=q,G.readAsDataURL(W.file)}))),te={...f,userId:e?.id||"anonymous",status:"planned",url:re||void 0,attachments:X.length>0?X:[]};await sM(te),c(!0),t("Integrated into Roadmap"),window.dispatchEvent(new Event("refresh-roadmap")),setTimeout(()=>{c(!1),s(!1),p({type:"bug",title:"",description:""}),m.forEach(W=>{W.type==="video"&&W.preview.startsWith("blob:")&&URL.revokeObjectURL(W.preview)}),b([])},2e3)}catch(Y){console.error("[FEEDBACK] Submission failed:",Y),r(`Submission error: ${Y.message||"Registry error"}`)}finally{o(!1)}}};return n.jsxs("div",{className:"fixed right-0 top-1/2 -translate-y-1/2 z-[100] flex items-center pointer-events-none",children:[n.jsx("button",{onClick:()=>s(!a),className:`pointer-events-auto h-32 w-10 bg-slate-900 text-white flex flex-col items-center justify-center rounded-l-2xl shadow-2xl hover:w-12 group border-l border-y border-white/10 ${d?"transition-all duration-300":""} ${a?"translate-x-full":""}`,children:n.jsx("span",{className:"[writing-mode:vertical-lr] text-[11px] font-black uppercase tracking-[0.3em] rotate-180",children:"Feedback"})}),n.jsx("div",{className:`pointer-events-auto fixed right-0 top-1/2 -translate-y-1/2 w-[90vw] sm:w-80 bg-white shadow-[-20px_0_60px_rgba(0,0,0,0.15)] rounded-l-[32px] border-l border-slate-100 transform overflow-hidden ${d?"transition-all duration-500 ease-out":""} ${a?"translate-x-0":"translate-x-full"}`,style:d?void 0:{transform:a?"translateY(-50%) translateX(0)":"translateY(-50%) translateX(100%)"},children:l?n.jsxs("div",{className:"p-10 text-center animate-in zoom-in-95 duration-300",children:[n.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500 mx-auto mb-6",children:n.jsx(Nn,{className:"w-10 h-10"})}),n.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Submitted"}),n.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Entry Stored Successfully"})]}):n.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[n.jsxs("div",{className:"p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white",children:n.jsx(co,{className:"w-4 h-4"})}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Feedback Hub"}),n.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none mt-0.5",children:"Community Input"})]})]}),n.jsx("button",{onClick:()=>{s(!1),m.forEach(H=>{H.source==="file"&&H.type==="video"&&H.preview.startsWith("blob:")&&URL.revokeObjectURL(H.preview)}),b([]),N("")},className:"p-2 hover:bg-white rounded-full text-slate-400 transition-all",children:n.jsx(tr,{className:"w-4 h-4"})})]}),n.jsxs("form",{onSubmit:z,className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),n.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:n.jsx(Gv,{className:"w-3 h-3"}),label:"Bug"},{id:"feature",icon:n.jsx(Ri,{className:"w-3 h-3"}),label:"Feature"},{id:"idea",icon:n.jsx(Vj,{className:"w-3 h-3"}),label:"Idea"}].map(H=>n.jsxs("button",{type:"button",onClick:()=>p({...f,type:H.id}),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${f.type===H.id?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:[H.icon," ",H.label]},H.id))})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title"}),n.jsx("input",{required:!0,type:"text",placeholder:"Summary...",value:f.title,onChange:H=>p({...f,title:H.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Context"}),n.jsx("textarea",{required:!0,rows:4,placeholder:"Provide details...",value:f.description,onChange:H=>p({...f,description:H.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),n.jsxs("div",{className:"space-y-2",children:[n.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Attachments (Screenshots/Videos)"}),n.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-xl border border-slate-200",children:[n.jsxs("button",{type:"button",onClick:()=>y("upload"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${w==="upload"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[n.jsx(kc,{className:"w-3 h-3"}),"Upload"]}),n.jsxs("button",{type:"button",onClick:()=>y("url"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${w==="url"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[n.jsx(c0,{className:"w-3 h-3"}),"URL"]})]}),w==="upload"&&n.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[n.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:v?n.jsx(gt,{className:"w-5 h-5 animate-spin"}):n.jsx(kc,{className:"w-5 h-5"})}),n.jsxs("div",{className:"flex-1",children:[n.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Add Screenshot or Video"}),n.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, MP4, MOV (Max 10MB)"})]}),n.jsx("input",{ref:A,type:"file",accept:"image/*,video/*",multiple:!0,onChange:B,disabled:v,className:"hidden"})]}),w==="url"&&n.jsxs("div",{className:"flex gap-2",children:[n.jsx("input",{type:"url",placeholder:"https://example.com/image.png or video.mp4",value:j,onChange:H=>N(H.target.value),onKeyDown:H=>{H.key==="Enter"&&!S&&j.trim()&&(H.preventDefault(),_())},disabled:S,className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 disabled:opacity-50"}),n.jsx("button",{type:"button",onClick:_,disabled:S||!j.trim(),className:"px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:S?n.jsxs(n.Fragment,{children:[n.jsx(gt,{className:"w-4 h-4 animate-spin"}),n.jsx("span",{className:"hidden sm:inline",children:"Adding..."})]}):n.jsxs(n.Fragment,{children:[n.jsx(c0,{className:"w-4 h-4"}),n.jsx("span",{className:"hidden sm:inline",children:"Add"})]})})]}),m.length>0&&n.jsx("div",{className:"space-y-2",children:m.map((H,Y)=>n.jsx("div",{className:"relative group p-2 bg-slate-50 rounded-xl border border-slate-200",children:H.type==="image"?n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("img",{src:H.preview,alt:`Attachment ${Y+1}`,className:"w-16 h-16 object-cover rounded-lg border border-slate-200",onError:J=>{J.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect fill="%23e0e7ff" width="64" height="64"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%234f46e5" font-size="24"%3E%3F%3C/text%3E%3C/svg%3E'}}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(Sl,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:H.source==="file"?H.file.name:"Image URL"}),H.source==="url"&&n.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),n.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:H.source==="file"?`${(H.file.size/1024).toFixed(1)} KB`:H.url})]}),n.jsx("button",{type:"button",onClick:()=>R(Y),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]}):n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center",children:n.jsx(ah,{className:"w-6 h-6 text-indigo-600"})}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[n.jsx(ah,{className:"w-4 h-4 text-indigo-600"}),n.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:H.source==="file"?H.file.name:"Video URL"}),H.source==="url"&&n.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),n.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:H.source==="file"?`${(H.file.size/(1024*1024)).toFixed(2)} MB`:H.url})]}),n.jsx("button",{type:"button",onClick:()=>R(Y),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:n.jsx(Lr,{className:"w-4 h-4"})})]})},Y))})]}),n.jsxs("button",{type:"submit",disabled:i||v||S,className:"w-full py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-widest rounded-2xl shadow-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-3 disabled:opacity-50 active:scale-95",children:[i?n.jsx(gt,{className:"w-4 h-4 animate-spin"}):n.jsx(Xl,{className:"w-4 h-4"}),"Send Feedback"]})]})]})})]})},lye=({onBack:e})=>n.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[n.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[n.jsx(Qk,{className:"w-4 h-4"}),"Back to login"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[n.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:n.jsx(T8,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Help & Support"})]}),n.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"})]}),n.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"How to get access"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"ImpactFlow OS is restricted to authorized personnel. To gain access:"}),n.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Enter your professional email address in the login portal"}),n.jsx("li",{children:'Click "Request Access Code" to receive a one-time verification code'}),n.jsx("li",{children:"Enter the 6-digit code sent to your email"}),n.jsx("li",{children:"If your account has not been provisioned yet, contact your administrator or IT team"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"I didn't receive the code"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"If you haven't received your verification code:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Check your spam or junk folder"}),n.jsx("li",{children:"Codes are valid for a limited time - request a new code if expired"}),n.jsx("li",{children:'Click "Request New Code" on the verification screen'}),n.jsx("li",{children:"Ensure your email is correctly provisioned in the system"}),n.jsx("li",{children:"Contact your administrator if the problem persists"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Troubleshooting"}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account not found"}),n.jsx("p",{className:"leading-relaxed",children:`If you see an "Account not found" error, your account may not have been provisioned yet. Contact your organization's IT administrator to request access.`})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Code expired"}),n.jsx("p",{className:"leading-relaxed",children:'Verification codes expire after a set period for security. Simply request a new code using the "Request New Code" button.'})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Invalid code"}),n.jsx("p",{className:"leading-relaxed",children:"Make sure you're entering the most recent code sent to your email. Each new code request invalidates previous codes."})]})]})]}),n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(rs,{className:"w-5 h-5 text-indigo-400"}),"Contact support"]}),n.jsx("p",{className:"leading-relaxed mb-3",children:"For access issues, technical support, or account questions:"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Contact your organization's IT administrator"})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsxs("span",{children:["Email: ",n.jsx("a",{href:"mailto:support@impact247.com",className:"text-indigo-400 hover:underline",children:"support@impact247.com"})]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Include your email address and a description of the issue"})]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[n.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),n.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),cye=({onBack:e})=>n.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[n.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[n.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),n.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),n.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[n.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[n.jsx(Qk,{className:"w-4 h-4"}),"Back to login"]}),n.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[n.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[n.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[n.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:n.jsx(gx,{className:"w-6 h-6 text-indigo-400"})}),n.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Privacy Policy"})]}),n.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"}),n.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Last updated: February 2026"})]}),n.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[n.jsx("div",{children:n.jsx("p",{className:"leading-relaxed",children:'This Privacy Policy describes how ImpactFlow OS and Impact 24x7 Enterprise ("we," "our," or "us") collect, use, disclose, and protect your information when you use our platform and services.'})}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(Qn,{className:"w-5 h-5 text-indigo-400"}),"Information We Collect"]}),n.jsxs("div",{className:"space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account Information"}),n.jsx("p",{className:"leading-relaxed",children:"We collect information you provide when creating an account or signing in, including your professional email address, name, and any profile information you choose to provide."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Usage Data"}),n.jsx("p",{className:"leading-relaxed",children:"We automatically collect information about how you use ImpactFlow OS, including features accessed, actions taken, and time spent on the platform. This helps us improve our services."})]}),n.jsxs("div",{children:[n.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Device Information"}),n.jsx("p",{className:"leading-relaxed",children:"We may collect information about your device, browser type, IP address, and operating system for security and compatibility purposes."})]}),n.jsx("p",{className:"leading-relaxed mt-3 text-indigo-400 font-medium",children:"We do not sell your personal information to third parties."})]})]}),n.jsxs("div",{children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(bU,{className:"w-5 h-5 text-indigo-400"}),"How We Use Your Information"]}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"To authenticate your access and maintain your account"}),n.jsx("li",{children:"To personalize your experience and provide relevant features"}),n.jsx("li",{children:"To provide customer support and respond to your inquiries"}),n.jsx("li",{children:"To improve our services, features, and user experience"}),n.jsx("li",{children:"To ensure security and prevent fraud or abuse"}),n.jsx("li",{children:"To comply with legal obligations and enforce our terms"}),n.jsx("li",{children:"Access is role-based and limited to what is necessary for your job function"})]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Security"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We implement industry-standard security measures to protect your information:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Encryption in transit (TLS/SSL) and at rest"}),n.jsx("li",{children:"Secure authentication mechanisms including multi-factor authentication"}),n.jsx("li",{children:"Access controls and role-based permissions"}),n.jsx("li",{children:"Regular security audits and monitoring"}),n.jsx("li",{children:"Restricted access to authorized personnel only"})]}),n.jsx("p",{className:"leading-relaxed mt-3",children:"While we strive to protect your information, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security but are committed to maintaining the highest standards."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Your Rights"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"Depending on your location, you may have certain rights regarding your personal information:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Access:"})," Request access to your personal data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Correction:"})," Request correction of inaccurate or incomplete data"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Deletion:"})," Request deletion of your personal data where applicable by law"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]})]}),n.jsxs("p",{className:"leading-relaxed mt-3",children:["To exercise these rights, contact your administrator or our data protection contact at"," ",n.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"}),". Enterprise accounts may have additional policies defined by your organization."]})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Cookies and Similar Technologies"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We use essential cookies and local storage for:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"Authentication and session management"}),n.jsx("li",{children:"Remembering your preferences"}),n.jsx("li",{children:"Security and fraud prevention"})]}),n.jsx("p",{className:"leading-relaxed mt-3",children:"We do not use third-party advertising cookies or tracking cookies. You can manage cookie preferences in your browser settings, though disabling essential cookies may affect platform functionality."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Sharing and Disclosure"}),n.jsx("p",{className:"leading-relaxed mb-3",children:"We may share your information only in the following circumstances:"}),n.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[n.jsx("li",{children:"With your organization's administrators as part of enterprise account management"}),n.jsx("li",{children:"With service providers who assist in operating our platform (under strict confidentiality agreements)"}),n.jsx("li",{children:"When required by law or to protect our rights and safety"}),n.jsx("li",{children:"In connection with a business transfer (merger, acquisition, etc.)"})]}),n.jsx("p",{className:"leading-relaxed mt-3 font-medium text-indigo-400",children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Retention"}),n.jsx("p",{className:"leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you request deletion, we will delete or anonymize your data in accordance with applicable laws, except where retention is required for legal or legitimate business purposes."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"International Data Transfers"}),n.jsx("p",{className:"leading-relaxed",children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable data protection laws."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Children's Privacy"}),n.jsx("p",{className:"leading-relaxed",children:"ImpactFlow OS is intended for business use and is not directed to individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})]}),n.jsxs("div",{children:[n.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Changes to This Policy"}),n.jsx("p",{className:"leading-relaxed",children:'We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. The "Last updated" date at the top indicates when the policy was last revised. We will notify you of material changes by posting the updated policy on this page and, where appropriate, through other communication channels. Continued use of ImpactFlow OS after changes constitutes acceptance of the updated policy.'})]}),n.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[n.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[n.jsx(rs,{className:"w-5 h-5 text-indigo-400"}),"Contact Us"]}),n.jsx("p",{className:"leading-relaxed mb-3",children:"If you have questions, concerns, or requests regarding this Privacy Policy or our data practices:"}),n.jsxs("ul",{className:"space-y-2",children:[n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsxs("span",{children:["Email: ",n.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"})]})]}),n.jsxs("li",{className:"flex items-start gap-2",children:[n.jsx("span",{className:"text-indigo-400",children:""}),n.jsx("span",{children:"Contact your organization's data protection officer or IT administrator"})]})]})]})]}),n.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[n.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),n.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),dye=new qie({defaultOptions:{queries:{staleTime:30*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0,refetchInterval:60*1e3,retry:1,placeholderData:e=>e},mutations:{retry:1}}}),uye=({children:e})=>n.jsx($ie,{client:dye,children:e}),fye=()=>{const[e,t]=D.useState(()=>localStorage.getItem("activeTab")||"dashboard"),[r,a]=D.useState(!1),[s,i]=D.useState(null),[o,l]=D.useState(!1),[c,d]=D.useState(!1),[u,f]=D.useState(()=>{try{const Ue=localStorage.getItem("navGroupsOpen");if(Ue){const Ae=JSON.parse(Ue);return{...Yv.reduce((ie,Z)=>({...ie,[Z.id]:!0}),{}),system:!0,...Ae}}}catch{}return{...Yv.reduce((Ue,Ae)=>({...Ue,[Ae.id]:!0}),{}),system:!0}}),p=Ue=>{f(Ae=>{const ie={...Ae,[Ue]:!Ae[Ue]};try{localStorage.setItem("navGroupsOpen",JSON.stringify(ie))}catch{}return ie})},[m,b]=D.useState(""),[v,g]=D.useState(!1),[w,y]=D.useState({isOpen:!1,type:"deal"}),[j,N]=D.useState({isOpen:!1,event:null}),[S,E]=D.useState([]),[A,P]=D.useState(!1),[I,B]=D.useState(!1),T=S.filter(Ue=>!Ue.read).length,_=D.useRef(null),R=D.useCallback(async(Ue=!1)=>{try{const Ae=s||JSON.parse(localStorage.getItem("user_data")||"null");if(!Ae?.id)return;Ue&&B(!0);const ie=await rM(Ae.id,20),Z=ie?.data||ie||[],Ee=(Array.isArray(Z)?Z:[]).map(we=>{let Oe="Just now";if(we.createdAt){const de=new Date(we.createdAt),Ce=new Date().getTime()-de.getTime(),Xe=Math.floor(Ce/6e4),xe=Math.floor(Ce/36e5),fe=Math.floor(Ce/864e5);Xe<1?Oe="Just now":Xe<60?Oe=`${Xe}m ago`:xe<24?Oe=`${xe}h ago`:fe<7?Oe=`${fe}d ago`:Oe=de.toLocaleDateString()}return{id:we.id,userId:we.userId,type:we.type||"system",title:we.title,message:we.message,timestamp:Oe,read:!!we.read,link:we.link||void 0}});E(Ee)}catch(Ae){console.error("[NOTIFICATIONS] Failed to load notifications",Ae)}finally{Ue&&B(!1)}},[s]),z=D.useRef(null),H=D.useRef(!1);D.useEffect(()=>{const Ue=s||JSON.parse(localStorage.getItem("user_data")||"null");if(Ue?.id)return z.current=null,H.current=!1,s1(async()=>{const{getNotificationWebSocket:Ae,disconnectNotificationWebSocket:ie}=await import("./notificationWebSocket-mFjRd7uM.js");return{getNotificationWebSocket:Ae,disconnectNotificationWebSocket:ie}},[]).then(({getNotificationWebSocket:Ae,disconnectNotificationWebSocket:ie})=>{if(H.current){ie();return}const Z=Ae(Ue.id);"Notification"in window&&window.Notification.permission==="default"&&window.Notification.requestPermission().then(we=>{console.log("[NOTIFICATIONS] Browser notification permission:",we)});const Ee=we=>{const Oe={id:we.id,userId:we.userId,type:we.type||"system",title:we.title||"Notification",message:we.message||"",timestamp:"Just now",read:!1,link:we.link};if(E(de=>de.find(Ce=>Ce.id===we.id)?de:[Oe,...de].slice(0,100)),window.dispatchEvent(new Event("refresh-notifications")),"Notification"in window&&window.Notification.permission==="granted")try{const de=new window.Notification(we.title||"Notification",{body:we.message||"",icon:"/favicon.ico",tag:we.id,requireInteraction:!1});de.onclick=()=>{window.focus(),we.link&&(window.location.href=we.link),de.close()},setTimeout(()=>de.close(),5e3)}catch(de){console.error("[NOTIFICATIONS] Error showing browser notification:",de)}};Z.on("notification",Ee),Z.connect().catch(we=>{console.error("[NOTIFICATIONS] WebSocket connection failed:",we)}),z.current=()=>{Z.off("notification",Ee),ie()}}),()=>{H.current=!0,z.current?.(),z.current=null}},[s]),D.useEffect(()=>{R();const Ue=setInterval(()=>{R(!1)},3e4),Ae=()=>{R(!0)};return window.addEventListener("refresh-notifications",Ae),()=>{clearInterval(Ue),window.removeEventListener("refresh-notifications",Ae)}},[R]),D.useEffect(()=>{A&&R(!0)},[A,R]),D.useEffect(()=>{const Ue=()=>{const Ae=window.innerWidth<1024;l(Ae),a(!Ae)};return Ue(),window.addEventListener("resize",Ue),()=>window.removeEventListener("resize",Ue)},[]);const[Y,J]=D.useState(null),[re,X]=D.useState(null);D.useEffect(()=>{const Ue=new URLSearchParams(window.location.search),Ae=Ue.get("tab"),ie=Ue.get("company"),Z=Ue.get("promptOnboarding"),Ee=Ue.get("deal"),we=Ue.get("templateId");if(Ae&&["dashboard","schedule","crm","pipeline","projects","playbooks","tasks","invoices","roadmap","users","settings","integrations","satisfaction","inbox","expenses","budget","contracts","data-hygiene","products-services","import-history"].includes(Ae)){t(Ae),localStorage.setItem("activeTab",Ae),Ae==="satisfaction"&&ie&&J(ie),Ae==="playbooks"&&Z==="true"&&X({dealId:Ee||void 0,templateId:we||void 0}),Ue.delete("tab"),Ue.delete("company"),Ue.delete("promptOnboarding"),Ue.delete("deal"),Ue.delete("templateId");const de=Ue.toString()?`${window.location.pathname}?${Ue.toString()}`:window.location.pathname;window.history.replaceState({},"",de)}},[]),D.useEffect(()=>{const Ue=Ae=>{_.current&&!_.current.contains(Ae.target)&&P(!1)};return document.addEventListener("mousedown",Ue),()=>document.removeEventListener("mousedown",Ue)},[]);const te=async()=>{await Pne(),window.location.reload()},W=async Ue=>{const Ae=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(Ae){E(ie=>ie.map(Z=>Z.id===Ue?{...Z,read:!0}:Z));try{await nM(Ue,Ae)}catch{}}},O=async()=>{const Ue=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(Ue){E(Ae=>Ae.map(ie=>({...ie,read:!0})));try{await aM(Ue)}catch{}}},q=(Ue,Ae)=>{y({isOpen:!0,type:Ue,stage:Ae||void 0})},G=(Ue,Ae)=>{N({isOpen:!0,event:Ue||null,selectedDate:Ae})},U=()=>{N({isOpen:!1,event:null})},K=()=>{e==="schedule"&&window.dispatchEvent(new CustomEvent("refresh-schedule"))},ae=typeof window<"u"?window.location.pathname:"",[me,se]=D.useState(()=>ae==="/privacy-policy"||ae==="/privacy"?"privacy":ae==="/help"?"help":ae.startsWith("/survey/")?"survey":null),le=ae.startsWith("/survey/")?ae.replace("/survey/",""):null;if(D.useEffect(()=>{const Ue=window.location.pathname;Ue==="/privacy-policy"||Ue==="/privacy"?se("privacy"):Ue==="/help"?se("help"):Ue.startsWith("/survey/")?se("survey"):se(null)},[]),D.useEffect(()=>{const Ue=()=>{const Ae=window.location.pathname;Ae==="/privacy-policy"||Ae==="/privacy"?se("privacy"):Ae==="/help"?se("help"):Ae.startsWith("/survey/")?se("survey"):se(null)};return window.addEventListener("popstate",Ue),()=>window.removeEventListener("popstate",Ue)},[]),me==="privacy")return n.jsx(cye,{onBack:()=>{window.history.pushState({},"","/"),se(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(me==="help")return n.jsx(lye,{onBack:()=>{window.history.pushState({},"","/"),se(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(me==="survey"&&le)return n.jsx(xle,{surveyId:le});const Me=()=>{switch(e){case"dashboard":return n.jsx(_I,{onNavigate:t});case"schedule":return n.jsx(Lbe,{currentUser:s,onNavigate:t,onNewEvent:()=>G(),onEditEvent:Ue=>G(Ue)});case"crm":return n.jsx(Voe,{onNavigate:t,onAddCompany:()=>q("company"),onAddContact:()=>q("contact"),externalSearchQuery:m});case"pipeline":return n.jsx(Xoe,{onNavigate:t,onNewDeal:Ue=>q("deal",Ue),currentUser:s});case"projects":return n.jsx(ile,{onNavigate:t,onCreateProject:()=>q("project"),currentUser:s});case"playbooks":return n.jsx(hle,{onNavigate:t,currentUser:s,playbookPrompt:re,onClearPlaybookPrompt:()=>X(null)});case"satisfaction":return n.jsx(mle,{onNavigate:t,companyIdFromUrl:Y,onClearCompanyIdFromUrl:()=>J(null)});case"tasks":return n.jsx(S1e,{onCreateTask:()=>q("task"),currentUser:s});case"invoices":return n.jsx(jbe,{onCreateInvoice:()=>q("invoice"),currentUser:s});case"expenses":return n.jsx(Vbe,{currentUser:s});case"budget":return n.jsx(Kbe,{currentUser:s});case"contracts":return n.jsx(Xbe,{currentUser:s});case"inbox":return n.jsx(hB,{currentUser:s});case"roadmap":return n.jsx(Gbe,{currentUser:s,onNavigate:t});case"users":return n.jsx(kbe,{});case"settings":return n.jsx(Abe,{currentUser:s,onUserUpdate:i});case"data-hygiene":return n.jsx(Ebe,{currentUser:s});case"import-history":return n.jsx(Tbe,{currentUser:s});case"integrations":return n.jsx(Fbe,{});case"products-services":return n.jsx(Ybe,{});case"notifications":return n.jsx(eye,{currentUser:s,onNavigate:t});default:return n.jsx(_I,{onNavigate:t})}},ue=Ue=>{t(Ue),localStorage.setItem("activeTab",Ue),b(""),o&&a(!1)};return D.useEffect(()=>{const Ue=setTimeout(()=>d(!0),400);return()=>clearTimeout(Ue)},[]),n.jsx(uye,{children:n.jsx(mie,{children:n.jsx(Jbe,{onUserLoaded:i,children:n.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden font-sans text-slate-900",children:[o&&r&&n.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 ${c?"transition-opacity duration-300":""}`,onClick:()=>a(!1)}),n.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          bg-white border-r border-slate-200
          ${c?"transition-all duration-300":""}
          ${r?"w-64 translate-x-0":"w-0 -translate-x-full lg:w-20 lg:translate-x-0"} 
          flex flex-col overflow-hidden
        `,children:[n.jsxs("div",{className:"p-6 flex items-center justify-between gap-3 shrink-0",children:[n.jsxs("div",{className:"flex items-center gap-3",children:[n.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-indigo-100 shadow-lg",children:"I"}),r&&n.jsx("span",{className:"font-bold text-lg tracking-tight",children:"ImpactFlow"})]}),o&&n.jsx("button",{onClick:()=>a(!1),className:"lg:hidden p-1 rounded-lg hover:bg-slate-100 transition-colors",children:n.jsx(tr,{className:"w-5 h-5 text-slate-500"})})]}),n.jsxs("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto mt-2 flex flex-col min-h-0",children:[L8.map(Ue=>n.jsxs("button",{onClick:()=>ue(Ue.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${e===Ue.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:Ue.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap",children:Ue.label})]},Ue.id)),Yv.map(Ue=>{const Ae=u[Ue.id]!==!1;return n.jsxs("div",{className:"pt-1",children:[n.jsxs("button",{type:"button",onClick:()=>p(Ue.id),"aria-expanded":Ae,"aria-label":`${Ae?"Collapse":"Expand"} ${Ue.label}`,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 text-left ${Ue.items.some(ie=>ie.id===e)?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0","aria-hidden":!0,children:Ue.icon}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flex-1 font-medium whitespace-nowrap min-w-0 truncate",children:Ue.label}),n.jsx("span",{className:"shrink-0 flex items-center justify-center w-5 h-5 rounded-md text-slate-400","aria-hidden":!0,children:Ae?n.jsx(Fs,{className:"w-4 h-4"}):n.jsx(wa,{className:"w-4 h-4"})})]})]}),Ae&&n.jsx("div",{className:"space-y-0.5 pl-1 ml-2 border-l border-slate-200",children:Ue.items.map(ie=>n.jsxs("button",{onClick:()=>ue(ie.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 ${e===ie.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:ie.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:ie.label})]},ie.id))})]},Ue.id)})]}),n.jsxs("div",{className:"p-4 border-t border-slate-200 shrink-0 space-y-0.5",children:[(()=>{const Ue=F8,Ae=u[Ue.id]!==!1,ie=Ue.items.filter(Z=>Z.id!=="data-hygiene"||s?.role==="Admin");return n.jsxs("div",{className:"pt-1",children:[n.jsxs("button",{type:"button",onClick:()=>p(Ue.id),"aria-expanded":Ae,"aria-label":`${Ae?"Collapse":"Expand"} ${Ue.label}`,className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 text-left ${ie.some(Z=>Z.id===e)?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0","aria-hidden":!0,children:Ue.icon}),r&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:"flex-1 font-medium whitespace-nowrap min-w-0 truncate",children:Ue.label}),n.jsx("span",{className:"shrink-0 flex items-center justify-center w-5 h-5 rounded-md text-slate-400","aria-hidden":!0,children:Ae?n.jsx(Fs,{className:"w-4 h-4"}):n.jsx(wa,{className:"w-4 h-4"})})]})]}),Ae&&n.jsx("div",{className:"space-y-0.5 pl-1 ml-2 border-l border-slate-200",children:ie.map(Z=>n.jsxs("button",{onClick:()=>ue(Z.id),className:`w-full flex items-center gap-3 px-3 py-2 rounded-lg transition-all duration-200 ${e===Z.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[n.jsx("div",{className:"shrink-0",children:Z.icon}),r&&n.jsx("span",{className:"font-medium whitespace-nowrap text-xs",children:Z.label})]},Z.id))})]})})(),n.jsxs("button",{onClick:()=>g(!0),className:"mt-4 w-full flex items-center gap-3 px-3 py-2 hover:bg-red-50 text-slate-500 hover:text-red-600 rounded-xl transition-all group text-left",children:[n.jsx(I8,{className:"w-5 h-5 shrink-0"}),r&&n.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),n.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden w-full relative",children:[n.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-6 shrink-0 relative",children:[n.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[n.jsx("button",{onClick:()=>a(!r),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:n.jsx(wU,{className:"w-5 h-5 text-slate-600"})}),n.jsxs("div",{className:"relative group hidden sm:block",children:[n.jsx(Jl,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-500"}),n.jsx("input",{type:"text",placeholder:"Search Current View...",value:m,onChange:Ue=>b(Ue.target.value),className:"pl-10 pr-4 py-2 bg-slate-50 border-none rounded-lg text-sm w-40 lg:w-80 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"})]})]}),n.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[n.jsxs("div",{className:"relative",ref:_,children:[n.jsxs("button",{onClick:()=>P(!A),className:`relative p-2 hover:bg-slate-100 rounded-lg transition-colors ${A?"bg-slate-100":""}`,children:[n.jsx(Pb,{className:`w-5 h-5 transition-colors ${T>0?"text-indigo-600":"text-slate-600"} ${I?"animate-pulse":""}`}),T>0&&n.jsx("span",{className:"absolute top-1.5 right-1.5 flex h-4 w-4",children:n.jsx("span",{className:`relative inline-flex items-center justify-center rounded-full h-4 w-4 bg-red-500 text-white text-[10px] font-bold border-2 border-white ${I?"animate-pulse":""}`,children:T})})]}),A&&n.jsx(Zbe,{notifications:S,onMarkAsRead:W,onMarkAllAsRead:O,onRefresh:()=>R(!0),isRefreshing:I,onClose:()=>P(!1),onNavigate:t,onViewAll:()=>{t("notifications"),localStorage.setItem("activeTab","notifications")}})]}),n.jsxs("button",{onClick:()=>q("deal"),className:"px-3 lg:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[n.jsx(ln,{className:"w-4 h-4 shrink-0"}),n.jsx("span",{className:"hidden sm:inline",children:"Quick Create"})]})]})]}),n.jsx("section",{className:`flex-1 min-h-0 flex flex-col p-4 lg:p-8 pb-24 lg:pb-10 ${e==="pipeline"?"overflow-hidden":"overflow-y-auto"}`,children:n.jsx("div",{className:`w-full min-w-0 ${e==="inbox"?"min-h-0 flex-1 flex flex-col":e==="pipeline"?"min-h-0 flex flex-col h-full":""}`,children:Me()})}),n.jsx(oye,{currentUser:s})]}),w.isOpen&&n.jsx(sye,{type:w.type,stage:w.stage,onClose:()=>y(Ue=>({...Ue,isOpen:!1})),onSuccess:()=>{(w.type==="contact"||w.type==="company")&&window.dispatchEvent(new Event("refresh-crm")),w.type==="deal"&&window.dispatchEvent(new Event("refresh-pipeline")),w.type==="project"&&window.dispatchEvent(new Event("refresh-projects")),w.type==="task"?window.dispatchEvent(new Event("refresh-tasks")):w.type==="invoice"&&window.dispatchEvent(new Event("refresh-invoices"))}}),j.isOpen&&n.jsx(iye,{event:j.event,selectedDate:j.selectedDate,onClose:U,onSuccess:K}),v&&n.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[n.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>g(!1)}),n.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:n.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[n.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[n.jsx("div",{children:n.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm Logout"})}),n.jsx("button",{onClick:()=>g(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:n.jsx(tr,{className:"w-5 h-5"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to logout from your ImpactFlow workspace?"}),n.jsxs("div",{className:"flex gap-3 pt-2",children:[n.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),n.jsx("button",{onClick:te,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 flex items-center justify-center gap-2",children:"Logout"})]})]})]})})]})]})})})})};function hye(){const[e,t]=D.useState("loading"),[r,a]=D.useState(!1);D.useEffect(()=>{const c=Date.now();let d=!1;const u=()=>{if(d)return;const m=Date.now()-c,b=Math.max(0,850-m);setTimeout(()=>{d||t("fading")},b)},f=()=>{if(d)return;(document.fonts?.ready??Promise.resolve()).then(()=>{d||setTimeout(u,1100)}).catch(()=>setTimeout(u,1100))};if(document.readyState==="complete")return f(),()=>{d=!0};window.addEventListener("load",f);const p=setTimeout(()=>{d||t("fading")},4500);return()=>{d=!0,window.removeEventListener("load",f),clearTimeout(p)}},[]),D.useEffect(()=>{if(e!=="fading")return;const i=setTimeout(()=>t("done"),380);return()=>clearTimeout(i)},[e]),D.useEffect(()=>{if(e!=="done")return;const i=setTimeout(()=>a(!0),480);return()=>clearTimeout(i)},[e]);const s=e==="loading"||e==="fading";return n.jsxs(n.Fragment,{children:[(e==="fading"||e==="done")&&n.jsx("div",{style:{opacity:r?1:0,transition:"opacity 0.4s ease-out",width:"100%",height:"100%",minHeight:"100vh"},children:n.jsx(fye,{})}),s&&n.jsxs("div",{role:"presentation","aria-hidden":"true",style:{position:"fixed",inset:0,zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(248, 250, 252)",fontFamily:"'Inter', sans-serif",color:"rgb(15, 23, 42)",opacity:e==="fading"?0:1,pointerEvents:e==="fading"?"none":"auto",transition:"opacity 0.35s ease-out"},children:[n.jsx("div",{style:{width:48,height:48,border:"4px solid rgb(226, 232, 240)",borderTopColor:"rgb(99, 102, 241)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),n.jsx("p",{style:{marginTop:16,fontSize:14,fontWeight:600,color:"rgb(100, 116, 139)"},children:"Loading ImpactFlow..."}),n.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker-app.js").then(e=>{console.log("[SW] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.warn("[SW] Service Worker registration failed:",e)})});const mB=document.getElementById("root");if(!mB)throw new Error("Could not find root element to mount to");const mye=tU.createRoot(mB);mye.render(n.jsx(ft.StrictMode,{children:n.jsx(hye,{})}));export{Da as _,nv as c,La as g};
