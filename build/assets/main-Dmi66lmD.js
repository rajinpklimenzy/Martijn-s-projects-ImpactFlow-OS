(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Hg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Aa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Wb={exports:{}},um={},Vb={exports:{}},In={};var P_;function xB(){if(P_)return In;P_=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;function m(H){return H===null||typeof H!="object"?null:(H=d&&H[d]||H["@@iterator"],typeof H=="function"?H:null)}var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},y=Object.assign,v={};function g(H,O,R){this.props=H,this.context=O,this.refs=v,this.updater=R||p}g.prototype.isReactComponent={},g.prototype.setState=function(H,O){if(typeof H!="object"&&typeof H!="function"&&H!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,H,O,"setState")},g.prototype.forceUpdate=function(H){this.updater.enqueueForceUpdate(this,H,"forceUpdate")};function b(){}b.prototype=g.prototype;function N(H,O,R){this.props=H,this.context=O,this.refs=v,this.updater=R||p}var j=N.prototype=new b;j.constructor=N,y(j,g.prototype),j.isPureReactComponent=!0;var w=Array.isArray,S=Object.prototype.hasOwnProperty,P={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function T(H,O,R){var W,U={},K=null,oe=null;if(O!=null)for(W in O.ref!==void 0&&(oe=O.ref),O.key!==void 0&&(K=""+O.key),O)S.call(O,W)&&!A.hasOwnProperty(W)&&(U[W]=O[W]);var he=arguments.length-2;if(he===1)U.children=R;else if(1<he){for(var ie=Array(he),ce=0;ce<he;ce++)ie[ce]=arguments[ce+2];U.children=ie}if(H&&H.defaultProps)for(W in he=H.defaultProps,he)U[W]===void 0&&(U[W]=he[W]);return{$$typeof:e,type:H,key:K,ref:oe,props:U,_owner:P.current}}function I(H,O){return{$$typeof:e,type:H.type,key:O,ref:H.ref,props:H.props,_owner:H._owner}}function B(H){return typeof H=="object"&&H!==null&&H.$$typeof===e}function E(H){var O={"=":"=0",":":"=2"};return"$"+H.replace(/[=:]/g,function(R){return O[R]})}var C=/\/+/g;function M(H,O){return typeof H=="object"&&H!==null&&H.key!=null?E(""+H.key):O.toString(36)}function q(H,O,R,W,U){var K=typeof H;(K==="undefined"||K==="boolean")&&(H=null);var oe=!1;if(H===null)oe=!0;else switch(K){case"string":case"number":oe=!0;break;case"object":switch(H.$$typeof){case e:case t:oe=!0}}if(oe)return oe=H,U=U(oe),H=W===""?"."+M(oe,0):W,w(U)?(R="",H!=null&&(R=H.replace(C,"$&/")+"/"),q(U,O,R,"",function(ce){return ce})):U!=null&&(B(U)&&(U=I(U,R+(!U.key||oe&&oe.key===U.key?"":(""+U.key).replace(C,"$&/")+"/")+H)),O.push(U)),1;if(oe=0,W=W===""?".":W+":",w(H))for(var he=0;he<H.length;he++){K=H[he];var ie=W+M(K,he);oe+=q(K,O,R,ie,U)}else if(ie=m(H),typeof ie=="function")for(H=ie.call(H),he=0;!(K=H.next()).done;)K=K.value,ie=W+M(K,he++),oe+=q(K,O,R,ie,U);else if(K==="object")throw O=String(H),Error("Objects are not valid as a React child (found: "+(O==="[object Object]"?"object with keys {"+Object.keys(H).join(", ")+"}":O)+"). If you meant to render a collection of children, use an array instead.");return oe}function G(H,O,R){if(H==null)return H;var W=[],U=0;return q(H,W,"","",function(K){return O.call(R,K,U++)}),W}function Z(H){if(H._status===-1){var O=H._result;O=O(),O.then(function(R){(H._status===0||H._status===-1)&&(H._status=1,H._result=R)},function(R){(H._status===0||H._status===-1)&&(H._status=2,H._result=R)}),H._status===-1&&(H._status=0,H._result=O)}if(H._status===1)return H._result.default;throw H._result}var te={current:null},ne={transition:null},J={ReactCurrentDispatcher:te,ReactCurrentBatchConfig:ne,ReactCurrentOwner:P};function ee(){throw Error("act(...) is not supported in production builds of React.")}return In.Children={map:G,forEach:function(H,O,R){G(H,function(){O.apply(this,arguments)},R)},count:function(H){var O=0;return G(H,function(){O++}),O},toArray:function(H){return G(H,function(O){return O})||[]},only:function(H){if(!B(H))throw Error("React.Children.only expected to receive a single React element child.");return H}},In.Component=g,In.Fragment=r,In.Profiler=s,In.PureComponent=N,In.StrictMode=n,In.Suspense=c,In.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,In.act=ee,In.cloneElement=function(H,O,R){if(H==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+H+".");var W=y({},H.props),U=H.key,K=H.ref,oe=H._owner;if(O!=null){if(O.ref!==void 0&&(K=O.ref,oe=P.current),O.key!==void 0&&(U=""+O.key),H.type&&H.type.defaultProps)var he=H.type.defaultProps;for(ie in O)S.call(O,ie)&&!A.hasOwnProperty(ie)&&(W[ie]=O[ie]===void 0&&he!==void 0?he[ie]:O[ie])}var ie=arguments.length-2;if(ie===1)W.children=R;else if(1<ie){he=Array(ie);for(var ce=0;ce<ie;ce++)he[ce]=arguments[ce+2];W.children=he}return{$$typeof:e,type:H.type,key:U,ref:K,props:W,_owner:oe}},In.createContext=function(H){return H={$$typeof:o,_currentValue:H,_currentValue2:H,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},H.Provider={$$typeof:i,_context:H},H.Consumer=H},In.createElement=T,In.createFactory=function(H){var O=T.bind(null,H);return O.type=H,O},In.createRef=function(){return{current:null}},In.forwardRef=function(H){return{$$typeof:l,render:H}},In.isValidElement=B,In.lazy=function(H){return{$$typeof:f,_payload:{_status:-1,_result:H},_init:Z}},In.memo=function(H,O){return{$$typeof:u,type:H,compare:O===void 0?null:O}},In.startTransition=function(H){var O=ne.transition;ne.transition={};try{H()}finally{ne.transition=O}},In.unstable_act=ee,In.useCallback=function(H,O){return te.current.useCallback(H,O)},In.useContext=function(H){return te.current.useContext(H)},In.useDebugValue=function(){},In.useDeferredValue=function(H){return te.current.useDeferredValue(H)},In.useEffect=function(H,O){return te.current.useEffect(H,O)},In.useId=function(){return te.current.useId()},In.useImperativeHandle=function(H,O,R){return te.current.useImperativeHandle(H,O,R)},In.useInsertionEffect=function(H,O){return te.current.useInsertionEffect(H,O)},In.useLayoutEffect=function(H,O){return te.current.useLayoutEffect(H,O)},In.useMemo=function(H,O){return te.current.useMemo(H,O)},In.useReducer=function(H,O,R){return te.current.useReducer(H,O,R)},In.useRef=function(H){return te.current.useRef(H)},In.useState=function(H){return te.current.useState(H)},In.useSyncExternalStore=function(H,O,R){return te.current.useSyncExternalStore(H,O,R)},In.useTransition=function(){return te.current.useTransition()},In.version="18.3.1",In}var I_;function xy(){return I_||(I_=1,Vb.exports=xB()),Vb.exports}var D_;function gB(){if(D_)return um;D_=1;var e=xy(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,c,u){var f,d={},m=null,p=null;u!==void 0&&(m=""+u),c.key!==void 0&&(m=""+c.key),c.ref!==void 0&&(p=c.ref);for(f in c)n.call(c,f)&&!i.hasOwnProperty(f)&&(d[f]=c[f]);if(l&&l.defaultProps)for(f in c=l.defaultProps,c)d[f]===void 0&&(d[f]=c[f]);return{$$typeof:t,type:l,key:m,ref:p,props:d,_owner:s.current}}return um.Fragment=r,um.jsx=o,um.jsxs=o,um}var L_;function vB(){return L_||(L_=1,Wb.exports=gB()),Wb.exports}var a=vB(),z=xy();const at=Aa(z);var Wg={},Gb={exports:{}},ql={},Kb={exports:{}},Xb={};var F_;function yB(){return F_||(F_=1,(function(e){function t(ne,J){var ee=ne.length;ne.push(J);e:for(;0<ee;){var H=ee-1>>>1,O=ne[H];if(0<s(O,J))ne[H]=J,ne[ee]=O,ee=H;else break e}}function r(ne){return ne.length===0?null:ne[0]}function n(ne){if(ne.length===0)return null;var J=ne[0],ee=ne.pop();if(ee!==J){ne[0]=ee;e:for(var H=0,O=ne.length,R=O>>>1;H<R;){var W=2*(H+1)-1,U=ne[W],K=W+1,oe=ne[K];if(0>s(U,ee))K<O&&0>s(oe,U)?(ne[H]=oe,ne[K]=ee,H=K):(ne[H]=U,ne[W]=ee,H=W);else if(K<O&&0>s(oe,ee))ne[H]=oe,ne[K]=ee,H=K;else break e}}return J}function s(ne,J){var ee=ne.sortIndex-J.sortIndex;return ee!==0?ee:ne.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],f=1,d=null,m=3,p=!1,y=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(ne){for(var J=r(u);J!==null;){if(J.callback===null)n(u);else if(J.startTime<=ne)n(u),J.sortIndex=J.expirationTime,t(c,J);else break;J=r(u)}}function w(ne){if(v=!1,j(ne),!y)if(r(c)!==null)y=!0,Z(S);else{var J=r(u);J!==null&&te(w,J.startTime-ne)}}function S(ne,J){y=!1,v&&(v=!1,b(T),T=-1),p=!0;var ee=m;try{for(j(J),d=r(c);d!==null&&(!(d.expirationTime>J)||ne&&!E());){var H=d.callback;if(typeof H=="function"){d.callback=null,m=d.priorityLevel;var O=H(d.expirationTime<=J);J=e.unstable_now(),typeof O=="function"?d.callback=O:d===r(c)&&n(c),j(J)}else n(c);d=r(c)}if(d!==null)var R=!0;else{var W=r(u);W!==null&&te(w,W.startTime-J),R=!1}return R}finally{d=null,m=ee,p=!1}}var P=!1,A=null,T=-1,I=5,B=-1;function E(){return!(e.unstable_now()-B<I)}function C(){if(A!==null){var ne=e.unstable_now();B=ne;var J=!0;try{J=A(!0,ne)}finally{J?M():(P=!1,A=null)}}else P=!1}var M;if(typeof N=="function")M=function(){N(C)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,G=q.port2;q.port1.onmessage=C,M=function(){G.postMessage(null)}}else M=function(){g(C,0)};function Z(ne){A=ne,P||(P=!0,M())}function te(ne,J){T=g(function(){ne(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(ne){ne.callback=null},e.unstable_continueExecution=function(){y||p||(y=!0,Z(S))},e.unstable_forceFrameRate=function(ne){0>ne||125<ne?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<ne?Math.floor(1e3/ne):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(ne){switch(m){case 1:case 2:case 3:var J=3;break;default:J=m}var ee=m;m=J;try{return ne()}finally{m=ee}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(ne,J){switch(ne){case 1:case 2:case 3:case 4:case 5:break;default:ne=3}var ee=m;m=ne;try{return J()}finally{m=ee}},e.unstable_scheduleCallback=function(ne,J,ee){var H=e.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?H+ee:H):ee=H,ne){case 1:var O=-1;break;case 2:O=250;break;case 5:O=1073741823;break;case 4:O=1e4;break;default:O=5e3}return O=ee+O,ne={id:f++,callback:J,priorityLevel:ne,startTime:ee,expirationTime:O,sortIndex:-1},ee>H?(ne.sortIndex=ee,t(u,ne),r(c)===null&&ne===r(u)&&(v?(b(T),T=-1):v=!0,te(w,ee-H))):(ne.sortIndex=O,t(c,ne),y||p||(y=!0,Z(S))),ne},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(ne){var J=m;return function(){var ee=m;m=J;try{return ne.apply(this,arguments)}finally{m=ee}}}})(Xb)),Xb}var M_;function bB(){return M_||(M_=1,Kb.exports=yB()),Kb.exports}var R_;function wB(){if(R_)return ql;R_=1;var e=xy(),t=bB();function r(h){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+h,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+h+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function i(h,x){o(h,x),o(h+"Capture",x)}function o(h,x){for(s[h]=x,h=0;h<x.length;h++)n.add(x[h])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,u=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},d={};function m(h){return c.call(d,h)?!0:c.call(f,h)?!1:u.test(h)?d[h]=!0:(f[h]=!0,!1)}function p(h,x,k,L){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return L?!1:k!==null?!k.acceptsBooleans:(h=h.toLowerCase().slice(0,5),h!=="data-"&&h!=="aria-");default:return!1}}function y(h,x,k,L){if(x===null||typeof x>"u"||p(h,x,k,L))return!0;if(L)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function v(h,x,k,L,X,ae,ke){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=L,this.attributeNamespace=X,this.mustUseProperty=k,this.propertyName=h,this.type=x,this.sanitizeURL=ae,this.removeEmptyString=ke}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(h){g[h]=new v(h,0,!1,h,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(h){var x=h[0];g[x]=new v(x,1,!1,h[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(h){g[h]=new v(h,2,!1,h.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(h){g[h]=new v(h,2,!1,h,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(h){g[h]=new v(h,3,!1,h.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(h){g[h]=new v(h,3,!0,h,null,!1,!1)}),["capture","download"].forEach(function(h){g[h]=new v(h,4,!1,h,null,!1,!1)}),["cols","rows","size","span"].forEach(function(h){g[h]=new v(h,6,!1,h,null,!1,!1)}),["rowSpan","start"].forEach(function(h){g[h]=new v(h,5,!1,h.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function N(h){return h[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(h){var x=h.replace(b,N);g[x]=new v(x,1,!1,h,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(h){var x=h.replace(b,N);g[x]=new v(x,1,!1,h,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(h){var x=h.replace(b,N);g[x]=new v(x,1,!1,h,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!1,!1)}),g.xlinkHref=new v("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(h){g[h]=new v(h,1,!1,h.toLowerCase(),null,!0,!0)});function j(h,x,k,L){var X=g.hasOwnProperty(x)?g[x]:null;(X!==null?X.type!==0:L||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(y(x,k,X,L)&&(k=null),L||X===null?m(x)&&(k===null?h.removeAttribute(x):h.setAttribute(x,""+k)):X.mustUseProperty?h[X.propertyName]=k===null?X.type===3?!1:"":k:(x=X.attributeName,L=X.attributeNamespace,k===null?h.removeAttribute(x):(X=X.type,k=X===3||X===4&&k===!0?"":""+k,L?h.setAttributeNS(L,x,k):h.setAttribute(x,k))))}var w=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,S=Symbol.for("react.element"),P=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),B=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),Z=Symbol.for("react.lazy"),te=Symbol.for("react.offscreen"),ne=Symbol.iterator;function J(h){return h===null||typeof h!="object"?null:(h=ne&&h[ne]||h["@@iterator"],typeof h=="function"?h:null)}var ee=Object.assign,H;function O(h){if(H===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);H=x&&x[1]||""}return`
`+H+h}var R=!1;function W(h,x){if(!h||R)return"";R=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(St){var L=St}Reflect.construct(h,[],x)}else{try{x.call()}catch(St){L=St}h.call(x.prototype)}else{try{throw Error()}catch(St){L=St}h()}}catch(St){if(St&&L&&typeof St.stack=="string"){for(var X=St.stack.split(`
`),ae=L.stack.split(`
`),ke=X.length-1,We=ae.length-1;1<=ke&&0<=We&&X[ke]!==ae[We];)We--;for(;1<=ke&&0<=We;ke--,We--)if(X[ke]!==ae[We]){if(ke!==1||We!==1)do if(ke--,We--,0>We||X[ke]!==ae[We]){var rt=`
`+X[ke].replace(" at new "," at ");return h.displayName&&rt.includes("<anonymous>")&&(rt=rt.replace("<anonymous>",h.displayName)),rt}while(1<=ke&&0<=We);break}}}finally{R=!1,Error.prepareStackTrace=k}return(h=h?h.displayName||h.name:"")?O(h):""}function U(h){switch(h.tag){case 5:return O(h.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 2:case 15:return h=W(h.type,!1),h;case 11:return h=W(h.type.render,!1),h;case 1:return h=W(h.type,!0),h;default:return""}}function K(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case A:return"Fragment";case P:return"Portal";case I:return"Profiler";case T:return"StrictMode";case M:return"Suspense";case q:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case E:return(h.displayName||"Context")+".Consumer";case B:return(h._context.displayName||"Context")+".Provider";case C:var x=h.render;return h=h.displayName,h||(h=x.displayName||x.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case G:return x=h.displayName||null,x!==null?x:K(h.type)||"Memo";case Z:x=h._payload,h=h._init;try{return K(h(x))}catch{}}return null}function oe(h){var x=h.type;switch(h.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=x.render,h=h.displayName||h.name||"",x.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(x);case 8:return x===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function he(h){switch(typeof h){case"boolean":case"number":case"string":case"undefined":return h;case"object":return h;default:return""}}function ie(h){var x=h.type;return(h=h.nodeName)&&h.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function ce(h){var x=ie(h)?"checked":"value",k=Object.getOwnPropertyDescriptor(h.constructor.prototype,x),L=""+h[x];if(!h.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var X=k.get,ae=k.set;return Object.defineProperty(h,x,{configurable:!0,get:function(){return X.call(this)},set:function(ke){L=""+ke,ae.call(this,ke)}}),Object.defineProperty(h,x,{enumerable:k.enumerable}),{getValue:function(){return L},setValue:function(ke){L=""+ke},stopTracking:function(){h._valueTracker=null,delete h[x]}}}}function Le(h){h._valueTracker||(h._valueTracker=ce(h))}function le(h){if(!h)return!1;var x=h._valueTracker;if(!x)return!0;var k=x.getValue(),L="";return h&&(L=ie(h)?h.checked?"true":"false":h.value),h=L,h!==k?(x.setValue(h),!0):!1}function He(h){if(h=h||(typeof document<"u"?document:void 0),typeof h>"u")return null;try{return h.activeElement||h.body}catch{return h.body}}function Fe(h,x){var k=x.checked;return ee({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??h._wrapperState.initialChecked})}function fe(h,x){var k=x.defaultValue==null?"":x.defaultValue,L=x.checked!=null?x.checked:x.defaultChecked;k=he(x.value!=null?x.value:k),h._wrapperState={initialChecked:L,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function Q(h,x){x=x.checked,x!=null&&j(h,"checked",x,!1)}function we(h,x){Q(h,x);var k=he(x.value),L=x.type;if(k!=null)L==="number"?(k===0&&h.value===""||h.value!=k)&&(h.value=""+k):h.value!==""+k&&(h.value=""+k);else if(L==="submit"||L==="reset"){h.removeAttribute("value");return}x.hasOwnProperty("value")?Ee(h,x.type,k):x.hasOwnProperty("defaultValue")&&Ee(h,x.type,he(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(h.defaultChecked=!!x.defaultChecked)}function ve(h,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var L=x.type;if(!(L!=="submit"&&L!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+h._wrapperState.initialValue,k||x===h.value||(h.value=x),h.defaultValue=x}k=h.name,k!==""&&(h.name=""),h.defaultChecked=!!h._wrapperState.initialChecked,k!==""&&(h.name=k)}function Ee(h,x,k){(x!=="number"||He(h.ownerDocument)!==h)&&(k==null?h.defaultValue=""+h._wrapperState.initialValue:h.defaultValue!==""+k&&(h.defaultValue=""+k))}var pe=Array.isArray;function ue(h,x,k,L){if(h=h.options,x){x={};for(var X=0;X<k.length;X++)x["$"+k[X]]=!0;for(k=0;k<h.length;k++)X=x.hasOwnProperty("$"+h[k].value),h[k].selected!==X&&(h[k].selected=X),X&&L&&(h[k].defaultSelected=!0)}else{for(k=""+he(k),x=null,X=0;X<h.length;X++){if(h[X].value===k){h[X].selected=!0,L&&(h[X].defaultSelected=!0);return}x!==null||h[X].disabled||(x=h[X])}x!==null&&(x.selected=!0)}}function Pe(h,x){if(x.dangerouslySetInnerHTML!=null)throw Error(r(91));return ee({},x,{value:void 0,defaultValue:void 0,children:""+h._wrapperState.initialValue})}function Ne(h,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(r(92));if(pe(k)){if(1<k.length)throw Error(r(93));k=k[0]}x=k}x==null&&(x=""),k=x}h._wrapperState={initialValue:he(k)}}function Be(h,x){var k=he(x.value),L=he(x.defaultValue);k!=null&&(k=""+k,k!==h.value&&(h.value=k),x.defaultValue==null&&h.defaultValue!==k&&(h.defaultValue=k)),L!=null&&(h.defaultValue=""+L)}function nt(h){var x=h.textContent;x===h._wrapperState.initialValue&&x!==""&&x!==null&&(h.value=x)}function mt(h){switch(h){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kt(h,x){return h==null||h==="http://www.w3.org/1999/xhtml"?mt(x):h==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":h}var Re,gt=(function(h){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,L,X){MSApp.execUnsafeLocalFunction(function(){return h(x,k,L,X)})}:h})(function(h,x){if(h.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in h)h.innerHTML=x;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=Re.firstChild;h.firstChild;)h.removeChild(h.firstChild);for(;x.firstChild;)h.appendChild(x.firstChild)}});function ut(h,x){if(x){var k=h.firstChild;if(k&&k===h.lastChild&&k.nodeType===3){k.nodeValue=x;return}}h.textContent=x}var lt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pr=["Webkit","ms","Moz","O"];Object.keys(lt).forEach(function(h){pr.forEach(function(x){x=x+h.charAt(0).toUpperCase()+h.substring(1),lt[x]=lt[h]})});function tr(h,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||lt.hasOwnProperty(h)&&lt[h]?(""+x).trim():x+"px"}function ft(h,x){h=h.style;for(var k in x)if(x.hasOwnProperty(k)){var L=k.indexOf("--")===0,X=tr(k,x[k],L);k==="float"&&(k="cssFloat"),L?h.setProperty(k,X):h[k]=X}}var $t=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function er(h,x){if(x){if($t[h]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(r(137,h));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(r(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(r(61))}if(x.style!=null&&typeof x.style!="object")throw Error(r(62))}}function qe(h,x){if(h.indexOf("-")===-1)return typeof x.is=="string";switch(h){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bt=null;function Nr(h){return h=h.target||h.srcElement||window,h.correspondingUseElement&&(h=h.correspondingUseElement),h.nodeType===3?h.parentNode:h}var rr=null,Lr=null,Er=null;function or(h){if(h=Zl(h)){if(typeof rr!="function")throw Error(r(280));var x=h.stateNode;x&&(x=Bc(x),rr(h.stateNode,h.type,x))}}function Ut(h){Lr?Er?Er.push(h):Er=[h]:Lr=h}function wr(){if(Lr){var h=Lr,x=Er;if(Er=Lr=null,or(h),x)for(h=0;h<x.length;h++)or(x[h])}}function kr(h,x){return h(x)}function Gr(){}var hn=!1;function On(h,x,k){if(hn)return h(x,k);hn=!0;try{return kr(h,x,k)}finally{hn=!1,(Lr!==null||Er!==null)&&(Gr(),wr())}}function br(h,x){var k=h.stateNode;if(k===null)return null;var L=Bc(k);if(L===null)return null;k=L[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(L=!L.disabled)||(h=h.type,L=!(h==="button"||h==="input"||h==="select"||h==="textarea")),h=!L;break e;default:h=!1}if(h)return null;if(k&&typeof k!="function")throw Error(r(231,x,typeof k));return k}var Yn=!1;if(l)try{var on={};Object.defineProperty(on,"passive",{get:function(){Yn=!0}}),window.addEventListener("test",on,on),window.removeEventListener("test",on,on)}catch{Yn=!1}function Xe(h,x,k,L,X,ae,ke,We,rt){var St=Array.prototype.slice.call(arguments,3);try{x.apply(k,St)}catch(Xt){this.onError(Xt)}}var wt=!1,Wt=null,re=!1,me=null,ye={onError:function(h){wt=!0,Wt=h}};function Ae(h,x,k,L,X,ae,ke,We,rt){wt=!1,Wt=null,Xe.apply(ye,arguments)}function Ce(h,x,k,L,X,ae,ke,We,rt){if(Ae.apply(this,arguments),wt){if(wt){var St=Wt;wt=!1,Wt=null}else throw Error(r(198));re||(re=!0,me=St)}}function Oe(h){var x=h,k=h;if(h.alternate)for(;x.return;)x=x.return;else{h=x;do x=h,(x.flags&4098)!==0&&(k=x.return),h=x.return;while(h)}return x.tag===3?k:null}function Ke(h){if(h.tag===13){var x=h.memoizedState;if(x===null&&(h=h.alternate,h!==null&&(x=h.memoizedState)),x!==null)return x.dehydrated}return null}function ct(h){if(Oe(h)!==h)throw Error(r(188))}function Ge(h){var x=h.alternate;if(!x){if(x=Oe(h),x===null)throw Error(r(188));return x!==h?null:h}for(var k=h,L=x;;){var X=k.return;if(X===null)break;var ae=X.alternate;if(ae===null){if(L=X.return,L!==null){k=L;continue}break}if(X.child===ae.child){for(ae=X.child;ae;){if(ae===k)return ct(X),h;if(ae===L)return ct(X),x;ae=ae.sibling}throw Error(r(188))}if(k.return!==L.return)k=X,L=ae;else{for(var ke=!1,We=X.child;We;){if(We===k){ke=!0,k=X,L=ae;break}if(We===L){ke=!0,L=X,k=ae;break}We=We.sibling}if(!ke){for(We=ae.child;We;){if(We===k){ke=!0,k=ae,L=X;break}if(We===L){ke=!0,L=ae,k=X;break}We=We.sibling}if(!ke)throw Error(r(189))}}if(k.alternate!==L)throw Error(r(190))}if(k.tag!==3)throw Error(r(188));return k.stateNode.current===k?h:x}function Je(h){return h=Ge(h),h!==null?ze(h):null}function ze(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var x=ze(h);if(x!==null)return x;h=h.sibling}return null}var De=t.unstable_scheduleCallback,tt=t.unstable_cancelCallback,pt=t.unstable_shouldYield,It=t.unstable_requestPaint,Mt=t.unstable_now,vr=t.unstable_getCurrentPriorityLevel,Ur=t.unstable_ImmediatePriority,sn=t.unstable_UserBlockingPriority,En=t.unstable_NormalPriority,ls=t.unstable_LowPriority,vn=t.unstable_IdlePriority,xa=null,Fn=null;function ga(h){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(xa,h,void 0,(h.current.flags&128)===128)}catch{}}var ca=Math.clz32?Math.clz32:va,da=Math.log,Us=Math.LN2;function va(h){return h>>>=0,h===0?32:31-(da(h)/Us|0)|0}var Ue=64,Dt=4194304;function Ct(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function sr(h,x){var k=h.pendingLanes;if(k===0)return 0;var L=0,X=h.suspendedLanes,ae=h.pingedLanes,ke=k&268435455;if(ke!==0){var We=ke&~X;We!==0?L=Ct(We):(ae&=ke,ae!==0&&(L=Ct(ae)))}else ke=k&~X,ke!==0?L=Ct(ke):ae!==0&&(L=Ct(ae));if(L===0)return 0;if(x!==0&&x!==L&&(x&X)===0&&(X=L&-L,ae=x&-x,X>=ae||X===16&&(ae&4194240)!==0))return x;if((L&4)!==0&&(L|=k&16),x=h.entangledLanes,x!==0)for(h=h.entanglements,x&=L;0<x;)k=31-ca(x),X=1<<k,L|=h[k],x&=~X;return L}function jr(h,x){switch(h){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xr(h,x){for(var k=h.suspendedLanes,L=h.pingedLanes,X=h.expirationTimes,ae=h.pendingLanes;0<ae;){var ke=31-ca(ae),We=1<<ke,rt=X[ke];rt===-1?((We&k)===0||(We&L)!==0)&&(X[ke]=jr(We,x)):rt<=x&&(h.expiredLanes|=We),ae&=~We}}function Cr(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function kn(){var h=Ue;return Ue<<=1,(Ue&4194240)===0&&(Ue=64),h}function Pn(h){for(var x=[],k=0;31>k;k++)x.push(h);return x}function nr(h,x,k){h.pendingLanes|=x,x!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,x=31-ca(x),h[x]=k}function ir(h,x){var k=h.pendingLanes&~x;h.pendingLanes=x,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=x,h.mutableReadLanes&=x,h.entangledLanes&=x,x=h.entanglements;var L=h.eventTimes;for(h=h.expirationTimes;0<k;){var X=31-ca(k),ae=1<<X;x[X]=0,L[X]=-1,h[X]=-1,k&=~ae}}function Et(h,x){var k=h.entangledLanes|=x;for(h=h.entanglements;k;){var L=31-ca(k),X=1<<L;X&x|h[L]&x&&(h[L]|=x),k&=~X}}var Sr=0;function Ht(h){return h&=-h,1<h?4<h?(h&268435455)!==0?16:536870912:4:1}var Un,Ca,pn,Zt,zn,ya=!1,ln=[],xn=null,$r=null,Kr=null,_e=new Map,Yt=new Map,mr=[],_r="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function zr(h,x){switch(h){case"focusin":case"focusout":xn=null;break;case"dragenter":case"dragleave":$r=null;break;case"mouseover":case"mouseout":Kr=null;break;case"pointerover":case"pointerout":_e.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yt.delete(x.pointerId)}}function mn(h,x,k,L,X,ae){return h===null||h.nativeEvent!==ae?(h={blockedOn:x,domEventName:k,eventSystemFlags:L,nativeEvent:ae,targetContainers:[X]},x!==null&&(x=Zl(x),x!==null&&Ca(x)),h):(h.eventSystemFlags|=L,x=h.targetContainers,X!==null&&x.indexOf(X)===-1&&x.push(X),h)}function ta(h,x,k,L,X){switch(x){case"focusin":return xn=mn(xn,h,x,k,L,X),!0;case"dragenter":return $r=mn($r,h,x,k,L,X),!0;case"mouseover":return Kr=mn(Kr,h,x,k,L,X),!0;case"pointerover":var ae=X.pointerId;return _e.set(ae,mn(_e.get(ae)||null,h,x,k,L,X)),!0;case"gotpointercapture":return ae=X.pointerId,Yt.set(ae,mn(Yt.get(ae)||null,h,x,k,L,X)),!0}return!1}function Hn(h){var x=Rc(h.target);if(x!==null){var k=Oe(x);if(k!==null){if(x=k.tag,x===13){if(x=Ke(k),x!==null){h.blockedOn=x,zn(h.priority,function(){pn(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){h.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}h.blockedOn=null}function ti(h){if(h.blockedOn!==null)return!1;for(var x=h.targetContainers;0<x.length;){var k=kc(h.domEventName,h.eventSystemFlags,x[0],h.nativeEvent);if(k===null){k=h.nativeEvent;var L=new k.constructor(k.type,k);bt=L,k.target.dispatchEvent(L),bt=null}else return x=Zl(k),x!==null&&Ca(x),h.blockedOn=k,!1;x.shift()}return!0}function Vu(h,x,k){ti(h)&&k.delete(x)}function jf(){ya=!1,xn!==null&&ti(xn)&&(xn=null),$r!==null&&ti($r)&&($r=null),Kr!==null&&ti(Kr)&&(Kr=null),_e.forEach(Vu),Yt.forEach(Vu)}function Sl(h,x){h.blockedOn===x&&(h.blockedOn=null,ya||(ya=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jf)))}function po(h){function x(X){return Sl(X,h)}if(0<ln.length){Sl(ln[0],h);for(var k=1;k<ln.length;k++){var L=ln[k];L.blockedOn===h&&(L.blockedOn=null)}}for(xn!==null&&Sl(xn,h),$r!==null&&Sl($r,h),Kr!==null&&Sl(Kr,h),_e.forEach(x),Yt.forEach(x),k=0;k<mr.length;k++)L=mr[k],L.blockedOn===h&&(L.blockedOn=null);for(;0<mr.length&&(k=mr[0],k.blockedOn===null);)Hn(k),k.blockedOn===null&&mr.shift()}var ri=w.ReactCurrentBatchConfig,Nc=!0;function jc(h,x,k,L){var X=Sr,ae=ri.transition;ri.transition=null;try{Sr=1,_l(h,x,k,L)}finally{Sr=X,ri.transition=ae}}function Id(h,x,k,L){var X=Sr,ae=ri.transition;ri.transition=null;try{Sr=4,_l(h,x,k,L)}finally{Sr=X,ri.transition=ae}}function _l(h,x,k,L){if(Nc){var X=kc(h,x,k,L);if(X===null)Pc(h,x,L,Kl,k),zr(h,L);else if(ta(X,h,x,k,L))L.stopPropagation();else if(zr(h,L),x&4&&-1<_r.indexOf(h)){for(;X!==null;){var ae=Zl(X);if(ae!==null&&Un(ae),ae=kc(h,x,k,L),ae===null&&Pc(h,x,L,Kl,k),ae===X)break;X=ae}X!==null&&L.stopPropagation()}else Pc(h,x,L,null,k)}}var Kl=null;function kc(h,x,k,L){if(Kl=null,h=Nr(L),h=Rc(h),h!==null)if(x=Oe(h),x===null)h=null;else if(k=x.tag,k===13){if(h=Ke(x),h!==null)return h;h=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;h=null}else x!==h&&(h=null);return Kl=h,null}function uu(h){switch(h){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vr()){case Ur:return 1;case sn:return 4;case En:case ls:return 16;case vn:return 536870912;default:return 16}default:return 16}}var Ho=null,bi=null,Qi=null;function Sc(){if(Qi)return Qi;var h,x=bi,k=x.length,L,X="value"in Ho?Ho.value:Ho.textContent,ae=X.length;for(h=0;h<k&&x[h]===X[h];h++);var ke=k-h;for(L=1;L<=ke&&x[k-L]===X[ae-L];L++);return Qi=X.slice(h,1<L?1-L:void 0)}function mo(h){var x=h.keyCode;return"charCode"in h?(h=h.charCode,h===0&&x===13&&(h=13)):h=x,h===10&&(h=13),32<=h||h===13?h:0}function fs(){return!0}function Al(){return!1}function hs(h){function x(k,L,X,ae,ke){this._reactName=k,this._targetInst=X,this.type=L,this.nativeEvent=ae,this.target=ke,this.currentTarget=null;for(var We in h)h.hasOwnProperty(We)&&(k=h[We],this[We]=k?k(ae):ae[We]);return this.isDefaultPrevented=(ae.defaultPrevented!=null?ae.defaultPrevented:ae.returnValue===!1)?fs:Al,this.isPropagationStopped=Al,this}return ee(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),x}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(h){return h.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},_c=hs(Wo),xo=ee({},Wo,{view:0,detail:0}),El=hs(xo),Vo,du,Go,Ko=ee({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yr,button:0,buttons:0,relatedTarget:function(h){return h.relatedTarget===void 0?h.fromElement===h.srcElement?h.toElement:h.fromElement:h.relatedTarget},movementX:function(h){return"movementX"in h?h.movementX:(h!==Go&&(Go&&h.type==="mousemove"?(Vo=h.screenX-Go.screenX,du=h.screenY-Go.screenY):du=Vo=0,Go=h),Vo)},movementY:function(h){return"movementY"in h?h.movementY:du}}),Ac=hs(Ko),Ka=ee({},Ko,{dataTransfer:0}),w0=hs(Ka),fu=ee({},xo,{relatedTarget:0}),Cl=hs(fu),hu=ee({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),Zi=hs(hu),kf=ee({},Wo,{clipboardData:function(h){return"clipboardData"in h?h.clipboardData:window.clipboardData}}),V=hs(kf),be=ee({},Wo,{data:0}),$e=hs(be),Ze={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ht={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Pt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Gt(h){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(h):(h=Pt[h])?!!x[h]:!1}function yr(){return Gt}var Mr=ee({},xo,{key:function(h){if(h.key){var x=Ze[h.key]||h.key;if(x!=="Unidentified")return x}return h.type==="keypress"?(h=mo(h),h===13?"Enter":String.fromCharCode(h)):h.type==="keydown"||h.type==="keyup"?ht[h.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yr,charCode:function(h){return h.type==="keypress"?mo(h):0},keyCode:function(h){return h.type==="keydown"||h.type==="keyup"?h.keyCode:0},which:function(h){return h.type==="keypress"?mo(h):h.type==="keydown"||h.type==="keyup"?h.keyCode:0}}),Xr=hs(Mr),Qr=ee({},Ko,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),un=hs(Qr),Ta=ee({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yr}),$a=hs(Ta),Xa=ee({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),qs=hs(Xa),ps=ee({},Ko,{deltaX:function(h){return"deltaX"in h?h.deltaX:"wheelDeltaX"in h?-h.wheelDeltaX:0},deltaY:function(h){return"deltaY"in h?h.deltaY:"wheelDeltaY"in h?-h.wheelDeltaY:"wheelDelta"in h?-h.wheelDelta:0},deltaZ:0,deltaMode:0}),Xo=hs(ps),ni=[9,13,27,32],ms=l&&"CompositionEvent"in window,eo=null;l&&"documentMode"in document&&(eo=document.documentMode);var Ya=l&&"TextEvent"in window&&!eo,Ec=l&&(!ms||eo&&8<eo&&11>=eo),yn=" ",cs=!1;function Oa(h,x){switch(h){case"keyup":return ni.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xs(h){return h=h.detail,typeof h=="object"&&"data"in h?h.data:null}var dn=!1;function Ts(h,x){switch(h){case"compositionend":return xs(x);case"keypress":return x.which!==32?null:(cs=!0,yn);case"textInput":return h=x.data,h===yn&&cs?null:h;default:return null}}function Pa(h,x){if(dn)return h==="compositionend"||!ms&&Oa(h,x)?(h=Sc(),Qi=bi=Ho=null,dn=!1,h):null;switch(h){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Ec&&x.locale!=="ko"?null:x.data;default:return null}}var Fi={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gs(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x==="input"?!!Fi[h.type]:x==="textarea"}function ua(h,x,k,L){Ut(L),x=N0(x,"onChange"),0<x.length&&(k=new _c("onChange","change",null,k,L),h.push({event:k,listeners:x}))}var vs=null,Mi=null;function Tl(h){Bd(h,0)}function ai(h){var x=ec(h);if(le(x))return h}function Xl(h,x){if(h==="change")return x}var Dd=!1;if(l){var Cc;if(l){var Ol="oninput"in document;if(!Ol){var Yl=document.createElement("div");Yl.setAttribute("oninput","return;"),Ol=typeof Yl.oninput=="function"}Cc=Ol}else Cc=!1;Dd=Cc&&(!document.documentMode||9<document.documentMode)}function si(){vs&&(vs.detachEvent("onpropertychange",Os),Mi=vs=null)}function Os(h){if(h.propertyName==="value"&&ai(Mi)){var x=[];ua(x,Mi,h,Nr(h)),On(Tl,x)}}function Yo(h,x,k){h==="focusin"?(si(),vs=x,Mi=k,vs.attachEvent("onpropertychange",Os)):h==="focusout"&&si()}function Jo(h){if(h==="selectionchange"||h==="keyup"||h==="keydown")return ai(Mi)}function go(h,x){if(h==="click")return ai(x)}function Qo(h,x){if(h==="input"||h==="change")return ai(x)}function ii(h,x){return h===x&&(h!==0||1/h===1/x)||h!==h&&x!==x}var Sn=typeof Object.is=="function"?Object.is:ii;function Ri(h,x){if(Sn(h,x))return!0;if(typeof h!="object"||h===null||typeof x!="object"||x===null)return!1;var k=Object.keys(h),L=Object.keys(x);if(k.length!==L.length)return!1;for(L=0;L<k.length;L++){var X=k[L];if(!c.call(x,X)||!Sn(h[X],x[X]))return!1}return!0}function Ja(h){for(;h&&h.firstChild;)h=h.firstChild;return h}function Ps(h,x){var k=Ja(h);h=0;for(var L;k;){if(k.nodeType===3){if(L=h+k.textContent.length,h<=x&&L>=x)return{node:k,offset:x-h};h=L}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=Ja(k)}}function Zo(h,x){return h&&x?h===x?!0:h&&h.nodeType===3?!1:x&&x.nodeType===3?Zo(h,x.parentNode):"contains"in h?h.contains(x):h.compareDocumentPosition?!!(h.compareDocumentPosition(x)&16):!1:!1}function Ld(){for(var h=window,x=He();x instanceof h.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)h=x.contentWindow;else break;x=He(h.document)}return x}function Pl(h){var x=h&&h.nodeName&&h.nodeName.toLowerCase();return x&&(x==="input"&&(h.type==="text"||h.type==="search"||h.type==="tel"||h.type==="url"||h.type==="password")||x==="textarea"||h.contentEditable==="true")}function to(h){var x=Ld(),k=h.focusedElem,L=h.selectionRange;if(x!==k&&k&&k.ownerDocument&&Zo(k.ownerDocument.documentElement,k)){if(L!==null&&Pl(k)){if(x=L.start,h=L.end,h===void 0&&(h=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(h,k.value.length);else if(h=(x=k.ownerDocument||document)&&x.defaultView||window,h.getSelection){h=h.getSelection();var X=k.textContent.length,ae=Math.min(L.start,X);L=L.end===void 0?ae:Math.min(L.end,X),!h.extend&&ae>L&&(X=L,L=ae,ae=X),X=Ps(k,ae);var ke=Ps(k,L);X&&ke&&(h.rangeCount!==1||h.anchorNode!==X.node||h.anchorOffset!==X.offset||h.focusNode!==ke.node||h.focusOffset!==ke.offset)&&(x=x.createRange(),x.setStart(X.node,X.offset),h.removeAllRanges(),ae>L?(h.addRange(x),h.extend(ke.node,ke.offset)):(x.setEnd(ke.node,ke.offset),h.addRange(x)))}}for(x=[],h=k;h=h.parentNode;)h.nodeType===1&&x.push({element:h,left:h.scrollLeft,top:h.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)h=x[k],h.element.scrollLeft=h.left,h.element.scrollTop=h.top}}var Jl=l&&"documentMode"in document&&11>=document.documentMode,Bi=null,Ia=null,wi=null,el=!1;function Ql(h,x,k){var L=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;el||Bi==null||Bi!==He(L)||(L=Bi,"selectionStart"in L&&Pl(L)?L={start:L.selectionStart,end:L.selectionEnd}:(L=(L.ownerDocument&&L.ownerDocument.defaultView||window).getSelection(),L={anchorNode:L.anchorNode,anchorOffset:L.anchorOffset,focusNode:L.focusNode,focusOffset:L.focusOffset}),wi&&Ri(wi,L)||(wi=L,L=N0(Ia,"onSelect"),0<L.length&&(x=new _c("onSelect","select",null,x,k),h.push({event:x,listeners:L}),x.target=Bi)))}function ro(h,x){var k={};return k[h.toLowerCase()]=x.toLowerCase(),k["Webkit"+h]="webkit"+x,k["Moz"+h]="moz"+x,k}var ys={animationend:ro("Animation","AnimationEnd"),animationiteration:ro("Animation","AnimationIteration"),animationstart:ro("Animation","AnimationStart"),transitionend:ro("Transition","TransitionEnd")},oi={},Wn={};l&&(Wn=document.createElement("div").style,"AnimationEvent"in window||(delete ys.animationend.animation,delete ys.animationiteration.animation,delete ys.animationstart.animation),"TransitionEvent"in window||delete ys.transitionend.transition);function Kn(h){if(oi[h])return oi[h];if(!ys[h])return h;var x=ys[h],k;for(k in x)if(x.hasOwnProperty(k)&&k in Wn)return oi[h]=x[k];return h}var fa=Kn("animationend"),Qa=Kn("animationiteration"),tl=Kn("animationstart"),Gu=Kn("transitionend"),Tc=new Map,Fd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function rl(h,x){Tc.set(h,x),i(x,[h])}for(var Ku=0;Ku<Fd.length;Ku++){var $s=Fd[Ku],vo=$s.toLowerCase(),Md=$s[0].toUpperCase()+$s.slice(1);rl(vo,"on"+Md)}rl(fa,"onAnimationEnd"),rl(Qa,"onAnimationIteration"),rl(tl,"onAnimationStart"),rl("dblclick","onDoubleClick"),rl("focusin","onFocus"),rl("focusout","onBlur"),rl(Gu,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Rd=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oc));function Xu(h,x,k){var L=h.type||"unknown-event";h.currentTarget=k,Ce(L,x,void 0,h),h.currentTarget=null}function Bd(h,x){x=(x&4)!==0;for(var k=0;k<h.length;k++){var L=h[k],X=L.event;L=L.listeners;e:{var ae=void 0;if(x)for(var ke=L.length-1;0<=ke;ke--){var We=L[ke],rt=We.instance,St=We.currentTarget;if(We=We.listener,rt!==ae&&X.isPropagationStopped())break e;Xu(X,We,St),ae=rt}else for(ke=0;ke<L.length;ke++){if(We=L[ke],rt=We.instance,St=We.currentTarget,We=We.listener,rt!==ae&&X.isPropagationStopped())break e;Xu(X,We,St),ae=rt}}}if(re)throw h=me,re=!1,me=null,h}function ra(h,x){var k=x[Ui];k===void 0&&(k=x[Ui]=new Set);var L=h+"__bubble";k.has(L)||(Yu(x,h,2,!1),k.add(L))}function pu(h,x,k){var L=0;x&&(L|=4),Yu(k,h,L,x)}var mu="_reactListening"+Math.random().toString(36).slice(2);function Il(h){if(!h[mu]){h[mu]=!0,n.forEach(function(k){k!=="selectionchange"&&(Rd.has(k)||pu(k,!1,h),pu(k,!0,h))});var x=h.nodeType===9?h:h.ownerDocument;x===null||x[mu]||(x[mu]=!0,pu("selectionchange",!1,x))}}function Yu(h,x,k,L){switch(uu(x)){case 1:var X=jc;break;case 4:X=Id;break;default:X=_l}k=X.bind(null,x,k,h),X=void 0,!Yn||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(X=!0),L?X!==void 0?h.addEventListener(x,k,{capture:!0,passive:X}):h.addEventListener(x,k,!0):X!==void 0?h.addEventListener(x,k,{passive:X}):h.addEventListener(x,k,!1)}function Pc(h,x,k,L,X){var ae=L;if((x&1)===0&&(x&2)===0&&L!==null)e:for(;;){if(L===null)return;var ke=L.tag;if(ke===3||ke===4){var We=L.stateNode.containerInfo;if(We===X||We.nodeType===8&&We.parentNode===X)break;if(ke===4)for(ke=L.return;ke!==null;){var rt=ke.tag;if((rt===3||rt===4)&&(rt=ke.stateNode.containerInfo,rt===X||rt.nodeType===8&&rt.parentNode===X))return;ke=ke.return}for(;We!==null;){if(ke=Rc(We),ke===null)return;if(rt=ke.tag,rt===5||rt===6){L=ae=ke;continue e}We=We.parentNode}}L=L.return}On(function(){var St=ae,Xt=Nr(k),Qt=[];e:{var Kt=Tc.get(h);if(Kt!==void 0){var Ar=_c,Ir=h;switch(h){case"keypress":if(mo(k)===0)break e;case"keydown":case"keyup":Ar=Xr;break;case"focusin":Ir="focus",Ar=Cl;break;case"focusout":Ir="blur",Ar=Cl;break;case"beforeblur":case"afterblur":Ar=Cl;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ar=Ac;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ar=w0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ar=$a;break;case fa:case Qa:case tl:Ar=Zi;break;case Gu:Ar=qs;break;case"scroll":Ar=El;break;case"wheel":Ar=Xo;break;case"copy":case"cut":case"paste":Ar=V;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ar=un}var Fr=(x&4)!==0,Gs=!Fr&&h==="scroll",vt=Fr?Kt!==null?Kt+"Capture":null:Kt;Fr=[];for(var ot=St,Nt;ot!==null;){Nt=ot;var ar=Nt.stateNode;if(Nt.tag===5&&ar!==null&&(Nt=ar,vt!==null&&(ar=br(ot,vt),ar!=null&&Fr.push(Ju(ot,ar,Nt)))),Gs)break;ot=ot.return}0<Fr.length&&(Kt=new Ar(Kt,Ir,null,k,Xt),Qt.push({event:Kt,listeners:Fr}))}}if((x&7)===0){e:{if(Kt=h==="mouseover"||h==="pointerover",Ar=h==="mouseout"||h==="pointerout",Kt&&k!==bt&&(Ir=k.relatedTarget||k.fromElement)&&(Rc(Ir)||Ir[bs]))break e;if((Ar||Kt)&&(Kt=Xt.window===Xt?Xt:(Kt=Xt.ownerDocument)?Kt.defaultView||Kt.parentWindow:window,Ar?(Ir=k.relatedTarget||k.toElement,Ar=St,Ir=Ir?Rc(Ir):null,Ir!==null&&(Gs=Oe(Ir),Ir!==Gs||Ir.tag!==5&&Ir.tag!==6)&&(Ir=null)):(Ar=null,Ir=St),Ar!==Ir)){if(Fr=Ac,ar="onMouseLeave",vt="onMouseEnter",ot="mouse",(h==="pointerout"||h==="pointerover")&&(Fr=un,ar="onPointerLeave",vt="onPointerEnter",ot="pointer"),Gs=Ar==null?Kt:ec(Ar),Nt=Ir==null?Kt:ec(Ir),Kt=new Fr(ar,ot+"leave",Ar,k,Xt),Kt.target=Gs,Kt.relatedTarget=Nt,ar=null,Rc(Xt)===St&&(Fr=new Fr(vt,ot+"enter",Ir,k,Xt),Fr.target=Nt,Fr.relatedTarget=Gs,ar=Fr),Gs=ar,Ar&&Ir)t:{for(Fr=Ar,vt=Ir,ot=0,Nt=Fr;Nt;Nt=Ic(Nt))ot++;for(Nt=0,ar=vt;ar;ar=Ic(ar))Nt++;for(;0<ot-Nt;)Fr=Ic(Fr),ot--;for(;0<Nt-ot;)vt=Ic(vt),Nt--;for(;ot--;){if(Fr===vt||vt!==null&&Fr===vt.alternate)break t;Fr=Ic(Fr),vt=Ic(vt)}Fr=null}else Fr=null;Ar!==null&&kh(Qt,Kt,Ar,Fr,!1),Ir!==null&&Gs!==null&&kh(Qt,Gs,Ir,Fr,!0)}}e:{if(Kt=St?ec(St):window,Ar=Kt.nodeName&&Kt.nodeName.toLowerCase(),Ar==="select"||Ar==="input"&&Kt.type==="file")var Rr=Xl;else if(gs(Kt))if(Dd)Rr=Qo;else{Rr=Jo;var Wr=Yo}else(Ar=Kt.nodeName)&&Ar.toLowerCase()==="input"&&(Kt.type==="checkbox"||Kt.type==="radio")&&(Rr=go);if(Rr&&(Rr=Rr(h,St))){ua(Qt,Rr,k,Xt);break e}Wr&&Wr(h,Kt,St),h==="focusout"&&(Wr=Kt._wrapperState)&&Wr.controlled&&Kt.type==="number"&&Ee(Kt,"number",Kt.value)}switch(Wr=St?ec(St):window,h){case"focusin":(gs(Wr)||Wr.contentEditable==="true")&&(Bi=Wr,Ia=St,wi=null);break;case"focusout":wi=Ia=Bi=null;break;case"mousedown":el=!0;break;case"contextmenu":case"mouseup":case"dragend":el=!1,Ql(Qt,k,Xt);break;case"selectionchange":if(Jl)break;case"keydown":case"keyup":Ql(Qt,k,Xt)}var Vr;if(ms)e:{switch(h){case"compositionstart":var an="onCompositionStart";break e;case"compositionend":an="onCompositionEnd";break e;case"compositionupdate":an="onCompositionUpdate";break e}an=void 0}else dn?Oa(h,k)&&(an="onCompositionEnd"):h==="keydown"&&k.keyCode===229&&(an="onCompositionStart");an&&(Ec&&k.locale!=="ko"&&(dn||an!=="onCompositionStart"?an==="onCompositionEnd"&&dn&&(Vr=Sc()):(Ho=Xt,bi="value"in Ho?Ho.value:Ho.textContent,dn=!0)),Wr=N0(St,an),0<Wr.length&&(an=new $e(an,h,null,k,Xt),Qt.push({event:an,listeners:Wr}),Vr?an.data=Vr:(Vr=xs(k),Vr!==null&&(an.data=Vr)))),(Vr=Ya?Ts(h,k):Pa(h,k))&&(St=N0(St,"onBeforeInput"),0<St.length&&(Xt=new $e("onBeforeInput","beforeinput",null,k,Xt),Qt.push({event:Xt,listeners:St}),Xt.data=Vr))}Bd(Qt,x)})}function Ju(h,x,k){return{instance:h,listener:x,currentTarget:k}}function N0(h,x){for(var k=x+"Capture",L=[];h!==null;){var X=h,ae=X.stateNode;X.tag===5&&ae!==null&&(X=ae,ae=br(h,k),ae!=null&&L.unshift(Ju(h,ae,X)),ae=br(h,x),ae!=null&&L.push(Ju(h,ae,X))),h=h.return}return L}function Ic(h){if(h===null)return null;do h=h.return;while(h&&h.tag!==5);return h||null}function kh(h,x,k,L,X){for(var ae=x._reactName,ke=[];k!==null&&k!==L;){var We=k,rt=We.alternate,St=We.stateNode;if(rt!==null&&rt===L)break;We.tag===5&&St!==null&&(We=St,X?(rt=br(k,ae),rt!=null&&ke.unshift(Ju(k,rt,We))):X||(rt=br(k,ae),rt!=null&&ke.push(Ju(k,rt,We)))),k=k.return}ke.length!==0&&h.push({event:x,listeners:ke})}var xu=/\r\n?/g,Dc=/\u0000|\uFFFD/g;function Lc(h){return(typeof h=="string"?h:""+h).replace(xu,`
`).replace(Dc,"")}function Sf(h,x,k){if(x=Lc(x),Lc(h)!==x&&k)throw Error(r(425))}function Fc(){}var nl=null,Mc=null;function _f(h,x){return h==="textarea"||h==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var Qu=typeof setTimeout=="function"?setTimeout:void 0,Sh=typeof clearTimeout=="function"?clearTimeout:void 0,gu=typeof Promise=="function"?Promise:void 0,rm=typeof queueMicrotask=="function"?queueMicrotask:typeof gu<"u"?function(h){return gu.resolve(null).then(h).catch(nm)}:Qu;function nm(h){setTimeout(function(){throw h})}function Zu(h,x){var k=x,L=0;do{var X=k.nextSibling;if(h.removeChild(k),X&&X.nodeType===8)if(k=X.data,k==="/$"){if(L===0){h.removeChild(X),po(x);return}L--}else k!=="$"&&k!=="$?"&&k!=="$!"||L++;k=X}while(k);po(x)}function Ni(h){for(;h!=null;h=h.nextSibling){var x=h.nodeType;if(x===1||x===3)break;if(x===8){if(x=h.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return h}function li(h){h=h.previousSibling;for(var x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return h;x--}else k==="/$"&&x++}h=h.previousSibling}return null}var ji=Math.random().toString(36).slice(2),Dl="__reactFiber$"+ji,vu="__reactProps$"+ji,bs="__reactContainer$"+ji,Ui="__reactEvents$"+ji,_h="__reactListeners$"+ji,Ah="__reactHandles$"+ji;function Rc(h){var x=h[Dl];if(x)return x;for(var k=h.parentNode;k;){if(x=k[bs]||k[Dl]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(h=li(h);h!==null;){if(k=h[Dl])return k;h=li(h)}return x}h=k,k=h.parentNode}return null}function Zl(h){return h=h[Dl]||h[bs],!h||h.tag!==5&&h.tag!==6&&h.tag!==13&&h.tag!==3?null:h}function ec(h){if(h.tag===5||h.tag===6)return h.stateNode;throw Error(r(33))}function Bc(h){return h[vu]||null}var Af=[],tc=-1;function yo(h){return{current:h}}function Vn(h){0>tc||(h.current=Af[tc],Af[tc]=null,tc--)}function na(h,x){tc++,Af[tc]=h.current,h.current=x}var rc={},zs=yo(rc),Hs=yo(!1),ha=rc;function bo(h,x){var k=h.type.contextTypes;if(!k)return rc;var L=h.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===x)return L.__reactInternalMemoizedMaskedChildContext;var X={},ae;for(ae in k)X[ae]=x[ae];return L&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=x,h.__reactInternalMemoizedMaskedChildContext=X),X}function za(h){return h=h.childContextTypes,h!=null}function Ef(){Vn(Hs),Vn(zs)}function Cf(h,x,k){if(zs.current!==rc)throw Error(r(168));na(zs,x),na(Hs,k)}function Uc(h,x,k){var L=h.stateNode;if(x=x.childContextTypes,typeof L.getChildContext!="function")return k;L=L.getChildContext();for(var X in L)if(!(X in x))throw Error(r(108,oe(h)||"Unknown",X));return ee({},k,L)}function al(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||rc,ha=zs.current,na(zs,h),na(Hs,Hs.current),!0}function Eh(h,x,k){var L=h.stateNode;if(!L)throw Error(r(169));k?(h=Uc(h,x,ha),L.__reactInternalMemoizedMergedChildContext=h,Vn(Hs),Vn(zs),na(zs,h)):Vn(Hs),na(Hs,k)}var ki=null,Ud=!1,_=!1;function F(h){ki===null?ki=[h]:ki.push(h)}function Y(h){Ud=!0,F(h)}function se(){if(!_&&ki!==null){_=!0;var h=0,x=Sr;try{var k=ki;for(Sr=1;h<k.length;h++){var L=k[h];do L=L(!0);while(L!==null)}ki=null,Ud=!1}catch(X){throw ki!==null&&(ki=ki.slice(h+1)),De(Ur,se),X}finally{Sr=x,_=!1}}return null}var xe=[],je=0,Se=null,Te=0,Ie=[],Me=0,Qe=null,xt=1,dt="";function st(h,x){xe[je++]=Te,xe[je++]=Se,Se=h,Te=x}function qt(h,x,k){Ie[Me++]=xt,Ie[Me++]=dt,Ie[Me++]=Qe,Qe=h;var L=xt;h=dt;var X=32-ca(L)-1;L&=~(1<<X),k+=1;var ae=32-ca(x)+X;if(30<ae){var ke=X-X%5;ae=(L&(1<<ke)-1).toString(32),L>>=ke,X-=ke,xt=1<<32-ca(x)+X|k<<X|L,dt=ae+h}else xt=1<<ae|k<<X|L,dt=h}function At(h){h.return!==null&&(st(h,1),qt(h,1,0))}function Ye(h){for(;h===Se;)Se=xe[--je],xe[je]=null,Te=xe[--je],xe[je]=null;for(;h===Qe;)Qe=Ie[--Me],Ie[Me]=null,dt=Ie[--Me],Ie[Me]=null,xt=Ie[--Me],Ie[Me]=null}var et=null,Tt=null,Ot=!1,Lt=null;function gr(h,x){var k=$c(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=h,x=h.deletions,x===null?(h.deletions=[k],h.flags|=16):x.push(k)}function lr(h,x){switch(h.tag){case 5:var k=h.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(h.stateNode=x,et=h,Tt=Ni(x.firstChild),!0):!1;case 6:return x=h.pendingProps===""||x.nodeType!==3?null:x,x!==null?(h.stateNode=x,et=h,Tt=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=Qe!==null?{id:xt,overflow:dt}:null,h.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=$c(18,null,null,0),k.stateNode=x,k.return=h,h.child=k,et=h,Tt=null,!0):!1;default:return!1}}function qr(h){return(h.mode&1)!==0&&(h.flags&128)===0}function dr(h){if(Ot){var x=Tt;if(x){var k=x;if(!lr(h,x)){if(qr(h))throw Error(r(418));x=Ni(k.nextSibling);var L=et;x&&lr(h,x)?gr(L,k):(h.flags=h.flags&-4097|2,Ot=!1,et=h)}}else{if(qr(h))throw Error(r(418));h.flags=h.flags&-4097|2,Ot=!1,et=h}}}function Mn(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;et=h}function qn(h){if(h!==et)return!1;if(!Ot)return Mn(h),Ot=!0,!1;var x;if((x=h.tag!==3)&&!(x=h.tag!==5)&&(x=h.type,x=x!=="head"&&x!=="body"&&!_f(h.type,h.memoizedProps)),x&&(x=Tt)){if(qr(h))throw bn(),Error(r(418));for(;x;)gr(h,x),x=Ni(x.nextSibling)}if(Mn(h),h.tag===13){if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));e:{for(h=h.nextSibling,x=0;h;){if(h.nodeType===8){var k=h.data;if(k==="/$"){if(x===0){Tt=Ni(h.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}h=h.nextSibling}Tt=null}}else Tt=et?Ni(h.stateNode.nextSibling):null;return!0}function bn(){for(var h=Tt;h;)h=Ni(h.nextSibling)}function cn(){Tt=et=null,Ot=!1}function Jn(h){Lt===null?Lt=[h]:Lt.push(h)}var Rn=w.ReactCurrentBatchConfig;function Yr(h,x,k){if(h=k.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(r(309));var L=k.stateNode}if(!L)throw Error(r(147,h));var X=L,ae=""+h;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===ae?x.ref:(x=function(ke){var We=X.refs;ke===null?delete We[ae]:We[ae]=ke},x._stringRef=ae,x)}if(typeof h!="string")throw Error(r(284));if(!k._owner)throw Error(r(290,h))}return h}function Da(h,x){throw h=Object.prototype.toString.call(x),Error(r(31,h==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":h))}function Si(h){var x=h._init;return x(h._payload)}function Za(h){function x(vt,ot){if(h){var Nt=vt.deletions;Nt===null?(vt.deletions=[ot],vt.flags|=16):Nt.push(ot)}}function k(vt,ot){if(!h)return null;for(;ot!==null;)x(vt,ot),ot=ot.sibling;return null}function L(vt,ot){for(vt=new Map;ot!==null;)ot.key!==null?vt.set(ot.key,ot):vt.set(ot.index,ot),ot=ot.sibling;return vt}function X(vt,ot){return vt=Rf(vt,ot),vt.index=0,vt.sibling=null,vt}function ae(vt,ot,Nt){return vt.index=Nt,h?(Nt=vt.alternate,Nt!==null?(Nt=Nt.index,Nt<ot?(vt.flags|=2,ot):Nt):(vt.flags|=2,ot)):(vt.flags|=1048576,ot)}function ke(vt){return h&&vt.alternate===null&&(vt.flags|=2),vt}function We(vt,ot,Nt,ar){return ot===null||ot.tag!==6?(ot=Bb(Nt,vt.mode,ar),ot.return=vt,ot):(ot=X(ot,Nt),ot.return=vt,ot)}function rt(vt,ot,Nt,ar){var Rr=Nt.type;return Rr===A?Xt(vt,ot,Nt.props.children,ar,Nt.key):ot!==null&&(ot.elementType===Rr||typeof Rr=="object"&&Rr!==null&&Rr.$$typeof===Z&&Si(Rr)===ot.type)?(ar=X(ot,Nt.props),ar.ref=Yr(vt,ot,Nt),ar.return=vt,ar):(ar=Fg(Nt.type,Nt.key,Nt.props,null,vt.mode,ar),ar.ref=Yr(vt,ot,Nt),ar.return=vt,ar)}function St(vt,ot,Nt,ar){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==Nt.containerInfo||ot.stateNode.implementation!==Nt.implementation?(ot=Ub(Nt,vt.mode,ar),ot.return=vt,ot):(ot=X(ot,Nt.children||[]),ot.return=vt,ot)}function Xt(vt,ot,Nt,ar,Rr){return ot===null||ot.tag!==7?(ot=C0(Nt,vt.mode,ar,Rr),ot.return=vt,ot):(ot=X(ot,Nt),ot.return=vt,ot)}function Qt(vt,ot,Nt){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return ot=Bb(""+ot,vt.mode,Nt),ot.return=vt,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case S:return Nt=Fg(ot.type,ot.key,ot.props,null,vt.mode,Nt),Nt.ref=Yr(vt,null,ot),Nt.return=vt,Nt;case P:return ot=Ub(ot,vt.mode,Nt),ot.return=vt,ot;case Z:var ar=ot._init;return Qt(vt,ar(ot._payload),Nt)}if(pe(ot)||J(ot))return ot=C0(ot,vt.mode,Nt,null),ot.return=vt,ot;Da(vt,ot)}return null}function Kt(vt,ot,Nt,ar){var Rr=ot!==null?ot.key:null;if(typeof Nt=="string"&&Nt!==""||typeof Nt=="number")return Rr!==null?null:We(vt,ot,""+Nt,ar);if(typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case S:return Nt.key===Rr?rt(vt,ot,Nt,ar):null;case P:return Nt.key===Rr?St(vt,ot,Nt,ar):null;case Z:return Rr=Nt._init,Kt(vt,ot,Rr(Nt._payload),ar)}if(pe(Nt)||J(Nt))return Rr!==null?null:Xt(vt,ot,Nt,ar,null);Da(vt,Nt)}return null}function Ar(vt,ot,Nt,ar,Rr){if(typeof ar=="string"&&ar!==""||typeof ar=="number")return vt=vt.get(Nt)||null,We(ot,vt,""+ar,Rr);if(typeof ar=="object"&&ar!==null){switch(ar.$$typeof){case S:return vt=vt.get(ar.key===null?Nt:ar.key)||null,rt(ot,vt,ar,Rr);case P:return vt=vt.get(ar.key===null?Nt:ar.key)||null,St(ot,vt,ar,Rr);case Z:var Wr=ar._init;return Ar(vt,ot,Nt,Wr(ar._payload),Rr)}if(pe(ar)||J(ar))return vt=vt.get(Nt)||null,Xt(ot,vt,ar,Rr,null);Da(ot,ar)}return null}function Ir(vt,ot,Nt,ar){for(var Rr=null,Wr=null,Vr=ot,an=ot=0,Hi=null;Vr!==null&&an<Nt.length;an++){Vr.index>an?(Hi=Vr,Vr=null):Hi=Vr.sibling;var aa=Kt(vt,Vr,Nt[an],ar);if(aa===null){Vr===null&&(Vr=Hi);break}h&&Vr&&aa.alternate===null&&x(vt,Vr),ot=ae(aa,ot,an),Wr===null?Rr=aa:Wr.sibling=aa,Wr=aa,Vr=Hi}if(an===Nt.length)return k(vt,Vr),Ot&&st(vt,an),Rr;if(Vr===null){for(;an<Nt.length;an++)Vr=Qt(vt,Nt[an],ar),Vr!==null&&(ot=ae(Vr,ot,an),Wr===null?Rr=Vr:Wr.sibling=Vr,Wr=Vr);return Ot&&st(vt,an),Rr}for(Vr=L(vt,Vr);an<Nt.length;an++)Hi=Ar(Vr,vt,an,Nt[an],ar),Hi!==null&&(h&&Hi.alternate!==null&&Vr.delete(Hi.key===null?an:Hi.key),ot=ae(Hi,ot,an),Wr===null?Rr=Hi:Wr.sibling=Hi,Wr=Hi);return h&&Vr.forEach(function(Bf){return x(vt,Bf)}),Ot&&st(vt,an),Rr}function Fr(vt,ot,Nt,ar){var Rr=J(Nt);if(typeof Rr!="function")throw Error(r(150));if(Nt=Rr.call(Nt),Nt==null)throw Error(r(151));for(var Wr=Rr=null,Vr=ot,an=ot=0,Hi=null,aa=Nt.next();Vr!==null&&!aa.done;an++,aa=Nt.next()){Vr.index>an?(Hi=Vr,Vr=null):Hi=Vr.sibling;var Bf=Kt(vt,Vr,aa.value,ar);if(Bf===null){Vr===null&&(Vr=Hi);break}h&&Vr&&Bf.alternate===null&&x(vt,Vr),ot=ae(Bf,ot,an),Wr===null?Rr=Bf:Wr.sibling=Bf,Wr=Bf,Vr=Hi}if(aa.done)return k(vt,Vr),Ot&&st(vt,an),Rr;if(Vr===null){for(;!aa.done;an++,aa=Nt.next())aa=Qt(vt,aa.value,ar),aa!==null&&(ot=ae(aa,ot,an),Wr===null?Rr=aa:Wr.sibling=aa,Wr=aa);return Ot&&st(vt,an),Rr}for(Vr=L(vt,Vr);!aa.done;an++,aa=Nt.next())aa=Ar(Vr,vt,an,aa.value,ar),aa!==null&&(h&&aa.alternate!==null&&Vr.delete(aa.key===null?an:aa.key),ot=ae(aa,ot,an),Wr===null?Rr=aa:Wr.sibling=aa,Wr=aa);return h&&Vr.forEach(function(mB){return x(vt,mB)}),Ot&&st(vt,an),Rr}function Gs(vt,ot,Nt,ar){if(typeof Nt=="object"&&Nt!==null&&Nt.type===A&&Nt.key===null&&(Nt=Nt.props.children),typeof Nt=="object"&&Nt!==null){switch(Nt.$$typeof){case S:e:{for(var Rr=Nt.key,Wr=ot;Wr!==null;){if(Wr.key===Rr){if(Rr=Nt.type,Rr===A){if(Wr.tag===7){k(vt,Wr.sibling),ot=X(Wr,Nt.props.children),ot.return=vt,vt=ot;break e}}else if(Wr.elementType===Rr||typeof Rr=="object"&&Rr!==null&&Rr.$$typeof===Z&&Si(Rr)===Wr.type){k(vt,Wr.sibling),ot=X(Wr,Nt.props),ot.ref=Yr(vt,Wr,Nt),ot.return=vt,vt=ot;break e}k(vt,Wr);break}else x(vt,Wr);Wr=Wr.sibling}Nt.type===A?(ot=C0(Nt.props.children,vt.mode,ar,Nt.key),ot.return=vt,vt=ot):(ar=Fg(Nt.type,Nt.key,Nt.props,null,vt.mode,ar),ar.ref=Yr(vt,ot,Nt),ar.return=vt,vt=ar)}return ke(vt);case P:e:{for(Wr=Nt.key;ot!==null;){if(ot.key===Wr)if(ot.tag===4&&ot.stateNode.containerInfo===Nt.containerInfo&&ot.stateNode.implementation===Nt.implementation){k(vt,ot.sibling),ot=X(ot,Nt.children||[]),ot.return=vt,vt=ot;break e}else{k(vt,ot);break}else x(vt,ot);ot=ot.sibling}ot=Ub(Nt,vt.mode,ar),ot.return=vt,vt=ot}return ke(vt);case Z:return Wr=Nt._init,Gs(vt,ot,Wr(Nt._payload),ar)}if(pe(Nt))return Ir(vt,ot,Nt,ar);if(J(Nt))return Fr(vt,ot,Nt,ar);Da(vt,Nt)}return typeof Nt=="string"&&Nt!==""||typeof Nt=="number"?(Nt=""+Nt,ot!==null&&ot.tag===6?(k(vt,ot.sibling),ot=X(ot,Nt),ot.return=vt,vt=ot):(k(vt,ot),ot=Bb(Nt,vt.mode,ar),ot.return=vt,vt=ot),ke(vt)):k(vt,ot)}return Gs}var es=Za(!0),_n=Za(!1),ci=yo(null),ws=null,La=null,Ns=null;function us(){Ns=La=ws=null}function Ws(h){var x=ci.current;Vn(ci),h._currentValue=x}function wo(h,x,k){for(;h!==null;){var L=h.alternate;if((h.childLanes&x)!==x?(h.childLanes|=x,L!==null&&(L.childLanes|=x)):L!==null&&(L.childLanes&x)!==x&&(L.childLanes|=x),h===k)break;h=h.return}}function Fa(h,x){ws=h,Ns=La=null,h=h.dependencies,h!==null&&h.firstContext!==null&&((h.lanes&x)!==0&&(Rl=!0),h.firstContext=null)}function Ha(h){var x=h._currentValue;if(Ns!==h)if(h={context:h,memoizedValue:x,next:null},La===null){if(ws===null)throw Error(r(308));La=h,ws.dependencies={lanes:0,firstContext:h}}else La=La.next=h;return x}var qi=null;function nc(h){qi===null?qi=[h]:qi.push(h)}function ac(h,x,k,L){var X=x.interleaved;return X===null?(k.next=k,nc(x)):(k.next=X.next,X.next=k),x.interleaved=k,Xn(h,L)}function Xn(h,x){h.lanes|=x;var k=h.alternate;for(k!==null&&(k.lanes|=x),k=h,h=h.return;h!==null;)h.childLanes|=x,k=h.alternate,k!==null&&(k.childLanes|=x),k=h,h=h.return;return k.tag===3?k.stateNode:null}var Ll=!1;function Tf(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j0(h,x){h=h.updateQueue,x.updateQueue===h&&(x.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function No(h,x){return{eventTime:h,lane:x,tag:0,payload:null,callback:null,next:null}}function jo(h,x,k){var L=h.updateQueue;if(L===null)return null;if(L=L.shared,(Qn&2)!==0){var X=L.pending;return X===null?x.next=x:(x.next=X.next,X.next=x),L.pending=x,Xn(h,k)}return X=L.interleaved,X===null?(x.next=x,nc(L)):(x.next=X.next,X.next=x),L.interleaved=x,Xn(h,k)}function yu(h,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var L=x.lanes;L&=h.pendingLanes,k|=L,x.lanes=k,Et(h,k)}}function ko(h,x){var k=h.updateQueue,L=h.alternate;if(L!==null&&(L=L.updateQueue,k===L)){var X=null,ae=null;if(k=k.firstBaseUpdate,k!==null){do{var ke={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};ae===null?X=ae=ke:ae=ae.next=ke,k=k.next}while(k!==null);ae===null?X=ae=x:ae=ae.next=x}else X=ae=x;k={baseState:L.baseState,firstBaseUpdate:X,lastBaseUpdate:ae,shared:L.shared,effects:L.effects},h.updateQueue=k;return}h=k.lastBaseUpdate,h===null?k.firstBaseUpdate=x:h.next=x,k.lastBaseUpdate=x}function sl(h,x,k,L){var X=h.updateQueue;Ll=!1;var ae=X.firstBaseUpdate,ke=X.lastBaseUpdate,We=X.shared.pending;if(We!==null){X.shared.pending=null;var rt=We,St=rt.next;rt.next=null,ke===null?ae=St:ke.next=St,ke=rt;var Xt=h.alternate;Xt!==null&&(Xt=Xt.updateQueue,We=Xt.lastBaseUpdate,We!==ke&&(We===null?Xt.firstBaseUpdate=St:We.next=St,Xt.lastBaseUpdate=rt))}if(ae!==null){var Qt=X.baseState;ke=0,Xt=St=rt=null,We=ae;do{var Kt=We.lane,Ar=We.eventTime;if((L&Kt)===Kt){Xt!==null&&(Xt=Xt.next={eventTime:Ar,lane:0,tag:We.tag,payload:We.payload,callback:We.callback,next:null});e:{var Ir=h,Fr=We;switch(Kt=x,Ar=k,Fr.tag){case 1:if(Ir=Fr.payload,typeof Ir=="function"){Qt=Ir.call(Ar,Qt,Kt);break e}Qt=Ir;break e;case 3:Ir.flags=Ir.flags&-65537|128;case 0:if(Ir=Fr.payload,Kt=typeof Ir=="function"?Ir.call(Ar,Qt,Kt):Ir,Kt==null)break e;Qt=ee({},Qt,Kt);break e;case 2:Ll=!0}}We.callback!==null&&We.lane!==0&&(h.flags|=64,Kt=X.effects,Kt===null?X.effects=[We]:Kt.push(We))}else Ar={eventTime:Ar,lane:Kt,tag:We.tag,payload:We.payload,callback:We.callback,next:null},Xt===null?(St=Xt=Ar,rt=Qt):Xt=Xt.next=Ar,ke|=Kt;if(We=We.next,We===null){if(We=X.shared.pending,We===null)break;Kt=We,We=Kt.next,Kt.next=null,X.lastBaseUpdate=Kt,X.shared.pending=null}}while(!0);if(Xt===null&&(rt=Qt),X.baseState=rt,X.firstBaseUpdate=St,X.lastBaseUpdate=Xt,x=X.shared.interleaved,x!==null){X=x;do ke|=X.lane,X=X.next;while(X!==x)}else ae===null&&(X.shared.lanes=0);S0|=ke,h.lanes=ke,h.memoizedState=Qt}}function sc(h,x,k){if(h=x.effects,x.effects=null,h!==null)for(x=0;x<h.length;x++){var L=h[x],X=L.callback;if(X!==null){if(L.callback=null,L=k,typeof X!="function")throw Error(r(191,X));X.call(L)}}}var So={},js=yo(So),ed=yo(So),il=yo(So);function ic(h){if(h===So)throw Error(r(174));return h}function td(h,x){switch(na(il,x),na(ed,h),na(js,So),h=x.nodeType,h){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:kt(null,"");break;default:h=h===8?x.parentNode:x,x=h.namespaceURI||null,h=h.tagName,x=kt(x,h)}Vn(js),na(js,x)}function Fl(){Vn(js),Vn(ed),Vn(il)}function Ch(h){ic(il.current);var x=ic(js.current),k=kt(x,h.type);x!==k&&(na(ed,h),na(js,k))}function k0(h){ed.current===h&&(Vn(js),Vn(ed))}var ba=yo(0);function ol(h){for(var x=h;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var qd=[];function $d(){for(var h=0;h<qd.length;h++)qd[h]._workInProgressVersionPrimary=null;qd.length=0}var Of=w.ReactCurrentDispatcher,Pf=w.ReactCurrentBatchConfig,Ml=0,Ma=null,ts=null,Wa=null,rd=!1,oc=!1,bu=0,nd=0;function rs(){throw Error(r(321))}function ui(h,x){if(x===null)return!1;for(var k=0;k<x.length&&k<h.length;k++)if(!Sn(h[k],x[k]))return!1;return!0}function zd(h,x,k,L,X,ae){if(Ml=ae,Ma=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,Of.current=h===null||h.memoizedState===null?q9:$9,h=k(L,X),oc){ae=0;do{if(oc=!1,bu=0,25<=ae)throw Error(r(301));ae+=1,Wa=ts=null,x.updateQueue=null,Of.current=z9,h=k(L,X)}while(oc)}if(Of.current=Ng,x=ts!==null&&ts.next!==null,Ml=0,Wa=ts=Ma=null,rd=!1,x)throw Error(r(300));return h}function ll(){var h=bu!==0;return bu=0,h}function no(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wa===null?Ma.memoizedState=Wa=h:Wa=Wa.next=h,Wa}function $i(){if(ts===null){var h=Ma.alternate;h=h!==null?h.memoizedState:null}else h=ts.next;var x=Wa===null?Ma.memoizedState:Wa.next;if(x!==null)Wa=x,ts=h;else{if(h===null)throw Error(r(310));ts=h,h={memoizedState:ts.memoizedState,baseState:ts.baseState,baseQueue:ts.baseQueue,queue:ts.queue,next:null},Wa===null?Ma.memoizedState=Wa=h:Wa=Wa.next=h}return Wa}function D(h,x){return typeof x=="function"?x(h):x}function de(h){var x=$i(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var L=ts,X=L.baseQueue,ae=k.pending;if(ae!==null){if(X!==null){var ke=X.next;X.next=ae.next,ae.next=ke}L.baseQueue=X=ae,k.pending=null}if(X!==null){ae=X.next,L=L.baseState;var We=ke=null,rt=null,St=ae;do{var Xt=St.lane;if((Ml&Xt)===Xt)rt!==null&&(rt=rt.next={lane:0,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null}),L=St.hasEagerState?St.eagerState:h(L,St.action);else{var Qt={lane:Xt,action:St.action,hasEagerState:St.hasEagerState,eagerState:St.eagerState,next:null};rt===null?(We=rt=Qt,ke=L):rt=rt.next=Qt,Ma.lanes|=Xt,S0|=Xt}St=St.next}while(St!==null&&St!==ae);rt===null?ke=L:rt.next=We,Sn(L,x.memoizedState)||(Rl=!0),x.memoizedState=L,x.baseState=ke,x.baseQueue=rt,k.lastRenderedState=L}if(h=k.interleaved,h!==null){X=h;do ae=X.lane,Ma.lanes|=ae,S0|=ae,X=X.next;while(X!==h)}else X===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function ge(h){var x=$i(),k=x.queue;if(k===null)throw Error(r(311));k.lastRenderedReducer=h;var L=k.dispatch,X=k.pending,ae=x.memoizedState;if(X!==null){k.pending=null;var ke=X=X.next;do ae=h(ae,ke.action),ke=ke.next;while(ke!==X);Sn(ae,x.memoizedState)||(Rl=!0),x.memoizedState=ae,x.baseQueue===null&&(x.baseState=ae),k.lastRenderedState=ae}return[ae,L]}function Ve(){}function it(h,x){var k=Ma,L=$i(),X=x(),ae=!Sn(L.memoizedState,X);if(ae&&(L.memoizedState=X,Rl=!0),L=L.queue,Oh(Jt.bind(null,k,L,h),[h]),L.getSnapshot!==x||ae||Wa!==null&&Wa.memoizedState.tag&1){if(k.flags|=2048,$n(9,_t.bind(null,k,L,X,x),void 0,null),zi===null)throw Error(r(349));(Ml&30)!==0||zt(k,x,X)}return X}function zt(h,x,k){h.flags|=16384,h={getSnapshot:x,value:k},x=Ma.updateQueue,x===null?(x={lastEffect:null,stores:null},Ma.updateQueue=x,x.stores=[h]):(k=x.stores,k===null?x.stores=[h]:k.push(h))}function _t(h,x,k,L){x.value=k,x.getSnapshot=L,Tr(x)&&An(h)}function Jt(h,x,k){return k(function(){Tr(x)&&An(h)})}function Tr(h){var x=h.getSnapshot;h=h.value;try{var k=x();return!Sn(h,k)}catch{return!0}}function An(h){var x=Xn(h,1);x!==null&&ku(x,h,1,-1)}function wa(h){var x=no();return typeof h=="function"&&(h=h()),x.memoizedState=x.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:D,lastRenderedState:h},x.queue=h,h=h.dispatch=U9.bind(null,Ma,h),[x.memoizedState,h]}function $n(h,x,k,L){return h={tag:h,create:x,destroy:k,deps:L,next:null},x=Ma.updateQueue,x===null?(x={lastEffect:null,stores:null},Ma.updateQueue=x,x.lastEffect=h.next=h):(k=x.lastEffect,k===null?x.lastEffect=h.next=h:(L=k.next,k.next=h,h.next=L,x.lastEffect=h)),h}function Vs(){return $i().memoizedState}function _i(h,x,k,L){var X=no();Ma.flags|=h,X.memoizedState=$n(1|x,k,void 0,L===void 0?null:L)}function ad(h,x,k,L){var X=$i();L=L===void 0?null:L;var ae=void 0;if(ts!==null){var ke=ts.memoizedState;if(ae=ke.destroy,L!==null&&ui(L,ke.deps)){X.memoizedState=$n(x,k,ae,L);return}}Ma.flags|=h,X.memoizedState=$n(1|x,k,ae,L)}function Th(h,x){return _i(8390656,8,h,x)}function Oh(h,x){return ad(2048,8,h,x)}function wg(h,x){return ad(4,2,h,x)}function Ph(h,x){return ad(4,4,h,x)}function Ih(h,x){if(typeof x=="function")return h=h(),x(h),function(){x(null)};if(x!=null)return h=h(),x.current=h,function(){x.current=null}}function TS(h,x,k){return k=k!=null?k.concat([h]):null,ad(4,4,Ih.bind(null,x,h),k)}function fb(){}function OS(h,x){var k=$i();x=x===void 0?null:x;var L=k.memoizedState;return L!==null&&x!==null&&ui(x,L[1])?L[0]:(k.memoizedState=[h,x],h)}function PS(h,x){var k=$i();x=x===void 0?null:x;var L=k.memoizedState;return L!==null&&x!==null&&ui(x,L[1])?L[0]:(h=h(),k.memoizedState=[h,x],h)}function IS(h,x,k){return(Ml&21)===0?(h.baseState&&(h.baseState=!1,Rl=!0),h.memoizedState=k):(Sn(k,x)||(k=kn(),Ma.lanes|=k,S0|=k,h.baseState=!0),x)}function R9(h,x){var k=Sr;Sr=k!==0&&4>k?k:4,h(!0);var L=Pf.transition;Pf.transition={};try{h(!1),x()}finally{Sr=k,Pf.transition=L}}function DS(){return $i().memoizedState}function B9(h,x,k){var L=Ff(h);if(k={lane:L,action:k,hasEagerState:!1,eagerState:null,next:null},LS(h))FS(x,k);else if(k=ac(h,x,k,L),k!==null){var X=ul();ku(k,h,L,X),MS(k,x,L)}}function U9(h,x,k){var L=Ff(h),X={lane:L,action:k,hasEagerState:!1,eagerState:null,next:null};if(LS(h))FS(x,X);else{var ae=h.alternate;if(h.lanes===0&&(ae===null||ae.lanes===0)&&(ae=x.lastRenderedReducer,ae!==null))try{var ke=x.lastRenderedState,We=ae(ke,k);if(X.hasEagerState=!0,X.eagerState=We,Sn(We,ke)){var rt=x.interleaved;rt===null?(X.next=X,nc(x)):(X.next=rt.next,rt.next=X),x.interleaved=X;return}}catch{}k=ac(h,x,X,L),k!==null&&(X=ul(),ku(k,h,L,X),MS(k,x,L))}}function LS(h){var x=h.alternate;return h===Ma||x!==null&&x===Ma}function FS(h,x){oc=rd=!0;var k=h.pending;k===null?x.next=x:(x.next=k.next,k.next=x),h.pending=x}function MS(h,x,k){if((k&4194240)!==0){var L=x.lanes;L&=h.pendingLanes,k|=L,x.lanes=k,Et(h,k)}}var Ng={readContext:Ha,useCallback:rs,useContext:rs,useEffect:rs,useImperativeHandle:rs,useInsertionEffect:rs,useLayoutEffect:rs,useMemo:rs,useReducer:rs,useRef:rs,useState:rs,useDebugValue:rs,useDeferredValue:rs,useTransition:rs,useMutableSource:rs,useSyncExternalStore:rs,useId:rs,unstable_isNewReconciler:!1},q9={readContext:Ha,useCallback:function(h,x){return no().memoizedState=[h,x===void 0?null:x],h},useContext:Ha,useEffect:Th,useImperativeHandle:function(h,x,k){return k=k!=null?k.concat([h]):null,_i(4194308,4,Ih.bind(null,x,h),k)},useLayoutEffect:function(h,x){return _i(4194308,4,h,x)},useInsertionEffect:function(h,x){return _i(4,2,h,x)},useMemo:function(h,x){var k=no();return x=x===void 0?null:x,h=h(),k.memoizedState=[h,x],h},useReducer:function(h,x,k){var L=no();return x=k!==void 0?k(x):x,L.memoizedState=L.baseState=x,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:x},L.queue=h,h=h.dispatch=B9.bind(null,Ma,h),[L.memoizedState,h]},useRef:function(h){var x=no();return h={current:h},x.memoizedState=h},useState:wa,useDebugValue:fb,useDeferredValue:function(h){return no().memoizedState=h},useTransition:function(){var h=wa(!1),x=h[0];return h=R9.bind(null,h[1]),no().memoizedState=h,[x,h]},useMutableSource:function(){},useSyncExternalStore:function(h,x,k){var L=Ma,X=no();if(Ot){if(k===void 0)throw Error(r(407));k=k()}else{if(k=x(),zi===null)throw Error(r(349));(Ml&30)!==0||zt(L,x,k)}X.memoizedState=k;var ae={value:k,getSnapshot:x};return X.queue=ae,Th(Jt.bind(null,L,ae,h),[h]),L.flags|=2048,$n(9,_t.bind(null,L,ae,k,x),void 0,null),k},useId:function(){var h=no(),x=zi.identifierPrefix;if(Ot){var k=dt,L=xt;k=(L&~(1<<32-ca(L)-1)).toString(32)+k,x=":"+x+"R"+k,k=bu++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=nd++,x=":"+x+"r"+k.toString(32)+":";return h.memoizedState=x},unstable_isNewReconciler:!1},$9={readContext:Ha,useCallback:OS,useContext:Ha,useEffect:Oh,useImperativeHandle:TS,useInsertionEffect:wg,useLayoutEffect:Ph,useMemo:PS,useReducer:de,useRef:Vs,useState:function(){return de(D)},useDebugValue:fb,useDeferredValue:function(h){var x=$i();return IS(x,ts.memoizedState,h)},useTransition:function(){var h=de(D)[0],x=$i().memoizedState;return[h,x]},useMutableSource:Ve,useSyncExternalStore:it,useId:DS,unstable_isNewReconciler:!1},z9={readContext:Ha,useCallback:OS,useContext:Ha,useEffect:Oh,useImperativeHandle:TS,useInsertionEffect:wg,useLayoutEffect:Ph,useMemo:PS,useReducer:ge,useRef:Vs,useState:function(){return ge(D)},useDebugValue:fb,useDeferredValue:function(h){var x=$i();return ts===null?x.memoizedState=h:IS(x,ts.memoizedState,h)},useTransition:function(){var h=ge(D)[0],x=$i().memoizedState;return[h,x]},useMutableSource:Ve,useSyncExternalStore:it,useId:DS,unstable_isNewReconciler:!1};function wu(h,x){if(h&&h.defaultProps){x=ee({},x),h=h.defaultProps;for(var k in h)x[k]===void 0&&(x[k]=h[k]);return x}return x}function hb(h,x,k,L){x=h.memoizedState,k=k(L,x),k=k==null?x:ee({},x,k),h.memoizedState=k,h.lanes===0&&(h.updateQueue.baseState=k)}var jg={isMounted:function(h){return(h=h._reactInternals)?Oe(h)===h:!1},enqueueSetState:function(h,x,k){h=h._reactInternals;var L=ul(),X=Ff(h),ae=No(L,X);ae.payload=x,k!=null&&(ae.callback=k),x=jo(h,ae,X),x!==null&&(ku(x,h,X,L),yu(x,h,X))},enqueueReplaceState:function(h,x,k){h=h._reactInternals;var L=ul(),X=Ff(h),ae=No(L,X);ae.tag=1,ae.payload=x,k!=null&&(ae.callback=k),x=jo(h,ae,X),x!==null&&(ku(x,h,X,L),yu(x,h,X))},enqueueForceUpdate:function(h,x){h=h._reactInternals;var k=ul(),L=Ff(h),X=No(k,L);X.tag=2,x!=null&&(X.callback=x),x=jo(h,X,L),x!==null&&(ku(x,h,L,k),yu(x,h,L))}};function RS(h,x,k,L,X,ae,ke){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(L,ae,ke):x.prototype&&x.prototype.isPureReactComponent?!Ri(k,L)||!Ri(X,ae):!0}function BS(h,x,k){var L=!1,X=rc,ae=x.contextType;return typeof ae=="object"&&ae!==null?ae=Ha(ae):(X=za(x)?ha:zs.current,L=x.contextTypes,ae=(L=L!=null)?bo(h,X):rc),x=new x(k,ae),h.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=jg,h.stateNode=x,x._reactInternals=h,L&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=X,h.__reactInternalMemoizedMaskedChildContext=ae),x}function US(h,x,k,L){h=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,L),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,L),x.state!==h&&jg.enqueueReplaceState(x,x.state,null)}function pb(h,x,k,L){var X=h.stateNode;X.props=k,X.state=h.memoizedState,X.refs={},Tf(h);var ae=x.contextType;typeof ae=="object"&&ae!==null?X.context=Ha(ae):(ae=za(x)?ha:zs.current,X.context=bo(h,ae)),X.state=h.memoizedState,ae=x.getDerivedStateFromProps,typeof ae=="function"&&(hb(h,x,ae,k),X.state=h.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof X.getSnapshotBeforeUpdate=="function"||typeof X.UNSAFE_componentWillMount!="function"&&typeof X.componentWillMount!="function"||(x=X.state,typeof X.componentWillMount=="function"&&X.componentWillMount(),typeof X.UNSAFE_componentWillMount=="function"&&X.UNSAFE_componentWillMount(),x!==X.state&&jg.enqueueReplaceState(X,X.state,null),sl(h,k,X,L),X.state=h.memoizedState),typeof X.componentDidMount=="function"&&(h.flags|=4194308)}function Dh(h,x){try{var k="",L=x;do k+=U(L),L=L.return;while(L);var X=k}catch(ae){X=`
Error generating stack: `+ae.message+`
`+ae.stack}return{value:h,source:x,stack:X,digest:null}}function mb(h,x,k){return{value:h,source:null,stack:k??null,digest:x??null}}function xb(h,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var H9=typeof WeakMap=="function"?WeakMap:Map;function qS(h,x,k){k=No(-1,k),k.tag=3,k.payload={element:null};var L=x.value;return k.callback=function(){Tg||(Tg=!0,Ob=L),xb(h,x)},k}function $S(h,x,k){k=No(-1,k),k.tag=3;var L=h.type.getDerivedStateFromError;if(typeof L=="function"){var X=x.value;k.payload=function(){return L(X)},k.callback=function(){xb(h,x)}}var ae=h.stateNode;return ae!==null&&typeof ae.componentDidCatch=="function"&&(k.callback=function(){xb(h,x),typeof L!="function"&&(Df===null?Df=new Set([this]):Df.add(this));var ke=x.stack;this.componentDidCatch(x.value,{componentStack:ke!==null?ke:""})}),k}function zS(h,x,k){var L=h.pingCache;if(L===null){L=h.pingCache=new H9;var X=new Set;L.set(x,X)}else X=L.get(x),X===void 0&&(X=new Set,L.set(x,X));X.has(k)||(X.add(k),h=aB.bind(null,h,x,k),x.then(h,h))}function HS(h){do{var x;if((x=h.tag===13)&&(x=h.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return h;h=h.return}while(h!==null);return null}function WS(h,x,k,L,X){return(h.mode&1)===0?(h===x?h.flags|=65536:(h.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=No(-1,1),x.tag=2,jo(k,x,1))),k.lanes|=1),h):(h.flags|=65536,h.lanes=X,h)}var W9=w.ReactCurrentOwner,Rl=!1;function cl(h,x,k,L){x.child=h===null?_n(x,null,k,L):es(x,h.child,k,L)}function VS(h,x,k,L,X){k=k.render;var ae=x.ref;return Fa(x,X),L=zd(h,x,k,L,ae,X),k=ll(),h!==null&&!Rl?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~X,Hd(h,x,X)):(Ot&&k&&At(x),x.flags|=1,cl(h,x,L,X),x.child)}function GS(h,x,k,L,X){if(h===null){var ae=k.type;return typeof ae=="function"&&!Rb(ae)&&ae.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=ae,KS(h,x,ae,L,X)):(h=Fg(k.type,null,L,x,x.mode,X),h.ref=x.ref,h.return=x,x.child=h)}if(ae=h.child,(h.lanes&X)===0){var ke=ae.memoizedProps;if(k=k.compare,k=k!==null?k:Ri,k(ke,L)&&h.ref===x.ref)return Hd(h,x,X)}return x.flags|=1,h=Rf(ae,L),h.ref=x.ref,h.return=x,x.child=h}function KS(h,x,k,L,X){if(h!==null){var ae=h.memoizedProps;if(Ri(ae,L)&&h.ref===x.ref)if(Rl=!1,x.pendingProps=L=ae,(h.lanes&X)!==0)(h.flags&131072)!==0&&(Rl=!0);else return x.lanes=h.lanes,Hd(h,x,X)}return gb(h,x,k,L,X)}function XS(h,x,k){var L=x.pendingProps,X=L.children,ae=h!==null?h.memoizedState:null;if(L.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},na(Fh,lc),lc|=k;else{if((k&1073741824)===0)return h=ae!==null?ae.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:h,cachePool:null,transitions:null},x.updateQueue=null,na(Fh,lc),lc|=h,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},L=ae!==null?ae.baseLanes:k,na(Fh,lc),lc|=L}else ae!==null?(L=ae.baseLanes|k,x.memoizedState=null):L=k,na(Fh,lc),lc|=L;return cl(h,x,X,k),x.child}function YS(h,x){var k=x.ref;(h===null&&k!==null||h!==null&&h.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function gb(h,x,k,L,X){var ae=za(k)?ha:zs.current;return ae=bo(x,ae),Fa(x,X),k=zd(h,x,k,L,ae,X),L=ll(),h!==null&&!Rl?(x.updateQueue=h.updateQueue,x.flags&=-2053,h.lanes&=~X,Hd(h,x,X)):(Ot&&L&&At(x),x.flags|=1,cl(h,x,k,X),x.child)}function JS(h,x,k,L,X){if(za(k)){var ae=!0;al(x)}else ae=!1;if(Fa(x,X),x.stateNode===null)Sg(h,x),BS(x,k,L),pb(x,k,L,X),L=!0;else if(h===null){var ke=x.stateNode,We=x.memoizedProps;ke.props=We;var rt=ke.context,St=k.contextType;typeof St=="object"&&St!==null?St=Ha(St):(St=za(k)?ha:zs.current,St=bo(x,St));var Xt=k.getDerivedStateFromProps,Qt=typeof Xt=="function"||typeof ke.getSnapshotBeforeUpdate=="function";Qt||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(We!==L||rt!==St)&&US(x,ke,L,St),Ll=!1;var Kt=x.memoizedState;ke.state=Kt,sl(x,L,ke,X),rt=x.memoizedState,We!==L||Kt!==rt||Hs.current||Ll?(typeof Xt=="function"&&(hb(x,k,Xt,L),rt=x.memoizedState),(We=Ll||RS(x,k,We,L,Kt,rt,St))?(Qt||typeof ke.UNSAFE_componentWillMount!="function"&&typeof ke.componentWillMount!="function"||(typeof ke.componentWillMount=="function"&&ke.componentWillMount(),typeof ke.UNSAFE_componentWillMount=="function"&&ke.UNSAFE_componentWillMount()),typeof ke.componentDidMount=="function"&&(x.flags|=4194308)):(typeof ke.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=L,x.memoizedState=rt),ke.props=L,ke.state=rt,ke.context=St,L=We):(typeof ke.componentDidMount=="function"&&(x.flags|=4194308),L=!1)}else{ke=x.stateNode,j0(h,x),We=x.memoizedProps,St=x.type===x.elementType?We:wu(x.type,We),ke.props=St,Qt=x.pendingProps,Kt=ke.context,rt=k.contextType,typeof rt=="object"&&rt!==null?rt=Ha(rt):(rt=za(k)?ha:zs.current,rt=bo(x,rt));var Ar=k.getDerivedStateFromProps;(Xt=typeof Ar=="function"||typeof ke.getSnapshotBeforeUpdate=="function")||typeof ke.UNSAFE_componentWillReceiveProps!="function"&&typeof ke.componentWillReceiveProps!="function"||(We!==Qt||Kt!==rt)&&US(x,ke,L,rt),Ll=!1,Kt=x.memoizedState,ke.state=Kt,sl(x,L,ke,X);var Ir=x.memoizedState;We!==Qt||Kt!==Ir||Hs.current||Ll?(typeof Ar=="function"&&(hb(x,k,Ar,L),Ir=x.memoizedState),(St=Ll||RS(x,k,St,L,Kt,Ir,rt)||!1)?(Xt||typeof ke.UNSAFE_componentWillUpdate!="function"&&typeof ke.componentWillUpdate!="function"||(typeof ke.componentWillUpdate=="function"&&ke.componentWillUpdate(L,Ir,rt),typeof ke.UNSAFE_componentWillUpdate=="function"&&ke.UNSAFE_componentWillUpdate(L,Ir,rt)),typeof ke.componentDidUpdate=="function"&&(x.flags|=4),typeof ke.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof ke.componentDidUpdate!="function"||We===h.memoizedProps&&Kt===h.memoizedState||(x.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||We===h.memoizedProps&&Kt===h.memoizedState||(x.flags|=1024),x.memoizedProps=L,x.memoizedState=Ir),ke.props=L,ke.state=Ir,ke.context=rt,L=St):(typeof ke.componentDidUpdate!="function"||We===h.memoizedProps&&Kt===h.memoizedState||(x.flags|=4),typeof ke.getSnapshotBeforeUpdate!="function"||We===h.memoizedProps&&Kt===h.memoizedState||(x.flags|=1024),L=!1)}return vb(h,x,k,L,ae,X)}function vb(h,x,k,L,X,ae){YS(h,x);var ke=(x.flags&128)!==0;if(!L&&!ke)return X&&Eh(x,k,!1),Hd(h,x,ae);L=x.stateNode,W9.current=x;var We=ke&&typeof k.getDerivedStateFromError!="function"?null:L.render();return x.flags|=1,h!==null&&ke?(x.child=es(x,h.child,null,ae),x.child=es(x,null,We,ae)):cl(h,x,We,ae),x.memoizedState=L.state,X&&Eh(x,k,!0),x.child}function QS(h){var x=h.stateNode;x.pendingContext?Cf(h,x.pendingContext,x.pendingContext!==x.context):x.context&&Cf(h,x.context,!1),td(h,x.containerInfo)}function ZS(h,x,k,L,X){return cn(),Jn(X),x.flags|=256,cl(h,x,k,L),x.child}var yb={dehydrated:null,treeContext:null,retryLane:0};function bb(h){return{baseLanes:h,cachePool:null,transitions:null}}function e_(h,x,k){var L=x.pendingProps,X=ba.current,ae=!1,ke=(x.flags&128)!==0,We;if((We=ke)||(We=h!==null&&h.memoizedState===null?!1:(X&2)!==0),We?(ae=!0,x.flags&=-129):(h===null||h.memoizedState!==null)&&(X|=1),na(ba,X&1),h===null)return dr(x),h=x.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?((x.mode&1)===0?x.lanes=1:h.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(ke=L.children,h=L.fallback,ae?(L=x.mode,ae=x.child,ke={mode:"hidden",children:ke},(L&1)===0&&ae!==null?(ae.childLanes=0,ae.pendingProps=ke):ae=Mg(ke,L,0,null),h=C0(h,L,k,null),ae.return=x,h.return=x,ae.sibling=h,x.child=ae,x.child.memoizedState=bb(k),x.memoizedState=yb,h):wb(x,ke));if(X=h.memoizedState,X!==null&&(We=X.dehydrated,We!==null))return V9(h,x,ke,L,We,X,k);if(ae){ae=L.fallback,ke=x.mode,X=h.child,We=X.sibling;var rt={mode:"hidden",children:L.children};return(ke&1)===0&&x.child!==X?(L=x.child,L.childLanes=0,L.pendingProps=rt,x.deletions=null):(L=Rf(X,rt),L.subtreeFlags=X.subtreeFlags&14680064),We!==null?ae=Rf(We,ae):(ae=C0(ae,ke,k,null),ae.flags|=2),ae.return=x,L.return=x,L.sibling=ae,x.child=L,L=ae,ae=x.child,ke=h.child.memoizedState,ke=ke===null?bb(k):{baseLanes:ke.baseLanes|k,cachePool:null,transitions:ke.transitions},ae.memoizedState=ke,ae.childLanes=h.childLanes&~k,x.memoizedState=yb,L}return ae=h.child,h=ae.sibling,L=Rf(ae,{mode:"visible",children:L.children}),(x.mode&1)===0&&(L.lanes=k),L.return=x,L.sibling=null,h!==null&&(k=x.deletions,k===null?(x.deletions=[h],x.flags|=16):k.push(h)),x.child=L,x.memoizedState=null,L}function wb(h,x){return x=Mg({mode:"visible",children:x},h.mode,0,null),x.return=h,h.child=x}function kg(h,x,k,L){return L!==null&&Jn(L),es(x,h.child,null,k),h=wb(x,x.pendingProps.children),h.flags|=2,x.memoizedState=null,h}function V9(h,x,k,L,X,ae,ke){if(k)return x.flags&256?(x.flags&=-257,L=mb(Error(r(422))),kg(h,x,ke,L)):x.memoizedState!==null?(x.child=h.child,x.flags|=128,null):(ae=L.fallback,X=x.mode,L=Mg({mode:"visible",children:L.children},X,0,null),ae=C0(ae,X,ke,null),ae.flags|=2,L.return=x,ae.return=x,L.sibling=ae,x.child=L,(x.mode&1)!==0&&es(x,h.child,null,ke),x.child.memoizedState=bb(ke),x.memoizedState=yb,ae);if((x.mode&1)===0)return kg(h,x,ke,null);if(X.data==="$!"){if(L=X.nextSibling&&X.nextSibling.dataset,L)var We=L.dgst;return L=We,ae=Error(r(419)),L=mb(ae,L,void 0),kg(h,x,ke,L)}if(We=(ke&h.childLanes)!==0,Rl||We){if(L=zi,L!==null){switch(ke&-ke){case 4:X=2;break;case 16:X=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:X=32;break;case 536870912:X=268435456;break;default:X=0}X=(X&(L.suspendedLanes|ke))!==0?0:X,X!==0&&X!==ae.retryLane&&(ae.retryLane=X,Xn(h,X),ku(L,h,X,-1))}return Mb(),L=mb(Error(r(421))),kg(h,x,ke,L)}return X.data==="$?"?(x.flags|=128,x.child=h.child,x=sB.bind(null,h),X._reactRetry=x,null):(h=ae.treeContext,Tt=Ni(X.nextSibling),et=x,Ot=!0,Lt=null,h!==null&&(Ie[Me++]=xt,Ie[Me++]=dt,Ie[Me++]=Qe,xt=h.id,dt=h.overflow,Qe=x),x=wb(x,L.children),x.flags|=4096,x)}function t_(h,x,k){h.lanes|=x;var L=h.alternate;L!==null&&(L.lanes|=x),wo(h.return,x,k)}function Nb(h,x,k,L,X){var ae=h.memoizedState;ae===null?h.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:L,tail:k,tailMode:X}:(ae.isBackwards=x,ae.rendering=null,ae.renderingStartTime=0,ae.last=L,ae.tail=k,ae.tailMode=X)}function r_(h,x,k){var L=x.pendingProps,X=L.revealOrder,ae=L.tail;if(cl(h,x,L.children,k),L=ba.current,(L&2)!==0)L=L&1|2,x.flags|=128;else{if(h!==null&&(h.flags&128)!==0)e:for(h=x.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&t_(h,k,x);else if(h.tag===19)t_(h,k,x);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===x)break e;for(;h.sibling===null;){if(h.return===null||h.return===x)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}L&=1}if(na(ba,L),(x.mode&1)===0)x.memoizedState=null;else switch(X){case"forwards":for(k=x.child,X=null;k!==null;)h=k.alternate,h!==null&&ol(h)===null&&(X=k),k=k.sibling;k=X,k===null?(X=x.child,x.child=null):(X=k.sibling,k.sibling=null),Nb(x,!1,X,k,ae);break;case"backwards":for(k=null,X=x.child,x.child=null;X!==null;){if(h=X.alternate,h!==null&&ol(h)===null){x.child=X;break}h=X.sibling,X.sibling=k,k=X,X=h}Nb(x,!0,k,null,ae);break;case"together":Nb(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Sg(h,x){(x.mode&1)===0&&h!==null&&(h.alternate=null,x.alternate=null,x.flags|=2)}function Hd(h,x,k){if(h!==null&&(x.dependencies=h.dependencies),S0|=x.lanes,(k&x.childLanes)===0)return null;if(h!==null&&x.child!==h.child)throw Error(r(153));if(x.child!==null){for(h=x.child,k=Rf(h,h.pendingProps),x.child=k,k.return=x;h.sibling!==null;)h=h.sibling,k=k.sibling=Rf(h,h.pendingProps),k.return=x;k.sibling=null}return x.child}function G9(h,x,k){switch(x.tag){case 3:QS(x),cn();break;case 5:Ch(x);break;case 1:za(x.type)&&al(x);break;case 4:td(x,x.stateNode.containerInfo);break;case 10:var L=x.type._context,X=x.memoizedProps.value;na(ci,L._currentValue),L._currentValue=X;break;case 13:if(L=x.memoizedState,L!==null)return L.dehydrated!==null?(na(ba,ba.current&1),x.flags|=128,null):(k&x.child.childLanes)!==0?e_(h,x,k):(na(ba,ba.current&1),h=Hd(h,x,k),h!==null?h.sibling:null);na(ba,ba.current&1);break;case 19:if(L=(k&x.childLanes)!==0,(h.flags&128)!==0){if(L)return r_(h,x,k);x.flags|=128}if(X=x.memoizedState,X!==null&&(X.rendering=null,X.tail=null,X.lastEffect=null),na(ba,ba.current),L)break;return null;case 22:case 23:return x.lanes=0,XS(h,x,k)}return Hd(h,x,k)}var n_,jb,a_,s_;n_=function(h,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)h.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},jb=function(){},a_=function(h,x,k,L){var X=h.memoizedProps;if(X!==L){h=x.stateNode,ic(js.current);var ae=null;switch(k){case"input":X=Fe(h,X),L=Fe(h,L),ae=[];break;case"select":X=ee({},X,{value:void 0}),L=ee({},L,{value:void 0}),ae=[];break;case"textarea":X=Pe(h,X),L=Pe(h,L),ae=[];break;default:typeof X.onClick!="function"&&typeof L.onClick=="function"&&(h.onclick=Fc)}er(k,L);var ke;k=null;for(St in X)if(!L.hasOwnProperty(St)&&X.hasOwnProperty(St)&&X[St]!=null)if(St==="style"){var We=X[St];for(ke in We)We.hasOwnProperty(ke)&&(k||(k={}),k[ke]="")}else St!=="dangerouslySetInnerHTML"&&St!=="children"&&St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&St!=="autoFocus"&&(s.hasOwnProperty(St)?ae||(ae=[]):(ae=ae||[]).push(St,null));for(St in L){var rt=L[St];if(We=X?.[St],L.hasOwnProperty(St)&&rt!==We&&(rt!=null||We!=null))if(St==="style")if(We){for(ke in We)!We.hasOwnProperty(ke)||rt&&rt.hasOwnProperty(ke)||(k||(k={}),k[ke]="");for(ke in rt)rt.hasOwnProperty(ke)&&We[ke]!==rt[ke]&&(k||(k={}),k[ke]=rt[ke])}else k||(ae||(ae=[]),ae.push(St,k)),k=rt;else St==="dangerouslySetInnerHTML"?(rt=rt?rt.__html:void 0,We=We?We.__html:void 0,rt!=null&&We!==rt&&(ae=ae||[]).push(St,rt)):St==="children"?typeof rt!="string"&&typeof rt!="number"||(ae=ae||[]).push(St,""+rt):St!=="suppressContentEditableWarning"&&St!=="suppressHydrationWarning"&&(s.hasOwnProperty(St)?(rt!=null&&St==="onScroll"&&ra("scroll",h),ae||We===rt||(ae=[])):(ae=ae||[]).push(St,rt))}k&&(ae=ae||[]).push("style",k);var St=ae;(x.updateQueue=St)&&(x.flags|=4)}},s_=function(h,x,k,L){k!==L&&(x.flags|=4)};function am(h,x){if(!Ot)switch(h.tailMode){case"hidden":x=h.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?h.tail=null:k.sibling=null;break;case"collapsed":k=h.tail;for(var L=null;k!==null;)k.alternate!==null&&(L=k),k=k.sibling;L===null?x||h.tail===null?h.tail=null:h.tail.sibling=null:L.sibling=null}}function _o(h){var x=h.alternate!==null&&h.alternate.child===h.child,k=0,L=0;if(x)for(var X=h.child;X!==null;)k|=X.lanes|X.childLanes,L|=X.subtreeFlags&14680064,L|=X.flags&14680064,X.return=h,X=X.sibling;else for(X=h.child;X!==null;)k|=X.lanes|X.childLanes,L|=X.subtreeFlags,L|=X.flags,X.return=h,X=X.sibling;return h.subtreeFlags|=L,h.childLanes=k,x}function K9(h,x,k){var L=x.pendingProps;switch(Ye(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _o(x),null;case 1:return za(x.type)&&Ef(),_o(x),null;case 3:return L=x.stateNode,Fl(),Vn(Hs),Vn(zs),$d(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(h===null||h.child===null)&&(qn(x)?x.flags|=4:h===null||h.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,Lt!==null&&(Db(Lt),Lt=null))),jb(h,x),_o(x),null;case 5:k0(x);var X=ic(il.current);if(k=x.type,h!==null&&x.stateNode!=null)a_(h,x,k,L,X),h.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!L){if(x.stateNode===null)throw Error(r(166));return _o(x),null}if(h=ic(js.current),qn(x)){L=x.stateNode,k=x.type;var ae=x.memoizedProps;switch(L[Dl]=x,L[vu]=ae,h=(x.mode&1)!==0,k){case"dialog":ra("cancel",L),ra("close",L);break;case"iframe":case"object":case"embed":ra("load",L);break;case"video":case"audio":for(X=0;X<Oc.length;X++)ra(Oc[X],L);break;case"source":ra("error",L);break;case"img":case"image":case"link":ra("error",L),ra("load",L);break;case"details":ra("toggle",L);break;case"input":fe(L,ae),ra("invalid",L);break;case"select":L._wrapperState={wasMultiple:!!ae.multiple},ra("invalid",L);break;case"textarea":Ne(L,ae),ra("invalid",L)}er(k,ae),X=null;for(var ke in ae)if(ae.hasOwnProperty(ke)){var We=ae[ke];ke==="children"?typeof We=="string"?L.textContent!==We&&(ae.suppressHydrationWarning!==!0&&Sf(L.textContent,We,h),X=["children",We]):typeof We=="number"&&L.textContent!==""+We&&(ae.suppressHydrationWarning!==!0&&Sf(L.textContent,We,h),X=["children",""+We]):s.hasOwnProperty(ke)&&We!=null&&ke==="onScroll"&&ra("scroll",L)}switch(k){case"input":Le(L),ve(L,ae,!0);break;case"textarea":Le(L),nt(L);break;case"select":case"option":break;default:typeof ae.onClick=="function"&&(L.onclick=Fc)}L=X,x.updateQueue=L,L!==null&&(x.flags|=4)}else{ke=X.nodeType===9?X:X.ownerDocument,h==="http://www.w3.org/1999/xhtml"&&(h=mt(k)),h==="http://www.w3.org/1999/xhtml"?k==="script"?(h=ke.createElement("div"),h.innerHTML="<script><\/script>",h=h.removeChild(h.firstChild)):typeof L.is=="string"?h=ke.createElement(k,{is:L.is}):(h=ke.createElement(k),k==="select"&&(ke=h,L.multiple?ke.multiple=!0:L.size&&(ke.size=L.size))):h=ke.createElementNS(h,k),h[Dl]=x,h[vu]=L,n_(h,x,!1,!1),x.stateNode=h;e:{switch(ke=qe(k,L),k){case"dialog":ra("cancel",h),ra("close",h),X=L;break;case"iframe":case"object":case"embed":ra("load",h),X=L;break;case"video":case"audio":for(X=0;X<Oc.length;X++)ra(Oc[X],h);X=L;break;case"source":ra("error",h),X=L;break;case"img":case"image":case"link":ra("error",h),ra("load",h),X=L;break;case"details":ra("toggle",h),X=L;break;case"input":fe(h,L),X=Fe(h,L),ra("invalid",h);break;case"option":X=L;break;case"select":h._wrapperState={wasMultiple:!!L.multiple},X=ee({},L,{value:void 0}),ra("invalid",h);break;case"textarea":Ne(h,L),X=Pe(h,L),ra("invalid",h);break;default:X=L}er(k,X),We=X;for(ae in We)if(We.hasOwnProperty(ae)){var rt=We[ae];ae==="style"?ft(h,rt):ae==="dangerouslySetInnerHTML"?(rt=rt?rt.__html:void 0,rt!=null&&gt(h,rt)):ae==="children"?typeof rt=="string"?(k!=="textarea"||rt!=="")&&ut(h,rt):typeof rt=="number"&&ut(h,""+rt):ae!=="suppressContentEditableWarning"&&ae!=="suppressHydrationWarning"&&ae!=="autoFocus"&&(s.hasOwnProperty(ae)?rt!=null&&ae==="onScroll"&&ra("scroll",h):rt!=null&&j(h,ae,rt,ke))}switch(k){case"input":Le(h),ve(h,L,!1);break;case"textarea":Le(h),nt(h);break;case"option":L.value!=null&&h.setAttribute("value",""+he(L.value));break;case"select":h.multiple=!!L.multiple,ae=L.value,ae!=null?ue(h,!!L.multiple,ae,!1):L.defaultValue!=null&&ue(h,!!L.multiple,L.defaultValue,!0);break;default:typeof X.onClick=="function"&&(h.onclick=Fc)}switch(k){case"button":case"input":case"select":case"textarea":L=!!L.autoFocus;break e;case"img":L=!0;break e;default:L=!1}}L&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return _o(x),null;case 6:if(h&&x.stateNode!=null)s_(h,x,h.memoizedProps,L);else{if(typeof L!="string"&&x.stateNode===null)throw Error(r(166));if(k=ic(il.current),ic(js.current),qn(x)){if(L=x.stateNode,k=x.memoizedProps,L[Dl]=x,(ae=L.nodeValue!==k)&&(h=et,h!==null))switch(h.tag){case 3:Sf(L.nodeValue,k,(h.mode&1)!==0);break;case 5:h.memoizedProps.suppressHydrationWarning!==!0&&Sf(L.nodeValue,k,(h.mode&1)!==0)}ae&&(x.flags|=4)}else L=(k.nodeType===9?k:k.ownerDocument).createTextNode(L),L[Dl]=x,x.stateNode=L}return _o(x),null;case 13:if(Vn(ba),L=x.memoizedState,h===null||h.memoizedState!==null&&h.memoizedState.dehydrated!==null){if(Ot&&Tt!==null&&(x.mode&1)!==0&&(x.flags&128)===0)bn(),cn(),x.flags|=98560,ae=!1;else if(ae=qn(x),L!==null&&L.dehydrated!==null){if(h===null){if(!ae)throw Error(r(318));if(ae=x.memoizedState,ae=ae!==null?ae.dehydrated:null,!ae)throw Error(r(317));ae[Dl]=x}else cn(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;_o(x),ae=!1}else Lt!==null&&(Db(Lt),Lt=null),ae=!0;if(!ae)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=k,x):(L=L!==null,L!==(h!==null&&h.memoizedState!==null)&&L&&(x.child.flags|=8192,(x.mode&1)!==0&&(h===null||(ba.current&1)!==0?Ai===0&&(Ai=3):Mb())),x.updateQueue!==null&&(x.flags|=4),_o(x),null);case 4:return Fl(),jb(h,x),h===null&&Il(x.stateNode.containerInfo),_o(x),null;case 10:return Ws(x.type._context),_o(x),null;case 17:return za(x.type)&&Ef(),_o(x),null;case 19:if(Vn(ba),ae=x.memoizedState,ae===null)return _o(x),null;if(L=(x.flags&128)!==0,ke=ae.rendering,ke===null)if(L)am(ae,!1);else{if(Ai!==0||h!==null&&(h.flags&128)!==0)for(h=x.child;h!==null;){if(ke=ol(h),ke!==null){for(x.flags|=128,am(ae,!1),L=ke.updateQueue,L!==null&&(x.updateQueue=L,x.flags|=4),x.subtreeFlags=0,L=k,k=x.child;k!==null;)ae=k,h=L,ae.flags&=14680066,ke=ae.alternate,ke===null?(ae.childLanes=0,ae.lanes=h,ae.child=null,ae.subtreeFlags=0,ae.memoizedProps=null,ae.memoizedState=null,ae.updateQueue=null,ae.dependencies=null,ae.stateNode=null):(ae.childLanes=ke.childLanes,ae.lanes=ke.lanes,ae.child=ke.child,ae.subtreeFlags=0,ae.deletions=null,ae.memoizedProps=ke.memoizedProps,ae.memoizedState=ke.memoizedState,ae.updateQueue=ke.updateQueue,ae.type=ke.type,h=ke.dependencies,ae.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),k=k.sibling;return na(ba,ba.current&1|2),x.child}h=h.sibling}ae.tail!==null&&Mt()>Mh&&(x.flags|=128,L=!0,am(ae,!1),x.lanes=4194304)}else{if(!L)if(h=ol(ke),h!==null){if(x.flags|=128,L=!0,k=h.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),am(ae,!0),ae.tail===null&&ae.tailMode==="hidden"&&!ke.alternate&&!Ot)return _o(x),null}else 2*Mt()-ae.renderingStartTime>Mh&&k!==1073741824&&(x.flags|=128,L=!0,am(ae,!1),x.lanes=4194304);ae.isBackwards?(ke.sibling=x.child,x.child=ke):(k=ae.last,k!==null?k.sibling=ke:x.child=ke,ae.last=ke)}return ae.tail!==null?(x=ae.tail,ae.rendering=x,ae.tail=x.sibling,ae.renderingStartTime=Mt(),x.sibling=null,k=ba.current,na(ba,L?k&1|2:k&1),x):(_o(x),null);case 22:case 23:return Fb(),L=x.memoizedState!==null,h!==null&&h.memoizedState!==null!==L&&(x.flags|=8192),L&&(x.mode&1)!==0?(lc&1073741824)!==0&&(_o(x),x.subtreeFlags&6&&(x.flags|=8192)):_o(x),null;case 24:return null;case 25:return null}throw Error(r(156,x.tag))}function X9(h,x){switch(Ye(x),x.tag){case 1:return za(x.type)&&Ef(),h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 3:return Fl(),Vn(Hs),Vn(zs),$d(),h=x.flags,(h&65536)!==0&&(h&128)===0?(x.flags=h&-65537|128,x):null;case 5:return k0(x),null;case 13:if(Vn(ba),h=x.memoizedState,h!==null&&h.dehydrated!==null){if(x.alternate===null)throw Error(r(340));cn()}return h=x.flags,h&65536?(x.flags=h&-65537|128,x):null;case 19:return Vn(ba),null;case 4:return Fl(),null;case 10:return Ws(x.type._context),null;case 22:case 23:return Fb(),null;case 24:return null;default:return null}}var _g=!1,Ao=!1,Y9=typeof WeakSet=="function"?WeakSet:Set,Or=null;function Lh(h,x){var k=h.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(L){Is(h,x,L)}else k.current=null}function kb(h,x,k){try{k()}catch(L){Is(h,x,L)}}var i_=!1;function J9(h,x){if(nl=Nc,h=Ld(),Pl(h)){if("selectionStart"in h)var k={start:h.selectionStart,end:h.selectionEnd};else e:{k=(k=h.ownerDocument)&&k.defaultView||window;var L=k.getSelection&&k.getSelection();if(L&&L.rangeCount!==0){k=L.anchorNode;var X=L.anchorOffset,ae=L.focusNode;L=L.focusOffset;try{k.nodeType,ae.nodeType}catch{k=null;break e}var ke=0,We=-1,rt=-1,St=0,Xt=0,Qt=h,Kt=null;t:for(;;){for(var Ar;Qt!==k||X!==0&&Qt.nodeType!==3||(We=ke+X),Qt!==ae||L!==0&&Qt.nodeType!==3||(rt=ke+L),Qt.nodeType===3&&(ke+=Qt.nodeValue.length),(Ar=Qt.firstChild)!==null;)Kt=Qt,Qt=Ar;for(;;){if(Qt===h)break t;if(Kt===k&&++St===X&&(We=ke),Kt===ae&&++Xt===L&&(rt=ke),(Ar=Qt.nextSibling)!==null)break;Qt=Kt,Kt=Qt.parentNode}Qt=Ar}k=We===-1||rt===-1?null:{start:We,end:rt}}else k=null}k=k||{start:0,end:0}}else k=null;for(Mc={focusedElem:h,selectionRange:k},Nc=!1,Or=x;Or!==null;)if(x=Or,h=x.child,(x.subtreeFlags&1028)!==0&&h!==null)h.return=x,Or=h;else for(;Or!==null;){x=Or;try{var Ir=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(Ir!==null){var Fr=Ir.memoizedProps,Gs=Ir.memoizedState,vt=x.stateNode,ot=vt.getSnapshotBeforeUpdate(x.elementType===x.type?Fr:wu(x.type,Fr),Gs);vt.__reactInternalSnapshotBeforeUpdate=ot}break;case 3:var Nt=x.stateNode.containerInfo;Nt.nodeType===1?Nt.textContent="":Nt.nodeType===9&&Nt.documentElement&&Nt.removeChild(Nt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ar){Is(x,x.return,ar)}if(h=x.sibling,h!==null){h.return=x.return,Or=h;break}Or=x.return}return Ir=i_,i_=!1,Ir}function sm(h,x,k){var L=x.updateQueue;if(L=L!==null?L.lastEffect:null,L!==null){var X=L=L.next;do{if((X.tag&h)===h){var ae=X.destroy;X.destroy=void 0,ae!==void 0&&kb(x,k,ae)}X=X.next}while(X!==L)}}function Ag(h,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&h)===h){var L=k.create;k.destroy=L()}k=k.next}while(k!==x)}}function Sb(h){var x=h.ref;if(x!==null){var k=h.stateNode;h.tag,h=k,typeof x=="function"?x(h):x.current=h}}function o_(h){var x=h.alternate;x!==null&&(h.alternate=null,o_(x)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(x=h.stateNode,x!==null&&(delete x[Dl],delete x[vu],delete x[Ui],delete x[_h],delete x[Ah])),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function l_(h){return h.tag===5||h.tag===3||h.tag===4}function c_(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||l_(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function _b(h,x,k){var L=h.tag;if(L===5||L===6)h=h.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(h,x):k.insertBefore(h,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(h,k)):(x=k,x.appendChild(h)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=Fc));else if(L!==4&&(h=h.child,h!==null))for(_b(h,x,k),h=h.sibling;h!==null;)_b(h,x,k),h=h.sibling}function Ab(h,x,k){var L=h.tag;if(L===5||L===6)h=h.stateNode,x?k.insertBefore(h,x):k.appendChild(h);else if(L!==4&&(h=h.child,h!==null))for(Ab(h,x,k),h=h.sibling;h!==null;)Ab(h,x,k),h=h.sibling}var ao=null,Nu=!1;function If(h,x,k){for(k=k.child;k!==null;)u_(h,x,k),k=k.sibling}function u_(h,x,k){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(xa,k)}catch{}switch(k.tag){case 5:Ao||Lh(k,x);case 6:var L=ao,X=Nu;ao=null,If(h,x,k),ao=L,Nu=X,ao!==null&&(Nu?(h=ao,k=k.stateNode,h.nodeType===8?h.parentNode.removeChild(k):h.removeChild(k)):ao.removeChild(k.stateNode));break;case 18:ao!==null&&(Nu?(h=ao,k=k.stateNode,h.nodeType===8?Zu(h.parentNode,k):h.nodeType===1&&Zu(h,k),po(h)):Zu(ao,k.stateNode));break;case 4:L=ao,X=Nu,ao=k.stateNode.containerInfo,Nu=!0,If(h,x,k),ao=L,Nu=X;break;case 0:case 11:case 14:case 15:if(!Ao&&(L=k.updateQueue,L!==null&&(L=L.lastEffect,L!==null))){X=L=L.next;do{var ae=X,ke=ae.destroy;ae=ae.tag,ke!==void 0&&((ae&2)!==0||(ae&4)!==0)&&kb(k,x,ke),X=X.next}while(X!==L)}If(h,x,k);break;case 1:if(!Ao&&(Lh(k,x),L=k.stateNode,typeof L.componentWillUnmount=="function"))try{L.props=k.memoizedProps,L.state=k.memoizedState,L.componentWillUnmount()}catch(We){Is(k,x,We)}If(h,x,k);break;case 21:If(h,x,k);break;case 22:k.mode&1?(Ao=(L=Ao)||k.memoizedState!==null,If(h,x,k),Ao=L):If(h,x,k);break;default:If(h,x,k)}}function d_(h){var x=h.updateQueue;if(x!==null){h.updateQueue=null;var k=h.stateNode;k===null&&(k=h.stateNode=new Y9),x.forEach(function(L){var X=iB.bind(null,h,L);k.has(L)||(k.add(L),L.then(X,X))})}}function ju(h,x){var k=x.deletions;if(k!==null)for(var L=0;L<k.length;L++){var X=k[L];try{var ae=h,ke=x,We=ke;e:for(;We!==null;){switch(We.tag){case 5:ao=We.stateNode,Nu=!1;break e;case 3:ao=We.stateNode.containerInfo,Nu=!0;break e;case 4:ao=We.stateNode.containerInfo,Nu=!0;break e}We=We.return}if(ao===null)throw Error(r(160));u_(ae,ke,X),ao=null,Nu=!1;var rt=X.alternate;rt!==null&&(rt.return=null),X.return=null}catch(St){Is(X,x,St)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)f_(x,h),x=x.sibling}function f_(h,x){var k=h.alternate,L=h.flags;switch(h.tag){case 0:case 11:case 14:case 15:if(ju(x,h),sd(h),L&4){try{sm(3,h,h.return),Ag(3,h)}catch(Fr){Is(h,h.return,Fr)}try{sm(5,h,h.return)}catch(Fr){Is(h,h.return,Fr)}}break;case 1:ju(x,h),sd(h),L&512&&k!==null&&Lh(k,k.return);break;case 5:if(ju(x,h),sd(h),L&512&&k!==null&&Lh(k,k.return),h.flags&32){var X=h.stateNode;try{ut(X,"")}catch(Fr){Is(h,h.return,Fr)}}if(L&4&&(X=h.stateNode,X!=null)){var ae=h.memoizedProps,ke=k!==null?k.memoizedProps:ae,We=h.type,rt=h.updateQueue;if(h.updateQueue=null,rt!==null)try{We==="input"&&ae.type==="radio"&&ae.name!=null&&Q(X,ae),qe(We,ke);var St=qe(We,ae);for(ke=0;ke<rt.length;ke+=2){var Xt=rt[ke],Qt=rt[ke+1];Xt==="style"?ft(X,Qt):Xt==="dangerouslySetInnerHTML"?gt(X,Qt):Xt==="children"?ut(X,Qt):j(X,Xt,Qt,St)}switch(We){case"input":we(X,ae);break;case"textarea":Be(X,ae);break;case"select":var Kt=X._wrapperState.wasMultiple;X._wrapperState.wasMultiple=!!ae.multiple;var Ar=ae.value;Ar!=null?ue(X,!!ae.multiple,Ar,!1):Kt!==!!ae.multiple&&(ae.defaultValue!=null?ue(X,!!ae.multiple,ae.defaultValue,!0):ue(X,!!ae.multiple,ae.multiple?[]:"",!1))}X[vu]=ae}catch(Fr){Is(h,h.return,Fr)}}break;case 6:if(ju(x,h),sd(h),L&4){if(h.stateNode===null)throw Error(r(162));X=h.stateNode,ae=h.memoizedProps;try{X.nodeValue=ae}catch(Fr){Is(h,h.return,Fr)}}break;case 3:if(ju(x,h),sd(h),L&4&&k!==null&&k.memoizedState.isDehydrated)try{po(x.containerInfo)}catch(Fr){Is(h,h.return,Fr)}break;case 4:ju(x,h),sd(h);break;case 13:ju(x,h),sd(h),X=h.child,X.flags&8192&&(ae=X.memoizedState!==null,X.stateNode.isHidden=ae,!ae||X.alternate!==null&&X.alternate.memoizedState!==null||(Tb=Mt())),L&4&&d_(h);break;case 22:if(Xt=k!==null&&k.memoizedState!==null,h.mode&1?(Ao=(St=Ao)||Xt,ju(x,h),Ao=St):ju(x,h),sd(h),L&8192){if(St=h.memoizedState!==null,(h.stateNode.isHidden=St)&&!Xt&&(h.mode&1)!==0)for(Or=h,Xt=h.child;Xt!==null;){for(Qt=Or=Xt;Or!==null;){switch(Kt=Or,Ar=Kt.child,Kt.tag){case 0:case 11:case 14:case 15:sm(4,Kt,Kt.return);break;case 1:Lh(Kt,Kt.return);var Ir=Kt.stateNode;if(typeof Ir.componentWillUnmount=="function"){L=Kt,k=Kt.return;try{x=L,Ir.props=x.memoizedProps,Ir.state=x.memoizedState,Ir.componentWillUnmount()}catch(Fr){Is(L,k,Fr)}}break;case 5:Lh(Kt,Kt.return);break;case 22:if(Kt.memoizedState!==null){m_(Qt);continue}}Ar!==null?(Ar.return=Kt,Or=Ar):m_(Qt)}Xt=Xt.sibling}e:for(Xt=null,Qt=h;;){if(Qt.tag===5){if(Xt===null){Xt=Qt;try{X=Qt.stateNode,St?(ae=X.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none"):(We=Qt.stateNode,rt=Qt.memoizedProps.style,ke=rt!=null&&rt.hasOwnProperty("display")?rt.display:null,We.style.display=tr("display",ke))}catch(Fr){Is(h,h.return,Fr)}}}else if(Qt.tag===6){if(Xt===null)try{Qt.stateNode.nodeValue=St?"":Qt.memoizedProps}catch(Fr){Is(h,h.return,Fr)}}else if((Qt.tag!==22&&Qt.tag!==23||Qt.memoizedState===null||Qt===h)&&Qt.child!==null){Qt.child.return=Qt,Qt=Qt.child;continue}if(Qt===h)break e;for(;Qt.sibling===null;){if(Qt.return===null||Qt.return===h)break e;Xt===Qt&&(Xt=null),Qt=Qt.return}Xt===Qt&&(Xt=null),Qt.sibling.return=Qt.return,Qt=Qt.sibling}}break;case 19:ju(x,h),sd(h),L&4&&d_(h);break;case 21:break;default:ju(x,h),sd(h)}}function sd(h){var x=h.flags;if(x&2){try{e:{for(var k=h.return;k!==null;){if(l_(k)){var L=k;break e}k=k.return}throw Error(r(160))}switch(L.tag){case 5:var X=L.stateNode;L.flags&32&&(ut(X,""),L.flags&=-33);var ae=c_(h);Ab(h,ae,X);break;case 3:case 4:var ke=L.stateNode.containerInfo,We=c_(h);_b(h,We,ke);break;default:throw Error(r(161))}}catch(rt){Is(h,h.return,rt)}h.flags&=-3}x&4096&&(h.flags&=-4097)}function Q9(h,x,k){Or=h,h_(h)}function h_(h,x,k){for(var L=(h.mode&1)!==0;Or!==null;){var X=Or,ae=X.child;if(X.tag===22&&L){var ke=X.memoizedState!==null||_g;if(!ke){var We=X.alternate,rt=We!==null&&We.memoizedState!==null||Ao;We=_g;var St=Ao;if(_g=ke,(Ao=rt)&&!St)for(Or=X;Or!==null;)ke=Or,rt=ke.child,ke.tag===22&&ke.memoizedState!==null?x_(X):rt!==null?(rt.return=ke,Or=rt):x_(X);for(;ae!==null;)Or=ae,h_(ae),ae=ae.sibling;Or=X,_g=We,Ao=St}p_(h)}else(X.subtreeFlags&8772)!==0&&ae!==null?(ae.return=X,Or=ae):p_(h)}}function p_(h){for(;Or!==null;){var x=Or;if((x.flags&8772)!==0){var k=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:Ao||Ag(5,x);break;case 1:var L=x.stateNode;if(x.flags&4&&!Ao)if(k===null)L.componentDidMount();else{var X=x.elementType===x.type?k.memoizedProps:wu(x.type,k.memoizedProps);L.componentDidUpdate(X,k.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var ae=x.updateQueue;ae!==null&&sc(x,ae,L);break;case 3:var ke=x.updateQueue;if(ke!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}sc(x,ke,k)}break;case 5:var We=x.stateNode;if(k===null&&x.flags&4){k=We;var rt=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":rt.autoFocus&&k.focus();break;case"img":rt.src&&(k.src=rt.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var St=x.alternate;if(St!==null){var Xt=St.memoizedState;if(Xt!==null){var Qt=Xt.dehydrated;Qt!==null&&po(Qt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}Ao||x.flags&512&&Sb(x)}catch(Kt){Is(x,x.return,Kt)}}if(x===h){Or=null;break}if(k=x.sibling,k!==null){k.return=x.return,Or=k;break}Or=x.return}}function m_(h){for(;Or!==null;){var x=Or;if(x===h){Or=null;break}var k=x.sibling;if(k!==null){k.return=x.return,Or=k;break}Or=x.return}}function x_(h){for(;Or!==null;){var x=Or;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{Ag(4,x)}catch(rt){Is(x,k,rt)}break;case 1:var L=x.stateNode;if(typeof L.componentDidMount=="function"){var X=x.return;try{L.componentDidMount()}catch(rt){Is(x,X,rt)}}var ae=x.return;try{Sb(x)}catch(rt){Is(x,ae,rt)}break;case 5:var ke=x.return;try{Sb(x)}catch(rt){Is(x,ke,rt)}}}catch(rt){Is(x,x.return,rt)}if(x===h){Or=null;break}var We=x.sibling;if(We!==null){We.return=x.return,Or=We;break}Or=x.return}}var Z9=Math.ceil,Eg=w.ReactCurrentDispatcher,Eb=w.ReactCurrentOwner,qc=w.ReactCurrentBatchConfig,Qn=0,zi=null,di=null,so=0,lc=0,Fh=yo(0),Ai=0,im=null,S0=0,Cg=0,Cb=0,om=null,Bl=null,Tb=0,Mh=1/0,Wd=null,Tg=!1,Ob=null,Df=null,Og=!1,Lf=null,Pg=0,lm=0,Pb=null,Ig=-1,Dg=0;function ul(){return(Qn&6)!==0?Mt():Ig!==-1?Ig:Ig=Mt()}function Ff(h){return(h.mode&1)===0?1:(Qn&2)!==0&&so!==0?so&-so:Rn.transition!==null?(Dg===0&&(Dg=kn()),Dg):(h=Sr,h!==0||(h=window.event,h=h===void 0?16:uu(h.type)),h)}function ku(h,x,k,L){if(50<lm)throw lm=0,Pb=null,Error(r(185));nr(h,k,L),((Qn&2)===0||h!==zi)&&(h===zi&&((Qn&2)===0&&(Cg|=k),Ai===4&&Mf(h,so)),Ul(h,L),k===1&&Qn===0&&(x.mode&1)===0&&(Mh=Mt()+500,Ud&&se()))}function Ul(h,x){var k=h.callbackNode;xr(h,x);var L=sr(h,h===zi?so:0);if(L===0)k!==null&&tt(k),h.callbackNode=null,h.callbackPriority=0;else if(x=L&-L,h.callbackPriority!==x){if(k!=null&&tt(k),x===1)h.tag===0?Y(v_.bind(null,h)):F(v_.bind(null,h)),rm(function(){(Qn&6)===0&&se()}),k=null;else{switch(Ht(L)){case 1:k=Ur;break;case 4:k=sn;break;case 16:k=En;break;case 536870912:k=vn;break;default:k=En}k=__(k,g_.bind(null,h))}h.callbackPriority=x,h.callbackNode=k}}function g_(h,x){if(Ig=-1,Dg=0,(Qn&6)!==0)throw Error(r(327));var k=h.callbackNode;if(Rh()&&h.callbackNode!==k)return null;var L=sr(h,h===zi?so:0);if(L===0)return null;if((L&30)!==0||(L&h.expiredLanes)!==0||x)x=Lg(h,L);else{x=L;var X=Qn;Qn|=2;var ae=b_();(zi!==h||so!==x)&&(Wd=null,Mh=Mt()+500,A0(h,x));do try{rB();break}catch(We){y_(h,We)}while(!0);us(),Eg.current=ae,Qn=X,di!==null?x=0:(zi=null,so=0,x=Ai)}if(x!==0){if(x===2&&(X=Cr(h),X!==0&&(L=X,x=Ib(h,X))),x===1)throw k=im,A0(h,0),Mf(h,L),Ul(h,Mt()),k;if(x===6)Mf(h,L);else{if(X=h.current.alternate,(L&30)===0&&!eB(X)&&(x=Lg(h,L),x===2&&(ae=Cr(h),ae!==0&&(L=ae,x=Ib(h,ae))),x===1))throw k=im,A0(h,0),Mf(h,L),Ul(h,Mt()),k;switch(h.finishedWork=X,h.finishedLanes=L,x){case 0:case 1:throw Error(r(345));case 2:E0(h,Bl,Wd);break;case 3:if(Mf(h,L),(L&130023424)===L&&(x=Tb+500-Mt(),10<x)){if(sr(h,0)!==0)break;if(X=h.suspendedLanes,(X&L)!==L){ul(),h.pingedLanes|=h.suspendedLanes&X;break}h.timeoutHandle=Qu(E0.bind(null,h,Bl,Wd),x);break}E0(h,Bl,Wd);break;case 4:if(Mf(h,L),(L&4194240)===L)break;for(x=h.eventTimes,X=-1;0<L;){var ke=31-ca(L);ae=1<<ke,ke=x[ke],ke>X&&(X=ke),L&=~ae}if(L=X,L=Mt()-L,L=(120>L?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*Z9(L/1960))-L,10<L){h.timeoutHandle=Qu(E0.bind(null,h,Bl,Wd),L);break}E0(h,Bl,Wd);break;case 5:E0(h,Bl,Wd);break;default:throw Error(r(329))}}}return Ul(h,Mt()),h.callbackNode===k?g_.bind(null,h):null}function Ib(h,x){var k=om;return h.current.memoizedState.isDehydrated&&(A0(h,x).flags|=256),h=Lg(h,x),h!==2&&(x=Bl,Bl=k,x!==null&&Db(x)),h}function Db(h){Bl===null?Bl=h:Bl.push.apply(Bl,h)}function eB(h){for(var x=h;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var L=0;L<k.length;L++){var X=k[L],ae=X.getSnapshot;X=X.value;try{if(!Sn(ae(),X))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===h)break;for(;x.sibling===null;){if(x.return===null||x.return===h)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Mf(h,x){for(x&=~Cb,x&=~Cg,h.suspendedLanes|=x,h.pingedLanes&=~x,h=h.expirationTimes;0<x;){var k=31-ca(x),L=1<<k;h[k]=-1,x&=~L}}function v_(h){if((Qn&6)!==0)throw Error(r(327));Rh();var x=sr(h,0);if((x&1)===0)return Ul(h,Mt()),null;var k=Lg(h,x);if(h.tag!==0&&k===2){var L=Cr(h);L!==0&&(x=L,k=Ib(h,L))}if(k===1)throw k=im,A0(h,0),Mf(h,x),Ul(h,Mt()),k;if(k===6)throw Error(r(345));return h.finishedWork=h.current.alternate,h.finishedLanes=x,E0(h,Bl,Wd),Ul(h,Mt()),null}function Lb(h,x){var k=Qn;Qn|=1;try{return h(x)}finally{Qn=k,Qn===0&&(Mh=Mt()+500,Ud&&se())}}function _0(h){Lf!==null&&Lf.tag===0&&(Qn&6)===0&&Rh();var x=Qn;Qn|=1;var k=qc.transition,L=Sr;try{if(qc.transition=null,Sr=1,h)return h()}finally{Sr=L,qc.transition=k,Qn=x,(Qn&6)===0&&se()}}function Fb(){lc=Fh.current,Vn(Fh)}function A0(h,x){h.finishedWork=null,h.finishedLanes=0;var k=h.timeoutHandle;if(k!==-1&&(h.timeoutHandle=-1,Sh(k)),di!==null)for(k=di.return;k!==null;){var L=k;switch(Ye(L),L.tag){case 1:L=L.type.childContextTypes,L!=null&&Ef();break;case 3:Fl(),Vn(Hs),Vn(zs),$d();break;case 5:k0(L);break;case 4:Fl();break;case 13:Vn(ba);break;case 19:Vn(ba);break;case 10:Ws(L.type._context);break;case 22:case 23:Fb()}k=k.return}if(zi=h,di=h=Rf(h.current,null),so=lc=x,Ai=0,im=null,Cb=Cg=S0=0,Bl=om=null,qi!==null){for(x=0;x<qi.length;x++)if(k=qi[x],L=k.interleaved,L!==null){k.interleaved=null;var X=L.next,ae=k.pending;if(ae!==null){var ke=ae.next;ae.next=X,L.next=ke}k.pending=L}qi=null}return h}function y_(h,x){do{var k=di;try{if(us(),Of.current=Ng,rd){for(var L=Ma.memoizedState;L!==null;){var X=L.queue;X!==null&&(X.pending=null),L=L.next}rd=!1}if(Ml=0,Wa=ts=Ma=null,oc=!1,bu=0,Eb.current=null,k===null||k.return===null){Ai=1,im=x,di=null;break}e:{var ae=h,ke=k.return,We=k,rt=x;if(x=so,We.flags|=32768,rt!==null&&typeof rt=="object"&&typeof rt.then=="function"){var St=rt,Xt=We,Qt=Xt.tag;if((Xt.mode&1)===0&&(Qt===0||Qt===11||Qt===15)){var Kt=Xt.alternate;Kt?(Xt.updateQueue=Kt.updateQueue,Xt.memoizedState=Kt.memoizedState,Xt.lanes=Kt.lanes):(Xt.updateQueue=null,Xt.memoizedState=null)}var Ar=HS(ke);if(Ar!==null){Ar.flags&=-257,WS(Ar,ke,We,ae,x),Ar.mode&1&&zS(ae,St,x),x=Ar,rt=St;var Ir=x.updateQueue;if(Ir===null){var Fr=new Set;Fr.add(rt),x.updateQueue=Fr}else Ir.add(rt);break e}else{if((x&1)===0){zS(ae,St,x),Mb();break e}rt=Error(r(426))}}else if(Ot&&We.mode&1){var Gs=HS(ke);if(Gs!==null){(Gs.flags&65536)===0&&(Gs.flags|=256),WS(Gs,ke,We,ae,x),Jn(Dh(rt,We));break e}}ae=rt=Dh(rt,We),Ai!==4&&(Ai=2),om===null?om=[ae]:om.push(ae),ae=ke;do{switch(ae.tag){case 3:ae.flags|=65536,x&=-x,ae.lanes|=x;var vt=qS(ae,rt,x);ko(ae,vt);break e;case 1:We=rt;var ot=ae.type,Nt=ae.stateNode;if((ae.flags&128)===0&&(typeof ot.getDerivedStateFromError=="function"||Nt!==null&&typeof Nt.componentDidCatch=="function"&&(Df===null||!Df.has(Nt)))){ae.flags|=65536,x&=-x,ae.lanes|=x;var ar=$S(ae,We,x);ko(ae,ar);break e}}ae=ae.return}while(ae!==null)}N_(k)}catch(Rr){x=Rr,di===k&&k!==null&&(di=k=k.return);continue}break}while(!0)}function b_(){var h=Eg.current;return Eg.current=Ng,h===null?Ng:h}function Mb(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),zi===null||(S0&268435455)===0&&(Cg&268435455)===0||Mf(zi,so)}function Lg(h,x){var k=Qn;Qn|=2;var L=b_();(zi!==h||so!==x)&&(Wd=null,A0(h,x));do try{tB();break}catch(X){y_(h,X)}while(!0);if(us(),Qn=k,Eg.current=L,di!==null)throw Error(r(261));return zi=null,so=0,Ai}function tB(){for(;di!==null;)w_(di)}function rB(){for(;di!==null&&!pt();)w_(di)}function w_(h){var x=S_(h.alternate,h,lc);h.memoizedProps=h.pendingProps,x===null?N_(h):di=x,Eb.current=null}function N_(h){var x=h;do{var k=x.alternate;if(h=x.return,(x.flags&32768)===0){if(k=K9(k,x,lc),k!==null){di=k;return}}else{if(k=X9(k,x),k!==null){k.flags&=32767,di=k;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Ai=6,di=null;return}}if(x=x.sibling,x!==null){di=x;return}di=x=h}while(x!==null);Ai===0&&(Ai=5)}function E0(h,x,k){var L=Sr,X=qc.transition;try{qc.transition=null,Sr=1,nB(h,x,k,L)}finally{qc.transition=X,Sr=L}return null}function nB(h,x,k,L){do Rh();while(Lf!==null);if((Qn&6)!==0)throw Error(r(327));k=h.finishedWork;var X=h.finishedLanes;if(k===null)return null;if(h.finishedWork=null,h.finishedLanes=0,k===h.current)throw Error(r(177));h.callbackNode=null,h.callbackPriority=0;var ae=k.lanes|k.childLanes;if(ir(h,ae),h===zi&&(di=zi=null,so=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||Og||(Og=!0,__(En,function(){return Rh(),null})),ae=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||ae){ae=qc.transition,qc.transition=null;var ke=Sr;Sr=1;var We=Qn;Qn|=4,Eb.current=null,J9(h,k),f_(k,h),to(Mc),Nc=!!nl,Mc=nl=null,h.current=k,Q9(k),It(),Qn=We,Sr=ke,qc.transition=ae}else h.current=k;if(Og&&(Og=!1,Lf=h,Pg=X),ae=h.pendingLanes,ae===0&&(Df=null),ga(k.stateNode),Ul(h,Mt()),x!==null)for(L=h.onRecoverableError,k=0;k<x.length;k++)X=x[k],L(X.value,{componentStack:X.stack,digest:X.digest});if(Tg)throw Tg=!1,h=Ob,Ob=null,h;return(Pg&1)!==0&&h.tag!==0&&Rh(),ae=h.pendingLanes,(ae&1)!==0?h===Pb?lm++:(lm=0,Pb=h):lm=0,se(),null}function Rh(){if(Lf!==null){var h=Ht(Pg),x=qc.transition,k=Sr;try{if(qc.transition=null,Sr=16>h?16:h,Lf===null)var L=!1;else{if(h=Lf,Lf=null,Pg=0,(Qn&6)!==0)throw Error(r(331));var X=Qn;for(Qn|=4,Or=h.current;Or!==null;){var ae=Or,ke=ae.child;if((Or.flags&16)!==0){var We=ae.deletions;if(We!==null){for(var rt=0;rt<We.length;rt++){var St=We[rt];for(Or=St;Or!==null;){var Xt=Or;switch(Xt.tag){case 0:case 11:case 15:sm(8,Xt,ae)}var Qt=Xt.child;if(Qt!==null)Qt.return=Xt,Or=Qt;else for(;Or!==null;){Xt=Or;var Kt=Xt.sibling,Ar=Xt.return;if(o_(Xt),Xt===St){Or=null;break}if(Kt!==null){Kt.return=Ar,Or=Kt;break}Or=Ar}}}var Ir=ae.alternate;if(Ir!==null){var Fr=Ir.child;if(Fr!==null){Ir.child=null;do{var Gs=Fr.sibling;Fr.sibling=null,Fr=Gs}while(Fr!==null)}}Or=ae}}if((ae.subtreeFlags&2064)!==0&&ke!==null)ke.return=ae,Or=ke;else e:for(;Or!==null;){if(ae=Or,(ae.flags&2048)!==0)switch(ae.tag){case 0:case 11:case 15:sm(9,ae,ae.return)}var vt=ae.sibling;if(vt!==null){vt.return=ae.return,Or=vt;break e}Or=ae.return}}var ot=h.current;for(Or=ot;Or!==null;){ke=Or;var Nt=ke.child;if((ke.subtreeFlags&2064)!==0&&Nt!==null)Nt.return=ke,Or=Nt;else e:for(ke=ot;Or!==null;){if(We=Or,(We.flags&2048)!==0)try{switch(We.tag){case 0:case 11:case 15:Ag(9,We)}}catch(Rr){Is(We,We.return,Rr)}if(We===ke){Or=null;break e}var ar=We.sibling;if(ar!==null){ar.return=We.return,Or=ar;break e}Or=We.return}}if(Qn=X,se(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(xa,h)}catch{}L=!0}return L}finally{Sr=k,qc.transition=x}}return!1}function j_(h,x,k){x=Dh(k,x),x=qS(h,x,1),h=jo(h,x,1),x=ul(),h!==null&&(nr(h,1,x),Ul(h,x))}function Is(h,x,k){if(h.tag===3)j_(h,h,k);else for(;x!==null;){if(x.tag===3){j_(x,h,k);break}else if(x.tag===1){var L=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(Df===null||!Df.has(L))){h=Dh(k,h),h=$S(x,h,1),x=jo(x,h,1),h=ul(),x!==null&&(nr(x,1,h),Ul(x,h));break}}x=x.return}}function aB(h,x,k){var L=h.pingCache;L!==null&&L.delete(x),x=ul(),h.pingedLanes|=h.suspendedLanes&k,zi===h&&(so&k)===k&&(Ai===4||Ai===3&&(so&130023424)===so&&500>Mt()-Tb?A0(h,0):Cb|=k),Ul(h,x)}function k_(h,x){x===0&&((h.mode&1)===0?x=1:(x=Dt,Dt<<=1,(Dt&130023424)===0&&(Dt=4194304)));var k=ul();h=Xn(h,x),h!==null&&(nr(h,x,k),Ul(h,k))}function sB(h){var x=h.memoizedState,k=0;x!==null&&(k=x.retryLane),k_(h,k)}function iB(h,x){var k=0;switch(h.tag){case 13:var L=h.stateNode,X=h.memoizedState;X!==null&&(k=X.retryLane);break;case 19:L=h.stateNode;break;default:throw Error(r(314))}L!==null&&L.delete(x),k_(h,k)}var S_;S_=function(h,x,k){if(h!==null)if(h.memoizedProps!==x.pendingProps||Hs.current)Rl=!0;else{if((h.lanes&k)===0&&(x.flags&128)===0)return Rl=!1,G9(h,x,k);Rl=(h.flags&131072)!==0}else Rl=!1,Ot&&(x.flags&1048576)!==0&&qt(x,Te,x.index);switch(x.lanes=0,x.tag){case 2:var L=x.type;Sg(h,x),h=x.pendingProps;var X=bo(x,zs.current);Fa(x,k),X=zd(null,x,L,h,X,k);var ae=ll();return x.flags|=1,typeof X=="object"&&X!==null&&typeof X.render=="function"&&X.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,za(L)?(ae=!0,al(x)):ae=!1,x.memoizedState=X.state!==null&&X.state!==void 0?X.state:null,Tf(x),X.updater=jg,x.stateNode=X,X._reactInternals=x,pb(x,L,h,k),x=vb(null,x,L,!0,ae,k)):(x.tag=0,Ot&&ae&&At(x),cl(null,x,X,k),x=x.child),x;case 16:L=x.elementType;e:{switch(Sg(h,x),h=x.pendingProps,X=L._init,L=X(L._payload),x.type=L,X=x.tag=lB(L),h=wu(L,h),X){case 0:x=gb(null,x,L,h,k);break e;case 1:x=JS(null,x,L,h,k);break e;case 11:x=VS(null,x,L,h,k);break e;case 14:x=GS(null,x,L,wu(L.type,h),k);break e}throw Error(r(306,L,""))}return x;case 0:return L=x.type,X=x.pendingProps,X=x.elementType===L?X:wu(L,X),gb(h,x,L,X,k);case 1:return L=x.type,X=x.pendingProps,X=x.elementType===L?X:wu(L,X),JS(h,x,L,X,k);case 3:e:{if(QS(x),h===null)throw Error(r(387));L=x.pendingProps,ae=x.memoizedState,X=ae.element,j0(h,x),sl(x,L,null,k);var ke=x.memoizedState;if(L=ke.element,ae.isDehydrated)if(ae={element:L,isDehydrated:!1,cache:ke.cache,pendingSuspenseBoundaries:ke.pendingSuspenseBoundaries,transitions:ke.transitions},x.updateQueue.baseState=ae,x.memoizedState=ae,x.flags&256){X=Dh(Error(r(423)),x),x=ZS(h,x,L,k,X);break e}else if(L!==X){X=Dh(Error(r(424)),x),x=ZS(h,x,L,k,X);break e}else for(Tt=Ni(x.stateNode.containerInfo.firstChild),et=x,Ot=!0,Lt=null,k=_n(x,null,L,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(cn(),L===X){x=Hd(h,x,k);break e}cl(h,x,L,k)}x=x.child}return x;case 5:return Ch(x),h===null&&dr(x),L=x.type,X=x.pendingProps,ae=h!==null?h.memoizedProps:null,ke=X.children,_f(L,X)?ke=null:ae!==null&&_f(L,ae)&&(x.flags|=32),YS(h,x),cl(h,x,ke,k),x.child;case 6:return h===null&&dr(x),null;case 13:return e_(h,x,k);case 4:return td(x,x.stateNode.containerInfo),L=x.pendingProps,h===null?x.child=es(x,null,L,k):cl(h,x,L,k),x.child;case 11:return L=x.type,X=x.pendingProps,X=x.elementType===L?X:wu(L,X),VS(h,x,L,X,k);case 7:return cl(h,x,x.pendingProps,k),x.child;case 8:return cl(h,x,x.pendingProps.children,k),x.child;case 12:return cl(h,x,x.pendingProps.children,k),x.child;case 10:e:{if(L=x.type._context,X=x.pendingProps,ae=x.memoizedProps,ke=X.value,na(ci,L._currentValue),L._currentValue=ke,ae!==null)if(Sn(ae.value,ke)){if(ae.children===X.children&&!Hs.current){x=Hd(h,x,k);break e}}else for(ae=x.child,ae!==null&&(ae.return=x);ae!==null;){var We=ae.dependencies;if(We!==null){ke=ae.child;for(var rt=We.firstContext;rt!==null;){if(rt.context===L){if(ae.tag===1){rt=No(-1,k&-k),rt.tag=2;var St=ae.updateQueue;if(St!==null){St=St.shared;var Xt=St.pending;Xt===null?rt.next=rt:(rt.next=Xt.next,Xt.next=rt),St.pending=rt}}ae.lanes|=k,rt=ae.alternate,rt!==null&&(rt.lanes|=k),wo(ae.return,k,x),We.lanes|=k;break}rt=rt.next}}else if(ae.tag===10)ke=ae.type===x.type?null:ae.child;else if(ae.tag===18){if(ke=ae.return,ke===null)throw Error(r(341));ke.lanes|=k,We=ke.alternate,We!==null&&(We.lanes|=k),wo(ke,k,x),ke=ae.sibling}else ke=ae.child;if(ke!==null)ke.return=ae;else for(ke=ae;ke!==null;){if(ke===x){ke=null;break}if(ae=ke.sibling,ae!==null){ae.return=ke.return,ke=ae;break}ke=ke.return}ae=ke}cl(h,x,X.children,k),x=x.child}return x;case 9:return X=x.type,L=x.pendingProps.children,Fa(x,k),X=Ha(X),L=L(X),x.flags|=1,cl(h,x,L,k),x.child;case 14:return L=x.type,X=wu(L,x.pendingProps),X=wu(L.type,X),GS(h,x,L,X,k);case 15:return KS(h,x,x.type,x.pendingProps,k);case 17:return L=x.type,X=x.pendingProps,X=x.elementType===L?X:wu(L,X),Sg(h,x),x.tag=1,za(L)?(h=!0,al(x)):h=!1,Fa(x,k),BS(x,L,X),pb(x,L,X,k),vb(null,x,L,!0,h,k);case 19:return r_(h,x,k);case 22:return XS(h,x,k)}throw Error(r(156,x.tag))};function __(h,x){return De(h,x)}function oB(h,x,k,L){this.tag=h,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $c(h,x,k,L){return new oB(h,x,k,L)}function Rb(h){return h=h.prototype,!(!h||!h.isReactComponent)}function lB(h){if(typeof h=="function")return Rb(h)?1:0;if(h!=null){if(h=h.$$typeof,h===C)return 11;if(h===G)return 14}return 2}function Rf(h,x){var k=h.alternate;return k===null?(k=$c(h.tag,x,h.key,h.mode),k.elementType=h.elementType,k.type=h.type,k.stateNode=h.stateNode,k.alternate=h,h.alternate=k):(k.pendingProps=x,k.type=h.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=h.flags&14680064,k.childLanes=h.childLanes,k.lanes=h.lanes,k.child=h.child,k.memoizedProps=h.memoizedProps,k.memoizedState=h.memoizedState,k.updateQueue=h.updateQueue,x=h.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=h.sibling,k.index=h.index,k.ref=h.ref,k}function Fg(h,x,k,L,X,ae){var ke=2;if(L=h,typeof h=="function")Rb(h)&&(ke=1);else if(typeof h=="string")ke=5;else e:switch(h){case A:return C0(k.children,X,ae,x);case T:ke=8,X|=8;break;case I:return h=$c(12,k,x,X|2),h.elementType=I,h.lanes=ae,h;case M:return h=$c(13,k,x,X),h.elementType=M,h.lanes=ae,h;case q:return h=$c(19,k,x,X),h.elementType=q,h.lanes=ae,h;case te:return Mg(k,X,ae,x);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case B:ke=10;break e;case E:ke=9;break e;case C:ke=11;break e;case G:ke=14;break e;case Z:ke=16,L=null;break e}throw Error(r(130,h==null?h:typeof h,""))}return x=$c(ke,k,x,X),x.elementType=h,x.type=L,x.lanes=ae,x}function C0(h,x,k,L){return h=$c(7,h,L,x),h.lanes=k,h}function Mg(h,x,k,L){return h=$c(22,h,L,x),h.elementType=te,h.lanes=k,h.stateNode={isHidden:!1},h}function Bb(h,x,k){return h=$c(6,h,null,x),h.lanes=k,h}function Ub(h,x,k){return x=$c(4,h.children!==null?h.children:[],h.key,x),x.lanes=k,x.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},x}function cB(h,x,k,L,X){this.tag=x,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Pn(0),this.expirationTimes=Pn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Pn(0),this.identifierPrefix=L,this.onRecoverableError=X,this.mutableSourceEagerHydrationData=null}function qb(h,x,k,L,X,ae,ke,We,rt){return h=new cB(h,x,k,We,rt),x===1?(x=1,ae===!0&&(x|=8)):x=0,ae=$c(3,null,null,x),h.current=ae,ae.stateNode=h,ae.memoizedState={element:L,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tf(ae),h}function uB(h,x,k){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:P,key:L==null?null:""+L,children:h,containerInfo:x,implementation:k}}function A_(h){if(!h)return rc;h=h._reactInternals;e:{if(Oe(h)!==h||h.tag!==1)throw Error(r(170));var x=h;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(za(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(r(171))}if(h.tag===1){var k=h.type;if(za(k))return Uc(h,k,x)}return x}function E_(h,x,k,L,X,ae,ke,We,rt){return h=qb(k,L,!0,h,X,ae,ke,We,rt),h.context=A_(null),k=h.current,L=ul(),X=Ff(k),ae=No(L,X),ae.callback=x??null,jo(k,ae,X),h.current.lanes=X,nr(h,X,L),Ul(h,L),h}function Rg(h,x,k,L){var X=x.current,ae=ul(),ke=Ff(X);return k=A_(k),x.context===null?x.context=k:x.pendingContext=k,x=No(ae,ke),x.payload={element:h},L=L===void 0?null:L,L!==null&&(x.callback=L),h=jo(X,x,ke),h!==null&&(ku(h,X,ke,ae),yu(h,X,ke)),ke}function Bg(h){return h=h.current,h.child?(h.child.tag===5,h.child.stateNode):null}function C_(h,x){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var k=h.retryLane;h.retryLane=k!==0&&k<x?k:x}}function $b(h,x){C_(h,x),(h=h.alternate)&&C_(h,x)}function dB(){return null}var T_=typeof reportError=="function"?reportError:function(h){console.error(h)};function zb(h){this._internalRoot=h}Ug.prototype.render=zb.prototype.render=function(h){var x=this._internalRoot;if(x===null)throw Error(r(409));Rg(h,x,null,null)},Ug.prototype.unmount=zb.prototype.unmount=function(){var h=this._internalRoot;if(h!==null){this._internalRoot=null;var x=h.containerInfo;_0(function(){Rg(null,h,null,null)}),x[bs]=null}};function Ug(h){this._internalRoot=h}Ug.prototype.unstable_scheduleHydration=function(h){if(h){var x=Zt();h={blockedOn:null,target:h,priority:x};for(var k=0;k<mr.length&&x!==0&&x<mr[k].priority;k++);mr.splice(k,0,h),k===0&&Hn(h)}};function Hb(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11)}function qg(h){return!(!h||h.nodeType!==1&&h.nodeType!==9&&h.nodeType!==11&&(h.nodeType!==8||h.nodeValue!==" react-mount-point-unstable "))}function O_(){}function fB(h,x,k,L,X){if(X){if(typeof L=="function"){var ae=L;L=function(){var St=Bg(ke);ae.call(St)}}var ke=E_(x,L,h,0,null,!1,!1,"",O_);return h._reactRootContainer=ke,h[bs]=ke.current,Il(h.nodeType===8?h.parentNode:h),_0(),ke}for(;X=h.lastChild;)h.removeChild(X);if(typeof L=="function"){var We=L;L=function(){var St=Bg(rt);We.call(St)}}var rt=qb(h,0,!1,null,null,!1,!1,"",O_);return h._reactRootContainer=rt,h[bs]=rt.current,Il(h.nodeType===8?h.parentNode:h),_0(function(){Rg(x,rt,k,L)}),rt}function $g(h,x,k,L,X){var ae=k._reactRootContainer;if(ae){var ke=ae;if(typeof X=="function"){var We=X;X=function(){var rt=Bg(ke);We.call(rt)}}Rg(x,ke,h,X)}else ke=fB(k,x,h,X,L);return Bg(ke)}Un=function(h){switch(h.tag){case 3:var x=h.stateNode;if(x.current.memoizedState.isDehydrated){var k=Ct(x.pendingLanes);k!==0&&(Et(x,k|1),Ul(x,Mt()),(Qn&6)===0&&(Mh=Mt()+500,se()))}break;case 13:_0(function(){var L=Xn(h,1);if(L!==null){var X=ul();ku(L,h,1,X)}}),$b(h,1)}},Ca=function(h){if(h.tag===13){var x=Xn(h,134217728);if(x!==null){var k=ul();ku(x,h,134217728,k)}$b(h,134217728)}},pn=function(h){if(h.tag===13){var x=Ff(h),k=Xn(h,x);if(k!==null){var L=ul();ku(k,h,x,L)}$b(h,x)}},Zt=function(){return Sr},zn=function(h,x){var k=Sr;try{return Sr=h,x()}finally{Sr=k}},rr=function(h,x,k){switch(x){case"input":if(we(h,k),x=k.name,k.type==="radio"&&x!=null){for(k=h;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var L=k[x];if(L!==h&&L.form===h.form){var X=Bc(L);if(!X)throw Error(r(90));le(L),we(L,X)}}}break;case"textarea":Be(h,k);break;case"select":x=k.value,x!=null&&ue(h,!!k.multiple,x,!1)}},kr=Lb,Gr=_0;var hB={usingClientEntryPoint:!1,Events:[Zl,ec,Bc,Ut,wr,Lb]},cm={findFiberByHostInstance:Rc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},pB={bundleType:cm.bundleType,version:cm.version,rendererPackageName:cm.rendererPackageName,rendererConfig:cm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(h){return h=Je(h),h===null?null:h.stateNode},findFiberByHostInstance:cm.findFiberByHostInstance||dB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zg.isDisabled&&zg.supportsFiber)try{xa=zg.inject(pB),Fn=zg}catch{}}return ql.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hB,ql.createPortal=function(h,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Hb(x))throw Error(r(200));return uB(h,x,null,k)},ql.createRoot=function(h,x){if(!Hb(h))throw Error(r(299));var k=!1,L="",X=T_;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(L=x.identifierPrefix),x.onRecoverableError!==void 0&&(X=x.onRecoverableError)),x=qb(h,1,!1,null,null,k,!1,L,X),h[bs]=x.current,Il(h.nodeType===8?h.parentNode:h),new zb(x)},ql.findDOMNode=function(h){if(h==null)return null;if(h.nodeType===1)return h;var x=h._reactInternals;if(x===void 0)throw typeof h.render=="function"?Error(r(188)):(h=Object.keys(h).join(","),Error(r(268,h)));return h=Je(x),h=h===null?null:h.stateNode,h},ql.flushSync=function(h){return _0(h)},ql.hydrate=function(h,x,k){if(!qg(x))throw Error(r(200));return $g(null,h,x,!0,k)},ql.hydrateRoot=function(h,x,k){if(!Hb(h))throw Error(r(405));var L=k!=null&&k.hydratedSources||null,X=!1,ae="",ke=T_;if(k!=null&&(k.unstable_strictMode===!0&&(X=!0),k.identifierPrefix!==void 0&&(ae=k.identifierPrefix),k.onRecoverableError!==void 0&&(ke=k.onRecoverableError)),x=E_(x,null,h,1,k??null,X,!1,ae,ke),h[bs]=x.current,Il(h),L)for(h=0;h<L.length;h++)k=L[h],X=k._getVersion,X=X(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,X]:x.mutableSourceEagerHydrationData.push(k,X);return new Ug(x)},ql.render=function(h,x,k){if(!qg(x))throw Error(r(200));return $g(null,h,x,!1,k)},ql.unmountComponentAtNode=function(h){if(!qg(h))throw Error(r(40));return h._reactRootContainer?(_0(function(){$g(null,null,h,!1,function(){h._reactRootContainer=null,h[bs]=null})}),!0):!1},ql.unstable_batchedUpdates=Lb,ql.unstable_renderSubtreeIntoContainer=function(h,x,k,L){if(!qg(k))throw Error(r(200));if(h==null||h._reactInternals===void 0)throw Error(r(38));return $g(h,x,k,!1,L)},ql.version="18.3.1-next-f1338f8080-20240426",ql}var B_;function QI(){if(B_)return Gb.exports;B_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Gb.exports=wB(),Gb.exports}var U_;function NB(){if(U_)return Wg;U_=1;var e=QI();return Wg.createRoot=e.createRoot,Wg.hydrateRoot=e.hydrateRoot,Wg}var jB=NB();const kB=Aa(jB),SB="modulepreload",_B=function(e){return"/"+e},q_={},_j=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){let c=function(u){return Promise.all(u.map(f=>Promise.resolve(f).then(d=>({status:"fulfilled",value:d}),d=>({status:"rejected",reason:d}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");s=c(r.map(u=>{if(u=_B(u),u in q_)return;q_[u]=!0;const f=u.endsWith(".css"),d=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${d}`))return;const m=document.createElement("link");if(m.rel=f?"stylesheet":SB,f||(m.as="script"),m.crossOrigin="",m.href=u,l&&m.setAttribute("nonce",l),document.head.appendChild(m),f)return new Promise((p,y)=>{m.addEventListener("load",p),m.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};const AB=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ZI=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();var EB={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const CB=z.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>z.createElement("svg",{ref:c,...EB,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:ZI("lucide",s),...l},[...o.map(([u,f])=>z.createElement(u,f)),...Array.isArray(i)?i:[i]]));const Bt=(e,t)=>{const r=z.forwardRef(({className:n,...s},i)=>z.createElement(CB,{ref:i,iconNode:t,className:ZI(`lucide-${AB(e)}`,n),...s}));return r.displayName=`${e}`,r};const $_=Bt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const TB=Bt("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);const fd=Bt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);const Ak=Bt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const lo=Bt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const rx=Bt("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);const Vg=Bt("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);const gy=Bt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const OB=Bt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const z_=Bt("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);const Gv=Bt("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);const ru=Bt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const Iv=Bt("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);const gd=Bt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const ka=Bt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const H_=Bt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const eD=Bt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Bm=Bt("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);const kd=Bt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const hl=Bt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Aj=Bt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const _s=Bt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const PB=Bt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const sa=Bt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const jn=Bt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const IB=Bt("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const DB=Bt("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);const tD=Bt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const vd=Bt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const As=Bt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const dm=Bt("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);const rD=Bt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const nD=Bt("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);const df=Bt("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const H0=Bt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const W_=Bt("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const aD=Bt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const Ti=Bt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const LB=Bt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const yd=Bt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const FB=Bt("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);const Dv=Bt("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);const MB=Bt("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);const RB=Bt("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);const Ga=Bt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const V_=Bt("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);const BB=Bt("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);const UB=Bt("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const cc=Bt("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);const nx=Bt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Zf=Bt("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);const W0=Bt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);const qB=Bt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const Vd=Bt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const $B=Bt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const rf=Bt("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const zB=Bt("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);const gl=Bt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const Gg=Bt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const a0=Bt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const Ej=Bt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const G_=Bt("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);const Vf=Bt("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const V0=Bt("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);const HB=Bt("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);const WB=Bt("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const jt=Bt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const VB=Bt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const sD=Bt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const gi=Bt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const iD=Bt("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);const Lv=Bt("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);const GB=Bt("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const KB=Bt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Fv=Bt("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);const XB=Bt("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);const fo=Bt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const YB=Bt("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);const JB=Bt("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);const QB=Bt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const Cj=Bt("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);const Bh=Bt("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);const ZB=Bt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const K_=Bt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);const vc=Bt("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);const Tj=Bt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const eU=Bt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const Nn=Bt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Oj=Bt("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);const bd=Bt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const tU=Bt("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const Kv=Bt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);const Ii=Bt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const rU=Bt("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);const Sd=Bt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Iu=Bt("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);const X_=Bt("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);const oD=Bt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Xv=Bt("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);const nU=Bt("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);const vy=Bt("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const ax=Bt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Gi=Bt("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);const bl=Bt("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const aU=Bt("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);const sU=Bt("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);const Mv=Bt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const ks=Bt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const fm=Bt("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);const Br=Bt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const iU=Bt("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);const nf=Bt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const s0=Bt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const $u=Bt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const Kg=Bt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Ru=Bt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const vl=Bt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const e0=Bt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const Jh=Bt("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);const oU=Bt("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);const cr=Bt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Yv=Bt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),lU=[{id:"dashboard",label:"Dashboard",icon:a.jsx(zB,{className:"w-5 h-5"})},{id:"schedule",label:"Schedule",icon:a.jsx(ka,{className:"w-5 h-5"})},{id:"inbox",label:"Shared Inbox",icon:a.jsx(gi,{className:"w-5 h-5"})},{id:"crm",label:"CRM",icon:a.jsx(e0,{className:"w-5 h-5"})},{id:"pipeline",label:"Deal Pipeline",icon:a.jsx(ru,{className:"w-5 h-5"})},{id:"projects",label:"Projects",icon:a.jsx(Ga,{className:"w-5 h-5"})},{id:"tasks",label:"Tasks",icon:a.jsx(bl,{className:"w-5 h-5"})},{id:"invoices",label:"Billing & Invoicing",icon:a.jsx(df,{className:"w-5 h-5"})},{id:"expenses",label:"Expenses",icon:a.jsx(Oj,{className:"w-5 h-5"})},{id:"budget",label:"Budget Management",icon:a.jsx(Bm,{className:"w-5 h-5"})},{id:"contracts",label:"Contracts & Legal",icon:a.jsx(Dv,{className:"w-5 h-5"})},{id:"roadmap",label:"Roadmap",icon:a.jsx(Lv,{className:"w-5 h-5"})},{id:"integrations",label:"Integrations",icon:a.jsx(Xv,{className:"w-5 h-5"})}],Rv=[{id:"u1",name:"Alex Rivera",email:"alex@impact247.com",role:"Admin",avatar:"https://picsum.photos/seed/alex/100/100",active:!0}],Xg=[{id:"new-lead",label:"New Lead",description:"Alerts when a new lead is assigned to you",inApp:!0,email:!0},{id:"deal-update",label:"Deal Update",description:"Alerts when a deal status or stage changes",inApp:!0,email:!1},{id:"task-assigned",label:"Task Assigned",description:"Alerts when a teammate assigns a task to you",inApp:!0,email:!0},{id:"project-update",label:"Project Update",description:"Alerts when milestone or status updates occur",inApp:!1,email:!0},{id:"company-update",label:"Company Update",description:"Alerts when company information or details are updated",inApp:!0,email:!1},{id:"contact-update",label:"Contact Update",description:"Alerts when contact information or details are updated",inApp:!0,email:!1},{id:"email-routing",label:"Email Auto-Assigned",description:"Alerts when an email is automatically assigned to you via routing rules",inApp:!0,email:!0},{id:"email-assigned",label:"Email Assigned",description:"Alerts when an email is manually assigned to you",inApp:!0,email:!1},{id:"email-mention",label:"Email Mentions",description:"Alerts when you are mentioned in an email note",inApp:!0,email:!0},{id:"new-email",label:"New Email",description:"Alerts when a new email is received in shared inbox",inApp:!1,email:!1}],cU=e=>{const t=e.match(/UTC([+-]?)(\d+)(?::(\d+))?/);if(!t)return 0;const r=t[1]==="-"?-1:1,n=parseInt(t[2],10),s=t[3]?parseInt(t[3],10):0;return r*(n+s/60)},Um=[{value:"UTC-12",label:"UTC-12 (Baker Island Time)"},{value:"UTC-11",label:"UTC-11 (Hawaii-Aleutian Standard Time)"},{value:"UTC-10",label:"UTC-10 (Hawaii Standard Time)"},{value:"UTC-9:30",label:"UTC-9:30 (Marquesas Time)"},{value:"UTC-9",label:"UTC-9 (Alaska Standard Time)"},{value:"UTC-8",label:"UTC-8 (Pacific Standard Time - PST)"},{value:"UTC-7",label:"UTC-7 (Mountain Standard Time - MST)"},{value:"UTC-6",label:"UTC-6 (Central Standard Time - CST)"},{value:"UTC-5",label:"UTC-5 (Eastern Standard Time - EST)"},{value:"UTC-4",label:"UTC-4 (Atlantic Standard Time - AST)"},{value:"UTC-3:30",label:"UTC-3:30 (Newfoundland Standard Time)"},{value:"UTC-3",label:"UTC-3 (Argentina Time)"},{value:"UTC-2",label:"UTC-2 (South Georgia Time)"},{value:"UTC-1",label:"UTC-1 (Cape Verde Time)"},{value:"UTC+0",label:"UTC+0 (Greenwich Mean Time - GMT)"},{value:"UTC+1",label:"UTC+1 (Central European Time - CET)"},{value:"UTC+2",label:"UTC+2 (Eastern European Time - EET)"},{value:"UTC+3",label:"UTC+3 (Moscow Time - MSK)"},{value:"UTC+3:30",label:"UTC+3:30 (Iran Standard Time)"},{value:"UTC+4",label:"UTC+4 (Gulf Standard Time)"},{value:"UTC+4:30",label:"UTC+4:30 (Afghanistan Time)"},{value:"UTC+5",label:"UTC+5 (Pakistan Standard Time)"},{value:"UTC+5:30",label:"UTC+5:30 (India Standard Time - IST)"},{value:"UTC+5:45",label:"UTC+5:45 (Nepal Time)"},{value:"UTC+6",label:"UTC+6 (Bangladesh Standard Time)"},{value:"UTC+6:30",label:"UTC+6:30 (Myanmar Time)"},{value:"UTC+7",label:"UTC+7 (Indochina Time)"},{value:"UTC+8",label:"UTC+8 (China Standard Time - CST)"},{value:"UTC+8:45",label:"UTC+8:45 (Australian Central Western Time)"},{value:"UTC+9",label:"UTC+9 (Japan Standard Time - JST)"},{value:"UTC+9:30",label:"UTC+9:30 (Australian Central Standard Time)"},{value:"UTC+10",label:"UTC+10 (Australian Eastern Standard Time)"},{value:"UTC+10:30",label:"UTC+10:30 (Lord Howe Standard Time)"},{value:"UTC+11",label:"UTC+11 (Solomon Islands Time)"},{value:"UTC+12",label:"UTC+12 (New Zealand Standard Time)"},{value:"UTC+12:45",label:"UTC+12:45 (Chatham Standard Time)"},{value:"UTC+13",label:"UTC+13 (Tonga Time)"},{value:"UTC+14",label:"UTC+14 (Line Islands Time)"}],hm=()=>{try{const e=-new Date().getTimezoneOffset(),t=e/60,r=e%60;if(r===0){const l=`UTC${t>=0?"+":""}${t}`;if(Um.find(c=>c.value===l))return l}else{const o=Math.floor(Math.abs(t)),l=Math.abs(r),u=`UTC${t>=0?"+":"-"}${o}:${l}`;if(Um.find(f=>f.value===u))return u}const n=t;let s="UTC+0",i=1/0;return Um.forEach(o=>{const l=cU(o.value),c=Math.abs(l-n);c<i&&(i=c,s=o.value)}),s}catch{return"UTC+0"}},Y_=[{value:"English",label:"English"},{value:"Spanish",label:"Spanish (Espaol)"},{value:"French",label:"French (Franais)"}];function lD(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=lD(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function oa(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=lD(e))&&(n&&(n+=" "),n+=t);return n}var Yb,J_;function Vl(){if(J_)return Yb;J_=1;var e=Array.isArray;return Yb=e,Yb}var Jb,Q_;function cD(){if(Q_)return Jb;Q_=1;var e=typeof Hg=="object"&&Hg&&Hg.Object===Object&&Hg;return Jb=e,Jb}var Qb,Z_;function Ad(){if(Z_)return Qb;Z_=1;var e=cD(),t=typeof self=="object"&&self&&self.Object===Object&&self,r=e||t||Function("return this")();return Qb=r,Qb}var Zb,e6;function ng(){if(e6)return Zb;e6=1;var e=Ad(),t=e.Symbol;return Zb=t,Zb}var e2,t6;function uU(){if(t6)return e2;t6=1;var e=ng(),t=Object.prototype,r=t.hasOwnProperty,n=t.toString,s=e?e.toStringTag:void 0;function i(o){var l=r.call(o,s),c=o[s];try{o[s]=void 0;var u=!0}catch{}var f=n.call(o);return u&&(l?o[s]=c:delete o[s]),f}return e2=i,e2}var t2,r6;function dU(){if(r6)return t2;r6=1;var e=Object.prototype,t=e.toString;function r(n){return t.call(n)}return t2=r,t2}var r2,n6;function gf(){if(n6)return r2;n6=1;var e=ng(),t=uU(),r=dU(),n="[object Null]",s="[object Undefined]",i=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?s:n:i&&i in Object(l)?t(l):r(l)}return r2=o,r2}var n2,a6;function vf(){if(a6)return n2;a6=1;function e(t){return t!=null&&typeof t=="object"}return n2=e,n2}var a2,s6;function qp(){if(s6)return a2;s6=1;var e=gf(),t=vf(),r="[object Symbol]";function n(s){return typeof s=="symbol"||t(s)&&e(s)==r}return a2=n,a2}var s2,i6;function Ek(){if(i6)return s2;i6=1;var e=Vl(),t=qp(),r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function s(i,o){if(e(i))return!1;var l=typeof i;return l=="number"||l=="symbol"||l=="boolean"||i==null||t(i)?!0:n.test(i)||!r.test(i)||o!=null&&i in Object(o)}return s2=s,s2}var i2,o6;function f0(){if(o6)return i2;o6=1;function e(t){var r=typeof t;return t!=null&&(r=="object"||r=="function")}return i2=e,i2}var o2,l6;function Ck(){if(l6)return o2;l6=1;var e=gf(),t=f0(),r="[object AsyncFunction]",n="[object Function]",s="[object GeneratorFunction]",i="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==n||c==s||c==r||c==i}return o2=o,o2}var l2,c6;function fU(){if(c6)return l2;c6=1;var e=Ad(),t=e["__core-js_shared__"];return l2=t,l2}var c2,u6;function hU(){if(u6)return c2;u6=1;var e=fU(),t=(function(){var n=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function r(n){return!!t&&t in n}return c2=r,c2}var u2,d6;function uD(){if(d6)return u2;d6=1;var e=Function.prototype,t=e.toString;function r(n){if(n!=null){try{return t.call(n)}catch{}try{return n+""}catch{}}return""}return u2=r,u2}var d2,f6;function pU(){if(f6)return d2;f6=1;var e=Ck(),t=hU(),r=f0(),n=uD(),s=/[\\^$.*+?()[\]{}|]/g,i=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,u=l.hasOwnProperty,f=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(m){if(!r(m)||t(m))return!1;var p=e(m)?f:i;return p.test(n(m))}return d2=d,d2}var f2,h6;function mU(){if(h6)return f2;h6=1;function e(t,r){return t?.[r]}return f2=e,f2}var h2,p6;function fh(){if(p6)return h2;p6=1;var e=pU(),t=mU();function r(n,s){var i=t(n,s);return e(i)?i:void 0}return h2=r,h2}var p2,m6;function yy(){if(m6)return p2;m6=1;var e=fh(),t=e(Object,"create");return p2=t,p2}var m2,x6;function xU(){if(x6)return m2;x6=1;var e=yy();function t(){this.__data__=e?e(null):{},this.size=0}return m2=t,m2}var x2,g6;function gU(){if(g6)return x2;g6=1;function e(t){var r=this.has(t)&&delete this.__data__[t];return this.size-=r?1:0,r}return x2=e,x2}var g2,v6;function vU(){if(v6)return g2;v6=1;var e=yy(),t="__lodash_hash_undefined__",r=Object.prototype,n=r.hasOwnProperty;function s(i){var o=this.__data__;if(e){var l=o[i];return l===t?void 0:l}return n.call(o,i)?o[i]:void 0}return g2=s,g2}var v2,y6;function yU(){if(y6)return v2;y6=1;var e=yy(),t=Object.prototype,r=t.hasOwnProperty;function n(s){var i=this.__data__;return e?i[s]!==void 0:r.call(i,s)}return v2=n,v2}var y2,b6;function bU(){if(b6)return y2;b6=1;var e=yy(),t="__lodash_hash_undefined__";function r(n,s){var i=this.__data__;return this.size+=this.has(n)?0:1,i[n]=e&&s===void 0?t:s,this}return y2=r,y2}var b2,w6;function wU(){if(w6)return b2;w6=1;var e=xU(),t=gU(),r=vU(),n=yU(),s=bU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,b2=i,b2}var w2,N6;function NU(){if(N6)return w2;N6=1;function e(){this.__data__=[],this.size=0}return w2=e,w2}var N2,j6;function Tk(){if(j6)return N2;j6=1;function e(t,r){return t===r||t!==t&&r!==r}return N2=e,N2}var j2,k6;function by(){if(k6)return j2;k6=1;var e=Tk();function t(r,n){for(var s=r.length;s--;)if(e(r[s][0],n))return s;return-1}return j2=t,j2}var k2,S6;function jU(){if(S6)return k2;S6=1;var e=by(),t=Array.prototype,r=t.splice;function n(s){var i=this.__data__,o=e(i,s);if(o<0)return!1;var l=i.length-1;return o==l?i.pop():r.call(i,o,1),--this.size,!0}return k2=n,k2}var S2,_6;function kU(){if(_6)return S2;_6=1;var e=by();function t(r){var n=this.__data__,s=e(n,r);return s<0?void 0:n[s][1]}return S2=t,S2}var _2,A6;function SU(){if(A6)return _2;A6=1;var e=by();function t(r){return e(this.__data__,r)>-1}return _2=t,_2}var A2,E6;function _U(){if(E6)return A2;E6=1;var e=by();function t(r,n){var s=this.__data__,i=e(s,r);return i<0?(++this.size,s.push([r,n])):s[i][1]=n,this}return A2=t,A2}var E2,C6;function wy(){if(C6)return E2;C6=1;var e=NU(),t=jU(),r=kU(),n=SU(),s=_U();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,E2=i,E2}var C2,T6;function Ok(){if(T6)return C2;T6=1;var e=fh(),t=Ad(),r=e(t,"Map");return C2=r,C2}var T2,O6;function AU(){if(O6)return T2;O6=1;var e=wU(),t=wy(),r=Ok();function n(){this.size=0,this.__data__={hash:new e,map:new(r||t),string:new e}}return T2=n,T2}var O2,P6;function EU(){if(P6)return O2;P6=1;function e(t){var r=typeof t;return r=="string"||r=="number"||r=="symbol"||r=="boolean"?t!=="__proto__":t===null}return O2=e,O2}var P2,I6;function Ny(){if(I6)return P2;I6=1;var e=EU();function t(r,n){var s=r.__data__;return e(n)?s[typeof n=="string"?"string":"hash"]:s.map}return P2=t,P2}var I2,D6;function CU(){if(D6)return I2;D6=1;var e=Ny();function t(r){var n=e(this,r).delete(r);return this.size-=n?1:0,n}return I2=t,I2}var D2,L6;function TU(){if(L6)return D2;L6=1;var e=Ny();function t(r){return e(this,r).get(r)}return D2=t,D2}var L2,F6;function OU(){if(F6)return L2;F6=1;var e=Ny();function t(r){return e(this,r).has(r)}return L2=t,L2}var F2,M6;function PU(){if(M6)return F2;M6=1;var e=Ny();function t(r,n){var s=e(this,r),i=s.size;return s.set(r,n),this.size+=s.size==i?0:1,this}return F2=t,F2}var M2,R6;function Pk(){if(R6)return M2;R6=1;var e=AU(),t=CU(),r=TU(),n=OU(),s=PU();function i(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var u=o[l];this.set(u[0],u[1])}}return i.prototype.clear=e,i.prototype.delete=t,i.prototype.get=r,i.prototype.has=n,i.prototype.set=s,M2=i,M2}var R2,B6;function dD(){if(B6)return R2;B6=1;var e=Pk(),t="Expected a function";function r(n,s){if(typeof n!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var i=function(){var o=arguments,l=s?s.apply(this,o):o[0],c=i.cache;if(c.has(l))return c.get(l);var u=n.apply(this,o);return i.cache=c.set(l,u)||c,u};return i.cache=new(r.Cache||e),i}return r.Cache=e,R2=r,R2}var B2,U6;function IU(){if(U6)return B2;U6=1;var e=dD(),t=500;function r(n){var s=e(n,function(o){return i.size===t&&i.clear(),o}),i=s.cache;return s}return B2=r,B2}var U2,q6;function DU(){if(q6)return U2;q6=1;var e=IU(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,r=/\\(\\)?/g,n=e(function(s){var i=[];return s.charCodeAt(0)===46&&i.push(""),s.replace(t,function(o,l,c,u){i.push(c?u.replace(r,"$1"):l||o)}),i});return U2=n,U2}var q2,$6;function Ik(){if($6)return q2;$6=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=Array(s);++n<s;)i[n]=r(t[n],n,t);return i}return q2=e,q2}var $2,z6;function LU(){if(z6)return $2;z6=1;var e=ng(),t=Ik(),r=Vl(),n=qp(),s=e?e.prototype:void 0,i=s?s.toString:void 0;function o(l){if(typeof l=="string")return l;if(r(l))return t(l,o)+"";if(n(l))return i?i.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return $2=o,$2}var z2,H6;function fD(){if(H6)return z2;H6=1;var e=LU();function t(r){return r==null?"":e(r)}return z2=t,z2}var H2,W6;function hD(){if(W6)return H2;W6=1;var e=Vl(),t=Ek(),r=DU(),n=fD();function s(i,o){return e(i)?i:t(i,o)?[i]:r(n(i))}return H2=s,H2}var W2,V6;function jy(){if(V6)return W2;V6=1;var e=qp();function t(r){if(typeof r=="string"||e(r))return r;var n=r+"";return n=="0"&&1/r==-1/0?"-0":n}return W2=t,W2}var V2,G6;function Dk(){if(G6)return V2;G6=1;var e=hD(),t=jy();function r(n,s){s=e(s,n);for(var i=0,o=s.length;n!=null&&i<o;)n=n[t(s[i++])];return i&&i==o?n:void 0}return V2=r,V2}var G2,K6;function pD(){if(K6)return G2;K6=1;var e=Dk();function t(r,n,s){var i=r==null?void 0:e(r,n);return i===void 0?s:i}return G2=t,G2}var FU=pD();const nu=Aa(FU);var K2,X6;function MU(){if(X6)return K2;X6=1;function e(t){return t==null}return K2=e,K2}var RU=MU();const Gn=Aa(RU);var X2,Y6;function BU(){if(Y6)return X2;Y6=1;var e=gf(),t=Vl(),r=vf(),n="[object String]";function s(i){return typeof i=="string"||!t(i)&&r(i)&&e(i)==n}return X2=s,X2}var UU=BU();const ag=Aa(UU);var qU=Ck();const Cn=Aa(qU);var $U=f0();const $p=Aa($U);var Y2={exports:{}},pa={};var J6;function zU(){if(J6)return pa;J6=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.server_context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),d=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),p=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function v(g){if(typeof g=="object"&&g!==null){var b=g.$$typeof;switch(b){case e:switch(g=g.type,g){case r:case s:case n:case u:case f:return g;default:switch(g=g&&g.$$typeof,g){case l:case o:case c:case m:case d:case i:return g;default:return b}}case t:return b}}}return pa.ContextConsumer=o,pa.ContextProvider=i,pa.Element=e,pa.ForwardRef=c,pa.Fragment=r,pa.Lazy=m,pa.Memo=d,pa.Portal=t,pa.Profiler=s,pa.StrictMode=n,pa.Suspense=u,pa.SuspenseList=f,pa.isAsyncMode=function(){return!1},pa.isConcurrentMode=function(){return!1},pa.isContextConsumer=function(g){return v(g)===o},pa.isContextProvider=function(g){return v(g)===i},pa.isElement=function(g){return typeof g=="object"&&g!==null&&g.$$typeof===e},pa.isForwardRef=function(g){return v(g)===c},pa.isFragment=function(g){return v(g)===r},pa.isLazy=function(g){return v(g)===m},pa.isMemo=function(g){return v(g)===d},pa.isPortal=function(g){return v(g)===t},pa.isProfiler=function(g){return v(g)===s},pa.isStrictMode=function(g){return v(g)===n},pa.isSuspense=function(g){return v(g)===u},pa.isSuspenseList=function(g){return v(g)===f},pa.isValidElementType=function(g){return typeof g=="string"||typeof g=="function"||g===r||g===s||g===n||g===u||g===f||g===p||typeof g=="object"&&g!==null&&(g.$$typeof===m||g.$$typeof===d||g.$$typeof===i||g.$$typeof===o||g.$$typeof===c||g.$$typeof===y||g.getModuleId!==void 0)},pa.typeOf=v,pa}var Q6;function HU(){return Q6||(Q6=1,Y2.exports=zU()),Y2.exports}var mD=HU(),J2,Z6;function xD(){if(Z6)return J2;Z6=1;var e=gf(),t=vf(),r="[object Number]";function n(s){return typeof s=="number"||t(s)&&e(s)==r}return J2=n,J2}var Q2,eA;function WU(){if(eA)return Q2;eA=1;var e=xD();function t(r){return e(r)&&r!=+r}return Q2=t,Q2}var VU=WU();const zp=Aa(VU);var GU=xD();const KU=Aa(GU);var Lu=function(t){return t===0?0:t>0?1:-1},M0=function(t){return ag(t)&&t.indexOf("%")===t.length-1},hr=function(t){return KU(t)&&!zp(t)},Pi=function(t){return hr(t)||ag(t)},XU=0,sg=function(t){var r=++XU;return"".concat(t||"").concat(r)},eh=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!hr(t)&&!ag(t))return n;var i;if(M0(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return zp(i)&&(i=n),s&&i>r&&(i=r),i},Gf=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},YU=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},eu=function(t,r){return hr(t)&&hr(r)?function(n){return t+n*(r-t)}:function(){return r}};function Jv(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):nu(n,t))===r})}function rp(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Pj(e){"@babel/helpers - typeof";return Pj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pj(e)}var JU=["viewBox","children"],QU=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],tA=["points","pathLength"],Z2={svg:JU,polygon:tA,polyline:tA},Lk=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Qv=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(z.isValidElement(t)&&(n=t.props),!$p(n))return null;var s={};return Object.keys(n).forEach(function(i){Lk.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},ZU=function(t,r,n){return function(s){return t(r,n,s),null}},Zv=function(t,r,n){if(!$p(t)||Pj(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];Lk.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=ZU(o,r,n))}),s},eq=["children"],tq=["children"];function rA(e,t){if(e==null)return{};var r=rq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function rq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ij(e){"@babel/helpers - typeof";return Ij=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ij(e)}var nA={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},af=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},aA=null,ew=null,Fk=function e(t){if(t===aA&&Array.isArray(ew))return ew;var r=[];return z.Children.forEach(t,function(n){Gn(n)||(mD.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),ew=r,aA=t,r};function Bu(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return af(s)}):n=[af(t)],Fk(e).forEach(function(s){var i=nu(s,"type.displayName")||nu(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function dc(e,t){var r=Bu(e,t);return r&&r[0]}var sA=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!hr(n)||n<=0||!hr(s)||s<=0)},nq=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],aq=function(t){return t&&t.type&&ag(t.type)&&nq.indexOf(t.type)>=0},sq=function(t){return t&&Ij(t)==="object"&&"clipDot"in t},iq=function(t,r,n,s){var i,o=(i=Z2?.[s])!==null&&i!==void 0?i:[];return!Cn(t)&&(s&&o.includes(r)||QU.includes(r))||n&&Lk.includes(r)},Bn=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(z.isValidElement(t)&&(s=t.props),!$p(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;iq((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},Dj=function e(t,r){if(t===r)return!0;var n=z.Children.count(t);if(n!==z.Children.count(r))return!1;if(n===0)return!0;if(n===1)return iA(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!iA(i,o))return!1}return!0},iA=function(t,r){if(Gn(t)&&Gn(r))return!0;if(!Gn(t)&&!Gn(r)){var n=t.props||{},s=n.children,i=rA(n,eq),o=r.props||{},l=o.children,c=rA(o,tq);return s&&l?rp(i,c)&&Dj(s,l):!s&&!l?rp(i,c):!1}return!1},oA=function(t,r){var n=[],s={};return Fk(t).forEach(function(i,o){if(aq(i))n.push(i);else if(i){var l=af(i.type),c=r[l]||{},u=c.handler,f=c.once;if(u&&(!f||!s[l])){var d=u(i,l,o);n.push(d),s[l]=!0}}}),n},oq=function(t){var r=t&&t.type;return r&&nA[r]?nA[r]:null},lq=function(t,r){return Fk(r).indexOf(t)},cq=["children","width","height","viewBox","className","style","title","desc"];function Lj(){return Lj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Lj.apply(this,arguments)}function uq(e,t){if(e==null)return{};var r=dq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Fj(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,u=uq(e,cq),f=s||{width:r,height:n,x:0,y:0},d=oa("recharts-surface",i);return at.createElement("svg",Lj({},Bn(u,!0,"svg"),{className:d,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),at.createElement("title",null,l),at.createElement("desc",null,c),t)}var fq=["children","className"];function Mj(){return Mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mj.apply(this,arguments)}function hq(e,t){if(e==null)return{};var r=pq(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pq(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ss=at.forwardRef(function(e,t){var r=e.children,n=e.className,s=hq(e,fq),i=oa("recharts-layer",n);return at.createElement("g",Mj({className:i},Bn(s,!0),{ref:t}),r)}),sf=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]},tw,lA;function mq(){if(lA)return tw;lA=1;function e(t,r,n){var s=-1,i=t.length;r<0&&(r=-r>i?0:i+r),n=n>i?i:n,n<0&&(n+=i),i=r>n?0:n-r>>>0,r>>>=0;for(var o=Array(i);++s<i;)o[s]=t[s+r];return o}return tw=e,tw}var rw,cA;function xq(){if(cA)return rw;cA=1;var e=mq();function t(r,n,s){var i=r.length;return s=s===void 0?i:s,!n&&s>=i?r:e(r,n,s)}return rw=t,rw}var nw,uA;function gD(){if(uA)return nw;uA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+s+i+"]");function c(u){return l.test(u)}return nw=c,nw}var aw,dA;function gq(){if(dA)return aw;dA=1;function e(t){return t.split("")}return aw=e,aw}var sw,fA;function vq(){if(fA)return sw;fA=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",r="\\ufe20-\\ufe2f",n="\\u20d0-\\u20ff",s=t+r+n,i="\\ufe0e\\ufe0f",o="["+e+"]",l="["+s+"]",c="\\ud83c[\\udffb-\\udfff]",u="(?:"+l+"|"+c+")",f="[^"+e+"]",d="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",p="\\u200d",y=u+"?",v="["+i+"]?",g="(?:"+p+"(?:"+[f,d,m].join("|")+")"+v+y+")*",b=v+y+g,N="(?:"+[f+l+"?",l,d,m,o].join("|")+")",j=RegExp(c+"(?="+c+")|"+N+b,"g");function w(S){return S.match(j)||[]}return sw=w,sw}var iw,hA;function yq(){if(hA)return iw;hA=1;var e=gq(),t=gD(),r=vq();function n(s){return t(s)?r(s):e(s)}return iw=n,iw}var ow,pA;function bq(){if(pA)return ow;pA=1;var e=xq(),t=gD(),r=yq(),n=fD();function s(i){return function(o){o=n(o);var l=t(o)?r(o):void 0,c=l?l[0]:o.charAt(0),u=l?e(l,1).join(""):o.slice(1);return c[i]()+u}}return ow=s,ow}var lw,mA;function wq(){if(mA)return lw;mA=1;var e=bq(),t=e("toUpperCase");return lw=t,lw}var Nq=wq();const ky=Aa(Nq);function Va(e){return function(){return e}}const vD=Math.cos,e1=Math.sin,zu=Math.sqrt,t1=Math.PI,Sy=2*t1,Rj=Math.PI,Bj=2*Rj,P0=1e-6,jq=Bj-P0;function yD(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function kq(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return yD;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class Sq{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?yD:kq(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=s-r,f=o-t,d=l-r,m=f*f+d*d;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>P0)if(!(Math.abs(d*c-u*f)>P0)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,y=s-l,v=c*c+u*u,g=p*p+y*y,b=Math.sqrt(v),N=Math.sqrt(m),j=i*Math.tan((Rj-Math.acos((v+m-g)/(2*b*N)))/2),w=j/N,S=j/b;Math.abs(w-1)>P0&&this._append`L${t+w*f},${r+w*d}`,this._append`A${i},${i},0,0,${+(d*p>f*y)},${this._x1=t+S*c},${this._y1=r+S*u}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),u=t+l,f=r+c,d=1^o,m=o?s-i:i-s;this._x1===null?this._append`M${u},${f}`:(Math.abs(this._x1-u)>P0||Math.abs(this._y1-f)>P0)&&this._append`L${u},${f}`,n&&(m<0&&(m=m%Bj+Bj),m>jq?this._append`A${n},${n},0,1,${d},${t-l},${r-c}A${n},${n},0,1,${d},${this._x1=u},${this._y1=f}`:m>P0&&this._append`A${n},${n},0,${+(m>=Rj)},${d},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function Mk(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new Sq(t)}function Rk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function bD(e){this._context=e}bD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function _y(e){return new bD(e)}function wD(e){return e[0]}function ND(e){return e[1]}function jD(e,t){var r=Va(!0),n=null,s=_y,i=null,o=Mk(l);e=typeof e=="function"?e:e===void 0?wD:Va(e),t=typeof t=="function"?t:t===void 0?ND:Va(t);function l(c){var u,f=(c=Rk(c)).length,d,m=!1,p;for(n==null&&(i=s(p=o())),u=0;u<=f;++u)!(u<f&&r(d=c[u],u,c))===m&&((m=!m)?i.lineStart():i.lineEnd()),m&&i.point(+e(d,u,c),+t(d,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Va(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Va(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Va(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function Yg(e,t,r){var n=null,s=Va(!0),i=null,o=_y,l=null,c=Mk(u);e=typeof e=="function"?e:e===void 0?wD:Va(+e),t=typeof t=="function"?t:Va(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?ND:Va(+r);function u(d){var m,p,y,v=(d=Rk(d)).length,g,b=!1,N,j=new Array(v),w=new Array(v);for(i==null&&(l=o(N=c())),m=0;m<=v;++m){if(!(m<v&&s(g=d[m],m,d))===b)if(b=!b)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=p;--y)l.point(j[y],w[y]);l.lineEnd(),l.areaEnd()}b&&(j[m]=+e(g,m,d),w[m]=+t(g,m,d),l.point(n?+n(g,m,d):j[m],r?+r(g,m,d):w[m]))}if(N)return l=null,N+""||null}function f(){return jD().defined(s).curve(o).context(i)}return u.x=function(d){return arguments.length?(e=typeof d=="function"?d:Va(+d),n=null,u):e},u.x0=function(d){return arguments.length?(e=typeof d=="function"?d:Va(+d),u):e},u.x1=function(d){return arguments.length?(n=d==null?null:typeof d=="function"?d:Va(+d),u):n},u.y=function(d){return arguments.length?(t=typeof d=="function"?d:Va(+d),r=null,u):t},u.y0=function(d){return arguments.length?(t=typeof d=="function"?d:Va(+d),u):t},u.y1=function(d){return arguments.length?(r=d==null?null:typeof d=="function"?d:Va(+d),u):r},u.lineX0=u.lineY0=function(){return f().x(e).y(t)},u.lineY1=function(){return f().x(e).y(r)},u.lineX1=function(){return f().x(n).y(t)},u.defined=function(d){return arguments.length?(s=typeof d=="function"?d:Va(!!d),u):s},u.curve=function(d){return arguments.length?(o=d,i!=null&&(l=o(i)),u):o},u.context=function(d){return arguments.length?(d==null?i=l=null:l=o(i=d),u):i},u}class kD{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function _q(e){return new kD(e,!0)}function Aq(e){return new kD(e,!1)}const Bk={draw(e,t){const r=zu(t/t1);e.moveTo(r,0),e.arc(0,0,r,0,Sy)}},Eq={draw(e,t){const r=zu(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},SD=zu(1/3),Cq=SD*2,Tq={draw(e,t){const r=zu(t/Cq),n=r*SD;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Oq={draw(e,t){const r=zu(t),n=-r/2;e.rect(n,n,r,r)}},Pq=.8908130915292852,_D=e1(t1/10)/e1(7*t1/10),Iq=e1(Sy/10)*_D,Dq=-vD(Sy/10)*_D,Lq={draw(e,t){const r=zu(t*Pq),n=Iq*r,s=Dq*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=Sy*i/5,l=vD(o),c=e1(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},cw=zu(3),Fq={draw(e,t){const r=-zu(t/(cw*3));e.moveTo(0,r*2),e.lineTo(-cw*r,-r),e.lineTo(cw*r,-r),e.closePath()}},zc=-.5,Hc=zu(3)/2,Uj=1/zu(12),Mq=(Uj/2+1)*3,Rq={draw(e,t){const r=zu(t/Mq),n=r/2,s=r*Uj,i=n,o=r*Uj+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(zc*n-Hc*s,Hc*n+zc*s),e.lineTo(zc*i-Hc*o,Hc*i+zc*o),e.lineTo(zc*l-Hc*c,Hc*l+zc*c),e.lineTo(zc*n+Hc*s,zc*s-Hc*n),e.lineTo(zc*i+Hc*o,zc*o-Hc*i),e.lineTo(zc*l+Hc*c,zc*c-Hc*l),e.closePath()}};function Bq(e,t){let r=null,n=Mk(s);e=typeof e=="function"?e:Va(e||Bk),t=typeof t=="function"?t:Va(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:Va(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:Va(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function r1(){}function n1(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function AD(e){this._context=e}AD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:n1(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:n1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Uq(e){return new AD(e)}function ED(e){this._context=e}ED.prototype={areaStart:r1,areaEnd:r1,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:n1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qq(e){return new ED(e)}function CD(e){this._context=e}CD.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:n1(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function $q(e){return new CD(e)}function TD(e){this._context=e}TD.prototype={areaStart:r1,areaEnd:r1,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function zq(e){return new TD(e)}function xA(e){return e<0?-1:1}function gA(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(xA(i)+xA(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function vA(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function uw(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function a1(e){this._context=e}a1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:uw(this,this._t0,vA(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,uw(this,vA(this,r=gA(this,e,t)),r);break;default:uw(this,this._t0,r=gA(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function OD(e){this._context=new PD(e)}(OD.prototype=Object.create(a1.prototype)).point=function(e,t){a1.prototype.point.call(this,t,e)};function PD(e){this._context=e}PD.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function Hq(e){return new a1(e)}function Wq(e){return new OD(e)}function ID(e){this._context=e}ID.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=yA(e),s=yA(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yA(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function Vq(e){return new ID(e)}function Ay(e,t){this._context=e,this._t=t}Ay.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Gq(e){return new Ay(e,.5)}function Kq(e){return new Ay(e,0)}function Xq(e){return new Ay(e,1)}function pp(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function qj(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Yq(e,t){return e[t]}function Jq(e){const t=[];return t.key=e,t}function Qq(){var e=Va([]),t=qj,r=pp,n=Yq;function s(i){var o=Array.from(e.apply(this,arguments),Jq),l,c=o.length,u=-1,f;for(const d of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(d,o[l].key,u,i)]).data=d;for(l=0,f=Rk(t(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Va(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:Va(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?qj:typeof i=="function"?i:Va(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??pp,s):r},s}function Zq(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}pp(e,t)}}function e$(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}pp(e,t)}}function t$(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var f=e[t[l]],d=f[n][1]||0,m=f[n-1][1]||0,p=(d-m)/2,y=0;y<l;++y){var v=e[t[y]],g=v[n][1]||0,b=v[n-1][1]||0;p+=g-b}c+=d,u+=p*d}s[n-1][1]+=s[n-1][0]=r,c&&(r-=u/c)}s[n-1][1]+=s[n-1][0]=r,pp(e,t)}}function sx(e){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(e)}var r$=["type","size","sizeType"];function $j(){return $j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$j.apply(this,arguments)}function bA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function wA(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bA(Object(r),!0).forEach(function(n){n$(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n$(e,t,r){return t=a$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a$(e){var t=s$(e,"string");return sx(t)=="symbol"?t:t+""}function s$(e,t){if(sx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function i$(e,t){if(e==null)return{};var r=o$(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function o$(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var DD={symbolCircle:Bk,symbolCross:Eq,symbolDiamond:Tq,symbolSquare:Oq,symbolStar:Lq,symbolTriangle:Fq,symbolWye:Rq},l$=Math.PI/180,c$=function(t){var r="symbol".concat(ky(t));return DD[r]||Bk},u$=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*l$;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},d$=function(t,r){DD["symbol".concat(ky(t))]=r},Uk=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=i$(t,r$),u=wA(wA({},c),{},{type:n,size:i,sizeType:l}),f=function(){var g=c$(n),b=Bq().type(g).size(u$(i,l,n));return b()},d=u.className,m=u.cx,p=u.cy,y=Bn(u,!0);return m===+m&&p===+p&&i===+i?at.createElement("path",$j({},y,{className:oa("recharts-symbols",d),transform:"translate(".concat(m,", ").concat(p,")"),d:f()})):null};Uk.registerSymbol=d$;function mp(e){"@babel/helpers - typeof";return mp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mp(e)}function zj(){return zj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zj.apply(this,arguments)}function NA(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function f$(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(r),!0).forEach(function(n){ix(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NA(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h$(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p$(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,FD(n.key),n)}}function m$(e,t,r){return t&&p$(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function x$(e,t,r){return t=s1(t),g$(e,LD()?Reflect.construct(t,r||[],s1(e).constructor):t.apply(e,r))}function g$(e,t){if(t&&(mp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return v$(e)}function v$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(LD=function(){return!!e})()}function s1(e){return s1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},s1(e)}function y$(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hj(e,t)}function Hj(e,t){return Hj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Hj(e,t)}function ix(e,t,r){return t=FD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FD(e){var t=b$(e,"string");return mp(t)=="symbol"?t:t+""}function b$(e,t){if(mp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Wc=32,qk=(function(e){function t(){return h$(this,t),x$(this,t,arguments)}return y$(t,e),m$(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=Wc/2,o=Wc/6,l=Wc/3,c=n.inactive?s:n.color;if(n.type==="plainline")return at.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Wc,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return at.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Wc,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return at.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Wc/8,"h").concat(Wc,"v").concat(Wc*3/4,"h").concat(-Wc,"z"),className:"recharts-legend-icon"});if(at.isValidElement(n.legendIcon)){var u=f$({},n);return delete u.legendIcon,at.cloneElement(n.legendIcon,u)}return at.createElement(Uk,{fill:c,cx:i,cy:i,size:Wc,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,u=s.inactiveColor,f={x:0,y:0,width:Wc,height:Wc},d={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(p,y){var v=p.formatter||c,g=oa(ix(ix({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",p.inactive));if(p.type==="none")return null;var b=Cn(p.value)?null:p.value;sf(!Cn(p.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var N=p.inactive?u:p.color;return at.createElement("li",zj({className:g,style:d,key:"legend-item-".concat(y)},Zv(n.props,p,y)),at.createElement(Fj,{width:o,height:o,viewBox:f,style:m},n.renderIcon(p)),at.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},v?v(b,p,y):b))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return at.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])})(z.PureComponent);ix(qk,"displayName","Legend");ix(qk,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var dw,jA;function w$(){if(jA)return dw;jA=1;var e=wy();function t(){this.__data__=new e,this.size=0}return dw=t,dw}var fw,kA;function N$(){if(kA)return fw;kA=1;function e(t){var r=this.__data__,n=r.delete(t);return this.size=r.size,n}return fw=e,fw}var hw,SA;function j$(){if(SA)return hw;SA=1;function e(t){return this.__data__.get(t)}return hw=e,hw}var pw,_A;function k$(){if(_A)return pw;_A=1;function e(t){return this.__data__.has(t)}return pw=e,pw}var mw,AA;function S$(){if(AA)return mw;AA=1;var e=wy(),t=Ok(),r=Pk(),n=200;function s(i,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<n-1)return c.push([i,o]),this.size=++l.size,this;l=this.__data__=new r(c)}return l.set(i,o),this.size=l.size,this}return mw=s,mw}var xw,EA;function MD(){if(EA)return xw;EA=1;var e=wy(),t=w$(),r=N$(),n=j$(),s=k$(),i=S$();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=r,o.prototype.get=n,o.prototype.has=s,o.prototype.set=i,xw=o,xw}var gw,CA;function _$(){if(CA)return gw;CA=1;var e="__lodash_hash_undefined__";function t(r){return this.__data__.set(r,e),this}return gw=t,gw}var vw,TA;function A$(){if(TA)return vw;TA=1;function e(t){return this.__data__.has(t)}return vw=e,vw}var yw,OA;function RD(){if(OA)return yw;OA=1;var e=Pk(),t=_$(),r=A$();function n(s){var i=-1,o=s==null?0:s.length;for(this.__data__=new e;++i<o;)this.add(s[i])}return n.prototype.add=n.prototype.push=t,n.prototype.has=r,yw=n,yw}var bw,PA;function BD(){if(PA)return bw;PA=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(r(t[n],n,t))return!0;return!1}return bw=e,bw}var ww,IA;function UD(){if(IA)return ww;IA=1;function e(t,r){return t.has(r)}return ww=e,ww}var Nw,DA;function qD(){if(DA)return Nw;DA=1;var e=RD(),t=BD(),r=UD(),n=1,s=2;function i(o,l,c,u,f,d){var m=c&n,p=o.length,y=l.length;if(p!=y&&!(m&&y>p))return!1;var v=d.get(o),g=d.get(l);if(v&&g)return v==l&&g==o;var b=-1,N=!0,j=c&s?new e:void 0;for(d.set(o,l),d.set(l,o);++b<p;){var w=o[b],S=l[b];if(u)var P=m?u(S,w,b,l,o,d):u(w,S,b,o,l,d);if(P!==void 0){if(P)continue;N=!1;break}if(j){if(!t(l,function(A,T){if(!r(j,T)&&(w===A||f(w,A,c,u,d)))return j.push(T)})){N=!1;break}}else if(!(w===S||f(w,S,c,u,d))){N=!1;break}}return d.delete(o),d.delete(l),N}return Nw=i,Nw}var jw,LA;function E$(){if(LA)return jw;LA=1;var e=Ad(),t=e.Uint8Array;return jw=t,jw}var kw,FA;function C$(){if(FA)return kw;FA=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s,i){n[++r]=[i,s]}),n}return kw=e,kw}var Sw,MA;function $k(){if(MA)return Sw;MA=1;function e(t){var r=-1,n=Array(t.size);return t.forEach(function(s){n[++r]=s}),n}return Sw=e,Sw}var _w,RA;function T$(){if(RA)return _w;RA=1;var e=ng(),t=E$(),r=Tk(),n=qD(),s=C$(),i=$k(),o=1,l=2,c="[object Boolean]",u="[object Date]",f="[object Error]",d="[object Map]",m="[object Number]",p="[object RegExp]",y="[object Set]",v="[object String]",g="[object Symbol]",b="[object ArrayBuffer]",N="[object DataView]",j=e?e.prototype:void 0,w=j?j.valueOf:void 0;function S(P,A,T,I,B,E,C){switch(T){case N:if(P.byteLength!=A.byteLength||P.byteOffset!=A.byteOffset)return!1;P=P.buffer,A=A.buffer;case b:return!(P.byteLength!=A.byteLength||!E(new t(P),new t(A)));case c:case u:case m:return r(+P,+A);case f:return P.name==A.name&&P.message==A.message;case p:case v:return P==A+"";case d:var M=s;case y:var q=I&o;if(M||(M=i),P.size!=A.size&&!q)return!1;var G=C.get(P);if(G)return G==A;I|=l,C.set(P,A);var Z=n(M(P),M(A),I,B,E,C);return C.delete(P),Z;case g:if(w)return w.call(P)==w.call(A)}return!1}return _w=S,_w}var Aw,BA;function $D(){if(BA)return Aw;BA=1;function e(t,r){for(var n=-1,s=r.length,i=t.length;++n<s;)t[i+n]=r[n];return t}return Aw=e,Aw}var Ew,UA;function O$(){if(UA)return Ew;UA=1;var e=$D(),t=Vl();function r(n,s,i){var o=s(n);return t(n)?o:e(o,i(n))}return Ew=r,Ew}var Cw,qA;function P$(){if(qA)return Cw;qA=1;function e(t,r){for(var n=-1,s=t==null?0:t.length,i=0,o=[];++n<s;){var l=t[n];r(l,n,t)&&(o[i++]=l)}return o}return Cw=e,Cw}var Tw,$A;function I$(){if($A)return Tw;$A=1;function e(){return[]}return Tw=e,Tw}var Ow,zA;function D$(){if(zA)return Ow;zA=1;var e=P$(),t=I$(),r=Object.prototype,n=r.propertyIsEnumerable,s=Object.getOwnPropertySymbols,i=s?function(o){return o==null?[]:(o=Object(o),e(s(o),function(l){return n.call(o,l)}))}:t;return Ow=i,Ow}var Pw,HA;function L$(){if(HA)return Pw;HA=1;function e(t,r){for(var n=-1,s=Array(t);++n<t;)s[n]=r(n);return s}return Pw=e,Pw}var Iw,WA;function F$(){if(WA)return Iw;WA=1;var e=gf(),t=vf(),r="[object Arguments]";function n(s){return t(s)&&e(s)==r}return Iw=n,Iw}var Dw,VA;function zk(){if(VA)return Dw;VA=1;var e=F$(),t=vf(),r=Object.prototype,n=r.hasOwnProperty,s=r.propertyIsEnumerable,i=e((function(){return arguments})())?e:function(o){return t(o)&&n.call(o,"callee")&&!s.call(o,"callee")};return Dw=i,Dw}var Om={exports:{}},Lw,GA;function M$(){if(GA)return Lw;GA=1;function e(){return!1}return Lw=e,Lw}Om.exports;var KA;function zD(){return KA||(KA=1,(function(e,t){var r=Ad(),n=M$(),s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Om,Om.exports)),Om.exports}var Fw,XA;function Hk(){if(XA)return Fw;XA=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function r(n,s){var i=typeof n;return s=s??e,!!s&&(i=="number"||i!="symbol"&&t.test(n))&&n>-1&&n%1==0&&n<s}return Fw=r,Fw}var Mw,YA;function Wk(){if(YA)return Mw;YA=1;var e=9007199254740991;function t(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=e}return Mw=t,Mw}var Rw,JA;function R$(){if(JA)return Rw;JA=1;var e=gf(),t=Wk(),r=vf(),n="[object Arguments]",s="[object Array]",i="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",u="[object Map]",f="[object Number]",d="[object Object]",m="[object RegExp]",p="[object Set]",y="[object String]",v="[object WeakMap]",g="[object ArrayBuffer]",b="[object DataView]",N="[object Float32Array]",j="[object Float64Array]",w="[object Int8Array]",S="[object Int16Array]",P="[object Int32Array]",A="[object Uint8Array]",T="[object Uint8ClampedArray]",I="[object Uint16Array]",B="[object Uint32Array]",E={};E[N]=E[j]=E[w]=E[S]=E[P]=E[A]=E[T]=E[I]=E[B]=!0,E[n]=E[s]=E[g]=E[i]=E[b]=E[o]=E[l]=E[c]=E[u]=E[f]=E[d]=E[m]=E[p]=E[y]=E[v]=!1;function C(M){return r(M)&&t(M.length)&&!!E[e(M)]}return Rw=C,Rw}var Bw,QA;function HD(){if(QA)return Bw;QA=1;function e(t){return function(r){return t(r)}}return Bw=e,Bw}var Pm={exports:{}};Pm.exports;var ZA;function B$(){return ZA||(ZA=1,(function(e,t){var r=cD(),n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=(function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Pm,Pm.exports)),Pm.exports}var Uw,eE;function WD(){if(eE)return Uw;eE=1;var e=R$(),t=HD(),r=B$(),n=r&&r.isTypedArray,s=n?t(n):e;return Uw=s,Uw}var qw,tE;function U$(){if(tE)return qw;tE=1;var e=L$(),t=zk(),r=Vl(),n=zD(),s=Hk(),i=WD(),o=Object.prototype,l=o.hasOwnProperty;function c(u,f){var d=r(u),m=!d&&t(u),p=!d&&!m&&n(u),y=!d&&!m&&!p&&i(u),v=d||m||p||y,g=v?e(u.length,String):[],b=g.length;for(var N in u)(f||l.call(u,N))&&!(v&&(N=="length"||p&&(N=="offset"||N=="parent")||y&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||s(N,b)))&&g.push(N);return g}return qw=c,qw}var $w,rE;function q$(){if(rE)return $w;rE=1;var e=Object.prototype;function t(r){var n=r&&r.constructor,s=typeof n=="function"&&n.prototype||e;return r===s}return $w=t,$w}var zw,nE;function VD(){if(nE)return zw;nE=1;function e(t,r){return function(n){return t(r(n))}}return zw=e,zw}var Hw,aE;function $$(){if(aE)return Hw;aE=1;var e=VD(),t=e(Object.keys,Object);return Hw=t,Hw}var Ww,sE;function z$(){if(sE)return Ww;sE=1;var e=q$(),t=$$(),r=Object.prototype,n=r.hasOwnProperty;function s(i){if(!e(i))return t(i);var o=[];for(var l in Object(i))n.call(i,l)&&l!="constructor"&&o.push(l);return o}return Ww=s,Ww}var Vw,iE;function ig(){if(iE)return Vw;iE=1;var e=Ck(),t=Wk();function r(n){return n!=null&&t(n.length)&&!e(n)}return Vw=r,Vw}var Gw,oE;function Ey(){if(oE)return Gw;oE=1;var e=U$(),t=z$(),r=ig();function n(s){return r(s)?e(s):t(s)}return Gw=n,Gw}var Kw,lE;function H$(){if(lE)return Kw;lE=1;var e=O$(),t=D$(),r=Ey();function n(s){return e(s,r,t)}return Kw=n,Kw}var Xw,cE;function W$(){if(cE)return Xw;cE=1;var e=H$(),t=1,r=Object.prototype,n=r.hasOwnProperty;function s(i,o,l,c,u,f){var d=l&t,m=e(i),p=m.length,y=e(o),v=y.length;if(p!=v&&!d)return!1;for(var g=p;g--;){var b=m[g];if(!(d?b in o:n.call(o,b)))return!1}var N=f.get(i),j=f.get(o);if(N&&j)return N==o&&j==i;var w=!0;f.set(i,o),f.set(o,i);for(var S=d;++g<p;){b=m[g];var P=i[b],A=o[b];if(c)var T=d?c(A,P,b,o,i,f):c(P,A,b,i,o,f);if(!(T===void 0?P===A||u(P,A,l,c,f):T)){w=!1;break}S||(S=b=="constructor")}if(w&&!S){var I=i.constructor,B=o.constructor;I!=B&&"constructor"in i&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof B=="function"&&B instanceof B)&&(w=!1)}return f.delete(i),f.delete(o),w}return Xw=s,Xw}var Yw,uE;function V$(){if(uE)return Yw;uE=1;var e=fh(),t=Ad(),r=e(t,"DataView");return Yw=r,Yw}var Jw,dE;function G$(){if(dE)return Jw;dE=1;var e=fh(),t=Ad(),r=e(t,"Promise");return Jw=r,Jw}var Qw,fE;function GD(){if(fE)return Qw;fE=1;var e=fh(),t=Ad(),r=e(t,"Set");return Qw=r,Qw}var Zw,hE;function K$(){if(hE)return Zw;hE=1;var e=fh(),t=Ad(),r=e(t,"WeakMap");return Zw=r,Zw}var e5,pE;function X$(){if(pE)return e5;pE=1;var e=V$(),t=Ok(),r=G$(),n=GD(),s=K$(),i=gf(),o=uD(),l="[object Map]",c="[object Object]",u="[object Promise]",f="[object Set]",d="[object WeakMap]",m="[object DataView]",p=o(e),y=o(t),v=o(r),g=o(n),b=o(s),N=i;return(e&&N(new e(new ArrayBuffer(1)))!=m||t&&N(new t)!=l||r&&N(r.resolve())!=u||n&&N(new n)!=f||s&&N(new s)!=d)&&(N=function(j){var w=i(j),S=w==c?j.constructor:void 0,P=S?o(S):"";if(P)switch(P){case p:return m;case y:return l;case v:return u;case g:return f;case b:return d}return w}),e5=N,e5}var t5,mE;function Y$(){if(mE)return t5;mE=1;var e=MD(),t=qD(),r=T$(),n=W$(),s=X$(),i=Vl(),o=zD(),l=WD(),c=1,u="[object Arguments]",f="[object Array]",d="[object Object]",m=Object.prototype,p=m.hasOwnProperty;function y(v,g,b,N,j,w){var S=i(v),P=i(g),A=S?f:s(v),T=P?f:s(g);A=A==u?d:A,T=T==u?d:T;var I=A==d,B=T==d,E=A==T;if(E&&o(v)){if(!o(g))return!1;S=!0,I=!1}if(E&&!I)return w||(w=new e),S||l(v)?t(v,g,b,N,j,w):r(v,g,A,b,N,j,w);if(!(b&c)){var C=I&&p.call(v,"__wrapped__"),M=B&&p.call(g,"__wrapped__");if(C||M){var q=C?v.value():v,G=M?g.value():g;return w||(w=new e),j(q,G,b,N,w)}}return E?(w||(w=new e),n(v,g,b,N,j,w)):!1}return t5=y,t5}var r5,xE;function Vk(){if(xE)return r5;xE=1;var e=Y$(),t=vf();function r(n,s,i,o,l){return n===s?!0:n==null||s==null||!t(n)&&!t(s)?n!==n&&s!==s:e(n,s,i,o,r,l)}return r5=r,r5}var n5,gE;function J$(){if(gE)return n5;gE=1;var e=MD(),t=Vk(),r=1,n=2;function s(i,o,l,c){var u=l.length,f=u,d=!c;if(i==null)return!f;for(i=Object(i);u--;){var m=l[u];if(d&&m[2]?m[1]!==i[m[0]]:!(m[0]in i))return!1}for(;++u<f;){m=l[u];var p=m[0],y=i[p],v=m[1];if(d&&m[2]){if(y===void 0&&!(p in i))return!1}else{var g=new e;if(c)var b=c(y,v,p,i,o,g);if(!(b===void 0?t(v,y,r|n,c,g):b))return!1}}return!0}return n5=s,n5}var a5,vE;function KD(){if(vE)return a5;vE=1;var e=f0();function t(r){return r===r&&!e(r)}return a5=t,a5}var s5,yE;function Q$(){if(yE)return s5;yE=1;var e=KD(),t=Ey();function r(n){for(var s=t(n),i=s.length;i--;){var o=s[i],l=n[o];s[i]=[o,l,e(l)]}return s}return s5=r,s5}var i5,bE;function XD(){if(bE)return i5;bE=1;function e(t,r){return function(n){return n==null?!1:n[t]===r&&(r!==void 0||t in Object(n))}}return i5=e,i5}var o5,wE;function Z$(){if(wE)return o5;wE=1;var e=J$(),t=Q$(),r=XD();function n(s){var i=t(s);return i.length==1&&i[0][2]?r(i[0][0],i[0][1]):function(o){return o===s||e(o,s,i)}}return o5=n,o5}var l5,NE;function ez(){if(NE)return l5;NE=1;function e(t,r){return t!=null&&r in Object(t)}return l5=e,l5}var c5,jE;function tz(){if(jE)return c5;jE=1;var e=hD(),t=zk(),r=Vl(),n=Hk(),s=Wk(),i=jy();function o(l,c,u){c=e(c,l);for(var f=-1,d=c.length,m=!1;++f<d;){var p=i(c[f]);if(!(m=l!=null&&u(l,p)))break;l=l[p]}return m||++f!=d?m:(d=l==null?0:l.length,!!d&&s(d)&&n(p,d)&&(r(l)||t(l)))}return c5=o,c5}var u5,kE;function rz(){if(kE)return u5;kE=1;var e=ez(),t=tz();function r(n,s){return n!=null&&t(n,s,e)}return u5=r,u5}var d5,SE;function nz(){if(SE)return d5;SE=1;var e=Vk(),t=pD(),r=rz(),n=Ek(),s=KD(),i=XD(),o=jy(),l=1,c=2;function u(f,d){return n(f)&&s(d)?i(o(f),d):function(m){var p=t(m,f);return p===void 0&&p===d?r(m,f):e(d,p,l|c)}}return d5=u,d5}var f5,_E;function Hp(){if(_E)return f5;_E=1;function e(t){return t}return f5=e,f5}var h5,AE;function az(){if(AE)return h5;AE=1;function e(t){return function(r){return r?.[t]}}return h5=e,h5}var p5,EE;function sz(){if(EE)return p5;EE=1;var e=Dk();function t(r){return function(n){return e(n,r)}}return p5=t,p5}var m5,CE;function iz(){if(CE)return m5;CE=1;var e=az(),t=sz(),r=Ek(),n=jy();function s(i){return r(i)?e(n(i)):t(i)}return m5=s,m5}var x5,TE;function h0(){if(TE)return x5;TE=1;var e=Z$(),t=nz(),r=Hp(),n=Vl(),s=iz();function i(o){return typeof o=="function"?o:o==null?r:typeof o=="object"?n(o)?t(o[0],o[1]):e(o):s(o)}return x5=i,x5}var g5,OE;function YD(){if(OE)return g5;OE=1;function e(t,r,n,s){for(var i=t.length,o=n+(s?1:-1);s?o--:++o<i;)if(r(t[o],o,t))return o;return-1}return g5=e,g5}var v5,PE;function oz(){if(PE)return v5;PE=1;function e(t){return t!==t}return v5=e,v5}var y5,IE;function lz(){if(IE)return y5;IE=1;function e(t,r,n){for(var s=n-1,i=t.length;++s<i;)if(t[s]===r)return s;return-1}return y5=e,y5}var b5,DE;function cz(){if(DE)return b5;DE=1;var e=YD(),t=oz(),r=lz();function n(s,i,o){return i===i?r(s,i,o):e(s,t,o)}return b5=n,b5}var w5,LE;function uz(){if(LE)return w5;LE=1;var e=cz();function t(r,n){var s=r==null?0:r.length;return!!s&&e(r,n,0)>-1}return w5=t,w5}var N5,FE;function dz(){if(FE)return N5;FE=1;function e(t,r,n){for(var s=-1,i=t==null?0:t.length;++s<i;)if(n(r,t[s]))return!0;return!1}return N5=e,N5}var j5,ME;function fz(){if(ME)return j5;ME=1;function e(){}return j5=e,j5}var k5,RE;function hz(){if(RE)return k5;RE=1;var e=GD(),t=fz(),r=$k(),n=1/0,s=e&&1/r(new e([,-0]))[1]==n?function(i){return new e(i)}:t;return k5=s,k5}var S5,BE;function pz(){if(BE)return S5;BE=1;var e=RD(),t=uz(),r=dz(),n=UD(),s=hz(),i=$k(),o=200;function l(c,u,f){var d=-1,m=t,p=c.length,y=!0,v=[],g=v;if(f)y=!1,m=r;else if(p>=o){var b=u?null:s(c);if(b)return i(b);y=!1,m=n,g=new e}else g=u?[]:v;e:for(;++d<p;){var N=c[d],j=u?u(N):N;if(N=f||N!==0?N:0,y&&j===j){for(var w=g.length;w--;)if(g[w]===j)continue e;u&&g.push(j),v.push(N)}else m(g,j,f)||(g!==v&&g.push(j),v.push(N))}return v}return S5=l,S5}var _5,UE;function mz(){if(UE)return _5;UE=1;var e=h0(),t=pz();function r(n,s){return n&&n.length?t(n,e(s,2)):[]}return _5=r,_5}var xz=mz();const qE=Aa(xz);function JD(e,t,r){return t===!0?qE(e,r):Cn(t)?qE(e,t):e}function xp(e){"@babel/helpers - typeof";return xp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xp(e)}var gz=["ref"];function $E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Gd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$E(Object(r),!0).forEach(function(n){Cy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$E(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zE(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZD(n.key),n)}}function yz(e,t,r){return t&&zE(e.prototype,t),r&&zE(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function bz(e,t,r){return t=i1(t),wz(e,QD()?Reflect.construct(t,r||[],i1(e).constructor):t.apply(e,r))}function wz(e,t){if(t&&(xp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nz(e)}function Nz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QD(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QD=function(){return!!e})()}function i1(e){return i1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},i1(e)}function jz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wj(e,t)}function Wj(e,t){return Wj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Wj(e,t)}function Cy(e,t,r){return t=ZD(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZD(e){var t=kz(e,"string");return xp(t)=="symbol"?t:t+""}function kz(e,t){if(xp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Sz(e,t){if(e==null)return{};var r=_z(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function _z(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Az(e){return e.value}function Ez(e,t){if(at.isValidElement(e))return at.cloneElement(e,t);if(typeof e=="function")return at.createElement(e,t);t.ref;var r=Sz(t,gz);return at.createElement(qk,r)}var HE=1,np=(function(e){function t(){var r;vz(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=bz(this,t,[].concat(s)),Cy(r,"lastBoundingBox",{width:-1,height:-1}),r}return jz(t,e),yz(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>HE||Math.abs(s.height-this.lastBoundingBox.height)>HE)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Gd({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,u=s.chartWidth,f=s.chartHeight,d,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var p=this.getBBoxSnapshot();d={left:((u||0)-p.width)/2}}else d=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();m={top:((f||0)-y.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Gd(Gd({},d),m)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,u=s.payloadUniqBy,f=s.payload,d=Gd(Gd({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return at.createElement("div",{className:"recharts-legend-wrapper",style:d,ref:function(p){n.wrapperNode=p}},Ez(i,Gd(Gd({},this.props),{},{payload:JD(f,u,Az)})))}}],[{key:"getWithHeight",value:function(n,s){var i=Gd(Gd({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&hr(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])})(z.PureComponent);Cy(np,"displayName","Legend");Cy(np,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var A5,WE;function Cz(){if(WE)return A5;WE=1;var e=ng(),t=zk(),r=Vl(),n=e?e.isConcatSpreadable:void 0;function s(i){return r(i)||t(i)||!!(n&&i&&i[n])}return A5=s,A5}var E5,VE;function eL(){if(VE)return E5;VE=1;var e=$D(),t=Cz();function r(n,s,i,o,l){var c=-1,u=n.length;for(i||(i=t),l||(l=[]);++c<u;){var f=n[c];s>0&&i(f)?s>1?r(f,s-1,i,o,l):e(l,f):o||(l[l.length]=f)}return l}return E5=r,E5}var C5,GE;function Tz(){if(GE)return C5;GE=1;function e(t){return function(r,n,s){for(var i=-1,o=Object(r),l=s(r),c=l.length;c--;){var u=l[t?c:++i];if(n(o[u],u,o)===!1)break}return r}}return C5=e,C5}var T5,KE;function Oz(){if(KE)return T5;KE=1;var e=Tz(),t=e();return T5=t,T5}var O5,XE;function tL(){if(XE)return O5;XE=1;var e=Oz(),t=Ey();function r(n,s){return n&&e(n,s,t)}return O5=r,O5}var P5,YE;function Pz(){if(YE)return P5;YE=1;var e=ig();function t(r,n){return function(s,i){if(s==null)return s;if(!e(s))return r(s,i);for(var o=s.length,l=n?o:-1,c=Object(s);(n?l--:++l<o)&&i(c[l],l,c)!==!1;);return s}}return P5=t,P5}var I5,JE;function Gk(){if(JE)return I5;JE=1;var e=tL(),t=Pz(),r=t(e);return I5=r,I5}var D5,QE;function rL(){if(QE)return D5;QE=1;var e=Gk(),t=ig();function r(n,s){var i=-1,o=t(n)?Array(n.length):[];return e(n,function(l,c,u){o[++i]=s(l,c,u)}),o}return D5=r,D5}var L5,ZE;function Iz(){if(ZE)return L5;ZE=1;function e(t,r){var n=t.length;for(t.sort(r);n--;)t[n]=t[n].value;return t}return L5=e,L5}var F5,eC;function Dz(){if(eC)return F5;eC=1;var e=qp();function t(r,n){if(r!==n){var s=r!==void 0,i=r===null,o=r===r,l=e(r),c=n!==void 0,u=n===null,f=n===n,d=e(n);if(!u&&!d&&!l&&r>n||l&&c&&f&&!u&&!d||i&&c&&f||!s&&f||!o)return 1;if(!i&&!l&&!d&&r<n||d&&s&&o&&!i&&!l||u&&s&&o||!c&&o||!f)return-1}return 0}return F5=t,F5}var M5,tC;function Lz(){if(tC)return M5;tC=1;var e=Dz();function t(r,n,s){for(var i=-1,o=r.criteria,l=n.criteria,c=o.length,u=s.length;++i<c;){var f=e(o[i],l[i]);if(f){if(i>=u)return f;var d=s[i];return f*(d=="desc"?-1:1)}}return r.index-n.index}return M5=t,M5}var R5,rC;function Fz(){if(rC)return R5;rC=1;var e=Ik(),t=Dk(),r=h0(),n=rL(),s=Iz(),i=HD(),o=Lz(),l=Hp(),c=Vl();function u(f,d,m){d.length?d=e(d,function(v){return c(v)?function(g){return t(g,v.length===1?v[0]:v)}:v}):d=[l];var p=-1;d=e(d,i(r));var y=n(f,function(v,g,b){var N=e(d,function(j){return j(v)});return{criteria:N,index:++p,value:v}});return s(y,function(v,g){return o(v,g,m)})}return R5=u,R5}var B5,nC;function Mz(){if(nC)return B5;nC=1;function e(t,r,n){switch(n.length){case 0:return t.call(r);case 1:return t.call(r,n[0]);case 2:return t.call(r,n[0],n[1]);case 3:return t.call(r,n[0],n[1],n[2])}return t.apply(r,n)}return B5=e,B5}var U5,aC;function Rz(){if(aC)return U5;aC=1;var e=Mz(),t=Math.max;function r(n,s,i){return s=t(s===void 0?n.length-1:s,0),function(){for(var o=arguments,l=-1,c=t(o.length-s,0),u=Array(c);++l<c;)u[l]=o[s+l];l=-1;for(var f=Array(s+1);++l<s;)f[l]=o[l];return f[s]=i(u),e(n,this,f)}}return U5=r,U5}var q5,sC;function Bz(){if(sC)return q5;sC=1;function e(t){return function(){return t}}return q5=e,q5}var $5,iC;function nL(){if(iC)return $5;iC=1;var e=fh(),t=(function(){try{var r=e(Object,"defineProperty");return r({},"",{}),r}catch{}})();return $5=t,$5}var z5,oC;function Uz(){if(oC)return z5;oC=1;var e=Bz(),t=nL(),r=Hp(),n=t?function(s,i){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(i),writable:!0})}:r;return z5=n,z5}var H5,lC;function qz(){if(lC)return H5;lC=1;var e=800,t=16,r=Date.now;function n(s){var i=0,o=0;return function(){var l=r(),c=t-(l-o);if(o=l,c>0){if(++i>=e)return arguments[0]}else i=0;return s.apply(void 0,arguments)}}return H5=n,H5}var W5,cC;function $z(){if(cC)return W5;cC=1;var e=Uz(),t=qz(),r=t(e);return W5=r,W5}var V5,uC;function zz(){if(uC)return V5;uC=1;var e=Hp(),t=Rz(),r=$z();function n(s,i){return r(t(s,i,e),s+"")}return V5=n,V5}var G5,dC;function Ty(){if(dC)return G5;dC=1;var e=Tk(),t=ig(),r=Hk(),n=f0();function s(i,o,l){if(!n(l))return!1;var c=typeof o;return(c=="number"?t(l)&&r(o,l.length):c=="string"&&o in l)?e(l[o],i):!1}return G5=s,G5}var K5,fC;function Hz(){if(fC)return K5;fC=1;var e=eL(),t=Fz(),r=zz(),n=Ty(),s=r(function(i,o){if(i==null)return[];var l=o.length;return l>1&&n(i,o[0],o[1])?o=[]:l>2&&n(o[0],o[1],o[2])&&(o=[o[0]]),t(i,e(o,1),[])});return K5=s,K5}var Wz=Hz();const Kk=Aa(Wz);function ox(e){"@babel/helpers - typeof";return ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ox(e)}function Vj(){return Vj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vj.apply(this,arguments)}function Vz(e,t){return Yz(e)||Xz(e,t)||Kz(e,t)||Gz()}function Gz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kz(e,t){if(e){if(typeof e=="string")return hC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hC(e,t)}}function hC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Xz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Yz(e){if(Array.isArray(e))return e}function pC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function X5(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pC(Object(r),!0).forEach(function(n){Jz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Jz(e,t,r){return t=Qz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qz(e){var t=Zz(e,"string");return ox(t)=="symbol"?t:t+""}function Zz(e,t){if(ox(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ox(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eH(e){return Array.isArray(e)&&Pi(e[0])&&Pi(e[1])?e.join(" ~ "):e}var tH=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,f=t.payload,d=t.formatter,m=t.itemSorter,p=t.wrapperClassName,y=t.labelClassName,v=t.label,g=t.labelFormatter,b=t.accessibilityLayer,N=b===void 0?!1:b,j=function(){if(f&&f.length){var C={padding:0,margin:0},M=(m?Kk(f,m):f).map(function(q,G){if(q.type==="none")return null;var Z=X5({display:"block",paddingTop:4,paddingBottom:4,color:q.color||"#000"},l),te=q.formatter||d||eH,ne=q.value,J=q.name,ee=ne,H=J;if(te&&ee!=null&&H!=null){var O=te(ne,J,q,G,f);if(Array.isArray(O)){var R=Vz(O,2);ee=R[0],H=R[1]}else ee=O}return at.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(G),style:Z},Pi(H)?at.createElement("span",{className:"recharts-tooltip-item-name"},H):null,Pi(H)?at.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,at.createElement("span",{className:"recharts-tooltip-item-value"},ee),at.createElement("span",{className:"recharts-tooltip-item-unit"},q.unit||""))});return at.createElement("ul",{className:"recharts-tooltip-item-list",style:C},M)}return null},w=X5({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),S=X5({margin:0},u),P=!Gn(v),A=P?v:"",T=oa("recharts-default-tooltip",p),I=oa("recharts-tooltip-label",y);P&&g&&f!==void 0&&f!==null&&(A=g(v,f));var B=N?{role:"status","aria-live":"assertive"}:{};return at.createElement("div",Vj({className:T,style:w},B),at.createElement("p",{className:I,style:S},at.isValidElement(A)?A:"".concat(A)),j())};function lx(e){"@babel/helpers - typeof";return lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lx(e)}function Jg(e,t,r){return t=rH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rH(e){var t=nH(e,"string");return lx(t)=="symbol"?t:t+""}function nH(e,t){if(lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(lx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var pm="recharts-tooltip-wrapper",aH={visibility:"hidden"};function sH(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return oa(pm,Jg(Jg(Jg(Jg({},"".concat(pm,"-right"),hr(r)&&t&&hr(t.x)&&r>=t.x),"".concat(pm,"-left"),hr(r)&&t&&hr(t.x)&&r<t.x),"".concat(pm,"-bottom"),hr(n)&&t&&hr(t.y)&&n>=t.y),"".concat(pm,"-top"),hr(n)&&t&&hr(t.y)&&n<t.y))}function mC(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(i&&hr(i[n]))return i[n];var f=r[n]-l-s,d=r[n]+s;if(t[n])return o[n]?f:d;if(o[n]){var m=f,p=c[n];return m<p?Math.max(d,c[n]):Math.max(f,c[n])}var y=d+l,v=c[n]+u;return y>v?Math.max(f,c[n]):Math.max(d,c[n])}function iH(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function oH(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,f,d;return o.height>0&&o.width>0&&r?(f=mC({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),d=mC({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=iH({translateX:f,translateY:d,useTranslate3d:l})):u=aH,{cssProperties:u,cssClasses:sH({translateX:f,translateY:d,coordinate:r})}}function gp(e){"@babel/helpers - typeof";return gp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gp(e)}function xC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xC(Object(r),!0).forEach(function(n){Kj(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sL(n.key),n)}}function uH(e,t,r){return t&&cH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function dH(e,t,r){return t=o1(t),fH(e,aL()?Reflect.construct(t,r||[],o1(e).constructor):t.apply(e,r))}function fH(e,t){if(t&&(gp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hH(e)}function hH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(aL=function(){return!!e})()}function o1(e){return o1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},o1(e)}function pH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Gj(e,t)}function Gj(e,t){return Gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Gj(e,t)}function Kj(e,t,r){return t=sL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sL(e){var t=mH(e,"string");return gp(t)=="symbol"?t:t+""}function mH(e,t){if(gp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vC=1,xH=(function(e){function t(){var r;lH(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=dH(this,t,[].concat(s)),Kj(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Kj(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&u!==void 0?u:0}})}}),r}return pH(t,e),uH(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>vC||Math.abs(n.height-this.state.lastBoundingBox.height)>vC)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.children,f=s.coordinate,d=s.hasPayload,m=s.isAnimationActive,p=s.offset,y=s.position,v=s.reverseDirection,g=s.useTranslate3d,b=s.viewBox,N=s.wrapperStyle,j=oH({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:p,position:y,reverseDirection:v,tooltipBox:this.state.lastBoundingBox,useTranslate3d:g,viewBox:b}),w=j.cssClasses,S=j.cssProperties,P=gC(gC({transition:m&&i?"transform ".concat(l,"ms ").concat(c):void 0},S),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&d?"visible":"hidden",position:"absolute",top:0,left:0},N);return at.createElement("div",{tabIndex:-1,className:w,style:P,ref:function(T){n.wrapperNode=T}},u)}}])})(z.PureComponent),gH=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Wp={isSsr:gH()};function vp(e){"@babel/helpers - typeof";return vp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vp(e)}function yC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function bC(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yC(Object(r),!0).forEach(function(n){Xk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function vH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,oL(n.key),n)}}function bH(e,t,r){return t&&yH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wH(e,t,r){return t=l1(t),NH(e,iL()?Reflect.construct(t,r||[],l1(e).constructor):t.apply(e,r))}function NH(e,t){if(t&&(vp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jH(e)}function jH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iL(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(iL=function(){return!!e})()}function l1(e){return l1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},l1(e)}function kH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xj(e,t)}function Xj(e,t){return Xj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Xj(e,t)}function Xk(e,t,r){return t=oL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oL(e){var t=SH(e,"string");return vp(t)=="symbol"?t:t+""}function SH(e,t){if(vp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function _H(e){return e.dataKey}function AH(e,t){return at.isValidElement(e)?at.cloneElement(e,t):typeof e=="function"?at.createElement(e,t):at.createElement(tH,t)}var dd=(function(e){function t(){return vH(this,t),wH(this,t,arguments)}return kH(t,e),bH(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,u=s.content,f=s.coordinate,d=s.filterNull,m=s.isAnimationActive,p=s.offset,y=s.payload,v=s.payloadUniqBy,g=s.position,b=s.reverseDirection,N=s.useTranslate3d,j=s.viewBox,w=s.wrapperStyle,S=y??[];d&&S.length&&(S=JD(y.filter(function(A){return A.value!=null&&(A.hide!==!0||n.props.includeHidden)}),v,_H));var P=S.length>0;return at.createElement(xH,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:i,coordinate:f,hasPayload:P,offset:p,position:g,reverseDirection:b,useTranslate3d:N,viewBox:j,wrapperStyle:w},AH(u,bC(bC({},this.props),{},{payload:S})))}}])})(z.PureComponent);Xk(dd,"displayName","Tooltip");Xk(dd,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Wp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Y5,wC;function EH(){if(wC)return Y5;wC=1;var e=Ad(),t=function(){return e.Date.now()};return Y5=t,Y5}var J5,NC;function CH(){if(NC)return J5;NC=1;var e=/\s/;function t(r){for(var n=r.length;n--&&e.test(r.charAt(n)););return n}return J5=t,J5}var Q5,jC;function TH(){if(jC)return Q5;jC=1;var e=CH(),t=/^\s+/;function r(n){return n&&n.slice(0,e(n)+1).replace(t,"")}return Q5=r,Q5}var Z5,kC;function lL(){if(kC)return Z5;kC=1;var e=TH(),t=f0(),r=qp(),n=NaN,s=/^[-+]0x[0-9a-f]+$/i,i=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(u){if(typeof u=="number")return u;if(r(u))return n;if(t(u)){var f=typeof u.valueOf=="function"?u.valueOf():u;u=t(f)?f+"":f}if(typeof u!="string")return u===0?u:+u;u=e(u);var d=i.test(u);return d||o.test(u)?l(u.slice(2),d?2:8):s.test(u)?n:+u}return Z5=c,Z5}var eN,SC;function OH(){if(SC)return eN;SC=1;var e=f0(),t=EH(),r=lL(),n="Expected a function",s=Math.max,i=Math.min;function o(l,c,u){var f,d,m,p,y,v,g=0,b=!1,N=!1,j=!0;if(typeof l!="function")throw new TypeError(n);c=r(c)||0,e(u)&&(b=!!u.leading,N="maxWait"in u,m=N?s(r(u.maxWait)||0,c):m,j="trailing"in u?!!u.trailing:j);function w(M){var q=f,G=d;return f=d=void 0,g=M,p=l.apply(G,q),p}function S(M){return g=M,y=setTimeout(T,c),b?w(M):p}function P(M){var q=M-v,G=M-g,Z=c-q;return N?i(Z,m-G):Z}function A(M){var q=M-v,G=M-g;return v===void 0||q>=c||q<0||N&&G>=m}function T(){var M=t();if(A(M))return I(M);y=setTimeout(T,P(M))}function I(M){return y=void 0,j&&f?w(M):(f=d=void 0,p)}function B(){y!==void 0&&clearTimeout(y),g=0,f=v=d=y=void 0}function E(){return y===void 0?p:I(t())}function C(){var M=t(),q=A(M);if(f=arguments,d=this,v=M,q){if(y===void 0)return S(v);if(N)return clearTimeout(y),y=setTimeout(T,c),w(v)}return y===void 0&&(y=setTimeout(T,c)),p}return C.cancel=B,C.flush=E,C}return eN=o,eN}var tN,_C;function PH(){if(_C)return tN;_C=1;var e=OH(),t=f0(),r="Expected a function";function n(s,i,o){var l=!0,c=!0;if(typeof s!="function")throw new TypeError(r);return t(o)&&(l="leading"in o?!!o.leading:l,c="trailing"in o?!!o.trailing:c),e(s,i,{leading:l,maxWait:i,trailing:c})}return tN=n,tN}var IH=PH();const cL=Aa(IH);function cx(e){"@babel/helpers - typeof";return cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cx(e)}function AC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qg(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(r),!0).forEach(function(n){DH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DH(e,t,r){return t=LH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LH(e){var t=FH(e,"string");return cx(t)=="symbol"?t:t+""}function FH(e,t){if(cx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(cx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MH(e,t){return qH(e)||UH(e,t)||BH(e,t)||RH()}function RH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function BH(e,t){if(e){if(typeof e=="string")return EC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return EC(e,t)}}function EC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function UH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function qH(e){if(Array.isArray(e))return e}var $H=z.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,u=e.minWidth,f=u===void 0?0:u,d=e.minHeight,m=e.maxHeight,p=e.children,y=e.debounce,v=y===void 0?0:y,g=e.id,b=e.className,N=e.onResize,j=e.style,w=j===void 0?{}:j,S=z.useRef(null),P=z.useRef();P.current=N,z.useImperativeHandle(t,function(){return Object.defineProperty(S.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),S.current},configurable:!0})});var A=z.useState({containerWidth:s.width,containerHeight:s.height}),T=MH(A,2),I=T[0],B=T[1],E=z.useCallback(function(M,q){B(function(G){var Z=Math.round(M),te=Math.round(q);return G.containerWidth===Z&&G.containerHeight===te?G:{containerWidth:Z,containerHeight:te}})},[]);z.useEffect(function(){var M=function(J){var ee,H=J[0].contentRect,O=H.width,R=H.height;E(O,R),(ee=P.current)===null||ee===void 0||ee.call(P,O,R)};v>0&&(M=cL(M,v,{trailing:!0,leading:!1}));var q=new ResizeObserver(M),G=S.current.getBoundingClientRect(),Z=G.width,te=G.height;return E(Z,te),q.observe(S.current),function(){q.disconnect()}},[E,v]);var C=z.useMemo(function(){var M=I.containerWidth,q=I.containerHeight;if(M<0||q<0)return null;sf(M0(o)||M0(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),sf(!r||r>0,"The aspect(%s) must be greater than zero.",r);var G=M0(o)?M:o,Z=M0(c)?q:c;r&&r>0&&(G?Z=G/r:Z&&(G=Z*r),m&&Z>m&&(Z=m)),sf(G>0||Z>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,G,Z,o,c,f,d,r);var te=!Array.isArray(p)&&af(p.type).endsWith("Chart");return at.Children.map(p,function(ne){return mD.isElement(ne)?z.cloneElement(ne,Qg({width:G,height:Z},te?{style:Qg({height:"100%",width:"100%",maxHeight:Z,maxWidth:G},ne.props.style)}:{})):ne})},[r,p,c,m,d,f,I,o]);return at.createElement("div",{id:g?"".concat(g):void 0,className:oa("recharts-responsive-container",b),style:Qg(Qg({},w),{},{width:o,height:c,minWidth:f,minHeight:d,maxHeight:m}),ref:S},C)}),uL=function(t){return null};uL.displayName="Cell";function ux(e){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ux(e)}function CC(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Yj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CC(Object(r),!0).forEach(function(n){zH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CC(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zH(e,t,r){return t=HH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HH(e){var t=WH(e,"string");return ux(t)=="symbol"?t:t+""}function WH(e,t){if(ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ux(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uh={widthCache:{},cacheCount:0},VH=2e3,GH={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},TC="recharts_measurement_span";function KH(e){var t=Yj({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var qm=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Wp.isSsr)return{width:0,height:0};var n=KH(r),s=JSON.stringify({text:t,copyStyle:n});if(Uh.widthCache[s])return Uh.widthCache[s];try{var i=document.getElementById(TC);i||(i=document.createElement("span"),i.setAttribute("id",TC),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Yj(Yj({},GH),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Uh.widthCache[s]=c,++Uh.cacheCount>VH&&(Uh.cacheCount=0,Uh.widthCache={}),c}catch{return{width:0,height:0}}},XH=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function dx(e){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dx(e)}function c1(e,t){return ZH(e)||QH(e,t)||JH(e,t)||YH()}function YH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JH(e,t){if(e){if(typeof e=="string")return OC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OC(e,t)}}function OC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function QH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function ZH(e){if(Array.isArray(e))return e}function eW(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PC(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rW(n.key),n)}}function tW(e,t,r){return t&&PC(e.prototype,t),r&&PC(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rW(e){var t=nW(e,"string");return dx(t)=="symbol"?t:t+""}function nW(e,t){if(dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var IC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DC=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,aW=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,sW=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dL={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},iW=Object.keys(dL),Qh="NaN";function oW(e,t){return e*dL[t]}var Zg=(function(){function e(t,r){eW(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!aW.test(r)&&(this.num=NaN,this.unit=""),iW.includes(r)&&(this.num=oW(t,r),this.unit="px")}return tW(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=sW.exec(r))!==null&&n!==void 0?n:[],i=c1(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])})();function fL(e){if(e.includes(Qh))return Qh;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=IC.exec(t))!==null&&r!==void 0?r:[],s=c1(n,4),i=s[1],o=s[2],l=s[3],c=Zg.parse(i??""),u=Zg.parse(l??""),f=o==="*"?c.multiply(u):c.divide(u);if(f.isNaN())return Qh;t=t.replace(IC,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var d,m=(d=DC.exec(t))!==null&&d!==void 0?d:[],p=c1(m,4),y=p[1],v=p[2],g=p[3],b=Zg.parse(y??""),N=Zg.parse(g??""),j=v==="+"?b.add(N):b.subtract(N);if(j.isNaN())return Qh;t=t.replace(DC,j.toString())}return t}var LC=/\(([^()]*)\)/;function lW(e){for(var t=e;t.includes("(");){var r=LC.exec(t),n=c1(r,2),s=n[1];t=t.replace(LC,fL(s))}return t}function cW(e){var t=e.replace(/\s+/g,"");return t=lW(t),t=fL(t),t}function uW(e){try{return cW(e)}catch{return Qh}}function rN(e){var t=uW(e.slice(5,-1));return t===Qh?"":t}var dW=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],fW=["dx","dy","angle","className","breakAll"];function Jj(){return Jj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jj.apply(this,arguments)}function FC(e,t){if(e==null)return{};var r=hW(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function hW(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function MC(e,t){return gW(e)||xW(e,t)||mW(e,t)||pW()}function pW(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mW(e,t){if(e){if(typeof e=="string")return RC(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RC(e,t)}}function RC(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xW(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function gW(e){if(Array.isArray(e))return e}var hL=/[ \f\n\r\t\v\u2028\u2029]+/,pL=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];Gn(r)||(n?i=r.toString().split(""):i=r.toString().split(hL));var o=i.map(function(c){return{word:c,width:qm(c,s).width}}),l=n?0:qm("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},vW=function(t,r,n,s,i){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,f=hr(o),d=l,m=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return G.reduce(function(Z,te){var ne=te.word,J=te.width,ee=Z[Z.length-1];if(ee&&(s==null||i||ee.width+J+n<Number(s)))ee.words.push(ne),ee.width+=J+n;else{var H={words:[ne],width:J};Z.push(H)}return Z},[])},p=m(r),y=function(G){return G.reduce(function(Z,te){return Z.width>te.width?Z:te})};if(!f)return p;for(var v="",g=function(G){var Z=d.slice(0,G),te=pL({breakAll:u,style:c,children:Z+v}).wordsWithComputedWidth,ne=m(te),J=ne.length>o||y(ne).width>Number(s);return[J,ne]},b=0,N=d.length-1,j=0,w;b<=N&&j<=d.length-1;){var S=Math.floor((b+N)/2),P=S-1,A=g(P),T=MC(A,2),I=T[0],B=T[1],E=g(S),C=MC(E,1),M=C[0];if(!I&&!M&&(b=S+1),I&&M&&(N=S-1),!I&&M){w=B;break}j++}return w||p},BC=function(t){var r=Gn(t)?[]:t.toString().split(hL);return[{words:r}]},yW=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Wp.isSsr){var c,u,f=pL({breakAll:o,children:s,style:i});if(f){var d=f.wordsWithComputedWidth,m=f.spaceWidth;c=d,u=m}else return BC(s);return vW({breakAll:o,children:s,maxLines:l,style:i},c,u,r,n)}return BC(s)},UC="#808080",u1=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,f=t.scaleToFit,d=f===void 0?!1:f,m=t.textAnchor,p=m===void 0?"start":m,y=t.verticalAnchor,v=y===void 0?"end":y,g=t.fill,b=g===void 0?UC:g,N=FC(t,dW),j=z.useMemo(function(){return yW({breakAll:N.breakAll,children:N.children,maxLines:N.maxLines,scaleToFit:d,style:N.style,width:N.width})},[N.breakAll,N.children,N.maxLines,d,N.style,N.width]),w=N.dx,S=N.dy,P=N.angle,A=N.className,T=N.breakAll,I=FC(N,fW);if(!Pi(n)||!Pi(i))return null;var B=n+(hr(w)?w:0),E=i+(hr(S)?S:0),C;switch(v){case"start":C=rN("calc(".concat(u,")"));break;case"middle":C=rN("calc(".concat((j.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:C=rN("calc(".concat(j.length-1," * -").concat(l,")"));break}var M=[];if(d){var q=j[0].width,G=N.width;M.push("scale(".concat((hr(G)?G/q:1)/q,")"))}return P&&M.push("rotate(".concat(P,", ").concat(B,", ").concat(E,")")),M.length&&(I.transform=M.join(" ")),at.createElement("text",Jj({},Bn(I,!0),{x:B,y:E,className:oa("recharts-text",A),textAnchor:p,fill:b.includes("url")?UC:b}),j.map(function(Z,te){var ne=Z.words.join(T?"":" ");return at.createElement("tspan",{x:B,dy:te===0?C:l,key:"".concat(ne,"-").concat(te)},ne)}))};function t0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function bW(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Yk(e){let t,r,n;e.length!==2?(t=t0,r=(l,c)=>t0(e(l),c),n=(l,c)=>e(l)-c):(t=e===t0||e===bW?e:wW,r=e,n=e);function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<0?u=d+1:f=d}while(u<f)}return u}function i(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const d=u+f>>>1;r(l[d],c)<=0?u=d+1:f=d}while(u<f)}return u}function o(l,c,u=0,f=l.length){const d=s(l,c,u,f-1);return d>u&&n(l[d-1],c)>-n(l[d],c)?d-1:d}return{left:s,center:o,right:i}}function wW(){return 0}function mL(e){return e===null?NaN:+e}function*NW(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const jW=Yk(t0),og=jW.right;Yk(mL).center;class qC extends Map{constructor(t,r=_W){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get($C(this,t))}has(t){return super.has($C(this,t))}set(t,r){return super.set(kW(this,t),r)}delete(t){return super.delete(SW(this,t))}}function $C({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function kW({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function SW({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function _W(e){return e!==null&&typeof e=="object"?e.valueOf():e}function AW(e=t0){if(e===t0)return xL;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function xL(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const EW=Math.sqrt(50),CW=Math.sqrt(10),TW=Math.sqrt(2);function d1(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=EW?10:i>=CW?5:i>=TW?2:1;let l,c,u;return s<0?(u=Math.pow(10,-s)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,s)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?d1(e,t,r*2):[l,c,u]}function Qj(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?d1(t,e,r):d1(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(s+u)/-o;else for(let u=0;u<l;++u)c[u]=(s+u)*o;return c}function Zj(e,t,r){return t=+t,e=+e,r=+r,d1(e,t,r)[2]}function e4(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?Zj(t,e,r):Zj(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function zC(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function HC(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function gL(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?xL:AW(s);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,f=Math.log(c),d=.5*Math.exp(2*f/3),m=.5*Math.sqrt(f*d*(c-d)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*d/c+m)),y=Math.min(n,Math.floor(t+(c-u)*d/c+m));gL(e,t,p,y,s)}const i=e[t];let o=r,l=n;for(mm(e,r,t),s(e[n],i)>0&&mm(e,r,n);o<l;){for(mm(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?mm(e,r,l):(++l,mm(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function mm(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function OW(e,t,r){if(e=Float64Array.from(NW(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return HC(e);if(t>=1)return zC(e);var n,s=(n-1)*t,i=Math.floor(s),o=zC(gL(e,i).subarray(0,i+1)),l=HC(e.subarray(i+1));return o+(l-o)*(s-i)}}function PW(e,t,r=mL){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function IW(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function lu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function yf(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const t4=Symbol("implicit");function Jk(){var e=new qC,t=[],r=[],n=t4;function s(i){let o=e.get(i);if(o===void 0){if(n!==t4)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new qC;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return Jk(t,r).unknown(n)},lu.apply(s,arguments),s}function fx(){var e=Jk().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,u=0,f=.5;delete e.unknown;function d(){var m=t().length,p=s<n,y=p?s:n,v=p?n:s;i=(v-y)/Math.max(1,m-c+u*2),l&&(i=Math.floor(i)),y+=(v-y-i*(m-c))*f,o=i*(1-c),l&&(y=Math.round(y),o=Math.round(o));var g=IW(m).map(function(b){return y+i*b});return r(p?g.reverse():g)}return e.domain=function(m){return arguments.length?(t(m),d()):t()},e.range=function(m){return arguments.length?([n,s]=m,n=+n,s=+s,d()):[n,s]},e.rangeRound=function(m){return[n,s]=m,n=+n,s=+s,l=!0,d()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(m){return arguments.length?(l=!!m,d()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),d()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),d()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,d()):u},e.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),d()):f},e.copy=function(){return fx(t(),[n,s]).round(l).paddingInner(c).paddingOuter(u).align(f)},lu.apply(d(),arguments)}function vL(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return vL(t())},e}function $m(){return vL(fx.apply(null,arguments).paddingInner(1))}function Qk(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function yL(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function lg(){}var hx=.7,f1=1/hx,ap="\\s*([+-]?\\d+)\\s*",px="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",wd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",DW=/^#([0-9a-f]{3,8})$/,LW=new RegExp(`^rgb\\(${ap},${ap},${ap}\\)$`),FW=new RegExp(`^rgb\\(${wd},${wd},${wd}\\)$`),MW=new RegExp(`^rgba\\(${ap},${ap},${ap},${px}\\)$`),RW=new RegExp(`^rgba\\(${wd},${wd},${wd},${px}\\)$`),BW=new RegExp(`^hsl\\(${px},${wd},${wd}\\)$`),UW=new RegExp(`^hsla\\(${px},${wd},${wd},${px}\\)$`),WC={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qk(lg,mx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:VC,formatHex:VC,formatHex8:qW,formatHsl:$W,formatRgb:GC,toString:GC});function VC(){return this.rgb().formatHex()}function qW(){return this.rgb().formatHex8()}function $W(){return bL(this).formatHsl()}function GC(){return this.rgb().formatRgb()}function mx(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=DW.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?KC(t):r===3?new zl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?ev(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?ev(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=LW.exec(e))?new zl(t[1],t[2],t[3],1):(t=FW.exec(e))?new zl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=MW.exec(e))?ev(t[1],t[2],t[3],t[4]):(t=RW.exec(e))?ev(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=BW.exec(e))?JC(t[1],t[2]/100,t[3]/100,1):(t=UW.exec(e))?JC(t[1],t[2]/100,t[3]/100,t[4]):WC.hasOwnProperty(e)?KC(WC[e]):e==="transparent"?new zl(NaN,NaN,NaN,0):null}function KC(e){return new zl(e>>16&255,e>>8&255,e&255,1)}function ev(e,t,r,n){return n<=0&&(e=t=r=NaN),new zl(e,t,r,n)}function zW(e){return e instanceof lg||(e=mx(e)),e?(e=e.rgb(),new zl(e.r,e.g,e.b,e.opacity)):new zl}function r4(e,t,r,n){return arguments.length===1?zW(e):new zl(e,t,r,n??1)}function zl(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Qk(zl,r4,yL(lg,{brighter(e){return e=e==null?f1:Math.pow(f1,e),new zl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?hx:Math.pow(hx,e),new zl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zl(G0(this.r),G0(this.g),G0(this.b),h1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:XC,formatHex:XC,formatHex8:HW,formatRgb:YC,toString:YC}));function XC(){return`#${R0(this.r)}${R0(this.g)}${R0(this.b)}`}function HW(){return`#${R0(this.r)}${R0(this.g)}${R0(this.b)}${R0((isNaN(this.opacity)?1:this.opacity)*255)}`}function YC(){const e=h1(this.opacity);return`${e===1?"rgb(":"rgba("}${G0(this.r)}, ${G0(this.g)}, ${G0(this.b)}${e===1?")":`, ${e})`}`}function h1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function G0(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function R0(e){return e=G0(e),(e<16?"0":"")+e.toString(16)}function JC(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Du(e,t,r,n)}function bL(e){if(e instanceof Du)return new Du(e.h,e.s,e.l,e.opacity);if(e instanceof lg||(e=mx(e)),!e)return new Du;if(e instanceof Du)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Du(o,l,c,e.opacity)}function WW(e,t,r,n){return arguments.length===1?bL(e):new Du(e,t,r,n??1)}function Du(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Qk(Du,WW,yL(lg,{brighter(e){return e=e==null?f1:Math.pow(f1,e),new Du(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?hx:Math.pow(hx,e),new Du(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new zl(nN(e>=240?e-240:e+120,s,n),nN(e,s,n),nN(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Du(QC(this.h),tv(this.s),tv(this.l),h1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=h1(this.opacity);return`${e===1?"hsl(":"hsla("}${QC(this.h)}, ${tv(this.s)*100}%, ${tv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function QC(e){return e=(e||0)%360,e<0?e+360:e}function tv(e){return Math.max(0,Math.min(1,e||0))}function nN(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Zk=e=>()=>e;function VW(e,t){return function(r){return e+r*t}}function GW(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function KW(e){return(e=+e)==1?wL:function(t,r){return r-t?GW(t,r,e):Zk(isNaN(t)?r:t)}}function wL(e,t){var r=t-e;return r?VW(e,r):Zk(isNaN(e)?t:e)}const ZC=(function e(t){var r=KW(t);function n(s,i){var o=r((s=r4(s)).r,(i=r4(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),u=wL(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=c(f),s.opacity=u(f),s+""}}return n.gamma=e,n})(1);function XW(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function YW(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function JW(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=Vp(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function QW(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function p1(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function ZW(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=Vp(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var n4=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,aN=new RegExp(n4.source,"g");function eV(e){return function(){return e}}function tV(e){return function(t){return e(t)+""}}function rV(e,t){var r=n4.lastIndex=aN.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=n4.exec(e))&&(s=aN.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:p1(n,s)})),r=aN.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?tV(c[0].x):eV(t):(t=c.length,function(u){for(var f=0,d;f<t;++f)l[(d=c[f]).i]=d.x(u);return l.join("")})}function Vp(e,t){var r=typeof t,n;return t==null||r==="boolean"?Zk(t):(r==="number"?p1:r==="string"?(n=mx(t))?(t=n,ZC):rV:t instanceof mx?ZC:t instanceof Date?QW:YW(t)?XW:Array.isArray(t)?JW:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ZW:p1)(e,t)}function e3(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function nV(e,t){t===void 0&&(t=e,e=Vp);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function aV(e){return function(){return e}}function m1(e){return+e}var eT=[0,1];function yl(e){return e}function a4(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:aV(isNaN(t)?NaN:.5)}function sV(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function iV(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=a4(s,n),i=r(o,i)):(n=a4(n,s),i=r(i,o)),function(l){return i(n(l))}}function oV(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=a4(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=og(e,l,1,n)-1;return i[c](s[c](l))}}function cg(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Oy(){var e=eT,t=eT,r=Vp,n,s,i,o=yl,l,c,u;function f(){var m=Math.min(e.length,t.length);return o!==yl&&(o=sV(e[0],e[m-1])),l=m>2?oV:iV,c=u=null,d}function d(m){return m==null||isNaN(m=+m)?i:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return d.invert=function(m){return o(s((u||(u=l(t,e.map(n),p1)))(m)))},d.domain=function(m){return arguments.length?(e=Array.from(m,m1),f()):e.slice()},d.range=function(m){return arguments.length?(t=Array.from(m),f()):t.slice()},d.rangeRound=function(m){return t=Array.from(m),r=e3,f()},d.clamp=function(m){return arguments.length?(o=m?!0:yl,f()):o!==yl},d.interpolate=function(m){return arguments.length?(r=m,f()):r},d.unknown=function(m){return arguments.length?(i=m,d):i},function(m,p){return n=m,s=p,f()}}function t3(){return Oy()(yl,yl)}function lV(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function x1(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function yp(e){return e=x1(Math.abs(e)),e?e[1]:NaN}function cV(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function uV(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var dV=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function xx(e){if(!(t=dV.exec(e)))throw new Error("invalid format: "+e);var t;return new r3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}xx.prototype=r3.prototype;function r3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}r3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function fV(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var g1;function hV(e,t){var r=x1(e,t);if(!r)return g1=void 0,e.toPrecision(t);var n=r[0],s=r[1],i=s-(g1=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+x1(e,Math.max(0,t+i-1))[0]}function tT(e,t){var r=x1(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const rT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:lV,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>tT(e*100,t),r:tT,s:hV,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function nT(e){return e}var aT=Array.prototype.map,sT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function pV(e){var t=e.grouping===void 0||e.thousands===void 0?nT:cV(aT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?nT:uV(aT.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(d,m){d=xx(d);var p=d.fill,y=d.align,v=d.sign,g=d.symbol,b=d.zero,N=d.width,j=d.comma,w=d.precision,S=d.trim,P=d.type;P==="n"?(j=!0,P="g"):rT[P]||(w===void 0&&(w=12),S=!0,P="g"),(b||p==="0"&&y==="=")&&(b=!0,p="0",y="=");var A=(m&&m.prefix!==void 0?m.prefix:"")+(g==="$"?r:g==="#"&&/[boxX]/.test(P)?"0"+P.toLowerCase():""),T=(g==="$"?n:/[%p]/.test(P)?o:"")+(m&&m.suffix!==void 0?m.suffix:""),I=rT[P],B=/[defgprs%]/.test(P);w=w===void 0?6:/[gprs]/.test(P)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function E(C){var M=A,q=T,G,Z,te;if(P==="c")q=I(C)+q,C="";else{C=+C;var ne=C<0||1/C<0;if(C=isNaN(C)?c:I(Math.abs(C),w),S&&(C=fV(C)),ne&&+C==0&&v!=="+"&&(ne=!1),M=(ne?v==="("?v:l:v==="-"||v==="("?"":v)+M,q=(P==="s"&&!isNaN(C)&&g1!==void 0?sT[8+g1/3]:"")+q+(ne&&v==="("?")":""),B){for(G=-1,Z=C.length;++G<Z;)if(te=C.charCodeAt(G),48>te||te>57){q=(te===46?s+C.slice(G+1):C.slice(G))+q,C=C.slice(0,G);break}}}j&&!b&&(C=t(C,1/0));var J=M.length+C.length+q.length,ee=J<N?new Array(N-J+1).join(p):"";switch(j&&b&&(C=t(ee+C,ee.length?N-q.length:1/0),ee=""),y){case"<":C=M+C+q+ee;break;case"=":C=M+ee+C+q;break;case"^":C=ee.slice(0,J=ee.length>>1)+M+C+q+ee.slice(J);break;default:C=ee+M+C+q;break}return i(C)}return E.toString=function(){return d+""},E}function f(d,m){var p=Math.max(-8,Math.min(8,Math.floor(yp(m)/3)))*3,y=Math.pow(10,-p),v=u((d=xx(d),d.type="f",d),{suffix:sT[8+p/3]});return function(g){return v(y*g)}}return{format:u,formatPrefix:f}}var rv,n3,NL;mV({thousands:",",grouping:[3],currency:["$",""]});function mV(e){return rv=pV(e),n3=rv.format,NL=rv.formatPrefix,rv}function xV(e){return Math.max(0,-yp(Math.abs(e)))}function gV(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(yp(t)/3)))*3-yp(Math.abs(e)))}function vV(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,yp(t)-yp(e))+1}function jL(e,t,r,n){var s=e4(e,t,r),i;switch(n=xx(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=gV(s,o))&&(n.precision=i),NL(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=vV(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=xV(s))&&(n.precision=i-(n.type==="%")*2);break}}return n3(n)}function p0(e){var t=e.domain;return e.ticks=function(r){var n=t();return Qj(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return jL(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,u,f=10;for(l<o&&(u=o,o=l,l=u,u=s,s=i,i=u);f-- >0;){if(u=Zj(o,l,r),u===c)return n[s]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function v1(){var e=t3();return e.copy=function(){return cg(e,v1())},lu.apply(e,arguments),p0(e)}function kL(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,m1),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return kL(e).unknown(t)},e=arguments.length?Array.from(e,m1):[0,1],p0(r)}function SL(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function iT(e){return Math.log(e)}function oT(e){return Math.exp(e)}function yV(e){return-Math.log(-e)}function bV(e){return-Math.exp(-e)}function wV(e){return isFinite(e)?+("1e"+e):e<0?0:e}function NV(e){return e===10?wV:e===Math.E?Math.exp:t=>Math.pow(e,t)}function jV(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function lT(e){return(t,r)=>-e(-t,r)}function a3(e){const t=e(iT,oT),r=t.domain;let n=10,s,i;function o(){return s=jV(n),i=NV(n),r()[0]<0?(s=lT(s),i=lT(i),e(yV,bV)):e(iT,oT),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],f=c[c.length-1];const d=f<u;d&&([u,f]=[f,u]);let m=s(u),p=s(f),y,v;const g=l==null?10:+l;let b=[];if(!(n%1)&&p-m<g){if(m=Math.floor(m),p=Math.ceil(p),u>0){for(;m<=p;++m)for(y=1;y<n;++y)if(v=m<0?y/i(-m):y*i(m),!(v<u)){if(v>f)break;b.push(v)}}else for(;m<=p;++m)for(y=n-1;y>=1;--y)if(v=m>0?y/i(-m):y*i(m),!(v<u)){if(v>f)break;b.push(v)}b.length*2<g&&(b=Qj(u,f,g))}else b=Qj(m,p,Math.min(p-m,g)).map(i);return d?b.reverse():b},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=xx(c)).precision==null&&(c.trim=!0),c=n3(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return f=>{let d=f/i(Math.round(s(f)));return d*n<n-.5&&(d*=n),d<=u?c(f):""}},t.nice=()=>r(SL(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function _L(){const e=a3(Oy()).domain([1,10]);return e.copy=()=>cg(e,_L()).base(e.base()),lu.apply(e,arguments),e}function cT(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function uT(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function s3(e){var t=1,r=e(cT(t),uT(t));return r.constant=function(n){return arguments.length?e(cT(t=+n),uT(t)):t},p0(r)}function AL(){var e=s3(Oy());return e.copy=function(){return cg(e,AL()).constant(e.constant())},lu.apply(e,arguments)}function dT(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function kV(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function SV(e){return e<0?-e*e:e*e}function i3(e){var t=e(yl,yl),r=1;function n(){return r===1?e(yl,yl):r===.5?e(kV,SV):e(dT(r),dT(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},p0(t)}function o3(){var e=i3(Oy());return e.copy=function(){return cg(e,o3()).exponent(e.exponent())},lu.apply(e,arguments),e}function _V(){return o3.apply(null,arguments).exponent(.5)}function fT(e){return Math.sign(e)*e*e}function AV(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function EL(){var e=t3(),t=[0,1],r=!1,n;function s(i){var o=AV(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(fT(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,m1)).map(fT)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return EL(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},lu.apply(s,arguments),p0(s)}function CL(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=PW(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[og(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(t0),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return CL().domain(e).range(t).unknown(n)},lu.apply(i,arguments)}function TL(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[og(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return TL().domain([e,t]).range(s).unknown(i)},lu.apply(p0(o),arguments)}function OL(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[og(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return OL().domain(e).range(t).unknown(r)},lu.apply(s,arguments)}const sN=new Date,iN=new Date;function Li(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},s.filter=i=>Li(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(sN.setTime(+i),iN.setTime(+o),e(sN),e(iN),Math.floor(r(sN,iN))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const y1=Li(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);y1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Li(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):y1);y1.range;const Yd=1e3,tu=Yd*60,Jd=tu*60,ff=Jd*24,l3=ff*7,hT=ff*30,oN=ff*365,B0=Li(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Yd)},(e,t)=>(t-e)/Yd,e=>e.getUTCSeconds());B0.range;const c3=Li(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yd)},(e,t)=>{e.setTime(+e+t*tu)},(e,t)=>(t-e)/tu,e=>e.getMinutes());c3.range;const u3=Li(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*tu)},(e,t)=>(t-e)/tu,e=>e.getUTCMinutes());u3.range;const d3=Li(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Yd-e.getMinutes()*tu)},(e,t)=>{e.setTime(+e+t*Jd)},(e,t)=>(t-e)/Jd,e=>e.getHours());d3.range;const f3=Li(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Jd)},(e,t)=>(t-e)/Jd,e=>e.getUTCHours());f3.range;const ug=Li(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*tu)/ff,e=>e.getDate()-1);ug.range;const Py=Li(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ff,e=>e.getUTCDate()-1);Py.range;const PL=Li(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/ff,e=>Math.floor(e/ff));PL.range;function hh(e){return Li(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*tu)/l3)}const Iy=hh(0),b1=hh(1),EV=hh(2),CV=hh(3),bp=hh(4),TV=hh(5),OV=hh(6);Iy.range;b1.range;EV.range;CV.range;bp.range;TV.range;OV.range;function ph(e){return Li(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/l3)}const Dy=ph(0),w1=ph(1),PV=ph(2),IV=ph(3),wp=ph(4),DV=ph(5),LV=ph(6);Dy.range;w1.range;PV.range;IV.range;wp.range;DV.range;LV.range;const h3=Li(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());h3.range;const p3=Li(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());p3.range;const hf=Li(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());hf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Li(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});hf.range;const pf=Li(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());pf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Li(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});pf.range;function IL(e,t,r,n,s,i){const o=[[B0,1,Yd],[B0,5,5*Yd],[B0,15,15*Yd],[B0,30,30*Yd],[i,1,tu],[i,5,5*tu],[i,15,15*tu],[i,30,30*tu],[s,1,Jd],[s,3,3*Jd],[s,6,6*Jd],[s,12,12*Jd],[n,1,ff],[n,2,2*ff],[r,1,l3],[t,1,hT],[t,3,3*hT],[e,1,oN]];function l(u,f,d){const m=f<u;m&&([u,f]=[f,u]);const p=d&&typeof d.range=="function"?d:c(u,f,d),y=p?p.range(u,+f+1):[];return m?y.reverse():y}function c(u,f,d){const m=Math.abs(f-u)/d,p=Yk(([,,g])=>g).right(o,m);if(p===o.length)return e.every(e4(u/oN,f/oN,d));if(p===0)return y1.every(Math.max(e4(u,f,d),1));const[y,v]=o[m/o[p-1][2]<o[p][2]/m?p-1:p];return y.every(v)}return[l,c]}const[FV,MV]=IL(pf,p3,Dy,PL,f3,u3),[RV,BV]=IL(hf,h3,Iy,ug,d3,c3);function lN(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function cN(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function xm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function UV(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=gm(s),f=vm(s),d=gm(i),m=vm(i),p=gm(o),y=vm(o),v=gm(l),g=vm(l),b=gm(c),N=vm(c),j={a:te,A:ne,b:J,B:ee,c:null,d:yT,e:yT,f:cG,g:yG,G:wG,H:iG,I:oG,j:lG,L:DL,m:uG,M:dG,p:H,q:O,Q:NT,s:jT,S:fG,u:hG,U:pG,V:mG,w:xG,W:gG,x:null,X:null,y:vG,Y:bG,Z:NG,"%":wT},w={a:R,A:W,b:U,B:K,c:null,d:bT,e:bT,f:_G,g:FG,G:RG,H:jG,I:kG,j:SG,L:FL,m:AG,M:EG,p:oe,q:he,Q:NT,s:jT,S:CG,u:TG,U:OG,V:PG,w:IG,W:DG,x:null,X:null,y:LG,Y:MG,Z:BG,"%":wT},S={a:B,A:E,b:C,B:M,c:q,d:gT,e:gT,f:rG,g:xT,G:mT,H:vT,I:vT,j:QV,L:tG,m:JV,M:ZV,p:I,q:YV,Q:aG,s:sG,S:eG,u:WV,U:VV,V:GV,w:HV,W:KV,x:G,X:Z,y:xT,Y:mT,Z:XV,"%":nG};j.x=P(r,j),j.X=P(n,j),j.c=P(t,j),w.x=P(r,w),w.X=P(n,w),w.c=P(t,w);function P(ie,ce){return function(Le){var le=[],He=-1,Fe=0,fe=ie.length,Q,we,ve;for(Le instanceof Date||(Le=new Date(+Le));++He<fe;)ie.charCodeAt(He)===37&&(le.push(ie.slice(Fe,He)),(we=pT[Q=ie.charAt(++He)])!=null?Q=ie.charAt(++He):we=Q==="e"?" ":"0",(ve=ce[Q])&&(Q=ve(Le,we)),le.push(Q),Fe=He+1);return le.push(ie.slice(Fe,He)),le.join("")}}function A(ie,ce){return function(Le){var le=xm(1900,void 0,1),He=T(le,ie,Le+="",0),Fe,fe;if(He!=Le.length)return null;if("Q"in le)return new Date(le.Q);if("s"in le)return new Date(le.s*1e3+("L"in le?le.L:0));if(ce&&!("Z"in le)&&(le.Z=0),"p"in le&&(le.H=le.H%12+le.p*12),le.m===void 0&&(le.m="q"in le?le.q:0),"V"in le){if(le.V<1||le.V>53)return null;"w"in le||(le.w=1),"Z"in le?(Fe=cN(xm(le.y,0,1)),fe=Fe.getUTCDay(),Fe=fe>4||fe===0?w1.ceil(Fe):w1(Fe),Fe=Py.offset(Fe,(le.V-1)*7),le.y=Fe.getUTCFullYear(),le.m=Fe.getUTCMonth(),le.d=Fe.getUTCDate()+(le.w+6)%7):(Fe=lN(xm(le.y,0,1)),fe=Fe.getDay(),Fe=fe>4||fe===0?b1.ceil(Fe):b1(Fe),Fe=ug.offset(Fe,(le.V-1)*7),le.y=Fe.getFullYear(),le.m=Fe.getMonth(),le.d=Fe.getDate()+(le.w+6)%7)}else("W"in le||"U"in le)&&("w"in le||(le.w="u"in le?le.u%7:"W"in le?1:0),fe="Z"in le?cN(xm(le.y,0,1)).getUTCDay():lN(xm(le.y,0,1)).getDay(),le.m=0,le.d="W"in le?(le.w+6)%7+le.W*7-(fe+5)%7:le.w+le.U*7-(fe+6)%7);return"Z"in le?(le.H+=le.Z/100|0,le.M+=le.Z%100,cN(le)):lN(le)}}function T(ie,ce,Le,le){for(var He=0,Fe=ce.length,fe=Le.length,Q,we;He<Fe;){if(le>=fe)return-1;if(Q=ce.charCodeAt(He++),Q===37){if(Q=ce.charAt(He++),we=S[Q in pT?ce.charAt(He++):Q],!we||(le=we(ie,Le,le))<0)return-1}else if(Q!=Le.charCodeAt(le++))return-1}return le}function I(ie,ce,Le){var le=u.exec(ce.slice(Le));return le?(ie.p=f.get(le[0].toLowerCase()),Le+le[0].length):-1}function B(ie,ce,Le){var le=p.exec(ce.slice(Le));return le?(ie.w=y.get(le[0].toLowerCase()),Le+le[0].length):-1}function E(ie,ce,Le){var le=d.exec(ce.slice(Le));return le?(ie.w=m.get(le[0].toLowerCase()),Le+le[0].length):-1}function C(ie,ce,Le){var le=b.exec(ce.slice(Le));return le?(ie.m=N.get(le[0].toLowerCase()),Le+le[0].length):-1}function M(ie,ce,Le){var le=v.exec(ce.slice(Le));return le?(ie.m=g.get(le[0].toLowerCase()),Le+le[0].length):-1}function q(ie,ce,Le){return T(ie,t,ce,Le)}function G(ie,ce,Le){return T(ie,r,ce,Le)}function Z(ie,ce,Le){return T(ie,n,ce,Le)}function te(ie){return o[ie.getDay()]}function ne(ie){return i[ie.getDay()]}function J(ie){return c[ie.getMonth()]}function ee(ie){return l[ie.getMonth()]}function H(ie){return s[+(ie.getHours()>=12)]}function O(ie){return 1+~~(ie.getMonth()/3)}function R(ie){return o[ie.getUTCDay()]}function W(ie){return i[ie.getUTCDay()]}function U(ie){return c[ie.getUTCMonth()]}function K(ie){return l[ie.getUTCMonth()]}function oe(ie){return s[+(ie.getUTCHours()>=12)]}function he(ie){return 1+~~(ie.getUTCMonth()/3)}return{format:function(ie){var ce=P(ie+="",j);return ce.toString=function(){return ie},ce},parse:function(ie){var ce=A(ie+="",!1);return ce.toString=function(){return ie},ce},utcFormat:function(ie){var ce=P(ie+="",w);return ce.toString=function(){return ie},ce},utcParse:function(ie){var ce=A(ie+="",!0);return ce.toString=function(){return ie},ce}}}var pT={"-":"",_:" ",0:"0"},Ji=/^\s*\d+/,qV=/^%/,$V=/[\\^$*+?|[\]().{}]/g;function la(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function zV(e){return e.replace($V,"\\$&")}function gm(e){return new RegExp("^(?:"+e.map(zV).join("|")+")","i")}function vm(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function HV(e,t,r){var n=Ji.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function WV(e,t,r){var n=Ji.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function VV(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function GV(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function KV(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function mT(e,t,r){var n=Ji.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function xT(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function XV(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function YV(e,t,r){var n=Ji.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function JV(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function gT(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function QV(e,t,r){var n=Ji.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function vT(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function ZV(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function eG(e,t,r){var n=Ji.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function tG(e,t,r){var n=Ji.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function rG(e,t,r){var n=Ji.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function nG(e,t,r){var n=qV.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function aG(e,t,r){var n=Ji.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function sG(e,t,r){var n=Ji.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function yT(e,t){return la(e.getDate(),t,2)}function iG(e,t){return la(e.getHours(),t,2)}function oG(e,t){return la(e.getHours()%12||12,t,2)}function lG(e,t){return la(1+ug.count(hf(e),e),t,3)}function DL(e,t){return la(e.getMilliseconds(),t,3)}function cG(e,t){return DL(e,t)+"000"}function uG(e,t){return la(e.getMonth()+1,t,2)}function dG(e,t){return la(e.getMinutes(),t,2)}function fG(e,t){return la(e.getSeconds(),t,2)}function hG(e){var t=e.getDay();return t===0?7:t}function pG(e,t){return la(Iy.count(hf(e)-1,e),t,2)}function LL(e){var t=e.getDay();return t>=4||t===0?bp(e):bp.ceil(e)}function mG(e,t){return e=LL(e),la(bp.count(hf(e),e)+(hf(e).getDay()===4),t,2)}function xG(e){return e.getDay()}function gG(e,t){return la(b1.count(hf(e)-1,e),t,2)}function vG(e,t){return la(e.getFullYear()%100,t,2)}function yG(e,t){return e=LL(e),la(e.getFullYear()%100,t,2)}function bG(e,t){return la(e.getFullYear()%1e4,t,4)}function wG(e,t){var r=e.getDay();return e=r>=4||r===0?bp(e):bp.ceil(e),la(e.getFullYear()%1e4,t,4)}function NG(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+la(t/60|0,"0",2)+la(t%60,"0",2)}function bT(e,t){return la(e.getUTCDate(),t,2)}function jG(e,t){return la(e.getUTCHours(),t,2)}function kG(e,t){return la(e.getUTCHours()%12||12,t,2)}function SG(e,t){return la(1+Py.count(pf(e),e),t,3)}function FL(e,t){return la(e.getUTCMilliseconds(),t,3)}function _G(e,t){return FL(e,t)+"000"}function AG(e,t){return la(e.getUTCMonth()+1,t,2)}function EG(e,t){return la(e.getUTCMinutes(),t,2)}function CG(e,t){return la(e.getUTCSeconds(),t,2)}function TG(e){var t=e.getUTCDay();return t===0?7:t}function OG(e,t){return la(Dy.count(pf(e)-1,e),t,2)}function ML(e){var t=e.getUTCDay();return t>=4||t===0?wp(e):wp.ceil(e)}function PG(e,t){return e=ML(e),la(wp.count(pf(e),e)+(pf(e).getUTCDay()===4),t,2)}function IG(e){return e.getUTCDay()}function DG(e,t){return la(w1.count(pf(e)-1,e),t,2)}function LG(e,t){return la(e.getUTCFullYear()%100,t,2)}function FG(e,t){return e=ML(e),la(e.getUTCFullYear()%100,t,2)}function MG(e,t){return la(e.getUTCFullYear()%1e4,t,4)}function RG(e,t){var r=e.getUTCDay();return e=r>=4||r===0?wp(e):wp.ceil(e),la(e.getUTCFullYear()%1e4,t,4)}function BG(){return"+0000"}function wT(){return"%"}function NT(e){return+e}function jT(e){return Math.floor(+e/1e3)}var qh,RL,BL;UG({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function UG(e){return qh=UV(e),RL=qh.format,qh.parse,BL=qh.utcFormat,qh.utcParse,qh}function qG(e){return new Date(e)}function $G(e){return e instanceof Date?+e:+new Date(+e)}function m3(e,t,r,n,s,i,o,l,c,u){var f=t3(),d=f.invert,m=f.domain,p=u(".%L"),y=u(":%S"),v=u("%I:%M"),g=u("%I %p"),b=u("%a %d"),N=u("%b %d"),j=u("%B"),w=u("%Y");function S(P){return(c(P)<P?p:l(P)<P?y:o(P)<P?v:i(P)<P?g:n(P)<P?s(P)<P?b:N:r(P)<P?j:w)(P)}return f.invert=function(P){return new Date(d(P))},f.domain=function(P){return arguments.length?m(Array.from(P,$G)):m().map(qG)},f.ticks=function(P){var A=m();return e(A[0],A[A.length-1],P??10)},f.tickFormat=function(P,A){return A==null?S:u(A)},f.nice=function(P){var A=m();return(!P||typeof P.range!="function")&&(P=t(A[0],A[A.length-1],P??10)),P?m(SL(A,P)):f},f.copy=function(){return cg(f,m3(e,t,r,n,s,i,o,l,c,u))},f}function zG(){return lu.apply(m3(RV,BV,hf,h3,Iy,ug,d3,c3,B0,RL).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function HG(){return lu.apply(m3(FV,MV,pf,p3,Dy,Py,f3,u3,B0,BL).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ly(){var e=0,t=1,r,n,s,i,o=yl,l=!1,c;function u(d){return d==null||isNaN(d=+d)?c:o(s===0?.5:(d=(i(d)-r)*s,l?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(d){return arguments.length?(l=!!d,u):l},u.interpolator=function(d){return arguments.length?(o=d,u):o};function f(d){return function(m){var p,y;return arguments.length?([p,y]=m,o=d(p,y),u):[o(0),o(1)]}}return u.range=f(Vp),u.rangeRound=f(e3),u.unknown=function(d){return arguments.length?(c=d,u):c},function(d){return i=d,r=d(e),n=d(t),s=r===n?0:1/(n-r),u}}function m0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function UL(){var e=p0(Ly()(yl));return e.copy=function(){return m0(e,UL())},yf.apply(e,arguments)}function qL(){var e=a3(Ly()).domain([1,10]);return e.copy=function(){return m0(e,qL()).base(e.base())},yf.apply(e,arguments)}function $L(){var e=s3(Ly());return e.copy=function(){return m0(e,$L()).constant(e.constant())},yf.apply(e,arguments)}function x3(){var e=i3(Ly());return e.copy=function(){return m0(e,x3()).exponent(e.exponent())},yf.apply(e,arguments)}function WG(){return x3.apply(null,arguments).exponent(.5)}function zL(){var e=[],t=yl;function r(n){if(n!=null&&!isNaN(n=+n))return t((og(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(t0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>OW(e,i/n))},r.copy=function(){return zL(t).domain(e)},yf.apply(r,arguments)}function Fy(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,u=yl,f,d=!1,m;function p(v){return isNaN(v=+v)?m:(v=.5+((v=+f(v))-i)*(n*v<n*i?l:c),u(d?Math.max(0,Math.min(1,v)):v))}p.domain=function(v){return arguments.length?([e,t,r]=v,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p):[e,t,r]},p.clamp=function(v){return arguments.length?(d=!!v,p):d},p.interpolator=function(v){return arguments.length?(u=v,p):u};function y(v){return function(g){var b,N,j;return arguments.length?([b,N,j]=g,u=nV(v,[b,N,j]),p):[u(0),u(.5),u(1)]}}return p.range=y(Vp),p.rangeRound=y(e3),p.unknown=function(v){return arguments.length?(m=v,p):m},function(v){return f=v,s=v(e),i=v(t),o=v(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,p}}function HL(){var e=p0(Fy()(yl));return e.copy=function(){return m0(e,HL())},yf.apply(e,arguments)}function WL(){var e=a3(Fy()).domain([.1,1,10]);return e.copy=function(){return m0(e,WL()).base(e.base())},yf.apply(e,arguments)}function VL(){var e=s3(Fy());return e.copy=function(){return m0(e,VL()).constant(e.constant())},yf.apply(e,arguments)}function g3(){var e=i3(Fy());return e.copy=function(){return m0(e,g3()).exponent(e.exponent())},yf.apply(e,arguments)}function VG(){return g3.apply(null,arguments).exponent(.5)}const kT=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:fx,scaleDiverging:HL,scaleDivergingLog:WL,scaleDivergingPow:g3,scaleDivergingSqrt:VG,scaleDivergingSymlog:VL,scaleIdentity:kL,scaleImplicit:t4,scaleLinear:v1,scaleLog:_L,scaleOrdinal:Jk,scalePoint:$m,scalePow:o3,scaleQuantile:CL,scaleQuantize:TL,scaleRadial:EL,scaleSequential:UL,scaleSequentialLog:qL,scaleSequentialPow:x3,scaleSequentialQuantile:zL,scaleSequentialSqrt:WG,scaleSequentialSymlog:$L,scaleSqrt:_V,scaleSymlog:AL,scaleThreshold:OL,scaleTime:zG,scaleUtc:HG,tickFormat:jL},Symbol.toStringTag,{value:"Module"}));var uN,ST;function GL(){if(ST)return uN;ST=1;var e=qp();function t(r,n,s){for(var i=-1,o=r.length;++i<o;){var l=r[i],c=n(l);if(c!=null&&(u===void 0?c===c&&!e(c):s(c,u)))var u=c,f=l}return f}return uN=t,uN}var dN,_T;function GG(){if(_T)return dN;_T=1;function e(t,r){return t>r}return dN=e,dN}var fN,AT;function KG(){if(AT)return fN;AT=1;var e=GL(),t=GG(),r=Hp();function n(s){return s&&s.length?e(s,r,t):void 0}return fN=n,fN}var XG=KG();const Kf=Aa(XG);var hN,ET;function YG(){if(ET)return hN;ET=1;function e(t,r){return t<r}return hN=e,hN}var pN,CT;function JG(){if(CT)return pN;CT=1;var e=GL(),t=YG(),r=Hp();function n(s){return s&&s.length?e(s,r,t):void 0}return pN=n,pN}var QG=JG();const My=Aa(QG);var mN,TT;function ZG(){if(TT)return mN;TT=1;var e=Ik(),t=h0(),r=rL(),n=Vl();function s(i,o){var l=n(i)?e:r;return l(i,t(o,3))}return mN=s,mN}var xN,OT;function eK(){if(OT)return xN;OT=1;var e=eL(),t=ZG();function r(n,s){return e(t(n,s),1)}return xN=r,xN}var tK=eK();const rK=Aa(tK);var gN,PT;function KL(){if(PT)return gN;PT=1;var e=Vk();function t(r,n){return e(r,n)}return gN=t,gN}var nK=KL();const gx=Aa(nK);var Gp=1e9,aK={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},y3,ds=!0,su="[DecimalError] ",K0=su+"Invalid argument: ",v3=su+"Exponent out of range: ",Kp=Math.floor,I0=Math.pow,sK=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,pc,Wi=1e7,ns=7,XL=9007199254740991,N1=Kp(XL/ns),Pr={};Pr.absoluteValue=Pr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Pr.comparedTo=Pr.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};Pr.decimalPlaces=Pr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*ns;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Pr.dividedBy=Pr.div=function(e){return of(this,new this.constructor(e))};Pr.dividedToIntegerBy=Pr.idiv=function(e){var t=this,r=t.constructor;return qa(of(t,new r(e),0,1),r.precision)};Pr.equals=Pr.eq=function(e){return!this.cmp(e)};Pr.exponent=function(){return vi(this)};Pr.greaterThan=Pr.gt=function(e){return this.cmp(e)>0};Pr.greaterThanOrEqualTo=Pr.gte=function(e){return this.cmp(e)>=0};Pr.isInteger=Pr.isint=function(){return this.e>this.d.length-2};Pr.isNegative=Pr.isneg=function(){return this.s<0};Pr.isPositive=Pr.ispos=function(){return this.s>0};Pr.isZero=function(){return this.s===0};Pr.lessThan=Pr.lt=function(e){return this.cmp(e)<0};Pr.lessThanOrEqualTo=Pr.lte=function(e){return this.cmp(e)<1};Pr.logarithm=Pr.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(pc))throw Error(su+"NaN");if(r.s<1)throw Error(su+(r.s?"NaN":"-Infinity"));return r.eq(pc)?new n(0):(ds=!1,t=of(vx(r,i),vx(e,i),i),ds=!0,qa(t,s))};Pr.minus=Pr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QL(t,e):YL(t,(e.s=-e.s,e))};Pr.modulo=Pr.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(su+"NaN");return r.s?(ds=!1,t=of(r,e,0,1).times(e),ds=!0,r.minus(t)):qa(new n(r),s)};Pr.naturalExponential=Pr.exp=function(){return JL(this)};Pr.naturalLogarithm=Pr.ln=function(){return vx(this)};Pr.negated=Pr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Pr.plus=Pr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?YL(t,e):QL(t,(e.s=-e.s,e))};Pr.precision=Pr.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(K0+e);if(t=vi(s)+1,n=s.d.length-1,r=n*ns+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Pr.squareRoot=Pr.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(su+"NaN")}for(e=vi(l),ds=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=hd(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Kp((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(of(l,i,o+2)).times(.5),hd(i.d).slice(0,o)===(t=hd(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(qa(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return ds=!0,qa(n,r)};Pr.times=Pr.mul=function(e){var t,r,n,s,i,o,l,c,u,f=this,d=f.constructor,m=f.d,p=(e=new d(e)).d;if(!f.s||!e.s)return new d(0);for(e.s*=f.s,r=f.e+e.e,c=m.length,u=p.length,c<u&&(i=m,m=p,p=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+p[n]*m[s-n-1]+t,i[s--]=l%Wi|0,t=l/Wi|0;i[s]=(i[s]+t)%Wi|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,ds?qa(e,d.precision):e};Pr.toDecimalPlaces=Pr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(_d(e,0,Gp),t===void 0?t=n.rounding:_d(t,0,8),qa(r,e+vi(r)+1,t))};Pr.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=th(n,!0):(_d(e,0,Gp),t===void 0?t=s.rounding:_d(t,0,8),n=qa(new s(n),e+1,t),r=th(n,!0,e+1)),r};Pr.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?th(s):(_d(e,0,Gp),t===void 0?t=i.rounding:_d(t,0,8),n=qa(new i(s),e+vi(s)+1,t),r=th(n.abs(),!1,e+vi(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};Pr.toInteger=Pr.toint=function(){var e=this,t=e.constructor;return qa(new t(e),vi(e)+1,t.rounding)};Pr.toNumber=function(){return+this};Pr.toPower=Pr.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,u=12,f=+(e=new c(e));if(!e.s)return new c(pc);if(l=new c(l),!l.s){if(e.s<1)throw Error(su+"Infinity");return l}if(l.eq(pc))return l;if(n=c.precision,e.eq(pc))return qa(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=XL){for(s=new c(pc),t=Math.ceil(n/ns+4),ds=!1;r%2&&(s=s.times(l),DT(s.d,t)),r=Kp(r/2),r!==0;)l=l.times(l),DT(l.d,t);return ds=!0,e.s<0?new c(pc).div(s):qa(s,n)}}else if(i<0)throw Error(su+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ds=!1,s=e.times(vx(l,n+u)),ds=!0,s=JL(s),s.s=i,s};Pr.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=vi(s),n=th(s,r<=i.toExpNeg||r>=i.toExpPos)):(_d(e,1,Gp),t===void 0?t=i.rounding:_d(t,0,8),s=qa(new i(s),e,t),r=vi(s),n=th(s,e<=r||r<=i.toExpNeg,e)),n};Pr.toSignificantDigits=Pr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(_d(e,1,Gp),t===void 0?t=n.rounding:_d(t,0,8)),qa(new n(r),e,t)};Pr.toString=Pr.valueOf=Pr.val=Pr.toJSON=Pr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=vi(e),r=e.constructor;return th(e,t<=r.toExpNeg||t>=r.toExpPos)};function YL(e,t){var r,n,s,i,o,l,c,u,f=e.constructor,d=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),ds?qa(t,d):t;if(c=e.d,u=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,s=o,l=c.length),o=Math.ceil(d/ns),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/Wi|0,c[i]%=Wi;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,ds?qa(t,d):t}function _d(e,t,r){if(e!==~~e||e<t||e>r)throw Error(K0+e)}function hd(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=ns-n.length,r&&(i+=Wf(r)),i+=n;o=e[t],n=o+"",r=ns-n.length,r&&(i+=Wf(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var of=(function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%Wi|0,o=i/Wi|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*Wi+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,u,f,d,m,p,y,v,g,b,N,j,w,S,P,A,T,I=n.constructor,B=n.s==s.s?1:-1,E=n.d,C=s.d;if(!n.s)return new I(n);if(!s.s)throw Error(su+"Division by zero");for(c=n.e-s.e,A=C.length,S=E.length,p=new I(B),y=p.d=[],u=0;C[u]==(E[u]||0);)++u;if(C[u]>(E[u]||0)&&--c,i==null?N=i=I.precision:o?N=i+(vi(n)-vi(s))+1:N=i,N<0)return new I(0);if(N=N/ns+2|0,u=0,A==1)for(f=0,C=C[0],N++;(u<S||f)&&N--;u++)j=f*Wi+(E[u]||0),y[u]=j/C|0,f=j%C|0;else{for(f=Wi/(C[0]+1)|0,f>1&&(C=e(C,f),E=e(E,f),A=C.length,S=E.length),w=A,v=E.slice(0,A),g=v.length;g<A;)v[g++]=0;T=C.slice(),T.unshift(0),P=C[0],C[1]>=Wi/2&&++P;do f=0,l=t(C,v,A,g),l<0?(b=v[0],A!=g&&(b=b*Wi+(v[1]||0)),f=b/P|0,f>1?(f>=Wi&&(f=Wi-1),d=e(C,f),m=d.length,g=v.length,l=t(d,v,m,g),l==1&&(f--,r(d,A<m?T:C,m))):(f==0&&(l=f=1),d=C.slice()),m=d.length,m<g&&d.unshift(0),r(v,d,g),l==-1&&(g=v.length,l=t(C,v,A,g),l<1&&(f++,r(v,A<g?T:C,g))),g=v.length):l===0&&(f++,v=[0]),y[u++]=f,l&&v[0]?v[g++]=E[w]||0:(v=[E[w]],g=1);while((w++<S||v[0]!==void 0)&&N--)}return y[0]||y.shift(),p.e=c,qa(p,o?i+vi(p)+1:i)}})();function JL(e,t){var r,n,s,i,o,l,c=0,u=0,f=e.constructor,d=f.precision;if(vi(e)>16)throw Error(v3+vi(e));if(!e.s)return new f(pc);for(ds=!1,l=d,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(I0(2,u))/Math.LN10*2+5|0,l+=n,r=s=i=new f(pc),f.precision=l;;){if(s=qa(s.times(e),l),r=r.times(++c),o=i.plus(of(s,r,l)),hd(o.d).slice(0,l)===hd(i.d).slice(0,l)){for(;u--;)i=qa(i.times(i),l);return f.precision=d,t==null?(ds=!0,qa(i,d)):i}i=o}}function vi(e){for(var t=e.e*ns,r=e.d[0];r>=10;r/=10)t++;return t}function vN(e,t,r){if(t>e.LN10.sd())throw ds=!0,r&&(e.precision=r),Error(su+"LN10 precision limit exceeded");return qa(new e(e.LN10),t)}function Wf(e){for(var t="";e--;)t+="0";return t}function vx(e,t){var r,n,s,i,o,l,c,u,f,d=1,m=10,p=e,y=p.d,v=p.constructor,g=v.precision;if(p.s<1)throw Error(su+(p.s?"NaN":"-Infinity"));if(p.eq(pc))return new v(0);if(t==null?(ds=!1,u=g):u=t,p.eq(10))return t==null&&(ds=!0),vN(v,u);if(u+=m,v.precision=u,r=hd(y),n=r.charAt(0),i=vi(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=hd(p.d),n=r.charAt(0),d++;i=vi(p),n>1?(p=new v("0."+r),i++):p=new v(n+"."+r.slice(1))}else return c=vN(v,u+2,g).times(i+""),p=vx(new v(n+"."+r.slice(1)),u-m).plus(c),v.precision=g,t==null?(ds=!0,qa(p,g)):p;for(l=o=p=of(p.minus(pc),p.plus(pc),u),f=qa(p.times(p),u),s=3;;){if(o=qa(o.times(f),u),c=l.plus(of(o,new v(s),u)),hd(c.d).slice(0,u)===hd(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(vN(v,u+2,g).times(i+""))),l=of(l,new v(d),u),v.precision=g,t==null?(ds=!0,qa(l,g)):l;l=c,s+=2}}function IT(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Kp(r/ns),e.d=[],n=(r+1)%ns,r<0&&(n+=ns),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=ns;n<s;)e.d.push(+t.slice(n,n+=ns));t=t.slice(n),n=ns-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),ds&&(e.e>N1||e.e<-N1))throw Error(v3+r)}else e.s=0,e.e=0,e.d=[0];return e}function qa(e,t,r){var n,s,i,o,l,c,u,f,d=e.d;for(o=1,i=d[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=ns,s=t,u=d[f=0];else{if(f=Math.ceil((n+1)/ns),i=d.length,f>=i)return e;for(u=i=d[f],o=1;i>=10;i/=10)o++;n%=ns,s=n-ns+o}if(r!==void 0&&(i=I0(10,o-s-1),l=u/i%10|0,c=t<0||d[f+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?u/I0(10,o-s):0:d[f-1])%10&1||r==(e.s<0?8:7))),t<1||!d[0])return c?(i=vi(e),d.length=1,t=t-i-1,d[0]=I0(10,(ns-t%ns)%ns),e.e=Kp(-t/ns)||0):(d.length=1,d[0]=e.e=e.s=0),e;if(n==0?(d.length=f,i=1,f--):(d.length=f+1,i=I0(10,ns-n),d[f]=s>0?(u/I0(10,o-s)%I0(10,s)|0)*i:0),c)for(;;)if(f==0){(d[0]+=i)==Wi&&(d[0]=1,++e.e);break}else{if(d[f]+=i,d[f]!=Wi)break;d[f--]=0,i=1}for(n=d.length;d[--n]===0;)d.pop();if(ds&&(e.e>N1||e.e<-N1))throw Error(v3+vi(e));return e}function QL(e,t){var r,n,s,i,o,l,c,u,f,d,m=e.constructor,p=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),ds?qa(t,p):t;if(c=e.d,d=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(f=o<0,f?(r=c,o=-o,l=d.length):(r=d,n=u,l=c.length),s=Math.max(Math.ceil(p/ns),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=d.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(c[s]!=d[s]){f=c[s]<d[s];break}o=0}for(f&&(r=c,c=d,d=r,t.s=-t.s),l=c.length,s=d.length-l;s>0;--s)c[l++]=0;for(s=d.length;s>o;){if(c[--s]<d[s]){for(i=s;i&&c[--i]===0;)c[i]=Wi-1;--c[i],c[s]+=Wi}c[s]-=d[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ds?qa(t,p):t):new m(0)}function th(e,t,r){var n,s=vi(e),i=hd(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Wf(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Wf(-s-1)+i,r&&(n=r-o)>0&&(i+=Wf(n))):s>=o?(i+=Wf(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Wf(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Wf(n))),e.s<0?"-"+i:i}function DT(e,t){if(e.length>t)return e.length=t,!0}function ZL(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(K0+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return IT(o,i.toString())}else if(typeof i!="string")throw Error(K0+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,sK.test(i))IT(o,i);else throw Error(K0+i)}if(s.prototype=Pr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=ZL,s.config=s.set=iK,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function iK(e){if(!e||typeof e!="object")throw Error(su+"Object expected");var t,r,n,s=["precision",1,Gp,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Kp(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(K0+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(K0+r+": "+n);return this}var y3=ZL(aK);pc=new y3(1);const Ra=y3;function oK(e){return dK(e)||uK(e)||cK(e)||lK()}function lK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cK(e,t){if(e){if(typeof e=="string")return s4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s4(e,t)}}function uK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function dK(e){if(Array.isArray(e))return s4(e)}function s4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fK=function(t){return t},eF={},tF=function(t){return t===eF},LT=function(t){return function r(){return arguments.length===0||arguments.length===1&&tF(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},hK=function e(t,r){return t===1?r:LT(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==eF}).length;return o>=t?r.apply(void 0,s):e(t-o,LT(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var f=s.map(function(d){return tF(d)?c.shift():d});return r.apply(void 0,oK(f).concat(c))}))})},Ry=function(t){return hK(t.length,t)},i4=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},pK=Ry(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),mK=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return fK;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},o4=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},rF=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function xK(e){var t;return e===0?t=1:t=Math.floor(new Ra(e).abs().log(10).toNumber())+1,t}function gK(e,t,r){for(var n=new Ra(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var vK=Ry(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),yK=Ry(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),bK=Ry(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const By={rangeStep:gK,getDigitCount:xK,interpolateNumber:vK,uninterpolateNumber:yK,uninterpolateTruncation:bK};function l4(e){return jK(e)||NK(e)||nF(e)||wK()}function wK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NK(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function jK(e){if(Array.isArray(e))return c4(e)}function yx(e,t){return _K(e)||SK(e,t)||nF(e,t)||kK()}function kK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nF(e,t){if(e){if(typeof e=="string")return c4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c4(e,t)}}function c4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function SK(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function _K(e){if(Array.isArray(e))return e}function aF(e){var t=yx(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function sF(e,t,r){if(e.lte(0))return new Ra(0);var n=By.getDigitCount(e.toNumber()),s=new Ra(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new Ra(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new Ra(Math.ceil(c))}function AK(e,t,r){var n=1,s=new Ra(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new Ra(10).pow(By.getDigitCount(e)-1),s=new Ra(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new Ra(Math.floor(e)))}else e===0?s=new Ra(Math.floor((t-1)/2)):r||(s=new Ra(Math.floor(e)));var o=Math.floor((t-1)/2),l=mK(pK(function(c){return s.add(new Ra(c-o).mul(n)).toNumber()}),i4);return l(0,t)}function iF(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ra(0),tickMin:new Ra(0),tickMax:new Ra(0)};var i=sF(new Ra(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new Ra(0):(o=new Ra(e).add(t).div(2),o=o.sub(new Ra(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Ra(t).sub(o).div(i).toNumber()),u=l+c+1;return u>r?iF(e,t,r,n,s+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:i,tickMin:o.sub(new Ra(l).mul(i)),tickMax:o.add(new Ra(c).mul(i))})}function EK(e){var t=yx(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=aF([r,n]),c=yx(l,2),u=c[0],f=c[1];if(u===-1/0||f===1/0){var d=f===1/0?[u].concat(l4(i4(0,s-1).map(function(){return 1/0}))):[].concat(l4(i4(0,s-1).map(function(){return-1/0})),[f]);return r>n?o4(d):d}if(u===f)return AK(u,s,i);var m=iF(u,f,o,i),p=m.step,y=m.tickMin,v=m.tickMax,g=By.rangeStep(y,v.add(new Ra(.1).mul(p)),p);return r>n?o4(g):g}function CK(e,t){var r=yx(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=aF([n,s]),l=yx(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,s];if(c===u)return[c];var f=Math.max(t,2),d=sF(new Ra(u).sub(c).div(f-1),i,0),m=[].concat(l4(By.rangeStep(new Ra(c),new Ra(u).sub(new Ra(.99).mul(d)),d)),[u]);return n>s?o4(m):m}var TK=rF(EK),OK=rF(CK),PK="Invariant failed";function rh(e,t){throw new Error(PK)}var IK=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Np(e){"@babel/helpers - typeof";return Np=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Np(e)}function j1(){return j1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},j1.apply(this,arguments)}function DK(e,t){return RK(e)||MK(e,t)||FK(e,t)||LK()}function LK(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function FK(e,t){if(e){if(typeof e=="string")return FT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FT(e,t)}}function FT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MK(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function RK(e){if(Array.isArray(e))return e}function BK(e,t){if(e==null)return{};var r=UK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function qK(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function $K(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,cF(n.key),n)}}function zK(e,t,r){return t&&$K(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function HK(e,t,r){return t=k1(t),WK(e,oF()?Reflect.construct(t,r||[],k1(e).constructor):t.apply(e,r))}function WK(e,t){if(t&&(Np(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return VK(e)}function VK(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oF=function(){return!!e})()}function k1(e){return k1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},k1(e)}function GK(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u4(e,t)}function u4(e,t){return u4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},u4(e,t)}function lF(e,t,r){return t=cF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cF(e){var t=KK(e,"string");return Np(t)=="symbol"?t:t+""}function KK(e,t){if(Np(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Np(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Uy=(function(e){function t(){return qK(this,t),HK(this,t,arguments)}return GK(t,e),zK(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,f=n.xAxis,d=n.yAxis,m=BK(n,IK),p=Bn(m,!1);this.props.direction==="x"&&f.type!=="number"&&rh();var y=c.map(function(v){var g=u(v,l),b=g.x,N=g.y,j=g.value,w=g.errorVal;if(!w)return null;var S=[],P,A;if(Array.isArray(w)){var T=DK(w,2);P=T[0],A=T[1]}else P=A=w;if(i==="vertical"){var I=f.scale,B=N+s,E=B+o,C=B-o,M=I(j-P),q=I(j+A);S.push({x1:q,y1:E,x2:q,y2:C}),S.push({x1:M,y1:B,x2:q,y2:B}),S.push({x1:M,y1:E,x2:M,y2:C})}else if(i==="horizontal"){var G=d.scale,Z=b+s,te=Z-o,ne=Z+o,J=G(j-P),ee=G(j+A);S.push({x1:te,y1:ee,x2:ne,y2:ee}),S.push({x1:Z,y1:J,x2:Z,y2:ee}),S.push({x1:te,y1:J,x2:ne,y2:J})}return at.createElement(Ss,j1({className:"recharts-errorBar",key:"bar-".concat(S.map(function(H){return"".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))},p),S.map(function(H){return at.createElement("line",j1({},H,{key:"line-".concat(H.x1,"-").concat(H.x2,"-").concat(H.y1,"-").concat(H.y2)}))}))});return at.createElement(Ss,{className:"recharts-errorBars"},y)}}])})(at.Component);lF(Uy,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});lF(Uy,"displayName","ErrorBar");function bx(e){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bx(e)}function MT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function T0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MT(Object(r),!0).forEach(function(n){XK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XK(e,t,r){return t=YK(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YK(e){var t=JK(e,"string");return bx(t)=="symbol"?t:t+""}function JK(e,t){if(bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uF=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=dc(r,np);if(!o)return null;var l=np.defaultProps,c=l!==void 0?T0(T0({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:i==="children"?u=(n||[]).reduce(function(f,d){var m=d.item,p=d.props,y=p.sectors||p.data||[];return f.concat(y.map(function(v){return{type:o.props.iconType||m.props.legendType,value:v.name,color:v.fill,payload:v}}))},[]):u=(n||[]).map(function(f){var d=f.item,m=d.type.defaultProps,p=m!==void 0?T0(T0({},m),d.props):{},y=p.dataKey,v=p.name,g=p.legendType,b=p.hide;return{inactive:b,dataKey:y,type:c.iconType||g||"square",color:b3(d),value:v||y,payload:p}}),T0(T0(T0({},c),np.getWithHeight(o,s)),{},{payload:u,item:o})};function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}function RT(e){return tX(e)||eX(e)||ZK(e)||QK()}function QK(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZK(e,t){if(e){if(typeof e=="string")return d4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return d4(e,t)}}function eX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function tX(e){if(Array.isArray(e))return d4(e)}function d4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function BT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Fs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BT(Object(r),!0).forEach(function(n){sp(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sp(e,t,r){return t=rX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rX(e){var t=nX(e,"string");return wx(t)=="symbol"?t:t+""}function nX(e,t){if(wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function yc(e,t,r){return Gn(e)||Gn(t)?r:Pi(t)?nu(e,t,r):Cn(t)?t(e):r}function zm(e,t,r,n){var s=rK(e,function(l){return yc(l,t)});if(r==="number"){var i=s.filter(function(l){return hr(l)||parseFloat(l)});return i.length?[My(i),Kf(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!Gn(l)}):s;return o.map(function(l){return Pi(l)||l instanceof Date?l:""})}var aX=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n?.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,u=0;u<l;u++){var f=u>0?s[u-1].coordinate:s[l-1].coordinate,d=s[u].coordinate,m=u>=l-1?s[0].coordinate:s[u+1].coordinate,p=void 0;if(Lu(d-f)!==Lu(m-d)){var y=[];if(Lu(m-d)===Lu(c[1]-c[0])){p=m;var v=d+c[1]-c[0];y[0]=Math.min(v,(v+f)/2),y[1]=Math.max(v,(v+f)/2)}else{p=f;var g=m+c[1]-c[0];y[0]=Math.min(d,(g+d)/2),y[1]=Math.max(d,(g+d)/2)}var b=[Math.min(d,(p+d)/2),Math.max(d,(p+d)/2)];if(t>b[0]&&t<=b[1]||t>=y[0]&&t<=y[1]){o=s[u].index;break}}else{var N=Math.min(f,m),j=Math.max(f,m);if(t>(N+d)/2&&t<=(j+d)/2){o=s[u].index;break}}}else for(var w=0;w<l;w++)if(w===0&&t<=(n[w].coordinate+n[w+1].coordinate)/2||w>0&&w<l-1&&t>(n[w].coordinate+n[w-1].coordinate)/2&&t<=(n[w].coordinate+n[w+1].coordinate)/2||w===l-1&&t>(n[w].coordinate+n[w-1].coordinate)/2){o=n[w].index;break}return o},b3=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?Fs(Fs({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},sX=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,u=l.length;c<u;c++)for(var f=i[l[c]].stackGroups,d=Object.keys(f),m=0,p=d.length;m<p;m++){var y=f[d[m]],v=y.items,g=y.cateAxisId,b=v.filter(function(A){return af(A.type).indexOf("Bar")>=0});if(b&&b.length){var N=b[0].type.defaultProps,j=N!==void 0?Fs(Fs({},N),b[0].props):b[0].props,w=j.barSize,S=j[g];o[S]||(o[S]=[]);var P=Gn(w)?r:w;o[S].push({item:b[0],stackList:b.slice(1),barSize:Gn(P)?void 0:eh(P,n,0)})}}return o},iX=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=eh(r,s,0,!0),f,d=[];if(o[0].barSize===+o[0].barSize){var m=!1,p=s/c,y=o.reduce(function(w,S){return w+S.barSize||0},0);y+=(c-1)*u,y>=s&&(y-=(c-1)*u,u=0),y>=s&&p>0&&(m=!0,p*=.9,y=c*p);var v=(s-y)/2>>0,g={offset:v-u,size:0};f=o.reduce(function(w,S){var P={item:S.item,position:{offset:g.offset+g.size+u,size:m?p:S.barSize}},A=[].concat(RT(w),[P]);return g=A[A.length-1].position,S.stackList&&S.stackList.length&&S.stackList.forEach(function(T){A.push({item:T,position:g})}),A},d)}else{var b=eh(n,s,0,!0);s-2*b-(c-1)*u<=0&&(u=0);var N=(s-2*b-(c-1)*u)/c;N>1&&(N>>=0);var j=l===+l?Math.min(N,l):N;f=o.reduce(function(w,S,P){var A=[].concat(RT(w),[{item:S.item,position:{offset:b+(N+u)*P+(N-j)/2,size:j}}]);return S.stackList&&S.stackList.length&&S.stackList.forEach(function(T){A.push({item:T,position:A[A.length-1].position})}),A},d)}return f},oX=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=uF({children:i,legendWidth:c});if(u){var f=s||{},d=f.width,m=f.height,p=u.align,y=u.verticalAlign,v=u.layout;if((v==="vertical"||v==="horizontal"&&y==="middle")&&p!=="center"&&hr(t[p]))return Fs(Fs({},t),{},sp({},p,t[p]+(d||0)));if((v==="horizontal"||v==="vertical"&&p==="center")&&y!=="middle"&&hr(t[y]))return Fs(Fs({},t),{},sp({},y,t[y]+(m||0)))}return t},lX=function(t,r,n){return Gn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},dF=function(t,r,n,s,i){var o=r.props.children,l=Bu(o,Uy).filter(function(u){return lX(s,i,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,f){var d=yc(f,n);if(Gn(d))return u;var m=Array.isArray(d)?[My(d),Kf(d)]:[d,d],p=c.reduce(function(y,v){var g=yc(f,v,0),b=m[0]-Math.abs(Array.isArray(g)?g[0]:g),N=m[1]+Math.abs(Array.isArray(g)?g[1]:g);return[Math.min(b,y[0]),Math.max(N,y[1])]},[1/0,-1/0]);return[Math.min(p[0],u[0]),Math.max(p[1],u[1])]},[1/0,-1/0])}return null},cX=function(t,r,n,s,i){var o=r.map(function(l){return dF(t,l,n,i,s)}).filter(function(l){return!Gn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},fF=function(t,r,n,s,i){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&dF(t,c,u,s)||zm(t,u,n,i)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var f=0,d=u.length;f<d;f++)l[u[f]]||(l[u[f]]=!0,c.push(u[f]));return c},[])},hF=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},pF=function(t,r,n,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},Qd=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,u=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&l?.length>=2?Lu(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(d){var m=i?i.indexOf(d):d;return{coordinate:s(m)+u,value:d,offset:u}});return f.filter(function(d){return!zp(d.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(d,m){return{coordinate:s(d)+u,value:d,index:m,offset:u}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(d){return{coordinate:s(d)+u,value:d,offset:u}}):s.domain().map(function(d,m){return{coordinate:s(d)+u,value:i?i[d]:d,index:m,offset:u}})},yN=new WeakMap,nv=function(t,r){if(typeof r!="function")return t;yN.has(t)||yN.set(t,new WeakMap);var n=yN.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},uX=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:fx(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:v1(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:$m(),realScaleType:"point"}:i==="category"?{scale:fx(),realScaleType:"band"}:{scale:v1(),realScaleType:"linear"};if(ag(s)){var c="scale".concat(ky(s));return{scale:(kT[c]||$m)(),realScaleType:kT[c]?c:"point"}}return Cn(s)?{scale:s}:{scale:$m(),realScaleType:"point"}},UT=1e-4,dX=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-UT,o=Math.max(s[0],s[1])+UT,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},fX=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},hX=function(t,r){if(!r||r.length!==2||!hr(r[0])||!hr(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!hr(t[0])||t[0]<n)&&(i[0]=n),(!hr(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},pX=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var c=zp(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},mX=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=zp(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},xX={sign:pX,expand:Zq,none:pp,silhouette:e$,wiggle:t$,positive:mX},gX=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=xX[n],o=Qq().keys(s).value(function(l,c){return+yc(l,c,0)}).order(qj).offset(i);return o(t)},vX=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(d,m){var p,y=(p=m.type)!==null&&p!==void 0&&p.defaultProps?Fs(Fs({},m.type.defaultProps),m.props):m.props,v=y.stackId,g=y.hide;if(g)return d;var b=y[n],N=d[b]||{hasStack:!1,stackGroups:{}};if(Pi(v)){var j=N.stackGroups[v]||{numericAxisId:n,cateAxisId:s,items:[]};j.items.push(m),N.hasStack=!0,N.stackGroups[v]=j}else N.stackGroups[sg("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[m]};return Fs(Fs({},d),{},sp({},b,N))},c),f={};return Object.keys(u).reduce(function(d,m){var p=u[m];if(p.hasStack){var y={};p.stackGroups=Object.keys(p.stackGroups).reduce(function(v,g){var b=p.stackGroups[g];return Fs(Fs({},v),{},sp({},g,{numericAxisId:n,cateAxisId:s,items:b.items,stackedData:gX(t,b.items,i)}))},y)}return Fs(Fs({},d),{},sp({},m,p))},f)},yX=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var f=TK(u,i,l);return t.domain([My(f),Kf(f)]),{niceTicks:f}}if(i&&s==="number"){var d=t.domain(),m=OK(d,i,l);return{niceTicks:m}}return null};function qT(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Gn(s[t.dataKey])){var l=Jv(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=yc(s,Gn(o)?t.dataKey:o);return Gn(c)?null:t.scale(c)}var $T=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=yc(o,r.dataKey,r.domain[l]);return Gn(c)?null:r.scale(c)-i/2+s},bX=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},wX=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?Fs(Fs({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(Pi(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},NX=function(t){return t.reduce(function(r,n){return[My(n.concat([r[0]]).filter(hr)),Kf(n.concat([r[1]]).filter(hr))]},[1/0,-1/0])},mF=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(u,f){var d=NX(f.slice(r,n+1));return[Math.min(u[0],d[0]),Math.max(u[1],d[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},zT=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,HT=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,f4=function(t,r,n){if(Cn(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(hr(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(zT.test(t[0])){var i=+zT.exec(t[0])[1];s[0]=r[0]-i}else Cn(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(hr(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(HT.test(t[1])){var o=+HT.exec(t[1])[1];s[1]=r[1]+o}else Cn(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},S1=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=Kk(r,function(d){return d.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var u=i[l],f=i[l-1];o=Math.min((u.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},WT=function(t,r,n){return!t||!t.length||gx(t,nu(n,"type.defaultProps.domain"))?r:t},xF=function(t,r){var n=t.type.defaultProps?Fs(Fs({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,f=n.hide;return Fs(Fs({},Bn(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:b3(t),value:yc(r,s),type:c,payload:r,chartType:u,hide:f})};function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function VT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function GT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?VT(Object(r),!0).forEach(function(n){jX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):VT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function jX(e,t,r){return t=kX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kX(e){var t=SX(e,"string");return Nx(t)=="symbol"?t:t+""}function SX(e,t){if(Nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _1=Math.PI/180,_X=function(t){return t*180/Math.PI},ho=function(t,r,n,s){return{x:t+Math.cos(-_1*s)*n,y:r+Math.sin(-_1*s)*n}},AX=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},EX=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=AX({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,u=Math.acos(c);return s>o&&(u=2*Math.PI-u),{radius:l,angle:_X(u),angleInRadian:u}},CX=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},TX=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},KT=function(t,r){var n=t.x,s=t.y,i=EX({x:n,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var f=CX(r),d=f.startAngle,m=f.endAngle,p=l,y;if(d<=m){for(;p>m;)p-=360;for(;p<d;)p+=360;y=p>=d&&p<=m}else{for(;p>d;)p-=360;for(;p<m;)p+=360;y=p>=m&&p<=d}return y?GT(GT({},r),{},{radius:o,angle:TX(p,r)}):null};function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}var OX=["offset"];function PX(e){return FX(e)||LX(e)||DX(e)||IX()}function IX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function DX(e,t){if(e){if(typeof e=="string")return h4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h4(e,t)}}function LX(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function FX(e){if(Array.isArray(e))return h4(e)}function h4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function MX(e,t){if(e==null)return{};var r=RX(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function RX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function XT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XT(Object(r),!0).forEach(function(n){BX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BX(e,t,r){return t=UX(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UX(e){var t=qX(e,"string");return jx(t)=="symbol"?t:t+""}function qX(e,t){if(jx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kx.apply(this,arguments)}var $X=function(t){var r=t.value,n=t.formatter,s=Gn(t.children)?r:t.children;return Cn(n)?n(s):s},zX=function(t,r){var n=Lu(r-t),s=Math.min(Math.abs(r-t),360);return n*s},HX=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,u=c.cx,f=c.cy,d=c.innerRadius,m=c.outerRadius,p=c.startAngle,y=c.endAngle,v=c.clockWise,g=(d+m)/2,b=zX(p,y),N=b>=0?1:-1,j,w;s==="insideStart"?(j=p+N*o,w=v):s==="insideEnd"?(j=y-N*o,w=!v):s==="end"&&(j=y+N*o,w=v),w=b<=0?w:!w;var S=ho(u,f,g,j),P=ho(u,f,g,j+(w?1:-1)*359),A="M".concat(S.x,",").concat(S.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(w?0:1,`,
    `).concat(P.x,",").concat(P.y),T=Gn(t.id)?sg("recharts-radial-line-"):t.id;return at.createElement("text",kx({},n,{dominantBaseline:"central",className:oa("recharts-radial-bar-label",l)}),at.createElement("defs",null,at.createElement("path",{id:T,d:A})),at.createElement("textPath",{xlinkHref:"#".concat(T)},r))},WX=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,u=i.outerRadius,f=i.startAngle,d=i.endAngle,m=(f+d)/2;if(s==="outside"){var p=ho(o,l,u+n,m),y=p.x,v=p.y;return{x:y,y:v,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var g=(c+u)/2,b=ho(o,l,g,m),N=b.x,j=b.y;return{x:N,y:j,textAnchor:"middle",verticalAnchor:"middle"}},VX=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,u=o.width,f=o.height,d=f>=0?1:-1,m=d*s,p=d>0?"end":"start",y=d>0?"start":"end",v=u>=0?1:-1,g=v*s,b=v>0?"end":"start",N=v>0?"start":"end";if(i==="top"){var j={x:l+u/2,y:c-d*s,textAnchor:"middle",verticalAnchor:p};return Ei(Ei({},j),n?{height:Math.max(c-n.y,0),width:u}:{})}if(i==="bottom"){var w={x:l+u/2,y:c+f+m,textAnchor:"middle",verticalAnchor:y};return Ei(Ei({},w),n?{height:Math.max(n.y+n.height-(c+f),0),width:u}:{})}if(i==="left"){var S={x:l-g,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return Ei(Ei({},S),n?{width:Math.max(S.x-n.x,0),height:f}:{})}if(i==="right"){var P={x:l+u+g,y:c+f/2,textAnchor:N,verticalAnchor:"middle"};return Ei(Ei({},P),n?{width:Math.max(n.x+n.width-P.x,0),height:f}:{})}var A=n?{width:u,height:f}:{};return i==="insideLeft"?Ei({x:l+g,y:c+f/2,textAnchor:N,verticalAnchor:"middle"},A):i==="insideRight"?Ei({x:l+u-g,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},A):i==="insideTop"?Ei({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:y},A):i==="insideBottom"?Ei({x:l+u/2,y:c+f-m,textAnchor:"middle",verticalAnchor:p},A):i==="insideTopLeft"?Ei({x:l+g,y:c+m,textAnchor:N,verticalAnchor:y},A):i==="insideTopRight"?Ei({x:l+u-g,y:c+m,textAnchor:b,verticalAnchor:y},A):i==="insideBottomLeft"?Ei({x:l+g,y:c+f-m,textAnchor:N,verticalAnchor:p},A):i==="insideBottomRight"?Ei({x:l+u-g,y:c+f-m,textAnchor:b,verticalAnchor:p},A):$p(i)&&(hr(i.x)||M0(i.x))&&(hr(i.y)||M0(i.y))?Ei({x:l+eh(i.x,u),y:c+eh(i.y,f),textAnchor:"end",verticalAnchor:"end"},A):Ei({x:l+u/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},A)},GX=function(t){return"cx"in t&&hr(t.cx)};function Fo(e){var t=e.offset,r=t===void 0?5:t,n=MX(e,OX),s=Ei({offset:r},n),i=s.viewBox,o=s.position,l=s.value,c=s.children,u=s.content,f=s.className,d=f===void 0?"":f,m=s.textBreakAll;if(!i||Gn(l)&&Gn(c)&&!z.isValidElement(u)&&!Cn(u))return null;if(z.isValidElement(u))return z.cloneElement(u,s);var p;if(Cn(u)){if(p=z.createElement(u,s),z.isValidElement(p))return p}else p=$X(s);var y=GX(i),v=Bn(s,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return HX(s,p,v);var g=y?WX(s):VX(s);return at.createElement(u1,kx({className:oa("recharts-label",d)},v,g,{breakAll:m}),p)}Fo.displayName="Label";var gF=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,f=t.outerRadius,d=t.x,m=t.y,p=t.top,y=t.left,v=t.width,g=t.height,b=t.clockWise,N=t.labelViewBox;if(N)return N;if(hr(v)&&hr(g)){if(hr(d)&&hr(m))return{x:d,y:m,width:v,height:g};if(hr(p)&&hr(y))return{x:p,y,width:v,height:g}}return hr(d)&&hr(m)?{x:d,y:m,width:0,height:0}:hr(r)&&hr(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:u||0,outerRadius:f||c||l||0,clockWise:b}:t.viewBox?t.viewBox:{}},KX=function(t,r){return t?t===!0?at.createElement(Fo,{key:"label-implicit",viewBox:r}):Pi(t)?at.createElement(Fo,{key:"label-implicit",viewBox:r,value:t}):z.isValidElement(t)?t.type===Fo?z.cloneElement(t,{key:"label-implicit",viewBox:r}):at.createElement(Fo,{key:"label-implicit",content:t,viewBox:r}):Cn(t)?at.createElement(Fo,{key:"label-implicit",content:t,viewBox:r}):$p(t)?at.createElement(Fo,kx({viewBox:r},t,{key:"label-implicit"})):null:null},XX=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=gF(t),o=Bu(s,Fo).map(function(c,u){return z.cloneElement(c,{viewBox:r||i,key:"label-".concat(u)})});if(!n)return o;var l=KX(t.label,r||i);return[l].concat(PX(o))};Fo.parseViewBox=gF;Fo.renderCallByParent=XX;var bN,YT;function YX(){if(YT)return bN;YT=1;function e(t){var r=t==null?0:t.length;return r?t[r-1]:void 0}return bN=e,bN}var JX=YX();const QX=Aa(JX);function Sx(e){"@babel/helpers - typeof";return Sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sx(e)}var ZX=["valueAccessor"],eY=["data","dataKey","clockWise","id","textBreakAll"];function tY(e){return sY(e)||aY(e)||nY(e)||rY()}function rY(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nY(e,t){if(e){if(typeof e=="string")return p4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p4(e,t)}}function aY(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sY(e){if(Array.isArray(e))return p4(e)}function p4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function A1(){return A1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A1.apply(this,arguments)}function JT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JT(Object(r),!0).forEach(function(n){iY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iY(e,t,r){return t=oY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oY(e){var t=lY(e,"string");return Sx(t)=="symbol"?t:t+""}function lY(e,t){if(Sx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Sx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ZT(e,t){if(e==null)return{};var r=cY(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var uY=function(t){return Array.isArray(t.value)?QX(t.value):t.value};function r0(e){var t=e.valueAccessor,r=t===void 0?uY:t,n=ZT(e,ZX),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=ZT(n,eY);return!s||!s.length?null:at.createElement(Ss,{className:"recharts-label-list"},s.map(function(f,d){var m=Gn(i)?r(f,d):yc(f&&f.payload,i),p=Gn(l)?{}:{id:"".concat(l,"-").concat(d)};return at.createElement(Fo,A1({},Bn(f,!0),u,p,{parentViewBox:f.parentViewBox,value:m,textBreakAll:c,viewBox:Fo.parseViewBox(Gn(o)?f:QT(QT({},f),{},{clockWise:o})),key:"label-".concat(d),index:d}))}))}r0.displayName="LabelList";function dY(e,t){return e?e===!0?at.createElement(r0,{key:"labelList-implicit",data:t}):at.isValidElement(e)||Cn(e)?at.createElement(r0,{key:"labelList-implicit",data:t,content:e}):$p(e)?at.createElement(r0,A1({data:t},e,{key:"labelList-implicit"})):null:null}function fY(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=Bu(n,r0).map(function(o,l){return z.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=dY(e.label,t);return[i].concat(tY(s))}r0.renderCallByParent=fY;function _x(e){"@babel/helpers - typeof";return _x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_x(e)}function m4(){return m4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},m4.apply(this,arguments)}function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function tO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(n){hY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hY(e,t,r){return t=pY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pY(e){var t=mY(e,"string");return _x(t)=="symbol"?t:t+""}function mY(e,t){if(_x(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_x(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var xY=function(t,r){var n=Lu(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},av=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,f=c*(l?1:-1)+s,d=Math.asin(c/f)/_1,m=u?i:i+o*d,p=ho(r,n,f,m),y=ho(r,n,s,m),v=u?i-o*d:i,g=ho(r,n,f*Math.cos(d*_1),v);return{center:p,circleTangency:y,lineTangency:g,theta:d}},vF=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=xY(o,l),u=o+c,f=ho(r,n,i,o),d=ho(r,n,i,u),m="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(d.x,",").concat(d.y,`
  `);if(s>0){var p=ho(r,n,s,o),y=ho(r,n,s,u);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(p.x,",").concat(p.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},gY=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,f=t.endAngle,d=Lu(f-u),m=av({cx:r,cy:n,radius:i,angle:u,sign:d,cornerRadius:o,cornerIsExternal:c}),p=m.circleTangency,y=m.lineTangency,v=m.theta,g=av({cx:r,cy:n,radius:i,angle:f,sign:-d,cornerRadius:o,cornerIsExternal:c}),b=g.circleTangency,N=g.lineTangency,j=g.theta,w=c?Math.abs(u-f):Math.abs(u-f)-v-j;if(w<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):vF({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:u,endAngle:f});var S="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(w>180),",").concat(+(d<0),",").concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(N.x,",").concat(N.y,`
  `);if(s>0){var P=av({cx:r,cy:n,radius:s,angle:u,sign:d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=P.circleTangency,T=P.lineTangency,I=P.theta,B=av({cx:r,cy:n,radius:s,angle:f,sign:-d,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=B.circleTangency,C=B.lineTangency,M=B.theta,q=c?Math.abs(u-f):Math.abs(u-f)-I-M;if(q<0&&o===0)return"".concat(S,"L").concat(r,",").concat(n,"Z");S+="L".concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(q>180),",").concat(+(d>0),",").concat(A.x,",").concat(A.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(d<0),",").concat(T.x,",").concat(T.y,"Z")}else S+="L".concat(r,",").concat(n,"Z");return S},vY={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},yF=function(t){var r=tO(tO({},vY),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,f=r.startAngle,d=r.endAngle,m=r.className;if(o<i||f===d)return null;var p=oa("recharts-sector",m),y=o-i,v=eh(l,y,0,!0),g;return v>0&&Math.abs(f-d)<360?g=gY({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(v,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:f,endAngle:d}):g=vF({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:d}),at.createElement("path",m4({},Bn(r,!0),{className:p,d:g,role:"img"}))};function Ax(e){"@babel/helpers - typeof";return Ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ax(e)}function x4(){return x4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},x4.apply(this,arguments)}function rO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function nO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rO(Object(r),!0).forEach(function(n){yY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yY(e,t,r){return t=bY(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bY(e){var t=wY(e,"string");return Ax(t)=="symbol"?t:t+""}function wY(e,t){if(Ax(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ax(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var aO={curveBasisClosed:qq,curveBasisOpen:$q,curveBasis:Uq,curveBumpX:_q,curveBumpY:Aq,curveLinearClosed:zq,curveLinear:_y,curveMonotoneX:Hq,curveMonotoneY:Wq,curveNatural:Vq,curveStep:Gq,curveStepAfter:Xq,curveStepBefore:Kq},sv=function(t){return t.x===+t.x&&t.y===+t.y},ym=function(t){return t.x},bm=function(t){return t.y},NY=function(t,r){if(Cn(t))return t;var n="curve".concat(ky(t));return(n==="curveMonotone"||n==="curveBump")&&r?aO["".concat(n).concat(r==="vertical"?"Y":"X")]:aO[n]||_y},jY=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,f=NY(n,l),d=u?i.filter(function(v){return sv(v)}):i,m;if(Array.isArray(o)){var p=u?o.filter(function(v){return sv(v)}):o,y=d.map(function(v,g){return nO(nO({},v),{},{base:p[g]})});return l==="vertical"?m=Yg().y(bm).x1(ym).x0(function(v){return v.base.x}):m=Yg().x(ym).y1(bm).y0(function(v){return v.base.y}),m.defined(sv).curve(f),m(y)}return l==="vertical"&&hr(o)?m=Yg().y(bm).x1(ym).x0(o):hr(o)?m=Yg().x(ym).y1(bm).y0(o):m=jD().x(ym).y(bm),m.defined(sv).curve(f),m(d)},Hm=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?jY(t):s;return at.createElement("path",x4({},Bn(t,!1),Qv(t),{className:oa("recharts-curve",r),d:o,ref:i}))},wN={exports:{}},NN,sO;function kY(){if(sO)return NN;sO=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return NN=e,NN}var jN,iO;function SY(){if(iO)return jN;iO=1;var e=kY();function t(){}function r(){}return r.resetWarningCache=t,jN=function(){function n(o,l,c,u,f,d){if(d!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}n.isRequired=n;function s(){return n}var i={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return i.PropTypes=i,i},jN}var oO;function _Y(){return oO||(oO=1,wN.exports=SY()()),wN.exports}var AY=_Y();const ma=Aa(AY),{getOwnPropertyNames:EY,getOwnPropertySymbols:CY}=Object,{hasOwnProperty:TY}=Object.prototype;function kN(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function iv(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,s);return i.delete(r),i.delete(n),c}}function OY(e){return e?.[Symbol.toStringTag]}function lO(e){return EY(e).concat(CY(e))}const PY=Object.hasOwn||((e,t)=>TY.call(e,t));function mh(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const IY="__v",DY="__o",LY="_owner",{getOwnPropertyDescriptor:cO,keys:uO}=Object;function FY(e,t){return e.byteLength===t.byteLength&&E1(new Uint8Array(e),new Uint8Array(t))}function MY(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function RY(e,t){return e.byteLength===t.byteLength&&E1(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function BY(e,t){return mh(e.getTime(),t.getTime())}function UY(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function qY(e,t){return e===t}function dO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const u=t.entries();let f=!1,d=0;for(;(l=u.next())&&!l.done;){if(s[d]){d++;continue}const m=o.value,p=l.value;if(r.equals(m[0],p[0],c,d,e,t,r)&&r.equals(m[1],p[1],m[0],p[0],e,t,r)){f=s[d]=!0;break}d++}if(!f)return!1;c++}return!0}const $Y=mh;function zY(e,t,r){const n=uO(e);let s=n.length;if(uO(t).length!==s)return!1;for(;s-- >0;)if(!bF(e,t,r,n[s]))return!1;return!0}function wm(e,t,r){const n=lO(e);let s=n.length;if(lO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!bF(e,t,r,i)||(o=cO(e,i),l=cO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function HY(e,t){return mh(e.valueOf(),t.valueOf())}function WY(e,t){return e.source===t.source&&e.flags===t.flags}function fO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let u=!1,f=0;for(;(l=c.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=s[f]=!0;break}f++}if(!u)return!1}return!0}function E1(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function VY(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function bF(e,t,r,n){return(n===LY||n===DY||n===IY)&&(e.$$typeof||t.$$typeof)?!0:PY(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const GY="[object ArrayBuffer]",KY="[object Arguments]",XY="[object Boolean]",YY="[object DataView]",JY="[object Date]",QY="[object Error]",ZY="[object Map]",eJ="[object Number]",tJ="[object Object]",rJ="[object RegExp]",nJ="[object Set]",aJ="[object String]",sJ={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},iJ="[object URL]",oJ=Object.prototype.toString;function lJ({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:u,areRegExpsEqual:f,areSetsEqual:d,areTypedArraysEqual:m,areUrlsEqual:p,unknownTagComparators:y}){return function(g,b,N){if(g===b)return!0;if(g==null||b==null)return!1;const j=typeof g;if(j!==typeof b)return!1;if(j!=="object")return j==="number"?l(g,b,N):j==="function"?i(g,b,N):!1;const w=g.constructor;if(w!==b.constructor)return!1;if(w===Object)return c(g,b,N);if(Array.isArray(g))return t(g,b,N);if(w===Date)return n(g,b,N);if(w===RegExp)return f(g,b,N);if(w===Map)return o(g,b,N);if(w===Set)return d(g,b,N);const S=oJ.call(g);if(S===JY)return n(g,b,N);if(S===rJ)return f(g,b,N);if(S===ZY)return o(g,b,N);if(S===nJ)return d(g,b,N);if(S===tJ)return typeof g.then!="function"&&typeof b.then!="function"&&c(g,b,N);if(S===iJ)return p(g,b,N);if(S===QY)return s(g,b,N);if(S===KY)return c(g,b,N);if(sJ[S])return m(g,b,N);if(S===GY)return e(g,b,N);if(S===YY)return r(g,b,N);if(S===XY||S===eJ||S===aJ)return u(g,b,N);if(y){let P=y[S];if(!P){const A=OY(g);A&&(P=y[A])}if(P)return P(g,b,N)}return!1}}function cJ({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:FY,areArraysEqual:r?wm:MY,areDataViewsEqual:RY,areDatesEqual:BY,areErrorsEqual:UY,areFunctionsEqual:qY,areMapsEqual:r?kN(dO,wm):dO,areNumbersEqual:$Y,areObjectsEqual:r?wm:zY,arePrimitiveWrappersEqual:HY,areRegExpsEqual:WY,areSetsEqual:r?kN(fO,wm):fO,areTypedArraysEqual:r?kN(E1,wm):E1,areUrlsEqual:VY,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=iv(n.areArraysEqual),i=iv(n.areMapsEqual),o=iv(n.areObjectsEqual),l=iv(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function uJ(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function dJ({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:u=e?new WeakMap:void 0,meta:f}=r();return t(l,c,{cache:u,equals:n,meta:f,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const fJ=x0();x0({strict:!0});x0({circular:!0});x0({circular:!0,strict:!0});x0({createInternalComparator:()=>mh});x0({strict:!0,createInternalComparator:()=>mh});x0({circular:!0,createInternalComparator:()=>mh});x0({circular:!0,createInternalComparator:()=>mh,strict:!0});function x0(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=cJ(e),o=lJ(i),l=r?r(o):uJ(o);return dJ({circular:t,comparator:o,createState:n,equals:l,strict:s})}function hJ(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function hO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):hJ(s)};requestAnimationFrame(n)}function g4(e){"@babel/helpers - typeof";return g4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g4(e)}function pJ(e){return vJ(e)||gJ(e)||xJ(e)||mJ()}function mJ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xJ(e,t){if(e){if(typeof e=="string")return pO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return pO(e,t)}}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function gJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vJ(e){if(Array.isArray(e))return e}function yJ(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=pJ(o),c=l[0],u=l.slice(1);if(typeof c=="number"){hO(s.bind(null,u),c);return}s(c),hO(s.bind(null,u));return}g4(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Ex(e){"@babel/helpers - typeof";return Ex=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ex(e)}function mO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mO(Object(r),!0).forEach(function(n){wF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wF(e,t,r){return t=bJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bJ(e){var t=wJ(e,"string");return Ex(t)==="symbol"?t:String(t)}function wJ(e,t){if(Ex(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ex(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var NJ=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},jJ=function(t){return t},kJ=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Wm=function(t,r){return Object.keys(r).reduce(function(n,s){return xO(xO({},n),{},wF({},s,t(s,r[s])))},{})},gO=function(t,r,n){return t.map(function(s){return"".concat(kJ(s)," ").concat(r,"ms ").concat(n)}).join(",")};function SJ(e,t){return EJ(e)||AJ(e,t)||NF(e,t)||_J()}function _J(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function EJ(e){if(Array.isArray(e))return e}function CJ(e){return PJ(e)||OJ(e)||NF(e)||TJ()}function TJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function NF(e,t){if(e){if(typeof e=="string")return v4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return v4(e,t)}}function OJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function PJ(e){if(Array.isArray(e))return v4(e)}function v4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var C1=1e-4,jF=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},kF=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},vO=function(t,r){return function(n){var s=jF(t,r);return kF(s,n)}},IJ=function(t,r){return function(n){var s=jF(t,r),i=[].concat(CJ(s.map(function(o,l){return o*l}).slice(1)),[0]);return kF(i,n)}},yO=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(g){return parseFloat(g)}),f=SJ(u,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var d=vO(s,o),m=vO(i,l),p=IJ(s,o),y=function(b){return b>1?1:b<0?0:b},v=function(b){for(var N=b>1?1:b,j=N,w=0;w<8;++w){var S=d(j)-N,P=p(j);if(Math.abs(S-N)<C1||P<C1)return m(j);j=y(j-S/P)}return m(j)};return v.isStepper=!1,v},DJ=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(f,d,m){var p=-(f-d)*n,y=m*i,v=m+(p-y)*l/1e3,g=m*l/1e3+f;return Math.abs(g-d)<C1&&Math.abs(v)<C1?[d,0]:[g,v]};return c.isStepper=!0,c.dt=l,c},LJ=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return yO(s);case"spring":return DJ();default:if(s.split("(")[0]==="cubic-bezier")return yO(s)}return typeof s=="function"?s:null};function Cx(e){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}function bO(e){return RJ(e)||MJ(e)||SF(e)||FJ()}function FJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function RJ(e){if(Array.isArray(e))return b4(e)}function wO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function oo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(r),!0).forEach(function(n){y4(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function y4(e,t,r){return t=BJ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BJ(e){var t=UJ(e,"string");return Cx(t)==="symbol"?t:String(t)}function UJ(e,t){if(Cx(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cx(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qJ(e,t){return HJ(e)||zJ(e,t)||SF(e,t)||$J()}function $J(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function SF(e,t){if(e){if(typeof e=="string")return b4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b4(e,t)}}function b4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zJ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function HJ(e){if(Array.isArray(e))return e}var T1=function(t,r,n){return t+(r-t)*n},w4=function(t){var r=t.from,n=t.to;return r!==n},WJ=function e(t,r,n){var s=Wm(function(i,o){if(w4(o)){var l=t(o.from,o.to,o.velocity),c=qJ(l,2),u=c[0],f=c[1];return oo(oo({},o),{},{from:u,velocity:f})}return o},r);return n<1?Wm(function(i,o){return w4(o)?oo(oo({},o),{},{velocity:T1(o.velocity,s[i].velocity,n),from:T1(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const VJ=(function(e,t,r,n,s){var i=NJ(e,t),o=i.reduce(function(g,b){return oo(oo({},g),{},y4({},b,[e[b],t[b]]))},{}),l=i.reduce(function(g,b){return oo(oo({},g),{},y4({},b,{from:e[b],velocity:0,to:t[b]}))},{}),c=-1,u,f,d=function(){return null},m=function(){return Wm(function(b,N){return N.from},l)},p=function(){return!Object.values(l).filter(w4).length},y=function(b){u||(u=b);var N=b-u,j=N/r.dt;l=WJ(r,l,j),s(oo(oo(oo({},e),t),m())),u=b,p()||(c=requestAnimationFrame(d))},v=function(b){f||(f=b);var N=(b-f)/n,j=Wm(function(S,P){return T1.apply(void 0,bO(P).concat([r(N)]))},o);if(s(oo(oo(oo({},e),t),j)),N<1)c=requestAnimationFrame(d);else{var w=Wm(function(S,P){return T1.apply(void 0,bO(P).concat([r(1)]))},o);s(oo(oo(oo({},e),t),w))}};return d=r.isStepper?y:v,function(){return requestAnimationFrame(d),function(){cancelAnimationFrame(c)}}});function jp(e){"@babel/helpers - typeof";return jp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jp(e)}var GJ=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function KJ(e,t){if(e==null)return{};var r=XJ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function XJ(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function SN(e){return ZJ(e)||QJ(e)||JJ(e)||YJ()}function YJ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function JJ(e,t){if(e){if(typeof e=="string")return N4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return N4(e,t)}}function QJ(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ZJ(e){if(Array.isArray(e))return N4(e)}function N4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function NO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Su(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(r),!0).forEach(function(n){Im(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Im(e,t,r){return t=_F(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eQ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tQ(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,_F(n.key),n)}}function rQ(e,t,r){return t&&tQ(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function _F(e){var t=nQ(e,"string");return jp(t)==="symbol"?t:String(t)}function nQ(e,t){if(jp(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(jp(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aQ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j4(e,t)}function j4(e,t){return j4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},j4(e,t)}function sQ(e){var t=iQ();return function(){var n=O1(e),s;if(t){var i=O1(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return k4(this,s)}}function k4(e,t){if(t&&(jp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return S4(e)}function S4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iQ(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function O1(e){return O1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},O1(e)}var mf=(function(e){aQ(r,e);var t=sQ(r);function r(n,s){var i;eQ(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,c=o.attributeName,u=o.from,f=o.to,d=o.steps,m=o.children,p=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(S4(i)),i.changeStyle=i.changeStyle.bind(S4(i)),!l||p<=0)return i.state={style:{}},typeof m=="function"&&(i.state={style:f}),k4(i);if(d&&d.length)i.state={style:d[0].style};else if(u){if(typeof m=="function")return i.state={style:u},k4(i);i.state={style:c?Im({},c,u):u}}else i.state={style:{}};return i}return rQ(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,u=i.shouldReAnimate,f=i.to,d=i.from,m=this.state.style;if(l){if(!o){var p={style:c?Im({},c,f):f};this.state&&m&&(c&&m[c]!==f||!c&&m!==f)&&this.setState(p);return}if(!(fJ(s.to,f)&&s.canBegin&&s.isActive)){var y=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var v=y||u?d:s.to;if(this.state&&m){var g={style:c?Im({},c,v):v};(c&&m[c]!==v||!c&&m!==v)&&this.setState(g)}this.runAnimation(Su(Su({},this.props),{},{from:v,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,u=s.easing,f=s.begin,d=s.onAnimationEnd,m=s.onAnimationStart,p=VJ(o,l,LJ(u),c,this.changeStyle),y=function(){i.stopJSAnimation=p()};this.manager.start([m,f,y,c,d])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,u=o[0],f=u.style,d=u.duration,m=d===void 0?0:d,p=function(v,g,b){if(b===0)return v;var N=g.duration,j=g.easing,w=j===void 0?"ease":j,S=g.style,P=g.properties,A=g.onAnimationEnd,T=b>0?o[b-1]:g,I=P||Object.keys(S);if(typeof w=="function"||w==="spring")return[].concat(SN(v),[i.runJSAnimation.bind(i,{from:T.style,to:S,duration:N,easing:w}),N]);var B=gO(I,N,w),E=Su(Su(Su({},T.style),S),{},{transition:B});return[].concat(SN(v),[E,N,A]).filter(jJ)};return this.manager.start([c].concat(SN(o.reduce(p,[f,Math.max(m,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=yJ());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,u=s.easing,f=s.onAnimationStart,d=s.onAnimationEnd,m=s.steps,p=s.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof p=="function"||u==="spring"){this.runJSAnimation(s);return}if(m.length>1){this.runStepAnimation(s);return}var v=l?Im({},l,c):c,g=gO(Object.keys(v),o,u);y.start([f,i,Su(Su({},v),{},{transition:g}),o,d])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=KJ(s,GJ),u=z.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||u===0||o<=0)return i;var d=function(p){var y=p.props,v=y.style,g=v===void 0?{}:v,b=y.className,N=z.cloneElement(p,Su(Su({},c),{},{style:Su(Su({},g),f),className:b}));return N};return u===1?d(z.Children.only(i)):at.createElement("div",null,z.Children.map(i,function(m){return d(m)}))}}]),r})(z.PureComponent);mf.displayName="Animate";mf.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};mf.propTypes={from:ma.oneOfType([ma.object,ma.string]),to:ma.oneOfType([ma.object,ma.string]),attributeName:ma.string,duration:ma.number,begin:ma.number,easing:ma.oneOfType([ma.string,ma.func]),steps:ma.arrayOf(ma.shape({duration:ma.number.isRequired,style:ma.object.isRequired,easing:ma.oneOfType([ma.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),ma.func]),properties:ma.arrayOf("string"),onAnimationEnd:ma.func})),children:ma.oneOfType([ma.node,ma.func]),isActive:ma.bool,canBegin:ma.bool,onAnimationEnd:ma.func,shouldReAnimate:ma.bool,onAnimationStart:ma.func,onAnimationReStart:ma.func};function Tx(e){"@babel/helpers - typeof";return Tx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tx(e)}function P1(){return P1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P1.apply(this,arguments)}function oQ(e,t){return dQ(e)||uQ(e,t)||cQ(e,t)||lQ()}function lQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cQ(e,t){if(e){if(typeof e=="string")return jO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jO(e,t)}}function jO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function uQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function dQ(e){if(Array.isArray(e))return e}function kO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function SO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(r),!0).forEach(function(n){fQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fQ(e,t,r){return t=hQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function hQ(e){var t=pQ(e,"string");return Tx(t)=="symbol"?t:t+""}function pQ(e,t){if(Tx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _O=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,u=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var d=[0,0,0,0],m=0,p=4;m<p;m++)d[m]=i[m]>o?o:i[m];f="M".concat(t,",").concat(r+l*d[0]),d[0]>0&&(f+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(u,",").concat(t+c*d[0],",").concat(r)),f+="L ".concat(t+n-c*d[1],",").concat(r),d[1]>0&&(f+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*d[1])),f+="L ".concat(t+n,",").concat(r+s-l*d[2]),d[2]>0&&(f+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(u,`,
        `).concat(t+n-c*d[2],",").concat(r+s)),f+="L ".concat(t+c*d[3],",").concat(r+s),d[3]>0&&(f+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+s-l*d[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var y=Math.min(o,i);f="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+n-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*y,`
            L `).concat(t+n,",").concat(r+s-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-c*y,",").concat(r+s,`
            L `).concat(t+c*y,",").concat(r+s,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+s-l*y," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},mQ=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(i,i+l),f=Math.max(i,i+l),d=Math.min(o,o+c),m=Math.max(o,o+c);return n>=u&&n<=f&&s>=d&&s<=m}return!1},xQ={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},w3=function(t){var r=SO(SO({},xQ),t),n=z.useRef(),s=z.useState(-1),i=oQ(s,2),o=i[0],l=i[1];z.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,u=r.y,f=r.width,d=r.height,m=r.radius,p=r.className,y=r.animationEasing,v=r.animationDuration,g=r.animationBegin,b=r.isAnimationActive,N=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||f===0||d===0)return null;var j=oa("recharts-rectangle",p);return N?at.createElement(mf,{canBegin:o>0,from:{width:f,height:d,x:c,y:u},to:{width:f,height:d,x:c,y:u},duration:v,animationEasing:y,isActive:N},function(w){var S=w.width,P=w.height,A=w.x,T=w.y;return at.createElement(mf,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,isActive:b,easing:y},at.createElement("path",P1({},Bn(r,!0),{className:j,d:_O(A,T,S,P,m),ref:n})))}):at.createElement("path",P1({},Bn(r,!0),{className:j,d:_O(c,u,f,d,m)}))};function _4(){return _4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_4.apply(this,arguments)}var N3=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=oa("recharts-dot",i);return r===+r&&n===+n&&s===+s?at.createElement("circle",_4({},Bn(t,!1),Qv(t),{className:o,cx:r,cy:n,r:s})):null};function Ox(e){"@babel/helpers - typeof";return Ox=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ox(e)}var gQ=["x","y","top","left","width","height","className"];function A4(){return A4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},A4.apply(this,arguments)}function AO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function vQ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AO(Object(r),!0).forEach(function(n){yQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yQ(e,t,r){return t=bQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bQ(e){var t=wQ(e,"string");return Ox(t)=="symbol"?t:t+""}function wQ(e,t){if(Ox(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ox(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function NQ(e,t){if(e==null)return{};var r=jQ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var kQ=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},SQ=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,f=t.width,d=f===void 0?0:f,m=t.height,p=m===void 0?0:m,y=t.className,v=NQ(t,gQ),g=vQ({x:n,y:i,top:l,left:u,width:d,height:p},v);return!hr(n)||!hr(i)||!hr(d)||!hr(p)||!hr(l)||!hr(u)?null:at.createElement("path",A4({},Bn(g,!0),{className:oa("recharts-cross",y),d:kQ(n,i,d,p,l,u)}))},_N,EO;function _Q(){if(EO)return _N;EO=1;var e=VD(),t=e(Object.getPrototypeOf,Object);return _N=t,_N}var AN,CO;function AQ(){if(CO)return AN;CO=1;var e=gf(),t=_Q(),r=vf(),n="[object Object]",s=Function.prototype,i=Object.prototype,o=s.toString,l=i.hasOwnProperty,c=o.call(Object);function u(f){if(!r(f)||e(f)!=n)return!1;var d=t(f);if(d===null)return!0;var m=l.call(d,"constructor")&&d.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==c}return AN=u,AN}var EQ=AQ();const CQ=Aa(EQ);var EN,TO;function TQ(){if(TO)return EN;TO=1;var e=gf(),t=vf(),r="[object Boolean]";function n(s){return s===!0||s===!1||t(s)&&e(s)==r}return EN=n,EN}var OQ=TQ();const PQ=Aa(OQ);function Px(e){"@babel/helpers - typeof";return Px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Px(e)}function I1(){return I1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I1.apply(this,arguments)}function IQ(e,t){return MQ(e)||FQ(e,t)||LQ(e,t)||DQ()}function DQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function LQ(e,t){if(e){if(typeof e=="string")return OO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OO(e,t)}}function OO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function FQ(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function MQ(e){if(Array.isArray(e))return e}function PO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function IO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PO(Object(r),!0).forEach(function(n){RQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RQ(e,t,r){return t=BQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function BQ(e){var t=UQ(e,"string");return Px(t)=="symbol"?t:t+""}function UQ(e,t){if(Px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DO=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},qQ={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},$Q=function(t){var r=IO(IO({},qQ),t),n=z.useRef(),s=z.useState(-1),i=IQ(s,2),o=i[0],l=i[1];z.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var j=n.current.getTotalLength();j&&l(j)}catch{}},[]);var c=r.x,u=r.y,f=r.upperWidth,d=r.lowerWidth,m=r.height,p=r.className,y=r.animationEasing,v=r.animationDuration,g=r.animationBegin,b=r.isUpdateAnimationActive;if(c!==+c||u!==+u||f!==+f||d!==+d||m!==+m||f===0&&d===0||m===0)return null;var N=oa("recharts-trapezoid",p);return b?at.createElement(mf,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:f,lowerWidth:d,height:m,x:c,y:u},duration:v,animationEasing:y,isActive:b},function(j){var w=j.upperWidth,S=j.lowerWidth,P=j.height,A=j.x,T=j.y;return at.createElement(mf,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:g,duration:v,easing:y},at.createElement("path",I1({},Bn(r,!0),{className:N,d:DO(A,T,w,S,P),ref:n})))}):at.createElement("g",null,at.createElement("path",I1({},Bn(r,!0),{className:N,d:DO(c,u,f,d,m)})))},zQ=["option","shapeType","propTransformer","activeClassName","isActive"];function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}function HQ(e,t){if(e==null)return{};var r=WQ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function WQ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function D1(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){VQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VQ(e,t,r){return t=GQ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GQ(e){var t=KQ(e,"string");return Ix(t)=="symbol"?t:t+""}function KQ(e,t){if(Ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ix(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function XQ(e,t){return D1(D1({},t),e)}function YQ(e,t){return e==="symbols"}function FO(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return at.createElement(w3,r);case"trapezoid":return at.createElement($Q,r);case"sector":return at.createElement(yF,r);case"symbols":if(YQ(t))return at.createElement(Uk,r);break;default:return null}}function JQ(e){return z.isValidElement(e)?e.props:e}function QQ(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?XQ:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=HQ(e,zQ),u;if(z.isValidElement(t))u=z.cloneElement(t,D1(D1({},c),JQ(t)));else if(Cn(t))u=t(c);else if(CQ(t)&&!PQ(t)){var f=s(t,c);u=at.createElement(FO,{shapeType:r,elementProps:f})}else{var d=c;u=at.createElement(FO,{shapeType:r,elementProps:d})}return l?at.createElement(Ss,{className:o},u):u}function qy(e,t){return t!=null&&"trapezoids"in e.props}function $y(e,t){return t!=null&&"sectors"in e.props}function Dx(e,t){return t!=null&&"points"in e.props}function ZQ(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function eZ(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function tZ(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function rZ(e,t){var r;return qy(e,t)?r=ZQ:$y(e,t)?r=eZ:Dx(e,t)&&(r=tZ),r}function nZ(e,t){var r;return qy(e,t)?r="trapezoids":$y(e,t)?r="sectors":Dx(e,t)&&(r="points"),r}function aZ(e,t){if(qy(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if($y(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Dx(e,t)?t.payload:{}}function sZ(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=nZ(r,t),i=aZ(r,t),o=n.filter(function(c,u){var f=gx(i,c),d=r.props[s].filter(function(y){var v=rZ(r,t);return v(y,t)}),m=r.props[s].indexOf(d[d.length-1]),p=u===m;return f&&p}),l=n.indexOf(o[o.length-1]);return l}var CN,MO;function iZ(){if(MO)return CN;MO=1;var e=Math.ceil,t=Math.max;function r(n,s,i,o){for(var l=-1,c=t(e((s-n)/(i||1)),0),u=Array(c);c--;)u[o?c:++l]=n,n+=i;return u}return CN=r,CN}var TN,RO;function AF(){if(RO)return TN;RO=1;var e=lL(),t=1/0,r=17976931348623157e292;function n(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var i=s<0?-1:1;return i*r}return s===s?s:0}return TN=n,TN}var ON,BO;function oZ(){if(BO)return ON;BO=1;var e=iZ(),t=Ty(),r=AF();function n(s){return function(i,o,l){return l&&typeof l!="number"&&t(i,o,l)&&(o=l=void 0),i=r(i),o===void 0?(o=i,i=0):o=r(o),l=l===void 0?i<o?1:-1:r(l),e(i,o,l,s)}}return ON=n,ON}var PN,UO;function lZ(){if(UO)return PN;UO=1;var e=oZ(),t=e();return PN=t,PN}var cZ=lZ();const L1=Aa(cZ);function Lx(e){"@babel/helpers - typeof";return Lx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lx(e)}function qO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function $O(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qO(Object(r),!0).forEach(function(n){EF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EF(e,t,r){return t=uZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uZ(e){var t=dZ(e,"string");return Lx(t)=="symbol"?t:t+""}function dZ(e,t){if(Lx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Lx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fZ=["Webkit","Moz","O","ms"],hZ=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=fZ.reduce(function(i,o){return $O($O({},i),{},EF({},o+n,r))},{});return s[t]=r,s};function kp(e){"@babel/helpers - typeof";return kp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kp(e)}function F1(){return F1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F1.apply(this,arguments)}function zO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function IN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?zO(Object(r),!0).forEach(function(n){uc(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function pZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HO(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,TF(n.key),n)}}function mZ(e,t,r){return t&&HO(e.prototype,t),r&&HO(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function xZ(e,t,r){return t=M1(t),gZ(e,CF()?Reflect.construct(t,r||[],M1(e).constructor):t.apply(e,r))}function gZ(e,t){if(t&&(kp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vZ(e)}function vZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(CF=function(){return!!e})()}function M1(e){return M1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},M1(e)}function yZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E4(e,t)}function E4(e,t){return E4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},E4(e,t)}function uc(e,t,r){return t=TF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TF(e){var t=bZ(e,"string");return kp(t)=="symbol"?t:t+""}function bZ(e,t){if(kp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(kp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var wZ=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=$m().domain(L1(0,c)).range([i,i+o-l]),f=u.domain().map(function(d){return u(d)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(s),scale:u,scaleValues:f}},WO=function(t){return t.changedTouches&&!!t.changedTouches.length},Sp=(function(e){function t(r){var n;return pZ(this,t),n=xZ(this,t,[r]),uc(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),uc(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),uc(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o?.({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),uc(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),uc(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),uc(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),uc(n,"handleSlideDragStart",function(s){var i=WO(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return yZ(t,e),mZ(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,f=u.length-1,d=Math.min(s,i),m=Math.max(s,i),p=t.getIndexInRange(o,d),y=t.getIndexInRange(o,m);return{startIndex:p-p%c,endIndex:y===f?f:y-y%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=yc(i[n],l,n);return Cn(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,u=c.x,f=c.width,d=c.travellerWidth,m=c.startIndex,p=c.endIndex,y=c.onChange,v=n.pageX-i;v>0?v=Math.min(v,u+f-d-l,u+f-d-o):v<0&&(v=Math.max(v,u-o,u-l));var g=this.getIndex({startX:o+v,endX:l+v});(g.startIndex!==m||g.endIndex!==p)&&y&&y(g),this.setState({startX:o+v,endX:l+v,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=WO(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,u=this.state[o],f=this.props,d=f.x,m=f.width,p=f.travellerWidth,y=f.onChange,v=f.gap,g=f.data,b={startX:this.state.startX,endX:this.state.endX},N=n.pageX-i;N>0?N=Math.min(N,d+m-p-u):N<0&&(N=Math.max(N,d-u)),b[o]=u+N;var j=this.getIndex(b),w=j.startIndex,S=j.endIndex,P=function(){var T=g.length-1;return o==="startX"&&(l>c?w%v===0:S%v===0)||l<c&&S===T||o==="endX"&&(l>c?S%v===0:w%v===0)||l>c&&S===T};this.setState(uc(uc({},o,u+N),"brushMoveStartX",n.pageX),function(){y&&P()&&y(j)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,f=this.state[s],d=l.indexOf(f);if(d!==-1){var m=d+n;if(!(m===-1||m>=l.length)){var p=l[m];s==="startX"&&p>=u||s==="endX"&&p<=c||this.setState(uc({},s,p),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return at.createElement("rect",{stroke:u,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.data,u=n.children,f=n.padding,d=z.Children.only(u);return d?at.cloneElement(d,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,c=this.props,u=c.y,f=c.travellerWidth,d=c.height,m=c.traveller,p=c.ariaLabel,y=c.data,v=c.startIndex,g=c.endIndex,b=Math.max(n,this.props.x),N=IN(IN({},Bn(this.props,!1)),{},{x:b,y:u,width:f,height:d}),j=p||"Min value: ".concat((i=y[v])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=y[g])===null||o===void 0?void 0:o.name);return at.createElement(Ss,{tabIndex:0,role:"slider","aria-label":j,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(S){["ArrowLeft","ArrowRight"].includes(S.key)&&(S.preventDefault(),S.stopPropagation(),l.handleTravellerMoveKeyboard(S.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,N))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,u=i.travellerWidth,f=Math.min(n,s)+u,d=Math.max(Math.abs(s-n)-u,0);return at.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:d,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,f=this.state,d=f.startX,m=f.endX,p=5,y={pointerEvents:"none",fill:u};return at.createElement(Ss,{className:"recharts-brush-texts"},at.createElement(u1,F1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(d,m)-p,y:o+l/2},y),this.getTextOfTick(s)),at.createElement(u1,F1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(d,m)+c+p,y:o+l/2},y),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,c=n.y,u=n.width,f=n.height,d=n.alwaysShowText,m=this.state,p=m.startX,y=m.endX,v=m.isTextActive,g=m.isSlideMoving,b=m.isTravellerMoving,N=m.isTravellerFocused;if(!s||!s.length||!hr(l)||!hr(c)||!hr(u)||!hr(f)||u<=0||f<=0)return null;var j=oa("recharts-brush",i),w=at.Children.count(o)===1,S=hZ("userSelect","none");return at.createElement(Ss,{className:j,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:S},this.renderBackground(),w&&this.renderPanorama(),this.renderSlide(p,y),this.renderTravellerLayer(p,"startX"),this.renderTravellerLayer(y,"endX"),(v||g||b||N||d)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(i+l/2)-1;return at.createElement(at.Fragment,null,at.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),at.createElement("line",{x1:s+1,y1:u,x2:s+o-1,y2:u,fill:"none",stroke:"#fff"}),at.createElement("line",{x1:s+1,y1:u+2,x2:s+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return at.isValidElement(n)?i=at.cloneElement(n,s):Cn(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,f=n.startIndex,d=n.endIndex;if(i!==s.prevData||u!==s.prevUpdateId)return IN({prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},i&&i.length?wZ({data:i,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:d}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var m=s.scale.domain().map(function(p){return s.scale(p)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])})(z.PureComponent);uc(Sp,"displayName","Brush");uc(Sp,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var DN,VO;function NZ(){if(VO)return DN;VO=1;var e=Gk();function t(r,n){var s;return e(r,function(i,o,l){return s=n(i,o,l),!s}),!!s}return DN=t,DN}var LN,GO;function jZ(){if(GO)return LN;GO=1;var e=BD(),t=h0(),r=NZ(),n=Vl(),s=Ty();function i(o,l,c){var u=n(o)?e:r;return c&&s(o,l,c)&&(l=void 0),u(o,t(l,3))}return LN=i,LN}var kZ=jZ();const SZ=Aa(kZ);var Nd=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},FN,KO;function _Z(){if(KO)return FN;KO=1;var e=nL();function t(r,n,s){n=="__proto__"&&e?e(r,n,{configurable:!0,enumerable:!0,value:s,writable:!0}):r[n]=s}return FN=t,FN}var MN,XO;function AZ(){if(XO)return MN;XO=1;var e=_Z(),t=tL(),r=h0();function n(s,i){var o={};return i=r(i,3),t(s,function(l,c,u){e(o,c,i(l,c,u))}),o}return MN=n,MN}var EZ=AZ();const CZ=Aa(EZ);var RN,YO;function TZ(){if(YO)return RN;YO=1;function e(t,r){for(var n=-1,s=t==null?0:t.length;++n<s;)if(!r(t[n],n,t))return!1;return!0}return RN=e,RN}var BN,JO;function OZ(){if(JO)return BN;JO=1;var e=Gk();function t(r,n){var s=!0;return e(r,function(i,o,l){return s=!!n(i,o,l),s}),s}return BN=t,BN}var UN,QO;function PZ(){if(QO)return UN;QO=1;var e=TZ(),t=OZ(),r=h0(),n=Vl(),s=Ty();function i(o,l,c){var u=n(o)?e:t;return c&&s(o,l,c)&&(l=void 0),u(o,r(l,3))}return UN=i,UN}var IZ=PZ();const OF=Aa(IZ);var DZ=["x","y"];function Fx(e){"@babel/helpers - typeof";return Fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fx(e)}function C4(){return C4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},C4.apply(this,arguments)}function ZO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Nm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZO(Object(r),!0).forEach(function(n){LZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LZ(e,t,r){return t=FZ(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FZ(e){var t=MZ(e,"string");return Fx(t)=="symbol"?t:t+""}function MZ(e,t){if(Fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function RZ(e,t){if(e==null)return{};var r=BZ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function BZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function UZ(e,t){var r=e.x,n=e.y,s=RZ(e,DZ),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||s.height),f=parseInt(u,10),d="".concat(t.width||s.width),m=parseInt(d,10);return Nm(Nm(Nm(Nm(Nm({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:m,name:t.name,radius:t.radius})}function eP(e){return at.createElement(QQ,C4({shapeType:"rectangle",propTransformer:UZ,activeClassName:"recharts-active-bar"},e))}var qZ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=typeof n=="number";return i?t(n,s):(i||rh(),r)}},$Z=["value","background"],PF;function _p(e){"@babel/helpers - typeof";return _p=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(e)}function zZ(e,t){if(e==null)return{};var r=HZ(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HZ(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function R1(){return R1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R1.apply(this,arguments)}function tP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tP(Object(r),!0).forEach(function(n){Xf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,DF(n.key),n)}}function VZ(e,t,r){return t&&rP(e.prototype,t),r&&rP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function GZ(e,t,r){return t=B1(t),KZ(e,IF()?Reflect.construct(t,r||[],B1(e).constructor):t.apply(e,r))}function KZ(e,t){if(t&&(_p(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return XZ(e)}function XZ(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function IF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(IF=function(){return!!e})()}function B1(e){return B1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},B1(e)}function YZ(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T4(e,t)}function T4(e,t){return T4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},T4(e,t)}function Xf(e,t,r){return t=DF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DF(e){var t=JZ(e,"string");return _p(t)=="symbol"?t:t+""}function JZ(e,t){if(_p(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(_p(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dg=(function(e){function t(){var r;WZ(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=GZ(this,t,[].concat(s)),Xf(r,"state",{isAnimationFinished:!1}),Xf(r,"id",sg("recharts-bar-")),Xf(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Xf(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return YZ(t,e),VZ(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,u=i.activeBar,f=Bn(this.props,!1);return n&&n.map(function(d,m){var p=m===c,y=p?u:o,v=hi(hi(hi({},f),d),{},{isActive:p,option:y,index:m,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return at.createElement(Ss,R1({className:"recharts-bar-rectangle"},Zv(s.props,d,m),{key:"rectangle-".concat(d?.x,"-").concat(d?.y,"-").concat(d?.value)}),at.createElement(eP,v))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,u=s.animationDuration,f=s.animationEasing,d=s.animationId,m=this.state.prevData;return at.createElement(mf,{begin:c,duration:u,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(d),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(p){var y=p.t,v=i.map(function(g,b){var N=m&&m[b];if(N){var j=eu(N.x,g.x),w=eu(N.y,g.y),S=eu(N.width,g.width),P=eu(N.height,g.height);return hi(hi({},g),{},{x:j(y),y:w(y),width:S(y),height:P(y)})}if(o==="horizontal"){var A=eu(0,g.height),T=A(y);return hi(hi({},g),{},{y:g.y+g.height-T,height:T})}var I=eu(0,g.width),B=I(y);return hi(hi({},g),{},{width:B})});return at.createElement(Ss,null,n.renderRectanglesStatically(v))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!gx(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=Bn(this.props.background,!1);return i.map(function(u,f){u.value;var d=u.background,m=zZ(u,$Z);if(!d)return null;var p=hi(hi(hi(hi(hi({},m),{},{fill:"#eee"},d),c),Zv(n.props,u,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return at.createElement(eP,R1({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},p))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,u=i.layout,f=i.children,d=Bu(f,Uy);if(!d)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,p=function(g,b){var N=Array.isArray(g.value)?g.value[1]:g.value;return{x:g.x,y:g.y,value:N,errorVal:yc(g,b)}},y={clipPath:n?"url(#clipPath-".concat(s,")"):null};return at.createElement(Ss,y,d.map(function(v){return at.cloneElement(v,{key:"error-bar-".concat(s,"-").concat(v.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:p})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,f=n.top,d=n.width,m=n.height,p=n.isAnimationActive,y=n.background,v=n.id;if(s||!i||!i.length)return null;var g=this.state.isAnimationFinished,b=oa("recharts-bar",o),N=l&&l.allowDataOverflow,j=c&&c.allowDataOverflow,w=N||j,S=Gn(v)?this.id:v;return at.createElement(Ss,{className:b},N||j?at.createElement("defs",null,at.createElement("clipPath",{id:"clipPath-".concat(S)},at.createElement("rect",{x:N?u:u-d/2,y:j?f:f-m/2,width:N?d:d*2,height:j?m:m*2}))):null,at.createElement(Ss,{className:"recharts-bar-rectangles",clipPath:w?"url(#clipPath-".concat(S,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(w,S),(!p||g)&&r0.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])})(z.PureComponent);PF=dg;Xf(dg,"displayName","Bar");Xf(dg,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Wp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Xf(dg,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,m=e.offset,p=fX(n,r);if(!p)return null;var y=t.layout,v=r.type.defaultProps,g=v!==void 0?hi(hi({},v),r.props):r.props,b=g.dataKey,N=g.children,j=g.minPointSize,w=y==="horizontal"?o:i,S=u?w.scale.domain():null,P=bX({numericAxis:w}),A=Bu(N,uL),T=d.map(function(I,B){var E,C,M,q,G,Z;u?E=hX(u[f+B],S):(E=yc(I,b),Array.isArray(E)||(E=[P,E]));var te=qZ(j,PF.defaultProps.minPointSize)(E[1],B);if(y==="horizontal"){var ne,J=[o.scale(E[0]),o.scale(E[1])],ee=J[0],H=J[1];C=$T({axis:i,ticks:l,bandSize:s,offset:p.offset,entry:I,index:B}),M=(ne=H??ee)!==null&&ne!==void 0?ne:void 0,q=p.size;var O=ee-H;if(G=Number.isNaN(O)?0:O,Z={x:C,y:o.y,width:q,height:o.height},Math.abs(te)>0&&Math.abs(G)<Math.abs(te)){var R=Lu(G||te)*(Math.abs(te)-Math.abs(G));M-=R,G+=R}}else{var W=[i.scale(E[0]),i.scale(E[1])],U=W[0],K=W[1];if(C=U,M=$T({axis:o,ticks:c,bandSize:s,offset:p.offset,entry:I,index:B}),q=K-U,G=p.size,Z={x:i.x,y:M,width:i.width,height:G},Math.abs(te)>0&&Math.abs(q)<Math.abs(te)){var oe=Lu(q||te)*(Math.abs(te)-Math.abs(q));q+=oe}}return hi(hi(hi({},I),{},{x:C,y:M,width:q,height:G,value:u?E:E[1],payload:I,background:Z},A&&A[B]&&A[B].props),{},{tooltipPayload:[xF(r,I)],tooltipPosition:{x:C+q/2,y:M+G/2}})});return hi({data:T,layout:y},m)});function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function QZ(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,LF(n.key),n)}}function ZZ(e,t,r){return t&&nP(e.prototype,t),r&&nP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function aP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Pu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?aP(Object(r),!0).forEach(function(n){zy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):aP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zy(e,t,r){return t=LF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LF(e){var t=eee(e,"string");return Mx(t)=="symbol"?t:t+""}function eee(e,t){if(Mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tee=function(t,r,n,s,i){var o=t.width,l=t.height,c=t.layout,u=t.children,f=Object.keys(r),d={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!dc(u,dg);return f.reduce(function(p,y){var v=r[y],g=v.orientation,b=v.domain,N=v.padding,j=N===void 0?{}:N,w=v.mirror,S=v.reversed,P="".concat(g).concat(w?"Mirror":""),A,T,I,B,E;if(v.type==="number"&&(v.padding==="gap"||v.padding==="no-gap")){var C=b[1]-b[0],M=1/0,q=v.categoricalDomain.sort();if(q.forEach(function(W,U){U>0&&(M=Math.min((W||0)-(q[U-1]||0),M))}),Number.isFinite(M)){var G=M/C,Z=v.layout==="vertical"?n.height:n.width;if(v.padding==="gap"&&(A=G*Z/2),v.padding==="no-gap"){var te=eh(t.barCategoryGap,G*Z),ne=G*Z/2;A=ne-te-(ne-te)/Z*te}}}s==="xAxis"?T=[n.left+(j.left||0)+(A||0),n.left+n.width-(j.right||0)-(A||0)]:s==="yAxis"?T=c==="horizontal"?[n.top+n.height-(j.bottom||0),n.top+(j.top||0)]:[n.top+(j.top||0)+(A||0),n.top+n.height-(j.bottom||0)-(A||0)]:T=v.range,S&&(T=[T[1],T[0]]);var J=uX(v,i,m),ee=J.scale,H=J.realScaleType;ee.domain(b).range(T),dX(ee);var O=yX(ee,Pu(Pu({},v),{},{realScaleType:H}));s==="xAxis"?(E=g==="top"&&!w||g==="bottom"&&w,I=n.left,B=d[P]-E*v.height):s==="yAxis"&&(E=g==="left"&&!w||g==="right"&&w,I=d[P]-E*v.width,B=n.top);var R=Pu(Pu(Pu({},v),O),{},{realScaleType:H,x:I,y:B,scale:ee,width:s==="xAxis"?n.width:v.width,height:s==="yAxis"?n.height:v.height});return R.bandSize=S1(R,O),!v.hide&&s==="xAxis"?d[P]+=(E?-1:1)*R.height:v.hide||(d[P]+=(E?-1:1)*R.width),Pu(Pu({},p),{},zy({},y,R))},{})},FF=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},ree=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return FF({x:r,y:n},{x:s,y:i})},MF=(function(){function e(t){QZ(this,e),this.scale=t}return ZZ(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])})();zy(MF,"EPS",1e-4);var j3=function(t){var r=Object.keys(t).reduce(function(n,s){return Pu(Pu({},n),{},zy({},s,MF.create(t[s])))},{});return Pu(Pu({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return CZ(s,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return OF(s,function(i,o){return r[o].isInRange(i)})}})};function nee(e){return(e%180+180)%180}var aee=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=nee(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},qN,sP;function see(){if(sP)return qN;sP=1;var e=h0(),t=ig(),r=Ey();function n(s){return function(i,o,l){var c=Object(i);if(!t(i)){var u=e(o,3);i=r(i),o=function(d){return u(c[d],d,c)}}var f=s(i,o,l);return f>-1?c[u?i[f]:f]:void 0}}return qN=n,qN}var $N,iP;function iee(){if(iP)return $N;iP=1;var e=AF();function t(r){var n=e(r),s=n%1;return n===n?s?n-s:n:0}return $N=t,$N}var zN,oP;function oee(){if(oP)return zN;oP=1;var e=YD(),t=h0(),r=iee(),n=Math.max;function s(i,o,l){var c=i==null?0:i.length;if(!c)return-1;var u=l==null?0:r(l);return u<0&&(u=n(c+u,0)),e(i,t(o,3),u)}return zN=s,zN}var HN,lP;function lee(){if(lP)return HN;lP=1;var e=see(),t=oee(),r=e(t);return HN=r,HN}var cee=lee();const uee=Aa(cee);var dee=dD();const fee=Aa(dee);var hee=fee(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),k3=z.createContext(void 0),S3=z.createContext(void 0),RF=z.createContext(void 0),BF=z.createContext({}),UF=z.createContext(void 0),qF=z.createContext(0),$F=z.createContext(0),cP=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,f=hee(i);return at.createElement(k3.Provider,{value:n},at.createElement(S3.Provider,{value:s},at.createElement(BF.Provider,{value:i},at.createElement(RF.Provider,{value:f},at.createElement(UF.Provider,{value:o},at.createElement(qF.Provider,{value:u},at.createElement($F.Provider,{value:c},l)))))))},pee=function(){return z.useContext(UF)},zF=function(t){var r=z.useContext(k3);r==null&&rh();var n=r[t];return n==null&&rh(),n},mee=function(){var t=z.useContext(k3);return Gf(t)},xee=function(){var t=z.useContext(S3),r=uee(t,function(n){return OF(n.domain,Number.isFinite)});return r||Gf(t)},HF=function(t){var r=z.useContext(S3);r==null&&rh();var n=r[t];return n==null&&rh(),n},gee=function(){var t=z.useContext(RF);return t},vee=function(){return z.useContext(BF)},_3=function(){return z.useContext($F)},A3=function(){return z.useContext(qF)};function Ap(e){"@babel/helpers - typeof";return Ap=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ap(e)}function yee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,VF(n.key),n)}}function wee(e,t,r){return t&&bee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nee(e,t,r){return t=U1(t),jee(e,WF()?Reflect.construct(t,r||[],U1(e).constructor):t.apply(e,r))}function jee(e,t){if(t&&(Ap(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kee(e)}function kee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function WF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(WF=function(){return!!e})()}function U1(e){return U1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},U1(e)}function See(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O4(e,t)}function O4(e,t){return O4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},O4(e,t)}function uP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uP(Object(r),!0).forEach(function(n){E3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function E3(e,t,r){return t=VF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function VF(e){var t=_ee(e,"string");return Ap(t)=="symbol"?t:t+""}function _ee(e,t){if(Ap(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ap(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Aee(e,t){return Oee(e)||Tee(e,t)||Cee(e,t)||Eee()}function Eee(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cee(e,t){if(e){if(typeof e=="string")return fP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fP(e,t)}}function fP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Tee(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Oee(e){if(Array.isArray(e))return e}function P4(){return P4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P4.apply(this,arguments)}var Pee=function(t,r){var n;return at.isValidElement(t)?n=at.cloneElement(t,r):Cn(t)?n=t(r):n=at.createElement("line",P4({},r,{className:"recharts-reference-line-line"})),n},Iee=function(t,r,n,s,i,o,l,c,u){var f=i.x,d=i.y,m=i.width,p=i.height;if(n){var y=u.y,v=t.y.apply(y,{position:o});if(Nd(u,"discard")&&!t.y.isInRange(v))return null;var g=[{x:f+m,y:v},{x:f,y:v}];return c==="left"?g.reverse():g}if(r){var b=u.x,N=t.x.apply(b,{position:o});if(Nd(u,"discard")&&!t.x.isInRange(N))return null;var j=[{x:N,y:d+p},{x:N,y:d}];return l==="top"?j.reverse():j}if(s){var w=u.segment,S=w.map(function(P){return t.apply(P,{position:o})});return Nd(u,"discard")&&SZ(S,function(P){return!t.isInRange(P)})?null:S}return null};function Dee(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=pee(),f=zF(s),d=HF(i),m=gee();if(!u||!m)return null;sf(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=j3({x:f.scale,y:d.scale}),y=Pi(t),v=Pi(r),g=n&&n.length===2,b=Iee(p,y,v,g,m,e.position,f.orientation,d.orientation,e);if(!b)return null;var N=Aee(b,2),j=N[0],w=j.x,S=j.y,P=N[1],A=P.x,T=P.y,I=Nd(e,"hidden")?"url(#".concat(u,")"):void 0,B=dP(dP({clipPath:I},Bn(e,!0)),{},{x1:w,y1:S,x2:A,y2:T});return at.createElement(Ss,{className:oa("recharts-reference-line",l)},Pee(o,B),Fo.renderCallByParent(e,ree({x1:w,y1:S,x2:A,y2:T})))}var C3=(function(e){function t(){return yee(this,t),Nee(this,t,arguments)}return See(t,e),wee(t,[{key:"render",value:function(){return at.createElement(Dee,this.props)}}])})(at.Component);E3(C3,"displayName","ReferenceLine");E3(C3,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function I4(){return I4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},I4.apply(this,arguments)}function Ep(e){"@babel/helpers - typeof";return Ep=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ep(e)}function hP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function pP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(r),!0).forEach(function(n){Hy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,KF(n.key),n)}}function Mee(e,t,r){return t&&Fee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ree(e,t,r){return t=q1(t),Bee(e,GF()?Reflect.construct(t,r||[],q1(e).constructor):t.apply(e,r))}function Bee(e,t){if(t&&(Ep(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uee(e)}function Uee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function GF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(GF=function(){return!!e})()}function q1(e){return q1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},q1(e)}function qee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D4(e,t)}function D4(e,t){return D4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},D4(e,t)}function Hy(e,t,r){return t=KF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KF(e){var t=$ee(e,"string");return Ep(t)=="symbol"?t:t+""}function $ee(e,t){if(Ep(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ep(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zee=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=j3({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Nd(t,"discard")&&!o.isInRange(l)?null:l},Wy=(function(e){function t(){return Lee(this,t),Ree(this,t,arguments)}return qee(t,e),Mee(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=Pi(s),f=Pi(i);if(sf(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!f)return null;var d=zee(this.props);if(!d)return null;var m=d.x,p=d.y,y=this.props,v=y.shape,g=y.className,b=Nd(this.props,"hidden")?"url(#".concat(c,")"):void 0,N=pP(pP({clipPath:b},Bn(this.props,!0)),{},{cx:m,cy:p});return at.createElement(Ss,{className:oa("recharts-reference-dot",g)},t.renderDot(v,N),Fo.renderCallByParent(this.props,{x:m-o,y:p-o,width:2*o,height:2*o}))}}])})(at.Component);Hy(Wy,"displayName","ReferenceDot");Hy(Wy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Hy(Wy,"renderDot",function(e,t){var r;return at.isValidElement(e)?r=at.cloneElement(e,t):Cn(e)?r=e(t):r=at.createElement(N3,I4({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function L4(){return L4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L4.apply(this,arguments)}function Cp(e){"@babel/helpers - typeof";return Cp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(e)}function mP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mP(Object(r),!0).forEach(function(n){Vy(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Hee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wee(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,YF(n.key),n)}}function Vee(e,t,r){return t&&Wee(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Gee(e,t,r){return t=$1(t),Kee(e,XF()?Reflect.construct(t,r||[],$1(e).constructor):t.apply(e,r))}function Kee(e,t){if(t&&(Cp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xee(e)}function Xee(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(XF=function(){return!!e})()}function $1(e){return $1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$1(e)}function Yee(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F4(e,t)}function F4(e,t){return F4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},F4(e,t)}function Vy(e,t,r){return t=YF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function YF(e){var t=Jee(e,"string");return Cp(t)=="symbol"?t:t+""}function Jee(e,t){if(Cp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Cp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Qee=function(t,r,n,s,i){var o=i.x1,l=i.x2,c=i.y1,u=i.y2,f=i.xAxis,d=i.yAxis;if(!f||!d)return null;var m=j3({x:f.scale,y:d.scale}),p={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},y={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:s?m.y.apply(u,{position:"end"}):m.y.rangeMax};return Nd(i,"discard")&&(!m.isInRange(p)||!m.isInRange(y))?null:FF(p,y)},Gy=(function(e){function t(){return Hee(this,t),Gee(this,t,arguments)}return Yee(t,e),Vee(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,f=n.clipPathId;sf(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var d=Pi(s),m=Pi(i),p=Pi(o),y=Pi(l),v=this.props.shape;if(!d&&!m&&!p&&!y&&!v)return null;var g=Qee(d,m,p,y,this.props);if(!g&&!v)return null;var b=Nd(this.props,"hidden")?"url(#".concat(f,")"):void 0;return at.createElement(Ss,{className:oa("recharts-reference-area",c)},t.renderRect(v,xP(xP({clipPath:b},Bn(this.props,!0)),g)),Fo.renderCallByParent(this.props,g))}}])})(at.Component);Vy(Gy,"displayName","ReferenceArea");Vy(Gy,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Vy(Gy,"renderRect",function(e,t){var r;return at.isValidElement(e)?r=at.cloneElement(e,t):Cn(e)?r=e(t):r=at.createElement(w3,L4({},t,{className:"recharts-reference-area-rect"})),r});function JF(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function Zee(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return aee(n,r)}function ete(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function z1(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function tte(e,t){return JF(e,t+1)}function rte(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,f=o,d=function(){var y=n?.[c];if(y===void 0)return{v:JF(n,u)};var v=c,g,b=function(){return g===void 0&&(g=r(y,v)),g},N=y.coordinate,j=c===0||z1(e,N,b,f,l);j||(c=0,f=o,u+=1),j&&(f=N+e*(b()/2+s),c+=u)},m;u<=i.length;)if(m=d(),m)return m.v;return[]}function Rx(e){"@babel/helpers - typeof";return Rx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rx(e)}function gP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Io(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gP(Object(r),!0).forEach(function(n){nte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nte(e,t,r){return t=ate(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ate(e){var t=ste(e,"string");return Rx(t)=="symbol"?t:t+""}function ste(e,t){if(Rx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Rx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ite(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,u=function(m){var p=i[m],y,v=function(){return y===void 0&&(y=r(p,m)),y};if(m===o-1){var g=e*(p.coordinate+e*v()/2-c);i[m]=p=Io(Io({},p),{},{tickCoord:g>0?p.coordinate-g*e:p.coordinate})}else i[m]=p=Io(Io({},p),{},{tickCoord:p.coordinate});var b=z1(e,p.tickCoord,v,l,c);b&&(c=p.tickCoord-e*(v()/2+s),i[m]=Io(Io({},p),{},{isShow:!0}))},f=o-1;f>=0;f--)u(f);return i}function ote(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(i){var f=n[l-1],d=r(f,l-1),m=e*(f.coordinate+e*d/2-u);o[l-1]=f=Io(Io({},f),{},{tickCoord:m>0?f.coordinate-m*e:f.coordinate});var p=z1(e,f.tickCoord,function(){return d},c,u);p&&(u=f.tickCoord-e*(d/2+s),o[l-1]=Io(Io({},f),{},{isShow:!0}))}for(var y=i?l-1:l,v=function(N){var j=o[N],w,S=function(){return w===void 0&&(w=r(j,N)),w};if(N===0){var P=e*(j.coordinate-e*S()/2-c);o[N]=j=Io(Io({},j),{},{tickCoord:P<0?j.coordinate-P*e:j.coordinate})}else o[N]=j=Io(Io({},j),{},{tickCoord:j.coordinate});var A=z1(e,j.tickCoord,S,c,u);A&&(c=j.tickCoord+e*(S()/2+s),o[N]=Io(Io({},j),{},{isShow:!0}))},g=0;g<y;g++)v(g);return o}function T3(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,f=e.unit,d=e.angle;if(!s||!s.length||!n)return[];if(hr(c)||Wp.isSsr)return tte(s,typeof c=="number"&&hr(c)?c:0);var m=[],p=l==="top"||l==="bottom"?"width":"height",y=f&&p==="width"?qm(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},v=function(j,w){var S=Cn(u)?u(j.value,w):j.value;return p==="width"?Zee(qm(S,{fontSize:t,letterSpacing:r}),y,d):qm(S,{fontSize:t,letterSpacing:r})[p]},g=s.length>=2?Lu(s[1].coordinate-s[0].coordinate):1,b=ete(i,g,p);return c==="equidistantPreserveStart"?rte(g,b,v,s,o):(c==="preserveStart"||c==="preserveStartEnd"?m=ote(g,b,v,s,o,c==="preserveStartEnd"):m=ite(g,b,v,s,o),m.filter(function(N){return N.isShow}))}var lte=["viewBox"],cte=["viewBox"],ute=["ticks"];function Tp(e){"@babel/helpers - typeof";return Tp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Tp(e)}function Zh(){return Zh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Zh.apply(this,arguments)}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){O3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function WN(e,t){if(e==null)return{};var r=dte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ZF(n.key),n)}}function hte(e,t,r){return t&&yP(e.prototype,t),r&&yP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pte(e,t,r){return t=H1(t),mte(e,QF()?Reflect.construct(t,r||[],H1(e).constructor):t.apply(e,r))}function mte(e,t){if(t&&(Tp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xte(e)}function xte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function QF(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(QF=function(){return!!e})()}function H1(e){return H1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},H1(e)}function gte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M4(e,t)}function M4(e,t){return M4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},M4(e,t)}function O3(e,t,r){return t=ZF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ZF(e){var t=vte(e,"string");return Tp(t)=="symbol"?t:t+""}function vte(e,t){if(Tp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Tp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Xp=(function(e){function t(r){var n;return fte(this,t),n=pte(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return gte(t,e),hte(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=WN(n,lte),l=this.props,c=l.viewBox,u=WN(l,cte);return!rp(i,c)||!rp(o,u)||!rp(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,u=s.orientation,f=s.tickSize,d=s.mirror,m=s.tickMargin,p,y,v,g,b,N,j=d?-1:1,w=n.tickSize||f,S=hr(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":p=y=n.coordinate,g=o+ +!d*c,v=g-j*w,N=v-j*m,b=S;break;case"left":v=g=n.coordinate,y=i+ +!d*l,p=y-j*w,b=p-j*m,N=S;break;case"right":v=g=n.coordinate,y=i+ +d*l,p=y+j*w,b=p+j*m,N=S;break;default:p=y=n.coordinate,g=o+ +d*c,v=g+j*w,N=v+j*m,b=S;break}return{line:{x1:p,y1:v,x2:y,y2:g},tick:{x:b,y:N}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,f=n.axisLine,d=dl(dl(dl({},Bn(this.props,!1)),Bn(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);d=dl(dl({},d),{},{x1:s,y1:i+m*l,x2:s+o,y2:i+m*l})}else{var p=+(c==="left"&&!u||c==="right"&&u);d=dl(dl({},d),{},{x1:s+p*o,y1:i,x2:s+p*o,y2:i+l})}return at.createElement("line",Zh({},d,{className:oa("recharts-cartesian-axis-line",nu(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,c=l.tickLine,u=l.stroke,f=l.tick,d=l.tickFormatter,m=l.unit,p=T3(dl(dl({},this.props),{},{ticks:n}),s,i),y=this.getTickTextAnchor(),v=this.getTickVerticalAnchor(),g=Bn(this.props,!1),b=Bn(f,!1),N=dl(dl({},g),{},{fill:"none"},Bn(c,!1)),j=p.map(function(w,S){var P=o.getTickLineCoord(w),A=P.line,T=P.tick,I=dl(dl(dl(dl({textAnchor:y,verticalAnchor:v},g),{},{stroke:"none",fill:u},b),T),{},{index:S,payload:w,visibleTicksCount:p.length,tickFormatter:d});return at.createElement(Ss,Zh({className:"recharts-cartesian-axis-tick",key:"tick-".concat(w.value,"-").concat(w.coordinate,"-").concat(w.tickCoord)},Zv(o.props,w,S)),c&&at.createElement("line",Zh({},N,A,{className:oa("recharts-cartesian-axis-tick-line",nu(c,"className"))})),f&&t.renderTickItem(f,I,"".concat(Cn(d)?d(w.value,S):w.value).concat(m||"")))});return at.createElement("g",{className:"recharts-cartesian-axis-ticks"},j)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,u=s.className,f=s.hide;if(f)return null;var d=this.props,m=d.ticks,p=WN(d,ute),y=m;return Cn(c)&&(y=m&&m.length>0?c(this.props):c(p)),o<=0||l<=0||!y||!y.length?null:at.createElement(Ss,{className:oa("recharts-cartesian-axis",u),ref:function(g){n.layerReference=g}},i&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),Fo.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o;return at.isValidElement(n)?o=at.cloneElement(n,s):Cn(n)?o=n(s):o=at.createElement(u1,Zh({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])})(z.Component);O3(Xp,"displayName","CartesianAxis");O3(Xp,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var yte=["x1","y1","x2","y2","key"],bte=["offset"];function nh(e){"@babel/helpers - typeof";return nh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nh(e)}function bP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Mo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bP(Object(r),!0).forEach(function(n){wte(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wte(e,t,r){return t=Nte(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nte(e){var t=jte(e,"string");return nh(t)=="symbol"?t:t+""}function jte(e,t){if(nh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function U0(){return U0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U0.apply(this,arguments)}function wP(e,t){if(e==null)return{};var r=kte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ste=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return at.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function e7(e,t){var r;if(at.isValidElement(e))r=at.cloneElement(e,t);else if(Cn(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=wP(t,yte),u=Bn(c,!1);u.offset;var f=wP(u,bte);r=at.createElement("line",U0({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function _te(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Mo(Mo({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return e7(s,u)});return at.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function Ate(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var u=Mo(Mo({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return e7(s,u)});return at.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function Ete(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var f=l.map(function(m){return Math.round(m+s-s)}).sort(function(m,p){return m-p});s!==f[0]&&f.unshift(0);var d=f.map(function(m,p){var y=!f[p+1],v=y?s+o-m:f[p+1]-m;if(v<=0)return null;var g=p%t.length;return at.createElement("rect",{key:"react-".concat(p),y:m,x:n,height:v,width:i,stroke:"none",fill:t[g],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return at.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function Cte(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var f=u.map(function(m){return Math.round(m+i-i)}).sort(function(m,p){return m-p});i!==f[0]&&f.unshift(0);var d=f.map(function(m,p){var y=!f[p+1],v=y?i+l-m:f[p+1]-m;if(v<=0)return null;var g=p%n.length;return at.createElement("rect",{key:"react-".concat(p),x:m,y:o,width:v,height:c,stroke:"none",fill:n[g],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return at.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Tte=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return pF(T3(Mo(Mo(Mo({},Xp.defaultProps),n),{},{ticks:Qd(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},Ote=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return pF(T3(Mo(Mo(Mo({},Xp.defaultProps),n),{},{ticks:Qd(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},$h={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function t7(e){var t,r,n,s,i,o,l=_3(),c=A3(),u=vee(),f=Mo(Mo({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:$h.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:$h.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:$h.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:$h.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:$h.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:$h.verticalFill,x:hr(e.x)?e.x:u.left,y:hr(e.y)?e.y:u.top,width:hr(e.width)?e.width:u.width,height:hr(e.height)?e.height:u.height}),d=f.x,m=f.y,p=f.width,y=f.height,v=f.syncWithTicks,g=f.horizontalValues,b=f.verticalValues,N=mee(),j=xee();if(!hr(p)||p<=0||!hr(y)||y<=0||!hr(d)||d!==+d||!hr(m)||m!==+m)return null;var w=f.verticalCoordinatesGenerator||Tte,S=f.horizontalCoordinatesGenerator||Ote,P=f.horizontalPoints,A=f.verticalPoints;if((!P||!P.length)&&Cn(S)){var T=g&&g.length,I=S({yAxis:j?Mo(Mo({},j),{},{ticks:T?g:j.ticks}):void 0,width:l,height:c,offset:u},T?!0:v);sf(Array.isArray(I),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(nh(I),"]")),Array.isArray(I)&&(P=I)}if((!A||!A.length)&&Cn(w)){var B=b&&b.length,E=w({xAxis:N?Mo(Mo({},N),{},{ticks:B?b:N.ticks}):void 0,width:l,height:c,offset:u},B?!0:v);sf(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(nh(E),"]")),Array.isArray(E)&&(A=E)}return at.createElement("g",{className:"recharts-cartesian-grid"},at.createElement(Ste,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),at.createElement(_te,U0({},f,{offset:u,horizontalPoints:P,xAxis:N,yAxis:j})),at.createElement(Ate,U0({},f,{offset:u,verticalPoints:A,xAxis:N,yAxis:j})),at.createElement(Ete,U0({},f,{horizontalPoints:P})),at.createElement(Cte,U0({},f,{verticalPoints:A})))}t7.displayName="CartesianGrid";var Pte=["layout","type","stroke","connectNulls","isRange","ref"],Ite=["key"],r7;function Op(e){"@babel/helpers - typeof";return Op=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Op(e)}function n7(e,t){if(e==null)return{};var r=Dte(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Dte(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function q0(){return q0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q0.apply(this,arguments)}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Hf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(n){pd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Lte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s7(n.key),n)}}function Fte(e,t,r){return t&&jP(e.prototype,t),r&&jP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mte(e,t,r){return t=W1(t),Rte(e,a7()?Reflect.construct(t,r||[],W1(e).constructor):t.apply(e,r))}function Rte(e,t){if(t&&(Op(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bte(e)}function Bte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function a7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(a7=function(){return!!e})()}function W1(e){return W1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},W1(e)}function Ute(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R4(e,t)}function R4(e,t){return R4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},R4(e,t)}function pd(e,t,r){return t=s7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s7(e){var t=qte(e,"string");return Op(t)=="symbol"?t:t+""}function qte(e,t){if(Op(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Op(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var g0=(function(e){function t(){var r;Lte(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Mte(this,t,[].concat(s)),pd(r,"state",{isAnimationFinished:!0}),pd(r,"id",sg("recharts-area-")),pd(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Cn(o)&&o()}),pd(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Cn(o)&&o()}),r}return Ute(t,e),Fte(t,[{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,u=c.dot,f=c.points,d=c.dataKey,m=Bn(this.props,!1),p=Bn(u,!0),y=f.map(function(g,b){var N=Hf(Hf(Hf({key:"dot-".concat(b),r:3},m),p),{},{index:b,cx:g.x,cy:g.y,dataKey:d,value:g.value,payload:g.payload,points:f});return t.renderDotItem(u,N)}),v={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return at.createElement(Ss,q0({className:"recharts-area-dots"},v),y)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,u=o[o.length-1].x,f=n*Math.abs(c-u),d=Kf(o.map(function(m){return m.y||0}));return hr(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Kf(i.map(function(m){return m.y||0})),d)),hr(d)?at.createElement("rect",{x:c<u?c:c-f,y:0,width:f,height:Math.floor(d+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,u=o[o.length-1].y,f=n*Math.abs(c-u),d=Kf(o.map(function(m){return m.x||0}));return hr(i)&&typeof i=="number"?d=Math.max(i,d):i&&Array.isArray(i)&&i.length&&(d=Math.max(Kf(i.map(function(m){return m.x||0})),d)),hr(d)?at.createElement("rect",{x:0,y:c<u?c:c-f,width:d+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,i,o){var l=this.props,c=l.layout,u=l.type,f=l.stroke,d=l.connectNulls,m=l.isRange;l.ref;var p=n7(l,Pte);return at.createElement(Ss,{clipPath:i?"url(#clipPath-".concat(o,")"):null},at.createElement(Hm,q0({},Bn(p,!0),{points:n,connectNulls:d,type:u,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&at.createElement(Hm,q0({},Bn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:n})),f!=="none"&&m&&at.createElement(Hm,q0({},Bn(this.props,!1),{className:"recharts-area-curve",layout:c,type:u,connectNulls:d,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,c=o.baseLine,u=o.isAnimationActive,f=o.animationBegin,d=o.animationDuration,m=o.animationEasing,p=o.animationId,y=this.state,v=y.prevPoints,g=y.prevBaseLine;return at.createElement(mf,{begin:f,duration:d,isActive:u,easing:m,from:{t:0},to:{t:1},key:"area-".concat(p),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(b){var N=b.t;if(v){var j=v.length/l.length,w=l.map(function(T,I){var B=Math.floor(I*j);if(v[B]){var E=v[B],C=eu(E.x,T.x),M=eu(E.y,T.y);return Hf(Hf({},T),{},{x:C(N),y:M(N)})}return T}),S;if(hr(c)&&typeof c=="number"){var P=eu(g,c);S=P(N)}else if(Gn(c)||zp(c)){var A=eu(g,0);S=A(N)}else S=c.map(function(T,I){var B=Math.floor(I*j);if(g[B]){var E=g[B],C=eu(E.x,T.x),M=eu(E.y,T.y);return Hf(Hf({},T),{},{x:C(N),y:M(N)})}return T});return i.renderAreaStatically(w,S,n,s)}return at.createElement(Ss,null,at.createElement("defs",null,at.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(N))),at.createElement(Ss,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,n,s)))})}},{key:"renderArea",value:function(n,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,u=this.state,f=u.prevPoints,d=u.prevBaseLine,m=u.totalLength;return c&&o&&o.length&&(!f&&m>0||!gx(f,o)||!gx(d,l))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(o,l,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,u=s.top,f=s.left,d=s.xAxis,m=s.yAxis,p=s.width,y=s.height,v=s.isAnimationActive,g=s.id;if(i||!l||!l.length)return null;var b=this.state.isAnimationFinished,N=l.length===1,j=oa("recharts-area",c),w=d&&d.allowDataOverflow,S=m&&m.allowDataOverflow,P=w||S,A=Gn(g)?this.id:g,T=(n=Bn(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},I=T.r,B=I===void 0?3:I,E=T.strokeWidth,C=E===void 0?2:E,M=sq(o)?o:{},q=M.clipDot,G=q===void 0?!0:q,Z=B*2+C;return at.createElement(Ss,{className:j},w||S?at.createElement("defs",null,at.createElement("clipPath",{id:"clipPath-".concat(A)},at.createElement("rect",{x:w?f:f-p/2,y:S?u:u-y/2,width:w?p:p*2,height:S?y:y*2})),!G&&at.createElement("clipPath",{id:"clipPath-dots-".concat(A)},at.createElement("rect",{x:f-Z/2,y:u-Z/2,width:p+Z,height:y+Z}))):null,N?null:this.renderArea(P,A),(o||N)&&this.renderDots(P,G,A),(!v||b)&&r0.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])})(z.PureComponent);r7=g0;pd(g0,"displayName","Area");pd(g0,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Wp.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});pd(g0,"getBaseValue",function(e,t,r,n){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(hr(l)&&typeof l=="number")return l;var c=s==="horizontal"?n:r,u=c.scale.domain();if(c.type==="number"){var f=Math.max(u[0],u[1]),d=Math.min(u[0],u[1]);return l==="dataMin"?d:l==="dataMax"||f<0?f:Math.max(Math.min(u[0],u[1]),0)}return l==="dataMin"?u[0]:l==="dataMax"?u[1]:u[0]});pd(g0,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,u=e.stackedData,f=e.dataStartIndex,d=e.displayedData,m=e.offset,p=t.layout,y=u&&u.length,v=r7.getBaseValue(t,r,n,s),g=p==="horizontal",b=!1,N=d.map(function(w,S){var P;y?P=u[f+S]:(P=yc(w,c),Array.isArray(P)?b=!0:P=[v,P]);var A=P[1]==null||y&&yc(w,c)==null;return g?{x:qT({axis:n,ticks:i,bandSize:l,entry:w,index:S}),y:A?null:s.scale(P[1]),value:P,payload:w}:{x:A?null:n.scale(P[1]),y:qT({axis:s,ticks:o,bandSize:l,entry:w,index:S}),value:P,payload:w}}),j;return y||b?j=N.map(function(w){var S=Array.isArray(w.value)?w.value[0]:null;return g?{x:w.x,y:S!=null&&w.y!=null?s.scale(S):null}:{x:S!=null?n.scale(S):null,y:w.y}}):j=g?s.scale(v):n.scale(v),Hf({points:N,baseLine:j,layout:p,isRange:b},m)});pd(g0,"renderDotItem",function(e,t){var r;if(at.isValidElement(e))r=at.cloneElement(e,t);else if(Cn(e))r=e(t);else{var n=oa("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=n7(t,Ite);r=at.createElement(N3,q0({},i,{key:s,className:n}))}return r});function Pp(e){"@babel/helpers - typeof";return Pp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pp(e)}function $te(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l7(n.key),n)}}function Hte(e,t,r){return t&&zte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Wte(e,t,r){return t=V1(t),Vte(e,i7()?Reflect.construct(t,r||[],V1(e).constructor):t.apply(e,r))}function Vte(e,t){if(t&&(Pp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Gte(e)}function Gte(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i7=function(){return!!e})()}function V1(e){return V1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},V1(e)}function Kte(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B4(e,t)}function B4(e,t){return B4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},B4(e,t)}function o7(e,t,r){return t=l7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l7(e){var t=Xte(e,"string");return Pp(t)=="symbol"?t:t+""}function Xte(e,t){if(Pp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Pp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function U4(){return U4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},U4.apply(this,arguments)}function Yte(e){var t=e.xAxisId,r=_3(),n=A3(),s=zF(t);return s==null?null:at.createElement(Xp,U4({},s,{className:oa("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Qd(o,!0)}}))}var Ky=(function(e){function t(){return $te(this,t),Wte(this,t,arguments)}return Kte(t,e),Hte(t,[{key:"render",value:function(){return at.createElement(Yte,this.props)}}])})(at.Component);o7(Ky,"displayName","XAxis");o7(Ky,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Ip(e){"@babel/helpers - typeof";return Ip=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ip(e)}function Jte(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Qte(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d7(n.key),n)}}function Zte(e,t,r){return t&&Qte(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ere(e,t,r){return t=G1(t),tre(e,c7()?Reflect.construct(t,r||[],G1(e).constructor):t.apply(e,r))}function tre(e,t){if(t&&(Ip(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rre(e)}function rre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function c7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(c7=function(){return!!e})()}function G1(e){return G1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},G1(e)}function nre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&q4(e,t)}function q4(e,t){return q4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},q4(e,t)}function u7(e,t,r){return t=d7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d7(e){var t=are(e,"string");return Ip(t)=="symbol"?t:t+""}function are(e,t){if(Ip(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ip(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function $4(){return $4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$4.apply(this,arguments)}var sre=function(t){var r=t.yAxisId,n=_3(),s=A3(),i=HF(r);return i==null?null:at.createElement(Xp,$4({},i,{className:oa("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return Qd(l,!0)}}))},Xy=(function(e){function t(){return Jte(this,t),ere(this,t,arguments)}return nre(t,e),Zte(t,[{key:"render",value:function(){return at.createElement(sre,this.props)}}])})(at.Component);u7(Xy,"displayName","YAxis");u7(Xy,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function kP(e){return cre(e)||lre(e)||ore(e)||ire()}function ire(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ore(e,t){if(e){if(typeof e=="string")return z4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return z4(e,t)}}function lre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cre(e){if(Array.isArray(e))return z4(e)}function z4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var H4=function(t,r,n,s,i){var o=Bu(t,C3),l=Bu(t,Wy),c=[].concat(kP(o),kP(l)),u=Bu(t,Gy),f="".concat(s,"Id"),d=s[0],m=r;if(c.length&&(m=c.reduce(function(v,g){if(g.props[f]===n&&Nd(g.props,"extendDomain")&&hr(g.props[d])){var b=g.props[d];return[Math.min(v[0],b),Math.max(v[1],b)]}return v},m)),u.length){var p="".concat(d,"1"),y="".concat(d,"2");m=u.reduce(function(v,g){if(g.props[f]===n&&Nd(g.props,"extendDomain")&&hr(g.props[p])&&hr(g.props[y])){var b=g.props[p],N=g.props[y];return[Math.min(v[0],b,N),Math.max(v[1],b,N)]}return v},m)}return i&&i.length&&(m=i.reduce(function(v,g){return hr(g)?[Math.min(v[0],g),Math.max(v[1],g)]:v},m)),m},VN={exports:{}},SP;function ure(){return SP||(SP=1,(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,u,f){this.fn=c,this.context=u,this.once=f||!1}function i(c,u,f,d,m){if(typeof f!="function")throw new TypeError("The listener must be a function");var p=new s(f,d||c,m),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],p]:c._events[y].push(p):(c._events[y]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],f,d;if(this._eventsCount===0)return u;for(d in f=this._events)t.call(f,d)&&u.push(r?d.slice(1):d);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(f)):u},l.prototype.listeners=function(u){var f=r?r+u:u,d=this._events[f];if(!d)return[];if(d.fn)return[d.fn];for(var m=0,p=d.length,y=new Array(p);m<p;m++)y[m]=d[m].fn;return y},l.prototype.listenerCount=function(u){var f=r?r+u:u,d=this._events[f];return d?d.fn?1:d.length:0},l.prototype.emit=function(u,f,d,m,p,y){var v=r?r+u:u;if(!this._events[v])return!1;var g=this._events[v],b=arguments.length,N,j;if(g.fn){switch(g.once&&this.removeListener(u,g.fn,void 0,!0),b){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,f),!0;case 3:return g.fn.call(g.context,f,d),!0;case 4:return g.fn.call(g.context,f,d,m),!0;case 5:return g.fn.call(g.context,f,d,m,p),!0;case 6:return g.fn.call(g.context,f,d,m,p,y),!0}for(j=1,N=new Array(b-1);j<b;j++)N[j-1]=arguments[j];g.fn.apply(g.context,N)}else{var w=g.length,S;for(j=0;j<w;j++)switch(g[j].once&&this.removeListener(u,g[j].fn,void 0,!0),b){case 1:g[j].fn.call(g[j].context);break;case 2:g[j].fn.call(g[j].context,f);break;case 3:g[j].fn.call(g[j].context,f,d);break;case 4:g[j].fn.call(g[j].context,f,d,m);break;default:if(!N)for(S=1,N=new Array(b-1);S<b;S++)N[S-1]=arguments[S];g[j].fn.apply(g[j].context,N)}}return!0},l.prototype.on=function(u,f,d){return i(this,u,f,d,!1)},l.prototype.once=function(u,f,d){return i(this,u,f,d,!0)},l.prototype.removeListener=function(u,f,d,m){var p=r?r+u:u;if(!this._events[p])return this;if(!f)return o(this,p),this;var y=this._events[p];if(y.fn)y.fn===f&&(!m||y.once)&&(!d||y.context===d)&&o(this,p);else{for(var v=0,g=[],b=y.length;v<b;v++)(y[v].fn!==f||m&&!y[v].once||d&&y[v].context!==d)&&g.push(y[v]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var f;return u?(f=r?r+u:u,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(VN)),VN.exports}var dre=ure();const fre=Aa(dre);var GN=new fre,KN="recharts.syncMouseEvents";function Bx(e){"@babel/helpers - typeof";return Bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(e)}function hre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,f7(n.key),n)}}function mre(e,t,r){return t&&pre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XN(e,t,r){return t=f7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f7(e){var t=xre(e,"string");return Bx(t)=="symbol"?t:t+""}function xre(e,t){if(Bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Bx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var gre=(function(){function e(){hre(this,e),XN(this,"activeIndex",0),XN(this,"coordinateList",[]),XN(this,"layout","horizontal")}return mre(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,f=r.offset,d=f===void 0?null:f,m=r.mouseHandlerCallback,p=m===void 0?null:m;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=d??this.offset,this.mouseHandlerCallback=p??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,d=i+c+u,m=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:d,pageY:m})}}}])})();function vre(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e?.[0],s=e?.[1];if(n&&s&&hr(n)&&hr(s))return!0}return!1}function yre(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function h7(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=ho(t,r,n,s),l=ho(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function bre(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,f=t.outerRadius,d=t.angle,m=ho(l,c,u,d),p=ho(l,c,f,d);n=m.x,s=m.y,i=p.x,o=p.y}else return h7(t);return[{x:n,y:s},{x:i,y:o}]}function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function _P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function ov(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_P(Object(r),!0).forEach(function(n){wre(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_P(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wre(e,t,r){return t=Nre(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nre(e){var t=jre(e,"string");return Ux(t)=="symbol"?t:t+""}function jre(e,t){if(Ux(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Ux(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kre(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,f=e.tooltipAxisBandSize,d=e.layout,m=e.chartName,p=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!p||!i||!o||m!=="ScatterChart"&&s!=="axis")return null;var y,v=Hm;if(m==="ScatterChart")y=o,v=SQ;else if(m==="BarChart")y=yre(d,o,c,f),v=w3;else if(d==="radial"){var g=h7(o),b=g.cx,N=g.cy,j=g.radius,w=g.startAngle,S=g.endAngle;y={cx:b,cy:N,startAngle:w,endAngle:S,innerRadius:j,outerRadius:j},v=yF}else y={points:bre(d,o,c)},v=Hm;var P=ov(ov(ov(ov({stroke:"#ccc",pointerEvents:"none"},c),y),Bn(p,!1)),{},{payload:l,payloadIndex:u,className:oa("recharts-tooltip-cursor",p.className)});return z.isValidElement(p)?z.cloneElement(p,P):z.createElement(v,P)}var Sre=["item"],_re=["children","className","width","height","style","compact","title","desc"];function Dp(e){"@babel/helpers - typeof";return Dp=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dp(e)}function Vm(){return Vm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vm.apply(this,arguments)}function AP(e,t){return Cre(e)||Ere(e,t)||m7(e,t)||Are()}function Are(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ere(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,u=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){u=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return l}}function Cre(e){if(Array.isArray(e))return e}function EP(e,t){if(e==null)return{};var r=Tre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Tre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ore(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pre(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,x7(n.key),n)}}function Ire(e,t,r){return t&&Pre(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dre(e,t,r){return t=K1(t),Lre(e,p7()?Reflect.construct(t,r||[],K1(e).constructor):t.apply(e,r))}function Lre(e,t){if(t&&(Dp(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fre(e)}function Fre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p7=function(){return!!e})()}function K1(e){return K1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},K1(e)}function Mre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&W4(e,t)}function W4(e,t){return W4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},W4(e,t)}function Lp(e){return Ure(e)||Bre(e)||m7(e)||Rre()}function Rre(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m7(e,t){if(e){if(typeof e=="string")return V4(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V4(e,t)}}function Bre(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ure(e){if(Array.isArray(e))return V4(e)}function V4(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function CP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Rt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(r),!0).forEach(function(n){rn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function rn(e,t,r){return t=x7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x7(e){var t=qre(e,"string");return Dp(t)=="symbol"?t:t+""}function qre(e,t){if(Dp(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Dp(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $re={xAxis:["bottom","top"],yAxis:["left","right"]},zre={width:"100%",height:"100%"},g7={x:0,y:0};function lv(e){return e}var Hre=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Wre=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return Rt(Rt(Rt({},s),ho(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,u=s.angle;return Rt(Rt(Rt({},s),ho(s.cx,s.cy,c,u)),{},{angle:u,radius:c})}return g7},Yy=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(Lp(l),Lp(u)):l},[]);return o.length>0?o:t&&t.length&&hr(s)&&hr(i)?t.slice(s,i+1):[]};function v7(e){return e==="number"?[0,"auto"]:void 0}var G4=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=Yy(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,u){var f,d=(f=u.props.data)!==null&&f!==void 0?f:r;d&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(d=d.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var p=d===void 0?l:d;m=Jv(p,o.dataKey,s)}else m=d&&d[n]||l[n];return m?[].concat(Lp(c),[xF(u,m)]):c},[])},TP=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=Hre(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,f=aX(o,l,u,c);if(f>=0&&u){var d=u[f]&&u[f].value,m=G4(t,r,f,d),p=Wre(n,l,f,i);return{activeTooltipIndex:f,activeLabel:d,activePayload:m,activeCoordinate:p}}return null},Vre=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,m=t.stackOffset,p=hF(f,i);return n.reduce(function(y,v){var g,b=v.type.defaultProps!==void 0?Rt(Rt({},v.type.defaultProps),v.props):v.props,N=b.type,j=b.dataKey,w=b.allowDataOverflow,S=b.allowDuplicatedCategory,P=b.scale,A=b.ticks,T=b.includeHidden,I=b[o];if(y[I])return y;var B=Yy(t.data,{graphicalItems:s.filter(function(O){var R,W=o in O.props?O.props[o]:(R=O.type.defaultProps)===null||R===void 0?void 0:R[o];return W===I}),dataStartIndex:c,dataEndIndex:u}),E=B.length,C,M,q;vre(b.domain,w,N)&&(C=f4(b.domain,null,w),p&&(N==="number"||P!=="auto")&&(q=zm(B,j,"category")));var G=v7(N);if(!C||C.length===0){var Z,te=(Z=b.domain)!==null&&Z!==void 0?Z:G;if(j){if(C=zm(B,j,N),N==="category"&&p){var ne=YU(C);S&&ne?(M=C,C=L1(0,E)):S||(C=WT(te,C,v).reduce(function(O,R){return O.indexOf(R)>=0?O:[].concat(Lp(O),[R])},[]))}else if(N==="category")S?C=C.filter(function(O){return O!==""&&!Gn(O)}):C=WT(te,C,v).reduce(function(O,R){return O.indexOf(R)>=0||R===""||Gn(R)?O:[].concat(Lp(O),[R])},[]);else if(N==="number"){var J=cX(B,s.filter(function(O){var R,W,U=o in O.props?O.props[o]:(R=O.type.defaultProps)===null||R===void 0?void 0:R[o],K="hide"in O.props?O.props.hide:(W=O.type.defaultProps)===null||W===void 0?void 0:W.hide;return U===I&&(T||!K)}),j,i,f);J&&(C=J)}p&&(N==="number"||P!=="auto")&&(q=zm(B,j,"category"))}else p?C=L1(0,E):l&&l[I]&&l[I].hasStack&&N==="number"?C=m==="expand"?[0,1]:mF(l[I].stackGroups,c,u):C=fF(B,s.filter(function(O){var R=o in O.props?O.props[o]:O.type.defaultProps[o],W="hide"in O.props?O.props.hide:O.type.defaultProps.hide;return R===I&&(T||!W)}),N,f,!0);if(N==="number")C=H4(d,C,I,i,A),te&&(C=f4(te,C,w));else if(N==="category"&&te){var ee=te,H=C.every(function(O){return ee.indexOf(O)>=0});H&&(C=ee)}}return Rt(Rt({},y),{},rn({},I,Rt(Rt({},b),{},{axisType:i,domain:C,categoricalDomain:q,duplicateDomain:M,originalDomain:(g=b.domain)!==null&&g!==void 0?g:G,isCategorical:p,layout:f})))},{})},Gre=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.layout,d=t.children,m=Yy(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),p=m.length,y=hF(f,i),v=-1;return n.reduce(function(g,b){var N=b.type.defaultProps!==void 0?Rt(Rt({},b.type.defaultProps),b.props):b.props,j=N[o],w=v7("number");if(!g[j]){v++;var S;return y?S=L1(0,p):l&&l[j]&&l[j].hasStack?(S=mF(l[j].stackGroups,c,u),S=H4(d,S,j,i)):(S=f4(w,fF(m,n.filter(function(P){var A,T,I=o in P.props?P.props[o]:(A=P.type.defaultProps)===null||A===void 0?void 0:A[o],B="hide"in P.props?P.props.hide:(T=P.type.defaultProps)===null||T===void 0?void 0:T.hide;return I===j&&!B}),"number",f),s.defaultProps.allowDataOverflow),S=H4(d,S,j,i)),Rt(Rt({},g),{},rn({},j,Rt(Rt({axisType:i},s.defaultProps),{},{hide:!0,orientation:nu($re,"".concat(i,".").concat(v%2),null),domain:S,originalDomain:w,isCategorical:y,layout:f})))}return g},{})},Kre=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,f=t.children,d="".concat(s,"Id"),m=Bu(f,i),p={};return m&&m.length?p=Vre(t,{axes:m,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(p=Gre(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:d,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),p},Xre=function(t){var r=Gf(t),n=Qd(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:Kk(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:S1(r,n)}},OP=function(t){var r=t.children,n=t.defaultShowTooltip,s=dc(r,Sp),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Yre=function(t){return!t||!t.length?!1:t.some(function(r){var n=af(r&&r.type);return n&&n.indexOf("Bar")>=0})},PP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Jre=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,f=n.height,d=n.children,m=n.margin||{},p=dc(d,Sp),y=dc(d,np),v=Object.keys(c).reduce(function(S,P){var A=c[P],T=A.orientation;return!A.mirror&&!A.hide?Rt(Rt({},S),{},rn({},T,S[T]+A.width)):S},{left:m.left||0,right:m.right||0}),g=Object.keys(o).reduce(function(S,P){var A=o[P],T=A.orientation;return!A.mirror&&!A.hide?Rt(Rt({},S),{},rn({},T,nu(S,"".concat(T))+A.height)):S},{top:m.top||0,bottom:m.bottom||0}),b=Rt(Rt({},g),v),N=b.bottom;p&&(b.bottom+=p.props.height||Sp.defaultProps.height),y&&r&&(b=oX(b,s,n,r));var j=u-b.left-b.right,w=f-b.top-b.bottom;return Rt(Rt({brushBottom:N},b),{},{width:Math.max(j,0),height:Math.max(w,0)})},Qre=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Zre=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,f=t.formatAxisMap,d=t.defaultProps,m=function(g,b){var N=b.graphicalItems,j=b.stackGroups,w=b.offset,S=b.updateId,P=b.dataStartIndex,A=b.dataEndIndex,T=g.barSize,I=g.layout,B=g.barGap,E=g.barCategoryGap,C=g.maxBarSize,M=PP(I),q=M.numericAxisName,G=M.cateAxisName,Z=Yre(N),te=[];return N.forEach(function(ne,J){var ee=Yy(g.data,{graphicalItems:[ne],dataStartIndex:P,dataEndIndex:A}),H=ne.type.defaultProps!==void 0?Rt(Rt({},ne.type.defaultProps),ne.props):ne.props,O=H.dataKey,R=H.maxBarSize,W=H["".concat(q,"Id")],U=H["".concat(G,"Id")],K={},oe=c.reduce(function(pe,ue){var Pe=b["".concat(ue.axisType,"Map")],Ne=H["".concat(ue.axisType,"Id")];Pe&&Pe[Ne]||ue.axisType==="zAxis"||rh();var Be=Pe[Ne];return Rt(Rt({},pe),{},rn(rn({},ue.axisType,Be),"".concat(ue.axisType,"Ticks"),Qd(Be)))},K),he=oe[G],ie=oe["".concat(G,"Ticks")],ce=j&&j[W]&&j[W].hasStack&&wX(ne,j[W].stackGroups),Le=af(ne.type).indexOf("Bar")>=0,le=S1(he,ie),He=[],Fe=Z&&sX({barSize:T,stackGroups:j,totalSize:Qre(oe,G)});if(Le){var fe,Q,we=Gn(R)?C:R,ve=(fe=(Q=S1(he,ie,!0))!==null&&Q!==void 0?Q:we)!==null&&fe!==void 0?fe:0;He=iX({barGap:B,barCategoryGap:E,bandSize:ve!==le?ve:le,sizeList:Fe[U],maxBarSize:we}),ve!==le&&(He=He.map(function(pe){return Rt(Rt({},pe),{},{position:Rt(Rt({},pe.position),{},{offset:pe.position.offset-ve/2})})}))}var Ee=ne&&ne.type&&ne.type.getComposedData;Ee&&te.push({props:Rt(Rt({},Ee(Rt(Rt({},oe),{},{displayedData:ee,props:g,dataKey:O,item:ne,bandSize:le,barPosition:He,offset:w,stackedData:ce,layout:I,dataStartIndex:P,dataEndIndex:A}))),{},rn(rn(rn({key:ne.key||"item-".concat(J)},q,oe[q]),G,oe[G]),"animationId",S)),childIndex:lq(ne,g.children),item:ne})}),te},p=function(g,b){var N=g.props,j=g.dataStartIndex,w=g.dataEndIndex,S=g.updateId;if(!sA({props:N}))return null;var P=N.children,A=N.layout,T=N.stackOffset,I=N.data,B=N.reverseStackOrder,E=PP(A),C=E.numericAxisName,M=E.cateAxisName,q=Bu(P,n),G=vX(I,q,"".concat(C,"Id"),"".concat(M,"Id"),T,B),Z=c.reduce(function(H,O){var R="".concat(O.axisType,"Map");return Rt(Rt({},H),{},rn({},R,Kre(N,Rt(Rt({},O),{},{graphicalItems:q,stackGroups:O.axisType===C&&G,dataStartIndex:j,dataEndIndex:w}))))},{}),te=Jre(Rt(Rt({},Z),{},{props:N,graphicalItems:q}),b?.legendBBox);Object.keys(Z).forEach(function(H){Z[H]=f(N,Z[H],te,H.replace("Map",""),r)});var ne=Z["".concat(M,"Map")],J=Xre(ne),ee=m(N,Rt(Rt({},Z),{},{dataStartIndex:j,dataEndIndex:w,updateId:S,graphicalItems:q,stackGroups:G,offset:te}));return Rt(Rt({formattedGraphicalItems:ee,graphicalItems:q,offset:te,stackGroups:G},J),Z)},y=(function(v){function g(b){var N,j,w;return Ore(this,g),w=Dre(this,g,[b]),rn(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),rn(w,"accessibilityManager",new gre),rn(w,"handleLegendBBoxUpdate",function(S){if(S){var P=w.state,A=P.dataStartIndex,T=P.dataEndIndex,I=P.updateId;w.setState(Rt({legendBBox:S},p({props:w.props,dataStartIndex:A,dataEndIndex:T,updateId:I},Rt(Rt({},w.state),{},{legendBBox:S}))))}}),rn(w,"handleReceiveSyncEvent",function(S,P,A){if(w.props.syncId===S){if(A===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(P)}}),rn(w,"handleBrushChange",function(S){var P=S.startIndex,A=S.endIndex;if(P!==w.state.dataStartIndex||A!==w.state.dataEndIndex){var T=w.state.updateId;w.setState(function(){return Rt({dataStartIndex:P,dataEndIndex:A},p({props:w.props,dataStartIndex:P,dataEndIndex:A,updateId:T},w.state))}),w.triggerSyncEvent({dataStartIndex:P,dataEndIndex:A})}}),rn(w,"handleMouseEnter",function(S){var P=w.getMouseInfo(S);if(P){var A=Rt(Rt({},P),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var T=w.props.onMouseEnter;Cn(T)&&T(A,S)}}),rn(w,"triggeredAfterMouseMove",function(S){var P=w.getMouseInfo(S),A=P?Rt(Rt({},P),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(A),w.triggerSyncEvent(A);var T=w.props.onMouseMove;Cn(T)&&T(A,S)}),rn(w,"handleItemMouseEnter",function(S){w.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),rn(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),rn(w,"handleMouseMove",function(S){S.persist(),w.throttleTriggeredAfterMouseMove(S)}),rn(w,"handleMouseLeave",function(S){w.throttleTriggeredAfterMouseMove.cancel();var P={isTooltipActive:!1};w.setState(P),w.triggerSyncEvent(P);var A=w.props.onMouseLeave;Cn(A)&&A(P,S)}),rn(w,"handleOuterEvent",function(S){var P=oq(S),A=nu(w.props,"".concat(P));if(P&&Cn(A)){var T,I;/.*touch.*/i.test(P)?I=w.getMouseInfo(S.changedTouches[0]):I=w.getMouseInfo(S),A((T=I)!==null&&T!==void 0?T:{},S)}}),rn(w,"handleClick",function(S){var P=w.getMouseInfo(S);if(P){var A=Rt(Rt({},P),{},{isTooltipActive:!0});w.setState(A),w.triggerSyncEvent(A);var T=w.props.onClick;Cn(T)&&T(A,S)}}),rn(w,"handleMouseDown",function(S){var P=w.props.onMouseDown;if(Cn(P)){var A=w.getMouseInfo(S);P(A,S)}}),rn(w,"handleMouseUp",function(S){var P=w.props.onMouseUp;if(Cn(P)){var A=w.getMouseInfo(S);P(A,S)}}),rn(w,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),rn(w,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseDown(S.changedTouches[0])}),rn(w,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&w.handleMouseUp(S.changedTouches[0])}),rn(w,"triggerSyncEvent",function(S){w.props.syncId!==void 0&&GN.emit(KN,w.props.syncId,S,w.eventEmitterSymbol)}),rn(w,"applySyncEvent",function(S){var P=w.props,A=P.layout,T=P.syncMethod,I=w.state.updateId,B=S.dataStartIndex,E=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)w.setState(Rt({dataStartIndex:B,dataEndIndex:E},p({props:w.props,dataStartIndex:B,dataEndIndex:E,updateId:I},w.state)));else if(S.activeTooltipIndex!==void 0){var C=S.chartX,M=S.chartY,q=S.activeTooltipIndex,G=w.state,Z=G.offset,te=G.tooltipTicks;if(!Z)return;if(typeof T=="function")q=T(te,S);else if(T==="value"){q=-1;for(var ne=0;ne<te.length;ne++)if(te[ne].value===S.activeLabel){q=ne;break}}var J=Rt(Rt({},Z),{},{x:Z.left,y:Z.top}),ee=Math.min(C,J.x+J.width),H=Math.min(M,J.y+J.height),O=te[q]&&te[q].value,R=G4(w.state,w.props.data,q),W=te[q]?{x:A==="horizontal"?te[q].coordinate:ee,y:A==="horizontal"?H:te[q].coordinate}:g7;w.setState(Rt(Rt({},S),{},{activeLabel:O,activeCoordinate:W,activePayload:R,activeTooltipIndex:q}))}else w.setState(S)}),rn(w,"renderCursor",function(S){var P,A=w.state,T=A.isTooltipActive,I=A.activeCoordinate,B=A.activePayload,E=A.offset,C=A.activeTooltipIndex,M=A.tooltipAxisBandSize,q=w.getTooltipEventType(),G=(P=S.props.active)!==null&&P!==void 0?P:T,Z=w.props.layout,te=S.key||"_recharts-cursor";return at.createElement(kre,{key:te,activeCoordinate:I,activePayload:B,activeTooltipIndex:C,chartName:r,element:S,isActive:G,layout:Z,offset:E,tooltipAxisBandSize:M,tooltipEventType:q})}),rn(w,"renderPolarAxis",function(S,P,A){var T=nu(S,"type.axisType"),I=nu(w.state,"".concat(T,"Map")),B=S.type.defaultProps,E=B!==void 0?Rt(Rt({},B),S.props):S.props,C=I&&I[E["".concat(T,"Id")]];return z.cloneElement(S,Rt(Rt({},C),{},{className:oa(T,C.className),key:S.key||"".concat(P,"-").concat(A),ticks:Qd(C,!0)}))}),rn(w,"renderPolarGrid",function(S){var P=S.props,A=P.radialLines,T=P.polarAngles,I=P.polarRadius,B=w.state,E=B.radiusAxisMap,C=B.angleAxisMap,M=Gf(E),q=Gf(C),G=q.cx,Z=q.cy,te=q.innerRadius,ne=q.outerRadius;return z.cloneElement(S,{polarAngles:Array.isArray(T)?T:Qd(q,!0).map(function(J){return J.coordinate}),polarRadius:Array.isArray(I)?I:Qd(M,!0).map(function(J){return J.coordinate}),cx:G,cy:Z,innerRadius:te,outerRadius:ne,key:S.key||"polar-grid",radialLines:A})}),rn(w,"renderLegend",function(){var S=w.state.formattedGraphicalItems,P=w.props,A=P.children,T=P.width,I=P.height,B=w.props.margin||{},E=T-(B.left||0)-(B.right||0),C=uF({children:A,formattedGraphicalItems:S,legendWidth:E,legendContent:u});if(!C)return null;var M=C.item,q=EP(C,Sre);return z.cloneElement(M,Rt(Rt({},q),{},{chartWidth:T,chartHeight:I,margin:B,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),rn(w,"renderTooltip",function(){var S,P=w.props,A=P.children,T=P.accessibilityLayer,I=dc(A,dd);if(!I)return null;var B=w.state,E=B.isTooltipActive,C=B.activeCoordinate,M=B.activePayload,q=B.activeLabel,G=B.offset,Z=(S=I.props.active)!==null&&S!==void 0?S:E;return z.cloneElement(I,{viewBox:Rt(Rt({},G),{},{x:G.left,y:G.top}),active:Z,label:q,payload:Z?M:[],coordinate:C,accessibilityLayer:T})}),rn(w,"renderBrush",function(S){var P=w.props,A=P.margin,T=P.data,I=w.state,B=I.offset,E=I.dataStartIndex,C=I.dataEndIndex,M=I.updateId;return z.cloneElement(S,{key:S.key||"_recharts-brush",onChange:nv(w.handleBrushChange,S.props.onChange),data:T,x:hr(S.props.x)?S.props.x:B.left,y:hr(S.props.y)?S.props.y:B.top+B.height+B.brushBottom-(A.bottom||0),width:hr(S.props.width)?S.props.width:B.width,startIndex:E,endIndex:C,updateId:"brush-".concat(M)})}),rn(w,"renderReferenceElement",function(S,P,A){if(!S)return null;var T=w,I=T.clipPathId,B=w.state,E=B.xAxisMap,C=B.yAxisMap,M=B.offset,q=S.type.defaultProps||{},G=S.props,Z=G.xAxisId,te=Z===void 0?q.xAxisId:Z,ne=G.yAxisId,J=ne===void 0?q.yAxisId:ne;return z.cloneElement(S,{key:S.key||"".concat(P,"-").concat(A),xAxis:E[te],yAxis:C[J],viewBox:{x:M.left,y:M.top,width:M.width,height:M.height},clipPathId:I})}),rn(w,"renderActivePoints",function(S){var P=S.item,A=S.activePoint,T=S.basePoint,I=S.childIndex,B=S.isRange,E=[],C=P.props.key,M=P.item.type.defaultProps!==void 0?Rt(Rt({},P.item.type.defaultProps),P.item.props):P.item.props,q=M.activeDot,G=M.dataKey,Z=Rt(Rt({index:I,dataKey:G,cx:A.x,cy:A.y,r:4,fill:b3(P.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},Bn(q,!1)),Qv(q));return E.push(g.renderActiveDot(q,Z,"".concat(C,"-activePoint-").concat(I))),T?E.push(g.renderActiveDot(q,Rt(Rt({},Z),{},{cx:T.x,cy:T.y}),"".concat(C,"-basePoint-").concat(I))):B&&E.push(null),E}),rn(w,"renderGraphicChild",function(S,P,A){var T=w.filterFormatItem(S,P,A);if(!T)return null;var I=w.getTooltipEventType(),B=w.state,E=B.isTooltipActive,C=B.tooltipAxis,M=B.activeTooltipIndex,q=B.activeLabel,G=w.props.children,Z=dc(G,dd),te=T.props,ne=te.points,J=te.isRange,ee=te.baseLine,H=T.item.type.defaultProps!==void 0?Rt(Rt({},T.item.type.defaultProps),T.item.props):T.item.props,O=H.activeDot,R=H.hide,W=H.activeBar,U=H.activeShape,K=!!(!R&&E&&Z&&(O||W||U)),oe={};I!=="axis"&&Z&&Z.props.trigger==="click"?oe={onClick:nv(w.handleItemMouseEnter,S.props.onClick)}:I!=="axis"&&(oe={onMouseLeave:nv(w.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:nv(w.handleItemMouseEnter,S.props.onMouseEnter)});var he=z.cloneElement(S,Rt(Rt({},T.props),oe));function ie(ue){return typeof C.dataKey=="function"?C.dataKey(ue.payload):null}if(K)if(M>=0){var ce,Le;if(C.dataKey&&!C.allowDuplicatedCategory){var le=typeof C.dataKey=="function"?ie:"payload.".concat(C.dataKey.toString());ce=Jv(ne,le,q),Le=J&&ee&&Jv(ee,le,q)}else ce=ne?.[M],Le=J&&ee&&ee[M];if(U||W){var He=S.props.activeIndex!==void 0?S.props.activeIndex:M;return[z.cloneElement(S,Rt(Rt(Rt({},T.props),oe),{},{activeIndex:He})),null,null]}if(!Gn(ce))return[he].concat(Lp(w.renderActivePoints({item:T,activePoint:ce,basePoint:Le,childIndex:M,isRange:J})))}else{var Fe,fe=(Fe=w.getItemByXY(w.state.activeCoordinate))!==null&&Fe!==void 0?Fe:{graphicalItem:he},Q=fe.graphicalItem,we=Q.item,ve=we===void 0?S:we,Ee=Q.childIndex,pe=Rt(Rt(Rt({},T.props),oe),{},{activeIndex:Ee});return[z.cloneElement(ve,pe),null,null]}return J?[he,null,null]:[he,null]}),rn(w,"renderCustomized",function(S,P,A){return z.cloneElement(S,Rt(Rt({key:"recharts-customized-".concat(A)},w.props),w.state))}),rn(w,"renderMap",{CartesianGrid:{handler:lv,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:lv},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:lv},YAxis:{handler:lv},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((N=b.id)!==null&&N!==void 0?N:sg("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=cL(w.triggeredAfterMouseMove,(j=b.throttleDelay)!==null&&j!==void 0?j:1e3/60),w.state={},w}return Mre(g,v),Ire(g,[{key:"componentDidMount",value:function(){var N,j;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var N=this.props,j=N.children,w=N.data,S=N.height,P=N.layout,A=dc(j,dd);if(A){var T=A.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var I=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,B=G4(this.state,w,T,I),E=this.state.tooltipTicks[T].coordinate,C=(this.state.offset.top+S)/2,M=P==="horizontal",q=M?{x:E,y:C}:{y:E,x:C},G=this.state.formattedGraphicalItems.find(function(te){var ne=te.item;return ne.type.name==="Scatter"});G&&(q=Rt(Rt({},q),G.props.points[T].tooltipPosition),B=G.props.points[T].tooltipPayload);var Z={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:I,activePayload:B,activeCoordinate:q};this.setState(Z),this.renderCursor(A),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(N,j){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==j.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==N.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==N.margin){var w,S;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(N){Dj([dc(N.children,dd)],[dc(this.props.children,dd)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var N=dc(this.props.children,dd);if(N&&typeof N.props.shared=="boolean"){var j=N.props.shared?"axis":"item";return l.indexOf(j)>=0?j:i}return i}},{key:"getMouseInfo",value:function(N){if(!this.container)return null;var j=this.container,w=j.getBoundingClientRect(),S=XH(w),P={chartX:Math.round(N.pageX-S.left),chartY:Math.round(N.pageY-S.top)},A=w.width/j.offsetWidth||1,T=this.inRange(P.chartX,P.chartY,A);if(!T)return null;var I=this.state,B=I.xAxisMap,E=I.yAxisMap,C=this.getTooltipEventType();if(C!=="axis"&&B&&E){var M=Gf(B).scale,q=Gf(E).scale,G=M&&M.invert?M.invert(P.chartX):null,Z=q&&q.invert?q.invert(P.chartY):null;return Rt(Rt({},P),{},{xValue:G,yValue:Z})}var te=TP(this.state,this.props.data,this.props.layout,T);return te?Rt(Rt({},P),te):null}},{key:"inRange",value:function(N,j){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,P=N/w,A=j/w;if(S==="horizontal"||S==="vertical"){var T=this.state.offset,I=P>=T.left&&P<=T.left+T.width&&A>=T.top&&A<=T.top+T.height;return I?{x:P,y:A}:null}var B=this.state,E=B.angleAxisMap,C=B.radiusAxisMap;if(E&&C){var M=Gf(E);return KT({x:P,y:A},M)}return null}},{key:"parseEventsOfWrapper",value:function(){var N=this.props.children,j=this.getTooltipEventType(),w=dc(N,dd),S={};w&&j==="axis"&&(w.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var P=Qv(this.props,this.handleOuterEvent);return Rt(Rt({},P),S)}},{key:"addListener",value:function(){GN.on(KN,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){GN.removeListener(KN,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(N,j,w){for(var S=this.state.formattedGraphicalItems,P=0,A=S.length;P<A;P++){var T=S[P];if(T.item===N||T.props.key===N.key||j===af(T.item.type)&&w===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var N=this.clipPathId,j=this.state.offset,w=j.left,S=j.top,P=j.height,A=j.width;return at.createElement("defs",null,at.createElement("clipPath",{id:N},at.createElement("rect",{x:w,y:S,height:P,width:A})))}},{key:"getXScales",value:function(){var N=this.state.xAxisMap;return N?Object.entries(N).reduce(function(j,w){var S=AP(w,2),P=S[0],A=S[1];return Rt(Rt({},j),{},rn({},P,A.scale))},{}):null}},{key:"getYScales",value:function(){var N=this.state.yAxisMap;return N?Object.entries(N).reduce(function(j,w){var S=AP(w,2),P=S[0],A=S[1];return Rt(Rt({},j),{},rn({},P,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(N){var j;return(j=this.state.xAxisMap)===null||j===void 0||(j=j[N])===null||j===void 0?void 0:j.scale}},{key:"getYScaleByAxisId",value:function(N){var j;return(j=this.state.yAxisMap)===null||j===void 0||(j=j[N])===null||j===void 0?void 0:j.scale}},{key:"getItemByXY",value:function(N){var j=this.state,w=j.formattedGraphicalItems,S=j.activeItem;if(w&&w.length)for(var P=0,A=w.length;P<A;P++){var T=w[P],I=T.props,B=T.item,E=B.type.defaultProps!==void 0?Rt(Rt({},B.type.defaultProps),B.props):B.props,C=af(B.type);if(C==="Bar"){var M=(I.data||[]).find(function(te){return mQ(N,te)});if(M)return{graphicalItem:T,payload:M}}else if(C==="RadialBar"){var q=(I.data||[]).find(function(te){return KT(N,te)});if(q)return{graphicalItem:T,payload:q}}else if(qy(T,S)||$y(T,S)||Dx(T,S)){var G=sZ({graphicalItem:T,activeTooltipItem:S,itemData:E.data}),Z=E.activeIndex===void 0?G:E.activeIndex;return{graphicalItem:Rt(Rt({},T),{},{childIndex:Z}),payload:Dx(T,S)?E.data[G]:T.props.data[G]}}}return null}},{key:"render",value:function(){var N=this;if(!sA(this))return null;var j=this.props,w=j.children,S=j.className,P=j.width,A=j.height,T=j.style,I=j.compact,B=j.title,E=j.desc,C=EP(j,_re),M=Bn(C,!1);if(I)return at.createElement(cP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},at.createElement(Fj,Vm({},M,{width:P,height:A,title:B,desc:E}),this.renderClipPath(),oA(w,this.renderMap)));if(this.props.accessibilityLayer){var q,G;M.tabIndex=(q=this.props.tabIndex)!==null&&q!==void 0?q:0,M.role=(G=this.props.role)!==null&&G!==void 0?G:"application",M.onKeyDown=function(te){N.accessibilityManager.keyboardEvent(te)},M.onFocus=function(){N.accessibilityManager.focus()}}var Z=this.parseEventsOfWrapper();return at.createElement(cP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},at.createElement("div",Vm({className:oa("recharts-wrapper",S),style:Rt({position:"relative",cursor:"default",width:P,height:A},T)},Z,{ref:function(ne){N.container=ne}}),at.createElement(Fj,Vm({},M,{width:P,height:A,title:B,desc:E,style:zre}),this.renderClipPath(),oA(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(z.Component);return rn(y,"displayName",r),rn(y,"defaultProps",Rt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),rn(y,"getDerivedStateFromProps",function(v,g){var b=v.dataKey,N=v.data,j=v.children,w=v.width,S=v.height,P=v.layout,A=v.stackOffset,T=v.margin,I=g.dataStartIndex,B=g.dataEndIndex;if(g.updateId===void 0){var E=OP(v);return Rt(Rt(Rt({},E),{},{updateId:0},p(Rt(Rt({props:v},E),{},{updateId:0}),g)),{},{prevDataKey:b,prevData:N,prevWidth:w,prevHeight:S,prevLayout:P,prevStackOffset:A,prevMargin:T,prevChildren:j})}if(b!==g.prevDataKey||N!==g.prevData||w!==g.prevWidth||S!==g.prevHeight||P!==g.prevLayout||A!==g.prevStackOffset||!rp(T,g.prevMargin)){var C=OP(v),M={chartX:g.chartX,chartY:g.chartY,isTooltipActive:g.isTooltipActive},q=Rt(Rt({},TP(g,N,P)),{},{updateId:g.updateId+1}),G=Rt(Rt(Rt({},C),M),q);return Rt(Rt(Rt({},G),p(Rt({props:v},G),g)),{},{prevDataKey:b,prevData:N,prevWidth:w,prevHeight:S,prevLayout:P,prevStackOffset:A,prevMargin:T,prevChildren:j})}if(!Dj(j,g.prevChildren)){var Z,te,ne,J,ee=dc(j,Sp),H=ee&&(Z=(te=ee.props)===null||te===void 0?void 0:te.startIndex)!==null&&Z!==void 0?Z:I,O=ee&&(ne=(J=ee.props)===null||J===void 0?void 0:J.endIndex)!==null&&ne!==void 0?ne:B,R=H!==I||O!==B,W=!Gn(N),U=W&&!R?g.updateId:g.updateId+1;return Rt(Rt({updateId:U},p(Rt(Rt({props:v},g),{},{updateId:U,dataStartIndex:H,dataEndIndex:O}),g)),{},{prevChildren:j,dataStartIndex:H,dataEndIndex:O})}return null}),rn(y,"renderActiveDot",function(v,g,b){var N;return z.isValidElement(v)?N=z.cloneElement(v,g):Cn(v)?N=v(g):N=at.createElement(N3,g),at.createElement(Ss,{className:"recharts-active-dot",key:b},N)}),function(g){return at.createElement(y,g)}},ene=Zre({chartName:"AreaChart",GraphicalChild:g0,axisComponents:[{axisType:"xAxis",AxisComp:Ky},{axisType:"yAxis",AxisComp:Xy}],formatAxisMap:tee});const tne=e=>{const t=e.toUpperCase().charCodeAt(0),r=[{bg:"bg-indigo-500",text:"text-white"},{bg:"bg-emerald-500",text:"text-white"},{bg:"bg-amber-500",text:"text-white"},{bg:"bg-rose-500",text:"text-white"},{bg:"bg-blue-500",text:"text-white"},{bg:"bg-purple-500",text:"text-white"},{bg:"bg-pink-500",text:"text-white"},{bg:"bg-cyan-500",text:"text-white"},{bg:"bg-orange-500",text:"text-white"},{bg:"bg-teal-500",text:"text-white"},{bg:"bg-lime-500",text:"text-white"},{bg:"bg-violet-500",text:"text-white"},{bg:"bg-fuchsia-500",text:"text-white"},{bg:"bg-sky-500",text:"text-white"},{bg:"bg-red-500",text:"text-white"},{bg:"bg-green-500",text:"text-white"}];return r[t%r.length]},Qs=({src:e,alt:t,className:r,fallbackText:n,isAvatar:s})=>{const[i,o]=z.useState(!1),[l,c]=z.useState(!1),u=z.useMemo(()=>{const g=(n||t||"").trim();if(!g)return"?";if(s){const b=g.match(/[a-zA-Z0-9]/);return b?b[0].toUpperCase():"?"}else{const b=g.split(/\s+/).filter(N=>N.length>0);if(b.length===0)return"?";if(b.length===1){const N=b[0].match(/[a-zA-Z0-9]/);return N?N[0].toUpperCase():"?"}else{const N=b[0].match(/[a-zA-Z0-9]/),j=b[1].match(/[a-zA-Z0-9]/),w=N?N[0].toUpperCase():"",S=j?j[0].toUpperCase():"";return w&&S?`${w}${S}`:w||"?"}}},[n,t,s]),f=z.useMemo(()=>tne(u),[u]),d=()=>r?.includes("w-5")||r?.includes("h-5")?"text-[10px]":r?.includes("w-6")||r?.includes("h-6")?"text-xs":r?.includes("w-8")||r?.includes("h-8")?"text-sm":r?.includes("w-10")||r?.includes("h-10")?"text-base":r?.includes("w-12")||r?.includes("h-12")||r?.includes("w-14")||r?.includes("h-14")?"text-lg":r?.includes("w-16")||r?.includes("h-16")?"text-xl":r?.includes("w-20")||r?.includes("h-20")?"text-2xl":r?.includes("w-24")||r?.includes("h-24")?"text-3xl":"text-base",p=s?"rounded-full":r?.includes("rounded-3xl")?"rounded-3xl":r?.includes("rounded-xl")?"rounded-xl":r?.includes("rounded-lg")?"rounded-lg":r?.includes("rounded-md")?"rounded-md":r?.includes("rounded-sm")?"rounded-sm":"rounded-lg",y=(r||"").replace(/\brounded-(full|3xl|xl|lg|md|sm)\b/g,"").trim();if(!s){const v=`${y} ${p} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return a.jsx("div",{className:v,children:a.jsx("span",{className:d(),children:u})})}if(!e||i){const v=`${y} ${p} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return a.jsx("div",{className:v,children:a.jsx("span",{className:d(),children:u})})}return a.jsxs(a.Fragment,{children:[!l&&a.jsx("div",{className:`${y} ${p} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`,children:a.jsx("span",{className:d(),children:u})}),a.jsx("img",{src:e,alt:t,className:`${y} ${p} object-cover`,onError:()=>o(!0),onLoad:()=>c(!0),style:{display:l?"block":"none"}})]})},IP=(e,t=[])=>{if(typeof window>"u")return t;const r=localStorage.getItem(`impactflow_sim_${e}`);return r?JSON.parse(r):t},cv=(e,t)=>{typeof window>"u"||localStorage.setItem(`impactflow_sim_${e}`,JSON.stringify(t))},DP=async(e,t={})=>{await new Promise(o=>setTimeout(o,600));const r=t.body?JSON.parse(t.body):{},n=(t.method||"GET").toUpperCase();if(console.info(`[VIRTUAL SERVER] ${n} ${e}`,r),e==="/auth/send-otp"||e==="/auth/request-code"){const o=r.email?.toLowerCase().trim();return console.warn("[VIRTUAL SERVER] Simulator fallback active for AUTH"),Rv.some(c=>c.email.toLowerCase().trim()===o)?{success:!0,message:"Simulated OTP sent to "+o}:{status:404,message:"Account not found - contact your Administrator",success:!1}}if(e==="/auth/verify-otp"||e==="/auth/verify"){const o=r.email?.toLowerCase().trim();return{success:!0,token:"v-token-123",user:Rv.find(c=>c.email.toLowerCase()===o)||{id:"u-gen",name:"Impact Member",email:r.email,role:"User",avatar:`https://picsum.photos/seed/${r.email}/100/100`,active:!0}}}if(e.includes("feedback")){let o=IP("feedback",[]);if(n==="POST"){const l={id:`fb-${Date.now()}`,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return o.unshift(l),cv("feedback",o),{success:!0,data:l,simulated:!0}}if(n==="PATCH"||n==="PUT"){const l=e.split("/").pop();return o=o.map(c=>c.id===l?{...c,...r,updatedAt:new Date().toISOString()}:c),cv("feedback",o),{success:!0,simulated:!0}}if(n==="DELETE"){const l=e.split("/").pop();return o=o.filter(c=>c.id!==l),cv("feedback",o),{success:!0,simulated:!0}}return{success:!0,data:o,simulated:!0}}const i=["deals","projects","tasks","invoices","companies","contacts","expenses","expense-categories"].find(o=>e.includes(o));if(i){let o=IP(i,[]);if(n==="POST"){const l={id:`sim-${i}-${Date.now()}`,...r,createdAt:new Date().toISOString()};return o.unshift(l),cv(i,o),{success:!0,data:l,simulated:!0}}if(n==="GET"&&e.split("/").length>2){const l=e.split("/").pop();return{success:!0,data:o.find(u=>u.id===l),simulated:!0}}return{success:!0,data:o,simulated:!0}}if(e.includes("data-hygiene")){if(e.includes("duplicate-companies"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("duplicate-contacts"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("incomplete-records"))return{success:!0,data:{companies:[],contacts:[],deals:[],projects:[],invoices:[]},simulated:!0};if(e.includes("domain-mismatches"))return{success:!0,data:{mismatches:[],count:0},simulated:!0}}if(e.startsWith("/shared-inbox/labels"))return{success:!0,labels:[],simulated:!0};if(e.startsWith("/shared-inbox/senders"))return{success:!0,data:[],simulated:!0};if(e.startsWith("/shared-inbox/emails")&&n==="GET"&&!e.match(/\/emails\/[^/]+$/))return{data:[],success:!0,simulated:!0};switch(e){case"/me":case"/auth/me":return Rv[0];case"/google-calendar/status":return{connected:!1,simulated:!0};default:return{data:[],status:"ok",simulated:!0}}},y7=()=>"http://127.0.0.1:8050/api/v1/impactOS",P3=y7();typeof window<"u"&&console.log(`[API] Initializing with Base: ${P3}`);const yt=async(e,t={})=>{const r=localStorage.getItem("auth_token"),n=e.startsWith("/")?e:`/${e}`,s=`${P3}${n}`,i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers};try{const o=await fetch(s,{...t,headers:i}),l=await o.json().catch(()=>({}));if(!o.ok){const u=["feedback","deals","projects","tasks","invoices","companies","contacts","automations","notifications","events","expenses","expense-categories","data-hygiene"].some(m=>n.includes(m));if(o.status===404&&u)return console.warn(`[SYSTEM] Live endpoint ${n} not found. Engaging Virtual Engine fallback.`),DP(n,t);let f=`Server Error ${o.status}`;try{l&&typeof l=="object"&&(f=l.message||l.error?.message||f)}catch{}const d=new Error(f);throw d.status=o.status,l?.error?.code&&typeof l.error.code=="string"&&(d.code=l.error.code),d}return l}catch(o){let l="Unknown error",c="Error",u,f;try{o&&typeof o=="object"?(l=o.message||String(o)||l,c=o.name||c,u=typeof o.status=="number"?o.status:void 0,f=typeof o.code=="string"?o.code:void 0):o&&(l=String(o))}catch{}const d=c==="TypeError"||l.includes("Failed to fetch"),m=u!==void 0&&u>=500,p=u!==void 0&&u>=400&&u<500;if(d||m&&!p)return console.info("[SYSTEM] Production API unreachable. Engaging Virtual Engine fallback."),DP(n,t);const y=new Error(l);throw u!==void 0&&(y.status=u),f&&(y.code=f),y}},LP=e=>yt("/auth/send-otp",{method:"POST",body:JSON.stringify({email:e.email})}),rne=e=>yt("/auth/verify-otp",{method:"POST",body:JSON.stringify({email:e.email,otp:e.verificationCode})}),FP=()=>yt("/auth/me"),nne=async()=>{try{await yt("/auth/logout",{method:"POST"})}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}},Ed=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return yt(`/users${t}`)},ane=e=>yt("/users",{method:"POST",body:JSON.stringify(e)}),sne=(e,t)=>yt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),ine=e=>yt(`/users/${e}/dashboard-layout`),one=(e,t)=>yt(`/users/${e}/dashboard-layout`,{method:"PUT",body:JSON.stringify({layout:t})}),lne=e=>yt(`/users/${e}`,{method:"DELETE"}),cne=(e,t)=>yt(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),Cd=e=>yt(`/companies${e?`?search=${encodeURIComponent(e)}`:""}`),une=e=>yt("/companies",{method:"POST",body:JSON.stringify(e)}),b7=(e,t)=>yt(`/companies/${e}`,{method:"PUT",body:JSON.stringify(t)}),w7=e=>yt(`/companies/${e}`,{method:"DELETE"}),fg=(e,t)=>{const r=new URLSearchParams;e&&r.append("search",e);const n=r.toString();return yt(`/contacts${n?`?${n}`:""}`)},MP=e=>yt("/contacts",{method:"POST",body:JSON.stringify(e)}),N7=(e,t)=>yt(`/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)}),j7=e=>yt(`/contacts/${e}`,{method:"DELETE"}),Jy=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return yt(`/deals${s?`?${s}`:""}`)},dne=e=>yt("/deals",{method:"POST",body:JSON.stringify(e)}),uv=(e,t)=>yt(`/deals/${e}`,{method:"PUT",body:JSON.stringify(t)}),RP=e=>yt(`/deals/${e}`,{method:"DELETE"}),Yp=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return yt(`/projects${s?`?${s}`:""}`)},fne=e=>yt(`/projects/${e}`),hne=e=>yt("/projects",{method:"POST",body:JSON.stringify(e)}),k7=(e,t)=>yt(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),S7=e=>yt(`/projects/${e}`,{method:"DELETE"}),Qy=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return yt(`/tasks${s?`?${s}`:""}`)},X1=()=>yt("/tasks/categories"),_7=e=>yt("/tasks",{method:"POST",body:JSON.stringify(e)}),Y1=(e,t)=>yt(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),A7=e=>yt(`/tasks/${e}`,{method:"DELETE"}),pne=e=>yt("/tasks/bulk-import",{method:"POST",body:JSON.stringify({tasks:e})}),E7=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return yt(`/invoices${s?`?${s}`:""}`)},mne=e=>yt("/invoices",{method:"POST",body:JSON.stringify(e)}),dv=(e,t)=>yt(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(t)}),BP=e=>yt(`/invoices/${e}`,{method:"DELETE"}),xne=(e,t)=>yt(`/invoices/revenue-velocity?userId=${e}&timeframe=${t}`),UP=e=>yt(`/automations${e?`?userId=${e}`:""}`),gne=e=>yt("/automations",{method:"POST",body:JSON.stringify(e)}),vne=e=>yt(`/automations/${e}/toggle`,{method:"PATCH"}),yne=e=>yt(`/automations/${e}`,{method:"DELETE"}),C7=(e,t)=>yt(`/notifications?userId=${e}&limitNum=${t}`),Fp=e=>yt("/notifications",{method:"POST",body:JSON.stringify(e)}),T7=(e,t)=>yt(`/notifications/${e}/read`,{method:"POST",body:JSON.stringify({userId:t})}),O7=e=>yt("/notifications/mark-all-read",{method:"POST",body:JSON.stringify({userId:e})}),bne=e=>yt(`/users/${e}/notification-preferences`),wne=(e,t)=>yt(`/users/${e}/notification-preferences`,{method:"PUT",body:JSON.stringify({preferences:t})}),Nne=(e="default")=>yt(`/data-retention/policy?workspaceId=${e}`),jne=(e,t)=>yt("/data-retention/policy",{method:"PUT",body:JSON.stringify({workspaceId:e,...t})}),kne=(e="default")=>yt(`/data-retention/stats?workspaceId=${e}`),Sne=(e="default",t=50)=>yt("/data-retention/archive",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),_ne=(e="default",t=50)=>yt("/data-retention/cleanup",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),Ane=(e="default",t={})=>{const r=new URLSearchParams({workspaceId:e});return t.format&&r.append("format",t.format),t.startDate&&r.append("startDate",t.startDate),t.endDate&&r.append("endDate",t.endDate),t.limit&&r.append("limit",t.limit.toString()),yt(`/data-retention/export?${r.toString()}`)},qP=()=>yt("/pipelines"),$P=e=>yt("/pipelines",{method:"POST",body:JSON.stringify(e)}),fv=(e,t)=>yt(`/pipelines/${e}`,{method:"PUT",body:JSON.stringify(t)}),Ene=()=>yt("/feedback"),P7=e=>yt("/feedback",{method:"POST",body:JSON.stringify(e)}),YN=(e,t)=>yt(`/feedback/${e}`,{method:"PATCH",body:JSON.stringify(t)}),zP=e=>yt(`/feedback/${e}`,{method:"DELETE"}),Cne=e=>{const t=new URLSearchParams;e?.companyId&&t.append("companyId",e.companyId),e?.userId&&t.append("userId",e.userId);const r=t.toString();return yt(`/expenses${r?`?${r}`:""}`)},Tne=e=>yt("/expenses",{method:"POST",body:JSON.stringify(e)}),One=(e,t)=>yt(`/expenses/${e}`,{method:"PATCH",body:JSON.stringify(t)}),HP=e=>yt(`/expenses/${e}`,{method:"DELETE"}),I7=()=>yt("/expense-categories"),D7=e=>yt("/expense-categories",{method:"POST",body:JSON.stringify(e)}),Pne=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>[r,String(n)])).toString():"";return yt(`/budgets${t}`)},Ine=e=>yt("/budgets",{method:"POST",body:JSON.stringify(e)}),Dne=(e,t)=>yt(`/budgets/${e}`,{method:"PUT",body:JSON.stringify(t)}),Lne=e=>yt(`/budgets/${e}`,{method:"DELETE"}),Fne=e=>{const t="?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>[r,String(n)])).toString();return yt(`/budgets/tracking${t}`)},Mne=()=>yt("/budgets/departments"),L7=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n)).toString():"";return yt(`/contracts${t}`)},Rne=e=>yt("/contracts",{method:"POST",body:JSON.stringify(e)}),Bne=(e,t)=>yt(`/contracts/${e}`,{method:"PUT",body:JSON.stringify(t)}),Une=e=>yt(`/contracts/${e}`,{method:"DELETE"}),qne=(e,t)=>yt(`/contracts/${e}/sign`,{method:"POST",body:JSON.stringify(t)}),$ne=()=>yt("/contracts/document-types"),zne=e=>yt("/contracts/document-types",{method:"POST",body:JSON.stringify(e)}),WP=e=>{const t="?"+new URLSearchParams(Object.entries(e)).toString();return yt(`/contracts/google-drive/access-token${t}`)},Hne=e=>yt("/contracts/google-drive/upload",{method:"POST",body:JSON.stringify(e)}),Wne=e=>yt("/contracts/signature/create-doc",{method:"POST",body:JSON.stringify(e)}),Vne=(e,t)=>yt("/merge/companies",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Gne=(e,t)=>yt("/merge/contacts",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),Kne=()=>yt("/data-hygiene/duplicate-companies"),Xne=()=>yt("/data-hygiene/duplicate-contacts"),Yne=()=>yt("/data-hygiene/incomplete-records"),Jne=()=>yt("/data-hygiene/domain-mismatches"),I3=e=>yt(`/google-calendar/status?userId=${e}`),F7=e=>yt(`/google-calendar/auth-url?userId=${e}`),Qne=(e,t,r)=>yt(`/google-calendar/events?userId=${r}&startDate=${e}&endDate=${t}`),Zne=e=>yt("/google-calendar/disconnect",{method:"POST",body:JSON.stringify({userId:e})}),eae=(e,t,r,n)=>{const s=new URLSearchParams({userId:e});return t&&s.append("accountEmail",t),r!=null&&s.append("scopeHours",String(r)),n!=null&&s.append("scopeDays",String(n)),yt(`/shared-inbox/sync?${s.toString()}`,{method:"POST"})},tae=e=>yt(`/shared-inbox/accounts?userId=${e}`),rae=(e,t)=>yt("/shared-inbox/accounts",{method:"DELETE",body:JSON.stringify({userId:e,accountEmail:t})}),nae=e=>yt(`/shared-inbox/filtered-accounts?userId=${e}`),aae=(e,t)=>yt("/shared-inbox/filtered-accounts",{method:"POST",body:JSON.stringify({userId:e,accountEmail:t})}),sae=(e,t)=>yt(`/shared-inbox/filtered-accounts/${t}?userId=${e}`,{method:"DELETE"}),M7=(e,t)=>{const r=new URLSearchParams({userId:e});return t?(t.search&&r.append("search",t.search),t.status&&r.append("status",t.status),t.from&&r.append("from",t.from),t.subject&&r.append("subject",t.subject),t.subjectOperator&&r.append("subjectOperator",t.subjectOperator),t.hasAttachment!==void 0&&r.append("hasAttachment",String(t.hasAttachment)),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),t.labelId&&r.append("labelId",t.labelId),t.page!==void 0&&r.append("page",String(t.page)),t.limit!==void 0&&r.append("limit",String(t.limit)),t.isRead!==void 0&&r.append("isRead",String(t.isRead)),t.isStarred!==void 0&&r.append("isStarred",String(t.isStarred)),yt(`/shared-inbox/emails?${r.toString()}`)):yt(`/shared-inbox/emails?${r.toString()}`)},iae=(e,t)=>yt(`/shared-inbox/senders?userId=${e}${t!=null?`&limit=${t}`:""}`),oae=(e,t)=>yt(`/shared-inbox/emails/${e}?userId=${t}`),VP=(e,t,r)=>yt(`/shared-inbox/emails/${e}/read`,{method:"PUT",body:JSON.stringify({read:t,userId:r})}),lae=(e,t)=>yt(`/shared-inbox/emails/${e}/star`,{method:"PUT",body:JSON.stringify({isStarred:t})}),cae=e=>yt("/shared-inbox/notes",{method:"POST",body:JSON.stringify(e)}),uae=e=>yt(`/shared-inbox/notes/${e}`),dae=(e,t)=>yt(`/shared-inbox/notes/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),fae=(e,t,r)=>yt("/shared-inbox/ai-draft",{method:"POST",body:JSON.stringify({emailId:e,userId:t,templateId:r})}),hae=e=>yt("/shared-inbox/templates",{method:"POST",body:JSON.stringify(e)}),pae=e=>yt(`/shared-inbox/templates?userId=${e}`),mae=(e,t)=>yt(`/shared-inbox/templates/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),xae=e=>yt("/shared-inbox/send-email",{method:"POST",body:JSON.stringify(e)}),gae=e=>yt("/shared-inbox/reply-email",{method:"POST",body:JSON.stringify(e)}),vae=e=>yt("/shared-inbox/forward-email",{method:"POST",body:JSON.stringify(e)}),R7=e=>yt(`/shared-inbox/signatures?userId=${e}`),yae=e=>yt("/shared-inbox/signatures",{method:"POST",body:JSON.stringify(e)}),bae=(e,t)=>yt(`/shared-inbox/signatures/${e}`,{method:"PUT",body:JSON.stringify(t)}),wae=(e,t)=>yt(`/shared-inbox/signatures/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),GP=(e,t)=>yt(`/shared-inbox/emails/${e}/archive`,{method:"POST",body:JSON.stringify({userId:t})}),KP=(e,t)=>yt(`/shared-inbox/emails/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),Nae=(e,t)=>yt(`/shared-inbox/emails/${e}/restore`,{method:"POST",body:JSON.stringify({userId:t})}),hv=(e,t)=>yt(`/shared-inbox/emails/${e}`,{method:"PUT",body:JSON.stringify(t)}),XP=(e,t,r)=>{const n=y7(),s=localStorage.getItem("auth_token"),i={"Content-Type":"application/json"};return s&&(i.Authorization=`Bearer ${s}`),fetch(`${n}/shared-inbox/emails/${e}/attachments/${t}?userId=${r}`,{method:"GET",headers:i}).then(async o=>{if(!o.ok){const l=await o.json().catch(()=>({message:"Failed to download attachment"}));throw new Error(l.message||"Failed to download attachment")}return o.blob()})},jae=e=>yt("/shared-inbox/save-draft",{method:"POST",body:JSON.stringify(e)}),kae=(e,t)=>yt(`/shared-inbox/drafts?userId=${e}&accountEmail=${encodeURIComponent(t)}`),Sae=e=>yt("/shared-inbox/schedule-send",{method:"POST",body:JSON.stringify(e)}),_ae=e=>yt(`/email-sync-filter?userId=${e}`),Aae=(e,t)=>yt("/email-sync-filter",{method:"POST",body:JSON.stringify({userId:e,domain:t})}),Eae=(e,t)=>yt(`/email-sync-filter/${t}?userId=${e}`,{method:"DELETE"}),D3=(e,t)=>yt(`/shared-inbox/activity/${e}/${t}`),Cae=e=>yt("/shared-inbox/link-contact",{method:"POST",body:JSON.stringify(e)}),Tae=e=>yt("/shared-inbox/link-company",{method:"POST",body:JSON.stringify(e)}),Oae=e=>yt("/shared-inbox/link-deal",{method:"POST",body:JSON.stringify(e)}),Pae=e=>yt("/shared-inbox/link-project",{method:"POST",body:JSON.stringify(e)}),Iae=e=>yt("/shared-inbox/link-contract",{method:"POST",body:JSON.stringify(e)}),Dae=e=>yt(`/shared-inbox/suggested-links?emailId=${e}`),Lae=e=>yt("/shared-inbox/create-task",{method:"POST",body:JSON.stringify(e)}),Fae=e=>yt(`/shared-inbox/related-tasks/${e}`),Mae=e=>yt(`/shared-inbox/related-projects/${e}`),Rae=e=>yt(`/shared-inbox/related-contracts/${e}`),Bae=e=>yt(`/shared-inbox/labels?userId=${e}`),Uae=e=>yt("/shared-inbox/labels",{method:"POST",body:JSON.stringify(e)}),qae=(e,t)=>yt(`/shared-inbox/emails/${e}/labels`,{method:"PUT",body:JSON.stringify(t)}),$ae=(e,t)=>yt(`/shared-inbox/emails/${e}/labels/${t}`,{method:"DELETE"}),zae=e=>yt("/shared-inbox/categorize-email",{method:"POST",body:JSON.stringify(e)}),YP=e=>yt(`/shared-inbox/categorization-rules?userId=${e}`),Hae=(e,t=30)=>yt(`/shared-inbox/categorization-accuracy?userId=${e}&days=${t}`),Wae=e=>yt("/shared-inbox/categorization-rules",{method:"POST",body:JSON.stringify(e)}),Vae=(e,t)=>yt(`/shared-inbox/categorization-rules/${e}?userId=${t}`,{method:"DELETE"}),Gae=e=>yt(`/shared-inbox/folder-mapping?userId=${e}`),Kae=e=>yt("/shared-inbox/folder-mapping",{method:"POST",body:JSON.stringify(e)}),Bv=(e,t,r,n)=>{const s=new URLSearchParams({userId:e});return t&&s.append("emailId",t),r&&s.append("startDate",r),n&&s.append("endDate",n),yt(`/shared-inbox/calendar-events?${s.toString()}`)},Xae=e=>yt("/shared-inbox/calendar-events",{method:"POST",body:JSON.stringify(e)}),Yae=(e,t,r,n)=>{const s=new URLSearchParams({userId:e,teamMemberIds:t.join(","),startDate:r,endDate:n});return yt(`/shared-inbox/calendar-availability?${s.toString()}`)},Jae=(e,t,r)=>yt("/shared-inbox/create-meeting",{method:"POST",body:JSON.stringify({userId:e,emailId:t,createInGoogleCalendar:r})}),Qae=(e,t,r,n,s,i)=>{const o=new URLSearchParams({userId:e});return t&&o.append("accountEmail",t),n&&o.append("query",n),s&&o.append("pageToken",s),yt(`/shared-inbox/drive-files?${o.toString()}`)},JP=e=>yt("/shared-inbox/attach-drive-file",{method:"POST",body:JSON.stringify(e)}),Zae=e=>yt("/events",{method:"POST",body:JSON.stringify(e)}),ese=(e,t)=>yt(`/events/${e}`,{method:"PUT",body:JSON.stringify(t)}),B7=e=>yt("/lead-sources?active=true"),tse=async(e,t)=>{const r=localStorage.getItem("auth_token"),n=new FormData;n.append("file",e),n.append("userId",t);const s=await fetch(`${P3}/scanner/business-card/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:n});if(!s.ok){const i=await s.json().catch(()=>({message:"Upload failed"}));throw new Error(i.message||"Failed to upload business card")}return s.json()},rse=e=>yt("/scanner/business-card/confirm",{method:"POST",body:JSON.stringify(e)}),nse=e=>yt("/scanner/linkedin/fetch",{method:"POST",body:JSON.stringify(e)}),ase=e=>yt("/scanner/linkedin/confirm",{method:"POST",body:JSON.stringify(e)}),sse=({toast:e,onRemove:t})=>{z.useEffect(()=>{const s=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(s)},[e.id,e.duration,t]);const r=()=>{switch(e.type){case"success":return a.jsx(jn,{className:"w-5 h-5 text-emerald-600"});case"error":return a.jsx(tD,{className:"w-5 h-5 text-red-600"});case"warning":return a.jsx(sa,{className:"w-5 h-5 text-amber-600"});case"info":return a.jsx(a0,{className:"w-5 h-5 text-blue-600"});default:return a.jsx(a0,{className:"w-5 h-5 text-blue-600"})}},n=()=>{switch(e.type){case"success":return"bg-emerald-50 border-emerald-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-amber-50 border-amber-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-blue-50 border-blue-200"}};return a.jsxs("div",{className:`${n()} border rounded-xl shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md animate-in slide-in-from-right duration-300`,children:[a.jsx("div",{className:"shrink-0",children:r()}),a.jsx("p",{className:"flex-1 text-sm font-medium text-slate-900",children:e.message}),a.jsx("button",{onClick:()=>t(e.id),className:"shrink-0 p-1 hover:bg-white/50 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-4 h-4 text-slate-400"})})]})},ise=({toasts:e,onRemove:t})=>a.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(r=>a.jsx("div",{className:"pointer-events-auto",children:a.jsx(sse,{toast:r,onRemove:t})},r.id))}),U7=z.createContext(void 0),Ea=()=>{const e=z.useContext(U7);if(!e)throw new Error("useToast must be used within ToastProvider");return e},ose=({children:e})=>{const[t,r]=z.useState([]),n=z.useCallback(u=>{r(f=>f.filter(d=>d.id!==u))},[]),s=z.useCallback((u,f="info",d=3e3)=>{const p={id:Math.random().toString(36).substring(2,9),message:u,type:f,duration:d};r(y=>[...y,p])},[]),i=z.useCallback((u,f)=>{s(u,"success",f)},[s]),o=z.useCallback((u,f)=>{s(u,"error",f||5e3)},[s]),l=z.useCallback((u,f)=>{s(u,"warning",f)},[s]),c=z.useCallback((u,f)=>{s(u,"info",f)},[s]);return a.jsxs(U7.Provider,{value:{showToast:s,showSuccess:i,showError:o,showWarning:l,showInfo:c},children:[e,a.jsx(ise,{toasts:t,onRemove:n})]})},Mp=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"ZAR",symbol:"R",name:"South African Rand"}],xi="USD",K4=e=>Mp.find(t=>t.code===e),Xd=e=>e?K4(e)?.symbol||"$":Mp.find(r=>r.code===xi)?.symbol||"$",Zd=(e,t)=>`${Xd(t)}${e.toLocaleString()}`,QP=[{id:"stat-pipeline",order:0,size:"medium"},{id:"stat-projects",order:1,size:"medium"},{id:"stat-invoices",order:2,size:"medium"},{id:"stat-tasks",order:3,size:"medium"},{id:"revenue-chart",order:4,size:"large"},{id:"inbox-card",order:5,size:"medium"},{id:"tasks-card",order:6,size:"medium"}],ZP=({onNavigate:e})=>{const{showError:t,showSuccess:r}=Ea(),[n,s]=z.useState(null),[i,o]=z.useState({openPipeline:0,activeProjects:0,unpaidInvoices:0,actionableMail:0}),[l,c]=z.useState([]),[u,f]=z.useState([]),[d,m]=z.useState(!0),[p,y]=z.useState("1M"),[v,g]=z.useState([]),[b,N]=z.useState(!1),[j,w]=z.useState({}),[S,P]=z.useState({}),[A,T]=z.useState(xi),[I,B]=z.useState(!1),[E,C]=z.useState(QP),[M,q]=z.useState(null),[G,Z]=z.useState(!1),[te,ne]=z.useState(!1),[J,ee]=z.useState(null);z.useRef(0),z.useEffect(()=>{const Q=JSON.parse(localStorage.getItem("user_data")||"null");s(Q),Q?.id&&H(Q.id)},[]);const H=async Q=>{try{const we=await ine(Q);if(we?.data&&Array.isArray(we.data)){const ve=we.data.flatMap(ue=>ue.id==="stats-grid"?[{id:"stat-pipeline",order:ue.order,size:ue.size||"medium"},{id:"stat-projects",order:ue.order+.1,size:ue.size||"medium"},{id:"stat-invoices",order:ue.order+.2,size:ue.size||"medium"},{id:"stat-tasks",order:ue.order+.3,size:ue.size||"medium"}]:ue.order>0?[{...ue,order:ue.order+3,size:ue.size||"medium"}]:[{...ue,size:ue.size||"medium"}]),Ee=new Set,pe=ve.filter(ue=>Ee.has(ue.id)?(console.warn(`[DASHBOARD] Duplicate widget found: ${ue.id}, removing duplicate`),!1):(Ee.add(ue.id),!0));C(pe)}}catch{console.log("[DASHBOARD] Using default layout")}},O=async()=>{if(n?.id){ne(!0);try{await one(n.id,E),r("Dashboard layout saved"),Z(!1)}catch{t("Failed to save layout")}finally{ne(!1)}}},R=()=>{C(QP)},W=(Q,we)=>{C(ve=>ve.map(Ee=>Ee.id===Q?{...Ee,size:we}:Ee))},U=(Q="medium",we)=>{if(we.startsWith("stat-"))return"";switch(Q){case"small":return"lg:col-span-1";case"medium":return"lg:col-span-2";case"large":return"lg:col-span-3";default:return"lg:col-span-2"}},K=(Q,we)=>{G&&(q(we),Q.dataTransfer.effectAllowed="move",Q.dataTransfer.setData("text/html",we))},oe=Q=>{!G||!M||(Q.preventDefault(),Q.dataTransfer.dropEffect="move")},he=(Q,we)=>{if(!G||!M||M===we)return;Q.preventDefault();const ve=[...E],Ee=ve.findIndex(ue=>ue.id===M),pe=ve.findIndex(ue=>ue.id===we);if(Ee!==-1&&pe!==-1){const ue=ve[Ee];ve.splice(Ee,1),ve.splice(pe,0,ue),ve.forEach((Pe,Ne)=>{Pe.order=Ne}),C(ve)}q(null)},ie=()=>{q(null)};z.useEffect(()=>{(async()=>{m(!0);try{const we=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!we){m(!1);return}const[ve,Ee,pe,ue,Pe,Ne]=await Promise.all([Jy(we).catch(()=>({data:[]})),Yp(we).catch(()=>({data:[]})),Qy(we).catch(()=>({data:[]})),E7(we).catch(()=>({data:[]})),M7(we).catch(()=>({data:[]})),Ed().catch(()=>({data:[]}))]),Be=ve?.data||ve||[],nt=Ee?.data||Ee||[],mt=pe?.data||pe||[],kt=ue?.data||ue||[],Re=Pe?.data||Pe||[],gt=Ne?.data||Ne||[],ut=Array.isArray(Be)?Be.filter(Ut=>Ut.stage!=="Won"&&Ut.stage!=="Lost"):[],lt={},pr={};ut.forEach(Ut=>{const wr=Ut.currency||xi,kr=Ut.value||0;lt[wr]=(lt[wr]||0)+kr,pr[wr]=(pr[wr]||0)+1});const tr=Array.isArray(nt)?nt.filter(Ut=>Ut.status!=="Completed"&&Ut.status!=="Cancelled").length:0,ft=Array.isArray(kt)?kt.filter(Ut=>Ut.status!=="Paid"):[],$t={};ft.forEach(Ut=>{const wr=Ut.currency||xi,kr=Ut.amount||0;$t[wr]=($t[wr]||0)+kr,pr[wr]=(pr[wr]||0)+1});let er=0,qe=xi;Object.keys(pr).forEach(Ut=>{pr[Ut]>er&&(er=pr[Ut],qe=Ut)}),w(lt),P($t),T(qe);const bt=lt[qe]||0,Nr=$t[qe]||0,rr=0,Lr=new Date;Lr.setHours(0,0,0,0);const Er=Array.isArray(mt)?mt.filter(Ut=>{if(!Ut.dueDate)return!1;const wr=new Date(Ut.dueDate);return wr.setHours(0,0,0,0),wr.getTime()===Lr.getTime()&&Ut.status!=="Done"}):[],or=await Promise.all(Er.slice(0,2).map(async Ut=>{if(Ut.projectId)try{const wr=await fne(Ut.projectId);return{...Ut,projectTitle:wr?.data?.title||"Software"}}catch{return{...Ut,projectTitle:"Software"}}return{...Ut,projectTitle:"Software"}}));o({openPipeline:bt,activeProjects:tr,unpaidInvoices:Nr,actionableMail:rr}),c(or),f(gt.slice(0,3))}catch(we){console.error("[DASHBOARD] Failed to fetch data:",we),t("Failed to load dashboard data")}finally{m(!1)}})()},[t]),z.useEffect(()=>{(async()=>{N(!0);try{const we=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!we){N(!1);return}const ve=await xne(we,p),Ee=ve?.data||ve||[];g(Array.isArray(Ee)?Ee:[])}catch{g([])}finally{N(!1)}})()},[p]);const ce=(Q,we=A)=>{const ve=Xd(we);return Q>=1e3?`${ve}${(Q/1e3).toFixed(1)}k`:`${ve}${Q.toLocaleString()}`},Le=(Q,we)=>{const ve=M===Q,Ee=E.find(Ne=>Ne.id===Q),pe=we||Ee?.size||"medium",ue={draggable:G,onDragStart:Ne=>K(Ne,Q),onDragOver:oe,onDrop:Ne=>he(Ne,Q),onDragEnd:ie,className:`transition-all ${ve?"opacity-50 scale-95":""} ${G?"cursor-move":""}`},Pe=()=>{if(!G)return null;const Ne=[{value:"small",icon:a.jsx(YB,{className:"w-3 h-3"}),label:"Small"},{value:"medium",icon:a.jsx(aU,{className:"w-3 h-3"}),label:"Medium"},{value:"large",icon:a.jsx(GB,{className:"w-3 h-3"}),label:"Large"}];return a.jsx("div",{className:"flex items-center gap-1 mb-3 bg-slate-50 rounded-lg p-1 border border-slate-200",children:Ne.map(({value:Be,icon:nt,label:mt})=>a.jsx("button",{onClick:kt=>{kt.stopPropagation(),W(Q,Be)},onMouseEnter:()=>ee(Q),onMouseLeave:()=>ee(null),className:`p-1.5 rounded transition-all ${pe===Be?"bg-indigo-600 text-white shadow-sm":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,title:mt,children:nt},Be))})};switch(Q){case"stat-pipeline":return a.jsxs("div",{...ue,children:[G&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Vd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Open Pipeline"})]})}),a.jsxs("button",{onClick:()=>e("pipeline"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-blue-600 bg-blue-50/50 group-hover:scale-110 transition-transform",children:a.jsx(nf,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Open Pipeline"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:ce(i.openPipeline,A)})]}),a.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),B(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:a.jsx(W0,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},Q);case"stat-projects":return a.jsxs("div",{...ue,children:[G&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Vd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Projects"})]})}),a.jsxs("button",{onClick:()=>e("projects"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-indigo-200 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-indigo-600 bg-indigo-50/50 group-hover:scale-110 transition-transform",children:a.jsx(ru,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsx("div",{className:"flex items-end justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Active Projects"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:i.activeProjects})]})})]})]},Q);case"stat-invoices":return a.jsxs("div",{...ue,children:[G&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Vd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Unpaid Invoices"})]})}),a.jsxs("button",{onClick:()=>e("invoices"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-emerald-600 bg-emerald-50/50 group-hover:scale-110 transition-transform",children:a.jsx(df,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Unpaid Invoices"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:ce(i.unpaidInvoices,A)})]}),a.jsx("button",{onClick:Ne=>{Ne.stopPropagation(),B(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:a.jsx(W0,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},Q);case"stat-tasks":return a.jsxs("div",{...ue,children:[G&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Vd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]})}),a.jsxs("button",{onClick:()=>e("tasks"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-purple-600 bg-purple-50/50 group-hover:scale-110 transition-transform",children:a.jsx(bl,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),a.jsx("div",{className:"flex items-end justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Tasks Due Today"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:l.length})]})})]})]},Q);case"revenue-chart":return a.jsxs("div",{...ue,children:[G&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Vd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Revenue Chart"})]}),Pe()]}),a.jsxs("div",{className:"bg-white p-5 lg:p-8 rounded-[24px] lg:rounded-[32px] border border-slate-100 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 lg:mb-10 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg lg:text-xl font-black text-slate-900",children:"Revenue Velocity"}),a.jsx("p",{className:"text-slate-400 text-[10px] lg:text-xs font-medium mt-0.5 lg:mt-1",children:"Digital transformation revenue flow"})]}),a.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-100 w-full sm:w-auto",children:["7D","1M","1Y"].map(Ne=>a.jsx("button",{onClick:()=>y(Ne),className:`flex-1 sm:flex-none px-4 py-1.5 text-[10px] font-black rounded-lg transition-all ${Ne===p?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"text-slate-400 hover:text-slate-600"}`,children:Ne},Ne))})]}),a.jsx("div",{className:"h-60 lg:h-72 w-full relative",children:b?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx($_,{className:"w-10 h-10 text-slate-300 animate-pulse"})}):v.length===0?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(nf,{className:"w-10 h-10 text-slate-200 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No revenue data available"})]})}):a.jsx($H,{width:"100%",height:"100%",children:a.jsxs(ene,{data:v,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.1}),a.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]})}),a.jsx(t7,{strokeDasharray:"3 3",vertical:!1,stroke:"#f8fafc"}),a.jsx(Ky,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},dy:10}),a.jsx(Xy,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},width:40,tickFormatter:Ne=>`$${Ne}`}),a.jsx(dd,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"10px"},itemStyle:{fontWeight:"bold",fontSize:"12px",color:"#4f46e5"}}),a.jsx(g0,{type:"monotone",dataKey:"value",stroke:"#4f46e5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:3,animationDuration:1500})]})})})]})]},Q);case"inbox-card":return a.jsxs("div",{...ue,children:[G&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Vd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Inbox Card"})]}),Pe()]}),a.jsxs("div",{onClick:()=>!G&&e("inbox"),className:`bg-[#312E81] rounded-[24px] lg:rounded-[32px] p-6 lg:p-8 text-white relative overflow-hidden group ${G?"":"cursor-pointer hover:scale-[1.02] active:scale-95"} transition-all shadow-xl shadow-indigo-100/50`,children:[a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6 lg:mb-10",children:[a.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/10 group-hover:bg-white/20 transition-all",children:a.jsx(Mv,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),!G&&a.jsx("button",{className:"text-white/40 group-hover:text-white transition-colors",children:a.jsx(lo,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]}),a.jsx("h3",{className:"text-xl lg:text-2xl font-black mb-2 lg:mb-3",children:"Check Inbox"}),a.jsxs("p",{className:"text-indigo-200 text-[10px] lg:text-xs font-medium leading-relaxed opacity-80 max-w-[200px]",children:["You have ",i.actionableMail," actionable items that need attention."]}),a.jsx("div",{className:"mt-6 lg:mt-8 flex items-center gap-3",children:a.jsxs("div",{className:"flex -space-x-2",children:[u.map((Ne,Be)=>a.jsx(Qs,{src:Ne.avatar,isAvatar:!0,fallbackText:Ne.name||Ne.email||"U",className:"w-7 h-7 lg:w-9 lg:h-9 border-2 border-[#312E81] shadow-lg"},Ne.id||Be)),a.jsx("div",{className:"w-7 h-7 lg:w-9 lg:h-9 rounded-full bg-indigo-500 border-2 border-[#312E81] flex items-center justify-center text-[9px] font-black shadow-lg",children:"+1"})]})})]}),a.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 translate-x-1/4 translate-y-1/4 pointer-events-none",children:a.jsx(e0,{className:"w-32 h-32 lg:w-48 lg:h-48"})})]})]},Q);case"tasks-card":return a.jsxs("div",{...ue,children:[G&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(Vd,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]}),Pe()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Tasks Due Today"}),a.jsx(bl,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-4 lg:space-y-6",children:d?a.jsx("div",{className:"space-y-3",children:[1,2].map(Ne=>a.jsx("div",{className:"h-4 bg-slate-50 rounded animate-pulse"},Ne))}):l.length>0?l.slice(0,2).map(Ne=>a.jsxs("div",{className:"flex gap-4 group cursor-pointer",children:[a.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 rounded-full bg-amber-400 mt-1.5 shrink-0 shadow-sm"}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs lg:text-sm font-black text-slate-900 group-hover:text-indigo-600 transition-colors line-clamp-1",children:Ne.title}),a.jsx("p",{className:"text-[9px] lg:text-[10px] font-black text-slate-400 uppercase mt-0.5",children:Ne.projectTitle||"Software"})]})]},Ne.id)):a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"No tasks due today"})})}),a.jsx("button",{onClick:()=>!G&&e("tasks"),disabled:G,className:"w-full mt-8 lg:mt-10 py-3 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest flex items-center justify-center gap-2 group border border-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"View All Tasks"})]})]},Q);default:return null}},le=n?.name?.split(" ")[0]||"Alex",He=n?.avatar||n?.photoURL||"",Fe=n?.name||n?.email||"Impact Member",fe=[...E].sort((Q,we)=>Q.order-we.order);return a.jsxs("div",{className:"space-y-6 lg:space-y-8 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Qs,{src:He,alt:Fe,fallbackText:Fe,isAvatar:!0,className:"w-10 h-10 rounded-full border border-slate-200 shadow-sm"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight",children:["Welcome, ",le]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-slate-500 text-xs lg:text-sm font-medium",children:"Logistics digitalization hub"})})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:G?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:R,className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Reset"}),a.jsx("button",{onClick:O,disabled:te,className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black rounded-xl hover:bg-indigo-700 transition-all uppercase tracking-wider flex items-center gap-2 disabled:opacity-50 shadow-lg",children:te?a.jsxs(a.Fragment,{children:[a.jsx($_,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-4 h-4"}),"Save Layout"]})}),a.jsx("button",{onClick:()=>Z(!1),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Cancel"})]}):a.jsxs("button",{onClick:()=>Z(!0),className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-black rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all uppercase tracking-wider flex items-center gap-2 shadow-lg",children:[a.jsx(Vd,{className:"w-4 h-4"}),"Customize Dashboard"]})})]}),G&&a.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-2xl p-4 animate-in slide-in-from-top duration-300",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shrink-0",children:a.jsx(Vd,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:"Customize Your Dashboard"}),a.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:"Drag and drop the cards below to rearrange them. Use the size controls to resize widgets (small, medium, large). Your layout will be saved to your account and synced across all devices."})]})]})}),a.jsx("div",{className:"space-y-6 lg:space-y-8",children:fe.map((Q,we)=>{const ve=Le(Q.id,Q.size);if(Q.id.startsWith("stat-")){const Ne=fe[we-1];if(Ne&&Ne.id.startsWith("stat-"))return null;{const nt=[];for(let mt=we;mt<fe.length&&fe[mt].id.startsWith("stat-");mt++)nt.push(fe[mt]);return a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6",children:nt.map(mt=>Le(mt.id,mt.size))},`stat-cards-group-${we}`)}}if(Q.id==="revenue-chart"){const Ne=fe[we+1],Be=fe[we+2],nt=Q.size||"large";if(Ne&&Be&&(Ne.id==="inbox-card"&&Be.id==="tasks-card"||Ne.id==="tasks-card"&&Be.id==="inbox-card")&&nt==="large")return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:ve}),a.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[Le(Ne.id,Ne.size),Le(Be.id,Be.size)]})]},"revenue-with-sidebar")}const pe=fe[we-1],ue=fe[we-2];if(pe?.id==="revenue-chart"&&(Q.id==="inbox-card"||Q.id==="tasks-card")){const Ne=pe.size||"large",Be=fe[we+1];if(Ne==="large"&&Be&&(Q.id==="inbox-card"&&Be.id==="tasks-card"||Q.id==="tasks-card"&&Be.id==="inbox-card"))return null}if(ue?.id==="revenue-chart"&&(Q.id==="inbox-card"||Q.id==="tasks-card")&&(ue.size||"large")==="large")return null;const Pe=U(Q.size||"medium",Q.id);return Pe?a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:a.jsx("div",{className:Pe,children:ve})},Q.id):a.jsx("div",{children:ve},Q.id)})}),I&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>B(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-6 lg:p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(W0,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Currency Totals"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"View totals in different currencies"})]})]}),a.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(cr,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(nf,{className:"w-4 h-4 text-blue-600"}),"Open Pipeline"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(j).length>0?Object.entries(j).sort((Q,we)=>we[1]-Q[1]).map(([Q,we])=>{const ve=K4(Q),Ee=Q===A;return a.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Ee?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-black text-slate-900",children:ve?.symbol||Q}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:Q}),Ee&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:Zd(we,Q)}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:ve?.name||Q})]},Q)}):a.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-slate-400 font-medium",children:"No pipeline data available"})})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(df,{className:"w-4 h-4 text-emerald-600"}),"Unpaid Invoices"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(S).length>0?Object.entries(S).sort((Q,we)=>we[1]-Q[1]).map(([Q,we])=>{const ve=K4(Q),Ee=Q===A;return a.jsxs("div",{className:`p-5 rounded-2xl border-2 ${Ee?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-black text-slate-900",children:ve?.symbol||Q}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:Q}),Ee&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:Zd(we,Q)}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:ve?.name||Q})]},Q)}):a.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-slate-400 font-medium",children:"No invoice data available"})})})]})]})}),a.jsx("div",{className:"p-6 lg:p-8 border-t border-slate-100 bg-slate-50",children:a.jsxs("button",{onClick:()=>B(!1),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(bl,{className:"w-4 h-4"}),"Close"]})})]})})]})]})},q7=({extractedData:e,suggestions:t,source:r,onConfirm:n,onCancel:s,isProcessing:i=!1,companies:o})=>{const[l,c]=z.useState(""),[u,f]=z.useState(""),[d,m]=z.useState(""),[p,y]=z.useState(""),[v,g]=z.useState(""),[b,N]=z.useState(""),[j,w]=z.useState(""),[S,P]=z.useState(null),[A,T]=z.useState({});z.useEffect(()=>{r==="business_card"?(c(e?.name?.value||""),f(e?.email?.value||""),m(e?.phone?.value||""),y(e?.title?.value||""),g(e?.linkedin?.value||""),N(e?.company?.value||""),w(e?.website?.value||"")):r==="linkedin"&&(c(e?.name||""),f(e?.email||""),m(e?.phone||""),y(e?.currentRole||e?.headline||""),g(e?.profileImageUrl||""),N(e?.currentCompany||""),w(e?.companyWebsite||"")),t?.existingCompany&&P(t.existingCompany.id)},[e,t,r]);const I=M=>M>=95?"text-green-600 bg-green-50":M>=75?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",B=M=>M>=95?"High Confidence":M>=75?"Medium - Verify":"Low - Review",E=()=>{const M={};return l.trim()||(M.name="Name is required"),u&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u)&&(M.email="Invalid email format"),!S&&!b.trim()&&(M.company="Company is required"),T(M),Object.keys(M).length===0},C=()=>{if(!E())return;const M={name:l,email:u.toLowerCase(),phone:d,role:p,linkedin:v};n(M,{name:b,website:j},S)};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Confirm"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r==="business_card"?"Verify scanned business card data":"Verify LinkedIn profile data"})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(cr,{className:"w-6 h-6"})})]}),t?.existingContact&&a.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start",children:[a.jsx(s0,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-yellow-900",children:"Duplicate Contact Detected"}),a.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:['A contact with email "',t.existingContact.email,'" already exists.']}),a.jsx("div",{className:"mt-2 flex gap-2",children:a.jsx("button",{type:"button",className:"text-sm text-yellow-900 underline hover:no-underline",onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-contact",{detail:t.existingContact.id})),children:"View Existing Contact"})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(vl,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:l,onChange:M=>c(M.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),r==="business_card"&&e?.name?.confidence>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.name.confidence)}`,children:B(e.name.confidence)})]}),A.name&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.name})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(gi,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:u,onChange:M=>f(M.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),r==="business_card"&&e?.email?.confidence>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.email.confidence)}`,children:B(e.email.confidence)})]}),A.email&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.email})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsxs("div",{className:"relative",children:[a.jsx(Tj,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"tel",value:d,onChange:M=>m(M.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),r==="business_card"&&e?.phone?.confidence>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.phone.confidence)}`,children:B(e.phone.confidence)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(ru,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:p,onChange:M=>y(M.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Chief Technology Officer"}),r==="business_card"&&e?.title?.confidence>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${I(e.title.confidence)}`,children:B(e.title.confidence)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),a.jsxs("div",{className:"relative",children:[a.jsx(V0,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:v,onChange:M=>g(M.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/johndoe"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Information"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company *"}),a.jsxs("select",{value:S||"new",onChange:M=>{const q=M.target.value;if(q==="new")P(null);else{P(q);const G=o.find(Z=>Z.id===q);G&&(N(G.name),w(G.website))}},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.company?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"new",children:"+ Create New Company"}),o.map(M=>a.jsx("option",{value:M.id,children:M.name},M.id))]}),A.company&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:A.company})]}),!S&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(gd,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:b,onChange:M=>N(M.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${A.company?"border-red-500":"border-gray-300"}`,placeholder:"TechCorp Industries"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Website"}),a.jsxs("div",{className:"relative",children:[a.jsx(W0,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:j,onChange:M=>w(M.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.techcorp.com"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"button",onClick:C,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-5 h-5"}),"Confirm & Save"]})})]})]})},lse=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:n,showError:s}=Ea(),[i,o]=z.useState("select"),[l,c]=z.useState(null),[u,f]=z.useState(null),[d,m]=z.useState(null),[p,y]=z.useState(null),[v,g]=z.useState(null),[b,N]=z.useState(!1),[j,w]=z.useState([]),[S,P]=z.useState([]),A=z.useRef(null),T=z.useRef(null),I=z.useRef(null),B=z.useRef(null);at.useEffect(()=>{(async()=>{try{const[J,ee]=await Promise.all([Cd(),B7(!0)]);w(J.data||[]),P(ee.data||[])}catch(J){console.error("Failed to load data:",J)}})()},[]);const E=async()=>{console.log("Camera button clicked - starting camera..."),g(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera not supported on this browser");o("camera-loading");let ne;try{console.log("Requesting rear camera..."),ne=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080}}})}catch{console.log("Rear camera not available, trying any camera..."),ne=await navigator.mediaDevices.getUserMedia({video:!0})}if(console.log("Camera stream obtained:",ne),B.current=ne,o("camera"),await new Promise(J=>setTimeout(J,100)),A.current){A.current.srcObject=ne,console.log("Stream set to video element");try{await A.current.play(),console.log(" Camera started successfully")}catch(J){console.error("Video play error:",J)}}}catch(ne){console.error(" Camera error:",ne);let J="Camera access denied. Please grant camera permission or use file upload.";ne.name==="NotAllowedError"?J="Camera permission denied. Please allow camera access in your browser settings.":ne.name==="NotFoundError"?J="No camera found on this device. Please use file upload instead.":ne.name==="NotReadableError"?J="Camera is already in use by another application.":ne.name==="NotSupportedError"&&(J="Camera not supported on this browser. Please use file upload."),g(J),o("select"),C()}},C=()=>{B.current&&(B.current.getTracks().forEach(ne=>ne.stop()),B.current=null),A.current&&(A.current.srcObject=null)},M=()=>{if(!A.current||!T.current)return;const ne=A.current,J=T.current,ee=J.getContext("2d");ee&&(J.width=ne.videoWidth,J.height=ne.videoHeight,ee.drawImage(ne,0,0),J.toBlob(H=>{if(H){const O=new File([H],`business-card-${Date.now()}.jpg`,{type:"image/jpeg"});c(O),f(J.toDataURL("image/jpeg")),C(),G(O)}},"image/jpeg",.95))},q=ne=>{const J=ne.target.files;if(!J||J.length===0)return;const ee=J[0];if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(ee.type)){g("Invalid file type. Please upload JPG, PNG, or PDF.");return}if(ee.size>10*1024*1024){g("File too large. Maximum size is 10MB.");return}if(c(ee),ee.type.startsWith("image/")){const H=new FileReader;H.onload=O=>{f(O.target?.result)},H.readAsDataURL(ee)}G(ee)},G=async ne=>{o("processing"),g(null),N(!0);try{const J=await tse(ne,r);if(J.success)m(J.data.extractedData),y(J.data.suggestions),o("review");else throw new Error("Failed to process business card")}catch(J){console.error("Processing error:",J),g(J.message||"Failed to process business card. Please try again."),o("select")}finally{N(!1)}},Z=async(ne,J,ee)=>{N(!0),g(null);try{const H=S.find(R=>R.name==="Business Card Scanner");if((await rse({contactData:ne,companyData:J,linkToExistingCompany:ee,leadSourceId:H?.id||"",scanConfidenceScore:te(d),originalScanData:d,userId:r})).success)o("success"),n("Contact created from business card!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(H){console.error("Confirm error:",H),g(H.message||"Failed to create contact. Please try again."),s(H.message||"Failed to create contact")}finally{N(!1)}},te=ne=>{if(!ne)return 0;const J=[ne.name?.confidence||0,ne.email?.confidence||0,ne.phone?.confidence||0,ne.title?.confidence||0,ne.company?.confidence||0].filter(ee=>ee>0);return J.length===0?0:Math.round(J.reduce((ee,H)=>ee+H,0)/J.length)};return at.useEffect(()=>()=>{C()},[]),a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="select"&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan Business Card"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose how to capture the business card"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(cr,{className:"w-6 h-6"})})]}),v&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:v}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:ne=>{ne.preventDefault(),console.log("Camera button clicked"),E()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center cursor-pointer",type:"button",children:[a.jsx(H_,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Use Camera"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo of the card"})]}),a.jsxs("button",{onClick:()=>I.current?.click(),className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:[a.jsx($u,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Upload File"}),a.jsx("p",{className:"text-sm text-gray-600",children:"JPG, PNG, or PDF (10MB max)"})]})]}),a.jsx("input",{ref:I,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:q,className:"hidden"})]}),i==="camera-loading"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(jt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Starting Camera..."}),a.jsx("p",{className:"text-gray-600",children:"Please allow camera access when prompted"})]}),i==="camera"&&a.jsxs("div",{className:"relative bg-black",children:[a.jsx("video",{ref:A,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto rounded-t-xl",style:{minHeight:"400px"}}),a.jsx("canvas",{ref:T,className:"hidden"}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"border-4 border-white border-dashed rounded-xl opacity-50",style:{width:"85%",height:"50%"}})}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-center bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:a.jsx("p",{className:"text-sm font-semibold",children:"Center card in frame"})})]}),a.jsx("div",{className:"absolute top-4 left-4",children:a.jsx("button",{onClick:()=>{C(),o("select")},className:"bg-white rounded-full p-2 shadow-lg hover:bg-gray-100",children:a.jsx(Ak,{className:"w-6 h-6 text-gray-700"})})}),a.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center",children:a.jsx("button",{onClick:M,className:"w-16 h-16 bg-white rounded-full border-4 border-blue-600 shadow-lg hover:bg-blue-50 transition-colors active:scale-95",children:a.jsx(H_,{className:"w-8 h-8 mx-auto text-blue-600"})})})]}),i==="processing"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(jt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Business Card..."}),a.jsx("p",{className:"text-gray-600",children:"Extracting contact information"}),u&&a.jsx("div",{className:"mt-6",children:a.jsx("img",{src:u,alt:"Captured",className:"max-w-full max-h-40 mx-auto rounded-lg shadow-md"})})]}),i==="review"&&d&&a.jsx(q7,{extractedData:d,suggestions:p||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"business_card",onConfirm:Z,onCancel:e,isProcessing:b,companies:j}),i==="success"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(jn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),a.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})},cse=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:n,showError:s}=Ea(),[i,o]=z.useState("input"),[l,c]=z.useState(""),[u,f]=z.useState(null),[d,m]=z.useState(null),[p,y]=z.useState(null),[v,g]=z.useState(!1),[b,N]=z.useState([]),[j,w]=z.useState([]);at.useEffect(()=>{(async()=>{try{const[E,C]=await Promise.all([Cd(),B7(!0)]);N(E.data||[]),w(C.data||[])}catch(E){console.error("Failed to load data:",E)}})()},[]);const S=B=>/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[a-zA-Z0-9-_]+\/?$/i.test(B),P=B=>{let E=B.trim();return!E.startsWith("http://")&&!E.startsWith("https://")&&(E=`https://${E}`),E.includes("www.")||(E=E.replace("linkedin.com","www.linkedin.com")),E.replace(/\/$/,"")},A=B=>{c(B),y(null)},T=async()=>{if(!l.trim()){y("Please enter a LinkedIn URL");return}const B=P(l);if(!S(B)){y("Invalid LinkedIn URL format. Example: linkedin.com/in/johndoe");return}o("fetching"),y(null),g(!0);try{const E=await nse({linkedinUrl:B,userId:r});if(E.success)f(E.data.profile),m(E.data.suggestions),o("review");else throw new Error("Failed to fetch LinkedIn profile")}catch(E){console.error("Fetch error:",E);let C="Failed to fetch LinkedIn profile";E.message?.includes("Invalid LinkedIn URL")?C="Invalid LinkedIn URL format":E.message?.includes("private")?C="This LinkedIn profile is private and cannot be accessed":E.message?.includes("rate limit")&&(C="Rate limit exceeded. Please try again later"),y(C),o("input")}finally{g(!1)}},I=async(B,E,C)=>{g(!0),y(null);try{const M=j.find(G=>G.name==="LinkedIn Scanner");if((await ase({contactData:B,linkedinData:u?{headline:u.headline,currentRole:u.currentRole,profileImageUrl:u.profileImageUrl}:void 0,companyData:E,linkToExistingCompany:C,leadSourceId:M?.id||"",userId:r})).success)o("success"),n("Contact created from LinkedIn profile!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(M){console.error("Confirm error:",M),y(M.message||"Failed to create contact. Please try again."),s(M.message||"Failed to create contact")}finally{g(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="input"&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan LinkedIn Profile"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import contact from LinkedIn profile"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(cr,{className:"w-6 h-6"})})]}),p&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[a.jsx(sa,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-red-800",children:p})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile URL"}),a.jsxs("div",{className:"relative",children:[a.jsx(V0,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:l,onChange:B=>A(B.target.value),onKeyPress:B=>B.key==="Enter"&&T(),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.linkedin.com/in/johndoe"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Example: linkedin.com/in/johndoe or https://www.linkedin.com/in/johndoe"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How it works"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Paste any public LinkedIn profile URL"}),a.jsx("li",{children:"We'll extract available contact and company information"}),a.jsx("li",{children:"Review and edit before saving to your CRM"}),a.jsx("li",{children:"Note: Email and phone may not be publicly available"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:T,disabled:!l.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(V0,{className:"w-5 h-5"}),"Fetch Profile"]})})]}),i==="fetching"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(jt,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fetching LinkedIn Profile..."}),a.jsx("p",{className:"text-gray-600",children:"Extracting contact information"})]}),i==="review"&&u&&a.jsx(q7,{extractedData:u,suggestions:d||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"linkedin",onConfirm:I,onCancel:e,isProcessing:v,companies:b}),i==="success"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(jn,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),a.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})};var Jp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},use={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},dse=class{#e=use;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},$0=new dse;function fse(e){setTimeout(e,0)}var ah=typeof window>"u"||"Deno"in globalThis;function pl(){}function hse(e,t){return typeof e=="function"?e(t):e}function X4(e){return typeof e=="number"&&e>=0&&e!==1/0}function $7(e,t){return Math.max(e+(t||0)-Date.now(),0)}function n0(e,t){return typeof e=="function"?e(t):e}function Zc(e,t){return typeof e=="function"?e(t):e}function e8(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==L3(o,t.options))return!1}else if(!qx(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function t8(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(sh(t.options.mutationKey)!==sh(i))return!1}else if(!qx(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function L3(e,t){return(t?.queryKeyHashFn||sh)(e)}function sh(e){return JSON.stringify(e,(t,r)=>Y4(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function qx(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>qx(e[r],t[r])):!1}var pse=Object.prototype.hasOwnProperty;function z7(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=r8(e)&&r8(t);if(!n&&!(Y4(e)&&Y4(t)))return t;const i=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),l=o.length,c=n?new Array(l):{};let u=0;for(let f=0;f<l;f++){const d=n?f:o[f],m=e[d],p=t[d];if(m===p){c[d]=m,(n?f<i:pse.call(e,d))&&u++;continue}if(m===null||p===null||typeof m!="object"||typeof p!="object"){c[d]=p;continue}const y=z7(m,p,r+1);c[d]=y,y===m&&u++}return i===l&&u===i?e:c}function J1(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function r8(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Y4(e){if(!n8(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!n8(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function n8(e){return Object.prototype.toString.call(e)==="[object Object]"}function mse(e){return new Promise(t=>{$0.setTimeout(t,e)})}function J4(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?z7(e,t):t}function xse(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function gse(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var F3=Symbol();function H7(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===F3?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function M3(e,t){return typeof e=="function"?e(...t):!!e}function vse(e,t,r){let n=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),n||(n=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var yse=class extends Jp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!ah&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},R3=new yse;function Q4(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}var bse=fse;function wse(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=bse;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var Ci=wse(),Nse=class extends Jp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!ah&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Q1=new Nse;function jse(e){return Math.min(1e3*2**e,3e4)}function W7(e){return(e??"online")==="online"?Q1.isOnline():!0}var Z4=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function V7(e){let t=!1,r=0,n;const s=Q4(),i=()=>s.status!=="pending",o=v=>{if(!i()){const g=new Z4(v);m(g),e.onCancel?.(g)}},l=()=>{t=!0},c=()=>{t=!1},u=()=>R3.isFocused()&&(e.networkMode==="always"||Q1.isOnline())&&e.canRun(),f=()=>W7(e.networkMode)&&e.canRun(),d=v=>{i()||(n?.(),s.resolve(v))},m=v=>{i()||(n?.(),s.reject(v))},p=()=>new Promise(v=>{n=g=>{(i()||u())&&v(g)},e.onPause?.()}).then(()=>{n=void 0,i()||e.onContinue?.()}),y=()=>{if(i())return;let v;const g=r===0?e.initialPromise:void 0;try{v=g??e.fn()}catch(b){v=Promise.reject(b)}Promise.resolve(v).then(d).catch(b=>{if(i())return;const N=e.retry??(ah?0:3),j=e.retryDelay??jse,w=typeof j=="function"?j(r,b):j,S=N===!0||typeof N=="number"&&r<N||typeof N=="function"&&N(r,b);if(t||!S){m(b);return}r++,e.onFail?.(r,b),mse(w).then(()=>u()?void 0:p()).then(()=>{t?m(b):y()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n?.(),s),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?y():p().then(y),s)}}var G7=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),X4(this.gcTime)&&(this.#e=$0.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ah?1/0:300*1e3))}clearGcTimeout(){this.#e&&($0.clearTimeout(this.#e),this.#e=void 0)}},kse=class extends G7{#e;#t;#r;#a;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#r=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=s8(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=s8(this.options);t.data!==void 0&&(this.setState(a8(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=J4(this.state.data,e,this.options);return this.#s({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(pl).catch(pl):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>Zc(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===F3||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>n0(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!$7(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},s=()=>{const l=H7(this.options,t),u=(()=>{const f={client:this.#a,queryKey:this.queryKey,meta:this.meta};return n(f),f})();return this.#o=!1,this.options.persister?this.options.persister(l,u,this):l(u)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:s};return n(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#s({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=V7({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof Z4&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof Z4){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#s({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#s(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...K7(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,...a8(e.data,e.dataUpdatedAt),dataUpdateCount:r.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const s=e.error;return{...r,error:s,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ci.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function K7(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:W7(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function a8(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function s8(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var X7=class extends Jp{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.#o=Q4(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#a=void 0;#n;#i;#o;#s;#m;#f;#h;#c;#u;#l;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),i8(this.#t,this.options)?this.#d():this.updateResult(),this.#y())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return ek(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return ek(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#b(),this.#w(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Zc(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#N(),this.#t.setOptions(this.options),t._defaulted&&!J1(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const n=this.hasListeners();n&&o8(this.#t,r,this.options,t)&&this.#d(),this.updateResult(),n&&(this.#t!==r||Zc(this.options.enabled,this.#t)!==Zc(t.enabled,this.#t)||n0(this.options.staleTime,this.#t)!==n0(t.staleTime,this.#t))&&this.#x();const s=this.#g();n&&(this.#t!==r||Zc(this.options.enabled,this.#t)!==Zc(t.enabled,this.#t)||s!==this.#l)&&this.#v(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),r=this.createResult(t,e);return _se(this,r)&&(this.#a=r,this.#i=this.options,this.#n=this.#t.state),r}getCurrentResult(){return this.#a}trackResult(e,t){return new Proxy(e,{get:(r,n)=>(this.trackProp(n),t?.(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#o.status==="pending"&&this.#o.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(r,n))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),r=this.#e.getQueryCache().build(this.#e,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#d(e){this.#N();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(pl)),t}#x(){this.#b();const e=n0(this.options.staleTime,this.#t);if(ah||this.#a.isStale||!X4(e))return;const r=$7(this.#a.dataUpdatedAt,e)+1;this.#c=$0.setTimeout(()=>{this.#a.isStale||this.updateResult()},r)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#v(e){this.#w(),this.#l=e,!(ah||Zc(this.options.enabled,this.#t)===!1||!X4(this.#l)||this.#l===0)&&(this.#u=$0.setInterval(()=>{(this.options.refetchIntervalInBackground||R3.isFocused())&&this.#d()},this.#l))}#y(){this.#x(),this.#v(this.#g())}#b(){this.#c&&($0.clearTimeout(this.#c),this.#c=void 0)}#w(){this.#u&&($0.clearInterval(this.#u),this.#u=void 0)}createResult(e,t){const r=this.#t,n=this.options,s=this.#a,i=this.#n,o=this.#i,c=e!==r?e.state:this.#r,{state:u}=e;let f={...u},d=!1,m;if(t._optimisticResults){const T=this.hasListeners(),I=!T&&i8(e,t),B=T&&o8(e,r,t,n);(I||B)&&(f={...f,...K7(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:p,errorUpdatedAt:y,status:v}=f;m=f.data;let g=!1;if(t.placeholderData!==void 0&&m===void 0&&v==="pending"){let T;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(T=s.data,g=!0):T=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,T!==void 0&&(v="success",m=J4(s?.data,T,t),d=!0)}if(t.select&&m!==void 0&&!g)if(s&&m===i?.data&&t.select===this.#m)m=this.#f;else try{this.#m=t.select,m=t.select(m),m=J4(s?.data,m,t),this.#f=m,this.#s=null}catch(T){this.#s=T}this.#s&&(p=this.#s,m=this.#f,y=Date.now(),v="error");const b=f.fetchStatus==="fetching",N=v==="pending",j=v==="error",w=N&&b,S=m!==void 0,A={status:v,fetchStatus:f.fetchStatus,isPending:N,isSuccess:v==="success",isError:j,isInitialLoading:w,isLoading:w,data:m,dataUpdatedAt:f.dataUpdatedAt,error:p,errorUpdatedAt:y,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:b,isRefetching:b&&!N,isLoadingError:j&&!S,isPaused:f.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:j&&S,isStale:B3(e,t),refetch:this.refetch,promise:this.#o,isEnabled:Zc(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const T=A.data!==void 0,I=A.status==="error"&&!T,B=M=>{I?M.reject(A.error):T&&M.resolve(A.data)},E=()=>{const M=this.#o=A.promise=Q4();B(M)},C=this.#o;switch(C.status){case"pending":e.queryHash===r.queryHash&&B(C);break;case"fulfilled":(I||A.data!==C.value)&&E();break;case"rejected":(!I||A.error!==C.reason)&&E();break}}return A}updateResult(){const e=this.#a,t=this.createResult(this.#t,this.options);if(this.#n=this.#t.state,this.#i=this.options,this.#n.data!==void 0&&(this.#h=this.#t),J1(t,e))return;this.#a=t;const r=()=>{if(!e)return!0;const{notifyOnChangeProps:n}=this.options,s=typeof n=="function"?n():n;if(s==="all"||!s&&!this.#p.size)return!0;const i=new Set(s??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#a).some(o=>{const l=o;return this.#a[l]!==e[l]&&i.has(l)})};this.#j({listeners:r()})}#N(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#y()}#j(e){Ci.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#a)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Sse(e,t){return Zc(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function i8(e,t){return Sse(e,t)||e.state.data!==void 0&&ek(e,t,t.refetchOnMount)}function ek(e,t,r){if(Zc(t.enabled,e)!==!1&&n0(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&B3(e,t)}return!1}function o8(e,t,r,n){return(e!==t||Zc(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&B3(e,r)}function B3(e,t){return Zc(t.enabled,e)!==!1&&e.isStaleByTime(n0(t.staleTime,e))}function _se(e,t){return!J1(e.getCurrentResult(),t)}function Z1(e){return{onFetch:(t,r)=>{const n=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let f=!1;const d=y=>{vse(y,()=>t.signal,()=>f=!0)},m=H7(t.options,t.fetchOptions),p=async(y,v,g)=>{if(f)return Promise.reject();if(v==null&&y.pages.length)return Promise.resolve(y);const N=(()=>{const P={client:t.client,queryKey:t.queryKey,pageParam:v,direction:g?"backward":"forward",meta:t.options.meta};return d(P),P})(),j=await m(N),{maxPages:w}=t.options,S=g?gse:xse;return{pages:S(y.pages,j,w),pageParams:S(y.pageParams,v,w)}};if(s&&i.length){const y=s==="backward",v=y?Y7:tk,g={pages:i,pageParams:o},b=v(n,g);l=await p(g,b,y)}else{const y=e??i.length;do{const v=c===0?o[0]??n.initialPageParam:tk(n,l);if(c>0&&v==null)break;l=await p(l,v),c++}while(c<y)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(u,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=u}}}function tk(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Y7(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}function Ase(e,t){return t?tk(e,t)!=null:!1}function Ese(e,t){return!t||!e.getPreviousPageParam?!1:Y7(e,t)!=null}var Cse=class extends X7{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:Z1()})}getOptimisticResult(e){return e.behavior=Z1(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:r}=e,n=super.createResult(e,t),{isFetching:s,isRefetching:i,isError:o,isRefetchError:l}=n,c=r.fetchMeta?.fetchMore?.direction,u=o&&c==="forward",f=s&&c==="forward",d=o&&c==="backward",m=s&&c==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Ase(t,r.data),hasPreviousPage:Ese(t,r.data),isFetchNextPageError:u,isFetchingNextPage:f,isFetchPreviousPageError:d,isFetchingPreviousPage:m,isRefetchError:l&&!u&&!d,isRefetching:i&&!f&&!m}}},Tse=class extends G7{#e;#t;#r;#a;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||J7(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#a?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#a=V7({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",s=!this.#a.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:s}),this.#r.config.onMutate&&await this.#r.config.onMutate(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#a.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{await this.#r.config.onError?.(i,e,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,r)}catch(o){Promise.reject(o)}try{await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,r)}catch(o){Promise.reject(o)}throw this.#n({type:"error",error:i}),i}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ci.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function J7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ose=class extends Jp{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new Tse({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=pv(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=pv(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=pv(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(s=>s.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=pv(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ci.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>t8(t,r))}findAll(e={}){return this.getAll().filter(t=>t8(e,t))}notify(e){Ci.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ci.batch(()=>Promise.all(e.map(t=>t.continue().catch(pl))))}};function pv(e){return e.options.scope?.id}var Pse=class extends Jp{#e;#t=void 0;#r;#a;constructor(t,r){super(),this.#e=t,this.setOptions(r),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const r=this.options;this.options=this.#e.defaultMutationOptions(t),J1(this.options,r)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),r?.mutationKey&&this.options.mutationKey&&sh(r.mutationKey)!==sh(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#n(),this.#i(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#i()}mutate(t,r){return this.#a=r,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#n(){const t=this.#r?.state??J7();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#i(t){Ci.batch(()=>{if(this.#a&&this.hasListeners()){const r=this.#t.variables,n=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#a.onSuccess?.(t.data,r,n,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(t.data,null,r,n,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#a.onError?.(t.error,r,n,s)}catch(i){Promise.reject(i)}try{this.#a.onSettled?.(void 0,t.error,r,n,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(r=>{r(this.#t)})})}},Ise=class extends Jp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,s=t.queryHash??L3(n,t);let i=this.get(s);return i||(i=new kse({client:e,queryKey:n,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ci.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>e8(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>e8(e,r)):t}notify(e){Ci.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ci.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ci.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Dse=class{#e;#t;#r;#a;#n;#i;#o;#s;constructor(e={}){this.#e=e.queryCache||new Ise,this.#t=e.mutationCache||new Ose,this.#r=e.defaultOptions||{},this.#a=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=R3.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#s=Q1.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#s?.(),this.#s=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(n0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(n.queryHash)?.state.data,o=hse(t,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ci.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ci.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Ci.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ci.batch(()=>this.#e.findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(pl).catch(pl)}invalidateQueries(e,t={}){return Ci.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ci.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(pl)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(pl)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(n0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(pl).catch(pl)}fetchInfiniteQuery(e){return e.behavior=Z1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(pl).catch(pl)}ensureInfiniteQueryData(e){return e.behavior=Z1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Q1.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#a.set(sh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#a.values()],r={};return t.forEach(n=>{qx(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(sh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{qx(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=L3(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===F3&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},Q7=z.createContext(void 0),yi=e=>{const t=z.useContext(Q7);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Lse=({client:e,children:t})=>(z.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(Q7.Provider,{value:e,children:t})),Z7=z.createContext(!1),Fse=()=>z.useContext(Z7);Z7.Provider;function Mse(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Rse=z.createContext(Mse()),Bse=()=>z.useContext(Rse),Use=(e,t,r)=>{const n=r?.state.error&&typeof e.throwOnError=="function"?M3(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},qse=e=>{z.useEffect(()=>{e.clearReset()},[e])},$se=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||M3(r,[e.error,n])),zse=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>r(n(...s)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Hse=(e,t)=>e.isLoading&&e.isFetching&&!t,Wse=(e,t)=>e?.suspense&&t.isPending,l8=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function eM(e,t,r){const n=Fse(),s=Bse(),i=yi(),o=i.defaultQueryOptions(e);i.getDefaultOptions().queries?._experimental_beforeQuery?.(o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",zse(o),Use(o,s,l),qse(s);const c=!i.getQueryCache().get(o.queryHash),[u]=z.useState(()=>new t(i,o)),f=u.getOptimisticResult(o),d=!n&&e.subscribed!==!1;if(z.useSyncExternalStore(z.useCallback(m=>{const p=d?u.subscribe(Ci.batchCalls(m)):pl;return u.updateResult(),p},[u,d]),()=>u.getCurrentResult(),()=>u.getCurrentResult()),z.useEffect(()=>{u.setOptions(o)},[o,u]),Wse(o,f))throw l8(o,u,s);if($se({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;return i.getDefaultOptions().queries?._experimental_afterQuery?.(o,f),o.experimental_prefetchInRender&&!ah&&Hse(f,n)&&(c?l8(o,u,s):l?.promise)?.catch(pl).finally(()=>{u.updateResult()}),o.notifyOnChangeProps?f:u.trackResult(f)}function wc(e,t){return eM(e,X7)}function kl(e,t){const r=yi(),[n]=z.useState(()=>new Pse(r,e));z.useEffect(()=>{n.setOptions(e)},[n,e]);const s=z.useSyncExternalStore(z.useCallback(o=>n.subscribe(Ci.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=z.useCallback((o,l)=>{n.mutate(o,l).catch(pl)},[n]);if(s.error&&M3(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function Vse(e,t){return eM(e,Cse)}const Zy={companies:e=>["companies",e],contacts:e=>["contacts",e],deals:()=>["deals"],users:()=>["users"]},Gse=e=>wc({queryKey:Zy.companies(e),queryFn:async()=>(await Cd(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),Kse=e=>wc({queryKey:Zy.contacts(e),queryFn:async()=>(await fg(e?.trim()||void 0)).data||[],staleTime:10*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),Xse=()=>wc({queryKey:Zy.deals(),queryFn:async()=>(await Jy()).data||[],staleTime:60*1e3,gcTime:600*1e3}),Yse=()=>wc({queryKey:Zy.users(),queryFn:async()=>(await Ed()).data||[],staleTime:300*1e3,gcTime:1800*1e3}),Jse=()=>{const e=yi();return kl({mutationFn:async({id:t,updates:r})=>(await b7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["companies"]});const n=e.getQueriesData({queryKey:["companies"]});return e.setQueriesData({queryKey:["companies"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousCompanies:n}},onError:(t,r,n)=>{n?.previousCompanies&&n.previousCompanies.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]})}})},Qse=()=>{const e=yi();return kl({mutationFn:async({id:t,updates:r})=>(await N7(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["contacts"]});const n=e.getQueriesData({queryKey:["contacts"]});return e.setQueriesData({queryKey:["contacts"]},s=>s?.map(i=>i.id===t?{...i,...r}:i)),{previousContacts:n}},onError:(t,r,n)=>{n?.previousContacts&&n.previousContacts.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["contacts"]})}})},Zse=()=>{const e=yi();return kl({mutationFn:async t=>(await w7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(n=>n.id!==t))}})},eie=()=>{const e=yi();return kl({mutationFn:async t=>(await j7(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(n=>n.id!==t))}})},tie=()=>{const e=yi();return kl({mutationFn:async t=>(await Promise.all(t.map(r=>w7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r?.filter(n=>!t.includes(n.id)))}})},rie=()=>{const e=yi();return kl({mutationFn:async t=>(await Promise.all(t.map(r=>j7(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r?.filter(n=>!t.includes(n.id)))}})},nie=()=>{const e=yi();return kl({mutationFn:async({ids:t,updates:r})=>(await Promise.all(t.map(n=>b7(n,r))),{ids:t,updates:r}),onSuccess:({ids:t,updates:r})=>{e.setQueriesData({queryKey:["companies"]},n=>n?.map(s=>t.includes(s.id)?{...s,...r}:s))}})},aie=({onNavigate:e,onAddCompany:t,onAddContact:r,externalSearchQuery:n=""})=>{const{showSuccess:s,showError:i}=Ea(),o=yi(),l=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[c,u]=z.useState("companies"),[f,d]=z.useState(""),[m,p]=z.useState(null),[y,v]=z.useState(null),{data:g=[],isLoading:b}=Gse(f),{data:N=[],isLoading:j}=Kse(f),{data:w=[],isLoading:S}=Xse(),{data:P=[],isLoading:A}=Yse(),T=Jse(),I=Qse(),B=Zse(),E=eie(),C=tie(),M=rie(),q=nie(),G=b||j||S||A,[Z,te]=z.useState([]),[ne,J]=z.useState([]),[ee,H]=z.useState([]),[O,R]=z.useState(!1),[W,U]=z.useState(!1),[K,oe]=z.useState({}),[he,ie]=z.useState(!1),[ce,Le]=z.useState(!1),[le,He]=z.useState({}),[Fe,fe]=z.useState("details"),[Q,we]=z.useState(!1),[ve,Ee]=z.useState(null),[pe,ue]=z.useState(null),[Pe,Ne]=z.useState(!1),[Be,nt]=z.useState(!1),[mt,kt]=z.useState([]),[Re,gt]=z.useState([]),[ut,lt]=z.useState(!1),[pr,tr]=z.useState(!1),[ft,$t]=z.useState(!1),[er,qe]=z.useState(!1),[bt,Nr]=z.useState(null),[rr,Lr]=z.useState(""),[Er,or]=z.useState(!1),[Ut,wr]=z.useState(null),[kr,Gr]=z.useState(null),[hn,On]=z.useState(!1),[br,Yn]=z.useState(""),[on,Xe]=z.useState(0),[wt,Wt]=z.useState([]),[re,me]=z.useState(""),[ye,Ae]=z.useState(!1),[Ce,Oe]=z.useState(null),[Ke,ct]=z.useState(null),[Ge,Je]=z.useState(!1),[ze,De]=z.useState(""),[tt,pt]=z.useState(0),[It,Mt]=z.useState([]),[vr,Ur]=z.useState(!1),[sn,En]=z.useState(!1),[ls,vn]=z.useState(!1),xa=async()=>{vn(!0);try{await Promise.all([o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})]),s("Data refreshed successfully")}catch{i("Failed to refresh data")}finally{setTimeout(()=>vn(!1),500)}};z.useEffect(()=>{n!==void 0&&d(n)},[n]),z.useEffect(()=>{kt([]),gt([])},[c,f]),z.useEffect(()=>{const _e=()=>{console.log(" CRM refresh triggered - invalidating cache"),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})};return window.addEventListener("refresh-crm",_e),()=>window.removeEventListener("refresh-crm",_e)},[o]);const Fn=async _e=>{if(m)try{await T.mutateAsync({id:m.id,updates:_e}),p({...m,..._e}),s("Account updated")}catch{i("Update failed")}},ga=async()=>{if(!(!y||Q)){if(!le.name||!le.email){i("Name and Email are required fields");return}we(!0);try{await I.mutateAsync({id:y.id,updates:le});const _e={...y,...le};v(_e),Le(!1),s("Contact profile updated successfully")}catch(_e){console.error("Contact update error:",_e),i(_e.message||"Failed to update contact. Please try again.")}finally{we(!1)}}},ca=async _e=>{Ne(!0);try{await B.mutateAsync(_e),m?.id===_e&&(p(null),U(!1)),Ee(null),s("Company deleted successfully")}catch(Yt){i(Yt.message||"Failed to delete company")}finally{Ne(!1)}},da=async _e=>{nt(!0);try{await E.mutateAsync(_e),y?.id===_e&&(v(null),Le(!1)),ue(null),s("Contact deleted successfully")}catch(Yt){i(Yt.message||"Failed to delete contact")}finally{nt(!1)}},Us=()=>{p(null),U(!1),Lr(""),On(!1)},va=()=>{v(null),Le(!1),me(""),Je(!1)},Ue=_e=>{const Yt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,mr=[];let _r;for(;(_r=Yt.exec(_e))!==null;){const zr=_r[1].trim(),mn=P.find(ta=>ta.name.toLowerCase()===zr.toLowerCase());mn&&mr.push(mn.id)}return[...new Set(mr)]},Dt=_e=>{const Yt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,mr=[];let _r=0,zr;for(;(zr=Yt.exec(_e))!==null;){zr.index>_r&&mr.push(_e.substring(_r,zr.index));const mn=zr[1].trim(),ta=P.find(Hn=>Hn.name.toLowerCase()===mn.toLowerCase());ta?mr.push(a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",ta.name]},zr.index)):mr.push(`@${mn}`),_r=zr.index+zr[0].length}return _r<_e.length&&mr.push(_e.substring(_r)),mr.length>0?mr:_e},Ct=_e=>{const Yt=_e.target.value,mr=_e.target.selectionStart;Lr(Yt),Xe(mr);const _r=Yt.substring(0,mr),zr=_r.lastIndexOf("@");if(zr!==-1){const mn=_r.substring(zr+1),ta=zr>0?_r[zr-1]:" ";if((ta===" "||ta===`
`||zr===0)&&!mn.includes(" ")&&!mn.includes(`
`)){Yn(mn);const Hn=P.filter(ti=>ti.name.toLowerCase().includes(mn.toLowerCase())||ti.email.toLowerCase().includes(mn.toLowerCase()));Wt(Hn.slice(0,5)),On(!0);return}}On(!1)},sr=_e=>{const mr=rr.substring(0,on).lastIndexOf("@"),_r=rr.substring(on),mn=`${rr.substring(0,mr)}@${_e.name} ${_r}`;Lr(mn),On(!1)},jr=async()=>{if(!(!m||!rr.trim())){or(!0);try{const _e=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",Yt=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",mr={id:`note_${Date.now()}`,userId:_e,userName:Yt,text:rr.trim(),createdAt:new Date().toISOString()},_r=[...m.notes||[],mr];await T.mutateAsync({id:m.id,updates:{notes:_r}}),p({...m,notes:_r}),o.invalidateQueries({queryKey:["companies"]});const zr=Ue(rr);for(const ta of zr)try{await Fp({userId:ta,type:"mention",title:"You were mentioned in a company note",message:`${Yt} mentioned you in ${m.name}`,relatedId:m.id,relatedType:"company",read:!1})}catch(Hn){console.error("Failed to send notification:",Hn)}Lr("");const mn=zr.length>0?`Note added and ${zr.length} user(s) notified`:"Note added successfully";s(mn)}catch(_e){i(_e.message||"Failed to add note")}finally{or(!1)}}},xr=async()=>{if(!(!m||!l||!kr))try{wr(kr);const _e=m.notes?.filter(Yt=>Yt.id!==kr)||[];await T.mutateAsync({id:m.id,updates:{notes:_e}}),p({...m,notes:_e}),o.invalidateQueries({queryKey:["companies"]}),s("Note deleted successfully"),Gr(null)}catch(_e){i(_e.message||"Failed to delete note")}finally{wr(null)}},Cr=_e=>{const Yt=_e.target.value,mr=_e.target.selectionStart;me(Yt),pt(mr);const _r=Yt.substring(0,mr),zr=_r.lastIndexOf("@");if(zr!==-1){const mn=_r.substring(zr+1),ta=zr>0?_r[zr-1]:" ";if((ta===" "||ta===`
`||zr===0)&&!mn.includes(" ")&&!mn.includes(`
`)){De(mn);const Hn=P.filter(ti=>ti.name.toLowerCase().includes(mn.toLowerCase())||ti.email.toLowerCase().includes(mn.toLowerCase()));Mt(Hn.slice(0,5)),Je(!0);return}}Je(!1)},kn=_e=>{const mr=re.substring(0,tt).lastIndexOf("@"),_r=re.substring(tt),mn=`${re.substring(0,mr)}@${_e.name} ${_r}`;me(mn),Je(!1)},Pn=async()=>{if(!(!y||!re.trim())){Ae(!0);try{const _e=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",Yt=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",mr={id:`note_${Date.now()}`,userId:_e,userName:Yt,text:re.trim(),createdAt:new Date().toISOString()},_r=[...y.notes||[],mr];await I.mutateAsync({id:y.id,updates:{notes:_r}}),v({...y,notes:_r}),o.invalidateQueries({queryKey:["contacts"]});const zr=Ue(re);for(const ta of zr)try{await Fp({userId:ta,type:"mention",title:"You were mentioned in a contact note",message:`${Yt} mentioned you in ${y.name}`,relatedId:y.id,relatedType:"contact",read:!1})}catch(Hn){console.error("Failed to send notification:",Hn)}me("");const mn=zr.length>0?`Note added and ${zr.length} user(s) notified`:"Note added successfully";s(mn)}catch(_e){i(_e.message||"Failed to add note")}finally{Ae(!1)}}},nr=async()=>{if(!(!y||!l||!Ke))try{Oe(Ke);const _e=y.notes?.filter(Yt=>Yt.id!==Ke)||[];await I.mutateAsync({id:y.id,updates:{notes:_e}}),v({...y,notes:_e}),o.invalidateQueries({queryKey:["contacts"]}),s("Note deleted successfully"),ct(null)}catch(_e){i(_e.message||"Failed to delete note")}finally{Oe(null)}},ir=z.useCallback(_e=>w.some(Yt=>Yt.companyId===_e),[w]),Et=z.useMemo(()=>g.filter(_e=>{if(Z.length>0){const Yt=Z.includes("target")&&_e.isTargetAccount,mr=Z.includes("non-target")&&!_e.isTargetAccount;if(!Yt&&!mr)return!1}if(ne.length>0){const Yt=ne.includes("assigned")&&_e.ownerId,mr=ne.includes("unassigned")&&!_e.ownerId;if(!Yt&&!mr)return!1}if(ee.length>0){const Yt=ee.includes("has-deals")&&ir(_e.id),mr=ee.includes("no-deals")&&!ir(_e.id);if(!Yt&&!mr)return!1}return!0}),[g,Z,ne,ee,ir]),Sr=z.useMemo(()=>Z.length>0||ne.length>0||ee.length>0,[Z,ne,ee]),Ht=()=>{te([]),J([]),H([])},Un=(_e,Yt)=>{_e==="target"?te(mr=>mr.includes(Yt)?mr.filter(_r=>_r!==Yt):[...mr,Yt]):_e==="assigned"?J(mr=>mr.includes(Yt)?mr.filter(_r=>_r!==Yt):[...mr,Yt]):_e==="deals"&&H(mr=>mr.includes(Yt)?mr.filter(_r=>_r!==Yt):[...mr,Yt])},Ca=()=>{mt.length===Et.length&&Et.length>0?kt([]):kt(Et.map(_e=>_e.id))},pn=()=>{Re.length===N.length?gt([]):gt(N.map(_e=>_e.id))},Zt=async()=>{lt(!0);try{const _e=[...mt];await C.mutateAsync(_e),m&&_e.includes(m.id)&&(p(null),U(!1)),kt([]),Nr(null),s(`Successfully deleted ${_e.length} compan${_e.length>1?"ies":"y"}`)}catch(_e){i(_e.message||"Failed to delete companies")}finally{lt(!1)}},zn=async()=>{tr(!0);try{const _e=[...Re];await M.mutateAsync(_e),y&&_e.includes(y.id)&&(v(null),Le(!1)),gt([]),Nr(null),s(`Successfully deleted ${_e.length} contact${_e.length>1?"s":""}`)}catch(_e){i(_e.message||"Failed to delete contacts")}finally{tr(!1)}},ya=async()=>{if(mt.length!==0){$t(!0);try{const _e=[...mt];await q.mutateAsync({ids:_e,updates:{isTargetAccount:!0}}),m&&_e.includes(m.id)&&p({...m,isTargetAccount:!0}),kt([]),s(`Successfully marked ${_e.length} compan${_e.length>1?"ies":"y"} as target account${_e.length>1?"s":""}`)}catch(_e){i(_e.message||"Failed to mark companies as target accounts")}finally{$t(!1)}}},ln=async()=>{if(mt.length!==0){qe(!0);try{const _e=[...mt];await q.mutateAsync({ids:_e,updates:{isTargetAccount:!1}}),m&&_e.includes(m.id)&&p({...m,isTargetAccount:!1}),kt([]),s(`Successfully unmarked ${_e.length} compan${_e.length>1?"ies":"y"} as target account${_e.length>1?"s":""}`)}catch(_e){i(_e.message||"Failed to unmark companies as target accounts")}finally{qe(!1)}}},xn=async()=>{m&&i("AI Intelligence feature is not available. Please install @google/genai package to enable this feature.")},$r=_e=>w.filter(Yt=>Yt.companyId===_e&&Yt.stage!=="Won"&&Yt.stage!=="Lost").length,Kr=_e=>_e?P.find(Yt=>Yt.id===_e)?.name||"Unknown":"Unassigned";return a.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 min-w-0 overflow-x-hidden",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight truncate",children:"CRM"}),a.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2",children:[a.jsxs("button",{onClick:()=>{u("companies"),kt([]),gt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="companies"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Companies (",c==="companies"?Et.length:g.length,")"]}),a.jsxs("button",{onClick:()=>{u("contacts"),kt([]),gt([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="contacts"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Contacts (",N.length,")"]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[a.jsxs("button",{onClick:xa,disabled:ls,className:"px-2 sm:px-3 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm disabled:opacity-50 shrink-0",title:"Refresh data",children:[a.jsx(bd,{className:`w-4 h-4 ${ls?"animate-spin":""}`}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),a.jsxs("button",{onClick:()=>c==="companies"?t():r(),className:"px-3 sm:px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-indigo-700 transition-all shadow-sm shrink-0",children:[a.jsx(Nn,{className:"w-4 h-4 shrink-0"})," ",a.jsxs("span",{className:"whitespace-nowrap",children:["Add ",c==="companies"?"Company":"Contact"]})]}),c==="contacts"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>Ur(!0),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-700 transition-all shadow-sm shrink-0",title:"Scan Business Card",children:[a.jsx(rU,{className:"w-4 h-4 shrink-0"})," ",a.jsx("span",{className:"whitespace-nowrap",children:"Scan Card"})]}),a.jsxs("button",{onClick:()=>En(!0),className:"px-3 sm:px-4 py-2 bg-blue-700 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-800 transition-all shadow-sm shrink-0",title:"Import from LinkedIn",children:[a.jsx(V0,{className:"w-4 h-4 shrink-0"})," ",a.jsx("span",{className:"whitespace-nowrap",children:"LinkedIn"})]})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full min-w-0",children:[a.jsx("div",{className:"w-full min-w-0",children:a.jsxs("div",{className:"relative group w-full min-w-0",children:[a.jsx(Sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-600 transition-colors shrink-0"}),a.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:f,onChange:_e=>d(_e.target.value),className:"w-full min-w-0 pl-10 pr-10 py-3 bg-white border border-slate-200 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 pb-2 min-w-0",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0",disabled:G,checked:c==="companies"?Et.length>0&&mt.length===Et.length&&Et.every(_e=>mt.includes(_e.id)):N.length>0&&Re.length===N.length,onChange:c==="companies"?Ca:pn}),a.jsxs("span",{className:"text-sm font-semibold text-slate-600 truncate",children:["Select All ",c==="companies"?"Companies":"Contacts"]})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4 min-w-0",children:c==="companies"?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>R(!0),disabled:G,className:`px-3 sm:px-4 py-2 rounded-xl border-2 transition-all flex items-center gap-2 w-fit shrink-0 ${Sr?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(nx,{className:"w-4 h-4 shrink-0"}),a.jsx("span",{className:"text-sm font-bold",children:"Filters"}),Sr&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:Z.length+ne.length+ee.length})]}),a.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 sm:text-right break-words",children:G?"Loading...":`Showing ${Et.length} of ${g.length} companies`})]}):a.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 text-right",children:G?"Loading...":`Showing ${N.length} contact${N.length!==1?"s":""}`})}),O&&c==="companies"&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-3 sm:p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 my-auto",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-200 flex items-center justify-between gap-3 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center shrink-0",children:a.jsx(nx,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-black text-lg sm:text-xl text-slate-900 truncate",children:"Filter Companies"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium hidden sm:block",children:"Select multiple filters to refine your search"})]})]}),a.jsx("button",{onClick:()=>R(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(fm,{className:"w-4 h-4"}),"Target Account"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:Z.includes("target"),onChange:()=>Un("target","target"),className:"w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(fm,{className:"w-4 h-4 text-amber-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Target Account"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(_e=>_e.isTargetAccount).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:Z.includes("non-target"),onChange:()=>Un("target","non-target"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(gd,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Standard Account"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(_e=>!_e.isTargetAccount).length," companies"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Kg,{className:"w-4 h-4"}),"Assignment"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:ne.includes("assigned"),onChange:()=>Un("assigned","assigned"),className:"w-4 h-4 rounded border-slate-300 text-green-600 focus:ring-green-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Kg,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Assigned"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(_e=>_e.ownerId).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:ne.includes("unassigned"),onChange:()=>Un("assigned","unassigned"),className:"w-4 h-4 rounded border-slate-300 text-orange-500 focus:ring-orange-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(vd,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Unassigned"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(_e=>!_e.ownerId).length," companies"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ru,{className:"w-4 h-4"}),"Deals"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:ee.includes("has-deals"),onChange:()=>Un("deals","has-deals"),className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(ru,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Has Deals"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(_e=>ir(_e.id)).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:ee.includes("no-deals"),onChange:()=>Un("deals","no-deals"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(ru,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-bold text-slate-900",children:"No Deals"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[g.filter(_e=>!ir(_e.id)).length," companies"]})]})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[a.jsxs("button",{onClick:Ht,disabled:!Sr,className:"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[a.jsx(cr,{className:"w-4 h-4"}),"Clear All Filters"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[Et.length," of ",g.length," companies"]}),a.jsx("button",{onClick:()=>R(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Apply Filters"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 min-h-[600px] w-full min-w-0 items-start",children:G?Array.from({length:8}).map((_e,Yt)=>a.jsx("div",{className:`bg-white rounded-2xl border border-slate-200 shadow-sm animate-pulse flex flex-col ${c==="companies"?"p-6":"p-5 h-[220px]"}`,children:c==="companies"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-lg"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[a.jsx("div",{className:"h-3 bg-slate-200 rounded w-2/3"}),a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-11 h-11 bg-slate-200 rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),a.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:a.jsx("div",{className:"h-8 bg-slate-200 rounded-xl w-full"})})]})},`skeleton-${Yt}`)):c==="companies"?Et.map(_e=>{const Yt=P.find(_r=>_r.id===_e.ownerId),mr=mt.includes(_e.id);return a.jsxs("div",{onClick:()=>p(_e),className:`bg-white p-6 rounded-2xl border ${mr?"border-indigo-400 bg-indigo-50/30":_e.isTargetAccount?"border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.1)]":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group flex flex-col relative`,children:[_e.isTargetAccount&&a.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-amber-500 text-white text-[9px] font-black uppercase rounded shadow-sm flex items-center gap-1 whitespace-nowrap",children:[a.jsx(fm,{className:"w-2.5 h-2.5"})," Target Account"]}),a.jsx("div",{className:"absolute top-4 right-4",onClick:_r=>_r.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:mr,onChange:()=>kt(_r=>mr?_r.filter(zr=>zr!==_e.id):[..._r,_e.id])})}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx(Qs,{src:_e.logo,fallbackText:_e.name,className:"w-12 h-12 border border-slate-100",isAvatar:!1}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900 truncate group-hover:text-indigo-600 transition-colors",children:_e.name}),a.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:_e.industry})]})]}),a.jsxs("div",{className:"space-y-3 mb-6 text-sm text-slate-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(W0,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate",children:_e.website||"No website"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(vl,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate font-medium",children:Yt?.name||"Unassigned"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[a.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[$r(_e.id)," Active Deals"]}),a.jsx(_s,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},_e.id)}):N.map(_e=>{const Yt=g.find(_r=>_r.id===_e.companyId),mr=Re.includes(_e.id);return a.jsxs("div",{onClick:()=>v(_e),className:`bg-white p-5 rounded-2xl border ${mr?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group shadow-sm relative flex flex-col h-[220px]`,children:[a.jsx("div",{className:"absolute top-4 right-4",onClick:_r=>_r.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:mr,onChange:()=>gt(_r=>mr?_r.filter(zr=>zr!==_e.id):[..._r,_e.id])})}),a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-11 h-11 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-lg uppercase shadow-inner",children:_e.name.charAt(0)}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("h3",{className:"font-bold text-base text-slate-900 truncate",children:_e.name}),a.jsxs("p",{className:"text-slate-500 text-[11px] font-bold uppercase truncate",children:[_e.role," @ ",Yt?.name||"Partner"]})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-slate-600 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(gi,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate text-indigo-600 text-[13px]",children:_e.email})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Tj,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-[13px]",children:_e.phone})]})]}),_e.linkedin&&a.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:a.jsxs("a",{href:_e.linkedin,target:"_blank",rel:"noreferrer",onClick:_r=>_r.stopPropagation(),className:"w-full py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[a.jsx(V0,{className:"w-4 h-4"}),"LinkedIn"]})})]},_e.id)})})]}),(c==="companies"&&mt.length>0||c==="contacts"&&Re.length>0)&&a.jsx("div",{className:"fixed bottom-6 left-2 right-2 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300 max-w-2xl sm:max-w-none mx-auto",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl sm:rounded-3xl shadow-2xl px-4 sm:px-8 py-3 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3 shrink-0",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:c==="companies"?mt.length:Re.length}),"Selected"]}),a.jsx("div",{className:"hidden sm:block h-8 w-px bg-white/10 shrink-0"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[c==="companies"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:_e=>{_e.stopPropagation(),ya()},disabled:ft||er,className:"px-3 sm:px-5 py-2 bg-amber-600 hover:bg-amber-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[ft?a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(fm,{className:"w-3.5 h-3.5 shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:"Mark Target"})]}),a.jsxs("button",{onClick:_e=>{_e.stopPropagation(),ln()},disabled:ft||er,className:"px-3 sm:px-5 py-2 bg-slate-600 hover:bg-slate-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[er?a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(vd,{className:"w-3.5 h-3.5 shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:"Unmark Target"})]})]}),a.jsxs("button",{onClick:_e=>{_e.stopPropagation(),Nr(c)},disabled:c==="companies"?ut:pr,className:"px-3 sm:px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[(c==="companies"?ut:pr)?a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(Br,{className:"w-3.5 h-3.5 shrink-0"}),"Delete"]}),a.jsx("button",{onClick:()=>{c==="companies"?kt([]):gt([])},className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors shrink-0 ml-auto sm:ml-0",children:a.jsx(cr,{className:"w-5 h-5"})})]})]})}),m&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:Us}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(Qs,{src:m.logo,fallbackText:m.name,className:"w-12 h-12 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:m.name}),a.jsx("button",{onClick:()=>Fn({isTargetAccount:!m.isTargetAccount}),className:`p-1 rounded-lg transition-all ${m.isTargetAccount?"text-amber-500 bg-amber-50":"text-slate-300 hover:text-amber-500 hover:bg-amber-50"}`,title:"Mark as Target Account",children:a.jsx(fm,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-slate-500",children:m.industry})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[W?a.jsx("button",{onClick:async()=>{await Fn(K),U(!1)},className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg",children:a.jsx(Ii,{className:"w-5 h-5"})}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{oe({...m}),U(!0)},className:"p-2 hover:bg-slate-100 rounded-xl text-slate-400",children:a.jsx(K_,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>Ee(m),className:"p-2 hover:bg-red-50 rounded-xl text-red-500 transition-all",title:"Delete Company",children:a.jsx(Br,{className:"w-5 h-5"})})]}),a.jsx("button",{onClick:Us,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:a.jsx(cr,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[W?a.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"col-span-2 space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Company Name"}),a.jsx("input",{type:"text",value:K.name,onChange:_e=>oe({...K,name:_e.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Industry"}),a.jsx("input",{type:"text",value:K.industry,onChange:_e=>oe({...K,industry:_e.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Owner"}),a.jsxs("select",{value:K.ownerId,onChange:_e=>oe({...K,ownerId:_e.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"",children:"Unassigned"}),P.map(_e=>a.jsx("option",{value:_e.id,children:_e.name},_e.id))]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Website"}),a.jsx("input",{type:"text",value:K.website,onChange:_e=>oe({...K,website:_e.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"LinkedIn"}),a.jsx("input",{type:"text",value:K.linkedin,onChange:_e=>oe({...K,linkedin:_e.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Account Manager"}),a.jsxs("span",{className:"text-sm font-bold text-indigo-600 flex items-center gap-2",children:[a.jsx(vl,{className:"w-4 h-4"})," ",Kr(m.ownerId)]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),a.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${m.isTargetAccount?"bg-amber-500 text-white":"bg-slate-200 text-slate-500"}`,children:m.isTargetAccount?"Target Account":"Standard Account"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(nf,{className:"w-4 h-4 text-emerald-500"})," Social Signals & Intelligence"]}),a.jsxs("button",{onClick:xn,disabled:he,className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black uppercase hover:bg-indigo-100 transition-all disabled:opacity-50",children:[he?a.jsx(jt,{className:"w-3 h-3 animate-spin"}):a.jsx(oU,{className:"w-3 h-3"})," Execute Intelligence Scan"]})]}),a.jsxs("div",{className:"space-y-3",children:[he&&a.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-indigo-200 flex flex-col items-center justify-center text-center",children:[a.jsx(jt,{className:"w-8 h-8 animate-spin text-indigo-400 mb-2"}),a.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-widest",children:"Scanning global digital signals..."})]}),(!m.socialSignals||m.socialSignals.length===0)&&!he?a.jsxs("div",{className:"py-12 text-center text-slate-400",children:[a.jsx(nf,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),a.jsx("p",{className:"text-xs font-medium",children:"No signals found. Use AI Scan to refresh intelligence."})]}):(m.socialSignals||[]).map(_e=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl hover:border-indigo-200 transition-all shadow-sm group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${_e.type==="funding"?"bg-emerald-50 text-emerald-600":_e.type==="hiring"?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"}`,children:[_e.type==="funding"&&a.jsx(tU,{className:"w-4 h-4"}),_e.type==="hiring"&&a.jsx(Ru,{className:"w-4 h-4"}),_e.type==="acquisition"&&a.jsx(Yv,{className:"w-4 h-4"}),_e.type==="news"&&a.jsx(JB,{className:"w-4 h-4"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-sm text-slate-900",children:_e.title}),_e.isAiGenerated&&a.jsxs("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-tighter flex items-center gap-1",children:[a.jsx(Gi,{className:"w-2 h-2"})," Verified by Impact AI"]})]})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:_e.date})]}),a.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:_e.description})]},_e.id))]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",m.notes&&m.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:m.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{rows:3,value:rr,onChange:Ct,onBlur:()=>setTimeout(()=>On(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),hn&&wt.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(rx,{className:"w-3 h-3"}),"Mention User"]}),wt.map(_e=>a.jsxs("button",{onClick:()=>sr(_e),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:_e.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:_e.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:_e.email})]})]},_e.id))]})})]}),a.jsx("button",{onClick:jr,disabled:Er||!rr.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Er?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Iu,{className:"w-4 h-4"}),"Send"]})})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:m.notes&&m.notes.length>0?[...m.notes].reverse().map(_e=>{const Yt=l?.role==="Admin"||_e.userId===l?.id;return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:_e.userName?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:_e.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(_e.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Yt&&a.jsx("button",{onClick:()=>Gr(_e.id),disabled:Ut===_e.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Ut===_e.id?a.jsx(jt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),_e.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Dt(_e.text)})]},_e.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Active Contacts"}),a.jsx("div",{className:"space-y-3",children:N.filter(_e=>_e.companyId===m.id).map(_e=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl flex items-center justify-between hover:border-indigo-200 transition-all cursor-pointer",onClick:()=>v(_e),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 border border-indigo-100 rounded-xl flex items-center justify-center text-xs font-black text-indigo-600 uppercase",children:_e.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:_e.name}),a.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:_e.role})]})]}),a.jsx(_s,{className:"w-4 h-4 text-slate-300"})]},_e.id))})]})]})]})]}),y&&a.jsxs("div",{className:"fixed inset-0 z-[75] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:va}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:va,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(cr,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-indigo-100 ring-4 ring-indigo-50 shrink-0",children:y.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900 truncate mb-1",children:y.name}),a.jsxs("p",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest truncate",children:[y.role," @ ",g.find(_e=>_e.id===y.companyId)?.name||"Direct Contact"]}),a.jsx("div",{className:"flex gap-2 mt-4",children:ce?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:ga,disabled:Q,className:"px-4 py-2 bg-indigo-600 border border-indigo-600 rounded-xl text-xs font-black uppercase tracking-widest text-white hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:Q?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"})," Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-3.5 h-3.5"})," Save Changes"]})}),a.jsxs("button",{onClick:()=>{Le(!1),He({...y})},disabled:Q,className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-slate-300 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(cr,{className:"w-3.5 h-3.5"})," Cancel"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{He({...y}),Le(!0)},className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-indigo-300 transition-all flex items-center gap-2",children:[a.jsx(K_,{className:"w-3.5 h-3.5"})," Edit Profile"]}),a.jsx("a",{href:`mailto:${y.email}`,className:"p-2.5 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-200",children:a.jsx(gi,{className:"w-4 h-4"})}),y.linkedin&&a.jsx("a",{href:y.linkedin,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-[#0077b5] text-white rounded-xl hover:bg-[#006da5] transition-all shadow-lg shadow-blue-100",children:a.jsx(V0,{className:"w-4 h-4"})})]})})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-200 w-fit mt-8",children:[{id:"details",label:"Overview",icon:a.jsx(a0,{className:"w-3.5 h-3.5"})},{id:"notes",label:"Strategic Context",icon:a.jsx(Ga,{className:"w-3.5 h-3.5"})},{id:"activity",label:"History",icon:a.jsx(rf,{className:"w-3.5 h-3.5"})}].map(_e=>a.jsxs("button",{onClick:()=>{fe(_e.id),Le(!1)},className:`flex items-center gap-2 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${Fe===_e.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[_e.icon," ",_e.label]},_e.id))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[Fe==="details"&&a.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:ce?a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Full Legal Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{required:!0,type:"text",value:le.name||"",onChange:_e=>He({...le,name:_e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Professional Role"}),a.jsx("input",{type:"text",value:le.role||"",onChange:_e=>He({...le,role:_e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Linked Organization"}),a.jsxs("select",{value:le.companyId||"",onChange:_e=>He({...le,companyId:_e.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"No Organization"}),g.map(_e=>a.jsx("option",{value:_e.id,children:_e.name},_e.id))]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-200 space-y-6",children:[a.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-200 pb-2",children:"Communication Registry"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Enterprise Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{required:!0,type:"email",value:le.email||"",onChange:_e=>He({...le,email:_e.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Mobile Contact"}),a.jsx("input",{type:"tel",value:le.phone||"",onChange:_e=>He({...le,phone:_e.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"LinkedIn Intelligence URL"}),a.jsx("input",{type:"url",value:le.linkedin||"",onChange:_e=>He({...le,linkedin:_e.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Contact Channel"}),a.jsx(gi,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),a.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:y.email}),a.jsx("p",{className:"text-[10px] text-indigo-500 font-bold uppercase mt-2",children:"Verified Enterprise Mail"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Voice Registry"}),a.jsx(Tj,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),a.jsx("p",{className:"text-sm font-black text-slate-900",children:y.phone||"Registry Pending"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-2",children:"Direct Terminal"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(gd,{className:"w-4 h-4 text-indigo-500"})," Account Context"]}),a.jsxs("div",{className:"p-6 bg-white border border-slate-100 rounded-[36px] shadow-sm flex items-center gap-5 hover:border-indigo-300 transition-all group",children:[a.jsx(Qs,{src:g.find(_e=>_e.id===y.companyId)?.logo,className:"w-16 h-16 border-2 border-slate-50",fallbackText:"C",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-lg text-slate-900 leading-none mb-1 group-hover:text-indigo-600 transition-colors",children:g.find(_e=>_e.id===y.companyId)?.name||"Independent Partner"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase",children:g.find(_e=>_e.id===y.companyId)?.industry||"Uncategorized"}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),a.jsx("span",{className:"text-[10px] text-indigo-500 font-black uppercase",children:"Primary Stakeholder"})]})]}),a.jsx("button",{className:"p-3 text-indigo-600 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all",children:a.jsx(Ti,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Gi,{className:"w-4 h-4 text-amber-500"})," Intelligence Summary"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center gap-3",children:[a.jsx(Kg,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase",children:"Influence"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Decision Maker"})]})]}),a.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-2xl border border-blue-100 flex items-center gap-3",children:[a.jsx(Xv,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Network"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Executive Hub"})]})]})]})]})]})}),Fe==="notes"&&a.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Strategic Context & Notes",y.notes&&y.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:y.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{rows:4,value:re,onChange:Cr,onBlur:()=>setTimeout(()=>Je(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add strategic context, decision-making patterns, or meeting insights... (Use @ to mention users)"}),Ge&&It.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(rx,{className:"w-3 h-3"}),"Mention User"]}),It.map(_e=>a.jsxs("button",{onClick:()=>kn(_e),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:_e.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:_e.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:_e.email})]})]},_e.id))]})})]}),a.jsx("button",{onClick:Pn,disabled:ye||!re.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ye?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Iu,{className:"w-4 h-4"}),"Send"]})})]}),y.legacyNotes&&a.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(a0,{className:"w-4 h-4 text-amber-600"}),a.jsx("p",{className:"text-xs font-bold text-amber-900 uppercase tracking-wider",children:"Legacy Notes"})]}),a.jsx("p",{className:"text-sm text-amber-800 leading-relaxed italic",children:y.legacyNotes})]}),a.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:y.notes&&y.notes.length>0?[...y.notes].reverse().map(_e=>{const Yt=l?.role==="Admin"||_e.userId===l?.id;return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:_e.userName?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:_e.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(_e.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Yt&&a.jsx("button",{onClick:()=>ct(_e.id),disabled:Ce===_e.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Ce===_e.id?a.jsx(jt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),_e.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Dt(_e.text)})]},_e.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add strategic insights above"})]})})]}),Fe==="activity"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Operational Engagement Timeline"}),a.jsxs("button",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-3 py-1.5 rounded-xl hover:bg-slate-200 transition-all flex items-center gap-1.5",children:[a.jsx(MB,{className:"w-3 h-3"})," Audit Log"]})]}),a.jsxs("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-indigo-600 shadow-xl flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),a.jsx("p",{className:"text-[10px] font-black text-indigo-600 uppercase mb-1 tracking-widest",children:"Digital Touchpoint  Yesterday"}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Enterprise Email Receipt"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Confirmed receipt of Logistics Transformation Proposal V3. Stakeholder requested EMEA regional review by Friday."})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Registry Update  Last Week"}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Registry Association Linked"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Manually associated with the 'Q4 Global Logistics Consolidation' opportunity by Alex Rivera (Admin)."})]})]})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>ue(y),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[28px] transition-all group shrink-0 active:scale-95",children:a.jsx(Br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>{v(null),Le(!1)},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[28px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(Kg,{className:"w-5 h-5"})," Save"]})]})]})]}),ve&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Company?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. All associated contacts, deals, and projects will be affected."})]})]}),a.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Qs,{src:ve.logo,fallbackText:ve.name,className:"w-10 h-10 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:ve.name}),a.jsx("p",{className:"text-xs text-slate-500",children:ve.industry})]})]})})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Ee(null),disabled:Pe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>ca(ve.id),disabled:Pe,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Pe?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Company"})]})]})}),pe&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Contact?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The contact will be permanently removed from the enterprise registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-lg border border-indigo-100",children:pe.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:pe.name}),a.jsx("p",{className:"text-xs text-slate-500",children:pe.email}),pe.role&&a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:pe.role})]})]}),g.find(_e=>_e.id===pe.companyId)&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[a.jsx(gd,{className:"w-4 h-4 text-slate-400"}),a.jsx("p",{className:"text-xs font-bold text-slate-600",children:g.find(_e=>_e.id===pe.companyId)?.name})]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ue(null),disabled:Be,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>da(pe.id),disabled:Be,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Be?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Contact"})]})]})}),bt&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",bt==="companies"?mt.length:Re.length," ",bt==="companies"?"Compan":"Contact",bt==="companies"?mt.length>1?"ies":"y":Re.length>1?"s":"","?"]}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["This action cannot be undone. ",bt==="companies"?"All associated contacts, deals, and projects will be affected.":"The contacts will be permanently removed from the enterprise registry."]})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[(bt==="companies"?g.filter(_e=>mt.includes(_e.id)):N.filter(_e=>Re.includes(_e.id))).slice(0,5).map(_e=>a.jsx("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:bt==="companies"?a.jsxs(a.Fragment,{children:[a.jsx(Qs,{src:_e.logo,fallbackText:_e.name,className:"w-8 h-8 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:_e.name}),a.jsx("p",{className:"text-[10px] text-slate-500",children:_e.industry})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-xs uppercase",children:_e.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:_e.name}),a.jsx("p",{className:"text-[10px] text-slate-500",children:_e.email})]})]})},_e.id)),(bt==="companies"?mt.length:Re.length)>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",(bt==="companies"?mt.length:Re.length)-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Nr(null),disabled:bt==="companies"?ut:pr,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>{bt==="companies"?Zt():zn()},disabled:bt==="companies"?ut:pr,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:(bt==="companies"?ut:pr)?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${bt==="companies"?mt.length:Re.length} ${bt==="companies"?"Compan":"Contact"}${bt==="companies"?mt.length>1?"ies":"y":Re.length>1?"s":""}`})]})]})}),kr&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(s0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>Gr(null),disabled:Ut===kr,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:xr,disabled:Ut===kr,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ut===kr?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Br,{className:"w-4 h-4"}),"Delete"]})})]})]})}),Ke&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(s0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>ct(null),disabled:Ce===Ke,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:nr,disabled:Ce===Ke,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ce===Ke?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Br,{className:"w-4 h-4"}),"Delete"]})})]})]})}),vr&&a.jsx(lse,{onClose:()=>Ur(!1),onSuccess:()=>{Ur(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""}),sn&&a.jsx(cse,{onClose:()=>En(!1),onSuccess:()=>{En(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:l?.id||""})]})},c8=[{id:"sales",name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]},{id:"ops",name:"Operations Flow",type:"operations",stages:["Order Received","Processing","In Transit","Delivered"]}],sie=({onNavigate:e,onNewDeal:t,currentUser:r})=>{const{showSuccess:n,showError:s,showInfo:i}=Ea(),[o,l]=z.useState([]),[c,u]=z.useState([]),[f,d]=z.useState([]),[m,p]=z.useState([]),[y,v]=z.useState(!0),[g,b]=z.useState(null),[N,j]=z.useState("overview"),[w,S]=z.useState(!1),[P,A]=z.useState(null),[T,I]=z.useState(null),[B,E]=z.useState(""),[C,M]=z.useState(null),[q,G]=z.useState(!1),[Z,te]=z.useState(!1),[ne,J]=z.useState(!1),[ee,H]=z.useState({title:"",companyId:"",value:"",currency:xi,stage:"Discovery",ownerId:"",expectedCloseDate:"",description:""}),[O,R]=z.useState([]),[W,U]=z.useState(!1),[K,oe]=z.useState(!1),[he,ie]=z.useState([]),[ce,Le]=z.useState(!1),[le,He]=z.useState([]),[Fe,fe]=z.useState(""),[Q]=z.useState("sales"),[we,ve]=z.useState(!1),[Ee,pe]=z.useState(!1),[ue,Pe]=z.useState(!0),[Ne,Be]=z.useState(!1),[nt,mt]=z.useState(null),[kt,Re]=z.useState(""),[gt,ut]=z.useState(""),lt=le.find(Xe=>Xe.id===Fe)||null,[pr,tr]=z.useState(null),ft=async()=>{try{Pe(!0);const Wt=((await qP())?.data||[]).filter(re=>re.type==="sales");if(Wt.length===0)try{const re=await $P({name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});re?.data?.id&&await fv(re.data.id,{isActive:!0});const Ae=((await qP())?.data||[]).filter(Oe=>Oe.type==="sales");He(Ae);const Ce=Ae.find(Oe=>Oe.isActive)||Ae[0];Ce&&fe(Ce.id)}catch(re){console.error("[PIPELINE] Failed to create default sales pipeline:",re);const me=c8.filter(ye=>ye.type==="sales");He(me),me.length>0&&fe(me[0].id)}else{He(Wt);const re=Wt.find(me=>me.isActive)||Wt[0];re&&fe(re.id)}}catch(Xe){console.error("[PIPELINE] Failed to fetch pipelines:",Xe);const wt=c8.filter(Wt=>Wt.type==="sales");He(wt),wt.length>0&&fe(wt[0].id)}finally{Pe(!1)}};z.useEffect(()=>{ft()},[]);const $t=async()=>{v(!0);try{const Xe=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,[wt,Wt,re,me]=await Promise.all([Jy(Xe),Cd(),Ed(),fg()]),Ae=(Array.isArray(wt)?wt:wt?.data||[]).filter(Ce=>Ce.pipelineType?Ce.pipelineType==="sales":!["Order Received","Processing","In Transit","Delivered"].includes(Ce.stage));l(Ae),u(Wt?.data||[]),d(re?.data||[]),p(me?.data||[])}catch{s("Failed to load pipeline data")}finally{v(!1)}};z.useEffect(()=>{$t()},[r,Q]),z.useEffect(()=>{const Xe=()=>$t();return window.addEventListener("refresh-pipeline",Xe),()=>window.removeEventListener("refresh-pipeline",Xe)},[]);const er=(Xe,wt)=>{tr(wt),Xe.dataTransfer.setData("dealId",wt)},qe=async(Xe,wt)=>{Xe.preventDefault();const Wt=Xe.dataTransfer.getData("dealId"),re=o.find(me=>me.id===Wt);if(!(!re||re.stage===wt))try{await uv(Wt,{stage:wt,pipelineType:"sales"}),l(me=>me.map(ye=>ye.id===Wt?{...ye,stage:wt}:ye)),n(`Deal moved to ${wt}`),re.ownerId&&re.ownerId!==r?.id&&await Fp({userId:re.ownerId,type:"deal",title:"Deal Advanced",message:`The deal "${re.title}" was moved to ${wt}.`,link:"/?tab=pipeline"})}catch{s("Failed to move deal")}finally{tr(null)}},bt=async()=>{if(!(!kt.trim()||!Fe||Ne))try{Be(!0);const Xe=le.find(Wt=>Wt.id===Fe);if(!Xe)return;const wt=[...Xe.stages,kt.trim()];await fv(Fe,{stages:wt}),He(Wt=>Wt.map(re=>re.id===Fe?{...re,stages:wt}:re)),Re(""),n("Stage added successfully")}catch(Xe){s(Xe.message||"Failed to add stage")}finally{Be(!1)}},Nr=async Xe=>{if(Fe)try{const wt=le.find(re=>re.id===Fe);if(!wt)return;const Wt=wt.stages.filter((re,me)=>me!==Xe);await fv(Fe,{stages:Wt}),He(re=>re.map(me=>me.id===Fe?{...me,stages:Wt}:me)),n("Stage removed successfully")}catch(wt){s(wt.message||"Failed to remove stage")}},rr=async()=>{if(gt.trim())try{const Xe=await $P({name:gt.trim(),type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});Xe?.data&&(await ft(),fe(Xe.data.id),ut(""),ve(!1),n("Sales pipeline created successfully"))}catch(Xe){s(Xe.message||"Failed to create pipeline")}},Lr=async Xe=>{try{const wt=le.find(Wt=>Wt.id===Xe);if(!wt)return;await fv(Xe,{isActive:!0}),fe(Xe),await ft(),await $t(),n(`Switched to ${wt.name}`)}catch(wt){s(wt.message||"Failed to switch pipeline")}},Er=async Xe=>{G(!0);try{await RP(Xe),l(wt=>wt.filter(Wt=>Wt.id!==Xe)),g?.id===Xe&&b(null),M(null),n("Opportunity removed from pipeline")}catch(wt){s(wt.message||"Failed to delete opportunity")}finally{G(!1)}},or=()=>{O.length===o.length?R([]):R(o.map(Xe=>Xe.id))},Ut=async()=>{U(!0);try{const Xe=[...O];await Promise.all(Xe.map(wt=>RP(wt))),l(wt=>wt.filter(Wt=>!Xe.includes(Wt.id))),g&&Xe.includes(g.id)&&b(null),R([]),oe(!1),n(`Successfully deleted ${Xe.length} opportunit${Xe.length>1?"ies":"y"}`)}catch(Xe){s(Xe.message||"Failed to delete opportunities")}finally{U(!1)}},wr=async Xe=>{if(!g)return;if(g.stakeholderIds?.includes(Xe)){s("Stakeholder already linked");return}A(Xe);const wt=[...g.stakeholderIds||[],Xe];try{await uv(g.id,{stakeholderIds:wt});const Wt={...g,stakeholderIds:wt};b(Wt),l(re=>re.map(me=>me.id===g.id?Wt:me)),S(!1),E(""),n("Stakeholder linked to opportunity")}catch{s("Link failed")}finally{A(null)}},kr=c.find(Xe=>Xe.id===g?.companyId),Gr=f.find(Xe=>Xe.id===g?.ownerId),hn=m.filter(Xe=>g?.stakeholderIds?.includes(Xe.id)),On=m.filter(Xe=>!g?.stakeholderIds?.includes(Xe.id)&&(Xe.name.toLowerCase().includes(B.toLowerCase())||Xe.email.toLowerCase().includes(B.toLowerCase())));z.useEffect(()=>{g&&!Z&&H({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||xi,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},[g]);const br=async()=>{if(g){if(!ee.title.trim()){s("Deal title is required");return}if(!ee.ownerId){s("Opportunity lead is required");return}J(!0);try{const Xe={title:ee.title.trim(),companyId:ee.companyId&&ee.companyId.trim()!==""?ee.companyId:null,value:parseFloat(ee.value)||0,currency:ee.currency||xi,stage:ee.stage,pipelineType:"sales",ownerId:ee.ownerId,expectedCloseDate:ee.expectedCloseDate&&ee.expectedCloseDate.trim()!==""?ee.expectedCloseDate:null,description:ee.description.trim()||null};await uv(g.id,Xe);const wt={...g,...Xe};l(Wt=>Wt.map(re=>re.id===g.id?wt:re)),b(wt),te(!1),n("Deal updated successfully")}catch(Xe){s(Xe.message||"Failed to update deal")}finally{J(!1)}}},Yn=async()=>{if(!(!g||N!=="activity")){Le(!0);try{const Xe=await D3("deal",g.id);ie(Xe?.data||[])}catch(Xe){console.error("[PIPELINE] Failed to fetch deal activities:",Xe),ie([])}finally{Le(!1)}}};z.useEffect(()=>{g&&N==="activity"?Yn():ie([])},[g?.id,N]);const on=()=>{if(!g)return[];const Xe=[];return g.createdAt&&Xe.push({id:"created",type:"created",title:"Opportunity Created",description:`Deal "${g.title}" was created${Gr?` by ${Gr.name}`:""}`,date:g.createdAt,icon:a.jsx(Nn,{className:"w-4 h-4"}),color:"indigo"}),Xe.push({id:"stage",type:"stage",title:`Current Stage: ${g.stage}`,description:`Opportunity is currently in the ${g.stage} stage`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:a.jsx(nf,{className:"w-4 h-4"}),color:g.stage==="Won"?"emerald":g.stage==="Lost"?"red":"blue"}),g.value>0&&Xe.push({id:"value",type:"value",title:`Deal Value: ${Zd(g.value,g.currency)}`,description:`Gross contract revenue for this opportunity: ${Zd(g.value,g.currency)}`,date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:a.jsx(df,{className:"w-4 h-4"}),color:"emerald"}),g.expectedCloseDate&&Xe.push({id:"close_date",type:"close_date",title:`Expected Close Date: ${g.expectedCloseDate}`,description:"Target date for closing this opportunity",date:g.expectedCloseDate,icon:a.jsx(ka,{className:"w-4 h-4"}),color:"amber"}),hn.length>0&&Xe.push({id:"stakeholders",type:"stakeholder",title:`${hn.length} Stakeholder${hn.length>1?"s":""} Linked`,description:hn.map(wt=>wt.name).join(", "),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:a.jsx(e0,{className:"w-4 h-4"}),color:"purple"}),g.description&&Xe.push({id:"description",type:"description",title:"Strategic Context Added",description:g.description.substring(0,100)+(g.description.length>100?"...":""),date:g.updatedAt||g.createdAt||new Date().toISOString(),icon:a.jsx(fo,{className:"w-4 h-4"}),color:"slate"}),he.forEach(wt=>{wt.activityType==="email_linked"&&Xe.push({id:wt.id||`email-${wt.emailId}`,type:"email_linked",title:wt.title||"Email Linked",description:wt.description||`Email "${wt.emailSubject||"Untitled"}" from ${wt.emailSender||"Unknown"}`,date:wt.createdAt,icon:a.jsx(gi,{className:"w-4 h-4"}),color:"indigo",emailId:wt.emailId})}),Xe.sort((wt,Wt)=>new Date(Wt.date).getTime()-new Date(wt.date).getTime())};return a.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500 relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center shrink-0 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl shadow-sm hover:border-indigo-300 transition-all font-bold",children:[a.jsx(Cj,{className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-slate-900",children:lt?.name||"Loading..."}),a.jsx(hl,{className:"w-4 h-4 text-slate-400"})]}),a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-slate-100 rounded-2xl shadow-xl z-50 overflow-hidden opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all",children:[le.length>0?le.map(Xe=>a.jsxs("button",{onClick:()=>Lr(Xe.id),className:`w-full px-4 py-3 text-left text-sm font-bold flex items-center justify-between hover:bg-indigo-50 transition-colors ${Fe===Xe.id?"text-indigo-600":"text-slate-600"}`,children:[Xe.name," ",Fe===Xe.id&&a.jsx(kd,{className:"w-4 h-4"})]},Xe.id)):a.jsx("div",{className:"px-4 py-3 text-sm text-slate-400",children:"No pipelines available"}),a.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:a.jsxs("button",{onClick:()=>ve(!0),className:"w-full text-xs text-indigo-600 font-bold hover:text-indigo-700 flex items-center gap-2",children:[a.jsx(Nn,{className:"w-3 h-3"}),"Manage Pipelines"]})}),a.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:a.jsx("input",{type:"text",placeholder:"New Pipeline Name...",value:gt,onChange:Xe=>ut(Xe.target.value),onKeyDown:Xe=>Xe.key==="Enter"&&rr(),className:"w-full text-xs px-2 py-1.5 border border-slate-200 rounded-lg outline-none focus:ring-1 focus:ring-indigo-100"})})]})]}),a.jsxs("p",{className:"text-slate-400 text-xs hidden lg:block font-medium",children:["Tracking ",o.length," active opportunities"]})]}),a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[a.jsx("button",{onClick:()=>ve(!0),className:"p-2 border border-slate-200 bg-white text-slate-600 rounded-lg hover:bg-slate-50 shadow-sm transition-all",children:a.jsx(X_,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>t(),className:"flex-1 sm:flex-none px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all",children:[a.jsx(Nn,{className:"w-4 h-4"})," New Deal"]})]})]}),!y&&o.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:o.length>0&&O.length===o.length,onChange:or}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Opportunities"})]}),a.jsx("div",{className:"flex-1 min-h-0 flex gap-6 overflow-x-auto overflow-y-hidden pb-6 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-hide",children:y||ue||!lt?a.jsx("div",{className:"flex items-center justify-center w-full min-h-[400px]",children:a.jsx(jt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):lt.stages.map(Xe=>{const wt=o.filter(Wt=>Wt.stage===Xe);return a.jsxs("div",{onDragOver:Wt=>Wt.preventDefault(),onDrop:Wt=>qe(Wt,Xe),className:"flex flex-col min-h-0 w-[85vw] sm:w-72 lg:w-80 shrink-0 bg-slate-100/40 rounded-3xl p-4 border border-slate-200/50",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"font-black text-slate-900 text-xs uppercase tracking-widest",children:Xe}),a.jsx("span",{className:"text-[10px] bg-white text-slate-400 px-2 py-0.5 rounded-full border border-slate-200 font-bold",children:wt.length})]}),a.jsx(Nn,{onClick:()=>t(Xe),className:"w-4 h-4 text-slate-300 hover:text-indigo-600 cursor-pointer transition-colors"})]}),a.jsx("div",{className:"flex-1 min-h-0 space-y-4 overflow-y-auto pr-1",children:wt.map(Wt=>{const re=c.find(ye=>ye.id===Wt.companyId),me=O.includes(Wt.id);return a.jsxs("div",{onClick:()=>b(Wt),draggable:!0,onDragStart:ye=>er(ye,Wt.id),className:`bg-white p-5 rounded-2xl border ${me?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all cursor-move group active:scale-[0.98] relative ${pr===Wt.id?"opacity-30":""}`,children:[a.jsx("div",{className:"absolute top-3 right-3",onClick:ye=>ye.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:me,onChange:()=>R(ye=>me?ye.filter(Ae=>Ae!==Wt.id):[...ye,Wt.id])})}),a.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[a.jsx(Qs,{src:re?.logo,fallbackText:re?.name,className:"w-5 h-5 shrink-0 mt-0.5",isAvatar:!1}),a.jsx("h4",{className:"font-bold text-slate-900 text-sm group-hover:text-indigo-600 transition-colors break-words leading-tight flex-1 min-w-0",children:Wt.title})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:re?.name||"Independent"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-indigo-600 font-black text-xs",children:Zd(Wt.value,Wt.currency)}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:Wt.expectedCloseDate}),a.jsx("div",{className:"w-6 h-6 bg-slate-50 rounded-full flex items-center justify-center text-[8px] font-black text-slate-300 border border-slate-100 uppercase",children:"DE"})]})]})]},Wt.id)})})]},Xe)})}),g&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{b(null),S(!1)}}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[20px] flex items-center justify-center text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:a.jsx(ru,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[Z?a.jsx("input",{type:"text",value:ee.title,onChange:Xe=>H(wt=>({...wt,title:Xe.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-2xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Deal title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:g.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Z?a.jsx("select",{value:ee.stage,onChange:Xe=>H(wt=>({...wt,stage:Xe.target.value})),className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200 outline-none focus:ring-2 focus:ring-indigo-300",children:lt?.stages?.map(Xe=>a.jsx("option",{value:Xe,children:Xe},Xe))||[]}):a.jsx("span",{className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200",children:g.stage}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Opportunity ID: #",g.id.substring(0,8)]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Z?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{te(!1),H({title:g.title,companyId:g.companyId||"",value:g.value?g.value.toString():"",currency:g.currency||xi,stage:g.stage,ownerId:g.ownerId,expectedCloseDate:g.expectedCloseDate||"",description:g.description||""})},disabled:ne,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:br,disabled:ne||!ee.title.trim()||!ee.ownerId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ne?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>te(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(vc,{className:"w-4 h-4"}),"Edit Deal"]}),a.jsx("button",{onClick:()=>{b(null),S(!1),te(!1)},className:"p-3 hover:bg-white rounded-full text-slate-400 shadow-sm transition-all",children:a.jsx(cr,{className:"w-6 h-6"})})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-100 w-fit",children:[{id:"overview",label:"Overview",icon:a.jsx(a0,{className:"w-4 h-4"})},{id:"activity",label:"Timeline",icon:a.jsx(rf,{className:"w-4 h-4"})},{id:"stakeholders",label:"Stakeholders",icon:a.jsx(e0,{className:"w-4 h-4"})}].map(Xe=>a.jsxs("button",{onClick:()=>{j(Xe.id),S(!1),te(!1)},className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${N===Xe.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[Xe.icon," ",Xe.label]},Xe.id))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10 custom-scrollbar",children:[N==="overview"&&a.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[Z?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),a.jsx(Bm,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx("select",{value:ee.currency||xi,onChange:Xe=>H(wt=>({...wt,currency:Xe.target.value})),className:"px-4 py-3 text-sm font-bold bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 text-indigo-600 appearance-none min-w-[140px] h-[60px]",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236366f1" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px",height:"60px"},children:Mp.map(Xe=>a.jsxs("option",{value:Xe.code,children:[Xe.code," (",Xe.symbol,")"]},Xe.code))}),a.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-600 font-black text-xl pointer-events-none z-10",children:Xd(ee.currency||xi)}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:ee.value||"",onChange:Xe=>H(wt=>({...wt,value:Xe.target.value})),className:"w-full pl-10 pr-4 py-3 text-2xl font-black text-indigo-600 bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-400 placeholder:text-slate-300 h-[60px]",placeholder:"0",autoFocus:!1,style:{WebkitAppearance:"textfield",MozAppearance:"textfield",appearance:"textfield",color:"#4f46e5",fontSize:"1.5rem",fontWeight:"900",height:"60px"}})]})]})}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),a.jsx(ka,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("input",{type:"date",value:ee.expectedCloseDate,onChange:Xe=>H(wt=>({...wt,expectedCloseDate:Xe.target.value})),className:"text-xl font-black text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-4 focus:ring-indigo-100 w-full"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),a.jsx(Bm,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("h3",{className:"text-3xl font-black text-indigo-600",children:Zd(g.value,g.currency)}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),a.jsx(ka,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:g.expectedCloseDate||"Not set"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(gd,{className:"w-4 h-4"})," Account Association"]}),Z?a.jsxs("select",{value:ee.companyId,onChange:Xe=>H(wt=>({...wt,companyId:Xe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",children:[a.jsx("option",{value:"",children:"Independent/Direct"}),c.map(Xe=>a.jsx("option",{value:Xe.id,children:Xe.name},Xe.id))]}):a.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:border-indigo-300 transition-all group flex items-center gap-4",children:[a.jsx(Qs,{src:kr?.logo,className:"w-14 h-14",fallbackText:kr?.name||"A",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-slate-900",children:kr?.name||"Independent/Direct"}),a.jsx("p",{className:"text-xs text-indigo-500 font-bold",children:kr?.industry||"Uncategorized"})]}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:a.jsx(Ti,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(vy,{className:"w-4 h-4"})," Opportunity Lead"]}),Z?a.jsxs("select",{value:ee.ownerId,onChange:Xe=>H(wt=>({...wt,ownerId:Xe.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",required:!0,children:[a.jsx("option",{value:"",children:"Select Owner"}),f.map(Xe=>a.jsxs("option",{value:Xe.id,children:[Xe.name," (",Xe.role,")"]},Xe.id))]}):a.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center gap-4",children:[a.jsx(Qs,{src:Gr?.avatar,className:"w-14 h-14",fallbackText:Gr?.name||"U",isAvatar:!0}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-slate-900",children:Gr?.name||"Unassigned"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:Gr?.role||"Teammate"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(fo,{className:"w-4 h-4"})," Strategic Context"]}),Z?a.jsx("textarea",{value:ee.description,onChange:Xe=>H(wt=>({...wt,description:Xe.target.value})),rows:6,className:"w-full p-8 bg-slate-950 rounded-[40px] text-indigo-50 border-2 border-indigo-200 outline-none focus:ring-4 focus:ring-indigo-100 resize-none text-sm leading-relaxed italic",placeholder:"Enter strategic context and operational notes..."}):a.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-80 z-10 relative",children:g.description||"The logistics assessment phase is currently gathering data points to populate this strategic summary. No specific operational notes are archived yet."}),a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Digital Readiness & Proposal"}),a.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-[9px] font-black uppercase rounded-full border border-indigo-200 flex items-center gap-1",children:[a.jsx(Gi,{className:"w-2.5 h-2.5"})," AI Engine"]})]}),a.jsxs("div",{className:"p-6 border-2 border-dashed border-slate-200 rounded-[32px] flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:a.jsx(Ga,{className:"w-6 h-6"})}),a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Proposal Engine Coming Soon"}),a.jsx("p",{className:"text-xs text-slate-400 mb-6 max-w-xs",children:"Automated PDF generation and strategic roadmap visualization for this opportunity are in final audit."}),a.jsx("button",{onClick:()=>i("Proposal engine is currently in development."),className:"px-6 py-2.5 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-800 transition-all opacity-50 cursor-not-allowed",children:"Generate Proposal [LOCKED]"})]})]})]}),N==="activity"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[a.jsx(rf,{className:"w-4 h-4 text-indigo-500"})," Opportunity Timeline"]}),ce?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(jt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):(()=>{const Xe=on();return Xe.length===0?a.jsxs("div",{className:"py-20 bg-white border border-dashed border-slate-200 rounded-3xl text-center",children:[a.jsx(rf,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No timeline events available"})]}):a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-slate-200"}),a.jsx("div",{className:"space-y-6",children:Xe.map((wt,Wt)=>{const re=Ce=>{const Oe={indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",blue:"bg-blue-50 text-blue-600 border-blue-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",amber:"bg-amber-50 text-amber-600 border-amber-200",purple:"bg-purple-50 text-purple-600 border-purple-200",red:"bg-red-50 text-red-600 border-red-200",slate:"bg-slate-50 text-slate-600 border-slate-200"};return Oe[Ce]||Oe.slate},me=new Date(wt.date),ye=me.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Ae=me.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return a.jsxs("div",{className:"relative flex items-start gap-4",children:[a.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full border-2 ${re(wt.color)} flex items-center justify-center flex-shrink-0`,children:wt.icon}),a.jsx("div",{className:"flex-1 pb-6",children:a.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h4",{className:"font-black text-slate-900 text-sm",children:wt.title}),a.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap ml-4",children:[ye," ",Ae]})]}),a.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:wt.description}),wt.type==="email_linked"&&wt.emailId&&a.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${wt.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(Ti,{className:"w-3 h-3"})," View Email"]})]})})]},wt.id)})})]})})()]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-8 border-t border-slate-100",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Days in Pipeline"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:g.createdAt?Math.floor((new Date().getTime()-new Date(g.createdAt).getTime())/(1e3*60*60*24)):"N/A"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Stage"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:g.stage})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Stakeholders"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:hn.length})]})]})]}),N==="stakeholders"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Key Account Decision Makers"}),!w&&a.jsxs("button",{onClick:()=>S(!0),className:"flex items-center gap-2 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[a.jsx(Ru,{className:"w-3 h-3"})," Link Person"]})]}),w?a.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-[32px] animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Select Existing Contact"}),a.jsx("button",{onClick:()=>S(!1),className:"p-1 hover:bg-white rounded-lg",children:a.jsx(cr,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx(Sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search global registry...",value:B,onChange:Xe=>E(Xe.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs"})]}),a.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:On.length>0?On.map(Xe=>{const wt=P===Xe.id;return a.jsxs("button",{onClick:()=>wr(Xe.id),disabled:wt||!!P,className:"w-full p-4 bg-white border border-slate-100 rounded-2xl flex items-center gap-3 hover:border-indigo-400 hover:shadow-sm transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase group-hover:scale-105 transition-transform",children:Xe.name.charAt(0)}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:"font-bold text-xs text-slate-900 truncate",children:Xe.name}),a.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase truncate",children:Xe.role})]}),wt?a.jsx(jt,{className:"w-4 h-4 text-indigo-600 animate-spin"}):a.jsx(Nn,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600"})]},Xe.id)}):a.jsx("div",{className:"py-10 text-center text-xs text-slate-400",children:"No matching contacts found in CRM."})})]}):hn.length>0?a.jsx("div",{className:"grid grid-cols-1 gap-3",children:hn.map(Xe=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-3xl flex items-center justify-between hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 font-black text-lg",children:Xe.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:Xe.name}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:Xe.role})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(g){I(Xe.id);try{const wt=(g.stakeholderIds||[]).filter(re=>re!==Xe.id);await uv(g.id,{stakeholderIds:wt});const Wt={...g,stakeholderIds:wt};b(Wt),l(re=>re.map(me=>me.id===g.id?Wt:me)),n("Stakeholder removed")}catch{s("Failed to remove stakeholder")}finally{I(null)}}},disabled:T===Xe.id,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:T===Xe.id?a.jsx(jt,{className:"w-4 h-4 animate-spin text-red-500"}):a.jsx(Br,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600",children:a.jsx(_s,{className:"w-5 h-5"})})]})]},Xe.id))}):a.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[a.jsx(e0,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No stakeholders linked to this opportunity yet."})]})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>M(g),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[24px] transition-all group",children:a.jsx(Br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>i("Lifecycle management automated through digital registry."),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(bl,{className:"w-5 h-5"})," Confirm Strategic Deployment"]})]})]})]}),C&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Opportunity?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunity will be permanently removed from the pipeline."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(ru,{className:"w-5 h-5 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:C.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:C.stage}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),a.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",C.value.toLocaleString()]})]})]})]}),kr&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[a.jsx(Qs,{src:kr.logo,fallbackText:kr.name,className:"w-6 h-6",isAvatar:!1}),a.jsx("p",{className:"text-xs font-bold text-slate-600",children:kr.name})]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>M(null),disabled:q,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Er(C.id),disabled:q,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:q?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Opportunity"})]})]})}),O.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:O.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Xe=>{Xe.stopPropagation(),oe(!0)},disabled:W,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[W?a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>R([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(cr,{className:"w-5 h-5"})})]})]})}),K&&O.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",O.length," Opportunit",O.length>1?"ies":"y","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunities will be permanently removed from the pipeline."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Xe=>O.includes(Xe.id)).slice(0,5).map(Xe=>(c.find(wt=>wt.id===Xe.companyId),a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(ru,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Xe.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:Xe.stage}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),a.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",Xe.value.toLocaleString()]})]})]})]},Xe.id))),O.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",O.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>oe(!1),disabled:W,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Ut,disabled:W,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:W?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${O.length} Opportunit${O.length>1?"ies":"y"}`})]})]})}),Ee&&a.jsxs("div",{className:"fixed inset-0 z-[140] flex",children:[a.jsx("div",{className:"flex-1 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>pe(!1)}),a.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl animate-in slide-in-from-right duration-300 overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 flex items-center justify-between z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(X_,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Pipeline Settings"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Configure your pipeline stages"})]})]}),a.jsx("button",{onClick:()=>pe(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Sales Pipelines"}),a.jsx("div",{className:"space-y-2",children:le.map(Xe=>a.jsx("button",{onClick:()=>Lr(Xe.id),className:`w-full p-4 rounded-xl border-2 transition-all text-left ${Fe===Xe.id?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:Xe.name}),a.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[Xe.stages.length," stages"]})]}),Fe===Xe.id&&a.jsx(kd,{className:"w-5 h-5 text-indigo-600"})]})},Xe.id))})]}),lt&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stages"}),a.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[lt.stages.length," stages"]})]}),a.jsx("div",{className:"space-y-2",children:lt.stages.map((Xe,wt)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center text-xs font-black text-indigo-600",children:wt+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-bold text-sm text-slate-900",children:Xe}),a.jsxs("p",{className:"text-xs text-slate-400",children:[o.filter(Wt=>Wt.stage===Xe).length," deals"]})]})]},Xe))})]}),a.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Bm,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h3",{className:"font-black text-slate-900",children:"Pipeline Overview"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Deals"}),a.jsx("p",{className:"text-2xl font-black text-slate-900 mt-1",children:o.length})]}),a.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Value"}),a.jsxs("p",{className:"text-lg font-black text-slate-900 mt-1",children:["$",o.reduce((Xe,wt)=>Xe+(wt.value||0),0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>{pe(!1),ve(!0)},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[a.jsx(Cj,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:"Edit Pipeline"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Add or remove stages"})]}),a.jsx(_s,{className:"w-5 h-5 text-slate-300 ml-auto"})]}),a.jsxs("button",{onClick:()=>{pe(!1),$t(),n("Pipeline refreshed")},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[a.jsx(bd,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:"Refresh Data"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Reload all deals"})]}),a.jsx(_s,{className:"w-5 h-5 text-slate-300 ml-auto"})]})]})]})]})]})]}),we&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Pipeline Configuration"}),a.jsx("button",{onClick:()=>ve(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Select Pipeline"}),a.jsx("div",{className:"space-y-2",children:le.map(Xe=>a.jsx("button",{onClick:()=>Lr(Xe.id),className:`w-full p-3 rounded-xl border-2 text-left ${Fe===Xe.id?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:a.jsx("p",{className:"font-bold",children:Xe.name})},Xe.id))})]}),lt&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Edit Stages"}),a.jsx("div",{className:"space-y-2",children:lt.stages.map((Xe,wt)=>a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[a.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1",children:Xe}),a.jsx("button",{onClick:()=>Nr(wt),disabled:nt!==null,className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:nt===wt?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(Br,{className:"w-4 h-4"})})]},wt))}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("input",{type:"text",placeholder:"New stage name...",value:kt,onChange:Xe=>Re(Xe.target.value),onKeyDown:Xe=>{Xe.key==="Enter"&&kt.trim()&&!Ne&&bt()},disabled:Ne,className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),a.jsx("button",{onClick:bt,disabled:Ne||!kt.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:Ne?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Adding..."})]}):"Add"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Create New Sales Pipeline"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Pipeline name...",value:gt,onChange:Xe=>ut(Xe.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-xl text-sm"}),a.jsx("button",{onClick:rr,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm",children:"Create Sales Pipeline"})]})]})]}),a.jsx("div",{className:"p-6 border-t border-slate-100 flex justify-end",children:a.jsx("button",{onClick:()=>ve(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:"Done"})})]})})]})},xh={projects:e=>["projects",e],companies:["companies"],users:["users"],tasks:e=>["tasks",e],projectActivities:e=>["project-activities",e]},iie=e=>wc({queryKey:xh.projects(e||""),queryFn:async()=>e?(await Yp(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),oie=()=>wc({queryKey:xh.companies,queryFn:async()=>(await Cd()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),lie=()=>wc({queryKey:xh.users,queryFn:async()=>(await Ed()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),cie=e=>wc({queryKey:xh.tasks(e||""),queryFn:async()=>e?(await Qy(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),uie=e=>wc({queryKey:xh.projectActivities(e||""),queryFn:async()=>e?(await D3("project",e))?.data||[]:[],enabled:!!e,staleTime:1e4,refetchOnWindowFocus:!0}),die=()=>{const e=yi(),{showSuccess:t,showError:r}=Ea();return kl({mutationFn:async({id:n,data:s})=>await k7(n,s),onSuccess:async(n,s)=>{t("Project updated successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"}),e.refetchQueries({queryKey:xh.projectActivities(s.id),type:"active"})])},onError:n=>{console.error("Failed to update project:",n),r(n?.message||"Failed to update project")}})},fie=()=>{const e=yi(),{showSuccess:t,showError:r}=Ea();return kl({mutationFn:async n=>await S7(n),onSuccess:async()=>{t("Project deleted successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:n=>{console.error("Failed to delete project:",n),r(n?.message||"Failed to delete project")}})},hie=()=>{const e=yi(),{showSuccess:t,showError:r}=Ea();return kl({mutationFn:async({id:n,archived:s})=>await k7(n,{archived:s}),onSuccess:async(n,s)=>{t(s.archived?"Project archived successfully":"Project restored successfully"),await e.refetchQueries({queryKey:["projects"],type:"active"}),e.invalidateQueries({queryKey:xh.projectActivities(s.id)})},onError:n=>{console.error("Failed to archive/restore project:",n),r(n?.message||"Failed to update project")}})},pie=()=>{const e=yi(),{showSuccess:t,showError:r}=Ea();return kl({mutationFn:async n=>{await Promise.all(n.map(s=>S7(s)))},onSuccess:async(n,s)=>{t(`${s.length} project(s) deleted successfully`),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:n=>{console.error("Failed to bulk delete projects:",n),r(n?.message||"Failed to delete projects")}})},mie=({onNavigate:e,onCreateProject:t,currentUser:r})=>{const{showSuccess:n,showError:s}=Ea(),i=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:o=[],isLoading:l}=iie(i),{data:c=[]}=oie(),{data:u=[]}=lie(),{data:f=[]}=cie(i),[d,m]=z.useState(null),{data:p=[],isLoading:y}=uie(d?.id||null),[v,g]=z.useState("active"),b=l,N=die(),j=fie(),w=hie(),S=pie(),P=Ne=>{const Be=f.filter(mt=>mt.projectId===Ne);if(Be.length===0)return 0;const nt=Be.filter(mt=>mt.status==="Done").length;return Math.round(nt/Be.length*100)},[A,T]=z.useState(null),[I,B]=z.useState(null),[E,C]=z.useState(null),[M,q]=z.useState(null),[G,Z]=z.useState([]),[te,ne]=z.useState(!1),[J,ee]=z.useState(!1),[H,O]=z.useState(!1),[R,W]=z.useState(!1),[U,K]=z.useState(!1),[oe,he]=z.useState(""),[ie,ce]=z.useState({title:"",description:"",companyId:"",status:"Planning",engagement:"",startDate:"",endDate:""}),[Le,le]=z.useState(null),He=async Ne=>{if(o.find(nt=>nt.id===Ne)){B(Ne);try{await w.mutateAsync({id:Ne,archived:v==="active"}),C(null),d?.id===Ne&&m(null)}finally{B(null)}}},Fe=async Ne=>{T(Ne);try{await j.mutateAsync(Ne),q(null),d?.id===Ne&&m(null)}finally{T(null)}},fe=()=>{G.length===Pe.length?Z([]):Z(Pe.map(Ne=>Ne.id))},Q=async()=>{ne(!0);try{const Ne=[...G];await S.mutateAsync(Ne),Z([]),ee(!1),d&&Ne.includes(d.id)&&m(null),n(`Successfully deleted ${Ne.length} project${Ne.length>1?"s":""}`)}catch(Ne){s(Ne.message||"Failed to delete projects")}finally{ne(!1)}},we=Ne=>{if(!Ne)return"";try{const Be=new Date(Ne);if(isNaN(Be.getTime()))return"";const nt=Be.getFullYear(),mt=String(Be.getMonth()+1).padStart(2,"0"),kt=String(Be.getDate()).padStart(2,"0");return`${nt}-${mt}-${kt}`}catch{return""}},ve=Ne=>{m(Ne),ce({title:Ne.title,description:Ne.description||"",companyId:Ne.companyId||"",status:Ne.status,engagement:Ne.engagement||"",startDate:we(Ne.startDate),endDate:we(Ne.endDate)}),O(!1)},Ee=async()=>{if(d){if(!ie.title.trim()){s("Project title is required");return}W(!0);try{const Ne={title:ie.title.trim(),description:ie.description.trim(),status:ie.status,companyId:ie.companyId&&ie.companyId.trim()!==""?ie.companyId:null};await N.mutateAsync({id:d.id,data:Ne});const Be={...d,...Ne};m(Be),O(!1)}catch{}finally{W(!1)}}},pe=async Ne=>{if(d){W(!0);try{await N.mutateAsync({id:d.id,data:{status:Ne}});const Be={...d,status:Ne};m(Be),ce(nt=>({...nt,status:Ne}))}catch{}finally{W(!1)}}},ue=async(Ne,Be)=>{le(Ne);try{const nt=Be==="Done"?"Todo":"Done";await Y1(Ne,{status:nt}),setTasks(Re=>Re.map(gt=>gt.id===Ne?{...gt,status:nt}:gt));const mt=r?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,kt=await apiGetTasks(mt);setTasks(kt.data||[]),n(nt==="Done"?"Task marked as done":"Task marked as todo")}catch(nt){s(nt.message||"Failed to update task status")}finally{le(null)}},Pe=z.useMemo(()=>o.filter(Ne=>{const Be=Ne.archived===!0;return v==="archived"?Be:!Be}),[o,v]);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-24 relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Project Workspace"}),a.jsxs("div",{className:"flex gap-4 mt-2",children:[a.jsx("button",{onClick:()=>{g("active"),Z([])},className:`text-sm font-bold pb-1 transition-all ${v==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),a.jsxs("button",{onClick:()=>{g("archived"),Z([])},className:`text-sm font-bold pb-1 transition-all ${v==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archived (",o.filter(Ne=>Ne.archived).length,")"]})]})]}),a.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100",children:[a.jsx(Nn,{className:"w-4 h-4"})," Create Project"]})]}),!b&&Pe.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Pe.length>0&&G.length===Pe.length,onChange:fe}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Projects"})]}),b?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(jt,{className:"w-10 h-10 animate-spin text-indigo-600"})}):Pe.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white border border-dashed border-slate-300 rounded-[40px] text-center",children:[a.jsx(Gv,{className:"w-16 h-16 text-slate-200 mb-6"}),a.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:["No ",v," projects found"]}),a.jsx("p",{className:"text-slate-500 text-sm max-w-xs",children:"Start a new logistics transformation project to see milestones and tracking."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Pe.map(Ne=>{const Be=c.find(kt=>kt.id===Ne.companyId),nt=P(Ne.id),mt=G.includes(Ne.id);return a.jsxs("div",{onClick:kt=>{!Ne.archived&&!mt&&(kt.stopPropagation(),ve(Ne))},className:`bg-white rounded-3xl border ${mt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} overflow-hidden shadow-sm transition-all relative ${Ne.archived?"opacity-70 grayscale-[0.5]":"hover:border-indigo-300 hover:shadow-md cursor-pointer active:scale-[0.98] group"}`,children:[a.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-2",children:[a.jsx("button",{onClick:kt=>{kt.stopPropagation(),C(Ne)},className:"p-2 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-xl transition-all",title:v==="active"?"Archive":"Restore",children:v==="active"?a.jsx(fd,{className:"w-4 h-4"}):a.jsx(Kv,{className:"w-4 h-4"})}),a.jsx("button",{onClick:kt=>{kt.stopPropagation(),q(Ne)},className:"p-2 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl transition-all",children:a.jsx(Br,{className:"w-4 h-4"})}),a.jsx("div",{onClick:kt=>kt.stopPropagation(),className:`p-1.5 rounded-xl transition-all ${mt?"bg-indigo-50":"bg-slate-50 hover:bg-indigo-50/50"}`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:mt,onChange:()=>Z(kt=>mt?kt.filter(Re=>Re!==Ne.id):[...kt,Ne.id])})})]}),a.jsxs("div",{className:"p-7",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 mb-6 group-hover:scale-110 transition-transform",children:a.jsx(Zf,{className:"w-6 h-6"})}),a.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors truncate",children:Ne.title}),a.jsx("p",{className:"text-sm font-medium text-slate-400 mb-8 truncate",children:Be?.name||"Standalone Project"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[a.jsx("span",{className:"text-slate-400",children:"Implementation Progress"}),a.jsxs("span",{className:"text-indigo-600",children:[nt,"%"]})]}),a.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:a.jsx("div",{className:"bg-indigo-600 h-full transition-all duration-700",style:{width:`${nt}%`}})})]})]}),a.jsxs("div",{className:"bg-slate-50/50 px-7 py-4 border-t border-slate-100 flex justify-between items-center",children:[a.jsxs("span",{className:"text-[10px] font-black uppercase text-slate-600 tracking-wider flex items-center gap-2",children:[a.jsx(As,{className:"w-3.5 h-3.5"})," ",Ne.status]}),!Ne.archived&&a.jsx(_s,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Ne.id)})}),E&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:E.archived?a.jsx(Kv,{className:"w-6 h-6"}):a.jsx(fd,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:E.archived?"Restore Project?":"Archive Project?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:E.archived?"This will restore the project to active status.":"This will move the project to archive. You can restore it later."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:E.title}),a.jsx("p",{className:"text-xs text-slate-500",children:c.find(Ne=>Ne.id===E.companyId)?.name||"Standalone Project"})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>C(null),disabled:I===E.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>He(E.id),disabled:I===E.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:I===E.id?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),E.archived?"Restoring...":"Archiving..."]}):E.archived?"Restore Project":"Archive Project"})]})]})}),M&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Project?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The project and all its tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:M.title}),a.jsx("p",{className:"text-xs text-slate-500",children:c.find(Ne=>Ne.id===M.companyId)?.name||"Standalone Project"})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>q(null),disabled:A===M.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Fe(M.id),disabled:A===M.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:A===M.id?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Project"})]})]})}),G.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:G.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Ne=>{Ne.stopPropagation(),ee(!0)},disabled:te,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[te?a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>Z([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(cr,{className:"w-5 h-5"})})]})]})}),J&&G.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",G.length," Project",G.length>1?"s":"","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The projects and all their tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Ne=>G.includes(Ne.id)).slice(0,5).map(Ne=>{const Be=c.find(nt=>nt.id===Ne.companyId);return a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(Zf,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ne.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:Be?.name||"Standalone Project"})]})]},Ne.id)}),G.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",G.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ee(!1),disabled:te,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Q,disabled:te,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:te?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${G.length} Project${G.length>1?"s":""}`})]})]})}),d&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{!H&&!R&&(m(null),O(!1))}}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-3xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[a.jsx("button",{onClick:()=>{!H&&!R&&(m(null),O(!1))},className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",disabled:R,children:a.jsx(cr,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6 pr-12",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[24px] flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(Zf,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[H?a.jsxs("div",{children:[a.jsx("input",{type:"text",value:ie.title,onChange:Ne=>ce(Be=>({...Be,title:Ne.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Project name",required:!0}),a.jsxs("p",{className:"text-[9px] text-slate-400 mt-1 px-1",children:[a.jsx("span",{className:"text-red-500",children:"*"})," Required field"]})]}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:d.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${d.status==="Planning"?"bg-blue-50 text-blue-600 border-blue-200":d.status==="Active"?"bg-emerald-50 text-emerald-600 border-emerald-200":d.status==="On Hold"?"bg-amber-50 text-amber-600 border-amber-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:d.status}),a.jsx("span",{className:"text-xs text-slate-400",children:c.find(Ne=>Ne.id===d.companyId)?.name||"Standalone Project"})]})]})]}),a.jsx("div",{className:"flex gap-3",children:H?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{O(!1),ce({title:d.title,description:d.description||"",companyId:d.companyId||"",status:d.status,engagement:d.engagement||"",startDate:we(d.startDate),endDate:we(d.endDate)})},disabled:R,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Ee,disabled:R||!ie.title.trim()||!ie.engagement.trim()||!ie.startDate.trim()||!ie.endDate.trim(),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:R?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>O(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(vc,{className:"w-4 h-4"}),"Edit Project"]})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ks,{className:"w-4 h-4 text-indigo-500"})," Project Details"]}),a.jsx("div",{className:"space-y-4",children:H?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Engagement ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:ie.engagement,onChange:Ne=>ce(Be=>({...Be,engagement:Ne.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"e.g., Consulting, Implementation, Support",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Start Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:ie.startDate,onChange:Ne=>{if(ce(Be=>({...Be,startDate:Ne.target.value})),Ne.target.value&&ie.endDate){const Be=new Date(Ne.target.value),nt=new Date(ie.endDate);!isNaN(Be.getTime())&&!isNaN(nt.getTime())&&Be>=nt}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["End Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:ie.endDate,onChange:Ne=>{if(ce(Be=>({...Be,endDate:Ne.target.value})),ie.startDate&&Ne.target.value){const Be=new Date(ie.startDate),nt=new Date(Ne.target.value);!isNaN(Be.getTime())&&!isNaN(nt.getTime())&&Be>=nt}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),a.jsx("textarea",{value:ie.description,onChange:Ne=>ce(Be=>({...Be,description:Ne.target.value})),rows:4,className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Project description..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company"}),a.jsxs("select",{value:ie.companyId,onChange:Ne=>ce(Be=>({...Be,companyId:Ne.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-100",children:[a.jsx("option",{value:"",children:"Standalone Project"}),c.map(Ne=>a.jsx("option",{value:Ne.id,children:Ne.name},Ne.id))]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Name"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.title})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Engagement"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.engagement||""})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Start Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.startDate?new Date(d.startDate).toLocaleDateString():""})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"End Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.endDate?new Date(d.endDate).toLocaleDateString():""})]})]}),d.description&&a.jsx("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-2xl",children:a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:d.description})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Company"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:c.find(Ne=>Ne.id===d.companyId)?.name||"Standalone Project"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Progress"}),a.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[P(d.id),"%"]})]})]}),d.noteImage&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ga,{className:"w-4 h-4 text-indigo-500"})," Attached File"]}),d.noteImageMimeType?.includes("pdf")?a.jsx("div",{className:"p-5 bg-white border-2 border-slate-200 rounded-2xl hover:border-indigo-300 transition-all group",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center text-red-600 shrink-0",children:a.jsx(Ga,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:d.noteImageName||"Document.pdf"}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"PDF Document"})]}),a.jsxs("button",{onClick:()=>{const Ne=window.open();Ne&&Ne.document.write(`
                                        <html>
                                          <head>
                                            <title>${d.noteImageName||"Document.pdf"}</title>
                                            <style>
                                              body { margin: 0; padding: 0; }
                                              embed { width: 100vw; height: 100vh; }
                                            </style>
                                          </head>
                                          <body>
                                            <embed src="${d.noteImage}" type="application/pdf" width="100%" height="100%" />
                                          </body>
                                        </html>
                                      `)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[a.jsx(yd,{className:"w-4 h-4"}),"View PDF"]})]})}):a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:d.noteImage,alt:d.noteImageName||"Attachment",className:"w-full max-h-80 object-contain rounded-2xl border-2 border-slate-200 cursor-pointer hover:border-indigo-300 transition-all",onClick:()=>{he(d.noteImage||""),K(!0)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-2xl transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg",children:a.jsx(yd,{className:"w-5 h-5 text-indigo-600"})})})]})]})]})})]}),!H&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(As,{className:"w-4 h-4 text-indigo-500"})," Change Status"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Planning","Active","On Hold","Completed"].map(Ne=>a.jsxs("button",{onClick:()=>pe(Ne),disabled:R||d.status===Ne,className:`flex items-center gap-2 p-4 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all ${d.status===Ne?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[d.status===Ne?a.jsx(jn,{className:"w-4 h-4"}):a.jsx(vd,{className:"w-4 h-4"}),Ne]},Ne))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(HB,{className:"w-4 h-4 text-indigo-500"})," Related Tasks"]}),a.jsxs("button",{onClick:()=>{sessionStorage.setItem("selectedProjectId",d.id),e("tasks"),m(null)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View All Tasks",a.jsx(_s,{className:"w-3 h-3"})]})]}),(()=>{const Ne=f.filter(Be=>Be.projectId===d.id);return Ne.length===0?a.jsxs("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center",children:[a.jsx(Gv,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"No tasks found for this project"})]}):a.jsx("div",{className:"space-y-2",children:Ne.map(Be=>{const nt=u.find(kt=>kt.id===Be.assigneeId),mt=Le===Be.id;return a.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 hover:shadow-sm transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("button",{onClick:kt=>{kt.stopPropagation(),mt||ue(Be.id,Be.status)},disabled:mt,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:mt?a.jsx(jt,{className:"w-4 h-4 text-indigo-500 animate-spin"}):Be.status==="Done"?a.jsx(jn,{className:"w-4 h-4 text-emerald-500 hover:text-emerald-600 transition-colors"}):a.jsx(vd,{className:"w-4 h-4 text-slate-300 hover:text-indigo-500 transition-colors cursor-pointer"})}),a.jsx("p",{className:`text-sm font-bold ${Be.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Be.title})]}),Be.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 ml-6",children:Be.description}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 ml-6",children:[a.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase ${Be.priority==="High"?"bg-red-50 text-red-600":Be.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Be.priority}),a.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase",children:Be.status}),Be.dueDate&&a.jsxs("span",{className:"text-[9px] text-slate-400 font-bold flex items-center gap-1",children:[a.jsx(ka,{className:"w-3 h-3"}),Be.dueDate]})]})]}),nt&&a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600 text-xs font-black",children:nt.name.charAt(0)})})]})},Be.id)})})})()]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(rf,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),y?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(jt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):p.length===0?a.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[a.jsx(gi,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this project"})]}):a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:p.map((Ne,Be)=>{const nt=new Date(Ne.createdAt),kt=new Date().getTime()-nt.getTime(),Re=Math.floor(kt/(1e3*60*60*24));let gt="";Re===0?gt="Today":Re===1?gt="Yesterday":Re<7?gt=`${Re} days ago`:Re<30?gt=`${Math.floor(Re/7)} week${Math.floor(Re/7)>1?"s":""} ago`:gt=`${Math.floor(Re/30)} month${Math.floor(Re/30)>1?"s":""} ago`;const ut=Ne.activityType==="email_linked",lt=ut?"border-indigo-600":"border-slate-200",pr=ut?"bg-indigo-600":"bg-slate-300",tr=ut?"text-indigo-600":"text-slate-400";return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${lt} shadow-xl flex items-center justify-center`,children:ut?a.jsx(gi,{className:"w-4 h-4 text-indigo-600"}):a.jsx("div",{className:`w-2 h-2 rounded-full ${pr}`})}),a.jsxs("p",{className:`text-[10px] font-black ${tr} uppercase mb-1 tracking-widest`,children:[ut?"Email Linked":Ne.activityType||"Activity","  ",gt]}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:Ne.title||"Email Activity"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:Ne.description||Ne.title}),Ne.emailId&&a.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${Ne.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(Ti,{className:"w-3 h-3"})," View Email"]})]},Ne.id||Be)})})]})]}),a.jsx("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:a.jsxs("button",{onClick:()=>{!H&&!R&&(m(null),O(!1))},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",disabled:R,children:[a.jsx(jn,{className:"w-5 h-5"})," Close"]})})]})]}),U&&a.jsxs("div",{className:"fixed inset-0 z-[150] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>K(!1)}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:[a.jsx("button",{onClick:()=>K(!1),className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-10 backdrop-blur-sm",children:a.jsx(cr,{className:"w-6 h-6"})}),a.jsx("div",{className:"relative max-w-7xl max-h-[90vh] animate-in zoom-in-95 duration-300",children:a.jsx("img",{src:oe,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl",onClick:Ne=>Ne.stopPropagation()})})]})]})]})};var ey={};ey.version="0.18.5";var tM=1252,xie=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],U3={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},q3=function(e){xie.indexOf(e)!=-1&&(tM=U3[0]=e)};function gie(){q3(1252)}var Fu=function(e){q3(e)};function $3(){Fu(1200),gie()}function u8(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function vie(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function rM(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Dm=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?vie(e.slice(2)):t==254&&r==255?rM(e.slice(2)):t==65279?e.slice(1):e},mv=function(t){return String.fromCharCode(t)},d8=function(t){return String.fromCharCode(t)},$x,Yf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function zx(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0,u=0;u<e.length;)r=e.charCodeAt(u++),i=r>>2,n=e.charCodeAt(u++),o=(r&3)<<4|n>>4,s=e.charCodeAt(u++),l=(n&15)<<2|s>>6,c=s&63,isNaN(n)?l=c=64:isNaN(s)&&(c=64),t+=Yf.charAt(i)+Yf.charAt(o)+Yf.charAt(l)+Yf.charAt(c);return t}function bc(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var u=0;u<e.length;)i=Yf.indexOf(e.charAt(u++)),o=Yf.indexOf(e.charAt(u++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Yf.indexOf(e.charAt(u++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Yf.indexOf(e.charAt(u++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var Tn=(function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node})(),bf=(function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}})();function i0(e){return Tn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function f8(e){return Tn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var mc=function(t){return Tn?bf(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function eb(e){if(typeof ArrayBuffer>"u")return mc(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function v0(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function yie(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function z3(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return z3(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var Xi=Tn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:bf(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function bie(e){for(var t=[],r=0,n=e.length+250,s=i0(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=i0(65535),n=65530)}return t.push(s.slice(0,r)),Xi(t)}var wl=/\u0000/g,Lm=/[\u0001-\u0006]/g;function ip(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Mu(e,t){var r=""+e;return r.length>=t?r:Ms("0",t-r.length)+r}function H3(e,t){var r=""+e;return r.length>=t?r:Ms(" ",t-r.length)+r}function ty(e,t){var r=""+e;return r.length>=t?r:r+Ms(" ",t-r.length)}function wie(e,t){var r=""+Math.round(e);return r.length>=t?r:Ms("0",t-r.length)+r}function Nie(e,t){var r=""+e;return r.length>=t?r:Ms("0",t-r.length)+r}var h8=Math.pow(2,32);function zh(e,t){if(e>h8||e<-h8)return wie(e,t);var r=Math.round(e);return Nie(r,t)}function ry(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var p8=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],JN=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function jie(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Jr={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},m8={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},kie={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function ny(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,c=1,u=0,f=0,d=Math.floor(s);u<t&&(d=Math.floor(s),l=d*o+i,f=d*u+c,!(s-d<5e-8));)s=1/(s-d),i=o,o=l,c=u,u=f;if(f>t&&(u>t?(f=c,l=i):(f=u,l=o)),!r)return[0,n*l,f];var m=Math.floor(n*l/f);return[m,n*l-m*f,f]}function z0(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=Tie(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var nM=new Date(1899,11,31,0,0,0),Sie=nM.getTime(),_ie=new Date(1900,2,1,0,0,0);function aM(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=_ie&&(r+=1440*60*1e3),(r-(Sie+(e.getTimezoneOffset()-nM.getTimezoneOffset())*6e4))/(1440*60*1e3)}function W3(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function Aie(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function Eie(e){var t=e<0?12:11,r=W3(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function Cie(e){var t=W3(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function Hx(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=Eie(e):t===10?r=e.toFixed(10).substr(0,12):r=Cie(e),W3(Aie(r.toUpperCase()))}function ih(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):Hx(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return iu(14,aM(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function Tie(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function Oie(e,t,r,n){var s="",i=0,o=0,l=r.y,c,u=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,u=2;break;default:c=l%1e4,u=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,u=t.length;break;case 3:return JN[r.m-1][1];case 5:return JN[r.m-1][0];default:return JN[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,u=t.length;break;case 3:return p8[r.q][0];default:return p8[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,u=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,u=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,u=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Mu(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Mu(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}u=t.length===3?1:2;break;case 101:c=l,u=1;break}var f=u>0?Mu(c,u):"";return f}function Jf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var sM=/%/g;function Pie(e,t,r){var n=t.replace(sM,""),s=t.length-n.length;return lf(e,n,r*Math.pow(10,2*s))+Ms("%",s)}function Iie(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return lf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function iM(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+iM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,f){return c+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var oM=/# (\?+)( ?)\/( ?)(\d+)/;function Die(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?Ms(" ",e[1].length+1+e[4].length):H3(o,e[1].length)+e[2]+"/"+e[3]+Mu(l,e[4].length))}function Lie(e,t,r){return r+(t===0?"":""+t)+Ms(" ",e[1].length+2+e[4].length)}var lM=/^#*0*\.([0#]+)/,cM=/\).*[0#]/,uM=/\(###\) ###\\?-####/;function ml(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function x8(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function g8(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function Fie(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function Mie(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function Kc(e,t,r){if(e.charCodeAt(0)===40&&!t.match(cM)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Kc("n",n,r):"("+Kc("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Iie(e,t,r);if(t.indexOf("%")!==-1)return Pie(e,t,r);if(t.indexOf("E")!==-1)return iM(t,r);if(t.charCodeAt(0)===36)return"$"+Kc(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+zh(c,t.length);if(t.match(/^[#?]+$/))return s=zh(r,0),s==="0"&&(s=""),s.length>t.length?s:ml(t.substr(0,t.length-s.length))+s;if(i=t.match(oM))return Die(i,c,u);if(t.match(/^#+0+$/))return u+zh(c,t.length-t.indexOf("0"));if(i=t.match(lM))return s=x8(r,i[1].length).replace(/^([^\.]+)$/,"$1."+ml(i[1])).replace(/\.$/,"."+ml(i[1])).replace(/\.(\d*)$/,function(y,v){return"."+v+Ms("0",ml(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+x8(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Jf(zh(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Kc(e,t,-r):Jf(""+(Math.floor(r)+Fie(r,i[1].length)))+"."+Mu(g8(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return Kc(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=ip(Kc(e,t.replace(/[\\-]/g,""),r)),o=0,ip(ip(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<s.length?s.charAt(o++):y==="0"?"0":""}));if(t.match(uM))return s=Kc(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=ny(c,Math.pow(10,o)-1,!1),s=""+u,f=lf("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=ty(l[2],o),f.length<i[4].length&&(f=ml(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=ny(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?H3(l[1],o)+i[2]+"/"+i[3]+ty(l[2],o):Ms(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=zh(r,0),t.length<=s.length?s:ml(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var d=t.indexOf(".")-o,m=t.length-s.length-d;return ml(t.substr(0,d)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=g8(r,i[1].length),r<0?"-"+Kc(e,t,-r):Jf(Mie(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Mu(0,3-y.length):"")+y})+"."+Mu(o,i[1].length);switch(t){case"###,##0.00":return Kc(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var p=Jf(zh(c,0));return p!=="0"?u+p:"";case"###,###.00":return Kc(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return Kc(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function Rie(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return lf(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function Bie(e,t,r){var n=t.replace(sM,""),s=t.length-n.length;return lf(e,n,r*Math.pow(10,2*s))+Ms("%",s)}function dM(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+dM(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,u,f){return c+u+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function od(e,t,r){if(e.charCodeAt(0)===40&&!t.match(cM)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?od("n",n,r):"("+od("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return Rie(e,t,r);if(t.indexOf("%")!==-1)return Bie(e,t,r);if(t.indexOf("E")!==-1)return dM(t,r);if(t.charCodeAt(0)===36)return"$"+od(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),u=r<0?"-":"";if(t.match(/^00+$/))return u+Mu(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:ml(t.substr(0,t.length-s.length))+s;if(i=t.match(oM))return Lie(i,c,u);if(t.match(/^#+0+$/))return u+Mu(c,t.length-t.indexOf("0"));if(i=t.match(lM))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ml(i[1])).replace(/\.$/,"."+ml(i[1])),s=s.replace(/\.(\d*)$/,function(y,v){return"."+v+Ms("0",ml(i[1]).length-v.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return u+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return u+Jf(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+od(e,t,-r):Jf(""+r)+"."+Ms("0",i[1].length);if(i=t.match(/^#,#*,#0/))return od(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=ip(od(e,t.replace(/[\\-]/g,""),r)),o=0,ip(ip(t.replace(/\\/g,"")).replace(/[0#]/g,function(y){return o<s.length?s.charAt(o++):y==="0"?"0":""}));if(t.match(uM))return s=od(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=ny(c,Math.pow(10,o)-1,!1),s=""+u,f=lf("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=ty(l[2],o),f.length<i[4].length&&(f=ml(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=ny(c,Math.pow(10,o)-1,!0),u+(l[0]||(l[1]?"":"0"))+" "+(l[1]?H3(l[1],o)+i[2]+"/"+i[3]+ty(l[2],o):Ms(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:ml(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var d=t.indexOf(".")-o,m=t.length-s.length-d;return ml(t.substr(0,d)+s+t.substr(t.length-m))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+od(e,t,-r):Jf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(y){return"00,"+(y.length<3?Mu(0,3-y.length):"")+y})+"."+Mu(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var p=Jf(""+c);return p!=="0"?u+p:"";default:if(t.match(/\.[0#?]*$/))return od(e,t.slice(0,t.lastIndexOf(".")),r)+ml(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function lf(e,t,r){return(r|0)===r?od(e,t,r):Kc(e,t,r)}function Uie(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var fM=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Qp(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":ry(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(fM))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function qie(e,t,r,n){for(var s=[],i="",o=0,l="",c="t",u,f,d,m="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!ry(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(d=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(d);s[s.length]={t:"t",v:i},++o;break;case"\\":var p=e.charAt(++o),y=p==="("||p===")"?p:"t";s[s.length]={t:y,v:p},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(u==null&&(u=z0(t,r,e.charAt(o+1)==="2"),u==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||u==null&&(u=z0(t,r),u==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=m),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var v={t:l,v:l};if(u==null&&(u=z0(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(u!=null&&(v.v=u.H>=12?"P":"A"),v.t="T",m="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(u!=null&&(v.v=u.H>=12?"PM":"AM"),v.t="T",o+=5,m="h"):e.substr(o,5).toUpperCase()==="/"?(u!=null&&(v.v=u.H>=12?"":""),v.t="T",o+=5,m="h"):(v.t="t",++o),u==null&&v.t==="T")return"";s[s.length]=v,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(fM)){if(u==null&&(u=z0(t,r),u==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Qp(e)||(s[s.length]={t:"t",v:i}));break;case".":if(u!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var g=0,b=0,N;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=m,c="h",g<1&&(g=1);break;case"s":(N=s[o].v.match(/\.0+$/))&&(b=Math.max(b,N[0].length-1)),g<3&&(g=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",g<2&&(g=2));break;case"X":break;case"Z":g<1&&s[o].v.match(/[Hh]/)&&(g=1),g<2&&s[o].v.match(/[Mm]/)&&(g=2),g<3&&s[o].v.match(/[Ss]/)&&(g=3)}switch(g){case 0:break;case 1:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M),u.M>=60&&(u.M=0,++u.H);break;case 2:u.u>=.5&&(u.u=0,++u.S),u.S>=60&&(u.S=0,++u.M);break}var j="",w;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=Oie(s[o].t.charCodeAt(0),s[o].v,u,b),s[o].t="t";break;case"n":case"?":for(w=o+1;s[w]!=null&&((l=s[w].t)==="?"||l==="D"||(l===" "||l==="t")&&s[w+1]!=null&&(s[w+1].t==="?"||s[w+1].t==="t"&&s[w+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[w].v==="/"||s[w].v===" "&&s[w+1]!=null&&s[w+1].t=="?"));)s[o].v+=s[w].v,s[w]={v:"",t:";"},++w;j+=s[o].v,o=w-1;break;case"G":s[o].t="t",s[o].v=ih(t,r);break}var S="",P,A;if(j.length>0){j.charCodeAt(0)==40?(P=t<0&&j.charCodeAt(0)===45?-t:t,A=lf("n",j,P)):(P=t<0&&n>1?-t:t,A=lf("n",j,P),P<0&&s[0]&&s[0].t=="t"&&(A=A.substr(1),s[0].v="-"+s[0].v)),w=A.length-1;var T=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){T=o;break}var I=s.length;if(T===s.length&&A.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(w>=s[o].v.length-1?(w-=s[o].v.length,s[o].v=A.substr(w+1,s[o].v.length)):w<0?s[o].v="":(s[o].v=A.substr(0,w+1),w=-1),s[o].t="t",I=o);w>=0&&I<s.length&&(s[I].v=A.substr(0,w+1)+s[I].v)}else if(T!==s.length&&A.indexOf("E")===-1){for(w=A.indexOf(".")-1,o=T;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")-1:s[o].v.length-1,S=s[o].v.substr(f+1);f>=0;--f)w>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(S=A.charAt(w--)+S);s[o].v=S,s[o].t="t",I=o}for(w>=0&&I<s.length&&(s[I].v=A.substr(0,w+1)+s[I].v),w=A.indexOf(".")+1,o=T;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==T)){for(f=s[o].v.indexOf(".")>-1&&o===T?s[o].v.indexOf(".")+1:0,S=s[o].v.substr(0,f);f<s[o].v.length;++f)w<A.length&&(S+=A.charAt(w++));s[o].v=S,s[o].t="t",I=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(P=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=lf(s[o].t,s[o].v,P),s[o].t="t");var B="";for(o=0;o!==s.length;++o)s[o]!=null&&(B+=s[o].v);return B}var v8=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function y8(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function $ie(e,t){var r=Uie(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(v8),l=r[1].match(v8);return y8(t,o)?[n,r[0]]:y8(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function iu(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Jr)[e],n==null&&(n=r.table&&r.table[m8[e]]||Jr[m8[e]]),n==null&&(n=kie[e]||"General");break}if(ry(n,0))return ih(t,r);t instanceof Date&&(t=aM(t,r.date1904));var s=$ie(n,t);if(ry(s[1]))return ih(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return qie(s[1],t,r,s[0])}function cf(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Jr[r]==null){t<0&&(t=r);continue}if(Jr[r]==e){t=r;break}}t<0&&(t=391)}return Jr[t]=e,t}function tb(e){for(var t=0;t!=392;++t)e[t]!==void 0&&cf(e[t],t)}function Zp(){Jr=jie()}var zie={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},hM=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function Hie(e){var t=typeof e=="number"?Jr[e]:e;return t=t.replace(hM,"(\\d+)"),new RegExp("^"+t+"$")}function Wie(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(hM)||[]).forEach(function(d,m){var p=parseInt(r[m+1],10);switch(d.toLowerCase().charAt(0)){case"y":n=p;break;case"d":i=p;break;case"h":o=p;break;case"s":c=p;break;case"m":o>=0?l=p:s=p;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var u=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);u.length==7&&(u="0"+u),u.length==8&&(u="20"+u);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?u:n==-1&&s==-1&&i==-1?f:u+"T"+f}var Vie=(function(){var e={};e.version="1.2.0";function t(){for(var A=0,T=new Array(256),I=0;I!=256;++I)A=I,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,A=A&1?-306674912^A>>>1:A>>>1,T[I]=A;return typeof Int32Array<"u"?new Int32Array(T):T}var r=t();function n(A){var T=0,I=0,B=0,E=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(B=0;B!=256;++B)E[B]=A[B];for(B=0;B!=256;++B)for(I=A[B],T=256+B;T<4096;T+=256)I=E[T]=I>>>8^A[I&255];var C=[];for(B=1;B!=16;++B)C[B-1]=typeof Int32Array<"u"?E.subarray(B*256,B*256+256):E.slice(B*256,B*256+256);return C}var s=n(r),i=s[0],o=s[1],l=s[2],c=s[3],u=s[4],f=s[5],d=s[6],m=s[7],p=s[8],y=s[9],v=s[10],g=s[11],b=s[12],N=s[13],j=s[14];function w(A,T){for(var I=T^-1,B=0,E=A.length;B<E;)I=I>>>8^r[(I^A.charCodeAt(B++))&255];return~I}function S(A,T){for(var I=T^-1,B=A.length-15,E=0;E<B;)I=j[A[E++]^I&255]^N[A[E++]^I>>8&255]^b[A[E++]^I>>16&255]^g[A[E++]^I>>>24]^v[A[E++]]^y[A[E++]]^p[A[E++]]^m[A[E++]]^d[A[E++]]^f[A[E++]]^u[A[E++]]^c[A[E++]]^l[A[E++]]^o[A[E++]]^i[A[E++]]^r[A[E++]];for(B+=15;E<B;)I=I>>>8^r[(I^A[E++])&255];return~I}function P(A,T){for(var I=T^-1,B=0,E=A.length,C=0,M=0;B<E;)C=A.charCodeAt(B++),C<128?I=I>>>8^r[(I^C)&255]:C<2048?(I=I>>>8^r[(I^(192|C>>6&31))&255],I=I>>>8^r[(I^(128|C&63))&255]):C>=55296&&C<57344?(C=(C&1023)+64,M=A.charCodeAt(B++)&1023,I=I>>>8^r[(I^(240|C>>8&7))&255],I=I>>>8^r[(I^(128|C>>2&63))&255],I=I>>>8^r[(I^(128|M>>6&15|(C&3)<<4))&255],I=I>>>8^r[(I^(128|M&63))&255]):(I=I>>>8^r[(I^(224|C>>12&15))&255],I=I>>>8^r[(I^(128|C>>6&63))&255],I=I>>>8^r[(I^(128|C&63))&255]);return~I}return e.table=r,e.bstr=w,e.buf=S,e.str=P,e})(),Hr=(function(){var t={};t.version="1.2.1";function r(re,me){for(var ye=re.split("/"),Ae=me.split("/"),Ce=0,Oe=0,Ke=Math.min(ye.length,Ae.length);Ce<Ke;++Ce){if(Oe=ye[Ce].length-Ae[Ce].length)return Oe;if(ye[Ce]!=Ae[Ce])return ye[Ce]<Ae[Ce]?-1:1}return ye.length-Ae.length}function n(re){if(re.charAt(re.length-1)=="/")return re.slice(0,-1).indexOf("/")===-1?re:n(re.slice(0,-1));var me=re.lastIndexOf("/");return me===-1?re:re.slice(0,me+1)}function s(re){if(re.charAt(re.length-1)=="/")return s(re.slice(0,-1));var me=re.lastIndexOf("/");return me===-1?re:re.slice(me+1)}function i(re,me){typeof me=="string"&&(me=new Date(me));var ye=me.getHours();ye=ye<<6|me.getMinutes(),ye=ye<<5|me.getSeconds()>>>1,re.write_shift(2,ye);var Ae=me.getFullYear()-1980;Ae=Ae<<4|me.getMonth()+1,Ae=Ae<<5|me.getDate(),re.write_shift(2,Ae)}function o(re){var me=re.read_shift(2)&65535,ye=re.read_shift(2)&65535,Ae=new Date,Ce=ye&31;ye>>>=5;var Oe=ye&15;ye>>>=4,Ae.setMilliseconds(0),Ae.setFullYear(ye+1980),Ae.setMonth(Oe-1),Ae.setDate(Ce);var Ke=me&31;me>>>=5;var ct=me&63;return me>>>=6,Ae.setHours(me),Ae.setMinutes(ct),Ae.setSeconds(Ke<<1),Ae}function l(re){co(re,0);for(var me={},ye=0;re.l<=re.length-4;){var Ae=re.read_shift(2),Ce=re.read_shift(2),Oe=re.l+Ce,Ke={};Ae===21589&&(ye=re.read_shift(1),ye&1&&(Ke.mtime=re.read_shift(4)),Ce>5&&(ye&2&&(Ke.atime=re.read_shift(4)),ye&4&&(Ke.ctime=re.read_shift(4))),Ke.mtime&&(Ke.mt=new Date(Ke.mtime*1e3))),re.l=Oe,me[Ae]=Ke}return me}var c;function u(){return c||(c={})}function f(re,me){if(re[0]==80&&re[1]==75)return rr(re,me);if((re[0]|32)==109&&(re[1]|32)==105)return On(re,me);if(re.length<512)throw new Error("CFB file size "+re.length+" < 512");var ye=3,Ae=512,Ce=0,Oe=0,Ke=0,ct=0,Ge=0,Je=[],ze=re.slice(0,512);co(ze,0);var De=d(ze);switch(ye=De[0],ye){case 3:Ae=512;break;case 4:Ae=4096;break;case 0:if(De[1]==0)return rr(re,me);default:throw new Error("Major Version: Expected 3 or 4 saw "+ye)}Ae!==512&&(ze=re.slice(0,Ae),co(ze,28));var tt=re.slice(0,Ae);m(ze,ye);var pt=ze.read_shift(4,"i");if(ye===3&&pt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+pt);ze.l+=4,Ke=ze.read_shift(4,"i"),ze.l+=4,ze.chk("00100000","Mini Stream Cutoff Size: "),ct=ze.read_shift(4,"i"),Ce=ze.read_shift(4,"i"),Ge=ze.read_shift(4,"i"),Oe=ze.read_shift(4,"i");for(var It=-1,Mt=0;Mt<109&&(It=ze.read_shift(4,"i"),!(It<0));++Mt)Je[Mt]=It;var vr=p(re,Ae);g(Ge,Oe,vr,Ae,Je);var Ur=N(vr,Ke,Je,Ae);Ur[Ke].name="!Directory",Ce>0&&ct!==M&&(Ur[ct].name="!MiniFAT"),Ur[Je[0]].name="!FAT",Ur.fat_addrs=Je,Ur.ssz=Ae;var sn={},En=[],ls=[],vn=[];j(Ke,Ur,vr,En,Ce,sn,ls,ct),y(ls,vn,En),En.shift();var xa={FileIndex:ls,FullPaths:vn};return me&&me.raw&&(xa.raw={header:tt,sectors:vr}),xa}function d(re){if(re[re.l]==80&&re[re.l+1]==75)return[0,0];re.chk(q,"Header Signature: "),re.l+=16;var me=re.read_shift(2,"u");return[re.read_shift(2,"u"),me]}function m(re,me){var ye=9;switch(re.l+=2,ye=re.read_shift(2)){case 9:if(me!=3)throw new Error("Sector Shift: Expected 9 saw "+ye);break;case 12:if(me!=4)throw new Error("Sector Shift: Expected 12 saw "+ye);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+ye)}re.chk("0600","Mini Sector Shift: "),re.chk("000000000000","Reserved: ")}function p(re,me){for(var ye=Math.ceil(re.length/me)-1,Ae=[],Ce=1;Ce<ye;++Ce)Ae[Ce-1]=re.slice(Ce*me,(Ce+1)*me);return Ae[ye-1]=re.slice(ye*me),Ae}function y(re,me,ye){for(var Ae=0,Ce=0,Oe=0,Ke=0,ct=0,Ge=ye.length,Je=[],ze=[];Ae<Ge;++Ae)Je[Ae]=ze[Ae]=Ae,me[Ae]=ye[Ae];for(;ct<ze.length;++ct)Ae=ze[ct],Ce=re[Ae].L,Oe=re[Ae].R,Ke=re[Ae].C,Je[Ae]===Ae&&(Ce!==-1&&Je[Ce]!==Ce&&(Je[Ae]=Je[Ce]),Oe!==-1&&Je[Oe]!==Oe&&(Je[Ae]=Je[Oe])),Ke!==-1&&(Je[Ke]=Ae),Ce!==-1&&Ae!=Je[Ae]&&(Je[Ce]=Je[Ae],ze.lastIndexOf(Ce)<ct&&ze.push(Ce)),Oe!==-1&&Ae!=Je[Ae]&&(Je[Oe]=Je[Ae],ze.lastIndexOf(Oe)<ct&&ze.push(Oe));for(Ae=1;Ae<Ge;++Ae)Je[Ae]===Ae&&(Oe!==-1&&Je[Oe]!==Oe?Je[Ae]=Je[Oe]:Ce!==-1&&Je[Ce]!==Ce&&(Je[Ae]=Je[Ce]));for(Ae=1;Ae<Ge;++Ae)if(re[Ae].type!==0){if(ct=Ae,ct!=Je[ct])do ct=Je[ct],me[Ae]=me[ct]+"/"+me[Ae];while(ct!==0&&Je[ct]!==-1&&ct!=Je[ct]);Je[Ae]=-1}for(me[0]+="/",Ae=1;Ae<Ge;++Ae)re[Ae].type!==2&&(me[Ae]+="/")}function v(re,me,ye){for(var Ae=re.start,Ce=re.size,Oe=[],Ke=Ae;ye&&Ce>0&&Ke>=0;)Oe.push(me.slice(Ke*C,Ke*C+C)),Ce-=C,Ke=L0(ye,Ke*4);return Oe.length===0?Ft(0):Xi(Oe).slice(0,re.size)}function g(re,me,ye,Ae,Ce){var Oe=M;if(re===M){if(me!==0)throw new Error("DIFAT chain shorter than expected")}else if(re!==-1){var Ke=ye[re],ct=(Ae>>>2)-1;if(!Ke)return;for(var Ge=0;Ge<ct&&(Oe=L0(Ke,Ge*4))!==M;++Ge)Ce.push(Oe);g(L0(Ke,Ae-4),me-1,ye,Ae,Ce)}}function b(re,me,ye,Ae,Ce){var Oe=[],Ke=[];Ce||(Ce=[]);var ct=Ae-1,Ge=0,Je=0;for(Ge=me;Ge>=0;){Ce[Ge]=!0,Oe[Oe.length]=Ge,Ke.push(re[Ge]);var ze=ye[Math.floor(Ge*4/Ae)];if(Je=Ge*4&ct,Ae<4+Je)throw new Error("FAT boundary crossed: "+Ge+" 4 "+Ae);if(!re[ze])break;Ge=L0(re[ze],Je)}return{nodes:Oe,data:O8([Ke])}}function N(re,me,ye,Ae){var Ce=re.length,Oe=[],Ke=[],ct=[],Ge=[],Je=Ae-1,ze=0,De=0,tt=0,pt=0;for(ze=0;ze<Ce;++ze)if(ct=[],tt=ze+me,tt>=Ce&&(tt-=Ce),!Ke[tt]){Ge=[];var It=[];for(De=tt;De>=0;){It[De]=!0,Ke[De]=!0,ct[ct.length]=De,Ge.push(re[De]);var Mt=ye[Math.floor(De*4/Ae)];if(pt=De*4&Je,Ae<4+pt)throw new Error("FAT boundary crossed: "+De+" 4 "+Ae);if(!re[Mt]||(De=L0(re[Mt],pt),It[De]))break}Oe[tt]={nodes:ct,data:O8([Ge])}}return Oe}function j(re,me,ye,Ae,Ce,Oe,Ke,ct){for(var Ge=0,Je=Ae.length?2:0,ze=me[re].data,De=0,tt=0,pt;De<ze.length;De+=128){var It=ze.slice(De,De+128);co(It,64),tt=It.read_shift(2),pt=Q3(It,0,tt-Je),Ae.push(pt);var Mt={name:pt,type:It.read_shift(1),color:It.read_shift(1),L:It.read_shift(4,"i"),R:It.read_shift(4,"i"),C:It.read_shift(4,"i"),clsid:It.read_shift(16),state:It.read_shift(4,"i"),start:0,size:0},vr=It.read_shift(2)+It.read_shift(2)+It.read_shift(2)+It.read_shift(2);vr!==0&&(Mt.ct=w(It,It.l-8));var Ur=It.read_shift(2)+It.read_shift(2)+It.read_shift(2)+It.read_shift(2);Ur!==0&&(Mt.mt=w(It,It.l-8)),Mt.start=It.read_shift(4,"i"),Mt.size=It.read_shift(4,"i"),Mt.size<0&&Mt.start<0&&(Mt.size=Mt.type=0,Mt.start=M,Mt.name=""),Mt.type===5?(Ge=Mt.start,Ce>0&&Ge!==M&&(me[Ge].name="!StreamData")):Mt.size>=4096?(Mt.storage="fat",me[Mt.start]===void 0&&(me[Mt.start]=b(ye,Mt.start,me.fat_addrs,me.ssz)),me[Mt.start].name=Mt.name,Mt.content=me[Mt.start].data.slice(0,Mt.size)):(Mt.storage="minifat",Mt.size<0?Mt.size=0:Ge!==M&&Mt.start!==M&&me[Ge]&&(Mt.content=v(Mt,me[Ge].data,(me[ct]||{}).data))),Mt.content&&co(Mt.content,0),Oe[pt]=Mt,Ke.push(Mt)}}function w(re,me){return new Date((hc(re,me+4)/1e7*Math.pow(2,32)+hc(re,me)/1e7-11644473600)*1e3)}function S(re,me){return u(),f(c.readFileSync(re),me)}function P(re,me){var ye=me&&me.type;switch(ye||Tn&&Buffer.isBuffer(re)&&(ye="buffer"),ye||"base64"){case"file":return S(re,me);case"base64":return f(mc(bc(re)),me);case"binary":return f(mc(re),me)}return f(re,me)}function A(re,me){var ye=me||{},Ae=ye.root||"Root Entry";if(re.FullPaths||(re.FullPaths=[]),re.FileIndex||(re.FileIndex=[]),re.FullPaths.length!==re.FileIndex.length)throw new Error("inconsistent CFB structure");re.FullPaths.length===0&&(re.FullPaths[0]=Ae+"/",re.FileIndex[0]={name:Ae,type:5}),ye.CLSID&&(re.FileIndex[0].clsid=ye.CLSID),T(re)}function T(re){var me="Sh33tJ5";if(!Hr.find(re,"/"+me)){var ye=Ft(4);ye[0]=55,ye[1]=ye[3]=50,ye[2]=54,re.FileIndex.push({name:me,type:2,content:ye,size:4,L:69,R:69,C:69}),re.FullPaths.push(re.FullPaths[0]+me),I(re)}}function I(re,me){A(re);for(var ye=!1,Ae=!1,Ce=re.FullPaths.length-1;Ce>=0;--Ce){var Oe=re.FileIndex[Ce];switch(Oe.type){case 0:Ae?ye=!0:(re.FileIndex.pop(),re.FullPaths.pop());break;case 1:case 2:case 5:Ae=!0,isNaN(Oe.R*Oe.L*Oe.C)&&(ye=!0),Oe.R>-1&&Oe.L>-1&&Oe.R==Oe.L&&(ye=!0);break;default:ye=!0;break}}if(!(!ye&&!me)){var Ke=new Date(1987,1,19),ct=0,Ge=Object.create?Object.create(null):{},Je=[];for(Ce=0;Ce<re.FullPaths.length;++Ce)Ge[re.FullPaths[Ce]]=!0,re.FileIndex[Ce].type!==0&&Je.push([re.FullPaths[Ce],re.FileIndex[Ce]]);for(Ce=0;Ce<Je.length;++Ce){var ze=n(Je[Ce][0]);Ae=Ge[ze],Ae||(Je.push([ze,{name:s(ze).replace("/",""),type:1,clsid:Z,ct:Ke,mt:Ke,content:null}]),Ge[ze]=!0)}for(Je.sort(function(pt,It){return r(pt[0],It[0])}),re.FullPaths=[],re.FileIndex=[],Ce=0;Ce<Je.length;++Ce)re.FullPaths[Ce]=Je[Ce][0],re.FileIndex[Ce]=Je[Ce][1];for(Ce=0;Ce<Je.length;++Ce){var De=re.FileIndex[Ce],tt=re.FullPaths[Ce];if(De.name=s(tt).replace("/",""),De.L=De.R=De.C=-(De.color=1),De.size=De.content?De.content.length:0,De.start=0,De.clsid=De.clsid||Z,Ce===0)De.C=Je.length>1?1:-1,De.size=0,De.type=5;else if(tt.slice(-1)=="/"){for(ct=Ce+1;ct<Je.length&&n(re.FullPaths[ct])!=tt;++ct);for(De.C=ct>=Je.length?-1:ct,ct=Ce+1;ct<Je.length&&n(re.FullPaths[ct])!=n(tt);++ct);De.R=ct>=Je.length?-1:ct,De.type=1}else n(re.FullPaths[Ce+1]||"")==n(tt)&&(De.R=Ce+1),De.type=2}}}function B(re,me){var ye=me||{};if(ye.fileType=="mad")return br(re,ye);if(I(re),ye.fileType==="zip")return Er(re,ye);var Ae=(function(pt){for(var It=0,Mt=0,vr=0;vr<pt.FileIndex.length;++vr){var Ur=pt.FileIndex[vr];if(Ur.content){var sn=Ur.content.length;sn>0&&(sn<4096?It+=sn+63>>6:Mt+=sn+511>>9)}}for(var En=pt.FullPaths.length+3>>2,ls=It+7>>3,vn=It+127>>7,xa=ls+Mt+En+vn,Fn=xa+127>>7,ga=Fn<=109?0:Math.ceil((Fn-109)/127);xa+Fn+ga+127>>7>Fn;)ga=++Fn<=109?0:Math.ceil((Fn-109)/127);var ca=[1,ga,Fn,vn,En,Mt,It,0];return pt.FileIndex[0].size=It<<6,ca[7]=(pt.FileIndex[0].start=ca[0]+ca[1]+ca[2]+ca[3]+ca[4]+ca[5])+(ca[6]+7>>3),ca})(re),Ce=Ft(Ae[7]<<9),Oe=0,Ke=0;{for(Oe=0;Oe<8;++Oe)Ce.write_shift(1,G[Oe]);for(Oe=0;Oe<8;++Oe)Ce.write_shift(2,0);for(Ce.write_shift(2,62),Ce.write_shift(2,3),Ce.write_shift(2,65534),Ce.write_shift(2,9),Ce.write_shift(2,6),Oe=0;Oe<3;++Oe)Ce.write_shift(2,0);for(Ce.write_shift(4,0),Ce.write_shift(4,Ae[2]),Ce.write_shift(4,Ae[0]+Ae[1]+Ae[2]+Ae[3]-1),Ce.write_shift(4,0),Ce.write_shift(4,4096),Ce.write_shift(4,Ae[3]?Ae[0]+Ae[1]+Ae[2]-1:M),Ce.write_shift(4,Ae[3]),Ce.write_shift(-4,Ae[1]?Ae[0]-1:M),Ce.write_shift(4,Ae[1]),Oe=0;Oe<109;++Oe)Ce.write_shift(-4,Oe<Ae[2]?Ae[1]+Oe:-1)}if(Ae[1])for(Ke=0;Ke<Ae[1];++Ke){for(;Oe<236+Ke*127;++Oe)Ce.write_shift(-4,Oe<Ae[2]?Ae[1]+Oe:-1);Ce.write_shift(-4,Ke===Ae[1]-1?M:Ke+1)}var ct=function(pt){for(Ke+=pt;Oe<Ke-1;++Oe)Ce.write_shift(-4,Oe+1);pt&&(++Oe,Ce.write_shift(-4,M))};for(Ke=Oe=0,Ke+=Ae[1];Oe<Ke;++Oe)Ce.write_shift(-4,te.DIFSECT);for(Ke+=Ae[2];Oe<Ke;++Oe)Ce.write_shift(-4,te.FATSECT);ct(Ae[3]),ct(Ae[4]);for(var Ge=0,Je=0,ze=re.FileIndex[0];Ge<re.FileIndex.length;++Ge)ze=re.FileIndex[Ge],ze.content&&(Je=ze.content.length,!(Je<4096)&&(ze.start=Ke,ct(Je+511>>9)));for(ct(Ae[6]+7>>3);Ce.l&511;)Ce.write_shift(-4,te.ENDOFCHAIN);for(Ke=Oe=0,Ge=0;Ge<re.FileIndex.length;++Ge)ze=re.FileIndex[Ge],ze.content&&(Je=ze.content.length,!(!Je||Je>=4096)&&(ze.start=Ke,ct(Je+63>>6)));for(;Ce.l&511;)Ce.write_shift(-4,te.ENDOFCHAIN);for(Oe=0;Oe<Ae[4]<<2;++Oe){var De=re.FullPaths[Oe];if(!De||De.length===0){for(Ge=0;Ge<17;++Ge)Ce.write_shift(4,0);for(Ge=0;Ge<3;++Ge)Ce.write_shift(4,-1);for(Ge=0;Ge<12;++Ge)Ce.write_shift(4,0);continue}ze=re.FileIndex[Oe],Oe===0&&(ze.start=ze.size?ze.start-1:M);var tt=Oe===0&&ye.root||ze.name;if(Je=2*(tt.length+1),Ce.write_shift(64,tt,"utf16le"),Ce.write_shift(2,Je),Ce.write_shift(1,ze.type),Ce.write_shift(1,ze.color),Ce.write_shift(-4,ze.L),Ce.write_shift(-4,ze.R),Ce.write_shift(-4,ze.C),ze.clsid)Ce.write_shift(16,ze.clsid,"hex");else for(Ge=0;Ge<4;++Ge)Ce.write_shift(4,0);Ce.write_shift(4,ze.state||0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,0),Ce.write_shift(4,ze.start),Ce.write_shift(4,ze.size),Ce.write_shift(4,0)}for(Oe=1;Oe<re.FileIndex.length;++Oe)if(ze=re.FileIndex[Oe],ze.size>=4096)if(Ce.l=ze.start+1<<9,Tn&&Buffer.isBuffer(ze.content))ze.content.copy(Ce,Ce.l,0,ze.size),Ce.l+=ze.size+511&-512;else{for(Ge=0;Ge<ze.size;++Ge)Ce.write_shift(1,ze.content[Ge]);for(;Ge&511;++Ge)Ce.write_shift(1,0)}for(Oe=1;Oe<re.FileIndex.length;++Oe)if(ze=re.FileIndex[Oe],ze.size>0&&ze.size<4096)if(Tn&&Buffer.isBuffer(ze.content))ze.content.copy(Ce,Ce.l,0,ze.size),Ce.l+=ze.size+63&-64;else{for(Ge=0;Ge<ze.size;++Ge)Ce.write_shift(1,ze.content[Ge]);for(;Ge&63;++Ge)Ce.write_shift(1,0)}if(Tn)Ce.l=Ce.length;else for(;Ce.l<Ce.length;)Ce.write_shift(1,0);return Ce}function E(re,me){var ye=re.FullPaths.map(function(Ge){return Ge.toUpperCase()}),Ae=ye.map(function(Ge){var Je=Ge.split("/");return Je[Je.length-(Ge.slice(-1)=="/"?2:1)]}),Ce=!1;me.charCodeAt(0)===47?(Ce=!0,me=ye[0].slice(0,-1)+me):Ce=me.indexOf("/")!==-1;var Oe=me.toUpperCase(),Ke=Ce===!0?ye.indexOf(Oe):Ae.indexOf(Oe);if(Ke!==-1)return re.FileIndex[Ke];var ct=!Oe.match(Lm);for(Oe=Oe.replace(wl,""),ct&&(Oe=Oe.replace(Lm,"!")),Ke=0;Ke<ye.length;++Ke)if((ct?ye[Ke].replace(Lm,"!"):ye[Ke]).replace(wl,"")==Oe||(ct?Ae[Ke].replace(Lm,"!"):Ae[Ke]).replace(wl,"")==Oe)return re.FileIndex[Ke];return null}var C=64,M=-2,q="d0cf11e0a1b11ae1",G=[208,207,17,224,161,177,26,225],Z="00000000000000000000000000000000",te={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:q,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Z,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function ne(re,me,ye){u();var Ae=B(re,ye);c.writeFileSync(me,Ae)}function J(re){for(var me=new Array(re.length),ye=0;ye<re.length;++ye)me[ye]=String.fromCharCode(re[ye]);return me.join("")}function ee(re,me){var ye=B(re,me);switch(me&&me.type||"buffer"){case"file":return u(),c.writeFileSync(me.filename,ye),ye;case"binary":return typeof ye=="string"?ye:J(ye);case"base64":return zx(typeof ye=="string"?ye:J(ye));case"buffer":if(Tn)return Buffer.isBuffer(ye)?ye:bf(ye);case"array":return typeof ye=="string"?mc(ye):ye}return ye}var H;function O(re){try{var me=re.InflateRaw,ye=new me;if(ye._processChunk(new Uint8Array([3,0]),ye._finishFlushFlag),ye.bytesRead)H=re;else throw new Error("zlib does not expose bytesRead")}catch(Ae){console.error("cannot use native zlib: "+(Ae.message||Ae))}}function R(re,me){if(!H)return bt(re,me);var ye=H.InflateRaw,Ae=new ye,Ce=Ae._processChunk(re.slice(re.l),Ae._finishFlushFlag);return re.l+=Ae.bytesRead,Ce}function W(re){return H?H.deflateRawSync(re):ut(re)}var U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],K=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],oe=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function he(re){var me=(re<<1|re<<11)&139536|(re<<5|re<<15)&558144;return(me>>16|me>>8|me)&255}for(var ie=typeof Uint8Array<"u",ce=ie?new Uint8Array(256):[],Le=0;Le<256;++Le)ce[Le]=he(Le);function le(re,me){var ye=ce[re&255];return me<=8?ye>>>8-me:(ye=ye<<8|ce[re>>8&255],me<=16?ye>>>16-me:(ye=ye<<8|ce[re>>16&255],ye>>>24-me))}function He(re,me){var ye=me&7,Ae=me>>>3;return(re[Ae]|(ye<=6?0:re[Ae+1]<<8))>>>ye&3}function Fe(re,me){var ye=me&7,Ae=me>>>3;return(re[Ae]|(ye<=5?0:re[Ae+1]<<8))>>>ye&7}function fe(re,me){var ye=me&7,Ae=me>>>3;return(re[Ae]|(ye<=4?0:re[Ae+1]<<8))>>>ye&15}function Q(re,me){var ye=me&7,Ae=me>>>3;return(re[Ae]|(ye<=3?0:re[Ae+1]<<8))>>>ye&31}function we(re,me){var ye=me&7,Ae=me>>>3;return(re[Ae]|(ye<=1?0:re[Ae+1]<<8))>>>ye&127}function ve(re,me,ye){var Ae=me&7,Ce=me>>>3,Oe=(1<<ye)-1,Ke=re[Ce]>>>Ae;return ye<8-Ae||(Ke|=re[Ce+1]<<8-Ae,ye<16-Ae)||(Ke|=re[Ce+2]<<16-Ae,ye<24-Ae)||(Ke|=re[Ce+3]<<24-Ae),Ke&Oe}function Ee(re,me,ye){var Ae=me&7,Ce=me>>>3;return Ae<=5?re[Ce]|=(ye&7)<<Ae:(re[Ce]|=ye<<Ae&255,re[Ce+1]=(ye&7)>>8-Ae),me+3}function pe(re,me,ye){var Ae=me&7,Ce=me>>>3;return ye=(ye&1)<<Ae,re[Ce]|=ye,me+1}function ue(re,me,ye){var Ae=me&7,Ce=me>>>3;return ye<<=Ae,re[Ce]|=ye&255,ye>>>=8,re[Ce+1]=ye,me+8}function Pe(re,me,ye){var Ae=me&7,Ce=me>>>3;return ye<<=Ae,re[Ce]|=ye&255,ye>>>=8,re[Ce+1]=ye&255,re[Ce+2]=ye>>>8,me+16}function Ne(re,me){var ye=re.length,Ae=2*ye>me?2*ye:me+5,Ce=0;if(ye>=me)return re;if(Tn){var Oe=f8(Ae);if(re.copy)re.copy(Oe);else for(;Ce<re.length;++Ce)Oe[Ce]=re[Ce];return Oe}else if(ie){var Ke=new Uint8Array(Ae);if(Ke.set)Ke.set(re);else for(;Ce<ye;++Ce)Ke[Ce]=re[Ce];return Ke}return re.length=Ae,re}function Be(re){for(var me=new Array(re),ye=0;ye<re;++ye)me[ye]=0;return me}function nt(re,me,ye){var Ae=1,Ce=0,Oe=0,Ke=0,ct=0,Ge=re.length,Je=ie?new Uint16Array(32):Be(32);for(Oe=0;Oe<32;++Oe)Je[Oe]=0;for(Oe=Ge;Oe<ye;++Oe)re[Oe]=0;Ge=re.length;var ze=ie?new Uint16Array(Ge):Be(Ge);for(Oe=0;Oe<Ge;++Oe)Je[Ce=re[Oe]]++,Ae<Ce&&(Ae=Ce),ze[Oe]=0;for(Je[0]=0,Oe=1;Oe<=Ae;++Oe)Je[Oe+16]=ct=ct+Je[Oe-1]<<1;for(Oe=0;Oe<Ge;++Oe)ct=re[Oe],ct!=0&&(ze[Oe]=Je[ct+16]++);var De=0;for(Oe=0;Oe<Ge;++Oe)if(De=re[Oe],De!=0)for(ct=le(ze[Oe],Ae)>>Ae-De,Ke=(1<<Ae+4-De)-1;Ke>=0;--Ke)me[ct|Ke<<De]=De&15|Oe<<4;return Ae}var mt=ie?new Uint16Array(512):Be(512),kt=ie?new Uint16Array(32):Be(32);if(!ie){for(var Re=0;Re<512;++Re)mt[Re]=0;for(Re=0;Re<32;++Re)kt[Re]=0}(function(){for(var re=[],me=0;me<32;me++)re.push(5);nt(re,kt,32);var ye=[];for(me=0;me<=143;me++)ye.push(8);for(;me<=255;me++)ye.push(9);for(;me<=279;me++)ye.push(7);for(;me<=287;me++)ye.push(8);nt(ye,mt,288)})();var gt=(function(){for(var me=ie?new Uint8Array(32768):[],ye=0,Ae=0;ye<oe.length-1;++ye)for(;Ae<oe[ye+1];++Ae)me[Ae]=ye;for(;Ae<32768;++Ae)me[Ae]=29;var Ce=ie?new Uint8Array(259):[];for(ye=0,Ae=0;ye<K.length-1;++ye)for(;Ae<K[ye+1];++Ae)Ce[Ae]=ye;function Oe(ct,Ge){for(var Je=0;Je<ct.length;){var ze=Math.min(65535,ct.length-Je),De=Je+ze==ct.length;for(Ge.write_shift(1,+De),Ge.write_shift(2,ze),Ge.write_shift(2,~ze&65535);ze-- >0;)Ge[Ge.l++]=ct[Je++]}return Ge.l}function Ke(ct,Ge){for(var Je=0,ze=0,De=ie?new Uint16Array(32768):[];ze<ct.length;){var tt=Math.min(65535,ct.length-ze);if(tt<10){for(Je=Ee(Ge,Je,+(ze+tt==ct.length)),Je&7&&(Je+=8-(Je&7)),Ge.l=Je/8|0,Ge.write_shift(2,tt),Ge.write_shift(2,~tt&65535);tt-- >0;)Ge[Ge.l++]=ct[ze++];Je=Ge.l*8;continue}Je=Ee(Ge,Je,+(ze+tt==ct.length)+2);for(var pt=0;tt-- >0;){var It=ct[ze];pt=(pt<<5^It)&32767;var Mt=-1,vr=0;if((Mt=De[pt])&&(Mt|=ze&-32768,Mt>ze&&(Mt-=32768),Mt<ze))for(;ct[Mt+vr]==ct[ze+vr]&&vr<250;)++vr;if(vr>2){It=Ce[vr],It<=22?Je=ue(Ge,Je,ce[It+1]>>1)-1:(ue(Ge,Je,3),Je+=5,ue(Ge,Je,ce[It-23]>>5),Je+=3);var Ur=It<8?0:It-4>>2;Ur>0&&(Pe(Ge,Je,vr-K[It]),Je+=Ur),It=me[ze-Mt],Je=ue(Ge,Je,ce[It]>>3),Je-=3;var sn=It<4?0:It-2>>1;sn>0&&(Pe(Ge,Je,ze-Mt-oe[It]),Je+=sn);for(var En=0;En<vr;++En)De[pt]=ze&32767,pt=(pt<<5^ct[ze])&32767,++ze;tt-=vr-1}else It<=143?It=It+48:Je=pe(Ge,Je,1),Je=ue(Ge,Je,ce[It]),De[pt]=ze&32767,++ze}Je=ue(Ge,Je,0)-1}return Ge.l=(Je+7)/8|0,Ge.l}return function(Ge,Je){return Ge.length<8?Oe(Ge,Je):Ke(Ge,Je)}})();function ut(re){var me=Ft(50+Math.floor(re.length*1.1)),ye=gt(re,me);return me.slice(0,ye)}var lt=ie?new Uint16Array(32768):Be(32768),pr=ie?new Uint16Array(32768):Be(32768),tr=ie?new Uint16Array(128):Be(128),ft=1,$t=1;function er(re,me){var ye=Q(re,me)+257;me+=5;var Ae=Q(re,me)+1;me+=5;var Ce=fe(re,me)+4;me+=4;for(var Oe=0,Ke=ie?new Uint8Array(19):Be(19),ct=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],Ge=1,Je=ie?new Uint8Array(8):Be(8),ze=ie?new Uint8Array(8):Be(8),De=Ke.length,tt=0;tt<Ce;++tt)Ke[U[tt]]=Oe=Fe(re,me),Ge<Oe&&(Ge=Oe),Je[Oe]++,me+=3;var pt=0;for(Je[0]=0,tt=1;tt<=Ge;++tt)ze[tt]=pt=pt+Je[tt-1]<<1;for(tt=0;tt<De;++tt)(pt=Ke[tt])!=0&&(ct[tt]=ze[pt]++);var It=0;for(tt=0;tt<De;++tt)if(It=Ke[tt],It!=0){pt=ce[ct[tt]]>>8-It;for(var Mt=(1<<7-It)-1;Mt>=0;--Mt)tr[pt|Mt<<It]=It&7|tt<<3}var vr=[];for(Ge=1;vr.length<ye+Ae;)switch(pt=tr[we(re,me)],me+=pt&7,pt>>>=3){case 16:for(Oe=3+He(re,me),me+=2,pt=vr[vr.length-1];Oe-- >0;)vr.push(pt);break;case 17:for(Oe=3+Fe(re,me),me+=3;Oe-- >0;)vr.push(0);break;case 18:for(Oe=11+we(re,me),me+=7;Oe-- >0;)vr.push(0);break;default:vr.push(pt),Ge<pt&&(Ge=pt);break}var Ur=vr.slice(0,ye),sn=vr.slice(ye);for(tt=ye;tt<286;++tt)Ur[tt]=0;for(tt=Ae;tt<30;++tt)sn[tt]=0;return ft=nt(Ur,lt,286),$t=nt(sn,pr,30),me}function qe(re,me){if(re[0]==3&&!(re[1]&3))return[i0(me),2];for(var ye=0,Ae=0,Ce=f8(me||1<<18),Oe=0,Ke=Ce.length>>>0,ct=0,Ge=0;(Ae&1)==0;){if(Ae=Fe(re,ye),ye+=3,Ae>>>1)Ae>>1==1?(ct=9,Ge=5):(ye=er(re,ye),ct=ft,Ge=$t);else{ye&7&&(ye+=8-(ye&7));var Je=re[ye>>>3]|re[(ye>>>3)+1]<<8;if(ye+=32,Je>0)for(!me&&Ke<Oe+Je&&(Ce=Ne(Ce,Oe+Je),Ke=Ce.length);Je-- >0;)Ce[Oe++]=re[ye>>>3],ye+=8;continue}for(;;){!me&&Ke<Oe+32767&&(Ce=Ne(Ce,Oe+32767),Ke=Ce.length);var ze=ve(re,ye,ct),De=Ae>>>1==1?mt[ze]:lt[ze];if(ye+=De&15,De>>>=4,(De>>>8&255)===0)Ce[Oe++]=De;else{if(De==256)break;De-=257;var tt=De<8?0:De-4>>2;tt>5&&(tt=0);var pt=Oe+K[De];tt>0&&(pt+=ve(re,ye,tt),ye+=tt),ze=ve(re,ye,Ge),De=Ae>>>1==1?kt[ze]:pr[ze],ye+=De&15,De>>>=4;var It=De<4?0:De-2>>1,Mt=oe[De];for(It>0&&(Mt+=ve(re,ye,It),ye+=It),!me&&Ke<pt&&(Ce=Ne(Ce,pt+100),Ke=Ce.length);Oe<pt;)Ce[Oe]=Ce[Oe-Mt],++Oe}}}return me?[Ce,ye+7>>>3]:[Ce.slice(0,Oe),ye+7>>>3]}function bt(re,me){var ye=re.slice(re.l||0),Ae=qe(ye,me);return re.l+=Ae[1],Ae[0]}function Nr(re,me){if(re)typeof console<"u"&&console.error(me);else throw new Error(me)}function rr(re,me){var ye=re;co(ye,0);var Ae=[],Ce=[],Oe={FileIndex:Ae,FullPaths:Ce};A(Oe,{root:me.root});for(var Ke=ye.length-4;(ye[Ke]!=80||ye[Ke+1]!=75||ye[Ke+2]!=5||ye[Ke+3]!=6)&&Ke>=0;)--Ke;ye.l=Ke+4,ye.l+=4;var ct=ye.read_shift(2);ye.l+=6;var Ge=ye.read_shift(4);for(ye.l=Ge,Ke=0;Ke<ct;++Ke){ye.l+=20;var Je=ye.read_shift(4),ze=ye.read_shift(4),De=ye.read_shift(2),tt=ye.read_shift(2),pt=ye.read_shift(2);ye.l+=8;var It=ye.read_shift(4),Mt=l(ye.slice(ye.l+De,ye.l+De+tt));ye.l+=De+tt+pt;var vr=ye.l;ye.l=It+4,Lr(ye,Je,ze,Oe,Mt),ye.l=vr}return Oe}function Lr(re,me,ye,Ae,Ce){re.l+=2;var Oe=re.read_shift(2),Ke=re.read_shift(2),ct=o(re);if(Oe&8257)throw new Error("Unsupported ZIP encryption");for(var Ge=re.read_shift(4),Je=re.read_shift(4),ze=re.read_shift(4),De=re.read_shift(2),tt=re.read_shift(2),pt="",It=0;It<De;++It)pt+=String.fromCharCode(re[re.l++]);if(tt){var Mt=l(re.slice(re.l,re.l+tt));(Mt[21589]||{}).mt&&(ct=Mt[21589].mt),((Ce||{})[21589]||{}).mt&&(ct=Ce[21589].mt)}re.l+=tt;var vr=re.slice(re.l,re.l+Je);switch(Ke){case 8:vr=R(re,ze);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Ke)}var Ur=!1;Oe&8&&(Ge=re.read_shift(4),Ge==134695760&&(Ge=re.read_shift(4),Ur=!0),Je=re.read_shift(4),ze=re.read_shift(4)),Je!=me&&Nr(Ur,"Bad compressed size: "+me+" != "+Je),ze!=ye&&Nr(Ur,"Bad uncompressed size: "+ye+" != "+ze),on(Ae,pt,vr,{unsafe:!0,mt:ct})}function Er(re,me){var ye=me||{},Ae=[],Ce=[],Oe=Ft(1),Ke=ye.compression?8:0,ct=0,Ge=0,Je=0,ze=0,De=0,tt=re.FullPaths[0],pt=tt,It=re.FileIndex[0],Mt=[],vr=0;for(Ge=1;Ge<re.FullPaths.length;++Ge)if(pt=re.FullPaths[Ge].slice(tt.length),It=re.FileIndex[Ge],!(!It.size||!It.content||pt=="Sh33tJ5")){var Ur=ze,sn=Ft(pt.length);for(Je=0;Je<pt.length;++Je)sn.write_shift(1,pt.charCodeAt(Je)&127);sn=sn.slice(0,sn.l),Mt[De]=Vie.buf(It.content,0);var En=It.content;Ke==8&&(En=W(En)),Oe=Ft(30),Oe.write_shift(4,67324752),Oe.write_shift(2,20),Oe.write_shift(2,ct),Oe.write_shift(2,Ke),It.mt?i(Oe,It.mt):Oe.write_shift(4,0),Oe.write_shift(-4,Mt[De]),Oe.write_shift(4,En.length),Oe.write_shift(4,It.content.length),Oe.write_shift(2,sn.length),Oe.write_shift(2,0),ze+=Oe.length,Ae.push(Oe),ze+=sn.length,Ae.push(sn),ze+=En.length,Ae.push(En),Oe=Ft(46),Oe.write_shift(4,33639248),Oe.write_shift(2,0),Oe.write_shift(2,20),Oe.write_shift(2,ct),Oe.write_shift(2,Ke),Oe.write_shift(4,0),Oe.write_shift(-4,Mt[De]),Oe.write_shift(4,En.length),Oe.write_shift(4,It.content.length),Oe.write_shift(2,sn.length),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(4,0),Oe.write_shift(4,Ur),vr+=Oe.l,Ce.push(Oe),vr+=sn.length,Ce.push(sn),++De}return Oe=Ft(22),Oe.write_shift(4,101010256),Oe.write_shift(2,0),Oe.write_shift(2,0),Oe.write_shift(2,De),Oe.write_shift(2,De),Oe.write_shift(4,vr),Oe.write_shift(4,ze),Oe.write_shift(2,0),Xi([Xi(Ae),Xi(Ce),Oe])}var or={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Ut(re,me){if(re.ctype)return re.ctype;var ye=re.name||"",Ae=ye.match(/\.([^\.]+)$/);return Ae&&or[Ae[1]]||me&&(Ae=(ye=me).match(/[\.\\]([^\.\\])+$/),Ae&&or[Ae[1]])?or[Ae[1]]:"application/octet-stream"}function wr(re){for(var me=zx(re),ye=[],Ae=0;Ae<me.length;Ae+=76)ye.push(me.slice(Ae,Ae+76));return ye.join(`\r
`)+`\r
`}function kr(re){var me=re.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Je){var ze=Je.charCodeAt(0).toString(16).toUpperCase();return"="+(ze.length==1?"0"+ze:ze)});me=me.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),me.charAt(0)==`
`&&(me="=0D"+me.slice(1)),me=me.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var ye=[],Ae=me.split(`\r
`),Ce=0;Ce<Ae.length;++Ce){var Oe=Ae[Ce];if(Oe.length==0){ye.push("");continue}for(var Ke=0;Ke<Oe.length;){var ct=76,Ge=Oe.slice(Ke,Ke+ct);Ge.charAt(ct-1)=="="?ct--:Ge.charAt(ct-2)=="="?ct-=2:Ge.charAt(ct-3)=="="&&(ct-=3),Ge=Oe.slice(Ke,Ke+ct),Ke+=ct,Ke<Oe.length&&(Ge+="="),ye.push(Ge)}}return ye.join(`\r
`)}function Gr(re){for(var me=[],ye=0;ye<re.length;++ye){for(var Ae=re[ye];ye<=re.length&&Ae.charAt(Ae.length-1)=="=";)Ae=Ae.slice(0,Ae.length-1)+re[++ye];me.push(Ae)}for(var Ce=0;Ce<me.length;++Ce)me[Ce]=me[Ce].replace(/[=][0-9A-Fa-f]{2}/g,function(Oe){return String.fromCharCode(parseInt(Oe.slice(1),16))});return mc(me.join(`\r
`))}function hn(re,me,ye){for(var Ae="",Ce="",Oe="",Ke,ct=0;ct<10;++ct){var Ge=me[ct];if(!Ge||Ge.match(/^\s*$/))break;var Je=Ge.match(/^(.*?):\s*([^\s].*)$/);if(Je)switch(Je[1].toLowerCase()){case"content-location":Ae=Je[2].trim();break;case"content-type":Oe=Je[2].trim();break;case"content-transfer-encoding":Ce=Je[2].trim();break}}switch(++ct,Ce.toLowerCase()){case"base64":Ke=mc(bc(me.slice(ct).join("")));break;case"quoted-printable":Ke=Gr(me.slice(ct));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+Ce)}var ze=on(re,Ae.slice(ye.length),Ke,{unsafe:!0});Oe&&(ze.ctype=Oe)}function On(re,me){if(J(re.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var ye=me&&me.root||"",Ae=(Tn&&Buffer.isBuffer(re)?re.toString("binary"):J(re)).split(`\r
`),Ce=0,Oe="";for(Ce=0;Ce<Ae.length;++Ce)if(Oe=Ae[Ce],!!/^Content-Location:/i.test(Oe)&&(Oe=Oe.slice(Oe.indexOf("file")),ye||(ye=Oe.slice(0,Oe.lastIndexOf("/")+1)),Oe.slice(0,ye.length)!=ye))for(;ye.length>0&&(ye=ye.slice(0,ye.length-1),ye=ye.slice(0,ye.lastIndexOf("/")+1),Oe.slice(0,ye.length)!=ye););var Ke=(Ae[1]||"").match(/boundary="(.*?)"/);if(!Ke)throw new Error("MAD cannot find boundary");var ct="--"+(Ke[1]||""),Ge=[],Je=[],ze={FileIndex:Ge,FullPaths:Je};A(ze);var De,tt=0;for(Ce=0;Ce<Ae.length;++Ce){var pt=Ae[Ce];pt!==ct&&pt!==ct+"--"||(tt++&&hn(ze,Ae.slice(De,Ce),ye),De=Ce)}return ze}function br(re,me){var ye=me||{},Ae=ye.boundary||"SheetJS";Ae="------="+Ae;for(var Ce=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Ae.slice(2)+'"',"","",""],Oe=re.FullPaths[0],Ke=Oe,ct=re.FileIndex[0],Ge=1;Ge<re.FullPaths.length;++Ge)if(Ke=re.FullPaths[Ge].slice(Oe.length),ct=re.FileIndex[Ge],!(!ct.size||!ct.content||Ke=="Sh33tJ5")){Ke=Ke.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(vr){return"_x"+vr.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(vr){return"_u"+vr.charCodeAt(0).toString(16)+"_"});for(var Je=ct.content,ze=Tn&&Buffer.isBuffer(Je)?Je.toString("binary"):J(Je),De=0,tt=Math.min(1024,ze.length),pt=0,It=0;It<=tt;++It)(pt=ze.charCodeAt(It))>=32&&pt<128&&++De;var Mt=De>=tt*4/5;Ce.push(Ae),Ce.push("Content-Location: "+(ye.root||"file:///C:/SheetJS/")+Ke),Ce.push("Content-Transfer-Encoding: "+(Mt?"quoted-printable":"base64")),Ce.push("Content-Type: "+Ut(ct,Ke)),Ce.push(""),Ce.push(Mt?kr(ze):wr(ze))}return Ce.push(Ae+`--\r
`),Ce.join(`\r
`)}function Yn(re){var me={};return A(me,re),me}function on(re,me,ye,Ae){var Ce=Ae&&Ae.unsafe;Ce||A(re);var Oe=!Ce&&Hr.find(re,me);if(!Oe){var Ke=re.FullPaths[0];me.slice(0,Ke.length)==Ke?Ke=me:(Ke.slice(-1)!="/"&&(Ke+="/"),Ke=(Ke+me).replace("//","/")),Oe={name:s(me),type:2},re.FileIndex.push(Oe),re.FullPaths.push(Ke),Ce||Hr.utils.cfb_gc(re)}return Oe.content=ye,Oe.size=ye?ye.length:0,Ae&&(Ae.CLSID&&(Oe.clsid=Ae.CLSID),Ae.mt&&(Oe.mt=Ae.mt),Ae.ct&&(Oe.ct=Ae.ct)),Oe}function Xe(re,me){A(re);var ye=Hr.find(re,me);if(ye){for(var Ae=0;Ae<re.FileIndex.length;++Ae)if(re.FileIndex[Ae]==ye)return re.FileIndex.splice(Ae,1),re.FullPaths.splice(Ae,1),!0}return!1}function wt(re,me,ye){A(re);var Ae=Hr.find(re,me);if(Ae){for(var Ce=0;Ce<re.FileIndex.length;++Ce)if(re.FileIndex[Ce]==Ae)return re.FileIndex[Ce].name=s(ye),re.FullPaths[Ce]=ye,!0}return!1}function Wt(re){I(re,!0)}return t.find=E,t.read=P,t.parse=f,t.write=ee,t.writeFile=ne,t.utils={cfb_new:Yn,cfb_add:on,cfb_del:Xe,cfb_mov:wt,cfb_gc:Wt,ReadShift:Gm,CheckField:LM,prep_blob:co,bconcat:Xi,use_zlib:O,_deflateRaw:ut,_inflateRaw:bt,consts:te},t})();function Gie(e){return typeof e=="string"?eb(e):Array.isArray(e)?yie(e):e}function hg(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=eb(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?md(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([Gie(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=v0(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function Kie(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function Bs(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function b8(e,t){for(var r=[],n=Bs(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function rb(e){for(var t=[],r=Bs(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function nb(e){for(var t=[],r=Bs(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function Xie(e){for(var t=[],r=Bs(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var ay=new Date(1899,11,30,0,0,0);function Di(e,t){var r=e.getTime(),n=ay.getTime()+(e.getTimezoneOffset()-ay.getTimezoneOffset())*6e4;return(r-n)/(1440*60*1e3)}var pM=new Date,Yie=ay.getTime()+(pM.getTimezoneOffset()-ay.getTimezoneOffset())*6e4,w8=pM.getTimezoneOffset();function ab(e){var t=new Date;return t.setTime(e*24*60*60*1e3+Yie),t.getTimezoneOffset()!==w8&&t.setTime(t.getTime()+(t.getTimezoneOffset()-w8)*6e4),t}function Jie(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var N8=new Date("2017-02-19T19:06:09.000Z"),mM=isNaN(N8.getFullYear())?new Date("2/19/17"):N8,Qie=mM.getFullYear()==2017;function is(e,t){var r=new Date(e);if(Qie)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(mM.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function oh(e,t){if(Tn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return md(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return md(rM(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return md(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return md(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function os(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=os(e[r]));return t}function Ms(e,t){for(var r="";r.length<t;)r+=e;return r}function Uu(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var Zie=["january","february","march","april","may","june","july","august","september","october","november","december"];function Rp(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Zie.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var eoe=(function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}})();function xM(e){return e?e.content&&e.type?oh(e.content,!0):e.data?Dm(e.data):e.asNodeBuffer&&Tn?Dm(e.asNodeBuffer().toString("binary")):e.asBinary?Dm(e.asBinary()):e._data&&e._data.getContent?Dm(oh(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function gM(e){if(!e)return null;if(e.data)return u8(e.data);if(e.asNodeBuffer&&Tn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?u8(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function toe(e){return e&&e.name.slice(-4)===".bin"?gM(e):xM(e)}function Jc(e,t){for(var r=e.FullPaths||Bs(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function V3(e,t){var r=Jc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function pi(e,t,r){if(!r)return toe(V3(e,t));if(!t)return null;try{return pi(e,t)}catch{return null}}function xc(e,t,r){if(!r)return xM(V3(e,t));if(!t)return null;try{return xc(e,t)}catch{return null}}function roe(e,t,r){return gM(V3(e,t))}function j8(e){for(var t=e.FullPaths||Bs(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function wn(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return Tn?n=bf(r):n=bie(r),Hr.utils.cfb_add(e,t,n)}Hr.utils.cfb_add(e,t,r)}else e.file(t,r)}function G3(){return Hr.utils.cfb_new()}function vM(e,t){switch(t.type){case"base64":return Hr.read(e,{type:"base64"});case"binary":return Hr.read(e,{type:"binary"});case"buffer":case"array":return Hr.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Fm(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var ei=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,noe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,k8=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,aoe=/<[^>]*>/g,zo=ei.match(k8)?k8:aoe,soe=/<\w*:/,ioe=/<(\/?)\w+:/;function nn(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(noe),l=0,c="",u=0,f="",d="",m=1;if(o)for(u=0;u!=o.length;++u){for(d=o[u],i=0;i!=d.length&&d.charCodeAt(i)!==61;++i);for(f=d.slice(0,i).trim();d.charCodeAt(i+1)==32;)++i;for(m=(s=d.charCodeAt(i+1))==34||s==39?1:0,c=d.slice(i+1+m,d.length-m),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=c,n[f.toLowerCase()]=c;else{var p=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[p]&&f.slice(l-3,l)=="ext")continue;n[p]=c,n[p.toLowerCase()]=c}}return n}function Td(e){return e.replace(ioe,"<$1")}var yM={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},K3=rb(yM),Zn=(function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return yM[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}})(),X3=/[&<>'"]/g,ooe=/[\u0000-\u0008\u000b-\u001f]/g;function Sa(e){var t=e+"";return t.replace(X3,function(r){return K3[r]}).replace(ooe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function S8(e){return Sa(e).replace(/ /g,"_x0020_")}var bM=/[\u0000-\u001f]/g;function Y3(e){var t=e+"";return t.replace(X3,function(r){return K3[r]}).replace(/\n/g,"<br/>").replace(bM,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function loe(e){var t=e+"";return t.replace(X3,function(r){return K3[r]}).replace(bM,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var _8=(function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}})();function coe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function as(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function QN(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function A8(e){var t=i0(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function E8(e){return bf(e,"binary").toString("utf8")}var xv="foo bar baz",Ba=Tn&&(E8(xv)==QN(xv)&&E8||A8(xv)==QN(xv)&&A8)||QN,md=Tn?function(e){return bf(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},Wx=(function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}})(),wM=(function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}})(),uoe=(function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}})(),doe=/<\/?(?:vt:)?variant>/g,foe=/<(?:vt:)([^>]*)>([\s\S]*)</;function C8(e,t){var r=nn(e),n=e.match(uoe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(doe,"").match(foe);o&&s.push({v:Ba(o[2]),t:o[1]})}),s}var NM=/(^\s|\s$|\n)/;function uo(e,t){return"<"+e+(t.match(NM)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function Vx(e){return Bs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function ur(e,t,r){return"<"+e+(r!=null?Vx(r):"")+(t!=null?(t.match(NM)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function rk(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function hoe(e,t){switch(typeof e){case"string":var r=ur("vt:lpwstr",Sa(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return ur((e|0)==e?"vt:i4":"vt:r8",Sa(String(e)));case"boolean":return ur("vt:bool",e?"true":"false")}if(e instanceof Date)return ur("vt:filetime",rk(e));throw new Error("Unable to serialize "+e)}function J3(e){if(Tn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return Ba(v0(z3(e)));throw new Error("Bad input format: expected Buffer or string")}var Gx=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,Oi={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},gh=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],fc={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function poe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function moe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var T8=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},O8=Tn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:bf(t)})):T8(e)}:T8,P8=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(ef(e,s)));return n.join("").replace(wl,"")},Q3=Tn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(wl,""):P8(e,t,r)}:P8,I8=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},jM=Tn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):I8(e,t,r)}:I8,D8=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Kh(e,s)));return n.join("")},pg=Tn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):D8(t,r,n)}:D8,kM=function(e,t){var r=hc(e,t);return r>0?pg(e,t+4,t+4+r-1):""},SM=kM,_M=function(e,t){var r=hc(e,t);return r>0?pg(e,t+4,t+4+r-1):""},AM=_M,EM=function(e,t){var r=2*hc(e,t);return r>0?pg(e,t+4,t+4+r-1):""},CM=EM,TM=function(t,r){var n=hc(t,r);return n>0?Q3(t,r+4,r+4+n):""},OM=TM,PM=function(e,t){var r=hc(e,t);return r>0?pg(e,t+4,t+4+r):""},IM=PM,DM=function(e,t){return poe(e,t)},sy=DM,Z3=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};Tn&&(SM=function(t,r){if(!Buffer.isBuffer(t))return kM(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},AM=function(t,r){if(!Buffer.isBuffer(t))return _M(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},CM=function(t,r){if(!Buffer.isBuffer(t))return EM(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},OM=function(t,r){if(!Buffer.isBuffer(t))return TM(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},IM=function(t,r){if(!Buffer.isBuffer(t))return PM(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},sy=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):DM(t,r)},Z3=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Kh=function(e,t){return e[t]},ef=function(e,t){return e[t+1]*256+e[t]},xoe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},hc=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},L0=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},goe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function Gm(e,t){var r="",n,s,i=[],o,l,c,u;switch(t){case"dbcs":if(u=this.l,Tn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(ef(this,u)),u+=2;e*=2;break;case"utf8":r=pg(this,this.l,this.l+e);break;case"utf16le":e*=2,r=Q3(this,this.l,this.l+e);break;case"wstr":return Gm.call(this,e,"dbcs");case"lpstr-ansi":r=SM(this,this.l),e=4+hc(this,this.l);break;case"lpstr-cp":r=AM(this,this.l),e=4+hc(this,this.l);break;case"lpwstr":r=CM(this,this.l),e=4+2*hc(this,this.l);break;case"lpp4":e=4+hc(this,this.l),r=OM(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+hc(this,this.l),r=IM(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Kh(this,this.l+e++))!==0;)i.push(mv(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=ef(this,this.l+e))!==0;)i.push(mv(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",u=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Kh(this,u),this.l=u+1,l=Gm.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(mv(ef(this,u))),u+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",u=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(u)!==-1)return o=Kh(this,u),this.l=u+1,l=Gm.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(mv(Kh(this,u))),u+=1}r=i.join("");break;default:switch(e){case 1:return n=Kh(this,this.l),this.l++,n;case 2:return n=(t==="i"?xoe:ef)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||(this[this.l+3]&128)===0?(n=(e>0?L0:goe)(this,this.l),this.l+=4,n):(s=hc(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=sy(this,this.l):s=sy([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=jM(this,this.l,e);break}}return this.l+=e,r}var voe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},yoe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},boe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function woe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)boe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,voe(this,t,this.l);break;case 8:if(n=8,r==="f"){moe(this,t,this.l);break}case 16:break;case-4:n=4,yoe(this,t,this.l);break}return this.l+=n,this}function LM(e,t){var r=jM(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function co(e,t){e.l=t,e.read_shift=Gm,e.chk=LM,e.write_shift=woe}function $o(e,t){e.l+=t}function Ft(e){var t=i0(e);return co(t,0),t}function wf(e,t,r){if(e){var n,s,i;co(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var u=Zx[l]||Zx[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;c=e.l+i;var f=u.f&&u.f(e,i,r);if(e.l=c,t(f,u,l))return}}}function Hl(){var e=[],t=Tn?256:2048,r=function(u){var f=Ft(u);return co(f,0),f},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(u){return n&&u<n.length-n.l?n:(s(),n=r(Math.max(u+1,t)))},o=function(){return s(),Xi(e)},l=function(u){s(),n=u,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Vt(e,t,r,n){var s=+t,i;if(!isNaN(s)){n||(n=Zx[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&Z3(r)&&e.push(r)}}function Km(e,t,r){var n=os(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function L8(e,t,r){var n=os(e);return n.s=Km(n.s,t.s,r),n.e=Km(n.e,t.s,r),n}function Xm(e,t){if(e.cRel&&e.c<0)for(e=os(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=os(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=tn(e);return!e.cRel&&e.cRel!=null&&(r=koe(r)),!e.rRel&&e.rRel!=null&&(r=Noe(r)),r}function ZN(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Es(e.s.c)+":"+(e.e.cRel?"":"$")+Es(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+Zs(e.s.r)+":"+(e.e.rRel?"":"$")+Zs(e.e.r):Xm(e.s,t.biff)+":"+Xm(e.e,t.biff)}function eS(e){return parseInt(joe(e),10)-1}function Zs(e){return""+(e+1)}function Noe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function joe(e){return e.replace(/\$(\d+)$/,"$1")}function tS(e){for(var t=Soe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Es(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function koe(e){return e.replace(/^([A-Z])/,"$$$1")}function Soe(e){return e.replace(/^\$([A-Z])/,"$1")}function _oe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Cs(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function tn(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function Wl(e){var t=e.indexOf(":");return t==-1?{s:Cs(e),e:Cs(e)}:{s:Cs(e.slice(0,t)),e:Cs(e.slice(t+1))}}function gn(e,t){return typeof t>"u"||typeof t=="number"?gn(e.s,e.e):(typeof e!="string"&&(e=tn(e)),typeof t!="string"&&(t=tn(t)),e==t?e:e+":"+t)}function ea(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function F8(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=iu(e.z,r?Di(t):t)}catch{}try{return e.w=iu((e.XF||{}).numFmtId||(r?14:0),r?Di(t):t)}catch{return""+t}}function xf(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Nf[e.v]||e.v:t==null?F8(e,e.v):F8(e,t))}function y0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function FM(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Cs(n.origin):n.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var u={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=ea(i["!ref"]);u.s.c=f.s.c,u.s.r=f.s.r,u.e.c=Math.max(u.e.c,f.e.c),u.e.r=Math.max(u.e.r,f.e.r),o==-1&&(u.e.r=o=f.e.r+1)}for(var d=0;d!=t.length;++d)if(t[d]){if(!Array.isArray(t[d]))throw new Error("aoa_to_sheet expects an array of arrays");for(var m=0;m!=t[d].length;++m)if(!(typeof t[d][m]>"u")){var p={v:t[d][m]},y=o+d,v=l+m;if(u.s.r>y&&(u.s.r=y),u.s.c>v&&(u.s.c=v),u.e.r<y&&(u.e.r=y),u.e.c<v&&(u.e.c=v),t[d][m]&&typeof t[d][m]=="object"&&!Array.isArray(t[d][m])&&!(t[d][m]instanceof Date))p=t[d][m];else if(Array.isArray(p.v)&&(p.f=t[d][m][1],p.v=p.v[0]),p.v===null)if(p.f)p.t="n";else if(n.nullError)p.t="e",p.v=0;else if(n.sheetStubs)p.t="z";else continue;else typeof p.v=="number"?p.t="n":typeof p.v=="boolean"?p.t="b":p.v instanceof Date?(p.z=n.dateNF||Jr[14],n.cellDates?(p.t="d",p.w=iu(p.z,Di(p.v))):(p.t="n",p.v=Di(p.v),p.w=iu(p.z,p.v))):p.t="s";if(s)i[y]||(i[y]=[]),i[y][v]&&i[y][v].z&&(p.z=i[y][v].z),i[y][v]=p;else{var g=tn({c:v,r:y});i[g]&&i[g].z&&(p.z=i[g].z),i[g]=p}}}return u.s.c<1e7&&(i["!ref"]=gn(u)),i}function em(e,t){return FM(null,e,t)}function Aoe(e){return e.read_shift(4,"i")}function qu(e,t){return t||(t=Ft(4)),t.write_shift(4,e),t}function qo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Yi(e,t){var r=!1;return t==null&&(r=!0,t=Ft(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Eoe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function Coe(e,t){return t||(t=Ft(4)),t.write_shift(2,0),t.write_shift(2,0),t}function rS(e,t){var r=e.l,n=e.read_shift(1),s=qo(e),i=[],o={t:s,h:s};if((n&1)!==0){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Eoe(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Toe(e,t){var r=!1;return t==null&&(r=!0,t=Ft(15+4*e.t.length)),t.write_shift(1,0),Yi(e.t,t),r?t.slice(0,t.l):t}var Ooe=rS;function Poe(e,t){var r=!1;return t==null&&(r=!0,t=Ft(23+4*e.t.length)),t.write_shift(1,1),Yi(e.t,t),t.write_shift(4,1),Coe({},t),r?t.slice(0,t.l):t}function cu(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function vh(e,t){return t==null&&(t=Ft(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function yh(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function bh(e,t){return t==null&&(t=Ft(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Ioe=qo,MM=Yi;function nS(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function iy(e,t){var r=!1;return t==null&&(r=!0,t=Ft(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Doe=qo,nk=nS,aS=iy;function sS(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?sy([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):L0(t,0)>>2;return r?s/100:s}function RM(e,t){t==null&&(t=Ft(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function BM(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Loe(e,t){return t||(t=Ft(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var wh=BM,tm=Loe;function Bo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function lh(e,t){return(t||Ft(8)).write_shift(8,e,"f")}function Foe(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var u=X0[s];u&&(t.rgb=Xx(u));break;case 2:t.rgb=Xx([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function oy(e,t){if(t||(t=Ft(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Moe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Roe(e,t){t||(t=Ft(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function UM(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Boe(e){return UM(e,1)}function Uoe(e){return UM(e,2)}var iS=2,$l=3,gv=11,M8=12,ly=19,vv=64,qoe=65,$oe=71,zoe=4108,Hoe=4126,Vi=80,qM=81,Woe=[Vi,qM],ak={1:{n:"CodePage",t:iS},2:{n:"Category",t:Vi},3:{n:"PresentationFormat",t:Vi},4:{n:"ByteCount",t:$l},5:{n:"LineCount",t:$l},6:{n:"ParagraphCount",t:$l},7:{n:"SlideCount",t:$l},8:{n:"NoteCount",t:$l},9:{n:"HiddenCount",t:$l},10:{n:"MultimediaClipCount",t:$l},11:{n:"ScaleCrop",t:gv},12:{n:"HeadingPairs",t:zoe},13:{n:"TitlesOfParts",t:Hoe},14:{n:"Manager",t:Vi},15:{n:"Company",t:Vi},16:{n:"LinksUpToDate",t:gv},17:{n:"CharacterCount",t:$l},19:{n:"SharedDoc",t:gv},22:{n:"HyperlinksChanged",t:gv},23:{n:"AppVersion",t:$l,p:"version"},24:{n:"DigSig",t:qoe},26:{n:"ContentType",t:Vi},27:{n:"ContentStatus",t:Vi},28:{n:"Language",t:Vi},29:{n:"Version",t:Vi},255:{},2147483648:{n:"Locale",t:ly},2147483651:{n:"Behavior",t:ly},1919054434:{}},sk={1:{n:"CodePage",t:iS},2:{n:"Title",t:Vi},3:{n:"Subject",t:Vi},4:{n:"Author",t:Vi},5:{n:"Keywords",t:Vi},6:{n:"Comments",t:Vi},7:{n:"Template",t:Vi},8:{n:"LastAuthor",t:Vi},9:{n:"RevNumber",t:Vi},10:{n:"EditTime",t:vv},11:{n:"LastPrinted",t:vv},12:{n:"CreatedDate",t:vv},13:{n:"ModifiedDate",t:vv},14:{n:"PageCount",t:$l},15:{n:"WordCount",t:$l},16:{n:"CharCount",t:$l},17:{n:"Thumbnail",t:$oe},18:{n:"Application",t:Vi},19:{n:"DocSecurity",t:$l},255:{},2147483648:{n:"Locale",t:ly},2147483651:{n:"Behavior",t:ly},1919054434:{}},R8={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},Voe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Goe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Koe=Goe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),X0=os(Koe),Nf={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},$M={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},ik={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},yv={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function oS(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Xoe(e){var t=oS();if(!e||!e.match)return t;var r={};if((e.match(zo)||[]).forEach(function(n){var s=nn(n);switch(s[0].replace(soe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[ik[s.ContentType]]!==void 0&&t[ik[s.ContentType]].push(s.PartName);break}}),t.xmlns!==Oi.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function zM(e,t){var r=Xie(ik),n=[],s;n[n.length]=ei,n[n.length]=ur("Types",null,{xmlns:Oi.CT,"xmlns:xsd":Oi.xsd,"xmlns:xsi":Oi.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return ur("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=ur("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:yv[c][t.bookType]||yv[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(u){n[n.length]=ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:yv[c][t.bookType]||yv[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(u){n[n.length]=ur("Override",null,{PartName:(u[0]=="/"?"":"/")+u,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var Ln={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function Kx(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function Ym(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(zo)||[]).forEach(function(s){var i=nn(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Fm(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function op(e){var t=[ei,ur("Relationships",null,{xmlns:Oi.RELS})];return Bs(e["!id"]).forEach(function(r){t[t.length]=ur("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ja(e,t,r,n,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[Ln.HLINK,Ln.XPATH,Ln.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var Yoe="application/vnd.oasis.opendocument.spreadsheet";function Joe(e,t){for(var r=J3(e),n,s;n=Gx.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=nn(n[0],!1),s.path=="/"&&s.type!==Yoe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Qoe(e){var t=[ei];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function B8(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Zoe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function ele(e){var t=[ei];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(B8(e[r][0],e[r][1])),t.push(Zoe("",e[r][0]));return t.push(B8("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function HM(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+ey.version+"</meta:generator></office:meta></office:document-meta>"}var au=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],tle=(function(){for(var e=new Array(au.length),t=0;t<au.length;++t){var r=au[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e})();function WM(e){var t={};e=Ba(e);for(var r=0;r<au.length;++r){var n=au[r],s=e.match(tle[r]);s!=null&&s.length>0&&(t[n[1]]=Zn(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=is(t[n[1]]))}return t}function ej(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=Sa(t),n[n.length]=r?ur(e,t,r):uo(e,t))}function VM(e,t){var r=t||{},n=[ei,ur("cp:coreProperties",null,{"xmlns:cp":Oi.CORE_PROPS,"xmlns:dc":Oi.dc,"xmlns:dcterms":Oi.dcterms,"xmlns:dcmitype":Oi.dcmitype,"xmlns:xsi":Oi.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&ej("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:rk(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&ej("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:rk(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=au.length;++i){var o=au[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&ej(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Y0=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],GM=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function KM(e,t,r,n){var s=[];if(typeof e=="string")s=C8(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?C8(t,n).map(function(f){return f.v}):t,l=0,c=0;if(o.length>0)for(var u=0;u!==s.length;u+=2){switch(c=+s[u+1].v,s[u].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function rle(e,t,r){var n={};return t||(t={}),e=Ba(e),Y0.forEach(function(s){var i=(e.match(Wx(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Zn(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&KM(n.HeadingPairs,n.TitlesOfParts,t,r),t}function XM(e){var t=[],r=ur;return e||(e={}),e.Application="SheetJS",t[t.length]=ei,t[t.length]=ur("Properties",null,{xmlns:Oi.EXT_PROPS,"xmlns:vt":Oi.vt}),Y0.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=Sa(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+Sa(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var nle=/<[^>]+>[^<]*/g;function ale(e,t){var r={},n="",s=e.match(nle);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=nn(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Zn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),u=c[0].slice(4),f=c[1];switch(u){case"lpstr":case"bstr":case"lpwstr":r[n]=Zn(f);break;case"bool":r[n]=as(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=is(f);break;case"cy":case"error":r[n]=Zn(f);break;default:if(u.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,u,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function YM(e){var t=[ei,ur("Properties",null,{xmlns:Oi.CUST_PROPS,"xmlns:vt":Oi.vt})];if(!e)return t.join("");var r=1;return Bs(e).forEach(function(s){++r,t[t.length]=ur("property",hoe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:Sa(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var ok={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},tj;function sle(e,t,r){tj||(tj=rb(ok)),t=tj[t]||t,e[t]=r}function ile(e,t){var r=[];return Bs(ok).map(function(n){for(var s=0;s<au.length;++s)if(au[s][1]==n)return au[s];for(s=0;s<Y0.length;++s)if(Y0[s][1]==n)return Y0[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];n[2]==="date"&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"Z")),typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(uo(ok[n[1]]||n[1],s))}}),ur("DocumentProperties",r.join(""),{xmlns:fc.o})}function ole(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&Bs(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<au.length;++o)if(i==au[o][1])return;for(o=0;o<Y0.length;++o)if(i==Y0[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(ur(S8(i),l,{"dt:dt":c}))}}),t&&Bs(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(ur(S8(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+fc.o+'">'+s.join("")+"</"+n+">"}function lS(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function lle(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=Ft(8);return o.write_shift(4,n),o.write_shift(4,s),o}function JM(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function QM(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function ZM(e,t,r){return t===31?QM(e):JM(e,t,r)}function lk(e,t,r){return ZM(e,t,r===!1?0:4)}function cle(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return ZM(e,t,0)}function ule(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(wl,""),e.l-s&2&&(e.l+=2)}return r}function dle(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(wl,"");return r}function fle(e){var t=e.l,r=cy(e,qM);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=cy(e,$l);return[r,n]}function hle(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(fle(e));return r}function U8(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(wl,"").replace(Lm,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function eR(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function ple(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function cy(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==M8&&n!==t&&Woe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===M8?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return JM(e,n,4).replace(wl,"");case 31:return QM(e);case 64:return lS(e);case 65:return eR(e);case 71:return ple(e);case 80:return lk(e,n,!i.raw).replace(wl,"");case 81:return cle(e,n).replace(wl,"");case 4108:return hle(e);case 4126:case 4127:return n==4127?ule(e):dle(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function q8(e,t){var r=Ft(4),n=Ft(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=Ft(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=lle(t);break;case 31:case 80:for(n=Ft(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return Xi([r,n])}function $8(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,u={};for(o=0;o!=s;++o){var f=e.read_shift(4),d=e.read_shift(4);i[o]=[f,d+r]}i.sort(function(N,j){return N[1]-j[1]});var m={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var p=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,p=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],p=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(p=!1,e.l=i[o][1]),p)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var y=t[i[o][0]];if(m[y.n]=cy(e,y.t,{raw:!0}),y.p==="version"&&(m[y.n]=String(m[y.n]>>16)+"."+("0000"+String(m[y.n]&65535)).slice(-4)),y.n=="CodePage")switch(m[y.n]){case 0:m[y.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Fu(l=m[y.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+m[y.n])}}else if(i[o][0]===1){if(l=m.CodePage=cy(e,iS),Fu(l),c!==-1){var v=e.l;e.l=i[c][1],u=U8(e,l),e.l=v}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}u=U8(e,l)}else{var g=u[i[o][0]],b;switch(e[e.l]){case 65:e.l+=4,b=eR(e);break;case 30:e.l+=4,b=lk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,b=lk(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,b=e.read_shift(4,"i");break;case 19:e.l+=4,b=e.read_shift(4);break;case 5:e.l+=4,b=e.read_shift(8,"f");break;case 11:e.l+=4,b=Ks(e,4);break;case 64:e.l+=4,b=is(lS(e));break;default:throw new Error("unparsed value: "+e[e.l])}m[g]=b}}return e.l=r+n,m}var tR=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function mle(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function z8(e,t,r){var n=Ft(8),s=[],i=[],o=8,l=0,c=Ft(8),u=Ft(8);if(c.write_shift(4,2),c.write_shift(4,1200),u.write_shift(4,1),i.push(c),s.push(u),o+=8+c.length,!t){u=Ft(8),u.write_shift(4,0),s.unshift(u);var f=[Ft(4)];for(f[0].write_shift(4,e.length),l=0;l<e.length;++l){var d=e[l][0];for(c=Ft(8+2*(d.length+1)+(d.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,d.length+1),c.write_shift(0,d,"dbcs");c.l!=c.length;)c.write_shift(1,0);f.push(c)}c=Xi(f),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(tR.indexOf(e[l][0])>-1||GM.indexOf(e[l][0])>-1)&&e[l][1]!=null){var m=e[l][1],p=0;if(t){p=+t[e[l][0]];var y=r[p];if(y.p=="version"&&typeof m=="string"){var v=m.split(".");m=(+v[0]<<16)+(+v[1]||0)}c=q8(y.t,m)}else{var g=mle(m);g==-1&&(g=31,m=String(m)),c=q8(g,m)}i.push(c),u=Ft(8),u.write_shift(4,t?p:2+l),s.push(u),o+=8+c.length}var b=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,b),b+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),Xi([n].concat(s).concat(i))}function H8(e,t,r){var n=e.content;if(!n)return{};co(n,0);var s,i,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var u=n.read_shift(4),f=n.read_shift(16);if(f!==Hr.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),c=n.read_shift(4));var d=$8(n,t),m={SystemIdentifier:u};for(var p in d)m[p]=d[p];if(m.FMTID=i,s===1)return m;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var y;try{y=$8(n,null)}catch{}for(p in y)m[p]=y[p];return m.FMTID=[i,o],m}function W8(e,t,r,n,s,i){var o=Ft(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Hr.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=z8(e,r,n);if(l.push(c),s){var u=z8(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(u)}return Xi(l)}function Uf(e,t){return e.read_shift(t),null}function xle(e,t){t||(t=Ft(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function gle(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function Ks(e,t){return e.read_shift(t)===1}function xl(e,t){return t||(t=Ft(2)),t.write_shift(2,+!!e),t}function mi(e){return e.read_shift(2,"u")}function Qc(e,t){return t||(t=Ft(2)),t.write_shift(2,e),t}function rR(e,t){return gle(e,t,mi)}function vle(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function nR(e,t,r){return r||(r=Ft(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function mg(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function yle(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var u=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,u);return s&&(e.l+=4*o),n&&(e.l+=l),c.t=f,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function ble(e){var t=e.t||"",r=Ft(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=Ft(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return Xi(s)}function ch(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function xg(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):ch(e,n,r)}function Nh(e,t,r){if(r.biff>5)return xg(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function aR(e,t,r){return r||(r=Ft(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function wle(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function Nle(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(wl,"");return n&&(e.l+=24),s}function jle(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(wl,"");return r+o}function kle(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return Nle(e);case"0303000000000000c000000000000046":return jle(e);default:throw new Error("Unsupported Moniker "+r)}}function bv(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(wl,""):"";return r}function V8(e,t){t||(t=Ft(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function Sle(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,c,u="",f,d;s&16&&(i=bv(e,r-e.l)),s&128&&(o=bv(e,r-e.l)),(s&257)===257&&(l=bv(e,r-e.l)),(s&257)===1&&(c=kle(e,r-e.l)),s&8&&(u=bv(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(d=lS(e)),e.l=r;var m=o||l||c||"";m&&u&&(m+="#"+u),m||(m="#"+u),s&2&&m.charAt(0)=="/"&&m.charAt(1)!="/"&&(m="file://"+m);var p={Target:m};return f&&(p.guid=f),d&&(p.time=d),i&&(p.Tooltip=i),p}function _le(e){var t=Ft(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),V8(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&V8(s>-1?n.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function sR(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function iR(e,t){var r=sR(e);return r[3]=0,r}function Od(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function uh(e,t,r,n){return n||(n=Ft(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function Ale(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function Ele(e,t,r){return t===0?"":Nh(e,t,r)}function Cle(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function oR(e){var t=e.read_shift(2),r=sS(e);return[t,r]}function Tle(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=mg(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function sb(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function lR(e,t){return t||(t=Ft(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function cR(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var Ole=cR;function uR(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function Ple(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function Ile(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Eo(e){e.l+=2,e.l+=e.read_shift(2)}var Dle={0:Eo,4:Eo,5:Eo,6:Eo,7:Ile,8:Eo,9:Eo,10:Eo,11:Eo,12:Eo,13:Ple,14:Eo,15:Eo,16:Eo,17:Eo,18:Eo,19:Eo,20:Eo,21:uR};function Lle(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(Dle[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function wv(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function cS(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=Ft(s);return i.write_shift(2,n),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function Fle(e,t){return t===0||e.read_shift(2),1200}function Mle(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=Nh(e,0,r);return e.read_shift(t+n-e.l),s}function Rle(e,t){var r=!t||t.biff==8,n=Ft(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function Ble(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function Ule(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=mg(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function qle(e,t){var r=!t||t.biff>=8?2:1,n=Ft(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function $le(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(yle(e));return i.Count=n,i.Unique=s,i}function zle(e,t){var r=Ft(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=ble(e[s]);var i=Xi([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function Hle(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function Wle(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function Vle(e){var t=Ale(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function Gle(e){return e.read_shift(2),e.read_shift(4)}function G8(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function Kle(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),u=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:u}}function Xle(){var e=Ft(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function Yle(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function Jle(e){var t=Ft(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function Qle(){}function Zle(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=mg(e,0,r),n}function ece(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,i=Ft(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function tce(e){var t=Od(e);return t.isst=e.read_shift(4),t}function rce(e,t,r,n){var s=Ft(10);return uh(e,t,n,s),s.write_shift(4,r),s}function nce(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=Od(e);r.biff==2&&e.l++;var i=xg(e,n-e.l,r);return s.val=i,s}function ace(e,t,r,n,s){var i=!s||s.biff==8,o=Ft(8+ +i+(1+i)*r.length);return uh(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function sce(e,t,r){var n=e.read_shift(2),s=Nh(e,0,r);return[n,s]}function ice(e,t,r,n){var s=r&&r.biff==5;n||(n=Ft(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var oce=Nh;function K8(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c}}}function lce(e,t){var r=t.biff==8||!t.biff?4:2,n=Ft(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function cce(e){var t=e.read_shift(2),r=e.read_shift(2),n=oR(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function uce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(oR(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function dce(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function fce(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=Voe[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function hce(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=fce(e,t,n.fStyle,r),n}function X8(e,t,r,n){var s=r&&r.biff==5;n||(n=Ft(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function pce(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function mce(e){var t=Ft(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function Y8(e,t,r){var n=Od(e);(r.biff==2||t==9)&&++e.l;var s=vle(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function xce(e,t,r,n,s,i){var o=Ft(8);return uh(e,t,n,o),nR(r,i,o),o}function gce(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=Od(e),s=Bo(e);return n.val=s,n}function vce(e,t,r,n){var s=Ft(14);return uh(e,t,n,s),lh(r,s),s}var J8=Ele;function yce(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=ch(e,i),l=[];n>e.l;)l.push(xg(e));return[i,s,o,l]}function Q8(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=Tle(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var bce=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function Z8(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var u=ch(e,o,r);s&32&&(u=bce[u.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var d=n==e.l||l===0||!(f>0)?[]:L0e(e,f,r,l);return{chKey:i,Name:u,itab:c,rgce:d}}function dR(e,t,r){if(r.biff<8)return wce(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(Cle(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function wce(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=mg(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function Nce(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=ch(e,n,r),o=ch(e,s,r);return[i,o]}function jce(e,t,r){var n=cR(e);e.l++;var s=e.read_shift(1);return t-=8,[F0e(e,t,r),s,n]}function eI(e,t,r){var n=Ole(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,I0e(e,t,r)]}function kce(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function Sce(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=Nh(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function _ce(e,t,r){return Sce(e,t,r)}function Ace(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(sb(e));return r}function Ece(e){var t=Ft(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)lR(e[r],t);return t}function Cce(e,t,r){if(r&&r.biff<8)return Oce(e,t,r);var n=uR(e),s=Lle(e,t-22,n[1]);return{cmo:n,ft:s}}var Tce={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function Oce(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((Tce[n]||$o)(e,t,r)),{cmo:[s,n,i],ft:o}}function Pce(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=wle(e,6,r);var l=e.read_shift(2);e.read_shift(2),mi(e,2);var c=e.read_shift(2);e.l+=c;for(var u=1;u<e.lens.length-1;++u){if(e.l-n!=e.lens[u])throw new Error("TxO: bad continue record");var f=e[e.l],d=ch(e,e.lens[u+1]-e.lens[u]-1);if(s+=d,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function Ice(e,t){var r=sb(e);e.l+=16;var n=Sle(e,t-24);return[r,n]}function Dce(e){var t=Ft(24),r=Cs(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return Xi([t,_le(e[1])])}function Lce(e,t){e.read_shift(2);var r=sb(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(wl,""),[r,n]}function Fce(e){var t=e[1].Tooltip,r=Ft(10+2*(t.length+1));r.write_shift(2,2048);var n=Cs(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function Mce(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=R8[r]||r,r=e.read_shift(2),t[1]=R8[r]||r,t}function Rce(e){return e||(e=Ft(4)),e.write_shift(2,1),e.write_shift(2,1),e}function Bce(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(iR(e));return r}function Uce(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(iR(e));return r}function qce(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function fR(e,t,r){if(!r.cellStyles)return $o(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var u={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(u.level=c>>8&7),u}function $ce(e,t){var r=Ft(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function zce(e,t){var r={};return t<32||(e.l+=16,r.header=Bo(e),r.footer=Bo(e),e.l+=2),r}function Hce(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function Wce(e){for(var t=Ft(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var Vce=Od,Gce=rR,Kce=xg;function Xce(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function Yce(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=Od(e);++e.l;var s=Nh(e,t-7,r);return n.t="str",n.val=s,n}function Jce(e){var t=Od(e);++e.l;var r=Bo(e);return t.t="n",t.val=r,t}function Qce(e,t,r){var n=Ft(15);return bg(n,e,t),n.write_shift(8,r,"f"),n}function Zce(e){var t=Od(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function eue(e,t,r){var n=Ft(9);return bg(n,e,t),n.write_shift(2,r),n}function tue(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function rue(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function nue(e,t,r){var n=e.l+t,s=Od(e),i=e.read_shift(2),o=ch(e,i,r);return e.l=n,s.t="str",s.val=o,s}var aue=[2,3,48,49,131,139,140,245],ck=(function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=rb({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var u=[],f=i0(1);switch(c.type){case"base64":f=mc(bc(l));break;case"binary":f=mc(l);break;case"buffer":case"array":f=l;break}co(f,0);var d=f.read_shift(1),m=!!(d&136),p=!1,y=!1;switch(d){case 2:break;case 3:break;case 48:p=!0,m=!0;break;case 49:p=!0,m=!0;break;case 131:break;case 139:break;case 140:y=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+d.toString(16))}var v=0,g=521;d==2&&(v=f.read_shift(2)),f.l+=3,d!=2&&(v=f.read_shift(4)),v>1048576&&(v=1e6),d!=2&&(g=f.read_shift(2));var b=f.read_shift(2),N=c.codepage||1252;d!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(N=e[f[f.l]]),f.l+=1,f.l+=2),y&&(f.l+=36);for(var j=[],w={},S=Math.min(f.length,d==2?521:g-10-(p?264:0)),P=y?32:11;f.l<S&&f[f.l]!=13;)switch(w={},w.name=$x.utils.decode(N,f.slice(f.l,f.l+P)).replace(/[\u0000\r\n].*$/g,""),f.l+=P,w.type=String.fromCharCode(f.read_shift(1)),d!=2&&!y&&(w.offset=f.read_shift(4)),w.len=f.read_shift(1),d==2&&(w.offset=f.read_shift(2)),w.dec=f.read_shift(1),w.name.length&&j.push(w),d!=2&&(f.l+=y?13:14),w.type){case"B":(!p||w.len!=8)&&c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+w.name+":"+w.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+w.type)}if(f[f.l]!==13&&(f.l=g-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=g;var A=0,T=0;for(u[0]=[],T=0;T!=j.length;++T)u[0][T]=j[T].name;for(;v-- >0;){if(f[f.l]===42){f.l+=b;continue}for(++f.l,u[++A]=[],T=0,T=0;T!=j.length;++T){var I=f.slice(f.l,f.l+j[T].len);f.l+=j[T].len,co(I,0);var B=$x.utils.decode(N,I);switch(j[T].type){case"C":B.trim().length&&(u[A][T]=B.replace(/\s+$/,""));break;case"D":B.length===8?u[A][T]=new Date(+B.slice(0,4),+B.slice(4,6)-1,+B.slice(6,8)):u[A][T]=B;break;case"F":u[A][T]=parseFloat(B.trim());break;case"+":case"I":u[A][T]=y?I.read_shift(-4,"i")^2147483648:I.read_shift(4,"i");break;case"L":switch(B.trim().toUpperCase()){case"Y":case"T":u[A][T]=!0;break;case"N":case"F":u[A][T]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+B+"|")}break;case"M":if(!m)throw new Error("DBF Unexpected MEMO for type "+d.toString(16));u[A][T]="##MEMO##"+(y?parseInt(B.trim(),10):I.read_shift(4));break;case"N":B=B.replace(/\u0000/g,"").trim(),B&&B!="."&&(u[A][T]=+B||0);break;case"@":u[A][T]=new Date(I.read_shift(-8,"f")-621356832e5);break;case"T":u[A][T]=new Date((I.read_shift(4)-2440588)*864e5+I.read_shift(4));break;case"Y":u[A][T]=I.read_shift(4,"i")/1e4+I.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":u[A][T]=-I.read_shift(-8,"f");break;case"B":if(p&&j[T].len==8){u[A][T]=I.read_shift(8,"f");break}case"G":case"P":I.l+=j[T].len;break;case"0":if(j[T].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+j[T].type)}}}if(d!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return c&&c.sheetRows&&(u=u.slice(0,c.sheetRows)),c.DBF=j,u}function n(l,c){var u=c||{};u.dateNF||(u.dateNF="yyyymmdd");var f=em(r(l,u),u);return f["!cols"]=u.DBF.map(function(d){return{wch:d.len,DBF:d}}),delete u.DBF,f}function s(l,c){try{return y0(n(l,c),c)}catch(u){if(c&&c.WTF)throw u}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var u=c||{};if(+u.codepage>=0&&Fu(+u.codepage),u.type=="string")throw new Error("Cannot write DBF to JS string");var f=Hl(),d=hy(l,{header:1,raw:!0,cellDates:!0}),m=d[0],p=d.slice(1),y=l["!cols"]||[],v=0,g=0,b=0,N=1;for(v=0;v<m.length;++v){if(((y[v]||{}).DBF||{}).name){m[v]=y[v].DBF.name,++b;continue}if(m[v]!=null){if(++b,typeof m[v]=="number"&&(m[v]=m[v].toString(10)),typeof m[v]!="string")throw new Error("DBF Invalid column name "+m[v]+" |"+typeof m[v]+"|");if(m.indexOf(m[v])!==v){for(g=0;g<1024;++g)if(m.indexOf(m[v]+"_"+g)==-1){m[v]+="_"+g;break}}}}var j=ea(l["!ref"]),w=[],S=[],P=[];for(v=0;v<=j.e.c-j.s.c;++v){var A="",T="",I=0,B=[];for(g=0;g<p.length;++g)p[g][v]!=null&&B.push(p[g][v]);if(B.length==0||m[v]==null){w[v]="?";continue}for(g=0;g<B.length;++g){switch(typeof B[g]){case"number":T="B";break;case"string":T="C";break;case"boolean":T="L";break;case"object":T=B[g]instanceof Date?"D":"C";break;default:T="C"}I=Math.max(I,String(B[g]).length),A=A&&A!=T?"C":T}I>250&&(I=250),T=((y[v]||{}).DBF||{}).type,T=="C"&&y[v].DBF.len>I&&(I=y[v].DBF.len),A=="B"&&T=="N"&&(A="N",P[v]=y[v].DBF.dec,I=y[v].DBF.len),S[v]=A=="C"||T=="N"?I:i[A]||0,N+=S[v],w[v]=A}var E=f.next(32);for(E.write_shift(4,318902576),E.write_shift(4,p.length),E.write_shift(2,296+32*b),E.write_shift(2,N),v=0;v<4;++v)E.write_shift(4,0);for(E.write_shift(4,0|(+t[tM]||3)<<8),v=0,g=0;v<m.length;++v)if(m[v]!=null){var C=f.next(32),M=(m[v].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);C.write_shift(1,M,"sbcs"),C.write_shift(1,w[v]=="?"?"C":w[v],"sbcs"),C.write_shift(4,g),C.write_shift(1,S[v]||i[w[v]]||0),C.write_shift(1,P[v]||0),C.write_shift(1,2),C.write_shift(4,0),C.write_shift(1,0),C.write_shift(4,0),C.write_shift(4,0),g+=S[v]||i[w[v]]||0}var q=f.next(264);for(q.write_shift(4,13),v=0;v<65;++v)q.write_shift(4,0);for(v=0;v<p.length;++v){var G=f.next(N);for(G.write_shift(1,0),g=0;g<m.length;++g)if(m[g]!=null)switch(w[g]){case"L":G.write_shift(1,p[v][g]==null?63:p[v][g]?84:70);break;case"B":G.write_shift(8,p[v][g]||0,"f");break;case"N":var Z="0";for(typeof p[v][g]=="number"&&(Z=p[v][g].toFixed(P[g]||0)),b=0;b<S[g]-Z.length;++b)G.write_shift(1,32);G.write_shift(1,Z,"sbcs");break;case"D":p[v][g]?(G.write_shift(4,("0000"+p[v][g].getFullYear()).slice(-4),"sbcs"),G.write_shift(2,("00"+(p[v][g].getMonth()+1)).slice(-2),"sbcs"),G.write_shift(2,("00"+p[v][g].getDate()).slice(-2),"sbcs")):G.write_shift(8,"00000000","sbcs");break;case"C":var te=String(p[v][g]!=null?p[v][g]:"").slice(0,S[g]);for(G.write_shift(1,te,"sbcs"),b=0;b<S[g]-te.length;++b)G.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}})(),hR=(function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+Bs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(m,p){var y=e[p];return typeof y=="number"?d8(y):y},n=function(m,p,y){var v=p.charCodeAt(0)-32<<4|y.charCodeAt(0)-48;return v==59?m:d8(v)};e["|"]=254;function s(m,p){switch(p.type){case"base64":return i(bc(m),p);case"binary":return i(m,p);case"buffer":return i(Tn&&Buffer.isBuffer(m)?m.toString("binary"):v0(m),p);case"array":return i(oh(m),p)}throw new Error("Unrecognized type "+p.type)}function i(m,p){var y=m.split(/[\n\r]+/),v=-1,g=-1,b=0,N=0,j=[],w=[],S=null,P={},A=[],T=[],I=[],B=0,E;for(+p.codepage>=0&&Fu(+p.codepage);b!==y.length;++b){B=0;var C=y[b].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),M=C.replace(/;;/g,"\0").split(";").map(function(U){return U.replace(/\u0000/g,";")}),q=M[0],G;if(C.length>0)switch(q){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&w.push(C.slice(3).replace(/;;/g,";"));break;case"C":var Z=!1,te=!1,ne=!1,J=!1,ee=-1,H=-1;for(N=1;N<M.length;++N)switch(M[N].charAt(0)){case"A":break;case"X":g=parseInt(M[N].slice(1))-1,te=!0;break;case"Y":for(v=parseInt(M[N].slice(1))-1,te||(g=0),E=j.length;E<=v;++E)j[E]=[];break;case"K":G=M[N].slice(1),G.charAt(0)==='"'?G=G.slice(1,G.length-1):G==="TRUE"?G=!0:G==="FALSE"?G=!1:isNaN(Uu(G))?isNaN(Rp(G).getDate())||(G=is(G)):(G=Uu(G),S!==null&&Qp(S)&&(G=ab(G))),Z=!0;break;case"E":J=!0;var O=lp(M[N].slice(1),{r:v,c:g});j[v][g]=[j[v][g],O];break;case"S":ne=!0,j[v][g]=[j[v][g],"S5S"];break;case"G":break;case"R":ee=parseInt(M[N].slice(1))-1;break;case"C":H=parseInt(M[N].slice(1))-1;break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+C)}if(Z&&(j[v][g]&&j[v][g].length==2?j[v][g][0]=G:j[v][g]=G,S=null),ne){if(J)throw new Error("SYLK shared formula cannot have own formula");var R=ee>-1&&j[ee][H];if(!R||!R[1])throw new Error("SYLK shared formula cannot find base");j[v][g][1]=OR(R[1],{r:v-ee,c:g-H})}break;case"F":var W=0;for(N=1;N<M.length;++N)switch(M[N].charAt(0)){case"X":g=parseInt(M[N].slice(1))-1,++W;break;case"Y":for(v=parseInt(M[N].slice(1))-1,E=j.length;E<=v;++E)j[E]=[];break;case"M":B=parseInt(M[N].slice(1))/20;break;case"F":break;case"G":break;case"P":S=w[parseInt(M[N].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(I=M[N].slice(1).split(" "),E=parseInt(I[0],10);E<=parseInt(I[1],10);++E)B=parseInt(I[2],10),T[E-1]=B===0?{hidden:!0}:{wch:B},o0(T[E-1]);break;case"C":g=parseInt(M[N].slice(1))-1,T[g]||(T[g]={});break;case"R":v=parseInt(M[N].slice(1))-1,A[v]||(A[v]={}),B>0?(A[v].hpt=B,A[v].hpx=Up(B)):B===0&&(A[v].hidden=!0);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+C)}W<1&&(S=null);break;default:if(p&&p.WTF)throw new Error("SYLK bad record "+C)}}return A.length>0&&(P["!rows"]=A),T.length>0&&(P["!cols"]=T),p&&p.sheetRows&&(j=j.slice(0,p.sheetRows)),[j,P]}function o(m,p){var y=s(m,p),v=y[0],g=y[1],b=em(v,p);return Bs(g).forEach(function(N){b[N]=g[N]}),b}function l(m,p){return y0(o(m,p),p)}function c(m,p,y,v){var g="C;Y"+(y+1)+";X"+(v+1)+";K";switch(m.t){case"n":g+=m.v||0,m.f&&!m.F&&(g+=";E"+mS(m.f,{r:y,c:v}));break;case"b":g+=m.v?"TRUE":"FALSE";break;case"e":g+=m.w||m.v;break;case"d":g+='"'+(m.w||m.v)+'"';break;case"s":g+='"'+m.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return g}function u(m,p){p.forEach(function(y,v){var g="F;W"+(v+1)+" "+(v+1)+" ";y.hidden?g+="0":(typeof y.width=="number"&&!y.wpx&&(y.wpx=Yx(y.width)),typeof y.wpx=="number"&&!y.wch&&(y.wch=Jx(y.wpx)),typeof y.wch=="number"&&(g+=Math.round(y.wch))),g.charAt(g.length-1)!=" "&&m.push(g)})}function f(m,p){p.forEach(function(y,v){var g="F;";y.hidden?g+="M0;":y.hpt?g+="M"+20*y.hpt+";":y.hpx&&(g+="M"+20*Qx(y.hpx)+";"),g.length>2&&m.push(g+"R"+(v+1))})}function d(m,p){var y=["ID;PWXL;N;E"],v=[],g=ea(m["!ref"]),b,N=Array.isArray(m),j=`\r
`;y.push("P;PGeneral"),y.push("F;P0;DG0G8;M255"),m["!cols"]&&u(y,m["!cols"]),m["!rows"]&&f(y,m["!rows"]),y.push("B;Y"+(g.e.r-g.s.r+1)+";X"+(g.e.c-g.s.c+1)+";D"+[g.s.c,g.s.r,g.e.c,g.e.r].join(" "));for(var w=g.s.r;w<=g.e.r;++w)for(var S=g.s.c;S<=g.e.c;++S){var P=tn({r:w,c:S});b=N?(m[w]||[])[S]:m[P],!(!b||b.v==null&&(!b.f||b.F))&&v.push(c(b,m,w,S))}return y.join(j)+j+v.join(j)+j+"E"+j}return{to_workbook:l,to_sheet:o,from_sheet:d}})(),pR=(function(){function e(i,o){switch(o.type){case"base64":return t(bc(i),o);case"binary":return t(i,o);case"buffer":return t(Tn&&Buffer.isBuffer(i)?i.toString("binary"):v0(i),o);case"array":return t(oh(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,u=-1,f=0,d=[];f!==l.length;++f){if(l[f].trim()==="BOT"){d[++c]=[],u=0;continue}if(!(c<0)){var m=l[f].trim().split(","),p=m[0],y=m[1];++f;for(var v=l[f]||"";(v.match(/["]/g)||[]).length&1&&f<l.length-1;)v+=`
`+l[++f];switch(v=v.trim(),+p){case-1:if(v==="BOT"){d[++c]=[],u=0;continue}else if(v!=="EOD")throw new Error("Unrecognized DIF special command "+v);break;case 0:v==="TRUE"?d[c][u]=!0:v==="FALSE"?d[c][u]=!1:isNaN(Uu(y))?isNaN(Rp(y).getDate())?d[c][u]=y:d[c][u]=is(y):d[c][u]=Uu(y),++u;break;case 1:v=v.slice(1,v.length-1),v=v.replace(/""/g,'"'),v&&v.match(/^=".*"$/)&&(v=v.slice(2,-1)),d[c][u++]=v!==""?v:null;break}if(v==="EOD")break}}return o&&o.sheetRows&&(d=d.slice(0,o.sheetRows)),d}function r(i,o){return em(e(i,o),o)}function n(i,o){return y0(r(i,o),o)}var s=(function(){var i=function(c,u,f,d,m){c.push(u),c.push(f+","+d),c.push('"'+m.replace(/"/g,'""')+'"')},o=function(c,u,f,d){c.push(u+","+f),c.push(u==1?'"'+d.replace(/"/g,'""')+'"':d)};return function(c){var u=[],f=ea(c["!ref"]),d,m=Array.isArray(c);i(u,"TABLE",0,1,"sheetjs"),i(u,"VECTORS",0,f.e.r-f.s.r+1,""),i(u,"TUPLES",0,f.e.c-f.s.c+1,""),i(u,"DATA",0,0,"");for(var p=f.s.r;p<=f.e.r;++p){o(u,-1,0,"BOT");for(var y=f.s.c;y<=f.e.c;++y){var v=tn({r:p,c:y});if(d=m?(c[p]||[])[y]:c[v],!d){o(u,1,0,"");continue}switch(d.t){case"n":var g=d.w;!g&&d.v!=null&&(g=d.v),g==null?d.f&&!d.F?o(u,1,0,"="+d.f):o(u,1,0,""):o(u,0,g,"V");break;case"b":o(u,0,d.v?1:0,d.v?"TRUE":"FALSE");break;case"s":o(u,1,0,isNaN(d.v)?d.v:'="'+d.v+'"');break;case"d":d.w||(d.w=iu(d.z||Jr[14],Di(is(d.v)))),o(u,0,d.w,"V");break;default:o(u,1,0,"")}}}o(u,-1,0,"EOD");var b=`\r
`,N=u.join(b);return N}})();return{to_workbook:n,to_sheet:r,from_sheet:s}})(),mR=(function(){function e(d){return d.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(d){return d.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(d,m){for(var p=d.split(`
`),y=-1,v=-1,g=0,b=[];g!==p.length;++g){var N=p[g].trim().split(":");if(N[0]==="cell"){var j=Cs(N[1]);if(b.length<=j.r)for(y=b.length;y<=j.r;++y)b[y]||(b[y]=[]);switch(y=j.r,v=j.c,N[2]){case"t":b[y][v]=e(N[3]);break;case"v":b[y][v]=+N[3];break;case"vtf":var w=N[N.length-1];case"vtc":N[3]==="nl"?b[y][v]=!!+N[4]:b[y][v]=+N[4],N[2]=="vtf"&&(b[y][v]=[b[y][v],w])}}}return m&&m.sheetRows&&(b=b.slice(0,m.sheetRows)),b}function n(d,m){return em(r(d,m),m)}function s(d,m){return y0(n(d,m),m)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function u(d){if(!d||!d["!ref"])return"";for(var m=[],p=[],y,v="",g=Wl(d["!ref"]),b=Array.isArray(d),N=g.s.r;N<=g.e.r;++N)for(var j=g.s.c;j<=g.e.c;++j)if(v=tn({r:N,c:j}),y=b?(d[N]||[])[j]:d[v],!(!y||y.v==null||y.t==="z")){switch(p=["cell",v,"t"],y.t){case"s":case"str":p.push(t(y.v));break;case"n":y.f?(p[2]="vtf",p[3]="n",p[4]=y.v,p[5]=t(y.f)):(p[2]="v",p[3]=y.v);break;case"b":p[2]="vt"+(y.f?"f":"c"),p[3]="nl",p[4]=y.v?"1":"0",p[5]=t(y.f||(y.v?"TRUE":"FALSE"));break;case"d":var w=Di(is(y.v));p[2]="vtc",p[3]="nd",p[4]=""+w,p[5]=y.w||iu(y.z||Jr[14],w);break;case"e":continue}m.push(p.join(":"))}return m.push("sheet:c:"+(g.e.c-g.s.c+1)+":r:"+(g.e.r-g.s.r+1)+":tvf:1"),m.push("valueformat:1:text-wiki"),m.join(`
`)}function f(d){return[i,o,l,o,u(d),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}})(),Bp=(function(){function e(f,d,m,p,y){y.raw?d[m][p]=f:f===""||(f==="TRUE"?d[m][p]=!0:f==="FALSE"?d[m][p]=!1:isNaN(Uu(f))?isNaN(Rp(f).getDate())?d[m][p]=f:d[m][p]=is(f):d[m][p]=Uu(f))}function t(f,d){var m=d||{},p=[];if(!f||f.length===0)return p;for(var y=f.split(/[\r\n]/),v=y.length-1;v>=0&&y[v].length===0;)--v;for(var g=10,b=0,N=0;N<=v;++N)b=y[N].indexOf(" "),b==-1?b=y[N].length:b++,g=Math.max(g,b);for(N=0;N<=v;++N){p[N]=[];var j=0;for(e(y[N].slice(0,g).trim(),p,N,j,m),j=1;j<=(y[N].length-g)/10+1;++j)e(y[N].slice(g+(j-1)*10,g+j*10).trim(),p,N,j,m)}return m.sheetRows&&(p=p.slice(0,m.sheetRows)),p}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var d={},m=!1,p=0,y=0;p<f.length;++p)(y=f.charCodeAt(p))==34?m=!m:!m&&y in r&&(d[y]=(d[y]||0)+1);y=[];for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&y.push([d[p],p]);if(!y.length){d=n;for(p in d)Object.prototype.hasOwnProperty.call(d,p)&&y.push([d[p],p])}return y.sort(function(v,g){return v[0]-g[0]||n[v[1]]-n[g[1]]}),r[y.pop()[1]]||44}function i(f,d){var m=d||{},p="",y=m.dense?[]:{},v={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(p=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(p=f.charAt(4),f=f.slice(6)):p=s(f.slice(0,1024)):m&&m.FS?p=m.FS:p=s(f.slice(0,1024));var g=0,b=0,N=0,j=0,w=0,S=p.charCodeAt(0),P=!1,A=0,T=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var I=m.dateNF!=null?Hie(m.dateNF):null;function B(){var E=f.slice(j,w),C={};if(E.charAt(0)=='"'&&E.charAt(E.length-1)=='"'&&(E=E.slice(1,-1).replace(/""/g,'"')),E.length===0)C.t="z";else if(m.raw)C.t="s",C.v=E;else if(E.trim().length===0)C.t="s",C.v=E;else if(E.charCodeAt(0)==61)E.charCodeAt(1)==34&&E.charCodeAt(E.length-1)==34?(C.t="s",C.v=E.slice(2,-1).replace(/""/g,'"')):yfe(E)?(C.t="n",C.f=E.slice(1)):(C.t="s",C.v=E);else if(E=="TRUE")C.t="b",C.v=!0;else if(E=="FALSE")C.t="b",C.v=!1;else if(!isNaN(N=Uu(E)))C.t="n",m.cellText!==!1&&(C.w=E),C.v=N;else if(!isNaN(Rp(E).getDate())||I&&E.match(I)){C.z=m.dateNF||Jr[14];var M=0;I&&E.match(I)&&(E=Wie(E,m.dateNF,E.match(I)||[]),M=1),m.cellDates?(C.t="d",C.v=is(E,M)):(C.t="n",C.v=Di(is(E,M))),m.cellText!==!1&&(C.w=iu(C.z,C.v instanceof Date?Di(C.v):C.v)),m.cellNF||delete C.z}else C.t="s",C.v=E;if(C.t=="z"||(m.dense?(y[g]||(y[g]=[]),y[g][b]=C):y[tn({c:b,r:g})]=C),j=w+1,T=f.charCodeAt(j),v.e.c<b&&(v.e.c=b),v.e.r<g&&(v.e.r=g),A==S)++b;else if(b=0,++g,m.sheetRows&&m.sheetRows<=g)return!0}e:for(;w<f.length;++w)switch(A=f.charCodeAt(w)){case 34:T===34&&(P=!P);break;case S:case 10:case 13:if(!P&&B())break e;break}return w-j>0&&B(),y["!ref"]=gn(v),y}function o(f,d){return!(d&&d.PRN)||d.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,d):em(t(f,d),d)}function l(f,d){var m="",p=d.type=="string"?[0,0,0,0]:jS(f,d);switch(d.type){case"base64":m=bc(f);break;case"binary":m=f;break;case"buffer":d.codepage==65001?m=f.toString("utf8"):d.codepage&&typeof $x<"u"||(m=Tn&&Buffer.isBuffer(f)?f.toString("binary"):v0(f));break;case"array":m=oh(f);break;case"string":m=f;break;default:throw new Error("Unrecognized type "+d.type)}return p[0]==239&&p[1]==187&&p[2]==191?m=Ba(m.slice(3)):d.type!="string"&&d.type!="buffer"&&d.codepage==65001?m=Ba(m):d.type=="binary"&&typeof $x<"u",m.slice(0,19)=="socialcalc:version:"?mR.to_sheet(d.type=="string"?m:Ba(m),d):o(m,d)}function c(f,d){return y0(l(f,d),d)}function u(f){for(var d=[],m=ea(f["!ref"]),p,y=Array.isArray(f),v=m.s.r;v<=m.e.r;++v){for(var g=[],b=m.s.c;b<=m.e.c;++b){var N=tn({r:v,c:b});if(p=y?(f[v]||[])[b]:f[N],!p||p.v==null){g.push("          ");continue}for(var j=(p.w||(xf(p),p.w)||"").slice(0,10);j.length<10;)j+=" ";g.push(j+(b===0?" ":""))}d.push(g.join(""))}return d.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:u}})();function sue(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=hR.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Bp.to_workbook(e,t)}}var J0=(function(){function e(O,R,W){if(O){co(O,O.l||0);for(var U=W.Enum||ee;O.l<O.length;){var K=O.read_shift(2),oe=U[K]||U[65535],he=O.read_shift(2),ie=O.l+he,ce=oe.f&&oe.f(O,he,W);if(O.l=ie,R(ce,oe,K))return}}}function t(O,R){switch(R.type){case"base64":return r(mc(bc(O)),R);case"binary":return r(mc(O),R);case"buffer":case"array":return r(O,R)}throw"Unsupported type "+R.type}function r(O,R){if(!O)return O;var W=R||{},U=W.dense?[]:{},K="Sheet1",oe="",he=0,ie={},ce=[],Le=[],le={s:{r:0,c:0},e:{r:0,c:0}},He=W.sheetRows||0;if(O[2]==0&&(O[3]==8||O[3]==9)&&O.length>=16&&O[14]==5&&O[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(O[2]==2)W.Enum=ee,e(O,function(we,ve,Ee){switch(Ee){case 0:W.vers=we,we>=4096&&(W.qpro=!0);break;case 6:le=we;break;case 204:we&&(oe=we);break;case 222:oe=we;break;case 15:case 51:W.qpro||(we[1].v=we[1].v.slice(1));case 13:case 14:case 16:Ee==14&&(we[2]&112)==112&&(we[2]&15)>1&&(we[2]&15)<15&&(we[1].z=W.dateNF||Jr[14],W.cellDates&&(we[1].t="d",we[1].v=ab(we[1].v))),W.qpro&&we[3]>he&&(U["!ref"]=gn(le),ie[K]=U,ce.push(K),U=W.dense?[]:{},le={s:{r:0,c:0},e:{r:0,c:0}},he=we[3],K=oe||"Sheet"+(he+1),oe="");var pe=W.dense?(U[we[0].r]||[])[we[0].c]:U[tn(we[0])];if(pe){pe.t=we[1].t,pe.v=we[1].v,we[1].z!=null&&(pe.z=we[1].z),we[1].f!=null&&(pe.f=we[1].f);break}W.dense?(U[we[0].r]||(U[we[0].r]=[]),U[we[0].r][we[0].c]=we[1]):U[tn(we[0])]=we[1];break}},W);else if(O[2]==26||O[2]==14)W.Enum=H,O[2]==14&&(W.qpro=!0,O.l=0),e(O,function(we,ve,Ee){switch(Ee){case 204:K=we;break;case 22:we[1].v=we[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(we[3]>he&&(U["!ref"]=gn(le),ie[K]=U,ce.push(K),U=W.dense?[]:{},le={s:{r:0,c:0},e:{r:0,c:0}},he=we[3],K="Sheet"+(he+1)),He>0&&we[0].r>=He)break;W.dense?(U[we[0].r]||(U[we[0].r]=[]),U[we[0].r][we[0].c]=we[1]):U[tn(we[0])]=we[1],le.e.c<we[0].c&&(le.e.c=we[0].c),le.e.r<we[0].r&&(le.e.r=we[0].r);break;case 27:we[14e3]&&(Le[we[14e3][0]]=we[14e3][1]);break;case 1537:Le[we[0]]=we[1],we[0]==he&&(K=we[1]);break}},W);else throw new Error("Unrecognized LOTUS BOF "+O[2]);if(U["!ref"]=gn(le),ie[oe||K]=U,ce.push(oe||K),!Le.length)return{SheetNames:ce,Sheets:ie};for(var Fe={},fe=[],Q=0;Q<Le.length;++Q)ie[ce[Q]]?(fe.push(Le[Q]||ce[Q]),Fe[Le[Q]]=ie[Le[Q]]||ie[ce[Q]]):(fe.push(Le[Q]),Fe[Le[Q]]={"!ref":"A1"});return{SheetNames:fe,Sheets:Fe}}function n(O,R){var W=R||{};if(+W.codepage>=0&&Fu(+W.codepage),W.type=="string")throw new Error("Cannot write WK1 to JS string");var U=Hl(),K=ea(O["!ref"]),oe=Array.isArray(O),he=[];fr(U,0,i(1030)),fr(U,6,c(K));for(var ie=Math.min(K.e.r,8191),ce=K.s.r;ce<=ie;++ce)for(var Le=Zs(ce),le=K.s.c;le<=K.e.c;++le){ce===K.s.r&&(he[le]=Es(le));var He=he[le]+Le,Fe=oe?(O[ce]||[])[le]:O[He];if(!(!Fe||Fe.t=="z"))if(Fe.t=="n")(Fe.v|0)==Fe.v&&Fe.v>=-32768&&Fe.v<=32767?fr(U,13,p(ce,le,Fe.v)):fr(U,14,v(ce,le,Fe.v));else{var fe=xf(Fe);fr(U,15,d(ce,le,fe.slice(0,239)))}}return fr(U,1),U.end()}function s(O,R){var W=R||{};if(+W.codepage>=0&&Fu(+W.codepage),W.type=="string")throw new Error("Cannot write WK3 to JS string");var U=Hl();fr(U,0,o(O));for(var K=0,oe=0;K<O.SheetNames.length;++K)(O.Sheets[O.SheetNames[K]]||{})["!ref"]&&fr(U,27,J(O.SheetNames[K],oe++));var he=0;for(K=0;K<O.SheetNames.length;++K){var ie=O.Sheets[O.SheetNames[K]];if(!(!ie||!ie["!ref"])){for(var ce=ea(ie["!ref"]),Le=Array.isArray(ie),le=[],He=Math.min(ce.e.r,8191),Fe=ce.s.r;Fe<=He;++Fe)for(var fe=Zs(Fe),Q=ce.s.c;Q<=ce.e.c;++Q){Fe===ce.s.r&&(le[Q]=Es(Q));var we=le[Q]+fe,ve=Le?(ie[Fe]||[])[Q]:ie[we];if(!(!ve||ve.t=="z"))if(ve.t=="n")fr(U,23,B(Fe,Q,he,ve.v));else{var Ee=xf(ve);fr(U,22,A(Fe,Q,he,Ee.slice(0,239)))}}++he}}return fr(U,1),U.end()}function i(O){var R=Ft(2);return R.write_shift(2,O),R}function o(O){var R=Ft(26);R.write_shift(2,4096),R.write_shift(2,4),R.write_shift(4,0);for(var W=0,U=0,K=0,oe=0;oe<O.SheetNames.length;++oe){var he=O.SheetNames[oe],ie=O.Sheets[he];if(!(!ie||!ie["!ref"])){++K;var ce=Wl(ie["!ref"]);W<ce.e.r&&(W=ce.e.r),U<ce.e.c&&(U=ce.e.c)}}return W>8191&&(W=8191),R.write_shift(2,W),R.write_shift(1,K),R.write_shift(1,U),R.write_shift(2,0),R.write_shift(2,0),R.write_shift(1,1),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(4,0),R}function l(O,R,W){var U={s:{c:0,r:0},e:{c:0,r:0}};return R==8&&W.qpro?(U.s.c=O.read_shift(1),O.l++,U.s.r=O.read_shift(2),U.e.c=O.read_shift(1),O.l++,U.e.r=O.read_shift(2),U):(U.s.c=O.read_shift(2),U.s.r=O.read_shift(2),R==12&&W.qpro&&(O.l+=2),U.e.c=O.read_shift(2),U.e.r=O.read_shift(2),R==12&&W.qpro&&(O.l+=2),U.s.c==65535&&(U.s.c=U.e.c=U.s.r=U.e.r=0),U)}function c(O){var R=Ft(8);return R.write_shift(2,O.s.c),R.write_shift(2,O.s.r),R.write_shift(2,O.e.c),R.write_shift(2,O.e.r),R}function u(O,R,W){var U=[{c:0,r:0},{t:"n",v:0},0,0];return W.qpro&&W.vers!=20768?(U[0].c=O.read_shift(1),U[3]=O.read_shift(1),U[0].r=O.read_shift(2),O.l+=2):(U[2]=O.read_shift(1),U[0].c=O.read_shift(2),U[0].r=O.read_shift(2)),U}function f(O,R,W){var U=O.l+R,K=u(O,R,W);if(K[1].t="s",W.vers==20768){O.l++;var oe=O.read_shift(1);return K[1].v=O.read_shift(oe,"utf8"),K}return W.qpro&&O.l++,K[1].v=O.read_shift(U-O.l,"cstr"),K}function d(O,R,W){var U=Ft(7+W.length);U.write_shift(1,255),U.write_shift(2,R),U.write_shift(2,O),U.write_shift(1,39);for(var K=0;K<U.length;++K){var oe=W.charCodeAt(K);U.write_shift(1,oe>=128?95:oe)}return U.write_shift(1,0),U}function m(O,R,W){var U=u(O,R,W);return U[1].v=O.read_shift(2,"i"),U}function p(O,R,W){var U=Ft(7);return U.write_shift(1,255),U.write_shift(2,R),U.write_shift(2,O),U.write_shift(2,W,"i"),U}function y(O,R,W){var U=u(O,R,W);return U[1].v=O.read_shift(8,"f"),U}function v(O,R,W){var U=Ft(13);return U.write_shift(1,255),U.write_shift(2,R),U.write_shift(2,O),U.write_shift(8,W,"f"),U}function g(O,R,W){var U=O.l+R,K=u(O,R,W);if(K[1].v=O.read_shift(8,"f"),W.qpro)O.l=U;else{var oe=O.read_shift(2);w(O.slice(O.l,O.l+oe),K),O.l+=oe}return K}function b(O,R,W){var U=R&32768;return R&=-32769,R=(U?O:0)+(R>=8192?R-16384:R),(U?"":"$")+(W?Es(R):Zs(R))}var N={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},j=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function w(O,R){co(O,0);for(var W=[],U=0,K="",oe="",he="",ie="";O.l<O.length;){var ce=O[O.l++];switch(ce){case 0:W.push(O.read_shift(8,"f"));break;case 1:oe=b(R[0].c,O.read_shift(2),!0),K=b(R[0].r,O.read_shift(2),!1),W.push(oe+K);break;case 2:{var Le=b(R[0].c,O.read_shift(2),!0),le=b(R[0].r,O.read_shift(2),!1);oe=b(R[0].c,O.read_shift(2),!0),K=b(R[0].r,O.read_shift(2),!1),W.push(Le+le+":"+oe+K)}break;case 3:if(O.l<O.length){console.error("WK1 premature formula end");return}break;case 4:W.push("("+W.pop()+")");break;case 5:W.push(O.read_shift(2));break;case 6:{for(var He="";ce=O[O.l++];)He+=String.fromCharCode(ce);W.push('"'+He.replace(/"/g,'""')+'"')}break;case 8:W.push("-"+W.pop());break;case 23:W.push("+"+W.pop());break;case 22:W.push("NOT("+W.pop()+")");break;case 20:case 21:ie=W.pop(),he=W.pop(),W.push(["AND","OR"][ce-20]+"("+he+","+ie+")");break;default:if(ce<32&&j[ce])ie=W.pop(),he=W.pop(),W.push(he+j[ce]+ie);else if(N[ce]){if(U=N[ce][1],U==69&&(U=O[O.l++]),U>W.length){console.error("WK1 bad formula parse 0x"+ce.toString(16)+":|"+W.join("|")+"|");return}var Fe=W.slice(-U);W.length-=U,W.push(N[ce][0]+"("+Fe.join(",")+")")}else return ce<=7?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=24?console.error("WK1 unsupported op "+ce.toString(16)):ce<=30?console.error("WK1 invalid opcode "+ce.toString(16)):ce<=115?console.error("WK1 unsupported function opcode "+ce.toString(16)):console.error("WK1 unrecognized opcode "+ce.toString(16))}}W.length==1?R[1].f=""+W[0]:console.error("WK1 bad formula parse |"+W.join("|")+"|")}function S(O){var R=[{c:0,r:0},{t:"n",v:0},0];return R[0].r=O.read_shift(2),R[3]=O[O.l++],R[0].c=O[O.l++],R}function P(O,R){var W=S(O);return W[1].t="s",W[1].v=O.read_shift(R-4,"cstr"),W}function A(O,R,W,U){var K=Ft(6+U.length);K.write_shift(2,O),K.write_shift(1,W),K.write_shift(1,R),K.write_shift(1,39);for(var oe=0;oe<U.length;++oe){var he=U.charCodeAt(oe);K.write_shift(1,he>=128?95:he)}return K.write_shift(1,0),K}function T(O,R){var W=S(O);W[1].v=O.read_shift(2);var U=W[1].v>>1;if(W[1].v&1)switch(U&7){case 0:U=(U>>3)*5e3;break;case 1:U=(U>>3)*500;break;case 2:U=(U>>3)/20;break;case 3:U=(U>>3)/200;break;case 4:U=(U>>3)/2e3;break;case 5:U=(U>>3)/2e4;break;case 6:U=(U>>3)/16;break;case 7:U=(U>>3)/64;break}return W[1].v=U,W}function I(O,R){var W=S(O),U=O.read_shift(4),K=O.read_shift(4),oe=O.read_shift(2);if(oe==65535)return U===0&&K===3221225472?(W[1].t="e",W[1].v=15):U===0&&K===3489660928?(W[1].t="e",W[1].v=42):W[1].v=0,W;var he=oe&32768;return oe=(oe&32767)-16446,W[1].v=(1-he*2)*(K*Math.pow(2,oe+32)+U*Math.pow(2,oe)),W}function B(O,R,W,U){var K=Ft(14);if(K.write_shift(2,O),K.write_shift(1,W),K.write_shift(1,R),U==0)return K.write_shift(4,0),K.write_shift(4,0),K.write_shift(2,65535),K;var oe=0,he=0,ie=0,ce=0;return U<0&&(oe=1,U=-U),he=Math.log2(U)|0,U/=Math.pow(2,he-31),ce=U>>>0,(ce&2147483648)==0&&(U/=2,++he,ce=U>>>0),U-=ce,ce|=2147483648,ce>>>=0,U*=Math.pow(2,32),ie=U>>>0,K.write_shift(4,ie),K.write_shift(4,ce),he+=16383+(oe?32768:0),K.write_shift(2,he),K}function E(O,R){var W=I(O);return O.l+=R-14,W}function C(O,R){var W=S(O),U=O.read_shift(4);return W[1].v=U>>6,W}function M(O,R){var W=S(O),U=O.read_shift(8,"f");return W[1].v=U,W}function q(O,R){var W=M(O);return O.l+=R-10,W}function G(O,R){return O[O.l+R-1]==0?O.read_shift(R,"cstr"):""}function Z(O,R){var W=O[O.l++];W>R-1&&(W=R-1);for(var U="";U.length<W;)U+=String.fromCharCode(O[O.l++]);return U}function te(O,R,W){if(!(!W.qpro||R<21)){var U=O.read_shift(1);O.l+=17,O.l+=1,O.l+=2;var K=O.read_shift(R-21,"cstr");return[U,K]}}function ne(O,R){for(var W={},U=O.l+R;O.l<U;){var K=O.read_shift(2);if(K==14e3){for(W[K]=[0,""],W[K][0]=O.read_shift(2);O[O.l];)W[K][1]+=String.fromCharCode(O[O.l]),O.l++;O.l++}}return W}function J(O,R){var W=Ft(5+O.length);W.write_shift(2,14e3),W.write_shift(2,R);for(var U=0;U<O.length;++U){var K=O.charCodeAt(U);W[W.l++]=K>127?95:K}return W[W.l++]=0,W}var ee={0:{n:"BOF",f:mi},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:m},14:{n:"NUMBER",f:y},15:{n:"LABEL",f},16:{n:"FORMULA",f:g},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:G},222:{n:"SHEETNAMELP",f:Z},65535:{n:""}},H={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:P},23:{n:"NUMBER17",f:I},24:{n:"NUMBER18",f:T},25:{n:"FORMULA19",f:E},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:ne},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:C},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:q},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:G},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:te},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}})();function iue(e){var t={},r=e.match(zo),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=nn(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=U3[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var oue=(function(){var e=Wx("t"),t=Wx("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Zn(o[1])},c=i.match(t);return c&&(l.s=iue(c[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}})(),lue=(function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}})(),cue=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,uue=/<(?:\w+:)?r>/,due=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function uS(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Zn(Ba(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=Ba(e),r&&(n.h=Y3(n.t))):e.match(uue)&&(n.r=Ba(e),n.t=Zn(Ba((e.replace(due,"").match(cue)||[]).join("").replace(zo,""))),r&&(n.h=lue(oue(n.r)))),n):{t:""}}var fue=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,hue=/<(?:\w+:)?(?:si|sstItem)>/g,pue=/<\/(?:\w+:)?(?:si|sstItem)>/;function mue(e,t){var r=[],n="";if(!e)return r;var s=e.match(fue);if(s){n=s[2].replace(hue,"").split(pue);for(var i=0;i!=n.length;++i){var o=uS(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=nn(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var xue=/^\s|\s$|[\t\n\r]/;function xR(e,t){if(!t.bookSST)return"";var r=[ei];r[r.length]=ur("sst",null,{xmlns:gh[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(xue)&&(i+=' xml:space="preserve"'),i+=">"+Sa(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function gue(e){return[e.read_shift(4),e.read_shift(4)]}function vue(e,t){var r=[],n=!1;return wf(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function yue(e,t){return t||(t=Ft(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var bue=Toe;function wue(e){var t=Hl();Vt(t,159,yue(e));for(var r=0;r<e.length;++r)Vt(t,19,bue(e[r]));return Vt(t,160),t.end()}function gR(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function uf(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function Nue(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=uf(e,4),t.U=uf(e,4),t.W=uf(e,4),t}function jue(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function kue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(jue(e));return t}function Sue(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function _ue(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=uf(e,4),t.U=uf(e,4),t.W=uf(e,4),t}function Aue(e){var t=_ue(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function vR(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function yR(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Eue(e){var t=uf(e);switch(t.Minor){case 2:return[t.Minor,Cue(e)];case 3:return[t.Minor,Tue()];case 4:return[t.Minor,Oue(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function Cue(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=vR(e,r),s=yR(e,e.length-e.l);return{t:"Std",h:n,v:s}}function Tue(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Oue(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(zo,function(i){var o=nn(i);switch(Td(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function Pue(e,t){var r={},n=r.EncryptionVersionInfo=uf(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=vR(e,s),t-=s,r.EncryptionVerifier=yR(e,t),r}function Iue(e){var t={},r=t.EncryptionVersionInfo=uf(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function dS(e){var t=0,r,n=gR(e),s=n.length+1,i,o,l,c,u;for(r=i0(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=(t&16384)===0?0:1,c=t<<1&32767,u=l|c,t=u^o;return t^52811}var bR=(function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],c=104,u=o.length-1;u>=0;--u)for(var f=o[u],d=0;d!=7;++d)f&64&&(l^=r[c]),f*=2,--c;return l};return function(o){for(var l=gR(o),c=i(l),u=l.length,f=i0(16),d=0;d!=16;++d)f[d]=0;var m,p,y;for((u&1)===1&&(m=c>>8,f[u]=s(e[0],m),--u,m=c&255,p=l[l.length-1],f[u]=s(p,m));u>0;)--u,m=c>>8,f[u]=s(l[u],m),--u,m=c&255,f[u]=s(l[u],m);for(u=15,y=15-l.length;y>0;)m=c>>8,f[u]=s(e[y],m),--u,--y,m=c&255,f[u]=s(l[u],m),--u,--y;return f}})(),Due=function(e,t,r,n,s){s||(s=t),n||(n=bR(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},Lue=function(e){var t=0,r=bR(e);return function(n){var s=Due("",n,t,r);return t=s[1],s[0]}};function Fue(e,t,r,n){var s={key:mi(e),verificationBytes:mi(e)};return r.password&&(s.verifier=dS(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=Lue(r.password)),s}function Mue(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Iue(e):n.Data=Pue(e,t),n}function Rue(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Mue(e,t-2,n):Fue(e,r.biff>=8?t:t-2,r,n),n}var wR=(function(){function e(s,i){switch(i.type){case"base64":return t(bc(s),i);case"binary":return t(s,i);case"buffer":return t(Tn&&Buffer.isBuffer(s)?s.toString("binary"):v0(s),i);case"array":return t(oh(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var u={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(f,d){Array.isArray(l)&&(l[d]=[]);for(var m=/\\\w+\b/g,p=0,y,v=-1;y=m.exec(f);){switch(y[0]){case"\\cell":var g=f.slice(p,m.lastIndex-y[0].length);if(g[0]==" "&&(g=g.slice(1)),++v,g.length){var b={v:g,t:"s"};Array.isArray(l)?l[d][v]=b:l[tn({r:d,c:v})]=b}break}p=m.lastIndex}v>u.e.c&&(u.e.c=v)}),l["!ref"]=gn(u),l}function r(s,i){return y0(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=ea(s["!ref"]),l,c=Array.isArray(s),u=o.s.r;u<=o.e.r;++u){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var d=tn({r:u,c:f});l=c?(s[u]||[])[f]:s[d],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(xf(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}})();function Bue(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function Xx(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Uue(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,u=s+i;switch(c=o/(u>1?2-u:u),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,u/2]}function que(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var u=0;u!=3;++u)o[u]=Math.round(o[u]*255);return o}function uy(e,t){if(t===0)return e;var r=Uue(Bue(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),Xx(que(r))}var NR=6,$ue=15,zue=1,Ro=NR;function Yx(e){return Math.floor((e+Math.round(128/Ro)/256)*Ro)}function Jx(e){return Math.floor((e-5)/Ro*100+.5)/100}function dy(e){return Math.round((e*Ro+5)/Ro*256)/256}function rj(e){return dy(Jx(Yx(e)))}function fS(e){var t=Math.abs(e-rj(e)),r=Ro;if(t>.005)for(Ro=zue;Ro<$ue;++Ro)Math.abs(e-rj(e))<=t&&(t=Math.abs(e-rj(e)),r=Ro);Ro=r}function o0(e){e.width?(e.wpx=Yx(e.width),e.wch=Jx(e.wpx),e.MDW=Ro):e.wpx?(e.wch=Jx(e.wpx),e.width=dy(e.wch),e.MDW=Ro):typeof e.wch=="number"&&(e.width=dy(e.wch),e.wpx=Yx(e.width),e.MDW=Ro),e.customWidth&&delete e.customWidth}var Hue=96,jR=Hue;function Qx(e){return e*96/jR}function Up(e){return e*jR/96}var Wue={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function Vue(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(zo)||[]).forEach(function(o){var l=nn(o);switch(Td(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=as(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=as(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function Gue(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(zo)||[]).forEach(function(o){var l=nn(o);switch(Td(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function Kue(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(zo)||[]).forEach(function(o){var l=nn(o);switch(Td(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=Ba(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?as(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?as(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?as(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?as(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?as(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?as(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?as(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=U3[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=as(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=X0[s.color.index];s.color.index==81&&(c=X0[1]),c||(c=X0[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=uy(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Xue(e,t,r){t.NumberFmt=[];for(var n=Bs(Jr),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Jr[n[s]];var i=e[0].match(zo);if(i)for(s=0;s<i.length;++s){var o=nn(i[s]);switch(Td(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Zn(Ba(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}cf(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function Yue(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=ur("numFmt",null,{numFmtId:n,formatCode:Sa(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=ur("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Nv=["numFmtId","fillId","fontId","borderId","xfId"],jv=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Jue(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(zo)||[]).forEach(function(i){var o=nn(i),l=0;switch(Td(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<Nv.length;++l)n[Nv[l]]&&(n[Nv[l]]=parseInt(n[Nv[l]],10));for(l=0;l<jv.length;++l)n[jv[l]]&&(n[jv[l]]=as(n[jv[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=as(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function Que(e){var t=[];return t[t.length]=ur("cellXfs",null),e.forEach(function(r){t[t.length]=ur("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=ur("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Zue=(function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,u){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var d;return(d=l.match(t))&&Xue(d,f,u),(d=l.match(s))&&Kue(d,f,c,u),(d=l.match(n))&&Gue(d,f,c,u),(d=l.match(i))&&Vue(d,f,c,u),(d=l.match(r))&&Jue(d,f,u),f}})();function kR(e,t){var r=[ei,ur("styleSheet",null,{xmlns:gh[0],"xmlns:vt":Oi.vt})],n;return e.SSF&&(n=Yue(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Que(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function ede(e,t){var r=e.read_shift(2),n=qo(e);return[r,n]}function tde(e,t,r){r||(r=Ft(6+4*t.length)),r.write_shift(2,e),Yi(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function rde(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=Moe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=Foe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=qo(e),n}function nde(e,t){t||(t=Ft(153)),t.write_shift(2,e.sz*20),Roe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),oy(e.color,t);var n=0;return n=2,t.write_shift(1,n),Yi(e.name,t),t.length>t.l?t.slice(0,t.l):t}var ade=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],nj,sde=$o;function tI(e,t){t||(t=Ft(84)),nj||(nj=rb(ade));var r=nj[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(oy({auto:1},t),oy({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function ide(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function SR(e,t,r){r||(r=Ft(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function jm(e,t){return t||(t=Ft(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var ode=$o;function lde(e,t){return t||(t=Ft(51)),t.write_shift(1,0),jm(null,t),jm(null,t),jm(null,t),jm(null,t),jm(null,t),t.length>t.l?t.slice(0,t.l):t}function cde(e,t){return t||(t=Ft(52)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),iy(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function ude(e,t,r){var n=Ft(2052);return n.write_shift(4,e),iy(t,n),iy(r,n),n.length>n.l?n.slice(0,n.l):n}function dde(e,t,r){var n={};n.NumberFmt=[];for(var s in Jr)n.NumberFmt[s]=Jr[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return wf(e,function(c,u,f){switch(f){case 44:n.NumberFmt[c[0]]=c[1],cf(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=uy(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(u.T>0)i.push(f);else if(u.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function fde(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Vt(e,615,qu(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Vt(e,44,tde(s,t[s]))}),Vt(e,616))}}function hde(e){var t=1;Vt(e,611,qu(t)),Vt(e,43,nde({sz:12,color:{theme:1},name:"Calibri",family:2})),Vt(e,612)}function pde(e){var t=2;Vt(e,603,qu(t)),Vt(e,45,tI({patternType:"none"})),Vt(e,45,tI({patternType:"gray125"})),Vt(e,604)}function mde(e){var t=1;Vt(e,613,qu(t)),Vt(e,46,lde()),Vt(e,614)}function xde(e){var t=1;Vt(e,626,qu(t)),Vt(e,47,SR({numFmtId:0},65535)),Vt(e,627)}function gde(e,t){Vt(e,617,qu(t.length)),t.forEach(function(r){Vt(e,47,SR(r,0))}),Vt(e,618)}function vde(e){var t=1;Vt(e,619,qu(t)),Vt(e,48,cde({xfId:0,name:"Normal"})),Vt(e,620)}function yde(e){var t=0;Vt(e,505,qu(t)),Vt(e,506)}function bde(e){var t=0;Vt(e,508,ude(t,"TableStyleMedium9","PivotStyleMedium4")),Vt(e,509)}function wde(e,t){var r=Hl();return Vt(r,278),fde(r,e.SSF),hde(r),pde(r),mde(r),xde(r),gde(r,t.cellXfs),vde(r),yde(r),bde(r),Vt(r,279),r.end()}var Nde=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function jde(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(zo)||[]).forEach(function(s){var i=nn(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[Nde.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function kde(){}function Sde(){}var _de=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,Ade=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,Ede=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function Cde(e,t,r){t.themeElements={};var n;[["clrScheme",_de,jde],["fontScheme",Ade,kde],["fmtScheme",Ede,Sde]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var Tde=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function _R(e,t){(!e||e.length===0)&&(e=hS());var r,n={};if(!(r=e.match(Tde)))throw new Error("themeElements not found in theme");return Cde(r[0],n,t),n.raw=e,n}function hS(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[ei];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function Ode(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=vM(i,{type:"array"})}catch{return}var l=xc(o,"theme/theme/theme1.xml",!0);if(l)return _R(l,r)}}function Pde(e){return e.read_shift(4)}function Ide(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=Dde(e,4);break;case 2:t.xclrValue=sR(e);break;case 3:t.xclrValue=Pde(e);break;case 4:e.l+=4;break}return e.l+=8,t}function Dde(e,t){return $o(e,t)}function Lde(e,t){return $o(e,t)}function Fde(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=Ide(e);break;case 6:n[1]=Lde(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function Mde(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(Fde(e,r-e.l));return{ixfe:n,ext:i}}function Rde(e,t){t.forEach(function(r){r[0]})}function Bde(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:qo(e)}}function Ude(e){var t=Ft(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Yi(e.name,t),t.slice(0,t.l)}function qde(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function $de(e){var t=Ft(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function zde(e,t){var r=Ft(8+2*t.length);return r.write_shift(4,e),Yi(t,r),r.slice(0,r.l)}function Hde(e){return e.l+=4,e.read_shift(4)!=0}function Wde(e,t){var r=Ft(8);return r.write_shift(4,e),r.write_shift(4,1),r}function Vde(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return wf(e,function(c,u,f){switch(f){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(d){l==1?n.Cell.push({type:n.Types[d[0]-1].name,index:d[1]}):l==0&&n.Value.push({type:n.Types[d[0]-1].name,index:d[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!u.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function Gde(){var e=Hl();return Vt(e,332),Vt(e,334,qu(1)),Vt(e,335,Ude({name:"XLDAPR",version:12e4,flags:3496657072})),Vt(e,336),Vt(e,339,zde(1,"XLDAPR")),Vt(e,52),Vt(e,35,qu(514)),Vt(e,4096,qu(0)),Vt(e,4097,Qc(1)),Vt(e,36),Vt(e,53),Vt(e,340),Vt(e,337,Wde(1)),Vt(e,51,$de([[1,0]])),Vt(e,338),Vt(e,333),e.end()}function Kde(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(zo,function(l){var c=nn(l);switch(Td(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var u=0;u<n.Types.length;++u)n.Types[u].name==c.name&&(o=n.Types[u]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):i==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function AR(){var e=[ei];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function Xde(e){var t=[];if(!e)return t;var r=1;return(e.match(zo)||[]).forEach(function(n){var s=nn(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function Yde(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=tn(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function Jde(e,t,r){var n=[];return wf(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function Qde(e,t,r,n){if(!e)return e;var s=n||{},i=!1;wf(e,function(l,c,u){switch(u){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}},s)}function Zde(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var ep=1024;function ER(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[ur("xml",null,{"xmlns:v":fc.v,"xmlns:o":fc.o,"xmlns:x":fc.x,"xmlns:mv":fc.mv}).replace(/\/>/,">"),ur("o:shapelayout",ur("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),ur("v:shapetype",[ur("v:stroke",null,{joinstyle:"miter"}),ur("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];ep<e*1e3;)ep+=1e3;return t.forEach(function(i){var o=Cs(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?ur("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,u=ur("v:fill",c,l),f={on:"t",obscured:"t"};++ep,s=s.concat(["<v:shape"+Vx({id:"_x0000_s"+ep,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",u,ur("v:shadow",null,f),ur("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",uo("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),uo("x:AutoFill","False"),uo("x:Row",String(o.r)),uo("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function rI(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=Cs(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=ea(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var u=gn(c);u!==e["!ref"]&&(e["!ref"]=u)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var d=i.c.length-1;d>=0;--d){if(!r&&i.c[d].T)return;r&&!i.c[d].T&&i.c.splice(d,1)}if(r&&n){for(d=0;d<n.length;++d)if(f.a==n[d].id){f.a=n[d].name||f.a;break}}i.c.push(f)})}function efe(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=nn(l[0]),u={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},f=Cs(c.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var d=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),m=!!d&&!!d[1]&&uS(d[1])||{r:"",t:"",h:""};u.r=m.r,m.r=="<t></t>"&&(m.t=m.h=""),u.t=(m.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(u.h=m.h),n.push(u)}}}}),n}function CR(e){var t=[ei,ur("comments",null,{xmlns:gh[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var i=Sa(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(Sa(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(uo("t",Sa(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(uo("t",Sa(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function tfe(e,t){var r=[],n=!1,s={},i=0;return e.replace(zo,function(l,c){var u=nn(l);switch(Td(u[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:u.personId,guid:u.id,ref:u.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+u[0]+" in threaded comments")}return l}),r}function rfe(e,t,r){var n=[ei,ur("ThreadedComments",null,{xmlns:Oi.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(ur("threadedComment",uo("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function nfe(e,t){var r=[],n=!1;return e.replace(zo,function(i){var o=nn(i);switch(Td(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function afe(e){var t=[ei,ur("personList",null,{xmlns:Oi.TCMNT,"xmlns:x":gh[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(ur("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function sfe(e){var t={};t.iauthor=e.read_shift(4);var r=wh(e);return t.rfx=r.s,t.ref=tn(r.s),e.l+=16,t}function ife(e,t){return t==null&&(t=Ft(36)),t.write_shift(4,e[1].iauthor),tm(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var ofe=qo;function lfe(e){return Yi(e.slice(0,54))}function cfe(e,t){var r=[],n=[],s={},i=!1;return wf(e,function(l,c,u){switch(u){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+u.toString(16))}}}),r}function ufe(e){var t=Hl(),r=[];return Vt(t,628),Vt(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Vt(t,632,lfe(s.a)))})}),Vt(t,631),Vt(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Cs(n[0]),e:Cs(n[0])};Vt(t,635,ife([i,s])),s.t&&s.t.length>0&&Vt(t,637,Poe(s)),Vt(t,636),delete s.iauthor})}),Vt(t,634),Vt(t,629),t.end()}var dfe="application/vnd.ms-office.vbaProject";function ffe(e){var t=Hr.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Hr.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Hr.write(t)}function hfe(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Hr.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var TR=["xlsb","xlsm","xlam","biff8","xla"];function pfe(){return{"!type":"dialog"}}function mfe(){return{"!type":"dialog"}}function xfe(){return{"!type":"macro"}}function gfe(){return{"!type":"macro"}}var lp=(function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var u=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,c?u+=t.r:--u,s+(l?"":"$")+Es(f)+(c?"":"$")+Zs(u)}return function(s,i){return t=i,s.replace(e,r)}})(),pS=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,mS=(function(){return function(t,r){return t.replace(pS,function(n,s,i,o,l,c){var u=tS(o)-(i?0:r.c),f=eS(c)-(l?0:r.r),d=f==0?"":l?f+1:"["+f+"]",m=u==0?"":i?u+1:"["+u+"]";return s+"R"+d+"C"+m})}})();function OR(e,t){return e.replace(pS,function(r,n,s,i,o,l){return n+(s=="$"?s+i:Es(tS(i)+t.c))+(o=="$"?o+l:Zs(eS(l)+t.r))})}function vfe(e,t,r){var n=Wl(t),s=n.s,i=Cs(r),o={r:i.r-s.r,c:i.c-s.c};return OR(e,o)}function yfe(e){return e.length!=1}function nI(e){return e.replace(/_xlfn\./g,"")}function fi(e){e.l+=1}function l0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function PR(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return IR(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=l0(e),l=l0(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function IR(e){var t=l0(e),r=l0(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function bfe(e,t,r){if(r.biff<8)return IR(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=l0(e),o=l0(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function DR(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return wfe(e);var n=e.read_shift(r&&r.biff==12?4:2),s=l0(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function wfe(e){var t=l0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function Nfe(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function jfe(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return kfe(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function kfe(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function Sfe(e,t,r){var n=(e[e.l++]&96)>>5,s=PR(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function _fe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=PR(e,i,r);return[n,s,o]}function Afe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Efe(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function Cfe(e,t,r){var n=(e[e.l++]&96)>>5,s=bfe(e,t-1,r);return[n,s]}function Tfe(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function aI(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Ofe(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Pfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Ife(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Dfe(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Lfe(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function LR(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Ffe(e){return e.read_shift(2),LR(e)}function Mfe(e){return e.read_shift(2),LR(e)}function Rfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=DR(e,0,r);return[n,s]}function Bfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=jfe(e,0,r);return[n,s]}function Ufe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=DR(e,0,r);return[n,s,i]}function qfe(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[H0e[s],RR[s],n]}function $fe(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:zfe(e);return[s,(i[0]===0?RR:z0e)[i[1]]]}function zfe(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Hfe(e,t,r){e.l+=r&&r.biff==2?3:4}function Wfe(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function Vfe(e){return e.l++,Nf[e.read_shift(1)]}function Gfe(e){return e.l++,e.read_shift(2)}function Kfe(e){return e.l++,e.read_shift(1)!==0}function Xfe(e){return e.l++,Bo(e)}function Yfe(e,t,r){return e.l++,mg(e,t-1,r)}function Jfe(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=Ks(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Nf[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=Bo(e);break;case 2:r[1]=Nh(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Qfe(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?wh:sb)(e));return s}function Zfe(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=Jfe(e,r.biff);return o}function e0e(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function t0e(e,t,r){if(r.biff==5)return r0e(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function r0e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function n0e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function a0e(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function s0e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function i0e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var o0e=$o,l0e=$o,c0e=$o;function gg(e,t,r){return e.l+=2,[Nfe(e)]}function xS(e){return e.l+=6,[]}var u0e=gg,d0e=xS,f0e=xS,h0e=gg;function FR(e){return e.l+=2,[mi(e),e.read_shift(2)&1]}var p0e=gg,m0e=FR,x0e=xS,g0e=gg,v0e=gg,y0e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function b0e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=y0e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function w0e(e){return e.l+=2,[e.read_shift(4)]}function N0e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function j0e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function k0e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function S0e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function _0e(e){return e.l+=4,[0,0]}var sI={1:{n:"PtgExp",f:Wfe},2:{n:"PtgTbl",f:c0e},3:{n:"PtgAdd",f:fi},4:{n:"PtgSub",f:fi},5:{n:"PtgMul",f:fi},6:{n:"PtgDiv",f:fi},7:{n:"PtgPower",f:fi},8:{n:"PtgConcat",f:fi},9:{n:"PtgLt",f:fi},10:{n:"PtgLe",f:fi},11:{n:"PtgEq",f:fi},12:{n:"PtgGe",f:fi},13:{n:"PtgGt",f:fi},14:{n:"PtgNe",f:fi},15:{n:"PtgIsect",f:fi},16:{n:"PtgUnion",f:fi},17:{n:"PtgRange",f:fi},18:{n:"PtgUplus",f:fi},19:{n:"PtgUminus",f:fi},20:{n:"PtgPercent",f:fi},21:{n:"PtgParen",f:fi},22:{n:"PtgMissArg",f:fi},23:{n:"PtgStr",f:Yfe},26:{n:"PtgSheet",f:N0e},27:{n:"PtgEndSheet",f:j0e},28:{n:"PtgErr",f:Vfe},29:{n:"PtgBool",f:Kfe},30:{n:"PtgInt",f:Gfe},31:{n:"PtgNum",f:Xfe},32:{n:"PtgArray",f:Tfe},33:{n:"PtgFunc",f:qfe},34:{n:"PtgFuncVar",f:$fe},35:{n:"PtgName",f:e0e},36:{n:"PtgRef",f:Rfe},37:{n:"PtgArea",f:Sfe},38:{n:"PtgMemArea",f:n0e},39:{n:"PtgMemErr",f:o0e},40:{n:"PtgMemNoMem",f:l0e},41:{n:"PtgMemFunc",f:a0e},42:{n:"PtgRefErr",f:s0e},43:{n:"PtgAreaErr",f:Afe},44:{n:"PtgRefN",f:Bfe},45:{n:"PtgAreaN",f:Cfe},46:{n:"PtgMemAreaN",f:k0e},47:{n:"PtgMemNoMemN",f:S0e},57:{n:"PtgNameX",f:t0e},58:{n:"PtgRef3d",f:Ufe},59:{n:"PtgArea3d",f:_fe},60:{n:"PtgRefErr3d",f:i0e},61:{n:"PtgAreaErr3d",f:Efe},255:{}},A0e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},E0e={1:{n:"PtgElfLel",f:FR},2:{n:"PtgElfRw",f:g0e},3:{n:"PtgElfCol",f:u0e},6:{n:"PtgElfRwV",f:v0e},7:{n:"PtgElfColV",f:h0e},10:{n:"PtgElfRadical",f:p0e},11:{n:"PtgElfRadicalS",f:x0e},13:{n:"PtgElfColS",f:d0e},15:{n:"PtgElfColSV",f:f0e},16:{n:"PtgElfRadicalLel",f:m0e},25:{n:"PtgList",f:b0e},29:{n:"PtgSxName",f:w0e},255:{}},C0e={0:{n:"PtgAttrNoop",f:_0e},1:{n:"PtgAttrSemi",f:Lfe},2:{n:"PtgAttrIf",f:Ife},4:{n:"PtgAttrChoose",f:Ofe},8:{n:"PtgAttrGoto",f:Pfe},16:{n:"PtgAttrSum",f:Hfe},32:{n:"PtgAttrBaxcel",f:aI},33:{n:"PtgAttrBaxcel",f:aI},64:{n:"PtgAttrSpace",f:Ffe},65:{n:"PtgAttrSpaceSemi",f:Mfe},128:{n:"PtgAttrIfError",f:Dfe},255:{}};function vg(e,t,r,n){if(n.biff<8)return $o(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=Zfe(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Qfe(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push($o(e,t)),i}function yg(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=sI[i]||sI[A0e[i]],(i===24||i===25)&&(s=(i===24?E0e:C0e)[e[e.l+1]]),!s||!s.f?$o(e,t):o.push([s.n,s.f(e,t,r)]);return o}function T0e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];o?o[0]===2?s.push('"'+o[1].replace(/"/g,'""')+'"'):s.push(o[1]):s.push("")}t.push(s.join(","))}return t.join(";")}var O0e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function P0e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function MR(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function iI(e,t,r){var n=MR(e,t,r);return n=="#REF"?n:P0e(n,r)}function Lo(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,u,f,d=0,m=0,p,y="";if(!e[0]||!e[0][0])return"";for(var v=-1,g="",b=0,N=e[0].length;b<N;++b){var j=e[0][b];switch(j[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),u=l.pop(),v>=0){switch(e[0][v][1][0]){case 0:g=Ms(" ",e[0][v][1][1]);break;case 1:g=Ms("\r",e[0][v][1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}u=u+g,v=-1}l.push(u+O0e[j[0]]+c);break;case"PtgIsect":c=l.pop(),u=l.pop(),l.push(u+" "+c);break;case"PtgUnion":c=l.pop(),u=l.pop(),l.push(u+","+c);break;case"PtgRange":c=l.pop(),u=l.pop(),l.push(u+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=Km(j[1][1],o,s),l.push(Xm(f,i));break;case"PtgRefN":f=r?Km(j[1][1],r,s):j[1][1],l.push(Xm(f,i));break;case"PtgRef3d":d=j[1][1],f=Km(j[1][2],o,s),y=iI(n,d,s),l.push(y+"!"+Xm(f,i));break;case"PtgFunc":case"PtgFuncVar":var w=j[1][0],S=j[1][1];w||(w=0),w&=127;var P=w==0?[]:l.slice(-w);l.length-=w,S==="User"&&(S=P.shift()),l.push(S+"("+P.join(",")+")");break;case"PtgBool":l.push(j[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(j[1]);break;case"PtgNum":l.push(String(j[1]));break;case"PtgStr":l.push('"'+j[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(j[1]);break;case"PtgAreaN":p=L8(j[1][1],r?{s:r}:o,s),l.push(ZN(p,s));break;case"PtgArea":p=L8(j[1][1],o,s),l.push(ZN(p,s));break;case"PtgArea3d":d=j[1][1],p=j[1][2],y=iI(n,d,s),l.push(y+"!"+ZN(p,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":m=j[1][2];var A=(n.names||[])[m-1]||(n[0]||[])[m],T=A?A.Name:"SH33TJSNAME"+String(m);T&&T.slice(0,6)=="_xlfn."&&!s.xlfn&&(T=T.slice(6)),l.push(T);break;case"PtgNameX":var I=j[1][1];m=j[1][2];var B;if(s.biff<=5)I<0&&(I=-I),n[I]&&(B=n[I][m]);else{var E="";if(((n[I]||[])[0]||[])[0]==14849||(((n[I]||[])[0]||[])[0]==1025?n[I][m]&&n[I][m].itab>0&&(E=n.SheetNames[n[I][m].itab-1]+"!"):E=n.SheetNames[m-1]+"!"),n[I]&&n[I][m])E+=n[I][m].Name;else if(n[0]&&n[0][m])E+=n[0][m].Name;else{var C=(MR(n,I,s)||"").split(";;");C[m-1]?E=C[m-1]:E+="SH33TJSERRX"}l.push(E);break}B||(B={Name:"SH33TJSERRY"}),l.push(B.Name);break;case"PtgParen":var M="(",q=")";if(v>=0){switch(g="",e[0][v][1][0]){case 2:M=Ms(" ",e[0][v][1][1])+M;break;case 3:M=Ms("\r",e[0][v][1][1])+M;break;case 4:q=Ms(" ",e[0][v][1][1])+q;break;case 5:q=Ms("\r",e[0][v][1][1])+q;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][v][1][0])}v=-1}l.push(M+l.pop()+q);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:j[1][1],r:j[1][0]};var G={c:r.c,r:r.r};if(n.sharedf[tn(f)]){var Z=n.sharedf[tn(f)];l.push(Lo(Z,o,G,n,s))}else{var te=!1;for(c=0;c!=n.arrayf.length;++c)if(u=n.arrayf[c],!(f.c<u[0].s.c||f.c>u[0].e.c)&&!(f.r<u[0].s.r||f.r>u[0].e.r)){l.push(Lo(u[1],o,G,n,s)),te=!0;break}te||l.push(j[1])}break;case"PtgArray":l.push("{"+T0e(j[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":v=b;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+j[1].idx+"[#"+j[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(j));default:throw new Error("Unrecognized Formula Token: "+String(j))}var ne=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&v>=0&&ne.indexOf(e[0][b][0])==-1){j=e[0][v];var J=!0;switch(j[1][0]){case 4:J=!1;case 0:g=Ms(" ",j[1][1]);break;case 5:J=!1;case 1:g=Ms("\r",j[1][1]);break;default:if(g="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+j[1][0])}l.push((J?g:"")+l.pop()+(J?"":g)),v=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function I0e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],$o(e,t-2)];var l=yg(e,o,r);return t!==o+s&&(i=vg(e,t-o-s,l,r)),e.l=n,[l,i]}function D0e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],$o(e,t-2)];var l=yg(e,o,r);return t!==o+s&&(i=vg(e,t-o-s,l,r)),e.l=n,[l,i]}function L0e(e,t,r,n){var s=e.l+t,i=yg(e,n,r),o;return s!==e.l&&(o=vg(e,s-e.l,i,r)),[i,o]}function F0e(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=yg(e,i,r);return i==65535?[[],$o(e,t-2)]:(t!==i+2&&(s=vg(e,n-i-2,o,r)),[o,s])}function M0e(e){var t;if(ef(e,e.l+6)!==65535)return[Bo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function R0e(e){if(e==null){var t=Ft(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return lh(e);return lh(0)}function aj(e,t,r){var n=e.l+t,s=Od(e);r.biff==2&&++e.l;var i=M0e(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=D0e(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function B0e(e,t,r,n,s){var i=uh(t,r,s),o=R0e(e.v),l=Ft(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var u=Ft(e.bf.length),f=0;f<e.bf.length;++f)u[f]=e.bf[f];var d=Xi([i,o,l,u]);return d}function ib(e,t,r){var n=e.read_shift(4),s=yg(e,n,r),i=e.read_shift(4),o=i>0?vg(e,i,s,r):null;return[s,o]}var U0e=ib,ob=ib,q0e=ib,$0e=ib,z0e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},RR={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},H0e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function oI(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function W0e(e){var t="of:="+e.replace(pS,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function sj(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function V0e(e){return e.replace(/\./,"!")}var Jm={},cp={},Qm=typeof Map<"u";function gS(e,t,r){var n=0,s=e.length;if(r){if(Qm?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=Qm?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(Qm?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function lb(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(Ro=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=Jx(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=dy(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Q0(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function b0(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){cf(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===n)return s;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function BR(e,t,r,n,s,i){try{n.cellNF&&(e.z=Jr[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=is(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Jr[t]==null&&cf(zie[t]||"General",t),e.t==="e")e.w=e.w||Nf[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Hx(e.v);else if(e.t==="d"){var o=Di(e.v);(o|0)===o?e.w=o.toString(10):e.w=Hx(o)}else{if(e.v===void 0)return"";e.w=ih(e.v,cp)}else e.t==="d"?e.w=iu(t,Di(e.v),cp):e.w=iu(t,e.v,cp)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=uy(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=uy(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function G0e(e,t,r){if(e&&e["!ref"]){var n=ea(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function K0e(e,t){var r=ea(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=gn(r))}var X0e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,Y0e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,J0e=/<(?:\w:)?hyperlink [^>]*>/mg,Q0e=/"(\w*:\w*)"/,Z0e=/<(?:\w:)?col\b[^>]*[\/]?>/g,ehe=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,the=/<(?:\w:)?pageMargins[^>]*\/>/g,UR=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,rhe=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,nhe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function ahe(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},u="",f="",d=e.match(Y0e);d?(u=e.slice(0,d.index),f=e.slice(d.index+d[0].length)):u=f=e;var m=u.match(UR);m?vS(m[0],l,s,r):(m=u.match(rhe))&&ihe(m[0],m[1]||"",l,s,r);var p=(u.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(p>0){var y=u.slice(p,p+50).match(Q0e);y&&K0e(l,y[1])}var v=u.match(nhe);v&&v[1]&&yhe(v[1],s);var g=[];if(t.cellStyles){var b=u.match(Z0e);b&&phe(g,b)}d&&Nhe(d[1],l,t,c,i,o);var N=f.match(ehe);N&&(l["!autofilter"]=xhe(N[0]));var j=[],w=f.match(X0e);if(w)for(p=0;p!=w.length;++p)j[p]=ea(w[p].slice(w[p].indexOf('"')+1));var S=f.match(J0e);S&&dhe(l,S,n);var P=f.match(the);if(P&&(l["!margins"]=fhe(nn(P[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=gn(c)),t.sheetRows>0&&l["!ref"]){var A=ea(l["!ref"]);t.sheetRows<=+A.e.r&&(A.e.r=t.sheetRows-1,A.e.r>c.e.r&&(A.e.r=c.e.r),A.e.r<A.s.r&&(A.s.r=A.e.r),A.e.c>c.e.c&&(A.e.c=c.e.c),A.e.c<A.s.c&&(A.s.c=A.e.c),l["!fullref"]=l["!ref"],l["!ref"]=gn(A))}return g.length>0&&(l["!cols"]=g),j.length>0&&(l["!merges"]=j),l}function she(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+gn(e[r])+'"/>';return t+"</mergeCells>"}function vS(e,t,r,n){var s=nn(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Zn(Ba(s.codeName)))}function ihe(e,t,r,n,s){vS(e.slice(0,e.indexOf(">")),r,n,s)}function ohe(e,t,r,n,s){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=md(Sa(c))}if(e&&e["!outline"]){var u={summaryBelow:1,summaryRight:1};e["!outline"].above&&(u.summaryBelow=0),e["!outline"].left&&(u.summaryRight=0),l=(l||"")+ur("outlinePr",null,u)}!i&&!l||(s[s.length]=ur("sheetPr",l,o))}var lhe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],che=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function uhe(e){var t={sheet:1};return lhe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),che.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=dS(e.password).toString(16).toUpperCase()),ur("sheetProtection",null,t)}function dhe(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=nn(Ba(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Zn(i.location))):(i.Target="#"+Zn(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=ea(i.ref),c=l.s.r;c<=l.e.r;++c)for(var u=l.s.c;u<=l.e.c;++u){var f=tn({c:u,r:c});n?(e[c]||(e[c]=[]),e[c][u]||(e[c][u]={t:"z",v:void 0}),e[c][u].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function fhe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function hhe(e){return Q0(e),ur("pageMargins",null,e)}function phe(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=nn(t[n],!0);s.hidden&&(s.hidden=as(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,fS(s.width)),o0(s);i<=o;)e[i++]=os(s)}}function mhe(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=ur("col",null,lb(s,n)));return r[r.length]="</cols>",r.join("")}function xhe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function ghe(e,t,r,n){var s=typeof e.ref=="string"?e.ref:gn(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=Wl(s);o.s.r==o.e.r&&(o.e.r=Wl(t["!ref"]).e.r,s=gn(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),ur("autoFilter",null,{ref:s})}var vhe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function yhe(e,t){t.Views||(t.Views=[{}]),(e.match(vhe)||[]).forEach(function(r,n){var s=nn(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),as(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function bhe(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),ur("sheetViews",ur("sheetView",null,s),{})}function whe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Nf[e.v];break;case"d":n&&n.cellDates?s=is(e.v,-1).toISOString():(e=os(e),e.t="n",s=""+(e.v=Di(is(e.v)))),typeof e.z>"u"&&(e.z=Jr[14]);break;default:s=e.v;break}var l=uo("v",Sa(s)),c={r:t},u=b0(n.cellXfs,e,n);switch(u!==0&&(c.s=u),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=uo("v",""+gS(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var f=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=ur("f",Sa(e.f),f)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),ur("c",l,c)}var Nhe=(function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=Wx("v"),o=Wx("f");return function(c,u,f,d,m,p){for(var y=0,v="",g=[],b=[],N=0,j=0,w=0,S="",P,A,T=0,I=0,B,E,C=0,M=0,q=Array.isArray(p.CellXf),G,Z=[],te=[],ne=Array.isArray(u),J=[],ee={},H=!1,O=!!f.sheetStubs,R=c.split(t),W=0,U=R.length;W!=U;++W){v=R[W].trim();var K=v.length;if(K!==0){var oe=0;e:for(y=0;y<K;++y)switch(v[y]){case">":if(v[y-1]!="/"){++y;break e}if(f&&f.cellStyles){if(A=nn(v.slice(oe,y),!0),T=A.r!=null?parseInt(A.r,10):T+1,I=-1,f.sheetRows&&f.sheetRows<T)continue;ee={},H=!1,A.ht&&(H=!0,ee.hpt=parseFloat(A.ht),ee.hpx=Up(ee.hpt)),A.hidden=="1"&&(H=!0,ee.hidden=!0),A.outlineLevel!=null&&(H=!0,ee.level=+A.outlineLevel),H&&(J[T-1]=ee)}break;case"<":oe=y;break}if(oe>=y)break;if(A=nn(v.slice(oe,y),!0),T=A.r!=null?parseInt(A.r,10):T+1,I=-1,!(f.sheetRows&&f.sheetRows<T)){d.s.r>T-1&&(d.s.r=T-1),d.e.r<T-1&&(d.e.r=T-1),f&&f.cellStyles&&(ee={},H=!1,A.ht&&(H=!0,ee.hpt=parseFloat(A.ht),ee.hpx=Up(ee.hpt)),A.hidden=="1"&&(H=!0,ee.hidden=!0),A.outlineLevel!=null&&(H=!0,ee.level=+A.outlineLevel),H&&(J[T-1]=ee)),g=v.slice(y).split(e);for(var he=0;he!=g.length&&g[he].trim().charAt(0)=="<";++he);for(g=g.slice(he),y=0;y!=g.length;++y)if(v=g[y].trim(),v.length!==0){if(b=v.match(r),N=y,j=0,w=0,v="<c "+(v.slice(0,1)=="<"?">":"")+v,b!=null&&b.length===2){for(N=0,S=b[1],j=0;j!=S.length&&!((w=S.charCodeAt(j)-64)<1||w>26);++j)N=26*N+w;--N,I=N}else++I;for(j=0;j!=v.length&&v.charCodeAt(j)!==62;++j);if(++j,A=nn(v.slice(0,j),!0),A.r||(A.r=tn({r:T-1,c:I})),S=v.slice(j),P={t:""},(b=S.match(i))!=null&&b[1]!==""&&(P.v=Zn(b[1])),f.cellFormula){if((b=S.match(o))!=null&&b[1]!==""){if(P.f=Zn(Ba(b[1])).replace(/\r\n/g,`
`),f.xlfn||(P.f=nI(P.f)),b[0].indexOf('t="array"')>-1)P.F=(S.match(s)||[])[1],P.F.indexOf(":")>-1&&Z.push([ea(P.F),P.F]);else if(b[0].indexOf('t="shared"')>-1){E=nn(b[0]);var ie=Zn(Ba(b[1]));f.xlfn||(ie=nI(ie)),te[parseInt(E.si,10)]=[E,ie,A.r]}}else(b=S.match(/<f[^>]*\/>/))&&(E=nn(b[0]),te[E.si]&&(P.f=vfe(te[E.si][1],te[E.si][2],A.r)));var ce=Cs(A.r);for(j=0;j<Z.length;++j)ce.r>=Z[j][0].s.r&&ce.r<=Z[j][0].e.r&&ce.c>=Z[j][0].s.c&&ce.c<=Z[j][0].e.c&&(P.F=Z[j][1])}if(A.t==null&&P.v===void 0)if(P.f||P.F)P.v=0,P.t="n";else if(O)P.t="z";else continue;else P.t=A.t||"n";switch(d.s.c>I&&(d.s.c=I),d.e.c<I&&(d.e.c=I),P.t){case"n":if(P.v==""||P.v==null){if(!O)continue;P.t="z"}else P.v=parseFloat(P.v);break;case"s":if(typeof P.v>"u"){if(!O)continue;P.t="z"}else B=Jm[parseInt(P.v,10)],P.v=B.t,P.r=B.r,f.cellHTML&&(P.h=B.h);break;case"str":P.t="s",P.v=P.v!=null?Ba(P.v):"",f.cellHTML&&(P.h=Y3(P.v));break;case"inlineStr":b=S.match(n),P.t="s",b!=null&&(B=uS(b[1]))?(P.v=B.t,f.cellHTML&&(P.h=B.h)):P.v="";break;case"b":P.v=as(P.v);break;case"d":f.cellDates?P.v=is(P.v,1):(P.v=Di(is(P.v,1)),P.t="n");break;case"e":(!f||f.cellText!==!1)&&(P.w=P.v),P.v=$M[P.v];break}if(C=M=0,G=null,q&&A.s!==void 0&&(G=p.CellXf[A.s],G!=null&&(G.numFmtId!=null&&(C=G.numFmtId),f.cellStyles&&G.fillId!=null&&(M=G.fillId))),BR(P,C,M,f,m,p),f.cellDates&&q&&P.t=="n"&&Qp(Jr[C])&&(P.t="d",P.v=ab(P.v)),A.cm&&f.xlmeta){var Le=(f.xlmeta.Cell||[])[+A.cm-1];Le&&Le.type=="XLDAPR"&&(P.D=!0)}if(ne){var le=Cs(A.r);u[le.r]||(u[le.r]=[]),u[le.r][le.c]=P}else u[A.r]=P}}}}J.length>0&&(u["!rows"]=J)}})();function jhe(e,t,r,n){var s=[],i=[],o=ea(e["!ref"]),l="",c,u="",f=[],d=0,m=0,p=e["!rows"],y=Array.isArray(e),v={r:u},g,b=-1;for(m=o.s.c;m<=o.e.c;++m)f[m]=Es(m);for(d=o.s.r;d<=o.e.r;++d){for(i=[],u=Zs(d),m=o.s.c;m<=o.e.c;++m){c=f[m]+u;var N=y?(e[d]||[])[m]:e[c];N!==void 0&&(l=whe(N,c,e,t))!=null&&i.push(l)}(i.length>0||p&&p[d])&&(v={r:u},p&&p[d]&&(g=p[d],g.hidden&&(v.hidden=1),b=-1,g.hpx?b=Qx(g.hpx):g.hpt&&(b=g.hpt),b>-1&&(v.ht=b,v.customHeight=1),g.level&&(v.outlineLevel=g.level)),s[s.length]=ur("row",i.join(""),v))}if(p)for(;d<p.length;++d)p&&p[d]&&(v={r:d+1},g=p[d],g.hidden&&(v.hidden=1),b=-1,g.hpx?b=Qx(g.hpx):g.hpt&&(b=g.hpt),b>-1&&(v.ht=b,v.customHeight=1),g.level&&(v.outlineLevel=g.level),s[s.length]=ur("row","",v));return s.join("")}function qR(e,t,r,n){var s=[ei,ur("worksheet",null,{xmlns:gh[0],"xmlns:r":Oi.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var u=c["!ref"]||"A1",f=ea(u);if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+u+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),u=gn(f)}n||(n={}),c["!comments"]=[];var d=[];ohe(c,r,e,t,s),s[s.length]=ur("dimension",null,{ref:u}),s[s.length]=bhe(c,t,e,r),t.sheetFormat&&(s[s.length]=ur("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=mhe(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=jhe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=uhe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=ghe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=she(c["!merges"]));var m=-1,p,y=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(v){v[1].Target&&(p={ref:v[0]},v[1].Target.charAt(0)!="#"&&(y=ja(n,-1,Sa(v[1].Target).replace(/#.*$/,""),Ln.HLINK),p["r:id"]="rId"+y),(m=v[1].Target.indexOf("#"))>-1&&(p.location=Sa(v[1].Target.slice(m+1))),v[1].Tooltip&&(p.tooltip=Sa(v[1].Tooltip)),s[s.length]=ur("hyperlink",null,p))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=hhe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=uo("ignoredErrors",ur("ignoredError",null,{numberStoredAsText:1,sqref:u}))),d.length>0&&(y=ja(n,-1,"../drawings/drawing"+(e+1)+".xml",Ln.DRAW),s[s.length]=ur("drawing",null,{"r:id":"rId"+y}),c["!drawing"]=d),c["!comments"].length>0&&(y=ja(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",Ln.VML),s[s.length]=ur("legacyDrawing",null,{"r:id":"rId"+y}),c["!legacy"]=y),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function khe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function She(e,t,r){var n=Ft(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;s.hpx?i=Qx(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var u={r:e,c:0},f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var d=-1,m=-1,p=f<<10;p<f+1<<10;++p){u.c=p;var y=Array.isArray(r)?(r[u.r]||[])[u.c]:r[tn(u)];y&&(d<0&&(d=p),m=p)}d<0||(++l,n.write_shift(4,d),n.write_shift(4,m))}var v=n.l;return n.l=c,n.write_shift(4,l),n.l=v,n.length>n.l?n.slice(0,n.l):n}function _he(e,t,r,n){var s=She(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Vt(e,0,s)}var Ahe=wh,Ehe=tm;function Che(){}function The(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Ioe(e),r}function Ohe(e,t,r){r==null&&(r=Ft(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return oy({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),MM(e,r),r.slice(0,r.l)}function Phe(e){var t=cu(e);return[t]}function Ihe(e,t,r){return r==null&&(r=Ft(8)),vh(t,r)}function Dhe(e){var t=yh(e);return[t]}function Lhe(e,t,r){return r==null&&(r=Ft(4)),bh(t,r)}function Fhe(e){var t=cu(e),r=e.read_shift(1);return[t,r,"b"]}function Mhe(e,t,r){return r==null&&(r=Ft(9)),vh(t,r),r.write_shift(1,e.v?1:0),r}function Rhe(e){var t=yh(e),r=e.read_shift(1);return[t,r,"b"]}function Bhe(e,t,r){return r==null&&(r=Ft(5)),bh(t,r),r.write_shift(1,e.v?1:0),r}function Uhe(e){var t=cu(e),r=e.read_shift(1);return[t,r,"e"]}function qhe(e,t,r){return r==null&&(r=Ft(9)),vh(t,r),r.write_shift(1,e.v),r}function $he(e){var t=yh(e),r=e.read_shift(1);return[t,r,"e"]}function zhe(e,t,r){return r==null&&(r=Ft(8)),bh(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function Hhe(e){var t=cu(e),r=e.read_shift(4);return[t,r,"s"]}function Whe(e,t,r){return r==null&&(r=Ft(12)),vh(t,r),r.write_shift(4,t.v),r}function Vhe(e){var t=yh(e),r=e.read_shift(4);return[t,r,"s"]}function Ghe(e,t,r){return r==null&&(r=Ft(8)),bh(t,r),r.write_shift(4,t.v),r}function Khe(e){var t=cu(e),r=Bo(e);return[t,r,"n"]}function Xhe(e,t,r){return r==null&&(r=Ft(16)),vh(t,r),lh(e.v,r),r}function $R(e){var t=yh(e),r=Bo(e);return[t,r,"n"]}function Yhe(e,t,r){return r==null&&(r=Ft(12)),bh(t,r),lh(e.v,r),r}function Jhe(e){var t=cu(e),r=sS(e);return[t,r,"n"]}function Qhe(e,t,r){return r==null&&(r=Ft(12)),vh(t,r),RM(e.v,r),r}function Zhe(e){var t=yh(e),r=sS(e);return[t,r,"n"]}function epe(e,t,r){return r==null&&(r=Ft(8)),bh(t,r),RM(e.v,r),r}function tpe(e){var t=cu(e),r=rS(e);return[t,r,"is"]}function rpe(e){var t=cu(e),r=qo(e);return[t,r,"str"]}function npe(e,t,r){return r==null&&(r=Ft(12+4*e.v.length)),vh(t,r),Yi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function ape(e){var t=yh(e),r=qo(e);return[t,r,"str"]}function spe(e,t,r){return r==null&&(r=Ft(8+4*e.v.length)),bh(t,r),Yi(e.v,r),r.length>r.l?r.slice(0,r.l):r}function ipe(e,t,r){var n=e.l+t,s=cu(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=ob(e,n-e.l,r);o[3]=Lo(l,null,s,r.supbooks,r)}else e.l=n;return o}function ope(e,t,r){var n=e.l+t,s=cu(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=ob(e,n-e.l,r);o[3]=Lo(l,null,s,r.supbooks,r)}else e.l=n;return o}function lpe(e,t,r){var n=e.l+t,s=cu(e);s.r=r["!row"];var i=Bo(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=ob(e,n-e.l,r);o[3]=Lo(l,null,s,r.supbooks,r)}else e.l=n;return o}function cpe(e,t,r){var n=e.l+t,s=cu(e);s.r=r["!row"];var i=qo(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=ob(e,n-e.l,r);o[3]=Lo(l,null,s,r.supbooks,r)}else e.l=n;return o}var upe=wh,dpe=tm;function fpe(e,t){return t==null&&(t=Ft(4)),t.write_shift(4,e),t}function hpe(e,t){var r=e.l+t,n=wh(e),s=nS(e),i=qo(e),o=qo(e),l=qo(e);e.l=r;var c={rfx:n,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function ppe(e,t){var r=Ft(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));tm({s:Cs(e[0]),e:Cs(e[0])},r),aS("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return Yi(s||"",r),Yi(e[1].Tooltip||"",r),Yi("",r),r.slice(0,r.l)}function mpe(){}function xpe(e,t,r){var n=e.l+t,s=BM(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=U0e(e,n-e.l,r);o[1]=l}else e.l=n;return o}function gpe(e,t,r){var n=e.l+t,s=wh(e),i=[s];if(r.cellFormula){var o=$0e(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function vpe(e,t,r){r==null&&(r=Ft(18));var n=lb(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var zR=["left","right","top","bottom","header","footer"];function ype(e){var t={};return zR.forEach(function(r){t[r]=Bo(e)}),t}function bpe(e,t){return t==null&&(t=Ft(48)),Q0(e),zR.forEach(function(r){lh(e[r],t)}),t}function wpe(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function Npe(e,t,r){r==null&&(r=Ft(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function jpe(e){var t=Ft(24);return t.write_shift(4,4),t.write_shift(4,1),tm(e,t),t}function kpe(e,t){return t==null&&(t=Ft(66)),t.write_shift(2,e.password?dS(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function Spe(){}function _pe(){}function Ape(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},u,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},d=!1,m=!1,p,y,v,g,b,N,j,w,S,P=[];l.biff=12,l["!row"]=0;var A=0,T=!1,I=[],B={},E=l.supbooks||s.supbooks||[[]];if(E.sharedf=B,E.arrayf=I,E.SheetNames=s.SheetNames||s.Sheets.map(function(ne){return ne.name}),!l.supbooks&&(l.supbooks=E,s.Names))for(var C=0;C<s.Names.length;++C)E[0][C+1]=s.Names[C];var M=[],q=[],G=!1;Zx[16]={n:"BrtShortReal",f:$R};var Z;if(wf(e,function(J,ee,H){if(!m)switch(H){case 148:u=J;break;case 0:p=J,l.sheetRows&&l.sheetRows<=p.r&&(m=!0),w=Zs(g=p.r),l["!row"]=p.r,(J.hidden||J.hpt||J.level!=null)&&(J.hpt&&(J.hpx=Up(J.hpt)),q[J.r]=J);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(y={t:J[2]},J[2]){case"n":y.v=J[1];break;case"s":j=Jm[J[1]],y.v=j.t,y.r=j.r;break;case"b":y.v=!!J[1];break;case"e":y.v=J[1],l.cellText!==!1&&(y.w=Nf[y.v]);break;case"str":y.t="s",y.v=J[1];break;case"is":y.t="s",y.v=J[1].t;break}if((v=o.CellXf[J[0].iStyleRef])&&BR(y,v.numFmtId,null,l,i,o),b=J[0].c==-1?b+1:J[0].c,l.dense?(c[g]||(c[g]=[]),c[g][b]=y):c[Es(b)+w]=y,l.cellFormula){for(T=!1,A=0;A<I.length;++A){var O=I[A];p.r>=O[0].s.r&&p.r<=O[0].e.r&&b>=O[0].s.c&&b<=O[0].e.c&&(y.F=gn(O[0]),T=!0)}!T&&J.length>3&&(y.f=J[3])}if(f.s.r>p.r&&(f.s.r=p.r),f.s.c>b&&(f.s.c=b),f.e.r<p.r&&(f.e.r=p.r),f.e.c<b&&(f.e.c=b),l.cellDates&&v&&y.t=="n"&&Qp(Jr[v.numFmtId])){var R=z0(y.v);R&&(y.t="d",y.v=new Date(R.y,R.m-1,R.d,R.H,R.M,R.S,R.u))}Z&&(Z.type=="XLDAPR"&&(y.D=!0),Z=void 0);break;case 1:case 12:if(!l.sheetStubs||d)break;y={t:"z",v:void 0},b=J[0].c==-1?b+1:J[0].c,l.dense?(c[g]||(c[g]=[]),c[g][b]=y):c[Es(b)+w]=y,f.s.r>p.r&&(f.s.r=p.r),f.s.c>b&&(f.s.c=b),f.e.r<p.r&&(f.e.r=p.r),f.e.c<b&&(f.e.c=b),Z&&(Z.type=="XLDAPR"&&(y.D=!0),Z=void 0);break;case 176:P.push(J);break;case 49:Z=((l.xlmeta||{}).Cell||[])[J-1];break;case 494:var W=n["!id"][J.relId];for(W?(J.Target=W.Target,J.loc&&(J.Target+="#"+J.loc),J.Rel=W):J.relId==""&&(J.Target="#"+J.loc),g=J.rfx.s.r;g<=J.rfx.e.r;++g)for(b=J.rfx.s.c;b<=J.rfx.e.c;++b)l.dense?(c[g]||(c[g]=[]),c[g][b]||(c[g][b]={t:"z",v:void 0}),c[g][b].l=J):(N=tn({c:b,r:g}),c[N]||(c[N]={t:"z",v:void 0}),c[N].l=J);break;case 426:if(!l.cellFormula)break;I.push(J),S=l.dense?c[g][b]:c[Es(b)+w],S.f=Lo(J[1],f,{r:p.r,c:b},E,l),S.F=gn(J[0]);break;case 427:if(!l.cellFormula)break;B[tn(J[0].s)]=J[1],S=l.dense?c[g][b]:c[Es(b)+w],S.f=Lo(J[1],f,{r:p.r,c:b},E,l);break;case 60:if(!l.cellStyles)break;for(;J.e>=J.s;)M[J.e--]={width:J.w/256,hidden:!!(J.flags&1),level:J.level},G||(G=!0,fS(J.w/256)),o0(M[J.e+1]);break;case 161:c["!autofilter"]={ref:gn(J)};break;case 476:c["!margins"]=J;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),J.name&&(s.Sheets[r].CodeName=J.name),(J.above||J.left)&&(c["!outline"]={above:J.above,left:J.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),J.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:d=!0;break;case 36:d=!1;break;case 37:d=!0;break;case 38:d=!1;break;default:if(!ee.T){if(!d||l.WTF)throw new Error("Unexpected record 0x"+H.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(f.s.r<2e6||u&&(u.e.r>0||u.e.c>0||u.s.r>0||u.s.c>0))&&(c["!ref"]=gn(u||f)),l.sheetRows&&c["!ref"]){var te=ea(c["!ref"]);l.sheetRows<=+te.e.r&&(te.e.r=l.sheetRows-1,te.e.r>f.e.r&&(te.e.r=f.e.r),te.e.r<te.s.r&&(te.s.r=te.e.r),te.e.c>f.e.c&&(te.e.c=f.e.c),te.e.c<te.s.c&&(te.s.c=te.e.c),c["!fullref"]=c["!ref"],c["!ref"]=gn(te))}return P.length>0&&(c["!merges"]=P),M.length>0&&(c["!cols"]=M),q.length>0&&(c["!rows"]=q),c}function Epe(e,t,r,n,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=os(t),t.z=t.z||Jr[14],t.v=Di(is(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=b0(s.cellXfs,t,s),t.l&&i["!links"].push([tn(c),t.l]),t.c&&i["!comments"].push([tn(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=gS(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Vt(e,18,Ghe(t,c)):Vt(e,7,Whe(t,c))):(c.t="str",o?Vt(e,17,spe(t,c)):Vt(e,6,npe(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Vt(e,13,epe(t,c)):Vt(e,2,Qhe(t,c)):o?Vt(e,16,Yhe(t,c)):Vt(e,5,Xhe(t,c)),!0;case"b":return c.t="b",o?Vt(e,15,Bhe(t,c)):Vt(e,4,Mhe(t,c)),!0;case"e":return c.t="e",o?Vt(e,14,zhe(t,c)):Vt(e,3,qhe(t,c)),!0}return o?Vt(e,12,Lhe(t,c)):Vt(e,1,Ihe(t,c)),!0}function Cpe(e,t,r,n){var s=ea(t["!ref"]||"A1"),i,o="",l=[];Vt(e,145);var c=Array.isArray(t),u=s.e.r;t["!rows"]&&(u=Math.max(s.e.r,t["!rows"].length-1));for(var f=s.s.r;f<=u;++f){o=Zs(f),_he(e,t,s,f);var d=!1;if(f<=s.e.r)for(var m=s.s.c;m<=s.e.c;++m){f===s.s.r&&(l[m]=Es(m)),i=l[m]+o;var p=c?(t[f]||[])[m]:t[i];if(!p){d=!1;continue}d=Epe(e,p,f,m,n,t,d)}}Vt(e,146)}function Tpe(e,t){!t||!t["!merges"]||(Vt(e,177,fpe(t["!merges"].length)),t["!merges"].forEach(function(r){Vt(e,176,dpe(r))}),Vt(e,178))}function Ope(e,t){!t||!t["!cols"]||(Vt(e,390),t["!cols"].forEach(function(r,n){r&&Vt(e,60,vpe(n,r))}),Vt(e,391))}function Ppe(e,t){!t||!t["!ref"]||(Vt(e,648),Vt(e,649,jpe(ea(t["!ref"]))),Vt(e,650))}function Ipe(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=ja(r,-1,n[1].Target.replace(/#.*$/,""),Ln.HLINK);Vt(e,494,ppe(n,s))}}),delete t["!links"]}function Dpe(e,t,r,n){if(t["!comments"].length>0){var s=ja(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",Ln.VML);Vt(e,551,aS("rId"+s)),t["!legacy"]=s}}function Lpe(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:gn(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=Wl(i);l.s.r==l.e.r&&(l.e.r=Wl(t["!ref"]).e.r,i=gn(l));for(var c=0;c<o.length;++c){var u=o[c];if(u.Name=="_xlnm._FilterDatabase"&&u.Sheet==n){u.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Vt(e,161,tm(ea(i))),Vt(e,162)}}function Fpe(e,t,r){Vt(e,133),Vt(e,137,Npe(t,r)),Vt(e,138),Vt(e,134)}function Mpe(e,t){t["!protect"]&&Vt(e,535,kpe(t["!protect"]))}function Rpe(e,t,r,n){var s=Hl(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=ea(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Vt(s,129),(r.vbaraw||o["!outline"])&&Vt(s,147,Ohe(l,o["!outline"])),Vt(s,148,Ehe(c)),Fpe(s,o,r.Workbook),Ope(s,o),Cpe(s,o,e,t),Mpe(s,o),Lpe(s,o,r,e),Tpe(s,o),Ipe(s,o,n),o["!margins"]&&Vt(s,476,bpe(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&Ppe(s,o),Dpe(s,o,e,n),Vt(s,130),s.end()}function Bpe(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Zn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function Upe(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,u="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(d){var m=Bpe(d);f.s.r=f.s.c=0,f.e.c=l,u=Es(l),m[0].forEach(function(p,y){o[u+Zs(y)]={t:"n",v:p,z:m[1]},c=y}),f.e.r<c&&(f.e.r=c),++l}),l>0&&(o["!ref"]=gn(f)),o}function qpe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(UR);return l&&vS(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function $pe(e,t){e.l+=10;var r=qo(e);return{name:r}}function zpe(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return wf(e,function(c,u,f){switch(f){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(u.T>0)){if(!(u.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var yS=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],Hpe=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],Wpe=[],Vpe=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function lI(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=as(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function cI(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=as(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function HR(e){cI(e.WBProps,yS),cI(e.CalcPr,Vpe),lI(e.WBView,Hpe),lI(e.Sheets,Wpe),cp.date1904=as(e.WBProps.date1904)}function Gpe(e){return!e.Workbook||!e.Workbook.WBProps?"false":as(e.Workbook.WBProps.date1904)?"true":"false"}var Kpe="][*?/\\".split("");function WR(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return Kpe.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function Xpe(e,t,r){e.forEach(function(n,s){WR(n);for(var i=0;i<s;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[s]&&t[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function Ype(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];Xpe(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)G0e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var Jpe=/<\w+:workbook/;function Qpe(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(zo,function(c,u){var f=nn(c);switch(Td(f[0])){case"<?xml":break;case"<workbook":c.match(Jpe)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":yS.forEach(function(d){if(f[d[0]]!=null)switch(d[2]){case"bool":r.WBProps[d[0]]=as(f[d[0]]);break;case"int":r.WBProps[d[0]]=parseInt(f[d[0]],10);break;default:r.WBProps[d[0]]=f[d[0]]}}),f.codeName&&(r.WBProps.CodeName=Ba(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=Zn(Ba(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=Ba(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),as(f.hidden||"0")&&(i.Hidden=!0),o=u+c.length;break;case"</definedName>":i.Ref=Zn(Ba(e.slice(o,u))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return c}),gh.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return HR(r),r}function VR(e){var t=[ei];t[t.length]=ur("workbook",null,{xmlns:gh[0],"xmlns:r":Oi.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(yS.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=ur("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:Sa(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=ur("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=ur("definedName",Sa(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Zpe(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=nk(e),r.name=qo(e),r}function eme(e,t){return t||(t=Ft(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),aS(e.strRelID,t),Yi(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function tme(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?qo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function rme(e,t){t||(t=Ft(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),MM(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function nme(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function ame(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Doe(e),o=q0e(e,0,r),l=nS(e);e.l=n;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function sme(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],Zx[16]={n:"BrtFRTArchID$",f:nme},wf(e,function(c,u,f){switch(f){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=Lo(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,c]):o[0]=[f,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!u.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),HR(r),r.Names=i,r.supbooks=o,r}function ime(e,t){Vt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Vt(e,156,eme(s))}Vt(e,144)}function ome(e,t){t||(t=Ft(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Yi("SheetJS",t),Yi(ey.version,t),Yi(ey.version,t),Yi("7262",t),t.length>t.l?t.slice(0,t.l):t}function lme(e,t){t||(t=Ft(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function cme(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(Vt(e,135),Vt(e,158,lme(s)),Vt(e,136))}}function ume(e,t){var r=Hl();return Vt(r,131),Vt(r,128,ome()),Vt(r,153,rme(e.Workbook&&e.Workbook.WBProps||null)),cme(r,e),ime(r,e),Vt(r,132),r.end()}function dme(e,t,r){return t.slice(-4)===".bin"?sme(e,r):Qpe(e,r)}function fme(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?Ape(e,n,r,s,i,o,l):ahe(e,n,r,s,i,o,l)}function hme(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?zpe(e,n,r,s,i):qpe(e,n,r,s,i)}function pme(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?xfe():gfe()}function mme(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?pfe():mfe()}function xme(e,t,r,n){return t.slice(-4)===".bin"?dde(e,r,n):Zue(e,r,n)}function gme(e,t,r){return _R(e,r)}function vme(e,t,r){return t.slice(-4)===".bin"?vue(e,r):mue(e,r)}function yme(e,t,r){return t.slice(-4)===".bin"?cfe(e,r):efe(e,r)}function bme(e,t,r){return t.slice(-4)===".bin"?Jde(e):Xde(e)}function wme(e,t,r,n){return r.slice(-4)===".bin"?Qde(e,t,r,n):void 0}function Nme(e,t,r){return t.slice(-4)===".bin"?Vde(e,t,r):Kde(e,t,r)}function jme(e,t,r){return(t.slice(-4)===".bin"?ume:VR)(e)}function kme(e,t,r,n,s){return(t.slice(-4)===".bin"?Rpe:qR)(e,r,n,s)}function Sme(e,t,r){return(t.slice(-4)===".bin"?wde:kR)(e,r)}function _me(e,t,r){return(t.slice(-4)===".bin"?wue:xR)(e,r)}function Ame(e,t,r){return(t.slice(-4)===".bin"?ufe:CR)(e)}function Eme(e){return(e.slice(-4)===".bin"?Gde:AR)()}var GR=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,KR=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function _u(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(GR),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(KR),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function Cme(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(GR),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(KR),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var Zm;function Tme(e,t){var r=Zm[e]||Zn(e);return r==="General"?ih(t):iu(r,t)}function Ome(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=as(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=is(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Zn(t)]=s}function Pme(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Nf[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Hx(e.v):e.w=ih(e.v):e.w=Tme(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=Zm[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Qp(n)){var s=z0(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function Ime(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=Wue[n.Pattern]||n.Pattern)}e[t.ID]=t}function Dme(e,t,r,n,s,i,o,l,c,u){var f="General",d=n.StyleID,m={};u=u||{};var p=[],y=0;for(d===void 0&&l&&(d=l.StyleID),d===void 0&&o&&(d=o.StyleID);i[d]!==void 0&&(i[d].nf&&(f=i[d].nf),i[d].Interior&&p.push(i[d].Interior),!!i[d].Parent);)d=i[d].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=as(e);break;case"String":n.t="s",n.r=_8(Zn(e)),n.v=e.indexOf("<")>-1?Zn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(is(e)-new Date(Date.UTC(1899,11,30)))/(1440*60*1e3),n.v!==n.v?n.v=Zn(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=$M[e],u.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=_8(t||e));break}if(Pme(n,f,u),u.cellFormula!==!1)if(n.Formula){var v=Zn(n.Formula);v.charCodeAt(0)==61&&(v=v.slice(1)),n.f=lp(v,s),delete n.Formula,n.ArrayRange=="RC"?n.F=lp("RC:RC",s):n.ArrayRange&&(n.F=lp(n.ArrayRange,s),c.push([ea(n.F),n.F]))}else for(y=0;y<c.length;++y)s.r>=c[y][0].s.r&&s.r<=c[y][0].e.r&&s.c>=c[y][0].s.c&&s.c<=c[y][0].e.c&&(n.F=c[y][1]);u.cellStyles&&(p.forEach(function(g){!m.patternType&&g.patternType&&(m.patternType=g.patternType)}),n.s=m),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function Lme(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function ij(e,t){var r=t||{};Zp();var n=Dm(J3(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=Ba(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=os(r);return o.type="string",Bp.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(ve){s.indexOf("<"+ve)>=0&&(i=!0)}),i)return bxe(n,r);Zm={"General Number":"General","General Date":Jr[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Jr[15],"Short Date":Jr[14],"Long Time":Jr[19],"Medium Time":Jr[18],"Short Time":Jr[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Jr[2],Standard:Jr[4],Percent:Jr[10],Scientific:Jr[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],u,f={},d=[],m=r.dense?[]:{},p="",y={},v={},g=_u('<Data ss:Type="String">'),b=0,N=0,j=0,w={s:{r:2e6,c:2e6},e:{r:0,c:0}},S={},P={},A="",T=0,I=[],B={},E={},C=0,M=[],q=[],G={},Z=[],te,ne=!1,J=[],ee=[],H={},O=0,R=0,W={Sheets:[],WBProps:{date1904:!1}},U={};Gx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var K="";l=Gx.exec(n);)switch(l[3]=(K=l[3]).toLowerCase()){case"data":if(K=="data"){if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?Dme(n.slice(b,l.index),A,g,c[c.length-1][0]=="comment"?G:y,{c:N,r:j},S,Z[N],v,J,r):(A="",g=_u(l[0]),b=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(q.length>0&&(y.c=q),(!r.sheetRows||r.sheetRows>j)&&y.v!==void 0&&(r.dense?(m[j]||(m[j]=[]),m[j][N]=y):m[Es(N)+Zs(j)]=y),y.HRef&&(y.l={Target:Zn(y.HRef)},y.HRefScreenTip&&(y.l.Tooltip=y.HRefScreenTip),delete y.HRef,delete y.HRefScreenTip),(y.MergeAcross||y.MergeDown)&&(O=N+(parseInt(y.MergeAcross,10)|0),R=j+(parseInt(y.MergeDown,10)|0),I.push({s:{c:N,r:j},e:{c:O,r:R}})),!r.sheetStubs)y.MergeAcross?N=O+1:++N;else if(y.MergeAcross||y.MergeDown){for(var oe=N;oe<=O;++oe)for(var he=j;he<=R;++he)(oe>N||he>j)&&(r.dense?(m[he]||(m[he]=[]),m[he][oe]={t:"z"}):m[Es(oe)+Zs(he)]={t:"z"});N=O+1}else++N;else y=Cme(l[0]),y.Index&&(N=+y.Index-1),N<w.s.c&&(w.s.c=N),N>w.e.c&&(w.e.c=N),l[0].slice(-2)==="/>"&&++N,q=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(j<w.s.r&&(w.s.r=j),j>w.e.r&&(w.e.r=j),l[0].slice(-2)==="/>"&&(v=_u(l[0]),v.Index&&(j=+v.Index-1)),N=0,++j):(v=_u(l[0]),v.Index&&(j=+v.Index-1),H={},(v.AutoFitHeight=="0"||v.Height)&&(H.hpx=parseInt(v.Height,10),H.hpt=Qx(H.hpx),ee[j]=H),v.Hidden=="1"&&(H.hidden=!0,ee[j]=H));break;case"worksheet":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));d.push(p),w.s.r<=w.e.r&&w.s.c<=w.e.c&&(m["!ref"]=gn(w),r.sheetRows&&r.sheetRows<=w.e.r&&(m["!fullref"]=m["!ref"],w.e.r=r.sheetRows-1,m["!ref"]=gn(w))),I.length&&(m["!merges"]=I),Z.length>0&&(m["!cols"]=Z),ee.length>0&&(m["!rows"]=ee),f[p]=m}else w={s:{r:2e6,c:2e6},e:{r:0,c:0}},j=N=0,c.push([l[3],!1]),u=_u(l[0]),p=Zn(u.Name),m=r.dense?[]:{},I=[],J=[],ee=[],U={name:p,Hidden:0},W.Sheets.push(U);break;case"table":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Z=[],ne=!1}break;case"style":l[1]==="/"?Ime(S,P,r):P=_u(l[0]);break;case"numberformat":P.nf=Zn(_u(l[0]).Format||"General"),Zm[P.nf]&&(P.nf=Zm[P.nf]);for(var ie=0;ie!=392&&Jr[ie]!=P.nf;++ie);if(ie==392){for(ie=57;ie!=392;++ie)if(Jr[ie]==null){cf(P.nf,ie);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(te=_u(l[0]),te.Hidden&&(te.hidden=!0,delete te.Hidden),te.Width&&(te.wpx=parseInt(te.Width,10)),!ne&&te.wpx>10){ne=!0,Ro=NR;for(var ce=0;ce<Z.length;++ce)Z[ce]&&o0(Z[ce])}ne&&o0(te),Z[te.Index-1||Z.length]=te;for(var Le=0;Le<+te.Span;++Le)Z[Z.length]=os(te);break;case"namedrange":if(l[1]==="/")break;W.Names||(W.Names=[]);var le=nn(l[0]),He={Name:le.Name,Ref:lp(le.RefersTo.slice(1),{r:0,c:0})};W.Sheets.length>0&&(He.Sheet=W.Sheets.length-1),W.Names.push(He);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?A+=n.slice(T,l.index):T=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;P.Interior=_u(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?sle(B,K,n.slice(C,l.index)):C=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"));Lme(G),q.push(G)}else c.push([l[3],!1]),u=_u(l[0]),G={a:u.Author};break;case"autofilter":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Fe=_u(l[0]);m["!autofilter"]={ref:lp(Fe.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((u=c.pop())[0]!==l[3])throw new Error("Bad state: "+u.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return pI(n,r);var fe=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:fe=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:fe=!1}break;case"excelworkbook":switch(l[3]){case"date1904":W.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:fe=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:fe=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(C,l.index)){case"SheetHidden":U.Hidden=1;break;case"SheetVeryHidden":U.Hidden=2;break}else C=l.index+l[0].length;break;case"header":m["!margins"]||Q0(m["!margins"]={},"xlml"),isNaN(+nn(l[0]).Margin)||(m["!margins"].header=+nn(l[0]).Margin);break;case"footer":m["!margins"]||Q0(m["!margins"]={},"xlml"),isNaN(+nn(l[0]).Margin)||(m["!margins"].footer=+nn(l[0]).Margin);break;case"pagemargins":var Q=nn(l[0]);m["!margins"]||Q0(m["!margins"]={},"xlml"),isNaN(+Q.Top)||(m["!margins"].top=+Q.Top),isNaN(+Q.Left)||(m["!margins"].left=+Q.Left),isNaN(+Q.Right)||(m["!margins"].right=+Q.Right),isNaN(+Q.Bottom)||(m["!margins"].bottom=+Q.Bottom);break;case"displayrighttoleft":W.Views||(W.Views=[]),W.Views[0]||(W.Views[0]={}),W.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":m["!outline"]||(m["!outline"]={}),m["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:fe=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:fe=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:fe=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:fe=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:fe=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:fe=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:fe=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:fe=!1}break;case"smarttags":break;default:fe=!1;break}if(fe||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?Ome(E,K,M,n.slice(C,l.index)):(M=l,C=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var we={};return!r.bookSheets&&!r.bookProps&&(we.Sheets=f),we.SheetNames=d,we.Workbook=W,we.SSF=os(Jr),we.Props=B,we.Custprops=E,we}function uk(e,t){switch(wS(t=t||{}),t.type||"base64"){case"base64":return ij(bc(e),t);case"binary":case"buffer":case"file":return ij(e,t);case"array":return ij(v0(e),t)}}function Fme(e,t){var r=[];return e.Props&&r.push(ile(e.Props,t)),e.Custprops&&r.push(ole(e.Props,e.Custprops)),r.join("")}function Mme(){return""}function Rme(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var i=[];i.push(ur("NumberFormat",null,{"ss:Format":Sa(Jr[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(ur("Style",i.join(""),o))}),ur("Styles",r.join(""))}function XR(e){return ur("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+mS(e.Ref,{r:0,c:0})})}function Bme(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(XR(s)))}return ur("Names",r.join(""))}function Ume(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(XR(l)))}return i.join("")}function qme(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(ur("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(ur("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(ur("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(ur("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(uo("ProtectContents","True")),e["!protect"].objects&&s.push(uo("ProtectObjects","True")),e["!protect"].scenarios&&s.push(uo("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(uo("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(uo("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":ur("WorksheetOptions",s.join(""),{xmlns:fc.x})}function $me(e){return e.map(function(t){var r=coe(t.t||""),n=ur("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return ur("Comment",n,{"ss:Author":t.a})}).join("")}function zme(e,t,r,n,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+Sa(mS(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Cs(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=Sa(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=Sa(e.l.Tooltip))),r["!merges"])for(var u=r["!merges"],f=0;f!=u.length;++f)u[f].s.c!=o.c||u[f].s.r!=o.r||(u[f].e.c>u[f].s.c&&(l["ss:MergeAcross"]=u[f].e.c-u[f].s.c),u[f].e.r>u[f].s.r&&(l["ss:MergeDown"]=u[f].e.r-u[f].s.r));var d="",m="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":d="Number",m=String(e.v);break;case"b":d="Boolean",m=e.v?"1":"0";break;case"e":d="Error",m=Nf[e.v];break;case"d":d="DateTime",m=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Jr[14]);break;case"s":d="String",m=loe(e.v||"");break}var p=b0(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+p),l["ss:Index"]=o.c+1;var y=e.v!=null?m:"",v=e.t=="z"?"":'<Data ss:Type="'+d+'">'+y+"</Data>";return(e.c||[]).length>0&&(v+=$me(e.c)),ur("Cell",v,l)}function Hme(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Up(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function Wme(e,t,r,n){if(!e["!ref"])return"";var s=ea(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(g,b){o0(g);var N=!!g.width,j=lb(b,g),w={"ss:Index":b+1};N&&(w["ss:Width"]=Yx(j.width)),g.hidden&&(w["ss:Hidden"]="1"),l.push(ur("Column",null,w))});for(var c=Array.isArray(e),u=s.s.r;u<=s.e.r;++u){for(var f=[Hme(u,(e["!rows"]||[])[u])],d=s.s.c;d<=s.e.c;++d){var m=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>d)&&!(i[o].s.r>u)&&!(i[o].e.c<d)&&!(i[o].e.r<u)){(i[o].s.c!=d||i[o].s.r!=u)&&(m=!0);break}if(!m){var p={r:u,c:d},y=tn(p),v=c?(e[u]||[])[d]:e[y];f.push(zme(v,y,e,t,r,n,p))}}f.push("</Row>"),f.length>2&&l.push(f.join(""))}return l.join("")}function Vme(e,t,r){var n=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?Ume(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?Wme(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(qme(i,t,e,r)),n.join("")}function Gme(e,t){t||(t={}),e.SSF||(e.SSF=os(Jr)),e.SSF&&(Zp(),tb(e.SSF),t.revssf=nb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],b0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(Fme(e,t)),r.push(Mme()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(ur("Worksheet",Vme(n,t,e),{"ss:Name":Sa(e.SheetNames[n])}));return r[2]=Rme(e,t),r[3]=Bme(e),ei+ur("Workbook",r.join(""),{xmlns:fc.ss,"xmlns:o":fc.o,"xmlns:x":fc.x,"xmlns:ss":fc.ss,"xmlns:dt":fc.dt,"xmlns:html":fc.html})}function Kme(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Boe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Uoe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var Xme=[60,1084,2066,2165,2175];function Yme(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=ef(r,r.l),u=dk[c],f=0;u!=null&&Xme.indexOf(c)>-1;)i=ef(r,r.l+2),f=r.l+4,c==2066?f+=4:(c==2165||c==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,u=dk[c=ef(r,r.l)];var d=Xi(o);co(d,0);var m=0;d.lens=[];for(var p=0;p<o.length;++p)d.lens.push(m),m+=o[p].length;if(d.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+d.length+" < "+n;return t.f(d,d.length,s)}function id(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Jr[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Nf[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=Hx(e.v):e.w=ih(e.v):e.w=iu(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&Qp(Jr[n]||String(n))){var s=z0(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function kv(e,t,r){return{v:e,ixfe:t,t:r}}function Jme(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,c=[],u="",f={},d,m="",p,y,v,g,b={},N=[],j,w,S=[],P=[],A={Sheets:[],WBProps:{date1904:!1},Views:[{}]},T={},I=function(ut){return ut<8?X0[ut]:ut<64&&P[ut-8]||X0[ut]},B=function(ut,lt,pr){var tr=lt.XF.data;if(!(!tr||!tr.patternType||!pr||!pr.cellStyles)){lt.s={},lt.s.patternType=tr.patternType;var ft;(ft=Xx(I(tr.icvFore)))&&(lt.s.fgColor={rgb:ft}),(ft=Xx(I(tr.icvBack)))&&(lt.s.bgColor={rgb:ft})}},E=function(ut,lt,pr){if(!(H>1)&&!(pr.sheetRows&&ut.r>=pr.sheetRows)){if(pr.cellStyles&&lt.XF&&lt.XF.data&&B(ut,lt,pr),delete lt.ixfe,delete lt.XF,d=ut,m=tn(ut),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),ut.r<o.s.r&&(o.s.r=ut.r),ut.c<o.s.c&&(o.s.c=ut.c),ut.r+1>o.e.r&&(o.e.r=ut.r+1),ut.c+1>o.e.c&&(o.e.c=ut.c+1),pr.cellFormula&&lt.f){for(var tr=0;tr<N.length;++tr)if(!(N[tr][0].s.c>ut.c||N[tr][0].s.r>ut.r)&&!(N[tr][0].e.c<ut.c||N[tr][0].e.r<ut.r)){lt.F=gn(N[tr][0]),(N[tr][0].s.c!=ut.c||N[tr][0].s.r!=ut.r)&&delete lt.f,lt.f&&(lt.f=""+Lo(N[tr][1],o,ut,J,C));break}}pr.dense?(s[ut.r]||(s[ut.r]=[]),s[ut.r][ut.c]=lt):s[m]=lt}},C={enc:!1,sbcch:0,snames:[],sharedf:b,arrayf:N,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(C.password=t.password);var M,q=[],G=[],Z=[],te=[],ne=!1,J=[];J.SheetNames=C.snames,J.sharedf=C.sharedf,J.arrayf=C.arrayf,J.names=[],J.XTI=[];var ee=0,H=0,O=0,R=[],W=[],U;C.codepage=1200,Fu(1200);for(var K=!1;e.l<e.length-1;){var oe=e.l,he=e.read_shift(2);if(he===0&&ee===10)break;var ie=e.l===e.length?0:e.read_shift(2),ce=dk[he];if(ce&&ce.f){if(t.bookSheets&&ee===133&&he!==133)break;if(ee=he,ce.r===2||ce.r==12){var Le=e.read_shift(2);if(ie-=2,!C.enc&&Le!==he&&((Le&255)<<8|Le>>8)!==he)throw new Error("rt mismatch: "+Le+"!="+he);ce.r==12&&(e.l+=10,ie-=10)}var le={};if(he===10?le=ce.f(e,ie,C):le=Yme(he,ce,e,ie,C),H==0&&[9,521,1033,2057].indexOf(ee)===-1)continue;switch(he){case 34:r.opts.Date1904=A.WBProps.date1904=le;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(C.enc||(e.l=0),C.enc=le,!t.password)throw new Error("File is password-protected");if(le.valid==null)throw new Error("Encryption scheme unsupported");if(!le.valid)throw new Error("Password is incorrect");break;case 92:C.lastuser=le;break;case 66:var He=Number(le);switch(He){case 21010:He=1200;break;case 32768:He=1e4;break;case 32769:He=1252;break}Fu(C.codepage=He),K=!0;break;case 317:C.rrtabid=le;break;case 25:C.winlocked=le;break;case 439:r.opts.RefreshAll=le;break;case 12:r.opts.CalcCount=le;break;case 16:r.opts.CalcDelta=le;break;case 17:r.opts.CalcIter=le;break;case 13:r.opts.CalcMode=le;break;case 14:r.opts.CalcPrecision=le;break;case 95:r.opts.CalcSaveRecalc=le;break;case 15:C.CalcRefMode=le;break;case 2211:r.opts.FullCalc=le;break;case 129:le.fDialog&&(s["!type"]="dialog"),le.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),le.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:S.push(le);break;case 430:J.push([le]),J[J.length-1].XTI=[];break;case 35:case 547:J[J.length-1].push(le);break;case 24:case 536:U={Name:le.Name,Ref:Lo(le.rgce,o,null,J,C)},le.itab>0&&(U.Sheet=le.itab-1),J.names.push(U),J[0]||(J[0]=[],J[0].XTI=[]),J[J.length-1].push(le),le.Name=="_xlnm._FilterDatabase"&&le.itab>0&&le.rgce&&le.rgce[0]&&le.rgce[0][0]&&le.rgce[0][0][0]=="PtgArea3d"&&(W[le.itab-1]={ref:gn(le.rgce[0][0][1][2])});break;case 22:C.ExternCount=le;break;case 23:J.length==0&&(J[0]=[],J[0].XTI=[]),J[J.length-1].XTI=J[J.length-1].XTI.concat(le),J.XTI=J.XTI.concat(le);break;case 2196:if(C.biff<8)break;U!=null&&(U.Comment=le[1]);break;case 18:s["!protect"]=le;break;case 19:le!==0&&C.WTF&&console.error("Password verifier: "+le);break;case 133:i[le.pos]=le,C.snames.push(le.name);break;case 10:{if(--H)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=gn(o),t.sheetRows&&t.sheetRows<=o.e.r){var Fe=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=gn(o),o.e.r=Fe}o.e.r++,o.e.c++}q.length>0&&(s["!merges"]=q),G.length>0&&(s["!objects"]=G),Z.length>0&&(s["!cols"]=Z),te.length>0&&(s["!rows"]=te),A.Sheets.push(T)}u===""?f=s:n[u]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(C.biff===8&&(C.biff={9:2,521:3,1033:4}[he]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[le.BIFFVer]||8),C.biffguess=le.BIFFVer==0,le.BIFFVer==0&&le.dt==4096&&(C.biff=5,K=!0,Fu(C.codepage=28591)),C.biff==8&&le.BIFFVer==0&&le.dt==16&&(C.biff=2),H++)break;if(s=t.dense?[]:{},C.biff<8&&!K&&(K=!0,Fu(C.codepage=t.codepage||1252)),C.biff<5||le.BIFFVer==0&&le.dt==4096){u===""&&(u="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var fe={pos:e.l-ie,name:u};i[fe.pos]=fe,C.snames.push(u)}else u=(i[oe]||{name:""}).name;le.dt==32&&(s["!type"]="chart"),le.dt==64&&(s["!type"]="macro"),q=[],G=[],C.arrayf=N=[],Z=[],te=[],ne=!1,T={Hidden:(i[oe]||{hs:0}).hs,name:u}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[le.r]||[])[le.c]:s[tn({c:le.c,r:le.r})])&&++le.c,j={ixfe:le.ixfe,XF:S[le.ixfe]||{},v:le.val,t:"n"},O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E({c:le.c,r:le.r},j,t);break;case 5:case 517:j={ixfe:le.ixfe,XF:S[le.ixfe],v:le.val,t:le.t},O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E({c:le.c,r:le.r},j,t);break;case 638:j={ixfe:le.ixfe,XF:S[le.ixfe],v:le.rknum,t:"n"},O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E({c:le.c,r:le.r},j,t);break;case 189:for(var Q=le.c;Q<=le.C;++Q){var we=le.rkrec[Q-le.c][0];j={ixfe:we,XF:S[we],v:le.rkrec[Q-le.c][1],t:"n"},O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E({c:Q,r:le.r},j,t)}break;case 6:case 518:case 1030:{if(le.val=="String"){l=le;break}if(j=kv(le.val,le.cell.ixfe,le.tt),j.XF=S[j.ixfe],t.cellFormula){var ve=le.formula;if(ve&&ve[0]&&ve[0][0]&&ve[0][0][0]=="PtgExp"){var Ee=ve[0][0][1][0],pe=ve[0][0][1][1],ue=tn({r:Ee,c:pe});b[ue]?j.f=""+Lo(le.formula,o,le.cell,J,C):j.F=((t.dense?(s[Ee]||[])[pe]:s[ue])||{}).F}else j.f=""+Lo(le.formula,o,le.cell,J,C)}O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E(le.cell,j,t),l=le}break;case 7:case 519:if(l)l.val=le,j=kv(le,l.cell.ixfe,"s"),j.XF=S[j.ixfe],t.cellFormula&&(j.f=""+Lo(l.formula,o,l.cell,J,C)),O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E(l.cell,j,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{N.push(le);var Pe=tn(le[0].s);if(p=t.dense?(s[le[0].s.r]||[])[le[0].s.c]:s[Pe],t.cellFormula&&p){if(!l||!Pe||!p)break;p.f=""+Lo(le[1],o,le[0],J,C),p.F=gn(le[0])}}break;case 1212:{if(!t.cellFormula)break;if(m){if(!l)break;b[tn(l.cell)]=le[0],p=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[tn(l.cell)],(p||{}).f=""+Lo(le[0],o,d,J,C)}}break;case 253:j=kv(c[le.isst].t,le.ixfe,"s"),c[le.isst].h&&(j.h=c[le.isst].h),j.XF=S[j.ixfe],O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E({c:le.c,r:le.r},j,t);break;case 513:t.sheetStubs&&(j={ixfe:le.ixfe,XF:S[le.ixfe],t:"z"},O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E({c:le.c,r:le.r},j,t));break;case 190:if(t.sheetStubs)for(var Ne=le.c;Ne<=le.C;++Ne){var Be=le.ixfe[Ne-le.c];j={ixfe:Be,XF:S[Be],t:"z"},O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E({c:Ne,r:le.r},j,t)}break;case 214:case 516:case 4:j=kv(le.val,le.ixfe,"s"),j.XF=S[j.ixfe],O>0&&(j.z=R[j.ixfe>>8&63]),id(j,t,r.opts.Date1904),E({c:le.c,r:le.r},j,t);break;case 0:case 512:H===1&&(o=le);break;case 252:c=le;break;case 1054:if(C.biff==4){R[O++]=le[1];for(var nt=0;nt<O+163&&Jr[nt]!=le[1];++nt);nt>=163&&cf(le[1],O+163)}else cf(le[1],le[0]);break;case 30:{R[O++]=le;for(var mt=0;mt<O+163&&Jr[mt]!=le;++mt);mt>=163&&cf(le,O+163)}break;case 229:q=q.concat(le);break;case 93:G[le.cmo[0]]=C.lastobj=le;break;case 438:C.lastobj.TxO=le;break;case 127:C.lastobj.ImData=le;break;case 440:for(g=le[0].s.r;g<=le[0].e.r;++g)for(v=le[0].s.c;v<=le[0].e.c;++v)p=t.dense?(s[g]||[])[v]:s[tn({c:v,r:g})],p&&(p.l=le[1]);break;case 2048:for(g=le[0].s.r;g<=le[0].e.r;++g)for(v=le[0].s.c;v<=le[0].e.c;++v)p=t.dense?(s[g]||[])[v]:s[tn({c:v,r:g})],p&&p.l&&(p.l.Tooltip=le[1]);break;case 28:{if(C.biff<=5&&C.biff>=2)break;p=t.dense?(s[le[0].r]||[])[le[0].c]:s[tn(le[0])];var kt=G[le[2]];p||(t.dense?(s[le[0].r]||(s[le[0].r]=[]),p=s[le[0].r][le[0].c]={t:"z"}):p=s[tn(le[0])]={t:"z"},o.e.r=Math.max(o.e.r,le[0].r),o.s.r=Math.min(o.s.r,le[0].r),o.e.c=Math.max(o.e.c,le[0].c),o.s.c=Math.min(o.s.c,le[0].c)),p.c||(p.c=[]),y={a:le[1],t:kt.TxO.t},p.c.push(y)}break;case 2173:Rde(S[le.ixfe],le.ext);break;case 125:{if(!C.cellStyles)break;for(;le.e>=le.s;)Z[le.e--]={width:le.w/256,level:le.level||0,hidden:!!(le.flags&1)},ne||(ne=!0,fS(le.w/256)),o0(Z[le.e+1])}break;case 520:{var Re={};le.level!=null&&(te[le.r]=Re,Re.level=le.level),le.hidden&&(te[le.r]=Re,Re.hidden=!0),le.hpt&&(te[le.r]=Re,Re.hpt=le.hpt,Re.hpx=Up(le.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Q0(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[he]]=le;break;case 161:s["!margins"]||Q0(s["!margins"]={}),s["!margins"].header=le.header,s["!margins"].footer=le.footer;break;case 574:le.RTL&&(A.Views[0].RTL=!0);break;case 146:P=le;break;case 2198:M=le;break;case 140:w=le;break;case 442:u?T.CodeName=le||T.name:A.WBProps.CodeName=le||"ThisWorkbook";break}}else ce||console.error("Missing Info for XLS Record 0x"+he.toString(16)),e.l+=ie}return r.SheetNames=Bs(i).sort(function(gt,ut){return Number(gt)-Number(ut)}).map(function(gt){return i[gt].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&W.forEach(function(gt,ut){r.Sheets[r.SheetNames[ut]]["!autofilter"]=gt}),r.Strings=c,r.SSF=os(Jr),C.enc&&(r.Encryption=C.enc),M&&(r.Themes=M),r.Metadata={},w!==void 0&&(r.Metadata.Country=w),J.names.length>0&&(A.Names=J.names),r.Workbook=A,r}var ex={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function Qme(e,t,r){var n=Hr.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=H8(n,ak,ex.DSI);for(var i in s)t[i]=s[i]}catch(u){if(r.WTF)throw u}var o=Hr.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=H8(o,sk,ex.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(u){if(r.WTF)throw u}t.HeadingPairs&&t.TitlesOfParts&&(KM(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Zme(e,t){var r=[],n=[],s=[],i=0,o,l=b8(ak,"n"),c=b8(sk,"n");if(e.Props)for(o=Bs(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=Bs(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Custprops[o[i]]]);var u=[];for(i=0;i<s.length;++i)tR.indexOf(s[i][0])>-1||GM.indexOf(s[i][0])>-1||s[i][1]!=null&&u.push(s[i]);n.length&&Hr.utils.cfb_add(t,"/SummaryInformation",W8(n,ex.SI,c,sk)),(r.length||u.length)&&Hr.utils.cfb_add(t,"/DocumentSummaryInformation",W8(r,ex.DSI,l,ak,u.length?u:null,ex.UDI))}function YR(e,t){t||(t={}),wS(t),$3(),t.codepage&&q3(t.codepage);var r,n;if(e.FullPaths){if(Hr.find(e,"/encryption"))throw new Error("File is password-protected");r=Hr.find(e,"!CompObj"),n=Hr.find(e,"/Workbook")||Hr.find(e,"/Book")}else{switch(t.type){case"base64":e=mc(bc(e));break;case"binary":e=mc(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}co(e,0),n={content:e}}var s,i;if(r&&Kme(r),t.bookProps&&!t.bookSheets)s={};else{var o=Tn?"buffer":"array";if(n&&n.content)s=Jme(n.content,t);else if((i=Hr.find(e,"PerfectOffice_MAIN"))&&i.content)s=J0.to_workbook(i.content,(t.type=o,t));else if((i=Hr.find(e,"NativeContent_MAIN"))&&i.content)s=J0.to_workbook(i.content,(t.type=o,t));else throw(i=Hr.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Hr.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=ffe(e))}var l={};return e.FullPaths&&Qme(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function exe(e,t){var r=t||{},n=Hr.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Hr.utils.cfb_add(n,s,JR(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Zme(e,n),r.biff==8&&e.vbaraw&&hfe(n,Hr.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var Zx={0:{f:khe},1:{f:Phe},2:{f:Jhe},3:{f:Uhe},4:{f:Fhe},5:{f:Khe},6:{f:rpe},7:{f:Hhe},8:{f:cpe},9:{f:lpe},10:{f:ipe},11:{f:ope},12:{f:Dhe},13:{f:Zhe},14:{f:$he},15:{f:Rhe},16:{f:$R},17:{f:ape},18:{f:Vhe},19:{f:rS},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:ame},40:{},42:{},43:{f:rde},44:{f:ede},45:{f:sde},46:{f:ode},47:{f:ide},48:{},49:{f:Aoe},50:{},51:{f:qde},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:fR},62:{f:tpe},63:{f:Yde},64:{f:Spe},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:$o,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:wpe},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:The},148:{f:Ahe,p:16},151:{f:mpe},152:{},153:{f:tme},154:{},155:{},156:{f:Zpe},157:{},158:{},159:{T:1,f:gue},160:{T:-1},161:{T:1,f:wh},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:upe},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:Bde},336:{T:-1},337:{f:Hde,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:nk},357:{},358:{},359:{},360:{T:1},361:{},362:{f:dR},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:xpe},427:{f:gpe},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:ype},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:Che},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:hpe},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:nk},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ofe},633:{T:1},634:{T:-1},635:{T:1,f:sfe},636:{T:-1},637:{f:Ooe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:$pe},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:_pe},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},dk={6:{f:aj},10:{f:Uf},12:{f:mi},13:{f:mi},14:{f:Ks},15:{f:Ks},16:{f:Bo},17:{f:Ks},18:{f:Ks},19:{f:mi},20:{f:J8},21:{f:J8},23:{f:dR},24:{f:Z8},25:{f:Ks},26:{},27:{},28:{f:_ce},29:{},34:{f:Ks},35:{f:Q8},38:{f:Bo},39:{f:Bo},40:{f:Bo},41:{f:Bo},42:{f:Ks},43:{f:Ks},47:{f:Rue},49:{f:Zle},51:{f:mi},60:{},61:{f:Kle},64:{f:Ks},65:{f:Qle},66:{f:mi},77:{},80:{},81:{},82:{},85:{f:mi},89:{},90:{},91:{},92:{f:Mle},93:{f:Cce},94:{},95:{f:Ks},96:{},97:{},99:{f:Ks},125:{f:fR},128:{f:pce},129:{f:Ble},130:{f:mi},131:{f:Ks},132:{f:Ks},133:{f:Ule},134:{},140:{f:Mce},141:{f:mi},144:{},146:{f:Uce},151:{},152:{},153:{},154:{},155:{},156:{f:mi},157:{},158:{},160:{f:Gce},161:{f:zce},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:uce},190:{f:dce},193:{f:Uf},197:{},198:{},199:{},200:{},201:{},202:{f:Ks},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:mi},220:{},221:{f:Ks},222:{},224:{f:hce},225:{f:Fle},226:{f:Uf},227:{},229:{f:Ace},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:$le},253:{f:tce},255:{f:Hle},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:rR},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:Ks},353:{f:Uf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:yce},431:{f:Ks},432:{},433:{},434:{},437:{},438:{f:Pce},439:{f:Ks},440:{f:Ice},441:{},442:{f:xg},443:{},444:{f:mi},445:{},446:{},448:{f:Uf},449:{f:Gle,r:2},450:{f:Uf},512:{f:K8},513:{f:Vce},515:{f:gce},516:{f:nce},517:{f:Y8},519:{f:Kce},520:{f:Wle},523:{},545:{f:eI},549:{f:G8},566:{},574:{f:Yle},638:{f:cce},659:{},1048:{},1054:{f:sce},1084:{},1212:{f:jce},2048:{f:Lce},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:wv},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:Uf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:qce,r:12},2173:{f:Mde,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:Ks,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:Nce,r:12},2197:{},2198:{f:Ode,r:12},2199:{},2200:{},2201:{},2202:{f:kce,r:12},2203:{f:Uf},2204:{},2205:{},2206:{},2207:{},2211:{f:Vle},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:mi},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:Hce},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:Bce},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:K8},1:{},2:{f:Zce},3:{f:Jce},4:{f:Yce},5:{f:Y8},7:{f:tue},8:{},9:{f:wv},11:{},22:{f:mi},30:{f:oce},31:{},32:{},33:{f:eI},36:{},37:{f:G8},50:{f:rue},62:{},52:{},67:{},68:{f:mi},69:{},86:{},126:{},127:{f:Xce},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:nue},223:{},234:{},354:{},421:{},518:{f:aj},521:{f:wv},536:{f:Z8},547:{f:Q8},561:{},579:{},1030:{f:aj},1033:{f:wv},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function fr(e,t,r,n){var s=t;if(!isNaN(s)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&Z3(r)&&e.push(r)}}function txe(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return fr(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;var f=e.next(4);for(f.write_shift(2,i),f.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u;c<s;){for(f=e.next(4),f.write_shift(2,60),u=0;u+(o[l]||8224)<=8224;)u+=o[l]||8224,l++;f.write_shift(2,u),e.push(r.slice(c,c+u)),c+=u}}}function bg(e,t,r){return e||(e=Ft(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function rxe(e,t,r,n){var s=Ft(9);return bg(s,e,t),nR(r,n||"b",s),s}function nxe(e,t,r){var n=Ft(8+2*r.length);return bg(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function axe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?Di(is(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?fr(e,2,eue(r,n,s)):fr(e,3,Qce(r,n,s));return;case"b":case"e":fr(e,5,rxe(r,n,t.v,t.t));return;case"s":case"str":fr(e,4,nxe(r,n,(t.v||"").slice(0,255)));return}fr(e,1,bg(null,r,n))}function sxe(e,t,r,n){var s=Array.isArray(t),i=ea(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=gn(i)}for(var u=i.s.r;u<=i.e.r;++u){l=Zs(u);for(var f=i.s.c;f<=i.e.c;++f){u===i.s.r&&(c[f]=Es(f)),o=c[f]+l;var d=s?(t[u]||[])[f]:t[o];d&&axe(e,d,u,f)}}}function ixe(e,t){for(var r=t||{},n=Hl(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return fr(n,r.biff==4?1033:r.biff==3?521:9,cS(e,16,r)),sxe(n,e.Sheets[e.SheetNames[s]],s,r),fr(n,10),n.end()}function oxe(e,t,r){fr(e,49,ece({sz:12,name:"Arial"},r))}function lxe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&fr(e,1054,ice(s,t[s],r))})}function cxe(e,t){var r=Ft(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),fr(e,2151,r),r=Ft(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),lR(ea(t["!ref"]||"A1"),r),r.write_shift(4,4),fr(e,2152,r)}function uxe(e,t){for(var r=0;r<16;++r)fr(e,224,X8({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){fr(e,224,X8(n,0,t))})}function dxe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];fr(e,440,Dce(n)),n[1].Tooltip&&fr(e,2048,Fce(n))}delete t["!links"]}function fxe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&fr(e,125,$ce(lb(s,n),s))})}}function hxe(e,t,r,n,s){var i=16+b0(s.cellXfs,t,s);if(t.v==null&&!t.bf){fr(e,513,uh(r,n,i));return}if(t.bf)fr(e,6,B0e(t,r,n,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?Di(is(t.v)):t.v;fr(e,515,vce(r,n,o,i));break;case"b":case"e":fr(e,517,xce(r,n,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=gS(s.Strings,t.v,s.revStrings);fr(e,253,rce(r,n,l,i))}else fr(e,516,ace(r,n,(t.v||"").slice(0,255),i,s));break;default:fr(e,513,uh(r,n,i))}}function pxe(e,t,r){var n=Hl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),u=t.biff==8,f,d="",m=[],p=ea(i["!ref"]||"A1"),y=u?65536:16384;if(p.e.c>255||p.e.r>=y){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");p.e.c=Math.min(p.e.c,255),p.e.r=Math.min(p.e.c,y-1)}fr(n,2057,cS(r,16,t)),fr(n,13,Qc(1)),fr(n,12,Qc(100)),fr(n,15,xl(!0)),fr(n,17,xl(!1)),fr(n,16,lh(.001)),fr(n,95,xl(!0)),fr(n,42,xl(!1)),fr(n,43,xl(!1)),fr(n,130,Qc(1)),fr(n,128,mce()),fr(n,131,xl(!1)),fr(n,132,xl(!1)),u&&fxe(n,i["!cols"]),fr(n,512,lce(p,t)),u&&(i["!links"]=[]);for(var v=p.s.r;v<=p.e.r;++v){d=Zs(v);for(var g=p.s.c;g<=p.e.c;++g){v===p.s.r&&(m[g]=Es(g)),f=m[g]+d;var b=c?(i[v]||[])[g]:i[f];b&&(hxe(n,b,v,g,t),u&&b.l&&i["!links"].push([f,b.l]))}}var N=l.CodeName||l.name||s;return u&&fr(n,574,Jle((o.Views||[])[0])),u&&(i["!merges"]||[]).length&&fr(n,229,Ece(i["!merges"])),u&&dxe(n,i),fr(n,442,aR(N)),u&&cxe(n,i),fr(n,10),n.end()}function mxe(e,t,r){var n=Hl(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(fr(n,2057,cS(e,5,r)),r.bookType=="xla"&&fr(n,135),fr(n,225,l?Qc(1200):null),fr(n,193,xle(2)),c&&fr(n,191),c&&fr(n,192),fr(n,226),fr(n,92,Rle("SheetJS",r)),fr(n,66,Qc(l?1200:1252)),l&&fr(n,353,Qc(0)),l&&fr(n,448),fr(n,317,Wce(e.SheetNames.length)),l&&e.vbaraw&&fr(n,211),l&&e.vbaraw){var u=o.CodeName||"ThisWorkbook";fr(n,442,aR(u))}fr(n,156,Qc(17)),fr(n,25,xl(!1)),fr(n,18,xl(!1)),fr(n,19,Qc(0)),l&&fr(n,431,xl(!1)),l&&fr(n,444,Qc(0)),fr(n,61,Xle()),fr(n,64,xl(!1)),fr(n,141,Qc(0)),fr(n,34,xl(Gpe(e)=="true")),fr(n,14,xl(!0)),l&&fr(n,439,xl(!1)),fr(n,218,Qc(0)),oxe(n,e,r),lxe(n,e.SSF,r),uxe(n,r),l&&fr(n,352,xl(!1));var f=n.end(),d=Hl();l&&fr(d,140,Rce()),l&&r.Strings&&txe(d,252,zle(r.Strings)),fr(d,10);var m=d.end(),p=Hl(),y=0,v=0;for(v=0;v<e.SheetNames.length;++v)y+=(l?12:11)+(l?2:1)*e.SheetNames[v].length;var g=f.length+y+m.length;for(v=0;v<e.SheetNames.length;++v){var b=i[v]||{};fr(p,133,qle({pos:g,hs:b.Hidden||0,dt:0,name:e.SheetNames[v]},r)),g+=t[v].length}var N=p.end();if(y!=N.length)throw new Error("BS8 "+y+" != "+N.length);var j=[];return f.length&&j.push(f),N.length&&j.push(N),m.length&&j.push(m),Xi(j)}function xxe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=os(Jr)),e&&e.SSF&&(Zp(),tb(e.SSF),r.revssf=nb(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,NS(r),r.cellXfs=[],b0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=pxe(s,r,e);return n.unshift(mxe(e,n,r)),Xi(n)}function JR(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=Wl(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return xxe(e,t);case 4:case 3:case 2:return ixe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function uI(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=eoe(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),u=-1,f=0,d=0,m=0,p={s:{r:1e7,c:1e7},e:{r:0,c:0}},y=[];for(o=0;o<c.length;++o){var v=c[o].trim(),g=v.slice(0,3).toLowerCase();if(g=="<tr"){if(++u,r.sheetRows&&r.sheetRows<=u){--u;break}f=0;continue}if(!(g!="<td"&&g!="<th")){var b=v.split(/<\/t[dh]>/i);for(l=0;l<b.length;++l){var N=b[l].trim();if(N.match(/<t[dh]/i)){for(var j=N,w=0;j.charAt(0)=="<"&&(w=j.indexOf(">"))>-1;)j=j.slice(w+1);for(var S=0;S<y.length;++S){var P=y[S];P.s.c==f&&P.s.r<u&&u<=P.e.r&&(f=P.e.c+1,S=-1)}var A=nn(N.slice(0,N.indexOf(">")));m=A.colspan?+A.colspan:1,((d=+A.rowspan)>1||m>1)&&y.push({s:{r:u,c:f},e:{r:u+(d||1)-1,c:f+m-1}});var T=A.t||A["data-t"]||"";if(!j.length){f+=m;continue}if(j=wM(j),p.s.r>u&&(p.s.r=u),p.e.r<u&&(p.e.r=u),p.s.c>f&&(p.s.c=f),p.e.c<f&&(p.e.c=f),!j.length){f+=m;continue}var I={t:"s",v:j};r.raw||!j.trim().length||T=="s"||(j==="TRUE"?I={t:"b",v:!0}:j==="FALSE"?I={t:"b",v:!1}:isNaN(Uu(j))?isNaN(Rp(j).getDate())||(I={t:"d",v:is(j)},r.cellDates||(I={t:"n",v:Di(I.v)}),I.z=r.dateNF||Jr[14]):I={t:"n",v:Uu(j)}),r.dense?(n[u]||(n[u]=[]),n[u][f]=I):n[tn({r:u,c:f})]=I,f+=m}}}}return n["!ref"]=gn(p),y.length&&(n["!merges"]=y),n}function gxe(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,u=0;u<s.length;++u)if(!(s[u].s.r>r||s[u].s.c>o)&&!(s[u].e.r<r||s[u].e.c<o)){if(s[u].s.r<r||s[u].s.c<o){l=-1;break}l=s[u].e.r-s[u].s.r+1,c=s[u].e.c-s[u].s.c+1;break}if(!(l<0)){var f=tn({r,c:o}),d=n.dense?(e[r]||[])[o]:e[f],m=d&&d.v!=null&&(d.h||Y3(d.w||(xf(d),d.w)||""))||"",p={};l>1&&(p.rowspan=l),c>1&&(p.colspan=c),n.editable?m='<span contenteditable="true">'+m+"</span>":d&&(p["data-t"]=d&&d.t||"z",d.v!=null&&(p["data-v"]=d.v),d.z!=null&&(p["data-z"]=d.z),d.l&&(d.l.Target||"#").charAt(0)!="#"&&(m='<a href="'+d.l.Target+'">'+m+"</a>")),p.id=(n.id||"sjs")+"-"+f,i.push(ur("td",m,p))}}var y="<tr>";return y+i.join("")+"</tr>"}var vxe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',yxe="</body></html>";function bxe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return y0(uI(r[0],t),t);var n=SS();return r.forEach(function(s,i){_S(n,uI(s,t),"Sheet"+(i+1))}),n}function wxe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function QR(e,t){var r=t||{},n=r.header!=null?r.header:vxe,s=r.footer!=null?r.footer:yxe,i=[n],o=Wl(e["!ref"]);r.dense=Array.isArray(e),i.push(wxe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(gxe(e,o,l,r));return i.push("</table>"+s),i.join("")}function ZR(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?Cs(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),u={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=Wl(e["!ref"]);u.s.r=Math.min(u.s.r,f.s.r),u.s.c=Math.min(u.s.c,f.s.c),u.e.r=Math.max(u.e.r,f.e.r),u.e.c=Math.max(u.e.c,f.e.c),s==-1&&(u.e.r=s=f.e.r+1)}var d=[],m=0,p=e["!rows"]||(e["!rows"]=[]),y=0,v=0,g=0,b=0,N=0,j=0;for(e["!cols"]||(e["!cols"]=[]);y<l.length&&v<c;++y){var w=l[y];if(dI(w)){if(n.display)continue;p[v]={hidden:!0}}var S=w.children;for(g=b=0;g<S.length;++g){var P=S[g];if(!(n.display&&dI(P))){var A=P.hasAttribute("data-v")?P.getAttribute("data-v"):P.hasAttribute("v")?P.getAttribute("v"):wM(P.innerHTML),T=P.getAttribute("data-z")||P.getAttribute("z");for(m=0;m<d.length;++m){var I=d[m];I.s.c==b+i&&I.s.r<v+s&&v+s<=I.e.r&&(b=I.e.c+1-i,m=-1)}j=+P.getAttribute("colspan")||1,((N=+P.getAttribute("rowspan")||1)>1||j>1)&&d.push({s:{r:v+s,c:b+i},e:{r:v+s+(N||1)-1,c:b+i+(j||1)-1}});var B={t:"s",v:A},E=P.getAttribute("data-t")||P.getAttribute("t")||"";A!=null&&(A.length==0?B.t=E||"z":n.raw||A.trim().length==0||E=="s"||(A==="TRUE"?B={t:"b",v:!0}:A==="FALSE"?B={t:"b",v:!1}:isNaN(Uu(A))?isNaN(Rp(A).getDate())||(B={t:"d",v:is(A)},n.cellDates||(B={t:"n",v:Di(B.v)}),B.z=n.dateNF||Jr[14]):B={t:"n",v:Uu(A)})),B.z===void 0&&T!=null&&(B.z=T);var C="",M=P.getElementsByTagName("A");if(M&&M.length)for(var q=0;q<M.length&&!(M[q].hasAttribute("href")&&(C=M[q].getAttribute("href"),C.charAt(0)!="#"));++q);C&&C.charAt(0)!="#"&&(B.l={Target:C}),n.dense?(e[v+s]||(e[v+s]=[]),e[v+s][b+i]=B):e[tn({c:b+i,r:v+s})]=B,u.e.c<b+i&&(u.e.c=b+i),b+=j}}++v}return d.length&&(e["!merges"]=(e["!merges"]||[]).concat(d)),u.e.r=Math.max(u.e.r,v-1+s),e["!ref"]=gn(u),v>=c&&(e["!fullref"]=gn((u.e.r=l.length-y+v-1+s,u))),e}function e9(e,t){var r=t||{},n=r.dense?[]:{};return ZR(n,e,t)}function Nxe(e,t){return y0(e9(e,t),t)}function dI(e){var t="",r=jxe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function jxe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function kxe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Zn(t.replace(/<[^>]*>/g,""));return[r]}var fI={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function t9(e,t){var r=t||{},n=J3(e),s=[],i,o,l={name:""},c="",u=0,f,d,m={},p=[],y=r.dense?[]:{},v,g,b={value:""},N="",j=0,w=[],S=-1,P=-1,A={s:{r:1e6,c:1e7},e:{r:0,c:0}},T=0,I={},B=[],E={},C=0,M=0,q=[],G=1,Z=1,te=[],ne={Names:[]},J={},ee=["",""],H=[],O={},R="",W=0,U=!1,K=!1,oe=0;for(Gx.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");v=Gx.exec(n);)switch(v[3]=v[3].replace(/_.*$/,"")){case"table":case"":v[1]==="/"?(A.e.c>=A.s.c&&A.e.r>=A.s.r?y["!ref"]=gn(A):y["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=A.e.r&&(y["!fullref"]=y["!ref"],A.e.r=r.sheetRows-1,y["!ref"]=gn(A)),B.length&&(y["!merges"]=B),q.length&&(y["!rows"]=q),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),p.push(f.name),m[f.name]=y,K=!1):v[0].charAt(v[0].length-2)!=="/"&&(f=nn(v[0],!1),S=P=-1,A.s.r=A.s.c=1e7,A.e.r=A.e.c=0,y=r.dense?[]:{},B=[],q=[],K=!0);break;case"table-row-group":v[1]==="/"?--T:++T;break;case"table-row":case"":if(v[1]==="/"){S+=G,G=1;break}if(d=nn(v[0],!1),d.?S=d.-1:S==-1&&(S=0),G=+d["number-rows-repeated"]||1,G<10)for(oe=0;oe<G;++oe)T>0&&(q[S+oe]={level:T});P=-1;break;case"covered-table-cell":v[1]!=="/"&&++P,r.sheetStubs&&(r.dense?(y[S]||(y[S]=[]),y[S][P]={t:"z"}):y[tn({r:S,c:P})]={t:"z"}),N="",w=[];break;case"table-cell":case"":if(v[0].charAt(v[0].length-2)==="/")++P,b=nn(v[0],!1),Z=parseInt(b["number-columns-repeated"]||"1",10),g={t:"z",v:null},b.formula&&r.cellFormula!=!1&&(g.f=oI(Zn(b.formula))),(b.||b["value-type"])=="string"&&(g.t="s",g.v=Zn(b["string-value"]||""),r.dense?(y[S]||(y[S]=[]),y[S][P]=g):y[tn({r:S,c:P})]=g),P+=Z-1;else if(v[1]!=="/"){++P,N="",j=0,w=[],Z=1;var he=G?S+G-1:S;if(P>A.e.c&&(A.e.c=P),P<A.s.c&&(A.s.c=P),S<A.s.r&&(A.s.r=S),he>A.e.r&&(A.e.r=he),b=nn(v[0],!1),H=[],O={},g={t:b.||b["value-type"],v:null},r.cellFormula)if(b.formula&&(b.formula=Zn(b.formula)),b["number-matrix-columns-spanned"]&&b["number-matrix-rows-spanned"]&&(C=parseInt(b["number-matrix-rows-spanned"],10)||0,M=parseInt(b["number-matrix-columns-spanned"],10)||0,E={s:{r:S,c:P},e:{r:S+C-1,c:P+M-1}},g.F=gn(E),te.push([E,g.F])),b.formula)g.f=oI(b.formula);else for(oe=0;oe<te.length;++oe)S>=te[oe][0].s.r&&S<=te[oe][0].e.r&&P>=te[oe][0].s.c&&P<=te[oe][0].e.c&&(g.F=te[oe][1]);switch((b["number-columns-spanned"]||b["number-rows-spanned"])&&(C=parseInt(b["number-rows-spanned"],10)||0,M=parseInt(b["number-columns-spanned"],10)||0,E={s:{r:S,c:P},e:{r:S+C-1,c:P+M-1}},B.push(E)),b["number-columns-repeated"]&&(Z=parseInt(b["number-columns-repeated"],10)),g.t){case"boolean":g.t="b",g.v=as(b["boolean-value"]);break;case"float":g.t="n",g.v=parseFloat(b.value);break;case"percentage":g.t="n",g.v=parseFloat(b.value);break;case"currency":g.t="n",g.v=parseFloat(b.value);break;case"date":g.t="d",g.v=is(b["date-value"]),r.cellDates||(g.t="n",g.v=Di(g.v)),g.z="m/d/yy";break;case"time":g.t="n",g.v=Jie(b["time-value"])/86400,r.cellDates&&(g.t="d",g.v=ab(g.v)),g.z="HH:MM:SS";break;case"number":g.t="n",g.v=parseFloat(b.);break;default:if(g.t==="string"||g.t==="text"||!g.t)g.t="s",b["string-value"]!=null&&(N=Zn(b["string-value"]),w=[]);else throw new Error("Unsupported value type "+g.t)}}else{if(U=!1,g.t==="s"&&(g.v=N||"",w.length&&(g.R=w),U=j==0),J.Target&&(g.l=J),H.length>0&&(g.c=H,H=[]),N&&r.cellText!==!1&&(g.w=N),U&&(g.t="z",delete g.v),(!U||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=S))for(var ie=0;ie<G;++ie){if(Z=parseInt(b["number-columns-repeated"]||"1",10),r.dense)for(y[S+ie]||(y[S+ie]=[]),y[S+ie][P]=ie==0?g:os(g);--Z>0;)y[S+ie][P+Z]=os(g);else for(y[tn({r:S+ie,c:P})]=g;--Z>0;)y[tn({r:S+ie,c:P+Z})]=os(g);A.e.c<=P&&(A.e.c=P)}Z=parseInt(b["number-columns-repeated"]||"1",10),P+=Z-1,Z=0,g={},N="",w=[]}J={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!0]);break;case"annotation":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i;O.t=N,w.length&&(O.R=w),O.a=R,H.push(O)}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);R="",W=0,N="",j=0,w=[];break;case"creator":v[1]==="/"?R=n.slice(W,v.index):W=v.index+v[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(v[1]==="/"){if((i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&s.push([v[3],!1]);N="",j=0,w=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(v[1]==="/"){if(I[l.name]=c,(i=s.pop())[0]!==v[3])throw"Bad state: "+i}else v[0].charAt(v[0].length-2)!=="/"&&(c="",l=nn(v[0],!1),s.push([v[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=nn(v[0],!1),c+=fI[v[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=nn(v[0],!1),c+=fI[v[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(v[0].slice(-2)==="/>")break;if(v[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(u,v.index);break}else u=v.index+v[0].length;break;case"named-range":o=nn(v[0],!1),ee=sj(o["cell-range-address"]);var ce={Name:o.name,Ref:ee[0]+"!"+ee[1]};K&&(ce.Sheet=p.length),ne.Names.push(ce);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(v[1]==="/"&&(!b||!b["string-value"])){var Le=kxe(n.slice(j,v.index));N=(N.length>0?N+`
`:"")+Le[0]}else nn(v[0],!1),j=v.index+v[0].length;break;case"s":break;case"database-range":if(v[1]==="/")break;try{ee=sj(nn(v[0])["target-range-address"]),m[ee[0]]["!autofilter"]={ref:ee[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(v[1]!=="/"){if(J=nn(v[0],!1),!J.href)break;J.Target=Zn(J.href),delete J.href,J.Target.charAt(0)=="#"&&J.Target.indexOf(".")>-1?(ee=sj(J.Target.slice(1)),J.Target="#"+ee[0]+"!"+ee[1]):J.Target.match(/^\.\.[\\\/]/)&&(J.Target=J.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(v[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(v)}}var le={Sheets:m,SheetNames:p,Workbook:ne};return r.bookSheets&&delete le.Sheets,le}function hI(e,t){t=t||{},Jc(e,"META-INF/manifest.xml")&&Joe(pi(e,"META-INF/manifest.xml"),t);var r=xc(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=t9(Ba(r),t);return Jc(e,"meta.xml")&&(n.Props=WM(pi(e,"meta.xml"))),n}function pI(e,t){return t9(e,t)}var Sxe=(function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+Vx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return ei+t}})(),mI=(function(){var e=function(i){return Sa(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var c=[];c.push('      <table:table table:name="'+Sa(o.SheetNames[l])+`" table:style-name="ta1">
`);var u=0,f=0,d=Wl(i["!ref"]||"A1"),m=i["!merges"]||[],p=0,y=Array.isArray(i);if(i["!cols"])for(f=0;f<=d.e.c;++f)c.push("        <table:table-column"+(i["!cols"][f]?' table:style-name="co'+i["!cols"][f].ods+'"':"")+`></table:table-column>
`);var v="",g=i["!rows"]||[];for(u=0;u<d.s.r;++u)v=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+v+`></table:table-row>
`);for(;u<=d.e.r;++u){for(v=g[u]?' table:style-name="ro'+g[u].ods+'"':"",c.push("        <table:table-row"+v+`>
`),f=0;f<d.s.c;++f)c.push(t);for(;f<=d.e.c;++f){var b=!1,N={},j="";for(p=0;p!=m.length;++p)if(!(m[p].s.c>f)&&!(m[p].s.r>u)&&!(m[p].e.c<f)&&!(m[p].e.r<u)){(m[p].s.c!=f||m[p].s.r!=u)&&(b=!0),N["table:number-columns-spanned"]=m[p].e.c-m[p].s.c+1,N["table:number-rows-spanned"]=m[p].e.r-m[p].s.r+1;break}if(b){c.push(r);continue}var w=tn({r:u,c:f}),S=y?(i[u]||[])[f]:i[w];if(S&&S.f&&(N["table:formula"]=Sa(W0e(S.f)),S.F&&S.F.slice(0,w.length)==w)){var P=Wl(S.F);N["table:number-matrix-columns-spanned"]=P.e.c-P.s.c+1,N["table:number-matrix-rows-spanned"]=P.e.r-P.s.r+1}if(!S){c.push(t);continue}switch(S.t){case"b":j=S.v?"TRUE":"FALSE",N["office:value-type"]="boolean",N["office:boolean-value"]=S.v?"true":"false";break;case"n":j=S.w||String(S.v||0),N["office:value-type"]="float",N["office:value"]=S.v||0;break;case"s":case"str":j=S.v==null?"":S.v,N["office:value-type"]="string";break;case"d":j=S.w||is(S.v).toISOString(),N["office:value-type"]="date",N["office:date-value"]=is(S.v).toISOString(),N["table:style-name"]="ce1";break;default:c.push(t);continue}var A=e(j);if(S.l&&S.l.Target){var T=S.l.Target;T=T.charAt(0)=="#"?"#"+V0e(T.slice(1)):T,T.charAt(0)!="#"&&!T.match(/^\w+:/)&&(T="../"+T),A=ur("text:a",A,{"xlink:href":T.replace(/&/g,"&amp;")})}c.push("          "+ur("table:table-cell",ur("text:p",A,{}),N)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!cols"]){for(var f=0;f<u["!cols"].length;++f)if(u["!cols"][f]){var d=u["!cols"][f];if(d.width==null&&d.wpx==null&&d.wch==null)continue;o0(d),d.ods=l;var m=u["!cols"][f].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+m+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(u){return o.Sheets[u]}).forEach(function(u){if(u&&u["!rows"]){for(var f=0;f<u["!rows"].length;++f)if(u["!rows"][f]){u["!rows"][f].ods=c;var d=u["!rows"][f].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+d+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[ei],u=Vx({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=Vx({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+u+f+`>
`),c.push(HM().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+u+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var d=0;d!=o.SheetNames.length;++d)c.push(n(o.Sheets[o.SheetNames[d]],o,d));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}})();function r9(e,t){if(t.bookType=="fods")return mI(e,t);var r=G3(),n="",s=[],i=[];return n="mimetype",wn(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",wn(r,n,mI(e,t)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",wn(r,n,Sxe(e,t)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",wn(r,n,ei+HM()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",wn(r,n,ele(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",wn(r,n,Qoe(s)),r}function dh(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function fk(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):Ba(v0(e))}function _xe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):mc(md(e))}function Axe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function c0(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function xI(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function Exe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function Cxe(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function eg(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function Na(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function Rs(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function ia(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=eg(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=eg(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var u={data:l,type:i};t[s]==null?t[s]=[u]:t[s].push(u)}return t}function io(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(Na(n*8+s.type)),s.type==2&&t.push(Na(s.data.length)),t.push(s.data))})}),c0(t)}function bS(e,t){return e?.map(function(r){return t(r.data)})||[]}function Xc(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=eg(e,n),i=ia(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:Rs(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=ia(l.data),u=Rs(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+u)}),n[0]+=u}),(t=i[3])!=null&&t[0]&&(o.merge=Rs(i[3][0].data)>>>0>0),r.push(o)}return r}function Hh(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:Na(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:Na(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:Na(o.data.length)}],n[2].push({data:io(o.meta),type:2})});var i=io(n);t.push(Na(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),c0(t)}function Txe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=eg(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,u=0;if(i==1?(u=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(u=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[c0(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(u>=c)for(s.push(s[0].slice(-c)),u-=c;u>=s[s.length-1].length;)s.push(s[s.length-1]),u-=s[s.length-1].length;s.push(s[0].slice(-c,-c+u))}}var f=c0(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function Yc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(Txe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return c0(t)}function Wh(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=Na(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return c0(t)}function Oxe(e,t,r,n){var s=dh(e),i=s.getUint32(4,!0),o=(n>1?12:8)+xI(i&(n>1?3470:398))*4,l=-1,c=-1,u=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=xI(i&(n>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(u=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var d;switch(e[2]){case 0:break;case 2:d={t:"n",v:u};break;case 3:d={t:"s",v:t[c]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:u>0};break;case 7:d={t:"n",v:u/86400};break;case 8:d={t:"e",v:0};break;case 9:if(l>-1)d={t:"s",v:r[l]};else if(c>-1)d={t:"s",v:t[c]};else if(!isNaN(u))d={t:"n",v:u};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return d}function Pxe(e,t,r){var n=dh(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,u=NaN,f=new Date(2001,0,1);s&1&&(c=Exe(e,i),i+=16),s&2&&(u=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var d;switch(e[1]){case 0:break;case 2:d={t:"n",v:c};break;case 3:d={t:"s",v:t[l]};break;case 5:d={t:"d",v:f};break;case 6:d={t:"b",v:u>0};break;case 7:d={t:"n",v:u/86400};break;case 8:d={t:"e",v:0};break;case 9:if(o>-1)d={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:d={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return d}function oj(e,t){var r=new Uint8Array(32),n=dh(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,Cxe(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,s)}function lj(e,t){var r=new Uint8Array(32),n=dh(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,s)}function Ixe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return Oxe(e,t,r,e[0]);case 5:return Pxe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function Do(e){var t=ia(e);return eg(t[1][0].data)}function gI(e,t){var r=ia(t.data),n=Rs(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=ia(o.data),c=Rs(l[1][0].data)>>>0;switch(n){case 1:i[c]=fk(l[3][0].data);break;case 8:{var u=e[Do(l[9][0].data)][0],f=ia(u.data),d=e[Do(f[1][0].data)][0],m=Rs(d.meta[1][0].data);if(m!=2001)throw new Error("2000 unexpected reference to ".concat(m));var p=ia(d.data);i[c]=p[3].map(function(y){return fk(y.data)}).join("")}break}}),i}function Dxe(e,t){var r,n,s,i,o,l,c,u,f,d,m,p,y,v,g=ia(e),b=Rs(g[1][0].data)>>>0,N=Rs(g[2][0].data)>>>0,j=((n=(r=g[8])==null?void 0:r[0])==null?void 0:n.data)&&Rs(g[8][0].data)>0||!1,w,S;if((i=(s=g[7])==null?void 0:s[0])!=null&&i.data&&t!=0)w=(l=(o=g[7])==null?void 0:o[0])==null?void 0:l.data,S=(u=(c=g[6])==null?void 0:c[0])==null?void 0:u.data;else if((d=(f=g[4])==null?void 0:f[0])!=null&&d.data&&t!=1)w=(p=(m=g[4])==null?void 0:m[0])==null?void 0:p.data,S=(v=(y=g[3])==null?void 0:y[0])==null?void 0:v.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var P=j?4:1,A=dh(w),T=[],I=0;I<w.length/2;++I){var B=A.getUint16(I*2,!0);B<65535&&T.push([I,B])}if(T.length!=N)throw"Expected ".concat(N," cells, found ").concat(T.length);var E=[];for(I=0;I<T.length-1;++I)E[T[I][0]]=S.subarray(T[I][1]*P,T[I+1][1]*P);return T.length>=1&&(E[T[T.length-1][0]]=S.subarray(T[T.length-1][1]*P)),{R:b,cells:E}}function Lxe(e,t){var r,n=ia(t.data),s=(r=n?.[7])!=null&&r[0]?Rs(n[7][0].data)>>>0>0?1:0:-1,i=bS(n[5],function(o){return Dxe(o,s)});return{nrows:Rs(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,u){if(o[l.R][u])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(u));o[l.R][u]=c}),o},[])}}function Fxe(e,t,r){var n,s=ia(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(Rs(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(Rs(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=gn(i);var o=ia(s[4][0].data),l=gI(e,e[Do(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?gI(e,e[Do(o[17][0].data)][0]):[],u=ia(o[3][0].data),f=0;u[1].forEach(function(d){var m=ia(d.data),p=e[Do(m[2][0].data)][0],y=Rs(p.meta[1][0].data);if(y!=6002)throw new Error("6001 unexpected reference to ".concat(y));var v=Lxe(e,p);v.data.forEach(function(g,b){g.forEach(function(N,j){var w=tn({r:f+b,c:j}),S=Ixe(N,l,c);S&&(r[w]=S)})}),f+=v.nrows})}function Mxe(e,t){var r=ia(t.data),n={"!ref":"A1"},s=e[Do(r[2][0].data)],i=Rs(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return Fxe(e,s[0],n),n}function Rxe(e,t){var r,n=ia(t.data),s={name:(r=n[1])!=null&&r[0]?fk(n[1][0].data):"",sheets:[]},i=bS(n[2],Do);return i.forEach(function(o){e[o].forEach(function(l){var c=Rs(l.meta[1][0].data);c==6e3&&s.sheets.push(Mxe(e,l))})}),s}function Bxe(e,t){var r=SS(),n=ia(t.data),s=bS(n[1],Do);if(s.forEach(function(i){e[i].forEach(function(o){var l=Rs(o.meta[1][0].data);if(l==2){var c=Rxe(e,o);c.sheets.forEach(function(u,f){_S(r,u,f==0?c.name:c.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function cj(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var u;try{u=Yc(c.content)}catch(d){return console.log("?? "+c.content.length+" "+(d.message||d))}var f;try{f=Xc(u)}catch(d){return console.log("## "+(d.message||d))}f.forEach(function(d){i[d.id]=d.messages,o.push(d.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i?.[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&Rs(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(u){var f=Rs(u.meta[1][0].data)>>>0;if(f==1)if(!l)l=u;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return Bxe(i,l)}function Uxe(e,t,r){var n,s,i,o;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&Rs(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,u=dh(e[7][0].data),f=0,d=[],m=dh(e[4][0].data),p=0,y=[],v=0;v<t.length;++v){if(t[v]==null){u.setUint16(v*2,65535,!0),m.setUint16(v*2,65535);continue}u.setUint16(v*2,f,!0),m.setUint16(v*2,p,!0);var g,b;switch(typeof t[v]){case"string":g=oj({t:"s",v:t[v]},r),b=lj({t:"s",v:t[v]},r);break;case"number":g=oj({t:"n",v:t[v]},r),b=lj({t:"n",v:t[v]},r);break;case"boolean":g=oj({t:"b",v:t[v]},r),b=lj({t:"b",v:t[v]},r);break;default:throw new Error("Unsupported value "+t[v])}d.push(g),f+=g.length,y.push(b),p+=b.length,++c}for(e[2][0].data=Na(c);v<e[7][0].data.length/2;++v)u.setUint16(v*2,65535,!0),m.setUint16(v*2,65535,!0);return e[6][0].data=c0(d),e[3][0].data=c0(y),c}function qxe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=Wl(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(gn(n)));var i=hy(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(R){return R.forEach(function(W){typeof W=="string"&&o.push(W)})});var l={},c=[],u=Hr.read(t.numbers,{type:"base64"});u.FileIndex.map(function(R,W){return[R,u.FullPaths[W]]}).forEach(function(R){var W=R[0],U=R[1];if(W.type==2&&W.name.match(/\.iwa/)){var K=W.content,oe=Yc(K),he=Xc(oe);he.forEach(function(ie){c.push(ie.id),l[ie.id]={deps:[],location:U,type:Rs(ie.messages[0].meta[1][0].data)}})}}),c.sort(function(R,W){return R-W});var f=c.filter(function(R){return R>1}).map(function(R){return[R,Na(R)]});u.FileIndex.map(function(R,W){return[R,u.FullPaths[W]]}).forEach(function(R){var W=R[0];if(R[1],!!W.name.match(/\.iwa/)){var U=Xc(Yc(W.content));U.forEach(function(K){K.messages.forEach(function(oe){f.forEach(function(he){K.messages.some(function(ie){return Rs(ie.meta[1][0].data)!=11006&&Axe(ie.data,he[1])})&&l[he[0]].deps.push(K.id)})})})}});for(var d=Hr.find(u,l[1].location),m=Xc(Yc(d.content)),p,y=0;y<m.length;++y){var v=m[y];v.id==1&&(p=v)}var g=Do(ia(p.messages[0].data)[1][0].data);for(d=Hr.find(u,l[g].location),m=Xc(Yc(d.content)),y=0;y<m.length;++y)v=m[y],v.id==g&&(p=v);for(g=Do(ia(p.messages[0].data)[2][0].data),d=Hr.find(u,l[g].location),m=Xc(Yc(d.content)),y=0;y<m.length;++y)v=m[y],v.id==g&&(p=v);for(g=Do(ia(p.messages[0].data)[2][0].data),d=Hr.find(u,l[g].location),m=Xc(Yc(d.content)),y=0;y<m.length;++y)v=m[y],v.id==g&&(p=v);var b=ia(p.messages[0].data);{b[6][0].data=Na(n.e.r+1),b[7][0].data=Na(n.e.c+1);var N=Do(b[46][0].data),j=Hr.find(u,l[N].location),w=Xc(Yc(j.content));{for(var S=0;S<w.length&&w[S].id!=N;++S);if(w[S].id!=N)throw"Bad ColumnRowUIDMapArchive";var P=ia(w[S].messages[0].data);P[1]=[],P[2]=[],P[3]=[];for(var A=0;A<=n.e.c;++A){var T=[];T[1]=T[2]=[{type:0,data:Na(A+420690)}],P[1].push({type:2,data:io(T)}),P[2].push({type:0,data:Na(A)}),P[3].push({type:0,data:Na(A)})}P[4]=[],P[5]=[],P[6]=[];for(var I=0;I<=n.e.r;++I)T=[],T[1]=T[2]=[{type:0,data:Na(I+726270)}],P[4].push({type:2,data:io(T)}),P[5].push({type:0,data:Na(I)}),P[6].push({type:0,data:Na(I)});w[S].messages[0].data=io(P)}j.content=Wh(Hh(w)),j.size=j.content.length,delete b[46];var B=ia(b[4][0].data);{B[7][0].data=Na(n.e.r+1);var E=ia(B[1][0].data),C=Do(E[2][0].data);j=Hr.find(u,l[C].location),w=Xc(Yc(j.content));{if(w[0].id!=C)throw"Bad HeaderStorageBucket";var M=ia(w[0].messages[0].data);for(I=0;I<i.length;++I){var q=ia(M[2][0].data);q[1][0].data=Na(I),q[4][0].data=Na(i[I].length),M[2][I]={type:M[2][0].type,data:io(q)}}w[0].messages[0].data=io(M)}j.content=Wh(Hh(w)),j.size=j.content.length;var G=Do(B[2][0].data);j=Hr.find(u,l[G].location),w=Xc(Yc(j.content));{if(w[0].id!=G)throw"Bad HeaderStorageBucket";for(M=ia(w[0].messages[0].data),A=0;A<=n.e.c;++A)q=ia(M[2][0].data),q[1][0].data=Na(A),q[4][0].data=Na(n.e.r+1),M[2][A]={type:M[2][0].type,data:io(q)};w[0].messages[0].data=io(M)}j.content=Wh(Hh(w)),j.size=j.content.length;var Z=Do(B[4][0].data);(function(){for(var R=Hr.find(u,l[Z].location),W=Xc(Yc(R.content)),U,K=0;K<W.length;++K){var oe=W[K];oe.id==Z&&(U=oe)}var he=ia(U.messages[0].data);{he[3]=[];var ie=[];o.forEach(function(le,He){ie[1]=[{type:0,data:Na(He)}],ie[2]=[{type:0,data:Na(1)}],ie[3]=[{type:2,data:_xe(le)}],he[3].push({type:2,data:io(ie)})})}U.messages[0].data=io(he);var ce=Hh(W),Le=Wh(ce);R.content=Le,R.size=R.content.length})();var te=ia(B[3][0].data);{var ne=te[1][0];delete te[2];var J=ia(ne.data);{var ee=Do(J[2][0].data);(function(){for(var R=Hr.find(u,l[ee].location),W=Xc(Yc(R.content)),U,K=0;K<W.length;++K){var oe=W[K];oe.id==ee&&(U=oe)}var he=ia(U.messages[0].data);{delete he[6],delete te[7];var ie=new Uint8Array(he[5][0].data);he[5]=[];for(var ce=0,Le=0;Le<=n.e.r;++Le){var le=ia(ie);ce+=Uxe(le,i[Le],o),le[1][0].data=Na(Le),he[5].push({data:io(le),type:2})}he[1]=[{type:0,data:Na(n.e.c+1)}],he[2]=[{type:0,data:Na(n.e.r+1)}],he[3]=[{type:0,data:Na(ce)}],he[4]=[{type:0,data:Na(n.e.r+1)}]}U.messages[0].data=io(he);var He=Hh(W),Fe=Wh(He);R.content=Fe,R.size=R.content.length})()}ne.data=io(J)}B[3][0].data=io(te)}b[4][0].data=io(B)}p.messages[0].data=io(b);var H=Hh(m),O=Wh(H);return d.content=O,d.size=d.content.length,u}function n9(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function wS(e){n9([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function NS(e){n9([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function $xe(e){return Ln.WS.indexOf(e)>-1?"sheet":e==Ln.CS?"chart":e==Ln.DS?"dialog":e==Ln.MS?"macro":e&&e.length?e:"sheet"}function zxe(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,$xe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function Hxe(e,t,r,n,s,i,o,l,c,u,f,d){try{i[n]=Ym(xc(e,r,!0),t);var m=pi(e,t),p;switch(l){case"sheet":p=fme(m,t,s,c,i[n],u,f,d);break;case"chart":if(p=hme(m,t,s,c,i[n],u,f,d),!p||!p["!drawel"])break;var y=Fm(p["!drawel"].Target,t),v=Kx(y),g=Zde(xc(e,y,!0),Ym(xc(e,v,!0),y)),b=Fm(g,y),N=Kx(b);p=Upe(xc(e,b,!0),b,c,Ym(xc(e,N,!0),b),u,p);break;case"macro":p=pme(m,t,s,c,i[n],u,f,d);break;case"dialog":p=mme(m,t,s,c,i[n],u,f,d);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=p;var j=[];i&&i[n]&&Bs(i[n]).forEach(function(w){var S="";if(i[n][w].Type==Ln.CMNT){S=Fm(i[n][w].Target,t);var P=yme(pi(e,S,!0),S,c);if(!P||!P.length)return;rI(p,P,!1)}i[n][w].Type==Ln.TCMNT&&(S=Fm(i[n][w].Target,t),j=j.concat(tfe(pi(e,S,!0),c)))}),j&&j.length&&rI(p,j,!0,c.people||[])}catch(w){if(c.WTF)throw w}}function Vc(e){return e.charAt(0)=="/"?e.slice(1):e}function Wxe(e,t){if(Zp(),t=t||{},wS(t),Jc(e,"META-INF/manifest.xml")||Jc(e,"objectdata.xml"))return hI(e,t);if(Jc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof cj<"u"){if(e.FileIndex)return cj(e);var r=Hr.utils.cfb_new();return j8(e).forEach(function(q){wn(r,q,roe(e,q))}),cj(r)}throw new Error("Unsupported NUMBERS file")}if(!Jc(e,"[Content_Types].xml"))throw Jc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):Jc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=j8(e),s=Xoe(xc(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",pi(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!pi(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},u={};if(!t.bookSheets&&!t.bookProps){if(Jm=[],s.sst)try{Jm=vme(pi(e,Vc(s.sst)),s.sst,t)}catch(q){if(t.WTF)throw q}t.cellStyles&&s.themes.length&&(c=gme(xc(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(u=xme(pi(e,Vc(s.style)),s.style,c,t))}s.links.map(function(q){try{var G=Ym(xc(e,Kx(Vc(q))),q);return wme(pi(e,Vc(q)),G,q,t)}catch{}});var f=dme(pi(e,Vc(s.workbooks[0])),s.workbooks[0],t),d={},m="";s.coreprops.length&&(m=pi(e,Vc(s.coreprops[0]),!0),m&&(d=WM(m)),s.extprops.length!==0&&(m=pi(e,Vc(s.extprops[0]),!0),m&&rle(m,d,t)));var p={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(m=xc(e,Vc(s.custprops[0]),!0),m&&(p=ale(m,t)));var y={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(G){return G.name}):d.Worksheets&&d.SheetNames.length>0&&(o=d.SheetNames),t.bookProps&&(y.Props=d,y.Custprops=p),t.bookSheets&&typeof o<"u"&&(y.SheetNames=o),t.bookSheets?y.SheetNames:t.bookProps))return y;o={};var v={};t.bookDeps&&s.calcchain&&(v=bme(pi(e,Vc(s.calcchain)),s.calcchain));var g=0,b={},N,j;{var w=f.Sheets;d.Worksheets=w.length,d.SheetNames=[];for(var S=0;S!=w.length;++S)d.SheetNames[S]=w[S].name}var P=i?"bin":"xml",A=s.workbooks[0].lastIndexOf("/"),T=(s.workbooks[0].slice(0,A+1)+"_rels/"+s.workbooks[0].slice(A+1)+".rels").replace(/^\//,"");Jc(e,T)||(T="xl/_rels/workbook."+P+".rels");var I=Ym(xc(e,T,!0),T.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=Nme(pi(e,Vc(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=nfe(pi(e,Vc(s.people[0])),t)),I&&(I=zxe(I,f.Sheets));var B=pi(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(g=0;g!=d.Worksheets;++g){var E="sheet";if(I&&I[g]?(N="xl/"+I[g][1].replace(/[\/]?xl\//,""),Jc(e,N)||(N=I[g][1]),Jc(e,N)||(N=T.replace(/_rels\/.*$/,"")+I[g][1]),E=I[g][2]):(N="xl/worksheets/sheet"+(g+1-B)+"."+P,N=N.replace(/sheet0\./,"sheet.")),j=N.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(g!=t.sheets)continue e;break;case"string":if(d.SheetNames[g].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var C=!1,M=0;M!=t.sheets.length;++M)typeof t.sheets[M]=="number"&&t.sheets[M]==g&&(C=1),typeof t.sheets[M]=="string"&&t.sheets[M].toLowerCase()==d.SheetNames[g].toLowerCase()&&(C=1);if(!C)continue e}}Hxe(e,N,j,d.SheetNames[g],g,b,o,E,t,f,c,u)}return y={Directory:s,Workbook:f,Props:d,Custprops:p,Deps:v,Sheets:o,SheetNames:d.SheetNames,Strings:Jm,Styles:u,Themes:c,SSF:os(Jr)},t&&t.bookFiles&&(e.files?(y.keys=n,y.files=e.files):(y.keys=[],y.files={},e.FullPaths.forEach(function(q,G){q=q.replace(/^Root Entry[\/]/,""),y.keys.push(q),y.files[q]=e.FileIndex[G]}))),t&&t.bookVBA&&(s.vba.length>0?y.vbaraw=pi(e,Vc(s.vba[0]),!0):s.defaults&&s.defaults.bin===dfe&&(y.vbaraw=pi(e,"xl/vbaProject.bin",!0))),y}function Vxe(e,t){var r=t||{},n="Workbook",s=Hr.find(e,n);try{if(n="/!DataSpaces/Version",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(Nue(s.content),n="/!DataSpaces/DataSpaceMap",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=kue(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Sue(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);Aue(s.content)}catch{}if(n="/EncryptionInfo",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=Eue(s.content);if(n="/EncryptedPackage",s=Hr.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function Gxe(e,t){return t.bookType=="ods"?r9(e,t):t.bookType=="numbers"?qxe(e,t):t.bookType=="xlsb"?Kxe(e,t):Xxe(e,t)}function Kxe(e,t){ep=1024,e&&!e.SSF&&(e.SSF=os(Jr)),e&&e.SSF&&(Zp(),tb(e.SSF),t.revssf=nb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Qm?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=TR.indexOf(t.bookType)>-1,s=oS();NS(t=t||{});var i=G3(),o="",l=0;if(t.cellXfs=[],b0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",wn(i,o,VM(e.Props,t)),s.coreprops.push(o),ja(t.rels,2,o,Ln.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,wn(i,o,XM(e.Props)),s.extprops.push(o),ja(t.rels,3,o,Ln.EXT_PROPS),e.Custprops!==e.Props&&Bs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",wn(i,o,YM(e.Custprops)),s.custprops.push(o),ja(t.rels,4,o,Ln.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},d=e.Sheets[e.SheetNames[l-1]],m=(d||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,wn(i,o,kme(l-1,o,t,e,f)),s.sheets.push(o),ja(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Ln.WS[0]),d){var p=d["!comments"],y=!1,v="";p&&p.length>0&&(v="xl/comments"+l+"."+r,wn(i,v,Ame(p,v)),s.comments.push(v),ja(f,-1,"../comments"+l+"."+r,Ln.CMNT),y=!0),d["!legacy"]&&y&&wn(i,"xl/drawings/vmlDrawing"+l+".vml",ER(l,d["!comments"])),delete d["!comments"],delete d["!legacy"]}f["!id"].rId1&&wn(i,Kx(o),op(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,wn(i,o,_me(t.Strings,o,t)),s.strs.push(o),ja(t.wbrels,-1,"sharedStrings."+r,Ln.SST)),o="xl/workbook."+r,wn(i,o,jme(e,o)),s.workbooks.push(o),ja(t.rels,1,o,Ln.WB),o="xl/theme/theme1.xml",wn(i,o,hS(e.Themes,t)),s.themes.push(o),ja(t.wbrels,-1,"theme/theme1.xml",Ln.THEME),o="xl/styles."+r,wn(i,o,Sme(e,o,t)),s.styles.push(o),ja(t.wbrels,-1,"styles."+r,Ln.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",wn(i,o,e.vbaraw),s.vba.push(o),ja(t.wbrels,-1,"vbaProject.bin",Ln.VBA)),o="xl/metadata."+r,wn(i,o,Eme(o)),s.metadata.push(o),ja(t.wbrels,-1,"metadata."+r,Ln.XLMETA),wn(i,"[Content_Types].xml",zM(s,t)),wn(i,"_rels/.rels",op(t.rels)),wn(i,"xl/_rels/workbook."+r+".rels",op(t.wbrels)),delete t.revssf,delete t.ssf,i}function Xxe(e,t){ep=1024,e&&!e.SSF&&(e.SSF=os(Jr)),e&&e.SSF&&(Zp(),tb(e.SSF),t.revssf=nb(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,Qm?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=TR.indexOf(t.bookType)>-1,s=oS();NS(t=t||{});var i=G3(),o="",l=0;if(t.cellXfs=[],b0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",wn(i,o,VM(e.Props,t)),s.coreprops.push(o),ja(t.rels,2,o,Ln.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],u=0;u<e.SheetNames.length;++u)(e.Workbook.Sheets[u]||{}).Hidden!=2&&c.push(e.SheetNames[u]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,wn(i,o,XM(e.Props)),s.extprops.push(o),ja(t.rels,3,o,Ln.EXT_PROPS),e.Custprops!==e.Props&&Bs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",wn(i,o,YM(e.Custprops)),s.custprops.push(o),ja(t.rels,4,o,Ln.CUST_PROPS));var f=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var d={"!id":{}},m=e.Sheets[e.SheetNames[l-1]],p=(m||{})["!type"]||"sheet";if(o="xl/worksheets/sheet"+l+"."+r,wn(i,o,qR(l-1,t,e,d)),s.sheets.push(o),ja(t.wbrels,-1,"worksheets/sheet"+l+"."+r,Ln.WS[0]),m){var y=m["!comments"],v=!1,g="";if(y&&y.length>0){var b=!1;y.forEach(function(N){N[1].forEach(function(j){j.T==!0&&(b=!0)})}),b&&(g="xl/threadedComments/threadedComment"+l+"."+r,wn(i,g,rfe(y,f,t)),s.threadedcomments.push(g),ja(d,-1,"../threadedComments/threadedComment"+l+"."+r,Ln.TCMNT)),g="xl/comments"+l+"."+r,wn(i,g,CR(y)),s.comments.push(g),ja(d,-1,"../comments"+l+"."+r,Ln.CMNT),v=!0}m["!legacy"]&&v&&wn(i,"xl/drawings/vmlDrawing"+l+".vml",ER(l,m["!comments"])),delete m["!comments"],delete m["!legacy"]}d["!id"].rId1&&wn(i,Kx(o),op(d))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,wn(i,o,xR(t.Strings,t)),s.strs.push(o),ja(t.wbrels,-1,"sharedStrings."+r,Ln.SST)),o="xl/workbook."+r,wn(i,o,VR(e)),s.workbooks.push(o),ja(t.rels,1,o,Ln.WB),o="xl/theme/theme1.xml",wn(i,o,hS(e.Themes,t)),s.themes.push(o),ja(t.wbrels,-1,"theme/theme1.xml",Ln.THEME),o="xl/styles."+r,wn(i,o,kR(e,t)),s.styles.push(o),ja(t.wbrels,-1,"styles."+r,Ln.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",wn(i,o,e.vbaraw),s.vba.push(o),ja(t.wbrels,-1,"vbaProject.bin",Ln.VBA)),o="xl/metadata."+r,wn(i,o,AR()),s.metadata.push(o),ja(t.wbrels,-1,"metadata."+r,Ln.XLMETA),f.length>1&&(o="xl/persons/person.xml",wn(i,o,afe(f)),s.people.push(o),ja(t.wbrels,-1,"persons/person.xml",Ln.PEOPLE)),wn(i,"[Content_Types].xml",zM(s,t)),wn(i,"_rels/.rels",op(t.rels)),wn(i,"xl/_rels/workbook."+r+".rels",op(t.wbrels)),delete t.revssf,delete t.ssf,i}function jS(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=bc(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function Yxe(e,t){return Hr.find(e,"EncryptedPackage")?Vxe(e,t):YR(e,t)}function Jxe(e,t){var r,n=e,s=t||{};return s.type||(s.type=Tn&&Buffer.isBuffer(e)?"buffer":"base64"),r=vM(n,s),Wxe(r,s)}function a9(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return uk(e.slice(r),t);default:break e}return Bp.to_workbook(e,t)}function Qxe(e,t){var r="",n=jS(e,t);switch(t.type){case"base64":r=bc(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=oh(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=Ba(r)),t.type="binary",a9(r,t)}function Zxe(e,t){var r=e;return t.type=="base64"&&(r=bc(r)),r=$x.utils.decode(1200,r.slice(2),"str"),t.type="binary",a9(r,t)}function ege(e){return e.match(/[^\x00-\x7F]/)?md(e):e}function uj(e,t,r,n){return n?(r.type="string",Bp.to_workbook(e,r)):Bp.to_workbook(t,r)}function fy(e,t){$3();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return fy(new Uint8Array(e),(r=os(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),cp={},r.dateNF&&(cp.dateNF=r.dateNF),r.type||(r.type=Tn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=Tn?"buffer":"binary",n=Kie(e),typeof Uint8Array<"u"&&!Tn&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=ege(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=os(r),r.type="array",fy(z3(n),r)}switch((s=jS(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return Yxe(Hr.read(n,r),r);break;case 9:if(s[1]<=8)return YR(n,r);break;case 60:return uk(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return sue(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return pR.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?Jxe(n,r):uj(e,n,r,i);case 239:return s[3]===60?uk(n,r):uj(e,n,r,i);case 255:if(s[1]===254)return Zxe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return J0.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return J0.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return ck.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return wR.to_workbook(n,r);break;case 10:case 13:case 32:return Qxe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return aue.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?ck.to_workbook(n,r):uj(e,n,r,i)}function s9(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return hg(t.file,Hr.write(e,{type:Tn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Hr.write(e,t)}function tge(e,t){var r=os(t||{}),n=Gxe(e,r);return rge(n,r)}function rge(e,t){var r={},n=Tn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Hr.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(eb(s))}return t.password&&typeof encrypt_agile<"u"?s9(encrypt_agile(s,t.password),t):t.type==="file"?hg(t.file,s):t.type=="string"?Ba(s):s}function nge(e,t){var r=t||{},n=exe(e,r);return s9(n,r)}function ld(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return zx(md(n));case"binary":return md(n);case"string":return e;case"file":return hg(t.file,n,"utf8");case"buffer":return Tn?bf(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):ld(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function age(e,t){switch(t.type){case"base64":return zx(e);case"binary":return e;case"string":return e;case"file":return hg(t.file,e,"binary");case"buffer":return Tn?bf(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function Sv(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?zx(r):t.type=="string"?Ba(r):r;case"file":return hg(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function i9(e,t){$3(),Ype(e);var r=os(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=i9(e,r);return r.type="array",eb(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return ld(Gme(e,r),r);case"slk":case"sylk":return ld(hR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return ld(QR(e.Sheets[e.SheetNames[s]],r),r);case"txt":return age(o9(e.Sheets[e.SheetNames[s]],r),r);case"csv":return ld(kS(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return ld(pR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return Sv(ck.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return ld(Bp.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return ld(wR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return ld(mR.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return ld(r9(e,r),r);case"wk1":return Sv(J0.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return Sv(J0.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),Sv(JR(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),nge(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return tge(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function sge(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function ige(e,t,r){var n={};return n.type="file",n.file=t,sge(n),i9(e,n)}function oge(e,t,r,n,s,i,o,l){var c=Zs(r),u=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),d=!0,m=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(m,"__rowNum__",{value:r,enumerable:!1})}catch{m.__rowNum__=r}else m.__rowNum__=r;if(!o||e[r])for(var p=t.s.c;p<=t.e.c;++p){var y=o?e[r][p]:e[n[p]+c];if(y===void 0||y.t===void 0){if(u===void 0)continue;i[p]!=null&&(m[i[p]]=u);continue}var v=y.v;switch(y.t){case"z":if(v==null)break;continue;case"e":v=v==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+y.t)}if(i[p]!=null){if(v==null)if(y.t=="e"&&v===null)m[i[p]]=null;else if(u!==void 0)m[i[p]]=u;else if(f&&v===null)m[i[p]]=null;else continue;else m[i[p]]=f&&(y.t!=="n"||y.t==="n"&&l.rawNumbers!==!1)?v:xf(y,v,l);v!=null&&(d=!1)}}return{row:m,isempty:d}}function hy(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},u=t||{},f=u.range!=null?u.range:e["!ref"];switch(u.header===1?n=1:u.header==="A"?n=2:Array.isArray(u.header)?n=3:u.header==null&&(n=0),typeof f){case"string":c=ea(f);break;case"number":c=ea(e["!ref"]),c.s.r=f;break;default:c=f}n>0&&(s=0);var d=Zs(c.s.r),m=[],p=[],y=0,v=0,g=Array.isArray(e),b=c.s.r,N=0,j={};g&&!e[b]&&(e[b]=[]);var w=u.skipHidden&&e["!cols"]||[],S=u.skipHidden&&e["!rows"]||[];for(N=c.s.c;N<=c.e.c;++N)if(!(w[N]||{}).hidden)switch(m[N]=Es(N),r=g?e[b][N]:e[m[N]+d],n){case 1:i[N]=N-c.s.c;break;case 2:i[N]=m[N];break;case 3:i[N]=u.header[N-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=xf(r,null,u),v=j[o]||0,!v)j[o]=1;else{do l=o+"_"+v++;while(j[l]);j[o]=v,j[l]=1}i[N]=l}for(b=c.s.r+s;b<=c.e.r;++b)if(!(S[b]||{}).hidden){var P=oge(e,c,b,m,n,i,g,u);(P.isempty===!1||(n===1?u.blankrows!==!1:u.blankrows))&&(p[y++]=P.row)}return p.length=y,p}var vI=/"/g;function lge(e,t,r,n,s,i,o,l){for(var c=!0,u=[],f="",d=Zs(r),m=t.s.c;m<=t.e.c;++m)if(n[m]){var p=l.dense?(e[r]||[])[m]:e[n[m]+d];if(p==null)f="";else if(p.v!=null){c=!1,f=""+(l.rawNumbers&&p.t=="n"?p.v:xf(p,null,l));for(var y=0,v=0;y!==f.length;++y)if((v=f.charCodeAt(y))===s||v===i||v===34||l.forceQuotes){f='"'+f.replace(vI,'""')+'"';break}f=="ID"&&(f='"ID"')}else p.f!=null&&!p.F?(c=!1,f="="+p.f,f.indexOf(",")>=0&&(f='"'+f.replace(vI,'""')+'"')):f="";u.push(f)}return l.blankrows===!1&&c?null:u.join(o)}function kS(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=ea(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),u=new RegExp((i=="|"?"\\|":i)+"+$"),f="",d=[];n.dense=Array.isArray(e);for(var m=n.skipHidden&&e["!cols"]||[],p=n.skipHidden&&e["!rows"]||[],y=s.s.c;y<=s.e.c;++y)(m[y]||{}).hidden||(d[y]=Es(y));for(var v=0,g=s.s.r;g<=s.e.r;++g)(p[g]||{}).hidden||(f=lge(e,s,g,d,o,c,i,n),f!=null&&(n.strip&&(f=f.replace(u,"")),(f||n.blankrows!==!1)&&r.push((v++?l:"")+f)));return delete n.dense,r.join("")}function o9(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=kS(e,t);return r}function cge(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=ea(e["!ref"]),i="",o=[],l,c=[],u=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=Es(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=Zs(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=u?(e[f]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function l9(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Cs(n.origin):n.origin;o=c.r,l=c.c}var u,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var d=ea(i["!ref"]);f.e.c=Math.max(f.e.c,d.e.c),f.e.r=Math.max(f.e.r,d.e.r),o==-1&&(o=d.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var m=n.header||[],p=0;t.forEach(function(v,g){Bs(v).forEach(function(b){(p=m.indexOf(b))==-1&&(m[p=m.length]=b);var N=v[b],j="z",w="",S=tn({c:l+p,r:o+g+s});u=tg(i,S),N&&typeof N=="object"&&!(N instanceof Date)?i[S]=N:(typeof N=="number"?j="n":typeof N=="boolean"?j="b":typeof N=="string"?j="s":N instanceof Date?(j="d",n.cellDates||(j="n",N=Di(N)),w=n.dateNF||Jr[14]):N===null&&n.nullError&&(j="e",N=0),u?(u.t=j,u.v=N,delete u.w,delete u.R,w&&(u.z=w)):i[S]=u={t:j,v:N},w&&(u.z=w))})}),f.e.c=Math.max(f.e.c,l+m.length-1);var y=Zs(o);if(s)for(p=0;p<m.length;++p)i[Es(p+l)+y]={t:"s",v:m[p]};return i["!ref"]=gn(f),i}function uge(e,t){return l9(null,e,t)}function tg(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Cs(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?tg(e,tn(t)):tg(e,tn({r:t,c:r||0}))}function dge(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function SS(){return{SheetNames:[],Sheets:{}}}function _S(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(WR(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function fge(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=dge(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function hge(e,t){return e.z=t,e}function c9(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function pge(e,t,r){return c9(e,"#"+t,r)}function mge(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function xge(e,t,r,n){for(var s=typeof t!="string"?t:ea(t),i=typeof t=="string"?t:gn(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=tg(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var O0={encode_col:Es,encode_row:Zs,encode_cell:tn,encode_range:gn,decode_col:tS,decode_row:eS,split_cell:_oe,decode_cell:Cs,decode_range:Wl,format_cell:xf,sheet_add_aoa:FM,sheet_add_json:l9,sheet_add_dom:ZR,aoa_to_sheet:em,json_to_sheet:uge,table_to_sheet:e9,table_to_book:Nxe,sheet_to_csv:kS,sheet_to_txt:o9,sheet_to_json:hy,sheet_to_html:QR,sheet_to_formulae:cge,sheet_to_row_object_array:hy,sheet_get_cell:tg,book_new:SS,book_append_sheet:_S,book_set_sheet_visibility:fge,cell_set_number_format:hge,cell_set_hyperlink:c9,cell_set_internal_link:pge,cell_add_comment:mge,sheet_set_array_formula:xge,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const tf={all:["tasks"],lists:()=>[...tf.all,"list"],list:e=>[...tf.lists(),e],details:()=>[...tf.all,"detail"],detail:e=>[...tf.details(),e]},gge=(e,t,r)=>wc({queryKey:tf.list({userId:e,projectId:t,status:r}),queryFn:async()=>{const n=await Qy(e);return Array.isArray(n)?n:n?.data&&Array.isArray(n.data)||n?.success&&n?.data&&Array.isArray(n.data)?n.data:[]},staleTime:30*1e3,refetchInterval:60*1e3,placeholderData:n=>n}),vge=()=>{const e=yi(),{showSuccess:t,showError:r}=Ea();return kl({mutationFn:async n=>{const s=await _7(n);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:tf.lists()}),t("Task created successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to create task")}})},yge=()=>{const e=yi(),{showSuccess:t,showError:r}=Ea();return kl({mutationFn:async({id:n,data:s})=>{const i=await Y1(n,s);return i.data||i},onSuccess:(n,s)=>{e.invalidateQueries({queryKey:tf.lists()}),e.invalidateQueries({queryKey:tf.detail(s.id)}),t("Task updated successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to update task")}})},bge=()=>{const e=yi(),{showSuccess:t,showError:r}=Ea();return kl({mutationFn:async n=>(await A7(n),n),onSuccess:()=>{e.invalidateQueries({queryKey:tf.lists()}),t("Task deleted successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to delete task")}})},Mm={all:["projects"],lists:()=>[...Mm.all,"list"],list:e=>[...Mm.lists(),e],details:()=>[...Mm.all,"detail"],detail:e=>[...Mm.details(),e]},wge=(e,t,r)=>wc({queryKey:Mm.list({userId:e,companyId:t,status:r}),queryFn:async()=>{const n=await Yp(e);return Array.isArray(n)?n:n?.data&&Array.isArray(n.data)||n?.success&&n?.data&&Array.isArray(n.data)?n.data:[]},staleTime:60*1e3,refetchInterval:120*1e3,placeholderData:n=>n}),Rm={all:["users"],lists:()=>[...Rm.all,"list"],list:e=>[...Rm.lists(),{search:e}],details:()=>[...Rm.all,"detail"],detail:e=>[...Rm.details(),e]},Nge=e=>wc({queryKey:Rm.list(e),queryFn:async()=>{const t=await Ed(void 0);return Array.isArray(t)?t:t?.data&&Array.isArray(t.data)||t?.success&&t?.data&&Array.isArray(t.data)?t.data:[]},staleTime:300*1e3,refetchInterval:600*1e3,placeholderData:t=>t}),jge=({onCreateTask:e,currentUser:t})=>{const{showSuccess:r,showError:n,showInfo:s}=Ea(),i=yi(),{data:o=[],isLoading:l,error:c}=gge(),{data:u=[],isLoading:f}=wge(),{data:d=[],isLoading:m}=Nge(),p=yge(),y=bge();vge();const v=l||f||m,[g,b]=z.useState(""),[N,j]=z.useState("active"),[w,S]=z.useState("list"),[P,A]=z.useState("none"),[T,I]=z.useState(!1),[B,E]=z.useState("upload"),[C,M]=z.useState([]),[q,G]=z.useState([]),[Z,te]=z.useState({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),[ne,J]=z.useState(!1),[ee,H]=z.useState(null),[O,R]=z.useState(null),[W,U]=z.useState(null),[K,oe]=z.useState(null),[he,ie]=z.useState(null),[ce,Le]=z.useState(null),[le,He]=z.useState(!1),[Fe,fe]=z.useState(!1),[Q,we]=z.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[ve,Ee]=z.useState([]),[pe,ue]=z.useState(!1),[Pe,Ne]=z.useState(!1),[Be,nt]=z.useState(!1),[mt,kt]=z.useState(!1),[Re,gt]=z.useState(""),[ut,lt]=z.useState(""),[pr,tr]=z.useState(""),[ft,$t]=z.useState(null),[er,qe]=z.useState(!1),[bt,Nr]=z.useState(null),[rr,Lr]=z.useState(null),[Er,or]=z.useState(!1),[Ut,wr]=z.useState(""),[kr,Gr]=z.useState(0),[hn,On]=z.useState([]),[br,Yn]=z.useState(!1),[on,Xe]=z.useState([]),[wt,Wt]=z.useState(!1),re=z.useRef(null),me=z.useRef(null),ye=z.useRef(null),Ae=Ue=>{const Dt=Ue.getFullYear(),Ct=Ue.getMonth(),sr=Ue.getDate();return`${Dt}-${String(Ct+1).padStart(2,"0")}-${String(sr).padStart(2,"0")}`},Ce=Ue=>{if(!Ue||!/^\d{4}-\d{2}-\d{2}$/.test(Ue))return Ue;const[Dt,Ct,sr]=Ue.split("-").map(Number);return new Date(Dt,Ct-1,sr).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Oe=Ue=>{const Dt=new Date(Ue),Ct=Dt.getDay(),sr=Dt.getDate()-Ct+(Ct===0?-6:1);return new Date(Dt.setDate(sr))},Ke=Ue=>{const Dt=new Date(Ue);Dt.setHours(0,0,0,0);const Ct=new Date(Dt);return Ct.setDate(Dt.getDate()+6),Ct.setHours(23,59,59,999),{start:Dt,end:Ct}},ct=Ue=>{if(!Ue||!/^\d{4}-\d{2}-\d{2}$/.test(Ue))return null;const[Dt,Ct,sr]=Ue.split("-").map(Number),jr=new Date(Dt,Ct-1,sr),xr=Oe(jr);return`${xr.getFullYear()}-${String(xr.getMonth()+1).padStart(2,"0")}-${String(xr.getDate()).padStart(2,"0")}`};z.useEffect(()=>{c&&(console.error("[TASKS] React Query error:",c),n("Failed to load tasks"))},[c,n]),z.useEffect(()=>{ce&&!le&&we({title:ce.title,category:ce.category||"",description:ce.description||"",dueDate:ce.dueDate||"",priority:ce.priority||"Medium",status:ce.status||"Todo",assigneeId:ce.assigneeId,projectId:ce.projectId||""})},[ce,le]),z.useEffect(()=>{if(!ce)return;let Ue=!1;return(async()=>{try{const Dt=await X1(),Ct=Array.isArray(Dt?.data)?Dt.data:[];Ue||Xe(Ct)}catch{Ue||Xe([])}})(),()=>{Ue=!0}},[ce?.id]),z.useEffect(()=>{if(!le){Wt(!1);return}Q.category&&on.includes(Q.category)?Wt(!1):Q.category&&!on.includes(Q.category)&&Wt(!0)},[le,Q.category,on]);const Ge=async Ue=>{if(o.find(Ct=>Ct.id===Ue)){R(Ue);try{await p.mutateAsync({id:Ue,data:{archived:N==="active"}}),oe(null)}catch{}finally{R(null)}}},Je=async Ue=>{H(Ue);try{await y.mutateAsync(Ue),ie(null)}catch{}finally{H(null)}},ze=()=>{ve.length===va.length?Ee([]):Ee(va.map(Ue=>Ue.id))},De=async()=>{ue(!0);try{const Ue=[...ve];await Promise.all(Ue.map(Dt=>y.mutateAsync(Dt))),Ee([]),Ne(!1),r(`Successfully deleted ${Ue.length} task${Ue.length>1?"s":""}`)}catch(Ue){n(Ue.message||"Failed to delete tasks")}finally{ue(!1)}},tt=async()=>{if(!Re){n("Please select a project");return}kt(!0);try{const Ue=[...ve];await Promise.all(Ue.map(Dt=>p.mutateAsync({id:Dt,data:{projectId:Re==="__none__"?null:Re}}))),Ee([]),nt(!1),gt(""),r(`Assigned ${Ue.length} task${Ue.length>1?"s":""} to ${Re==="__none__"?"No project":u.find(Dt=>Dt.id===Re)?.title||"project"}`)}catch(Ue){n(Ue.message||"Failed to assign project")}finally{kt(!1)}},pt=()=>{const Ue=new Date;Ue.setDate(Ue.getDate()+30);const Dt=Ue.getDate(),Ct=Ue.getMonth()+1,sr=Ue.getFullYear(),jr=`${Dt}-${Ct}-${sr}`,xr=O0.aoa_to_sheet([["Title","Task Category","Due Date","Priority (Low/Medium/High)","Description","Owner (Name or Email)"],["Update Logistics Map","Operations",jr,"High","Audit the EMEA transit routes","rpk@wx.agency"]]),Cr=O0.book_new();O0.book_append_sheet(Cr,xr,"Tasks"),ige(Cr,"ImpactFlow_Task_Import_Template.xlsx"),s("Registry template downloaded")},It=async()=>{if(!Z.title){n("Please map the required field: Title");return}if(q.length===0){n("No data to import");return}J(!0);try{console.log("[IMPORT] ===== STARTING IMPORT PROCESS ====="),console.log("[IMPORT] Column mapping:",Z),console.log("[IMPORT] Parsed data rows:",q.length),console.log("[IMPORT] Sample parsed row:",q[0]);const Ue=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ue){n("Please log in to import tasks"),J(!1);return}console.log("[IMPORT] Starting import with:",{parsedDataRows:q.length,columnMapping:Z,usersCount:d.length,currentUserId:Ue});const Dt=q.map((nr,ir)=>{console.log(`[IMPORT] Processing row ${ir}:`,nr),console.log("[IMPORT] Column mapping:",Z);const Et=String(nr[Z.title]||"").trim(),Sr=Z.category?String(nr[Z.category]||"").trim():"",Ht=String(nr[Z.dueDate]||"").trim(),Un=Z.description?String(nr[Z.description]||"").trim():"",Ca=Z.priority?String(nr[Z.priority]||"").trim():"Medium",pn=Z.owner?String(nr[Z.owner]||"").trim():"";console.log(`[IMPORT] Extracted values for row ${ir}:`,{title:Et,category:Sr,dueDateRaw:Ht,description:Un,priorityRaw:Ca,ownerRaw:pn,rowKeys:Object.keys(nr),mappedTitleKey:Z.title,mappedDueDateKey:Z.dueDate});let Zt="";if(Ht&&Ht.toLowerCase().trim()==="ongoing")Zt="";else if(Ht)if(/^\d+$/.test(Ht)&&parseFloat(Ht)>25569){const $r=new Date(1900,0,1),Kr=parseFloat(Ht)-2,_e=new Date($r.getTime()+Kr*24*60*60*1e3);isNaN(_e.getTime())||(Zt=Ae(_e))}else{let $r=null;if(/^\d{4}-\d{2}-\d{2}$/.test(Ht))Zt=Ht,$r=new Date(0);else if(Ht.includes("-")&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(Ht)){const Kr=Ht.split("-").map(_e=>_e.trim());if(Kr.length===3){const _e=parseInt(Kr[0],10),Yt=parseInt(Kr[1],10)-1,mr=parseInt(Kr[2],10);!isNaN(_e)&&!isNaN(Yt)&&!isNaN(mr)&&_e>=1&&_e<=31&&Yt>=0&&Yt<=11&&($r=new Date(mr,Yt,_e),console.log(`[IMPORT] Parsed hyphen-separated date "${Ht}" as day-month-year -> ${Ae($r)}`))}}else if(Ht.includes("/")){const Kr=Ht.split("/").map(_e=>_e.trim());if(Kr.length===3){const _e=parseInt(Kr[0],10),Yt=parseInt(Kr[1],10)-1;let mr=parseInt(Kr[2],10);mr<100&&(mr+=2e3),!isNaN(_e)&&!isNaN(Yt)&&!isNaN(mr)&&($r=new Date(mr,Yt,_e))}}else if(Ht.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)){const Kr=Ht.split("/"),_e=parseInt(Kr[0],10)-1,Yt=parseInt(Kr[1],10),mr=parseInt(Kr[2],10);!isNaN(Yt)&&!isNaN(_e)&&!isNaN(mr)&&($r=new Date(mr,_e,Yt))}else if(!$r||isNaN($r.getTime())){const Kr=Ht.match(/^([A-Za-z]+)\s+(\d{1,2}),?\s*(\d{4})$/);if(Kr){const[,_e,Yt,mr]=Kr,_r=["january","february","march","april","may","june","july","august","september","october","november","december"],zr=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],mn=_e.toLowerCase().trim();let ta=-1;for(let Hn=0;Hn<_r.length;Hn++)if(mn.startsWith(_r[Hn])||mn.startsWith(zr[Hn])){ta=Hn;break}if(ta>=0){const Hn=parseInt(Yt,10),ti=parseInt(mr,10);$r=new Date(ti,ta,Hn),$r.getFullYear()!==ti||$r.getMonth()!==ta||$r.getDate()!==Hn?(console.warn(`[IMPORT] Invalid date parsed from "${Ht}": year=${ti}, month=${ta}, day=${Hn}`),$r=null):console.log(`[IMPORT] Successfully parsed date "${Ht}" -> ${Ae($r)}`)}else console.warn(`[IMPORT] Could not match month name in "${Ht}"`)}}if(!$r||isNaN($r.getTime())){const Kr=new Date(Ht);if(!isNaN(Kr.getTime())){const _e=Kr.getFullYear(),Yt=Kr.getMonth(),mr=Kr.getDate();$r=new Date(_e,Yt,mr),console.log(`[IMPORT] Used fallback date parsing for "${Ht}" -> ${Ae($r)}`)}}$r&&!isNaN($r.getTime())&&!Zt?(Zt=Ae($r),console.log(`[IMPORT] Final dueDate for row ${ir}: "${Ht}" -> "${Zt}"`)):Ht&&!Zt&&console.error(`[IMPORT] Failed to parse date "${Ht}" for row ${ir}`)}const ya={low:"Low",medium:"Medium",high:"High",l:"Low",m:"Medium",h:"High"}[Ca.toLowerCase()]||"Medium";let ln=Ue;if(pn&&d.length>0){const $r=pn.toLowerCase().trim(),Kr=d.find(_e=>_e.name.toLowerCase().trim()===$r||_e.email.toLowerCase().trim()===$r||_e.name.toLowerCase().trim().includes($r)||_e.email.toLowerCase().trim().includes($r));Kr?(ln=Kr.id,console.log(`[IMPORT] Matched owner "${pn}" to user:`,Kr.name,Kr.id)):console.warn(`[IMPORT] Could not match owner "${pn}", using current user`)}ln||(console.error("[IMPORT] No assigneeId available, using current user as fallback"),ln=Ue);const xn={title:Et.trim(),category:Sr||void 0,dueDate:Zt||null,description:Un.trim()||"",priority:ya,status:"Todo",assigneeId:ln,_rowIndex:ir,_rawDate:Ht};return(!xn.title||!xn.assigneeId)&&console.error(`[IMPORT] Row ${ir} missing required fields:`,{hasTitle:!!xn.title,hasAssigneeId:!!xn.assigneeId,taskData:xn}),ln||console.warn(`[IMPORT] Row ${ir}: No assigneeId found, using current user:`,{title:Et,ownerRaw:pn,userId:Ue}),console.log(`[IMPORT] Task data for row ${ir}:`,xn),xn}).filter(nr=>{const ir=nr.title&&nr.assigneeId;return ir?console.log("[IMPORT] Valid task:",{title:nr.title,dueDate:nr.dueDate||"Not set",assigneeId:nr.assigneeId,priority:nr.priority,status:nr.status}):console.error("[IMPORT] Filtered out invalid task:",{title:nr.title,dueDate:nr.dueDate,assigneeId:nr.assigneeId,rawDate:nr._rawDate,rowIndex:nr._rowIndex,fullTask:nr,missingFields:{title:!nr.title,assigneeId:!nr.assigneeId}}),ir}).map(({_rowIndex:nr,_rawDate:ir,...Et})=>(Et.assigneeId||(console.warn("[IMPORT] Task missing assigneeId, using current user:",Et),Et.assigneeId=Ue),Et));if(console.log("[IMPORT] Final tasks to import:",Dt),console.log("[IMPORT] Tasks count:",Dt.length),Dt.length===0){const nr=q[0],ir=nr?String(nr[Z.title]||"").trim():"N/A",Et=nr?String(nr[Z.dueDate]||"").trim():"N/A";console.error("[IMPORT] Validation failed - no valid tasks:",{totalRows:q.length,columnMapping:Z,mappedTitle:Z.title,mappedDueDate:Z.dueDate,sampleRow:nr,sampleTitle:ir,sampleDate:Et,sampleRowKeys:nr?Object.keys(nr):[],parsedData:q.slice(0,3)}),n(`No valid tasks found to import. Please check that:
1. Title column is mapped correctly (current: "${Z.title}")
2. Due Date column is mapped correctly (current: "${Z.dueDate}")
3. Date format is valid (15-2-2026, DD-MM-YYYY, YYYY-MM-DD, February 15 2026, or "Ongoing" for no date)

Sample data - Title: "${ir}", Date: "${Et}"

Available columns: ${C.join(", ")}`),J(!1);return}console.log("[IMPORT] ===== STARTING API CALL =====");const Ct=Dt.map(({_rowIndex:nr,_rawDate:ir,...Et})=>Et);console.log("[IMPORT] Tasks to import count:",Ct.length),console.log("[IMPORT] Tasks for API (cleaned):",JSON.stringify(Ct,null,2)),console.log("[IMPORT] Sample task structure:",{title:Ct[0]?.title,dueDate:Ct[0]?.dueDate,assigneeId:Ct[0]?.assigneeId,priority:Ct[0]?.priority,status:Ct[0]?.status,description:Ct[0]?.description,hasProjectId:!!Ct[0]?.projectId});const sr=Ct.filter(nr=>!nr.title||!nr.assigneeId);if(sr.length>0){console.error("[IMPORT] Invalid tasks found:",sr),n(`Cannot import: ${sr.length} task(s) missing required fields (title or assigneeId)`),J(!1);return}let jr;try{jr=await pne(Ct),console.log("[IMPORT] API call successful")}catch(nr){console.error("[IMPORT] API call failed:",nr),console.error("[IMPORT] Error details:",{message:nr.message,status:nr.status,code:nr.code,stack:nr.stack}),n(`Failed to import tasks: ${nr.message||"Unknown error"}`),J(!1);return}console.log("[IMPORT] Raw API Response:",JSON.stringify(jr,null,2)),console.log("[IMPORT] Response type:",typeof jr),console.log("[IMPORT] Response keys:",jr?Object.keys(jr):"null");let xr={},Cr=[];if(jr)jr.success&&jr.data?(xr=jr.data,Cr=xr.created||[]):jr.data&&Array.isArray(jr.data.created)?(xr=jr.data,Cr=xr.created||[]):jr.created&&Array.isArray(jr.created)?(xr=jr,Cr=xr.created||[]):(console.warn("[IMPORT] Unexpected response structure, searching for created tasks..."),xr=jr.data||jr,Cr=xr.created||xr.data?.created||[]),console.log("[IMPORT] Extracted importData:",xr),console.log("[IMPORT] Created tasks:",Cr),console.log("[IMPORT] Created tasks count:",Cr.length),console.log("[IMPORT] Created task IDs:",Cr.map(nr=>nr?.id)),console.log("[IMPORT] Created task details:",Cr.map(nr=>({id:nr.id,title:nr.title,assigneeId:nr.assigneeId})));else{console.error("[IMPORT] No response received from API"),n("No response received from server. Please check your connection."),J(!1);return}const kn=xr.successful??Cr.length??0,Pn=xr.failed??0;if(console.log("[IMPORT] Import results:",{successCount:kn,failedCount:Pn,total:Dt.length,createdTasks:Cr.length,createdTaskIds:Cr.map(nr=>nr.id),errors:xr.errors}),Cr&&Cr.length>0?(console.log("[IMPORT] ===== INVALIDATING TASKS CACHE ====="),console.log("[IMPORT] Created tasks:",Cr.length),i.invalidateQueries({queryKey:["tasks"]})):(console.error("[IMPORT] ===== NO TASKS CREATED ====="),console.error("[IMPORT] No created tasks. createdTasks:",Cr),console.error("[IMPORT] Response structure:",jr),console.error("[IMPORT] Import data:",xr)),Pn>0){const nr=xr.errors?.map(ir=>`Row ${ir.index+1}: ${ir.error}`).join(`
`)||"";n(`Imported ${kn} task(s), but ${Pn} failed.
${nr}`)}else r(`Successfully imported ${kn} task(s)`);G([]),M([]),te({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),re.current&&(re.current.value=""),I(!1),window.dispatchEvent(new Event("refresh-tasks"))}catch(Ue){console.error("Import error:",Ue),n(Ue.message||"Failed to import tasks. Please check your data format.")}finally{J(!1)}},Mt=Ue=>{if(!Ue||Ue.length===0)return console.log("[IMPORT] Header detection: empty or null firstRow"),!1;console.log("[IMPORT] Header detection - firstRow:",Ue),console.log("[IMPORT] Header detection - firstRow length:",Ue.length),console.log("[IMPORT] Header detection - firstRow values:",Ue.map((xr,Cr)=>`[${Cr}]: "${xr}"`));const Dt=["task","title","name","category","due","date","priority","description","owner","assignee","status","project","desc"];let Ct=0;const sr=Ue.filter(xr=>xr&&String(xr).trim()!=="");console.log("[IMPORT] Header detection - non-empty cells:",sr);for(const xr of sr){const Cr=String(xr).toLowerCase().trim();Dt.some(kn=>Cr.includes(kn))&&(Ct++,console.log(`[IMPORT] Header detection - matched keyword in: "${xr}"`)),Cr.match(/^(task|due|owner|assignee|priority|description|category|status)/)&&(Ct++,console.log(`[IMPORT] Header detection - matched pattern in: "${xr}"`))}const jr=sr.length>0?Ct/sr.length:0;return console.log("[IMPORT] Header detection result:",{firstRow:Ue,totalCells:Ue.length,cellsToCheck:sr.length,matchCount:Ct,matchRatio:jr,isHeader:jr>=.4}),jr>=.4},vr=async Ue=>{const Dt=Ue.target.files?.[0];if(Dt)try{const Ct=Dt.name.split(".").pop()?.toLowerCase();if(Ct==="csv"){const sr=new FileReader;sr.onload=jr=>{try{const xr=new Uint8Array(jr.target?.result),Cr=fy(xr,{type:"array",sheetStubs:!0}),kn=Cr.SheetNames[0],Pn=Cr.Sheets[kn],nr=O0.decode_range(Pn["!ref"]||"A1"),ir=nr.e.c-nr.s.c+1;console.log("[IMPORT] CSV worksheet range:",Pn["!ref"]),console.log("[IMPORT] CSV number of columns from range:",ir);const Et=O0.sheet_to_json(Pn,{header:1,defval:"",raw:!1,dateNF:"yyyy-mm-dd",blankrows:!0});if(console.log("[IMPORT] CSV raw data length:",Et.length),console.log("[IMPORT] CSV first row length:",Et[0]?.length),console.log("[IMPORT] CSV first row:",Et[0]),Et.length===0){n("File is empty");return}if(Et[0]&&Et[0].length<ir)for(console.log(`[IMPORT] CSV: Padding first row from ${Et[0].length} to ${ir} columns`);Et[0].length<ir;)Et[0].push("");const Sr=Mt(Et[0]);console.log("[IMPORT] CSV Header detection result:",Sr);let Ht,Un;if(Sr?(Ht=Et[0].map((Zt,zn)=>String(Zt||"").trim()||`Column ${zn+1}`),Un=1,console.log("[IMPORT] CSV raw first row:",Et[0]),console.log("[IMPORT] CSV processed headers:",Ht)):(Ht=Et[0].map((Zt,zn)=>`Column ${zn+1}`),Un=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),Ht.length===0){n("No columns found in file");return}console.log("[IMPORT] CSV detected headers:",Ht),console.log("[IMPORT] CSV detected headers count:",Ht.length),console.log("[IMPORT] CSV detected headers array:",Ht),M(Ht),console.log("[IMPORT] CSV setDetectedColumns called with:",Ht);const Ca=[];for(let Zt=Un;Zt<Et.length;Zt++){const zn={},ya=Et[Zt]||[];for(;ya.length<Ht.length;)ya.push("");Ht.forEach((ln,xn)=>{const $r=ya[xn];if(typeof $r=="number"&&$r>25569&&ln.toLowerCase().includes("date")){const Kr=new Date(1900,0,1),_e=$r-2,Yt=new Date(Kr.getTime()+_e*24*60*60*1e3);zn[ln]=Yt.toISOString().split("T")[0]}else zn[ln]=$r!=null?String($r).trim():""}),Object.values(zn).some(ln=>ln)&&Ca.push(zn)}console.log("[IMPORT] CSV parsed rows:",Ca),console.log("[IMPORT] CSV parsed rows count:",Ca.length),G(Ca);const pn={title:Ht.find(Zt=>Zt.toLowerCase().includes("title")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("name")||!Zt.toLowerCase().includes("category")&&Zt.toLowerCase().includes("name"))||"",category:Ht.find(Zt=>Zt.toLowerCase().includes("category")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("cat"))||"",dueDate:Ht.find(Zt=>Zt.toLowerCase().includes("due")||Zt.toLowerCase().includes("date")&&!Zt.toLowerCase().includes("created")&&!Zt.toLowerCase().includes("updated"))||"",description:Ht.find(Zt=>Zt.toLowerCase().includes("description")||Zt.toLowerCase().includes("desc"))||"",priority:Ht.find(Zt=>Zt.toLowerCase().includes("priority")||Zt.toLowerCase().includes("prio"))||"",owner:Ht.find(Zt=>Zt.toLowerCase().includes("owner")||Zt.toLowerCase().includes("assignee")||Zt.toLowerCase().includes("assigned")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("owner"))||""};te(pn),E("mapping")}catch(xr){console.error("CSV parse error:",xr),n("Failed to parse CSV file: "+(xr.message||"Unknown error"))}},sr.readAsArrayBuffer(Dt)}else if(Ct==="xlsx"||Ct==="xls"){const sr=new FileReader;sr.onload=jr=>{const xr=new Uint8Array(jr.target?.result),Cr=fy(xr,{type:"array"}),kn=Cr.SheetNames[0],Pn=Cr.Sheets[kn],nr=O0.decode_range(Pn["!ref"]||"A1"),ir=nr.e.c-nr.s.c+1;console.log("[IMPORT] Excel worksheet range:",Pn["!ref"]),console.log("[IMPORT] Excel number of columns from range:",ir);const Et=O0.sheet_to_json(Pn,{header:1,raw:!0,defval:"",blankrows:!0});if(console.log("[IMPORT] Excel raw data length:",Et.length),console.log("[IMPORT] Excel first row length:",Et[0]?.length),console.log("[IMPORT] Excel first row:",Et[0]),Et.length===0){n("File is empty");return}if(Et[0]&&Et[0].length<ir)for(console.log(`[IMPORT] Padding first row from ${Et[0].length} to ${ir} columns`);Et[0].length<ir;)Et[0].push("");const Sr=Mt(Et[0]);console.log("[IMPORT] Excel Header detection result:",Sr);let Ht,Un;Sr?(Ht=Et[0].map((Zt,zn)=>String(Zt||"").trim()||`Column ${zn+1}`),Un=1,console.log("[IMPORT] Excel raw first row:",Et[0]),console.log("[IMPORT] Excel processed headers:",Ht)):(Ht=Et[0].map((Zt,zn)=>`Column ${zn+1}`),Un=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),console.log("[IMPORT] Detected headers:",Ht),console.log("[IMPORT] Detected headers count:",Ht.length),console.log("[IMPORT] Detected headers array:",Ht),console.log("[IMPORT] Raw JSON data:",Et),M(Ht),console.log("[IMPORT] setDetectedColumns called with:",Ht);const Ca=[];for(let Zt=Un;Zt<Et.length;Zt++){const zn={},ya=Et[Zt]||[];for(;ya.length<Ht.length;)ya.push("");Ht.forEach((ln,xn)=>{const $r=ya[xn];if(typeof $r=="number"&&$r>25569&&ln.toLowerCase().includes("date")){const Kr=new Date(1900,0,1),_e=$r-2,Yt=new Date(Kr.getTime()+_e*24*60*60*1e3),mr=Yt.getFullYear(),_r=Yt.getMonth(),zr=Yt.getDate();zn[ln]=`${mr}-${String(_r+1).padStart(2,"0")}-${String(zr).padStart(2,"0")}`}else zn[ln]=$r!=null?String($r).trim():""}),Object.values(zn).some(ln=>ln)&&Ca.push(zn)}console.log("[IMPORT] Parsed rows:",Ca),console.log("[IMPORT] Parsed rows count:",Ca.length),G(Ca);const pn={title:Ht.find(Zt=>Zt.toLowerCase().includes("title")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("name")||!Zt.toLowerCase().includes("category")&&Zt.toLowerCase().includes("name"))||"",category:Ht.find(Zt=>Zt.toLowerCase().includes("category")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("cat"))||"",dueDate:Ht.find(Zt=>Zt.toLowerCase().includes("due")||Zt.toLowerCase().includes("date")&&!Zt.toLowerCase().includes("created")&&!Zt.toLowerCase().includes("updated"))||"",description:Ht.find(Zt=>Zt.toLowerCase().includes("description")||Zt.toLowerCase().includes("desc"))||"",priority:Ht.find(Zt=>Zt.toLowerCase().includes("priority")||Zt.toLowerCase().includes("prio"))||"",owner:Ht.find(Zt=>Zt.toLowerCase().includes("owner")||Zt.toLowerCase().includes("assignee")||Zt.toLowerCase().includes("assigned")||Zt.toLowerCase().includes("task")&&Zt.toLowerCase().includes("owner"))||""};console.log("[IMPORT] Auto-mapping:",pn),te(pn),E("mapping")},sr.readAsArrayBuffer(Dt)}else n("Unsupported file format. Please use CSV, XLS, or XLSX.")}catch(Ct){console.error("Error parsing file:",Ct),n("Failed to parse file: "+(Ct.message||"Unknown error"))}},Ur=async(Ue,Dt,Ct)=>{Ct.stopPropagation();const sr=Dt==="Done"?"Todo":"Done";U(Ue);try{await p.mutateAsync({id:Ue,data:{status:sr}}),ce?.id===Ue&&Le({...ce,status:sr})}catch{}finally{U(null)}},sn=async()=>{if(ce){if(!Q.title.trim()){n("Task title is required");return}if(!Q.assigneeId){n("Assignee is required");return}fe(!0);try{await p.mutateAsync({id:ce.id,data:{title:Q.title.trim(),category:Q.category.trim()||void 0,description:Q.description.trim()||"",dueDate:Q.dueDate||null,priority:Q.priority,status:Q.status,assigneeId:Q.assigneeId,projectId:Q.projectId||null}}),Le({...ce,title:Q.title.trim(),category:Q.category.trim()||void 0,description:Q.description.trim()||"",dueDate:Q.dueDate||"",priority:Q.priority,status:Q.status,assigneeId:Q.assigneeId,projectId:Q.projectId||void 0}),He(!1)}catch{}finally{fe(!1)}}},En=(Ue,Dt=1200,Ct=1200,sr=.8)=>new Promise((jr,xr)=>{const Cr=new FileReader;Cr.onload=kn=>{const Pn=new Image;Pn.onload=()=>{let nr=Pn.width,ir=Pn.height;nr>ir?nr>Dt&&(ir=ir*Dt/nr,nr=Dt):ir>Ct&&(nr=nr*Ct/ir,ir=Ct);const Et=document.createElement("canvas");Et.width=nr,Et.height=ir;const Sr=Et.getContext("2d");Sr?(Sr.drawImage(Pn,0,0,nr,ir),jr(Et.toDataURL("image/jpeg",sr))):xr(new Error("Canvas context not available"))},Pn.onerror=()=>xr(new Error("Failed to load image")),Pn.src=kn.target?.result},Cr.onerror=()=>xr(new Error("Failed to read file")),Cr.readAsDataURL(Ue)}),ls=async Ue=>{const Dt=Ue.target.files?.[0];if(Dt){if(!Dt.type.startsWith("image/")){n("Please select an image file");return}if(Dt.size>10*1024*1024){n("Image size must be less than 10MB");return}try{const Ct=await En(Dt,1200,1200,.8);tr(Ct),$t(Dt)}catch(Ct){n(Ct.message||"Failed to process image")}}},vn=Ue=>{const Dt=Ue.target.value,Ct=Ue.target.selectionStart;lt(Dt),Gr(Ct);const sr=Dt.substring(0,Ct),jr=sr.lastIndexOf("@");if(jr!==-1){const xr=sr.substring(jr+1),Cr=jr>0?sr[jr-1]:" ";if((Cr===" "||Cr===`
`||jr===0)&&!xr.includes(" ")&&!xr.includes(`
`)){wr(xr);const kn=d.filter(Pn=>Pn.name.toLowerCase().includes(xr.toLowerCase())||Pn.email.toLowerCase().includes(xr.toLowerCase()));On(kn.slice(0,5)),or(!0);return}}or(!1)},xa=Ue=>{const Ct=ut.substring(0,kr).lastIndexOf("@"),sr=ut.substring(kr),xr=`${ut.substring(0,Ct)}@${Ue.name} ${sr}`;if(lt(xr),or(!1),ye.current){ye.current.focus();const Cr=Ct+Ue.name.length+2;ye.current.setSelectionRange(Cr,Cr)}},Fn=Ue=>{const Dt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Ct=[];let sr;for(;(sr=Dt.exec(Ue))!==null;){const jr=sr[1].trim(),xr=d.find(Cr=>Cr.name.toLowerCase()===jr.toLowerCase());xr&&xr.id!==(t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Ct.push(xr.id)}return[...new Set(Ct)]},ga=Ue=>{const Dt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Ct=[];let sr=0,jr;for(;(jr=Dt.exec(Ue))!==null;){jr.index>sr&&Ct.push(Ue.substring(sr,jr.index));const xr=jr[1].trim(),Cr=d.find(kn=>kn.name.toLowerCase()===xr.toLowerCase());Cr?Ct.push(a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",Cr.name]},jr.index)):Ct.push(`@${xr}`),sr=jr.index+jr[0].length}return sr<Ue.length&&Ct.push(Ue.substring(sr)),Ct.length>0?Ct:Ue},ca=async()=>{if(ce){if(!ut.trim()&&!ft){n("Please enter a note or upload an image");return}qe(!0);try{const Ue=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Dt=t?.name||JSON.parse(localStorage.getItem("user_data")||"{}").name||"Unknown User",Ct={id:`note_${Date.now()}`,userId:Ue,userName:Dt,text:ut.trim(),imageUrl:pr||void 0,imageName:ft?.name||void 0,imageMimeType:ft?.type||void 0,createdAt:new Date().toISOString()},sr=[...ce.notes||[],Ct];await p.mutateAsync({id:ce.id,data:{notes:sr}}),Le({...ce,notes:sr});const jr=Fn(ut);for(const Cr of jr)try{await Fp({userId:Cr,type:"mention",title:"You were mentioned in a task",message:`${Dt} mentioned you in task "${ce.title}"`,relatedId:ce.id,relatedType:"task",read:!1})}catch(kn){console.error("Failed to send notification:",kn)}lt(""),tr(""),$t(null),me.current&&(me.current.value="");const xr=jr.length>0?`Note added and ${jr.length} user(s) notified`:"Note added successfully";r(xr)}catch(Ue){n(Ue.message||"Failed to add note")}finally{qe(!1)}}},da=async()=>{if(!(!ce||!t||!rr))try{Nr(rr);const Ue=ce.notes?.filter(Dt=>Dt.id!==rr)||[];await p.mutateAsync({id:ce.id,data:{notes:Ue}}),Le({...ce,notes:Ue}),r("Note deleted successfully"),Lr(null)}catch(Ue){n(Ue.message||"Failed to delete note")}finally{Nr(null)}},Us=()=>{Le(null),He(!1),lt(""),tr(""),$t(null),or(!1),Yn(!1),me.current&&(me.current.value="")};let va=o.filter(Ue=>{if(N==="archived"){if(!Ue.archived)return!1}else if(N==="week"){if(Ue.archived)return!1}else if(Ue.archived)return!1;return g.trim()?Ue.title.toLowerCase().includes(g.toLowerCase()):!0});if(P==="dueDate")va=[...va].sort((Ue,Dt)=>!Ue.dueDate&&!Dt.dueDate?0:Ue.dueDate?Dt.dueDate?(Ue.dueDate||"").localeCompare(Dt.dueDate||""):-1:1);else if(P==="priority"){const Ue={High:1,Medium:2,Low:3};va=[...va].sort((Dt,Ct)=>{const sr=Ue[Dt.priority]||4,jr=Ue[Ct.priority]||4;return sr-jr})}else P==="category"?va=[...va].sort((Ue,Dt)=>{const Ct=(Ue.category||"Uncategorized").toLowerCase(),sr=(Dt.category||"Uncategorized").toLowerCase();return Ct.localeCompare(sr)}):P==="owner"&&(va=[...va].sort((Ue,Dt)=>{const Ct=d.find(jr=>jr.id===Ue.assigneeId)?.name||"Unassigned",sr=d.find(jr=>jr.id===Dt.assigneeId)?.name||"Unassigned";return Ct.localeCompare(sr)}));return a.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Tasks"}),a.jsxs("div",{className:"flex gap-4 mt-2",children:[a.jsx("button",{onClick:()=>{j("active"),Ee([])},className:`text-sm font-bold pb-1 transition-all ${N==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),a.jsxs("button",{onClick:()=>{j("archived"),Ee([])},className:`text-sm font-bold pb-1 transition-all ${N==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archive (",o.filter(Ue=>Ue.archived).length,")"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{I(!0),E("upload")},className:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition-all",children:[a.jsx(V_,{className:"w-4 h-4"})," Bulk Import"]}),a.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[a.jsx(Nn,{className:"w-4 h-4"})," New Task"]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search tasks...",value:g,onChange:Ue=>{b(Ue.target.value),Ee([])},className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:P,onChange:Ue=>A(Ue.target.value),className:"appearance-none pl-4 pr-10 py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer hover:bg-slate-50 transition-all",children:[a.jsx("option",{value:"none",children:"No Sort"}),a.jsx("option",{value:"dueDate",children:"Sort by Due Date"}),a.jsx("option",{value:"priority",children:"Sort by Priority"}),a.jsx("option",{value:"category",children:"Sort by Category"}),a.jsx("option",{value:"owner",children:"Sort by Owner"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:a.jsx(hl,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"flex bg-white p-1 border border-slate-200 rounded-xl shadow-sm",children:[a.jsx("button",{onClick:()=>S("list"),className:`p-2 rounded-lg ${w==="list"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:a.jsx(WB,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>S("card"),className:`p-2 rounded-lg ${w==="card"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:a.jsx(qB,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{j(N==="week"?"active":"week"),Ee([])},className:`p-2 rounded-lg ${N==="week"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,title:"Week View",children:a.jsx(ka,{className:"w-4 h-4"})})]})]}),!v&&va.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:va.length>0&&ve.length===va.length,onChange:ze}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Tasks"})]}),v?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden min-h-[400px]",children:a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(jt,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):va.length===0?a.jsxs("div",{className:"py-20 bg-white rounded-3xl border border-dashed border-slate-200 text-center",children:[a.jsx(Gv,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),a.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:["No ",N==="week"?"tasks":N," tasks found"]})]}):N==="week"?a.jsx("div",{className:"space-y-8",children:(()=>{const Ue=va.filter(ir=>!ct(ir.dueDate)),Dt=va.filter(ir=>ct(ir.dueDate)),Ct={};Dt.forEach(ir=>{const Et=ct(ir.dueDate);Ct[Et]||(Ct[Et]=[]),Ct[Et].push(ir)});const sr=Object.keys(Ct).sort(),jr=(()=>{const ir=Oe(new Date);return`${ir.getFullYear()}-${String(ir.getMonth()+1).padStart(2,"0")}-${String(ir.getDate()).padStart(2,"0")}`})(),xr=(()=>{const ir=Oe(new Date),Et=new Date(ir);return Et.setDate(ir.getDate()+7),`${Et.getFullYear()}-${String(Et.getMonth()+1).padStart(2,"0")}-${String(Et.getDate()).padStart(2,"0")}`})(),Cr=(ir,Et)=>{const Sr=ir.toLocaleDateString("en-US",{month:"short",day:"numeric"}),Ht=Et.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Sr} - ${Ht}`},kn=ir=>{if(ir===jr)return"This Week";if(ir===xr)return"Next Week";const[Et,Sr,Ht]=ir.split("-").map(Number),Un=new Date(Et,Sr-1,Ht),{start:Ca,end:pn}=Ke(Un);return`Week of ${Cr(Ca,pn)}`},Pn=ir=>{const[Et,Sr,Ht]=ir.split("-").map(Number);return Ke(new Date(Et,Sr-1,Ht))};sr.forEach(ir=>{Ct[ir].sort((Et,Sr)=>(Et.dueDate||"").localeCompare(Sr.dueDate||""))});const nr=ir=>ir.length===0?null:w==="list"?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-50",children:ir.map(Et=>{const Sr=ve.includes(Et.id);return a.jsxs("div",{onClick:()=>Le(Et),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Sr?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[a.jsx("div",{onClick:Ht=>Ht.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Sr,onChange:()=>Ee(Ht=>Sr?Ht.filter(Un=>Un!==Et.id):[...Ht,Et.id])})}),a.jsx("button",{onClick:Ht=>Ur(Et.id,Et.status,Ht),disabled:W===Et.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:W===Et.id?a.jsx(jt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Et.status==="Done"?a.jsx(jn,{className:"w-6 h-6 text-emerald-500"}):a.jsx(vd,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:`font-bold text-sm ${Et.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Et.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Et.category&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ks,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Et.category})]}),a.jsx("span",{className:"text-slate-300",children:""})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:u.find(Ht=>Ht.id===Et.projectId)?.title||"General"}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ka,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Et.dueDate?Ce(Et.dueDate):"Ongoing"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Et.priority==="High"?"bg-red-50 text-red-600":Et.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Et.priority}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-full",children:[a.jsx(vl,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:d.find(Ht=>Ht.id===Et.assigneeId)?.name||"Unassigned"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:Ht=>{Ht.stopPropagation(),Le(Et)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:a.jsx(yd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ht=>{Ht.stopPropagation(),oe(Et)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:a.jsx(fd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ht=>{Ht.stopPropagation(),ie(Et)},className:"p-1.5 hover:bg-red-50 rounded-lg text-red-400 transition-colors",children:a.jsx(Br,{className:"w-4 h-4"})})]})]})]},Et.id)})})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:ir.map(Et=>{const Sr=ve.includes(Et.id);return a.jsxs("div",{onClick:()=>Le(Et),className:`bg-white p-6 rounded-3xl border ${Sr?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[a.jsx("div",{className:"absolute top-4 left-4",onClick:Ht=>Ht.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:`${Sr?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer`,checked:Sr,onChange:()=>Ee(Ht=>Sr?Ht.filter(Un=>Un!==Et.id):[...Ht,Et.id])})}),a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:`font-bold text-sm mb-3 ${Et.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Et.title}),a.jsxs("div",{className:"space-y-2 mb-4",children:[Et.category&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ks,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Et.category})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:u.find(Ht=>Ht.id===Et.projectId)?.title||"General"})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Et.dueDate?a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ka,{className:"w-3.5 h-3.5 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:Ce(Et.dueDate)})]}):a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Et.priority==="High"?"bg-red-50 text-red-600":Et.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Et.priority})]})]},Et.id)})});return a.jsxs(a.Fragment,{children:[sr.map(ir=>{const Et=Ct[ir];if(!Et||Et.length===0)return null;const Sr=Pn(ir),Ht=kn(ir);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:Ht}),a.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black",children:Cr(Sr.start,Sr.end)}),a.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Et.length,")"]})]}),nr(Et)]},ir)}),Ue.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Ongoing"}),a.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Ue.length," tasks)"]})]}),nr(Ue)]})]})})()}):w==="list"?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-50",children:va.map(Ue=>{const Dt=ve.includes(Ue.id);return a.jsxs("div",{onClick:()=>Le(Ue),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Ue.archived?"bg-slate-50/50":""} ${Dt?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[a.jsx("div",{onClick:Ct=>Ct.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Dt,onChange:()=>Ee(Ct=>Dt?Ct.filter(sr=>sr!==Ue.id):[...Ct,Ue.id])})}),a.jsx("button",{onClick:Ct=>Ur(Ue.id,Ue.status,Ct),disabled:W===Ue.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:W===Ue.id?a.jsx(jt,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Ue.status==="Done"?a.jsx(jn,{className:"w-6 h-6 text-emerald-500"}):a.jsx(vd,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:`font-bold text-sm ${Ue.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Ue.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Ue.category&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ks,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Ue.category})]}),a.jsx("span",{className:"text-slate-300",children:""})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:u.find(Ct=>Ct.id===Ue.projectId)?.title||"General"}),a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ka,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Ue.dueDate?Ce(Ue.dueDate):"Ongoing"})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Ue.priority==="High"?"bg-red-50 text-red-600":Ue.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ue.priority}),Ue.assigneeId&&(()=>{const Ct=d.find(sr=>sr.id===Ue.assigneeId);return Ct?a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-full",title:Ct.name,children:[a.jsx(vl,{className:"w-3 h-3 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 max-w-[120px] truncate",children:Ct.name})]}):null})()]}),a.jsxs("div",{className:"flex items-center gap-3 ml-3",children:[a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),Le(Ue)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",title:"View task",children:a.jsx(yd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),oe(Ue)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",children:Ue.archived?a.jsx(Kv,{className:"w-4 h-4"}):a.jsx(fd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),ie(Ue)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-white rounded-lg transition-all",children:a.jsx(Br,{className:"w-4 h-4"})})]})]},Ue.id)})})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:va.map(Ue=>{const Dt=ve.includes(Ue.id);return a.jsxs("div",{onClick:()=>Le(Ue),className:`bg-white p-6 rounded-3xl border ${Dt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600",children:a.jsx(bl,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),Le(Ue)},className:"p-1.5 text-slate-400 hover:text-indigo-600",title:"View task",children:a.jsx(yd,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),oe(Ue)},className:"p-1.5 text-slate-400 hover:text-indigo-600",children:a.jsx(fd,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Ct=>{Ct.stopPropagation(),ie(Ue)},className:"p-1.5 text-slate-400 hover:text-red-500",children:a.jsx(Br,{className:"w-3.5 h-3.5"})})]}),a.jsx("div",{onClick:Ct=>Ct.stopPropagation(),className:`${Dt?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Dt,onChange:()=>Ee(Ct=>Dt?Ct.filter(sr=>sr!==Ue.id):[...Ct,Ue.id])})})]})]}),a.jsx("h4",{className:`font-bold text-slate-900 mb-2 ${Ue.status==="Done"?"line-through opacity-40":""}`,children:Ue.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mb-4",children:Ue.description}),Ue.category&&a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-50 rounded-full",children:[a.jsx(ks,{className:"w-3.5 h-3.5 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600",children:Ue.category})]})}),Ue.assigneeId&&(()=>{const Ct=d.find(sr=>sr.id===Ue.assigneeId);return Ct?a.jsx("div",{className:"flex items-center gap-2 mb-4",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 rounded-full",children:[a.jsx(vl,{className:"w-3.5 h-3.5 text-emerald-600"}),a.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:Ct.name})]})}):null})(),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Ue.dueDate?a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(ka,{className:"w-3.5 h-3.5 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:Ce(Ue.dueDate)})]}):a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Ue.priority==="High"?"bg-red-50 text-red-600":Ue.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Ue.priority})]})]},Ue.id)})}),T&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(V_,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Enterprise Registry Import"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Logistical Data Migration"})]})]}),a.jsx("button",{onClick:()=>I(!1),className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(cr,{className:"w-6 h-6 text-slate-400"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:B==="upload"?a.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-3xl p-8",children:[a.jsxs("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-2 mb-6",children:[a.jsx(a0,{className:"w-4 h-4"})," Registry Data Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Title *"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Official objective identifier."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Category"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Organizational category (optional). New categories from the file are added automatically."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Due Date *"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:'e.g. 15-2-2026, YYYY-MM-DD, or February 15, 2026. Use "Ongoing" for no date.'})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Priority"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Low, Medium, or High."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Description"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Strategic context/notes."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Owner"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Task owner name or email (optional)."})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("button",{onClick:()=>re.current?.click(),className:"w-full py-16 border-4 border-dashed border-slate-100 rounded-[40px] flex flex-col items-center justify-center gap-4 hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group shadow-sm bg-white",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-300 group-hover:text-indigo-600 group-hover:scale-110 transition-all border border-slate-100 shadow-inner",children:a.jsx(RB,{className:"w-8 h-8"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-lg font-black text-slate-900 block mb-1",children:"Select Local Registry"}),a.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Supports CSV, XLS, XLSX"})]})]}),a.jsxs("button",{onClick:pt,className:"w-full py-5 bg-white border-2 border-slate-100 text-slate-600 rounded-[24px] text-xs font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-slate-50 transition-all shadow-sm",children:[a.jsx(H0,{className:"w-5 h-5 text-indigo-500"})," Download Registry Schema (Excel Template)"]})]})]}):a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-lg font-black text-slate-900",children:"Smart Mapping Interface"}),a.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Data Detected"]})]}),a.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:["We've detected ",C.length," columns and ",q.length," rows in your file. Ensure the ImpactFlow system properties are correctly mapped below."]}),a.jsx("div",{className:"space-y-4 bg-slate-50 p-8 rounded-[32px] border border-slate-100",children:[{label:"Task Name (Title)",key:"title",required:!0,icon:a.jsx(Ga,{className:"w-4 h-4"})},{label:"Task Category",key:"category",required:!1,icon:a.jsx(ks,{className:"w-4 h-4"})},{label:"Due Date",key:"dueDate",required:!0,icon:a.jsx(ka,{className:"w-4 h-4"})},{label:"Task Description",key:"description",required:!1,icon:a.jsx(a0,{className:"w-4 h-4"})},{label:"Priority Level",key:"priority",required:!1,icon:a.jsx(ks,{className:"w-4 h-4"})},{label:"Task Owner",key:"owner",required:!1,icon:a.jsx(vl,{className:"w-4 h-4"})}].map(Ue=>a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 group",children:[a.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white border border-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-200 transition-all",children:Ue.icon}),a.jsx("div",{children:a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter",children:[Ue.label," ",Ue.required&&a.jsx("span",{className:"text-red-500",children:"*"})]})})]}),a.jsx(lo,{className:"w-4 h-4 text-slate-300 hidden sm:block"}),a.jsxs("select",{value:Z[Ue.key]||"",onChange:Dt=>te({...Z,[Ue.key]:Dt.target.value}),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-indigo-100",children:[a.jsx("option",{value:"",children:"-- Select Source Column --"}),C.map(Dt=>a.jsx("option",{value:Dt,children:Dt},Dt))]})]},Ue.key))}),a.jsxs("div",{className:"flex gap-4 pt-6",children:[a.jsx("button",{onClick:()=>{E("upload"),G([]),M([]),te({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),re.current&&(re.current.value="")},className:"flex-1 py-5 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Back to Upload"}),a.jsx("button",{onClick:It,disabled:ne||!Z.title||!Z.dueDate,className:"flex-[2] py-5 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:ne?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-5 h-5 animate-spin"})," Importing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-5 h-5"})," Execute Registry Deploy"]})})]})]})}),a.jsx("input",{ref:re,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:vr})]})}),K&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:K.archived?a.jsx(Kv,{className:"w-6 h-6"}):a.jsx(fd,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:K.archived?"Restore Task?":"Archive Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:K.archived?"This will restore the task to active status.":"This will move the task to archive. You can restore it later."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:K.title}),K.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:K.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>oe(null),disabled:O===K.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Ge(K.id),disabled:O===K.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:O===K.id?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),K.archived?"Restoring...":"Archiving..."]}):K.archived?"Restore Task":"Archive Task"})]})]})}),he&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:he.title}),he.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:he.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ie(null),disabled:ee===he.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Je(he.id),disabled:ee===he.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===he.id?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Task"})]})]})}),ve.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:ve.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Ue=>{Ue.stopPropagation(),nt(!0),gt("")},disabled:mt,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[a.jsx(Zf,{className:"w-3.5 h-3.5"}),"Assign to project"]}),a.jsxs("button",{onClick:Ue=>{Ue.stopPropagation(),Ne(!0)},disabled:pe,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[pe?a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>Ee([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(cr,{className:"w-5 h-5"})})]})]})}),Be&&ve.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:a.jsx(Zf,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Assign to project"}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["Change the linked project for ",ve.length," selected task",ve.length>1?"s":"","."]})]})]}),a.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Project"}),a.jsxs("select",{value:Re,onChange:Ue=>gt(Ue.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"Select project..."}),a.jsx("option",{value:"__none__",children:"None (General)"}),u.filter(Ue=>!Ue.archived).map(Ue=>a.jsx("option",{value:Ue.id,children:Ue.title},Ue.id))]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>{nt(!1),gt("")},disabled:mt,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:tt,disabled:mt||!Re,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:mt?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):`Assign ${ve.length} task${ve.length>1?"s":""}`})]})]})}),Pe&&ve.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",ve.length," Task",ve.length>1?"s":"","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Ue=>ve.includes(Ue.id)).slice(0,5).map(Ue=>a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(bl,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ue.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:u.find(Dt=>Dt.id===Ue.projectId)?.title||"General"})]})]},Ue.id)),ve.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",ve.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Ne(!1),disabled:pe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:De,disabled:pe,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:pe?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${ve.length} Task${ve.length>1?"s":""}`})]})]})}),ce&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:Us}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:Us,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(cr,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:a.jsx(bl,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[le?a.jsx("input",{type:"text",value:Q.title,onChange:Ue=>we(Dt=>({...Dt,title:Ue.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:ce.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${ce.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":ce.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":ce.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:ce.status}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",ce.id.substring(0,8)]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:le?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{He(!1),we({title:ce.title,description:ce.description||"",dueDate:ce.dueDate||"",priority:ce.priority||"Medium",status:ce.status||"Todo",assigneeId:ce.assigneeId,projectId:ce.projectId||""})},disabled:Fe,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:sn,disabled:Fe||!Q.title.trim()||!Q.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Fe?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>He(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(vc,{className:"w-4 h-4"}),"Edit Task"]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),le?a.jsxs("select",{value:Q.assigneeId,onChange:Ue=>we(Dt=>({...Dt,assigneeId:Ue.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"Select Assignee"}),d.map(Ue=>a.jsx("option",{value:Ue.id,children:Ue.name},Ue.id))]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:d.find(Ue=>Ue.id===ce.assigneeId)?.name?.charAt(0)||"U"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.find(Ue=>Ue.id===ce.assigneeId)?.name||"Unassigned"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),le?a.jsxs("select",{value:Q.projectId,onChange:Ue=>we(Dt=>({...Dt,projectId:Ue.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"None"}),u.filter(Ue=>!Ue.archived).map(Ue=>a.jsx("option",{value:Ue.id,children:Ue.title},Ue.id))]}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:ce.projectId?u.find(Ue=>Ue.id===ce.projectId)?.title||"Unknown Project":"None"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ga,{className:"w-4 h-4 text-indigo-500"})," Description"]}),le?a.jsx("textarea",{rows:6,value:Q.description,onChange:Ue=>we(Dt=>({...Dt,description:Ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-indigo-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Add task description..."}):a.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:ce.description||"No description provided."}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[a.jsx(ks,{className:"w-3.5 h-3.5"})," Task Category"]}),le?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsxs("select",{value:wt?"__new__":Q.category||"",onChange:Ue=>{const Dt=Ue.target.value;Dt==="__new__"?(Wt(!0),we(Ct=>({...Ct,category:""}))):(Wt(!1),we(Ct=>({...Ct,category:Dt})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),on.map(Ue=>a.jsx("option",{value:Ue,children:Ue},Ue)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),wt&&a.jsx("input",{type:"text",value:Q.category,onChange:Ue=>we(Dt=>({...Dt,category:Ue.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):a.jsx("div",{className:"flex items-center gap-2 mt-2",children:ce.category?a.jsxs(a.Fragment,{children:[a.jsx(ks,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-sm font-bold text-indigo-700",children:ce.category})]}):a.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),le?a.jsx("input",{type:"date",value:Q.dueDate,onChange:Ue=>we(Dt=>({...Dt,dueDate:Ue.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:ce.dueDate?Ce(ce.dueDate):"Ongoing"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),le?a.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(Ue=>a.jsx("button",{onClick:()=>we(Dt=>({...Dt,priority:Ue})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${Q.priority===Ue?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:Ue},Ue))}):a.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${ce.priority==="High"?"bg-red-50 text-red-600":ce.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:ce.priority})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),le?a.jsxs("select",{value:Q.status,onChange:Ue=>we(Dt=>({...Dt,status:Ue.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"Todo",children:"Todo"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Review",children:"Review"}),a.jsx("option",{value:"Done",children:"Done"})]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[ce.status==="Done"?a.jsx(jn,{className:"w-5 h-5 text-emerald-500"}):ce.status==="In Progress"?a.jsx(As,{className:"w-5 h-5 text-blue-500 animate-pulse"}):a.jsx(vd,{className:"w-5 h-5 text-slate-400"}),a.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:ce.status})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",ce.notes&&ce.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:ce.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{ref:ye,rows:3,value:ut,onChange:vn,onBlur:()=>{setTimeout(()=>or(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),Er&&hn.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(rx,{className:"w-3 h-3"}),"Mention User"]}),hn.map(Ue=>a.jsxs("button",{onClick:()=>xa(Ue),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Ue.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Ue.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:Ue.email})]})]},Ue.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:pr?a.jsx(gl,{className:"w-4 h-4"}):a.jsx($u,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:pr?ft?.name||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:me,type:"file",accept:"image/*",onChange:ls,className:"hidden"})]}),a.jsx("button",{onClick:ca,disabled:er||!ut.trim()&&!ft,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:er?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Iu,{className:"w-4 h-4"}),"Send"]})})]}),pr&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:pr,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{tr(""),$t(null),me.current&&(me.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(cr,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:ce.notes&&ce.notes.length>0?[...ce.notes].reverse().map(Ue=>{const Dt=t?.role==="Admin"||Ue.userId===t?.id;return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:Ue.userName?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ue.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Ue.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Dt&&a.jsx("button",{onClick:()=>Lr(Ue.id),disabled:bt===Ue.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:bt===Ue.id?a.jsx(jt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Ue.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:ga(Ue.text)}),Ue.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsx("img",{src:Ue.imageUrl,alt:Ue.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Ct=window.open();Ct&&Ct.document.write(`<img src="${Ue.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},Ue.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("button",{onClick:()=>Yn(!br),className:"w-full flex items-center justify-between group",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[a.jsx(rf,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),a.jsx(_s,{className:`w-4 h-4 text-slate-400 transition-transform ${br?"rotate-90":""}`})]}),br&&a.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:ce.createdAt?new Date(ce.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),ce.updatedAt&&ce.updatedAt!==ce.createdAt&&a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(ce.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),ce.notes&&ce.notes.map((Ue,Dt)=>a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[Ue.userName," added a comment"]}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(Ue.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},Ue.id)),(!ce.notes||ce.notes.length===0)&&(!ce.updatedAt||ce.updatedAt===ce.createdAt)&&a.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>{ie(ce),Us()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(Br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:Us,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(jn,{className:"w-5 h-5"})," Close"]})]})]})]}),rr&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(sa,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>Lr(null),disabled:bt===rr,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:da,disabled:bt===rr,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:bt===rr?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Br,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})};function _a(e){"@babel/helpers - typeof";return _a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_a(e)}var Uo=Uint8Array,gc=Uint16Array,AS=Int32Array,cb=new Uo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),ub=new Uo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),hk=new Uo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u9=function(e,t){for(var r=new gc(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var s=new AS(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},d9=u9(cb,2),f9=d9.b,pk=d9.r;f9[28]=258,pk[258]=28;var h9=u9(ub,0),kge=h9.b,yI=h9.r,mk=new gc(32768);for(var ss=0;ss<32768;++ss){var qf=(ss&43690)>>1|(ss&21845)<<1;qf=(qf&52428)>>2|(qf&13107)<<2,qf=(qf&61680)>>4|(qf&3855)<<4,mk[ss]=((qf&65280)>>8|(qf&255)<<8)>>1}var jd=(function(e,t,r){for(var n=e.length,s=0,i=new gc(t);s<n;++s)e[s]&&++i[e[s]-1];var o=new gc(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new gc(1<<t);var c=15-t;for(s=0;s<n;++s)if(e[s])for(var u=s<<4|e[s],f=t-e[s],d=o[e[s]-1]++<<f,m=d|(1<<f)-1;d<=m;++d)l[mk[d]>>c]=u}else for(l=new gc(n),s=0;s<n;++s)e[s]&&(l[s]=mk[o[e[s]-1]++]>>15-e[s]);return l}),u0=new Uo(288);for(var ss=0;ss<144;++ss)u0[ss]=8;for(var ss=144;ss<256;++ss)u0[ss]=9;for(var ss=256;ss<280;++ss)u0[ss]=7;for(var ss=280;ss<288;++ss)u0[ss]=8;var rg=new Uo(32);for(var ss=0;ss<32;++ss)rg[ss]=5;var Sge=jd(u0,9,0),_ge=jd(u0,9,1),Age=jd(rg,5,0),Ege=jd(rg,5,1),dj=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},Au=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},fj=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},ES=function(e){return(e+7)/8|0},p9=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Uo(e.subarray(t,r))},Cge=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Ou=function(e,t,r){var n=new Error(t||Cge[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Ou),!r)throw n;return n},Tge=function(e,t,r,n){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new Uo(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new Uo(s*3));var u=function(Le){var le=r.length;if(Le>le){var He=new Uo(Math.max(le*2,Le));He.set(r),r=He}},f=t.f||0,d=t.p||0,m=t.b||0,p=t.l,y=t.d,v=t.m,g=t.n,b=s*8;do{if(!p){f=Au(e,d,1);var N=Au(e,d+1,3);if(d+=3,N)if(N==1)p=_ge,y=Ege,v=9,g=5;else if(N==2){var P=Au(e,d,31)+257,A=Au(e,d+10,15)+4,T=P+Au(e,d+5,31)+1;d+=14;for(var I=new Uo(T),B=new Uo(19),E=0;E<A;++E)B[hk[E]]=Au(e,d+E*3,7);d+=A*3;for(var C=dj(B),M=(1<<C)-1,q=jd(B,C,1),E=0;E<T;){var G=q[Au(e,d,M)];d+=G&15;var j=G>>4;if(j<16)I[E++]=j;else{var Z=0,te=0;for(j==16?(te=3+Au(e,d,3),d+=2,Z=I[E-1]):j==17?(te=3+Au(e,d,7),d+=3):j==18&&(te=11+Au(e,d,127),d+=7);te--;)I[E++]=Z}}var ne=I.subarray(0,P),J=I.subarray(P);v=dj(ne),g=dj(J),p=jd(ne,v,1),y=jd(J,g,1)}else Ou(1);else{var j=ES(d)+4,w=e[j-4]|e[j-3]<<8,S=j+w;if(S>s){c&&Ou(0);break}l&&u(m+w),r.set(e.subarray(j,S),m),t.b=m+=w,t.p=d=S*8,t.f=f;continue}if(d>b){c&&Ou(0);break}}l&&u(m+131072);for(var ee=(1<<v)-1,H=(1<<g)-1,O=d;;O=d){var Z=p[fj(e,d)&ee],R=Z>>4;if(d+=Z&15,d>b){c&&Ou(0);break}if(Z||Ou(2),R<256)r[m++]=R;else if(R==256){O=d,p=null;break}else{var W=R-254;if(R>264){var E=R-257,U=cb[E];W=Au(e,d,(1<<U)-1)+f9[E],d+=U}var K=y[fj(e,d)&H],oe=K>>4;K||Ou(3),d+=K&15;var J=kge[oe];if(oe>3){var U=ub[oe];J+=fj(e,d)&(1<<U)-1,d+=U}if(d>b){c&&Ou(0);break}l&&u(m+131072);var he=m+W;if(m<J){var ie=i-J,ce=Math.min(J,he);for(ie+m<0&&Ou(3);m<ce;++m)r[m]=n[ie+m]}for(;m<he;++m)r[m]=r[m-J]}}t.l=p,t.p=O,t.b=m,t.f=f,p&&(f=1,t.m=v,t.d=y,t.n=g)}while(!f);return m!=r.length&&o?p9(r,0,m):r.subarray(0,m)},Kd=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},km=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},hj=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var s=r.length,i=r.slice();if(!s)return{t:x9,l:0};if(s==1){var o=new Uo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(S,P){return S.f-P.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],u=0,f=1,d=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};f!=s-1;)l=r[r[u].f<r[d].f?u++:d++],c=r[u!=f&&r[u].f<r[d].f?u++:d++],r[f++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,n=1;n<s;++n)i[n].s>m&&(m=i[n].s);var p=new gc(m+1),y=xk(r[f-1],p,0);if(y>t){var n=0,v=0,g=y-t,b=1<<g;for(i.sort(function(P,A){return p[A.s]-p[P.s]||P.f-A.f});n<s;++n){var N=i[n].s;if(p[N]>t)v+=b-(1<<y-p[N]),p[N]=t;else break}for(v>>=g;v>0;){var j=i[n].s;p[j]<t?v-=1<<t-p[j]++-1:++n}for(;n>=0&&v;--n){var w=i[n].s;p[w]==t&&(--p[w],++v)}y=t}return{t:new Uo(p),l:y}},xk=function(e,t,r){return e.s==-1?Math.max(xk(e.l,t,r+1),xk(e.r,t,r+1)):t[e.s]=r},bI=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new gc(++t),n=0,s=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,n),n:t}},Sm=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},m9=function(e,t,r){var n=r.length,s=ES(t+2);e[s]=n&255,e[s+1]=n>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<n;++i)e[s+i+4]=r[i];return(s+4+n)*8},wI=function(e,t,r,n,s,i,o,l,c,u,f){Kd(t,f++,r),++s[256];for(var d=hj(s,15),m=d.t,p=d.l,y=hj(i,15),v=y.t,g=y.l,b=bI(m),N=b.c,j=b.n,w=bI(v),S=w.c,P=w.n,A=new gc(19),T=0;T<N.length;++T)++A[N[T]&31];for(var T=0;T<S.length;++T)++A[S[T]&31];for(var I=hj(A,7),B=I.t,E=I.l,C=19;C>4&&!B[hk[C-1]];--C);var M=u+5<<3,q=Sm(s,u0)+Sm(i,rg)+o,G=Sm(s,m)+Sm(i,v)+o+14+3*C+Sm(A,B)+2*A[16]+3*A[17]+7*A[18];if(c>=0&&M<=q&&M<=G)return m9(t,f,e.subarray(c,c+u));var Z,te,ne,J;if(Kd(t,f,1+(G<q)),f+=2,G<q){Z=jd(m,p,0),te=m,ne=jd(v,g,0),J=v;var ee=jd(B,E,0);Kd(t,f,j-257),Kd(t,f+5,P-1),Kd(t,f+10,C-4),f+=14;for(var T=0;T<C;++T)Kd(t,f+3*T,B[hk[T]]);f+=3*C;for(var H=[N,S],O=0;O<2;++O)for(var R=H[O],T=0;T<R.length;++T){var W=R[T]&31;Kd(t,f,ee[W]),f+=B[W],W>15&&(Kd(t,f,R[T]>>5&127),f+=R[T]>>12)}}else Z=Sge,te=u0,ne=Age,J=rg;for(var T=0;T<l;++T){var U=n[T];if(U>255){var W=U>>18&31;km(t,f,Z[W+257]),f+=te[W+257],W>7&&(Kd(t,f,U>>23&31),f+=cb[W]);var K=U&31;km(t,f,ne[K]),f+=J[K],K>3&&(km(t,f,U>>5&8191),f+=ub[K])}else km(t,f,Z[U]),f+=te[U]}return km(t,f,Z[256]),f+te[256]},Oge=new AS([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),x9=new Uo(0),Pge=function(e,t,r,n,s,i){var o=i.z||e.length,l=new Uo(n+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(n,l.length-s),u=i.l,f=(i.r||0)&7;if(t){f&&(c[0]=i.r>>3);for(var d=Oge[t-1],m=d>>13,p=d&8191,y=(1<<r)-1,v=i.p||new gc(32768),g=i.h||new gc(y+1),b=Math.ceil(r/3),N=2*b,j=function(Fe){return(e[Fe]^e[Fe+1]<<b^e[Fe+2]<<N)&y},w=new AS(25e3),S=new gc(288),P=new gc(32),A=0,T=0,I=i.i||0,B=0,E=i.w||0,C=0;I+2<o;++I){var M=j(I),q=I&32767,G=g[M];if(v[q]=G,g[M]=q,E<=I){var Z=o-I;if((A>7e3||B>24576)&&(Z>423||!u)){f=wI(e,c,0,w,S,P,T,B,C,I-C,f),B=A=T=0,C=I;for(var te=0;te<286;++te)S[te]=0;for(var te=0;te<30;++te)P[te]=0}var ne=2,J=0,ee=p,H=q-G&32767;if(Z>2&&M==j(I-H))for(var O=Math.min(m,Z)-1,R=Math.min(32767,I),W=Math.min(258,Z);H<=R&&--ee&&q!=G;){if(e[I+ne]==e[I+ne-H]){for(var U=0;U<W&&e[I+U]==e[I+U-H];++U);if(U>ne){if(ne=U,J=H,U>O)break;for(var K=Math.min(H,U-2),oe=0,te=0;te<K;++te){var he=I-H+te&32767,ie=v[he],ce=he-ie&32767;ce>oe&&(oe=ce,G=he)}}}q=G,G=v[q],H+=q-G&32767}if(J){w[B++]=268435456|pk[ne]<<18|yI[J];var Le=pk[ne]&31,le=yI[J]&31;T+=cb[Le]+ub[le],++S[257+Le],++P[le],E=I+ne,++A}else w[B++]=e[I],++S[e[I]]}}for(I=Math.max(I,E);I<o;++I)w[B++]=e[I],++S[e[I]];f=wI(e,c,u,w,S,P,T,B,C,I-C,f),u||(i.r=f&7|c[f/8|0]<<3,f-=7,i.h=g,i.p=v,i.i=I,i.w=E)}else{for(var I=i.w||0;I<o+u;I+=65535){var He=I+65535;He>=o&&(c[f/8|0]=u,He=o),f=m9(c,f+1,e.subarray(I,He))}i.i=o}return p9(l,0,n+ES(f)+s)},g9=function(){var e=1,t=0;return{p:function(r){for(var n=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=n+=r[o];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}e=n,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Ige=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Uo(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return Pge(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,s)},v9=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},Dge=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=g9();s.p(t.dictionary),v9(e,2,s.d())}},Lge=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Ou(6,"invalid zlib data"),(e[1]>>5&1)==1&&Ou(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function gk(e,t){t||(t={});var r=g9();r.p(e);var n=Ige(e,t,t.dictionary?6:2,4);return Dge(n,t),v9(n,n.length-4,r.d()),n}function Fge(e,t){return Tge(e.subarray(Lge(e),-4),{i:2},t,t)}var Mge=typeof TextDecoder<"u"&&new TextDecoder,Rge=0;try{Mge.decode(x9,{stream:!0}),Rge=1}catch{}var en=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function pj(){en.console&&typeof en.console.log=="function"&&en.console.log.apply(en.console,arguments)}var Ua={log:pj,warn:function(e){en.console&&(typeof en.console.warn=="function"?en.console.warn.apply(en.console,arguments):pj.call(null,arguments))},error:function(e){en.console&&(typeof en.console.error=="function"?en.console.error.apply(en.console,arguments):pj(e))}};function mj(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){D0(n.response,t,r)},n.onerror=function(){Ua.error("could not download file")},n.send()}function NI(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function _v(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var tx,vk,D0=en.saveAs||((typeof window>"u"?"undefined":_a(window))!=="object"||window!==en?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=en.URL||en.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?NI(s.href)?mj(e,t,r):_v(s,s.target="_blank"):_v(s)):(s.href=n.createObjectURL(e),setTimeout((function(){n.revokeObjectURL(s.href)}),4e4),setTimeout((function(){_v(s)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(NI(e))mj(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout((function(){_v(n)}))}else navigator.msSaveOrOpenBlob((function(s,i){return i===void 0?i={autoBom:!1}:_a(i)!=="object"&&(Ua.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return mj(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(en.HTMLElement)||en.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":_a(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},l.readAsDataURL(e)}else{var c=en.URL||en.webkitURL,u=c.createObjectURL(e);n?n.location=u:location.href=u,n=null,setTimeout((function(){c.revokeObjectURL(u)}),4e4)}});function y9(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),u=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),u.length==1&&(u="0"+u),"#"+l+c+u}}function xj(e,t){var r=e[0],n=e[1],s=e[2],i=e[3];r=Co(r,n,s,i,t[0],7,-680876936),i=Co(i,r,n,s,t[1],12,-389564586),s=Co(s,i,r,n,t[2],17,606105819),n=Co(n,s,i,r,t[3],22,-1044525330),r=Co(r,n,s,i,t[4],7,-176418897),i=Co(i,r,n,s,t[5],12,1200080426),s=Co(s,i,r,n,t[6],17,-1473231341),n=Co(n,s,i,r,t[7],22,-45705983),r=Co(r,n,s,i,t[8],7,1770035416),i=Co(i,r,n,s,t[9],12,-1958414417),s=Co(s,i,r,n,t[10],17,-42063),n=Co(n,s,i,r,t[11],22,-1990404162),r=Co(r,n,s,i,t[12],7,1804603682),i=Co(i,r,n,s,t[13],12,-40341101),s=Co(s,i,r,n,t[14],17,-1502002290),r=To(r,n=Co(n,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=To(i,r,n,s,t[6],9,-1069501632),s=To(s,i,r,n,t[11],14,643717713),n=To(n,s,i,r,t[0],20,-373897302),r=To(r,n,s,i,t[5],5,-701558691),i=To(i,r,n,s,t[10],9,38016083),s=To(s,i,r,n,t[15],14,-660478335),n=To(n,s,i,r,t[4],20,-405537848),r=To(r,n,s,i,t[9],5,568446438),i=To(i,r,n,s,t[14],9,-1019803690),s=To(s,i,r,n,t[3],14,-187363961),n=To(n,s,i,r,t[8],20,1163531501),r=To(r,n,s,i,t[13],5,-1444681467),i=To(i,r,n,s,t[2],9,-51403784),s=To(s,i,r,n,t[7],14,1735328473),r=Oo(r,n=To(n,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Oo(i,r,n,s,t[8],11,-2022574463),s=Oo(s,i,r,n,t[11],16,1839030562),n=Oo(n,s,i,r,t[14],23,-35309556),r=Oo(r,n,s,i,t[1],4,-1530992060),i=Oo(i,r,n,s,t[4],11,1272893353),s=Oo(s,i,r,n,t[7],16,-155497632),n=Oo(n,s,i,r,t[10],23,-1094730640),r=Oo(r,n,s,i,t[13],4,681279174),i=Oo(i,r,n,s,t[0],11,-358537222),s=Oo(s,i,r,n,t[3],16,-722521979),n=Oo(n,s,i,r,t[6],23,76029189),r=Oo(r,n,s,i,t[9],4,-640364487),i=Oo(i,r,n,s,t[12],11,-421815835),s=Oo(s,i,r,n,t[15],16,530742520),r=Po(r,n=Oo(n,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=Po(i,r,n,s,t[7],10,1126891415),s=Po(s,i,r,n,t[14],15,-1416354905),n=Po(n,s,i,r,t[5],21,-57434055),r=Po(r,n,s,i,t[12],6,1700485571),i=Po(i,r,n,s,t[3],10,-1894986606),s=Po(s,i,r,n,t[10],15,-1051523),n=Po(n,s,i,r,t[1],21,-2054922799),r=Po(r,n,s,i,t[8],6,1873313359),i=Po(i,r,n,s,t[15],10,-30611744),s=Po(s,i,r,n,t[6],15,-1560198380),n=Po(n,s,i,r,t[13],21,1309151649),r=Po(r,n,s,i,t[4],6,-145523070),i=Po(i,r,n,s,t[11],10,-1120210379),s=Po(s,i,r,n,t[2],15,718787259),n=Po(n,s,i,r,t[9],21,-343485551),e[0]=Qf(r,e[0]),e[1]=Qf(n,e[1]),e[2]=Qf(s,e[2]),e[3]=Qf(i,e[3])}function db(e,t,r,n,s,i){return t=Qf(Qf(t,e),Qf(n,i)),Qf(t<<s|t>>>32-s,r)}function Co(e,t,r,n,s,i,o){return db(t&r|~t&n,e,t,s,i,o)}function To(e,t,r,n,s,i,o){return db(t&n|r&~n,e,t,s,i,o)}function Oo(e,t,r,n,s,i,o){return db(t^r^n,e,t,s,i,o)}function Po(e,t,r,n,s,i,o){return db(r^(t|~n),e,t,s,i,o)}function b9(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)xj(n,Bge(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(xj(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,xj(n,s),n}function Bge(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}tx=en.atob.bind(en),vk=en.btoa.bind(en);var jI="0123456789abcdef".split("");function Uge(e){for(var t="",r=0;r<4;r++)t+=jI[e>>8*r+4&15]+jI[e>>8*r&15];return t}function qge(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function yk(e){return b9(e).map(qge).join("")}var $ge=(function(e){for(var t=0;t<e.length;t++)e[t]=Uge(e[t]);return e.join("")})(b9("hello"))!="5d41402abc4b2a76b9719d911017c592";function Qf(e,t){if($ge){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function bk(e,t){var r,n,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var u=0;for(c=0;c<256;c++){var f=l[c];u=(u+f+o.charCodeAt(c))%256,l[c]=l[u],l[u]=f}r=e,n=l}else l=n;var d=t.length,m=0,p=0,y="";for(c=0;c<d;c++)p=(p+(f=l[m=(m+1)%256]))%256,l[m]=l[p],l[p]=f,o=l[(l[m]+l[p])%256],y+=String.fromCharCode(t.charCodeAt(c)^o);return y}var kI={print:4,modify:8,copy:16,"annot-forms":32};function Xh(e,t,r,n){this.v=1,this.r=2;var s=192;e.forEach((function(l){if(kI.perm!==void 0)throw new Error("Invalid permission: "+l);s+=kI[l]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=yk(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=bk(this.encryptionKey,this.padding)}function Yh(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var s=e.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[n]}return t}function SI(e){if(_a(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){en.console&&Ua.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function py(e){if(!(this instanceof py))return new py(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function w9(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function F0(e,t,r,n,s){if(!(this instanceof F0))return new F0(e,t,r,n,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,w9.call(this,n,s)}function tp(e,t,r,n,s){if(!(this instanceof tp))return new tp(e,t,r,n,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,w9.call(this,n,s)}function Zr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,u="S",f=null;_a(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,s=e.format||s,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),u=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var d=e.putOnlyUsedFonts||!1,m={},p={internal:{},__private__:{}};p.__private__.PubSub=SI;var y="1.3",v=p.__private__.getPdfVersion=function(){return y};p.__private__.setPdfVersion=function(V){y=V};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};p.__private__.getPageFormats=function(){return g};var b=p.__private__.getPageFormat=function(V){return g[V]};s=s||"a4";var N={COMPAT:"compat",ADVANCED:"advanced"},j=N.COMPAT;function w(){this.saveGraphicsState(),Q(new br(lt,0,0,-lt,0,Zi()*lt).toString()+" cm"),this.setFontSize(this.getFontSize()/lt),u="n",j=N.ADVANCED}function S(){this.restoreGraphicsState(),u="S",j=N.COMPAT}var P=p.__private__.combineFontStyleAndFontWeight=function(V,be){if(V=="bold"&&be=="normal"||V=="bold"&&be==400||V=="normal"&&be=="italic"||V=="bold"&&be=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return be&&(V=be==400||be==="normal"?V==="italic"?"italic":"normal":be!=700&&be!=="bold"||V!=="normal"?(be==700?"bold":be)+""+V:"bold"),V};p.advancedAPI=function(V){var be=j===N.COMPAT;return be&&w.call(this),typeof V!="function"||(V(this),be&&S.call(this)),this},p.compatAPI=function(V){var be=j===N.ADVANCED;return be&&S.call(this),typeof V!="function"||(V(this),be&&w.call(this)),this},p.isAdvancedAPI=function(){return j===N.ADVANCED};var A,T=function(V){if(j!==N.ADVANCED)throw new Error(V+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},I=p.roundToPrecision=p.__private__.roundToPrecision=function(V,be){var $e=t||be;if(isNaN(V)||isNaN($e))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return V.toFixed($e).replace(/0+$/,"")};A=p.hpf=p.__private__.hpf=typeof c=="number"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return I(V,c)}:c==="smart"?function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return I(V,V>-1&&V<1?16:5)}:function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.hpf");return I(V,16)};var B=p.f2=p.__private__.f2=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f2");return I(V,2)},E=p.__private__.f3=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.f3");return I(V,3)},C=p.scale=p.__private__.scale=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.scale");return j===N.COMPAT?V*lt:j===N.ADVANCED?V:void 0},M=function(V){return j===N.COMPAT?Zi()-V:j===N.ADVANCED?V:void 0},q=function(V){return C(M(V))};p.__private__.setPrecision=p.setPrecision=function(V){typeof parseInt(V,10)=="number"&&(t=parseInt(V,10))};var G,Z="00000000000000000000000000000000",te=p.__private__.getFileId=function(){return Z},ne=p.__private__.setFileId=function(V){return Z=V!==void 0&&/^[a-fA-F0-9]{32}$/.test(V)?V.toUpperCase():Z.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),f!==null&&(xn=new Xh(f.userPermissions,f.userPassword,f.ownerPassword,Z)),Z};p.setFileId=function(V){return ne(V),this},p.getFileId=function(){return te()};var J=p.__private__.convertDateToPDFDate=function(V){var be=V.getTimezoneOffset(),$e=be<0?"+":"-",Ze=Math.floor(Math.abs(be/60)),ht=Math.abs(be%60),Pt=[$e,W(Ze),"'",W(ht),"'"].join("");return["D:",V.getFullYear(),W(V.getMonth()+1),W(V.getDate()),W(V.getHours()),W(V.getMinutes()),W(V.getSeconds()),Pt].join("")},ee=p.__private__.convertPDFDateToDate=function(V){var be=parseInt(V.substr(2,4),10),$e=parseInt(V.substr(6,2),10)-1,Ze=parseInt(V.substr(8,2),10),ht=parseInt(V.substr(10,2),10),Pt=parseInt(V.substr(12,2),10),Gt=parseInt(V.substr(14,2),10);return new Date(be,$e,Ze,ht,Pt,Gt,0)},H=p.__private__.setCreationDate=function(V){var be;if(V===void 0&&(V=new Date),V instanceof Date)be=J(V);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(V))throw new Error("Invalid argument passed to jsPDF.setCreationDate");be=V}return G=be},O=p.__private__.getCreationDate=function(V){var be=G;return V==="jsDate"&&(be=ee(G)),be};p.setCreationDate=function(V){return H(V),this},p.getCreationDate=function(V){return O(V)};var R,W=p.__private__.padd2=function(V){return("0"+parseInt(V)).slice(-2)},U=p.__private__.padd2Hex=function(V){return("00"+(V=V.toString())).substr(V.length)},K=0,oe=[],he=[],ie=0,ce=[],Le=[],le=!1,He=he,Fe=function(){K=0,ie=0,he=[],oe=[],ce=[],ye=Wt(),Ae=Wt()};p.__private__.setCustomOutputDestination=function(V){le=!0,He=V};var fe=function(V){le||(He=V)};p.__private__.resetCustomOutputDestination=function(){le=!1,He=he};var Q=p.__private__.out=function(V){return V=V.toString(),ie+=V.length+1,He.push(V),He},we=p.__private__.write=function(V){return Q(arguments.length===1?V.toString():Array.prototype.join.call(arguments," "))},ve=p.__private__.getArrayBuffer=function(V){for(var be=V.length,$e=new ArrayBuffer(be),Ze=new Uint8Array($e);be--;)Ze[be]=V.charCodeAt(be);return $e},Ee=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];p.__private__.getStandardFonts=function(){return Ee};var pe=e.fontSize||16;p.__private__.setFontSize=p.setFontSize=function(V){return pe=j===N.ADVANCED?V/lt:V,this};var ue,Pe=p.__private__.getFontSize=p.getFontSize=function(){return j===N.COMPAT?pe:pe*lt},Ne=e.R2L||!1;p.__private__.setR2L=p.setR2L=function(V){return Ne=V,this},p.__private__.getR2L=p.getR2L=function(){return Ne};var Be,nt=p.__private__.setZoomMode=function(V){var be=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(V))ue=V;else if(isNaN(V)){if(be.indexOf(V)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+V+'" is not recognized.');ue=V}else ue=parseInt(V,10)};p.__private__.getZoomMode=function(){return ue};var mt,kt=p.__private__.setPageMode=function(V){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(V)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+V+'" is not recognized.');Be=V};p.__private__.getPageMode=function(){return Be};var Re=p.__private__.setLayoutMode=function(V){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(V)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+V+'" is not recognized.');mt=V};p.__private__.getLayoutMode=function(){return mt},p.__private__.setDisplayMode=p.setDisplayMode=function(V,be,$e){return nt(V),Re(be),kt($e),this};var gt={title:"",subject:"",author:"",keywords:"",creator:""};p.__private__.getDocumentProperty=function(V){if(Object.keys(gt).indexOf(V)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return gt[V]},p.__private__.getDocumentProperties=function(){return gt},p.__private__.setDocumentProperties=p.setProperties=p.setDocumentProperties=function(V){for(var be in gt)gt.hasOwnProperty(be)&&V[be]&&(gt[be]=V[be]);return this},p.__private__.setDocumentProperty=function(V,be){if(Object.keys(gt).indexOf(V)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return gt[V]=be};var ut,lt,pr,tr,ft,$t={},er={},qe=[],bt={},Nr={},rr={},Lr={},Er=null,or=0,Ut=[],wr=new SI(p),kr=e.hotfixes||[],Gr={},hn={},On=[],br=function V(be,$e,Ze,ht,Pt,Gt){if(!(this instanceof V))return new V(be,$e,Ze,ht,Pt,Gt);isNaN(be)&&(be=1),isNaN($e)&&($e=0),isNaN(Ze)&&(Ze=0),isNaN(ht)&&(ht=1),isNaN(Pt)&&(Pt=0),isNaN(Gt)&&(Gt=0),this._matrix=[be,$e,Ze,ht,Pt,Gt]};Object.defineProperty(br.prototype,"sx",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(br.prototype,"shy",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(br.prototype,"shx",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(br.prototype,"sy",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(br.prototype,"tx",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(br.prototype,"ty",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(br.prototype,"a",{get:function(){return this._matrix[0]},set:function(V){this._matrix[0]=V}}),Object.defineProperty(br.prototype,"b",{get:function(){return this._matrix[1]},set:function(V){this._matrix[1]=V}}),Object.defineProperty(br.prototype,"c",{get:function(){return this._matrix[2]},set:function(V){this._matrix[2]=V}}),Object.defineProperty(br.prototype,"d",{get:function(){return this._matrix[3]},set:function(V){this._matrix[3]=V}}),Object.defineProperty(br.prototype,"e",{get:function(){return this._matrix[4]},set:function(V){this._matrix[4]=V}}),Object.defineProperty(br.prototype,"f",{get:function(){return this._matrix[5]},set:function(V){this._matrix[5]=V}}),Object.defineProperty(br.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(br.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(br.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(br.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),br.prototype.join=function(V){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(A).join(V)},br.prototype.multiply=function(V){var be=V.sx*this.sx+V.shy*this.shx,$e=V.sx*this.shy+V.shy*this.sy,Ze=V.shx*this.sx+V.sy*this.shx,ht=V.shx*this.shy+V.sy*this.sy,Pt=V.tx*this.sx+V.ty*this.shx+this.tx,Gt=V.tx*this.shy+V.ty*this.sy+this.ty;return new br(be,$e,Ze,ht,Pt,Gt)},br.prototype.decompose=function(){var V=this.sx,be=this.shy,$e=this.shx,Ze=this.sy,ht=this.tx,Pt=this.ty,Gt=Math.sqrt(V*V+be*be),yr=(V/=Gt)*$e+(be/=Gt)*Ze;$e-=V*yr,Ze-=be*yr;var Mr=Math.sqrt($e*$e+Ze*Ze);return yr/=Mr,V*(Ze/=Mr)<be*($e/=Mr)&&(V=-V,be=-be,yr=-yr,Gt=-Gt),{scale:new br(Gt,0,0,Mr,0,0),translate:new br(1,0,0,1,ht,Pt),rotate:new br(V,be,-be,V,0,0),skew:new br(1,0,yr,1,0,0)}},br.prototype.toString=function(V){return this.join(" ")},br.prototype.inversed=function(){var V=this.sx,be=this.shy,$e=this.shx,Ze=this.sy,ht=this.tx,Pt=this.ty,Gt=1/(V*Ze-be*$e),yr=Ze*Gt,Mr=-be*Gt,Xr=-$e*Gt,Qr=V*Gt;return new br(yr,Mr,Xr,Qr,-yr*ht-Xr*Pt,-Mr*ht-Qr*Pt)},br.prototype.applyToPoint=function(V){var be=V.x*this.sx+V.y*this.shx+this.tx,$e=V.x*this.shy+V.y*this.sy+this.ty;return new Go(be,$e)},br.prototype.applyToRectangle=function(V){var be=this.applyToPoint(V),$e=this.applyToPoint(new Go(V.x+V.w,V.y+V.h));return new Ko(be.x,be.y,$e.x-be.x,$e.y-be.y)},br.prototype.clone=function(){var V=this.sx,be=this.shy,$e=this.shx,Ze=this.sy,ht=this.tx,Pt=this.ty;return new br(V,be,$e,Ze,ht,Pt)},p.Matrix=br;var Yn=p.matrixMult=function(V,be){return be.multiply(V)},on=new br(1,0,0,1,0,0);p.unitMatrix=p.identityMatrix=on;var Xe=function(V,be){if(!Nr[V]){var $e=(be instanceof F0?"Sh":"P")+(Object.keys(bt).length+1).toString(10);be.id=$e,Nr[V]=$e,bt[$e]=be,wr.publish("addPattern",be)}};p.ShadingPattern=F0,p.TilingPattern=tp,p.addShadingPattern=function(V,be){return T("addShadingPattern()"),Xe(V,be),this},p.beginTilingPattern=function(V){T("beginTilingPattern()"),Ka(V.boundingBox[0],V.boundingBox[1],V.boundingBox[2]-V.boundingBox[0],V.boundingBox[3]-V.boundingBox[1],V.matrix)},p.endTilingPattern=function(V,be){T("endTilingPattern()"),be.stream=Le[R].join(`
`),Xe(V,be),wr.publish("endTilingPattern",be),On.pop().restore()};var wt=p.__private__.newObject=function(){var V=Wt();return re(V,!0),V},Wt=p.__private__.newObjectDeferred=function(){return K++,oe[K]=function(){return ie},K},re=function(V,be){return be=typeof be=="boolean"&&be,oe[V]=ie,be&&Q(V+" 0 obj"),V},me=p.__private__.newAdditionalObject=function(){var V={objId:Wt(),content:""};return ce.push(V),V},ye=Wt(),Ae=Wt(),Ce=p.__private__.decodeColorString=function(V){var be=V.split(" ");if(be.length!==2||be[1]!=="g"&&be[1]!=="G")be.length===5&&(be[4]==="k"||be[4]==="K")&&(be=[(1-be[0])*(1-be[3]),(1-be[1])*(1-be[3]),(1-be[2])*(1-be[3]),"r"]);else{var $e=parseFloat(be[0]);be=[$e,$e,$e,"r"]}for(var Ze="#",ht=0;ht<3;ht++)Ze+=("0"+Math.floor(255*parseFloat(be[ht])).toString(16)).slice(-2);return Ze},Oe=p.__private__.encodeColorString=function(V){var be;typeof V=="string"&&(V={ch1:V});var $e=V.ch1,Ze=V.ch2,ht=V.ch3,Pt=V.ch4,Gt=V.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof $e=="string"&&$e.charAt(0)!=="#"){var yr=new y9($e);if(yr.ok)$e=yr.toHex();else if(!/^\d*\.?\d*$/.test($e))throw new Error('Invalid color "'+$e+'" passed to jsPDF.encodeColorString.')}if(typeof $e=="string"&&/^#[0-9A-Fa-f]{3}$/.test($e)&&($e="#"+$e[1]+$e[1]+$e[2]+$e[2]+$e[3]+$e[3]),typeof $e=="string"&&/^#[0-9A-Fa-f]{6}$/.test($e)){var Mr=parseInt($e.substr(1),16);$e=Mr>>16&255,Ze=Mr>>8&255,ht=255&Mr}if(Ze===void 0||Pt===void 0&&$e===Ze&&Ze===ht)typeof $e=="string"?be=$e+" "+Gt[0]:V.precision===2?be=B($e/255)+" "+Gt[0]:be=E($e/255)+" "+Gt[0];else if(Pt===void 0||_a(Pt)==="object"){if(Pt&&!isNaN(Pt.a)&&Pt.a===0)return be=["1.","1.","1.",Gt[1]].join(" ");if(typeof $e=="string")be=[$e,Ze,ht,Gt[1]].join(" ");else switch(V.precision){case 2:be=[B($e/255),B(Ze/255),B(ht/255),Gt[1]].join(" ");break;default:case 3:be=[E($e/255),E(Ze/255),E(ht/255),Gt[1]].join(" ")}}else typeof $e=="string"?be=[$e,Ze,ht,Pt,Gt[2]].join(" "):V.precision===2?be=[B($e),B(Ze),B(ht),B(Pt),Gt[2]].join(" "):be=[E($e),E(Ze),E(ht),E(Pt),Gt[2]].join(" ");return be},Ke=p.__private__.getFilters=function(){return o},ct=p.__private__.putStream=function(V){var be=(V=V||{}).data||"",$e=V.filters||Ke(),Ze=V.alreadyAppliedFilters||[],ht=V.addLength1||!1,Pt=be.length,Gt=V.objectId,yr=function(qs){return qs};if(f!==null&&Gt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(yr=xn.encryptor(Gt,0));var Mr={};$e===!0&&($e=["FlateEncode"]);var Xr=V.additionalKeyValues||[],Qr=(Mr=Zr.API.processDataByFilters!==void 0?Zr.API.processDataByFilters(be,$e):{data:be,reverseChain:[]}).reverseChain+(Array.isArray(Ze)?Ze.join(" "):Ze.toString());if(Mr.data.length!==0&&(Xr.push({key:"Length",value:Mr.data.length}),ht===!0&&Xr.push({key:"Length1",value:Pt})),Qr.length!=0)if(Qr.split("/").length-1==1)Xr.push({key:"Filter",value:Qr});else{Xr.push({key:"Filter",value:"["+Qr+"]"});for(var un=0;un<Xr.length;un+=1)if(Xr[un].key==="DecodeParms"){for(var Ta=[],$a=0;$a<Mr.reverseChain.split("/").length-1;$a+=1)Ta.push("null");Ta.push(Xr[un].value),Xr[un].value="["+Ta.join(" ")+"]"}}Q("<<");for(var Xa=0;Xa<Xr.length;Xa++)Q("/"+Xr[Xa].key+" "+Xr[Xa].value);Q(">>"),Mr.data.length!==0&&(Q("stream"),Q(yr(Mr.data)),Q("endstream"))},Ge=p.__private__.putPage=function(V){var be=V.number,$e=V.data,Ze=V.objId,ht=V.contentsObjId;re(Ze,!0),Q("<</Type /Page"),Q("/Parent "+V.rootDictionaryObjId+" 0 R"),Q("/Resources "+V.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(A(V.mediaBox.bottomLeftX))+" "+parseFloat(A(V.mediaBox.bottomLeftY))+" "+A(V.mediaBox.topRightX)+" "+A(V.mediaBox.topRightY)+"]"),V.cropBox!==null&&Q("/CropBox ["+A(V.cropBox.bottomLeftX)+" "+A(V.cropBox.bottomLeftY)+" "+A(V.cropBox.topRightX)+" "+A(V.cropBox.topRightY)+"]"),V.bleedBox!==null&&Q("/BleedBox ["+A(V.bleedBox.bottomLeftX)+" "+A(V.bleedBox.bottomLeftY)+" "+A(V.bleedBox.topRightX)+" "+A(V.bleedBox.topRightY)+"]"),V.trimBox!==null&&Q("/TrimBox ["+A(V.trimBox.bottomLeftX)+" "+A(V.trimBox.bottomLeftY)+" "+A(V.trimBox.topRightX)+" "+A(V.trimBox.topRightY)+"]"),V.artBox!==null&&Q("/ArtBox ["+A(V.artBox.bottomLeftX)+" "+A(V.artBox.bottomLeftY)+" "+A(V.artBox.topRightX)+" "+A(V.artBox.topRightY)+"]"),typeof V.userUnit=="number"&&V.userUnit!==1&&Q("/UserUnit "+V.userUnit),wr.publish("putPage",{objId:Ze,pageContext:Ut[be],pageNumber:be,page:$e}),Q("/Contents "+ht+" 0 R"),Q(">>"),Q("endobj");var Pt=$e.join(`
`);return j===N.ADVANCED&&(Pt+=`
Q`),re(ht,!0),ct({data:Pt,filters:Ke(),objectId:ht}),Q("endobj"),Ze},Je=p.__private__.putPages=function(){var V,be,$e=[];for(V=1;V<=or;V++)Ut[V].objId=Wt(),Ut[V].contentsObjId=Wt();for(V=1;V<=or;V++)$e.push(Ge({number:V,data:Le[V],objId:Ut[V].objId,contentsObjId:Ut[V].contentsObjId,mediaBox:Ut[V].mediaBox,cropBox:Ut[V].cropBox,bleedBox:Ut[V].bleedBox,trimBox:Ut[V].trimBox,artBox:Ut[V].artBox,userUnit:Ut[V].userUnit,rootDictionaryObjId:ye,resourceDictionaryObjId:Ae}));re(ye,!0),Q("<</Type /Pages");var Ze="/Kids [";for(be=0;be<or;be++)Ze+=$e[be]+" 0 R ";Q(Ze+"]"),Q("/Count "+or),Q(">>"),Q("endobj"),wr.publish("postPutPages")},ze=function(V){wr.publish("putFont",{font:V,out:Q,newObject:wt,putStream:ct}),V.isAlreadyPutted!==!0&&(V.objectNumber=wt(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+Yh(V.postScriptName)),Q("/Subtype /Type1"),typeof V.encoding=="string"&&Q("/Encoding /"+V.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},De=function(){for(var V in $t)$t.hasOwnProperty(V)&&(d===!1||d===!0&&m.hasOwnProperty(V))&&ze($t[V])},tt=function(V){V.objectNumber=wt();var be=[];be.push({key:"Type",value:"/XObject"}),be.push({key:"Subtype",value:"/Form"}),be.push({key:"BBox",value:"["+[A(V.x),A(V.y),A(V.x+V.width),A(V.y+V.height)].join(" ")+"]"}),be.push({key:"Matrix",value:"["+V.matrix.toString()+"]"});var $e=V.pages[1].join(`
`);ct({data:$e,additionalKeyValues:be,objectId:V.objectNumber}),Q("endobj")},pt=function(){for(var V in Gr)Gr.hasOwnProperty(V)&&tt(Gr[V])},It=function(V,be){var $e,Ze=[],ht=1/(be-1);for($e=0;$e<1;$e+=ht)Ze.push($e);if(Ze.push(1),V[0].offset!=0){var Pt={offset:0,color:V[0].color};V.unshift(Pt)}if(V[V.length-1].offset!=1){var Gt={offset:1,color:V[V.length-1].color};V.push(Gt)}for(var yr="",Mr=0,Xr=0;Xr<Ze.length;Xr++){for($e=Ze[Xr];$e>V[Mr+1].offset;)Mr++;var Qr=V[Mr].offset,un=($e-Qr)/(V[Mr+1].offset-Qr),Ta=V[Mr].color,$a=V[Mr+1].color;yr+=U(Math.round((1-un)*Ta[0]+un*$a[0]).toString(16))+U(Math.round((1-un)*Ta[1]+un*$a[1]).toString(16))+U(Math.round((1-un)*Ta[2]+un*$a[2]).toString(16))}return yr.trim()},Mt=function(V,be){be||(be=21);var $e=wt(),Ze=It(V.colors,be),ht=[];ht.push({key:"FunctionType",value:"0"}),ht.push({key:"Domain",value:"[0.0 1.0]"}),ht.push({key:"Size",value:"["+be+"]"}),ht.push({key:"BitsPerSample",value:"8"}),ht.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ht.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ct({data:Ze,additionalKeyValues:ht,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:$e}),Q("endobj"),V.objectNumber=wt(),Q("<< /ShadingType "+V.type),Q("/ColorSpace /DeviceRGB");var Pt="/Coords ["+A(parseFloat(V.coords[0]))+" "+A(parseFloat(V.coords[1]))+" ";V.type===2?Pt+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3])):Pt+=A(parseFloat(V.coords[2]))+" "+A(parseFloat(V.coords[3]))+" "+A(parseFloat(V.coords[4]))+" "+A(parseFloat(V.coords[5])),Q(Pt+="]"),V.matrix&&Q("/Matrix ["+V.matrix.toString()+"]"),Q("/Function "+$e+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},vr=function(V,be){var $e=Wt(),Ze=wt();be.push({resourcesOid:$e,objectOid:Ze}),V.objectNumber=Ze;var ht=[];ht.push({key:"Type",value:"/Pattern"}),ht.push({key:"PatternType",value:"1"}),ht.push({key:"PaintType",value:"1"}),ht.push({key:"TilingType",value:"1"}),ht.push({key:"BBox",value:"["+V.boundingBox.map(A).join(" ")+"]"}),ht.push({key:"XStep",value:A(V.xStep)}),ht.push({key:"YStep",value:A(V.yStep)}),ht.push({key:"Resources",value:$e+" 0 R"}),V.matrix&&ht.push({key:"Matrix",value:"["+V.matrix.toString()+"]"}),ct({data:V.stream,additionalKeyValues:ht,objectId:V.objectNumber}),Q("endobj")},Ur=function(V){var be;for(be in bt)bt.hasOwnProperty(be)&&(bt[be]instanceof F0?Mt(bt[be]):bt[be]instanceof tp&&vr(bt[be],V))},sn=function(V){for(var be in V.objectNumber=wt(),Q("<<"),V)switch(be){case"opacity":Q("/ca "+B(V[be]));break;case"stroke-opacity":Q("/CA "+B(V[be]))}Q(">>"),Q("endobj")},En=function(){var V;for(V in rr)rr.hasOwnProperty(V)&&sn(rr[V])},ls=function(){for(var V in Q("/XObject <<"),Gr)Gr.hasOwnProperty(V)&&Gr[V].objectNumber>=0&&Q("/"+V+" "+Gr[V].objectNumber+" 0 R");wr.publish("putXobjectDict"),Q(">>")},vn=function(){xn.oid=wt(),Q("<<"),Q("/Filter /Standard"),Q("/V "+xn.v),Q("/R "+xn.r),Q("/U <"+xn.toHexString(xn.U)+">"),Q("/O <"+xn.toHexString(xn.O)+">"),Q("/P "+xn.P),Q(">>"),Q("endobj")},xa=function(){for(var V in Q("/Font <<"),$t)$t.hasOwnProperty(V)&&(d===!1||d===!0&&m.hasOwnProperty(V))&&Q("/"+V+" "+$t[V].objectNumber+" 0 R");Q(">>")},Fn=function(){if(Object.keys(bt).length>0){for(var V in Q("/Shading <<"),bt)bt.hasOwnProperty(V)&&bt[V]instanceof F0&&bt[V].objectNumber>=0&&Q("/"+V+" "+bt[V].objectNumber+" 0 R");wr.publish("putShadingPatternDict"),Q(">>")}},ga=function(V){if(Object.keys(bt).length>0){for(var be in Q("/Pattern <<"),bt)bt.hasOwnProperty(be)&&bt[be]instanceof p.TilingPattern&&bt[be].objectNumber>=0&&bt[be].objectNumber<V&&Q("/"+be+" "+bt[be].objectNumber+" 0 R");wr.publish("putTilingPatternDict"),Q(">>")}},ca=function(){if(Object.keys(rr).length>0){var V;for(V in Q("/ExtGState <<"),rr)rr.hasOwnProperty(V)&&rr[V].objectNumber>=0&&Q("/"+V+" "+rr[V].objectNumber+" 0 R");wr.publish("putGStateDict"),Q(">>")}},da=function(V){re(V.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),xa(),Fn(),ga(V.objectOid),ca(),ls(),Q(">>"),Q("endobj")},Us=function(){var V=[];De(),En(),pt(),Ur(V),wr.publish("putResources"),V.forEach(da),da({resourcesOid:Ae,objectOid:Number.MAX_SAFE_INTEGER}),wr.publish("postPutResources")},va=function(){wr.publish("putAdditionalObjects");for(var V=0;V<ce.length;V++){var be=ce[V];re(be.objId,!0),Q(be.content),Q("endobj")}wr.publish("postPutAdditionalObjects")},Ue=function(V){er[V.fontName]=er[V.fontName]||{},er[V.fontName][V.fontStyle]=V.id},Dt=function(V,be,$e,Ze,ht){var Pt={id:"F"+(Object.keys($t).length+1).toString(10),postScriptName:V,fontName:be,fontStyle:$e,encoding:Ze,isStandardFont:ht||!1,metadata:{}};return wr.publish("addFont",{font:Pt,instance:this}),$t[Pt.id]=Pt,Ue(Pt),Pt.id},Ct=function(V){for(var be=0,$e=Ee.length;be<$e;be++){var Ze=Dt.call(this,V[be][0],V[be][1],V[be][2],Ee[be][3],!0);d===!1&&(m[Ze]=!0);var ht=V[be][0].split("-");Ue({id:Ze,fontName:ht[0],fontStyle:ht[1]||""})}wr.publish("addFonts",{fonts:$t,dictionary:er})},sr=function(V){return V.foo=function(){try{return V.apply(this,arguments)}catch(Ze){var be=Ze.stack||"";~be.indexOf(" at ")&&(be=be.split(" at ")[1]);var $e="Error in function "+be.split(`
`)[0].split("<")[0]+": "+Ze.message;if(!en.console)throw new Error($e);en.console.error($e,Ze),en.alert&&alert($e)}},V.foo.bar=V,V.foo},jr=function(V,be){var $e,Ze,ht,Pt,Gt,yr,Mr,Xr,Qr;if(ht=(be=be||{}).sourceEncoding||"Unicode",Gt=be.outputEncoding,(be.autoencode||Gt)&&$t[ut].metadata&&$t[ut].metadata[ht]&&$t[ut].metadata[ht].encoding&&(Pt=$t[ut].metadata[ht].encoding,!Gt&&$t[ut].encoding&&(Gt=$t[ut].encoding),!Gt&&Pt.codePages&&(Gt=Pt.codePages[0]),typeof Gt=="string"&&(Gt=Pt[Gt]),Gt)){for(Mr=!1,yr=[],$e=0,Ze=V.length;$e<Ze;$e++)(Xr=Gt[V.charCodeAt($e)])?yr.push(String.fromCharCode(Xr)):yr.push(V[$e]),yr[$e].charCodeAt(0)>>8&&(Mr=!0);V=yr.join("")}for($e=V.length;Mr===void 0&&$e!==0;)V.charCodeAt($e-1)>>8&&(Mr=!0),$e--;if(!Mr)return V;for(yr=be.noBOM?[]:[254,255],$e=0,Ze=V.length;$e<Ze;$e++){if((Qr=(Xr=V.charCodeAt($e))>>8)>>8)throw new Error("Character at position "+$e+" of string '"+V+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");yr.push(Qr),yr.push(Xr-(Qr<<8))}return String.fromCharCode.apply(void 0,yr)},xr=p.__private__.pdfEscape=p.pdfEscape=function(V,be){return jr(V,be).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cr=p.__private__.beginPage=function(V){Le[++or]=[],Ut[or]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(V[0]),topRightY:Number(V[1])}},nr(or),fe(Le[R])},kn=function(V,be){var $e,Ze,ht;switch(r=be||r,typeof V=="string"&&($e=b(V.toLowerCase()),Array.isArray($e)&&(Ze=$e[0],ht=$e[1])),Array.isArray(V)&&(Ze=V[0]*lt,ht=V[1]*lt),isNaN(Ze)&&(Ze=s[0],ht=s[1]),(Ze>14400||ht>14400)&&(Ua.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ze=Math.min(14400,Ze),ht=Math.min(14400,ht)),s=[Ze,ht],r.substr(0,1)){case"l":ht>Ze&&(s=[ht,Ze]);break;case"p":Ze>ht&&(s=[ht,Ze])}Cr(s),Kl(Id),Q(fs),El!==0&&Q(El+" J"),Vo!==0&&Q(Vo+" j"),wr.publish("addPage",{pageNumber:or})},Pn=function(V){V>0&&V<=or&&(Le.splice(V,1),Ut.splice(V,1),or--,R>or&&(R=or),this.setPage(R))},nr=function(V){V>0&&V<=or&&(R=V)},ir=p.__private__.getNumberOfPages=p.getNumberOfPages=function(){return Le.length-1},Et=function(V,be,$e){var Ze,ht=void 0;return $e=$e||{},V=V!==void 0?V:$t[ut].fontName,be=be!==void 0?be:$t[ut].fontStyle,Ze=V.toLowerCase(),er[Ze]!==void 0&&er[Ze][be]!==void 0?ht=er[Ze][be]:er[V]!==void 0&&er[V][be]!==void 0?ht=er[V][be]:$e.disableWarning===!1&&Ua.warn("Unable to look up font label for font '"+V+"', '"+be+"'. Refer to getFontList() for available fonts."),ht||$e.noFallback||(ht=er.times[be])==null&&(ht=er.times.normal),ht},Sr=p.__private__.putInfo=function(){var V=wt(),be=function(Ze){return Ze};for(var $e in f!==null&&(be=xn.encryptor(V,0)),Q("<<"),Q("/Producer ("+xr(be("jsPDF "+Zr.version))+")"),gt)gt.hasOwnProperty($e)&&gt[$e]&&Q("/"+$e.substr(0,1).toUpperCase()+$e.substr(1)+" ("+xr(be(gt[$e]))+")");Q("/CreationDate ("+xr(be(G))+")"),Q(">>"),Q("endobj")},Ht=p.__private__.putCatalog=function(V){var be=(V=V||{}).rootDictionaryObjId||ye;switch(wt(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+be+" 0 R"),ue||(ue="fullwidth"),ue){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var $e=""+ue;$e.substr($e.length-1)==="%"&&(ue=parseInt(ue)/100),typeof ue=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+B(ue)+"]")}switch(mt||(mt="continuous"),mt){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}Be&&Q("/PageMode /"+Be),wr.publish("putCatalog"),Q(">>"),Q("endobj")},Un=p.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(K+1)),Q("/Root "+K+" 0 R"),Q("/Info "+(K-1)+" 0 R"),f!==null&&Q("/Encrypt "+xn.oid+" 0 R"),Q("/ID [ <"+Z+"> <"+Z+"> ]"),Q(">>")},Ca=p.__private__.putHeader=function(){Q("%PDF-"+y),Q("%")},pn=p.__private__.putXRef=function(){var V="0000000000";Q("xref"),Q("0 "+(K+1)),Q("0000000000 65535 f ");for(var be=1;be<=K;be++)typeof oe[be]=="function"?Q((V+oe[be]()).slice(-10)+" 00000 n "):oe[be]!==void 0?Q((V+oe[be]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},Zt=p.__private__.buildDocument=function(){Fe(),fe(he),wr.publish("buildDocument"),Ca(),Je(),va(),Us(),f!==null&&vn(),Sr(),Ht();var V=ie;return pn(),Un(),Q("startxref"),Q(""+V),Q("%%EOF"),fe(Le[R]),he.join(`
`)},zn=p.__private__.getBlob=function(V){return new Blob([ve(V)],{type:"application/pdf"})},ya=p.output=p.__private__.output=sr((function(V,be){switch(typeof(be=be||{})=="string"?be={filename:be}:be.filename=be.filename||"generated.pdf",V){case void 0:return Zt();case"save":p.save(be.filename);break;case"arraybuffer":return ve(Zt());case"blob":return zn(Zt());case"bloburi":case"bloburl":if(en.URL!==void 0&&typeof en.URL.createObjectURL=="function")return en.URL&&en.URL.createObjectURL(zn(Zt()))||void 0;Ua.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var $e="",Ze=Zt();try{$e=vk(Ze)}catch{$e=vk(unescape(encodeURIComponent(Ze)))}return"data:application/pdf;filename="+be.filename+";base64,"+$e;case"pdfobjectnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var ht="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Pt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';be.pdfObjectUrl&&(ht=be.pdfObjectUrl,Pt="");var Gt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ht+'"'+Pt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(be)+");<\/script></body></html>",yr=en.open();return yr!==null&&yr.document.write(Gt),yr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(en)==="[object Window]"){var Mr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(be.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+be.filename+'" width="500px" height="400px" /></body></html>',Xr=en.open();if(Xr!==null){Xr.document.write(Mr);var Qr=this;Xr.document.documentElement.querySelector("#pdfViewer").onload=function(){Xr.document.title=be.filename,Xr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Qr.output("bloburl"))}}return Xr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(en)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var un='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",be)+'"></iframe></body></html>',Ta=en.open();if(Ta!==null&&(Ta.document.write(un),Ta.document.title=be.filename),Ta||typeof safari>"u")return Ta;break;case"datauri":case"dataurl":return en.document.location.href=this.output("datauristring",be);default:return null}})),ln=function(V){return Array.isArray(kr)===!0&&kr.indexOf(V)>-1};switch(n){case"pt":lt=1;break;case"mm":lt=72/25.4;break;case"cm":lt=72/2.54;break;case"in":lt=72;break;case"px":lt=ln("px_scaling")==1?.75:96/72;break;case"pc":case"em":lt=12;break;case"ex":lt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);lt=n}var xn=null;H(),ne();var $r=function(V){return f!==null?xn.encryptor(V,0):function(be){return be}},Kr=p.__private__.getPageInfo=p.getPageInfo=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Ut[V].objId,pageNumber:V,pageContext:Ut[V]}},_e=p.__private__.getPageInfoByObjId=function(V){if(isNaN(V)||V%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var be in Ut)if(Ut[be].objId===V)break;return Kr(be)},Yt=p.__private__.getCurrentPageInfo=p.getCurrentPageInfo=function(){return{objId:Ut[R].objId,pageNumber:R,pageContext:Ut[R]}};p.addPage=function(){return kn.apply(this,arguments),this},p.setPage=function(){return nr.apply(this,arguments),fe.call(this,Le[R]),this},p.insertPage=function(V){return this.addPage(),this.movePage(R,V),this},p.movePage=function(V,be){var $e,Ze;if(V>be){$e=Le[V],Ze=Ut[V];for(var ht=V;ht>be;ht--)Le[ht]=Le[ht-1],Ut[ht]=Ut[ht-1];Le[be]=$e,Ut[be]=Ze,this.setPage(be)}else if(V<be){$e=Le[V],Ze=Ut[V];for(var Pt=V;Pt<be;Pt++)Le[Pt]=Le[Pt+1],Ut[Pt]=Ut[Pt+1];Le[be]=$e,Ut[be]=Ze,this.setPage(be)}return this},p.deletePage=function(){return Pn.apply(this,arguments),this},p.__private__.text=p.text=function(V,be,$e,Ze,ht){var Pt,Gt,yr,Mr,Xr,Qr,un,Ta,$a,Xa=(Ze=Ze||{}).scope||this;if(typeof V=="number"&&typeof be=="number"&&(typeof $e=="string"||Array.isArray($e))){var qs=$e;$e=be,be=V,V=qs}if(arguments[3]instanceof br?(T("The transform parameter of text() with a Matrix value"),$a=ht):(yr=arguments[4],Mr=arguments[5],_a(un=arguments[3])==="object"&&un!==null||(typeof yr=="string"&&(Mr=yr,yr=null),typeof un=="string"&&(Mr=un,un=null),typeof un=="number"&&(yr=un,un=null),Ze={flags:un,angle:yr,align:Mr})),isNaN(be)||isNaN($e)||V==null)throw new Error("Invalid arguments passed to jsPDF.text");if(V.length===0)return Xa;var ps="",Xo=!1,ni=typeof Ze.lineHeightFactor=="number"?Ze.lineHeightFactor:jc,ms=Xa.internal.scaleFactor;function eo(Wn){return Wn=Wn.split("	").join(Array(Ze.TabLen||9).join(" ")),xr(Wn,un)}function Ya(Wn){for(var Kn,fa=Wn.concat(),Qa=[],tl=fa.length;tl--;)typeof(Kn=fa.shift())=="string"?Qa.push(Kn):Array.isArray(Wn)&&(Kn.length===1||Kn[1]===void 0&&Kn[2]===void 0)?Qa.push(Kn[0]):Qa.push([Kn[0],Kn[1],Kn[2]]);return Qa}function Ec(Wn,Kn){var fa;if(typeof Wn=="string")fa=Kn(Wn)[0];else if(Array.isArray(Wn)){for(var Qa,tl,Gu=Wn.concat(),Tc=[],Fd=Gu.length;Fd--;)typeof(Qa=Gu.shift())=="string"?Tc.push(Kn(Qa)[0]):Array.isArray(Qa)&&typeof Qa[0]=="string"&&(tl=Kn(Qa[0],Qa[1],Qa[2]),Tc.push([tl[0],tl[1],tl[2]]));fa=Tc}return fa}var yn=!1,cs=!0;if(typeof V=="string")yn=!0;else if(Array.isArray(V)){var Oa=V.concat();Gt=[];for(var xs,dn=Oa.length;dn--;)(typeof(xs=Oa.shift())!="string"||Array.isArray(xs)&&typeof xs[0]!="string")&&(cs=!1);yn=cs}if(yn===!1)throw new Error('Type of text must be string or Array. "'+V+'" is not recognized.');typeof V=="string"&&(V=V.match(/[\r?\n]/)?V.split(/\r\n|\r|\n/g):[V]);var Ts=pe/Xa.internal.scaleFactor,Pa=Ts*(ni-1);switch(Ze.baseline){case"bottom":$e-=Pa;break;case"top":$e+=Ts-Pa;break;case"hanging":$e+=Ts-2*Pa;break;case"middle":$e+=Ts/2-Pa}if((Qr=Ze.maxWidth||0)>0&&(typeof V=="string"?V=Xa.splitTextToSize(V,Qr):Object.prototype.toString.call(V)==="[object Array]"&&(V=V.reduce((function(Wn,Kn){return Wn.concat(Xa.splitTextToSize(Kn,Qr))}),[]))),Pt={text:V,x:be,y:$e,options:Ze,mutex:{pdfEscape:xr,activeFontKey:ut,fonts:$t,activeFontSize:pe}},wr.publish("preProcessText",Pt),V=Pt.text,yr=(Ze=Pt.options).angle,!($a instanceof br)&&yr&&typeof yr=="number"){yr*=Math.PI/180,Ze.rotationDirection===0&&(yr=-yr),j===N.ADVANCED&&(yr=-yr);var Fi=Math.cos(yr),gs=Math.sin(yr);$a=new br(Fi,gs,-gs,Fi,0,0)}else yr&&yr instanceof br&&($a=yr);j!==N.ADVANCED||$a||($a=on),(Xr=Ze.charSpace||_c)!==void 0&&(ps+=A(C(Xr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ta=Ze.horizontalScale)!==void 0&&(ps+=A(100*Ta)+` Tz
`),Ze.lang;var ua=-1,vs=Ze.renderingMode!==void 0?Ze.renderingMode:Ze.stroke,Mi=Xa.internal.getCurrentPageInfo().pageContext;switch(vs){case 0:case!1:case"fill":ua=0;break;case 1:case!0:case"stroke":ua=1;break;case 2:case"fillThenStroke":ua=2;break;case 3:case"invisible":ua=3;break;case 4:case"fillAndAddForClipping":ua=4;break;case 5:case"strokeAndAddPathForClipping":ua=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ua=6;break;case 7:case"addToPathForClipping":ua=7}var Tl=Mi.usedRenderingMode!==void 0?Mi.usedRenderingMode:-1;ua!==-1?ps+=ua+` Tr
`:Tl!==-1&&(ps+=`0 Tr
`),ua!==-1&&(Mi.usedRenderingMode=ua),Mr=Ze.align||"left";var ai,Xl=pe*ni,Dd=Xa.internal.pageSize.getWidth(),Cc=$t[ut];Xr=Ze.charSpace||_c,Qr=Ze.maxWidth||0,un=Object.assign({autoencode:!0,noBOM:!0},Ze.flags);var Ol=[],Yl=function(Wn){return Xa.getStringUnitWidth(Wn,{font:Cc,charSpace:Xr,fontSize:pe,doKerning:!1})*pe/ms};if(Object.prototype.toString.call(V)==="[object Array]"){var si;Gt=Ya(V),Mr!=="left"&&(ai=Gt.map(Yl));var Os,Yo=0;if(Mr==="right"){be-=ai[0],V=[],dn=Gt.length;for(var Jo=0;Jo<dn;Jo++)Jo===0?(Os=bi(be),si=Qi($e)):(Os=C(Yo-ai[Jo]),si=-Xl),V.push([Gt[Jo],Os,si]),Yo=ai[Jo]}else if(Mr==="center"){be-=ai[0]/2,V=[],dn=Gt.length;for(var go=0;go<dn;go++)go===0?(Os=bi(be),si=Qi($e)):(Os=C((Yo-ai[go])/2),si=-Xl),V.push([Gt[go],Os,si]),Yo=ai[go]}else if(Mr==="left"){V=[],dn=Gt.length;for(var Qo=0;Qo<dn;Qo++)V.push(Gt[Qo])}else if(Mr==="justify"&&Cc.encoding==="Identity-H"){V=[],dn=Gt.length,Qr=Qr!==0?Qr:Dd;for(var ii=0,Sn=0;Sn<dn;Sn++)if(si=Sn===0?Qi($e):-Xl,Os=Sn===0?bi(be):ii,Sn<dn-1){var Ri=C((Qr-ai[Sn])/(Gt[Sn].split(" ").length-1)),Ja=Gt[Sn].split(" ");V.push([Ja[0]+" ",Os,si]),ii=0;for(var Ps=1;Ps<Ja.length;Ps++){var Zo=(Yl(Ja[Ps-1]+" "+Ja[Ps])-Yl(Ja[Ps]))*ms+Ri;Ps==Ja.length-1?V.push([Ja[Ps],Zo,0]):V.push([Ja[Ps]+" ",Zo,0]),ii-=Zo}}else V.push([Gt[Sn],Os,si]);V.push(["",ii,0])}else{if(Mr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(V=[],dn=Gt.length,Qr=Qr!==0?Qr:Dd,Sn=0;Sn<dn;Sn++)si=Sn===0?Qi($e):-Xl,Os=Sn===0?bi(be):0,Sn<dn-1?Ol.push(A(C((Qr-ai[Sn])/(Gt[Sn].split(" ").length-1)))):Ol.push(0),V.push([Gt[Sn],Os,si])}}var Ld=typeof Ze.R2L=="boolean"?Ze.R2L:Ne;Ld===!0&&(V=Ec(V,(function(Wn,Kn,fa){return[Wn.split("").reverse().join(""),Kn,fa]}))),Pt={text:V,x:be,y:$e,options:Ze,mutex:{pdfEscape:xr,activeFontKey:ut,fonts:$t,activeFontSize:pe}},wr.publish("postProcessText",Pt),V=Pt.text,Xo=Pt.mutex.isHex||!1;var Pl=$t[ut].encoding;Pl!=="WinAnsiEncoding"&&Pl!=="StandardEncoding"||(V=Ec(V,(function(Wn,Kn,fa){return[eo(Wn),Kn,fa]}))),Gt=Ya(V),V=[];for(var to,Jl,Bi,Ia=0,wi=1,el=Array.isArray(Gt[0])?wi:Ia,Ql="",ro=function(Wn,Kn,fa){var Qa="";return fa instanceof br?(fa=typeof Ze.angle=="number"?Yn(fa,new br(1,0,0,1,Wn,Kn)):Yn(new br(1,0,0,1,Wn,Kn),fa),j===N.ADVANCED&&(fa=Yn(new br(1,0,0,-1,0,0),fa)),Qa=fa.join(" ")+` Tm
`):Qa=A(Wn)+" "+A(Kn)+` Td
`,Qa},ys=0;ys<Gt.length;ys++){switch(Ql="",el){case wi:Bi=(Xo?"<":"(")+Gt[ys][0]+(Xo?">":")"),to=parseFloat(Gt[ys][1]),Jl=parseFloat(Gt[ys][2]);break;case Ia:Bi=(Xo?"<":"(")+Gt[ys]+(Xo?">":")"),to=bi(be),Jl=Qi($e)}Ol!==void 0&&Ol[ys]!==void 0&&(Ql=Ol[ys]+` Tw
`),ys===0?V.push(Ql+ro(to,Jl,$a)+Bi):el===Ia?V.push(Ql+Bi):el===wi&&V.push(Ql+ro(to,Jl,$a)+Bi)}V=el===Ia?V.join(` Tj
T* `):V.join(` Tj
`),V+=` Tj
`;var oi=`BT
/`;return oi+=ut+" "+pe+` Tf
`,oi+=A(pe*ni)+` TL
`,oi+=hs+`
`,oi+=ps,oi+=V,Q(oi+="ET"),m[ut]=!0,Xa};var mr=p.__private__.clip=p.clip=function(V){return Q(V==="evenodd"?"W*":"W"),this};p.clipEvenOdd=function(){return mr("evenodd")},p.__private__.discardPath=p.discardPath=function(){return Q("n"),this};var _r=p.__private__.isValidStyle=function(V){var be=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(V)!==-1&&(be=!0),be};p.__private__.setDefaultPathOperation=p.setDefaultPathOperation=function(V){return _r(V)&&(u=V),this};var zr=p.__private__.getStyle=p.getStyle=function(V){var be=u;switch(V){case"D":case"S":be="S";break;case"F":be="f";break;case"FD":case"DF":be="B";break;case"f":case"f*":case"B":case"B*":be=V}return be},mn=p.close=function(){return Q("h"),this};p.stroke=function(){return Q("S"),this},p.fill=function(V){return ta("f",V),this},p.fillEvenOdd=function(V){return ta("f*",V),this},p.fillStroke=function(V){return ta("B",V),this},p.fillStrokeEvenOdd=function(V){return ta("B*",V),this};var ta=function(V,be){_a(be)==="object"?Vu(be,V):Q(V)},Hn=function(V){V===null||j===N.ADVANCED&&V===void 0||(V=zr(V),Q(V))};function ti(V,be,$e,Ze,ht){var Pt=new tp(be||this.boundingBox,$e||this.xStep,Ze||this.yStep,this.gState,ht||this.matrix);Pt.stream=this.stream;var Gt=V+"$$"+this.cloneIndex+++"$$";return Xe(Gt,Pt),Pt}var Vu=function(V,be){var $e=Nr[V.key],Ze=bt[$e];if(Ze instanceof F0)Q("q"),Q(jf(be)),Ze.gState&&p.setGState(Ze.gState),Q(V.matrix.toString()+" cm"),Q("/"+$e+" sh"),Q("Q");else if(Ze instanceof tp){var ht=new br(1,0,0,-1,0,Zi());V.matrix&&(ht=ht.multiply(V.matrix||on),$e=ti.call(Ze,V.key,V.boundingBox,V.xStep,V.yStep,ht).id),Q("q"),Q("/Pattern cs"),Q("/"+$e+" scn"),Ze.gState&&p.setGState(Ze.gState),Q(be),Q("Q")}},jf=function(V){switch(V){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Sl=p.moveTo=function(V,be){return Q(A(C(V))+" "+A(q(be))+" m"),this},po=p.lineTo=function(V,be){return Q(A(C(V))+" "+A(q(be))+" l"),this},ri=p.curveTo=function(V,be,$e,Ze,ht,Pt){return Q([A(C(V)),A(q(be)),A(C($e)),A(q(Ze)),A(C(ht)),A(q(Pt)),"c"].join(" ")),this};p.__private__.line=p.line=function(V,be,$e,Ze,ht){if(isNaN(V)||isNaN(be)||isNaN($e)||isNaN(Ze)||!_r(ht))throw new Error("Invalid arguments passed to jsPDF.line");return j===N.COMPAT?this.lines([[$e-V,Ze-be]],V,be,[1,1],ht||"S"):this.lines([[$e-V,Ze-be]],V,be,[1,1]).stroke()},p.__private__.lines=p.lines=function(V,be,$e,Ze,ht,Pt){var Gt,yr,Mr,Xr,Qr,un,Ta,$a,Xa,qs,ps,Xo;if(typeof V=="number"&&(Xo=$e,$e=be,be=V,V=Xo),Ze=Ze||[1,1],Pt=Pt||!1,isNaN(be)||isNaN($e)||!Array.isArray(V)||!Array.isArray(Ze)||!_r(ht)||typeof Pt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Sl(be,$e),Gt=Ze[0],yr=Ze[1],Xr=V.length,qs=be,ps=$e,Mr=0;Mr<Xr;Mr++)(Qr=V[Mr]).length===2?(qs=Qr[0]*Gt+qs,ps=Qr[1]*yr+ps,po(qs,ps)):(un=Qr[0]*Gt+qs,Ta=Qr[1]*yr+ps,$a=Qr[2]*Gt+qs,Xa=Qr[3]*yr+ps,qs=Qr[4]*Gt+qs,ps=Qr[5]*yr+ps,ri(un,Ta,$a,Xa,qs,ps));return Pt&&mn(),Hn(ht),this},p.path=function(V){for(var be=0;be<V.length;be++){var $e=V[be],Ze=$e.c;switch($e.op){case"m":Sl(Ze[0],Ze[1]);break;case"l":po(Ze[0],Ze[1]);break;case"c":ri.apply(this,Ze);break;case"h":mn()}}return this},p.__private__.rect=p.rect=function(V,be,$e,Ze,ht){if(isNaN(V)||isNaN(be)||isNaN($e)||isNaN(Ze)||!_r(ht))throw new Error("Invalid arguments passed to jsPDF.rect");return j===N.COMPAT&&(Ze=-Ze),Q([A(C(V)),A(q(be)),A(C($e)),A(C(Ze)),"re"].join(" ")),Hn(ht),this},p.__private__.triangle=p.triangle=function(V,be,$e,Ze,ht,Pt,Gt){if(isNaN(V)||isNaN(be)||isNaN($e)||isNaN(Ze)||isNaN(ht)||isNaN(Pt)||!_r(Gt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[$e-V,Ze-be],[ht-$e,Pt-Ze],[V-ht,be-Pt]],V,be,[1,1],Gt,!0),this},p.__private__.roundedRect=p.roundedRect=function(V,be,$e,Ze,ht,Pt,Gt){if(isNaN(V)||isNaN(be)||isNaN($e)||isNaN(Ze)||isNaN(ht)||isNaN(Pt)||!_r(Gt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var yr=4/3*(Math.SQRT2-1);return ht=Math.min(ht,.5*$e),Pt=Math.min(Pt,.5*Ze),this.lines([[$e-2*ht,0],[ht*yr,0,ht,Pt-Pt*yr,ht,Pt],[0,Ze-2*Pt],[0,Pt*yr,-ht*yr,Pt,-ht,Pt],[2*ht-$e,0],[-ht*yr,0,-ht,-Pt*yr,-ht,-Pt],[0,2*Pt-Ze],[0,-Pt*yr,ht*yr,-Pt,ht,-Pt]],V+ht,be,[1,1],Gt,!0),this},p.__private__.ellipse=p.ellipse=function(V,be,$e,Ze,ht){if(isNaN(V)||isNaN(be)||isNaN($e)||isNaN(Ze)||!_r(ht))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Pt=4/3*(Math.SQRT2-1)*$e,Gt=4/3*(Math.SQRT2-1)*Ze;return Sl(V+$e,be),ri(V+$e,be-Gt,V+Pt,be-Ze,V,be-Ze),ri(V-Pt,be-Ze,V-$e,be-Gt,V-$e,be),ri(V-$e,be+Gt,V-Pt,be+Ze,V,be+Ze),ri(V+Pt,be+Ze,V+$e,be+Gt,V+$e,be),Hn(ht),this},p.__private__.circle=p.circle=function(V,be,$e,Ze){if(isNaN(V)||isNaN(be)||isNaN($e)||!_r(Ze))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(V,be,$e,$e,Ze)},p.setFont=function(V,be,$e){return $e&&(be=P(be,$e)),ut=Et(V,be,{disableWarning:!1}),this};var Nc=p.__private__.getFont=p.getFont=function(){return $t[Et.apply(p,arguments)]};p.__private__.getFontList=p.getFontList=function(){var V,be,$e={};for(V in er)if(er.hasOwnProperty(V))for(be in $e[V]=[],er[V])er[V].hasOwnProperty(be)&&$e[V].push(be);return $e},p.addFont=function(V,be,$e,Ze,ht){var Pt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Pt.indexOf(arguments[3])!==-1?ht=arguments[3]:arguments[3]&&Pt.indexOf(arguments[3])==-1&&($e=P($e,Ze)),ht=ht||"Identity-H",Dt.call(this,V,be,$e,ht)};var jc,Id=e.lineWidth||.200025,_l=p.__private__.getLineWidth=p.getLineWidth=function(){return Id},Kl=p.__private__.setLineWidth=p.setLineWidth=function(V){return Id=V,Q(A(C(V))+" w"),this};p.__private__.setLineDash=Zr.API.setLineDash=Zr.API.setLineDashPattern=function(V,be){if(V=V||[],be=be||0,isNaN(be)||!Array.isArray(V))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return V=V.map((function($e){return A(C($e))})).join(" "),be=A(C(be)),Q("["+V+"] "+be+" d"),this};var kc=p.__private__.getLineHeight=p.getLineHeight=function(){return pe*jc};p.__private__.getLineHeight=p.getLineHeight=function(){return pe*jc};var uu=p.__private__.setLineHeightFactor=p.setLineHeightFactor=function(V){return typeof(V=V||1.15)=="number"&&(jc=V),this},Ho=p.__private__.getLineHeightFactor=p.getLineHeightFactor=function(){return jc};uu(e.lineHeight);var bi=p.__private__.getHorizontalCoordinate=function(V){return C(V)},Qi=p.__private__.getVerticalCoordinate=function(V){return j===N.ADVANCED?V:Ut[R].mediaBox.topRightY-Ut[R].mediaBox.bottomLeftY-C(V)},Sc=p.__private__.getHorizontalCoordinateString=p.getHorizontalCoordinateString=function(V){return A(bi(V))},mo=p.__private__.getVerticalCoordinateString=p.getVerticalCoordinateString=function(V){return A(Qi(V))},fs=e.strokeColor||"0 G";p.__private__.getStrokeColor=p.getDrawColor=function(){return Ce(fs)},p.__private__.setStrokeColor=p.setDrawColor=function(V,be,$e,Ze){return fs=Oe({ch1:V,ch2:be,ch3:$e,ch4:Ze,pdfColorType:"draw",precision:2}),Q(fs),this};var Al=e.fillColor||"0 g";p.__private__.getFillColor=p.getFillColor=function(){return Ce(Al)},p.__private__.setFillColor=p.setFillColor=function(V,be,$e,Ze){return Al=Oe({ch1:V,ch2:be,ch3:$e,ch4:Ze,pdfColorType:"fill",precision:2}),Q(Al),this};var hs=e.textColor||"0 g",Wo=p.__private__.getTextColor=p.getTextColor=function(){return Ce(hs)};p.__private__.setTextColor=p.setTextColor=function(V,be,$e,Ze){return hs=Oe({ch1:V,ch2:be,ch3:$e,ch4:Ze,pdfColorType:"text",precision:3}),this};var _c=e.charSpace,xo=p.__private__.getCharSpace=p.getCharSpace=function(){return parseFloat(_c||0)};p.__private__.setCharSpace=p.setCharSpace=function(V){if(isNaN(V))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return _c=V,this};var El=0;p.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},p.__private__.setLineCap=p.setLineCap=function(V){var be=p.CapJoinStyles[V];if(be===void 0)throw new Error("Line cap style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return El=be,Q(be+" J"),this};var Vo=0;p.__private__.setLineJoin=p.setLineJoin=function(V){var be=p.CapJoinStyles[V];if(be===void 0)throw new Error("Line join style of '"+V+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Vo=be,Q(be+" j"),this},p.__private__.setLineMiterLimit=p.__private__.setMiterLimit=p.setLineMiterLimit=p.setMiterLimit=function(V){if(V=V||0,isNaN(V))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(A(C(V))+" M"),this},p.GState=py,p.setGState=function(V){(V=typeof V=="string"?rr[Lr[V]]:du(null,V)).equals(Er)||(Q("/"+V.id+" gs"),Er=V)};var du=function(V,be){if(!V||!Lr[V]){var $e=!1;for(var Ze in rr)if(rr.hasOwnProperty(Ze)&&rr[Ze].equals(be)){$e=!0;break}if($e)be=rr[Ze];else{var ht="GS"+(Object.keys(rr).length+1).toString(10);rr[ht]=be,be.id=ht}return V&&(Lr[V]=be.id),wr.publish("addGState",be),be}};p.addGState=function(V,be){return du(V,be),this},p.saveGraphicsState=function(){return Q("q"),qe.push({key:ut,size:pe,color:hs}),this},p.restoreGraphicsState=function(){Q("Q");var V=qe.pop();return ut=V.key,pe=V.size,hs=V.color,Er=null,this},p.setCurrentTransformationMatrix=function(V){return Q(V.toString()+" cm"),this},p.comment=function(V){return Q("#"+V),this};var Go=function(V,be){var $e=V||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return $e},set:function(Pt){isNaN(Pt)||($e=parseFloat(Pt))}});var Ze=be||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ze},set:function(Pt){isNaN(Pt)||(Ze=parseFloat(Pt))}});var ht="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ht},set:function(Pt){ht=Pt.toString()}}),this},Ko=function(V,be,$e,Ze){Go.call(this,V,be),this.type="rect";var ht=$e||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ht},set:function(Gt){isNaN(Gt)||(ht=parseFloat(Gt))}});var Pt=Ze||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Pt},set:function(Gt){isNaN(Gt)||(Pt=parseFloat(Gt))}}),this},Ac=function(){this.page=or,this.currentPage=R,this.pages=Le.slice(0),this.pagesContext=Ut.slice(0),this.x=pr,this.y=tr,this.matrix=ft,this.width=Cl(R),this.height=Zi(R),this.outputDestination=He,this.id="",this.objectNumber=-1};Ac.prototype.restore=function(){or=this.page,R=this.currentPage,Ut=this.pagesContext,Le=this.pages,pr=this.x,tr=this.y,ft=this.matrix,hu(R,this.width),kf(R,this.height),He=this.outputDestination};var Ka=function(V,be,$e,Ze,ht){On.push(new Ac),or=R=0,Le=[],pr=V,tr=be,ft=ht,Cr([$e,Ze])},w0=function(V){if(hn[V])On.pop().restore();else{var be=new Ac,$e="Xo"+(Object.keys(Gr).length+1).toString(10);be.id=$e,hn[V]=$e,Gr[$e]=be,wr.publish("addFormObject",be),On.pop().restore()}};for(var fu in p.beginFormObject=function(V,be,$e,Ze,ht){return Ka(V,be,$e,Ze,ht),this},p.endFormObject=function(V){return w0(V),this},p.doFormObject=function(V,be){var $e=Gr[hn[V]];return Q("q"),Q(be.toString()+" cm"),Q("/"+$e.id+" Do"),Q("Q"),this},p.getFormObject=function(V){var be=Gr[hn[V]];return{x:be.x,y:be.y,width:be.width,height:be.height,matrix:be.matrix}},p.save=function(V,be){return V=V||"generated.pdf",(be=be||{}).returnPromise=be.returnPromise||!1,be.returnPromise===!1?(D0(zn(Zt()),V),typeof D0.unload=="function"&&en.setTimeout&&setTimeout(D0.unload,911),this):new Promise((function($e,Ze){try{var ht=D0(zn(Zt()),V);typeof D0.unload=="function"&&en.setTimeout&&setTimeout(D0.unload,911),$e(ht)}catch(Pt){Ze(Pt.message)}}))},Zr.API)Zr.API.hasOwnProperty(fu)&&(fu==="events"&&Zr.API.events.length?(function(V,be){var $e,Ze,ht;for(ht=be.length-1;ht!==-1;ht--)$e=be[ht][0],Ze=be[ht][1],V.subscribe.apply(V,[$e].concat(typeof Ze=="function"?[Ze]:Ze))})(wr,Zr.API.events):p[fu]=Zr.API[fu]);var Cl=p.getPageWidth=function(V){return(Ut[V=V||R].mediaBox.topRightX-Ut[V].mediaBox.bottomLeftX)/lt},hu=p.setPageWidth=function(V,be){Ut[V].mediaBox.topRightX=be*lt+Ut[V].mediaBox.bottomLeftX},Zi=p.getPageHeight=function(V){return(Ut[V=V||R].mediaBox.topRightY-Ut[V].mediaBox.bottomLeftY)/lt},kf=p.setPageHeight=function(V,be){Ut[V].mediaBox.topRightY=be*lt+Ut[V].mediaBox.bottomLeftY};return p.internal={pdfEscape:xr,getStyle:zr,getFont:Nc,getFontSize:Pe,getCharSpace:xo,getTextColor:Wo,getLineHeight:kc,getLineHeightFactor:Ho,getLineWidth:_l,write:we,getHorizontalCoordinate:bi,getVerticalCoordinate:Qi,getCoordinateString:Sc,getVerticalCoordinateString:mo,collections:{},newObject:wt,newAdditionalObject:me,newObjectDeferred:Wt,newObjectDeferredBegin:re,getFilters:Ke,putStream:ct,events:wr,scaleFactor:lt,pageSize:{getWidth:function(){return Cl(R)},setWidth:function(V){hu(R,V)},getHeight:function(){return Zi(R)},setHeight:function(V){kf(R,V)}},encryptionOptions:f,encryption:xn,getEncryptor:$r,output:ya,getNumberOfPages:ir,pages:Le,out:Q,f2:B,f3:E,getPageInfo:Kr,getPageInfoByObjId:_e,getCurrentPageInfo:Yt,getPDFVersion:v,Point:Go,Rectangle:Ko,Matrix:br,hasHotfix:ln},Object.defineProperty(p.internal.pageSize,"width",{get:function(){return Cl(R)},set:function(V){hu(R,V)},enumerable:!0,configurable:!0}),Object.defineProperty(p.internal.pageSize,"height",{get:function(){return Zi(R)},set:function(V){kf(R,V)},enumerable:!0,configurable:!0}),Ct.call(p,Ee),ut="F1",kn(s,r),wr.publish("initialized"),p}Xh.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Xh.prototype.toHexString=function(e){return e.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Xh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Xh.prototype.processOwnerPassword=function(e,t){return bk(yk(t).substr(0,5),e)},Xh.prototype.encryptor=function(e,t){var r=yk(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return bk(r,n)}},py.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||_a(e)!==_a(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Zr.API={events:[]},Zr.version="2.5.2";var Ls=Zr.API,CS=1,jh=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Vh=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},fn=function(e){return e.toFixed(2)},$f=function(e){return e.toFixed(5)};Ls.__acroform__={};var Gl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},_I=function(e){return e*CS},cd=function(e){var t=new j9,r=Dr.internal.getHeight(e)||0,n=Dr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(fn(n)),Number(fn(r))],t},zge=Ls.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},Hge=Ls.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},Wge=Ls.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(e&1<<t)==0?0:1},Xs=Ls.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Wge(e,t-1)},Ys=Ls.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return zge(e,t-1)},Js=Ls.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Hge(e,t-1)},Vge=Ls.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=n(i)||0,[Number(fn(c.lowerLeft_X)),Number(fn(c.lowerLeft_Y)),Number(fn(c.upperRight_X)),Number(fn(c.upperRight_Y))]},Gge=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=wk(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+fn(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=cd(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},wk=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map((function(E){return E.split(`
`)})):s.map((function(E){return[E]}));var i=r,o=Dr.internal.getHeight(e)||0;o=o<0?-o:o;var l=Dr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(E,C,M){if(E+1<s.length){var q=C+" "+s[E+1][0];return Av(q,e,M).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var u,f,d=Av("3",e,i).height,m=e.multiline?o-i:(o-d)/2,p=m+=2,y=0,v=0,g=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Av(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var b="",N=0,j=0;j<s.length;j++)if(s.hasOwnProperty(j)){var w=!1;if(s[j].length!==1&&g!==s[j].length-1){if((d+2)*(N+2)+2>o)continue e;b+=s[j][g],w=!0,v=j,j--}else{b=(b+=s[j][g]+" ").substr(b.length-1)==" "?b.substr(0,b.length-1):b;var S=parseInt(j),P=c(S,b,i),A=j>=s.length-1;if(P&&!A){b+=" ",g=0;continue}if(P||A){if(A)v=S;else if(e.multiline&&(d+2)*(N+2)+2>o)continue e}else{if(!e.multiline||(d+2)*(N+2)+2>o)continue e;v=S}}for(var T="",I=y;I<=v;I++){var B=s[I];if(e.multiline){if(I===v){T+=B[g]+" ",g=(g+1)%B.length;continue}if(I===y){T+=B[B.length-1]+" ";continue}}T+=B[0]+" "}switch(T=T.substr(T.length-1)==" "?T.substr(0,T.length-1):T,f=Av(T,e,i).width,e.textAlign){case"right":u=l-f-2;break;case"center":u=(l-f)/2;break;default:u=2}t+=fn(u)+" "+fn(p)+` Td
`,t+="("+jh(T)+`) Tj
`,t+=-fn(u)+` 0 Td
`,p=-(i+2),f=0,y=w?v:v+1,N++,b=""}break}return n.text=t,n.fontSize=i,n},Av=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},Kge={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Xge=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find((function(n){return n.type===r.type&&n.object===r.object}))===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},Yge=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),_a(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[n]}},Jge=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Hu.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(Kge)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");CS=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new k9,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)})),e.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&Xge(i,r)}})(e)})),e.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)})),e.internal.events.subscribe("postPutPages",(function(r){(function(n,s){var i=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],u=l.Rect;if(l.Rect&&(l.Rect=Vge(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Dr.createDefaultAppearanceStream(l),_a(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=u,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=Gge(l);c.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var d="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var p=l.appearanceStreamContent[m];if(d+="/"+m+" ",d+="<<",Object.keys(p).length>=1||Array.isArray(p)){for(var o in p)if(p.hasOwnProperty(o)){var y=p[o];typeof y=="function"&&(y=y.call(s,l)),d+="/"+o+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=p)=="function"&&(y=y.call(s,l)),d+="/"+o+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);d+=">>"}c.push({key:"AP",value:`<<
`+d+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&Yge(s.internal.acroformPlugin.xForms,s)})(r,e)})),e.internal.acroformPlugin.isInitialized=!0}},N9=Ls.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),_a(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),s+="("+jh(n(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},gj=function(e,t,r){var n=function(s){return s};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+jh(n(e))+")"},xd=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};xd.prototype.toString=function(){return this.objId+" 0 R"},xd.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},xd.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter((function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"}));for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],s=this[n];s&&(Array.isArray(s)?e.push({key:n,value:N9(s,this.objId,this.scope)}):s instanceof xd?(s.scope=this.scope,e.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:n,value:s}))}return e};var j9=function(){xd.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};Gl(j9,xd);var k9=function(){xd.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+jh(r(e))+")"}},set:function(r){e=r}})};Gl(k9,xd);var Hu=function e(){xd.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute F supplied.');t=b}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Xs(t,3)},set:function(b){b?this.F=Ys(t,3):this.F=Js(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(b){if(isNaN(b))throw new Error('Invalid value "'+b+'" for attribute Ff supplied.');r=b}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(b){n=b!==void 0?b:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(b){n[0]=b}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(b){n[1]=b}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(b){n[2]=b}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(b){n[3]=b}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(b){switch(b){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=b;break;default:throw new Error('Invalid value "'+b+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof my)return;i="FieldObject"+e.FieldNum++}var b=function(N){return N};return this.scope&&(b=this.scope.internal.getEncryptor(this.objId)),"("+jh(b(i))+")"},set:function(b){i=b.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(b){i=b}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(b){o=b}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(b){l=b}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(b){c=b}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/CS:u},set:function(b){u=b}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(b){f=b}});var d="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!d||this instanceof my||this instanceof Z0))return gj(d,this.objId,this.scope)},set:function(b){b=b.toString(),d=b}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Ki?m:gj(m,this.objId,this.scope)},set:function(b){b=b.toString(),m=this instanceof Ki?b:b.substr(0,1)==="("?Vh(b.substr(1,b.length-2)):Vh(b)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Vh(m.substr(1,m.length-1)):m},set:function(b){b=b.toString(),m=this instanceof Ki?"/"+b:b}});var p=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(p)return p},set:function(b){this.V=b}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof Ki?p:gj(p,this.objId,this.scope)},set:function(b){b=b.toString(),p=this instanceof Ki?b:b.substr(0,1)==="("?Vh(b.substr(1,b.length-2)):Vh(b)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Ki?Vh(p.substr(1,p.length-1)):p},set:function(b){b=b.toString(),p=this instanceof Ki?"/"+b:b}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,v=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return v},set:function(b){b=!!b,v=b}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(b){y=b}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,1)},set:function(b){b?this.Ff=Ys(this.Ff,1):this.Ff=Js(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,2)},set:function(b){b?this.Ff=Ys(this.Ff,2):this.Ff=Js(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,3)},set:function(b){b?this.Ff=Ys(this.Ff,3):this.Ff=Js(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(g!==null)return g},set:function(b){if([0,1,2].indexOf(b)===-1)throw new Error('Invalid value "'+b+'" for attribute Q supplied.');g=b}}),Object.defineProperty(this,"textAlign",{get:function(){var b;switch(g){case 0:default:b="left";break;case 1:b="center";break;case 2:b="right"}return b},configurable:!0,enumerable:!0,set:function(b){switch(b){case"right":case 2:g=2;break;case"center":case 1:g=1;break;default:g=0}}})};Gl(Hu,xd);var up=function(){Hu.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return N9(t,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=(function(i,o,l){l||(l=1);for(var c,u=[];c=o.exec(i);)u.push(c[l]);return u})(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,18)},set:function(r){r?this.Ff=Ys(this.Ff,18):this.Ff=Js(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=Ys(this.Ff,19):this.Ff=Js(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,20)},set:function(r){r?(this.Ff=Ys(this.Ff,20),t.sort()):this.Ff=Js(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,22)},set:function(r){r?this.Ff=Ys(this.Ff,22):this.Ff=Js(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,23)},set:function(r){r?this.Ff=Ys(this.Ff,23):this.Ff=Js(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,27)},set:function(r){r?this.Ff=Ys(this.Ff,27):this.Ff=Js(this.Ff,27)}}),this.hasAppearanceStream=!1};Gl(up,Hu);var dp=function(){up.call(this),this.fontName="helvetica",this.combo=!1};Gl(dp,up);var fp=function(){dp.call(this),this.combo=!0};Gl(fp,dp);var Uv=function(){fp.call(this),this.edit=!0};Gl(Uv,fp);var Ki=function(){Hu.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,15)},set:function(r){r?this.Ff=Ys(this.Ff,15):this.Ff=Js(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,16)},set:function(r){r?this.Ff=Ys(this.Ff,16):this.Ff=Js(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,17)},set:function(r){r?this.Ff=Ys(this.Ff,17):this.Ff=Js(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,26)},set:function(r){r?this.Ff=Ys(this.Ff,26):this.Ff=Js(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+jh(r(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){_a(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};Gl(Ki,Hu);var qv=function(){Ki.call(this),this.pushButton=!0};Gl(qv,Ki);var hp=function(){Ki.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};Gl(hp,Ki);var my=function(){var e,t;Hu.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+jh(s(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){_a(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Dr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Gl(my,Hu),hp.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},hp.prototype.createOption=function(e){var t=new my;return t.Parent=this,t.optionName=e,this.Kids.push(t),Qge.call(this.scope,t),t};var $v=function(){Ki.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Dr.CheckBox.createAppearanceStream()};Gl($v,Ki);var Z0=function(){Hu.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,13)},set:function(t){t?this.Ff=Ys(this.Ff,13):this.Ff=Js(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,21)},set:function(t){t?this.Ff=Ys(this.Ff,21):this.Ff=Js(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,23)},set:function(t){t?this.Ff=Ys(this.Ff,23):this.Ff=Js(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,24)},set:function(t){t?this.Ff=Ys(this.Ff,24):this.Ff=Js(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,25)},set:function(t){t?this.Ff=Ys(this.Ff,25):this.Ff=Js(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,26)},set:function(t){t?this.Ff=Ys(this.Ff,26):this.Ff=Js(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Gl(Z0,Hu);var zv=function(){Z0.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Xs(this.Ff,14)},set:function(e){e?this.Ff=Ys(this.Ff,14):this.Ff=Js(this.Ff,14)}}),this.password=!0};Gl(zv,Z0);var Dr={CheckBox:{createAppearanceStream:function(){return{N:{On:Dr.CheckBox.YesNormal},D:{On:Dr.CheckBox.YesPushDown,Off:Dr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=cd(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=wk(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+fn(Dr.internal.getWidth(e))+" "+fn(Dr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+fn(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=cd(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=[],i=Dr.internal.getHeight(e),o=Dr.internal.getWidth(e),l=wk(e,e.caption);return s.push("1 g"),s.push("0 0 "+fn(o)+" "+fn(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+fn(o-1)+" "+fn(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+fn(l.fontSize)+" Tf "+n),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=cd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+fn(Dr.internal.getWidth(e))+" "+fn(Dr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Dr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Dr.RadioButton.Circle.YesNormal,t.D[e]=Dr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=cd(e);t.scope=e.scope;var r=[],n=Dr.internal.getWidth(e)<=Dr.internal.getHeight(e)?Dr.internal.getWidth(e)/4:Dr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Dr.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+$f(Dr.internal.getWidth(e)/2)+" "+$f(Dr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=cd(e);t.scope=e.scope;var r=[],n=Dr.internal.getWidth(e)<=Dr.internal.getHeight(e)?Dr.internal.getWidth(e)/4:Dr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Dr.internal.Bezier_C).toFixed(5)),o=Number((n*Dr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$f(Dr.internal.getWidth(e)/2)+" "+$f(Dr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+$f(Dr.internal.getWidth(e)/2)+" "+$f(Dr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=cd(e);t.scope=e.scope;var r=[],n=Dr.internal.getWidth(e)<=Dr.internal.getHeight(e)?Dr.internal.getWidth(e)/4:Dr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*Dr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+$f(Dr.internal.getWidth(e)/2)+" "+$f(Dr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Dr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Dr.RadioButton.Cross.YesNormal,t.D[e]=Dr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=cd(e);t.scope=e.scope;var r=[],n=Dr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+fn(Dr.internal.getWidth(e)-2)+" "+fn(Dr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(fn(n.x1.x)+" "+fn(n.x1.y)+" m"),r.push(fn(n.x2.x)+" "+fn(n.x2.y)+" l"),r.push(fn(n.x4.x)+" "+fn(n.x4.y)+" m"),r.push(fn(n.x3.x)+" "+fn(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=cd(e);t.scope=e.scope;var r=Dr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+fn(Dr.internal.getWidth(e))+" "+fn(Dr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+fn(Dr.internal.getWidth(e)-2)+" "+fn(Dr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(fn(r.x1.x)+" "+fn(r.x1.y)+" m"),n.push(fn(r.x2.x)+" "+fn(r.x2.y)+" l"),n.push(fn(r.x4.x)+" "+fn(r.x4.y)+" m"),n.push(fn(r.x3.x)+" "+fn(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=cd(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+fn(Dr.internal.getWidth(e))+" "+fn(Dr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Dr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Dr.internal.getWidth(e),r=Dr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Dr.internal.getWidth=function(e){var t=0;return _a(e)==="object"&&(t=_I(e.Rect[2])),t},Dr.internal.getHeight=function(e){var t=0;return _a(e)==="object"&&(t=_I(e.Rect[3])),t};var Qge=Ls.addField=function(e){if(Jge(this,e),!(e instanceof Hu))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Ls.AcroFormChoiceField=up,Ls.AcroFormListBox=dp,Ls.AcroFormComboBox=fp,Ls.AcroFormEditBox=Uv,Ls.AcroFormButton=Ki,Ls.AcroFormPushButton=qv,Ls.AcroFormRadioButton=hp,Ls.AcroFormCheckBox=$v,Ls.AcroFormTextField=Z0,Ls.AcroFormPasswordField=zv,Ls.AcroFormAppearance=Dr,Ls.AcroForm={ChoiceField:up,ListBox:dp,ComboBox:fp,EditBox:Uv,Button:Ki,PushButton:qv,RadioButton:hp,CheckBox:$v,TextField:Z0,PasswordField:zv,Appearance:Dr},Zr.AcroForm={ChoiceField:up,ListBox:dp,ComboBox:fp,EditBox:Uv,Button:Ki,PushButton:qv,RadioButton:hp,CheckBox:$v,TextField:Z0,PasswordField:zv,Appearance:Dr};Zr.AcroForm;function S9(e){return e.reduce((function(t,r,n){return t[r]=n,t}),{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(E,C){var M,q,G,Z,te,ne=t;if((C=C||t)==="RGBA"||E.data!==void 0&&E.data instanceof Uint8ClampedArray&&"height"in E&&"width"in E)return"RGBA";if(P(E))for(te in r)for(G=r[te],M=0;M<G.length;M+=1){for(Z=!0,q=0;q<G[M].length;q+=1)if(G[M][q]!==void 0&&G[M][q]!==E[q]){Z=!1;break}if(Z===!0){ne=te;break}}else for(te in r)for(G=r[te],M=0;M<G.length;M+=1){for(Z=!0,q=0;q<G[M].length;q+=1)if(G[M][q]!==void 0&&G[M][q]!==E.charCodeAt(q)){Z=!1;break}if(Z===!0){ne=te;break}}return ne===t&&C!==t&&(ne=C),ne},s=function E(C){for(var M=this.internal.write,q=this.internal.putStream,G=(0,this.internal.getFilters)();G.indexOf("FlateEncode")!==-1;)G.splice(G.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var Z=[];if(Z.push({key:"Type",value:"/XObject"}),Z.push({key:"Subtype",value:"/Image"}),Z.push({key:"Width",value:C.width}),Z.push({key:"Height",value:C.height}),C.colorSpace===g.INDEXED?Z.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(Z.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===g.DEVICE_CMYK&&Z.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Z.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&Z.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)){for(var te="",ne=0,J=C.transparency.length;ne<J;ne++)te+=C.transparency[ne]+" "+C.transparency[ne]+" ";Z.push({key:"Mask",value:"["+te+"]"})}C.sMask!==void 0&&Z.push({key:"SMask",value:C.objectId+1+" 0 R"});var ee=C.filter!==void 0?["/"+C.filter]:void 0;if(q({data:C.data,additionalKeyValues:Z,alreadyAppliedFilters:ee,objectId:C.objectId}),M("endobj"),"sMask"in C&&C.sMask!==void 0){var H="/Predictor "+C.predictor+" /Colors 1 /BitsPerComponent "+C.bitsPerComponent+" /Columns "+C.width,O={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:C.bitsPerComponent,decodeParameters:H,data:C.sMask};"filter"in C&&(O.filter=C.filter),E.call(this,O)}if(C.colorSpace===g.INDEXED){var R=this.internal.newObject();q({data:T(new Uint8Array(C.palette)),objectId:R}),M("endobj")}},i=function(){var E=this.internal.collections.addImage_images;for(var C in E)s.call(this,E[C])},o=function(){var E,C=this.internal.collections.addImage_images,M=this.internal.write;for(var q in C)M("/I"+(E=C[q]).index,E.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var E=this.internal.collections.addImage_images;return l.call(this),E},u=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(E){return typeof e["process"+E.toUpperCase()]=="function"},d=function(E){return _a(E)==="object"&&E.nodeType===1},m=function(E,C){if(E.nodeName==="IMG"&&E.hasAttribute("src")){var M=""+E.getAttribute("src");if(M.indexOf("data:image/")===0)return tx(unescape(M).split("base64,").pop());var q=e.loadFile(M,!0);if(q!==void 0)return q}if(E.nodeName==="CANVAS"){if(E.width===0||E.height===0)throw new Error("Given canvas must have data. Canvas width: "+E.width+", height: "+E.height);var G;switch(C){case"PNG":G="image/png";break;case"WEBP":G="image/webp";break;default:G="image/jpeg"}return tx(E.toDataURL(G,1).split("base64,").pop())}},p=function(E){var C=this.internal.collections.addImage_images;if(C){for(var M in C)if(E===C[M].alias)return C[M]}},y=function(E,C,M){return E||C||(E=-96,C=-96),E<0&&(E=-1*M.width*72/E/this.internal.scaleFactor),C<0&&(C=-1*M.height*72/C/this.internal.scaleFactor),E===0&&(E=C*M.width/M.height),C===0&&(C=E*M.height/M.width),[E,C]},v=function(E,C,M,q,G,Z){var te=y.call(this,M,q,G),ne=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,ee=c.call(this);if(M=te[0],q=te[1],ee[G.index]=G,Z){Z*=Math.PI/180;var H=Math.cos(Z),O=Math.sin(Z),R=function(U){return U.toFixed(4)},W=[R(H),R(O),R(-1*O),R(H),0,0,"cm"]}this.internal.write("q"),Z?(this.internal.write([1,"0","0",1,ne(E),J(C+q),"cm"].join(" ")),this.internal.write(W.join(" ")),this.internal.write([ne(M),"0","0",ne(q),"0","0","cm"].join(" "))):this.internal.write([ne(M),"0","0",ne(q),ne(E),J(C+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+G.index+" Do"),this.internal.write("Q")},g=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var b=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},N=e.__addimage__.sHashCode=function(E){var C,M,q=0;if(typeof E=="string")for(M=E.length,C=0;C<M;C++)q=(q<<5)-q+E.charCodeAt(C),q|=0;else if(P(E))for(M=E.byteLength/2,C=0;C<M;C++)q=(q<<5)-q+E[C],q|=0;return q},j=e.__addimage__.validateStringAsBase64=function(E){(E=E||"").toString().trim();var C=!0;return E.length===0&&(C=!1),E.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(E.substr(0,E.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(E.substr(-2))===!1&&(C=!1),C},w=e.__addimage__.extractImageFromDataUrl=function(E){var C=(E=E||"").split("base64,"),M=null;if(C.length===2){var q=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(C[0]);Array.isArray(q)&&(M={mimeType:q[1],charset:q[2],data:C[1]})}return M},S=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(E){return S()&&E instanceof ArrayBuffer};var P=e.__addimage__.isArrayBufferView=function(E){return S()&&typeof Uint32Array<"u"&&(E instanceof Int8Array||E instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&E instanceof Uint8ClampedArray||E instanceof Int16Array||E instanceof Uint16Array||E instanceof Int32Array||E instanceof Uint32Array||E instanceof Float32Array||E instanceof Float64Array)},A=e.__addimage__.binaryStringToUint8Array=function(E){for(var C=E.length,M=new Uint8Array(C),q=0;q<C;q++)M[q]=E.charCodeAt(q);return M},T=e.__addimage__.arrayBufferToBinaryString=function(E){for(var C="",M=P(E)?E:new Uint8Array(E),q=0;q<M.length;q+=8192)C+=String.fromCharCode.apply(null,M.subarray(q,q+8192));return C};e.addImage=function(){var E,C,M,q,G,Z,te,ne,J;if(typeof arguments[1]=="number"?(C=t,M=arguments[1],q=arguments[2],G=arguments[3],Z=arguments[4],te=arguments[5],ne=arguments[6],J=arguments[7]):(C=arguments[1],M=arguments[2],q=arguments[3],G=arguments[4],Z=arguments[5],te=arguments[6],ne=arguments[7],J=arguments[8]),_a(E=arguments[0])==="object"&&!d(E)&&"imageData"in E){var ee=E;E=ee.imageData,C=ee.format||C||t,M=ee.x||M||0,q=ee.y||q||0,G=ee.w||ee.width||G,Z=ee.h||ee.height||Z,te=ee.alias||te,ne=ee.compression||ne,J=ee.rotation||ee.angle||J}var H=this.internal.getFilters();if(ne===void 0&&H.indexOf("FlateEncode")!==-1&&(ne="SLOW"),isNaN(M)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var O=I.call(this,E,C,te,ne);return v.call(this,M,q,G,Z,O,J),this};var I=function(E,C,M,q){var G,Z,te;if(typeof E=="string"&&n(E)===t){E=unescape(E);var ne=B(E,!1);(ne!==""||(ne=e.loadFile(E,!0))!==void 0)&&(E=ne)}if(d(E)&&(E=m(E,C)),C=n(E,C),!f(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((te=M)==null||te.length===0)&&(M=(function(J){return typeof J=="string"||P(J)?N(J):P(J.data)?N(J.data):null})(E)),(G=p.call(this,M))||(S()&&(E instanceof Uint8Array||C==="RGBA"||(Z=E,E=A(E))),G=this["process"+C.toUpperCase()](E,u.call(this),M,(function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in e.image_compression?J:b.NONE})(q),Z)),!G)throw new Error("An unknown error occurred whilst processing the image.");return G},B=e.__addimage__.convertBase64ToBinaryString=function(E,C){var M;C=typeof C!="boolean"||C;var q,G="";if(typeof E=="string"){q=(M=w(E))!==null?M.data:E;try{G=tx(q)}catch(Z){if(C)throw j(q)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Z.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return G};e.getImageProperties=function(E){var C,M,q="";if(d(E)&&(E=m(E)),typeof E=="string"&&n(E)===t&&((q=B(E,!1))===""&&(q=e.loadFile(E)||""),E=q),M=n(E),!f(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!S()||E instanceof Uint8Array||(E=A(E)),!(C=this["process"+M.toUpperCase()](E)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=M,C}})(Zr.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Zr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,f=!1,d=0;d<u.length&&!f;d++)switch((n=u[d]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var m=0;m<u.length;m++){n=u[m];var p=this.internal.pdfEscape,y=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var v=this.internal.newAdditionalObject(),g=this.internal.newAdditionalObject(),b=this.internal.getEncryptor(v.objId),N=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+p(b(n.contents))+")",i+=" /Popup "+g.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+p(b(N))+") >>",v.content=i;var j=v.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+j,n.open&&(i+=" /Open true"),i+=" >>",g.content=i,this.internal.write(v.objId,"0 R",g.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var w=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+p(y(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+w+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var S=this.annotations._nameMap[n.options.name];n.options.pageNumber=S.page,n.options.top=S.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+p(y(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var P=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+P+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:u(n),w:c(r+s),h:u(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,s,i){var o,l,c=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(r,l).length;o=Math.ceil(u*f)}else l=c,o=u;return this.text(r,n,s,i),s+=.2*u,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,s-u,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(Zr.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(v){return t[v.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(v){return typeof v=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(v)},l=e.__arabicParser__.isArabicEndLetter=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(v){return o(v)&&s.indexOf(v.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=1};var u=e.__arabicParser__.arabicLetterHasFinalForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(v){return o(v)&&i(v)&&t[v.charCodeAt(0)].length==4},d=e.__arabicParser__.resolveLigatures=function(v){var g=0,b=r,N="",j=0;for(g=0;g<v.length;g+=1)b[v.charCodeAt(g)]!==void 0?(j++,typeof(b=b[v.charCodeAt(g)])=="number"&&(N+=String.fromCharCode(b),b=r,j=0),g===v.length-1&&(b=r,N+=v.charAt(g-(j-1)),g-=j-1,j=0)):(b=r,N+=v.charAt(g-j),g-=j,j=0);return N};e.__arabicParser__.isArabicDiacritic=function(v){return v!==void 0&&n[v.charCodeAt(0)]!==void 0};var m=e.__arabicParser__.getCorrectForm=function(v,g,b){return o(v)?i(v)===!1?-1:!u(v)||!o(g)&&!o(b)||!o(b)&&l(g)||l(v)&&!o(g)||l(v)&&c(g)||l(v)&&l(g)?0:f(v)&&o(g)&&!l(g)&&o(b)&&u(b)?3:l(v)||!o(b)?1:2:-1},p=function(v){var g=0,b=0,N=0,j="",w="",S="",P=(v=v||"").split("\\s+"),A=[];for(g=0;g<P.length;g+=1){for(A.push(""),b=0;b<P[g].length;b+=1)j=P[g][b],w=P[g][b-1],S=P[g][b+1],o(j)?(N=m(j,w,S),A[g]+=N!==-1?String.fromCharCode(t[j.charCodeAt(0)][N]):j):A[g]+=j;A[g]=d(A[g])}return A.join(" ")},y=e.__arabicParser__.processArabic=e.processArabic=function(){var v,g=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,b=[];if(Array.isArray(g)){var N=0;for(b=[],N=0;N<g.length;N+=1)Array.isArray(g[N])?b.push([p(g[N][0]),g[N][1],g[N][2]]):b.push([p(g[N])]);v=b}else v=p(g);return typeof arguments[0]=="string"?v:(arguments[0].text=v,arguments[0])};e.events.push(["preProcessText",y])})(Zr.API),Zr.API.autoPrint=function(e){var t;return((e=e||{}).variant=e.variant||"non-conform",e.variant)==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Zr.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(v){c=v}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(v){u=v}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(v){f=v}});var d=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return d},set:function(v){d=v}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(v){m=v}});var p=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return p},set:function(v){p=v}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(v){y=v}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,u){n.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),d=u.font||this.getFont(),m=u.scaleFactor||this.internal.scaleFactor,p=0,y=0,v=0,g=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var b=u.maxWidth;b>0?typeof c=="string"?c=this.splitTextToSize(c,b):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce((function(j,w){return j.concat(g.splitTextToSize(w,b))}),[])):c=Array.isArray(c)?c:[c];for(var N=0;N<c.length;N++)p<(v=this.getStringUnitWidth(c[N],{font:d})*f)&&(p=v);return p!==0&&(y=c.length),{w:p/=m,h:Math.max((y*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/m,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,d=this.internal.__cell__.margins||t,m=this.internal.__cell__.tableHeaderRow,p=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===c.lineNumber?(c.x=(u.x||0)+(u.width||0),c.y=u.y||0):u.y+u.height+c.height+d.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=d.top,p&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=u.y+u.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,u,f,d,m){if(n.call(this),!f)throw new Error("No data for PDF table.");var p,y,v,g,b=[],N=[],j=[],w={},S={},P=[],A=[],T=(m=m||{}).autoSize||!1,I=m.printHeaders!==!1,B=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,E=m.margins||Object.assign({width:this.getPageWidth()},t),C=typeof m.padding=="number"?m.padding:3,M=m.headerBackgroundColor||"#c8c8c8",q=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=E,this.internal.__cell__.table_font_size=B,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=q,this.setFontSize(B),d==null)N=b=Object.keys(f[0]),j=b.map((function(){return"left"}));else if(Array.isArray(d)&&_a(d[0])==="object")for(b=d.map((function(ee){return ee.name})),N=d.map((function(ee){return ee.prompt||ee.name||""})),j=d.map((function(ee){return ee.align||"left"})),p=0;p<d.length;p+=1)S[d[p].name]=d[p].width*(19.049976/25.4);else Array.isArray(d)&&typeof d[0]=="string"&&(N=b=d,j=b.map((function(){return"left"})));if(T||Array.isArray(d)&&typeof d[0]=="string")for(p=0;p<b.length;p+=1){for(w[g=b[p]]=f.map((function(ee){return ee[g]})),this.setFont(void 0,"bold"),P.push(this.getTextDimensions(N[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=w[g],this.setFont(void 0,"normal"),v=0;v<y.length;v+=1)P.push(this.getTextDimensions(y[v],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);S[g]=Math.max.apply(null,P)+C+C,P=[]}if(I){var G={};for(p=0;p<b.length;p+=1)G[b[p]]={},G[b[p]].text=N[p],G[b[p]].align=j[p];var Z=l.call(this,G,S);A=b.map((function(ee){return new i(c,u,S[ee],Z,G[ee].text,void 0,G[ee].align)})),this.setTableHeaderRow(A),this.printHeaderRow(1,!1)}var te=d.reduce((function(ee,H){return ee[H.name]=H.align,ee}),{});for(p=0;p<f.length;p+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:p,data:f[p]},this);var ne=l.call(this,f[p],S);for(v=0;v<b.length;v+=1){var J=f[p][b[v]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:p,col:v,data:J},this),o.call(this,new i(c,u,S[b[v]],ne,J,p+2,te[b[v]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=u,this};var l=function(c,u){var f=this.internal.__cell__.padding,d=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map((function(p){var y=c[p];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,u[p]-f-f)}),this).map((function(p){return this.getLineHeightFactor()*p.length*d/m+f+f}),this).reduce((function(p,y){return Math.max(p,y)}),0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var d=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(d[0],d[1],d[2],d[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],p=0;p<this.internal.__cell__.tableHeaderRow.length;p+=1){f=this.internal.__cell__.tableHeaderRow[p].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,m.push(f)),f.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(y)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),r=!1}})(Zr.API);var _9={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},A9=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Nk=S9(A9),E9=[100,200,300,400,500,600,700,800,900],Zge=S9(E9);function jk(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return _9[i=i||"normal"]?i:"normal"})(e.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),s=(function(i){return typeof Nk[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,n].join(" ")}}}function AI(e,t,r,n){var s;for(s=r;s>=0&&s<t.length;s+=n)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=n)if(e[t[s]])return e[t[s]]}var eve={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},EI={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function CI(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function tve(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},eve,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=jk(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+CI(i)+"' and default family '"+n+"'.");if(o=(function(c,u){if(u[c])return u[c];var f=Nk[c],d=f<=Nk.normal?-1:1,m=AI(u,A9,f,d);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m})(i.stretch,o),o=(function(c,u){if(u[c])return u[c];for(var f=_9[c],d=0;d<f.length;++d)if(u[f[d]])return u[f[d]];throw new Error("Could not find a matching font-style for "+c)})(i.style,o),!(o=(function(c,u){if(u[c])return u[c];if(c===400&&u[500])return u[500];if(c===500&&u[400])return u[400];var f=Zge[c],d=AI(u,E9,f,c<400?-1:1);if(!d)throw new Error("Could not find a matching font-weight for value "+c);return d})(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+CI(i)+"'.");return o}function TI(e){return e.trimLeft()}function rve(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function nve(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var Ev,OI,PI,vj=["times"];(function(e){var t,r,n,s,i,o,l,c,u,f=function(O){return O=O||{},this.isStrokeTransparent=O.isStrokeTransparent||!1,this.strokeOpacity=O.strokeOpacity||1,this.strokeStyle=O.strokeStyle||"#000000",this.fillStyle=O.fillStyle||"#000000",this.isFillTransparent=O.isFillTransparent||!1,this.fillOpacity=O.fillOpacity||1,this.font=O.font||"10px sans-serif",this.textBaseline=O.textBaseline||"alphabetic",this.textAlign=O.textAlign||"left",this.lineWidth=O.lineWidth||1,this.lineJoin=O.lineJoin||"miter",this.lineCap=O.lineCap||"butt",this.path=O.path||[],this.transform=O.transform!==void 0?O.transform.clone():new c,this.globalCompositeOperation=O.globalCompositeOperation||"normal",this.globalAlpha=O.globalAlpha||1,this.clip_path=O.clip_path||[],this.currentPoint=O.currentPoint||new o,this.miterLimit=O.miterLimit||10,this.lastPoint=O.lastPoint||new o,this.lineDashOffset=O.lineDashOffset||0,this.lineDash=O.lineDash||[],this.margin=O.margin||[0,0,0,0],this.prevPageLastElemOffset=O.prevPageLastElemOffset||0,this.ignoreClearRect=typeof O.ignoreClearRect!="boolean"||O.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new d(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,u=new f}]);var d=function(O){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var R=O;Object.defineProperty(this,"pdf",{get:function(){return R}});var W=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return W},set:function(fe){W=!!fe}});var U=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return U},set:function(fe){U=!!fe}});var K=0;Object.defineProperty(this,"posX",{get:function(){return K},set:function(fe){isNaN(fe)||(K=fe)}});var oe=0;Object.defineProperty(this,"posY",{get:function(){return oe},set:function(fe){isNaN(fe)||(oe=fe)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(fe){var Q;typeof fe=="number"?Q=[fe,fe,fe,fe]:((Q=new Array(4))[0]=fe[0],Q[1]=fe.length>=2?fe[1]:Q[0],Q[2]=fe.length>=3?fe[2]:Q[0],Q[3]=fe.length>=4?fe[3]:Q[1]),u.margin=Q}});var he=!1;Object.defineProperty(this,"autoPaging",{get:function(){return he},set:function(fe){he=fe}});var ie=0;Object.defineProperty(this,"lastBreak",{get:function(){return ie},set:function(fe){ie=fe}});var ce=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ce},set:function(fe){ce=fe}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(fe){fe instanceof f&&(u=fe)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(fe){u.path=fe}});var Le=[];Object.defineProperty(this,"ctxStack",{get:function(){return Le},set:function(fe){Le=fe}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(fe){var Q;Q=m(fe),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(fe){var Q=m(fe);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(fe){["butt","round","square"].indexOf(fe)!==-1&&(this.ctx.lineCap=fe,this.pdf.setLineCap(fe))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(fe){isNaN(fe)||(this.ctx.lineWidth=fe,this.pdf.setLineWidth(fe))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(fe){["bevel","round","miter"].indexOf(fe)!==-1&&(this.ctx.lineJoin=fe,this.pdf.setLineJoin(fe))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(fe){isNaN(fe)||(this.ctx.miterLimit=fe,this.pdf.setMiterLimit(fe))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(fe){this.ctx.textBaseline=fe}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(fe){["right","end","center","left","start"].indexOf(fe)!==-1&&(this.ctx.textAlign=fe)}});var le=null;function He(fe,Q){if(le===null){var we=(function(ve){var Ee=[];return Object.keys(ve).forEach((function(pe){ve[pe].forEach((function(ue){var Pe=null;switch(ue){case"bold":Pe={family:pe,weight:"bold"};break;case"italic":Pe={family:pe,style:"italic"};break;case"bolditalic":Pe={family:pe,weight:"bold",style:"italic"};break;case"":case"normal":Pe={family:pe}}Pe!==null&&(Pe.ref={name:pe,style:ue},Ee.push(Pe))}))})),Ee})(fe.getFontList());le=(function(ve){for(var Ee={},pe=0;pe<ve.length;++pe){var ue=jk(ve[pe]),Pe=ue.family,Ne=ue.stretch,Be=ue.style,nt=ue.weight;Ee[Pe]=Ee[Pe]||{},Ee[Pe][Ne]=Ee[Pe][Ne]||{},Ee[Pe][Ne][Be]=Ee[Pe][Ne][Be]||{},Ee[Pe][Ne][Be][nt]=ue}return Ee})(we.concat(Q))}return le}var Fe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Fe},set:function(fe){le=null,Fe=fe}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(fe){var Q;if(this.ctx.font=fe,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(fe))!==null){var we=Q[1],ve=(Q[2],Q[3]),Ee=Q[4],pe=(Q[5],Q[6]),ue=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ee)[2];Ee=Math.floor(ue==="px"?parseFloat(Ee)*this.pdf.internal.scaleFactor:ue==="em"?parseFloat(Ee)*this.pdf.getFontSize():parseFloat(Ee)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ee);var Pe=(function(gt){var ut,lt,pr=[],tr=gt.trim();if(tr==="")return vj;if(tr in EI)return[EI[tr]];for(;tr!=="";){switch(lt=null,ut=(tr=TI(tr)).charAt(0)){case'"':case"'":lt=rve(tr.substring(1),ut);break;default:lt=nve(tr)}if(lt===null||(pr.push(lt[0]),(tr=TI(lt[1]))!==""&&tr.charAt(0)!==","))return vj;tr=tr.replace(/^,/,"")}return pr})(pe);if(this.fontFaces){var Ne=tve(He(this.pdf,this.fontFaces),Pe.map((function(gt){return{family:gt,stretch:"normal",weight:ve,style:we}})));this.pdf.setFont(Ne.ref.name,Ne.ref.style)}else{var Be="";(ve==="bold"||parseInt(ve,10)>=700||we==="bold")&&(Be="bold"),we==="italic"&&(Be+="italic"),Be.length===0&&(Be="normal");for(var nt="",mt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},kt=0;kt<Pe.length;kt++){if(this.pdf.internal.getFont(Pe[kt],Be,{noFallback:!0,disableWarning:!0})!==void 0){nt=Pe[kt];break}if(Be==="bolditalic"&&this.pdf.internal.getFont(Pe[kt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)nt=Pe[kt],Be="bold";else if(this.pdf.internal.getFont(Pe[kt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){nt=Pe[kt],Be="normal";break}}if(nt===""){for(var Re=0;Re<Pe.length;Re++)if(mt[Pe[Re]]){nt=mt[Pe[Re]];break}}nt=nt===""?"Times":nt,this.pdf.setFont(nt,Be)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(fe){this.ctx.globalCompositeOperation=fe}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(fe){this.ctx.globalAlpha=fe}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(fe){this.ctx.lineDashOffset=fe,H.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(fe){this.ctx.lineDash=fe,H.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(fe){this.ctx.ignoreClearRect=!!fe}})};d.prototype.setLineDash=function(O){this.lineDash=O},d.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},d.prototype.fill=function(){w.call(this,"fill",!1)},d.prototype.stroke=function(){w.call(this,"stroke",!1)},d.prototype.beginPath=function(){this.path=[{type:"begin"}]},d.prototype.moveTo=function(O,R){if(isNaN(O)||isNaN(R))throw Ua.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var W=this.ctx.transform.applyToPoint(new o(O,R));this.path.push({type:"mt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(O,R)},d.prototype.closePath=function(){var O=new o(0,0),R=0;for(R=this.path.length-1;R!==-1;R--)if(this.path[R].type==="begin"&&_a(this.path[R+1])==="object"&&typeof this.path[R+1].x=="number"){O=new o(this.path[R+1].x,this.path[R+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(O.x,O.y)},d.prototype.lineTo=function(O,R){if(isNaN(O)||isNaN(R))throw Ua.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var W=this.ctx.transform.applyToPoint(new o(O,R));this.path.push({type:"lt",x:W.x,y:W.y}),this.ctx.lastPoint=new o(W.x,W.y)},d.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},d.prototype.quadraticCurveTo=function(O,R,W,U){if(isNaN(W)||isNaN(U)||isNaN(O)||isNaN(R))throw Ua.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var K=this.ctx.transform.applyToPoint(new o(W,U)),oe=this.ctx.transform.applyToPoint(new o(O,R));this.path.push({type:"qct",x1:oe.x,y1:oe.y,x:K.x,y:K.y}),this.ctx.lastPoint=new o(K.x,K.y)},d.prototype.bezierCurveTo=function(O,R,W,U,K,oe){if(isNaN(K)||isNaN(oe)||isNaN(O)||isNaN(R)||isNaN(W)||isNaN(U))throw Ua.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var he=this.ctx.transform.applyToPoint(new o(K,oe)),ie=this.ctx.transform.applyToPoint(new o(O,R)),ce=this.ctx.transform.applyToPoint(new o(W,U));this.path.push({type:"bct",x1:ie.x,y1:ie.y,x2:ce.x,y2:ce.y,x:he.x,y:he.y}),this.ctx.lastPoint=new o(he.x,he.y)},d.prototype.arc=function(O,R,W,U,K,oe){if(isNaN(O)||isNaN(R)||isNaN(W)||isNaN(U)||isNaN(K))throw Ua.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(oe=!!oe,!this.ctx.transform.isIdentity){var he=this.ctx.transform.applyToPoint(new o(O,R));O=he.x,R=he.y;var ie=this.ctx.transform.applyToPoint(new o(0,W)),ce=this.ctx.transform.applyToPoint(new o(0,0));W=Math.sqrt(Math.pow(ie.x-ce.x,2)+Math.pow(ie.y-ce.y,2))}Math.abs(K-U)>=2*Math.PI&&(U=0,K=2*Math.PI),this.path.push({type:"arc",x:O,y:R,radius:W,startAngle:U,endAngle:K,counterclockwise:oe})},d.prototype.arcTo=function(O,R,W,U,K){throw new Error("arcTo not implemented.")},d.prototype.rect=function(O,R,W,U){if(isNaN(O)||isNaN(R)||isNaN(W)||isNaN(U))throw Ua.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(O,R),this.lineTo(O+W,R),this.lineTo(O+W,R+U),this.lineTo(O,R+U),this.lineTo(O,R),this.lineTo(O+W,R),this.lineTo(O,R)},d.prototype.fillRect=function(O,R,W,U){if(isNaN(O)||isNaN(R)||isNaN(W)||isNaN(U))throw Ua.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!p.call(this)){var K={};this.lineCap!=="butt"&&(K.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(K.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(O,R,W,U),this.fill(),K.hasOwnProperty("lineCap")&&(this.lineCap=K.lineCap),K.hasOwnProperty("lineJoin")&&(this.lineJoin=K.lineJoin)}},d.prototype.strokeRect=function(O,R,W,U){if(isNaN(O)||isNaN(R)||isNaN(W)||isNaN(U))throw Ua.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(O,R,W,U),this.stroke())},d.prototype.clearRect=function(O,R,W,U){if(isNaN(O)||isNaN(R)||isNaN(W)||isNaN(U))throw Ua.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(O,R,W,U))},d.prototype.save=function(O){O=typeof O!="boolean"||O;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("q");if(this.pdf.setPage(R),O){this.ctx.fontSize=this.pdf.internal.getFontSize();var U=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=U}},d.prototype.restore=function(O){O=typeof O!="boolean"||O;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,W=0;W<this.pdf.internal.getNumberOfPages();W++)this.pdf.setPage(W+1),this.pdf.internal.out("Q");this.pdf.setPage(R),O&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},d.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(O){var R,W,U,K;if(O.isCanvasGradient===!0&&(O=O.getColor()),!O)return{r:0,g:0,b:0,a:0,style:O};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(O))R=0,W=0,U=0,K=0;else{var oe=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(O);if(oe!==null)R=parseInt(oe[1]),W=parseInt(oe[2]),U=parseInt(oe[3]),K=1;else if((oe=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(O))!==null)R=parseInt(oe[1]),W=parseInt(oe[2]),U=parseInt(oe[3]),K=parseFloat(oe[4]);else{if(K=1,typeof O=="string"&&O.charAt(0)!=="#"){var he=new y9(O);O=he.ok?he.toHex():"#000000"}O.length===4?(R=O.substring(1,2),R+=R,W=O.substring(2,3),W+=W,U=O.substring(3,4),U+=U):(R=O.substring(1,3),W=O.substring(3,5),U=O.substring(5,7)),R=parseInt(R,16),W=parseInt(W,16),U=parseInt(U,16)}}return{r:R,g:W,b:U,a:K,style:O}},p=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};d.prototype.fillText=function(O,R,W,U){if(isNaN(R)||isNaN(W)||typeof O!="string")throw Ua.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(U=isNaN(U)?void 0:U,!p.call(this)){var K=ne(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;C.call(this,{text:O,x:R,y:W,scale:oe,angle:K,align:this.textAlign,maxWidth:U})}},d.prototype.strokeText=function(O,R,W,U){if(isNaN(R)||isNaN(W)||typeof O!="string")throw Ua.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){U=isNaN(U)?void 0:U;var K=ne(this.ctx.transform.rotation),oe=this.ctx.transform.scaleX;C.call(this,{text:O,x:R,y:W,scale:oe,renderingMode:"stroke",angle:K,align:this.textAlign,maxWidth:U})}},d.prototype.measureText=function(O){if(typeof O!="string")throw Ua.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var R=this.pdf,W=this.pdf.internal.scaleFactor,U=R.internal.getFontSize(),K=R.getStringUnitWidth(O)*U/R.internal.scaleFactor,oe=function(he){var ie=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ie}}),this};return new oe({width:K*=Math.round(96*W/72*1e4)/1e4})},d.prototype.scale=function(O,R){if(isNaN(O)||isNaN(R))throw Ua.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var W=new c(O,0,0,R,0,0);this.ctx.transform=this.ctx.transform.multiply(W)},d.prototype.rotate=function(O){if(isNaN(O))throw Ua.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var R=new c(Math.cos(O),Math.sin(O),-Math.sin(O),Math.cos(O),0,0);this.ctx.transform=this.ctx.transform.multiply(R)},d.prototype.translate=function(O,R){if(isNaN(O)||isNaN(R))throw Ua.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var W=new c(1,0,0,1,O,R);this.ctx.transform=this.ctx.transform.multiply(W)},d.prototype.transform=function(O,R,W,U,K,oe){if(isNaN(O)||isNaN(R)||isNaN(W)||isNaN(U)||isNaN(K)||isNaN(oe))throw Ua.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var he=new c(O,R,W,U,K,oe);this.ctx.transform=this.ctx.transform.multiply(he)},d.prototype.setTransform=function(O,R,W,U,K,oe){O=isNaN(O)?1:O,R=isNaN(R)?0:R,W=isNaN(W)?0:W,U=isNaN(U)?1:U,K=isNaN(K)?0:K,oe=isNaN(oe)?0:oe,this.ctx.transform=new c(O,R,W,U,K,oe)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};d.prototype.drawImage=function(O,R,W,U,K,oe,he,ie,ce){var Le=this.pdf.getImageProperties(O),le=1,He=1,Fe=1,fe=1;U!==void 0&&ie!==void 0&&(Fe=ie/U,fe=ce/K,le=Le.width/U*ie/U,He=Le.height/K*ce/K),oe===void 0&&(oe=R,he=W,R=0,W=0),U!==void 0&&ie===void 0&&(ie=U,ce=K),U===void 0&&ie===void 0&&(ie=Le.width,ce=Le.height);for(var Q,we=this.ctx.transform.decompose(),ve=ne(we.rotate.shx),Ee=new c,pe=(Ee=(Ee=(Ee=Ee.multiply(we.translate)).multiply(we.skew)).multiply(we.scale)).applyToRectangle(new l(oe-R*Fe,he-W*fe,U*le,K*He)),ue=g.call(this,pe),Pe=[],Ne=0;Ne<ue.length;Ne+=1)Pe.indexOf(ue[Ne])===-1&&Pe.push(ue[Ne]);if(j(Pe),this.autoPaging)for(var Be=Pe[0],nt=Pe[Pe.length-1],mt=Be;mt<nt+1;mt++){this.pdf.setPage(mt);var kt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Re=mt===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ut=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],lt=mt===1?0:gt+(mt-2)*ut;if(this.ctx.clip_path.length!==0){var pr=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(Q,this.posX+this.margin[3],-lt+Re+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=pr}var tr=JSON.parse(JSON.stringify(pe));tr=N([tr],this.posX+this.margin[3],-lt+Re+this.ctx.prevPageLastElemOffset)[0];var ft=(mt>Be||mt<nt)&&v.call(this);ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],kt,ut,null).clip().discardPath()),this.pdf.addImage(O,"JPEG",tr.x,tr.y,tr.w,tr.h,null,null,ve),ft&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(O,"JPEG",pe.x,pe.y,pe.w,pe.h,null,null,ve)};var g=function(O,R,W){var U=[];R=R||this.pdf.internal.pageSize.width,W=W||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var K=this.posY+this.ctx.prevPageLastElemOffset;switch(O.type){default:case"mt":case"lt":U.push(Math.floor((O.y+K)/W)+1);break;case"arc":U.push(Math.floor((O.y+K-O.radius)/W)+1),U.push(Math.floor((O.y+K+O.radius)/W)+1);break;case"qct":var oe=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x,O.y);U.push(Math.floor((oe.y+K)/W)+1),U.push(Math.floor((oe.y+oe.h+K)/W)+1);break;case"bct":var he=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,O.x1,O.y1,O.x2,O.y2,O.x,O.y);U.push(Math.floor((he.y+K)/W)+1),U.push(Math.floor((he.y+he.h+K)/W)+1);break;case"rect":U.push(Math.floor((O.y+K)/W)+1),U.push(Math.floor((O.y+O.h+K)/W)+1)}for(var ie=0;ie<U.length;ie+=1)for(;this.pdf.internal.getNumberOfPages()<U[ie];)b.call(this);return U},b=function(){var O=this.fillStyle,R=this.strokeStyle,W=this.font,U=this.lineCap,K=this.lineWidth,oe=this.lineJoin;this.pdf.addPage(),this.fillStyle=O,this.strokeStyle=R,this.font=W,this.lineCap=U,this.lineWidth=K,this.lineJoin=oe},N=function(O,R,W){for(var U=0;U<O.length;U++)switch(O[U].type){case"bct":O[U].x2+=R,O[U].y2+=W;case"qct":O[U].x1+=R,O[U].y1+=W;default:O[U].x+=R,O[U].y+=W}return O},j=function(O){return O.sort((function(R,W){return R-W}))},w=function(O,R){for(var W,U,K=this.fillStyle,oe=this.strokeStyle,he=this.lineCap,ie=this.lineWidth,ce=Math.abs(ie*this.ctx.transform.scaleX),Le=this.lineJoin,le=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),Fe=[],fe=0;fe<He.length;fe++)if(He[fe].x!==void 0)for(var Q=g.call(this,He[fe]),we=0;we<Q.length;we+=1)Fe.indexOf(Q[we])===-1&&Fe.push(Q[we]);for(var ve=0;ve<Fe.length;ve++)for(;this.pdf.internal.getNumberOfPages()<Fe[ve];)b.call(this);if(j(Fe),this.autoPaging)for(var Ee=Fe[0],pe=Fe[Fe.length-1],ue=Ee;ue<pe+1;ue++){this.pdf.setPage(ue),this.fillStyle=K,this.strokeStyle=oe,this.lineCap=he,this.lineWidth=ce,this.lineJoin=Le;var Pe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ne=ue===1?this.posY+this.margin[0]:this.margin[0],Be=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],mt=ue===1?0:Be+(ue-2)*nt;if(this.ctx.clip_path.length!==0){var kt=this.path;W=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(W,this.posX+this.margin[3],-mt+Ne+this.ctx.prevPageLastElemOffset),S.call(this,O,!0),this.path=kt}if(U=JSON.parse(JSON.stringify(le)),this.path=N(U,this.posX+this.margin[3],-mt+Ne+this.ctx.prevPageLastElemOffset),R===!1||ue===0){var Re=(ue>Ee||ue<pe)&&v.call(this);Re&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Pe,nt,null).clip().discardPath()),S.call(this,O,R),Re&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}else this.lineWidth=ce,S.call(this,O,R),this.lineWidth=ie;this.path=le},S=function(O,R){if((O!=="stroke"||R||!y.call(this))&&(O==="stroke"||R||!p.call(this))){for(var W,U,K=[],oe=this.path,he=0;he<oe.length;he++){var ie=oe[he];switch(ie.type){case"begin":K.push({begin:!0});break;case"close":K.push({close:!0});break;case"mt":K.push({start:ie,deltas:[],abs:[]});break;case"lt":var ce=K.length;if(oe[he-1]&&!isNaN(oe[he-1].x)&&(W=[ie.x-oe[he-1].x,ie.y-oe[he-1].y],ce>0)){for(;ce>=0;ce--)if(K[ce-1].close!==!0&&K[ce-1].begin!==!0){K[ce-1].deltas.push(W),K[ce-1].abs.push(ie);break}}break;case"bct":W=[ie.x1-oe[he-1].x,ie.y1-oe[he-1].y,ie.x2-oe[he-1].x,ie.y2-oe[he-1].y,ie.x-oe[he-1].x,ie.y-oe[he-1].y],K[K.length-1].deltas.push(W);break;case"qct":var Le=oe[he-1].x+2/3*(ie.x1-oe[he-1].x),le=oe[he-1].y+2/3*(ie.y1-oe[he-1].y),He=ie.x+2/3*(ie.x1-ie.x),Fe=ie.y+2/3*(ie.y1-ie.y),fe=ie.x,Q=ie.y;W=[Le-oe[he-1].x,le-oe[he-1].y,He-oe[he-1].x,Fe-oe[he-1].y,fe-oe[he-1].x,Q-oe[he-1].y],K[K.length-1].deltas.push(W);break;case"arc":K.push({deltas:[],abs:[],arc:!0}),Array.isArray(K[K.length-1].abs)&&K[K.length-1].abs.push(ie)}}U=R?null:O==="stroke"?"stroke":"fill";for(var we=!1,ve=0;ve<K.length;ve++)if(K[ve].arc)for(var Ee=K[ve].abs,pe=0;pe<Ee.length;pe++){var ue=Ee[pe];ue.type==="arc"?T.call(this,ue.x,ue.y,ue.radius,ue.startAngle,ue.endAngle,ue.counterclockwise,void 0,R,!we):M.call(this,ue.x,ue.y),we=!0}else if(K[ve].close===!0)this.pdf.internal.out("h"),we=!1;else if(K[ve].begin!==!0){var Pe=K[ve].start.x,Ne=K[ve].start.y;q.call(this,K[ve].deltas,Pe,Ne),we=!0}U&&I.call(this,U),R&&B.call(this)}},P=function(O){var R=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,W=R*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return O-W;case"top":return O+R-W;case"hanging":return O+R-2*W;case"middle":return O+R/2-W;case"ideographic":return O;default:return O}},A=function(O){return O+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};d.prototype.createLinearGradient=function(){var O=function(){};return O.colorStops=[],O.addColorStop=function(R,W){this.colorStops.push([R,W])},O.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},O.isCanvasGradient=!0,O},d.prototype.createPattern=function(){return this.createLinearGradient()},d.prototype.createRadialGradient=function(){return this.createLinearGradient()};var T=function(O,R,W,U,K,oe,he,ie,ce){for(var Le=Z.call(this,W,U,K,oe),le=0;le<Le.length;le++){var He=Le[le];le===0&&(ce?E.call(this,He.x1+O,He.y1+R):M.call(this,He.x1+O,He.y1+R)),G.call(this,O,R,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}ie?B.call(this):I.call(this,he)},I=function(O){switch(O){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},B=function(){this.pdf.clip(),this.pdf.discardPath()},E=function(O,R){this.pdf.internal.out(r(O)+" "+n(R)+" m")},C=function(O){var R;switch(O.align){case"right":case"end":R="right";break;case"center":R="center";break;default:R="left"}var W=this.pdf.getTextDimensions(O.text),U=P.call(this,O.y),K=A.call(this,U)-W.h,oe=this.ctx.transform.applyToPoint(new o(O.x,U)),he=this.ctx.transform.decompose(),ie=new c;ie=(ie=(ie=ie.multiply(he.translate)).multiply(he.skew)).multiply(he.scale);for(var ce,Le,le,He=this.ctx.transform.applyToRectangle(new l(O.x,U,W.w,W.h)),Fe=ie.applyToRectangle(new l(O.x,K,W.w,W.h)),fe=g.call(this,Fe),Q=[],we=0;we<fe.length;we+=1)Q.indexOf(fe[we])===-1&&Q.push(fe[we]);if(j(Q),this.autoPaging)for(var ve=Q[0],Ee=Q[Q.length-1],pe=ve;pe<Ee+1;pe++){this.pdf.setPage(pe);var ue=pe===1?this.posY+this.margin[0]:this.margin[0],Pe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ne=this.pdf.internal.pageSize.height-this.margin[2],Be=Ne-this.margin[0],nt=this.pdf.internal.pageSize.width-this.margin[1],mt=nt-this.margin[3],kt=pe===1?0:Pe+(pe-2)*Be;if(this.ctx.clip_path.length!==0){var Re=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=N(ce,this.posX+this.margin[3],-1*kt+ue),S.call(this,"fill",!0),this.path=Re}var gt=N([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-kt+ue+this.ctx.prevPageLastElemOffset)[0];O.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*O.scale),le=this.lineWidth,this.lineWidth=le*O.scale);var ut=this.autoPaging!=="text";if(ut||gt.y+gt.h<=Ne){if(ut||gt.y>=ue&&gt.x<=nt){var lt=ut?O.text:this.pdf.splitTextToSize(O.text,O.maxWidth||nt-gt.x)[0],pr=N([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-kt+ue+this.ctx.prevPageLastElemOffset)[0],tr=ut&&(pe>ve||pe<Ee)&&v.call(this);tr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],mt,Be,null).clip().discardPath()),this.pdf.text(lt,pr.x,pr.y,{angle:O.angle,align:R,renderingMode:O.renderingMode}),tr&&this.pdf.restoreGraphicsState()}}else gt.y<Ne&&(this.ctx.prevPageLastElemOffset+=Ne-gt.y);O.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=le)}else O.scale>=.01&&(Le=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Le*O.scale),le=this.lineWidth,this.lineWidth=le*O.scale),this.pdf.text(O.text,oe.x+this.posX,oe.y+this.posY,{angle:O.angle,align:R,renderingMode:O.renderingMode,maxWidth:O.maxWidth}),O.scale>=.01&&(this.pdf.setFontSize(Le),this.lineWidth=le)},M=function(O,R,W,U){W=W||0,U=U||0,this.pdf.internal.out(r(O+W)+" "+n(R+U)+" l")},q=function(O,R,W){return this.pdf.lines(O,R,W,null,null)},G=function(O,R,W,U,K,oe,he,ie){this.pdf.internal.out([t(s(W+O)),t(i(U+R)),t(s(K+O)),t(i(oe+R)),t(s(he+O)),t(i(ie+R)),"c"].join(" "))},Z=function(O,R,W,U){for(var K=2*Math.PI,oe=Math.PI/2;R>W;)R-=K;var he=Math.abs(W-R);he<K&&U&&(he=K-he);for(var ie=[],ce=U?-1:1,Le=R;he>1e-5;){var le=Le+ce*Math.min(he,oe);ie.push(te.call(this,O,Le,le)),he-=Math.abs(le-Le),Le=le}return ie},te=function(O,R,W){var U=(W-R)/2,K=O*Math.cos(U),oe=O*Math.sin(U),he=K,ie=-oe,ce=he*he+ie*ie,Le=ce+he*K+ie*oe,le=4/3*(Math.sqrt(2*ce*Le)-Le)/(he*oe-ie*K),He=he-le*ie,Fe=ie+le*he,fe=He,Q=-Fe,we=U+R,ve=Math.cos(we),Ee=Math.sin(we);return{x1:O*Math.cos(R),y1:O*Math.sin(R),x2:He*ve-Fe*Ee,y2:He*Ee+Fe*ve,x3:fe*ve-Q*Ee,y3:fe*Ee+Q*ve,x4:O*Math.cos(W),y4:O*Math.sin(W)}},ne=function(O){return 180*O/Math.PI},J=function(O,R,W,U,K,oe){var he=O+.5*(W-O),ie=R+.5*(U-R),ce=K+.5*(W-K),Le=oe+.5*(U-oe),le=Math.min(O,K,he,ce),He=Math.max(O,K,he,ce),Fe=Math.min(R,oe,ie,Le),fe=Math.max(R,oe,ie,Le);return new l(le,Fe,He-le,fe-Fe)},ee=function(O,R,W,U,K,oe,he,ie){var ce,Le,le,He,Fe,fe,Q,we,ve,Ee,pe,ue,Pe,Ne,Be=W-O,nt=U-R,mt=K-W,kt=oe-U,Re=he-K,gt=ie-oe;for(Le=0;Le<41;Le++)ve=(Q=(le=O+(ce=Le/40)*Be)+ce*((Fe=W+ce*mt)-le))+ce*(Fe+ce*(K+ce*Re-Fe)-Q),Ee=(we=(He=R+ce*nt)+ce*((fe=U+ce*kt)-He))+ce*(fe+ce*(oe+ce*gt-fe)-we),Le==0?(pe=ve,ue=Ee,Pe=ve,Ne=Ee):(pe=Math.min(pe,ve),ue=Math.min(ue,Ee),Pe=Math.max(Pe,ve),Ne=Math.max(Ne,Ee));return new l(Math.round(pe),Math.round(ue),Math.round(Pe-pe),Math.round(Ne-ue))},H=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var O,R,W=(O=this.ctx.lineDash,R=this.ctx.lineDashOffset,JSON.stringify({lineDash:O,lineDashOffset:R}));this.prevLineDash!==W&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=W)}}})(Zr.API),(function(e){var t=function(i){var o,l,c,u,f,d,m,p,y,v;for(l=[],c=0,u=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;u>c;c+=4)(f=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(d=(f=((f=((f=((f=(f-(v=f%85))/85)-(y=f%85))/85)-(p=f%85))/85)-(m=f%85))/85)%85,l.push(d+33,m+33,p+33,y+33,v+33)):l.push(122);return(function(g,b){for(var N=b;N>0;N--)g.pop()})(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,u,f,d=String,m="length",p=255,y="charCodeAt",v="slice",g="replace";for(i[v](-2),i=i[v](0,-2)[g](/\s/g,"")[g]("z","!!!!!"),c=[],u=0,f=(i+=o="uuuuu"[v](i[m]%5||5))[m];f>u;u+=5)l=52200625*(i[y](u)-33)+614125*(i[y](u+1)-33)+7225*(i[y](u+2)-33)+85*(i[y](u+3)-33)+(i[y](u+4)-33),c.push(p&l>>24,p&l>>16,p&l>>8,p&l);return(function(b,N){for(var j=N;j>0;j--)b.pop()})(c,o[m]),d.fromCharCode.apply(d,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=gk(o)).reduce((function(c,u){return c+String.fromCharCode(u)}),"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",u=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),u.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),u.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),u.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map((function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)})).join("")+">",u.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),u.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:u.reverse().join(" ")}}})(Zr.API),(function(e){e.loadFile=function(t,r,n){return(function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(c,u,f){var d=new XMLHttpRequest,m=0,p=function(y){var v=y.length,g=[],b=String.fromCharCode;for(m=0;m<v;m+=1)g.push(b(255&y.charCodeAt(m)));return g.join("")};if(d.open("GET",c,!u),d.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(d.onload=function(){d.status===200?f(p(this.responseText)):f(void 0)}),d.send(null),u&&d.status===200)return p(d.responseText)})(s,i,o)}catch{}return l})(t,r,n)},e.loadImageFile=e.loadFile})(Zr.API),(function(e){function t(){return(en.html2canvas?Promise.resolve(en.html2canvas):_j(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))})).then((function(o){return o.default?o.default:o}))}function r(){return(en.DOMPurify?Promise.resolve(en.DOMPurify):_j(()=>import("./purify.es-BpVZ_uCt.js"),[])).catch((function(o){return Promise.reject(new Error("Could not load dompurify: "+o))})).then((function(o){return o.default?o.default:o}))}var n=function(o){var l=_a(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var u in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[u]=l.style[u];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),u=o.convert(Promise.resolve(),c);return u=(u=u.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then((function(){switch(l=l||(function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(o)){case"string":return this.then(r).then((function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})}));case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}}))},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=(function c(u,f){for(var d=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),m=u.firstChild;m;m=m.nextSibling)f!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||d.appendChild(c(m,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(d.width=u.width,d.height=u.height,d.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(d.value=u.value),d.addEventListener("load",(function(){d.scrollTop=u.scrollTop,d.scrollLeft=u.scrollLeft}),!0)),d})(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)})).then((function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then((function(l){var c=this.opt.jsPDF,u=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,d=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete d.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=u,u)for(var m=0;m<u.length;++m){var p=u[m],y=p.src.find((function(v){return v.format==="truetype"}));y&&c.addFont(y.url,p.ref.name,p.ref.style)}return d.windowHeight=d.windowHeight||0,d.windowHeight=d.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):d.windowHeight,c.context2d.save(!0),l(this.prop.container,d)})).then((function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)}))},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o}))},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(o,l)}))},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}}))},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map((function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}}),this);return this.then((function(){return this.thenList(l)}))},i.prototype.get=function(o,l){return this.then((function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c}))},i.prototype.setMargin=function(o){return this.then((function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o})).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,u){return Math.floor(c*u/72*96)}return this.then((function(){(o=o||Zr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o}))},i.prototype.setProgress=function(o,l,c,u){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),u!=null&&(this.progress.stack=u),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,u){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,u?this.progress.stack.concat(u):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,(function(u,f){return c.updateProgress(null,null,1,[u]),Promise.prototype.then.call(this,(function(d){return c.updateProgress(null,u),d})).then(u,f).then((function(d){return c.updateProgress(1),d}))}))},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var u=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=c.call(u,o,l);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach((function(c){l=l.thenCore(c)})),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then((function(){throw new Error(o)}))},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,Zr.getPageSize=function(o,l,c){if(_a(o)==="object"){var u=o;o=u.orientation,l=u.unit||l,c=u.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,d=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var p,y=0,v=0;if(m.hasOwnProperty(d))y=m[d][1]/f,v=m[d][0]/f;else try{y=c[1],v=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",v>y&&(p=v,v=y,y=p);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",y>v&&(p=v,v=y,y=p)}return{width:v,height:y,unit:l,k:f,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(jk):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}})(Zr.API),Zr.API.addJS=function(e){return PI=e,this.internal.events.subscribe("postPutResources",(function(){Ev=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Ev+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),OI=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+PI+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){Ev!==void 0&&OI!==void 0&&this.internal.out("/Names <</JavaScript "+Ev+" 0 R>>")})),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(i=0;i<u;i++){var d=r.internal.newObject();f.push(d);var m=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var p=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+p+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var o={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])})(Zr.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,s,i,o,l){var c,u=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=(function(d){for(var m,p=256*d.charCodeAt(4)+d.charCodeAt(5),y=d.length,v={width:0,height:0,numcomponents:1},g=4;g<y;g+=2){if(g+=p,t.indexOf(d.charCodeAt(g+1))!==-1){m=256*d.charCodeAt(g+5)+d.charCodeAt(g+6),v={width:256*d.charCodeAt(g+7)+d.charCodeAt(g+8),height:m,numcomponents:d.charCodeAt(g+9)};break}p=256*d.charCodeAt(g+2)+d.charCodeAt(g+3)}return v})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:u,index:n,alias:s}}return f}})(Zr.API);var Gh,Cv,II,DI,LI,ave=(function(){var e,t,r;function n(i){var o,l,c,u,f,d,m,p,y,v,g,b,N,j;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},d=null;;){switch(o=this.readUInt32(),y=(function(){var w,S;for(S=[],w=0;w<4;++w)S.push(String.fromCharCode(this.data[this.pos++]));return S}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":d&&this.animation.frames.push(d),this.pos+=4,d={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),u=this.readUInt16()||100,d.delay=1e3*f/u,d.disposeOp=this.data[this.pos++],d.blendOp=this.data[this.pos++],d.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,o-=4),i=d?.data||this.imgData,b=0;0<=o?b<o:b>o;0<=o?++b:--b)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((v=c-this.transparency.indexed.length)>0)for(N=0;0<=v?N<v:N>v;0<=v?++N:--N)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":m=(g=this.read(o)).indexOf(0),p=String.fromCharCode.apply(String,g.slice(0,m)),this.text[p]=String.fromCharCode.apply(String,g.slice(m+1));break;case"IEND":return d&&this.animation.frames.push(d),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(j=this.colorType)===4||j===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,u=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(d,m,p,y){var v,g,b,N,j,w,S,P,A,T,I,B,E,C,M,q,G,Z,te,ne,J,ee=Math.ceil((u.width-d)/p),H=Math.ceil((u.height-m)/y),O=u.width==ee&&u.height==H;for(C=o*ee,B=O?l:new Uint8Array(C*H),w=i.length,E=0,g=0;E<H&&c<w;){switch(i[c++]){case 0:for(N=G=0;G<C;N=G+=1)B[g++]=i[c++];break;case 1:for(N=Z=0;Z<C;N=Z+=1)v=i[c++],j=N<o?0:B[g-o],B[g++]=(v+j)%256;break;case 2:for(N=te=0;te<C;N=te+=1)v=i[c++],b=(N-N%o)/o,M=E&&B[(E-1)*C+b*o+N%o],B[g++]=(M+v)%256;break;case 3:for(N=ne=0;ne<C;N=ne+=1)v=i[c++],b=(N-N%o)/o,j=N<o?0:B[g-o],M=E&&B[(E-1)*C+b*o+N%o],B[g++]=(v+Math.floor((j+M)/2))%256;break;case 4:for(N=J=0;J<C;N=J+=1)v=i[c++],b=(N-N%o)/o,j=N<o?0:B[g-o],E===0?M=q=0:(M=B[(E-1)*C+b*o+N%o],q=b&&B[(E-1)*C+(b-1)*o+N%o]),S=j+M-q,P=Math.abs(S-j),T=Math.abs(S-M),I=Math.abs(S-q),A=P<=T&&P<=I?j:T<=I?M:q,B[g++]=(v+A)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!O){var R=((m+E*y)*u.width+d)*o,W=E*C;for(N=0;N<ee;N+=1){for(var U=0;U<o;U+=1)l[R++]=B[W++];R+=(p-1)*o}}E++}}return i=Fge(i),u.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,u,f,d,m,p;for(l=this.palette,f=this.transparency.indexed||[],u=new Uint8Array((f.length||0)+l.length),c=0,i=0,o=d=0,m=l.length;d<m;o=d+=3)u[c++]=l[o],u[c++]=l[o+1],u[c++]=l[o+2],u[c++]=(p=f[i++])!=null?p:255;return u},n.prototype.copyToImageData=function(i,o){var l,c,u,f,d,m,p,y,v,g,b;if(c=this.colors,v=null,l=this.hasAlphaChannel,this.palette.length&&(v=(b=this._decodedPalette)!=null?b:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(u=i.data||i).length,d=v||o,f=m=0,c===1)for(;f<y;)p=v?4*o[f/4]:m,g=d[p++],u[f++]=g,u[f++]=g,u[f++]=g,u[f++]=l?d[p++]:255,m=p;else for(;f<y;)p=v?4*o[f/4]:m,u[f++]=d[p++],u[f++]=d[p++],u[f++]=d[p++],u[f++]=l?d[p++]:255,m=p},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(en)==="[object Window]"){try{t=en.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,u,f,d,m,p;if(this.animation){for(p=[],l=f=0,d=(m=this.animation.frames).length;f<d;l=++f)o=m[l],c=i.createImageData(o.width,o.height),u=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,u),o.imageData=c,p.push(o.image=e(c));return p}},n.prototype.renderFrame=function(i,o){var l,c,u;return l=(c=this.animation.frames)[o],u=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),u?.disposeOp===1?i.clearRect(u.xOffset,u.yOffset,u.width,u.height):u?.disposeOp===2&&i.putImageData(u.imageData,u.xOffset,u.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,u,f,d,m=this;return l=0,d=this.animation,u=d.numFrames,c=d.frames,f=d.numPlays,(o=function(){var p,y;if(p=l++%u,y=c[p],m.renderFrame(i,p),u>1&&l/u<f)return m.animation._timeout=setTimeout(o,y.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n})();function sve(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var u=!0,f=[],d=0,m=null,p=0,y=null;for(this.width=r,this.height=n;u&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,y=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var v=e[t++];d=e[t++]|e[t++]<<8,m=e[t++],(1&v)==0&&(m=null),p=v>>2&7,t++;break;case 254:for(;;){if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var g=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,N=e[t++]|e[t++]<<8,j=e[t++]|e[t++]<<8,w=e[t++],S=w>>6&1,P=1<<(7&w)+1,A=l,T=c,I=!1;w>>7&&(I=!0,A=t,T=P,t+=3*P);var B=t;for(t++;;){var E;if(!((E=e[t++])>=0))throw Error("Invalid block size");if(E===0)break;t+=E}f.push({x:g,y:b,width:N,height:j,has_local_palette:I,palette_offset:A,palette_size:T,data_offset:B,data_length:t-B,transparent_index:m,interlaced:!!S,delay:d,disposal:p});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return y},this.frameInfo=function(C){if(C<0||C>=f.length)throw new Error("Frame index out of range.");return f[C]},this.decodeAndBlitFrameBGRA=function(C,M){var q=this.frameInfo(C),G=q.width*q.height,Z=new Uint8Array(G);FI(e,q.data_offset,Z,G);var te=q.palette_offset,ne=q.transparent_index;ne===null&&(ne=256);var J=q.width,ee=r-J,H=J,O=4*(q.y*r+q.x),R=4*((q.y+q.height)*r+q.x),W=O,U=4*ee;q.interlaced===!0&&(U+=4*r*7);for(var K=8,oe=0,he=Z.length;oe<he;++oe){var ie=Z[oe];if(H===0&&(H=J,(W+=U)>=R&&(U=4*ee+4*r*(K-1),W=O+(J+ee)*(K<<1),K>>=1)),ie===ne)W+=4;else{var ce=e[te+3*ie],Le=e[te+3*ie+1],le=e[te+3*ie+2];M[W++]=le,M[W++]=Le,M[W++]=ce,M[W++]=255}--H}},this.decodeAndBlitFrameRGBA=function(C,M){var q=this.frameInfo(C),G=q.width*q.height,Z=new Uint8Array(G);FI(e,q.data_offset,Z,G);var te=q.palette_offset,ne=q.transparent_index;ne===null&&(ne=256);var J=q.width,ee=r-J,H=J,O=4*(q.y*r+q.x),R=4*((q.y+q.height)*r+q.x),W=O,U=4*ee;q.interlaced===!0&&(U+=4*r*7);for(var K=8,oe=0,he=Z.length;oe<he;++oe){var ie=Z[oe];if(H===0&&(H=J,(W+=U)>=R&&(U=4*ee+4*r*(K-1),W=O+(J+ee)*(K<<1),K>>=1)),ie===ne)W+=4;else{var ce=e[te+3*ie],Le=e[te+3*ie+1],le=e[te+3*ie+2];M[W++]=ce,M[W++]=Le,M[W++]=le,M[W++]=255}--H}}}function FI(e,t,r,n){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,u=(1<<c)-1,f=0,d=0,m=0,p=e[t++],y=new Int32Array(4096),v=null;;){for(;f<16&&p!==0;)d|=e[t++]<<f,f+=8,p===1?p=e[t++]:--p;if(f<c)break;var g=d&u;if(d>>=c,f-=c,g!==i){if(g===o)break;for(var b=g<l?g:v,N=0,j=b;j>i;)j=y[j]>>8,++N;var w=j;if(m+N+(b!==g?1:0)>n)return void Ua.log("Warning, gif stream longer than expected.");r[m++]=w;var S=m+=N;for(b!==g&&(r[m++]=w),j=b;N--;)j=y[j],r[--S]=255&j,j>>=8;v!==null&&l<4096&&(y[l++]=v<<8|w,l>=u+1&&c<12&&(++c,u=u<<1|1)),v=g}else l=o+1,u=(1<<(c=s+1))-1,v=null}return m!==n&&Ua.log("Warning, gif stream shorter than expected."),r}function yj(e){var t,r,n,s,i,o=Math.floor,l=new Array(64),c=new Array(64),u=new Array(64),f=new Array(64),d=new Array(65535),m=new Array(65535),p=new Array(64),y=new Array(64),v=[],g=0,b=7,N=new Array(64),j=new Array(64),w=new Array(64),S=new Array(256),P=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],T=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Z(O,R){for(var W=0,U=0,K=new Array,oe=1;oe<=16;oe++){for(var he=1;he<=O[oe];he++)K[R[U]]=[],K[R[U]][0]=W,K[R[U]][1]=oe,U++,W++;W*=2}return K}function te(O){for(var R=O[0],W=O[1]-1;W>=0;)R&1<<W&&(g|=1<<b),W--,--b<0&&(g==255?(ne(255),ne(0)):ne(g),b=7,g=0)}function ne(O){v.push(O)}function J(O){ne(O>>8&255),ne(255&O)}function ee(O,R,W,U,K){for(var oe,he=K[0],ie=K[240],ce=(function(Ee,pe){var ue,Pe,Ne,Be,nt,mt,kt,Re,gt,ut,lt=0;for(gt=0;gt<8;++gt){ue=Ee[lt],Pe=Ee[lt+1],Ne=Ee[lt+2],Be=Ee[lt+3],nt=Ee[lt+4],mt=Ee[lt+5],kt=Ee[lt+6];var pr=ue+(Re=Ee[lt+7]),tr=ue-Re,ft=Pe+kt,$t=Pe-kt,er=Ne+mt,qe=Ne-mt,bt=Be+nt,Nr=Be-nt,rr=pr+bt,Lr=pr-bt,Er=ft+er,or=ft-er;Ee[lt]=rr+Er,Ee[lt+4]=rr-Er;var Ut=.707106781*(or+Lr);Ee[lt+2]=Lr+Ut,Ee[lt+6]=Lr-Ut;var wr=.382683433*((rr=Nr+qe)-(or=$t+tr)),kr=.5411961*rr+wr,Gr=1.306562965*or+wr,hn=.707106781*(Er=qe+$t),On=tr+hn,br=tr-hn;Ee[lt+5]=br+kr,Ee[lt+3]=br-kr,Ee[lt+1]=On+Gr,Ee[lt+7]=On-Gr,lt+=8}for(lt=0,gt=0;gt<8;++gt){ue=Ee[lt],Pe=Ee[lt+8],Ne=Ee[lt+16],Be=Ee[lt+24],nt=Ee[lt+32],mt=Ee[lt+40],kt=Ee[lt+48];var Yn=ue+(Re=Ee[lt+56]),on=ue-Re,Xe=Pe+kt,wt=Pe-kt,Wt=Ne+mt,re=Ne-mt,me=Be+nt,ye=Be-nt,Ae=Yn+me,Ce=Yn-me,Oe=Xe+Wt,Ke=Xe-Wt;Ee[lt]=Ae+Oe,Ee[lt+32]=Ae-Oe;var ct=.707106781*(Ke+Ce);Ee[lt+16]=Ce+ct,Ee[lt+48]=Ce-ct;var Ge=.382683433*((Ae=ye+re)-(Ke=wt+on)),Je=.5411961*Ae+Ge,ze=1.306562965*Ke+Ge,De=.707106781*(Oe=re+wt),tt=on+De,pt=on-De;Ee[lt+40]=pt+Je,Ee[lt+24]=pt-Je,Ee[lt+8]=tt+ze,Ee[lt+56]=tt-ze,lt++}for(gt=0;gt<64;++gt)ut=Ee[gt]*pe[gt],p[gt]=ut>0?ut+.5|0:ut-.5|0;return p})(O,R),Le=0;Le<64;++Le)y[A[Le]]=ce[Le];var le=y[0]-W;W=y[0],le==0?te(U[0]):(te(U[m[oe=32767+le]]),te(d[oe]));for(var He=63;He>0&&y[He]==0;)He--;if(He==0)return te(he),W;for(var Fe,fe=1;fe<=He;){for(var Q=fe;y[fe]==0&&fe<=He;)++fe;var we=fe-Q;if(we>=16){Fe=we>>4;for(var ve=1;ve<=Fe;++ve)te(ie);we&=15}oe=32767+y[fe],te(K[(we<<4)+m[oe]]),te(d[oe]),fe++}return He!=63&&te(he),W}function H(O){O=Math.min(Math.max(O,1),100),i!=O&&((function(R){for(var W=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],U=0;U<64;U++){var K=o((W[U]*R+50)/100);K=Math.min(Math.max(K,1),255),l[A[U]]=K}for(var oe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],he=0;he<64;he++){var ie=o((oe[he]*R+50)/100);ie=Math.min(Math.max(ie,1),255),c[A[he]]=ie}for(var ce=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Le=0,le=0;le<8;le++)for(var He=0;He<8;He++)u[Le]=1/(l[A[Le]]*ce[le]*ce[He]*8),f[Le]=1/(c[A[Le]]*ce[le]*ce[He]*8),Le++})(O<50?Math.floor(5e3/O):Math.floor(200-2*O)),i=O)}this.encode=function(O,R){R&&H(R),v=new Array,g=0,b=7,J(65496),J(65504),J(16),ne(74),ne(70),ne(73),ne(70),ne(0),ne(1),ne(1),ne(0),J(1),J(1),ne(0),ne(0),(function(){J(65499),J(132),ne(0);for(var Pe=0;Pe<64;Pe++)ne(l[Pe]);ne(1);for(var Ne=0;Ne<64;Ne++)ne(c[Ne])})(),(function(Pe,Ne){J(65472),J(17),ne(8),J(Ne),J(Pe),ne(3),ne(1),ne(17),ne(0),ne(2),ne(17),ne(1),ne(3),ne(17),ne(1)})(O.width,O.height),(function(){J(65476),J(418),ne(0);for(var Pe=0;Pe<16;Pe++)ne(T[Pe+1]);for(var Ne=0;Ne<=11;Ne++)ne(I[Ne]);ne(16);for(var Be=0;Be<16;Be++)ne(B[Be+1]);for(var nt=0;nt<=161;nt++)ne(E[nt]);ne(1);for(var mt=0;mt<16;mt++)ne(C[mt+1]);for(var kt=0;kt<=11;kt++)ne(M[kt]);ne(17);for(var Re=0;Re<16;Re++)ne(q[Re+1]);for(var gt=0;gt<=161;gt++)ne(G[gt])})(),J(65498),J(12),ne(3),ne(1),ne(0),ne(2),ne(17),ne(3),ne(17),ne(0),ne(63),ne(0);var W=0,U=0,K=0;g=0,b=7,this.encode.displayName="_encode_";for(var oe,he,ie,ce,Le,le,He,Fe,fe,Q=O.data,we=O.width,ve=O.height,Ee=4*we,pe=0;pe<ve;){for(oe=0;oe<Ee;){for(Le=Ee*pe+oe,He=-1,Fe=0,fe=0;fe<64;fe++)le=Le+(Fe=fe>>3)*Ee+(He=4*(7&fe)),pe+Fe>=ve&&(le-=Ee*(pe+1+Fe-ve)),oe+He>=Ee&&(le-=oe+He-Ee+4),he=Q[le++],ie=Q[le++],ce=Q[le++],N[fe]=(P[he]+P[ie+256>>0]+P[ce+512>>0]>>16)-128,j[fe]=(P[he+768>>0]+P[ie+1024>>0]+P[ce+1280>>0]>>16)-128,w[fe]=(P[he+1280>>0]+P[ie+1536>>0]+P[ce+1792>>0]>>16)-128;W=ee(N,u,W,t,n),U=ee(j,f,U,r,s),K=ee(w,f,K,r,s),oe+=32}pe+=8}if(b>=0){var ue=[];ue[1]=b+1,ue[0]=(1<<b+1)-1,te(ue)}return J(65497),new Uint8Array(v)},e=e||50,(function(){for(var O=String.fromCharCode,R=0;R<256;R++)S[R]=O(R)})(),t=Z(T,I),r=Z(C,M),n=Z(B,E),s=Z(q,G),(function(){for(var O=1,R=2,W=1;W<=15;W++){for(var U=O;U<R;U++)m[32767+U]=W,d[32767+U]=[],d[32767+U][1]=W,d[32767+U][0]=U;for(var K=-(R-1);K<=-O;K++)m[32767+K]=W,d[32767+K]=[],d[32767+K][1]=W,d[32767+K][0]=R-1+K;O<<=1,R<<=1}})(),(function(){for(var O=0;O<256;O++)P[O]=19595*O,P[O+256>>0]=38470*O,P[O+512>>0]=7471*O+32768,P[O+768>>0]=-11059*O,P[O+1024>>0]=-21709*O,P[O+1280>>0]=32768*O+8421375,P[O+1536>>0]=-27439*O,P[O+1792>>0]=-5329*O})(),H(e)}function Eu(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function MI(e){function t(T){if(!T)throw Error("assert :P")}function r(T,I,B){for(var E=0;4>E;E++)if(T[I+E]!=B.charCodeAt(E))return!0;return!1}function n(T,I,B,E,C){for(var M=0;M<C;M++)T[I+M]=B[E+M]}function s(T,I,B,E){for(var C=0;C<E;C++)T[I+C]=B}function i(T){return new Int32Array(T)}function o(T,I){for(var B=[],E=0;E<T;E++)B.push(new I);return B}function l(T,I){var B=[];return(function E(C,M,q){for(var G=q[M],Z=0;Z<G&&(C.push(q.length>M+1?[]:new I),!(q.length<M+1));Z++)E(C[Z],M+1,q)})(B,0,T),B}var c=function(){var T=this;function I(_,F){for(var Y=1<<F-1>>>0;_&Y;)Y>>>=1;return Y?(_&Y-1)+Y:_}function B(_,F,Y,se,xe){t(!(se%Y));do _[F+(se-=Y)]=xe;while(0<se)}function E(_,F,Y,se,xe){if(t(2328>=xe),512>=xe)var je=i(512);else if((je=i(xe))==null)return 0;return(function(Se,Te,Ie,Me,Qe,xt){var dt,st,qt=Te,At=1<<Ie,Ye=i(16),et=i(16);for(t(Qe!=0),t(Me!=null),t(Se!=null),t(0<Ie),st=0;st<Qe;++st){if(15<Me[st])return 0;++Ye[Me[st]]}if(Ye[0]==Qe)return 0;for(et[1]=0,dt=1;15>dt;++dt){if(Ye[dt]>1<<dt)return 0;et[dt+1]=et[dt]+Ye[dt]}for(st=0;st<Qe;++st)dt=Me[st],0<Me[st]&&(xt[et[dt]++]=st);if(et[15]==1)return(Me=new C).g=0,Me.value=xt[0],B(Se,qt,1,At,Me),At;var Tt,Ot=-1,Lt=At-1,gr=0,lr=1,qr=1,dr=1<<Ie;for(st=0,dt=1,Qe=2;dt<=Ie;++dt,Qe<<=1){if(lr+=qr<<=1,0>(qr-=Ye[dt]))return 0;for(;0<Ye[dt];--Ye[dt])(Me=new C).g=dt,Me.value=xt[st++],B(Se,qt+gr,Qe,dr,Me),gr=I(gr,dt)}for(dt=Ie+1,Qe=2;15>=dt;++dt,Qe<<=1){if(lr+=qr<<=1,0>(qr-=Ye[dt]))return 0;for(;0<Ye[dt];--Ye[dt]){if(Me=new C,(gr&Lt)!=Ot){for(qt+=dr,Tt=1<<(Ot=dt)-Ie;15>Ot&&!(0>=(Tt-=Ye[Ot]));)++Ot,Tt<<=1;At+=dr=1<<(Tt=Ot-Ie),Se[Te+(Ot=gr&Lt)].g=Tt+Ie,Se[Te+Ot].value=qt-Te-Ot}Me.g=dt-Ie,Me.value=xt[st++],B(Se,qt+(gr>>Ie),Qe,dr,Me),gr=I(gr,dt)}}return lr!=2*et[15]-1?0:At})(_,F,Y,se,xe,je)}function C(){this.value=this.g=0}function M(){this.value=this.g=0}function q(){this.G=o(5,C),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(dn,M)}function G(_,F,Y,se){t(_!=null),t(F!=null),t(2147483648>se),_.Ca=254,_.I=0,_.b=-8,_.Ka=0,_.oa=F,_.pa=Y,_.Jd=F,_.Yc=Y+se,_.Zc=4<=se?Y+se-4+1:Y,oe(_)}function Z(_,F){for(var Y=0;0<F--;)Y|=ie(_,128)<<F;return Y}function te(_,F){var Y=Z(_,F);return he(_)?-Y:Y}function ne(_,F,Y,se){var xe,je=0;for(t(_!=null),t(F!=null),t(4294967288>se),_.Sb=se,_.Ra=0,_.u=0,_.h=0,4<se&&(se=4),xe=0;xe<se;++xe)je+=F[Y+xe]<<8*xe;_.Ra=je,_.bb=se,_.oa=F,_.pa=Y}function J(_){for(;8<=_.u&&_.bb<_.Sb;)_.Ra>>>=8,_.Ra+=_.oa[_.pa+_.bb]<<Fi-8>>>0,++_.bb,_.u-=8;W(_)&&(_.h=1,_.u=0)}function ee(_,F){if(t(0<=F),!_.h&&F<=Pa){var Y=R(_)&Ts[F];return _.u+=F,J(_),Y}return _.h=1,_.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function O(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(_){return _.Ra>>>(_.u&Fi-1)>>>0}function W(_){return t(_.bb<=_.Sb),_.h||_.bb==_.Sb&&_.u>Fi}function U(_,F){_.u=F,_.h=W(_)}function K(_){_.u>=gs&&(t(_.u>=gs),J(_))}function oe(_){t(_!=null&&_.oa!=null),_.pa<_.Zc?(_.I=(_.oa[_.pa++]|_.I<<8)>>>0,_.b+=8):(t(_!=null&&_.oa!=null),_.pa<_.Yc?(_.b+=8,_.I=_.oa[_.pa++]|_.I<<8):_.Ka?_.b=0:(_.I<<=8,_.b+=8,_.Ka=1))}function he(_){return Z(_,1)}function ie(_,F){var Y=_.Ca;0>_.b&&oe(_);var se=_.b,xe=Y*F>>>8,je=(_.I>>>se>xe)+0;for(je?(Y-=xe,_.I-=xe+1<<se>>>0):Y=xe+1,se=Y,xe=0;256<=se;)xe+=8,se>>=8;return se=7^xe+ua[se],_.b-=se,_.Ca=(Y<<se)-1,je}function ce(_,F,Y){_[F+0]=Y>>24&255,_[F+1]=Y>>16&255,_[F+2]=Y>>8&255,_[F+3]=Y>>0&255}function Le(_,F){return _[F+0]<<0|_[F+1]<<8}function le(_,F){return Le(_,F)|_[F+2]<<16}function He(_,F){return Le(_,F)|Le(_,F+2)<<16}function Fe(_,F){var Y=1<<F;return t(_!=null),t(0<F),_.X=i(Y),_.X==null?0:(_.Mb=32-F,_.Xa=F,1)}function fe(_,F){t(_!=null),t(F!=null),t(_.Xa==F.Xa),n(F.X,0,_.X,0,1<<F.Xa)}function Q(){this.X=[],this.Xa=this.Mb=0}function we(_,F,Y,se){t(Y!=null),t(se!=null);var xe=Y[0],je=se[0];return xe==0&&(xe=(_*je+F/2)/F),je==0&&(je=(F*xe+_/2)/_),0>=xe||0>=je?0:(Y[0]=xe,se[0]=je,1)}function ve(_,F){return _+(1<<F)-1>>>F}function Ee(_,F){return((4278255360&_)+(4278255360&F)>>>0&4278255360)+((16711935&_)+(16711935&F)>>>0&16711935)>>>0}function pe(_,F){T[F]=function(Y,se,xe,je,Se,Te,Ie){var Me;for(Me=0;Me<Se;++Me){var Qe=T[_](Te[Ie+Me-1],xe,je+Me);Te[Ie+Me]=Ee(Y[se+Me],Qe)}}}function ue(){this.ud=this.hd=this.jd=0}function Pe(_,F){return((4278124286&(_^F))>>>1)+(_&F)>>>0}function Ne(_){return 0<=_&&256>_?_:0>_?0:255<_?255:void 0}function Be(_,F){return Ne(_+(_-F+.5>>1))}function nt(_,F,Y){return Math.abs(F-Y)-Math.abs(_-Y)}function mt(_,F,Y,se,xe,je,Se){for(se=je[Se-1],Y=0;Y<xe;++Y)je[Se+Y]=se=Ee(_[F+Y],se)}function kt(_,F,Y,se,xe){var je;for(je=0;je<Y;++je){var Se=_[F+je],Te=Se>>8&255,Ie=16711935&(Ie=(Ie=16711935&Se)+((Te<<16)+Te));se[xe+je]=(4278255360&Se)+Ie>>>0}}function Re(_,F){F.jd=_>>0&255,F.hd=_>>8&255,F.ud=_>>16&255}function gt(_,F,Y,se,xe,je){var Se;for(Se=0;Se<se;++Se){var Te=F[Y+Se],Ie=Te>>>8,Me=Te,Qe=255&(Qe=(Qe=Te>>>16)+((_.jd<<24>>24)*(Ie<<24>>24)>>>5));Me=255&(Me=(Me=Me+((_.hd<<24>>24)*(Ie<<24>>24)>>>5))+((_.ud<<24>>24)*(Qe<<24>>24)>>>5)),xe[je+Se]=(4278255360&Te)+(Qe<<16)+Me}}function ut(_,F,Y,se,xe){T[F]=function(je,Se,Te,Ie,Me,Qe,xt,dt,st){for(Ie=xt;Ie<dt;++Ie)for(xt=0;xt<st;++xt)Me[Qe++]=xe(Te[se(je[Se++])])},T[_]=function(je,Se,Te,Ie,Me,Qe,xt){var dt=8>>je.b,st=je.Ea,qt=je.K[0],At=je.w;if(8>dt)for(je=(1<<je.b)-1,At=(1<<dt)-1;Se<Te;++Se){var Ye,et=0;for(Ye=0;Ye<st;++Ye)Ye&je||(et=se(Ie[Me++])),Qe[xt++]=xe(qt[et&At]),et>>=dt}else T["VP8LMapColor"+Y](Ie,Me,qt,At,Qe,xt,Se,Te,st)}}function lt(_,F,Y,se,xe){for(Y=F+Y;F<Y;){var je=_[F++];se[xe++]=je>>16&255,se[xe++]=je>>8&255,se[xe++]=je>>0&255}}function pr(_,F,Y,se,xe){for(Y=F+Y;F<Y;){var je=_[F++];se[xe++]=je>>16&255,se[xe++]=je>>8&255,se[xe++]=je>>0&255,se[xe++]=je>>24&255}}function tr(_,F,Y,se,xe){for(Y=F+Y;F<Y;){var je=(Se=_[F++])>>16&240|Se>>12&15,Se=Se>>0&240|Se>>28&15;se[xe++]=je,se[xe++]=Se}}function ft(_,F,Y,se,xe){for(Y=F+Y;F<Y;){var je=(Se=_[F++])>>16&248|Se>>13&7,Se=Se>>5&224|Se>>3&31;se[xe++]=je,se[xe++]=Se}}function $t(_,F,Y,se,xe){for(Y=F+Y;F<Y;){var je=_[F++];se[xe++]=je>>0&255,se[xe++]=je>>8&255,se[xe++]=je>>16&255}}function er(_,F,Y,se,xe,je){if(je==0)for(Y=F+Y;F<Y;)ce(se,((je=_[F++])[0]>>24|je[1]>>8&65280|je[2]<<8&16711680|je[3]<<24)>>>0),xe+=32;else n(se,xe,_,F,Y)}function qe(_,F){T[F][0]=T[_+"0"],T[F][1]=T[_+"1"],T[F][2]=T[_+"2"],T[F][3]=T[_+"3"],T[F][4]=T[_+"4"],T[F][5]=T[_+"5"],T[F][6]=T[_+"6"],T[F][7]=T[_+"7"],T[F][8]=T[_+"8"],T[F][9]=T[_+"9"],T[F][10]=T[_+"10"],T[F][11]=T[_+"11"],T[F][12]=T[_+"12"],T[F][13]=T[_+"13"],T[F][14]=T[_+"0"],T[F][15]=T[_+"0"]}function bt(_){return _==mu||_==Il||_==Yu||_==Pc}function Nr(){this.eb=[],this.size=this.A=this.fb=0}function rr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Lr(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Nr,this.f.kb=new rr,this.sd=null}function Er(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function or(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ut(_){return alert("todo:WebPSamplerProcessPlane"),_.T}function wr(_,F){var Y=_.T,se=F.ba.f.RGBA,xe=se.eb,je=se.fb+_.ka*se.A,Se=Ui[F.ba.S],Te=_.y,Ie=_.O,Me=_.f,Qe=_.N,xt=_.ea,dt=_.W,st=F.cc,qt=F.dc,At=F.Mc,Ye=F.Nc,et=_.ka,Tt=_.ka+_.T,Ot=_.U,Lt=Ot+1>>1;for(et==0?Se(Te,Ie,null,null,Me,Qe,xt,dt,Me,Qe,xt,dt,xe,je,null,null,Ot):(Se(F.ec,F.fc,Te,Ie,st,qt,At,Ye,Me,Qe,xt,dt,xe,je-se.A,xe,je,Ot),++Y);et+2<Tt;et+=2)st=Me,qt=Qe,At=xt,Ye=dt,Qe+=_.Rc,dt+=_.Rc,je+=2*se.A,Se(Te,(Ie+=2*_.fa)-_.fa,Te,Ie,st,qt,At,Ye,Me,Qe,xt,dt,xe,je-se.A,xe,je,Ot);return Ie+=_.fa,_.j+Tt<_.o?(n(F.ec,F.fc,Te,Ie,Ot),n(F.cc,F.dc,Me,Qe,Lt),n(F.Mc,F.Nc,xt,dt,Lt),Y--):1&Tt||Se(Te,Ie,null,null,Me,Qe,xt,dt,Me,Qe,xt,dt,xe,je+se.A,null,null,Ot),Y}function kr(_,F,Y){var se=_.F,xe=[_.J];if(se!=null){var je=_.U,Se=F.ba.S,Te=Se==Bd||Se==Yu;F=F.ba.f.RGBA;var Ie=[0],Me=_.ka;Ie[0]=_.T,_.Kb&&(Me==0?--Ie[0]:(--Me,xe[0]-=_.width),_.j+_.ka+_.T==_.o&&(Ie[0]=_.o-_.j-Me));var Qe=F.eb;Me=F.fb+Me*F.A,_=Kn(se,xe[0],_.width,je,Ie,Qe,Me+(Te?0:3),F.A),t(Y==Ie),_&&bt(Se)&&oi(Qe,Me,Te,je,Ie,F.A)}return 0}function Gr(_){var F=_.ma,Y=F.ba.S,se=11>Y,xe=Y==Oc||Y==Xu||Y==Bd||Y==ra||Y==12||bt(Y);if(F.memory=null,F.Ib=null,F.Jb=null,F.Nd=null,!cs(F.Oa,_,xe?11:12))return 0;if(xe&&bt(Y)&&Gt(),_.da)alert("todo:use_scaling");else{if(se){if(F.Ib=Ut,_.Kb){if(Y=_.U+1>>1,F.memory=i(_.U+2*Y),F.memory==null)return 0;F.ec=F.memory,F.fc=0,F.cc=F.ec,F.dc=F.fc+_.U,F.Mc=F.cc,F.Nc=F.dc+Y,F.Ib=wr,Gt()}}else alert("todo:EmitYUV");xe&&(F.Jb=kr,se&&ht())}if(se&&!zs){for(_=0;256>_;++_)Hs[_]=89858*(_-128)+yo>>tc,za[_]=-22014*(_-128)+yo,bo[_]=-45773*(_-128),ha[_]=113618*(_-128)+yo>>tc;for(_=Vn;_<na;++_)F=76283*(_-16)+yo>>tc,Ef[_-Vn]=ni(F,255),Cf[_-Vn]=ni(F+8>>4,15);zs=1}return 1}function hn(_){var F=_.ma,Y=_.U,se=_.T;return t(!(1&_.ka)),0>=Y||0>=se?0:(Y=F.Ib(_,F),F.Jb!=null&&F.Jb(_,F,Y),F.Dc+=Y,1)}function On(_){_.ma.memory=null}function br(_,F,Y,se){return ee(_,8)!=47?0:(F[0]=ee(_,14)+1,Y[0]=ee(_,14)+1,se[0]=ee(_,1),ee(_,3)!=0?0:!_.h)}function Yn(_,F){if(4>_)return _+1;var Y=_-2>>1;return(2+(1&_)<<Y)+ee(F,Y)+1}function on(_,F){return 120<F?F-120:1<=(Y=((Y=Dc[F-1])>>4)*_+(8-(15&Y)))?Y:1;var Y}function Xe(_,F,Y){var se=R(Y),xe=_[F+=255&se].g-8;return 0<xe&&(U(Y,Y.u+8),se=R(Y),F+=_[F].value,F+=se&(1<<xe)-1),U(Y,Y.u+_[F].g),_[F].value}function wt(_,F,Y){return Y.g+=_.g,Y.value+=_.value<<F>>>0,t(8>=Y.g),_.g}function Wt(_,F,Y){var se=_.xc;return t((F=se==0?0:_.vc[_.md*(Y>>se)+(F>>se)])<_.Wb),_.Ya[F]}function re(_,F,Y,se){var xe=_.ab,je=_.c*F,Se=_.C;F=Se+F;var Te=Y,Ie=se;for(se=_.Ta,Y=_.Ua;0<xe--;){var Me=_.gc[xe],Qe=Se,xt=F,dt=Te,st=Ie,qt=(Ie=se,Te=Y,Me.Ea);switch(t(Qe<xt),t(xt<=Me.nc),Me.hc){case 2:Tl(dt,st,(xt-Qe)*qt,Ie,Te);break;case 0:var At=Qe,Ye=xt,et=Ie,Tt=Te,Ot=(dr=Me).Ea;At==0&&(vs(dt,st,null,null,1,et,Tt),mt(dt,st+1,0,0,Ot-1,et,Tt+1),st+=Ot,Tt+=Ot,++At);for(var Lt=1<<dr.b,gr=Lt-1,lr=ve(Ot,dr.b),qr=dr.K,dr=dr.w+(At>>dr.b)*lr;At<Ye;){var Mn=qr,qn=dr,bn=1;for(Mi(dt,st,et,Tt-Ot,1,et,Tt);bn<Ot;){var cn=(bn&~gr)+Lt;cn>Ot&&(cn=Ot),(0,Ol[Mn[qn++]>>8&15])(dt,st+ +bn,et,Tt+bn-Ot,cn-bn,et,Tt+bn),bn=cn}st+=Ot,Tt+=Ot,++At&gr||(dr+=lr)}xt!=Me.nc&&n(Ie,Te-qt,Ie,Te+(xt-Qe-1)*qt,qt);break;case 1:for(qt=dt,Ye=st,Ot=(dt=Me.Ea)-(Tt=dt&~(et=(st=1<<Me.b)-1)),At=ve(dt,Me.b),Lt=Me.K,Me=Me.w+(Qe>>Me.b)*At;Qe<xt;){for(gr=Lt,lr=Me,qr=new ue,dr=Ye+Tt,Mn=Ye+dt;Ye<dr;)Re(gr[lr++],qr),Yl(qr,qt,Ye,st,Ie,Te),Ye+=st,Te+=st;Ye<Mn&&(Re(gr[lr++],qr),Yl(qr,qt,Ye,Ot,Ie,Te),Ye+=Ot,Te+=Ot),++Qe&et||(Me+=At)}break;case 3:if(dt==Ie&&st==Te&&0<Me.b){for(Ye=Ie,dt=qt=Te+(xt-Qe)*qt-(Tt=(xt-Qe)*ve(Me.Ea,Me.b)),st=Ie,et=Te,At=[],Tt=(Ot=Tt)-1;0<=Tt;--Tt)At[Tt]=st[et+Tt];for(Tt=Ot-1;0<=Tt;--Tt)Ye[dt+Tt]=At[Tt];ai(Me,Qe,xt,Ie,qt,Ie,Te)}else ai(Me,Qe,xt,dt,st,Ie,Te)}Te=se,Ie=Y}Ie!=Y&&n(se,Y,Te,Ie,je)}function me(_,F){var Y=_.V,se=_.Ba+_.c*_.C,xe=F-_.C;if(t(F<=_.l.o),t(16>=xe),0<xe){var je=_.l,Se=_.Ta,Te=_.Ua,Ie=je.width;if(re(_,xe,Y,se),xe=Te=[Te],t((Y=_.C)<(se=F)),t(je.v<je.va),se>je.o&&(se=je.o),Y<je.j){var Me=je.j-Y;Y=je.j,xe[0]+=Me*Ie}if(Y>=se?Y=0:(xe[0]+=4*je.v,je.ka=Y-je.j,je.U=je.va-je.v,je.T=se-Y,Y=1),Y){if(Te=Te[0],11>(Y=_.ca).S){var Qe=Y.f.RGBA,xt=(se=Y.S,xe=je.U,je=je.T,Me=Qe.eb,Qe.A),dt=je;for(Qe=Qe.fb+_.Ma*Qe.A;0<dt--;){var st=Se,qt=Te,At=xe,Ye=Me,et=Qe;switch(se){case Md:si(st,qt,At,Ye,et);break;case Oc:Os(st,qt,At,Ye,et);break;case mu:Os(st,qt,At,Ye,et),oi(Ye,et,0,At,1,0);break;case Rd:go(st,qt,At,Ye,et);break;case Xu:er(st,qt,At,Ye,et,1);break;case Il:er(st,qt,At,Ye,et,1),oi(Ye,et,0,At,1,0);break;case Bd:er(st,qt,At,Ye,et,0);break;case Yu:er(st,qt,At,Ye,et,0),oi(Ye,et,1,At,1,0);break;case ra:Yo(st,qt,At,Ye,et);break;case Pc:Yo(st,qt,At,Ye,et),Wn(Ye,et,At,1,0);break;case pu:Jo(st,qt,At,Ye,et);break;default:t(0)}Te+=Ie,Qe+=xt}_.Ma+=je}else alert("todo:EmitRescaledRowsYUVA");t(_.Ma<=Y.height)}}_.C=F,t(_.C<=_.i)}function ye(_){var F;if(0<_.ua)return 0;for(F=0;F<_.Wb;++F){var Y=_.Ya[F].G,se=_.Ya[F].H;if(0<Y[1][se[1]+0].g||0<Y[2][se[2]+0].g||0<Y[3][se[3]+0].g)return 0}return 1}function Ae(_,F,Y,se,xe,je){if(_.Z!=0){var Se=_.qd,Te=_.rd;for(t(bs[_.Z]!=null);F<Y;++F)bs[_.Z](Se,Te,se,xe,se,xe,je),Se=se,Te=xe,xe+=je;_.qd=Se,_.rd=Te}}function Ce(_,F){var Y=_.l.ma,se=Y.Z==0||Y.Z==1?_.l.j:_.C;if(se=_.C<se?se:_.C,t(F<=_.l.o),F>se){var xe=_.l.width,je=Y.ca,Se=Y.tb+xe*se,Te=_.V,Ie=_.Ba+_.c*se,Me=_.gc;t(_.ab==1),t(Me[0].hc==3),Dd(Me[0],se,F,Te,Ie,je,Se),Ae(Y,se,F,je,Se,xe)}_.C=_.Ma=F}function Oe(_,F,Y,se,xe,je,Se){var Te=_.$/se,Ie=_.$%se,Me=_.m,Qe=_.s,xt=Y+_.$,dt=xt;xe=Y+se*xe;var st=Y+se*je,qt=280+Qe.ua,At=_.Pb?Te:16777216,Ye=0<Qe.ua?Qe.Wa:null,et=Qe.wc,Tt=xt<st?Wt(Qe,Ie,Te):null;t(_.C<je),t(st<=xe);var Ot=!1;e:for(;;){for(;Ot||xt<st;){var Lt=0;if(Te>=At){var gr=xt-Y;t((At=_).Pb),At.wd=At.m,At.xd=gr,0<At.s.ua&&fe(At.s.Wa,At.s.vb),At=Te+Sf}if(Ie&et||(Tt=Wt(Qe,Ie,Te)),t(Tt!=null),Tt.Qb&&(F[xt]=Tt.qb,Ot=!0),!Ot)if(K(Me),Tt.jc){Lt=Me,gr=F;var lr=xt,qr=Tt.pd[R(Lt)&dn-1];t(Tt.jc),256>qr.g?(U(Lt,Lt.u+qr.g),gr[lr]=qr.value,Lt=0):(U(Lt,Lt.u+qr.g-256),t(256<=qr.value),Lt=qr.value),Lt==0&&(Ot=!0)}else Lt=Xe(Tt.G[0],Tt.H[0],Me);if(Me.h)break;if(Ot||256>Lt){if(!Ot)if(Tt.nd)F[xt]=(Tt.qb|Lt<<8)>>>0;else{if(K(Me),Ot=Xe(Tt.G[1],Tt.H[1],Me),K(Me),gr=Xe(Tt.G[2],Tt.H[2],Me),lr=Xe(Tt.G[3],Tt.H[3],Me),Me.h)break;F[xt]=(lr<<24|Ot<<16|Lt<<8|gr)>>>0}if(Ot=!1,++xt,++Ie>=se&&(Ie=0,++Te,Se!=null&&Te<=je&&!(Te%16)&&Se(_,Te),Ye!=null))for(;dt<xt;)Lt=F[dt++],Ye.X[(506832829*Lt&4294967295)>>>Ye.Mb]=Lt}else if(280>Lt){if(Lt=Yn(Lt-256,Me),gr=Xe(Tt.G[4],Tt.H[4],Me),K(Me),gr=on(se,gr=Yn(gr,Me)),Me.h)break;if(xt-Y<gr||xe-xt<Lt)break e;for(lr=0;lr<Lt;++lr)F[xt+lr]=F[xt+lr-gr];for(xt+=Lt,Ie+=Lt;Ie>=se;)Ie-=se,++Te,Se!=null&&Te<=je&&!(Te%16)&&Se(_,Te);if(t(xt<=xe),Ie&et&&(Tt=Wt(Qe,Ie,Te)),Ye!=null)for(;dt<xt;)Lt=F[dt++],Ye.X[(506832829*Lt&4294967295)>>>Ye.Mb]=Lt}else{if(!(Lt<qt))break e;for(Ot=Lt-280,t(Ye!=null);dt<xt;)Lt=F[dt++],Ye.X[(506832829*Lt&4294967295)>>>Ye.Mb]=Lt;Lt=xt,t(!(Ot>>>(gr=Ye).Xa)),F[Lt]=gr.X[Ot],Ot=!0}Ot||t(Me.h==W(Me))}if(_.Pb&&Me.h&&xt<xe)t(_.m.h),_.a=5,_.m=_.wd,_.$=_.xd,0<_.s.ua&&fe(_.s.vb,_.s.Wa);else{if(Me.h)break e;Se?.(_,Te>je?je:Te),_.a=0,_.$=xt-Y}return 1}return _.a=3,0}function Ke(_){t(_!=null),_.vc=null,_.yc=null,_.Ya=null;var F=_.Wa;F!=null&&(F.X=null),_.vb=null,t(_!=null)}function ct(){var _=new w0;return _==null?null:(_.a=0,_.xb=vu,qe("Predictor","VP8LPredictors"),qe("Predictor","VP8LPredictors_C"),qe("PredictorAdd","VP8LPredictorsAdd"),qe("PredictorAdd","VP8LPredictorsAdd_C"),Tl=kt,Yl=gt,si=lt,Os=pr,Yo=tr,Jo=ft,go=$t,T.VP8LMapColor32b=Xl,T.VP8LMapColor8b=Cc,_)}function Ge(_,F,Y,se,xe){var je=1,Se=[_],Te=[F],Ie=se.m,Me=se.s,Qe=null,xt=0;e:for(;;){if(Y)for(;je&&ee(Ie,1);){var dt=Se,st=Te,qt=se,At=1,Ye=qt.m,et=qt.gc[qt.ab],Tt=ee(Ye,2);if(qt.Oc&1<<Tt)je=0;else{switch(qt.Oc|=1<<Tt,et.hc=Tt,et.Ea=dt[0],et.nc=st[0],et.K=[null],++qt.ab,t(4>=qt.ab),Tt){case 0:case 1:et.b=ee(Ye,3)+2,At=Ge(ve(et.Ea,et.b),ve(et.nc,et.b),0,qt,et.K),et.K=et.K[0];break;case 3:var Ot,Lt=ee(Ye,8)+1,gr=16<Lt?0:4<Lt?1:2<Lt?2:3;if(dt[0]=ve(et.Ea,gr),et.b=gr,Ot=At=Ge(Lt,1,0,qt,et.K)){var lr,qr=Lt,dr=et,Mn=1<<(8>>dr.b),qn=i(Mn);if(qn==null)Ot=0;else{var bn=dr.K[0],cn=dr.w;for(qn[0]=dr.K[0][0],lr=1;lr<1*qr;++lr)qn[lr]=Ee(bn[cn+lr],qn[lr-1]);for(;lr<4*Mn;++lr)qn[lr]=0;dr.K[0]=null,dr.K[0]=qn,Ot=1}}At=Ot;break;case 2:break;default:t(0)}je=At}}if(Se=Se[0],Te=Te[0],je&&ee(Ie,1)&&!(je=1<=(xt=ee(Ie,4))&&11>=xt)){se.a=3;break e}var Jn;if(Jn=je)t:{var Rn,Yr,Da,Si=se,Za=Se,es=Te,_n=xt,ci=Y,ws=Si.m,La=Si.s,Ns=[null],us=1,Ws=0,wo=Lc[_n];r:for(;;){if(ci&&ee(ws,1)){var Fa=ee(ws,3)+2,Ha=ve(Za,Fa),qi=ve(es,Fa),nc=Ha*qi;if(!Ge(Ha,qi,0,Si,Ns))break r;for(Ns=Ns[0],La.xc=Fa,Rn=0;Rn<nc;++Rn){var ac=Ns[Rn]>>8&65535;Ns[Rn]=ac,ac>=us&&(us=ac+1)}}if(ws.h)break r;for(Yr=0;5>Yr;++Yr){var Xn=Ic[Yr];!Yr&&0<_n&&(Xn+=1<<_n),Ws<Xn&&(Ws=Xn)}var Ll=o(us*wo,C),Tf=us,j0=o(Tf,q);if(j0==null)var No=null;else t(65536>=Tf),No=j0;var jo=i(Ws);if(No==null||jo==null||Ll==null){Si.a=1;break r}var yu=Ll;for(Rn=Da=0;Rn<us;++Rn){var ko=No[Rn],sl=ko.G,sc=ko.H,So=0,js=1,ed=0;for(Yr=0;5>Yr;++Yr){Xn=Ic[Yr],sl[Yr]=yu,sc[Yr]=Da,!Yr&&0<_n&&(Xn+=1<<_n);a:{var il,ic=Xn,td=Si,Fl=jo,Ch=yu,k0=Da,ba=0,ol=td.m,qd=ee(ol,1);if(s(Fl,0,0,ic),qd){var $d=ee(ol,1)+1,Of=ee(ol,1),Pf=ee(ol,Of==0?1:8);Fl[Pf]=1,$d==2&&(Fl[Pf=ee(ol,8)]=1);var Ml=1}else{var Ma=i(19),ts=ee(ol,4)+4;if(19<ts){td.a=3;var Wa=0;break a}for(il=0;il<ts;++il)Ma[xu[il]]=ee(ol,3);var rd=void 0,oc=void 0,bu=td,nd=Ma,rs=ic,ui=Fl,zd=0,ll=bu.m,no=8,$i=o(128,C);n:for(;E($i,0,7,nd,19);){if(ee(ll,1)){var D=2+2*ee(ll,3);if((rd=2+ee(ll,D))>rs)break n}else rd=rs;for(oc=0;oc<rs&&rd--;){K(ll);var de=$i[0+(127&R(ll))];U(ll,ll.u+de.g);var ge=de.value;if(16>ge)ui[oc++]=ge,ge!=0&&(no=ge);else{var Ve=ge==16,it=ge-16,zt=N0[it],_t=ee(ll,Ju[it])+zt;if(oc+_t>rs)break n;for(var Jt=Ve?no:0;0<_t--;)ui[oc++]=Jt}}zd=1;break n}zd||(bu.a=3),Ml=zd}(Ml=Ml&&!ol.h)&&(ba=E(Ch,k0,8,Fl,ic)),Ml&&ba!=0?Wa=ba:(td.a=3,Wa=0)}if(Wa==0)break r;if(js&&kh[Yr]==1&&(js=yu[Da].g==0),So+=yu[Da].g,Da+=Wa,3>=Yr){var Tr,An=jo[0];for(Tr=1;Tr<Xn;++Tr)jo[Tr]>An&&(An=jo[Tr]);ed+=An}}if(ko.nd=js,ko.Qb=0,js&&(ko.qb=(sl[3][sc[3]+0].value<<24|sl[1][sc[1]+0].value<<16|sl[2][sc[2]+0].value)>>>0,So==0&&256>sl[0][sc[0]+0].value&&(ko.Qb=1,ko.qb+=sl[0][sc[0]+0].value<<8)),ko.jc=!ko.Qb&&6>ed,ko.jc){var wa,$n=ko;for(wa=0;wa<dn;++wa){var Vs=wa,_i=$n.pd[Vs],ad=$n.G[0][$n.H[0]+Vs];256<=ad.value?(_i.g=ad.g+256,_i.value=ad.value):(_i.g=0,_i.value=0,Vs>>=wt(ad,8,_i),Vs>>=wt($n.G[1][$n.H[1]+Vs],16,_i),Vs>>=wt($n.G[2][$n.H[2]+Vs],0,_i),wt($n.G[3][$n.H[3]+Vs],24,_i))}}}La.vc=Ns,La.Wb=us,La.Ya=No,La.yc=Ll,Jn=1;break t}Jn=0}if(!(je=Jn)){se.a=3;break e}if(0<xt){if(Me.ua=1<<xt,!Fe(Me.Wa,xt)){se.a=1,je=0;break e}}else Me.ua=0;var Th=se,Oh=Se,wg=Te,Ph=Th.s,Ih=Ph.xc;if(Th.c=Oh,Th.i=wg,Ph.md=ve(Oh,Ih),Ph.wc=Ih==0?-1:(1<<Ih)-1,Y){se.xb=Dl;break e}if((Qe=i(Se*Te))==null){se.a=1,je=0;break e}je=(je=Oe(se,Qe,0,Se,Te,Te,null))&&!Ie.h;break e}return je?(xe!=null?xe[0]=Qe:(t(Qe==null),t(Y)),se.$=0,Y||Ke(Me)):Ke(Me),je}function Je(_,F){var Y=_.c*_.i,se=Y+F+16*F;return t(_.c<=F),_.V=i(se),_.V==null?(_.Ta=null,_.Ua=0,_.a=1,0):(_.Ta=_.V,_.Ua=_.Ba+Y+F,1)}function ze(_,F){var Y=_.C,se=F-Y,xe=_.V,je=_.Ba+_.c*Y;for(t(F<=_.l.o);0<se;){var Se=16<se?16:se,Te=_.l.ma,Ie=_.l.width,Me=Ie*Se,Qe=Te.ca,xt=Te.tb+Ie*Y,dt=_.Ta,st=_.Ua;re(_,Se,xe,je),fa(dt,st,Qe,xt,Me),Ae(Te,Y,Y+Se,Qe,xt,Ie),se-=Se,xe+=Se*_.c,Y+=Se}t(Y==F),_.C=_.Ma=F}function De(){this.ub=this.yd=this.td=this.Rb=0}function tt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function pt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function It(){this.Yb=(function(){var _=[];return(function F(Y,se,xe){for(var je=xe[se],Se=0;Se<je&&(Y.push(xe.length>se+1?[]:0),!(xe.length<se+1));Se++)F(Y[Se],se+1,xe)})(_,0,[3,11]),_})()}function Mt(){this.jb=i(3),this.Wc=l([4,8],It),this.Xc=l([4,17],It)}function vr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ur(){this.ld=this.La=this.dd=this.tc=0}function sn(){this.Na=this.la=0}function En(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function ls(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function vn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ur),this.Y=0,this.ya=Array(new ls),this.aa=0,this.l=new ga}function xa(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Fn(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new De,this.Kc=new tt,this.ed=new vr,this.Qa=new pt,this.Ic=this.$c=this.Aa=0,this.D=new vn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,H),this.ia=0,this.pb=o(4,En),this.Pa=new Mt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xa),this.Hd=0,this.rb=Array(new sn),this.sb=0,this.wa=Array(new Ur),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new ls),this.L=this.aa=0,this.gd=l([4,2],Ur),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ga(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ca(){var _=new Fn;return _!=null&&(_.a=0,_.sc="OK",_.cb=0,_.Xb=0,Mc||(Mc=Ue)),_}function da(_,F,Y){return _.a==0&&(_.a=F,_.sc=Y,_.cb=0),0}function Us(_,F,Y){return 3<=Y&&_[F+0]==157&&_[F+1]==1&&_[F+2]==42}function va(_,F){if(_==null)return 0;if(_.a=0,_.sc="OK",F==null)return da(_,2,"null VP8Io passed to VP8GetHeaders()");var Y=F.data,se=F.w,xe=F.ha;if(4>xe)return da(_,7,"Truncated header.");var je=Y[se+0]|Y[se+1]<<8|Y[se+2]<<16,Se=_.Od;if(Se.Rb=!(1&je),Se.td=je>>1&7,Se.yd=je>>4&1,Se.ub=je>>5,3<Se.td)return da(_,3,"Incorrect keyframe parameters.");if(!Se.yd)return da(_,4,"Frame not displayable.");se+=3,xe-=3;var Te=_.Kc;if(Se.Rb){if(7>xe)return da(_,7,"cannot parse picture header");if(!Us(Y,se,xe))return da(_,3,"Bad code word");Te.c=16383&(Y[se+4]<<8|Y[se+3]),Te.Td=Y[se+4]>>6,Te.i=16383&(Y[se+6]<<8|Y[se+5]),Te.Ud=Y[se+6]>>6,se+=7,xe-=7,_.za=Te.c+15>>4,_.Ub=Te.i+15>>4,F.width=Te.c,F.height=Te.i,F.Da=0,F.j=0,F.v=0,F.va=F.width,F.o=F.height,F.da=0,F.ib=F.width,F.hb=F.height,F.U=F.width,F.T=F.height,s((je=_.Pa).jb,0,255,je.jb.length),t((je=_.Qa)!=null),je.Cb=0,je.Bb=0,je.Fb=1,s(je.Zb,0,0,je.Zb.length),s(je.Lb,0,0,je.Lb)}if(Se.ub>xe)return da(_,7,"bad partition length");G(je=_.m,Y,se,Se.ub),se+=Se.ub,xe-=Se.ub,Se.Rb&&(Te.Ld=he(je),Te.Kd=he(je)),Te=_.Qa;var Ie,Me=_.Pa;if(t(je!=null),t(Te!=null),Te.Cb=he(je),Te.Cb){if(Te.Bb=he(je),he(je)){for(Te.Fb=he(je),Ie=0;4>Ie;++Ie)Te.Zb[Ie]=he(je)?te(je,7):0;for(Ie=0;4>Ie;++Ie)Te.Lb[Ie]=he(je)?te(je,6):0}if(Te.Bb)for(Ie=0;3>Ie;++Ie)Me.jb[Ie]=he(je)?Z(je,8):255}else Te.Bb=0;if(je.Ka)return da(_,3,"cannot parse segment header");if((Te=_.ed).zd=he(je),Te.Tb=Z(je,6),Te.wb=Z(je,3),Te.Pc=he(je),Te.Pc&&he(je)){for(Me=0;4>Me;++Me)he(je)&&(Te.vd[Me]=te(je,6));for(Me=0;4>Me;++Me)he(je)&&(Te.od[Me]=te(je,6))}if(_.L=Te.Tb==0?0:Te.zd?1:2,je.Ka)return da(_,3,"cannot parse filter header");var Qe=xe;if(xe=Ie=se,se=Ie+Qe,Te=Qe,_.Xb=(1<<Z(_.m,2))-1,Qe<3*(Me=_.Xb))Y=7;else{for(Ie+=3*Me,Te-=3*Me,Qe=0;Qe<Me;++Qe){var xt=Y[xe+0]|Y[xe+1]<<8|Y[xe+2]<<16;xt>Te&&(xt=Te),G(_.Jc[+Qe],Y,Ie,xt),Ie+=xt,Te-=xt,xe+=3}G(_.Jc[+Me],Y,Ie,Te),Y=Ie<se?0:5}if(Y!=0)return da(_,Y,"cannot parse partitions");for(Y=Z(Ie=_.m,7),xe=he(Ie)?te(Ie,4):0,se=he(Ie)?te(Ie,4):0,Te=he(Ie)?te(Ie,4):0,Me=he(Ie)?te(Ie,4):0,Ie=he(Ie)?te(Ie,4):0,Qe=_.Qa,xt=0;4>xt;++xt){if(Qe.Cb){var dt=Qe.Zb[xt];Qe.Fb||(dt+=Y)}else{if(0<xt){_.pb[xt]=_.pb[0];continue}dt=Y}var st=_.pb[xt];st.Sc[0]=Fc[ni(dt+xe,127)],st.Sc[1]=nl[ni(dt+0,127)],st.Eb[0]=2*Fc[ni(dt+se,127)],st.Eb[1]=101581*nl[ni(dt+Te,127)]>>16,8>st.Eb[1]&&(st.Eb[1]=8),st.Qc[0]=Fc[ni(dt+Me,117)],st.Qc[1]=nl[ni(dt+Ie,127)],st.lc=dt+Ie}if(!Se.Rb)return da(_,4,"Not a key frame.");for(he(je),Se=_.Pa,Y=0;4>Y;++Y){for(xe=0;8>xe;++xe)for(se=0;3>se;++se)for(Te=0;11>Te;++Te)Me=ie(je,nm[Y][xe][se][Te])?Z(je,8):gu[Y][xe][se][Te],Se.Wc[Y][xe].Yb[se][Te]=Me;for(xe=0;17>xe;++xe)Se.Xc[Y][xe]=Se.Wc[Y][Zu[xe]]}return _.kc=he(je),_.kc&&(_.Bd=Z(je,8)),_.cb=1}function Ue(_,F,Y,se,xe,je,Se){var Te=F[xe].Yb[Y];for(Y=0;16>xe;++xe){if(!ie(_,Te[Y+0]))return xe;for(;!ie(_,Te[Y+1]);)if(Te=F[++xe].Yb[0],Y=0,xe==16)return 16;var Ie=F[xe+1].Yb;if(ie(_,Te[Y+2])){var Me=_,Qe=0;if(ie(Me,(dt=Te)[(xt=Y)+3]))if(ie(Me,dt[xt+6])){for(Te=0,xt=2*(Qe=ie(Me,dt[xt+8]))+(dt=ie(Me,dt[xt+9+Qe])),Qe=0,dt=_f[xt];dt[Te];++Te)Qe+=Qe+ie(Me,dt[Te]);Qe+=3+(8<<xt)}else ie(Me,dt[xt+7])?(Qe=7+2*ie(Me,165),Qe+=ie(Me,145)):Qe=5+ie(Me,159);else Qe=ie(Me,dt[xt+4])?3+ie(Me,dt[xt+5]):2;Te=Ie[2]}else Qe=1,Te=Ie[1];Ie=Se+Qu[xe],0>(Me=_).b&&oe(Me);var xt,dt=Me.b,st=(xt=Me.Ca>>1)-(Me.I>>dt)>>31;--Me.b,Me.Ca+=st,Me.Ca|=1,Me.I-=(xt+1&st)<<dt,je[Ie]=((Qe^st)-st)*se[(0<xe)+0]}return 16}function Dt(_){var F=_.rb[_.sb-1];F.la=0,F.Na=0,s(_.zc,0,0,_.zc.length),_.ja=0}function Ct(_,F){if(_==null)return 0;if(F==null)return da(_,2,"NULL VP8Io parameter in VP8Decode().");if(!_.cb&&!va(_,F))return 0;if(t(_.cb),F.ac==null||F.ac(F)){F.ob&&(_.L=0);var Y=al[_.L];if(_.L==2?(_.yb=0,_.zb=0):(_.yb=F.v-Y>>4,_.zb=F.j-Y>>4,0>_.yb&&(_.yb=0),0>_.zb&&(_.zb=0)),_.Va=F.o+15+Y>>4,_.Hb=F.va+15+Y>>4,_.Hb>_.za&&(_.Hb=_.za),_.Va>_.Ub&&(_.Va=_.Ub),0<_.L){var se=_.ed;for(Y=0;4>Y;++Y){var xe;if(_.Qa.Cb){var je=_.Qa.Lb[Y];_.Qa.Fb||(je+=se.Tb)}else je=se.Tb;for(xe=0;1>=xe;++xe){var Se=_.gd[Y][xe],Te=je;if(se.Pc&&(Te+=se.vd[0],xe&&(Te+=se.od[0])),0<(Te=0>Te?0:63<Te?63:Te)){var Ie=Te;0<se.wb&&(Ie=4<se.wb?Ie>>2:Ie>>1)>9-se.wb&&(Ie=9-se.wb),1>Ie&&(Ie=1),Se.dd=Ie,Se.tc=2*Te+Ie,Se.ld=40<=Te?2:15<=Te?1:0}else Se.tc=0;Se.La=xe}}}Y=0}else da(_,6,"Frame setup failed"),Y=_.a;if(Y=Y==0){if(Y){_.$c=0,0<_.Aa||(_.Ic=ki);e:{Y=_.Ic,se=4*(Ie=_.za);var Me=32*Ie,Qe=Ie+1,xt=0<_.L?Ie*(0<_.Aa?2:1):0,dt=(_.Aa==2?2:1)*Ie;if((Se=se+832+(xe=3*(16*Y+al[_.L])/2*Me)+(je=_.Fa!=null&&0<_.Fa.length?_.Kc.c*_.Kc.i:0))!=Se)Y=0;else{if(Se>_.Vb){if(_.Vb=0,_.Ec=i(Se),_.Fc=0,_.Ec==null){Y=da(_,1,"no memory during frame initialization.");break e}_.Vb=Se}Se=_.Ec,Te=_.Fc,_.Ac=Se,_.Bc=Te,Te+=se,_.Gd=o(Me,xa),_.Hd=0,_.rb=o(Qe+1,sn),_.sb=1,_.wa=xt?o(xt,Ur):null,_.Y=0,_.D.Nb=0,_.D.wa=_.wa,_.D.Y=_.Y,0<_.Aa&&(_.D.Y+=Ie),t(!0),_.oc=Se,_.pc=Te,Te+=832,_.ya=o(dt,ls),_.aa=0,_.D.ya=_.ya,_.D.aa=_.aa,_.Aa==2&&(_.D.aa+=Ie),_.R=16*Ie,_.B=8*Ie,Ie=(Me=al[_.L])*_.R,Me=Me/2*_.B,_.sa=Se,_.ta=Te+Ie,_.qa=_.sa,_.ra=_.ta+16*Y*_.R+Me,_.Ha=_.qa,_.Ia=_.ra+8*Y*_.B+Me,_.$c=0,Te+=xe,_.mb=je?Se:null,_.nb=je?Te:null,t(Te+je<=_.Fc+_.Vb),Dt(_),s(_.Ac,_.Bc,0,se),Y=1}}if(Y){if(F.ka=0,F.y=_.sa,F.O=_.ta,F.f=_.qa,F.N=_.ra,F.ea=_.Ha,F.Vd=_.Ia,F.fa=_.R,F.Rc=_.B,F.F=null,F.J=0,!Fd){for(Y=-255;255>=Y;++Y)Qa[255+Y]=0>Y?-Y:Y;for(Y=-1020;1020>=Y;++Y)tl[1020+Y]=-128>Y?-128:127<Y?127:Y;for(Y=-112;112>=Y;++Y)Gu[112+Y]=-16>Y?-16:15<Y?15:Y;for(Y=-255;510>=Y;++Y)Tc[255+Y]=0>Y?0:255<Y?255:Y;Fd=1}Qo=Sr,ii=Pn,Ri=nr,Ja=ir,Ps=Et,Sn=kn,Zo=Al,Ld=hs,Pl=xo,to=El,Jl=Wo,Bi=_c,Ia=Vo,wi=du,el=Ho,Ql=bi,ro=Qi,ys=Sc,li[0]=_r,li[1]=Un,li[2]=Yt,li[3]=mr,li[4]=zr,li[5]=ta,li[6]=mn,li[7]=Hn,li[8]=Vu,li[9]=ti,Ni[0]=ln,Ni[1]=pn,Ni[2]=Zt,Ni[3]=zn,Ni[4]=xn,Ni[5]=$r,Ni[6]=Kr,ji[0]=ri,ji[1]=Ca,ji[2]=jf,ji[3]=Sl,ji[4]=jc,ji[5]=Nc,ji[6]=Id,Y=1}else Y=0}Y&&(Y=(function(st,qt){for(st.M=0;st.M<st.Va;++st.M){var At,Ye=st.Jc[st.M&st.Xb],et=st.m,Tt=st;for(At=0;At<Tt.za;++At){var Ot=et,Lt=Tt,gr=Lt.Ac,lr=Lt.Bc+4*At,qr=Lt.zc,dr=Lt.ya[Lt.aa+At];if(Lt.Qa.Bb?dr.$b=ie(Ot,Lt.Pa.jb[0])?2+ie(Ot,Lt.Pa.jb[2]):ie(Ot,Lt.Pa.jb[1]):dr.$b=0,Lt.kc&&(dr.Ad=ie(Ot,Lt.Bd)),dr.Za=!ie(Ot,145)+0,dr.Za){var Mn=dr.Ob,qn=0;for(Lt=0;4>Lt;++Lt){var bn,cn=qr[0+Lt];for(bn=0;4>bn;++bn){cn=rm[gr[lr+bn]][cn];for(var Jn=Sh[ie(Ot,cn[0])];0<Jn;)Jn=Sh[2*Jn+ie(Ot,cn[Jn])];cn=-Jn,gr[lr+bn]=cn}n(Mn,qn,gr,lr,4),qn+=4,qr[0+Lt]=cn}}else cn=ie(Ot,156)?ie(Ot,128)?1:3:ie(Ot,163)?2:0,dr.Ob[0]=cn,s(gr,lr,cn,4),s(qr,0,cn,4);dr.Dd=ie(Ot,142)?ie(Ot,114)?ie(Ot,183)?1:3:2:0}if(Tt.m.Ka)return da(st,7,"Premature end-of-partition0 encountered.");for(;st.ja<st.za;++st.ja){if(Tt=Ye,Ot=(et=st).rb[et.sb-1],gr=et.rb[et.sb+et.ja],At=et.ya[et.aa+et.ja],lr=et.kc?At.Ad:0)Ot.la=gr.la=0,At.Za||(Ot.Na=gr.Na=0),At.Hc=0,At.Gc=0,At.ia=0;else{var Rn,Yr;if(Ot=gr,gr=Tt,lr=et.Pa.Xc,qr=et.ya[et.aa+et.ja],dr=et.pb[qr.$b],Lt=qr.ad,Mn=0,qn=et.rb[et.sb-1],cn=bn=0,s(Lt,Mn,0,384),qr.Za)var Da=0,Si=lr[3];else{Jn=i(16);var Za=Ot.Na+qn.Na;if(Za=Mc(gr,lr[1],Za,dr.Eb,0,Jn,0),Ot.Na=qn.Na=(0<Za)+0,1<Za)Qo(Jn,0,Lt,Mn);else{var es=Jn[0]+3>>3;for(Jn=0;256>Jn;Jn+=16)Lt[Mn+Jn]=es}Da=1,Si=lr[0]}var _n=15&Ot.la,ci=15&qn.la;for(Jn=0;4>Jn;++Jn){var ws=1&ci;for(es=Yr=0;4>es;++es)_n=_n>>1|(ws=(Za=Mc(gr,Si,Za=ws+(1&_n),dr.Sc,Da,Lt,Mn))>Da)<<7,Yr=Yr<<2|(3<Za?3:1<Za?2:Lt[Mn+0]!=0),Mn+=16;_n>>=4,ci=ci>>1|ws<<7,bn=(bn<<8|Yr)>>>0}for(Si=_n,Da=ci>>4,Rn=0;4>Rn;Rn+=2){for(Yr=0,_n=Ot.la>>4+Rn,ci=qn.la>>4+Rn,Jn=0;2>Jn;++Jn){for(ws=1&ci,es=0;2>es;++es)Za=ws+(1&_n),_n=_n>>1|(ws=0<(Za=Mc(gr,lr[2],Za,dr.Qc,0,Lt,Mn)))<<3,Yr=Yr<<2|(3<Za?3:1<Za?2:Lt[Mn+0]!=0),Mn+=16;_n>>=2,ci=ci>>1|ws<<5}cn|=Yr<<4*Rn,Si|=_n<<4<<Rn,Da|=(240&ci)<<Rn}Ot.la=Si,qn.la=Da,qr.Hc=bn,qr.Gc=cn,qr.ia=43690&cn?0:dr.ia,lr=!(bn|cn)}if(0<et.L&&(et.wa[et.Y+et.ja]=et.gd[At.$b][At.Za],et.wa[et.Y+et.ja].La|=!lr),Tt.Ka)return da(st,7,"Premature end-of-file encountered.")}if(Dt(st),et=qt,Tt=1,At=(Ye=st).D,Ot=0<Ye.L&&Ye.M>=Ye.zb&&Ye.M<=Ye.Va,Ye.Aa==0)e:{if(At.M=Ye.M,At.uc=Ot,Ec(Ye,At),Tt=1,At=(Yr=Ye.D).Nb,Ot=(cn=al[Ye.L])*Ye.R,gr=cn/2*Ye.B,Jn=16*At*Ye.R,es=8*At*Ye.B,lr=Ye.sa,qr=Ye.ta-Ot+Jn,dr=Ye.qa,Lt=Ye.ra-gr+es,Mn=Ye.Ha,qn=Ye.Ia-gr+es,ci=(_n=Yr.M)==0,bn=_n>=Ye.Va-1,Ye.Aa==2&&Ec(Ye,Yr),Yr.uc)for(ws=(Za=Ye).D.M,t(Za.D.uc),Yr=Za.yb;Yr<Za.Hb;++Yr){Da=Yr,Si=ws;var La=(Ns=(Xn=Za).D).Nb;Rn=Xn.R;var Ns=Ns.wa[Ns.Y+Da],us=Xn.sa,Ws=Xn.ta+16*La*Rn+16*Da,wo=Ns.dd,Fa=Ns.tc;if(Fa!=0)if(t(3<=Fa),Xn.L==1)0<Da&&Ql(us,Ws,Rn,Fa+4),Ns.La&&ys(us,Ws,Rn,Fa),0<Si&&el(us,Ws,Rn,Fa+4),Ns.La&&ro(us,Ws,Rn,Fa);else{var Ha=Xn.B,qi=Xn.qa,nc=Xn.ra+8*La*Ha+8*Da,ac=Xn.Ha,Xn=Xn.Ia+8*La*Ha+8*Da;La=Ns.ld,0<Da&&(Ld(us,Ws,Rn,Fa+4,wo,La),to(qi,nc,ac,Xn,Ha,Fa+4,wo,La)),Ns.La&&(Bi(us,Ws,Rn,Fa,wo,La),wi(qi,nc,ac,Xn,Ha,Fa,wo,La)),0<Si&&(Zo(us,Ws,Rn,Fa+4,wo,La),Pl(qi,nc,ac,Xn,Ha,Fa+4,wo,La)),Ns.La&&(Jl(us,Ws,Rn,Fa,wo,La),Ia(qi,nc,ac,Xn,Ha,Fa,wo,La))}}if(Ye.ia&&alert("todo:DitherRow"),et.put!=null){if(Yr=16*_n,_n=16*(_n+1),ci?(et.y=Ye.sa,et.O=Ye.ta+Jn,et.f=Ye.qa,et.N=Ye.ra+es,et.ea=Ye.Ha,et.W=Ye.Ia+es):(Yr-=cn,et.y=lr,et.O=qr,et.f=dr,et.N=Lt,et.ea=Mn,et.W=qn),bn||(_n-=cn),_n>et.o&&(_n=et.o),et.F=null,et.J=null,Ye.Fa!=null&&0<Ye.Fa.length&&Yr<_n&&(et.J=kf(Ye,et,Yr,_n-Yr),et.F=Ye.mb,et.F==null&&et.F.length==0)){Tt=da(Ye,3,"Could not decode alpha data.");break e}Yr<et.j&&(cn=et.j-Yr,Yr=et.j,t(!(1&cn)),et.O+=Ye.R*cn,et.N+=Ye.B*(cn>>1),et.W+=Ye.B*(cn>>1),et.F!=null&&(et.J+=et.width*cn)),Yr<_n&&(et.O+=et.v,et.N+=et.v>>1,et.W+=et.v>>1,et.F!=null&&(et.J+=et.v),et.ka=Yr-et.j,et.U=et.va-et.v,et.T=_n-Yr,Tt=et.put(et))}At+1!=Ye.Ic||bn||(n(Ye.sa,Ye.ta-Ot,lr,qr+16*Ye.R,Ot),n(Ye.qa,Ye.ra-gr,dr,Lt+8*Ye.B,gr),n(Ye.Ha,Ye.Ia-gr,Mn,qn+8*Ye.B,gr))}if(!Tt)return da(st,6,"Output aborted.")}return 1})(_,F)),F.bc!=null&&F.bc(F),Y&=1}return Y?(_.cb=0,Y):0}function sr(_,F,Y,se,xe){xe=_[F+Y+32*se]+(xe>>3),_[F+Y+32*se]=-256&xe?0>xe?0:255:xe}function jr(_,F,Y,se,xe,je){sr(_,F,0,Y,se+xe),sr(_,F,1,Y,se+je),sr(_,F,2,Y,se-je),sr(_,F,3,Y,se-xe)}function xr(_){return(20091*_>>16)+_}function Cr(_,F,Y,se){var xe,je=0,Se=i(16);for(xe=0;4>xe;++xe){var Te=_[F+0]+_[F+8],Ie=_[F+0]-_[F+8],Me=(35468*_[F+4]>>16)-xr(_[F+12]),Qe=xr(_[F+4])+(35468*_[F+12]>>16);Se[je+0]=Te+Qe,Se[je+1]=Ie+Me,Se[je+2]=Ie-Me,Se[je+3]=Te-Qe,je+=4,F++}for(xe=je=0;4>xe;++xe)Te=(_=Se[je+0]+4)+Se[je+8],Ie=_-Se[je+8],Me=(35468*Se[je+4]>>16)-xr(Se[je+12]),sr(Y,se,0,0,Te+(Qe=xr(Se[je+4])+(35468*Se[je+12]>>16))),sr(Y,se,1,0,Ie+Me),sr(Y,se,2,0,Ie-Me),sr(Y,se,3,0,Te-Qe),je++,se+=32}function kn(_,F,Y,se){var xe=_[F+0]+4,je=35468*_[F+4]>>16,Se=xr(_[F+4]),Te=35468*_[F+1]>>16;jr(Y,se,0,xe+Se,_=xr(_[F+1]),Te),jr(Y,se,1,xe+je,_,Te),jr(Y,se,2,xe-je,_,Te),jr(Y,se,3,xe-Se,_,Te)}function Pn(_,F,Y,se,xe){Cr(_,F,Y,se),xe&&Cr(_,F+16,Y,se+4)}function nr(_,F,Y,se){ii(_,F+0,Y,se,1),ii(_,F+32,Y,se+128,1)}function ir(_,F,Y,se){var xe;for(_=_[F+0]+4,xe=0;4>xe;++xe)for(F=0;4>F;++F)sr(Y,se,F,xe,_)}function Et(_,F,Y,se){_[F+0]&&Ja(_,F+0,Y,se),_[F+16]&&Ja(_,F+16,Y,se+4),_[F+32]&&Ja(_,F+32,Y,se+128),_[F+48]&&Ja(_,F+48,Y,se+128+4)}function Sr(_,F,Y,se){var xe,je=i(16);for(xe=0;4>xe;++xe){var Se=_[F+0+xe]+_[F+12+xe],Te=_[F+4+xe]+_[F+8+xe],Ie=_[F+4+xe]-_[F+8+xe],Me=_[F+0+xe]-_[F+12+xe];je[0+xe]=Se+Te,je[8+xe]=Se-Te,je[4+xe]=Me+Ie,je[12+xe]=Me-Ie}for(xe=0;4>xe;++xe)Se=(_=je[0+4*xe]+3)+je[3+4*xe],Te=je[1+4*xe]+je[2+4*xe],Ie=je[1+4*xe]-je[2+4*xe],Me=_-je[3+4*xe],Y[se+0]=Se+Te>>3,Y[se+16]=Me+Ie>>3,Y[se+32]=Se-Te>>3,Y[se+48]=Me-Ie>>3,se+=64}function Ht(_,F,Y){var se,xe=F-32,je=$s,Se=255-_[xe-1];for(se=0;se<Y;++se){var Te,Ie=je,Me=Se+_[F-1];for(Te=0;Te<Y;++Te)_[F+Te]=Ie[Me+_[xe+Te]];F+=32}}function Un(_,F){Ht(_,F,4)}function Ca(_,F){Ht(_,F,8)}function pn(_,F){Ht(_,F,16)}function Zt(_,F){var Y;for(Y=0;16>Y;++Y)n(_,F+32*Y,_,F-32,16)}function zn(_,F){var Y;for(Y=16;0<Y;--Y)s(_,F,_[F-1],16),F+=32}function ya(_,F,Y){var se;for(se=0;16>se;++se)s(F,Y+32*se,_,16)}function ln(_,F){var Y,se=16;for(Y=0;16>Y;++Y)se+=_[F-1+32*Y]+_[F+Y-32];ya(se>>5,_,F)}function xn(_,F){var Y,se=8;for(Y=0;16>Y;++Y)se+=_[F-1+32*Y];ya(se>>4,_,F)}function $r(_,F){var Y,se=8;for(Y=0;16>Y;++Y)se+=_[F+Y-32];ya(se>>4,_,F)}function Kr(_,F){ya(128,_,F)}function _e(_,F,Y){return _+2*F+Y+2>>2}function Yt(_,F){var Y,se=F-32;for(se=new Uint8Array([_e(_[se-1],_[se+0],_[se+1]),_e(_[se+0],_[se+1],_[se+2]),_e(_[se+1],_[se+2],_[se+3]),_e(_[se+2],_[se+3],_[se+4])]),Y=0;4>Y;++Y)n(_,F+32*Y,se,0,se.length)}function mr(_,F){var Y=_[F-1],se=_[F-1+32],xe=_[F-1+64],je=_[F-1+96];ce(_,F+0,16843009*_e(_[F-1-32],Y,se)),ce(_,F+32,16843009*_e(Y,se,xe)),ce(_,F+64,16843009*_e(se,xe,je)),ce(_,F+96,16843009*_e(xe,je,je))}function _r(_,F){var Y,se=4;for(Y=0;4>Y;++Y)se+=_[F+Y-32]+_[F-1+32*Y];for(se>>=3,Y=0;4>Y;++Y)s(_,F+32*Y,se,4)}function zr(_,F){var Y=_[F-1+0],se=_[F-1+32],xe=_[F-1+64],je=_[F-1-32],Se=_[F+0-32],Te=_[F+1-32],Ie=_[F+2-32],Me=_[F+3-32];_[F+0+96]=_e(se,xe,_[F-1+96]),_[F+1+96]=_[F+0+64]=_e(Y,se,xe),_[F+2+96]=_[F+1+64]=_[F+0+32]=_e(je,Y,se),_[F+3+96]=_[F+2+64]=_[F+1+32]=_[F+0+0]=_e(Se,je,Y),_[F+3+64]=_[F+2+32]=_[F+1+0]=_e(Te,Se,je),_[F+3+32]=_[F+2+0]=_e(Ie,Te,Se),_[F+3+0]=_e(Me,Ie,Te)}function mn(_,F){var Y=_[F+1-32],se=_[F+2-32],xe=_[F+3-32],je=_[F+4-32],Se=_[F+5-32],Te=_[F+6-32],Ie=_[F+7-32];_[F+0+0]=_e(_[F+0-32],Y,se),_[F+1+0]=_[F+0+32]=_e(Y,se,xe),_[F+2+0]=_[F+1+32]=_[F+0+64]=_e(se,xe,je),_[F+3+0]=_[F+2+32]=_[F+1+64]=_[F+0+96]=_e(xe,je,Se),_[F+3+32]=_[F+2+64]=_[F+1+96]=_e(je,Se,Te),_[F+3+64]=_[F+2+96]=_e(Se,Te,Ie),_[F+3+96]=_e(Te,Ie,Ie)}function ta(_,F){var Y=_[F-1+0],se=_[F-1+32],xe=_[F-1+64],je=_[F-1-32],Se=_[F+0-32],Te=_[F+1-32],Ie=_[F+2-32],Me=_[F+3-32];_[F+0+0]=_[F+1+64]=je+Se+1>>1,_[F+1+0]=_[F+2+64]=Se+Te+1>>1,_[F+2+0]=_[F+3+64]=Te+Ie+1>>1,_[F+3+0]=Ie+Me+1>>1,_[F+0+96]=_e(xe,se,Y),_[F+0+64]=_e(se,Y,je),_[F+0+32]=_[F+1+96]=_e(Y,je,Se),_[F+1+32]=_[F+2+96]=_e(je,Se,Te),_[F+2+32]=_[F+3+96]=_e(Se,Te,Ie),_[F+3+32]=_e(Te,Ie,Me)}function Hn(_,F){var Y=_[F+0-32],se=_[F+1-32],xe=_[F+2-32],je=_[F+3-32],Se=_[F+4-32],Te=_[F+5-32],Ie=_[F+6-32],Me=_[F+7-32];_[F+0+0]=Y+se+1>>1,_[F+1+0]=_[F+0+64]=se+xe+1>>1,_[F+2+0]=_[F+1+64]=xe+je+1>>1,_[F+3+0]=_[F+2+64]=je+Se+1>>1,_[F+0+32]=_e(Y,se,xe),_[F+1+32]=_[F+0+96]=_e(se,xe,je),_[F+2+32]=_[F+1+96]=_e(xe,je,Se),_[F+3+32]=_[F+2+96]=_e(je,Se,Te),_[F+3+64]=_e(Se,Te,Ie),_[F+3+96]=_e(Te,Ie,Me)}function ti(_,F){var Y=_[F-1+0],se=_[F-1+32],xe=_[F-1+64],je=_[F-1+96];_[F+0+0]=Y+se+1>>1,_[F+2+0]=_[F+0+32]=se+xe+1>>1,_[F+2+32]=_[F+0+64]=xe+je+1>>1,_[F+1+0]=_e(Y,se,xe),_[F+3+0]=_[F+1+32]=_e(se,xe,je),_[F+3+32]=_[F+1+64]=_e(xe,je,je),_[F+3+64]=_[F+2+64]=_[F+0+96]=_[F+1+96]=_[F+2+96]=_[F+3+96]=je}function Vu(_,F){var Y=_[F-1+0],se=_[F-1+32],xe=_[F-1+64],je=_[F-1+96],Se=_[F-1-32],Te=_[F+0-32],Ie=_[F+1-32],Me=_[F+2-32];_[F+0+0]=_[F+2+32]=Y+Se+1>>1,_[F+0+32]=_[F+2+64]=se+Y+1>>1,_[F+0+64]=_[F+2+96]=xe+se+1>>1,_[F+0+96]=je+xe+1>>1,_[F+3+0]=_e(Te,Ie,Me),_[F+2+0]=_e(Se,Te,Ie),_[F+1+0]=_[F+3+32]=_e(Y,Se,Te),_[F+1+32]=_[F+3+64]=_e(se,Y,Se),_[F+1+64]=_[F+3+96]=_e(xe,se,Y),_[F+1+96]=_e(je,xe,se)}function jf(_,F){var Y;for(Y=0;8>Y;++Y)n(_,F+32*Y,_,F-32,8)}function Sl(_,F){var Y;for(Y=0;8>Y;++Y)s(_,F,_[F-1],8),F+=32}function po(_,F,Y){var se;for(se=0;8>se;++se)s(F,Y+32*se,_,8)}function ri(_,F){var Y,se=8;for(Y=0;8>Y;++Y)se+=_[F+Y-32]+_[F-1+32*Y];po(se>>4,_,F)}function Nc(_,F){var Y,se=4;for(Y=0;8>Y;++Y)se+=_[F+Y-32];po(se>>3,_,F)}function jc(_,F){var Y,se=4;for(Y=0;8>Y;++Y)se+=_[F-1+32*Y];po(se>>3,_,F)}function Id(_,F){po(128,_,F)}function _l(_,F,Y){var se=_[F-Y],xe=_[F+0],je=3*(xe-se)+rl[1020+_[F-2*Y]-_[F+Y]],Se=Ku[112+(je+4>>3)];_[F-Y]=$s[255+se+Ku[112+(je+3>>3)]],_[F+0]=$s[255+xe-Se]}function Kl(_,F,Y,se){var xe=_[F+0],je=_[F+Y];return vo[255+_[F-2*Y]-_[F-Y]]>se||vo[255+je-xe]>se}function kc(_,F,Y,se){return 4*vo[255+_[F-Y]-_[F+0]]+vo[255+_[F-2*Y]-_[F+Y]]<=se}function uu(_,F,Y,se,xe){var je=_[F-3*Y],Se=_[F-2*Y],Te=_[F-Y],Ie=_[F+0],Me=_[F+Y],Qe=_[F+2*Y],xt=_[F+3*Y];return 4*vo[255+Te-Ie]+vo[255+Se-Me]>se?0:vo[255+_[F-4*Y]-je]<=xe&&vo[255+je-Se]<=xe&&vo[255+Se-Te]<=xe&&vo[255+xt-Qe]<=xe&&vo[255+Qe-Me]<=xe&&vo[255+Me-Ie]<=xe}function Ho(_,F,Y,se){var xe=2*se+1;for(se=0;16>se;++se)kc(_,F+se,Y,xe)&&_l(_,F+se,Y)}function bi(_,F,Y,se){var xe=2*se+1;for(se=0;16>se;++se)kc(_,F+se*Y,1,xe)&&_l(_,F+se*Y,1)}function Qi(_,F,Y,se){var xe;for(xe=3;0<xe;--xe)Ho(_,F+=4*Y,Y,se)}function Sc(_,F,Y,se){var xe;for(xe=3;0<xe;--xe)bi(_,F+=4,Y,se)}function mo(_,F,Y,se,xe,je,Se,Te){for(je=2*je+1;0<xe--;){if(uu(_,F,Y,je,Se))if(Kl(_,F,Y,Te))_l(_,F,Y);else{var Ie=_,Me=F,Qe=Y,xt=Ie[Me-2*Qe],dt=Ie[Me-Qe],st=Ie[Me+0],qt=Ie[Me+Qe],At=Ie[Me+2*Qe],Ye=27*(Tt=rl[1020+3*(st-dt)+rl[1020+xt-qt]])+63>>7,et=18*Tt+63>>7,Tt=9*Tt+63>>7;Ie[Me-3*Qe]=$s[255+Ie[Me-3*Qe]+Tt],Ie[Me-2*Qe]=$s[255+xt+et],Ie[Me-Qe]=$s[255+dt+Ye],Ie[Me+0]=$s[255+st-Ye],Ie[Me+Qe]=$s[255+qt-et],Ie[Me+2*Qe]=$s[255+At-Tt]}F+=se}}function fs(_,F,Y,se,xe,je,Se,Te){for(je=2*je+1;0<xe--;){if(uu(_,F,Y,je,Se))if(Kl(_,F,Y,Te))_l(_,F,Y);else{var Ie=_,Me=F,Qe=Y,xt=Ie[Me-Qe],dt=Ie[Me+0],st=Ie[Me+Qe],qt=Ku[112+((At=3*(dt-xt))+4>>3)],At=Ku[112+(At+3>>3)],Ye=qt+1>>1;Ie[Me-2*Qe]=$s[255+Ie[Me-2*Qe]+Ye],Ie[Me-Qe]=$s[255+xt+At],Ie[Me+0]=$s[255+dt-qt],Ie[Me+Qe]=$s[255+st-Ye]}F+=se}}function Al(_,F,Y,se,xe,je){mo(_,F,Y,1,16,se,xe,je)}function hs(_,F,Y,se,xe,je){mo(_,F,1,Y,16,se,xe,je)}function Wo(_,F,Y,se,xe,je){var Se;for(Se=3;0<Se;--Se)fs(_,F+=4*Y,Y,1,16,se,xe,je)}function _c(_,F,Y,se,xe,je){var Se;for(Se=3;0<Se;--Se)fs(_,F+=4,1,Y,16,se,xe,je)}function xo(_,F,Y,se,xe,je,Se,Te){mo(_,F,xe,1,8,je,Se,Te),mo(Y,se,xe,1,8,je,Se,Te)}function El(_,F,Y,se,xe,je,Se,Te){mo(_,F,1,xe,8,je,Se,Te),mo(Y,se,1,xe,8,je,Se,Te)}function Vo(_,F,Y,se,xe,je,Se,Te){fs(_,F+4*xe,xe,1,8,je,Se,Te),fs(Y,se+4*xe,xe,1,8,je,Se,Te)}function du(_,F,Y,se,xe,je,Se,Te){fs(_,F+4,1,xe,8,je,Se,Te),fs(Y,se+4,1,xe,8,je,Se,Te)}function Go(){this.ba=new Lr,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new or,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ko(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Ac(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ka(){this.ua=0,this.Wa=new Q,this.vb=new Q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new q,this.yc=new C}function w0(){this.xb=this.a=0,this.l=new ga,this.ca=new Lr,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new O,this.Pb=0,this.wd=new O,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ka,this.ab=0,this.gc=o(4,Ac),this.Oc=0}function fu(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new ga,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Cl(_,F,Y,se,xe,je,Se){for(_=_==null?0:_[F+0],F=0;F<Se;++F)xe[je+F]=_+Y[se+F]&255,_=xe[je+F]}function hu(_,F,Y,se,xe,je,Se){var Te;if(_==null)Cl(null,null,Y,se,xe,je,Se);else for(Te=0;Te<Se;++Te)xe[je+Te]=_[F+Te]+Y[se+Te]&255}function Zi(_,F,Y,se,xe,je,Se){if(_==null)Cl(null,null,Y,se,xe,je,Se);else{var Te,Ie=_[F+0],Me=Ie,Qe=Ie;for(Te=0;Te<Se;++Te)Me=Qe+(Ie=_[F+Te])-Me,Qe=Y[se+Te]+(-256&Me?0>Me?0:255:Me)&255,Me=Ie,xe[je+Te]=Qe}}function kf(_,F,Y,se){var xe=F.width,je=F.o;if(t(_!=null&&F!=null),0>Y||0>=se||Y+se>je)return null;if(!_.Cc){if(_.ga==null){var Se;if(_.ga=new fu,(Se=_.ga==null)||(Se=F.width*F.o,t(_.Gb.length==0),_.Gb=i(Se),_.Uc=0,_.Gb==null?Se=0:(_.mb=_.Gb,_.nb=_.Uc,_.rc=null,Se=1),Se=!Se),!Se){Se=_.ga;var Te=_.Fa,Ie=_.P,Me=_.qc,Qe=_.mb,xt=_.nb,dt=Ie+1,st=Me-1,qt=Se.l;if(t(Te!=null&&Qe!=null&&F!=null),bs[0]=null,bs[1]=Cl,bs[2]=hu,bs[3]=Zi,Se.ca=Qe,Se.tb=xt,Se.c=F.width,Se.i=F.height,t(0<Se.c&&0<Se.i),1>=Me)F=0;else if(Se.$a=Te[Ie+0]>>0&3,Se.Z=Te[Ie+0]>>2&3,Se.Lc=Te[Ie+0]>>4&3,Ie=Te[Ie+0]>>6&3,0>Se.$a||1<Se.$a||4<=Se.Z||1<Se.Lc||Ie)F=0;else if(qt.put=hn,qt.ac=Gr,qt.bc=On,qt.ma=Se,qt.width=F.width,qt.height=F.height,qt.Da=F.Da,qt.v=F.v,qt.va=F.va,qt.j=F.j,qt.o=F.o,Se.$a)e:{t(Se.$a==1),F=ct();t:for(;;){if(F==null){F=0;break e}if(t(Se!=null),Se.mc=F,F.c=Se.c,F.i=Se.i,F.l=Se.l,F.l.ma=Se,F.l.width=Se.c,F.l.height=Se.i,F.a=0,ne(F.m,Te,dt,st),!Ge(Se.c,Se.i,1,F,null)||(F.ab==1&&F.gc[0].hc==3&&ye(F.s)?(Se.ic=1,Te=F.c*F.i,F.Ta=null,F.Ua=0,F.V=i(Te),F.Ba=0,F.V==null?(F.a=1,F=0):F=1):(Se.ic=0,F=Je(F,Se.c)),!F))break t;F=1;break e}Se.mc=null,F=0}else F=st>=Se.c*Se.i;Se=!F}if(Se)return null;_.ga.Lc!=1?_.Ga=0:se=je-Y}t(_.ga!=null),t(Y+se<=je);e:{if(F=(Te=_.ga).c,je=Te.l.o,Te.$a==0){if(dt=_.rc,st=_.Vc,qt=_.Fa,Ie=_.P+1+Y*F,Me=_.mb,Qe=_.nb+Y*F,t(Ie<=_.P+_.qc),Te.Z!=0)for(t(bs[Te.Z]!=null),Se=0;Se<se;++Se)bs[Te.Z](dt,st,qt,Ie,Me,Qe,F),dt=Me,st=Qe,Qe+=F,Ie+=F;else for(Se=0;Se<se;++Se)n(Me,Qe,qt,Ie,F),dt=Me,st=Qe,Qe+=F,Ie+=F;_.rc=dt,_.Vc=st}else{if(t(Te.mc!=null),F=Y+se,t((Se=Te.mc)!=null),t(F<=Se.i),Se.C>=F)F=1;else if(Te.ic||ht(),Te.ic){Te=Se.V,dt=Se.Ba,st=Se.c;var At=Se.i,Ye=(qt=1,Ie=Se.$/st,Me=Se.$%st,Qe=Se.m,xt=Se.s,Se.$),et=st*At,Tt=st*F,Ot=xt.wc,Lt=Ye<Tt?Wt(xt,Me,Ie):null;t(Ye<=et),t(F<=At),t(ye(xt));t:for(;;){for(;!Qe.h&&Ye<Tt;){if(Me&Ot||(Lt=Wt(xt,Me,Ie)),t(Lt!=null),K(Qe),256>(At=Xe(Lt.G[0],Lt.H[0],Qe)))Te[dt+Ye]=At,++Ye,++Me>=st&&(Me=0,++Ie<=F&&!(Ie%16)&&Ce(Se,Ie));else{if(!(280>At)){qt=0;break t}At=Yn(At-256,Qe);var gr,lr=Xe(Lt.G[4],Lt.H[4],Qe);if(K(Qe),!(Ye>=(lr=on(st,lr=Yn(lr,Qe)))&&et-Ye>=At)){qt=0;break t}for(gr=0;gr<At;++gr)Te[dt+Ye+gr]=Te[dt+Ye+gr-lr];for(Ye+=At,Me+=At;Me>=st;)Me-=st,++Ie<=F&&!(Ie%16)&&Ce(Se,Ie);Ye<Tt&&Me&Ot&&(Lt=Wt(xt,Me,Ie))}t(Qe.h==W(Qe))}Ce(Se,Ie>F?F:Ie);break t}!qt||Qe.h&&Ye<et?(qt=0,Se.a=Qe.h?5:3):Se.$=Ye,F=qt}else F=Oe(Se,Se.V,Se.Ba,Se.c,Se.i,F,ze);if(!F){se=0;break e}}Y+se>=je&&(_.Cc=1),se=1}if(!se)return null;if(_.Cc&&((se=_.ga)!=null&&(se.mc=null),_.ga=null,0<_.Ga))return alert("todo:WebPDequantizeLevels"),null}return _.nb+Y*xe}function V(_,F,Y,se,xe,je){for(;0<xe--;){var Se,Te=_,Ie=F+(Y?1:0),Me=_,Qe=F+(Y?0:3);for(Se=0;Se<se;++Se){var xt=Me[Qe+4*Se];xt!=255&&(xt*=32897,Te[Ie+4*Se+0]=Te[Ie+4*Se+0]*xt>>23,Te[Ie+4*Se+1]=Te[Ie+4*Se+1]*xt>>23,Te[Ie+4*Se+2]=Te[Ie+4*Se+2]*xt>>23)}F+=je}}function be(_,F,Y,se,xe){for(;0<se--;){var je;for(je=0;je<Y;++je){var Se=_[F+2*je+0],Te=15&(Me=_[F+2*je+1]),Ie=4369*Te,Me=(240&Me|Me>>4)*Ie>>16;_[F+2*je+0]=(240&Se|Se>>4)*Ie>>16&240|(15&Se|Se<<4)*Ie>>16>>4&15,_[F+2*je+1]=240&Me|Te}F+=xe}}function $e(_,F,Y,se,xe,je,Se,Te){var Ie,Me,Qe=255;for(Me=0;Me<xe;++Me){for(Ie=0;Ie<se;++Ie){var xt=_[F+Ie];je[Se+4*Ie]=xt,Qe&=xt}F+=Y,Se+=Te}return Qe!=255}function Ze(_,F,Y,se,xe){var je;for(je=0;je<xe;++je)Y[se+je]=_[F+je]>>8}function ht(){oi=V,Wn=be,Kn=$e,fa=Ze}function Pt(_,F,Y){T[_]=function(se,xe,je,Se,Te,Ie,Me,Qe,xt,dt,st,qt,At,Ye,et,Tt,Ot){var Lt,gr=Ot-1>>1,lr=Te[Ie+0]|Me[Qe+0]<<16,qr=xt[dt+0]|st[qt+0]<<16;t(se!=null);var dr=3*lr+qr+131074>>2;for(F(se[xe+0],255&dr,dr>>16,At,Ye),je!=null&&(dr=3*qr+lr+131074>>2,F(je[Se+0],255&dr,dr>>16,et,Tt)),Lt=1;Lt<=gr;++Lt){var Mn=Te[Ie+Lt]|Me[Qe+Lt]<<16,qn=xt[dt+Lt]|st[qt+Lt]<<16,bn=lr+Mn+qr+qn+524296,cn=bn+2*(Mn+qr)>>3;dr=cn+lr>>1,lr=(bn=bn+2*(lr+qn)>>3)+Mn>>1,F(se[xe+2*Lt-1],255&dr,dr>>16,At,Ye+(2*Lt-1)*Y),F(se[xe+2*Lt-0],255&lr,lr>>16,At,Ye+(2*Lt-0)*Y),je!=null&&(dr=bn+qr>>1,lr=cn+qn>>1,F(je[Se+2*Lt-1],255&dr,dr>>16,et,Tt+(2*Lt-1)*Y),F(je[Se+2*Lt+0],255&lr,lr>>16,et,Tt+(2*Lt+0)*Y)),lr=Mn,qr=qn}1&Ot||(dr=3*lr+qr+131074>>2,F(se[xe+Ot-1],255&dr,dr>>16,At,Ye+(Ot-1)*Y),je!=null&&(dr=3*qr+lr+131074>>2,F(je[Se+Ot-1],255&dr,dr>>16,et,Tt+(Ot-1)*Y)))}}function Gt(){Ui[Md]=_h,Ui[Oc]=Rc,Ui[Rd]=Ah,Ui[Xu]=Zl,Ui[Bd]=ec,Ui[ra]=Bc,Ui[pu]=Af,Ui[mu]=Rc,Ui[Il]=Zl,Ui[Yu]=ec,Ui[Pc]=Bc}function yr(_){return _&-16384?0>_?0:255:_>>rc}function Mr(_,F){return yr((19077*_>>8)+(26149*F>>8)-14234)}function Xr(_,F,Y){return yr((19077*_>>8)-(6419*F>>8)-(13320*Y>>8)+8708)}function Qr(_,F){return yr((19077*_>>8)+(33050*F>>8)-17685)}function un(_,F,Y,se,xe){se[xe+0]=Mr(_,Y),se[xe+1]=Xr(_,F,Y),se[xe+2]=Qr(_,F)}function Ta(_,F,Y,se,xe){se[xe+0]=Qr(_,F),se[xe+1]=Xr(_,F,Y),se[xe+2]=Mr(_,Y)}function $a(_,F,Y,se,xe){var je=Xr(_,F,Y);F=je<<3&224|Qr(_,F)>>3,se[xe+0]=248&Mr(_,Y)|je>>5,se[xe+1]=F}function Xa(_,F,Y,se,xe){var je=240&Qr(_,F)|15;se[xe+0]=240&Mr(_,Y)|Xr(_,F,Y)>>4,se[xe+1]=je}function qs(_,F,Y,se,xe){se[xe+0]=255,un(_,F,Y,se,xe+1)}function ps(_,F,Y,se,xe){Ta(_,F,Y,se,xe),se[xe+3]=255}function Xo(_,F,Y,se,xe){un(_,F,Y,se,xe),se[xe+3]=255}function ni(_,F){return 0>_?0:_>F?F:_}function ms(_,F,Y){T[_]=function(se,xe,je,Se,Te,Ie,Me,Qe,xt){for(var dt=Qe+(-2&xt)*Y;Qe!=dt;)F(se[xe+0],je[Se+0],Te[Ie+0],Me,Qe),F(se[xe+1],je[Se+0],Te[Ie+0],Me,Qe+Y),xe+=2,++Se,++Ie,Qe+=2*Y;1&xt&&F(se[xe+0],je[Se+0],Te[Ie+0],Me,Qe)}}function eo(_,F,Y){return Y==0?_==0?F==0?6:5:F==0?4:0:Y}function Ya(_,F,Y,se,xe){switch(_>>>30){case 3:ii(F,Y,se,xe,0);break;case 2:Sn(F,Y,se,xe);break;case 1:Ja(F,Y,se,xe)}}function Ec(_,F){var Y,se,xe=F.M,je=F.Nb,Se=_.oc,Te=_.pc+40,Ie=_.oc,Me=_.pc+584,Qe=_.oc,xt=_.pc+600;for(Y=0;16>Y;++Y)Se[Te+32*Y-1]=129;for(Y=0;8>Y;++Y)Ie[Me+32*Y-1]=129,Qe[xt+32*Y-1]=129;for(0<xe?Se[Te-1-32]=Ie[Me-1-32]=Qe[xt-1-32]=129:(s(Se,Te-32-1,127,21),s(Ie,Me-32-1,127,9),s(Qe,xt-32-1,127,9)),se=0;se<_.za;++se){var dt=F.ya[F.aa+se];if(0<se){for(Y=-1;16>Y;++Y)n(Se,Te+32*Y-4,Se,Te+32*Y+12,4);for(Y=-1;8>Y;++Y)n(Ie,Me+32*Y-4,Ie,Me+32*Y+4,4),n(Qe,xt+32*Y-4,Qe,xt+32*Y+4,4)}var st=_.Gd,qt=_.Hd+se,At=dt.ad,Ye=dt.Hc;if(0<xe&&(n(Se,Te-32,st[qt].y,0,16),n(Ie,Me-32,st[qt].f,0,8),n(Qe,xt-32,st[qt].ea,0,8)),dt.Za){var et=Se,Tt=Te-32+16;for(0<xe&&(se>=_.za-1?s(et,Tt,st[qt].y[15],4):n(et,Tt,st[qt+1].y,0,4)),Y=0;4>Y;Y++)et[Tt+128+Y]=et[Tt+256+Y]=et[Tt+384+Y]=et[Tt+0+Y];for(Y=0;16>Y;++Y,Ye<<=2)et=Se,Tt=Te+Uc[Y],li[dt.Ob[Y]](et,Tt),Ya(Ye,At,16*+Y,et,Tt)}else if(et=eo(se,xe,dt.Ob[0]),Ni[et](Se,Te),Ye!=0)for(Y=0;16>Y;++Y,Ye<<=2)Ya(Ye,At,16*+Y,Se,Te+Uc[Y]);for(Y=dt.Gc,et=eo(se,xe,dt.Dd),ji[et](Ie,Me),ji[et](Qe,xt),Ye=At,et=Ie,Tt=Me,255&(dt=Y>>0)&&(170&dt?Ri(Ye,256,et,Tt):Ps(Ye,256,et,Tt)),dt=Qe,Ye=xt,255&(Y>>=8)&&(170&Y?Ri(At,320,dt,Ye):Ps(At,320,dt,Ye)),xe<_.Ub-1&&(n(st[qt].y,0,Se,Te+480,16),n(st[qt].f,0,Ie,Me+224,8),n(st[qt].ea,0,Qe,xt+224,8)),Y=8*je*_.B,st=_.sa,qt=_.ta+16*se+16*je*_.R,At=_.qa,dt=_.ra+8*se+Y,Ye=_.Ha,et=_.Ia+8*se+Y,Y=0;16>Y;++Y)n(st,qt+Y*_.R,Se,Te+32*Y,16);for(Y=0;8>Y;++Y)n(At,dt+Y*_.B,Ie,Me+32*Y,8),n(Ye,et+Y*_.B,Qe,xt+32*Y,8)}}function yn(_,F,Y,se,xe,je,Se,Te,Ie){var Me=[0],Qe=[0],xt=0,dt=Ie!=null?Ie.kd:0,st=Ie??new Ko;if(_==null||12>Y)return 7;st.data=_,st.w=F,st.ha=Y,F=[F],Y=[Y],st.gb=[st.gb];e:{var qt=F,At=Y,Ye=st.gb;if(t(_!=null),t(At!=null),t(Ye!=null),Ye[0]=0,12<=At[0]&&!r(_,qt[0],"RIFF")){if(r(_,qt[0]+8,"WEBP")){Ye=3;break e}var et=He(_,qt[0]+4);if(12>et||4294967286<et){Ye=3;break e}if(dt&&et>At[0]-8){Ye=7;break e}Ye[0]=et,qt[0]+=12,At[0]-=12}Ye=0}if(Ye!=0)return Ye;for(et=0<st.gb[0],Y=Y[0];;){e:{var Tt=_;At=F,Ye=Y;var Ot=Me,Lt=Qe,gr=qt=[0];if((dr=xt=[xt])[0]=0,8>Ye[0])Ye=7;else{if(!r(Tt,At[0],"VP8X")){if(He(Tt,At[0]+4)!=10){Ye=3;break e}if(18>Ye[0]){Ye=7;break e}var lr=He(Tt,At[0]+8),qr=1+le(Tt,At[0]+12);if(2147483648<=qr*(Tt=1+le(Tt,At[0]+15))){Ye=3;break e}gr!=null&&(gr[0]=lr),Ot!=null&&(Ot[0]=qr),Lt!=null&&(Lt[0]=Tt),At[0]+=18,Ye[0]-=18,dr[0]=1}Ye=0}}if(xt=xt[0],qt=qt[0],Ye!=0)return Ye;if(At=!!(2&qt),!et&&xt)return 3;if(je!=null&&(je[0]=!!(16&qt)),Se!=null&&(Se[0]=At),Te!=null&&(Te[0]=0),Se=Me[0],qt=Qe[0],xt&&At&&Ie==null){Ye=0;break}if(4>Y){Ye=7;break}if(et&&xt||!et&&!xt&&!r(_,F[0],"ALPH")){Y=[Y],st.na=[st.na],st.P=[st.P],st.Sa=[st.Sa];e:{lr=_,Ye=F,et=Y;var dr=st.gb;Ot=st.na,Lt=st.P,gr=st.Sa,qr=22,t(lr!=null),t(et!=null),Tt=Ye[0];var Mn=et[0];for(t(Ot!=null),t(gr!=null),Ot[0]=null,Lt[0]=null,gr[0]=0;;){if(Ye[0]=Tt,et[0]=Mn,8>Mn){Ye=7;break e}var qn=He(lr,Tt+4);if(4294967286<qn){Ye=3;break e}var bn=8+qn+1&-2;if(qr+=bn,0<dr&&qr>dr){Ye=3;break e}if(!r(lr,Tt,"VP8 ")||!r(lr,Tt,"VP8L")){Ye=0;break e}if(Mn[0]<bn){Ye=7;break e}r(lr,Tt,"ALPH")||(Ot[0]=lr,Lt[0]=Tt+8,gr[0]=qn),Tt+=bn,Mn-=bn}}if(Y=Y[0],st.na=st.na[0],st.P=st.P[0],st.Sa=st.Sa[0],Ye!=0)break}Y=[Y],st.Ja=[st.Ja],st.xa=[st.xa];e:if(dr=_,Ye=F,et=Y,Ot=st.gb[0],Lt=st.Ja,gr=st.xa,lr=Ye[0],Tt=!r(dr,lr,"VP8 "),qr=!r(dr,lr,"VP8L"),t(dr!=null),t(et!=null),t(Lt!=null),t(gr!=null),8>et[0])Ye=7;else{if(Tt||qr){if(dr=He(dr,lr+4),12<=Ot&&dr>Ot-12){Ye=3;break e}if(dt&&dr>et[0]-8){Ye=7;break e}Lt[0]=dr,Ye[0]+=8,et[0]-=8,gr[0]=qr}else gr[0]=5<=et[0]&&dr[lr+0]==47&&!(dr[lr+4]>>5),Lt[0]=et[0];Ye=0}if(Y=Y[0],st.Ja=st.Ja[0],st.xa=st.xa[0],F=F[0],Ye!=0)break;if(4294967286<st.Ja)return 3;if(Te==null||At||(Te[0]=st.xa?2:1),Se=[Se],qt=[qt],st.xa){if(5>Y){Ye=7;break}Te=Se,dt=qt,At=je,_==null||5>Y?_=0:5<=Y&&_[F+0]==47&&!(_[F+4]>>5)?(et=[0],dr=[0],Ot=[0],ne(Lt=new O,_,F,Y),br(Lt,et,dr,Ot)?(Te!=null&&(Te[0]=et[0]),dt!=null&&(dt[0]=dr[0]),At!=null&&(At[0]=Ot[0]),_=1):_=0):_=0}else{if(10>Y){Ye=7;break}Te=qt,_==null||10>Y||!Us(_,F+3,Y-3)?_=0:(dt=_[F+0]|_[F+1]<<8|_[F+2]<<16,At=16383&(_[F+7]<<8|_[F+6]),_=16383&(_[F+9]<<8|_[F+8]),1&dt||3<(dt>>1&7)||!(dt>>4&1)||dt>>5>=st.Ja||!At||!_?_=0:(Se&&(Se[0]=At),Te&&(Te[0]=_),_=1))}if(!_||(Se=Se[0],qt=qt[0],xt&&(Me[0]!=Se||Qe[0]!=qt)))return 3;Ie!=null&&(Ie[0]=st,Ie.offset=F-Ie.w,t(4294967286>F-Ie.w),t(Ie.offset==Ie.ha-Y));break}return Ye==0||Ye==7&&xt&&Ie==null?(je!=null&&(je[0]|=st.na!=null&&0<st.na.length),se!=null&&(se[0]=Se),xe!=null&&(xe[0]=qt),0):Ye}function cs(_,F,Y){var se=F.width,xe=F.height,je=0,Se=0,Te=se,Ie=xe;if(F.Da=_!=null&&0<_.Da,F.Da&&(Te=_.cd,Ie=_.bd,je=_.v,Se=_.j,11>Y||(je&=-2,Se&=-2),0>je||0>Se||0>=Te||0>=Ie||je+Te>se||Se+Ie>xe))return 0;if(F.v=je,F.j=Se,F.va=je+Te,F.o=Se+Ie,F.U=Te,F.T=Ie,F.da=_!=null&&0<_.da,F.da){if(!we(Te,Ie,Y=[_.ib],je=[_.hb]))return 0;F.ib=Y[0],F.hb=je[0]}return F.ob=_!=null&&_.ob,F.Kb=_==null||!_.Sd,F.da&&(F.ob=F.ib<3*se/4&&F.hb<3*xe/4,F.Kb=0),1}function Oa(_){if(_==null)return 2;if(11>_.S){var F=_.f.RGBA;F.fb+=(_.height-1)*F.A,F.A=-F.A}else F=_.f.kb,_=_.height,F.O+=(_-1)*F.fa,F.fa=-F.fa,F.N+=(_-1>>1)*F.Ab,F.Ab=-F.Ab,F.W+=(_-1>>1)*F.Db,F.Db=-F.Db,F.F!=null&&(F.J+=(_-1)*F.lb,F.lb=-F.lb);return 0}function xs(_,F,Y,se){if(se==null||0>=_||0>=F)return 2;if(Y!=null){if(Y.Da){var xe=Y.cd,je=Y.bd,Se=-2&Y.v,Te=-2&Y.j;if(0>Se||0>Te||0>=xe||0>=je||Se+xe>_||Te+je>F)return 2;_=xe,F=je}if(Y.da){if(!we(_,F,xe=[Y.ib],je=[Y.hb]))return 2;_=xe[0],F=je[0]}}se.width=_,se.height=F;e:{var Ie=se.width,Me=se.height;if(_=se.S,0>=Ie||0>=Me||!(_>=Md&&13>_))_=2;else{if(0>=se.Rd&&se.sd==null){Se=je=xe=F=0;var Qe=(Te=Ie*Ud[_])*Me;if(11>_||(je=(Me+1)/2*(F=(Ie+1)/2),_==12&&(Se=(xe=Ie)*Me)),(Me=i(Qe+2*je+Se))==null){_=1;break e}se.sd=Me,11>_?((Ie=se.f.RGBA).eb=Me,Ie.fb=0,Ie.A=Te,Ie.size=Qe):((Ie=se.f.kb).y=Me,Ie.O=0,Ie.fa=Te,Ie.Fd=Qe,Ie.f=Me,Ie.N=0+Qe,Ie.Ab=F,Ie.Cd=je,Ie.ea=Me,Ie.W=0+Qe+je,Ie.Db=F,Ie.Ed=je,_==12&&(Ie.F=Me,Ie.J=0+Qe+2*je),Ie.Tc=Se,Ie.lb=xe)}if(F=1,xe=se.S,je=se.width,Se=se.height,xe>=Md&&13>xe)if(11>xe)_=se.f.RGBA,F&=(Te=Math.abs(_.A))*(Se-1)+je<=_.size,F&=Te>=je*Ud[xe],F&=_.eb!=null;else{_=se.f.kb,Te=(je+1)/2,Qe=(Se+1)/2,Ie=Math.abs(_.fa),Me=Math.abs(_.Ab);var xt=Math.abs(_.Db),dt=Math.abs(_.lb),st=dt*(Se-1)+je;F&=Ie*(Se-1)+je<=_.Fd,F&=Me*(Qe-1)+Te<=_.Cd,F=(F&=xt*(Qe-1)+Te<=_.Ed)&Ie>=je&Me>=Te&xt>=Te,F&=_.y!=null,F&=_.f!=null,F&=_.ea!=null,xe==12&&(F&=dt>=je,F&=st<=_.Tc,F&=_.F!=null)}else F=0;_=F?0:2}}return _!=0||Y!=null&&Y.fd&&(_=Oa(se)),_}var dn=64,Ts=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Pa=24,Fi=32,gs=8,ua=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];pe("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(_){return _},T.Predictor2=function(_,F,Y){return F[Y+0]},T.Predictor3=function(_,F,Y){return F[Y+1]},T.Predictor4=function(_,F,Y){return F[Y-1]},T.Predictor5=function(_,F,Y){return Pe(Pe(_,F[Y+1]),F[Y+0])},T.Predictor6=function(_,F,Y){return Pe(_,F[Y-1])},T.Predictor7=function(_,F,Y){return Pe(_,F[Y+0])},T.Predictor8=function(_,F,Y){return Pe(F[Y-1],F[Y+0])},T.Predictor9=function(_,F,Y){return Pe(F[Y+0],F[Y+1])},T.Predictor10=function(_,F,Y){return Pe(Pe(_,F[Y-1]),Pe(F[Y+0],F[Y+1]))},T.Predictor11=function(_,F,Y){var se=F[Y+0];return 0>=nt(se>>24&255,_>>24&255,(F=F[Y-1])>>24&255)+nt(se>>16&255,_>>16&255,F>>16&255)+nt(se>>8&255,_>>8&255,F>>8&255)+nt(255&se,255&_,255&F)?se:_},T.Predictor12=function(_,F,Y){var se=F[Y+0];return(Ne((_>>24&255)+(se>>24&255)-((F=F[Y-1])>>24&255))<<24|Ne((_>>16&255)+(se>>16&255)-(F>>16&255))<<16|Ne((_>>8&255)+(se>>8&255)-(F>>8&255))<<8|Ne((255&_)+(255&se)-(255&F)))>>>0},T.Predictor13=function(_,F,Y){var se=F[Y-1];return(Be((_=Pe(_,F[Y+0]))>>24&255,se>>24&255)<<24|Be(_>>16&255,se>>16&255)<<16|Be(_>>8&255,se>>8&255)<<8|Be(_>>0&255,se>>0&255))>>>0};var vs=T.PredictorAdd0;T.PredictorAdd1=mt,pe("Predictor2","PredictorAdd2"),pe("Predictor3","PredictorAdd3"),pe("Predictor4","PredictorAdd4"),pe("Predictor5","PredictorAdd5"),pe("Predictor6","PredictorAdd6"),pe("Predictor7","PredictorAdd7"),pe("Predictor8","PredictorAdd8"),pe("Predictor9","PredictorAdd9"),pe("Predictor10","PredictorAdd10"),pe("Predictor11","PredictorAdd11"),pe("Predictor12","PredictorAdd12"),pe("Predictor13","PredictorAdd13");var Mi=T.PredictorAdd2;ut("ColorIndexInverseTransform","MapARGB","32b",(function(_){return _>>8&255}),(function(_){return _})),ut("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(_){return _}),(function(_){return _>>8&255}));var Tl,ai=T.ColorIndexInverseTransform,Xl=T.MapARGB,Dd=T.VP8LColorIndexInverseTransformAlpha,Cc=T.MapAlpha,Ol=T.VP8LPredictorsAdd=[];Ol.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var Yl,si,Os,Yo,Jo,go,Qo,ii,Sn,Ri,Ja,Ps,Zo,Ld,Pl,to,Jl,Bi,Ia,wi,el,Ql,ro,ys,oi,Wn,Kn,fa,Qa=i(511),tl=i(2041),Gu=i(225),Tc=i(767),Fd=0,rl=tl,Ku=Gu,$s=Tc,vo=Qa,Md=0,Oc=1,Rd=2,Xu=3,Bd=4,ra=5,pu=6,mu=7,Il=8,Yu=9,Pc=10,Ju=[2,3,7],N0=[3,3,11],Ic=[280,256,256,256,40],kh=[0,1,1,1,0],xu=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Dc=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Lc=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Sf=8,Fc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nl=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Mc=null,_f=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Qu=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Sh=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],gu=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],rm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],nm=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Zu=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ni=[],li=[],ji=[],Dl=1,vu=2,bs=[],Ui=[];Pt("UpsampleRgbLinePair",un,3),Pt("UpsampleBgrLinePair",Ta,3),Pt("UpsampleRgbaLinePair",Xo,4),Pt("UpsampleBgraLinePair",ps,4),Pt("UpsampleArgbLinePair",qs,4),Pt("UpsampleRgba4444LinePair",Xa,2),Pt("UpsampleRgb565LinePair",$a,2);var _h=T.UpsampleRgbLinePair,Ah=T.UpsampleBgrLinePair,Rc=T.UpsampleRgbaLinePair,Zl=T.UpsampleBgraLinePair,ec=T.UpsampleArgbLinePair,Bc=T.UpsampleRgba4444LinePair,Af=T.UpsampleRgb565LinePair,tc=16,yo=1<<tc-1,Vn=-227,na=482,rc=6,zs=0,Hs=i(256),ha=i(256),bo=i(256),za=i(256),Ef=i(na-Vn),Cf=i(na-Vn);ms("YuvToRgbRow",un,3),ms("YuvToBgrRow",Ta,3),ms("YuvToRgbaRow",Xo,4),ms("YuvToBgraRow",ps,4),ms("YuvToArgbRow",qs,4),ms("YuvToRgba4444Row",Xa,2),ms("YuvToRgb565Row",$a,2);var Uc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],al=[0,2,8],Eh=[8,7,6,4,4,2,2,2,1,1,1,1],ki=1;this.WebPDecodeRGBA=function(_,F,Y,se,xe){var je=Oc,Se=new Go,Te=new Lr;Se.ba=Te,Te.S=je,Te.width=[Te.width],Te.height=[Te.height];var Ie=Te.width,Me=Te.height,Qe=new Er;if(Qe==null||_==null)var xt=2;else t(Qe!=null),xt=yn(_,F,Y,Qe.width,Qe.height,Qe.Pd,Qe.Qd,Qe.format,null);if(xt!=0?Ie=0:(Ie!=null&&(Ie[0]=Qe.width[0]),Me!=null&&(Me[0]=Qe.height[0]),Ie=1),Ie){Te.width=Te.width[0],Te.height=Te.height[0],se!=null&&(se[0]=Te.width),xe!=null&&(xe[0]=Te.height);e:{if(se=new ga,(xe=new Ko).data=_,xe.w=F,xe.ha=Y,xe.kd=1,F=[0],t(xe!=null),((_=yn(xe.data,xe.w,xe.ha,null,null,null,F,null,xe))==0||_==7)&&F[0]&&(_=4),(F=_)==0){if(t(Se!=null),se.data=xe.data,se.w=xe.w+xe.offset,se.ha=xe.ha-xe.offset,se.put=hn,se.ac=Gr,se.bc=On,se.ma=Se,xe.xa){if((_=ct())==null){Se=1;break e}if((function(dt,st){var qt=[0],At=[0],Ye=[0];t:for(;;){if(dt==null)return 0;if(st==null)return dt.a=2,0;if(dt.l=st,dt.a=0,ne(dt.m,st.data,st.w,st.ha),!br(dt.m,qt,At,Ye)){dt.a=3;break t}if(dt.xb=vu,st.width=qt[0],st.height=At[0],!Ge(qt[0],At[0],1,dt,null))break t;return 1}return t(dt.a!=0),0})(_,se)){if(se=(F=xs(se.width,se.height,Se.Oa,Se.ba))==0){t:{se=_;r:for(;;){if(se==null){se=0;break t}if(t(se.s.yc!=null),t(se.s.Ya!=null),t(0<se.s.Wb),t((Y=se.l)!=null),t((xe=Y.ma)!=null),se.xb!=0){if(se.ca=xe.ba,se.tb=xe.tb,t(se.ca!=null),!cs(xe.Oa,Y,Xu)){se.a=2;break r}if(!Je(se,Y.width)||Y.da)break r;if((Y.da||bt(se.ca.S))&&ht(),11>se.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),se.ca.f.kb.F!=null&&ht()),se.Pb&&0<se.s.ua&&se.s.vb.X==null&&!Fe(se.s.vb,se.s.Wa.Xa)){se.a=1;break r}se.xb=0}if(!Oe(se,se.V,se.Ba,se.c,se.i,Y.o,me))break r;xe.Dc=se.Ma,se=1;break t}t(se.a!=0),se=0}se=!se}se&&(F=_.a)}else F=_.a}else{if((_=new ca)==null){Se=1;break e}if(_.Fa=xe.na,_.P=xe.P,_.qc=xe.Sa,va(_,se)){if((F=xs(se.width,se.height,Se.Oa,Se.ba))==0){if(_.Aa=0,Y=Se.Oa,t((xe=_)!=null),Y!=null){if(0<(Ie=0>(Ie=Y.Md)?0:100<Ie?255:255*Ie/100)){for(Me=Qe=0;4>Me;++Me)12>(xt=xe.pb[Me]).lc&&(xt.ia=Ie*Eh[0>xt.lc?0:xt.lc]>>3),Qe|=xt.ia;Qe&&(alert("todo:VP8InitRandom"),xe.ia=1)}xe.Ga=Y.Id,100<xe.Ga?xe.Ga=100:0>xe.Ga&&(xe.Ga=0)}Ct(_,se)||(F=_.a)}}else F=_.a}F==0&&Se.Oa!=null&&Se.Oa.fd&&(F=Oa(Se.ba))}Se=F}je=Se!=0?null:11>je?Te.f.RGBA.eb:Te.f.kb.y}else je=null;return je};var Ud=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(T,I){for(var B="",E=0;E<4;E++)B+=String.fromCharCode(T[I++]);return B}function f(T,I){return(T[I+0]<<0|T[I+1]<<8|T[I+2]<<16)>>>0}function d(T,I){return(T[I+0]<<0|T[I+1]<<8|T[I+2]<<16|T[I+3]<<24)>>>0}new c;var m=[0],p=[0],y=[],v=new c,g=e,b=(function(T,I){var B={},E=0,C=!1,M=0,q=0;if(B.frames=[],!(function(R,W,U,K){for(var oe=0;oe<K;oe++)if(R[W+oe]!=U.charCodeAt(oe))return!0;return!1})(T,I,"RIFF",4)){var G,Z;for(d(T,I+=4),I+=8;I<T.length;){var te=u(T,I),ne=d(T,I+=4);I+=4;var J=ne+(1&ne);switch(te){case"VP8 ":case"VP8L":B.frames[E]===void 0&&(B.frames[E]={}),(O=B.frames[E]).src_off=C?q:I-8,O.src_size=M+ne+8,E++,C&&(C=!1,M=0,q=0);break;case"VP8X":(O=B.header={}).feature_flags=T[I];var ee=I+4;O.canvas_width=1+f(T,ee),ee+=3,O.canvas_height=1+f(T,ee),ee+=3;break;case"ALPH":C=!0,M=J+8,q=I-8;break;case"ANIM":(O=B.header).bgcolor=d(T,I),ee=I+4,O.loop_count=(G=T)[(Z=ee)+0]<<0|G[Z+1]<<8,ee+=2;break;case"ANMF":var H,O;(O=B.frames[E]={}).offset_x=2*f(T,I),I+=3,O.offset_y=2*f(T,I),I+=3,O.width=1+f(T,I),I+=3,O.height=1+f(T,I),I+=3,O.duration=f(T,I),I+=3,H=T[I++],O.dispose=1&H,O.blend=H>>1&1}te!="ANMF"&&(I+=J)}return B}})(g,0);b.response=g,b.rgbaoutput=!0,b.dataurl=!1;var N=b.header?b.header:null,j=b.frames?b.frames:null;if(N){N.loop_counter=N.loop_count,m=[N.canvas_height],p=[N.canvas_width];for(var w=0;w<j.length&&j[w].blend!=0;w++);}var S=j[0],P=v.WebPDecodeRGBA(g,S.src_off,S.src_size,p,m);S.rgba=P,S.imgwidth=p[0],S.imgheight=m[0];for(var A=0;A<p[0]*m[0]*4;A++)y[A]=P[A];return this.width=p,this.height=m,this.data=y,this}(function(e){var t=function(){return typeof gk=="function"},r=function(m,p,y,v){var g=4,b=o;switch(v){case e.image_compression.FAST:g=1,b=i;break;case e.image_compression.MEDIUM:g=6,b=l;break;case e.image_compression.SLOW:g=9,b=c}m=n(m,p,y,b);var N=gk(m,{level:g});return e.__addimage__.arrayBufferToBinaryString(N)},n=function(m,p,y,v){for(var g,b,N,j=m.length/p,w=new Uint8Array(m.length+j),S=f(),P=0;P<j;P+=1){if(N=P*p,g=m.subarray(N,N+p),v)w.set(v(g,y,b),N+P);else{for(var A,T=S.length,I=[];A<T;A+=1)I[A]=S[A](g,y,b);var B=d(I.concat());w.set(I[B],N+P)}b=g}return w},s=function(m){var p=Array.apply([],m);return p.unshift(0),p},i=function(m,p){var y,v=[],g=m.length;v[0]=1;for(var b=0;b<g;b+=1)y=m[b-p]||0,v[b+1]=m[b]-y+256&255;return v},o=function(m,p,y){var v,g=[],b=m.length;g[0]=2;for(var N=0;N<b;N+=1)v=y&&y[N]||0,g[N+1]=m[N]-v+256&255;return g},l=function(m,p,y){var v,g,b=[],N=m.length;b[0]=3;for(var j=0;j<N;j+=1)v=m[j-p]||0,g=y&&y[j]||0,b[j+1]=m[j]+256-(v+g>>>1)&255;return b},c=function(m,p,y){var v,g,b,N,j=[],w=m.length;j[0]=4;for(var S=0;S<w;S+=1)v=m[S-p]||0,g=y&&y[S]||0,b=y&&y[S-p]||0,N=u(v,g,b),j[S+1]=m[S]-N+256&255;return j},u=function(m,p,y){if(m===p&&p===y)return m;var v=Math.abs(p-y),g=Math.abs(m-y),b=Math.abs(m+p-y-y);return v<=g&&v<=b?m:g<=b?p:y},f=function(){return[s,i,o,l,c]},d=function(m){var p=m.map((function(y){return y.reduce((function(v,g){return v+Math.abs(g)}),0)}));return p.indexOf(Math.min.apply(null,p))};e.processPNG=function(m,p,y,v){var g,b,N,j,w,S,P,A,T,I,B,E,C,M,q,G=this.decode.FLATE_DECODE,Z="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(N=new ave(m)).imgData,b=N.bits,g=N.colorSpace,w=N.colors,[4,6].indexOf(N.colorType)!==-1){if(N.bits===8){T=(A=N.pixelBitlength==32?new Uint32Array(N.decodePixels().buffer):N.pixelBitlength==16?new Uint16Array(N.decodePixels().buffer):new Uint8Array(N.decodePixels().buffer)).length,B=new Uint8Array(T*N.colors),I=new Uint8Array(T);var te,ne=N.pixelBitlength-N.bits;for(M=0,q=0;M<T;M++){for(C=A[M],te=0;te<ne;)B[q++]=C>>>te&255,te+=N.bits;I[M]=C>>>te&255}}if(N.bits===16){T=(A=new Uint32Array(N.decodePixels().buffer)).length,B=new Uint8Array(T*(32/N.pixelBitlength)*N.colors),I=new Uint8Array(T*(32/N.pixelBitlength)),E=N.colors>1,M=0,q=0;for(var J=0;M<T;)C=A[M++],B[q++]=C>>>0&255,E&&(B[q++]=C>>>16&255,C=A[M++],B[q++]=C>>>0&255),I[J++]=C>>>16&255;b=8}v!==e.image_compression.NONE&&t()?(m=r(B,N.width*N.colors,N.colors,v),P=r(I,N.width,1,v)):(m=B,P=I,G=void 0)}if(N.colorType===3&&(g=this.color_spaces.INDEXED,S=N.palette,N.transparency.indexed)){var ee=N.transparency.indexed,H=0;for(M=0,T=ee.length;M<T;++M)H+=ee[M];if((H/=255)===T-1&&ee.indexOf(0)!==-1)j=[ee.indexOf(0)];else if(H!==T){for(A=N.decodePixels(),I=new Uint8Array(A.length),M=0,T=A.length;M<T;M++)I[M]=ee[A[M]];P=r(I,N.width,1)}}var O=(function(R){var W;switch(R){case e.image_compression.FAST:W=11;break;case e.image_compression.MEDIUM:W=13;break;case e.image_compression.SLOW:W=14;break;default:W=12}return W})(v);return G===this.decode.FLATE_DECODE&&(Z="/Predictor "+O+" "),Z+="/Colors "+w+" /BitsPerComponent "+b+" /Columns "+N.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(P&&this.__addimage__.isArrayBuffer(P)||this.__addimage__.isArrayBufferView(P))&&(P=this.__addimage__.arrayBufferToBinaryString(P)),{alias:y,data:m,index:p,filter:G,decodeParameters:Z,transparency:j,palette:S,sMask:P,predictor:O,width:N.width,height:N.height,bitsPerComponent:b,colorSpace:g}}}})(Zr.API),(function(e){e.processGIF89A=function(t,r,n,s){var i=new sve(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var u={data:c,width:o,height:l},f=new yj(100).encode(u,100);return e.processJPEG.call(this,f,r,n,s)},e.processGIF87A=e.processGIF89A})(Zr.API),Eu.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Eu.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){Ua.log("bit decode error:"+r)}},Eu.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Eu.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,l=i>>4,c=15&i,u=this.palette[l];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*s+1>=this.width)break;u=this.palette[c],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Eu.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Eu.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,u=i>>15?255:0,f=n*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=u}this.pos+=e}},Eu.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,u=(o>>11)/t*255|0,f=s*this.width*4+4*i;this.data[f]=u,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},Eu.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Eu.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=o}},Eu.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,s){var i=new Eu(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new yj(100).encode(c,100);return e.processJPEG.call(this,u,r,n,s)}})(Zr.API),MI.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,s){var i=new MI(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},u=new yj(100).encode(c,100);return e.processJPEG.call(this,u,r,n,s)}})(Zr.API),Zr.API.processRGBA=function(e,t,r){for(var n=e.data,s=n.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,u=0;u<s;u+=4){var f=n[u],d=n[u+1],m=n[u+2],p=n[u+3];i[l++]=f,i[l++]=d,i[l++]=m,o[c++]=p}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:y,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Zr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Gh=Zr.API,Cv=Gh.getCharWidthsArray=function(e,t){var r,n,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,u=t.kerning?t.kerning:s.metadata.Unicode.kerning,f=u.fof?u.fof:1,d=t.doKerning!==!1,m=0,p=e.length,y=0,v=l[0]||c,g=[];for(r=0;r<p;r++)n=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?g.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(m=d&&_a(u[n])==="object"&&!isNaN(parseInt(u[n][y],10))?u[n][y]/f:0,g.push((l[n]||v)/c+m)),y=n;return g},II=Gh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Gh.processArabic&&(e=Gh.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,s)/r:Cv.apply(this,arguments).reduce((function(i,o){return i+o}),0)},DI=function(e,t,r,n){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},LI=function(e,t,r){r||(r={});var n,s,i,o,l,c,u,f=[],d=[f],m=r.textIndent||0,p=0,y=0,v=e.split(" "),g=Cv.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?v[0].length+2:r.lineIndent||0){var b=Array(c).join(" "),N=[];v.map((function(w){(w=w.split(/\s*\n/)).length>1?N=N.concat(w.map((function(S,P){return(P&&S.length?`
`:"")+S}))):N.push(w[0])})),v=N,c=II.apply(this,[b,r])}for(i=0,o=v.length;i<o;i++){var j=0;if(n=v[i],c&&n[0]==`
`&&(n=n.substr(1),j=1),m+p+(y=(s=Cv.apply(this,[n,r])).reduce((function(w,S){return w+S}),0))>t||j){if(y>t){for(l=DI.apply(this,[n,s,t-(m+p),t]),f.push(l.shift()),f=[l.pop()];l.length;)d.push([l.shift()]);y=s.slice(n.length-(f[0]?f[0].length:0)).reduce((function(w,S){return w+S}),0)}else f=[n];d.push(f),m=y+c,p=g}else f.push(n),m+=p+y,p=g}return u=c?function(w,S){return(S?b:"")+w.join(" ")}:function(w){return w.join(" ")},d.map(u)},Gh.splitTextToSize=function(e,t,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var d=this.internal.getFont(f.fontName,f.fontStyle);return d.metadata.Unicode?{widths:d.metadata.Unicode.widths||{0:1},kerning:d.metadata.Unicode.kerning||{}}:{font:d.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,u=[];for(l=0,c=n.length;l<c;l++)u=u.concat(LI.apply(this,[n[l],o,i]));return u},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=t[s];var i=function(d){return"0x"+parseInt(d,10).toString(16)},o=e.__fontmetrics__.compress=function(d){var m,p,y,v,g=["{"];for(var b in d){if(m=d[b],isNaN(parseInt(b,10))?p="'"+b+"'":(b=parseInt(b,10),p=(p=i(b).slice(2)).slice(0,-1)+n[p.slice(-1)]),typeof m=="number")m<0?(y=i(m).slice(3),v="-"):(y=i(m).slice(2),v=""),y=v+y.slice(0,-1)+n[y.slice(-1)];else{if(_a(m)!=="object")throw new Error("Don't know what to do with value type "+_a(m)+".");y=o(m)}g.push(p+y)}return g.push("}"),g.join("")},l=e.__fontmetrics__.uncompress=function(d){if(typeof d!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,p,y,v,g={},b=1,N=g,j=[],w="",S="",P=d.length-1,A=1;A<P;A+=1)(v=d[A])=="'"?m?(y=m.join(""),m=void 0):m=[]:m?m.push(v):v=="{"?(j.push([N,y]),N={},y=void 0):v=="}"?((p=j.pop())[0][p[1]]=N,y=void 0,N=p[0]):v=="-"?b=-1:y===void 0?r.hasOwnProperty(v)?(w+=r[v],y=parseInt(w,16)*b,b=1,w=""):w+=v:r.hasOwnProperty(v)?(S+=r[v],N[y]=parseInt(S,16)*b,b=1,y=void 0,S=""):S+=v;return g},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(d){var m=d.font,p=f.Unicode[m.postScriptName];p&&(m.metadata.Unicode={},m.metadata.Unicode.widths=p.widths,m.metadata.Unicode.kerning=p.kerning);var y=u.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])})(Zr.API),(function(e){var t=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(tx(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])})(Zr),(function(e){function t(){return(en.canvg?Promise.resolve(en.canvg):_j(()=>import("./index.es-GLZ5LXbQ.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}Zr.API.addSvgAsImage=function(r,n,s,i,o,l,c,u){if(isNaN(n)||isNaN(s))throw Ua.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw Ua.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=o;var d=f.getContext("2d");d.fillStyle="#fff",d.fillRect(0,0,f.width,f.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return t().then((function(y){return y.fromString(d,r,m)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(y){return y.render(m)})).then((function(){p.addImage(f.toDataURL("image/jpeg",1),n,s,i,o,c,u)}))}})(),Zr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,r);return this},Zr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],u=0,f=0,d=0;function m(y,v){var g,b=!1;for(g=0;g<y.length;g+=1)y[g]===v&&(b=!0);return b}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var p=l.length;for(d=0;d<p;d+=1)r[l[d]].value=r[l[d]].defaultValue,r[l[d]].explicitSet=!1}if(_a(e)==="object"){for(s in e)if(i=e[s],m(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&m(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")c.push(String(i[u]-1));else if(i[u].length>1){for(f=0;f<i[u].length;f+=1)typeof i[u][f]!="number"&&(n=!1);n===!0&&c.push([i[u][0]-1,i[u][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var y,v=[];for(y in r)r[y].explicitSet===!0&&(r[y].type==="name"?v.push("/"+y+" /"+r[y].value):v.push("/"+y+" "+r[y].value));v.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+v.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(Zr.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],d=0,m=i.length;d<m;++d){if(l=o.metadata.characterToGlyph(i.charCodeAt(d)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(d),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(u[4-l.length],l)}return f.join("")},n=function(i){var o,l,c,u,f,d,m;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],d=0,m=(l=Object.keys(i).sort((function(p,y){return p-y}))).length;d<m;d++)o=l[d],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+u+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var d=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),p="",y=0;y<m.length;y++)p+=String.fromCharCode(m[y]);var v=u();f({data:p,addLength1:!0,objectId:v}),c("endobj");var g=u();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var b=u();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+Yh(l.fontName)),c("/FontFile2 "+v+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var N=u();c("<<"),c("/Type /Font"),c("/BaseFont /"+Yh(l.fontName)),c("/FontDescriptor "+b+" 0 R"),c("/W "+e.API.PDFObject.convert(d)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=u(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+g+" 0 R"),c("/BaseFont /"+Yh(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+N+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,u=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var d=l.metadata.rawData,m="",p=0;p<d.length;p++)m+=String.fromCharCode(d[p]);var y=u();f({data:m,addLength1:!0,objectId:y}),c("endobj");var v=u();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:v}),c("endobj");var g=u();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+Yh(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=u();for(var b=0;b<l.metadata.hmtx.widths.length;b++)l.metadata.hmtx.widths[b]=parseInt(l.metadata.hmtx.widths[b]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+v+" 0 R/BaseFont/"+Yh(l.fontName)+"/FontDescriptor "+g+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,u=i.y,f=i.options||{},d=i.mutex||{},m=d.pdfEscape,p=d.activeFontKey,y=d.fonts,v=p,g="",b=0,N="",j=y[v].encoding;if(y[v].encoding!=="Identity-H")return{text:l,x:c,y:u,options:f,mutex:d};for(N=l,v=p,Array.isArray(l)&&(N=l[0]),b=0;b<N.length;b+=1)y[v].metadata.hasOwnProperty("cmap")&&(o=y[v].metadata.cmap.unicode.codeMap[N[b].charCodeAt(0)]),o||N[b].charCodeAt(0)<256&&y[v].metadata.hasOwnProperty("Unicode")?g+=N[b]:g+="";var w="";return parseInt(v.slice(1))<14||j==="WinAnsiEncoding"?w=m(g,v).split("").map((function(S){return S.charCodeAt(0).toString(16)})).join(""):j==="Identity-H"&&(w=r(g,y[v])),d.isHex=!0,{text:w,x:c,y:u,options:f,mutex:d}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?l.push([s(Object.assign({},c,{text:o[u][0]})).text,o[u][1],o[u][2]]):l.push(s(Object.assign({},c,{text:o[u]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])})(Zr),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Zr.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var s,i,o,l,c,u,f,d=t,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],p=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},v={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},g=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],b=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),N=!1,j=0;this.__bidiEngine__={};var w=function(E){var C=E.charCodeAt(),M=C>>8,q=v[M];return q!==void 0?d[256*q+(255&C)]:M===252||M===253?"AL":b.test(M)?"L":M===8?"R":"N"},S=function(E){for(var C,M=0;M<E.length;M++){if((C=w(E.charAt(M)))==="L")return!1;if(C==="R")return!0}return!1},P=function(E,C,M,q){var G,Z,te,ne,J=C[q];switch(J){case"L":case"R":N=!1;break;case"N":case"AN":break;case"EN":N&&(J="AN");break;case"AL":N=!0,J="R";break;case"WS":J="N";break;case"CS":q<1||q+1>=C.length||(G=M[q-1])!=="EN"&&G!=="AN"||(Z=C[q+1])!=="EN"&&Z!=="AN"?J="N":N&&(Z="AN"),J=Z===G?Z:"N";break;case"ES":J=(G=q>0?M[q-1]:"B")==="EN"&&q+1<C.length&&C[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&M[q-1]==="EN"){J="EN";break}if(N){J="N";break}for(te=q+1,ne=C.length;te<ne&&C[te]==="ET";)te++;J=te<ne&&C[te]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(ne=C.length,te=q+1;te<ne&&C[te]==="NSM";)te++;if(te<ne){var ee=E[q],H=ee>=1425&&ee<=2303||ee===64286;if(G=C[te],H&&(G==="R"||G==="AL")){J="R";break}}}J=q<1||(G=C[q-1])==="B"?"N":M[q-1];break;case"B":N=!1,s=!0,J=j;break;case"S":i=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":N=!1;break;case"BN":J="N"}return J},A=function(E,C,M){var q=E.split("");return M&&T(q,M,{hiLevel:j}),q.reverse(),C&&C.reverse(),q.join("")},T=function(E,C,M){var q,G,Z,te,ne,J=-1,ee=E.length,H=0,O=[],R=j?p:m,W=[];for(N=!1,s=!1,i=!1,G=0;G<ee;G++)W[G]=w(E[G]);for(Z=0;Z<ee;Z++){if(ne=H,O[Z]=P(E,W,O,Z),q=240&(H=R[ne][y[O[Z]]]),H&=15,C[Z]=te=R[H][5],q>0)if(q===16){for(G=J;G<Z;G++)C[G]=1;J=-1}else J=-1;if(R[H][6])J===-1&&(J=Z);else if(J>-1){for(G=J;G<Z;G++)C[G]=te;J=-1}W[Z]==="B"&&(C[Z]=0),M.hiLevel|=te}i&&(function(U,K,oe){for(var he=0;he<oe;he++)if(U[he]==="S"){K[he]=j;for(var ie=he-1;ie>=0&&U[ie]==="WS";ie--)K[ie]=j}})(W,C,ee)},I=function(E,C,M,q,G){if(!(G.hiLevel<E)){if(E===1&&j===1&&!s)return C.reverse(),void(M&&M.reverse());for(var Z,te,ne,J,ee=C.length,H=0;H<ee;){if(q[H]>=E){for(ne=H+1;ne<ee&&q[ne]>=E;)ne++;for(J=H,te=ne-1;J<te;J++,te--)Z=C[J],C[J]=C[te],C[te]=Z,M&&(Z=M[J],M[J]=M[te],M[te]=Z);H=ne}H++}}},B=function(E,C,M){var q=E.split(""),G={hiLevel:j};return M||(M=[]),T(q,M,G),(function(Z,te,ne){if(ne.hiLevel!==0&&f)for(var J,ee=0;ee<Z.length;ee++)te[ee]===1&&(J=g.indexOf(Z[ee]))>=0&&(Z[ee]=g[J+1])})(q,M,G),I(2,q,C,M,G),I(1,q,C,M,G),q.join("")};return this.__bidiEngine__.doBidiReorder=function(E,C,M){if((function(G,Z){if(Z)for(var te=0;te<G.length;te++)Z[te]=te;l===void 0&&(l=S(G)),u===void 0&&(u=S(G))})(E,C),o||!c||u)if(o&&c&&l^u)j=l?1:0,E=A(E,C,M);else if(!o&&c&&u)j=l?1:0,E=B(E,C,M),E=A(E,C);else if(!o||l||c||u){if(o&&!c&&l^u)E=A(E,C),l?(j=0,E=B(E,C,M)):(j=1,E=B(E,C,M),E=A(E,C));else if(o&&l&&!c&&u)j=1,E=B(E,C,M),E=A(E,C);else if(!o&&!c&&l^u){var q=f;l?(j=1,E=B(E,C,M),j=0,f=!1,E=B(E,C,M),f=q):(j=0,E=B(E,C,M),E=A(E,C),j=1,f=!1,E=B(E,C,M),f=q,E=A(E,C))}}else j=0,E=B(E,C,M);else j=l?1:0,E=B(E,C,M);return E},this.__bidiEngine__.setOptions=function(E){E&&(o=E.isInputVisual,c=E.isOutputVisual,l=E.isInputRtl,u=E.isOutputRtl,f=E.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var s=n.text,i=(n.x,n.y,n.options||{}),o=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);n.text=o}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])})(Zr),Zr.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new d0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new bve(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new ive(this.contents),this.head=new lve(this),this.name=new hve(this),this.cmap=new C9(this),this.toUnicode={},this.hhea=new cve(this),this.maxp=new pve(this),this.hmtx=new mve(this),this.post=new dve(this),this.os2=new uve(this),this.loca=new yve(this),this.glyf=new xve(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,u;for(u=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],u.push(Math.round(t*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),(32768&(r=s>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var Wu,d0=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,s;for(s=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,s,i;for(i=[],n=0,s=t.length;n<s;n++)r=t[n],i.push(this.writeByte(r));return i},e})(),ive=(function(){var e;function t(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,s,i,o,l,c,u,f,d,m,p,y,v;for(v in p=Object.keys(r).length,c=Math.log(2),d=16*Math.floor(Math.log(p)/c),o=Math.floor(d/c),f=16*p-d,(s=new d0).writeInt(this.scalarType),s.writeShort(p),s.writeShort(d),s.writeShort(o),s.writeShort(f),i=16*p,u=s.pos+i,l=null,y=[],r)for(m=r[v],s.writeString(v),s.writeInt(e(m)),s.writeInt(u),s.writeInt(m.length),y=y.concat(m),v==="head"&&(l=u),u+=m.length;u%4;)y.push(0),u++;return s.write(y),n=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(n),s.data},e=function(r){var n,s,i,o;for(r=T9.call(r);r.length%4;)r.push(0);for(i=new d0(r),s=0,n=0,o=r.length;n<o;n=n+=4)s+=i.readUInt32();return 4294967295&s},t})(),ove={}.hasOwnProperty,Pd=function(e,t){for(var r in t)ove.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Wu=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var lve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new d0).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t})(),RI=(function(){function e(t,r){var n,s,i,o,l,c,u,f,d,m,p,y,v,g,b,N,j;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),d=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(p=t.readUInt16(),m=p/2,t.pos+=6,i=(function(){var w,S;for(S=[],c=w=0;0<=m?w<m:w>m;c=0<=m?++w:--w)S.push(t.readUInt16());return S})(),t.pos+=2,v=(function(){var w,S;for(S=[],c=w=0;0<=m?w<m:w>m;c=0<=m?++w:--w)S.push(t.readUInt16());return S})(),u=(function(){var w,S;for(S=[],c=w=0;0<=m?w<m:w>m;c=0<=m?++w:--w)S.push(t.readUInt16());return S})(),f=(function(){var w,S;for(S=[],c=w=0;0<=m?w<m:w>m;c=0<=m?++w:--w)S.push(t.readUInt16());return S})(),s=(this.length-t.pos+this.offset)/2,l=(function(){var w,S;for(S=[],c=w=0;0<=s?w<s:w>s;c=0<=s?++w:--w)S.push(t.readUInt16());return S})(),c=b=0,j=i.length;b<j;c=++b)for(g=i[c],n=N=y=v[c];y<=g?N<=g:N>=g;n=y<=g?++N:--N)f[c]===0?o=n+u[c]:(o=l[f[c]/2+(n-y)-(m-c)]||0)!==0&&(o+=u[c]),this.codeMap[n]=65535&o}t.pos=d}return e.encode=function(t,r){var n,s,i,o,l,c,u,f,d,m,p,y,v,g,b,N,j,w,S,P,A,T,I,B,E,C,M,q,G,Z,te,ne,J,ee,H,O,R,W,U,K,oe,he,ie,ce,Le,le;switch(q=new d0,o=Object.keys(t).sort((function(He,Fe){return He-Fe})),r){case"macroman":for(v=0,g=(function(){var He=[];for(y=0;y<256;++y)He.push(0);return He})(),N={0:0},i={},G=0,J=o.length;G<J;G++)N[ie=t[s=o[G]]]==null&&(N[ie]=++v),i[s]={old:t[s],new:N[t[s]]},g[s]=N[t[s]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(g),{charMap:i,subtable:q.data,maxGlyphID:v+1};case"unicode":for(C=[],d=[],j=0,N={},n={},b=u=null,Z=0,ee=o.length;Z<ee;Z++)N[S=t[s=o[Z]]]==null&&(N[S]=++j),n[s]={old:S,new:N[S]},l=N[S]-s,b!=null&&l===u||(b&&d.push(b),C.push(s),u=l),b=s;for(b&&d.push(b),d.push(65535),C.push(65535),B=2*(I=C.length),T=2*Math.pow(Math.log(I)/Math.LN2,2),m=Math.log(T/2)/Math.LN2,A=2*I-T,c=[],P=[],p=[],y=te=0,H=C.length;te<H;y=++te){if(E=C[y],f=d[y],E===65535){c.push(0),P.push(0);break}if(E-(M=n[E].new)>=32768)for(c.push(0),P.push(2*(p.length+I-y)),s=ne=E;E<=f?ne<=f:ne>=f;s=E<=f?++ne:--ne)p.push(n[s].new);else c.push(M-E),P.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*I+2*p.length),q.writeUInt16(0),q.writeUInt16(B),q.writeUInt16(T),q.writeUInt16(m),q.writeUInt16(A),oe=0,O=d.length;oe<O;oe++)s=d[oe],q.writeUInt16(s);for(q.writeUInt16(0),he=0,R=C.length;he<R;he++)s=C[he],q.writeUInt16(s);for(ce=0,W=c.length;ce<W;ce++)l=c[ce],q.writeUInt16(l);for(Le=0,U=P.length;Le<U;Le++)w=P[Le],q.writeUInt16(w);for(le=0,K=p.length;le<K;le++)v=p[le],q.writeUInt16(v);return{charMap:n,subtable:q.data,maxGlyphID:j+1}}},e})(),C9=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new RI(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=RI.encode(r,n),(i=new d0).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t})(),cve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),uve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s})(),this.charRange=(function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),dve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="post",t.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,u;for(u=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)u.push(r.readUInt32());return u}).call(this)}},t})(),fve=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},hve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="name",t.prototype.parse=function(r){var n,s,i,o,l,c,u,f,d,m,p;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),s=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(u={},o=d=0,m=s.length;d<m;o=++d)i=s[o],r.pos=i.offset,f=r.readString(i.length),l=new fve(f,i),u[p=i.nameID]==null&&(u[p]=[]),u[i.nameID].push(l);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},t})(),pve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),mve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,s,i,o,l,c,u;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,d;for(d=[],n=f=0;0<=i?f<i:f>i;n=0<=i?++f:--f)d.push(r.readInt16());return d})(),this.widths=(function(){var f,d,m,p;for(p=[],f=0,d=(m=this.metrics).length;f<d;f++)o=m[f],p.push(o.advance);return p}).call(this),s=this.widths[this.widths.length-1],u=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)u.push(this.widths.push(s));return u},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),T9=[].slice,xve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,s,i,o,l,c,u,f,d,m;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,l=(c=new d0(n.read(i))).readShort(),f=c.readShort(),m=c.readShort(),u=c.readShort(),d=c.readShort(),this.cache[r]=l===-1?new vve(c,f,m,u,d):new gve(c,l,f,m,u,d),this.cache[r]))},t.prototype.encode=function(r,n,s){var i,o,l,c,u;for(l=[],o=[],c=0,u=n.length;c<u;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t})(),gve=(function(){function e(t,r,n,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),vve=(function(){function e(t,r,n,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new d0(T9.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),yve=(function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return Pd(t,Wu),t.prototype.tag="loca",t.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<n.length&&n[o]==l){++o,s[l]=i;var c=this.offsets[l],u=this.offsets[l+1]-c;u>0&&(i+=u)}for(var f=new Array(4*s.length),d=0;d<s.length;++d)f[4*d+3]=255&s[d],f[4*d+2]=(65280&s[d])>>8,f[4*d+1]=(16711680&s[d])>>16,f[4*d]=(4278190080&s[d])>>24;return f},t})(),bve=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=s[n];return t},e.prototype.glyphsFor=function(t){var r,n,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],s[i]=n;return s},e.prototype.encode=function(t,r){var n,s,i,o,l,c,u,f,d,m,p,y,v,g,b;for(s in n=C9.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),p={0:0},b=n.charMap)p[(c=b[s]).old]=c.new;for(y in m=n.maxGlyphID,o)y in p||(p[y]=m++);return f=(function(N){var j,w;for(j in w={},N)w[N[j]]=j;return w})(p),d=Object.keys(f).sort((function(N,j){return N-j})),v=(function(){var N,j,w;for(w=[],N=0,j=d.length;N<j;N++)l=d[N],w.push(f[l]);return w})(),i=this.font.glyf.encode(o,v,p),u=this.font.loca.encode(i.offsets,v),g={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},e})();Zr.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,s,i,o;if(Array.isArray(r))return"["+(function(){var l,c,u;for(u=[],l=0,c=r.length;l<c;l++)n=r[l],u.push(t.convert(n));return u})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();const wve=({onCreateInvoice:e,currentUser:t})=>{const{showSuccess:r,showError:n,showInfo:s}=Ea(),[i,o]=z.useState([]),[l,c]=z.useState([]),[u,f]=z.useState(null),[d,m]=z.useState(!0),[p,y]=z.useState(!1),[v,g]=z.useState(!1),[b,N]=z.useState([]),[j,w]=z.useState(!1),[S,P]=z.useState(!1),[A,T]=z.useState(!1),[I,B]=z.useState(!1),[E,C]=z.useState([]),[M,q]=z.useState(null),[G,Z]=z.useState({description:"",quantity:1,rate:0}),[te,ne]=z.useState(!1),[J,ee]=z.useState(!1),[H,O]=z.useState(xi),R=z.useCallback(async()=>{m(!0);try{const Fe=t?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,fe=await E7(Fe),Q=fe?.data||fe||[];o(Array.isArray(Q)?Q:[]);try{const we=await Cd();c(we?.data||we||[])}catch{c([])}}catch(Fe){n(Fe.message||"Failed to load invoices")}finally{m(!1)}},[t,n]);z.useEffect(()=>{R()},[R]),z.useEffect(()=>{const Fe=()=>R();return window.addEventListener("refresh-invoices",Fe),()=>window.removeEventListener("refresh-invoices",Fe)},[R]);const W=Fe=>l.find(fe=>fe.id===Fe),U=Fe=>{switch(Fe){case"Paid":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Overdue":return"bg-red-50 text-red-600 border-red-100";case"Sent":return"bg-blue-50 text-blue-600 border-blue-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},K={totalOutstanding:i.filter(Fe=>Fe.status!=="Paid").reduce((Fe,fe)=>Fe+(fe.amount||0),0),awaitingPayment:i.filter(Fe=>Fe.status!=="Paid").reduce((Fe,fe)=>Fe+(fe.amount||0),0),paidThisMonth:i.filter(Fe=>Fe.status==="Paid").reduce((Fe,fe)=>Fe+(fe.amount||0),0)},oe=()=>{b.length===i.length?N([]):N(i.map(Fe=>Fe.id))},he=async()=>{const Fe=[...b];if(Fe.length!==0){w(!0),s(`Processing payment status for ${Fe.length} items...`);try{await Promise.all(Fe.map(fe=>dv(fe,{status:"Paid"}))),o(fe=>fe.map(Q=>Fe.includes(Q.id)?{...Q,status:"Paid"}:Q)),r(`Successfully marked ${Fe.length} invoices as paid`),N([]),R()}catch{n("Bulk update failed. Some items may not have been updated.")}finally{w(!1)}}},ie=async()=>{[...b].length!==0&&T(!0)},ce=async()=>{const Fe=[...b];if(Fe.length!==0){w(!0),T(!1),s(`Executing batch deletion for ${Fe.length} registry entries...`);try{await Promise.all(Fe.map(fe=>BP(fe))),o(fe=>fe.filter(Q=>!Fe.includes(Q.id))),r(`Successfully removed ${Fe.length} invoices from registry`),N([]),R()}catch{n("Bulk deletion encountered an error. Refresh registry to verify state.")}finally{w(!1)}}};z.useEffect(()=>{if(u){const Fe=u.lineItems||u.items||[];C(Fe),B(!1),q(null),Z({description:"",quantity:1,rate:0}),O(u.currency||xi),ee(!1)}},[u]);const Le=async()=>{if(u){y(!0);try{await dv(u.id,{items:E,lineItems:E}),o(Fe=>Fe.map(fe=>fe.id===u.id?{...fe,items:E,lineItems:E}:fe)),f({...u,items:E,lineItems:E}),B(!1),r("Service breakdown saved successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Fe){console.error("Failed to save breakdown:",Fe),n(Fe.message||"Failed to save breakdown")}finally{y(!1)}}},le=async()=>{if(u){y(!0);try{await dv(u.id,{status:"Paid"}),o(Fe=>Fe.map(fe=>fe.id===u.id?{...fe,status:"Paid"}:fe)),f({...u,status:"Paid"}),r("Invoice marked as paid!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Fe){console.error("Failed to update invoice:",Fe),n(Fe.message||"Failed to update invoice")}finally{y(!1)}}},He=async()=>{if(u){g(!0);try{await BP(u.id),o(Fe=>Fe.filter(fe=>fe.id!==u.id)),f(null),P(!1),r("Invoice deleted successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(Fe){console.error("Failed to delete invoice:",Fe),n(Fe.message||"Failed to delete invoice")}finally{g(!1)}}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10 relative h-full",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Billing & Invoicing"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Oversee payments and logistics milestone billing"})]}),a.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx(Nn,{className:"w-4 h-4"})," Create Invoice"]})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[{label:"Total Outstanding",value:`$${K.totalOutstanding.toLocaleString()}`,icon:a.jsx(df,{}),color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Awaiting Payment",value:`$${K.awaitingPayment.toLocaleString()}`,icon:a.jsx(As,{}),color:"text-amber-600",bg:"bg-amber-50"},{label:"Paid This Month",value:`$${K.paidThisMonth.toLocaleString()}`,icon:a.jsx(jn,{}),color:"text-emerald-600",bg:"bg-emerald-50"}].map((Fe,fe)=>a.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl ${Fe.bg} ${Fe.color} flex items-center justify-center`,children:at.cloneElement(Fe.icon,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Fe.label}),a.jsx("h3",{className:"text-xl font-black text-slate-900",children:Fe.value})]})]},fe))}),a.jsx("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50",children:[a.jsx("th",{className:"px-6 py-4 w-10",children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:i.length>0&&b.length===i.length,onChange:oe})}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Invoice"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Due Date"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-right"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-50",children:d?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10 text-center",children:a.jsx(jt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})})}):i.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10 text-center text-slate-400 text-sm font-medium",children:"No records found in digital registry."})}):i.map(Fe=>{const fe=b.includes(Fe.id);return a.jsxs("tr",{onClick:()=>f(Fe),className:`group transition-colors cursor-pointer ${fe?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[a.jsx("td",{className:"px-6 py-4",onClick:Q=>Q.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:fe,onChange:()=>N(Q=>fe?Q.filter(we=>we!==Fe.id):[...Q,Fe.id])})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Fe.number}),a.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["REF: ",Fe.id.substring(0,8)]})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qs,{src:W(Fe.companyId)?.logo,fallbackText:W(Fe.companyId)?.name,className:"w-6 h-6",isAvatar:!1}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:W(Fe.companyId)?.name||"Unknown Partner"})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm font-bold text-slate-900",children:Zd(Fe.amount,Fe.currency)})}),a.jsx("td",{className:"px-6 py-4 text-xs font-semibold text-slate-500",children:Fe.dueDate}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase border ${U(Fe.status)}`,children:Fe.status})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx(_s,{className:"w-5 h-5 text-slate-300 group-hover:text-indigo-600"})})]},Fe.id)})})]})})}),b.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:b.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Fe=>{Fe.stopPropagation(),he()},disabled:j,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(jn,{className:"w-3.5 h-3.5"}),"Mark Paid"]}),a.jsxs("button",{onClick:Fe=>{Fe.stopPropagation(),ie()},disabled:j,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[j?a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>N([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(cr,{className:"w-5 h-5"})})]})]})}),u&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>f(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600",children:a.jsx(Ga,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:u.number}),a.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Billing Statement"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),a.jsx("span",{className:`inline-block mt-1 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ${U(u.status)}`,children:u.status})]}),a.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-white rounded-full text-slate-400 shadow-sm border border-transparent hover:border-slate-200 transition-all",children:a.jsx(cr,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),a.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[a.jsx(Qs,{src:W(u.companyId)?.logo,fallbackText:W(u.companyId)?.name||"C",className:"w-10 h-10 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:W(u.companyId)?.name||"Unknown Company"}),a.jsx("p",{className:"text-xs text-slate-500",children:W(u.companyId)?.website||""})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount Due"}),J?a.jsx("button",{onClick:async()=>{y(!0);try{await dv(u.id,{currency:H}),o(Fe=>Fe.map(fe=>fe.id===u.id?{...fe,currency:H}:fe)),f({...u,currency:H}),ee(!1),r("Currency updated successfully!")}catch(Fe){n(Fe.message||"Failed to update currency")}finally{y(!1)}},disabled:p,className:"px-2 py-1 text-[9px] font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all disabled:opacity-50",children:a.jsx(Ii,{className:"w-3 h-3"})}):a.jsx("button",{onClick:()=>ee(!0),className:"px-2 py-1 text-[9px] font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:a.jsx(vc,{className:"w-3 h-3"})})]}),J?a.jsx("select",{value:H,onChange:Fe=>O(Fe.target.value),className:"w-full px-4 py-2 rounded-xl text-sm outline-none font-bold appearance-none bg-white border-2 border-indigo-200 focus:ring-4 focus:ring-indigo-100 text-indigo-600",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%234f46e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Mp.map(Fe=>a.jsxs("option",{value:Fe.code,children:[Fe.code," (",Fe.symbol,")"]},Fe.code))}):a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Zd(u.amount,u.currency)})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:u.dueDate})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Registry Narrative"}),a.jsx("p",{className:"text-sm text-slate-700 bg-slate-50 p-6 rounded-3xl border border-slate-100 leading-relaxed italic",children:u.description||"No additional strategic description provided for this statement."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Service Breakdown"}),I?a.jsxs("button",{onClick:Le,disabled:p,className:"px-3 py-1.5 text-xs font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all flex items-center gap-1 disabled:opacity-50",children:[a.jsx(Ii,{className:"w-3 h-3"})," ",p?"Saving...":"Save"]}):a.jsxs("button",{onClick:()=>B(!0),className:"px-3 py-1.5 text-xs font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all flex items-center gap-1",children:[a.jsx(vc,{className:"w-3 h-3"})," Edit"]})]}),a.jsxs("div",{className:"divide-y divide-slate-100 border border-slate-100 rounded-3xl overflow-hidden bg-white shadow-sm",children:[E.map(Fe=>a.jsxs("div",{className:"p-5 flex justify-between items-center group",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800",children:Fe.description}),a.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Qty: ",Fe.quantity," @ ",Xd(u.currency),Fe.rate.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),a.jsx("p",{className:"text-sm font-black text-slate-900",children:Zd(Fe.amount,u.currency)})]},Fe.id)),E.length===0&&a.jsx("div",{className:"p-8 text-center text-slate-400 italic text-xs",children:"No granular items archived."})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex gap-3",children:[u.status!=="Paid"&&a.jsxs("button",{onClick:le,disabled:p,className:"flex-1 py-4 bg-indigo-600 text-white text-sm font-black uppercase tracking-[0.1em] rounded-2xl hover:bg-indigo-700 transition-all shadow-xl flex items-center justify-center gap-2",children:[p?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(jn,{className:"w-4 h-4"})," Confirm Receipt"]}),a.jsx("button",{onClick:()=>P(!0),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-2xl transition-all shadow-sm active:scale-95",children:a.jsx(Br,{className:"w-5 h-5"})})]})]})]}),S&&u&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>P(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[a.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:a.jsx(Br,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Archive Invoice?"}),a.jsx("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:"This will permanently remove the billing statement from the digital registry. This action is terminal."}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>P(!1),disabled:v,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),a.jsx("button",{onClick:He,disabled:v,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:v?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Terminal Delete"})]})]})})]}),A&&b.length>0&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>T(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[a.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:a.jsx(Br,{className:"w-8 h-8"})}),a.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:["Delete ",b.length," Invoice",b.length>1?"s":"","?"]}),a.jsxs("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:["This will permanently remove ",b.length," invoice",b.length>1?"s":""," from the digital registry. This action is terminal and cannot be undone."]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>T(!1),disabled:j,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),a.jsx("button",{onClick:ce,disabled:j,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:j?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${b.length} Invoice${b.length>1?"s":""}`})]})]})})]})]})},Nve=()=>a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Control workspace access and staff roles"})]}),a.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[a.jsx(Ru,{className:"w-4 h-4"})," Invite Member"]})]}),a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsxs("div",{className:"relative w-64",children:[a.jsx(Sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Find teammate...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active Seats: "}),a.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"12 / 20"})]})]}),a.jsx("div",{className:"divide-y divide-slate-100",children:Rv.map(e=>a.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Qs,{src:e.avatar,alt:e.name||"",fallbackText:e.name||e.email||"U",className:"w-12 h-12 border-2 border-white shadow-sm object-cover",isAvatar:!0}),e.active&&a.jsx("div",{className:"absolute -bottom-1 -right-1 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white shadow-sm"})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[e.name,e.role==="Admin"&&a.jsx(vy,{className:"w-4 h-4 text-indigo-600"})]}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium flex items-center gap-1.5 mt-0.5",children:[a.jsx(gi,{className:"w-3 h-3 text-slate-400"})," ",e.email]})]})]}),a.jsxs("div",{className:"flex items-center gap-12",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Permission Tier"}),a.jsx("p",{className:`text-xs font-bold mt-0.5 ${e.role==="Admin"?"text-indigo-600":"text-slate-700"}`,children:e.role})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"px-4 py-2 text-xs font-bold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:"Manage"}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-slate-600 transition-colors",children:a.jsx(aD,{className:"w-5 h-5"})})]})]})]},e.id))})]})]}),jve=({imageSrc:e,onCrop:t,onCancel:r,aspectRatio:n=1,circularCrop:s=!0})=>{const[i,o]=z.useState({x:0,y:0}),[l,c]=z.useState(.5),[u,f]=z.useState(!1),[d,m]=z.useState({x:0,y:0}),[p,y]=z.useState(!1),[v,g]=z.useState(!1),b=z.useRef(null),N=z.useRef(null),j=z.useRef(300),w=z.useCallback(()=>{if(!N.current||!b.current)return null;const B=N.current.getBoundingClientRect(),E=j.current,C=B.width/2,M=B.height/2,q=b.current.getBoundingClientRect(),G=q.left-B.left,Z=q.top-B.top,te=(C-E/2-G-i.x)/l,ne=(M-E/2-Z-i.y)/l,J=E/l;return{x:Math.max(0,te*(b.current.naturalWidth/b.current.width)),y:Math.max(0,ne*(b.current.naturalHeight/b.current.height)),width:Math.min(b.current.naturalWidth,J*(b.current.naturalWidth/b.current.width)),height:Math.min(b.current.naturalHeight,J*(b.current.naturalHeight/b.current.height))}},[i,l]),S=z.useCallback(async()=>{if(b.current){y(!0);try{const I=w();if(!I)throw new Error("Failed to calculate crop area");const B=b.current,E=document.createElement("canvas"),C=E.getContext("2d");if(!C)throw new Error("Failed to create canvas context");const M=Math.min(I.width,I.height);E.width=M,E.height=M,s&&(C.beginPath(),C.arc(M/2,M/2,M/2,0,2*Math.PI),C.clip()),C.drawImage(B,I.x,I.y,I.width,I.height,0,0,M,M);const q=E.toDataURL("image/jpeg",.9);t(q)}catch(I){console.error("Error cropping image:",I)}finally{y(!1)}}},[w,s,t]),P=z.useCallback(I=>{I.preventDefault(),f(!0),m({x:I.clientX-i.x,y:I.clientY-i.y})},[i]),A=z.useCallback(I=>{if(!u||!N.current||!b.current)return;const B=N.current,E=b.current,C=B.getBoundingClientRect(),M=E.getBoundingClientRect(),q=I.clientX-d.x,G=I.clientY-d.y,Z=M.width*l,te=M.height*l,ne=Math.max(0,(Z-C.width)/2),J=Math.max(0,(te-C.height)/2);l<=1?o({x:q,y:G}):o({x:Math.max(-ne,Math.min(ne,q)),y:Math.max(-J,Math.min(J,G))})},[u,d,l]),T=z.useCallback(()=>{f(!1)},[]);return z.useEffect(()=>{if(u)return document.addEventListener("mousemove",A),document.addEventListener("mouseup",T),()=>{document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",T)}},[u,A,T]),z.useEffect(()=>{if(N.current){const B=N.current.getBoundingClientRect();j.current=Math.min(B.width*.8,B.height*.8,300)}},[]),a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Crop Your Photo"}),a.jsx("button",{onClick:r,disabled:p,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{ref:N,className:"relative w-full h-[400px] bg-slate-100 rounded-xl overflow-hidden",style:{cursor:u?"grabbing":"grab"},children:[a.jsx("img",{ref:b,src:e,alt:"Crop",className:"absolute top-1/2 left-1/2 select-none",style:{transform:`translate(-50%, -50%) scale(${l}) translate(${i.x/l}px, ${i.y/l}px)`,maxWidth:"none",maxHeight:"none",userSelect:"none",pointerEvents:"none"},onLoad:()=>{if(g(!0),N.current&&b.current){const B=N.current.getBoundingClientRect();j.current=Math.min(B.width*.8,B.height*.8,300)}},draggable:!1}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",onMouseDown:P,style:{pointerEvents:p?"none":"auto",cursor:u?"grabbing":"grab"},children:[a.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border-2 border-white shadow-lg ${s?"rounded-full":"rounded-lg"}`,style:{width:`${j.current}px`,height:`${j.current}px`,aspectRatio:n.toString()}}),a.jsx("div",{className:"absolute inset-0 bg-slate-900/50",style:{clipPath:s?`circle(${j.current/2}px at 50% 50%)`:`inset(calc(50% - ${j.current/2}px))`}})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Zoom: ",Math.round(l*100),"%"]}),a.jsx("input",{type:"range",min:"0.3",max:"3",step:"0.05",value:l,onChange:I=>{const B=parseFloat(I.target.value);c(B),B<1&&o({x:0,y:0})},className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer",disabled:p}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[a.jsx("span",{children:"30%"}),a.jsx("span",{children:"300%"})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:r,disabled:p,className:"px-6 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:S,disabled:p||!v,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(kd,{className:"w-4 h-4"}),"Apply Crop"]})})]})]})})},kve=({currentUser:e,showSuccess:t,showError:r})=>{const[n,s]=z.useState({retentionYears:7,coldStorageYears:1,archiveEnabled:!0,autoCleanupEnabled:!0}),[i,o]=z.useState(null),[l,c]=z.useState(!1),[u,f]=z.useState(!1),[d,m]=z.useState(!1),[p,y]=z.useState(!1),[v,g]=z.useState(!1),[b,N]=z.useState(!1);z.useEffect(()=>{j(),w()},[]);const j=async()=>{c(!0);try{const I=await Nne("default");I.success&&I.data&&s(I.data)}catch{r("Failed to load retention policy")}finally{c(!1)}},w=async()=>{m(!0);try{const I=await kne("default");I.success&&I.data&&o(I.data)}catch(I){console.error("Failed to load retention stats:",I)}finally{m(!1)}},S=async()=>{f(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;(await jne("default",{...n,updatedBy:I})).success&&(t("Retention policy updated successfully"),await w())}catch(I){r(I.message||"Failed to update retention policy")}finally{f(!1)}},P=async()=>{y(!0);try{const I=await Sne("default",50);I.success&&(t(`Archive completed: ${I.data.archived} emails archived`),await w())}catch(I){r(I.message||"Failed to trigger archive")}finally{y(!1)}},A=async()=>{g(!0);try{const I=await _ne("default",50);I.success&&(t(`Cleanup completed: ${I.data.deleted} emails deleted`),await w())}catch(I){r(I.message||"Failed to trigger cleanup")}finally{g(!1)}},T=async()=>{N(!0);try{const I=await Ane("default",{format:"csv"});if(typeof I=="string"){const B=new Blob([I],{type:"text/csv"}),E=window.URL.createObjectURL(B),C=document.createElement("a");C.href=E,C.download=`archived-emails-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(E),t("Archived emails exported successfully")}else r("Unexpected export format")}catch(I){r(I.message||"Failed to export archived emails")}finally{N(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(nD,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Data Retention Policy"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Configure how long emails are retained and archived"})]})]}),l?a.jsx("div",{className:"p-8 text-center",children:a.jsx(jt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Retention Period (Years)"}),a.jsx("input",{type:"number",min:"1",max:"20",value:n.retentionYears,onChange:I=>s({...n,retentionYears:parseInt(I.target.value)||7}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be permanently deleted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Cold Storage Threshold (Years)"}),a.jsx("input",{type:"number",min:"0",max:n.retentionYears,value:n.coldStorageYears,onChange:I=>s({...n,coldStorageYears:parseInt(I.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be moved to cold storage"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Archiving"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically move emails to cold storage"})]}),a.jsx("button",{onClick:()=>s({...n,archiveEnabled:!n.archiveEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${n.archiveEnabled?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${n.archiveEnabled?"translate-x-6":"translate-x-0"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Cleanup"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically delete emails past retention period"})]}),a.jsx("button",{onClick:()=>s({...n,autoCleanupEnabled:!n.autoCleanupEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${n.autoCleanupEnabled?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${n.autoCleanupEnabled?"translate-x-6":"translate-x-0"}`})})]})]}),a.jsx("button",{onClick:S,disabled:u,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:u?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-4 h-4"}),"Save Retention Policy"]})})]})]}),i&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(fd,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Retention Statistics"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Current data retention status"})]})]}),d?a.jsx("div",{className:"p-8 text-center",children:a.jsx(jt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:i.totalEmails||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Total Emails"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:i.archivedEmails||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Archived Emails"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.eligibleForArchive||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Archive"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.eligibleForDeletion||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Deletion"})]})]})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(bd,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Manual Actions"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Manually trigger archive, cleanup, or export"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:P,disabled:p,className:"p-4 bg-indigo-50 border border-indigo-200 rounded-xl hover:bg-indigo-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[p?a.jsx(jt,{className:"w-5 h-5 animate-spin text-indigo-600"}):a.jsx(fd,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"text-sm font-semibold text-indigo-900",children:"Archive Emails"}),a.jsx("span",{className:"text-xs text-indigo-600",children:"Move to cold storage"})]}),a.jsxs("button",{onClick:A,disabled:v,className:"p-4 bg-red-50 border border-red-200 rounded-xl hover:bg-red-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[v?a.jsx(jt,{className:"w-5 h-5 animate-spin text-red-600"}):a.jsx(iU,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"text-sm font-semibold text-red-900",children:"Cleanup Emails"}),a.jsx("span",{className:"text-xs text-red-600",children:"Delete old emails"})]}),a.jsxs("button",{onClick:T,disabled:b,className:"p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[b?a.jsx(jt,{className:"w-5 h-5 animate-spin text-green-600"}):a.jsx(H0,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-sm font-semibold text-green-900",children:"Export Archived"}),a.jsx("span",{className:"text-xs text-green-600",children:"Download CSV"})]})]})]})]})},Sve=({currentUser:e,showSuccess:t,showError:r})=>{const[n,s]=z.useState([]),[i,o]=z.useState(!1),[l,c]=z.useState(!1),[u,f]=z.useState(null),[d,m]=z.useState({name:"",content:"",isDefault:!1}),[p,y]=z.useState(!1),[v,g]=z.useState(null),[b,N]=z.useState({layout:"list",density:"comfortable",emailFormat:"html",showPreview:!0,previewLines:3});z.useEffect(()=>{j(),w()},[]);const j=async()=>{o(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I)return;const B=await R7(I);s(B.data||[])}catch(I){console.error("Failed to load signatures:",I)}finally{o(!1)}},w=()=>{try{const I=localStorage.getItem("user_display_preferences");I&&N(JSON.parse(I))}catch(I){console.error("Failed to load display preferences:",I)}},S=()=>{try{localStorage.setItem("user_display_preferences",JSON.stringify(b)),t("Display preferences saved successfully")}catch{r("Failed to save display preferences")}},P=async()=>{if(!d.name||!d.content){r("Name and content are required");return}y(!0);try{const I=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!I){r("Please log in to save signature");return}u?(await bae(u.id,{userId:I,...d}),t("Signature updated successfully")):(await yae({userId:I,...d}),t("Signature created successfully")),c(!1),f(null),m({name:"",content:"",isDefault:!1}),await j()}catch(I){r(I.message||"Failed to save signature")}finally{y(!1)}},A=async I=>{if(confirm("Are you sure you want to delete this signature?")){g(I);try{const B=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await wae(I,B),t("Signature deleted successfully"),await j()}catch(B){r(B.message||"Failed to delete signature")}finally{g(null)}}},T=I=>{I?(f(I),m({name:I.name||"",content:I.content||"",isDefault:I.isDefault||!1})):(f(null),m({name:"",content:"",isDefault:!1})),c(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(Ga,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Signatures"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Manage your email signatures for replies and new emails"})]})]}),a.jsxs("button",{onClick:()=>T(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Add Signature"]})]}),i?a.jsx("div",{className:"p-8 text-center",children:a.jsx(jt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.length===0?a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(Ga,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),a.jsx("p",{className:"text-sm font-semibold",children:"No signatures yet"}),a.jsx("p",{className:"text-xs mt-1",children:"Create your first signature to get started"})]}):a.jsx("div",{className:"space-y-3",children:n.map(I=>a.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-bold text-slate-900",children:I.name}),I.isDefault&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-xs font-bold rounded",children:"Default"})]}),a.jsx("div",{className:"text-sm text-slate-600 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:I.content}})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>T(I),className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:a.jsx(vc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>A(I.id),disabled:v===I.id,className:"p-2 text-slate-400 hover:text-red-600 transition-colors disabled:opacity-50",children:v===I.id?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(Br,{className:"w-4 h-4"})})]})]})},I.id))})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(Cj,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Display Preferences"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Customize how content is displayed"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Layout Style"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["list","grid","compact"].map(I=>a.jsx("button",{onClick:()=>N({...b,layout:I}),className:`p-4 rounded-xl border-2 transition-all ${b.layout===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:a.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Density"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["comfortable","compact","spacious"].map(I=>a.jsx("button",{onClick:()=>N({...b,density:I}),className:`p-4 rounded-xl border-2 transition-all ${b.density===I?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:a.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:I})},I))})]}),a.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[a.jsx(Ii,{className:"w-4 h-4"}),"Save Display Preferences"]})]})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(yd,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Display Format"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Choose how emails are displayed"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Email Format"}),a.jsxs("select",{value:b.emailFormat,onChange:I=>N({...b,emailFormat:I.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"html",children:"HTML (Rich formatting)"}),a.jsx("option",{value:"plain",children:"Plain Text"}),a.jsx("option",{value:"rich",children:"Rich Text"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Show Email Preview"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display email preview in list view"})]}),a.jsx("button",{onClick:()=>N({...b,showPreview:!b.showPreview}),className:`relative w-12 h-6 rounded-full transition-colors ${b.showPreview?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${b.showPreview?"translate-x-6":"translate-x-0"}`})})]}),b.showPreview&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Preview Lines"}),a.jsx("input",{type:"number",min:"1",max:"10",value:b.previewLines,onChange:I=>N({...b,previewLines:parseInt(I.target.value)||3}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("button",{onClick:S,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[a.jsx(Ii,{className:"w-4 h-4"}),"Save Email Format Preferences"]})]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6 space-y-4 text-left my-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:u?"Edit Signature":"Create Signature"}),a.jsx("button",{onClick:()=>{c(!1),f(null),m({name:"",content:"",isDefault:!1})},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Name"}),a.jsx("input",{type:"text",value:d.name,onChange:I=>m({...d,name:I.target.value}),placeholder:"e.g. Professional, Personal",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Content"}),a.jsx("textarea",{value:d.content,onChange:I=>m({...d,content:I.target.value}),placeholder:"Enter your signature (HTML supported)",rows:8,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none font-mono"}),a.jsx("p",{className:"text-xs text-slate-500",children:"HTML is supported. Example: <strong>Name</strong><br>Title"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Set as Default"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use this signature by default when composing emails"})]}),a.jsx("button",{onClick:()=>m({...d,isDefault:!d.isDefault}),className:`relative w-12 h-6 rounded-full transition-colors ${d.isDefault?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${d.isDefault?"translate-x-6":"translate-x-0"}`})})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>{c(!1),f(null),m({name:"",content:"",isDefault:!1})},className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:P,disabled:p||!d.name||!d.content,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-4 h-4"}),u?"Update":"Create"," Signature"]})})]})]})})]})},_ve=({currentUser:e,onUserUpdate:t})=>{const{showSuccess:r,showError:n}=Ea(),[s,i]=z.useState("profile"),[o,l]=z.useState(Xg),[c,u]=z.useState(!1),[f,d]=z.useState([]),[m,p]=z.useState(""),[y,v]=z.useState(!1),[g,b]=z.useState(!1),[N,j]=z.useState(!1),[w,S]=z.useState(null),[P,A]=z.useState(!1),[T,I]=z.useState(!1),[B,E]=z.useState([]),[C,M]=z.useState(!1),[q,G]=z.useState(""),[Z,te]=z.useState(!1),[ne,J]=z.useState(null),[ee,H]=z.useState(null),[O,R]=z.useState(null),[W,U]=z.useState({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:hm(),language:"English"}),[K,oe]=z.useState(!1),[he,ie]=z.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},type:"info"}),[ce,Le]=z.useState({name:"",email:"",avatar:"",phone:"",jobTitle:"",department:"",bio:"",timezone:hm(),language:"English"}),[le,He]=z.useState(!1),[Fe,fe]=z.useState(null),[Q,we]=z.useState(""),[ve,Ee]=z.useState(!1),[pe,ue]=z.useState(!1),[Pe,Ne]=z.useState(""),Be=z.useRef(null),nt=(ft,$t)=>{l(er=>er.map(qe=>qe.id===ft?{...qe,[$t]:!qe[$t]}:qe))};z.useEffect(()=>{s==="connections"&&(async()=>{const $t=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if($t)try{const er=await I3($t);j(er.connected||!1),S(er.userEmail||null)}catch{j(!1)}})()},[s,e]);const mt=async()=>{M(!0);try{const ft=await Ed(q||void 0);E(ft.data||[])}catch{E([])}finally{M(!1)}};z.useEffect(()=>{s==="users"&&mt()},[s,q]),z.useEffect(()=>{(async()=>{if(s==="notifications")try{const $t=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!$t)return;const qe=(await bne($t)).data||[];if(qe.length>0){const bt=Xg.map(Nr=>qe.find(Lr=>Lr.id===Nr.id)||Nr);l(bt)}else l(Xg)}catch($t){console.error("[SETTINGS] Failed to load notification preferences:",$t),l(Xg)}})()},[s,e]);const kt=async()=>{A(!0);try{const ft=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,$t=await F7(ft);$t.authUrl&&(window.location.href=$t.authUrl)}catch{n("Failed to connect Google Calendar"),A(!1)}},Re=async()=>{I(!0);try{const ft=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;await Zne(ft),j(!1),S(null),r("Google account disconnected successfully")}catch{n("Failed to disconnect Google account")}finally{I(!1)}};z.useEffect(()=>{(async()=>{let $t=e||JSON.parse(localStorage.getItem("user_data")||"null");if($t){const er=hm();Le({name:$t.name||"",email:$t.email||"",avatar:$t.avatar||"",phone:$t.phone||"",jobTitle:$t.jobTitle||"",department:$t.department||"",bio:$t.bio||"",timezone:$t.timezone||er,language:$t.language||"English"}),we($t.avatar||"")}})()},[e]);const gt=(ft,$t=400,er=400,qe=.8)=>new Promise((bt,Nr)=>{if(ft.size>5242880){Nr(new Error("Image file is too large. Please use an image smaller than 5MB."));return}const Lr=new FileReader;Lr.onload=Er=>{const or=new Image;or.onload=()=>{let Ut=or.width,wr=or.height;Ut>wr?Ut>$t&&(wr=wr*$t/Ut,Ut=$t):wr>er&&(Ut=Ut*er/wr,wr=er);const kr=document.createElement("canvas");kr.width=Ut,kr.height=wr;const Gr=kr.getContext("2d");if(!Gr){Nr(new Error("Failed to create canvas context"));return}Gr.drawImage(or,0,0,Ut,wr);const hn=kr.toDataURL("image/jpeg",qe);if(hn.length>9e5)if(qe>.5){gt(ft,$t,er,qe-.1).then(bt).catch(Nr);return}else{Nr(new Error("Image is too large even after compression. Please use a smaller image."));return}bt(hn)},or.onerror=()=>Nr(new Error("Failed to load image")),or.src=Er.target?.result},Lr.onerror=()=>Nr(new Error("Failed to read file")),Lr.readAsDataURL(ft)}),ut=async ft=>{const $t=ft.target.files?.[0];if($t){if(!$t.type.startsWith("image/")){n("Please select a valid image file.");return}fe(null);try{const er=new FileReader;er.onload=qe=>{const bt=qe.target?.result;Ne(bt),ue(!0)},er.onerror=()=>{n("Failed to read image file.")},er.readAsDataURL($t)}catch(er){const qe=er.message||"Failed to load image. Please try a different image.";n(qe),fe(qe),Be.current&&(Be.current.value="")}}},lt=async ft=>{ue(!1),Ee(!0);try{const er=await(await fetch(ft)).blob(),qe=new File([er],"cropped-image.jpg",{type:"image/jpeg"}),bt=await gt(qe,400,400,.8);we(bt),Le(Nr=>({...Nr,avatar:bt})),r('Image cropped and loaded successfully. Click "Save Changes" to update your profile.')}catch($t){const er=$t.message||"Failed to process cropped image.";n(er),fe(er)}finally{Ee(!1),Be.current&&(Be.current.value="")}},pr=()=>{ue(!1),Ne(""),Be.current&&(Be.current.value="")},tr=async()=>{if(!ce.name.trim()){fe("Full name is required.");return}He(!0);try{const ft=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,$t=await cne(ft,ce),er=$t.data||$t;localStorage.setItem("user_data",JSON.stringify(er)),t(er),r("Profile updated successfully!"),fe(null)}catch{n("Failed to update profile.")}finally{He(!1)}};return a.jsxs("div",{className:"w-full space-y-8 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-left",children:"Settings"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your personal account and workspace preferences"})]}),s==="profile"&&a.jsxs("button",{onClick:tr,disabled:le,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[le?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(Ii,{className:"w-4 h-4"}),"Save Changes"]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[a.jsx("aside",{className:"w-full lg:w-64 space-y-1",children:[{id:"profile",label:"Profile Settings",icon:a.jsx(vl,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:a.jsx(gy,{className:"w-4 h-4"})},{id:"preferences",label:"User Preferences",icon:a.jsx(oD,{className:"w-4 h-4"})},{id:"connections",label:"Connections & Sync",icon:a.jsx(G_,{className:"w-4 h-4"})},{id:"users",label:"Team Management",icon:a.jsx(e0,{className:"w-4 h-4"})},{id:"workspace",label:"Workspace Settings",icon:a.jsx(nD,{className:"w-4 h-4"})}].map(ft=>a.jsxs("button",{onClick:()=>i(ft.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all ${s===ft.id?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[ft.icon,ft.label]},ft.id))}),a.jsxs("div",{className:"flex-1 space-y-6",children:[s==="profile"&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-8 text-left",children:[Fe&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-4 rounded-xl",children:Fe}),a.jsxs("div",{className:"flex items-center gap-6 pb-8 border-b border-slate-100",children:[a.jsxs("div",{className:"relative group",children:[a.jsx(Qs,{src:Q,alt:ce.name||"User",fallbackText:ce.name||ce.email||"U",className:"w-24 h-24 shadow-lg border-2 border-white object-cover",isAvatar:!0}),ve&&a.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-3xl flex items-center justify-center z-10",children:a.jsx(jt,{className:"w-6 h-6 text-white animate-spin"})}),a.jsx("button",{onClick:()=>Be.current?.click(),disabled:ve,className:"absolute inset-0 bg-black/40 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white disabled:opacity-60 disabled:cursor-not-allowed",children:a.jsx($u,{className:"w-6 h-6"})}),a.jsx("input",{ref:Be,type:"file",accept:"image/*",onChange:ut,className:"hidden",disabled:ve})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-xl text-slate-900",children:ce.name||"Set Name"}),a.jsxs("p",{className:"text-slate-500 text-sm",children:[ce.jobTitle||"No Title","  ",ce.department||"No Dept"]}),a.jsx("p",{className:"text-slate-400 text-xs mt-1",children:ce.email})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),a.jsx("input",{type:"text",value:ce.name,onChange:ft=>Le({...ce,name:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:ce.jobTitle,onChange:ft=>Le({...ce,jobTitle:ft.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Senior Logistics Analyst"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),a.jsx("input",{type:"text",value:ce.department,onChange:ft=>Le({...ce,department:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Operations"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),a.jsx("input",{type:"tel",value:ce.phone,onChange:ft=>Le({...ce,phone:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"+1 555-0000"})]}),a.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),a.jsx("textarea",{value:ce.bio,onChange:ft=>Le({...ce,bio:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm min-h-[100px] resize-none",placeholder:"Tell the team a bit about yourself..."})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(W_,{className:"w-3.5 h-3.5"})," Timezone"]}),a.jsx("select",{value:ce.timezone,onChange:ft=>Le({...ce,timezone:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:Um.map(ft=>a.jsx("option",{value:ft.value,children:ft.label},ft.value))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:"Language"}),a.jsx("select",{value:ce.language,onChange:ft=>Le({...ce,language:ft.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:Y_.map(ft=>a.jsx("option",{value:ft.value,children:ft.label},ft.value))})]})]})]}),s==="notifications"&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"pb-6 border-b border-slate-100",children:[a.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:"Notification Preferences"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Choose how you want to be notified about important updates and activities."})]}),a.jsx("div",{className:"space-y-4",children:o.map(ft=>a.jsx("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-bold text-slate-900 text-sm mb-1",children:ft.label}),a.jsx("p",{className:"text-xs text-slate-500",children:ft.description})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"In-App"}),a.jsx("button",{onClick:()=>nt(ft.id,"inApp"),className:`relative w-11 h-6 rounded-full transition-colors ${ft.inApp?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${ft.inApp?"translate-x-5":"translate-x-0"}`})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Email"}),a.jsx("button",{onClick:()=>nt(ft.id,"email"),className:`relative w-11 h-6 rounded-full transition-colors ${ft.email?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${ft.email?"translate-x-5":"translate-x-0"}`})})]})]})]})},ft.id))}),a.jsx("div",{className:"pt-4 border-t border-slate-100",children:a.jsxs("button",{onClick:async()=>{try{const ft=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!ft){n("Please log in to save preferences.");return}await wne(ft,o),r("Notification preferences saved successfully!")}catch(ft){console.error("[SETTINGS] Failed to save notification preferences:",ft),n(ft.message||"Failed to save notification preferences.")}},className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95",children:[a.jsx(Ii,{className:"w-4 h-4"})," Save Preferences"]})})]}),s==="connections"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white shadow-md flex items-center justify-center",children:a.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 48 48",children:[a.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),a.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),a.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),a.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Google Workspace"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"Connect your Google account to sync Calendar, Drive, Docs, and Gmail"})]})]})}),a.jsx("div",{className:"p-6",children:N?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(jn,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-emerald-900",children:"Connected"}),w&&a.jsx("p",{className:"text-xs text-emerald-700 mt-0.5",children:w})]})]}),a.jsx("button",{onClick:Re,disabled:T,className:"px-4 py-2 bg-red-600 text-white text-xs font-bold uppercase tracking-widest rounded-lg hover:bg-red-700 transition-all disabled:opacity-50 flex items-center gap-2",children:T?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-3 h-3 animate-spin"}),"Disconnecting..."]}):"Disconnect"})]})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"Connected Services"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:a.jsx(ka,{className:"w-4 h-4 text-blue-600"})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Calendar"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Sync events and schedules"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Drive"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Store and access documents"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-indigo-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Docs"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Create and sign documents"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:a.jsx(gi,{className:"w-4 h-4 text-red-600"})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Gmail"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Access email communications"})]})]})]}),a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(ax,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Permissions Granted"}),a.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[a.jsx("li",{children:" View and manage calendar events"}),a.jsx("li",{children:" Create, view, and manage files in Google Drive"}),a.jsx("li",{children:" Create and edit documents in Google Docs"}),a.jsx("li",{children:" Read email messages from Gmail"})]})]})]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-4",children:a.jsx(G_,{className:"w-8 h-8 text-slate-400"})}),a.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-sm text-slate-600 max-w-md mx-auto mb-6",children:"Connect your Google account to unlock powerful integrations with Calendar, Drive, Docs, and Gmail"}),a.jsx("button",{onClick:kt,disabled:P,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 inline-flex items-center gap-2",children:P?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[a.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),a.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),a.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),a.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Connect with Google"]})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"What You'll Get"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx(ka,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Calendar Sync"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Sync events and manage schedules"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Drive Storage"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Store contracts and documents"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Document Signing"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"E-signature via Google Docs"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx(gi,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Gmail Access"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"View email communications"})]})]})]})]})]})})]}),a.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(ax,{className:"w-6 h-6 text-amber-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-amber-900 mb-2",children:"Security & Privacy"}),a.jsxs("ul",{className:"text-xs text-amber-800 space-y-1",children:[a.jsx("li",{children:" Your data is encrypted and securely stored"}),a.jsx("li",{children:" We only request the minimum permissions needed"}),a.jsx("li",{children:" You can disconnect at any time"}),a.jsx("li",{children:" We never share your data with third parties"})]})]})]})})]}),s==="users"&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden text-left",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-slate-900",children:"Team Management"}),a.jsxs("button",{onClick:()=>{J(null),U({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:hm(),language:"English"}),te(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg flex items-center gap-2 shadow-md",children:[a.jsx(Ru,{className:"w-4 h-4"})," Add User"]})]}),a.jsx("div",{className:"p-4 border-b border-slate-100",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:q,onChange:ft=>G(ft.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})}),a.jsx("div",{className:"divide-y divide-slate-100",children:C?a.jsx("div",{className:"p-8 text-center",children:a.jsx(jt,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):B.map(ft=>a.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Qs,{src:ft.avatar,alt:ft.name||"",fallbackText:ft.name||ft.email||"U",className:"w-10 h-10 border",isAvatar:!0}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900 text-sm",children:ft.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[ft.email,"  ",a.jsx("span",{className:"font-bold text-indigo-600",children:ft.role})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{J(ft),U({email:ft.email,name:ft.name,role:ft.role||"User",jobTitle:ft.jobTitle||"",department:ft.department||"",phone:ft.phone||"",bio:ft.bio||"",timezone:ft.timezone||hm(),language:ft.language||"English"}),te(!0)},className:"p-2 text-slate-400 hover:text-indigo-600",children:a.jsx(vc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>R(ft),className:"p-2 text-slate-400 hover:text-red-600",children:a.jsx(Br,{className:"w-4 h-4"})})]})]},ft.id))})]}),s==="preferences"&&a.jsx(Sve,{currentUser:e,showSuccess:r,showError:n}),s==="workspace"&&a.jsx(kve,{currentUser:e,showSuccess:r,showError:n})]})]}),Z&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 space-y-4 text-left my-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:ne?"Edit User":"Add New User"}),a.jsx("button",{onClick:()=>te(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),a.jsx("input",{type:"text",value:W.name,onChange:ft=>U({...W,name:ft.target.value}),placeholder:"Full Name",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email Address"}),a.jsx("input",{type:"email",value:W.email,onChange:ft=>U({...W,email:ft.target.value}),placeholder:"Email Address",disabled:!!ne,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm disabled:opacity-50"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),a.jsxs("select",{value:W.role,onChange:ft=>U({...W,role:ft.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"Viewer",children:"Viewer - Read-only access"}),a.jsx("option",{value:"Collaborator",children:"Collaborator - Can comment and draft"}),a.jsx("option",{value:"Admin",children:"Admin - Full access"}),a.jsx("option",{value:"User",children:"User (Legacy - maps to Collaborator)"})]}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[W.role==="Viewer"&&"Read-only access to shared inbox",W.role==="Collaborator"&&"Can add notes, draft responses, manage own templates",W.role==="Admin"&&"Full configuration access, can assign emails, send, manage accounts",W.role==="User"&&"Legacy role - will be treated as Collaborator"]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(ru,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:W.jobTitle,onChange:ft=>U({...W,jobTitle:ft.target.value}),placeholder:"e.g. Senior Logistics Analyst",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),a.jsx("input",{type:"text",value:W.department,onChange:ft=>U({...W,department:ft.target.value}),placeholder:"e.g. Operations",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),a.jsx("input",{type:"tel",value:W.phone,onChange:ft=>U({...W,phone:ft.target.value}),placeholder:"+1 555-0000",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),a.jsx("textarea",{value:W.bio,onChange:ft=>U({...W,bio:ft.target.value}),placeholder:"Tell the team a bit about yourself...",rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(W_,{className:"w-3.5 h-3.5"})," Timezone"]}),a.jsx("select",{value:W.timezone,onChange:ft=>U({...W,timezone:ft.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:Um.map(ft=>a.jsx("option",{value:ft.value,children:ft.label},ft.value))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Language"}),a.jsx("select",{value:W.language,onChange:ft=>U({...W,language:ft.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:Y_.map(ft=>a.jsx("option",{value:ft.value,children:ft.label},ft.value))})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>te(!1),className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{oe(!0);try{ne?await sne(ne.id,W):await ane(W),te(!1),mt(),r(ne?"User updated successfully!":"User created successfully!")}catch(ft){n(ft.message||"Failed to save user")}finally{oe(!1)}},disabled:K||!W.name||!W.email,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:K?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),ne?"Updating...":"Creating..."]}):ne?"Update":"Invite"})]})]})}),O&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete User?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The user will be permanently removed from the system."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:O.name}),a.jsx("p",{className:"text-xs text-slate-500",children:O.email}),O.role&&a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:O.role})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>R(null),disabled:ee===O.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:async()=>{H(O.id);try{await lne(O.id),await mt(),R(null),r("User deleted successfully")}catch(ft){n(ft.message||"Failed to delete user")}finally{H(null)}},disabled:ee===O.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ee===O.id?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete User"})]})]})}),pe&&Pe&&a.jsx(jve,{imageSrc:Pe,onCrop:lt,onCancel:pr,aspectRatio:1,circularCrop:!0})]})},Ave=({currentUser:e})=>{const{showSuccess:t,showError:r}=Ea(),n=e?.role==="Admin",[s,i]=z.useState("companies"),[o,l]=z.useState({companies:!1,contacts:!1,incomplete:!1,mismatches:!1}),[c,u]=z.useState({groups:[],totalDuplicates:0}),[f,d]=z.useState({groups:[],totalDuplicates:0}),[m,p]=z.useState({companies:[],contacts:[],deals:[],projects:[],invoices:[]}),[y,v]=z.useState({mismatches:[],count:0}),[g,b]=z.useState(null),[N,j]=z.useState(!1),[w,S]=z.useState({}),P=z.useCallback(async()=>{l(te=>({...te,companies:!0}));try{const te=await Kne(),ne=te?.data??te;u({groups:ne.groups||[],totalDuplicates:ne.totalDuplicates??0})}catch{r("Failed to load duplicate companies"),u({groups:[],totalDuplicates:0})}finally{l(te=>({...te,companies:!1}))}},[r]),A=z.useCallback(async()=>{l(te=>({...te,contacts:!0}));try{const te=await Xne(),ne=te?.data??te;d({groups:ne.groups||[],totalDuplicates:ne.totalDuplicates??0})}catch{r("Failed to load duplicate contacts"),d({groups:[],totalDuplicates:0})}finally{l(te=>({...te,contacts:!1}))}},[r]),T=z.useCallback(async()=>{l(te=>({...te,incomplete:!0}));try{const te=await Yne(),ne=te?.data??te;p({companies:ne.companies||[],contacts:ne.contacts||[],deals:ne.deals||[],projects:ne.projects||[],invoices:ne.invoices||[]})}catch{r("Failed to load incomplete records"),p({companies:[],contacts:[],deals:[],projects:[],invoices:[]})}finally{l(te=>({...te,incomplete:!1}))}},[r]),I=z.useCallback(async()=>{l(te=>({...te,mismatches:!0}));try{const te=await Jne(),ne=te?.data??te;v({mismatches:ne.mismatches||[],count:ne.count??0})}catch{r("Failed to load domain mismatches"),v({mismatches:[],count:0})}finally{l(te=>({...te,mismatches:!1}))}},[r]);z.useEffect(()=>{n&&(s==="companies"?P():s==="contacts"?A():s==="incomplete"?T():s==="mismatches"&&I())},[n,s,P,A,T,I]);const B=()=>{s==="companies"?P():s==="contacts"?A():s==="incomplete"?T():I()},E=(te,ne,J,ee,H,O)=>{b({open:!0,type:te,primaryId:ne,secondaryId:J,primaryName:ee,secondaryName:H,groupKey:O})},C=()=>{N||b(null)},M=async()=>{if(g){j(!0);try{g.type==="company"?(await Vne(g.primaryId,g.secondaryId),t("Companies merged successfully"),P()):(await Gne(g.primaryId,g.secondaryId),t("Contacts merged successfully"),A()),b(null)}catch(te){r(te?.message||"Merge failed")}finally{j(!1)}}},q=te=>{S(ne=>({...ne,[te]:!ne[te]}))};if(!n)return a.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-8 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[a.jsx(nU,{className:"w-12 h-12 text-amber-600 mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Admin Only"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Data Hygiene is available only to administrators. Contact your workspace admin if you need access."})]})});const G=[{id:"companies",label:"Duplicate Companies",icon:a.jsx(gd,{className:"w-4 h-4"}),count:c.totalDuplicates},{id:"contacts",label:"Duplicate Contacts",icon:a.jsx(vl,{className:"w-4 h-4"}),count:f.totalDuplicates},{id:"incomplete",label:"Incomplete Records",icon:a.jsx(UB,{className:"w-4 h-4"}),count:m.companies.length+m.contacts.length+m.deals.length+m.projects.length+m.invoices.length},{id:"mismatches",label:"Domain Mismatches",icon:a.jsx(W0,{className:"w-4 h-4"}),count:y.count}],Z=o[s];return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Hygiene"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-0.5",children:"Find duplicates, incomplete records, and domain mismatches"})]}),a.jsxs("button",{onClick:B,disabled:Z,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm disabled:opacity-60",children:[Z?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(bd,{className:"w-4 h-4"}),"Refresh"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-4",children:G.map(te=>a.jsxs("button",{onClick:()=>i(te.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${s===te.id?"bg-indigo-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[te.icon,te.label,te.count!=null&&te.count>0&&a.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-xs font-bold ${s===te.id?"bg-white/20":"bg-slate-300 text-slate-700"}`,children:te.count})]},te.id))}),a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[Z&&a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsx(jt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),!Z&&s==="companies"&&a.jsx("div",{className:"p-6",children:c.groups.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate companies found by domain."}):a.jsx("ul",{className:"space-y-4",children:c.groups.map(te=>{const ne=`company-${te.domain}`,J=w[ne]!==!1;return a.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>q(ne),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[a.jsx("span",{className:"font-semibold text-slate-900",children:te.domain}),a.jsxs("span",{className:"text-sm text-slate-500",children:[te.count," companies"]}),J?a.jsx(hl,{className:"w-5 h-5"}):a.jsx(_s,{className:"w-5 h-5"})]}),J&&a.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:te.companies.map((ee,H)=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),ee.industry&&a.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",ee.industry,")"]})]}),te.companies.length>=2&&a.jsx("div",{className:"flex gap-2",children:te.companies.filter(O=>O.id!==ee.id).map(O=>a.jsxs("button",{onClick:()=>E("company",ee.id,O.id,ee.name||ee.id,O.name||O.id,ne),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[a.jsx(Fv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},O.id))})]},ee.id))})]},ne)})})}),!Z&&s==="contacts"&&a.jsx("div",{className:"p-6",children:f.groups.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate contacts found by email."}):a.jsx("ul",{className:"space-y-4",children:f.groups.map(te=>{const ne=`contact-${te.email}`,J=w[ne]!==!1;return a.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>q(ne),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[a.jsx("span",{className:"font-semibold text-slate-900",children:te.email}),a.jsxs("span",{className:"text-sm text-slate-500",children:[te.count," contacts"]}),J?a.jsx(hl,{className:"w-5 h-5"}):a.jsx(_s,{className:"w-5 h-5"})]}),J&&a.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:te.contacts.map(ee=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:ee.name||""}),a.jsx("span",{className:"text-slate-500 text-sm ml-2",children:ee.email})]}),te.contacts.filter(H=>H.id!==ee.id).map(H=>a.jsxs("button",{onClick:()=>E("contact",ee.id,H.id,ee.name||ee.id,H.name||H.id,ne),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[a.jsx(Fv,{className:"w-3.5 h-3.5"})," Merge into ",ee.name||"this"]},H.id))]},ee.id))})]},ne)})})}),!Z&&s==="incomplete"&&a.jsxs("div",{className:"p-6 space-y-6",children:[[{key:"companies",label:"Companies",items:m.companies,recordLabel:te=>te.name||te.id},{key:"contacts",label:"Contacts",items:m.contacts,recordLabel:te=>te.name||te.email||te.id},{key:"deals",label:"Deals",items:m.deals,recordLabel:te=>te.name||te.title||te.id},{key:"projects",label:"Projects",items:m.projects,recordLabel:te=>te.name||te.title||te.id},{key:"invoices",label:"Invoices",items:m.invoices,recordLabel:te=>te.id}].map(({key:te,label:ne,items:J,recordLabel:ee})=>J.length===0?null:a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:ne}),a.jsx("ul",{className:"space-y-2",children:J.map(H=>a.jsxs("li",{className:"flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx(sa,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-medium text-slate-900",children:ee(H.record)}),a.jsx("ul",{className:"text-sm text-amber-800 mt-1 list-disc list-inside",children:H.errors.map((O,R)=>a.jsx("li",{children:O},R))})]})]},H.record.id))})]},te)),m.companies.length+m.contacts.length+m.deals.length+m.projects.length+m.invoices.length===0&&a.jsx("p",{className:"text-slate-500 text-sm",children:"No incomplete records found."})]}),!Z&&s==="mismatches"&&a.jsx("div",{className:"p-6",children:y.mismatches.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No domain mismatches (contact email domain matches company domain)."}):a.jsx("ul",{className:"space-y-3",children:y.mismatches.map((te,ne)=>a.jsxs("li",{className:"flex items-center gap-4 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx(sa,{className:"w-5 h-5 text-amber-600 shrink-0"}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("p",{className:"font-medium text-slate-900",children:[te.contact?.name," (",te.contact?.email,")"]}),a.jsxs("p",{className:"text-sm text-slate-600",children:["Contact domain: ",a.jsx("strong",{children:te.contactDomain}),"  Company domain: ",a.jsx("strong",{children:te.companyDomain})," (",te.company?.name,")"]})]})]},ne))})})]}),g&&a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:C}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm merge"}),a.jsx("button",{onClick:C,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",disabled:N,children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Merge ",a.jsx("strong",{children:g.secondaryName})," into ",a.jsx("strong",{children:g.primaryName}),"? Related records will point to the primary. The secondary will be removed."]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:C,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200",disabled:N,children:"Cancel"}),a.jsxs("button",{onClick:M,disabled:N,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60",children:[N?a.jsx(jt,{className:"w-5 h-5 animate-spin"}):a.jsx(Fv,{className:"w-5 h-5"}),"Merge"]})]})]})]})})]})]})},Eve=({currentUser:e,onNavigate:t,onNewEvent:r})=>{const{showError:n,showSuccess:s}=Ea(),[i,o]=z.useState(new Date),[l,c]=z.useState("daily"),[u,f]=z.useState([]),[d,m]=z.useState([]),[p,y]=z.useState([]),[v,g]=z.useState([]),[b,N]=z.useState([]),[j,w]=z.useState(!1),[S,P]=z.useState(!1),[A,T]=z.useState(null),[I,B]=z.useState(!1),[E,C]=z.useState(!1),[M,q]=z.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[G,Z]=z.useState([]),[te,ne]=z.useState(!1),[J,ee]=z.useState(""),[H,O]=z.useState(""),[R,W]=z.useState(null),[U,K]=z.useState(!1),[oe,he]=z.useState(null),[ie,ce]=z.useState(null),[Le,le]=z.useState(!1),[He,Fe]=z.useState(""),[fe,Q]=z.useState(0),[we,ve]=z.useState([]),[Ee,pe]=z.useState(!1),[ue,Pe]=z.useState(null),[Ne,Be]=z.useState(!0),[nt,mt]=z.useState(!0),kt=z.useRef(null),Re=z.useRef(null),gt=Array.from({length:24},(re,me)=>me),ut=z.useMemo(()=>Intl.DateTimeFormat().resolvedOptions().timeZone,[]),lt=z.useMemo(()=>{const re=i.getFullYear(),me=String(i.getMonth()+1).padStart(2,"0"),ye=String(i.getDate()).padStart(2,"0");return`${re}-${me}-${ye}`},[i]);z.useEffect(()=>{(async()=>{if(e?.id)try{const me=await I3(e.id);w(me.connected||!1)}catch{w(!1)}})()},[e]);const pr=re=>re.filter(me=>{if(me.recurringEventId){const ye=(me.title||"").toLowerCase().trim();if(["office","working hours","work hours","availability","busy","out of office","lunch","break"].some(Oe=>ye.includes(Oe)))return!1}return!0});z.useEffect(()=>{(async()=>{P(!0);const me=new Date(i),ye=new Date(i);if(l==="monthly")me.setDate(1),me.setHours(0,0,0,0),ye.setMonth(ye.getMonth()+1),ye.setDate(0),ye.setHours(23,59,59,999);else if(l==="weekly"){const Ge=new Date(i),Je=Ge.getDay(),ze=Ge.getDate()-Je+(Je===0?-6:1),De=new Date(Ge.setDate(ze));me.setTime(De.getTime()),me.setHours(0,0,0,0);const tt=new Date(De);tt.setDate(De.getDate()+6),ye.setTime(tt.getTime()),ye.setHours(23,59,59,999)}else me.setHours(0,0,0,0),ye.setHours(23,59,59,999);const Ae=Ge=>{const Je=Ge.getFullYear(),ze=String(Ge.getMonth()+1).padStart(2,"0"),De=String(Ge.getDate()).padStart(2,"0");return`${Je}-${ze}-${De}`},Ce=Ae(me),Oe=Ae(ye),Ke=[];if(j&&e?.id)try{const Je=(await Qne(Ce,Oe,e.id)).data||[],ze=pr(Je);Ke.push(...ze)}catch(Ge){console.warn("[Schedule] Failed to fetch Google Calendar events:",Ge.message)}if(e?.id)try{const Ge=await Bv(e.id,void 0,Ce,Oe);if(Ge.success&&Ge.data){const Je=Ge.data.map(ze=>({id:ze.id,title:ze.title,description:ze.description||"",start:ze.start,end:ze.end,type:ze.type||"meeting",location:ze.location||"",participants:ze.participants||[],color:ze.color||"#4f46e5",isAllDay:ze.isAllDay||!1,source:"firestore",googleEventId:ze.googleEventId||null,htmlLink:ze.htmlLink||null,relatedEntity:ze.relatedEntity||null}));Ke.push(...Je)}}catch(Ge){console.warn("[Schedule] Failed to fetch Firestore calendar events:",Ge.message)}const ct=new Map;Ke.forEach(Ge=>{const Je=Ge.googleEventId||Ge.id;ct.has(Je)||ct.set(Je,Ge)}),f(Array.from(ct.values()));try{const Ge=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ge){y([]),m([]);return}const Je=await Qy(Ge),De=(Array.isArray(Je?.data||Je)?Je?.data||Je:[]).filter(pt=>{const It=pt.dueDate&&pt.dueDate!==null&&pt.dueDate!==void 0&&String(pt.dueDate).trim()!==""&&String(pt.dueDate).trim().toLowerCase()!=="ongoing";return!pt.archived&&It});y(De);const tt=De.filter(pt=>pt.dueDate===lt);m(tt)}catch{y([]),m([])}try{const[Ge,Je,ze]=await Promise.all([Yp(e?.id),Ed(),X1()]);g(Array.isArray(Ge?.data||Ge)?Ge?.data||Ge:[]),N(Array.isArray(Je?.data||Je)?Je?.data||Je:[]),Z(Array.isArray(ze?.data)?ze.data:[])}catch{g([]),N([]),Z([])}P(!1)})()},[lt,j,e,l,i]);const tr=()=>{const re=new Date(i);l==="daily"?re.setDate(re.getDate()-1):l==="weekly"?re.setDate(re.getDate()-7):re.setMonth(re.getMonth()-1),o(re)},ft=()=>{const re=new Date(i);l==="daily"?re.setDate(re.getDate()+1):l==="weekly"?re.setDate(re.getDate()+7):re.setMonth(re.getMonth()+1),o(re)},$t=()=>{const re=new Date;return i.toDateString()===re.toDateString()},er=re=>{let me=new Date(re.start),ye=new Date(re.end);const Ae=new Date(i);Ae.setHours(0,0,0,0);const Ce=(me.getTime()-Ae.getTime())/(1e3*60),Oe=(ye.getTime()-me.getTime())/(1e3*60),Ke=Ce*(80/60)+20,ct=Oe*(80/60);return{top:Ke,height:Math.max(ct,50)}},qe=re=>{try{return new Date(re).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return re}},bt=re=>{switch(re){case"High":return"text-red-500 bg-red-50 border-red-100";case"Medium":return"text-amber-500 bg-amber-50 border-amber-100";default:return"text-blue-500 bg-blue-50 border-blue-100"}},Nr=re=>{const me=new Date(re),ye=me.getDay(),Ae=me.getDate()-ye+(ye===0?-6:1);return new Date(me.setDate(Ae))},rr=re=>{const me=Nr(re);return Array.from({length:7},(ye,Ae)=>{const Ce=new Date(me);return Ce.setDate(me.getDate()+Ae),Ce})},Lr=re=>{const me=re.getFullYear(),ye=re.getMonth(),Ae=new Date(me,ye,1),Ce=new Date(me,ye+1,0),Oe=new Date(Ae);Oe.setDate(Oe.getDate()-Oe.getDay());const Ke=[],ct=new Date(Oe);for(;(ct<=Ce||Ke.length<42)&&(Ke.push(new Date(ct)),ct.setDate(ct.getDate()+1),!(Ke.length>=42)););return Ke},Er=re=>{const me=re.getFullYear(),ye=String(re.getMonth()+1).padStart(2,"0"),Ae=String(re.getDate()).padStart(2,"0");return`${me}-${ye}-${Ae}`},or=re=>p.filter(me=>me.dueDate===re),Ut=re=>{Er(re);const me=new Date(re);me.setHours(0,0,0,0);const ye=new Date(re);return ye.setHours(23,59,59,999),u.filter(Ae=>{const Ce=new Date(Ae.start),Oe=Ae.end?new Date(Ae.end):Ce;return Ce<=ye&&Oe>=me})},wr=re=>{if(!re||!/^\d{4}-\d{2}-\d{2}$/.test(re))return re;const[me,ye,Ae]=re.split("-").map(Number);return new Date(me,ye-1,Ae).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};z.useEffect(()=>{A&&!I&&q({title:A.title,category:A.category||"",description:A.description||"",dueDate:A.dueDate||"",priority:A.priority||"Medium",status:A.status||"Todo",assigneeId:A.assigneeId,projectId:A.projectId||""})},[A,I]),z.useEffect(()=>{if(!I){ne(!1);return}A?.category&&!G.includes(A.category)?ne(!0):M.category&&G.includes(M.category)?ne(!1):M.category&&!G.includes(M.category)&&ne(!0)},[I,M.category,G]),z.useEffect(()=>{if(!A)return;let re=!1;return(async()=>{try{const me=await X1(),ye=Array.isArray(me?.data)?me.data:[];re||Z(ye)}catch{re||Z([])}})(),()=>{re=!0}},[A?.id]);const kr=()=>{T(null),B(!1),ee(""),O(""),W(null),le(!1),pe(!1),Re.current&&(Re.current.value="")},Gr=async()=>{if(A){if(!M.title.trim()){n("Task title is required");return}if(!M.assigneeId){n("Assignee is required");return}C(!0);try{await Y1(A.id,{title:M.title.trim(),category:M.category.trim()||void 0,description:M.description.trim()||"",dueDate:M.dueDate||null,priority:M.priority,status:M.status,assigneeId:M.assigneeId,projectId:M.projectId||null}),y(re=>re.map(me=>me.id===A.id?{...me,title:M.title.trim(),category:M.category.trim()||void 0,description:M.description.trim()||"",dueDate:M.dueDate||"",priority:M.priority,status:M.status,assigneeId:M.assigneeId,projectId:M.projectId||void 0}:me)),T({...A,title:M.title.trim(),category:M.category.trim()||void 0,description:M.description.trim()||"",dueDate:M.dueDate||"",priority:M.priority,status:M.status,assigneeId:M.assigneeId,projectId:M.projectId||void 0,updatedAt:new Date().toISOString()}),B(!1),s("Task updated successfully")}catch(re){n(re.message||"Failed to update task")}finally{C(!1)}}},hn=(re,me=1200,ye=1200,Ae=.8)=>new Promise((Ce,Oe)=>{const Ke=new FileReader;Ke.onload=ct=>{const Ge=new Image;Ge.onload=()=>{let Je=Ge.width,ze=Ge.height;Je>ze?Je>me&&(ze=ze*me/Je,Je=me):ze>ye&&(Je=Je*ye/ze,ze=ye);const De=document.createElement("canvas");De.width=Je,De.height=ze;const tt=De.getContext("2d");tt?(tt.drawImage(Ge,0,0,Je,ze),Ce(De.toDataURL("image/jpeg",Ae))):Oe(new Error("Canvas context not available"))},Ge.onerror=()=>Oe(new Error("Failed to load image")),Ge.src=ct.target?.result},Ke.onerror=()=>Oe(new Error("Failed to read file")),Ke.readAsDataURL(re)}),On=async re=>{const me=re.target.files?.[0];if(me){if(!me.type.startsWith("image/")){n("Please select an image file");return}if(me.size>10*1024*1024){n("Image size must be less than 10MB");return}try{const ye=await hn(me,1200,1200,.8);O(ye),W(me)}catch(ye){n(ye.message||"Failed to process image")}}},br=re=>{const me=re.target.value,ye=re.target.selectionStart;ee(me),Q(ye);const Ae=me.substring(0,ye),Ce=Ae.lastIndexOf("@");if(Ce!==-1){const Oe=Ae.substring(Ce+1),Ke=Ce>0?Ae[Ce-1]:" ";if((Ke===" "||Ke===`
`||Ce===0)&&!Oe.includes(" ")&&!Oe.includes(`
`)){Fe(Oe);const ct=b.filter(Ge=>Ge.name.toLowerCase().includes(Oe.toLowerCase())||Ge.email.toLowerCase().includes(Oe.toLowerCase()));ve(ct.slice(0,5)),le(!0);return}}le(!1)},Yn=re=>{const ye=J.substring(0,fe).lastIndexOf("@"),Ae=J.substring(fe),Oe=`${J.substring(0,ye)}@${re.name} ${Ae}`;if(ee(Oe),le(!1),kt.current){kt.current.focus();const Ke=ye+re.name.length+2;kt.current.setSelectionRange(Ke,Ke)}},on=re=>{const me=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,ye=[];let Ae;for(;(Ae=me.exec(re))!==null;){const Ce=Ae[1].trim(),Oe=b.find(Ke=>Ke.name.toLowerCase()===Ce.toLowerCase());Oe&&Oe.id!==(e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&ye.push(Oe.id)}return[...new Set(ye)]},Xe=re=>{const me=[],ye=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g;let Ae=0,Ce,Oe=0;for(;(Ce=ye.exec(re))!==null;){Ce.index>Ae&&me.push(re.substring(Ae,Ce.index));const Ke=Ce[1].trim();b.find(Ge=>Ge.name.toLowerCase()===Ke.toLowerCase())?me.push(a.jsxs("span",{className:"font-bold text-indigo-600",children:["@",Ke]},Oe++)):me.push(`@${Ke}`),Ae=ye.lastIndex}return Ae<re.length&&me.push(re.substring(Ae)),me.length>0?me:re},wt=async()=>{if(A){if(!J.trim()&&!R){n("Please add a note or attach an image");return}K(!0);try{const re=JSON.parse(localStorage.getItem("user_data")||"{}"),me={id:`note_${Date.now()}`,userId:re.id,userName:re.name||"Unknown User",text:J.trim(),createdAt:new Date().toISOString()};H&&R&&(me.imageUrl=H,me.imageName=R.name,me.imageMimeType=R.type);const ye=[...A.notes||[],me];await Y1(A.id,{notes:ye});const Ae=on(J);if(Ae.length>0)for(const Ce of Ae)try{await Fp({userId:Ce,notificationType:"task-mention",title:"You were mentioned in a task",message:`${re.name||"Someone"} mentioned you in task: "${A.title}"`,link:`/?tab=tasks&task=${A.id}`})}catch(Oe){console.error("Failed to send mention notification:",Oe)}T({...A,notes:ye}),y(Ce=>Ce.map(Oe=>Oe.id===A.id?{...Oe,notes:ye}:Oe)),ee(""),O(""),W(null),Re.current&&(Re.current.value=""),s("Note added successfully")}catch(re){n(re.message||"Failed to add note")}finally{K(!1)}}},Wt=()=>{if(l==="daily")return a.jsxs("div",{className:"p-8 pt-12 pb-12 relative min-h-[2000px] bg-white",children:[gt.map(re=>{const me=re*80+20;return a.jsxs("div",{className:"absolute left-0 right-0 group",style:{top:`${me}px`},children:[a.jsx("span",{className:"absolute left-4 top-0 -translate-y-1/2 text-[10px] font-black text-slate-300 w-16 text-right pr-6 uppercase tracking-widest",children:re===0?"12 AM":re===12?"12 PM":re>12?`${re-12} PM`:`${re} AM`}),a.jsx("div",{className:"absolute left-24 top-0 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-slate-100 group-hover:bg-indigo-200 transition-colors"}),a.jsx("div",{className:"absolute left-24 top-0 right-8 h-px bg-slate-50"})]},re)}),Ne&&u.map(re=>{const me=er(re);return a.jsxs("div",{className:"absolute left-28 right-8 p-4 rounded-3xl border shadow-sm transition-all hover:scale-[1.01] hover:shadow-xl group overflow-hidden bg-indigo-50 border-indigo-100",style:{top:`${me.top}px`,height:`${me.height}px`},children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500/20 group-hover:w-2 transition-all"}),a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-black text-sm truncate text-indigo-900",children:re.title}),a.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-2",children:a.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[a.jsx(As,{className:"w-3 h-3 text-indigo-400"})," ",qe(re.start)," - ",qe(re.end)]})})]}),re.htmlLink&&a.jsx("a",{href:re.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white rounded-xl border border-slate-100 shadow-sm text-slate-400 hover:text-indigo-600 transition-all active:scale-95",children:a.jsx(Ti,{className:"w-3.5 h-3.5"})})]})]},re.id)}),!S&&(Ne&&u.length===0||!Ne&&(!nt||d.length===0))&&a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center opacity-40",children:[a.jsx(ka,{className:"w-16 h-16 text-slate-200 mb-4"}),a.jsx("p",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:"No schedule entries for this day"})]})]});if(l==="weekly"){const re=rr(i),me=new Date;return me.setHours(0,0,0,0),a.jsxs("div",{className:"p-6 bg-white",children:[a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((ye,Ae)=>a.jsx("div",{className:"text-center py-2",children:a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:ye})},ye))}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:re.map((ye,Ae)=>{const Ce=Er(ye),Oe=nt?or(Ce):[],Ke=Ne?Ut(ye):[];let ct=[],Ge=[];nt&&Ne?Oe.length>0&&Ke.length>0?(ct=Oe.slice(0,1),Ge=Ke.slice(0,1)):Oe.length>0?ct=Oe.slice(0,2):Ke.length>0&&(Ge=Ke.slice(0,2)):nt?ct=Oe.slice(0,2):Ne&&(Ge=Ke.slice(0,2));const Je=[...Oe,...Ke],ze=ye.toDateString()===me.toDateString(),De=ye.getMonth()===i.getMonth();return a.jsxs("div",{onClick:()=>{o(new Date(ye)),c("daily")},className:`min-h-[120px] p-2 rounded-xl border-2 transition-all cursor-pointer ${ze?"bg-indigo-50 border-indigo-300":De?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[a.jsx("div",{className:`text-xs font-black mb-2 ${ze?"text-indigo-600":De?"text-slate-900":"text-slate-400"}`,children:ye.getDate()}),a.jsxs("div",{className:"space-y-1 max-h-[80px] overflow-y-auto",children:[nt&&ct.map(tt=>a.jsx("div",{onClick:pt=>{pt.stopPropagation(),T(tt)},className:`p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${tt.priority==="High"?"bg-red-100 text-red-700":tt.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:tt.title,children:tt.title},tt.id)),Ne&&Ge.map(tt=>a.jsx("div",{onClick:pt=>{pt.stopPropagation(),tt.htmlLink&&window.open(tt.htmlLink,"_blank")},className:"p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:tt.title,children:tt.title},tt.id)),ct.length+Ge.length<Je.length&&a.jsxs("div",{className:"text-[9px] text-slate-400 font-bold px-1.5",children:["+",Je.length-(ct.length+Ge.length)," more"]})]})]},Ae)})})]})}if(l==="monthly"){const re=Lr(i),me=new Date;me.setHours(0,0,0,0);const ye=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a.jsxs("div",{className:"p-6 bg-white",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:ye.map(Ae=>a.jsx("div",{className:"text-center py-2",children:a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:Ae})},Ae))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:re.map((Ae,Ce)=>{const Oe=Er(Ae),Ke=nt?or(Oe):[],ct=Ne?Ut(Ae):[];let Ge=[],Je=[];nt&&Ne?Ke.length>0&&ct.length>0?(Ge=Ke.slice(0,1),Je=ct.slice(0,1)):Ke.length>0?Ge=Ke.slice(0,1):ct.length>0&&(Je=ct.slice(0,1)):nt?Ge=Ke.slice(0,1):Ne&&(Je=ct.slice(0,1));const ze=[...Ke,...ct],De=Ae.toDateString()===me.toDateString(),tt=Ae.getMonth()===i.getMonth();return a.jsxs("div",{onClick:()=>{o(new Date(Ae)),c("daily")},className:`min-h-[100px] p-1.5 rounded-lg border transition-all cursor-pointer ${De?"bg-indigo-50 border-indigo-300":tt?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[a.jsx("div",{className:`text-[10px] font-black mb-1 ${De?"text-indigo-600":tt?"text-slate-900":"text-slate-400"}`,children:Ae.getDate()}),a.jsxs("div",{className:"space-y-0.5 max-h-[70px] overflow-y-auto",children:[nt&&Ge.map(pt=>a.jsx("div",{onClick:It=>{It.stopPropagation(),T(pt)},className:`p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${pt.priority==="High"?"bg-red-100 text-red-700":pt.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:pt.title,children:pt.title},pt.id)),Ne&&Je.map(pt=>a.jsx("div",{onClick:It=>{It.stopPropagation(),pt.htmlLink&&window.open(pt.htmlLink,"_blank")},className:"p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:pt.title,children:pt.title},pt.id)),Ge.length+Je.length<ze.length&&a.jsxs("div",{className:"text-[8px] text-slate-400 font-bold px-1",children:["+",ze.length-(Ge.length+Je.length)]})]})]},Ce)})})]})}};return a.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Schedule"}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[l==="monthly"?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{const re=new Date(i);re.setMonth(re.getMonth()-1),o(re)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Previous month",children:a.jsx(Aj,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-slate-500 text-sm font-medium min-w-[140px] text-center",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>{const re=new Date(i);re.setMonth(re.getMonth()+1),o(re)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Next month",children:a.jsx(_s,{className:"w-4 h-4"})})]}):l==="weekly"?a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:(()=>{const re=rr(i),me=re[0],ye=re[6];return`${me.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${ye.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`})()}):a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-indigo-50 border border-indigo-100 rounded-lg",children:[a.jsx(As,{className:"w-3 h-3 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 tracking-wide",children:ut})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:Ne,onChange:re=>Be(re.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${Ne?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:Ne&&a.jsx(kd,{className:"w-3 h-3 text-white"})})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Events"})]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:nt,onChange:re=>mt(re.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${nt?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:nt&&a.jsx(kd,{className:"w-3 h-3 text-white"})})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Tasks"})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:["daily","weekly","monthly"].map(re=>a.jsx("button",{onClick:()=>c(re),className:`px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${l===re?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:re},re))}),a.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsx("button",{onClick:tr,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(Aj,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>o(new Date),className:`px-4 py-1.5 font-bold text-[10px] uppercase tracking-widest rounded-xl transition-all ${$t()?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Today"}),a.jsx("button",{onClick:ft,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(_s,{className:"w-5 h-5"})})]}),a.jsxs("button",{onClick:r,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-black shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[a.jsx(Nn,{className:"w-4 h-4"}),"New Entry"]})]})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Schedule"}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-100 rounded-lg",children:[a.jsx(As,{className:"w-3 h-3 text-slate-500"}),a.jsx("span",{className:"text-[9px] font-bold text-slate-500 tracking-wide",children:ut})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[S&&a.jsx(jt,{className:"w-3 h-3 animate-spin text-indigo-600"}),a.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider ${j?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-100 text-slate-400"}`,children:j?"Google Workspace Connected":"Google Disconnected"})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto relative bg-white",children:[l==="daily"&&nt&&d.length>0&&a.jsxs("div",{className:"px-6 py-6 bg-slate-50/50 border-b border-slate-100 space-y-3",children:[a.jsxs("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(jn,{className:"w-3 h-3"})," Today's Deliverables"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:d.map(re=>a.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm group hover:border-indigo-200 transition-all flex items-start gap-3",children:[a.jsx("div",{className:"mt-1",children:re.status==="Done"?a.jsx(jn,{className:"w-4 h-4 text-emerald-500"}):a.jsx(vd,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-xs font-bold truncate ${re.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:re.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border uppercase ${bt(re.priority)}`,children:re.priority})})]})]},re.id))})]}),Wt()]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsx(Gi,{className:"w-8 h-8 text-indigo-400 mb-6"}),a.jsx("h3",{className:"text-2xl font-black mb-2 leading-tight",children:"Unified Workspace"}),a.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 opacity-80",children:"Synchronize your calendar, billing, and accounting software in one central hub."}),a.jsx("button",{onClick:()=>t("integrations"),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-900 flex items-center justify-center gap-3",children:"Go to Integrations"})]}),a.jsx("div",{className:"absolute -right-8 -bottom-8 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl group-hover:bg-indigo-500/20 transition-all pointer-events-none"})]}),a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col items-center justify-center text-center space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300",children:a.jsx(a0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900 uppercase tracking-widest",children:"Workspace Statistics"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:"No data collected for current period. Stats will populate as you add tasks and events."})]})]})]})]}),A&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:kr}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:kr,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(cr,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:a.jsx(jn,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[I?a.jsx("input",{type:"text",value:M.title,onChange:re=>q(me=>({...me,title:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:A.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${A.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":A.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":A.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:A.status}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",A.id.substring(0,8)]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:I?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{B(!1),q({title:A.title,category:A.category||"",description:A.description||"",dueDate:A.dueDate||"",priority:A.priority||"Medium",status:A.status||"Todo",assigneeId:A.assigneeId,projectId:A.projectId||""})},disabled:E,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Gr,disabled:E||!M.title.trim()||!M.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:E?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(vc,{className:"w-4 h-4"}),"Edit Task"]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),I?a.jsxs("select",{value:M.assigneeId,onChange:re=>q(me=>({...me,assigneeId:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"Select Assignee"}),b.map(re=>a.jsx("option",{value:re.id,children:re.name},re.id))]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:b.find(re=>re.id===A.assigneeId)?.name?.charAt(0)||"U"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:b.find(re=>re.id===A.assigneeId)?.name||"Unassigned"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),I?a.jsxs("select",{value:M.projectId,onChange:re=>q(me=>({...me,projectId:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"None"}),v.filter(re=>!re.archived).map(re=>a.jsx("option",{value:re.id,children:re.title},re.id))]}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:A.projectId?v.find(re=>re.id===A.projectId)?.title||"Unknown Project":"None"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ga,{className:"w-4 h-4 text-indigo-500"})," Description"]}),I?a.jsx("textarea",{rows:6,value:M.description,onChange:re=>q(me=>({...me,description:re.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-indigo-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Add task description..."}):a.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:A.description||"No description provided."}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[a.jsx(ks,{className:"w-3.5 h-3.5"})," Task Category"]}),I?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsxs("select",{value:te?"__new__":M.category||"",onChange:re=>{const me=re.target.value;me==="__new__"?(ne(!0),q(ye=>({...ye,category:""}))):(ne(!1),q(ye=>({...ye,category:me})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),G.map(re=>a.jsx("option",{value:re,children:re},re)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),te&&a.jsx("input",{type:"text",value:M.category,onChange:re=>q(me=>({...me,category:re.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):a.jsx("div",{className:"flex items-center gap-2 mt-2",children:A.category?a.jsxs(a.Fragment,{children:[a.jsx(ks,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-sm font-bold text-indigo-700",children:A.category})]}):a.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),I?a.jsx("input",{type:"date",value:M.dueDate,onChange:re=>q(me=>({...me,dueDate:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:A.dueDate?wr(A.dueDate):"Ongoing"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),I?a.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(re=>a.jsx("button",{onClick:()=>q(me=>({...me,priority:re})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${M.priority===re?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:re},re))}):a.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${A.priority==="High"?"bg-red-50 text-red-600":A.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:A.priority})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),I?a.jsxs("select",{value:M.status,onChange:re=>q(me=>({...me,status:re.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"Todo",children:"Todo"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Review",children:"Review"}),a.jsx("option",{value:"Done",children:"Done"})]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[A.status==="Done"?a.jsx(jn,{className:"w-5 h-5 text-emerald-500"}):A.status==="In Progress"?a.jsx(As,{className:"w-5 h-5 text-blue-500 animate-pulse"}):a.jsx(vd,{className:"w-5 h-5 text-slate-400"}),a.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:A.status})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",A.notes&&A.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:A.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{ref:kt,rows:3,value:J,onChange:br,onBlur:()=>{setTimeout(()=>le(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),Le&&we.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(rx,{className:"w-3 h-3"}),"Mention User"]}),we.map(re=>a.jsxs("button",{onClick:()=>Yn(re),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:re.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:re.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:re.email})]})]},re.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:H?a.jsx(gl,{className:"w-4 h-4"}):a.jsx($u,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:H?R?.name||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:Re,type:"file",accept:"image/*",onChange:On,className:"hidden"})]}),a.jsx("button",{onClick:wt,disabled:U||!J.trim()&&!R,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:U?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Iu,{className:"w-4 h-4"}),"Send"]})})]}),H&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:H,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{O(""),W(null),Re.current&&(Re.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(cr,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:A.notes&&A.notes.length>0?[...A.notes].reverse().map(re=>{const me=e?.role==="Admin"||re.userId===e?.id;return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:re.userName?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:re.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(re.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),me&&a.jsx("button",{onClick:()=>ce(re.id),disabled:oe===re.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:oe===re.id?a.jsx(jt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),re.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Xe(re.text)}),re.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsx("img",{src:re.imageUrl,alt:re.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const ye=window.open();ye&&ye.document.write(`<img src="${re.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},re.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("button",{onClick:()=>pe(!Ee),className:"w-full flex items-center justify-between group",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[a.jsx(rf,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),a.jsx(_s,{className:`w-4 h-4 text-slate-400 transition-transform ${Ee?"rotate-90":""}`})]}),Ee&&a.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:A.createdAt?new Date(A.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),A.updatedAt&&A.updatedAt!==A.createdAt&&a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(A.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),A.notes&&A.notes.map((re,me)=>a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[re.userName," added a comment"]}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(re.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},re.id)),(!A.notes||A.notes.length===0)&&(!A.updatedAt||A.updatedAt===A.createdAt)&&a.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:[a.jsx("button",{onClick:()=>{Pe(A),kr()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(Br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:kr,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(jn,{className:"w-5 h-5"})," Close"]})]})]})]}),ue&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),a.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.title})})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Pe(null),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(ue)try{await A7(ue.id),y(re=>re.filter(me=>me.id!==ue.id)),m(re=>re.filter(me=>me.id!==ue.id)),Pe(null),T(null),s("Task deleted successfully")}catch(re){n(re.message||"Failed to delete task")}},className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg",children:"Delete Task"})]})]})})]})},Cve=()=>{const{showSuccess:e}=Ea(),[t,r]=z.useState(null),[n,s]=z.useState([]),i=l=>{r(l),setTimeout(()=>{s(c=>[...c,l]),r(null),e(`${l.charAt(0).toUpperCase()+l.slice(1)} connected successfully!`)},1500)},o=[{id:"google",name:"Google Workspace",description:"Sync your Gmail, Calendar, and Drive to streamline communication and scheduling.",icon:a.jsx(gi,{className:"w-8 h-8 text-blue-500"}),color:"bg-blue-50",status:"Communication & Scheduling",isComingSoon:!0},{id:"stripe",name:"Stripe",description:"Automate invoice payments and financial reporting with the world's leading payment platform.",icon:a.jsx(rD,{className:"w-8 h-8 text-indigo-500"}),color:"bg-indigo-50",status:"Payment Processing",isComingSoon:!0},{id:"zoho",name:"Zoho Books",description:"Bi-directional sync of contacts, invoices, and accounting data with your Zoho workspace.",icon:a.jsx(W0,{className:"w-8 h-8 text-emerald-500"}),color:"bg-emerald-50",status:"Accounting & Finance",isComingSoon:!0}];return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Integrations"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Connect your favorite tools to the ImpactFlow OS ."})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-black uppercase tracking-widest border border-emerald-100",children:[a.jsx(vy,{className:"w-4 h-4"})," Secure Enterprise Sync"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(l=>{const c=n.includes(l.id),u=t===l.id;return a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col h-full hover:border-indigo-300 transition-all group relative overflow-visible",children:[l.isComingSoon&&a.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-indigo-100 text-indigo-700 rounded-full border border-indigo-200 shadow-sm px-3 py-1.5 text-center leading-tight whitespace-nowrap",children:[a.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest",children:"Coming Soon"}),a.jsx("div",{className:"text-[8px] font-bold uppercase tracking-wider text-indigo-600",children:"In Development"})]}),a.jsxs("div",{className:"flex justify-between items-start mb-8",children:[a.jsx("div",{className:`w-16 h-16 ${l.color} rounded-[20px] flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`,children:l.icon}),!l.isComingSoon&&(c?a.jsxs("div",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Active"]}):a.jsx("div",{className:"px-3 py-1 bg-slate-50 text-slate-400 rounded-full text-[10px] font-black uppercase tracking-tighter",children:"Disconnected"}))]}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:l.name}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4",children:l.status}),a.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-1 mb-8",children:l.description}),a.jsxs("div",{className:"pt-6 border-t border-slate-50 space-y-3",children:[a.jsx("button",{onClick:()=>!c&&!l.isComingSoon&&i(l.id),disabled:u||c||l.isComingSoon,className:`w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c?"bg-slate-50 text-slate-400 cursor-default":l.isComingSoon?"bg-slate-50 text-slate-400 cursor-not-allowed opacity-60":"bg-indigo-600 text-white shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-[0.98]"}`,children:u?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):c?a.jsxs(a.Fragment,{children:["Connected ",a.jsx(jn,{className:"w-4 h-4"})]}):l.isComingSoon?a.jsx(a.Fragment,{children:"Development in Progress"}):a.jsxs(a.Fragment,{children:["Connect ",l.name," ",a.jsx(lo,{className:"w-4 h-4"})]})}),a.jsxs("button",{className:"w-full py-2.5 text-slate-400 hover:text-slate-600 text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2",children:["View API Docs ",a.jsx(Ti,{className:"w-3 h-3"})]})]})]},l.id)})}),a.jsxs("div",{className:"bg-slate-900 rounded-[40px] p-12 text-white relative overflow-hidden group shadow-2xl",children:[a.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[a.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-md",children:a.jsx(Xv,{className:"w-6 h-6 text-indigo-400"})}),a.jsxs("h2",{className:"text-4xl font-black mb-4 tracking-tight leading-tight",children:["Request Custom ",a.jsx("br",{}),a.jsx("span",{className:"text-indigo-400",children:"Webhooks & API Sync"})]}),a.jsx("p",{className:"text-slate-400 text-lg leading-relaxed mb-10 opacity-80",children:"Need to connect your specialized logistics software or internal ERP? Our engineering team builds custom bridges for Impact Enterprise clients."}),a.jsx("button",{className:"px-10 py-5 bg-white text-slate-900 font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-50 transition-all active:scale-95 shadow-xl",children:"Contact Integration Team"})]}),a.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full opacity-10 translate-x-1/4 pointer-events-none",children:a.jsx(Xv,{className:"w-full h-full text-indigo-600"})})]})]})};const{entries:O9,setPrototypeOf:BI,isFrozen:Tve,getPrototypeOf:Ove,getOwnPropertyDescriptor:Pve}=Object;let{freeze:Nl,seal:ou,create:kk}=Object,{apply:Sk,construct:_k}=typeof Reflect<"u"&&Reflect;Nl||(Nl=function(t){return t});ou||(ou=function(t){return t});Sk||(Sk=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];return t.apply(r,s)});_k||(_k=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return new t(...n)});const Tv=jl(Array.prototype.forEach),Ive=jl(Array.prototype.lastIndexOf),UI=jl(Array.prototype.pop),_m=jl(Array.prototype.push),Dve=jl(Array.prototype.splice),Hv=jl(String.prototype.toLowerCase),bj=jl(String.prototype.toString),wj=jl(String.prototype.match),Am=jl(String.prototype.replace),Lve=jl(String.prototype.indexOf),Fve=jl(String.prototype.trim),Tu=jl(Object.prototype.hasOwnProperty),fl=jl(RegExp.prototype.test),Em=Mve(TypeError);function jl(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return Sk(e,t,n)}}function Mve(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return _k(e,r)}}function Dn(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Hv;BI&&BI(e,null);let n=t.length;for(;n--;){let s=t[n];if(typeof s=="string"){const i=r(s);i!==s&&(Tve(t)||(t[n]=i),s=i)}e[s]=!0}return e}function Rve(e){for(let t=0;t<e.length;t++)Tu(e,t)||(e[t]=null);return e}function ud(e){const t=kk(null);for(const[r,n]of O9(e))Tu(e,r)&&(Array.isArray(n)?t[r]=Rve(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=ud(n):t[r]=n);return t}function Cm(e,t){for(;e!==null;){const n=Pve(e,t);if(n){if(n.get)return jl(n.get);if(typeof n.value=="function")return jl(n.value)}e=Ove(e)}function r(){return null}return r}const qI=Nl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Nj=Nl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jj=Nl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bve=Nl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),kj=Nl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Uve=Nl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$I=Nl(["#text"]),zI=Nl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Sj=Nl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),HI=Nl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ov=Nl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),qve=ou(/\{\{[\w\W]*|[\w\W]*\}\}/gm),$ve=ou(/<%[\w\W]*|[\w\W]*%>/gm),zve=ou(/\$\{[\w\W]*/gm),Hve=ou(/^data-[\-\w.\u00B7-\uFFFF]+$/),Wve=ou(/^aria-[\-\w]+$/),P9=ou(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Vve=ou(/^(?:\w+script|data):/i),Gve=ou(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),I9=ou(/^html$/i),Kve=ou(/^[a-z][.\w]*(-[.\w]+)+$/i);var WI=Object.freeze({__proto__:null,ARIA_ATTR:Wve,ATTR_WHITESPACE:Gve,CUSTOM_ELEMENT:Kve,DATA_ATTR:Hve,DOCTYPE_NAME:I9,ERB_EXPR:$ve,IS_ALLOWED_URI:P9,IS_SCRIPT_OR_DATA:Vve,MUSTACHE_EXPR:qve,TMPLIT_EXPR:zve});const Tm={element:1,text:3,progressingInstruction:7,comment:8,document:9},Xve=function(){return typeof window>"u"?null:window},Yve=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(n=r.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},VI=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function D9(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xve();const t=ze=>D9(ze);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==Tm.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:u,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:m,trustedTypes:p}=e,y=c.prototype,v=Cm(y,"cloneNode"),g=Cm(y,"remove"),b=Cm(y,"nextSibling"),N=Cm(y,"childNodes"),j=Cm(y,"parentNode");if(typeof o=="function"){const ze=r.createElement("template");ze.content&&ze.content.ownerDocument&&(r=ze.content.ownerDocument)}let w,S="";const{implementation:P,createNodeIterator:A,createDocumentFragment:T,getElementsByTagName:I}=r,{importNode:B}=n;let E=VI();t.isSupported=typeof O9=="function"&&typeof j=="function"&&P&&P.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:C,ERB_EXPR:M,TMPLIT_EXPR:q,DATA_ATTR:G,ARIA_ATTR:Z,IS_SCRIPT_OR_DATA:te,ATTR_WHITESPACE:ne,CUSTOM_ELEMENT:J}=WI;let{IS_ALLOWED_URI:ee}=WI,H=null;const O=Dn({},[...qI,...Nj,...jj,...kj,...$I]);let R=null;const W=Dn({},[...zI,...Sj,...HI,...Ov]);let U=Object.seal(kk(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,oe=null;const he=Object.seal(kk(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ie=!0,ce=!0,Le=!1,le=!0,He=!1,Fe=!0,fe=!1,Q=!1,we=!1,ve=!1,Ee=!1,pe=!1,ue=!0,Pe=!1;const Ne="user-content-";let Be=!0,nt=!1,mt={},kt=null;const Re=Dn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let gt=null;const ut=Dn({},["audio","video","img","source","image","track"]);let lt=null;const pr=Dn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tr="http://www.w3.org/1998/Math/MathML",ft="http://www.w3.org/2000/svg",$t="http://www.w3.org/1999/xhtml";let er=$t,qe=!1,bt=null;const Nr=Dn({},[tr,ft,$t],bj);let rr=Dn({},["mi","mo","mn","ms","mtext"]),Lr=Dn({},["annotation-xml"]);const Er=Dn({},["title","style","font","a","script"]);let or=null;const Ut=["application/xhtml+xml","text/html"],wr="text/html";let kr=null,Gr=null;const hn=r.createElement("form"),On=function(De){return De instanceof RegExp||De instanceof Function},br=function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Gr&&Gr===De)){if((!De||typeof De!="object")&&(De={}),De=ud(De),or=Ut.indexOf(De.PARSER_MEDIA_TYPE)===-1?wr:De.PARSER_MEDIA_TYPE,kr=or==="application/xhtml+xml"?bj:Hv,H=Tu(De,"ALLOWED_TAGS")?Dn({},De.ALLOWED_TAGS,kr):O,R=Tu(De,"ALLOWED_ATTR")?Dn({},De.ALLOWED_ATTR,kr):W,bt=Tu(De,"ALLOWED_NAMESPACES")?Dn({},De.ALLOWED_NAMESPACES,bj):Nr,lt=Tu(De,"ADD_URI_SAFE_ATTR")?Dn(ud(pr),De.ADD_URI_SAFE_ATTR,kr):pr,gt=Tu(De,"ADD_DATA_URI_TAGS")?Dn(ud(ut),De.ADD_DATA_URI_TAGS,kr):ut,kt=Tu(De,"FORBID_CONTENTS")?Dn({},De.FORBID_CONTENTS,kr):Re,K=Tu(De,"FORBID_TAGS")?Dn({},De.FORBID_TAGS,kr):ud({}),oe=Tu(De,"FORBID_ATTR")?Dn({},De.FORBID_ATTR,kr):ud({}),mt=Tu(De,"USE_PROFILES")?De.USE_PROFILES:!1,ie=De.ALLOW_ARIA_ATTR!==!1,ce=De.ALLOW_DATA_ATTR!==!1,Le=De.ALLOW_UNKNOWN_PROTOCOLS||!1,le=De.ALLOW_SELF_CLOSE_IN_ATTR!==!1,He=De.SAFE_FOR_TEMPLATES||!1,Fe=De.SAFE_FOR_XML!==!1,fe=De.WHOLE_DOCUMENT||!1,ve=De.RETURN_DOM||!1,Ee=De.RETURN_DOM_FRAGMENT||!1,pe=De.RETURN_TRUSTED_TYPE||!1,we=De.FORCE_BODY||!1,ue=De.SANITIZE_DOM!==!1,Pe=De.SANITIZE_NAMED_PROPS||!1,Be=De.KEEP_CONTENT!==!1,nt=De.IN_PLACE||!1,ee=De.ALLOWED_URI_REGEXP||P9,er=De.NAMESPACE||$t,rr=De.MATHML_TEXT_INTEGRATION_POINTS||rr,Lr=De.HTML_INTEGRATION_POINTS||Lr,U=De.CUSTOM_ELEMENT_HANDLING||{},De.CUSTOM_ELEMENT_HANDLING&&On(De.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(U.tagNameCheck=De.CUSTOM_ELEMENT_HANDLING.tagNameCheck),De.CUSTOM_ELEMENT_HANDLING&&On(De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(U.attributeNameCheck=De.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),De.CUSTOM_ELEMENT_HANDLING&&typeof De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(U.allowCustomizedBuiltInElements=De.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),He&&(ce=!1),Ee&&(ve=!0),mt&&(H=Dn({},$I),R=[],mt.html===!0&&(Dn(H,qI),Dn(R,zI)),mt.svg===!0&&(Dn(H,Nj),Dn(R,Sj),Dn(R,Ov)),mt.svgFilters===!0&&(Dn(H,jj),Dn(R,Sj),Dn(R,Ov)),mt.mathMl===!0&&(Dn(H,kj),Dn(R,HI),Dn(R,Ov))),De.ADD_TAGS&&(typeof De.ADD_TAGS=="function"?he.tagCheck=De.ADD_TAGS:(H===O&&(H=ud(H)),Dn(H,De.ADD_TAGS,kr))),De.ADD_ATTR&&(typeof De.ADD_ATTR=="function"?he.attributeCheck=De.ADD_ATTR:(R===W&&(R=ud(R)),Dn(R,De.ADD_ATTR,kr))),De.ADD_URI_SAFE_ATTR&&Dn(lt,De.ADD_URI_SAFE_ATTR,kr),De.FORBID_CONTENTS&&(kt===Re&&(kt=ud(kt)),Dn(kt,De.FORBID_CONTENTS,kr)),De.ADD_FORBID_CONTENTS&&(kt===Re&&(kt=ud(kt)),Dn(kt,De.ADD_FORBID_CONTENTS,kr)),Be&&(H["#text"]=!0),fe&&Dn(H,["html","head","body"]),H.table&&(Dn(H,["tbody"]),delete K.tbody),De.TRUSTED_TYPES_POLICY){if(typeof De.TRUSTED_TYPES_POLICY.createHTML!="function")throw Em('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof De.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Em('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=De.TRUSTED_TYPES_POLICY,S=w.createHTML("")}else w===void 0&&(w=Yve(p,s)),w!==null&&typeof S=="string"&&(S=w.createHTML(""));Nl&&Nl(De),Gr=De}},Yn=Dn({},[...Nj,...jj,...Bve]),on=Dn({},[...kj,...Uve]),Xe=function(De){let tt=j(De);(!tt||!tt.tagName)&&(tt={namespaceURI:er,tagName:"template"});const pt=Hv(De.tagName),It=Hv(tt.tagName);return bt[De.namespaceURI]?De.namespaceURI===ft?tt.namespaceURI===$t?pt==="svg":tt.namespaceURI===tr?pt==="svg"&&(It==="annotation-xml"||rr[It]):!!Yn[pt]:De.namespaceURI===tr?tt.namespaceURI===$t?pt==="math":tt.namespaceURI===ft?pt==="math"&&Lr[It]:!!on[pt]:De.namespaceURI===$t?tt.namespaceURI===ft&&!Lr[It]||tt.namespaceURI===tr&&!rr[It]?!1:!on[pt]&&(Er[pt]||!Yn[pt]):!!(or==="application/xhtml+xml"&&bt[De.namespaceURI]):!1},wt=function(De){_m(t.removed,{element:De});try{j(De).removeChild(De)}catch{g(De)}},Wt=function(De,tt){try{_m(t.removed,{attribute:tt.getAttributeNode(De),from:tt})}catch{_m(t.removed,{attribute:null,from:tt})}if(tt.removeAttribute(De),De==="is")if(ve||Ee)try{wt(tt)}catch{}else try{tt.setAttribute(De,"")}catch{}},re=function(De){let tt=null,pt=null;if(we)De="<remove></remove>"+De;else{const vr=wj(De,/^[\r\n\t ]+/);pt=vr&&vr[0]}or==="application/xhtml+xml"&&er===$t&&(De='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+De+"</body></html>");const It=w?w.createHTML(De):De;if(er===$t)try{tt=new m().parseFromString(It,or)}catch{}if(!tt||!tt.documentElement){tt=P.createDocument(er,"template",null);try{tt.documentElement.innerHTML=qe?S:It}catch{}}const Mt=tt.body||tt.documentElement;return De&&pt&&Mt.insertBefore(r.createTextNode(pt),Mt.childNodes[0]||null),er===$t?I.call(tt,fe?"html":"body")[0]:fe?tt.documentElement:Mt},me=function(De){return A.call(De.ownerDocument||De,De,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},ye=function(De){return De instanceof d&&(typeof De.nodeName!="string"||typeof De.textContent!="string"||typeof De.removeChild!="function"||!(De.attributes instanceof f)||typeof De.removeAttribute!="function"||typeof De.setAttribute!="function"||typeof De.namespaceURI!="string"||typeof De.insertBefore!="function"||typeof De.hasChildNodes!="function")},Ae=function(De){return typeof l=="function"&&De instanceof l};function Ce(ze,De,tt){Tv(ze,pt=>{pt.call(t,De,tt,Gr)})}const Oe=function(De){let tt=null;if(Ce(E.beforeSanitizeElements,De,null),ye(De))return wt(De),!0;const pt=kr(De.nodeName);if(Ce(E.uponSanitizeElement,De,{tagName:pt,allowedTags:H}),Fe&&De.hasChildNodes()&&!Ae(De.firstElementChild)&&fl(/<[/\w!]/g,De.innerHTML)&&fl(/<[/\w!]/g,De.textContent)||De.nodeType===Tm.progressingInstruction||Fe&&De.nodeType===Tm.comment&&fl(/<[/\w]/g,De.data))return wt(De),!0;if(!(he.tagCheck instanceof Function&&he.tagCheck(pt))&&(!H[pt]||K[pt])){if(!K[pt]&&ct(pt)&&(U.tagNameCheck instanceof RegExp&&fl(U.tagNameCheck,pt)||U.tagNameCheck instanceof Function&&U.tagNameCheck(pt)))return!1;if(Be&&!kt[pt]){const It=j(De)||De.parentNode,Mt=N(De)||De.childNodes;if(Mt&&It){const vr=Mt.length;for(let Ur=vr-1;Ur>=0;--Ur){const sn=v(Mt[Ur],!0);sn.__removalCount=(De.__removalCount||0)+1,It.insertBefore(sn,b(De))}}}return wt(De),!0}return De instanceof c&&!Xe(De)||(pt==="noscript"||pt==="noembed"||pt==="noframes")&&fl(/<\/no(script|embed|frames)/i,De.innerHTML)?(wt(De),!0):(He&&De.nodeType===Tm.text&&(tt=De.textContent,Tv([C,M,q],It=>{tt=Am(tt,It," ")}),De.textContent!==tt&&(_m(t.removed,{element:De.cloneNode()}),De.textContent=tt)),Ce(E.afterSanitizeElements,De,null),!1)},Ke=function(De,tt,pt){if(ue&&(tt==="id"||tt==="name")&&(pt in r||pt in hn))return!1;if(!(ce&&!oe[tt]&&fl(G,tt))){if(!(ie&&fl(Z,tt))){if(!(he.attributeCheck instanceof Function&&he.attributeCheck(tt,De))){if(!R[tt]||oe[tt]){if(!(ct(De)&&(U.tagNameCheck instanceof RegExp&&fl(U.tagNameCheck,De)||U.tagNameCheck instanceof Function&&U.tagNameCheck(De))&&(U.attributeNameCheck instanceof RegExp&&fl(U.attributeNameCheck,tt)||U.attributeNameCheck instanceof Function&&U.attributeNameCheck(tt,De))||tt==="is"&&U.allowCustomizedBuiltInElements&&(U.tagNameCheck instanceof RegExp&&fl(U.tagNameCheck,pt)||U.tagNameCheck instanceof Function&&U.tagNameCheck(pt))))return!1}else if(!lt[tt]){if(!fl(ee,Am(pt,ne,""))){if(!((tt==="src"||tt==="xlink:href"||tt==="href")&&De!=="script"&&Lve(pt,"data:")===0&&gt[De])){if(!(Le&&!fl(te,Am(pt,ne,"")))){if(pt)return!1}}}}}}}return!0},ct=function(De){return De!=="annotation-xml"&&wj(De,J)},Ge=function(De){Ce(E.beforeSanitizeAttributes,De,null);const{attributes:tt}=De;if(!tt||ye(De))return;const pt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R,forceKeepAttr:void 0};let It=tt.length;for(;It--;){const Mt=tt[It],{name:vr,namespaceURI:Ur,value:sn}=Mt,En=kr(vr),ls=sn;let vn=vr==="value"?ls:Fve(ls);if(pt.attrName=En,pt.attrValue=vn,pt.keepAttr=!0,pt.forceKeepAttr=void 0,Ce(E.uponSanitizeAttribute,De,pt),vn=pt.attrValue,Pe&&(En==="id"||En==="name")&&(Wt(vr,De),vn=Ne+vn),Fe&&fl(/((--!?|])>)|<\/(style|title|textarea)/i,vn)){Wt(vr,De);continue}if(En==="attributename"&&wj(vn,"href")){Wt(vr,De);continue}if(pt.forceKeepAttr)continue;if(!pt.keepAttr){Wt(vr,De);continue}if(!le&&fl(/\/>/i,vn)){Wt(vr,De);continue}He&&Tv([C,M,q],Fn=>{vn=Am(vn,Fn," ")});const xa=kr(De.nodeName);if(!Ke(xa,En,vn)){Wt(vr,De);continue}if(w&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Ur)switch(p.getAttributeType(xa,En)){case"TrustedHTML":{vn=w.createHTML(vn);break}case"TrustedScriptURL":{vn=w.createScriptURL(vn);break}}if(vn!==ls)try{Ur?De.setAttributeNS(Ur,vr,vn):De.setAttribute(vr,vn),ye(De)?wt(De):UI(t.removed)}catch{Wt(vr,De)}}Ce(E.afterSanitizeAttributes,De,null)},Je=function ze(De){let tt=null;const pt=me(De);for(Ce(E.beforeSanitizeShadowDOM,De,null);tt=pt.nextNode();)Ce(E.uponSanitizeShadowNode,tt,null),Oe(tt),Ge(tt),tt.content instanceof i&&ze(tt.content);Ce(E.afterSanitizeShadowDOM,De,null)};return t.sanitize=function(ze){let De=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},tt=null,pt=null,It=null,Mt=null;if(qe=!ze,qe&&(ze="<!-->"),typeof ze!="string"&&!Ae(ze))if(typeof ze.toString=="function"){if(ze=ze.toString(),typeof ze!="string")throw Em("dirty is not a string, aborting")}else throw Em("toString is not a function");if(!t.isSupported)return ze;if(Q||br(De),t.removed=[],typeof ze=="string"&&(nt=!1),nt){if(ze.nodeName){const sn=kr(ze.nodeName);if(!H[sn]||K[sn])throw Em("root node is forbidden and cannot be sanitized in-place")}}else if(ze instanceof l)tt=re("<!---->"),pt=tt.ownerDocument.importNode(ze,!0),pt.nodeType===Tm.element&&pt.nodeName==="BODY"||pt.nodeName==="HTML"?tt=pt:tt.appendChild(pt);else{if(!ve&&!He&&!fe&&ze.indexOf("<")===-1)return w&&pe?w.createHTML(ze):ze;if(tt=re(ze),!tt)return ve?null:pe?S:""}tt&&we&&wt(tt.firstChild);const vr=me(nt?ze:tt);for(;It=vr.nextNode();)Oe(It),Ge(It),It.content instanceof i&&Je(It.content);if(nt)return ze;if(ve){if(Ee)for(Mt=T.call(tt.ownerDocument);tt.firstChild;)Mt.appendChild(tt.firstChild);else Mt=tt;return(R.shadowroot||R.shadowrootmode)&&(Mt=B.call(n,Mt,!0)),Mt}let Ur=fe?tt.outerHTML:tt.innerHTML;return fe&&H["!doctype"]&&tt.ownerDocument&&tt.ownerDocument.doctype&&tt.ownerDocument.doctype.name&&fl(I9,tt.ownerDocument.doctype.name)&&(Ur="<!DOCTYPE "+tt.ownerDocument.doctype.name+`>
`+Ur),He&&Tv([C,M,q],sn=>{Ur=Am(Ur,sn," ")}),w&&pe?w.createHTML(Ur):Ur},t.setConfig=function(){let ze=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};br(ze),Q=!0},t.clearConfig=function(){Gr=null,Q=!1},t.isValidAttribute=function(ze,De,tt){Gr||br({});const pt=kr(ze),It=kr(De);return Ke(pt,It,tt)},t.addHook=function(ze,De){typeof De=="function"&&_m(E[ze],De)},t.removeHook=function(ze,De){if(De!==void 0){const tt=Ive(E[ze],De);return tt===-1?void 0:Dve(E[ze],tt,1)[0]}return UI(E[ze])},t.removeHooks=function(ze){E[ze]=[]},t.removeAllHooks=function(){E=VI()},t}var GI=D9(),Wv={exports:{}};var Jve=Wv.exports,KI;function Qve(){return KI||(KI=1,(function(e,t){(function(n,s){e.exports=s()})(typeof self<"u"?self:Jve,function(){return(function(r){var n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=n,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=109)})([(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(17),o=s(18),l=s(19),c=s(45),u=s(46),f=s(47),d=s(48),m=s(49),p=s(12),y=s(32),v=s(33),g=s(31),b=s(1),N={Scope:b.Scope,create:b.create,find:b.find,query:b.query,register:b.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:d.default,Scroll:c.default,Block:f.default,Inline:u.default,Text:m.default,Attributor:{Attribute:p.default,Class:y.default,Style:v.default,Store:g.default}};n.default=N}),(function(r,n,s){var i=this&&this.__extends||(function(){var g=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,N){b.__proto__=N}||function(b,N){for(var j in N)N.hasOwnProperty(j)&&(b[j]=N[j])};return function(b,N){g(b,N);function j(){this.constructor=b}b.prototype=N===null?Object.create(N):(j.prototype=N.prototype,new j)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=(function(g){i(b,g);function b(N){var j=this;return N="[Parchment] "+N,j=g.call(this,N)||this,j.message=N,j.name=j.constructor.name,j}return b})(Error);n.ParchmentError=o;var l={},c={},u={},f={};n.DATA_KEY="__blot";var d;(function(g){g[g.TYPE=3]="TYPE",g[g.LEVEL=12]="LEVEL",g[g.ATTRIBUTE=13]="ATTRIBUTE",g[g.BLOT=14]="BLOT",g[g.INLINE=7]="INLINE",g[g.BLOCK=11]="BLOCK",g[g.BLOCK_BLOT=10]="BLOCK_BLOT",g[g.INLINE_BLOT=6]="INLINE_BLOT",g[g.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",g[g.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",g[g.ANY=15]="ANY"})(d=n.Scope||(n.Scope={}));function m(g,b){var N=y(g);if(N==null)throw new o("Unable to create "+g+" blot");var j=N,w=g instanceof Node||g.nodeType===Node.TEXT_NODE?g:j.create(b);return new j(w,b)}n.create=m;function p(g,b){return b===void 0&&(b=!1),g==null?null:g[n.DATA_KEY]!=null?g[n.DATA_KEY].blot:b?p(g.parentNode,b):null}n.find=p;function y(g,b){b===void 0&&(b=d.ANY);var N;if(typeof g=="string")N=f[g]||l[g];else if(g instanceof Text||g.nodeType===Node.TEXT_NODE)N=f.text;else if(typeof g=="number")g&d.LEVEL&d.BLOCK?N=f.block:g&d.LEVEL&d.INLINE&&(N=f.inline);else if(g instanceof HTMLElement){var j=(g.getAttribute("class")||"").split(/\s+/);for(var w in j)if(N=c[j[w]],N)break;N=N||u[g.tagName]}return N==null?null:b&d.LEVEL&N.scope&&b&d.TYPE&N.scope?N:null}n.query=y;function v(){for(var g=[],b=0;b<arguments.length;b++)g[b]=arguments[b];if(g.length>1)return g.map(function(w){return v(w)});var N=g[0];if(typeof N.blotName!="string"&&typeof N.attrName!="string")throw new o("Invalid definition");if(N.blotName==="abstract")throw new o("Cannot register abstract class");if(f[N.blotName||N.attrName]=N,typeof N.keyName=="string")l[N.keyName]=N;else if(N.className!=null&&(c[N.className]=N),N.tagName!=null){Array.isArray(N.tagName)?N.tagName=N.tagName.map(function(w){return w.toUpperCase()}):N.tagName=N.tagName.toUpperCase();var j=Array.isArray(N.tagName)?N.tagName:[N.tagName];j.forEach(function(w){(u[w]==null||N.className==null)&&(u[w]=N)})}return N}n.register=v}),(function(r,n,s){var i=s(51),o=s(11),l=s(3),c=s(20),u="\0",f=function(d){Array.isArray(d)?this.ops=d:d!=null&&Array.isArray(d.ops)?this.ops=d.ops:this.ops=[]};f.prototype.insert=function(d,m){var p={};return d.length===0?this:(p.insert=d,m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p))},f.prototype.delete=function(d){return d<=0?this:this.push({delete:d})},f.prototype.retain=function(d,m){if(d<=0)return this;var p={retain:d};return m!=null&&typeof m=="object"&&Object.keys(m).length>0&&(p.attributes=m),this.push(p)},f.prototype.push=function(d){var m=this.ops.length,p=this.ops[m-1];if(d=l(!0,{},d),typeof p=="object"){if(typeof d.delete=="number"&&typeof p.delete=="number")return this.ops[m-1]={delete:p.delete+d.delete},this;if(typeof p.delete=="number"&&d.insert!=null&&(m-=1,p=this.ops[m-1],typeof p!="object"))return this.ops.unshift(d),this;if(o(d.attributes,p.attributes)){if(typeof d.insert=="string"&&typeof p.insert=="string")return this.ops[m-1]={insert:p.insert+d.insert},typeof d.attributes=="object"&&(this.ops[m-1].attributes=d.attributes),this;if(typeof d.retain=="number"&&typeof p.retain=="number")return this.ops[m-1]={retain:p.retain+d.retain},typeof d.attributes=="object"&&(this.ops[m-1].attributes=d.attributes),this}}return m===this.ops.length?this.ops.push(d):this.ops.splice(m,0,d),this},f.prototype.chop=function(){var d=this.ops[this.ops.length-1];return d&&d.retain&&!d.attributes&&this.ops.pop(),this},f.prototype.filter=function(d){return this.ops.filter(d)},f.prototype.forEach=function(d){this.ops.forEach(d)},f.prototype.map=function(d){return this.ops.map(d)},f.prototype.partition=function(d){var m=[],p=[];return this.forEach(function(y){var v=d(y)?m:p;v.push(y)}),[m,p]},f.prototype.reduce=function(d,m){return this.ops.reduce(d,m)},f.prototype.changeLength=function(){return this.reduce(function(d,m){return m.insert?d+c.length(m):m.delete?d-m.delete:d},0)},f.prototype.length=function(){return this.reduce(function(d,m){return d+c.length(m)},0)},f.prototype.slice=function(d,m){d=d||0,typeof m!="number"&&(m=1/0);for(var p=[],y=c.iterator(this.ops),v=0;v<m&&y.hasNext();){var g;v<d?g=y.next(d-v):(g=y.next(m-v),p.push(g)),v+=c.length(g)}return new f(p)},f.prototype.compose=function(d){var m=c.iterator(this.ops),p=c.iterator(d.ops),y=[],v=p.peek();if(v!=null&&typeof v.retain=="number"&&v.attributes==null){for(var g=v.retain;m.peekType()==="insert"&&m.peekLength()<=g;)g-=m.peekLength(),y.push(m.next());v.retain-g>0&&p.next(v.retain-g)}for(var b=new f(y);m.hasNext()||p.hasNext();)if(p.peekType()==="insert")b.push(p.next());else if(m.peekType()==="delete")b.push(m.next());else{var N=Math.min(m.peekLength(),p.peekLength()),j=m.next(N),w=p.next(N);if(typeof w.retain=="number"){var S={};typeof j.retain=="number"?S.retain=N:S.insert=j.insert;var P=c.attributes.compose(j.attributes,w.attributes,typeof j.retain=="number");if(P&&(S.attributes=P),b.push(S),!p.hasNext()&&o(b.ops[b.ops.length-1],S)){var A=new f(m.rest());return b.concat(A).chop()}}else typeof w.delete=="number"&&typeof j.retain=="number"&&b.push(w)}return b.chop()},f.prototype.concat=function(d){var m=new f(this.ops.slice());return d.ops.length>0&&(m.push(d.ops[0]),m.ops=m.ops.concat(d.ops.slice(1))),m},f.prototype.diff=function(d,m){if(this.ops===d.ops)return new f;var p=[this,d].map(function(N){return N.map(function(j){if(j.insert!=null)return typeof j.insert=="string"?j.insert:u;var w=N===d?"on":"with";throw new Error("diff() called "+w+" non-document")}).join("")}),y=new f,v=i(p[0],p[1],m),g=c.iterator(this.ops),b=c.iterator(d.ops);return v.forEach(function(N){for(var j=N[1].length;j>0;){var w=0;switch(N[0]){case i.INSERT:w=Math.min(b.peekLength(),j),y.push(b.next(w));break;case i.DELETE:w=Math.min(j,g.peekLength()),g.next(w),y.delete(w);break;case i.EQUAL:w=Math.min(g.peekLength(),b.peekLength(),j);var S=g.next(w),P=b.next(w);o(S.insert,P.insert)?y.retain(w,c.attributes.diff(S.attributes,P.attributes)):y.push(P).delete(w);break}j-=w}}),y.chop()},f.prototype.eachLine=function(d,m){m=m||`
`;for(var p=c.iterator(this.ops),y=new f,v=0;p.hasNext();){if(p.peekType()!=="insert")return;var g=p.peek(),b=c.length(g)-p.peekLength(),N=typeof g.insert=="string"?g.insert.indexOf(m,b)-b:-1;if(N<0)y.push(p.next());else if(N>0)y.push(p.next(N));else{if(d(y,p.next(1).attributes||{},v)===!1)return;v+=1,y=new f}}y.length()>0&&d(y,{},v)},f.prototype.transform=function(d,m){if(m=!!m,typeof d=="number")return this.transformPosition(d,m);for(var p=c.iterator(this.ops),y=c.iterator(d.ops),v=new f;p.hasNext()||y.hasNext();)if(p.peekType()==="insert"&&(m||y.peekType()!=="insert"))v.retain(c.length(p.next()));else if(y.peekType()==="insert")v.push(y.next());else{var g=Math.min(p.peekLength(),y.peekLength()),b=p.next(g),N=y.next(g);if(b.delete)continue;N.delete?v.push(N):v.retain(g,c.attributes.transform(b.attributes,N.attributes,m))}return v.chop()},f.prototype.transformPosition=function(d,m){m=!!m;for(var p=c.iterator(this.ops),y=0;p.hasNext()&&y<=d;){var v=p.peekLength(),g=p.peekType();if(p.next(),g==="delete"){d-=Math.min(v,d-y);continue}else g==="insert"&&(y<d||!m)&&(d+=v);y+=v}return d},r.exports=f}),(function(r,n){var s=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(p){return typeof Array.isArray=="function"?Array.isArray(p):i.call(p)==="[object Array]"},u=function(p){if(!p||i.call(p)!=="[object Object]")return!1;var y=s.call(p,"constructor"),v=p.constructor&&p.constructor.prototype&&s.call(p.constructor.prototype,"isPrototypeOf");if(p.constructor&&!y&&!v)return!1;var g;for(g in p);return typeof g>"u"||s.call(p,g)},f=function(p,y){o&&y.name==="__proto__"?o(p,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):p[y.name]=y.newValue},d=function(p,y){if(y==="__proto__")if(s.call(p,y)){if(l)return l(p,y).value}else return;return p[y]};r.exports=function m(){var p,y,v,g,b,N,j=arguments[0],w=1,S=arguments.length,P=!1;for(typeof j=="boolean"&&(P=j,j=arguments[1]||{},w=2),(j==null||typeof j!="object"&&typeof j!="function")&&(j={});w<S;++w)if(p=arguments[w],p!=null)for(y in p)v=d(j,y),g=d(p,y),j!==g&&(P&&g&&(u(g)||(b=c(g)))?(b?(b=!1,N=v&&c(v)?v:[]):N=v&&u(v)?v:{},f(j,{name:y,newValue:m(P,N,g)})):typeof g<"u"&&f(j,{name:y,newValue:g}));return j}}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var i=(function(){function E(C,M){for(var q=0;q<M.length;q++){var G=M[q];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(C,G.key,G)}}return function(C,M,q){return M&&E(C.prototype,M),q&&E(C,q),C}})(),o=function E(C,M,q){C===null&&(C=Function.prototype);var G=Object.getOwnPropertyDescriptor(C,M);if(G===void 0){var Z=Object.getPrototypeOf(C);return Z===null?void 0:E(Z,M,q)}else{if("value"in G)return G.value;var te=G.get;return te===void 0?void 0:te.call(q)}},l=s(3),c=j(l),u=s(2),f=j(u),d=s(0),m=j(d),p=s(16),y=j(p),v=s(6),g=j(v),b=s(7),N=j(b);function j(E){return E&&E.__esModule?E:{default:E}}function w(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function")}function S(E,C){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:E}function P(E,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);E.prototype=Object.create(C&&C.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(E,C):E.__proto__=C)}var A=1,T=(function(E){P(C,E);function C(){return w(this,C),S(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return i(C,[{key:"attach",value:function(){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"attach",this).call(this),this.attributes=new m.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(q,G){var Z=m.default.query(q,m.default.Scope.BLOCK_ATTRIBUTE);Z!=null&&this.attributes.attribute(Z,G)}},{key:"formatAt",value:function(q,G,Z,te){this.format(Z,te)}},{key:"insertAt",value:function(q,G,Z){if(typeof G=="string"&&G.endsWith(`
`)){var te=m.default.create(I.blotName);this.parent.insertBefore(te,q===0?this:this.next),te.insertAt(0,G.slice(0,-1))}else o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,q,G,Z)}}]),C})(m.default.Embed);T.scope=m.default.Scope.BLOCK_BLOT;var I=(function(E){P(C,E);function C(M){w(this,C);var q=S(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,M));return q.cache={},q}return i(C,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(m.default.Leaf).reduce(function(q,G){return G.length()===0?q:q.insert(G.value(),B(G))},new f.default).insert(`
`,B(this))),this.cache.delta}},{key:"deleteAt",value:function(q,G){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,q,G),this.cache={}}},{key:"formatAt",value:function(q,G,Z,te){G<=0||(m.default.query(Z,m.default.Scope.BLOCK)?q+G===this.length()&&this.format(Z,te):o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,q,Math.min(G,this.length()-q-1),Z,te),this.cache={})}},{key:"insertAt",value:function(q,G,Z){if(Z!=null)return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,q,G,Z);if(G.length!==0){var te=G.split(`
`),ne=te.shift();ne.length>0&&(q<this.length()-1||this.children.tail==null?o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,Math.min(q,this.length()-1),ne):this.children.tail.insertAt(this.children.tail.length(),ne),this.cache={});var J=this;te.reduce(function(ee,H){return J=J.split(ee,!0),J.insertAt(0,H),H.length},q+ne.length)}}},{key:"insertBefore",value:function(q,G){var Z=this.children.head;o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,q,G),Z instanceof y.default&&Z.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(q,G){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"moveChildren",this).call(this,q,G),this.cache={}}},{key:"optimize",value:function(q){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,q),this.cache={}}},{key:"path",value:function(q){return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,q,!0)}},{key:"removeChild",value:function(q){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"removeChild",this).call(this,q),this.cache={}}},{key:"split",value:function(q){var G=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(G&&(q===0||q>=this.length()-A)){var Z=this.clone();return q===0?(this.parent.insertBefore(Z,this),this):(this.parent.insertBefore(Z,this.next),Z)}else{var te=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"split",this).call(this,q,G);return this.cache={},te}}}]),C})(m.default.Block);I.blotName="block",I.tagName="P",I.defaultChild="break",I.allowedChildren=[g.default,m.default.Embed,N.default];function B(E){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return E==null||(typeof E.formats=="function"&&(C=(0,c.default)(C,E.formats())),E.parent==null||E.parent.blotName=="scroll"||E.parent.statics.scope!==E.statics.scope)?C:B(E.parent,C)}n.bubbleFormats=B,n.BlockEmbed=T,n.default=I}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},o=(function(){function J(ee,H){var O=[],R=!0,W=!1,U=void 0;try{for(var K=ee[Symbol.iterator](),oe;!(R=(oe=K.next()).done)&&(O.push(oe.value),!(H&&O.length===H));R=!0);}catch(he){W=!0,U=he}finally{try{!R&&K.return&&K.return()}finally{if(W)throw U}}return O}return function(ee,H){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return J(ee,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function J(ee,H){for(var O=0;O<H.length;O++){var R=H[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ee,R.key,R)}}return function(ee,H,O){return H&&J(ee.prototype,H),O&&J(ee,O),ee}})();s(50);var c=s(2),u=B(c),f=s(14),d=B(f),m=s(8),p=B(m),y=s(9),v=B(y),g=s(0),b=B(g),N=s(15),j=B(N),w=s(3),S=B(w),P=s(10),A=B(P),T=s(34),I=B(T);function B(J){return J&&J.__esModule?J:{default:J}}function E(J,ee,H){return ee in J?Object.defineProperty(J,ee,{value:H,enumerable:!0,configurable:!0,writable:!0}):J[ee]=H,J}function C(J,ee){if(!(J instanceof ee))throw new TypeError("Cannot call a class as a function")}var M=(0,A.default)("quill"),q=(function(){l(J,null,[{key:"debug",value:function(H){H===!0&&(H="log"),A.default.level(H)}},{key:"find",value:function(H){return H.__quill||b.default.find(H)}},{key:"import",value:function(H){return this.imports[H]==null&&M.error("Cannot import "+H+". Are you sure it was registered?"),this.imports[H]}},{key:"register",value:function(H,O){var R=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof H!="string"){var U=H.attrName||H.blotName;typeof U=="string"?this.register("formats/"+U,H,O):Object.keys(H).forEach(function(K){R.register(K,H[K],O)})}else this.imports[H]!=null&&!W&&M.warn("Overwriting "+H+" with",O),this.imports[H]=O,(H.startsWith("blots/")||H.startsWith("formats/"))&&O.blotName!=="abstract"?b.default.register(O):H.startsWith("modules")&&typeof O.register=="function"&&O.register()}}]);function J(ee){var H=this,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(C(this,J),this.options=G(ee,O),this.container=this.options.container,this.container==null)return M.error("Invalid Quill container",ee);this.options.debug&&J.debug(this.options.debug);var R=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new p.default,this.scroll=b.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new d.default(this.scroll),this.selection=new j.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(p.default.events.EDITOR_CHANGE,function(U){U===p.default.events.TEXT_CHANGE&&H.root.classList.toggle("ql-blank",H.editor.isBlank())}),this.emitter.on(p.default.events.SCROLL_UPDATE,function(U,K){var oe=H.selection.lastRange,he=oe&&oe.length===0?oe.index:void 0;Z.call(H,function(){return H.editor.update(null,K,he)},U)});var W=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+R+"<p><br></p></div>");this.setContents(W),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(J,[{key:"addContainer",value:function(H){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof H=="string"){var R=H;H=document.createElement("div"),H.classList.add(R)}return this.container.insertBefore(H,O),H}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(H,O,R){var W=this,U=te(H,O,R),K=o(U,4);return H=K[0],O=K[1],R=K[3],Z.call(this,function(){return W.editor.deleteText(H,O)},R,H,-1*O)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(H),this.container.classList.toggle("ql-disabled",!H)}},{key:"focus",value:function(){var H=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=H,this.scrollIntoView()}},{key:"format",value:function(H,O){var R=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:p.default.sources.API;return Z.call(this,function(){var U=R.getSelection(!0),K=new u.default;if(U==null)return K;if(b.default.query(H,b.default.Scope.BLOCK))K=R.editor.formatLine(U.index,U.length,E({},H,O));else{if(U.length===0)return R.selection.format(H,O),K;K=R.editor.formatText(U.index,U.length,E({},H,O))}return R.setSelection(U,p.default.sources.SILENT),K},W)}},{key:"formatLine",value:function(H,O,R,W,U){var K=this,oe=void 0,he=te(H,O,R,W,U),ie=o(he,4);return H=ie[0],O=ie[1],oe=ie[2],U=ie[3],Z.call(this,function(){return K.editor.formatLine(H,O,oe)},U,H,0)}},{key:"formatText",value:function(H,O,R,W,U){var K=this,oe=void 0,he=te(H,O,R,W,U),ie=o(he,4);return H=ie[0],O=ie[1],oe=ie[2],U=ie[3],Z.call(this,function(){return K.editor.formatText(H,O,oe)},U,H,0)}},{key:"getBounds",value:function(H){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=void 0;typeof H=="number"?R=this.selection.getBounds(H,O):R=this.selection.getBounds(H.index,H.length);var W=this.container.getBoundingClientRect();return{bottom:R.bottom-W.top,height:R.height,left:R.left-W.left,right:R.right-W.left,top:R.top-W.top,width:R.width}}},{key:"getContents",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-H,R=te(H,O),W=o(R,2);return H=W[0],O=W[1],this.editor.getContents(H,O)}},{key:"getFormat",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof H=="number"?this.editor.getFormat(H,O):this.editor.getFormat(H.index,H.length)}},{key:"getIndex",value:function(H){return H.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(H){return this.scroll.leaf(H)}},{key:"getLine",value:function(H){return this.scroll.line(H)}},{key:"getLines",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof H!="number"?this.scroll.lines(H.index,H.length):this.scroll.lines(H,O)}},{key:"getModule",value:function(H){return this.theme.modules[H]}},{key:"getSelection",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return H&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-H,R=te(H,O),W=o(R,2);return H=W[0],O=W[1],this.editor.getText(H,O)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(H,O,R){var W=this,U=arguments.length>3&&arguments[3]!==void 0?arguments[3]:J.sources.API;return Z.call(this,function(){return W.editor.insertEmbed(H,O,R)},U,H)}},{key:"insertText",value:function(H,O,R,W,U){var K=this,oe=void 0,he=te(H,0,R,W,U),ie=o(he,4);return H=ie[0],oe=ie[2],U=ie[3],Z.call(this,function(){return K.editor.insertText(H,O,oe)},U,H,O.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(H,O,R){this.clipboard.dangerouslyPasteHTML(H,O,R)}},{key:"removeFormat",value:function(H,O,R){var W=this,U=te(H,O,R),K=o(U,4);return H=K[0],O=K[1],R=K[3],Z.call(this,function(){return W.editor.removeFormat(H,O)},R,H)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(H){var O=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Z.call(this,function(){H=new u.default(H);var W=O.getLength(),U=O.editor.deleteText(0,W),K=O.editor.applyDelta(H),oe=K.ops[K.ops.length-1];oe!=null&&typeof oe.insert=="string"&&oe.insert[oe.insert.length-1]===`
`&&(O.editor.deleteText(O.getLength()-1,1),K.delete(1));var he=U.compose(K);return he},R)}},{key:"setSelection",value:function(H,O,R){if(H==null)this.selection.setRange(null,O||J.sources.API);else{var W=te(H,O,R),U=o(W,4);H=U[0],O=U[1],R=U[3],this.selection.setRange(new N.Range(H,O),R),R!==p.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(H){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API,R=new u.default().insert(H);return this.setContents(R,O)}},{key:"update",value:function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p.default.sources.USER,O=this.scroll.update(H);return this.selection.update(H),O}},{key:"updateContents",value:function(H){var O=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p.default.sources.API;return Z.call(this,function(){return H=new u.default(H),O.editor.applyDelta(H,R)},R,!0)}}]),J})();q.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},q.events=p.default.events,q.sources=p.default.sources,q.version="1.3.7",q.imports={delta:u.default,parchment:b.default,"core/module":v.default,"core/theme":I.default};function G(J,ee){if(ee=(0,S.default)(!0,{container:J,modules:{clipboard:!0,keyboard:!0,history:!0}},ee),!ee.theme||ee.theme===q.DEFAULTS.theme)ee.theme=I.default;else if(ee.theme=q.import("themes/"+ee.theme),ee.theme==null)throw new Error("Invalid theme "+ee.theme+". Did you register it?");var H=(0,S.default)(!0,{},ee.theme.DEFAULTS);[H,ee].forEach(function(W){W.modules=W.modules||{},Object.keys(W.modules).forEach(function(U){W.modules[U]===!0&&(W.modules[U]={})})});var O=Object.keys(H.modules).concat(Object.keys(ee.modules)),R=O.reduce(function(W,U){var K=q.import("modules/"+U);return K==null?M.error("Cannot load "+U+" module. Are you sure you registered it?"):W[U]=K.DEFAULTS||{},W},{});return ee.modules!=null&&ee.modules.toolbar&&ee.modules.toolbar.constructor!==Object&&(ee.modules.toolbar={container:ee.modules.toolbar}),ee=(0,S.default)(!0,{},q.DEFAULTS,{modules:R},H,ee),["bounds","container","scrollingContainer"].forEach(function(W){typeof ee[W]=="string"&&(ee[W]=document.querySelector(ee[W]))}),ee.modules=Object.keys(ee.modules).reduce(function(W,U){return ee.modules[U]&&(W[U]=ee.modules[U]),W},{}),ee}function Z(J,ee,H,O){if(this.options.strict&&!this.isEnabled()&&ee===p.default.sources.USER)return new u.default;var R=H==null?null:this.getSelection(),W=this.editor.delta,U=J();if(R!=null&&(H===!0&&(H=R.index),O==null?R=ne(R,U,ee):O!==0&&(R=ne(R,H,O,ee)),this.setSelection(R,p.default.sources.SILENT)),U.length()>0){var K,oe=[p.default.events.TEXT_CHANGE,U,W,ee];if((K=this.emitter).emit.apply(K,[p.default.events.EDITOR_CHANGE].concat(oe)),ee!==p.default.sources.SILENT){var he;(he=this.emitter).emit.apply(he,oe)}}return U}function te(J,ee,H,O,R){var W={};return typeof J.index=="number"&&typeof J.length=="number"?typeof ee!="number"?(R=O,O=H,H=ee,ee=J.length,J=J.index):(ee=J.length,J=J.index):typeof ee!="number"&&(R=O,O=H,H=ee,ee=0),(typeof H>"u"?"undefined":i(H))==="object"?(W=H,R=O):typeof H=="string"&&(O!=null?W[H]=O:R=H),R=R||p.default.sources.API,[J,ee,W,R]}function ne(J,ee,H,O){if(J==null)return null;var R=void 0,W=void 0;if(ee instanceof u.default){var U=[J.index,J.index+J.length].map(function(ie){return ee.transformPosition(ie,O!==p.default.sources.USER)}),K=o(U,2);R=K[0],W=K[1]}else{var oe=[J.index,J.index+J.length].map(function(ie){return ie<ee||ie===ee&&O===p.default.sources.USER?ie:H>=0?ie+H:Math.max(ee,ie+H)}),he=o(oe,2);R=he[0],W=he[1]}return new N.Range(R,W-R)}n.expandConfig=G,n.overload=te,n.default=q}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function g(b,N){for(var j=0;j<N.length;j++){var w=N[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,N,j){return N&&g(b.prototype,N),j&&g(b,j),b}})(),o=function g(b,N,j){b===null&&(b=Function.prototype);var w=Object.getOwnPropertyDescriptor(b,N);if(w===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,N,j)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(j)}},l=s(7),c=d(l),u=s(0),f=d(u);function d(g){return g&&g.__esModule?g:{default:g}}function m(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function p(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function y(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var v=(function(g){y(b,g);function b(){return m(this,b),p(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"formatAt",value:function(j,w,S,P){if(b.compare(this.statics.blotName,S)<0&&f.default.query(S,f.default.Scope.BLOT)){var A=this.isolate(j,w);P&&A.wrap(S,P)}else o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"formatAt",this).call(this,j,w,S,P)}},{key:"optimize",value:function(j){if(o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,j),this.parent instanceof b&&b.compare(this.statics.blotName,this.parent.statics.blotName)>0){var w=this.parent.isolate(this.offset(),this.length());this.moveChildren(w),w.wrap(this)}}}],[{key:"compare",value:function(j,w){var S=b.order.indexOf(j),P=b.order.indexOf(w);return S>=0||P>=0?S-P:j===w?0:j<w?-1:1}}]),b})(f.default.Inline);v.allowedChildren=[v,f.default.Embed,c.default],v.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default.Text);n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function N(j,w){for(var S=0;S<w.length;S++){var P=w[S];P.enumerable=P.enumerable||!1,P.configurable=!0,"value"in P&&(P.writable=!0),Object.defineProperty(j,P.key,P)}}return function(j,w,S){return w&&N(j.prototype,w),S&&N(j,S),j}})(),o=function N(j,w,S){j===null&&(j=Function.prototype);var P=Object.getOwnPropertyDescriptor(j,w);if(P===void 0){var A=Object.getPrototypeOf(j);return A===null?void 0:N(A,w,S)}else{if("value"in P)return P.value;var T=P.get;return T===void 0?void 0:T.call(S)}},l=s(54),c=d(l),u=s(10),f=d(u);function d(N){return N&&N.__esModule?N:{default:N}}function m(N,j){if(!(N instanceof j))throw new TypeError("Cannot call a class as a function")}function p(N,j){if(!N)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:N}function y(N,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);N.prototype=Object.create(j&&j.prototype,{constructor:{value:N,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(N,j):N.__proto__=j)}var v=(0,f.default)("quill:events"),g=["selectionchange","mousedown","mouseup","click"];g.forEach(function(N){document.addEventListener(N,function(){for(var j=arguments.length,w=Array(j),S=0;S<j;S++)w[S]=arguments[S];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(P){if(P.__quill&&P.__quill.emitter){var A;(A=P.__quill.emitter).handleDOM.apply(A,w)}})})});var b=(function(N){y(j,N);function j(){m(this,j);var w=p(this,(j.__proto__||Object.getPrototypeOf(j)).call(this));return w.listeners={},w.on("error",v.error),w}return i(j,[{key:"emit",value:function(){v.log.apply(v,arguments),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(S){for(var P=arguments.length,A=Array(P>1?P-1:0),T=1;T<P;T++)A[T-1]=arguments[T];(this.listeners[S.type]||[]).forEach(function(I){var B=I.node,E=I.handler;(S.target===B||B.contains(S.target))&&E.apply(void 0,[S].concat(A))})}},{key:"listenDOM",value:function(S,P,A){this.listeners[S]||(this.listeners[S]=[]),this.listeners[S].push({node:P,handler:A})}}]),j})(c.default);b.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},b.sources={API:"api",SILENT:"silent",USER:"user"},n.default=b}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=c,this.options=u};o.DEFAULTS={},n.default=o}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(u){if(i.indexOf(u)<=i.indexOf(o)){for(var f,d=arguments.length,m=Array(d>1?d-1:0),p=1;p<d;p++)m[p-1]=arguments[p];(f=console)[u].apply(f,m)}}function c(u){return i.reduce(function(f,d){return f[d]=l.bind(console,d,u),f},{})}l.level=c.level=function(u){o=u},n.default=c}),(function(r,n,s){var i=Array.prototype.slice,o=s(52),l=s(53),c=r.exports=function(m,p,y){return y||(y={}),m===p?!0:m instanceof Date&&p instanceof Date?m.getTime()===p.getTime():!m||!p||typeof m!="object"&&typeof p!="object"?y.strict?m===p:m==p:d(m,p,y)};function u(m){return m==null}function f(m){return!(!m||typeof m!="object"||typeof m.length!="number"||typeof m.copy!="function"||typeof m.slice!="function"||m.length>0&&typeof m[0]!="number")}function d(m,p,y){var v,g;if(u(m)||u(p)||m.prototype!==p.prototype)return!1;if(l(m))return l(p)?(m=i.call(m),p=i.call(p),c(m,p,y)):!1;if(f(m)){if(!f(p)||m.length!==p.length)return!1;for(v=0;v<m.length;v++)if(m[v]!==p[v])return!1;return!0}try{var b=o(m),N=o(p)}catch{return!1}if(b.length!=N.length)return!1;for(b.sort(),N.sort(),v=b.length-1;v>=0;v--)if(b[v]!=N[v])return!1;for(v=b.length-1;v>=0;v--)if(g=b[v],!c(m[g],p[g],y))return!1;return typeof m==typeof p}}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c,u,f){f===void 0&&(f={}),this.attrName=c,this.keyName=u;var d=i.Scope.TYPE&i.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&i.Scope.LEVEL|d:this.scope=i.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(u){return u.name})},l.prototype.add=function(c,u){return this.canAdd(c,u)?(c.setAttribute(this.keyName,u),!0):!1},l.prototype.canAdd=function(c,u){var f=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var u=c.getAttribute(this.keyName);return this.canAdd(c,u)&&u?u:""},l})();n.default=o}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var i=(function(){function T(I,B){var E=[],C=!0,M=!1,q=void 0;try{for(var G=I[Symbol.iterator](),Z;!(C=(Z=G.next()).done)&&(E.push(Z.value),!(B&&E.length===B));C=!0);}catch(te){M=!0,q=te}finally{try{!C&&G.return&&G.return()}finally{if(M)throw q}}return E}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return T(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function T(I,B){for(var E=0;E<B.length;E++){var C=B[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(I,C.key,C)}}return function(I,B,E){return B&&T(I.prototype,B),E&&T(I,E),I}})(),l=function T(I,B,E){I===null&&(I=Function.prototype);var C=Object.getOwnPropertyDescriptor(I,B);if(C===void 0){var M=Object.getPrototypeOf(I);return M===null?void 0:T(M,B,E)}else{if("value"in C)return C.value;var q=C.get;return q===void 0?void 0:q.call(E)}},c=s(2),u=N(c),f=s(0),d=N(f),m=s(4),p=N(m),y=s(6),v=N(y),g=s(7),b=N(g);function N(T){return T&&T.__esModule?T:{default:T}}function j(T,I){if(!(T instanceof I))throw new TypeError("Cannot call a class as a function")}function w(T,I){if(!T)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return I&&(typeof I=="object"||typeof I=="function")?I:T}function S(T,I){if(typeof I!="function"&&I!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof I);T.prototype=Object.create(I&&I.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),I&&(Object.setPrototypeOf?Object.setPrototypeOf(T,I):T.__proto__=I)}var P=(function(T){S(I,T);function I(){return j(this,I),w(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return I})(v.default);P.blotName="code",P.tagName="CODE";var A=(function(T){S(I,T);function I(){return j(this,I),w(this,(I.__proto__||Object.getPrototypeOf(I)).apply(this,arguments))}return o(I,[{key:"delta",value:function(){var E=this,C=this.domNode.textContent;return C.endsWith(`
`)&&(C=C.slice(0,-1)),C.split(`
`).reduce(function(M,q){return M.insert(q).insert(`
`,E.formats())},new u.default)}},{key:"format",value:function(E,C){if(!(E===this.statics.blotName&&C)){var M=this.descendant(b.default,this.length()-1),q=i(M,1),G=q[0];G?.deleteAt(G.length()-1,1),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"format",this).call(this,E,C)}}},{key:"formatAt",value:function(E,C,M,q){if(C!==0&&!(d.default.query(M,d.default.Scope.BLOCK)==null||M===this.statics.blotName&&q===this.statics.formats(this.domNode))){var G=this.newlineIndex(E);if(!(G<0||G>=E+C)){var Z=this.newlineIndex(E,!0)+1,te=G-Z+1,ne=this.isolate(Z,te),J=ne.next;ne.format(M,q),J instanceof I&&J.formatAt(0,E-Z+C-te,M,q)}}}},{key:"insertAt",value:function(E,C,M){if(M==null){var q=this.descendant(b.default,E),G=i(q,2),Z=G[0],te=G[1];Z.insertAt(te,C)}}},{key:"length",value:function(){var E=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?E:E+1}},{key:"newlineIndex",value:function(E){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(C)return this.domNode.textContent.slice(0,E).lastIndexOf(`
`);var M=this.domNode.textContent.slice(E).indexOf(`
`);return M>-1?E+M:-1}},{key:"optimize",value:function(E){this.domNode.textContent.endsWith(`
`)||this.appendChild(d.default.create("text",`
`)),l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"optimize",this).call(this,E);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===C.statics.formats(C.domNode)&&(C.optimize(E),C.moveChildren(this),C.remove())}},{key:"replace",value:function(E){l(I.prototype.__proto__||Object.getPrototypeOf(I.prototype),"replace",this).call(this,E),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(C){var M=d.default.find(C);M==null?C.parentNode.removeChild(C):M instanceof d.default.Embed?M.remove():M.unwrap()})}}],[{key:"create",value:function(E){var C=l(I.__proto__||Object.getPrototypeOf(I),"create",this).call(this,E);return C.setAttribute("spellcheck",!1),C}},{key:"formats",value:function(){return!0}}]),I})(p.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",n.Code=P,n.default=A}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(J){return typeof J}:function(J){return J&&typeof Symbol=="function"&&J.constructor===Symbol&&J!==Symbol.prototype?"symbol":typeof J},o=(function(){function J(ee,H){var O=[],R=!0,W=!1,U=void 0;try{for(var K=ee[Symbol.iterator](),oe;!(R=(oe=K.next()).done)&&(O.push(oe.value),!(H&&O.length===H));R=!0);}catch(he){W=!0,U=he}finally{try{!R&&K.return&&K.return()}finally{if(W)throw U}}return O}return function(ee,H){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return J(ee,H);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function J(ee,H){for(var O=0;O<H.length;O++){var R=H[O];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(ee,R.key,R)}}return function(ee,H,O){return H&&J(ee.prototype,H),O&&J(ee,O),ee}})(),c=s(2),u=C(c),f=s(20),d=C(f),m=s(0),p=C(m),y=s(13),v=C(y),g=s(24),b=C(g),N=s(4),j=C(N),w=s(16),S=C(w),P=s(21),A=C(P),T=s(11),I=C(T),B=s(3),E=C(B);function C(J){return J&&J.__esModule?J:{default:J}}function M(J,ee,H){return ee in J?Object.defineProperty(J,ee,{value:H,enumerable:!0,configurable:!0,writable:!0}):J[ee]=H,J}function q(J,ee){if(!(J instanceof ee))throw new TypeError("Cannot call a class as a function")}var G=/^[ -~]*$/,Z=(function(){function J(ee){q(this,J),this.scroll=ee,this.delta=this.getDelta()}return l(J,[{key:"applyDelta",value:function(H){var O=this,R=!1;this.scroll.update();var W=this.scroll.length();return this.scroll.batchStart(),H=ne(H),H.reduce(function(U,K){var oe=K.retain||K.delete||K.insert.length||1,he=K.attributes||{};if(K.insert!=null){if(typeof K.insert=="string"){var ie=K.insert;ie.endsWith(`
`)&&R&&(R=!1,ie=ie.slice(0,-1)),U>=W&&!ie.endsWith(`
`)&&(R=!0),O.scroll.insertAt(U,ie);var ce=O.scroll.line(U),Le=o(ce,2),le=Le[0],He=Le[1],Fe=(0,E.default)({},(0,N.bubbleFormats)(le));if(le instanceof j.default){var fe=le.descendant(p.default.Leaf,He),Q=o(fe,1),we=Q[0];Fe=(0,E.default)(Fe,(0,N.bubbleFormats)(we))}he=d.default.attributes.diff(Fe,he)||{}}else if(i(K.insert)==="object"){var ve=Object.keys(K.insert)[0];if(ve==null)return U;O.scroll.insertAt(U,ve,K.insert[ve])}W+=oe}return Object.keys(he).forEach(function(Ee){O.scroll.formatAt(U,oe,Ee,he[Ee])}),U+oe},0),H.reduce(function(U,K){return typeof K.delete=="number"?(O.scroll.deleteAt(U,K.delete),U):U+(K.retain||K.insert.length||1)},0),this.scroll.batchEnd(),this.update(H)}},{key:"deleteText",value:function(H,O){return this.scroll.deleteAt(H,O),this.update(new u.default().retain(H).delete(O))}},{key:"formatLine",value:function(H,O){var R=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(W).forEach(function(U){if(!(R.scroll.whitelist!=null&&!R.scroll.whitelist[U])){var K=R.scroll.lines(H,Math.max(O,1)),oe=O;K.forEach(function(he){var ie=he.length();if(!(he instanceof v.default))he.format(U,W[U]);else{var ce=H-he.offset(R.scroll),Le=he.newlineIndex(ce+oe)-ce+1;he.formatAt(ce,Le,U,W[U])}oe-=ie})}}),this.scroll.optimize(),this.update(new u.default().retain(H).retain(O,(0,A.default)(W)))}},{key:"formatText",value:function(H,O){var R=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(W).forEach(function(U){R.scroll.formatAt(H,O,U,W[U])}),this.update(new u.default().retain(H).retain(O,(0,A.default)(W)))}},{key:"getContents",value:function(H,O){return this.delta.slice(H,H+O)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(H,O){return H.concat(O.delta())},new u.default)}},{key:"getFormat",value:function(H){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=[],W=[];O===0?this.scroll.path(H).forEach(function(K){var oe=o(K,1),he=oe[0];he instanceof j.default?R.push(he):he instanceof p.default.Leaf&&W.push(he)}):(R=this.scroll.lines(H,O),W=this.scroll.descendants(p.default.Leaf,H,O));var U=[R,W].map(function(K){if(K.length===0)return{};for(var oe=(0,N.bubbleFormats)(K.shift());Object.keys(oe).length>0;){var he=K.shift();if(he==null)return oe;oe=te((0,N.bubbleFormats)(he),oe)}return oe});return E.default.apply(E.default,U)}},{key:"getText",value:function(H,O){return this.getContents(H,O).filter(function(R){return typeof R.insert=="string"}).map(function(R){return R.insert}).join("")}},{key:"insertEmbed",value:function(H,O,R){return this.scroll.insertAt(H,O,R),this.update(new u.default().retain(H).insert(M({},O,R)))}},{key:"insertText",value:function(H,O){var R=this,W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return O=O.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(H,O),Object.keys(W).forEach(function(U){R.scroll.formatAt(H,O.length,U,W[U])}),this.update(new u.default().retain(H).insert(O,(0,A.default)(W)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var H=this.scroll.children.head;return H.statics.blotName!==j.default.blotName||H.children.length>1?!1:H.children.head instanceof S.default}},{key:"removeFormat",value:function(H,O){var R=this.getText(H,O),W=this.scroll.line(H+O),U=o(W,2),K=U[0],oe=U[1],he=0,ie=new u.default;K!=null&&(K instanceof v.default?he=K.newlineIndex(oe)-oe+1:he=K.length()-oe,ie=K.delta().slice(oe,oe+he-1).insert(`
`));var ce=this.getContents(H,O+he),Le=ce.diff(new u.default().insert(R).concat(ie)),le=new u.default().retain(H).concat(Le);return this.applyDelta(le)}},{key:"update",value:function(H){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,W=this.delta;if(O.length===1&&O[0].type==="characterData"&&O[0].target.data.match(G)&&p.default.find(O[0].target)){var U=p.default.find(O[0].target),K=(0,N.bubbleFormats)(U),oe=U.offset(this.scroll),he=O[0].oldValue.replace(b.default.CONTENTS,""),ie=new u.default().insert(he),ce=new u.default().insert(U.value()),Le=new u.default().retain(oe).concat(ie.diff(ce,R));H=Le.reduce(function(le,He){return He.insert?le.insert(He.insert,K):le.push(He)},new u.default),this.delta=W.compose(H)}else this.delta=this.getDelta(),(!H||!(0,I.default)(W.compose(H),this.delta))&&(H=W.diff(this.delta,R));return H}}]),J})();function te(J,ee){return Object.keys(ee).reduce(function(H,O){return J[O]==null||(ee[O]===J[O]?H[O]=ee[O]:Array.isArray(ee[O])?ee[O].indexOf(J[O])<0&&(H[O]=ee[O].concat([J[O]])):H[O]=[ee[O],J[O]]),H},{})}function ne(J){return J.reduce(function(ee,H){if(H.insert===1){var O=(0,A.default)(H.attributes);return delete O.image,ee.insert({image:H.attributes.image},O)}if(H.attributes!=null&&(H.attributes.list===!0||H.attributes.bullet===!0)&&(H=(0,A.default)(H),H.attributes.list?H.attributes.list="ordered":(H.attributes.list="bullet",delete H.attributes.bullet)),typeof H.insert=="string"){var R=H.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return ee.insert(R,H.attributes)}return ee.push(H)},new u.default)}n.default=Z}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var i=(function(){function T(I,B){var E=[],C=!0,M=!1,q=void 0;try{for(var G=I[Symbol.iterator](),Z;!(C=(Z=G.next()).done)&&(E.push(Z.value),!(B&&E.length===B));C=!0);}catch(te){M=!0,q=te}finally{try{!C&&G.return&&G.return()}finally{if(M)throw q}}return E}return function(I,B){if(Array.isArray(I))return I;if(Symbol.iterator in Object(I))return T(I,B);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function T(I,B){for(var E=0;E<B.length;E++){var C=B[E];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(I,C.key,C)}}return function(I,B,E){return B&&T(I.prototype,B),E&&T(I,E),I}})(),l=s(0),c=b(l),u=s(21),f=b(u),d=s(11),m=b(d),p=s(8),y=b(p),v=s(10),g=b(v);function b(T){return T&&T.__esModule?T:{default:T}}function N(T){if(Array.isArray(T)){for(var I=0,B=Array(T.length);I<T.length;I++)B[I]=T[I];return B}else return Array.from(T)}function j(T,I){if(!(T instanceof I))throw new TypeError("Cannot call a class as a function")}var w=(0,g.default)("quill:selection"),S=function T(I){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;j(this,T),this.index=I,this.length=B},P=(function(){function T(I,B){var E=this;j(this,T),this.emitter=B,this.scroll=I,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new S(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){E.mouseDown||setTimeout(E.update.bind(E,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(C,M){C===y.default.events.TEXT_CHANGE&&M.length()>0&&E.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(E.hasFocus()){var C=E.getNativeRange();C!=null&&C.start.node!==E.cursor.textNode&&E.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{E.setNativeRange(C.start.node,C.start.offset,C.end.node,C.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(C,M){if(M.range){var q=M.range,G=q.startNode,Z=q.startOffset,te=q.endNode,ne=q.endOffset;E.setNativeRange(G,Z,te,ne)}}),this.update(y.default.sources.SILENT)}return o(T,[{key:"handleComposition",value:function(){var B=this;this.root.addEventListener("compositionstart",function(){B.composing=!0}),this.root.addEventListener("compositionend",function(){if(B.composing=!1,B.cursor.parent){var E=B.cursor.restore();if(!E)return;setTimeout(function(){B.setNativeRange(E.startNode,E.startOffset,E.endNode,E.endOffset)},1)}})}},{key:"handleDragging",value:function(){var B=this;this.emitter.listenDOM("mousedown",document.body,function(){B.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){B.mouseDown=!1,B.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(B,E){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[B])){this.scroll.update();var C=this.getNativeRange();if(!(C==null||!C.native.collapsed||c.default.query(B,c.default.Scope.BLOCK))){if(C.start.node!==this.cursor.textNode){var M=c.default.find(C.start.node,!1);if(M==null)return;if(M instanceof c.default.Leaf){var q=M.split(C.start.offset);M.parent.insertBefore(this.cursor,q)}else M.insertBefore(this.cursor,C.start.node);this.cursor.attach()}this.cursor.format(B,E),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(B){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=this.scroll.length();B=Math.min(B,C-1),E=Math.min(B+E,C-1)-B;var M=void 0,q=this.scroll.leaf(B),G=i(q,2),Z=G[0],te=G[1];if(Z==null)return null;var ne=Z.position(te,!0),J=i(ne,2);M=J[0],te=J[1];var ee=document.createRange();if(E>0){ee.setStart(M,te);var H=this.scroll.leaf(B+E),O=i(H,2);if(Z=O[0],te=O[1],Z==null)return null;var R=Z.position(te,!0),W=i(R,2);return M=W[0],te=W[1],ee.setEnd(M,te),ee.getBoundingClientRect()}else{var U="left",K=void 0;return M instanceof Text?(te<M.data.length?(ee.setStart(M,te),ee.setEnd(M,te+1)):(ee.setStart(M,te-1),ee.setEnd(M,te),U="right"),K=ee.getBoundingClientRect()):(K=Z.domNode.getBoundingClientRect(),te>0&&(U="right")),{bottom:K.top+K.height,height:K.height,left:K[U],right:K[U],top:K.top,width:0}}}},{key:"getNativeRange",value:function(){var B=document.getSelection();if(B==null||B.rangeCount<=0)return null;var E=B.getRangeAt(0);if(E==null)return null;var C=this.normalizeNative(E);return w.info("getNativeRange",C),C}},{key:"getRange",value:function(){var B=this.getNativeRange();if(B==null)return[null,null];var E=this.normalizedToRange(B);return[E,B]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(B){var E=this,C=[[B.start.node,B.start.offset]];B.native.collapsed||C.push([B.end.node,B.end.offset]);var M=C.map(function(Z){var te=i(Z,2),ne=te[0],J=te[1],ee=c.default.find(ne,!0),H=ee.offset(E.scroll);return J===0?H:ee instanceof c.default.Container?H+ee.length():H+ee.index(ne,J)}),q=Math.min(Math.max.apply(Math,N(M)),this.scroll.length()-1),G=Math.min.apply(Math,[q].concat(N(M)));return new S(G,q-G)}},{key:"normalizeNative",value:function(B){if(!A(this.root,B.startContainer)||!B.collapsed&&!A(this.root,B.endContainer))return null;var E={start:{node:B.startContainer,offset:B.startOffset},end:{node:B.endContainer,offset:B.endOffset},native:B};return[E.start,E.end].forEach(function(C){for(var M=C.node,q=C.offset;!(M instanceof Text)&&M.childNodes.length>0;)if(M.childNodes.length>q)M=M.childNodes[q],q=0;else if(M.childNodes.length===q)M=M.lastChild,q=M instanceof Text?M.data.length:M.childNodes.length+1;else break;C.node=M,C.offset=q}),E}},{key:"rangeToNative",value:function(B){var E=this,C=B.collapsed?[B.index]:[B.index,B.index+B.length],M=[],q=this.scroll.length();return C.forEach(function(G,Z){G=Math.min(q-1,G);var te=void 0,ne=E.scroll.leaf(G),J=i(ne,2),ee=J[0],H=J[1],O=ee.position(H,Z!==0),R=i(O,2);te=R[0],H=R[1],M.push(te,H)}),M.length<2&&(M=M.concat(M)),M}},{key:"scrollIntoView",value:function(B){var E=this.lastRange;if(E!=null){var C=this.getBounds(E.index,E.length);if(C!=null){var M=this.scroll.length()-1,q=this.scroll.line(Math.min(E.index,M)),G=i(q,1),Z=G[0],te=Z;if(E.length>0){var ne=this.scroll.line(Math.min(E.index+E.length,M)),J=i(ne,1);te=J[0]}if(!(Z==null||te==null)){var ee=B.getBoundingClientRect();C.top<ee.top?B.scrollTop-=ee.top-C.top:C.bottom>ee.bottom&&(B.scrollTop+=C.bottom-ee.bottom)}}}}},{key:"setNativeRange",value:function(B,E){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:B,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:E,q=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(w.info("setNativeRange",B,E,C,M),!(B!=null&&(this.root.parentNode==null||B.parentNode==null||C.parentNode==null))){var G=document.getSelection();if(G!=null)if(B!=null){this.hasFocus()||this.root.focus();var Z=(this.getNativeRange()||{}).native;if(Z==null||q||B!==Z.startContainer||E!==Z.startOffset||C!==Z.endContainer||M!==Z.endOffset){B.tagName=="BR"&&(E=[].indexOf.call(B.parentNode.childNodes,B),B=B.parentNode),C.tagName=="BR"&&(M=[].indexOf.call(C.parentNode.childNodes,C),C=C.parentNode);var te=document.createRange();te.setStart(B,E),te.setEnd(C,M),G.removeAllRanges(),G.addRange(te)}}else G.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(B){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof E=="string"&&(C=E,E=!1),w.info("setRange",B),B!=null){var M=this.rangeToNative(B);this.setNativeRange.apply(this,N(M).concat([E]))}else this.setNativeRange(null);this.update(C)}},{key:"update",value:function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,E=this.lastRange,C=this.getRange(),M=i(C,2),q=M[0],G=M[1];if(this.lastRange=q,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,m.default)(E,this.lastRange)){var Z;!this.composing&&G!=null&&G.native.collapsed&&G.start.node!==this.cursor.textNode&&this.cursor.restore();var te=[y.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(E),B];if((Z=this.emitter).emit.apply(Z,[y.default.events.EDITOR_CHANGE].concat(te)),B!==y.default.sources.SILENT){var ne;(ne=this.emitter).emit.apply(ne,te)}}}}]),T})();function A(T,I){try{I.parentNode}catch{return!1}return I instanceof Text&&(I=I.parentNode),T.contains(I)}n.Range=S,n.default=P}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var N=g[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,g);if(N===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(b)}},l=s(0),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"insertInto",value:function(b,N){b.children.length===0?o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"insertInto",this).call(this,b,N):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),v})(c.default.Embed);p.blotName="break",p.tagName="BR",n.default=p}),(function(r,n,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){d(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(44),l=s(30),c=s(1),u=(function(d){i(m,d);function m(p){var y=d.call(this,p)||this;return y.build(),y}return m.prototype.appendChild=function(p){this.insertBefore(p)},m.prototype.attach=function(){d.prototype.attach.call(this),this.children.forEach(function(p){p.attach()})},m.prototype.build=function(){var p=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var v=f(y);p.insertBefore(v,p.children.head||void 0)}catch(g){if(g instanceof c.ParchmentError)return;throw g}})},m.prototype.deleteAt=function(p,y){if(p===0&&y===this.length())return this.remove();this.children.forEachAt(p,y,function(v,g,b){v.deleteAt(g,b)})},m.prototype.descendant=function(p,y){var v=this.children.find(y),g=v[0],b=v[1];return p.blotName==null&&p(g)||p.blotName!=null&&g instanceof p?[g,b]:g instanceof m?g.descendant(p,b):[null,-1]},m.prototype.descendants=function(p,y,v){y===void 0&&(y=0),v===void 0&&(v=Number.MAX_VALUE);var g=[],b=v;return this.children.forEachAt(y,v,function(N,j,w){(p.blotName==null&&p(N)||p.blotName!=null&&N instanceof p)&&g.push(N),N instanceof m&&(g=g.concat(N.descendants(p,j,b))),b-=w}),g},m.prototype.detach=function(){this.children.forEach(function(p){p.detach()}),d.prototype.detach.call(this)},m.prototype.formatAt=function(p,y,v,g){this.children.forEachAt(p,y,function(b,N,j){b.formatAt(N,j,v,g)})},m.prototype.insertAt=function(p,y,v){var g=this.children.find(p),b=g[0],N=g[1];if(b)b.insertAt(N,y,v);else{var j=v==null?c.create("text",y):c.create(y,v);this.appendChild(j)}},m.prototype.insertBefore=function(p,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(v){return p instanceof v}))throw new c.ParchmentError("Cannot insert "+p.statics.blotName+" into "+this.statics.blotName);p.insertInto(this,y)},m.prototype.length=function(){return this.children.reduce(function(p,y){return p+y.length()},0)},m.prototype.moveChildren=function(p,y){this.children.forEach(function(v){p.insertBefore(v,y)})},m.prototype.optimize=function(p){if(d.prototype.optimize.call(this,p),this.children.length===0)if(this.statics.defaultChild!=null){var y=c.create(this.statics.defaultChild);this.appendChild(y),y.optimize(p)}else this.remove()},m.prototype.path=function(p,y){y===void 0&&(y=!1);var v=this.children.find(p,y),g=v[0],b=v[1],N=[[this,p]];return g instanceof m?N.concat(g.path(b,y)):(g!=null&&N.push([g,b]),N)},m.prototype.removeChild=function(p){this.children.remove(p)},m.prototype.replace=function(p){p instanceof m&&p.moveChildren(this),d.prototype.replace.call(this,p)},m.prototype.split=function(p,y){if(y===void 0&&(y=!1),!y){if(p===0)return this;if(p===this.length())return this.next}var v=this.clone();return this.parent.insertBefore(v,this.next),this.children.forEachAt(p,this.length(),function(g,b,N){g=g.split(b,y),v.appendChild(g)}),v},m.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},m.prototype.update=function(p,y){var v=this,g=[],b=[];p.forEach(function(N){N.target===v.domNode&&N.type==="childList"&&(g.push.apply(g,N.addedNodes),b.push.apply(b,N.removedNodes))}),b.forEach(function(N){if(!(N.parentNode!=null&&N.tagName!=="IFRAME"&&document.body.compareDocumentPosition(N)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var j=c.find(N);j!=null&&(j.domNode.parentNode==null||j.domNode.parentNode===v.domNode)&&j.detach()}}),g.filter(function(N){return N.parentNode==v.domNode}).sort(function(N,j){return N===j?0:N.compareDocumentPosition(j)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(N){var j=null;N.nextSibling!=null&&(j=c.find(N.nextSibling));var w=f(N);(w.next!=j||w.next==null)&&(w.parent!=null&&w.parent.removeChild(v),v.insertBefore(w,j||void 0))})},m})(l.default);function f(d){var m=c.find(d);if(m==null)try{m=c.create(d)}catch{m=c.create(c.Scope.INLINE),[].slice.call(d.childNodes).forEach(function(y){m.domNode.appendChild(y)}),d.parentNode&&d.parentNode.replaceChild(m.domNode,d),m.attach()}return m}n.default=u}),(function(r,n,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){d(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12),l=s(31),c=s(17),u=s(1),f=(function(d){i(m,d);function m(p){var y=d.call(this,p)||this;return y.attributes=new l.default(y.domNode),y}return m.formats=function(p){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return p.tagName.toLowerCase()},m.prototype.format=function(p,y){var v=u.query(p);v instanceof o.default?this.attributes.attribute(v,y):y&&v!=null&&(p!==this.statics.blotName||this.formats()[p]!==y)&&this.replaceWith(p,y)},m.prototype.formats=function(){var p=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(p[this.statics.blotName]=y),p},m.prototype.replaceWith=function(p,y){var v=d.prototype.replaceWith.call(this,p,y);return this.attributes.copy(v),v},m.prototype.update=function(p,y){var v=this;d.prototype.update.call(this,p,y),p.some(function(g){return g.target===v.domNode&&g.type==="attributes"})&&this.attributes.build()},m.prototype.wrap=function(p,y){var v=d.prototype.wrap.call(this,p,y);return v instanceof m&&v.statics.scope===this.statics.scope&&this.attributes.move(v),v},m})(c.default);n.default=f}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(30),l=s(1),c=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.value=function(d){return!0},f.prototype.index=function(d,m){return this.domNode===d||this.domNode.compareDocumentPosition(d)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(m,1):-1},f.prototype.position=function(d,m){var p=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return d>0&&(p+=1),[this.parent.domNode,p]},f.prototype.value=function(){var d;return d={},d[this.statics.blotName]=this.statics.value(this.domNode)||!0,d},f.scope=l.Scope.INLINE_BLOT,f})(o.default);n.default=c}),(function(r,n,s){var i=s(11),o=s(3),l={attributes:{compose:function(u,f,d){typeof u!="object"&&(u={}),typeof f!="object"&&(f={});var m=o(!0,{},f);d||(m=Object.keys(m).reduce(function(y,v){return m[v]!=null&&(y[v]=m[v]),y},{}));for(var p in u)u[p]!==void 0&&f[p]===void 0&&(m[p]=u[p]);return Object.keys(m).length>0?m:void 0},diff:function(u,f){typeof u!="object"&&(u={}),typeof f!="object"&&(f={});var d=Object.keys(u).concat(Object.keys(f)).reduce(function(m,p){return i(u[p],f[p])||(m[p]=f[p]===void 0?null:f[p]),m},{});return Object.keys(d).length>0?d:void 0},transform:function(u,f,d){if(typeof u!="object")return f;if(typeof f=="object"){if(!d)return f;var m=Object.keys(f).reduce(function(p,y){return u[y]===void 0&&(p[y]=f[y]),p},{});return Object.keys(m).length>0?m:void 0}}},iterator:function(u){return new c(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function c(u){this.ops=u,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(u){u||(u=1/0);var f=this.ops[this.index];if(f){var d=this.offset,m=l.length(f);if(u>=m-d?(u=m-d,this.index+=1,this.offset=0):this.offset+=u,typeof f.delete=="number")return{delete:u};var p={};return f.attributes&&(p.attributes=f.attributes),typeof f.retain=="number"?p.retain=u:typeof f.insert=="string"?p.insert=f.insert.substr(d,u):p.insert=f.insert,p}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,f=this.index,d=this.next(),m=this.ops.slice(this.index);return this.offset=u,this.index=f,[d].concat(m)}else return[]},r.exports=l}),(function(r,n){var s=(function(){function i(v,g){return g!=null&&v instanceof g}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var c;try{c=Promise}catch{c=function(){}}function u(v,g,b,N,j){typeof g=="object"&&(b=g.depth,N=g.prototype,j=g.includeNonEnumerable,g=g.circular);var w=[],S=[],P=typeof Buffer<"u";typeof g>"u"&&(g=!0),typeof b>"u"&&(b=1/0);function A(T,I){if(T===null)return null;if(I===0)return T;var B,E;if(typeof T!="object")return T;if(i(T,o))B=new o;else if(i(T,l))B=new l;else if(i(T,c))B=new c(function(ee,H){T.then(function(O){ee(A(O,I-1))},function(O){H(A(O,I-1))})});else if(u.__isArray(T))B=[];else if(u.__isRegExp(T))B=new RegExp(T.source,y(T)),T.lastIndex&&(B.lastIndex=T.lastIndex);else if(u.__isDate(T))B=new Date(T.getTime());else{if(P&&Buffer.isBuffer(T))return Buffer.allocUnsafe?B=Buffer.allocUnsafe(T.length):B=new Buffer(T.length),T.copy(B),B;i(T,Error)?B=Object.create(T):typeof N>"u"?(E=Object.getPrototypeOf(T),B=Object.create(E)):(B=Object.create(N),E=N)}if(g){var C=w.indexOf(T);if(C!=-1)return S[C];w.push(T),S.push(B)}i(T,o)&&T.forEach(function(ee,H){var O=A(H,I-1),R=A(ee,I-1);B.set(O,R)}),i(T,l)&&T.forEach(function(ee){var H=A(ee,I-1);B.add(H)});for(var M in T){var q;E&&(q=Object.getOwnPropertyDescriptor(E,M)),!(q&&q.set==null)&&(B[M]=A(T[M],I-1))}if(Object.getOwnPropertySymbols)for(var G=Object.getOwnPropertySymbols(T),M=0;M<G.length;M++){var Z=G[M],te=Object.getOwnPropertyDescriptor(T,Z);te&&!te.enumerable&&!j||(B[Z]=A(T[Z],I-1),te.enumerable||Object.defineProperty(B,Z,{enumerable:!1}))}if(j)for(var ne=Object.getOwnPropertyNames(T),M=0;M<ne.length;M++){var J=ne[M],te=Object.getOwnPropertyDescriptor(T,J);te&&te.enumerable||(B[J]=A(T[J],I-1),Object.defineProperty(B,J,{enumerable:!1}))}return B}return A(v,b)}u.clonePrototype=function(g){if(g===null)return null;var b=function(){};return b.prototype=g,new b};function f(v){return Object.prototype.toString.call(v)}u.__objToStr=f;function d(v){return typeof v=="object"&&f(v)==="[object Date]"}u.__isDate=d;function m(v){return typeof v=="object"&&f(v)==="[object Array]"}u.__isArray=m;function p(v){return typeof v=="object"&&f(v)==="[object RegExp]"}u.__isRegExp=p;function y(v){var g="";return v.global&&(g+="g"),v.ignoreCase&&(g+="i"),v.multiline&&(g+="m"),g}return u.__getRegExpFlags=y,u})();typeof r=="object"&&r.exports&&(r.exports=s)}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function B(E,C){var M=[],q=!0,G=!1,Z=void 0;try{for(var te=E[Symbol.iterator](),ne;!(q=(ne=te.next()).done)&&(M.push(ne.value),!(C&&M.length===C));q=!0);}catch(J){G=!0,Z=J}finally{try{!q&&te.return&&te.return()}finally{if(G)throw Z}}return M}return function(E,C){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return B(E,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function B(E,C){for(var M=0;M<C.length;M++){var q=C[M];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(E,q.key,q)}}return function(E,C,M){return C&&B(E.prototype,C),M&&B(E,M),E}})(),l=function B(E,C,M){E===null&&(E=Function.prototype);var q=Object.getOwnPropertyDescriptor(E,C);if(q===void 0){var G=Object.getPrototypeOf(E);return G===null?void 0:B(G,C,M)}else{if("value"in q)return q.value;var Z=q.get;return Z===void 0?void 0:Z.call(M)}},c=s(0),u=w(c),f=s(8),d=w(f),m=s(4),p=w(m),y=s(16),v=w(y),g=s(13),b=w(g),N=s(25),j=w(N);function w(B){return B&&B.__esModule?B:{default:B}}function S(B,E){if(!(B instanceof E))throw new TypeError("Cannot call a class as a function")}function P(B,E){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:B}function A(B,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);B.prototype=Object.create(E&&E.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(B,E):B.__proto__=E)}function T(B){return B instanceof p.default||B instanceof m.BlockEmbed}var I=(function(B){A(E,B);function E(C,M){S(this,E);var q=P(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,C));return q.emitter=M.emitter,Array.isArray(M.whitelist)&&(q.whitelist=M.whitelist.reduce(function(G,Z){return G[Z]=!0,G},{})),q.domNode.addEventListener("DOMNodeInserted",function(){}),q.optimize(),q.enable(),q}return o(E,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(M,q){var G=this.line(M),Z=i(G,2),te=Z[0],ne=Z[1],J=this.line(M+q),ee=i(J,1),H=ee[0];if(l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"deleteAt",this).call(this,M,q),H!=null&&te!==H&&ne>0){if(te instanceof m.BlockEmbed||H instanceof m.BlockEmbed){this.optimize();return}if(te instanceof b.default){var O=te.newlineIndex(te.length(),!0);if(O>-1&&(te=te.split(O+1),te===H)){this.optimize();return}}else if(H instanceof b.default){var R=H.newlineIndex(0);R>-1&&H.split(R+1)}var W=H.children.head instanceof v.default?null:H.children.head;te.moveChildren(H,W),te.remove()}this.optimize()}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",M)}},{key:"formatAt",value:function(M,q,G,Z){this.whitelist!=null&&!this.whitelist[G]||(l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"formatAt",this).call(this,M,q,G,Z),this.optimize())}},{key:"insertAt",value:function(M,q,G){if(!(G!=null&&this.whitelist!=null&&!this.whitelist[q])){if(M>=this.length())if(G==null||u.default.query(q,u.default.Scope.BLOCK)==null){var Z=u.default.create(this.statics.defaultChild);this.appendChild(Z),G==null&&q.endsWith(`
`)&&(q=q.slice(0,-1)),Z.insertAt(0,q,G)}else{var te=u.default.create(q,G);this.appendChild(te)}else l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertAt",this).call(this,M,q,G);this.optimize()}}},{key:"insertBefore",value:function(M,q){if(M.statics.scope===u.default.Scope.INLINE_BLOT){var G=u.default.create(this.statics.defaultChild);G.appendChild(M),M=G}l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,M,q)}},{key:"leaf",value:function(M){return this.path(M).pop()||[null,-1]}},{key:"line",value:function(M){return M===this.length()?this.line(M-1):this.descendant(T,M)}},{key:"lines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,G=function Z(te,ne,J){var ee=[],H=J;return te.children.forEachAt(ne,J,function(O,R,W){T(O)?ee.push(O):O instanceof u.default.Container&&(ee=ee.concat(Z(O,R,H))),H-=W}),ee};return G(this,M,q)}},{key:"optimize",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,M,q),M.length>0&&this.emitter.emit(d.default.events.SCROLL_OPTIMIZE,M,q))}},{key:"path",value:function(M){return l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"path",this).call(this,M).slice(1)}},{key:"update",value:function(M){if(this.batch!==!0){var q=d.default.sources.USER;typeof M=="string"&&(q=M),Array.isArray(M)||(M=this.observer.takeRecords()),M.length>0&&this.emitter.emit(d.default.events.SCROLL_BEFORE_UPDATE,q,M),l(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"update",this).call(this,M.concat([])),M.length>0&&this.emitter.emit(d.default.events.SCROLL_UPDATE,q,M)}}}]),E})(u.default.Scroll);I.blotName="scroll",I.className="ql-editor",I.tagName="DIV",I.defaultChild="block",I.allowedChildren=[p.default,m.BlockEmbed,j.default],n.default=I}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},o=(function(){function K(oe,he){var ie=[],ce=!0,Le=!1,le=void 0;try{for(var He=oe[Symbol.iterator](),Fe;!(ce=(Fe=He.next()).done)&&(ie.push(Fe.value),!(he&&ie.length===he));ce=!0);}catch(fe){Le=!0,le=fe}finally{try{!ce&&He.return&&He.return()}finally{if(Le)throw le}}return ie}return function(oe,he){if(Array.isArray(oe))return oe;if(Symbol.iterator in Object(oe))return K(oe,he);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function K(oe,he){for(var ie=0;ie<he.length;ie++){var ce=he[ie];ce.enumerable=ce.enumerable||!1,ce.configurable=!0,"value"in ce&&(ce.writable=!0),Object.defineProperty(oe,ce.key,ce)}}return function(oe,he,ie){return he&&K(oe.prototype,he),ie&&K(oe,ie),oe}})(),c=s(21),u=B(c),f=s(11),d=B(f),m=s(3),p=B(m),y=s(2),v=B(y),g=s(20),b=B(g),N=s(0),j=B(N),w=s(5),S=B(w),P=s(10),A=B(P),T=s(9),I=B(T);function B(K){return K&&K.__esModule?K:{default:K}}function E(K,oe,he){return oe in K?Object.defineProperty(K,oe,{value:he,enumerable:!0,configurable:!0,writable:!0}):K[oe]=he,K}function C(K,oe){if(!(K instanceof oe))throw new TypeError("Cannot call a class as a function")}function M(K,oe){if(!K)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return oe&&(typeof oe=="object"||typeof oe=="function")?oe:K}function q(K,oe){if(typeof oe!="function"&&oe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof oe);K.prototype=Object.create(oe&&oe.prototype,{constructor:{value:K,enumerable:!1,writable:!0,configurable:!0}}),oe&&(Object.setPrototypeOf?Object.setPrototypeOf(K,oe):K.__proto__=oe)}var G=(0,A.default)("quill:keyboard"),Z=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",te=(function(K){q(oe,K),l(oe,null,[{key:"match",value:function(ie,ce){return ce=U(ce),["altKey","ctrlKey","metaKey","shiftKey"].some(function(Le){return!!ce[Le]!==ie[Le]&&ce[Le]!==null})?!1:ce.key===(ie.which||ie.keyCode)}}]);function oe(he,ie){C(this,oe);var ce=M(this,(oe.__proto__||Object.getPrototypeOf(oe)).call(this,he,ie));return ce.bindings={},Object.keys(ce.options.bindings).forEach(function(Le){Le==="list autofill"&&he.scroll.whitelist!=null&&!he.scroll.whitelist.list||ce.options.bindings[Le]&&ce.addBinding(ce.options.bindings[Le])}),ce.addBinding({key:oe.keys.ENTER,shiftKey:null},O),ce.addBinding({key:oe.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(ce.addBinding({key:oe.keys.BACKSPACE},{collapsed:!0},J),ce.addBinding({key:oe.keys.DELETE},{collapsed:!0},ee)):(ce.addBinding({key:oe.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},J),ce.addBinding({key:oe.keys.DELETE},{collapsed:!0,suffix:/^.?$/},ee)),ce.addBinding({key:oe.keys.BACKSPACE},{collapsed:!1},H),ce.addBinding({key:oe.keys.DELETE},{collapsed:!1},H),ce.addBinding({key:oe.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},J),ce.listen(),ce}return l(oe,[{key:"addBinding",value:function(ie){var ce=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},le=U(ie);if(le==null||le.key==null)return G.warn("Attempted to add invalid keyboard binding",le);typeof ce=="function"&&(ce={handler:ce}),typeof Le=="function"&&(Le={handler:Le}),le=(0,p.default)(le,ce,Le),this.bindings[le.key]=this.bindings[le.key]||[],this.bindings[le.key].push(le)}},{key:"listen",value:function(){var ie=this;this.quill.root.addEventListener("keydown",function(ce){if(!ce.defaultPrevented){var Le=ce.which||ce.keyCode,le=(ie.bindings[Le]||[]).filter(function(ut){return oe.match(ce,ut)});if(le.length!==0){var He=ie.quill.getSelection();if(!(He==null||!ie.quill.hasFocus())){var Fe=ie.quill.getLine(He.index),fe=o(Fe,2),Q=fe[0],we=fe[1],ve=ie.quill.getLeaf(He.index),Ee=o(ve,2),pe=Ee[0],ue=Ee[1],Pe=He.length===0?[pe,ue]:ie.quill.getLeaf(He.index+He.length),Ne=o(Pe,2),Be=Ne[0],nt=Ne[1],mt=pe instanceof j.default.Text?pe.value().slice(0,ue):"",kt=Be instanceof j.default.Text?Be.value().slice(nt):"",Re={collapsed:He.length===0,empty:He.length===0&&Q.length()<=1,format:ie.quill.getFormat(He),offset:we,prefix:mt,suffix:kt},gt=le.some(function(ut){if(ut.collapsed!=null&&ut.collapsed!==Re.collapsed||ut.empty!=null&&ut.empty!==Re.empty||ut.offset!=null&&ut.offset!==Re.offset)return!1;if(Array.isArray(ut.format)){if(ut.format.every(function(lt){return Re.format[lt]==null}))return!1}else if(i(ut.format)==="object"&&!Object.keys(ut.format).every(function(lt){return ut.format[lt]===!0?Re.format[lt]!=null:ut.format[lt]===!1?Re.format[lt]==null:(0,d.default)(ut.format[lt],Re.format[lt])}))return!1;return ut.prefix!=null&&!ut.prefix.test(Re.prefix)||ut.suffix!=null&&!ut.suffix.test(Re.suffix)?!1:ut.handler.call(ie,He,Re)!==!0});gt&&ce.preventDefault()}}}})}}]),oe})(I.default);te.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},te.DEFAULTS={bindings:{bold:W("bold"),italic:W("italic"),underline:W("underline"),indent:{key:te.keys.TAB,format:["blockquote","indent","list"],handler:function(oe,he){if(he.collapsed&&he.offset!==0)return!0;this.quill.format("indent","+1",S.default.sources.USER)}},outdent:{key:te.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(oe,he){if(he.collapsed&&he.offset!==0)return!0;this.quill.format("indent","-1",S.default.sources.USER)}},"outdent backspace":{key:te.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(oe,he){he.format.indent!=null?this.quill.format("indent","-1",S.default.sources.USER):he.format.list!=null&&this.quill.format("list",!1,S.default.sources.USER)}},"indent code-block":R(!0),"outdent code-block":R(!1),"remove tab":{key:te.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(oe){this.quill.deleteText(oe.index-1,1,S.default.sources.USER)}},tab:{key:te.keys.TAB,handler:function(oe){this.quill.history.cutoff();var he=new v.default().retain(oe.index).delete(oe.length).insert("	");this.quill.updateContents(he,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(oe.index+1,S.default.sources.SILENT)}},"list empty enter":{key:te.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(oe,he){this.quill.format("list",!1,S.default.sources.USER),he.format.indent&&this.quill.format("indent",!1,S.default.sources.USER)}},"checklist enter":{key:te.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(oe){var he=this.quill.getLine(oe.index),ie=o(he,2),ce=ie[0],Le=ie[1],le=(0,p.default)({},ce.formats(),{list:"checked"}),He=new v.default().retain(oe.index).insert(`
`,le).retain(ce.length()-Le-1).retain(1,{list:"unchecked"});this.quill.updateContents(He,S.default.sources.USER),this.quill.setSelection(oe.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:te.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(oe,he){var ie=this.quill.getLine(oe.index),ce=o(ie,2),Le=ce[0],le=ce[1],He=new v.default().retain(oe.index).insert(`
`,he.format).retain(Le.length()-le-1).retain(1,{header:null});this.quill.updateContents(He,S.default.sources.USER),this.quill.setSelection(oe.index+1,S.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(oe,he){var ie=he.prefix.length,ce=this.quill.getLine(oe.index),Le=o(ce,2),le=Le[0],He=Le[1];if(He>ie)return!0;var Fe=void 0;switch(he.prefix.trim()){case"[]":case"[ ]":Fe="unchecked";break;case"[x]":Fe="checked";break;case"-":case"*":Fe="bullet";break;default:Fe="ordered"}this.quill.insertText(oe.index," ",S.default.sources.USER),this.quill.history.cutoff();var fe=new v.default().retain(oe.index-He).delete(ie+1).retain(le.length()-2-He).retain(1,{list:Fe});this.quill.updateContents(fe,S.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(oe.index-ie,S.default.sources.SILENT)}},"code exit":{key:te.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(oe){var he=this.quill.getLine(oe.index),ie=o(he,2),ce=ie[0],Le=ie[1],le=new v.default().retain(oe.index+ce.length()-Le-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(le,S.default.sources.USER)}},"embed left":ne(te.keys.LEFT,!1),"embed left shift":ne(te.keys.LEFT,!0),"embed right":ne(te.keys.RIGHT,!1),"embed right shift":ne(te.keys.RIGHT,!0)}};function ne(K,oe){var he,ie=K===te.keys.LEFT?"prefix":"suffix";return he={key:K,shiftKey:oe,altKey:null},E(he,ie,/^$/),E(he,"handler",function(Le){var le=Le.index;K===te.keys.RIGHT&&(le+=Le.length+1);var He=this.quill.getLeaf(le),Fe=o(He,1),fe=Fe[0];return fe instanceof j.default.Embed?(K===te.keys.LEFT?oe?this.quill.setSelection(Le.index-1,Le.length+1,S.default.sources.USER):this.quill.setSelection(Le.index-1,S.default.sources.USER):oe?this.quill.setSelection(Le.index,Le.length+1,S.default.sources.USER):this.quill.setSelection(Le.index+Le.length+1,S.default.sources.USER),!1):!0}),he}function J(K,oe){if(!(K.index===0||this.quill.getLength()<=1)){var he=this.quill.getLine(K.index),ie=o(he,1),ce=ie[0],Le={};if(oe.offset===0){var le=this.quill.getLine(K.index-1),He=o(le,1),Fe=He[0];if(Fe!=null&&Fe.length()>1){var fe=ce.formats(),Q=this.quill.getFormat(K.index-1,1);Le=b.default.attributes.diff(fe,Q)||{}}}var we=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(oe.prefix)?2:1;this.quill.deleteText(K.index-we,we,S.default.sources.USER),Object.keys(Le).length>0&&this.quill.formatLine(K.index-we,we,Le,S.default.sources.USER),this.quill.focus()}}function ee(K,oe){var he=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(oe.suffix)?2:1;if(!(K.index>=this.quill.getLength()-he)){var ie={},ce=0,Le=this.quill.getLine(K.index),le=o(Le,1),He=le[0];if(oe.offset>=He.length()-1){var Fe=this.quill.getLine(K.index+1),fe=o(Fe,1),Q=fe[0];if(Q){var we=He.formats(),ve=this.quill.getFormat(K.index,1);ie=b.default.attributes.diff(we,ve)||{},ce=Q.length()}}this.quill.deleteText(K.index,he,S.default.sources.USER),Object.keys(ie).length>0&&this.quill.formatLine(K.index+ce-1,he,ie,S.default.sources.USER)}}function H(K){var oe=this.quill.getLines(K),he={};if(oe.length>1){var ie=oe[0].formats(),ce=oe[oe.length-1].formats();he=b.default.attributes.diff(ce,ie)||{}}this.quill.deleteText(K,S.default.sources.USER),Object.keys(he).length>0&&this.quill.formatLine(K.index,1,he,S.default.sources.USER),this.quill.setSelection(K.index,S.default.sources.SILENT),this.quill.focus()}function O(K,oe){var he=this;K.length>0&&this.quill.scroll.deleteAt(K.index,K.length);var ie=Object.keys(oe.format).reduce(function(ce,Le){return j.default.query(Le,j.default.Scope.BLOCK)&&!Array.isArray(oe.format[Le])&&(ce[Le]=oe.format[Le]),ce},{});this.quill.insertText(K.index,`
`,ie,S.default.sources.USER),this.quill.setSelection(K.index+1,S.default.sources.SILENT),this.quill.focus(),Object.keys(oe.format).forEach(function(ce){ie[ce]==null&&(Array.isArray(oe.format[ce])||ce!=="link"&&he.quill.format(ce,oe.format[ce],S.default.sources.USER))})}function R(K){return{key:te.keys.TAB,shiftKey:!K,format:{"code-block":!0},handler:function(he){var ie=j.default.query("code-block"),ce=he.index,Le=he.length,le=this.quill.scroll.descendant(ie,ce),He=o(le,2),Fe=He[0],fe=He[1];if(Fe!=null){var Q=this.quill.getIndex(Fe),we=Fe.newlineIndex(fe,!0)+1,ve=Fe.newlineIndex(Q+fe+Le),Ee=Fe.domNode.textContent.slice(we,ve).split(`
`);fe=0,Ee.forEach(function(pe,ue){K?(Fe.insertAt(we+fe,ie.TAB),fe+=ie.TAB.length,ue===0?ce+=ie.TAB.length:Le+=ie.TAB.length):pe.startsWith(ie.TAB)&&(Fe.deleteAt(we+fe,ie.TAB.length),fe-=ie.TAB.length,ue===0?ce-=ie.TAB.length:Le-=ie.TAB.length),fe+=pe.length+1}),this.quill.update(S.default.sources.USER),this.quill.setSelection(ce,Le,S.default.sources.SILENT)}}}}function W(K){return{key:K[0].toUpperCase(),shortKey:!0,handler:function(he,ie){this.quill.format(K,!ie.format[K],S.default.sources.USER)}}}function U(K){if(typeof K=="string"||typeof K=="number")return U({key:K});if((typeof K>"u"?"undefined":i(K))==="object"&&(K=(0,u.default)(K,!1)),typeof K.key=="string")if(te.keys[K.key.toUpperCase()]!=null)K.key=te.keys[K.key.toUpperCase()];else if(K.key.length===1)K.key=K.key.toUpperCase().charCodeAt(0);else return null;return K.shortKey&&(K[Z]=K.shortKey,delete K.shortKey),K}n.default=te,n.SHORTKEY=Z}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function b(N,j){var w=[],S=!0,P=!1,A=void 0;try{for(var T=N[Symbol.iterator](),I;!(S=(I=T.next()).done)&&(w.push(I.value),!(j&&w.length===j));S=!0);}catch(B){P=!0,A=B}finally{try{!S&&T.return&&T.return()}finally{if(P)throw A}}return w}return function(N,j){if(Array.isArray(N))return N;if(Symbol.iterator in Object(N))return b(N,j);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function b(N,j,w){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,j);if(S===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:b(P,j,w)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(w)}},l=(function(){function b(N,j){for(var w=0;w<j.length;w++){var S=j[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,j,w){return j&&b(N.prototype,j),w&&b(N,w),N}})(),c=s(0),u=m(c),f=s(7),d=m(f);function m(b){return b&&b.__esModule?b:{default:b}}function p(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function y(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function v(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var g=(function(b){v(N,b),l(N,null,[{key:"value",value:function(){}}]);function N(j,w){p(this,N);var S=y(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,j));return S.selection=w,S.textNode=document.createTextNode(N.CONTENTS),S.domNode.appendChild(S.textNode),S._length=0,S}return l(N,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(w,S){if(this._length!==0)return o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,w,S);for(var P=this,A=0;P!=null&&P.statics.scope!==u.default.Scope.BLOCK_BLOT;)A+=P.offset(P.parent),P=P.parent;P!=null&&(this._length=N.CONTENTS.length,P.optimize(),P.formatAt(A,N.CONTENTS.length,w,S),this._length=0)}},{key:"index",value:function(w,S){return w===this.textNode?0:o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"index",this).call(this,w,S)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var w=this.textNode,S=this.selection.getNativeRange(),P=void 0,A=void 0,T=void 0;if(S!=null&&S.start.node===w&&S.end.node===w){var I=[w,S.start.offset,S.end.offset];P=I[0],A=I[1],T=I[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==N.CONTENTS){var B=this.textNode.data.split(N.CONTENTS).join("");this.next instanceof d.default?(P=this.next.domNode,this.next.insertAt(0,B),this.textNode.data=N.CONTENTS):(this.textNode.data=B,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(N.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var E=[A,T].map(function(M){return Math.max(0,Math.min(P.data.length,M-1))}),C=i(E,2);return A=C[0],T=C[1],{startNode:P,startOffset:A,endNode:P,endOffset:T}}}}},{key:"update",value:function(w,S){var P=this;if(w.some(function(T){return T.type==="characterData"&&T.target===P.textNode})){var A=this.restore();A&&(S.range=A)}}},{key:"value",value:function(){return""}}]),N})(u.default.Embed);g.blotName="cursor",g.className="ql-cursor",g.tagName="span",g.CONTENTS="\uFEFF",n.default=g}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=u(i),l=s(4),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return v})(o.default.Container);p.allowedChildren=[c.default,l.BlockEmbed,p],n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var i=(function(){function g(b,N){for(var j=0;j<N.length;j++){var w=N[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,N,j){return N&&g(b.prototype,N),j&&g(b,j),b}})(),o=function g(b,N,j){b===null&&(b=Function.prototype);var w=Object.getOwnPropertyDescriptor(b,N);if(w===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,N,j)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(j)}},l=s(0),c=u(l);function u(g){return g&&g.__esModule?g:{default:g}}function f(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function m(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var p=(function(g){m(b,g);function b(){return f(this,b),d(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"value",value:function(j){var w=o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,j);return w.startsWith("rgb(")?(w=w.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+w.split(",").map(function(S){return("00"+parseInt(S).toString(16)).slice(-2)}).join("")):w}}]),b})(c.default.Attributor.Style),y=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),v=new p("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=p,n.ColorClass=y,n.ColorStyle=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var i=(function(){function v(g,b){for(var N=0;N<b.length;N++){var j=b[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,b,N){return b&&v(g.prototype,b),N&&v(g,N),g}})(),o=function v(g,b,N){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,b);if(j===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:v(w,b,N)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(N)}},l=s(6),c=u(l);function u(v){return v&&v.__esModule?v:{default:v}}function f(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function d(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function m(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var p=(function(v){m(g,v);function g(){return f(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"format",value:function(N,j){if(N!==this.statics.blotName||!j)return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,N,j);j=this.constructor.sanitize(j),this.domNode.setAttribute("href",j)}}],[{key:"create",value:function(N){var j=o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,N);return N=this.sanitize(N),j.setAttribute("href",N),j.setAttribute("rel","noopener noreferrer"),j.setAttribute("target","_blank"),j}},{key:"formats",value:function(N){return N.getAttribute("href")}},{key:"sanitize",value:function(N){return y(N,this.PROTOCOL_WHITELIST)?N:this.SANITIZED_URL}}]),g})(c.default);p.blotName="link",p.tagName="A",p.SANITIZED_URL="about:blank",p.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(v,g){var b=document.createElement("a");b.href=v;var N=b.href.slice(0,b.href.indexOf(":"));return g.indexOf(N)>-1}n.default=p,n.sanitize=y}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},o=(function(){function g(b,N){for(var j=0;j<N.length;j++){var w=N[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,N,j){return N&&g(b.prototype,N),j&&g(b,j),b}})(),l=s(23),c=d(l),u=s(107),f=d(u);function d(g){return g&&g.__esModule?g:{default:g}}function m(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}var p=0;function y(g,b){g.setAttribute(b,g.getAttribute(b)!=="true")}var v=(function(){function g(b){var N=this;m(this,g),this.select=b,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){N.togglePicker()}),this.label.addEventListener("keydown",function(j){switch(j.keyCode){case c.default.keys.ENTER:N.togglePicker();break;case c.default.keys.ESCAPE:N.escape(),j.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(g,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(N){var j=this,w=document.createElement("span");return w.tabIndex="0",w.setAttribute("role","button"),w.classList.add("ql-picker-item"),N.hasAttribute("value")&&w.setAttribute("data-value",N.getAttribute("value")),N.textContent&&w.setAttribute("data-label",N.textContent),w.addEventListener("click",function(){j.selectItem(w,!0)}),w.addEventListener("keydown",function(S){switch(S.keyCode){case c.default.keys.ENTER:j.selectItem(w,!0),S.preventDefault();break;case c.default.keys.ESCAPE:j.escape(),S.preventDefault();break}}),w}},{key:"buildLabel",value:function(){var N=document.createElement("span");return N.classList.add("ql-picker-label"),N.innerHTML=f.default,N.tabIndex="0",N.setAttribute("role","button"),N.setAttribute("aria-expanded","false"),this.container.appendChild(N),N}},{key:"buildOptions",value:function(){var N=this,j=document.createElement("span");j.classList.add("ql-picker-options"),j.setAttribute("aria-hidden","true"),j.tabIndex="-1",j.id="ql-picker-options-"+p,p+=1,this.label.setAttribute("aria-controls",j.id),this.options=j,[].slice.call(this.select.options).forEach(function(w){var S=N.buildItem(w);j.appendChild(S),w.selected===!0&&N.selectItem(S)}),this.container.appendChild(j)}},{key:"buildPicker",value:function(){var N=this;[].slice.call(this.select.attributes).forEach(function(j){N.container.setAttribute(j.name,j.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var N=this;this.close(),setTimeout(function(){return N.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(N){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,w=this.container.querySelector(".ql-selected");if(N!==w&&(w?.classList.remove("ql-selected"),N!=null&&(N.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(N.parentNode.children,N),N.hasAttribute("data-value")?this.label.setAttribute("data-value",N.getAttribute("data-value")):this.label.removeAttribute("data-value"),N.hasAttribute("data-label")?this.label.setAttribute("data-label",N.getAttribute("data-label")):this.label.removeAttribute("data-label"),j))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var S=document.createEvent("Event");S.initEvent("change",!0,!0),this.select.dispatchEvent(S)}this.close()}}},{key:"update",value:function(){var N=void 0;if(this.select.selectedIndex>-1){var j=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];N=this.select.options[this.select.selectedIndex],this.selectItem(j)}else this.selectItem(null);var w=N!=null&&N!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",w)}}]),g})();n.default=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=G(i),l=s(5),c=G(l),u=s(4),f=G(u),d=s(16),m=G(d),p=s(25),y=G(p),v=s(24),g=G(v),b=s(35),N=G(b),j=s(6),w=G(j),S=s(22),P=G(S),A=s(7),T=G(A),I=s(55),B=G(I),E=s(42),C=G(E),M=s(23),q=G(M);function G(Z){return Z&&Z.__esModule?Z:{default:Z}}c.default.register({"blots/block":f.default,"blots/block/embed":u.BlockEmbed,"blots/break":m.default,"blots/container":y.default,"blots/cursor":g.default,"blots/embed":N.default,"blots/inline":w.default,"blots/scroll":P.default,"blots/text":T.default,"modules/clipboard":B.default,"modules/history":C.default,"modules/keyboard":q.default}),o.default.register(f.default,m.default,g.default,w.default,P.default,T.default),n.default=c.default}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(1),o=(function(){function l(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?u=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?u=document.createElement(c):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(c,u){var f=this.isolate(c,u);f.remove()},l.prototype.formatAt=function(c,u,f,d){var m=this.isolate(c,u);if(i.query(f,i.Scope.BLOT)!=null&&d)m.wrap(f,d);else if(i.query(f,i.Scope.ATTRIBUTE)!=null){var p=i.create(this.statics.scope);m.wrap(p),p.format(f,d)}},l.prototype.insertAt=function(c,u,f){var d=f==null?i.create("text",u):i.create(u,f),m=this.split(c);this.parent.insertBefore(d,m)},l.prototype.insertInto=function(c,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var f=null;c.children.insertBefore(this,u),u!=null&&(f=u.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=f)&&c.domNode.insertBefore(this.domNode,f),this.parent=c,this.attach()},l.prototype.isolate=function(c,u){var f=this.split(c);return f.split(u),f},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,u){var f=typeof c=="string"?i.create(c,u):c;return f.replace(this),f},l.prototype.split=function(c,u){return c===0?this:this.next},l.prototype.update=function(c,u){},l.prototype.wrap=function(c,u){var f=typeof c=="string"?i.create(c,u):c;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},l.blotName="abstract",l})();n.default=o}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(12),o=s(32),l=s(33),c=s(1),u=(function(){function f(d){this.attributes={},this.domNode=d,this.build()}return f.prototype.attribute=function(d,m){m?d.add(this.domNode,m)&&(d.value(this.domNode)!=null?this.attributes[d.attrName]=d:delete this.attributes[d.attrName]):(d.remove(this.domNode),delete this.attributes[d.attrName])},f.prototype.build=function(){var d=this;this.attributes={};var m=i.default.keys(this.domNode),p=o.default.keys(this.domNode),y=l.default.keys(this.domNode);m.concat(p).concat(y).forEach(function(v){var g=c.query(v,c.Scope.ATTRIBUTE);g instanceof i.default&&(d.attributes[g.attrName]=g)})},f.prototype.copy=function(d){var m=this;Object.keys(this.attributes).forEach(function(p){var y=m.attributes[p].value(m.domNode);d.format(p,y)})},f.prototype.move=function(d){var m=this;this.copy(d),Object.keys(this.attributes).forEach(function(p){m.attributes[p].remove(m.domNode)}),this.attributes={}},f.prototype.values=function(){var d=this;return Object.keys(this.attributes).reduce(function(m,p){return m[p]=d.attributes[p].value(d.domNode),m},{})},f})();n.default=u}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12);function l(u,f){var d=u.getAttribute("class")||"";return d.split(/\s+/).filter(function(m){return m.indexOf(f+"-")===0})}var c=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("class")||"").split(/\s+/).map(function(m){return m.split("-").slice(0,-1).join("-")})},f.prototype.add=function(d,m){return this.canAdd(d,m)?(this.remove(d),d.classList.add(this.keyName+"-"+m),!0):!1},f.prototype.remove=function(d){var m=l(d,this.keyName);m.forEach(function(p){d.classList.remove(p)}),d.classList.length===0&&d.removeAttribute("class")},f.prototype.value=function(d){var m=l(d,this.keyName)[0]||"",p=m.slice(this.keyName.length+1);return this.canAdd(d,p)?p:""},f})(o.default);n.default=c}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12);function l(u){var f=u.split("-"),d=f.slice(1).map(function(m){return m[0].toUpperCase()+m.slice(1)}).join("");return f[0]+d}var c=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.keys=function(d){return(d.getAttribute("style")||"").split(";").map(function(m){var p=m.split(":");return p[0].trim()})},f.prototype.add=function(d,m){return this.canAdd(d,m)?(d.style[l(this.keyName)]=m,!0):!1},f.prototype.remove=function(d){d.style[l(this.keyName)]="",d.getAttribute("style")||d.removeAttribute("style")},f.prototype.value=function(d){var m=d.style[l(this.keyName)];return this.canAdd(d,m)?m:""},f})(o.default);n.default=c}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function c(u,f){for(var d=0;d<f.length;d++){var m=f[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,d){return f&&c(u.prototype,f),d&&c(u,d),u}})();function o(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(u,f){o(this,c),this.quill=u,this.options=f,this.modules={}}return i(c,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(d){f.modules[d]==null&&f.addModule(d)})}},{key:"addModule",value:function(f){var d=this.quill.constructor.import("modules/"+f);return this.modules[f]=new d(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),c})();l.DEFAULTS={modules:{}},l.themes={default:l},n.default=l}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function b(N,j){for(var w=0;w<j.length;w++){var S=j[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,j,w){return j&&b(N.prototype,j),w&&b(N,w),N}})(),o=function b(N,j,w){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,j);if(S===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:b(P,j,w)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(w)}},l=s(0),c=d(l),u=s(7),f=d(u);function d(b){return b&&b.__esModule?b:{default:b}}function m(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function p(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function y(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var v="\uFEFF",g=(function(b){y(N,b);function N(j){m(this,N);var w=p(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,j));return w.contentNode=document.createElement("span"),w.contentNode.setAttribute("contenteditable",!1),[].slice.call(w.domNode.childNodes).forEach(function(S){w.contentNode.appendChild(S)}),w.leftGuard=document.createTextNode(v),w.rightGuard=document.createTextNode(v),w.domNode.appendChild(w.leftGuard),w.domNode.appendChild(w.contentNode),w.domNode.appendChild(w.rightGuard),w}return i(N,[{key:"index",value:function(w,S){return w===this.leftGuard?0:w===this.rightGuard?1:o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"index",this).call(this,w,S)}},{key:"restore",value:function(w){var S=void 0,P=void 0,A=w.data.split(v).join("");if(w===this.leftGuard)if(this.prev instanceof f.default){var T=this.prev.length();this.prev.insertAt(T,A),S={startNode:this.prev.domNode,startOffset:T+A.length}}else P=document.createTextNode(A),this.parent.insertBefore(c.default.create(P),this),S={startNode:P,startOffset:A.length};else w===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,A),S={startNode:this.next.domNode,startOffset:A.length}):(P=document.createTextNode(A),this.parent.insertBefore(c.default.create(P),this.next),S={startNode:P,startOffset:A.length}));return w.data=v,S}},{key:"update",value:function(w,S){var P=this;w.forEach(function(A){if(A.type==="characterData"&&(A.target===P.leftGuard||A.target===P.rightGuard)){var T=P.restore(A.target);T&&(S.range=T)}})}}]),N})(c.default.Embed);n.default=g}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var i=s(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new o.default.Attributor.Attribute("align","align",c),f=new o.default.Attributor.Class("align","ql-align",c),d=new o.default.Attributor.Style("align","text-align",c);n.AlignAttribute=u,n.AlignClass=f,n.AlignStyle=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var i=s(0),o=c(i),l=s(26);function c(d){return d&&d.__esModule?d:{default:d}}var u=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),f=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=u,n.BackgroundStyle=f}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var i=s(0),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},u=new o.default.Attributor.Attribute("direction","dir",c),f=new o.default.Attributor.Class("direction","ql-direction",c),d=new o.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=u,n.DirectionClass=f,n.DirectionStyle=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var i=(function(){function b(N,j){for(var w=0;w<j.length;w++){var S=j[w];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(N,S.key,S)}}return function(N,j,w){return j&&b(N.prototype,j),w&&b(N,w),N}})(),o=function b(N,j,w){N===null&&(N=Function.prototype);var S=Object.getOwnPropertyDescriptor(N,j);if(S===void 0){var P=Object.getPrototypeOf(N);return P===null?void 0:b(P,j,w)}else{if("value"in S)return S.value;var A=S.get;return A===void 0?void 0:A.call(w)}},l=s(0),c=u(l);function u(b){return b&&b.__esModule?b:{default:b}}function f(b,N){if(!(b instanceof N))throw new TypeError("Cannot call a class as a function")}function d(b,N){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:b}function m(b,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);b.prototype=Object.create(N&&N.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(b,N):b.__proto__=N)}var p={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new c.default.Attributor.Class("font","ql-font",p),v=(function(b){m(N,b);function N(){return f(this,N),d(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,[{key:"value",value:function(w){return o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"value",this).call(this,w).replace(/["']/g,"")}}]),N})(c.default.Attributor.Style),g=new v("font","font-family",p);n.FontStyle=g,n.FontClass=y}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var i=s(0),o=l(i);function l(f){return f&&f.__esModule?f:{default:f}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=u}),(function(r,n,s){r.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var i=(function(){function j(w,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,S,P){return S&&j(w.prototype,S),P&&j(w,P),w}})(),o=s(0),l=m(o),c=s(5),u=m(c),f=s(9),d=m(f);function m(j){return j&&j.__esModule?j:{default:j}}function p(j,w){if(!(j instanceof w))throw new TypeError("Cannot call a class as a function")}function y(j,w){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:j}function v(j,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);j.prototype=Object.create(w&&w.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(j,w):j.__proto__=w)}var g=(function(j){v(w,j);function w(S,P){p(this,w);var A=y(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,S,P));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(u.default.events.EDITOR_CHANGE,function(T,I,B,E){T!==u.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||E===u.default.sources.USER?A.record(I,B):A.transform(I))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return i(w,[{key:"change",value:function(P,A){if(this.stack[P].length!==0){var T=this.stack[P].pop();this.stack[A].push(T),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(T[P],u.default.sources.USER),this.ignoreChange=!1;var I=N(T[P]);this.quill.setSelection(I)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(P,A){if(P.ops.length!==0){this.stack.redo=[];var T=this.quill.getContents().diff(A),I=Date.now();if(this.lastRecorded+this.options.delay>I&&this.stack.undo.length>0){var B=this.stack.undo.pop();T=T.compose(B.undo),P=B.redo.compose(P)}else this.lastRecorded=I;this.stack.undo.push({redo:P,undo:T}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(P){this.stack.undo.forEach(function(A){A.undo=P.transform(A.undo,!0),A.redo=P.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=P.transform(A.undo,!0),A.redo=P.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),w})(d.default);g.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function b(j){var w=j.ops[j.ops.length-1];return w==null?!1:w.insert!=null?typeof w.insert=="string"&&w.insert.endsWith(`
`):w.attributes!=null?Object.keys(w.attributes).some(function(S){return l.default.query(S,l.default.Scope.BLOCK)!=null}):!1}function N(j){var w=j.reduce(function(P,A){return P+=A.delete||0,P},0),S=j.length()-w;return b(j)&&(S-=1),S}n.default=g,n.getLastChangeIndex=N}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var i=(function(){function O(R,W){for(var U=0;U<W.length;U++){var K=W[U];K.enumerable=K.enumerable||!1,K.configurable=!0,"value"in K&&(K.writable=!0),Object.defineProperty(R,K.key,K)}}return function(R,W,U){return W&&O(R.prototype,W),U&&O(R,U),R}})(),o=function O(R,W,U){R===null&&(R=Function.prototype);var K=Object.getOwnPropertyDescriptor(R,W);if(K===void 0){var oe=Object.getPrototypeOf(R);return oe===null?void 0:O(oe,W,U)}else{if("value"in K)return K.value;var he=K.get;return he===void 0?void 0:he.call(U)}},l=s(3),c=I(l),u=s(2),f=I(u),d=s(8),m=I(d),p=s(23),y=I(p),v=s(34),g=I(v),b=s(59),N=I(b),j=s(60),w=I(j),S=s(28),P=I(S),A=s(61),T=I(A);function I(O){return O&&O.__esModule?O:{default:O}}function B(O,R){if(!(O instanceof R))throw new TypeError("Cannot call a class as a function")}function E(O,R){if(!O)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:O}function C(O,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);O.prototype=Object.create(R&&R.prototype,{constructor:{value:O,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(O,R):O.__proto__=R)}var M=[!1,"center","right","justify"],q=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],G=[!1,"serif","monospace"],Z=["1","2","3",!1],te=["small",!1,"large","huge"],ne=(function(O){C(R,O);function R(W,U){B(this,R);var K=E(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,W,U)),oe=function he(ie){if(!document.body.contains(W.root))return document.body.removeEventListener("click",he);K.tooltip!=null&&!K.tooltip.root.contains(ie.target)&&document.activeElement!==K.tooltip.textbox&&!K.quill.hasFocus()&&K.tooltip.hide(),K.pickers!=null&&K.pickers.forEach(function(ce){ce.container.contains(ie.target)||ce.close()})};return W.emitter.listenDOM("click",document.body,oe),K}return i(R,[{key:"addModule",value:function(U){var K=o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"addModule",this).call(this,U);return U==="toolbar"&&this.extendToolbar(K),K}},{key:"buildButtons",value:function(U,K){U.forEach(function(oe){var he=oe.getAttribute("class")||"";he.split(/\s+/).forEach(function(ie){if(ie.startsWith("ql-")&&(ie=ie.slice(3),K[ie]!=null))if(ie==="direction")oe.innerHTML=K[ie][""]+K[ie].rtl;else if(typeof K[ie]=="string")oe.innerHTML=K[ie];else{var ce=oe.value||"";ce!=null&&K[ie][ce]&&(oe.innerHTML=K[ie][ce])}})})}},{key:"buildPickers",value:function(U,K){var oe=this;this.pickers=U.map(function(ie){if(ie.classList.contains("ql-align"))return ie.querySelector("option")==null&&H(ie,M),new w.default(ie,K.align);if(ie.classList.contains("ql-background")||ie.classList.contains("ql-color")){var ce=ie.classList.contains("ql-background")?"background":"color";return ie.querySelector("option")==null&&H(ie,q,ce==="background"?"#ffffff":"#000000"),new N.default(ie,K[ce])}else return ie.querySelector("option")==null&&(ie.classList.contains("ql-font")?H(ie,G):ie.classList.contains("ql-header")?H(ie,Z):ie.classList.contains("ql-size")&&H(ie,te)),new P.default(ie)});var he=function(){oe.pickers.forEach(function(ce){ce.update()})};this.quill.on(m.default.events.EDITOR_CHANGE,he)}}]),R})(g.default);ne.DEFAULTS=(0,c.default)(!0,{},g.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var R=this,W=this.container.querySelector("input.ql-image[type=file]");W==null&&(W=document.createElement("input"),W.setAttribute("type","file"),W.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),W.classList.add("ql-image"),W.addEventListener("change",function(){if(W.files!=null&&W.files[0]!=null){var U=new FileReader;U.onload=function(K){var oe=R.quill.getSelection(!0);R.quill.updateContents(new f.default().retain(oe.index).delete(oe.length).insert({image:K.target.result}),m.default.sources.USER),R.quill.setSelection(oe.index+1,m.default.sources.SILENT),W.value=""},U.readAsDataURL(W.files[0])}}),this.container.appendChild(W)),W.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var J=(function(O){C(R,O);function R(W,U){B(this,R);var K=E(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,W,U));return K.textbox=K.root.querySelector('input[type="text"]'),K.listen(),K}return i(R,[{key:"listen",value:function(){var U=this;this.textbox.addEventListener("keydown",function(K){y.default.match(K,"enter")?(U.save(),K.preventDefault()):y.default.match(K,"escape")&&(U.cancel(),K.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",K=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),K!=null?this.textbox.value=K:U!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+U)||""),this.root.setAttribute("data-mode",U)}},{key:"restoreFocus",value:function(){var U=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=U}},{key:"save",value:function(){var U=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var K=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",U,m.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",U,m.default.sources.USER)),this.quill.root.scrollTop=K;break}case"video":U=ee(U);case"formula":{if(!U)break;var oe=this.quill.getSelection(!0);if(oe!=null){var he=oe.index+oe.length;this.quill.insertEmbed(he,this.root.getAttribute("data-mode"),U,m.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(he+1," ",m.default.sources.USER),this.quill.setSelection(he+2,m.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),R})(T.default);function ee(O){var R=O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||O.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return R?(R[1]||"https")+"://www.youtube.com/embed/"+R[2]+"?showinfo=0":(R=O.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(R[1]||"https")+"://player.vimeo.com/video/"+R[2]+"/":O}function H(O,R){var W=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;R.forEach(function(U){var K=document.createElement("option");U===W?K.setAttribute("selected","selected"):K.setAttribute("value",U),O.appendChild(K)})}n.BaseTooltip=J,n.default=ne}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,u=this.iterator();c=u();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,u=this.head;u!=null;){if(u===l)return c;c+=u.length(),u=u.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var u,f=this.iterator();u=f();){var d=u.length();if(l<d||c&&l===d&&(u.next==null||u.next.length()!==0))return[u,l];l-=d}return[null,0]},o.prototype.forEach=function(l){for(var c,u=this.iterator();c=u();)l(c)},o.prototype.forEachAt=function(l,c,u){if(!(c<=0))for(var f=this.find(l),d=f[0],m=f[1],p,y=l-m,v=this.iterator(d);(p=v())&&y<l+c;){var g=p.length();l>y?u(p,l-y,Math.min(c,y+g-l)):u(p,0,Math.min(g,l+c-y)),y+=g}},o.prototype.map=function(l){return this.reduce(function(c,u){return c.push(l(u)),c},[])},o.prototype.reduce=function(l,c){for(var u,f=this.iterator();u=f();)c=l(c,u);return c},o})();n.default=i}),(function(r,n,s){var i=this&&this.__extends||(function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(m,p){m.__proto__=p}||function(m,p){for(var y in p)p.hasOwnProperty(y)&&(m[y]=p[y])};return function(m,p){d(m,p);function y(){this.constructor=m}m.prototype=p===null?Object.create(p):(y.prototype=p.prototype,new y)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(17),l=s(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,f=(function(d){i(m,d);function m(p){var y=d.call(this,p)||this;return y.scroll=y,y.observer=new MutationObserver(function(v){y.update(v)}),y.observer.observe(y.domNode,c),y.attach(),y}return m.prototype.detach=function(){d.prototype.detach.call(this),this.observer.disconnect()},m.prototype.deleteAt=function(p,y){this.update(),p===0&&y===this.length()?this.children.forEach(function(v){v.remove()}):d.prototype.deleteAt.call(this,p,y)},m.prototype.formatAt=function(p,y,v,g){this.update(),d.prototype.formatAt.call(this,p,y,v,g)},m.prototype.insertAt=function(p,y,v){this.update(),d.prototype.insertAt.call(this,p,y,v)},m.prototype.optimize=function(p,y){var v=this;p===void 0&&(p=[]),y===void 0&&(y={}),d.prototype.optimize.call(this,y);for(var g=[].slice.call(this.observer.takeRecords());g.length>0;)p.push(g.pop());for(var b=function(S,P){P===void 0&&(P=!0),!(S==null||S===v)&&S.domNode.parentNode!=null&&(S.domNode[l.DATA_KEY].mutations==null&&(S.domNode[l.DATA_KEY].mutations=[]),P&&b(S.parent))},N=function(S){S.domNode[l.DATA_KEY]==null||S.domNode[l.DATA_KEY].mutations==null||(S instanceof o.default&&S.children.forEach(N),S.optimize(y))},j=p,w=0;j.length>0;w+=1){if(w>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(j.forEach(function(S){var P=l.find(S.target,!0);P!=null&&(P.domNode===S.target&&(S.type==="childList"?(b(l.find(S.previousSibling,!1)),[].forEach.call(S.addedNodes,function(A){var T=l.find(A,!1);b(T,!1),T instanceof o.default&&T.children.forEach(function(I){b(I,!1)})})):S.type==="attributes"&&b(P.prev)),b(P))}),this.children.forEach(N),j=[].slice.call(this.observer.takeRecords()),g=j.slice();g.length>0;)p.push(g.pop())}},m.prototype.update=function(p,y){var v=this;y===void 0&&(y={}),p=p||this.observer.takeRecords(),p.map(function(g){var b=l.find(g.target,!0);return b==null?null:b.domNode[l.DATA_KEY].mutations==null?(b.domNode[l.DATA_KEY].mutations=[g],b):(b.domNode[l.DATA_KEY].mutations.push(g),null)}).forEach(function(g){g==null||g===v||g.domNode[l.DATA_KEY]==null||g.update(g.domNode[l.DATA_KEY].mutations||[],y)}),this.domNode[l.DATA_KEY].mutations!=null&&d.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,y),this.optimize(p,y)},m.blotName="scroll",m.defaultChild="block",m.scope=l.Scope.BLOCK_BLOT,m.tagName="DIV",m})(o.default);n.default=f}),(function(r,n,s){var i=this&&this.__extends||(function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,m){d.__proto__=m}||function(d,m){for(var p in m)m.hasOwnProperty(p)&&(d[p]=m[p])};return function(d,m){f(d,m);function p(){this.constructor=d}d.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(18),l=s(1);function c(f,d){if(Object.keys(f).length!==Object.keys(d).length)return!1;for(var m in f)if(f[m]!==d[m])return!1;return!0}var u=(function(f){i(d,f);function d(){return f!==null&&f.apply(this,arguments)||this}return d.formats=function(m){if(m.tagName!==d.tagName)return f.formats.call(this,m)},d.prototype.format=function(m,p){var y=this;m===this.statics.blotName&&!p?(this.children.forEach(function(v){v instanceof o.default||(v=v.wrap(d.blotName,!0)),y.attributes.copy(v)}),this.unwrap()):f.prototype.format.call(this,m,p)},d.prototype.formatAt=function(m,p,y,v){if(this.formats()[y]!=null||l.query(y,l.Scope.ATTRIBUTE)){var g=this.isolate(m,p);g.format(y,v)}else f.prototype.formatAt.call(this,m,p,y,v)},d.prototype.optimize=function(m){f.prototype.optimize.call(this,m);var p=this.formats();if(Object.keys(p).length===0)return this.unwrap();var y=this.next;y instanceof d&&y.prev===this&&c(p,y.formats())&&(y.moveChildren(this),y.remove())},d.blotName="inline",d.scope=l.Scope.INLINE_BLOT,d.tagName="SPAN",d})(o.default);n.default=u}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(18),l=s(1),c=(function(u){i(f,u);function f(){return u!==null&&u.apply(this,arguments)||this}return f.formats=function(d){var m=l.query(f.blotName).tagName;if(d.tagName!==m)return u.formats.call(this,d)},f.prototype.format=function(d,m){l.query(d,l.Scope.BLOCK)!=null&&(d===this.statics.blotName&&!m?this.replaceWith(f.blotName):u.prototype.format.call(this,d,m))},f.prototype.formatAt=function(d,m,p,y){l.query(p,l.Scope.BLOCK)!=null?this.format(p,y):u.prototype.formatAt.call(this,d,m,p,y)},f.prototype.insertAt=function(d,m,p){if(p==null||l.query(m,l.Scope.INLINE)!=null)u.prototype.insertAt.call(this,d,m,p);else{var y=this.split(d),v=l.create(m,p);y.parent.insertBefore(v,y)}},f.prototype.update=function(d,m){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,d,m)},f.blotName="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="P",f})(o.default);n.default=c}),(function(r,n,s){var i=this&&this.__extends||(function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,f){u.__proto__=f}||function(u,f){for(var d in f)f.hasOwnProperty(d)&&(u[d]=f[d])};return function(u,f){c(u,f);function d(){this.constructor=u}u.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(19),l=(function(c){i(u,c);function u(){return c!==null&&c.apply(this,arguments)||this}return u.formats=function(f){},u.prototype.format=function(f,d){c.prototype.formatAt.call(this,0,this.length(),f,d)},u.prototype.formatAt=function(f,d,m,p){f===0&&d===this.length()?this.format(m,p):c.prototype.formatAt.call(this,f,d,m,p)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u})(o.default);n.default=l}),(function(r,n,s){var i=this&&this.__extends||(function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var m in d)d.hasOwnProperty(m)&&(f[m]=d[m])};return function(f,d){u(f,d);function m(){this.constructor=f}f.prototype=d===null?Object.create(d):(m.prototype=d.prototype,new m)}})();Object.defineProperty(n,"__esModule",{value:!0});var o=s(19),l=s(1),c=(function(u){i(f,u);function f(d){var m=u.call(this,d)||this;return m.text=m.statics.value(m.domNode),m}return f.create=function(d){return document.createTextNode(d)},f.value=function(d){var m=d.data;return m.normalize&&(m=m.normalize()),m},f.prototype.deleteAt=function(d,m){this.domNode.data=this.text=this.text.slice(0,d)+this.text.slice(d+m)},f.prototype.index=function(d,m){return this.domNode===d?m:-1},f.prototype.insertAt=function(d,m,p){p==null?(this.text=this.text.slice(0,d)+m+this.text.slice(d),this.domNode.data=this.text):u.prototype.insertAt.call(this,d,m,p)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(d){u.prototype.optimize.call(this,d),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(d,m){return[this.domNode,d]},f.prototype.split=function(d,m){if(m===void 0&&(m=!1),!m){if(d===0)return this;if(d===this.length())return this.next}var p=l.create(this.domNode.splitText(d));return this.parent.insertBefore(p,this.next),this.text=this.statics.value(this.domNode),p},f.prototype.update=function(d,m){var p=this;d.some(function(y){return y.type==="characterData"&&y.target===p.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=l.Scope.INLINE_BLOT,f})(o.default);n.default=c}),(function(r,n,s){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var u=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>u.length)&&(c=u.length),c-=l.length;var f=u.indexOf(l,c);return f!==-1&&f===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),f=u.length>>>0,d=arguments[1],m,p=0;p<f;p++)if(m=u[p],c.call(d,m,p,u))return m}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})}),(function(r,n){var s=-1,i=1,o=0;function l(w,S,P){if(w==S)return w?[[o,w]]:[];(P<0||w.length<P)&&(P=null);var A=d(w,S),T=w.substring(0,A);w=w.substring(A),S=S.substring(A),A=m(w,S);var I=w.substring(w.length-A);w=w.substring(0,w.length-A),S=S.substring(0,S.length-A);var B=c(w,S);return T&&B.unshift([o,T]),I&&B.push([o,I]),y(B),P!=null&&(B=b(B,P)),B=N(B),B}function c(w,S){var P;if(!w)return[[i,S]];if(!S)return[[s,w]];var A=w.length>S.length?w:S,T=w.length>S.length?S:w,I=A.indexOf(T);if(I!=-1)return P=[[i,A.substring(0,I)],[o,T],[i,A.substring(I+T.length)]],w.length>S.length&&(P[0][0]=P[2][0]=s),P;if(T.length==1)return[[s,w],[i,S]];var B=p(w,S);if(B){var E=B[0],C=B[1],M=B[2],q=B[3],G=B[4],Z=l(E,M),te=l(C,q);return Z.concat([[o,G]],te)}return u(w,S)}function u(w,S){for(var P=w.length,A=S.length,T=Math.ceil((P+A)/2),I=T,B=2*T,E=new Array(B),C=new Array(B),M=0;M<B;M++)E[M]=-1,C[M]=-1;E[I+1]=0,C[I+1]=0;for(var q=P-A,G=q%2!=0,Z=0,te=0,ne=0,J=0,ee=0;ee<T;ee++){for(var H=-ee+Z;H<=ee-te;H+=2){var O=I+H,R;H==-ee||H!=ee&&E[O-1]<E[O+1]?R=E[O+1]:R=E[O-1]+1;for(var W=R-H;R<P&&W<A&&w.charAt(R)==S.charAt(W);)R++,W++;if(E[O]=R,R>P)te+=2;else if(W>A)Z+=2;else if(G){var U=I+q-H;if(U>=0&&U<B&&C[U]!=-1){var K=P-C[U];if(R>=K)return f(w,S,R,W)}}}for(var oe=-ee+ne;oe<=ee-J;oe+=2){var U=I+oe,K;oe==-ee||oe!=ee&&C[U-1]<C[U+1]?K=C[U+1]:K=C[U-1]+1;for(var he=K-oe;K<P&&he<A&&w.charAt(P-K-1)==S.charAt(A-he-1);)K++,he++;if(C[U]=K,K>P)J+=2;else if(he>A)ne+=2;else if(!G){var O=I+q-oe;if(O>=0&&O<B&&E[O]!=-1){var R=E[O],W=I+R-O;if(K=P-K,R>=K)return f(w,S,R,W)}}}}return[[s,w],[i,S]]}function f(w,S,P,A){var T=w.substring(0,P),I=S.substring(0,A),B=w.substring(P),E=S.substring(A),C=l(T,I),M=l(B,E);return C.concat(M)}function d(w,S){if(!w||!S||w.charAt(0)!=S.charAt(0))return 0;for(var P=0,A=Math.min(w.length,S.length),T=A,I=0;P<T;)w.substring(I,T)==S.substring(I,T)?(P=T,I=P):A=T,T=Math.floor((A-P)/2+P);return T}function m(w,S){if(!w||!S||w.charAt(w.length-1)!=S.charAt(S.length-1))return 0;for(var P=0,A=Math.min(w.length,S.length),T=A,I=0;P<T;)w.substring(w.length-T,w.length-I)==S.substring(S.length-T,S.length-I)?(P=T,I=P):A=T,T=Math.floor((A-P)/2+P);return T}function p(w,S){var P=w.length>S.length?w:S,A=w.length>S.length?S:w;if(P.length<4||A.length*2<P.length)return null;function T(te,ne,J){for(var ee=te.substring(J,J+Math.floor(te.length/4)),H=-1,O="",R,W,U,K;(H=ne.indexOf(ee,H+1))!=-1;){var oe=d(te.substring(J),ne.substring(H)),he=m(te.substring(0,J),ne.substring(0,H));O.length<he+oe&&(O=ne.substring(H-he,H)+ne.substring(H,H+oe),R=te.substring(0,J-he),W=te.substring(J+oe),U=ne.substring(0,H-he),K=ne.substring(H+oe))}return O.length*2>=te.length?[R,W,U,K,O]:null}var I=T(P,A,Math.ceil(P.length/4)),B=T(P,A,Math.ceil(P.length/2)),E;if(!I&&!B)return null;B?I?E=I[4].length>B[4].length?I:B:E=B:E=I;var C,M,q,G;w.length>S.length?(C=E[0],M=E[1],q=E[2],G=E[3]):(q=E[0],G=E[1],C=E[2],M=E[3]);var Z=E[4];return[C,M,q,G,Z]}function y(w){w.push([o,""]);for(var S=0,P=0,A=0,T="",I="",B;S<w.length;)switch(w[S][0]){case i:A++,I+=w[S][1],S++;break;case s:P++,T+=w[S][1],S++;break;case o:P+A>1?(P!==0&&A!==0&&(B=d(I,T),B!==0&&(S-P-A>0&&w[S-P-A-1][0]==o?w[S-P-A-1][1]+=I.substring(0,B):(w.splice(0,0,[o,I.substring(0,B)]),S++),I=I.substring(B),T=T.substring(B)),B=m(I,T),B!==0&&(w[S][1]=I.substring(I.length-B)+w[S][1],I=I.substring(0,I.length-B),T=T.substring(0,T.length-B))),P===0?w.splice(S-A,P+A,[i,I]):A===0?w.splice(S-P,P+A,[s,T]):w.splice(S-P-A,P+A,[s,T],[i,I]),S=S-P-A+(P?1:0)+(A?1:0)+1):S!==0&&w[S-1][0]==o?(w[S-1][1]+=w[S][1],w.splice(S,1)):S++,A=0,P=0,T="",I="";break}w[w.length-1][1]===""&&w.pop();var E=!1;for(S=1;S<w.length-1;)w[S-1][0]==o&&w[S+1][0]==o&&(w[S][1].substring(w[S][1].length-w[S-1][1].length)==w[S-1][1]?(w[S][1]=w[S-1][1]+w[S][1].substring(0,w[S][1].length-w[S-1][1].length),w[S+1][1]=w[S-1][1]+w[S+1][1],w.splice(S-1,1),E=!0):w[S][1].substring(0,w[S+1][1].length)==w[S+1][1]&&(w[S-1][1]+=w[S+1][1],w[S][1]=w[S][1].substring(w[S+1][1].length)+w[S+1][1],w.splice(S+1,1),E=!0)),S++;E&&y(w)}var v=l;v.INSERT=i,v.DELETE=s,v.EQUAL=o,r.exports=v;function g(w,S){if(S===0)return[o,w];for(var P=0,A=0;A<w.length;A++){var T=w[A];if(T[0]===s||T[0]===o){var I=P+T[1].length;if(S===I)return[A+1,w];if(S<I){w=w.slice();var B=S-P,E=[T[0],T[1].slice(0,B)],C=[T[0],T[1].slice(B)];return w.splice(A,1,E,C),[A+1,w]}else P=I}}throw new Error("cursor_pos is out of bounds!")}function b(w,S){var P=g(w,S),A=P[1],T=P[0],I=A[T],B=A[T+1];if(I==null)return w;if(I[0]!==o)return w;if(B!=null&&I[1]+B[1]===B[1]+I[1])return A.splice(T,2,B,I),j(A,T,2);if(B!=null&&B[1].indexOf(I[1])===0){A.splice(T,2,[B[0],I[1]],[0,I[1]]);var E=B[1].slice(I[1].length);return E.length>0&&A.splice(T+2,0,[B[0],E]),j(A,T,3)}else return w}function N(w){for(var S=!1,P=function(B){return B.charCodeAt(0)>=56320&&B.charCodeAt(0)<=57343},A=function(B){return B.charCodeAt(B.length-1)>=55296&&B.charCodeAt(B.length-1)<=56319},T=2;T<w.length;T+=1)w[T-2][0]===o&&A(w[T-2][1])&&w[T-1][0]===s&&P(w[T-1][1])&&w[T][0]===i&&P(w[T][1])&&(S=!0,w[T-1][1]=w[T-2][1].slice(-1)+w[T-1][1],w[T][1]=w[T-2][1].slice(-1)+w[T][1],w[T-2][1]=w[T-2][1].slice(0,-1));if(!S)return w;for(var I=[],T=0;T<w.length;T+=1)w[T][1].length>0&&I.push(w[T]);return I}function j(w,S,P){for(var A=S+P-1;A>=0&&A>=S-1;A--)if(A+1<w.length){var T=w[A],I=w[A+1];T[0]===I[1]&&w.splice(A,2,[T[0],T[1]+I[1]])}return w}}),(function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:s,n.shim=s;function s(i){var o=[];for(var l in i)o.push(l);return o}}),(function(r,n){var s=(function(){return Object.prototype.toString.call(arguments)})()=="[object Arguments]";n=r.exports=s?i:o,n.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}n.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}}),(function(r,n){var s=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(u,f,d){this.fn=u,this.context=f,this.once=d||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],d,m;if(this._eventsCount===0)return f;for(m in d=this._events)s.call(d,m)&&f.push(i?m.slice(1):m);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(d)):f},c.prototype.listeners=function(f,d){var m=i?i+f:f,p=this._events[m];if(d)return!!p;if(!p)return[];if(p.fn)return[p.fn];for(var y=0,v=p.length,g=new Array(v);y<v;y++)g[y]=p[y].fn;return g},c.prototype.emit=function(f,d,m,p,y,v){var g=i?i+f:f;if(!this._events[g])return!1;var b=this._events[g],N=arguments.length,j,w;if(b.fn){switch(b.once&&this.removeListener(f,b.fn,void 0,!0),N){case 1:return b.fn.call(b.context),!0;case 2:return b.fn.call(b.context,d),!0;case 3:return b.fn.call(b.context,d,m),!0;case 4:return b.fn.call(b.context,d,m,p),!0;case 5:return b.fn.call(b.context,d,m,p,y),!0;case 6:return b.fn.call(b.context,d,m,p,y,v),!0}for(w=1,j=new Array(N-1);w<N;w++)j[w-1]=arguments[w];b.fn.apply(b.context,j)}else{var S=b.length,P;for(w=0;w<S;w++)switch(b[w].once&&this.removeListener(f,b[w].fn,void 0,!0),N){case 1:b[w].fn.call(b[w].context);break;case 2:b[w].fn.call(b[w].context,d);break;case 3:b[w].fn.call(b[w].context,d,m);break;case 4:b[w].fn.call(b[w].context,d,m,p);break;default:if(!j)for(P=1,j=new Array(N-1);P<N;P++)j[P-1]=arguments[P];b[w].fn.apply(b[w].context,j)}}return!0},c.prototype.on=function(f,d,m){var p=new l(d,m||this),y=i?i+f:f;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},c.prototype.once=function(f,d,m){var p=new l(d,m||this,!0),y=i?i+f:f;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],p]:this._events[y].push(p):(this._events[y]=p,this._eventsCount++),this},c.prototype.removeListener=function(f,d,m,p){var y=i?i+f:f;if(!this._events[y])return this;if(!d)return--this._eventsCount===0?this._events=new o:delete this._events[y],this;var v=this._events[y];if(v.fn)v.fn===d&&(!p||v.once)&&(!m||v.context===m)&&(--this._eventsCount===0?this._events=new o:delete this._events[y]);else{for(var g=0,b=[],N=v.length;g<N;g++)(v[g].fn!==d||p&&!v[g].once||m&&v[g].context!==m)&&b.push(v[g]);b.length?this._events[y]=b.length===1?b[0]:b:--this._eventsCount===0?this._events=new o:delete this._events[y]}return this},c.prototype.removeAllListeners=function(f){var d;return f?(d=i?i+f:f,this._events[d]&&(--this._eventsCount===0?this._events=new o:delete this._events[d])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ve){return typeof ve}:function(ve){return ve&&typeof Symbol=="function"&&ve.constructor===Symbol&&ve!==Symbol.prototype?"symbol":typeof ve},o=(function(){function ve(Ee,pe){var ue=[],Pe=!0,Ne=!1,Be=void 0;try{for(var nt=Ee[Symbol.iterator](),mt;!(Pe=(mt=nt.next()).done)&&(ue.push(mt.value),!(pe&&ue.length===pe));Pe=!0);}catch(kt){Ne=!0,Be=kt}finally{try{!Pe&&nt.return&&nt.return()}finally{if(Ne)throw Be}}return ue}return function(Ee,pe){if(Array.isArray(Ee))return Ee;if(Symbol.iterator in Object(Ee))return ve(Ee,pe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),l=(function(){function ve(Ee,pe){for(var ue=0;ue<pe.length;ue++){var Pe=pe[ue];Pe.enumerable=Pe.enumerable||!1,Pe.configurable=!0,"value"in Pe&&(Pe.writable=!0),Object.defineProperty(Ee,Pe.key,Pe)}}return function(Ee,pe,ue){return pe&&ve(Ee.prototype,pe),ue&&ve(Ee,ue),Ee}})(),c=s(3),u=C(c),f=s(2),d=C(f),m=s(0),p=C(m),y=s(5),v=C(y),g=s(10),b=C(g),N=s(9),j=C(N),w=s(36),S=s(37),P=s(13),A=C(P),T=s(26),I=s(38),B=s(39),E=s(40);function C(ve){return ve&&ve.__esModule?ve:{default:ve}}function M(ve,Ee,pe){return Ee in ve?Object.defineProperty(ve,Ee,{value:pe,enumerable:!0,configurable:!0,writable:!0}):ve[Ee]=pe,ve}function q(ve,Ee){if(!(ve instanceof Ee))throw new TypeError("Cannot call a class as a function")}function G(ve,Ee){if(!ve)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Ee&&(typeof Ee=="object"||typeof Ee=="function")?Ee:ve}function Z(ve,Ee){if(typeof Ee!="function"&&Ee!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Ee);ve.prototype=Object.create(Ee&&Ee.prototype,{constructor:{value:ve,enumerable:!1,writable:!0,configurable:!0}}),Ee&&(Object.setPrototypeOf?Object.setPrototypeOf(ve,Ee):ve.__proto__=Ee)}var te=(0,b.default)("quill:clipboard"),ne="__ql-matcher",J=[[Node.TEXT_NODE,we],[Node.TEXT_NODE,Fe],["br",Le],[Node.ELEMENT_NODE,Fe],[Node.ELEMENT_NODE,ce],[Node.ELEMENT_NODE,fe],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,Q],["li",He],["b",he.bind(he,"bold")],["i",he.bind(he,"italic")],["style",le]],ee=[w.AlignAttribute,I.DirectionAttribute].reduce(function(ve,Ee){return ve[Ee.keyName]=Ee,ve},{}),H=[w.AlignStyle,S.BackgroundStyle,T.ColorStyle,I.DirectionStyle,B.FontStyle,E.SizeStyle].reduce(function(ve,Ee){return ve[Ee.keyName]=Ee,ve},{}),O=(function(ve){Z(Ee,ve);function Ee(pe,ue){q(this,Ee);var Pe=G(this,(Ee.__proto__||Object.getPrototypeOf(Ee)).call(this,pe,ue));return Pe.quill.root.addEventListener("paste",Pe.onPaste.bind(Pe)),Pe.container=Pe.quill.addContainer("ql-clipboard"),Pe.container.setAttribute("contenteditable",!0),Pe.container.setAttribute("tabindex",-1),Pe.matchers=[],J.concat(Pe.options.matchers).forEach(function(Ne){var Be=o(Ne,2),nt=Be[0],mt=Be[1];!ue.matchVisual&&mt===fe||Pe.addMatcher(nt,mt)}),Pe}return l(Ee,[{key:"addMatcher",value:function(ue,Pe){this.matchers.push([ue,Pe])}},{key:"convert",value:function(ue){if(typeof ue=="string")return this.container.innerHTML=ue.replace(/\>\r?\n +\</g,"><"),this.convert();var Pe=this.quill.getFormat(this.quill.selection.savedRange.index);if(Pe[A.default.blotName]){var Ne=this.container.innerText;return this.container.innerHTML="",new d.default().insert(Ne,M({},A.default.blotName,Pe[A.default.blotName]))}var Be=this.prepareMatching(),nt=o(Be,2),mt=nt[0],kt=nt[1],Re=oe(this.container,mt,kt);return U(Re,`
`)&&Re.ops[Re.ops.length-1].attributes==null&&(Re=Re.compose(new d.default().retain(Re.length()-1).delete(1))),te.log("convert",this.container.innerHTML,Re),this.container.innerHTML="",Re}},{key:"dangerouslyPasteHTML",value:function(ue,Pe){var Ne=arguments.length>2&&arguments[2]!==void 0?arguments[2]:v.default.sources.API;if(typeof ue=="string")this.quill.setContents(this.convert(ue),Pe),this.quill.setSelection(0,v.default.sources.SILENT);else{var Be=this.convert(Pe);this.quill.updateContents(new d.default().retain(ue).concat(Be),Ne),this.quill.setSelection(ue+Be.length(),v.default.sources.SILENT)}}},{key:"onPaste",value:function(ue){var Pe=this;if(!(ue.defaultPrevented||!this.quill.isEnabled())){var Ne=this.quill.getSelection(),Be=new d.default().retain(Ne.index),nt=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(v.default.sources.SILENT),setTimeout(function(){Be=Be.concat(Pe.convert()).delete(Ne.length),Pe.quill.updateContents(Be,v.default.sources.USER),Pe.quill.setSelection(Be.length()-Ne.length,v.default.sources.SILENT),Pe.quill.scrollingContainer.scrollTop=nt,Pe.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var ue=this,Pe=[],Ne=[];return this.matchers.forEach(function(Be){var nt=o(Be,2),mt=nt[0],kt=nt[1];switch(mt){case Node.TEXT_NODE:Ne.push(kt);break;case Node.ELEMENT_NODE:Pe.push(kt);break;default:[].forEach.call(ue.container.querySelectorAll(mt),function(Re){Re[ne]=Re[ne]||[],Re[ne].push(kt)});break}}),[Pe,Ne]}}]),Ee})(j.default);O.DEFAULTS={matchers:[],matchVisual:!0};function R(ve,Ee,pe){return(typeof Ee>"u"?"undefined":i(Ee))==="object"?Object.keys(Ee).reduce(function(ue,Pe){return R(ue,Pe,Ee[Pe])},ve):ve.reduce(function(ue,Pe){return Pe.attributes&&Pe.attributes[Ee]?ue.push(Pe):ue.insert(Pe.insert,(0,u.default)({},M({},Ee,pe),Pe.attributes))},new d.default)}function W(ve){if(ve.nodeType!==Node.ELEMENT_NODE)return{};var Ee="__ql-computed-style";return ve[Ee]||(ve[Ee]=window.getComputedStyle(ve))}function U(ve,Ee){for(var pe="",ue=ve.ops.length-1;ue>=0&&pe.length<Ee.length;--ue){var Pe=ve.ops[ue];if(typeof Pe.insert!="string")break;pe=Pe.insert+pe}return pe.slice(-1*Ee.length)===Ee}function K(ve){if(ve.childNodes.length===0)return!1;var Ee=W(ve);return["block","list-item"].indexOf(Ee.display)>-1}function oe(ve,Ee,pe){return ve.nodeType===ve.TEXT_NODE?pe.reduce(function(ue,Pe){return Pe(ve,ue)},new d.default):ve.nodeType===ve.ELEMENT_NODE?[].reduce.call(ve.childNodes||[],function(ue,Pe){var Ne=oe(Pe,Ee,pe);return Pe.nodeType===ve.ELEMENT_NODE&&(Ne=Ee.reduce(function(Be,nt){return nt(Pe,Be)},Ne),Ne=(Pe[ne]||[]).reduce(function(Be,nt){return nt(Pe,Be)},Ne)),ue.concat(Ne)},new d.default):new d.default}function he(ve,Ee,pe){return R(pe,ve,!0)}function ie(ve,Ee){var pe=p.default.Attributor.Attribute.keys(ve),ue=p.default.Attributor.Class.keys(ve),Pe=p.default.Attributor.Style.keys(ve),Ne={};return pe.concat(ue).concat(Pe).forEach(function(Be){var nt=p.default.query(Be,p.default.Scope.ATTRIBUTE);nt!=null&&(Ne[nt.attrName]=nt.value(ve),Ne[nt.attrName])||(nt=ee[Be],nt!=null&&(nt.attrName===Be||nt.keyName===Be)&&(Ne[nt.attrName]=nt.value(ve)||void 0),nt=H[Be],nt!=null&&(nt.attrName===Be||nt.keyName===Be)&&(nt=H[Be],Ne[nt.attrName]=nt.value(ve)||void 0))}),Object.keys(Ne).length>0&&(Ee=R(Ee,Ne)),Ee}function ce(ve,Ee){var pe=p.default.query(ve);if(pe==null)return Ee;if(pe.prototype instanceof p.default.Embed){var ue={},Pe=pe.value(ve);Pe!=null&&(ue[pe.blotName]=Pe,Ee=new d.default().insert(ue,pe.formats(ve)))}else typeof pe.formats=="function"&&(Ee=R(Ee,pe.blotName,pe.formats(ve)));return Ee}function Le(ve,Ee){return U(Ee,`
`)||Ee.insert(`
`),Ee}function le(){return new d.default}function He(ve,Ee){var pe=p.default.query(ve);if(pe==null||pe.blotName!=="list-item"||!U(Ee,`
`))return Ee;for(var ue=-1,Pe=ve.parentNode;!Pe.classList.contains("ql-clipboard");)(p.default.query(Pe)||{}).blotName==="list"&&(ue+=1),Pe=Pe.parentNode;return ue<=0?Ee:Ee.compose(new d.default().retain(Ee.length()-1).retain(1,{indent:ue}))}function Fe(ve,Ee){return U(Ee,`
`)||(K(ve)||Ee.length()>0&&ve.nextSibling&&K(ve.nextSibling))&&Ee.insert(`
`),Ee}function fe(ve,Ee){if(K(ve)&&ve.nextElementSibling!=null&&!U(Ee,`

`)){var pe=ve.offsetHeight+parseFloat(W(ve).marginTop)+parseFloat(W(ve).marginBottom);ve.nextElementSibling.offsetTop>ve.offsetTop+pe*1.5&&Ee.insert(`
`)}return Ee}function Q(ve,Ee){var pe={},ue=ve.style||{};return ue.fontStyle&&W(ve).fontStyle==="italic"&&(pe.italic=!0),ue.fontWeight&&(W(ve).fontWeight.startsWith("bold")||parseInt(W(ve).fontWeight)>=700)&&(pe.bold=!0),Object.keys(pe).length>0&&(Ee=R(Ee,pe)),parseFloat(ue.textIndent||0)>0&&(Ee=new d.default().insert("	").concat(Ee)),Ee}function we(ve,Ee){var pe=ve.data;if(ve.parentNode.tagName==="O:P")return Ee.insert(pe.trim());if(pe.trim().length===0&&ve.parentNode.classList.contains("ql-clipboard"))return Ee;if(!W(ve.parentNode).whiteSpace.startsWith("pre")){var ue=function(Ne,Be){return Be=Be.replace(/[^\u00a0]/g,""),Be.length<1&&Ne?" ":Be};pe=pe.replace(/\r\n/g," ").replace(/\n/g," "),pe=pe.replace(/\s\s+/g,ue.bind(ue,!0)),(ve.previousSibling==null&&K(ve.parentNode)||ve.previousSibling!=null&&K(ve.previousSibling))&&(pe=pe.replace(/^\s+/,ue.bind(ue,!1))),(ve.nextSibling==null&&K(ve.parentNode)||ve.nextSibling!=null&&K(ve.nextSibling))&&(pe=pe.replace(/\s+$/,ue.bind(ue,!1)))}return Ee.insert(pe)}n.default=O,n.matchAttributor=ie,n.matchBlot=ce,n.matchNewline=Fe,n.matchSpacing=fe,n.matchText=we}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var N=g[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,g);if(N===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(b)}},l=s(6),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"optimize",value:function(b){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,b),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),v})(c.default);p.blotName="bold",p.tagName=["STRONG","B"],n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var i=(function(){function E(C,M){var q=[],G=!0,Z=!1,te=void 0;try{for(var ne=C[Symbol.iterator](),J;!(G=(J=ne.next()).done)&&(q.push(J.value),!(M&&q.length===M));G=!0);}catch(ee){Z=!0,te=ee}finally{try{!G&&ne.return&&ne.return()}finally{if(Z)throw te}}return q}return function(C,M){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return E(C,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=(function(){function E(C,M){for(var q=0;q<M.length;q++){var G=M[q];G.enumerable=G.enumerable||!1,G.configurable=!0,"value"in G&&(G.writable=!0),Object.defineProperty(C,G.key,G)}}return function(C,M,q){return M&&E(C.prototype,M),q&&E(C,q),C}})(),l=s(2),c=b(l),u=s(0),f=b(u),d=s(5),m=b(d),p=s(10),y=b(p),v=s(9),g=b(v);function b(E){return E&&E.__esModule?E:{default:E}}function N(E,C,M){return C in E?Object.defineProperty(E,C,{value:M,enumerable:!0,configurable:!0,writable:!0}):E[C]=M,E}function j(E,C){if(!(E instanceof C))throw new TypeError("Cannot call a class as a function")}function w(E,C){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:E}function S(E,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);E.prototype=Object.create(C&&C.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(E,C):E.__proto__=C)}var P=(0,y.default)("quill:toolbar"),A=(function(E){S(C,E);function C(M,q){j(this,C);var G=w(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,M,q));if(Array.isArray(G.options.container)){var Z=document.createElement("div");I(Z,G.options.container),M.container.parentNode.insertBefore(Z,M.container),G.container=Z}else typeof G.options.container=="string"?G.container=document.querySelector(G.options.container):G.container=G.options.container;if(!(G.container instanceof HTMLElement)){var te;return te=P.error("Container required for toolbar",G.options),w(G,te)}return G.container.classList.add("ql-toolbar"),G.controls=[],G.handlers={},Object.keys(G.options.handlers).forEach(function(ne){G.addHandler(ne,G.options.handlers[ne])}),[].forEach.call(G.container.querySelectorAll("button, select"),function(ne){G.attach(ne)}),G.quill.on(m.default.events.EDITOR_CHANGE,function(ne,J){ne===m.default.events.SELECTION_CHANGE&&G.update(J)}),G.quill.on(m.default.events.SCROLL_OPTIMIZE,function(){var ne=G.quill.selection.getRange(),J=i(ne,1),ee=J[0];G.update(ee)}),G}return o(C,[{key:"addHandler",value:function(q,G){this.handlers[q]=G}},{key:"attach",value:function(q){var G=this,Z=[].find.call(q.classList,function(ne){return ne.indexOf("ql-")===0});if(Z){if(Z=Z.slice(3),q.tagName==="BUTTON"&&q.setAttribute("type","button"),this.handlers[Z]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Z]==null){P.warn("ignoring attaching to disabled format",Z,q);return}if(f.default.query(Z)==null){P.warn("ignoring attaching to nonexistent format",Z,q);return}}var te=q.tagName==="SELECT"?"change":"click";q.addEventListener(te,function(ne){var J=void 0;if(q.tagName==="SELECT"){if(q.selectedIndex<0)return;var ee=q.options[q.selectedIndex];ee.hasAttribute("selected")?J=!1:J=ee.value||!1}else q.classList.contains("ql-active")?J=!1:J=q.value||!q.hasAttribute("value"),ne.preventDefault();G.quill.focus();var H=G.quill.selection.getRange(),O=i(H,1),R=O[0];if(G.handlers[Z]!=null)G.handlers[Z].call(G,J);else if(f.default.query(Z).prototype instanceof f.default.Embed){if(J=prompt("Enter "+Z),!J)return;G.quill.updateContents(new c.default().retain(R.index).delete(R.length).insert(N({},Z,J)),m.default.sources.USER)}else G.quill.format(Z,J,m.default.sources.USER);G.update(R)}),this.controls.push([Z,q])}}},{key:"update",value:function(q){var G=q==null?{}:this.quill.getFormat(q);this.controls.forEach(function(Z){var te=i(Z,2),ne=te[0],J=te[1];if(J.tagName==="SELECT"){var ee=void 0;if(q==null)ee=null;else if(G[ne]==null)ee=J.querySelector("option[selected]");else if(!Array.isArray(G[ne])){var H=G[ne];typeof H=="string"&&(H=H.replace(/\"/g,'\\"')),ee=J.querySelector('option[value="'+H+'"]')}ee==null?(J.value="",J.selectedIndex=-1):ee.selected=!0}else if(q==null)J.classList.remove("ql-active");else if(J.hasAttribute("value")){var O=G[ne]===J.getAttribute("value")||G[ne]!=null&&G[ne].toString()===J.getAttribute("value")||G[ne]==null&&!J.getAttribute("value");J.classList.toggle("ql-active",O)}else J.classList.toggle("ql-active",G[ne]!=null)})}}]),C})(g.default);A.DEFAULTS={};function T(E,C,M){var q=document.createElement("button");q.setAttribute("type","button"),q.classList.add("ql-"+C),M!=null&&(q.value=M),E.appendChild(q)}function I(E,C){Array.isArray(C[0])||(C=[C]),C.forEach(function(M){var q=document.createElement("span");q.classList.add("ql-formats"),M.forEach(function(G){if(typeof G=="string")T(q,G);else{var Z=Object.keys(G)[0],te=G[Z];Array.isArray(te)?B(q,Z,te):T(q,Z,te)}}),E.appendChild(q)})}function B(E,C,M){var q=document.createElement("select");q.classList.add("ql-"+C),M.forEach(function(G){var Z=document.createElement("option");G!==!1?Z.setAttribute("value",G):Z.setAttribute("selected","selected"),q.appendChild(Z)}),E.appendChild(q)}A.DEFAULTS={container:null,handlers:{clean:function(){var C=this,M=this.quill.getSelection();if(M!=null)if(M.length==0){var q=this.quill.getFormat();Object.keys(q).forEach(function(G){f.default.query(G,f.default.Scope.INLINE)!=null&&C.quill.format(G,!1)})}else this.quill.removeFormat(M,m.default.sources.USER)},direction:function(C){var M=this.quill.getFormat().align;C==="rtl"&&M==null?this.quill.format("align","right",m.default.sources.USER):!C&&M==="right"&&this.quill.format("align",!1,m.default.sources.USER),this.quill.format("direction",C,m.default.sources.USER)},indent:function(C){var M=this.quill.getSelection(),q=this.quill.getFormat(M),G=parseInt(q.indent||0);if(C==="+1"||C==="-1"){var Z=C==="+1"?1:-1;q.direction==="rtl"&&(Z*=-1),this.quill.format("indent",G+Z,m.default.sources.USER)}},link:function(C){C===!0&&(C=prompt("Enter link URL:")),this.quill.format("link",C,m.default.sources.USER)},list:function(C){var M=this.quill.getSelection(),q=this.quill.getFormat(M);C==="check"?q.list==="checked"||q.list==="unchecked"?this.quill.format("list",!1,m.default.sources.USER):this.quill.format("list","unchecked",m.default.sources.USER):this.quill.format("list",C,m.default.sources.USER)}}},n.default=A,n.addControls=I}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var N=g[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,g);if(N===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(b)}},l=s(28),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(g,b){f(this,v);var N=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return N.label.innerHTML=b,N.container.classList.add("ql-color-picker"),[].slice.call(N.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(j){j.classList.add("ql-primary")}),N}return i(v,[{key:"buildItem",value:function(b){var N=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"buildItem",this).call(this,b);return N.style.backgroundColor=b.getAttribute("value")||"",N}},{key:"selectItem",value:function(b,N){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,b,N);var j=this.label.querySelector(".ql-color-label"),w=b&&b.getAttribute("data-value")||"";j&&(j.tagName==="line"?j.style.stroke=w:j.style.fill=w)}}]),v})(c.default);n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var N=g[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,g);if(N===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(b)}},l=s(28),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(g,b){f(this,v);var N=d(this,(v.__proto__||Object.getPrototypeOf(v)).call(this,g));return N.container.classList.add("ql-icon-picker"),[].forEach.call(N.container.querySelectorAll(".ql-picker-item"),function(j){j.innerHTML=b[j.getAttribute("data-value")||""]}),N.defaultItem=N.container.querySelector(".ql-selected"),N.selectItem(N.defaultItem),N}return i(v,[{key:"selectItem",value:function(b,N){o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"selectItem",this).call(this,b,N),b=b||this.defaultItem,this.label.innerHTML=b.innerHTML}}]),v})(c.default);n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function c(u,f){for(var d=0;d<f.length;d++){var m=f[d];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}return function(u,f,d){return f&&c(u.prototype,f),d&&c(u,d),u}})();function o(c,u){if(!(c instanceof u))throw new TypeError("Cannot call a class as a function")}var l=(function(){function c(u,f){var d=this;o(this,c),this.quill=u,this.boundsContainer=f||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){d.root.style.marginTop=-1*d.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var d=f.left+f.width/2-this.root.offsetWidth/2,m=f.bottom+this.quill.root.scrollTop;this.root.style.left=d+"px",this.root.style.top=m+"px",this.root.classList.remove("ql-flip");var p=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),v=0;if(y.right>p.right&&(v=p.right-y.right,this.root.style.left=d+v+"px"),y.left<p.left&&(v=p.left-y.left,this.root.style.left=d+v+"px"),y.bottom>p.bottom){var g=y.bottom-y.top,b=f.bottom-f.top+g;this.root.style.top=m-b+"px",this.root.classList.add("ql-flip")}return v}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c})();n.default=l}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function B(E,C){var M=[],q=!0,G=!1,Z=void 0;try{for(var te=E[Symbol.iterator](),ne;!(q=(ne=te.next()).done)&&(M.push(ne.value),!(C&&M.length===C));q=!0);}catch(J){G=!0,Z=J}finally{try{!q&&te.return&&te.return()}finally{if(G)throw Z}}return M}return function(E,C){if(Array.isArray(E))return E;if(Symbol.iterator in Object(E))return B(E,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}})(),o=function B(E,C,M){E===null&&(E=Function.prototype);var q=Object.getOwnPropertyDescriptor(E,C);if(q===void 0){var G=Object.getPrototypeOf(E);return G===null?void 0:B(G,C,M)}else{if("value"in q)return q.value;var Z=q.get;return Z===void 0?void 0:Z.call(M)}},l=(function(){function B(E,C){for(var M=0;M<C.length;M++){var q=C[M];q.enumerable=q.enumerable||!1,q.configurable=!0,"value"in q&&(q.writable=!0),Object.defineProperty(E,q.key,q)}}return function(E,C,M){return C&&B(E.prototype,C),M&&B(E,M),E}})(),c=s(3),u=j(c),f=s(8),d=j(f),m=s(43),p=j(m),y=s(27),v=j(y),g=s(15),b=s(41),N=j(b);function j(B){return B&&B.__esModule?B:{default:B}}function w(B,E){if(!(B instanceof E))throw new TypeError("Cannot call a class as a function")}function S(B,E){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:B}function P(B,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);B.prototype=Object.create(E&&E.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(B,E):B.__proto__=E)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],T=(function(B){P(E,B);function E(C,M){w(this,E),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=A);var q=S(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,C,M));return q.quill.container.classList.add("ql-snow"),q}return l(E,[{key:"extendToolbar",value:function(M){M.container.classList.add("ql-snow"),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),N.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),N.default),this.tooltip=new I(this.quill,this.options.bounds),M.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(q,G){M.handlers.link.call(M,!G.format.link)})}}]),E})(p.default);T.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(E){if(E){var C=this.quill.getSelection();if(C==null||C.length==0)return;var M=this.quill.getText(C);/^\S+@\S+\.\S+$/.test(M)&&M.indexOf("mailto:")!==0&&(M="mailto:"+M);var q=this.quill.theme.tooltip;q.edit("link",M)}else this.quill.format("link",!1)}}}}});var I=(function(B){P(E,B);function E(C,M){w(this,E);var q=S(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,C,M));return q.preview=q.root.querySelector("a.ql-preview"),q}return l(E,[{key:"listen",value:function(){var M=this;o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(q){M.root.classList.contains("ql-editing")?M.save():M.edit("link",M.preview.textContent),q.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(q){if(M.linkRange!=null){var G=M.linkRange;M.restoreFocus(),M.quill.formatText(G,"link",!1,d.default.sources.USER),delete M.linkRange}q.preventDefault(),M.hide()}),this.quill.on(d.default.events.SELECTION_CHANGE,function(q,G,Z){if(q!=null){if(q.length===0&&Z===d.default.sources.USER){var te=M.quill.scroll.descendant(v.default,q.index),ne=i(te,2),J=ne[0],ee=ne[1];if(J!=null){M.linkRange=new g.Range(q.index-ee,J.length());var H=v.default.formats(J.domNode);M.preview.textContent=H,M.preview.setAttribute("href",H),M.show(),M.position(M.quill.getBounds(M.linkRange));return}}else delete M.linkRange;M.hide()}})}},{key:"show",value:function(){o(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),E})(m.BaseTooltip);I.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=T}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(29),o=Pe(i),l=s(36),c=s(38),u=s(64),f=s(65),d=Pe(f),m=s(66),p=Pe(m),y=s(67),v=Pe(y),g=s(37),b=s(26),N=s(39),j=s(40),w=s(56),S=Pe(w),P=s(68),A=Pe(P),T=s(27),I=Pe(T),B=s(69),E=Pe(B),C=s(70),M=Pe(C),q=s(71),G=Pe(q),Z=s(72),te=Pe(Z),ne=s(73),J=Pe(ne),ee=s(13),H=Pe(ee),O=s(74),R=Pe(O),W=s(75),U=Pe(W),K=s(57),oe=Pe(K),he=s(41),ie=Pe(he),ce=s(28),Le=Pe(ce),le=s(59),He=Pe(le),Fe=s(60),fe=Pe(Fe),Q=s(61),we=Pe(Q),ve=s(108),Ee=Pe(ve),pe=s(62),ue=Pe(pe);function Pe(Ne){return Ne&&Ne.__esModule?Ne:{default:Ne}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":g.BackgroundClass,"attributors/class/color":b.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":N.FontClass,"attributors/class/size":j.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":g.BackgroundStyle,"attributors/style/color":b.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":N.FontStyle,"attributors/style/size":j.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":u.IndentClass,"formats/background":g.BackgroundStyle,"formats/color":b.ColorStyle,"formats/font":N.FontClass,"formats/size":j.SizeClass,"formats/blockquote":d.default,"formats/code-block":H.default,"formats/header":p.default,"formats/list":v.default,"formats/bold":S.default,"formats/code":ee.Code,"formats/italic":A.default,"formats/link":I.default,"formats/script":E.default,"formats/strike":M.default,"formats/underline":G.default,"formats/image":te.default,"formats/video":J.default,"formats/list/item":y.ListItem,"modules/formula":R.default,"modules/syntax":U.default,"modules/toolbar":oe.default,"themes/bubble":Ee.default,"themes/snow":ue.default,"ui/icons":ie.default,"ui/picker":Le.default,"ui/icon-picker":fe.default,"ui/color-picker":He.default,"ui/tooltip":we.default},!0),n.default=o.default}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var i=(function(){function v(g,b){for(var N=0;N<b.length;N++){var j=b[N];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(g,j.key,j)}}return function(g,b,N){return b&&v(g.prototype,b),N&&v(g,N),g}})(),o=function v(g,b,N){g===null&&(g=Function.prototype);var j=Object.getOwnPropertyDescriptor(g,b);if(j===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:v(w,b,N)}else{if("value"in j)return j.value;var S=j.get;return S===void 0?void 0:S.call(N)}},l=s(0),c=u(l);function u(v){return v&&v.__esModule?v:{default:v}}function f(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function d(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function m(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var p=(function(v){m(g,v);function g(){return f(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"add",value:function(N,j){if(j==="+1"||j==="-1"){var w=this.value(N)||0;j=j==="+1"?w+1:w-1}return j===0?(this.remove(N),!0):o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"add",this).call(this,N,j)}},{key:"canAdd",value:function(N,j){return o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,N,j)||o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"canAdd",this).call(this,N,parseInt(j))}},{key:"value",value:function(N){return parseInt(o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,N))||void 0}}]),g})(c.default.Attributor.Class),y=new p("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=y}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(4),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);d.blotName="blockquote",d.tagName="blockquote",n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function p(y,v){for(var g=0;g<v.length;g++){var b=v[g];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(y,b.key,b)}}return function(y,v,g){return v&&p(y.prototype,v),g&&p(y,g),y}})(),o=s(4),l=c(o);function c(p){return p&&p.__esModule?p:{default:p}}function u(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function f(p,y){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:p}function d(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(p,y):p.__proto__=y)}var m=(function(p){d(y,p);function y(){return u(this,y),f(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,null,[{key:"formats",value:function(g){return this.tagName.indexOf(g.tagName)+1}}]),y})(l.default);m.blotName="header",m.tagName=["H1","H2","H3","H4","H5","H6"],n.default=m}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var i=(function(){function w(S,P){for(var A=0;A<P.length;A++){var T=P[A];T.enumerable=T.enumerable||!1,T.configurable=!0,"value"in T&&(T.writable=!0),Object.defineProperty(S,T.key,T)}}return function(S,P,A){return P&&w(S.prototype,P),A&&w(S,A),S}})(),o=function w(S,P,A){S===null&&(S=Function.prototype);var T=Object.getOwnPropertyDescriptor(S,P);if(T===void 0){var I=Object.getPrototypeOf(S);return I===null?void 0:w(I,P,A)}else{if("value"in T)return T.value;var B=T.get;return B===void 0?void 0:B.call(A)}},l=s(0),c=p(l),u=s(4),f=p(u),d=s(25),m=p(d);function p(w){return w&&w.__esModule?w:{default:w}}function y(w,S,P){return S in w?Object.defineProperty(w,S,{value:P,enumerable:!0,configurable:!0,writable:!0}):w[S]=P,w}function v(w,S){if(!(w instanceof S))throw new TypeError("Cannot call a class as a function")}function g(w,S){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:w}function b(w,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);w.prototype=Object.create(S&&S.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(w,S):w.__proto__=S)}var N=(function(w){b(S,w);function S(){return v(this,S),g(this,(S.__proto__||Object.getPrototypeOf(S)).apply(this,arguments))}return i(S,[{key:"format",value:function(A,T){A===j.blotName&&!T?this.replaceWith(c.default.create(this.statics.scope)):o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"format",this).call(this,A,T)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,T){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,T),this):(this.parent.unwrap(),o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replaceWith",this).call(this,A,T))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:o(S.__proto__||Object.getPrototypeOf(S),"formats",this).call(this,A)}}]),S})(f.default);N.blotName="list-item",N.tagName="LI";var j=(function(w){b(S,w),i(S,null,[{key:"create",value:function(A){var T=A==="ordered"?"OL":"UL",I=o(S.__proto__||Object.getPrototypeOf(S),"create",this).call(this,T);return(A==="checked"||A==="unchecked")&&I.setAttribute("data-checked",A==="checked"),I}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function S(P){v(this,S);var A=g(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,P)),T=function(B){if(B.target.parentNode===P){var E=A.statics.formats(P),C=c.default.find(B.target);E==="checked"?C.format("list","unchecked"):E==="unchecked"&&C.format("list","checked")}};return P.addEventListener("touchstart",T),P.addEventListener("mousedown",T),A}return i(S,[{key:"format",value:function(A,T){this.children.length>0&&this.children.tail.format(A,T)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,T){if(A instanceof N)o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"insertBefore",this).call(this,A,T);else{var I=T==null?this.length():T.offset(this),B=this.split(I);B.parent.insertBefore(A,B)}}},{key:"optimize",value:function(A){o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"optimize",this).call(this,A);var T=this.next;T!=null&&T.prev===this&&T.statics.blotName===this.statics.blotName&&T.domNode.tagName===this.domNode.tagName&&T.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(T.moveChildren(this),T.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var T=c.default.create(this.statics.defaultChild);A.moveChildren(T),this.appendChild(T)}o(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"replace",this).call(this,A)}}]),S})(m.default);j.blotName="list",j.scope=c.default.Scope.BLOCK_BLOT,j.tagName=["OL","UL"],j.defaultChild="list-item",j.allowedChildren=[N],n.ListItem=N,n.default=j}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(56),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);d.blotName="italic",d.tagName=["EM","I"],n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function y(v,g){for(var b=0;b<g.length;b++){var N=g[b];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(v,N.key,N)}}return function(v,g,b){return g&&y(v.prototype,g),b&&y(v,b),v}})(),o=function y(v,g,b){v===null&&(v=Function.prototype);var N=Object.getOwnPropertyDescriptor(v,g);if(N===void 0){var j=Object.getPrototypeOf(v);return j===null?void 0:y(j,g,b)}else{if("value"in N)return N.value;var w=N.get;return w===void 0?void 0:w.call(b)}},l=s(6),c=u(l);function u(y){return y&&y.__esModule?y:{default:y}}function f(y,v){if(!(y instanceof v))throw new TypeError("Cannot call a class as a function")}function d(y,v){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:y}function m(y,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);y.prototype=Object.create(v&&v.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(y,v):y.__proto__=v)}var p=(function(y){m(v,y);function v(){return f(this,v),d(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,null,[{key:"create",value:function(b){return b==="super"?document.createElement("sup"):b==="sub"?document.createElement("sub"):o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,b)}},{key:"formats",value:function(b){if(b.tagName==="SUB")return"sub";if(b.tagName==="SUP")return"super"}}]),v})(c.default);p.blotName="script",p.tagName=["SUB","SUP"],n.default=p}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);d.blotName="strike",d.tagName="S",n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(6),o=l(i);function l(m){return m&&m.__esModule?m:{default:m}}function c(m,p){if(!(m instanceof p))throw new TypeError("Cannot call a class as a function")}function u(m,p){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p&&(typeof p=="object"||typeof p=="function")?p:m}function f(m,p){if(typeof p!="function"&&p!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof p);m.prototype=Object.create(p&&p.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),p&&(Object.setPrototypeOf?Object.setPrototypeOf(m,p):m.__proto__=p)}var d=(function(m){f(p,m);function p(){return c(this,p),u(this,(p.__proto__||Object.getPrototypeOf(p)).apply(this,arguments))}return p})(o.default);d.blotName="underline",d.tagName="U",n.default=d}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function g(b,N){for(var j=0;j<N.length;j++){var w=N[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,N,j){return N&&g(b.prototype,N),j&&g(b,j),b}})(),o=function g(b,N,j){b===null&&(b=Function.prototype);var w=Object.getOwnPropertyDescriptor(b,N);if(w===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,N,j)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(j)}},l=s(0),c=f(l),u=s(27);function f(g){return g&&g.__esModule?g:{default:g}}function d(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function m(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var y=["alt","height","width"],v=(function(g){p(b,g);function b(){return d(this,b),m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"format",value:function(j,w){y.indexOf(j)>-1?w?this.domNode.setAttribute(j,w):this.domNode.removeAttribute(j):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,j,w)}}],[{key:"create",value:function(j){var w=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,j);return typeof j=="string"&&w.setAttribute("src",this.sanitize(j)),w}},{key:"formats",value:function(j){return y.reduce(function(w,S){return j.hasAttribute(S)&&(w[S]=j.getAttribute(S)),w},{})}},{key:"match",value:function(j){return/\.(jpe?g|gif|png)$/.test(j)||/^data:image\/.+;base64/.test(j)}},{key:"sanitize",value:function(j){return(0,u.sanitize)(j,["http","https","data"])?j:"//:0"}},{key:"value",value:function(j){return j.getAttribute("src")}}]),b})(c.default.Embed);v.blotName="image",v.tagName="IMG",n.default=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=(function(){function g(b,N){for(var j=0;j<N.length;j++){var w=N[j];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(b,w.key,w)}}return function(b,N,j){return N&&g(b.prototype,N),j&&g(b,j),b}})(),o=function g(b,N,j){b===null&&(b=Function.prototype);var w=Object.getOwnPropertyDescriptor(b,N);if(w===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:g(S,N,j)}else{if("value"in w)return w.value;var P=w.get;return P===void 0?void 0:P.call(j)}},l=s(4),c=s(27),u=f(c);function f(g){return g&&g.__esModule?g:{default:g}}function d(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function m(g,b){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:g}function p(g,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);g.prototype=Object.create(b&&b.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(g,b):g.__proto__=b)}var y=["height","width"],v=(function(g){p(b,g);function b(){return d(this,b),m(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"format",value:function(j,w){y.indexOf(j)>-1?w?this.domNode.setAttribute(j,w):this.domNode.removeAttribute(j):o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,j,w)}}],[{key:"create",value:function(j){var w=o(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,j);return w.setAttribute("frameborder","0"),w.setAttribute("allowfullscreen",!0),w.setAttribute("src",this.sanitize(j)),w}},{key:"formats",value:function(j){return y.reduce(function(w,S){return j.hasAttribute(S)&&(w[S]=j.getAttribute(S)),w},{})}},{key:"sanitize",value:function(j){return u.default.sanitize(j)}},{key:"value",value:function(j){return j.getAttribute("src")}}]),b})(l.BlockEmbed);v.blotName="video",v.className="ql-video",v.tagName="IFRAME",n.default=v}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var i=(function(){function j(w,S){for(var P=0;P<S.length;P++){var A=S[P];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(w,A.key,A)}}return function(w,S,P){return S&&j(w.prototype,S),P&&j(w,P),w}})(),o=function j(w,S,P){w===null&&(w=Function.prototype);var A=Object.getOwnPropertyDescriptor(w,S);if(A===void 0){var T=Object.getPrototypeOf(w);return T===null?void 0:j(T,S,P)}else{if("value"in A)return A.value;var I=A.get;return I===void 0?void 0:I.call(P)}},l=s(35),c=p(l),u=s(5),f=p(u),d=s(9),m=p(d);function p(j){return j&&j.__esModule?j:{default:j}}function y(j,w){if(!(j instanceof w))throw new TypeError("Cannot call a class as a function")}function v(j,w){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:j}function g(j,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);j.prototype=Object.create(w&&w.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(j,w):j.__proto__=w)}var b=(function(j){g(w,j);function w(){return y(this,w),v(this,(w.__proto__||Object.getPrototypeOf(w)).apply(this,arguments))}return i(w,null,[{key:"create",value:function(P){var A=o(w.__proto__||Object.getPrototypeOf(w),"create",this).call(this,P);return typeof P=="string"&&(window.katex.render(P,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",P)),A}},{key:"value",value:function(P){return P.getAttribute("data-value")}}]),w})(c.default);b.blotName="formula",b.className="ql-formula",b.tagName="SPAN";var N=(function(j){g(w,j),i(w,null,[{key:"register",value:function(){f.default.register(b,!0)}}]);function w(){y(this,w);var S=v(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return S}return w})(m.default);n.FormulaBlot=b,n.default=N}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var i=(function(){function P(A,T){for(var I=0;I<T.length;I++){var B=T[I];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(A,B.key,B)}}return function(A,T,I){return T&&P(A.prototype,T),I&&P(A,I),A}})(),o=function P(A,T,I){A===null&&(A=Function.prototype);var B=Object.getOwnPropertyDescriptor(A,T);if(B===void 0){var E=Object.getPrototypeOf(A);return E===null?void 0:P(E,T,I)}else{if("value"in B)return B.value;var C=B.get;return C===void 0?void 0:C.call(I)}},l=s(0),c=v(l),u=s(5),f=v(u),d=s(9),m=v(d),p=s(13),y=v(p);function v(P){return P&&P.__esModule?P:{default:P}}function g(P,A){if(!(P instanceof A))throw new TypeError("Cannot call a class as a function")}function b(P,A){if(!P)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:P}function N(P,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);P.prototype=Object.create(A&&A.prototype,{constructor:{value:P,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(P,A):P.__proto__=A)}var j=(function(P){N(A,P);function A(){return g(this,A),b(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return i(A,[{key:"replaceWith",value:function(I){this.domNode.textContent=this.domNode.textContent,this.attach(),o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,I)}},{key:"highlight",value:function(I){var B=this.domNode.textContent;this.cachedText!==B&&((B.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=I(B),this.domNode.normalize(),this.attach()),this.cachedText=B)}}]),A})(y.default);j.className="ql-syntax";var w=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),S=(function(P){N(A,P),i(A,null,[{key:"register",value:function(){f.default.register(w,!0),f.default.register(j,!0)}}]);function A(T,I){g(this,A);var B=b(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,T,I));if(typeof B.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var E=null;return B.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(E),E=setTimeout(function(){B.highlight(),E=null},B.options.interval)}),B.highlight(),B}return i(A,[{key:"highlight",value:function(){var I=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var B=this.quill.getSelection();this.quill.scroll.descendants(j).forEach(function(E){E.highlight(I.options.highlight)}),this.quill.update(f.default.sources.SILENT),B!=null&&this.quill.setSelection(B,f.default.sources.SILENT)}}}]),A})(m.default);S.DEFAULTS={highlight:(function(){return window.hljs==null?null:function(P){var A=window.hljs.highlightAuto(P);return A.value}})(),interval:1e3},n.CodeBlock=j,n.CodeToken=w,n.default=S}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'}),(function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'}),(function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'}),(function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'}),(function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'}),(function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'}),(function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var i=function A(T,I,B){T===null&&(T=Function.prototype);var E=Object.getOwnPropertyDescriptor(T,I);if(E===void 0){var C=Object.getPrototypeOf(T);return C===null?void 0:A(C,I,B)}else{if("value"in E)return E.value;var M=E.get;return M===void 0?void 0:M.call(B)}},o=(function(){function A(T,I){for(var B=0;B<I.length;B++){var E=I[B];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(T,E.key,E)}}return function(T,I,B){return I&&A(T.prototype,I),B&&A(T,B),T}})(),l=s(3),c=g(l),u=s(8),f=g(u),d=s(43),m=g(d),p=s(15),y=s(41),v=g(y);function g(A){return A&&A.__esModule?A:{default:A}}function b(A,T){if(!(A instanceof T))throw new TypeError("Cannot call a class as a function")}function N(A,T){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:A}function j(A,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);A.prototype=Object.create(T&&T.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(A,T):A.__proto__=T)}var w=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],S=(function(A){j(T,A);function T(I,B){b(this,T),B.modules.toolbar!=null&&B.modules.toolbar.container==null&&(B.modules.toolbar.container=w);var E=N(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,I,B));return E.quill.container.classList.add("ql-bubble"),E}return o(T,[{key:"extendToolbar",value:function(B){this.tooltip=new P(this.quill,this.options.bounds),this.tooltip.root.appendChild(B.container),this.buildButtons([].slice.call(B.container.querySelectorAll("button")),v.default),this.buildPickers([].slice.call(B.container.querySelectorAll("select")),v.default)}}]),T})(m.default);S.DEFAULTS=(0,c.default)(!0,{},m.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(T){T?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var P=(function(A){j(T,A);function T(I,B){b(this,T);var E=N(this,(T.__proto__||Object.getPrototypeOf(T)).call(this,I,B));return E.quill.on(f.default.events.EDITOR_CHANGE,function(C,M,q,G){if(C===f.default.events.SELECTION_CHANGE)if(M!=null&&M.length>0&&G===f.default.sources.USER){E.show(),E.root.style.left="0px",E.root.style.width="",E.root.style.width=E.root.offsetWidth+"px";var Z=E.quill.getLines(M.index,M.length);if(Z.length===1)E.position(E.quill.getBounds(M));else{var te=Z[Z.length-1],ne=E.quill.getIndex(te),J=Math.min(te.length()-1,M.index+M.length-ne),ee=E.quill.getBounds(new p.Range(ne,J));E.position(ee)}}else document.activeElement!==E.textbox&&E.quill.hasFocus()&&E.hide()}),E}return o(T,[{key:"listen",value:function(){var B=this;i(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){B.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!B.root.classList.contains("ql-hidden")){var E=B.quill.getSelection();E!=null&&B.position(B.quill.getBounds(E))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(B){var E=i(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"position",this).call(this,B),C=this.root.querySelector(".ql-tooltip-arrow");if(C.style.marginLeft="",E===0)return E;C.style.marginLeft=-1*E-C.offsetWidth/2+"px"}}]),T})(d.BaseTooltip);P.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=P,n.default=S}),(function(r,n,s){r.exports=s(63)})]).default})})(Wv)),Wv.exports}var Cu,XI;function Zve(){if(XI)return Cu;XI=1;var e=Cu&&Cu.__extends||(function(){var f=function(d,m){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,y){p.__proto__=y}||function(p,y){for(var v in y)y.hasOwnProperty(v)&&(p[v]=y[v])},f(d,m)};return function(d,m){f(d,m);function p(){this.constructor=d}d.prototype=m===null?Object.create(m):(p.prototype=m.prototype,new p)}})(),t=Cu&&Cu.__assign||function(){return t=Object.assign||function(f){for(var d,m=1,p=arguments.length;m<p;m++){d=arguments[m];for(var y in d)Object.prototype.hasOwnProperty.call(d,y)&&(f[y]=d[y])}return f},t.apply(this,arguments)},r=Cu&&Cu.__spreadArrays||function(){for(var f=0,d=0,m=arguments.length;d<m;d++)f+=arguments[d].length;for(var p=Array(f),y=0,d=0;d<m;d++)for(var v=arguments[d],g=0,b=v.length;g<b;g++,y++)p[y]=v[g];return p},n=Cu&&Cu.__importDefault||function(f){return f&&f.__esModule?f:{default:f}},s=n(xy()),i=n(QI()),o=n(KL()),l=n(Qve()),c=(function(f){e(d,f);function d(m){var p=f.call(this,m)||this;p.dirtyProps=["modules","formats","bounds","theme","children"],p.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],p.state={generation:0},p.selection=null,p.onEditorChange=function(v,g,b,N){var j,w,S,P;v==="text-change"?(w=(j=p).onEditorChangeText)===null||w===void 0||w.call(j,p.editor.root.innerHTML,g,N,p.unprivilegedEditor):v==="selection-change"&&((P=(S=p).onEditorChangeSelection)===null||P===void 0||P.call(S,g,N,p.unprivilegedEditor))};var y=p.isControlled()?m.value:m.defaultValue;return p.value=y??"",p}return d.prototype.validateProps=function(m){var p;if(s.default.Children.count(m.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(s.default.Children.count(m.children)){var y=s.default.Children.only(m.children);if(((p=y)===null||p===void 0?void 0:p.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&m.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},d.prototype.shouldComponentUpdate=function(m,p){var y=this,v;if(this.validateProps(m),!this.editor||this.state.generation!==p.generation)return!0;if("value"in m){var g=this.getEditorContents(),b=(v=m.value,v??"");this.isEqualValue(b,g)||this.setEditorContents(this.editor,b)}return m.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,m.readOnly),r(this.cleanProps,this.dirtyProps).some(function(N){return!o.default(m[N],y.props[N])})},d.prototype.shouldComponentRegenerate=function(m){var p=this;return this.dirtyProps.some(function(y){return!o.default(m[y],p.props[y])})},d.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},d.prototype.componentWillUnmount=function(){this.destroyEditor()},d.prototype.componentDidUpdate=function(m,p){var y=this;if(this.editor&&this.shouldComponentRegenerate(m)){var v=this.editor.getContents(),g=this.editor.getSelection();this.regenerationSnapshot={delta:v,selection:g},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==p.generation){var b=this.regenerationSnapshot,v=b.delta,N=b.selection;delete this.regenerationSnapshot,this.instantiateEditor();var j=this.editor;j.setContents(v),u(function(){return y.setEditorSelection(j,N)})}},d.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},d.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},d.prototype.isControlled=function(){return"value"in this.props},d.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},d.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},d.prototype.createEditor=function(m,p){var y=new l.default(m,p);return p.tabIndex!=null&&this.setEditorTabIndex(y,p.tabIndex),this.hookEditor(y),y},d.prototype.hookEditor=function(m){this.unprivilegedEditor=this.makeUnprivilegedEditor(m),m.on("editor-change",this.onEditorChange)},d.prototype.unhookEditor=function(m){m.off("editor-change",this.onEditorChange)},d.prototype.getEditorContents=function(){return this.value},d.prototype.getEditorSelection=function(){return this.selection},d.prototype.isDelta=function(m){return m&&m.ops},d.prototype.isEqualValue=function(m,p){return this.isDelta(m)&&this.isDelta(p)?o.default(m.ops,p.ops):o.default(m,p)},d.prototype.setEditorContents=function(m,p){var y=this;this.value=p;var v=this.getEditorSelection();typeof p=="string"?m.setContents(m.clipboard.convert(p)):m.setContents(p),u(function(){return y.setEditorSelection(m,v)})},d.prototype.setEditorSelection=function(m,p){if(this.selection=p,p){var y=m.getLength();p.index=Math.max(0,Math.min(p.index,y-1)),p.length=Math.max(0,Math.min(p.length,y-1-p.index)),m.setSelection(p)}},d.prototype.setEditorTabIndex=function(m,p){var y,v;!((v=(y=m)===null||y===void 0?void 0:y.scroll)===null||v===void 0)&&v.domNode&&(m.scroll.domNode.tabIndex=p)},d.prototype.setEditorReadOnly=function(m,p){p?m.disable():m.enable()},d.prototype.makeUnprivilegedEditor=function(m){var p=m;return{getHTML:function(){return p.root.innerHTML},getLength:p.getLength.bind(p),getText:p.getText.bind(p),getContents:p.getContents.bind(p),getSelection:p.getSelection.bind(p),getBounds:p.getBounds.bind(p)}},d.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var m=i.default.findDOMNode(this.editingArea);if(!m)throw new Error("Cannot find element for editing area");if(m.nodeType===3)throw new Error("Editing area cannot be a text node");return m},d.prototype.renderEditingArea=function(){var m=this,p=this.props,y=p.children,v=p.preserveWhitespace,g=this.state.generation,b={key:g,ref:function(N){m.editingArea=N}};return s.default.Children.count(y)?s.default.cloneElement(s.default.Children.only(y),b):v?s.default.createElement("pre",t({},b)):s.default.createElement("div",t({},b))},d.prototype.render=function(){var m;return s.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(m=this.props.className,m??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},d.prototype.onEditorChangeText=function(m,p,y,v){var g,b;if(this.editor){var N=this.isDelta(this.value)?v.getContents():v.getHTML();N!==this.getEditorContents()&&(this.lastDeltaChangeSet=p,this.value=N,(b=(g=this.props).onChange)===null||b===void 0||b.call(g,m,p,y,v))}},d.prototype.onEditorChangeSelection=function(m,p,y){var v,g,b,N,j,w;if(this.editor){var S=this.getEditorSelection(),P=!S&&m,A=S&&!m;o.default(m,S)||(this.selection=m,(g=(v=this.props).onChangeSelection)===null||g===void 0||g.call(v,m,p,y),P?(N=(b=this.props).onFocus)===null||N===void 0||N.call(b,m,p,y):A&&((w=(j=this.props).onBlur)===null||w===void 0||w.call(j,S,p,y)))}},d.prototype.focus=function(){this.editor&&this.editor.focus()},d.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},d.displayName="React Quill",d.Quill=l.default,d.defaultProps={theme:"snow",modules:{},readOnly:!1},d})(s.default.Component);function u(f){Promise.resolve().then(f)}return Cu=c,Cu}var e1e=Zve();const t1e=Aa(e1e),Ds={all:["shared-inbox"],emails:()=>[...Ds.all,"emails"],emailsList:(e,t)=>[...Ds.emails(),e,t],senders:(e,t)=>[...Ds.all,"senders",e,t]},r1e=(e,t,r)=>{const n=t?.limit||50;return Vse({queryKey:Ds.emailsList(e||"",t),queryFn:async({pageParam:s=0})=>{if(!e)return{data:[],hasMore:!1,total:0,page:0};const i={...t,page:s,limit:n},o=await M7(e,i),l=o?.data??o??[],c=Array.isArray(l)?l:[];return{data:c,hasMore:o?.hasMore??c.length===n,total:o?.total??c.length,page:s}},getNextPageParam:(s,i)=>{if(s.hasMore)return i.length},initialPageParam:0,enabled:!!e&&r?.enabled!==!1,staleTime:r?.staleTime,refetchInterval:r?.refetchInterval,placeholderData:s=>s})},n1e=(e,t)=>wc({queryKey:Ds.senders(e||"",t),queryFn:async()=>{if(!e)return[];const r=await iae(e,t);return r?.data??r??[]},enabled:!!e,staleTime:300*1e3}),a1e=()=>{const e=yi();return kl({mutationFn:async({userId:t,accountEmail:r,scopeHours:n,scopeDays:s})=>await eae(t,r,n,s),onSuccess:()=>{e.invalidateQueries({queryKey:Ds.emails()})}})},s1e=({isOpen:e,onClose:t,userId:r,emailId:n,emailSubject:s,emailBody:i,participants:o=[],extractedDetails:l,onCreateSuccess:c})=>{const{showSuccess:u,showError:f}=Ea(),[d,m]=z.useState(!1),[p,y]=z.useState(!1),[v,g]=z.useState([]),[b,N]=z.useState(!1),[j,w]=z.useState({title:"",description:"",start:"",end:"",location:"",participants:[],createInGoogleCalendar:!0});z.useEffect(()=>{if(!e)return;const A=new Date;A.setDate(A.getDate()+1),A.setHours(10,0,0,0);const T=new Date(A);T.setHours(11,0,0,0);let I=A.toISOString().substring(0,16),B=T.toISOString().substring(0,16);if(l?.date||l?.time)try{const E=l.date||"tomorrow",C=l.time||"10:00 AM";let M=new Date;if(E.toLowerCase().includes("tomorrow"))M.setDate(M.getDate()+1);else if(!E.toLowerCase().includes("today")){const G=E.match(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/);if(G){const[,Z,te,ne]=G;M=new Date(parseInt(ne)<100?2e3+parseInt(ne):parseInt(ne),parseInt(Z)-1,parseInt(te))}}const q=C.match(/(\d{1,2}):?(\d{2})?\s*(am|pm)?/i);if(q){let G=parseInt(q[1]);const Z=q[2]?parseInt(q[2]):0,te=q[3]?.toLowerCase();te==="pm"&&G!==12&&(G+=12),te==="am"&&G===12&&(G=0),M.setHours(G,Z,0,0),I=M.toISOString().substring(0,16);const ne=new Date(M);ne.setHours(ne.getHours()+1),B=ne.toISOString().substring(0,16)}}catch(E){console.warn("Failed to parse extracted date/time:",E)}w({title:l?.title||s||"Meeting",description:l?.description||i?.substring(0,500)||"",start:I,end:B,location:l?.location||"",participants:l?.participants||o||[],createInGoogleCalendar:!0})},[e,l,s,i,o]);const S=async()=>{if(!j.start||!j.end||j.participants.length===0){f("Please set date/time and add participants to check availability");return}y(!0);try{const A=new Date(j.start).toISOString().split("T")[0],T=new Date(j.end).toISOString().split("T")[0],I=await Yae(r,j.participants,A,T);I.success&&I.data&&(g(I.data),N(!0))}catch(A){f(A.message||"Failed to check availability")}finally{y(!1)}},P=async A=>{if(A.preventDefault(),!j.title||!j.start||!j.end){f("Please fill in all required fields");return}if(!n){f("Email ID is required to create meeting");return}m(!0);try{(await Xae({userId:r,emailId:n,title:j.title,description:j.description,start:new Date(j.start).toISOString(),end:new Date(j.end).toISOString(),location:j.location,participants:j.participants,createInGoogleCalendar:j.createInGoogleCalendar})).success&&(u("Meeting created successfully!"),c?.(),t())}catch(T){f(T.message||"Failed to create meeting")}finally{m(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[250] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:a.jsx(ka,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Schedule Meeting"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"From Email"})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&(l.date||l.time||l.location)&&a.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(sa,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-1",children:"Extracted Meeting Details"}),a.jsxs("div",{className:"text-xs text-indigo-700 space-y-0.5",children:[l.date&&a.jsxs("p",{children:["Date: ",l.date]}),l.time&&a.jsxs("p",{children:["Time: ",l.time]}),l.location&&a.jsxs("p",{children:["Location: ",l.location]})]})]})]})}),a.jsxs("form",{onSubmit:P,className:"space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Meeting Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync Meeting",value:j.title,onChange:A=>w({...j,title:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(As,{className:"w-3 h-3"})," Start Time *"]}),a.jsx("input",{required:!0,type:"datetime-local",value:j.start,onChange:A=>w({...j,start:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(As,{className:"w-3 h-3"})," End Time *"]}),a.jsx("input",{required:!0,type:"datetime-local",value:j.end,onChange:A=>w({...j,end:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(iD,{className:"w-3 h-3"})," Location"]}),a.jsx("input",{type:"text",placeholder:"e.g. Conference Room A, Zoom, Google Meet",value:j.location,onChange:A=>w({...j,location:A.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(e0,{className:"w-3 h-3"})," Participants"]}),j.participants.length>0&&a.jsx("button",{type:"button",onClick:S,disabled:p||!j.start||!j.end,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Checking...":"Check Availability"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 border border-slate-200 rounded-xl min-h-[50px]",children:[j.participants.map((A,T)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:[A,a.jsx("button",{type:"button",onClick:()=>w({...j,participants:j.participants.filter((I,B)=>B!==T)}),className:"hover:text-indigo-900",children:a.jsx(cr,{className:"w-3 h-3"})})]},T)),a.jsx("input",{type:"email",placeholder:"Add participant email...",onKeyDown:A=>{if(A.key==="Enter"&&A.currentTarget.value.trim()){A.preventDefault();const T=A.currentTarget.value.trim();j.participants.includes(T)||w({...j,participants:[...j.participants,T]}),A.currentTarget.value=""}},className:"flex-1 min-w-[200px] bg-transparent border-none outline-none text-sm"})]})]}),b&&v.length>0&&a.jsxs("div",{className:"space-y-2 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx("p",{className:"text-xs font-semibold text-amber-900",children:"Team Availability"}),v.map((A,T)=>a.jsxs("div",{className:"text-xs text-amber-800",children:[a.jsx("p",{className:"font-medium",children:A.userId}),A.busySlots&&A.busySlots.length>0?a.jsxs("p",{className:"text-amber-700 mt-0.5",children:["Busy: ",A.busySlots.length," conflict(s)"]}):a.jsx("p",{className:"text-emerald-700 mt-0.5",children:"Available"})]},T))]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description"}),a.jsx("textarea",{placeholder:"Meeting agenda, notes, or details...",value:j.description,onChange:A=>w({...j,description:A.target.value}),rows:4,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[a.jsx("input",{type:"checkbox",id:"createInGoogleCalendar",checked:j.createInGoogleCalendar,onChange:A=>w({...j,createInGoogleCalendar:A.target.checked}),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),a.jsx("label",{htmlFor:"createInGoogleCalendar",className:"text-sm text-slate-700 cursor-pointer",children:"Create in Google Calendar"})]})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-white rounded-2xl transition-colors border border-slate-200",children:"Cancel"}),a.jsx("button",{type:"button",onClick:P,disabled:d||!j.title||!j.start||!j.end||!n,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:d?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(kd,{className:"w-4 h-4"}),"Create Meeting"]})})]})]})}):null},i1e={"shared-inbox:read":["Viewer","Collaborator","Admin"],"shared-inbox:view-emails":["Viewer","Collaborator","Admin"],"shared-inbox:view-notes":["Viewer","Collaborator","Admin"],"shared-inbox:view-assignments":["Viewer","Collaborator","Admin"],"shared-inbox:add-note":["Collaborator","Admin"],"shared-inbox:edit-note":["Collaborator","Admin"],"shared-inbox:delete-note":["Collaborator","Admin"],"shared-inbox:assign-email":["Admin"],"shared-inbox:unassign-email":["Admin"],"shared-inbox:send-email":["Admin"],"shared-inbox:reply-email":["Admin"],"shared-inbox:forward-email":["Admin"],"shared-inbox:star-email":["Collaborator","Admin"],"shared-inbox:archive-email":["Admin"],"shared-inbox:delete-email":["Admin"],"shared-inbox:update-metadata":["Admin"],"shared-inbox:manage-accounts":["Admin"],"shared-inbox:manage-routing-rules":["Admin"],"shared-inbox:manage-templates":["Collaborator","Admin"],"shared-inbox:manage-signatures":["Collaborator","Admin"],"shared-inbox:manage-labels":["Admin"],"shared-inbox:sync-emails":["Admin"],"admin:manage-users":["Admin"],"admin:manage-settings":["Admin"],"admin:view-analytics":["Admin"]},L9=e=>e?e==="User"||e==="user"?"Collaborator":e==="Admin"||e==="admin"?"Admin":e==="Viewer"||e==="viewer"?"Viewer":e==="Collaborator"||e==="collaborator"?"Collaborator":"Viewer":"Viewer",Gc=(e,t)=>{const r=L9(e);return(i1e[t]||[]).includes(r)},o1e=e=>L9(e)==="Admin",Vv=at.forwardRef((e,t)=>a.jsx(t1e,{...e,ref:t}));Vv.displayName="QuillEditor";function YI({content:e,highlightTerm:t}){const r=z.useRef(null),n=e||"No content",s=/<[a-z][\s\S]*>/i.test(n);if(z.useEffect(()=>{if(!r.current)return;const l=r.current.querySelectorAll("img[data-src]");if(l.length===0)return;const c=new IntersectionObserver(u=>{u.forEach(f=>{if(f.isIntersecting){const d=f.target,m=d.getAttribute("data-src");m&&(d.src=m,d.removeAttribute("data-src"),d.loading="lazy",c.unobserve(d))}})},{rootMargin:"50px"});return l.forEach(u=>c.observe(u)),()=>{l.forEach(u=>c.unobserve(u))}},[e]),t&&t.trim()){const l=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`(${l})`,"gi"),f=(s?n.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim():n).replace(c,'<mark class="bg-amber-200 rounded px-0.5">$1</mark>'),d=GI.sanitize(f,{ALLOWED_TAGS:["mark","br"]});return a.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:d}})}const i=s?GI.sanitize(n,{ADD_ATTR:["target","loading"],ADD_TAGS:["img"]}):"";let o=i;return s&&i&&(o=i.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(l,c,u,f)=>`<img${c}data-src="${u}" loading="lazy"${f}>`)),a.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",...s?{dangerouslySetInnerHTML:{__html:o}}:{style:{whiteSpace:"pre-wrap"},children:n}})}const F9=({currentUser:e})=>{const{showSuccess:t,showError:r}=Ea(),n=yi(),s=e||(typeof window<"u"?JSON.parse(localStorage.getItem("user_data")||"null"):null),i=s?.id,o=s?.role||"Viewer",l=Gc(o,"shared-inbox:add-note"),c=Gc(o,"shared-inbox:assign-email"),u=Gc(o,"shared-inbox:send-email"),f=Gc(o,"shared-inbox:reply-email"),d=Gc(o,"shared-inbox:forward-email"),m=Gc(o,"shared-inbox:star-email"),p=Gc(o,"shared-inbox:archive-email"),y=Gc(o,"shared-inbox:delete-email"),v=Gc(o,"shared-inbox:update-metadata");Gc(o,"shared-inbox:manage-accounts");const g=Gc(o,"shared-inbox:sync-emails"),b=(D,de="An error occurred")=>D?typeof D=="string"?D:typeof D=="object"?typeof D.message=="string"&&D.message?D.message:D.error&&typeof D.error=="object"&&typeof D.error.message=="string"&&D.error.message?D.error.message:de:de:de,N=D=>!D||typeof D!="string"?"":D.replace(/\n/g,"<br/>"),j=async(D,de)=>{try{return await D()}catch(ge){const Ve=b(ge,"An error occurred");return de&&de(Ve),null}},[w,S]=z.useState(null),[P,A]=z.useState(!1),[T,I]=z.useState(!1),B=z.useRef(!1),E=z.useRef(null),C=z.useRef(null),[M,q]=z.useState(""),[G,Z]=z.useState(null),[te,ne]=z.useState(""),[J,ee]=z.useState(""),[H,O]=z.useState("contains"),[R,W]=z.useState(void 0),[U,K]=z.useState(""),[oe,he]=z.useState(""),[ie,ce]=z.useState(void 0),[Le,le]=z.useState(void 0),[He,Fe]=z.useState(""),[fe,Q]=z.useState(!1),[we,ve]=z.useState(!1),{data:Ee=[]}=n1e(i,fe?150:void 0),[pe,ue]=z.useState([]),[Pe,Ne]=z.useState(!1),[Be,nt]=z.useState(""),[mt,kt]=z.useState(!1),[Re,gt]=z.useState([]),[ut,lt]=z.useState([]),[pr,tr]=z.useState(!1),[ft,$t]=z.useState(""),[er,qe]=z.useState(null),[bt,Nr]=z.useState(null),[rr,Lr]=z.useState(null),[Er,or]=z.useState("list"),[Ut,wr]=z.useState(new Set),[kr,Gr]=z.useState(new Set),[hn,On]=z.useState({}),[br,Yn]=z.useState(""),[on,Xe]=z.useState(""),[wt,Wt]=z.useState(null),[re,me]=z.useState(!1),[ye,Ae]=z.useState(null),[Ce,Oe]=z.useState(null),[Ke,ct]=z.useState([]),[Ge,Je]=z.useState(null),[ze,De]=z.useState(!1),tt=z.useRef(null),pt=z.useRef(null),[It,Mt]=z.useState(!1),[vr,Ur]=z.useState([]),[sn,En]=z.useState(null),[ls,vn]=z.useState(!1),[xa,Fn]=z.useState(""),[ga,ca]=z.useState([]),[da,Us]=z.useState(!1),[va,Ue]=z.useState(""),[Dt,Ct]=z.useState(0),[sr,jr]=z.useState([]),[xr,Cr]=z.useState(null),[kn,Pn]=z.useState([]),[nr,ir]=z.useState(!1),[Et,Sr]=z.useState(""),Ht=z.useRef(null),[Un,Ca]=z.useState({isOpen:!1,imageUrl:"",imageName:void 0}),[pn,Zt]=z.useState(null),[zn,ya]=z.useState({}),[ln,xn]=z.useState([]),[$r,Kr]=z.useState(!1),[_e,Yt]=z.useState(null),[mr,_r]=z.useState(!1),[zr,mn]=z.useState(null),[ta,Hn]=z.useState([]),[ti,Vu]=z.useState(null),[jf,Sl]=z.useState(!1),[po,ri]=z.useState([]),[Nc,jc]=z.useState(""),[Id,_l]=z.useState(!1),Kl=z.useRef(null),kc=z.useRef(null),[uu,Ho]=z.useState("domain"),[bi,Qi]=z.useState(""),[Sc,mo]=z.useState(""),[fs,Al]=z.useState([]),[hs,Wo]=z.useState(!1),[_c,xo]=z.useState(!1),[El,Vo]=z.useState(""),[du,Go]=z.useState(!1),[Ko,Ac]=z.useState(""),[Ka,w0]=z.useState(null),[fu,Cl]=z.useState(!1),[hu,Zi]=z.useState([]),[kf,V]=z.useState(!1),[be,$e]=z.useState(!1),[Ze,ht]=z.useState(!1),[Pt,Gt]=z.useState(null),[yr,Mr]=z.useState(null),[Xr,Qr]=z.useState([]),[un,Ta]=z.useState(""),[$a,Xa]=z.useState(!1),[qs,ps]=z.useState(!1),[Xo,ni]=z.useState(!1),[ms,eo]=z.useState(!1),[Ya,Ec]=z.useState("compose"),[yn,cs]=z.useState([]),[Oa,xs]=z.useState([]),[dn,Ts]=z.useState([]),[Pa,Fi]=z.useState(""),[gs,ua]=z.useState(""),[vs,Mi]=z.useState(""),[Tl,ai]=z.useState(""),[Xl,Dd]=z.useState([]),[Cc,Ol]=z.useState([]),[Yl,si]=z.useState(!1),[Os,Yo]=z.useState(!1),[Jo,go]=z.useState(!1),[Qo,ii]=z.useState(""),[Sn,Ri]=z.useState(""),[Ja,Ps]=z.useState(""),[Zo,Ld]=z.useState([]),[Pl,to]=z.useState(!1),[Jl,Bi]=z.useState(0),[Ia,wi]=z.useState([]),el=z.useRef(null),[Ql,ro]=z.useState(!1),[ys,oi]=z.useState([]),[Wn,Kn]=z.useState(!1),[fa,Qa]=z.useState(""),[tl,Gu]=z.useState(null),[Tc,Fd]=z.useState([]),[rl,Ku]=z.useState([]),[$s,vo]=z.useState([]),[Md,Oc]=z.useState([]),[Rd,Xu]=z.useState({contacts:[],companies:[]}),[Bd,ra]=z.useState(!1),[pu,mu]=z.useState([]),[Il,Yu]=z.useState([]),[Pc,Ju]=z.useState([]),[N0,Ic]=z.useState(!1),[kh,xu]=z.useState(!1),[Dc,Lc]=z.useState(null),[Sf,Fc]=z.useState(!1),[nl,Mc]=z.useState(!1),[_f,Qu]=z.useState(null),[Sh,gu]=z.useState(!1),[rm,nm]=z.useState(null),[Zu,Ni]=z.useState(!1),[li,ji]=z.useState(null),[Dl,vu]=z.useState(!1),[bs,Ui]=z.useState({}),[_h,Ah]=z.useState(!1),[Rc,Zl]=z.useState(!1),[ec,Bc]=z.useState(""),[Af,tc]=z.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[yo,Vn]=z.useState([]),[na,rc]=z.useState(!1),[zs,Hs]=z.useState(!1),[ha,bo]=z.useState(new Set),[za,Ef]=z.useState(!1),[Cf,Uc]=z.useState(!1),[al,Eh]=z.useState("date"),[ki,Ud]=z.useState("desc"),[_,F]=z.useState(!1),[Y,se]=z.useState(null),xe=z.useRef(null),je=z.useRef(null),Se=z.useRef(null),Te=z.useRef(null),Ie=z.useCallback(D=>{const de={searchText:""};if(!D||typeof D!="string")return de;const ge=[];let Ve="",it=!1;for(let _t=0;_t<D.length;_t++){const Jt=D[_t];if(Jt==='"'){it=!it;continue}if(!it&&(Jt===" "||Jt==="	")){Ve&&(ge.push(Ve),Ve="");continue}Ve+=Jt}Ve&&ge.push(Ve);const zt=[];for(const _t of ge){const Jt=_t.match(/^from:(.+)$/i);if(Jt){de.from=Jt[1].trim();continue}const Tr=_t.match(/^subject:(.+)$/i);if(Tr){de.subject=Tr[1].trim();continue}if(/^has:attachment$/i.test(_t)){de.hasAttachment=!0;continue}if(/^has:no-attachment$/i.test(_t)||/^-has:attachment$/i.test(_t)){de.hasAttachment=!1;continue}if(/^is:read$/i.test(_t)){de.isRead=!0;continue}if(/^is:unread$/i.test(_t)){de.isRead=!1;continue}if(/^is:starred$/i.test(_t)){de.isStarred=!0;continue}if(/^is:unstarred$/i.test(_t)){de.isStarred=!1;continue}zt.push(_t)}return de.searchText=zt.join(" ").trim(),de},[]),Me=z.useMemo(()=>{const D=Ie(M),de={};D.searchText&&(de.search=D.searchText),He&&(de.status=He);const ge=D.from??te;ge&&(de.from=ge);const Ve=D.subject??J;Ve&&(de.subject=Ve,de.subjectOperator=H);const it=D.hasAttachment!==void 0?D.hasAttachment:R;it!==void 0&&(de.hasAttachment=it),U&&(de.dateFrom=U),oe&&(de.dateTo=oe),_e&&(de.labelId=_e);const zt=D.isRead!==void 0?D.isRead:ie;zt!==void 0&&(de.isRead=zt);const _t=D.isStarred!==void 0?D.isStarred:Le;return _t!==void 0&&(de.isStarred=_t),de},[M,He,te,J,H,R,U,oe,_e,ie,Le,Ie]),{data:Qe,isLoading:xt,isFetchingNextPage:dt,hasNextPage:st,fetchNextPage:qt,error:At,refetch:Ye}=r1e(i,Object.keys(Me).length>0?Me:void 0,{staleTime:30*1e3,refetchInterval:60*1e3}),et=z.useMemo(()=>Qe?.pages?Qe.pages.flatMap(ge=>ge.data||[]).filter((ge,Ve,it)=>ge.id&&Ve===it.findIndex(zt=>zt.id===ge.id)):[],[Qe]);Qe?.pages[0]?.total??et.length;const Tt=a1e(),Ot=z.useCallback(()=>{!dt&&st&&i&&(console.log("[INBOX] Loading more emails - hasMore:",st,"loadingMore:",dt),qt())},[dt,st,qt,i]);z.useEffect(()=>{if(At){const D=At?.message||"Failed to load inbox";Lr(D),(D.toLowerCase().includes("google")||D.toLowerCase().includes("connected"))&&Z(!1)}else Lr(null)},[At]),z.useEffect(()=>{const D=Kl.current,de=kc.current;if(!D||!de||!st||dt)return;let ge=null,Ve=null;try{ge=new IntersectionObserver(it=>{it[0].isIntersecting&&st&&!dt&&(console.log("[INBOX] IntersectionObserver triggered - loading more"),Ot())},{threshold:.1,rootMargin:"300px",root:de}),ge.observe(D)}catch(it){console.warn("[INBOX] IntersectionObserver failed, using scroll fallback:",it)}return Ve=()=>{if(dt||!st)return;const it=de,zt=D;if(!it||!zt)return;const _t=it.getBoundingClientRect(),Jt=zt.getBoundingClientRect(),Tr=_t.bottom-Jt.top;Tr<500&&Tr>-100&&(console.log("[INBOX] Scroll handler triggered - loading more"),Ot())},de.addEventListener("scroll",Ve,{passive:!0}),()=>{ge&&ge.disconnect(),Ve&&de&&de.removeEventListener("scroll",Ve)}},[st,dt,Ot,Er,et.length]);const Lt=z.useCallback(async()=>{if(i)try{const D=await I3(i),de=D?.connected===!0||D?.data?.connected===!0;Z(de)}catch{Z(!1)}},[i]),gr=z.useCallback(async()=>{if(i){Xa(!0);try{const D=await _ae(i),de=D?.data??D??[];Qr(Array.isArray(de)?de:[])}catch(D){console.error("[INBOX] Failed to load excluded domains:",D),r(b(D,"Failed to load excluded domains")),Qr([])}finally{Xa(!1)}}},[i,r]),lr=z.useCallback(async()=>{if(!(!i||!un.trim())){ps(!0);try{await Aae(i,un.trim()),Ta(""),await gr(),t("Domain added to exclusion list"),Ye()}catch(D){console.error("[INBOX] Failed to add excluded domain:",D),r(b(D,"Failed to add excluded domain"))}finally{ps(!1)}}},[i,un,gr,Ye,t,r]),qr=z.useCallback(async D=>{if(i)try{await Eae(i,D),await gr(),t("Domain removed from exclusion list"),Ye()}catch(de){console.error("[INBOX] Failed to remove excluded domain:",de),r(b(de,"Failed to remove excluded domain"))}},[i,gr,Ye,t,r]),dr=z.useCallback(async()=>{if(i)try{const D=await tae(i),de=D?.data??D??[],ge=Array.isArray(de)?de.filter((Ve,it,zt)=>{const _t=(Ve.email||"").toLowerCase();return zt.findIndex(Jt=>(Jt.email||"").toLowerCase()===_t&&Jt.userId===Ve.userId)===it}):[];gt(ge),Z(ge.length>0),ge.length>0&&!vs&&Mi(ge[0].email)}catch(D){console.error("[INBOX] Failed to load connected accounts:",D),gt([]),Z(!1)}},[i]),Mn=async()=>{if(i)try{const D=await F7(i),de=D?.authUrl||D?.data?.authUrl;de?window.location.href=de:r("Failed to get authorization URL")}catch(D){r(D?.message||"Failed to connect account")}},qn=async D=>{if(i){qe(D);try{await rae(i,D),t(`Disconnected ${D}`),await dr(),await Ye()}catch(de){r(de?.message||"Failed to disconnect account")}finally{qe(null)}}},bn=z.useCallback(async()=>{if(i)try{const D=await nae(i),de=D?.data??D??[];lt(Array.isArray(de)?de:[])}catch(D){console.error("[INBOX] Failed to load filtered accounts:",D),lt([])}},[i]),cn=async D=>{if(i){Nr(D);try{await aae(i,D),await bn(),await n.invalidateQueries({queryKey:Ds.emails()}),await Ye(),t(`Emails from ${D} will be hidden`)}catch(de){r(de?.message||"Failed to filter account")}finally{Nr(null)}}},Jn=async(D,de)=>{if(i){Nr(de);try{await sae(i,D),await bn(),await n.invalidateQueries({queryKey:Ds.emails()}),await Ye(),t(`Emails from ${de} will now be visible`)}catch(ge){r(ge?.message||"Failed to unfilter account")}finally{Nr(null)}}};z.useEffect(()=>{if(!i){Z(!1);return}Lt(),dr(),gr(),bn()},[i,Lt,dr,gr,bn]),z.useEffect(()=>{Re.length>0&&!vs&&Mi(Re[0].email)},[Re]),z.useEffect(()=>{try{const D=typeof window<"u"?localStorage.getItem("impactOS_savedSearches"):null;if(D){const de=JSON.parse(D);Array.isArray(de)&&ue(de)}}catch{}},[]),z.useEffect(()=>{if(pe.length!==0)try{localStorage.setItem("impactOS_savedSearches",JSON.stringify(pe))}catch{}},[pe]),z.useEffect(()=>{i&&(async()=>{try{const de=await Ed(),ge=de?.data??de??[];ca(Array.isArray(ge)?ge:[])}catch(de){const ge=de?.message||"Failed to load users";console.error("Failed to load users:",ge)}})()},[i]),z.useEffect(()=>{const D=de=>{Ht.current&&!Ht.current.contains(de.target)&&ir(!1)};if(nr)return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[nr]),z.useEffect(()=>{i&&(async()=>{try{const de=await fg(),ge=de?.data??de??[];Ol(Array.isArray(ge)?ge:[])}catch(de){console.error("Failed to load contacts:",de?.message)}})()},[i]);const Rn=z.useCallback(async(D=!1)=>{if(i&&!($r&&!D))try{Kr(!0);const de=await Bae(i),ge=de?.labels??de?.data;xn(Array.isArray(ge)?ge:[])}catch(de){console.error("Error fetching labels:",de),xn([])}finally{Kr(!1)}},[i]);z.useEffect(()=>{i&&G&&Rn()},[i,G,Rn]),z.useEffect(()=>{mr&&zr&&i&&Rn(!0)},[mr,zr,i,Rn]),z.useEffect(()=>{i&&ms&&(async()=>{if(i)try{const de=await R7(i),ge=de?.data??de??[];Dd(Array.isArray(ge)?ge:[]);const Ve=ge.find(it=>it.isDefault);Ve&&ai(Ve.content||"")}catch(de){console.error("Failed to load signatures:",de?.message)}})()},[i,ms]);const Yr=async()=>{if(i){A(!0),Lr(null);try{await Tt.mutateAsync({userId:i,scopeHours:24}),t("Synced new mail from last 24 hours")}catch(D){const de=D?.message||"Sync failed";r(de),Lr(de)}finally{A(!1)}}},Da=z.useRef(Tt),Si=z.useRef(n);z.useEffect(()=>{Da.current=Tt,Si.current=n},[Tt,n]),z.useEffect(()=>{if(!i||!g){E.current&&(clearTimeout(E.current),E.current=null),C.current&&(clearInterval(C.current),C.current=null);return}E.current&&(clearTimeout(E.current),E.current=null),C.current&&(clearInterval(C.current),C.current=null);const D=()=>{if(B.current){console.log("[INBOX] Background sync already in progress, skipping...");return}B.current=!0,Da.current.mutate({userId:i,scopeDays:90},{onSuccess:()=>{B.current=!1},onError:de=>{console.log("[INBOX] Background sync failed:",de?.message||"Unknown error"),B.current=!1}})};return E.current=setTimeout(()=>{D(),E.current=null},5e3),C.current=setInterval(()=>{D()},1500*1e3),()=>{E.current&&(clearTimeout(E.current),E.current=null),C.current&&(clearInterval(C.current),C.current=null),B.current=!1}},[i,g]);const Za=async D=>{if(i){ra(!0);try{const de=await Dae(D);Xu(de?.data||{contacts:[],companies:[]})}catch(de){console.error("Failed to load suggested links:",de),Xu({contacts:[],companies:[]})}finally{ra(!1)}}},es=async D=>{if(i){Ic(!0);try{const[de,ge,Ve]=await Promise.all([Fae(D).catch(()=>({success:!0,data:[]})),Mae(D).catch(()=>({success:!0,data:[]})),Rae(D).catch(()=>({success:!0,data:[]}))]);mu(de?.data||[]),Yu(ge?.data||[]),Ju(Ve?.data||[])}catch(de){console.error("Failed to load related items:",de),mu([]),Yu([]),Ju([])}finally{Ic(!1)}}};z.useEffect(()=>{(async()=>{if(i)try{const[de,ge,Ve,it]=await Promise.all([Cd().catch(()=>({data:[]})),Jy(i).catch(()=>({data:[]})),Yp(i).catch(()=>({data:[]})),L7({userId:i}).catch(()=>({data:[]}))]);Fd(de?.data||[]),Ku(ge?.data||[]),vo(Ve?.data||[]),Oc(it?.data||[])}catch(de){console.error("Failed to load CRM data:",de)}})()},[i]);const _n=async(D,de)=>{if(!(!w?.id||!i)){Mc(!0);try{const ge=w.id;let Ve;switch(D){case"contact":await Cae({emailId:ge,contactId:de,userId:i}),Ve="contactId";break;case"company":await Tae({emailId:ge,companyId:de,userId:i}),Ve="companyId";break;case"deal":await Oae({emailId:ge,dealId:de,userId:i}),Ve="dealId";break;case"project":await Pae({emailId:ge,projectId:de,userId:i}),Ve="projectId";break;case"contract":await Iae({emailId:ge,contractId:de,userId:i}),Ve="contractId";break;default:throw new Error(`Unknown link type: ${D}`)}t(`Email linked to ${D} successfully`),S(it=>it?{...it,linkedRecords:{...it.linkedRecords||{},[Ve]:de}}:null),es(ge),xu(!1),Lc(null)}catch(ge){r(ge?.message||`Failed to link email to ${D}`)}finally{Mc(!1)}}},ci=async D=>{if(!(!w?.id||!i))try{const de=await Lae({emailId:w.id,userId:i,title:D.title||w.subject||"Task from Email",description:D.description||w.body||"",dueDate:D.dueDate,priority:D.priority||"Medium",projectId:D.projectId,assigneeId:D.assigneeId});t("Task created successfully"),Fc(!1),es(w.id)}catch(de){r(de?.message||"Failed to create task")}},ws=async D=>{if(!i)return;S(null),Hn([]),Vu(null),Oe(null),ct([]),Je(null),I(!0);const de=!D.isRead;de&&(n.setQueriesData({queryKey:Ds.emails()},ge=>{if(!ge?.pages)return ge;const Ve=ge.pages.map(it=>{const zt=it.data.map(_t=>_t.id===D.id?{..._t,isRead:!0}:_t);return{...it,data:zt}});return{...ge,pages:Ve}}),n.invalidateQueries({queryKey:Ds.emails()}));try{const ge=await oae(D.id,i),Ve=ge?.data??ge??{},it={...D,...Ve,body:Ve.body??D.lastMessage,gmailThreadId:Ve.gmailThreadId??D.gmailThreadId,isRead:!0};S(it),de&&La(D.id,!0,!0).catch(zt=>{console.error("[INBOX] Failed to mark email as read:",zt?.message),n.setQueryData(Ds.emailsList(i||"",Me),_t=>_t?.pages?{..._t,pages:_t.pages.map(Jt=>({...Jt,data:Jt.data.map(Tr=>Tr.id===D.id?{...Tr,isRead:!1}:Tr)}))}:_t)}),D.id&&(Za(D.id),es(D.id));try{const zt=await uae(D.id),_t=zt?.data??zt??[];On(Jt=>({...Jt,[D.id]:_t.map(Tr=>({id:Tr.id,userId:Tr.userId,userName:Tr.userName,message:Tr.message,timestamp:Tr.createdAt,imageUrl:Tr.imageUrl,imageName:Tr.imageName,markedFor:Tr.markedFor||[]}))}))}catch(zt){const _t=zt?.message||"Failed to load notes";console.error("Failed to load notes:",_t),On(Jt=>({...Jt,[D.id]:[]}))}if(i)try{V(!0);const zt=await Bv(i,D.id);zt.success&&zt.data?Zi(zt.data):Zi([])}catch(zt){console.error("Failed to load calendar events:",zt.message),Zi([])}finally{V(!1)}}catch(ge){r(ge?.message||"Could not load email")}finally{I(!1)}},La=async(D,de,ge=!1)=>{if(i)try{await VP(D,de,i),n.setQueriesData({queryKey:Ds.emails()},Ve=>{if(!Ve?.pages)return Ve;const it=Ve.pages.map(zt=>({...zt,data:zt.data.map(_t=>_t.id===D?{..._t,isRead:de,syncStatus:{..._t.syncStatus||{},readStatus:"pending"}}:_t)}));return{...Ve,pages:it}}),w?.id===D&&S(Ve=>Ve?{...Ve,isRead:de,syncStatus:{...Ve.syncStatus||{},readStatus:"pending"}}:null),ge||t(de?"Marked as read":"Marked as unread")}catch(Ve){ge?console.error("[INBOX] Failed to mark email as read:",Ve?.message):(r(Ve?.message||"Update failed"),Ye())}},Ns=async(D,de)=>{try{await lae(D,de),n.setQueryData(Ds.emailsList(i||"",Me),ge=>ge?.pages?{...ge,pages:ge.pages.map(Ve=>({...Ve,data:Ve.data.map(it=>it.id===D?{...it,isStarred:de,syncStatus:{...it.syncStatus||{},starredStatus:"pending"}}:it)}))}:ge),w?.id===D&&S(ge=>ge?{...ge,isStarred:de,syncStatus:{...ge.syncStatus||{},starredStatus:"pending"}}:null),t(de?"Starred":"Unstarred")}catch(ge){r(ge?.message||"Update failed"),Ye()}},us=D=>{if(!D)return null;switch(D){case"synced":return a.jsx(jn,{className:"w-3 h-3 text-green-500",title:"Synced to Gmail"});case"pending":return a.jsx(As,{className:"w-3 h-3 text-amber-500 animate-pulse",title:"Syncing..."});case"failed":return a.jsx(sa,{className:"w-3 h-3 text-red-500",title:"Sync failed"});default:return null}},Ws=async(D,de=[],ge=[],Ve=!1,it)=>{try{if(await qae(D,{addLabelIds:de,removeLabelIds:ge,trackAccuracy:Ve,suggestionId:it}),n.invalidateQueries({queryKey:Ds.emails()}),w?.id===D){const _t=[...w.labels||[]];de.forEach(Jt=>{_t.includes(Jt)||_t.push(Jt)}),ge.forEach(Jt=>{const Tr=_t.indexOf(Jt);Tr>-1&&_t.splice(Tr,1)}),S({...w,labels:_t,syncStatus:{...w.syncStatus||{},labelsStatus:"pending"}})}t("Labels updated")}catch(zt){r(zt?.message||"Failed to update labels")}},wo=async(D,de)=>{try{await $ae(D,de),await Ws(D,[],[de])}catch(ge){r(ge?.message||"Failed to remove label")}},Fa=async(D,de)=>{if(i){Go(!0);try{await Uae({userId:i,accountEmail:de,labelName:D,messageListVisibility:"show",labelListVisibility:"labelShow"}),t("Label created successfully"),await Rn(),Vo(""),xo(!1)}catch(ge){r(ge?.message||"Failed to create label")}finally{Go(!1)}}},Ha=async(D,de)=>{if(i)try{await hv(D,{userId:i,...de}),n.invalidateQueries({queryKey:Ds.emails()}),w?.id===D&&S(ge=>ge?{...ge,...de}:null),t("Email updated")}catch(ge){r(ge?.message||"Update failed")}},qi=()=>{Ef(!za),bo(new Set)},nc=D=>{bo(de=>{const ge=new Set(de);return ge.has(D)?ge.delete(D):ge.add(D),ge})},ac=()=>{ha.size===ui.length?bo(new Set):bo(new Set(ui.map(D=>D.id)))},Xn=async()=>{if(!(!i||ha.size===0)){Uc(!0);try{await Promise.all(Array.from(ha).map(D=>VP(D,!0,i))),n.invalidateQueries({queryKey:Ds.emails()}),t(`${ha.size} email(s) marked as read`),bo(new Set)}catch(D){r(D?.message||"Failed to mark emails as read")}finally{Uc(!1)}}},Ll=async D=>{if(i)try{await GP(D,i),n.invalidateQueries({queryKey:Ds.emails()}),w?.id===D&&S(de=>de?{...de,threadStatus:"archived"}:null),t("Email archived")}catch(de){r(de?.message||"Failed to archive email")}},Tf=async D=>{if(i&&confirm("Are you sure you want to delete this email? This action cannot be undone."))try{await KP(D,i),n.invalidateQueries({queryKey:Ds.emails()}),w?.id===D&&S(null),t("Email deleted")}catch(de){r(de?.message||"Failed to delete email")}},j0=async D=>{if(i)try{await Nae(D,i),n.invalidateQueries({queryKey:Ds.emails()}),w?.id===D&&S(de=>de?{...de,threadStatus:"active"}:null),t("Email restored")}catch(de){r(de?.message||"Failed to restore email")}},No=async D=>{if(i)try{await hv(D,{userId:i,threadStatus:"resolved"}),n.invalidateQueries({queryKey:Ds.emails()}),w?.id===D&&S(de=>de?{...de,threadStatus:"resolved"}:null),t("Conversation marked as resolved")}catch(de){r(de?.message||"Failed to resolve conversation")}},jo=async()=>{if(!(!i||ha.size===0)){Uc(!0);try{await Promise.all(Array.from(ha).map(D=>GP(D,i))),n.invalidateQueries({queryKey:Ds.emails()}),t(`${ha.size} email(s) archived`),bo(new Set)}catch(D){r(D?.message||"Failed to archive emails")}finally{Uc(!1)}}},yu=async()=>{if(!(!i||ha.size===0)&&confirm(`Are you sure you want to delete ${ha.size} email(s)? This action cannot be undone.`)){Uc(!0);try{await Promise.all(Array.from(ha).map(de=>KP(de,i)));const D=Array.from(ha);n.invalidateQueries({queryKey:Ds.emails()}),w&&ha.has(w.id)&&S(null),t(`${D.length} email(s) deleted`),bo(new Set)}catch(D){r(D?.message||"Failed to delete emails")}finally{Uc(!1)}}},ko=async(D,de,ge,Ve)=>{if(!i)return;const it=`${D}-${de}-view`;ya(zt=>({...zt,[it]:!0}));try{const zt=await XP(D,de,i),_t=window.URL.createObjectURL(zt);Zt({isOpen:!0,emailId:D,attachmentId:de,filename:ge,mimeType:Ve,url:_t})}catch(zt){r(zt?.message||"Failed to load attachment")}finally{ya(zt=>({...zt,[it]:!1}))}},sl=async(D,de,ge)=>{if(!i)return;const Ve=`${D}-${de}-download`;ya(it=>({...it,[Ve]:!0}));try{const it=await XP(D,de,i),zt=window.URL.createObjectURL(it),_t=document.createElement("a");_t.href=zt,_t.download=ge,document.body.appendChild(_t),_t.click(),window.URL.revokeObjectURL(zt),document.body.removeChild(_t),t("Attachment downloaded")}catch(it){r(it?.message||"Failed to download attachment")}finally{ya(it=>({...it,[Ve]:!1}))}},sc=D=>{if(D===0)return"0 Bytes";const de=1024,ge=["Bytes","KB","MB","GB"],Ve=Math.floor(Math.log(D)/Math.log(de));return Math.round(D/Math.pow(de,Ve)*100)/100+" "+ge[Ve]},So=D=>D.startsWith("image/"),js=D=>D==="application/pdf",ed=D=>{const de=D.target.files;if(!de||de.length===0)return;const ge=25*1024*1024,Ve=[];Array.from(de).forEach(it=>{if(it.size>ge){r(`File "${it.name}" is too large. Maximum size is 25MB.`);return}const zt=`${Date.now()}-${Math.random()}`;let _t;it.type.startsWith("image/")&&(_t=URL.createObjectURL(it)),Ve.push({file:it,preview:_t,id:zt})}),wi([...Ia,...Ve]),el.current&&(el.current.value="")},il=async(D,de)=>{if(i){Kn(!0);try{const ge=await Qae(i,vs||void 0,void 0,D||fa,de),Ve=ge?.data||ge||{};oi(de?it=>[...it,...Ve.files||[]]:Ve.files||[]),Gu(Ve.nextPageToken||null)}catch(ge){const Ve=ge?.message||"Failed to load Drive files";Ve.includes("not connected")||ge?.code==="ACCOUNT_NOT_CONNECTED"?r(`Google account ${vs||"selected account"} is not connected. Please connect your Google account in Settings.`):r(Ve),de||oi([])}finally{Kn(!1)}}},ic=async D=>{if(!(!i||!ms))try{const de=Ya!=="compose"&&w?.id?w.id:`draft_${Date.now()}`;if(Ya==="compose"){const ge={id:`drive_${D.id}`,file:new cc([],D.name,{type:D.mimeType}),isDriveFile:!0,driveFileId:D.id,driveWebViewLink:D.webViewLink,driveIconLink:D.iconLink,preview:D.thumbnailLink||D.iconLink};wi([...Ia,ge]),ro(!1),t("Drive file added")}else await JP({userId:i,emailId:w.id,fileId:D.id,fileName:D.name,fileMimeType:D.mimeType,webViewLink:D.webViewLink,webContentLink:D.webContentLink,iconLink:D.iconLink}),ro(!1),t("Drive file attached"),w&&ws(w)}catch(de){r(de?.message||"Failed to attach Drive file")}},td=D=>{const de=Ia.find(ge=>ge.id===D);de?.preview&&URL.revokeObjectURL(de.preview),Ui(ge=>{const Ve={...ge};return delete Ve[D],Ve}),wi(Ia.filter(ge=>ge.id!==D))},Fl=async()=>{if(!i||!vs||!Pa||!gs){r("Please fill in subject and message to save draft");return}Ah(!0);try{await jae({userId:i,accountEmail:vs||Re[0]?.email,to:yn.length>0?yn:void 0,cc:Oa.length>0?Oa:void 0,bcc:dn.length>0?dn:void 0,subject:Pa,body:gs}),t("Draft saved to Gmail")}catch(D){const de=b(D,"Failed to save draft");r(de)}finally{Ah(!1)}},Ch=async()=>{if(!(!i||!vs)){rc(!0);try{const D=await kae(i,vs||Re[0]?.email),de=D?.data||D||[];Vn(Array.isArray(de)?de:[])}catch(D){const de=b(D,"Failed to load drafts");r(de),Vn([])}finally{rc(!1)}}};z.useEffect(()=>()=>{Ia.forEach(D=>{D.preview&&URL.revokeObjectURL(D.preview)})},[Ia]),z.useEffect(()=>{!ms&&Ia.length>0&&(Ia.forEach(D=>{D.preview&&URL.revokeObjectURL(D.preview)}),wi([]))},[ms,Ia]);const k0=(D,de=1200,ge=1200,Ve=.8)=>new Promise((it,zt)=>{const _t=new FileReader;_t.onload=Jt=>{const Tr=new Image;Tr.onload=()=>{let An=Tr.width,wa=Tr.height;An>wa?An>de&&(wa=wa*de/An,An=de):wa>ge&&(An=An*ge/wa,wa=ge);const $n=document.createElement("canvas");$n.width=An,$n.height=wa;const Vs=$n.getContext("2d");Vs?(Vs.drawImage(Tr,0,0,An,wa),it($n.toDataURL("image/jpeg",Ve))):zt(new Error("Canvas context not available"))},Tr.onerror=zt,Tr.src=Jt.target?.result},_t.onerror=zt,_t.readAsDataURL(D)}),ba=async D=>{const de=D.target.files?.[0];if(de){if(!de.type.startsWith("image/")){r("Please select an image file");return}if(de.size>10*1024*1024){r("Image size must be less than 10MB");return}try{const ge=await k0(de,1200,1200,.8);Xe(ge),Wt(de)}catch(ge){r(ge.message||"Failed to process image")}}},ol=D=>{const de=document.createElement("div");de.innerHTML=D;const ge=de.textContent||de.innerText||"",Ve=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,it=[];let zt;for(;(zt=Ve.exec(ge))!==null;){const _t=zt[1].trim(),Jt=ga.find(Tr=>Tr.name.toLowerCase()===_t.toLowerCase());Jt&&Jt.id!==i&&it.push(Jt.id)}return[...new Set(it)]},qd=z.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]],keyboard:{bindings:{mention:{key:"@",handler:()=>!0}}}}),[]),$d=["header","bold","italic","underline","strike","list","bullet","link"],Of=z.useCallback((D,de,ge,Ve)=>{if(Yn(D),je.current=Ve,ge==="user"){const it=Ve.getSelection(!0);if(it){const _t=Ve.getText().substring(0,it.index),Jt=_t.lastIndexOf("@");if(Jt!==-1){const Tr=_t.substring(Jt+1),An=Jt>0?_t[Jt-1]:" ";if(An===" "||An===`
`||Jt===0)if(!Tr.includes(" ")&&!Tr.includes(`
`)&&Tr.length<50){Cr(Jt),Ue(Tr);const wa=ga.filter($n=>$n.name?.toLowerCase().includes(Tr.toLowerCase())||$n.email?.toLowerCase().includes(Tr.toLowerCase()));jr(wa),Us(wa.length>0)}else Us(!1),Cr(null);else Us(!1),Cr(null)}else Us(!1),Cr(null)}}},[ga]),Pf=z.useCallback(D=>{const de=je.current;if(!de){console.error("[INBOX] Quill editor not available");return}de.focus();const ge=de.getText();let Ve=xr;if((Ve===null||Ve<0)&&(Ve=ge.lastIndexOf("@")),Ve===-1){console.error("[INBOX] Could not find @ symbol for mention"),Us(!1),Cr(null);return}const it=ge.substring(Ve+1),zt=it.indexOf(" "),_t=it.indexOf(`
`);let Jt=it.length;zt!==-1&&(Jt=Math.min(Jt,zt)),_t!==-1&&(Jt=Math.min(Jt,_t));const Tr=Ve,An=Ve+1+Jt,wa=An-Tr;console.log("[INBOX] Inserting mention:",{atIndex:Ve,deleteStartIndex:Tr,deleteEndIndex:An,deleteLength:wa,textAfterAt:it.substring(0,Jt),mentionText:`@${D.name} `}),de.setSelection(Tr,wa,"api"),de.deleteText(Tr,wa,"api");const $n=`@${D.name} `;de.insertText(Tr,$n,"api"),de.formatText(Tr,$n.length-1,{bold:!0,color:"#4338ca"},"api");const Vs=Tr+$n.length;de.setSelection(Vs,0,"api");const _i=de.root.innerHTML;Yn(_i),Us(!1),Cr(null)},[xr]),Ml=async()=>{if(!w||!br.trim()&&!wt||!i||!s){!br.trim()&&!wt&&r("Please enter a note or upload an image");return}me(!0);try{const D=w.id,de=s.name||s.email||"You",ge=document.createElement("div");ge.innerHTML=br;const it=(ge.textContent||ge.innerText||"").trim()?br.trim():"",zt={emailId:D,userId:i,userName:de,message:it};if(kn.length>0&&(zt.markedFor=kn),on&&on.trim()){if(on.length>75e4){r("Image is too large. Please use a smaller image."),me(!1);return}zt.imageUrl=on,wt?.name&&(zt.imageName=wt.name)}const _t=await cae(zt),Jt=_t?.data||{};if(!Jt.id&&!Jt.emailId)throw console.error("[INBOX] Invalid note response:",_t),new Error("Invalid response from server. Note was not created.");const Tr={id:Jt.id||`thread-${Date.now()}`,userId:i,userName:de,message:it,timestamp:Jt.createdAt||new Date().toISOString(),imageUrl:on||void 0,imageName:wt?.name||void 0,markedFor:Jt.markedFor||[]};On($n=>({...$n,[D]:[Tr,...$n[D]||[]]}));const An=ol(it);if(An.length>0)for(const $n of An)try{await Fp({userId:$n,type:"mention",title:"You were mentioned in an email note",message:`${de} mentioned you in a note on email: "${w.subject||"Untitled"}"`,link:`/?tab=inbox&email=${D}`,read:!1})}catch(Vs){const _i=Vs?.message||"Failed to send notification";console.error("Failed to send notification:",_i)}Yn(""),Xe(""),Wt(null),Pn([]),Se.current&&(Se.current.value=""),je.current&&je.current.setText("");const wa=_t?.message||(An.length>0?`Note added and ${An.length} user(s) notified`:"Internal note added");t(wa)}catch(D){const de=b(D,"Failed to add note");console.error("[INBOX] Error adding note:",de),r(de)}finally{me(!1)}},Ma=async(D,de)=>{if(!(!i||!s)){Ae(de);try{await dae(de,i),On(ge=>({...ge,[D]:(ge[D]||[]).filter(Ve=>Ve.id!==de)})),t("Note deleted")}catch(ge){const Ve=b(ge,"Failed to delete note");r(Ve)}finally{Ae(null)}}},ts=async D=>{if(!(!w||!i)){De(!0),ct([]),Je(null),Oe(null);try{const de=await fae(w.id,i,D),ge=de?.data??de??{};if(ge.variations&&Array.isArray(ge.variations)&&ge.variations.length>0)ct(ge.variations),Je(0),Oe(N(ge.variations[0].draft)),t(`Generated ${ge.variations.length} draft variations`);else{let Ve=ge.draft;(!Ve||typeof Ve!="string")&&(Ve=`Hi ${w.sender||"there"},

Thank you for your email regarding "${w.subject||"your inquiry"}".

[AI-generated draft response - customize as needed]

Best regards,
${s?.name||"Team"}`),Oe(N(Ve)),ct([{style:"default",description:"AI-generated draft",draft:Ve,confidence:75}]),Je(0),t("AI draft generated")}}catch(de){const ge=b(de,"Failed to generate draft");De(!1),setTimeout(()=>{console.error("[INBOX] Error generating draft:",ge),r(ge)},0)}finally{De(!1)}}},Wa=async()=>{if(!i||!Pa||yn.length===0){r("Please enter a subject and recipient to generate AI draft");return}vu(!0),ji(null);try{const de=`Hi ${yn[0].split("@")[0]},

${Pa?`Regarding: ${Pa}`:""}

[Your message here]

Best regards,
${s?.name||"Team"}`;await new Promise(ge=>setTimeout(ge,1e3)),ji(N(de)),t("AI draft generated")}catch(D){const de=b(D,"Failed to generate draft");r(de)}finally{vu(!1)}},rd=()=>{if(!Ce)return;let D="";try{if(pt.current&&typeof pt.current.getText=="function")D=pt.current.getText();else{const de=document.createElement("div");de.innerHTML=Ce,D=de.textContent||de.innerText||""}}catch(de){const ge=document.createElement("div");ge.innerHTML=Ce||"",D=ge.textContent||ge.innerText||"";const Ve=de?.message||"Error extracting text";console.error("[INBOX] Error extracting draft text:",Ve)}navigator.clipboard.writeText(D).then(()=>{t("Draft copied to clipboard! You can paste it into your email client.")}).catch(de=>{try{const ge=document.createElement("textarea");ge.value=D,document.body.appendChild(ge),ge.select(),document.execCommand("copy"),document.body.removeChild(ge),t("Draft copied to clipboard!")}catch(ge){const Ve=ge?.message||"Failed to copy to clipboard";console.error("[INBOX] Clipboard copy failed:",Ve),r("Failed to copy draft. Please select and copy manually.")}})},oc=()=>{!Ce||!i||!w||(Fn(""),vn(!0))},bu=async()=>{if(!xa||!xa.trim()||!Ce||!i||!w){r("Please enter a template name");return}try{const D=typeof Ce=="string"?Ce:String(Ce||"");await hae({name:xa.trim(),content:D,userId:i,category:"email-response"}),t("Template saved successfully!"),vn(!1),Fn(""),nd()}catch(D){const de=b(D,"Failed to save template");console.error("[INBOX] Error saving template:",de),r(de)}},nd=async()=>{if(i)try{const D=await pae(i),de=D?.data??D??[];Ur(Array.isArray(de)?de:[])}catch(D){const de=D?.message||"Failed to load templates";console.error("Failed to load templates:",de)}};z.useEffect(()=>{i&&nd()},[i]),z.useEffect(()=>{i&&ms&&nd()},[i,ms]);const rs=(D,de=100)=>{if(!D)return"";let ge=D.replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim();if(ge=ge.replace(/https?:\/\/[^\s]+/g,"").trim(),ge=ge.replace(/\s+/g," ").trim(),ge.length<=de)return ge;const Ve=ge.substring(0,de),it=Ve.lastIndexOf(" ");return it>de*.7?Ve.substring(0,it)+"...":Ve+"..."},ui=z.useMemo(()=>{let de=[...et.filter((ge,Ve,it)=>ge.id&&Ve===it.findIndex(zt=>zt.id===ge.id))];return He==="archived"?de=de.filter(ge=>ge.threadStatus==="archived"):He&&He!=="archived"?de=de.filter(ge=>ge.status===He):He||(de=de.filter(ge=>ge.threadStatus!=="archived")),_e&&(de=de.filter(ge=>(ge.labels||[]).includes(_e))),_&&i&&(de=de.filter(ge=>ge.owner===i)),Y&&(de=de.filter(ge=>ge.owner===Y)),de.sort((ge,Ve)=>{let it=0;switch(al){case"date":const zt=parseInt(ge.internalDate||"0")||0;it=(parseInt(Ve.internalDate||"0")||0)-zt;break;case"sender":const Jt=(ge.sender||ge.email||"").toLowerCase(),Tr=(Ve.sender||Ve.email||"").toLowerCase();it=Jt.localeCompare(Tr);break;case"subject":const An=(ge.subject||"").toLowerCase(),wa=(Ve.subject||"").toLowerCase();it=An.localeCompare(wa);break;case"unread":if(ge.isRead===Ve.isRead){const $n=parseInt(ge.internalDate||"0")||0;it=(parseInt(Ve.internalDate||"0")||0)-$n}else it=ge.isRead?1:-1;break}return ki==="asc"?-it:it}),de},[et,_e,_,Y,i,al,ki]);z.useEffect(()=>{w?.id&&(ui.some(de=>de.id===w.id)||(S(null),Hn([]),Vu(null),Oe(null),ct([]),Je(null),Zi([]),On(de=>{const ge={...de};return delete ge[w.id],ge})))},[ui,w?.id]);const zd=ui.filter(D=>!D.isRead).length,ll=z.useMemo(()=>{if(Er==="list")return null;const D=new Map;ui.forEach(ge=>{const Ve=ge.gmailThreadId||ge.id;D.has(Ve)||D.set(Ve,[]),D.get(Ve).push(ge)});const de=Array.from(D.entries()).map(([ge,Ve])=>{const it=[...Ve].sort((zt,_t)=>{const Jt=parseInt(zt.internalDate||"0")||0;return(parseInt(_t.internalDate||"0")||0)-Jt});return{threadId:ge,emails:it,latestEmail:it[0],unreadCount:it.filter(zt=>!zt.isRead).length}});return de.sort((ge,Ve)=>{let it=0;const zt=ge.latestEmail,_t=Ve.latestEmail;switch(al){case"date":const Jt=parseInt(zt.internalDate||"0")||0;it=(parseInt(_t.internalDate||"0")||0)-Jt;break;case"sender":const An=(zt.sender||zt.email||"").toLowerCase(),wa=(_t.sender||_t.email||"").toLowerCase();it=An.localeCompare(wa);break;case"subject":const $n=(zt.subject||"").toLowerCase(),Vs=(_t.subject||"").toLowerCase();it=$n.localeCompare(Vs);break;case"unread":if(ge.unreadCount>0&&Ve.unreadCount===0)it=-1;else if(ge.unreadCount===0&&Ve.unreadCount>0)it=1;else if(ge.unreadCount===Ve.unreadCount){const _i=parseInt(zt.internalDate||"0")||0;it=(parseInt(_t.internalDate||"0")||0)-_i}else it=Ve.unreadCount-ge.unreadCount;break}return ki==="asc"?-it:it}),de},[ui,Er,al,ki]),no=D=>{wr(de=>{const ge=new Set(de);return ge.has(D)?ge.delete(D):ge.add(D),ge})},$i=D=>{Gr(de=>{const ge=new Set(de);return ge.has(D)?ge.delete(D):ge.add(D),ge})};return i?a.jsxs("div",{className:"flex-1 min-h-0 flex flex-col animate-in fade-in duration-300 pb-8 min-w-0",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4 border-b border-slate-200 shrink-0",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Shared Inbox"}),_e&&a.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:["Filtered: ",ln.find(D=>D.id===_e)?.name||_e]})]}),a.jsxs("p",{className:"text-slate-500 text-sm mt-0.5",children:["Unified view from all team members' Gmail accounts  ",zd," unread",_e&&`  ${ui.length} email${ui.length!==1?"s":""} with label`]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[ln.length>0&&a.jsx("div",{className:"relative",children:a.jsxs("select",{value:_e||"",onChange:D=>{const de=D.target.value||null;Yt(de);const ge=document.querySelector(".overflow-y-auto");ge&&(ge.scrollTop=0)},className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors cursor-pointer",children:[a.jsx("option",{value:"",children:"All Labels"}),ln.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})}),a.jsxs("button",{onClick:()=>or(Er==="threads"?"list":"threads"),className:"inline-flex items-center gap-2 px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors",title:Er==="threads"?"Switch to list view":"Switch to threaded view",children:[a.jsx(fo,{className:"w-4 h-4"}),Er==="threads"?"Threads":"List"]}),g&&a.jsxs("button",{onClick:Yr,disabled:P,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:[P?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(bd,{className:"w-4 h-4"}),P?"Syncing":"Sync from Gmail"]}),Re.length>0&&a.jsxs("button",{onClick:()=>tr(!0),className:"inline-flex items-center gap-1.5 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700 transition-colors",title:`${Re.length} connected account${Re.length!==1?"s":""}`,children:[a.jsx(jn,{className:"w-3.5 h-3.5 text-emerald-600"}),a.jsx("span",{className:"hidden sm:inline",children:"Accounts"}),a.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-bold rounded-full",children:Re.length})]})]})]}),G===!1&&Re.length===0&&a.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[a.jsx(sa,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-amber-800 font-medium text-sm",children:"Connect Gmail to sync inbox"}),a.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Link your Google account to start syncing emails. You can connect multiple Gmail accounts."}),a.jsxs("button",{onClick:Mn,className:"mt-3 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Connect Gmail Account"]})]})]}),a.jsxs("div",{className:"mt-4 shrink-0 space-y-2 px-1",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(Sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search or use from: subject: has:attachment is:read",value:M,onChange:D=>q(D.target.value),onKeyDown:D=>D.key==="Enter"&&Ye(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),a.jsxs("button",{type:"button",onClick:()=>Q(D=>!D),className:`px-3 py-2.5 border rounded-xl text-sm font-medium flex items-center gap-2 shrink-0 ${fe?"bg-indigo-50 border-indigo-200 text-indigo-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,title:"Advanced filters",children:[a.jsx(nx,{className:"w-4 h-4"}),"Filters",(te||J||R!==void 0||U||oe||ie!==void 0||Le!==void 0||He||_e)&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})]})]}),fe&&a.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl bg-white shadow-sm space-y-4",children:[a.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"ADVANCED FILTERS"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"From (sender)"}),a.jsx("input",{type:"text",placeholder:"email or name",value:te,onChange:D=>{ne(D.target.value),ve(!0)},onFocus:()=>ve(!0),onBlur:()=>setTimeout(()=>ve(!1),180),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),we&&Ee.length>0&&a.jsx("div",{className:"absolute z-20 top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:Ee.filter(D=>!te||[D.email,D.name].some(de=>de?.toLowerCase().includes(te.toLowerCase()))).slice(0,20).map(D=>a.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 flex flex-col",onMouseDown:de=>{de.preventDefault(),ne(D.email||D.name),ve(!1)},children:[a.jsx("span",{className:"font-medium text-slate-800",children:D.name||D.email}),D.email!==D.name&&a.jsx("span",{className:"text-xs text-slate-500",children:D.email})]},D.email))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Read"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:ie===void 0?"":String(ie),onChange:D=>ce(D.target.value===""?void 0:D.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"false",children:"Unread"}),a.jsx("option",{value:"true",children:"Read"})]}),a.jsx(hl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date from"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",value:U,onChange:D=>K(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),a.jsx(ka,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date to"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",value:oe,onChange:D=>he(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),a.jsx(ka,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Subject"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"",value:J,onChange:D=>ee(D.target.value),className:"flex-1 px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),a.jsxs("div",{className:"relative w-32",children:[a.jsxs("select",{value:H,onChange:D=>O(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-8 hover:border-slate-300",children:[a.jsx("option",{value:"contains",children:"contains"}),a.jsx("option",{value:"equals",children:"equals"}),a.jsx("option",{value:"starts",children:"starts with"}),a.jsx("option",{value:"ends",children:"ends with"})]}),a.jsx(hl,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Attachment"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:R===void 0?"":String(R),onChange:D=>W(D.target.value===""?void 0:D.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"true",children:"Has attachment"}),a.jsx("option",{value:"false",children:"No attachment"})]}),a.jsx(hl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Status"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:He,onChange:D=>Fe(D.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"open",children:"Open"}),a.jsx("option",{value:"assigned",children:"Assigned to me"})]}),a.jsx(hl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Starred"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:Le===void 0?"":String(Le),onChange:D=>le(D.target.value===""?void 0:D.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"true",children:"Starred"}),a.jsx("option",{value:"false",children:"Not starred"})]}),a.jsx(hl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),ln.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Label"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:_e||"",onChange:D=>Yt(D.target.value||null),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"All labels"}),ln.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx(hl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Assigned To"}),a.jsxs("div",{className:"space-y-2.5",children:[a.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",checked:_,onChange:D=>{F(D.target.checked),D.target.checked&&se(null)},className:"w-4 h-4 text-indigo-600 border-2 border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 focus:ring-offset-0 focus:border-indigo-500 cursor-pointer transition-colors"}),a.jsx("span",{className:"text-sm text-slate-700 group-hover:text-slate-900 transition-colors",children:"Assigned to me"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:Y||"",onChange:D=>{const de=D.target.value||null;se(de),de&&F(!1)},className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any team member"}),ga.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx(hl,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>Ye(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Apply filters"}),a.jsx("button",{type:"button",onClick:()=>{ne(""),ee(""),O("contains"),W(void 0),K(""),he(""),ce(void 0),le(void 0),Fe(""),Yt(null),F(!1),se(null),q(""),Ye()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Clear all"}),a.jsxs("button",{type:"button",onClick:()=>Ne(!0),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[a.jsx(z_,{className:"w-4 h-4"}),"Save search"]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>kt(D=>!D),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[a.jsx(z_,{className:"w-4 h-4"}),"Saved (",pe.length,")"]}),mt&&a.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 w-64 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:pe.length===0?a.jsx("p",{className:"px-3 py-2 text-sm text-slate-500",children:"No saved searches"}):pe.map(D=>a.jsxs("div",{className:"flex items-center group",children:[a.jsx("button",{type:"button",className:"flex-1 text-left px-3 py-2 text-sm hover:bg-slate-100 truncate",onClick:()=>{q(D.filters.search??""),ne(D.filters.from??""),ee(D.filters.subject??""),O(D.filters.subjectOperator??"contains"),W(D.filters.hasAttachment),K(D.filters.dateFrom??""),he(D.filters.dateTo??""),ce(D.filters.isRead),le(D.filters.isStarred),Fe(D.filters.status??""),Yt(D.filters.labelId??null),kt(!1),Ye()},children:D.name}),a.jsx("button",{type:"button",className:"p-2 text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100",onClick:()=>{ue(de=>de.filter(ge=>ge.id!==D.id)),kt(!1)},title:"Delete saved search",children:""})]},D.id))})]}),a.jsxs("button",{type:"button",onClick:()=>{_l(!0),i&&YP(i).then(D=>{const de=D?.data??D??[];ri(Array.isArray(de)?de:[])}).catch(()=>ri([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Auto-labeling rules (domain or keyword  label)",children:[a.jsx(nx,{className:"w-4 h-4"}),"Categorization rules"]}),a.jsx("button",{type:"button",onClick:()=>{Wo(!0),i&&Gae(i).then(D=>{const de=D?.data??D??[];Al(Array.isArray(de)?de:[])}).catch(()=>Al([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Map Gmail labels to Impact OS views",children:"Folder mapping"}),a.jsxs("button",{type:"button",onClick:()=>{ni(!0),Xr.length===0&&gr()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Manage excluded email domains",children:[a.jsx(Vg,{className:"w-4 h-4"}),"Excluded Domains ",Xr.length>0&&`(${Xr.length})`]})]})]}),(M||te||J||R!==void 0||U||oe||ie!==void 0||Le!==void 0||He||_e)&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Active:"}),M&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:['Search "',M.length>20?M.slice(0,20)+"":M,'"',a.jsx("button",{type:"button",onClick:()=>q(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),_e&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs",children:["Label: ",ln.find(D=>D.id===_e)?.name||_e,a.jsx("button",{type:"button",onClick:()=>Yt(null),className:"hover:bg-indigo-200 rounded p-0.5","aria-label":"Clear",children:""})]}),te&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["From: ",te,a.jsx("button",{type:"button",onClick:()=>ne(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),J&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Subject",a.jsx("button",{type:"button",onClick:()=>ee(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),R!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[R?"Has attachment":"No attachment",a.jsx("button",{type:"button",onClick:()=>W(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),He&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Status: ",He,a.jsx("button",{type:"button",onClick:()=>Fe(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),ie!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[ie?"Read":"Unread",a.jsx("button",{type:"button",onClick:()=>ce(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),Le!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[Le?"Starred":"Not starred",a.jsx("button",{type:"button",onClick:()=>le(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),(U||oe)&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Date ",U&&oe?`${U}  ${oe}`:U||oe,a.jsx("button",{type:"button",onClick:()=>{K(""),he("")},className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]})]})]}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>{Fe(He==="archived"?"":"archived")},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${He==="archived"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[a.jsx(Gg,{className:"w-4 h-4 inline mr-1.5"}),He==="archived"?"Show Active":"Show Archived"]}),He==="archived"&&a.jsxs("span",{className:"text-sm text-slate-500",children:[ui.length," archived email(s)"]})]}),(za||ha.size>0)&&a.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:ac,className:"text-sm font-medium text-indigo-700 hover:text-indigo-800",children:ha.size===ui.length?"Deselect all":"Select all"}),a.jsxs("span",{className:"text-sm text-indigo-600",children:[ha.size," selected"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:Xn,disabled:Cf||ha.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Read"}),a.jsx("button",{type:"button",onClick:jo,disabled:Cf||ha.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Archive"}),a.jsx("button",{type:"button",onClick:yu,disabled:Cf||ha.size===0,className:"px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"}),a.jsx("button",{type:"button",onClick:qi,className:"px-3 py-1.5 text-indigo-700 text-sm font-medium hover:text-indigo-800",children:"Cancel"})]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 flex-wrap",children:[a.jsx("div",{className:"flex items-center gap-2",children:!za&&a.jsxs("button",{type:"button",onClick:qi,className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-2",children:[a.jsx(bl,{className:"w-4 h-4"}),"Select"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm text-slate-600",children:"Sort by:"}),a.jsxs("select",{value:al,onChange:D=>Eh(D.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"date",children:"Date"}),a.jsx("option",{value:"sender",children:"Sender"}),a.jsx("option",{value:"subject",children:"Subject"}),a.jsx("option",{value:"unread",children:"Unread"})]}),a.jsx("button",{type:"button",onClick:()=>Ud(ki==="asc"?"desc":"asc"),className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50",title:ki==="asc"?"Ascending":"Descending",children:ki==="asc"?a.jsx(PB,{className:"w-4 h-4"}):a.jsx(hl,{className:"w-4 h-4"})})]})]}),Pe&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>{Ne(!1),nt("")},children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-4 space-y-3",onClick:D=>D.stopPropagation(),children:[a.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Save current search"}),a.jsx("input",{type:"text",placeholder:"Search name",value:Be,onChange:D=>nt(D.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{type:"button",onClick:()=>{Ne(!1),nt("")},className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>{const D=Be.trim()||"Saved search",de={search:M||void 0,status:He||void 0,from:te||void 0,subject:J||void 0,subjectOperator:H,hasAttachment:R,dateFrom:U||void 0,dateTo:oe||void 0,labelId:_e||void 0,isRead:ie,isStarred:Le},ge={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`saved-${Date.now()}`,name:D,filters:de};ue(Ve=>[...Ve,ge]),Ne(!1),nt("")},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save"})]})]})}),Id&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>_l(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col p-4",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Auto-labeling rules"}),a.jsx("button",{type:"button",onClick:async()=>{if(i){Cl(!0);try{const de=(await Hae(i,30))?.data;w0(de)}catch(D){console.error("Failed to load accuracy stats:",D)}finally{Cl(!1)}}},className:"text-xs text-indigo-600 hover:text-indigo-700 hover:underline",disabled:fu,children:fu?"Loading...":"View accuracy stats"})]}),a.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'When an email matches a rule (sender domain or keyword in subject/body), "Suggest labels" will recommend the label. Add rules below.'}),Ka&&a.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:["Categorization Accuracy (Last ",Ka.periodDays," days)"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Overall Accuracy"}),a.jsxs("p",{className:"text-lg font-semibold text-indigo-600",children:[Ka.summary.accuracyRate,"%"]}),a.jsxs("p",{className:"text-xs text-slate-400",children:[Ka.summary.accepted," accepted / ",Ka.summary.accepted+Ka.summary.rejected+Ka.summary.changed," resolved"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Total Suggestions"}),a.jsx("p",{className:"text-lg font-semibold text-slate-700",children:Ka.summary.total}),a.jsxs("p",{className:"text-xs text-slate-400",children:[Ka.summary.pending," pending"]})]})]}),a.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200",children:[a.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"By Source:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Domain Rules"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[Ka.bySource.domain.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[Ka.bySource.domain.accepted,"/",Ka.bySource.domain.total]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Keyword Rules"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[Ka.bySource.keyword.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[Ka.bySource.keyword.accepted,"/",Ka.bySource.keyword.total]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"AI Suggestions"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[Ka.bySource.ai.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[Ka.bySource.ai.accepted,"/",Ka.bySource.ai.total]})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[a.jsxs("select",{value:uu,onChange:D=>Ho(D.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"domain",children:"Sender domain"}),a.jsx("option",{value:"keyword",children:"Keyword"})]}),a.jsx("input",{type:"text",placeholder:uu==="domain"?"e.g. company.com":"e.g. invoice",value:bi,onChange:D=>Qi(D.target.value),className:"flex-1 min-w-[120px] px-2 py-1.5 border border-slate-200 rounded-lg text-sm"}),a.jsxs("select",{value:Sc,onChange:D=>mo(D.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Select label"}),ln.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx("button",{type:"button",disabled:!bi.trim()||!Sc||!i,onClick:async()=>{if(!(!i||!bi.trim()||!Sc))try{await Wae({userId:i,type:uu,value:bi.trim(),labelId:Sc,labelName:ln.find(ge=>ge.id===Sc)?.name});const D=await YP(i),de=D?.data??D??[];ri(Array.isArray(de)?de:[]),Qi(""),mo(""),t("Rule added")}catch(D){r(D?.message||"Failed to add rule")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:"Add rule"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100",children:po.length===0?a.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No rules yet. Add a domain or keyword rule above."}):po.map(D=>a.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 text-sm",children:[a.jsxs("span",{className:"text-slate-700",children:[a.jsx("span",{className:"font-medium",children:D.type==="domain"?"Domain":"Keyword"}),a.jsxs("span",{className:"text-slate-500",children:[' "',D.value,'"  ']}),a.jsx("span",{className:"text-indigo-600",children:D.labelName||D.labelId})]}),a.jsx("button",{type:"button",onClick:async()=>{if(i)try{await Vae(D.id,i),ri(de=>de.filter(ge=>ge.id!==D.id)),t("Rule removed")}catch(de){r(de?.message||"Failed to delete")}},className:"p-1 text-slate-400 hover:text-red-600 rounded",title:"Delete rule",children:a.jsx(cr,{className:"w-4 h-4"})})]},D.id))}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>_l(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Close"})})]})}),Xo&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:()=>ni(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col overflow-hidden",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-pink-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-red-600 rounded-xl text-white shadow-lg shadow-red-100",children:a.jsx(Vg,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Excluded Email Domains"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Email Filtering"})]})]}),a.jsx("button",{type:"button",onClick:()=>ni(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Emails from these domains will not sync or appear in your shared inbox"})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"e.g. wx.agency",value:un,onChange:D=>Ta(D.target.value),onKeyDown:D=>{D.key==="Enter"&&un.trim()&&lr()},className:"flex-1 px-4 py-2.5 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-red-500 focus:ring-2 focus:ring-red-500/20 focus:outline-none transition-all"}),a.jsx("button",{type:"button",onClick:lr,disabled:!un.trim()||qs,className:"px-4 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm",children:qs?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Nn,{className:"w-4 h-4"}),"Add"]})})]}),$a?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(jt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-red-600"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Loading excluded domains..."})]}):Xr.length===0?a.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[a.jsx(Vg,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No excluded domains"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add domains above to prevent emails from syncing"})]}):a.jsx("div",{className:"space-y-2",children:Xr.map(D=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border-2 border-slate-200 hover:border-red-300 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(Vg,{className:"w-4 h-4 text-red-600"})}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:D.domain})]}),a.jsx("button",{type:"button",onClick:()=>qr(D.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove domain",children:a.jsx(Br,{className:"w-4 h-4"})})]},D.id))})]}),a.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>ni(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})})]})}),hs&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>Wo(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col p-4",onClick:D=>D.stopPropagation(),children:[a.jsx("p",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Folder mapping"}),a.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Map Gmail labels to display names (view names) in Impact OS. Order determines sort in views."}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100 mb-3",children:fs.length===0?a.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No mappings. Add labels below to create folder-like views."}):fs.map((D,de)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm",children:[a.jsx("span",{className:"flex-1 text-slate-700 truncate",children:D.labelName||D.labelId}),a.jsx("input",{type:"text",placeholder:"View name",value:D.viewName??"",onChange:ge=>{const Ve=[...fs];Ve[de]={...Ve[de],viewName:ge.target.value},Al(Ve)},className:"w-32 px-2 py-1 border border-slate-200 rounded text-xs"}),a.jsx("button",{type:"button",onClick:()=>Al(ge=>ge.filter((Ve,it)=>it!==de)),className:"p-1 text-slate-400 hover:text-red-600 rounded",children:a.jsx(cr,{className:"w-4 h-4"})})]},D.labelId||de))}),a.jsx("div",{className:"flex gap-2 flex-wrap items-center mb-3",children:a.jsxs("select",{value:"",onChange:D=>{const de=D.target.value;if(!de||fs.some(Ve=>Ve.labelId===de))return;const ge=ln.find(Ve=>Ve.id===de);Al(Ve=>[...Ve,{labelId:de,labelName:ge?.name,viewName:ge?.name??"",sortOrder:Ve.length}]),D.target.value=""},className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Add label to mapping"}),ln.filter(D=>!fs.some(de=>de.labelId===D.id)).map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]})}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>Wo(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"button",onClick:async()=>{if(i)try{await Kae({userId:i,mappings:fs}),t("Folder mapping saved"),Wo(!1)}catch(D){r(D?.message||"Failed to save")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save mapping"})]})]})}),rr&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-xl text-red-700 text-sm",children:rr}),a.jsxs("div",{className:"flex-1 min-h-[50vh] lg:min-h-[400px] flex flex-col lg:flex-row gap-4 mt-4 min-w-0",children:[a.jsx("div",{className:`flex flex-col min-h-0 border border-slate-200 rounded-xl bg-white overflow-hidden ${w?"min-h-[35vh] flex-1 lg:min-h-0 lg:w-[380px] lg:max-w-[380px] lg:flex-shrink-0":"flex-1 min-h-[35vh] lg:min-h-0"}`,children:xt?a.jsx("div",{className:"flex-1 overflow-y-auto",children:[...Array(10)].map((D,de)=>a.jsx("div",{className:"px-4 py-3 border-b border-slate-100 animate-pulse",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2 mb-1"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]}),a.jsx("div",{className:"w-16 h-3 bg-slate-200 rounded flex-shrink-0"})]})},de))}):ui.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[a.jsx(gi,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-600 font-medium",children:_e?"No emails with this label":"No emails yet"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:_e?"Try selecting a different label or clear the filter to see all emails.":'Connect Gmail and tap "Sync new mail (24 hrs)" to pull in recent inbox.'}),_e&&a.jsx("button",{onClick:()=>Yt(null),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700",children:"Clear Filter"}),!_e&&a.jsx("button",{onClick:Yr,disabled:P,className:"mt-4 px-4 py-2 bg-slate-100 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-200 disabled:opacity-60",children:P?"Syncing":"Sync from Gmail"})]}):Er==="threads"&&ll?a.jsxs("ul",{ref:kc,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[ll.map(D=>{const de=Ut.has(D.threadId),ge=D.latestEmail,Ve=D.emails.length>1;return a.jsxs("li",{children:[a.jsxs("div",{className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 ${w?.id===ge.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[za&&a.jsx("input",{type:"checkbox",checked:ha.has(ge.id),onChange:()=>nc(ge.id),onClick:it=>it.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.jsx(Qs,{src:void 0,alt:ge.sender||ge.email||"",fallbackText:ge.sender||ge.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),Ve&&a.jsx("div",{role:"button",tabIndex:0,onClick:it=>{it.stopPropagation(),no(D.threadId)},onKeyDown:it=>{(it.key==="Enter"||it.key===" ")&&(it.preventDefault(),it.stopPropagation(),no(D.threadId))},className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",children:de?a.jsx(hl,{className:"w-4 h-4 text-slate-500"}):a.jsx(_s,{className:"w-4 h-4 text-slate-500"})}),a.jsx("button",{type:"button",onClick:()=>!za&&(Ve?no(D.threadId):ws(ge)),className:"flex-1 min-w-0 text-left",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`truncate font-medium ${D.unreadCount>0?"text-slate-900":"text-slate-600"}`,children:ge.subject||"(No subject)"}),ge.isStarred&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Mv,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),ge.syncStatus?.starredStatus&&us(ge.syncStatus.starredStatus)]}),ge.attachments&&ge.attachments.length>0&&a.jsx(Bh,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${ge.attachments.length} attachment(s)`}),ge.priority&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ge.priority==="high"?"bg-red-100 text-red-700":ge.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:ge.priority==="high"?"High":ge.priority==="low"?"Low":"Medium"}),ge.threadStatus&&ge.threadStatus!=="active"&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${ge.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":ge.threadStatus==="pending"?"bg-amber-100 text-amber-700":ge.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:ge.threadStatus.charAt(0).toUpperCase()+ge.threadStatus.slice(1)}),ge.owner&&ga.find(it=>it.id===ge.owner)&&a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:ga.find(it=>it.id===ge.owner)?.name||"Assigned"}),Ve&&a.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-[10px] font-medium rounded-full",children:D.emails.length})]}),a.jsxs("p",{className:"text-xs text-slate-500 mt-0 truncate",children:[ge.sender||ge.email,Ve&&`  ${D.emails.length} messages`]}),(()=>{const it=new Set;D.emails.forEach(_t=>{_t.participants&&Array.isArray(_t.participants)&&_t.participants.forEach(Jt=>it.add(Jt.toLowerCase())),_t.to&&Array.isArray(_t.to)&&_t.to.forEach(Jt=>it.add(Jt.toLowerCase())),_t.cc&&Array.isArray(_t.cc)&&_t.cc.forEach(Jt=>it.add(Jt.toLowerCase()))});const zt=Array.from(it).slice(0,5);return zt.length>0?a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[a.jsx("span",{className:"text-slate-500",children:"To: "}),zt.map((_t,Jt)=>a.jsxs("span",{children:[_t.split("@")[0],Jt<zt.length-1&&", "]},_t)),it.size>5&&` +${it.size-5} more`]}):null})(),(ge.accountEmail||ge.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[ge.accountOwnerName&&a.jsxs("span",{className:"text-slate-500",children:["via ",ge.accountOwnerName]}),ge.accountEmail&&a.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:ge.accountEmail})]}),ge.lastMessage&&a.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:rs(ge.lastMessage,80)})]})}),a.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:ge.timestamp}),D.unreadCount>0&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!za&&a.jsx(_s,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]}),de&&Ve&&a.jsx("div",{className:"bg-slate-50/50 border-l-4 border-indigo-200 pl-4",children:D.emails.map((it,zt)=>{const _t=kr.has(it.id);return a.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[a.jsxs("button",{type:"button",onClick:()=>$i(it.id),className:`w-full text-left px-4 py-2.5 hover:bg-slate-100 transition-colors flex items-start gap-3 ${w?.id===it.id?"bg-indigo-50":""}`,children:[a.jsx("div",{className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",onClick:Jt=>{Jt.stopPropagation(),$i(it.id)},children:_t?a.jsx(hl,{className:"w-3 h-3 text-slate-500"}):a.jsx(_s,{className:"w-3 h-3 text-slate-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`text-xs font-medium ${it.isRead?"text-slate-600":"text-slate-900"}`,children:it.sender||it.email}),!it.isRead&&a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(it.to?.length>0||it.cc?.length>0)&&a.jsxs("span",{className:"text-xs text-slate-400",children:[it.to?.length>0&&`To: ${it.to.slice(0,2).map(Jt=>Jt.split("@")[0]).join(", ")}${it.to.length>2?"...":""}`,it.cc?.length>0&&` CC: ${it.cc.slice(0,2).map(Jt=>Jt.split("@")[0]).join(", ")}${it.cc.length>2?"...":""}`]})]}),it.lastMessage&&!_t&&a.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:rs(it.lastMessage,100)})]}),a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap flex-shrink-0",children:it.timestamp})]}),_t&&a.jsxs("div",{className:"px-4 pb-3 pt-1 bg-white border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[a.jsx("span",{className:"font-medium",children:it.sender||it.email}),a.jsx("span",{className:"text-slate-400",children:""}),a.jsx("span",{children:it.timestamp})]}),a.jsx("button",{type:"button",onClick:()=>ws(it),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"View full email "})]}),a.jsx("div",{className:"text-xs text-slate-700 mt-2",children:a.jsx(YI,{content:it.lastMessage||"No content"})}),(it.to?.length>0||it.cc?.length>0||it.bcc?.length>0)&&a.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 text-xs text-slate-500",children:[it.to?.length>0&&a.jsxs("div",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"To:"})," ",it.to.join(", ")]}),it.cc?.length>0&&a.jsxs("div",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"CC:"})," ",it.cc.join(", ")]}),it.bcc?.length>0&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"BCC:"})," ",it.bcc.join(", ")]})]})]})]},it.id)})})]},D.threadId)}),st&&a.jsx("li",{className:"px-4 py-3",ref:Kl,children:dt?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(jt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):a.jsx("div",{className:"h-1"})})]},`threads-${_e||"all"}`):a.jsxs("ul",{ref:kc,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[ui.map(D=>a.jsx("li",{children:a.jsxs("div",{className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 ${w?.id===D.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[za&&a.jsx("input",{type:"checkbox",checked:ha.has(D.id),onChange:()=>nc(D.id),onClick:de=>de.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.jsx(Qs,{src:void 0,alt:D.sender||D.email||"",fallbackText:D.sender||D.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),a.jsx("button",{type:"button",onClick:()=>!za&&ws(D),className:"flex-1 min-w-0 text-left",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`truncate font-medium ${D.isRead?"text-slate-600":"text-slate-900"}`,children:D.subject||"(No subject)"}),D.isStarred&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Mv,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),D.syncStatus?.starredStatus&&us(D.syncStatus.starredStatus)]}),D.attachments&&D.attachments.length>0&&a.jsx(Bh,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${D.attachments.length} attachment(s)`}),D.priority&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${D.priority==="high"?"bg-red-100 text-red-700":D.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:D.priority==="high"?"High":D.priority==="low"?"Low":"Medium"}),D.threadStatus&&D.threadStatus!=="active"&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${D.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":D.threadStatus==="pending"?"bg-amber-100 text-amber-700":D.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:D.threadStatus.charAt(0).toUpperCase()+D.threadStatus.slice(1)}),D.owner&&ga.find(de=>de.id===D.owner)&&a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:ga.find(de=>de.id===D.owner)?.name||"Assigned"}),D.labels&&D.labels.length>0&&a.jsxs(a.Fragment,{children:[D.labels.slice(0,3).map(de=>{const ge=ln.find(Ve=>Ve.id===de);return ge?a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",title:ge.name,children:ge.name},de):null}),D.labels.length>3&&a.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",children:["+",D.labels.length-3]})]})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-0 truncate",children:D.sender||D.email}),(D.accountEmail||D.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[D.accountOwnerName&&a.jsxs("span",{className:"text-slate-500",children:["via ",D.accountOwnerName]}),D.accountEmail&&a.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:D.accountEmail})]}),D.lastMessage&&a.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:rs(D.lastMessage,80)})]})}),a.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:D.timestamp}),!D.isRead&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!za&&a.jsx(_s,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]})},D.id)),Er==="list"&&st&&a.jsx("li",{ref:Kl,className:"px-4 py-3",children:dt?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(jt,{className:"w-5 h-5 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):a.jsx("div",{className:"h-1"})})]},`list-${_e||"all"}`)}),a.jsx("div",{className:"flex-1 min-h-[200px] lg:min-h-[400px] flex flex-col border border-slate-200 rounded-xl bg-white overflow-hidden min-w-0 max-h-full",children:T?a.jsx("div",{className:"flex-1 flex items-center justify-center py-16",children:a.jsx(jt,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):w?a.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch"},children:[a.jsxs("div",{className:"p-3 border-b border-slate-100 flex flex-col gap-2 overflow-visible",children:[a.jsx("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-base font-semibold text-slate-900 break-words",children:w.subject||"(No subject)"}),a.jsxs("p",{className:"text-xs text-slate-500 mt-0.5 flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"break-words",children:w.sender||w.email}),a.jsx("span",{children:""}),a.jsx("span",{children:w.timestamp}),w.senderClassification&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded flex-shrink-0 ${w.senderClassification==="internal"?"bg-slate-100 text-slate-700":w.senderClassification==="system"?"bg-slate-200 text-slate-600":"bg-indigo-50 text-indigo-700"}`,children:w.senderClassification==="internal"?"Internal":w.senderClassification==="system"?"System":"Customer"})]}),(w.accountEmail||w.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0.5 flex items-center gap-2 flex-wrap",children:[w.accountOwnerName&&a.jsxs("span",{children:["Synced via ",a.jsx("span",{className:"font-medium text-slate-600",children:w.accountOwnerName})]}),w.accountEmail&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded",children:w.accountEmail})]})]})}),w.linkedRecords&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[w.linkedRecords.contactId&&(()=>{const D=Cc.find(de=>de.id===w.linkedRecords?.contactId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg",children:[a.jsx(vl,{className:"w-3 h-3"}),D.name]}):null})(),w.linkedRecords.companyId&&(()=>{const D=Tc.find(de=>de.id===w.linkedRecords?.companyId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg",children:[a.jsx(gd,{className:"w-3 h-3"}),D.name]}):null})(),w.linkedRecords.dealId&&(()=>{const D=rl.find(de=>de.id===w.linkedRecords?.dealId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-lg",children:[a.jsx(ru,{className:"w-3 h-3"}),D.title||D.name]}):null})(),w.linkedRecords.projectId&&(()=>{const D=$s.find(de=>de.id===w.linkedRecords?.projectId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 text-xs font-medium rounded-lg",children:[a.jsx(Zf,{className:"w-3 h-3"}),D.title||D.name]}):null})(),w.linkedRecords.contractId&&(()=>{const D=Md.find(de=>de.id===w.linkedRecords?.contractId);return D?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-50 text-red-700 text-xs font-medium rounded-lg",children:[a.jsx(Ga,{className:"w-3 h-3"}),D.title]}):null})()]}),Bd?a.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-slate-500",children:[a.jsx(jt,{className:"w-3 h-3 animate-spin"}),"Finding matches..."]}):(Rd.contacts.length>0||Rd.companies.length>0)&&a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Suggested links:"}),Rd.contacts.map(D=>a.jsxs("button",{onClick:()=>_n("contact",D.id),disabled:nl,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[a.jsx(vl,{className:"w-3 h-3"}),D.name,a.jsx(Nn,{className:"w-3 h-3"})]},D.id)),Rd.companies.map(D=>a.jsxs("button",{onClick:()=>_n("company",D.id),disabled:nl,className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:[a.jsx(gd,{className:"w-3 h-3"}),D.name,a.jsx(Nn,{className:"w-3 h-3"})]},D.id))]}),a.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 max-w-full",children:[a.jsxs("button",{type:"button",onClick:()=>{Lc("contact"),xu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Contact"]}),a.jsxs("button",{type:"button",onClick:()=>{Lc("company"),xu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Company"]}),a.jsxs("button",{type:"button",onClick:()=>{Lc("deal"),xu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Deal"]}),a.jsxs("button",{type:"button",onClick:()=>{Lc("project"),xu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Project"]}),a.jsxs("button",{type:"button",onClick:()=>{Lc("contract"),xu(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Vf,{className:"w-3 h-3 flex-shrink-0"}),"Link Contract"]}),a.jsxs("button",{type:"button",onClick:()=>Fc(!0),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(bl,{className:"w-3 h-3 flex-shrink-0"}),"Create Task"]})]}),w.labels&&w.labels.length>0&&a.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1 max-w-full",children:w.labels.map(D=>{const de=ln.find(ge=>ge.id===D);return de?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[a.jsx("span",{className:"truncate max-w-[200px]",children:de.name}),a.jsx("button",{type:"button",onClick:()=>wo(w.id,D),className:"hover:text-purple-900 flex-shrink-0",title:"Remove label",children:a.jsx(cr,{className:"w-3 h-3"})})]},D):null})}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 max-w-full",children:[a.jsxs("button",{type:"button",disabled:jf||!i,onClick:async()=>{if(!(!w?.id||!i)){Sl(!0),Hn([]);try{const de=(await zae({emailId:w.id,userId:i,useAi:!0,availableLabels:ln.map(ge=>({id:ge.id,name:ge.name}))}))?.data;de?.suggestedLabels?.length&&(Hn(de.suggestedLabels),Vu(de.suggestionId||null))}catch{Hn([])}finally{Sl(!1)}}},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50 whitespace-nowrap flex-shrink-0",children:[jf?a.jsx(jt,{className:"w-3 h-3 animate-spin flex-shrink-0"}):a.jsx(Gi,{className:"w-3 h-3 flex-shrink-0"}),"Suggest labels"]}),ta.length>0&&a.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Suggested:"}),ta.map((D,de)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-800 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:D.labelName}),a.jsxs("span",{className:"text-amber-600 text-[10px] flex-shrink-0",children:["(",D.source,")"]}),D.labelId&&a.jsx("button",{type:"button",onClick:()=>{Ws(w.id,[D.labelId],[],!0,ti||void 0),Hn(ge=>ge.filter((Ve,it)=>it!==de))},className:"hover:bg-amber-100 rounded px-0.5 flex-shrink-0",title:"Add to email",children:a.jsx(Nn,{className:"w-3 h-3"})})]},D.labelId||de))]}),a.jsx("div",{className:"mt-1",children:a.jsxs("button",{type:"button",onClick:()=>{mn(w.id),_r(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors",children:[a.jsx(Nn,{className:"w-3 h-3"}),w.labels&&w.labels.length>0?"Manage Labels":"Add Labels"]})}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),(w.customTags||[]).map((D,de)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 text-slate-700 text-xs rounded-lg",children:[D,a.jsx("button",{type:"button",onClick:()=>{const ge=(w.customTags||[]).filter((Ve,it)=>it!==de);hv(w.id,{userId:i,customTags:ge}).then(()=>{S(Ve=>Ve?{...Ve,customTags:ge}:null)}).catch(()=>{})},className:"hover:text-red-600",children:a.jsx(cr,{className:"w-3 h-3"})})]},de)),a.jsx("input",{type:"text",placeholder:"Add tag",value:Nc,onChange:D=>jc(D.target.value),onKeyDown:D=>{if(D.key==="Enter"&&Nc.trim()){const ge=[...w.customTags||[],Nc.trim()];hv(w.id,{userId:i,customTags:ge}).then(()=>{S(Ve=>Ve?{...Ve,customTags:ge}:null),jc("")}).catch(()=>{})}},className:"w-24 px-2 py-0.5 text-xs border border-slate-200 rounded-lg"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1.5 border-t border-slate-100",children:[v&&a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("select",{value:w.priority||"medium",onChange:D=>Ha(w.id,{priority:D.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Priority",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"})]}),a.jsxs("select",{value:w.threadStatus||"active",onChange:D=>Ha(w.id,{threadStatus:D.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Status",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"archived",children:"Archived"})]}),c&&a.jsxs("select",{value:w.owner||"",onChange:D=>Ha(w.id,{owner:D.target.value||null}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[120px]",title:"Assign to",children:[a.jsx("option",{value:"",children:"Unassigned"}),ga.map(D=>a.jsx("option",{value:D.id,children:D.name||D.email},D.id))]})]}),m&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>Ns(w.id,!w.isStarred),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",title:w.isStarred?"Unstar":"Star",children:w.isStarred?a.jsx(Mv,{className:"w-4 h-4 text-amber-500 fill-amber-500"}):a.jsx(sU,{className:"w-4 h-4"})}),w.syncStatus?.starredStatus&&a.jsx("div",{className:"flex-shrink-0",children:us(w.syncStatus.starredStatus)})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>La(w.id,!w.isRead),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 text-xs font-medium",children:w.isRead?"Mark unread":"Mark read"}),w.syncStatus?.readStatus&&a.jsx("div",{className:"flex-shrink-0",children:us(w.syncStatus.readStatus)})]}),p&&a.jsx(a.Fragment,{children:w.threadStatus==="archived"?a.jsxs("button",{type:"button",onClick:()=>j0(w.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Restore from archive",children:[a.jsx(Gg,{className:"w-3 h-3"}),"Restore"]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>Ll(w.id),className:"px-3 py-1.5 bg-slate-600 text-white text-xs font-medium rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2",title:"Archive email",children:[a.jsx(Gg,{className:"w-3 h-3"}),"Archive"]}),w.threadStatus!=="resolved"&&v&&a.jsxs("button",{type:"button",onClick:()=>No(w.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Mark as resolved",children:[a.jsx(jn,{className:"w-3 h-3"}),"Resolve"]})]})}),y&&a.jsxs("button",{type:"button",onClick:()=>Tf(w.id),className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",title:"Delete email",children:[a.jsx(Br,{className:"w-3 h-3"}),"Delete"]}),f&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>{Ec("reply"),cs([w.email]),xs([]),Ts([]),Fi(w.subject?.startsWith("Re:")?w.subject:`Re: ${w.subject||""}`),ua(""),Mi(w.accountEmail||Re[0]?.email||""),Yo(!1),go(!1),eo(!0)},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[a.jsx(Iu,{className:"w-3 h-3"}),"Reply"]}),a.jsx("button",{type:"button",onClick:()=>{Ec("replyAll");const D=(w.accountEmail||"").toLowerCase(),de=[w.email,...w.to||[],...w.cc||[]].filter((ge,Ve,it)=>{const zt=ge.toLowerCase();return it.findIndex(_t=>_t.toLowerCase()===zt)===Ve&&zt!==D});cs([w.email]),xs(de.filter(ge=>ge.toLowerCase()!==w.email.toLowerCase())),Ts([]),Fi(w.subject?.startsWith("Re:")?w.subject:`Re: ${w.subject||""}`),ua(""),Mi(w.accountEmail||Re[0]?.email||""),Yo(!0),go(!1),eo(!0)},className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-100 transition-colors",children:"Reply All"})]}),d&&a.jsx("button",{type:"button",onClick:()=>{Ec("forward"),cs([]),xs([]),Ts([]),Fi(w.subject?.startsWith("Fwd:")||w.subject?.startsWith("Fw:")?w.subject:`Fwd: ${w.subject||""}`);const D=w.body||w.lastMessage||"";ua(`

--- Forwarded message ---
From: ${w.sender||w.email}
Date: ${w.timestamp}
Subject: ${w.subject}
To: ${w.to?.join(", ")||w.email}

${D}`),Mi(w.accountEmail||Re[0]?.email||""),Yo(!1),go(!1),eo(!0)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Forward"}),a.jsxs("button",{type:"button",onClick:async()=>{if(!(!i||!w.id)){$e(!0);try{if((await Jae(i,w.id,!0)).success&&(t("Meeting created successfully!"),w.id)){const de=await Bv(i,w.id);de.success&&de.data&&Zi(de.data)}}catch(D){r(D.message||"Failed to create meeting")}finally{$e(!1)}}},disabled:be||!i,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Create meeting from email (auto-extract details)",children:[be?a.jsx(jt,{className:"w-3 h-3 animate-spin"}):a.jsx(ka,{className:"w-3 h-3"}),"Schedule Meeting"]})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-6 min-h-[200px]",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Email Content"}),a.jsx("div",{className:"prose prose-slate max-w-none break-words",children:a.jsx(YI,{content:w.body||w.lastMessage||"No content",highlightTerm:Ie(M).searchText||void 0})})]}),(pu.length>0||Il.length>0||Pc.length>0)&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Related Items"}),a.jsxs("div",{className:"space-y-3",children:[pu.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(bl,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Tasks (",pu.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:pu.map(D=>a.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900",children:D.title}),D.status&&a.jsx("span",{className:"text-xs text-slate-500",children:D.status})]},D.id))})]}),Il.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Zf,{className:"w-4 h-4 text-amber-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Projects (",Il.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:Il.map(D=>a.jsxs("div",{className:"p-2 bg-amber-50 rounded-lg border border-amber-200",children:[a.jsx("p",{className:"text-sm font-medium text-amber-900",children:D.title||D.name}),D.status&&a.jsx("span",{className:"text-xs text-amber-600",children:D.status})]},D.id))})]}),Pc.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Ga,{className:"w-4 h-4 text-red-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Contracts (",Pc.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:Pc.map(D=>a.jsxs("div",{className:"p-2 bg-red-50 rounded-lg border border-red-200",children:[a.jsx("p",{className:"text-sm font-medium text-red-900",children:D.title}),D.status&&a.jsx("span",{className:"text-xs text-red-600",children:D.status})]},D.id))})]})]})]}),hu.length>0&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(ka,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Linked Calendar Events (",hu.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:hu.map(D=>a.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-1",children:D.title}),a.jsxs("div",{className:"flex flex-col gap-1 text-xs text-indigo-700",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(As,{className:"w-3 h-3"}),a.jsxs("span",{children:[new Date(D.start).toLocaleString()," - ",new Date(D.end).toLocaleString()]})]}),D.location&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(iD,{className:"w-3 h-3"}),a.jsx("span",{children:D.location})]}),D.participants&&D.participants.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(vl,{className:"w-3 h-3"}),a.jsx("span",{children:D.participants.join(", ")})]})]})]}),D.htmlLink&&a.jsx("a",{href:D.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 text-indigo-600 hover:bg-indigo-200 rounded transition-colors",title:"Open in Google Calendar",children:a.jsx(Ti,{className:"w-4 h-4"})})]})},D.id))})]}),w.attachments&&w.attachments.length>0&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Bh,{className:"w-4 h-4 text-slate-500"}),a.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Attachments (",w.attachments.length,")"]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:w.attachments.map((D,de)=>{const ge=D.isDriveFile||D.driveFileId;return a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${ge?"bg-blue-50/30 border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[ge&&D.iconUrl?a.jsx("img",{src:D.iconUrl,alt:D.filename,className:"w-8 h-8"}):a.jsx("div",{className:`p-2 rounded-lg ${So(D.mimeType)?"bg-blue-50 text-blue-600":js(D.mimeType)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:So(D.mimeType)?a.jsx(gl,{className:"w-4 h-4"}):js(D.mimeType)?a.jsx(cc,{className:"w-4 h-4"}):a.jsx(Bh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:D.filename}),ge&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:ge?"Google Drive file":`${sc(D.size)}  ${D.mimeType}`})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[ge&&D.previewUrl&&a.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:a.jsx(Ti,{className:"w-4 h-4"})}),!ge&&(So(D.mimeType)||js(D.mimeType))&&a.jsx("button",{onClick:()=>ko(w.id,D.attachmentId,D.filename,D.mimeType),disabled:zn[`${w.id}-${D.attachmentId}-view`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"View",children:zn[`${w.id}-${D.attachmentId}-view`]?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(yd,{className:"w-4 h-4"})}),!ge&&a.jsx("button",{onClick:()=>sl(w.id,D.attachmentId,D.filename),disabled:zn[`${w.id}-${D.attachmentId}-download`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Download",children:zn[`${w.id}-${D.attachmentId}-download`]?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(H0,{className:"w-4 h-4"})}),ge&&D.downloadUrl&&a.jsx("a",{href:D.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-indigo-100 text-indigo-600 transition-colors",title:"Download",children:a.jsx(H0,{className:"w-4 h-4"})})]})]},D.attachmentId||de)})})]}),w.attachments&&w.attachments.some(D=>(D.isDriveFile||D.driveFileId)&&D.previewUrl&&(D.mimeType?.includes("google-apps")||D.mimeType?.includes("document")||D.mimeType?.includes("spreadsheet")||D.mimeType?.includes("presentation")))&&a.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(cc,{className:"w-4 h-4 text-blue-500"}),a.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Embedded Documents"})]}),a.jsx("div",{className:"space-y-4",children:w.attachments.filter(D=>(D.isDriveFile||D.driveFileId)&&D.previewUrl&&(D.mimeType?.includes("google-apps")||D.mimeType?.includes("document")||D.mimeType?.includes("spreadsheet")||D.mimeType?.includes("presentation"))).map((D,de)=>{const ge=D.previewUrl?.replace("/edit","/preview")||D.previewUrl;return a.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden bg-white",children:[a.jsxs("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[D.iconUrl&&a.jsx("img",{src:D.iconUrl,alt:D.filename,className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:D.filename}),a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),D.previewUrl&&a.jsx("a",{href:D.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-blue-100 text-blue-600 rounded transition-colors",title:"Open in Drive",children:a.jsx(Ti,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:a.jsx("iframe",{src:ge,className:"absolute top-0 left-0 w-full h-full border-0",title:D.filename,allow:"fullscreen"})})]},D.attachmentId||de)})})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[a.jsx(Gi,{className:"w-4 h-4 text-indigo-500"}),"AI Reply Draft"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Ke.length>0&&a.jsx("button",{type:"button",onClick:D=>{D.preventDefault(),D.stopPropagation(),j(()=>ts(),de=>{})},disabled:ze,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 disabled:opacity-60",children:ze?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-3 h-3 animate-spin"}),"Regenerating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(bd,{className:"w-3 h-3"}),"Regenerate"]})}),!Ce&&a.jsx("button",{type:"button",onClick:D=>{D.preventDefault(),D.stopPropagation(),j(()=>ts(),de=>{})},disabled:ze,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-xs font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-60 transition-colors",children:ze?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-3 h-3 animate-spin"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Gi,{className:"w-3 h-3"}),"Generate Draft"]})})]})]}),Ke.length>1&&a.jsxs("div",{className:"mb-3 space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Select a variation:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:Ke.map((D,de)=>a.jsxs("button",{type:"button",onClick:()=>{Je(de),Oe(N(D.draft))},className:`p-3 rounded-lg border-2 text-left transition-all ${Ge===de?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50/30"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:D.style}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[D.confidence,"%"]})]}),a.jsx("p",{className:"text-[10px] text-slate-500 mb-2",children:D.description}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:a.jsx("div",{className:`h-1.5 rounded-full ${D.confidence>=80?"bg-green-500":D.confidence>=60?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${D.confidence}%`}})})]},de))})]}),Ce?a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 space-y-3",children:[Ke.length>1&&Ge!==null&&a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-indigo-200",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:[Ke[Ge].style," Variation"]}),a.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",Ke[Ge].description,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Confidence:"}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[Ke[Ge].confidence,"%"]})]})]}),a.jsx("div",{className:"quill-wrapper",children:a.jsx(Vv,{ref:D=>{tt.current=D,D&&(pt.current=D.getEditor())},theme:"snow",value:Ce,onChange:D=>Oe(D),modules:qd,formats:$d,placeholder:"Edit your draft..."})}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("button",{type:"button",onClick:rd,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[a.jsx(Iu,{className:"w-3 h-3"}),"Copy to Clipboard"]}),a.jsxs("button",{type:"button",onClick:oc,className:"px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 flex items-center gap-2",children:[a.jsx(Nn,{className:"w-3 h-3"}),"Save as Template"]}),a.jsx("button",{type:"button",onClick:()=>{Mt(!0),nd()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Templates"}),a.jsx("button",{type:"button",onClick:()=>{Oe(null),ct([]),Je(null)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Clear"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-slate-400",children:'Click "Generate Draft" to create AI-powered reply suggestions.'}),a.jsx("button",{type:"button",onClick:()=>{Mt(!0),nd()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"View Templates"})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(fo,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",w?.id&&hn[w.id]&&hn[w.id].length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:hn[w.id].length})]}),l&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",style:{position:"relative"},children:[a.jsxs("div",{className:"quill-wrapper",children:[a.jsx("style",{children:`
                          .quill-wrapper .ql-container {
                            border-bottom-left-radius: 0.75rem;
                            border-bottom-right-radius: 0.75rem;
                            font-size: 0.875rem;
                            min-height: 100px;
                          }
                          .quill-wrapper .ql-toolbar {
                            border-top-left-radius: 0.75rem;
                            border-top-right-radius: 0.75rem;
                            border: none;
                            border-bottom: 2px solid #e2e8f0;
                            background: #f8fafc;
                          }
                          .quill-wrapper .ql-editor {
                            min-height: 100px;
                            padding: 1rem;
                          }
                          .quill-wrapper .ql-editor.ql-blank::before {
                            color: #94a3b8;
                            font-style: normal;
                            font-size: 0.875rem;
                          }
                          .quill-wrapper .ql-snow {
                            border: 2px solid #e2e8f0;
                            border-radius: 0.75rem;
                          }
                          .quill-wrapper:focus-within .ql-snow {
                            border-color: #818cf8;
                            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                          }
                        `}),a.jsx(Vv,{ref:D=>{xe.current=D,D&&(je.current=D.getEditor())},theme:"snow",value:br,onChange:Of,onBlur:()=>{setTimeout(()=>{da||Cr(null)},200)},modules:qd,formats:$d,placeholder:"Add a note or comment... (Use @ to mention users)"})]}),da&&sr.length>0&&a.jsx("div",{className:"absolute top-full mt-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-48 overflow-y-auto",onMouseDown:D=>{D.preventDefault()},children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(rx,{className:"w-3 h-3"}),"Mention User"]}),sr.map(D=>a.jsxs("button",{type:"button",onMouseDown:de=>{de.preventDefault(),de.stopPropagation(),Pf(D)},onClick:de=>{de.preventDefault(),de.stopPropagation()},className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:D.name?.charAt(0)||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:D.name||"Unknown"}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:D.email||""})]})]},D.id))]})})]}),a.jsxs("div",{className:"relative",ref:Ht,children:[a.jsxs("button",{type:"button",onClick:()=>ir(!nr),className:`w-full flex items-center justify-between gap-2 px-4 py-2.5 bg-white border-2 rounded-xl text-sm transition-all ${kn.length>0?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-indigo-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ru,{className:`w-4 h-4 ${kn.length>0?"text-indigo-600":"text-slate-400"}`}),a.jsx("span",{className:`font-medium ${kn.length>0?"text-indigo-900":"text-slate-600"}`,children:kn.length>0?`Marked for ${kn.length} team member${kn.length>1?"s":""}`:"Mark for team member"})]}),kn.length>0&&a.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),Pn([])},className:"p-1 hover:bg-indigo-200 rounded transition-all",children:a.jsx(cr,{className:"w-3 h-3 text-indigo-600"})})]}),nr&&a.jsx("div",{className:"absolute top-full mt-2 left-0 w-full bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-64 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 mb-2",children:[a.jsx(Ru,{className:"w-3 h-3"}),"Select Team Members"]}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:Et,onChange:D=>Sr(D.target.value),className:"w-full px-3 py-2 mb-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-200"}),ga.filter(D=>D.id!==i&&(Et===""||D.name?.toLowerCase().includes(Et.toLowerCase())||D.email?.toLowerCase().includes(Et.toLowerCase()))).map(D=>{const de=kn.includes(D.id);return a.jsxs("button",{type:"button",onClick:()=>{Pn(de?ge=>ge.filter(Ve=>Ve!==D.id):ge=>[...ge,D.id])},className:`w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left ${de?"bg-indigo-50":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-xs ${de?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:D.name?.charAt(0)||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:D.name||"Unknown"}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:D.email||""})]}),de&&a.jsx(jn,{className:"w-4 h-4 text-indigo-600"})]},D.id)})]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:on?a.jsx(gl,{className:"w-4 h-4"}):a.jsx($u,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:on?wt?.name||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:Se,type:"file",accept:"image/*",onChange:ba,className:"hidden"})]}),a.jsx("button",{onClick:Ml,disabled:re||!br.trim()&&!wt,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:re?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Iu,{className:"w-4 h-4"}),"Send"]})})]}),on&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:on,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{Xe(""),Wt(null),Se.current&&(Se.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(cr,{className:"w-4 h-4"})})]})]}),!l&&a.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-center",children:a.jsx("p",{className:"text-sm text-slate-600",children:"You have read-only access. Contact an admin to add notes or comments."})}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:hn[w?.id]&&hn[w.id]?.length>0?hn[w.id].map(D=>{const de=Gc(o,"shared-inbox:delete-note")&&(o1e(o)||D.userId===i);return a.jsxs("div",{className:`p-4 bg-white border rounded-xl space-y-2 ${(D.markedFor||[]).length>0?"border-indigo-300 bg-indigo-50/30":"border-slate-200"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:D.userName?.charAt(0)||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:D.userName}),(D.markedFor||[]).length>0&&a.jsxs("span",{className:"px-1.5 py-0.5 bg-indigo-600 text-white text-[9px] font-bold rounded-full flex items-center gap-1",children:[a.jsx(Ru,{className:"w-2.5 h-2.5"}),"Marked"]})]}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(D.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),(D.markedFor||[]).length>0&&a.jsxs("p",{className:"text-[10px] text-indigo-600 mt-1",children:["Marked for: ",ga.filter(ge=>(D.markedFor||[]).includes(ge.id)).map(ge=>ge.name).join(", ")||"Unknown"]})]})]}),de&&a.jsx("button",{onClick:()=>w?.id&&Ma(w.id,D.id),disabled:ye===D.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:ye===D.id?a.jsx(jt,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(Br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),D.message&&a.jsx("div",{className:"text-sm text-slate-700 leading-relaxed pl-10 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:D.message}}),D.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsxs("button",{type:"button",onClick:()=>Ca({isOpen:!0,imageUrl:D.imageUrl,imageName:D.imageName}),className:"inline-flex items-center gap-2 px-3 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors group",children:[a.jsx(gl,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-600 transition-colors"}),a.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-indigo-600 transition-colors",children:D.imageName||"View Attachment"})]})})]},D.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(fo,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[a.jsx(gi,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Select an email to read"})]})})]}),Un.isOpen&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Ca({isOpen:!1,imageUrl:"",imageName:void 0}),children:a.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[a.jsx("button",{onClick:()=>Ca({isOpen:!1,imageUrl:"",imageName:void 0}),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:a.jsx(cr,{className:"w-6 h-6"})}),a.jsx("img",{src:Un.imageUrl,alt:Un.imageName||"Note attachment",className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:D=>D.stopPropagation()}),Un.imageName&&a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg",children:a.jsx("p",{className:"text-sm font-medium text-slate-900",children:Un.imageName})})]})}),ls&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{vn(!1),Fn("")},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Gi,{className:"w-5 h-5 text-indigo-500"}),"Save as Template"]}),a.jsx("button",{onClick:()=>{vn(!1),Fn("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name"}),a.jsx("input",{type:"text",value:xa,onChange:D=>Fn(D.target.value),onKeyDown:D=>{D.key==="Enter"&&(D.preventDefault(),bu())},placeholder:"Enter template name...",className:"w-full px-4 py-3 border-2 border-slate-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-sm",autoFocus:!0})]}),a.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[a.jsx("button",{onClick:()=>{vn(!1),Fn("")},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:bu,disabled:!xa||!xa.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Save Template"]})]})]})]})}),It&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Mt(!1),children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Gi,{className:"w-5 h-5 text-indigo-500"}),"Email Response Templates"]}),a.jsx("button",{onClick:()=>Mt(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:vr.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Gi,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No templates yet. Create one by saving a draft!"})]}):a.jsx("div",{className:"space-y-3",children:vr.map(D=>a.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer group",onClick:de=>{de.preventDefault(),de.stopPropagation(),w&&D.content&&(Oe(D.content),Mt(!1),t("Template loaded"))},children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:D.name}),a.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2",children:[D.content?.replace(/<[^>]*>/g,"").substring(0,100),"..."]}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Created ",new Date(D.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:de=>{de.preventDefault(),de.stopPropagation(),w&&D.content&&(Oe(D.content),Mt(!1),t("Template loaded"))},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors opacity-0 group-hover:opacity-100",children:"Use"}),a.jsx("button",{onClick:async de=>{de.preventDefault(),de.stopPropagation(),Qu(D.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:a.jsx(Br,{className:"w-4 h-4 text-slate-400 hover:text-red-600"})})]})]})},D.id))})})]})}),_f&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>Qu(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(sa,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Template?"}),a.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to delete this template? This action cannot be undone."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>Qu(null),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{const D=_f;Qu(null);try{await mae(D,i),t("Template deleted"),nd()}catch(de){const ge=de?.message||"Failed to delete template";console.error("[INBOX] Error deleting template:",ge),r(ge)}},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-red-600 rounded-xl hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]}),Ql&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>ro(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(cc,{className:"w-5 h-5 text-blue-600"}),"Attach from Google Drive"]}),a.jsx("button",{onClick:()=>ro(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:fa,onChange:D=>Qa(D.target.value),onKeyDown:D=>{D.key==="Enter"&&il(fa)},placeholder:"Search Drive files...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"}),a.jsx("button",{onClick:()=>il(fa),disabled:Wn,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:Wn?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):"Search"})]}),Wn&&ys.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(jt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):ys.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(cc,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500",children:"No files found"})]}):a.jsx("div",{className:"space-y-2",children:ys.map(D=>a.jsxs("button",{onClick:()=>ic(D),className:"w-full flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all text-left",children:[D.iconLink?a.jsx("img",{src:D.iconLink,alt:D.name,className:"w-8 h-8"}):a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:a.jsx(cc,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:D.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[D.size?sc(D.size):"Drive file","  ",D.mimeType||"Unknown type"]})]}),a.jsx("button",{onClick:de=>{de.stopPropagation(),D.webViewLink&&window.open(D.webViewLink,"_blank")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Open in Drive",children:a.jsx(Ti,{className:"w-4 h-4 text-slate-400"})})]},D.id))}),tl&&a.jsx("div",{className:"flex justify-center pt-4",children:a.jsx("button",{onClick:()=>il(fa,tl),disabled:Wn,className:"px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 disabled:opacity-50",children:Wn?"Loading...":"Load More"})})]})]})})]}),Sh&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>gu(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 mx-auto mb-6",children:a.jsx(sa,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Discard Email?"}),a.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to discard this email? All unsaved changes will be lost."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>gu(!1),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{gu(!1),eo(!1),cs([]),xs([]),Ts([]),Fi(""),ua(""),ii(""),Ri(""),Ps("")},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors",children:"Discard"})]})]})})]}),ms&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{gu(!0)},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:Ya==="compose"?"Compose Email":Ya==="reply"?"Reply":Ya==="replyAll"?"Reply All":"Forward"}),a.jsx("button",{onClick:()=>{gu(!0)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[Re.length>1&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"From"}),a.jsx("select",{value:vs,onChange:D=>Mi(D.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:Re.filter((D,de,ge)=>ge.findIndex(Ve=>Ve.email===D.email&&Ve.userId===D.userId)===de).map((D,de)=>a.jsxs("option",{value:D.email,children:[D.email," ",D.isCurrentUser?"(You)":`(${D.ownerName})`]},`${D.email}-${D.userId}-${de}`))})]}),Re.length===0&&a.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:"No Gmail accounts connected. Please connect a Gmail account to send emails."}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px] focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-200",children:[yn.map((D,de)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-medium rounded",children:[D,a.jsx("button",{type:"button",onClick:()=>cs(yn.filter((ge,Ve)=>Ve!==de)),className:"hover:text-indigo-900",children:a.jsx(cr,{className:"w-3 h-3"})})]},de)),a.jsx("input",{type:"text",value:Qo,onChange:D=>{const de=D.target.value;if(ii(de),de.length>0){const ge=Cc.filter(Ve=>Ve.email?.toLowerCase().includes(de.toLowerCase())||Ve.name?.toLowerCase().includes(de.toLowerCase())).slice(0,5);Ld(ge),to(!0)}else to(!1)},onKeyDown:D=>{if(D.key==="Enter"&&Qo.trim()){D.preventDefault();const de=Qo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)&&!yn.includes(de)&&(cs([...yn,de]),ii(""),to(!1))}else if(D.key==="Backspace"&&Qo===""&&yn.length>0)cs(yn.slice(0,-1));else if(D.key==="ArrowDown"&&Pl)D.preventDefault(),Bi(de=>Math.min(de+1,Zo.length-1));else if(D.key==="ArrowUp"&&Pl)D.preventDefault(),Bi(de=>Math.max(de-1,0));else if(D.key==="Enter"&&Pl&&Zo[Jl]){D.preventDefault();const de=Zo[Jl];de.email&&!yn.includes(de.email)&&(cs([...yn,de.email]),ii(""),to(!1))}else if(D.key===","||D.key===";"){D.preventDefault();const de=Qo.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)&&!yn.includes(de)&&(cs([...yn,de]),ii(""),to(!1))}},onBlur:()=>{const D=Qo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)&&!yn.includes(D)&&(cs([...yn,D]),ii(""),to(!1))},placeholder:yn.length===0?"Recipients":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]}),Pl&&Zo.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:Zo.map((D,de)=>a.jsxs("button",{type:"button",onClick:()=>{D.email&&!yn.includes(D.email)&&(cs([...yn,D.email]),ii(""),to(!1))},className:`w-full text-left px-3 py-2 hover:bg-indigo-50 text-sm ${de===Jl?"bg-indigo-50":""}`,children:[a.jsx("div",{className:"font-medium text-slate-900",children:D.name}),a.jsx("div",{className:"text-xs text-slate-500",children:D.email})]},D.id))})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Cc"}),a.jsxs("button",{type:"button",onClick:()=>Yo(!Os),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Os?"Hide":"Show"," Cc"]})]}),Os&&a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[Oa.map((D,de)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[D,a.jsx("button",{type:"button",onClick:()=>xs(Oa.filter((ge,Ve)=>Ve!==de)),className:"hover:text-slate-900",children:a.jsx(cr,{className:"w-3 h-3"})})]},de)),a.jsx("input",{type:"text",value:Sn,onChange:D=>{Ri(D.target.value)},onKeyDown:D=>{if(D.key==="Enter"&&Sn.trim()){D.preventDefault();const de=Sn.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)&&!Oa.includes(de)&&(xs([...Oa,de]),Ri(""))}else if(D.key==="Backspace"&&Sn===""&&Oa.length>0)xs(Oa.slice(0,-1));else if(D.key===","||D.key===";"){D.preventDefault();const de=Sn.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)&&!Oa.includes(de)&&(xs([...Oa,de]),Ri(""))}},onBlur:()=>{const D=Sn.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)&&!Oa.includes(D)&&(xs([...Oa,D]),Ri(""))},placeholder:Oa.length===0?"Cc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Bcc"}),a.jsxs("button",{type:"button",onClick:()=>go(!Jo),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Jo?"Hide":"Show"," Bcc"]})]}),Jo&&a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[dn.map((D,de)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[D,a.jsx("button",{type:"button",onClick:()=>Ts(dn.filter((ge,Ve)=>Ve!==de)),className:"hover:text-slate-900",children:a.jsx(cr,{className:"w-3 h-3"})})]},de)),a.jsx("input",{type:"text",value:Ja,onChange:D=>{Ps(D.target.value)},onKeyDown:D=>{if(D.key==="Enter"&&Ja.trim()){D.preventDefault();const de=Ja.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)&&!dn.includes(de)&&(Ts([...dn,de]),Ps(""))}else if(D.key==="Backspace"&&Ja===""&&dn.length>0)Ts(dn.slice(0,-1));else if(D.key===","||D.key===";"){D.preventDefault();const de=Ja.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(de)&&!dn.includes(de)&&(Ts([...dn,de]),Ps(""))}},onBlur:()=>{const D=Ja.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)&&!dn.includes(D)&&(Ts([...dn,D]),Ps(""))},placeholder:dn.length===0?"Bcc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Subject ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Pa,onChange:D=>Fi(D.target.value),placeholder:"Subject",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),vr.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Template"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:rm||"",onChange:D=>{const de=D.target.value||null;if(nm(de),de){const ge=vr.find(Ve=>Ve.id===de);ge?.content&&(ua(ge.content),t("Template loaded"))}},className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"",children:"No template"}),vr.map(D=>a.jsx("option",{value:D.id,children:D.name},D.id))]}),a.jsx("button",{type:"button",onClick:()=>Mt(!0),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-1",title:"Manage templates",children:a.jsx(Gi,{className:"w-4 h-4"})})]})]}),Ya==="compose"&&a.jsxs("div",{children:[a.jsxs("button",{type:"button",onClick:()=>{Ni(!Zu),!Zu&&!li&&Pa&&yn.length>0&&Wa()},className:"w-full px-4 py-2.5 border-2 border-dashed border-indigo-200 rounded-lg text-sm font-medium text-indigo-600 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center justify-center gap-2",children:[a.jsx(Gi,{className:"w-4 h-4"}),Zu?"Hide AI Suggestions":"Get AI Draft Suggestions"]}),Zu&&a.jsx("div",{className:"mt-3 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:Dl?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-700",children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Generating AI draft..."]}):li?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-medium text-indigo-900",children:"AI Draft Suggestion:"}),a.jsx("button",{type:"button",onClick:Wa,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Regenerate"})]}),a.jsx("div",{className:"p-3 bg-white border border-indigo-200 rounded-lg text-sm text-slate-700 max-h-48 overflow-y-auto",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:li}})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{ua(li||""),t("AI draft inserted")},className:"flex-1 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Use This Draft"}),a.jsx("button",{type:"button",onClick:()=>{const D=li?.replace(/<[^>]+>/g,"")||"";navigator.clipboard.writeText(D),t("Draft copied to clipboard")},className:"px-3 py-2 border border-indigo-300 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors",children:"Copy"})]})]}):a.jsx("p",{className:"text-xs text-indigo-600",children:"Enter a subject and recipient to generate AI draft suggestions."})})]}),Xl.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Signature"}),a.jsxs("select",{value:Xl.find(D=>D.content===Tl)?.id||"",onChange:D=>{const de=Xl.find(ge=>ge.id===D.target.value);ai(de?.content||"")},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"",children:"No signature"}),Xl.map(D=>a.jsxs("option",{value:D.id,children:[D.name," ",D.isDefault?"(Default)":""]},D.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Message ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"quill-wrapper",children:[a.jsx("style",{children:`
                    .quill-wrapper .ql-container {
                      border-bottom-left-radius: 0.75rem;
                      border-bottom-right-radius: 0.75rem;
                      font-size: 0.875rem;
                      min-height: 300px;
                    }
                    .quill-wrapper .ql-toolbar {
                      border-top-left-radius: 0.75rem;
                      border-top-right-radius: 0.75rem;
                      border: none;
                      border-bottom: 2px solid #e2e8f0;
                      background: #f8fafc;
                    }
                    .quill-wrapper .ql-editor {
                      min-height: 300px;
                      padding: 1rem;
                    }
                    .quill-wrapper .ql-editor.ql-blank::before {
                      color: #94a3b8;
                      font-style: normal;
                      font-size: 0.875rem;
                    }
                    .quill-wrapper .ql-snow {
                      border: 2px solid #e2e8f0;
                      border-radius: 0.75rem;
                    }
                    .quill-wrapper:focus-within .ql-snow {
                      border-color: #818cf8;
                      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                    }
                  `}),a.jsx(Vv,{ref:D=>{Te.current=D},theme:"snow",value:gs,onChange:D=>{ua(D)},modules:qd,formats:$d,placeholder:"Compose your message..."})]}),Tl&&a.jsxs("div",{className:"mt-2 p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[a.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Signature:"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:Tl}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Attachments"}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:a.jsx(Bh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-medium text-slate-900",children:"Add Attachment"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"Max 25MB per file"})]}),a.jsx("input",{ref:el,type:"file",multiple:!0,onChange:ed,className:"hidden"})]}),a.jsxs("button",{type:"button",onClick:()=>{ro(!0),Qa(""),il()},className:"px-4 py-3 bg-white border-2 border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center gap-2",title:"Attach from Google Drive",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:a.jsx(cc,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-xs font-medium text-slate-900 hidden sm:inline",children:"Drive"})]})]}),Ia.length>0&&a.jsx("div",{className:"mt-3 space-y-2",children:Ia.map(D=>a.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${D.isDriveFile?"bg-blue-50/30 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[D.isDriveFile&&D.driveIconLink?a.jsx("img",{src:D.driveIconLink,alt:"Drive file",className:"w-8 h-8"}):a.jsx("div",{className:`p-2 rounded-lg ${So(D.file.type)?"bg-blue-50 text-blue-600":js(D.file.type)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:So(D.file.type)?a.jsx(gl,{className:"w-4 h-4"}):js(D.file.type)?a.jsx(cc,{className:"w-4 h-4"}):a.jsx(Bh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:D.file.name}),D.isDriveFile&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:D.isDriveFile?"Google Drive file":`${sc(D.file.size)}  ${D.file.type}`}),bs[D.id]!==void 0&&bs[D.id]<100&&a.jsxs("div",{className:"flex-1 max-w-[100px]",children:[a.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${bs[D.id]}%`}})}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:[bs[D.id],"%"]})]})]})]}),D.isDriveFile&&D.driveWebViewLink&&a.jsx("a",{href:D.driveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:a.jsx(Ti,{className:"w-4 h-4"})}),D.preview&&!D.isDriveFile&&a.jsx("button",{type:"button",onClick:()=>{Zt({isOpen:!0,emailId:"",attachmentId:D.id,filename:D.file.name,mimeType:D.file.type,url:D.preview})},className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors",title:"Preview",children:a.jsx(yd,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>td(D.id),className:"p-2 rounded-lg hover:bg-red-50 text-red-600 transition-colors",title:"Remove",children:a.jsx(cr,{className:"w-4 h-4"})})]},D.id))})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{gu(!0)},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),Ya==="compose"&&a.jsxs("button",{type:"button",onClick:async()=>{Hs(!0),await Ch()},className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2",children:[a.jsx(cc,{className:"w-4 h-4"}),"Load Drafts"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:Fl,disabled:_h||!Pa||!gs,className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:_h?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(cc,{className:"w-4 h-4"}),"Save Draft"]})}),Ya==="compose"&&a.jsxs("button",{type:"button",onClick:()=>{if(!yn.length||!Pa||!gs){r("Please fill in all required fields (To, Subject, Message)");return}Zl(!0)},className:"px-4 py-2 border border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[a.jsx(As,{className:"w-4 h-4"}),"Schedule"]}),Ya==="compose"&&a.jsxs("button",{type:"button",onClick:async()=>{if(!i||yn.length===0||!Pa||!gs){r("Please fill in all required fields (To, Subject, Message)");return}const D=gs.replace(/<[^>]+>/g," ").toLowerCase(),de=`${Pa} ${D}`,ge=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(monday|tuesday|wednesday|thursday|friday|saturday|sunday),?\s+(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Ve;for(const Tr of ge){const An=de.match(Tr);if(An){Ve=An[0];break}}const it=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let zt;for(const Tr of it){const An=de.match(Tr);if(An){zt=An[0];break}}const _t=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Jt;for(const Tr of _t){const An=de.match(Tr);if(An&&An[1]){Jt=An[1].trim();break}}Gt({title:Pa,date:Ve,time:zt,location:Jt,participants:yn,description:gs.substring(0,500)}),Mr(null),ht(!0)},disabled:be||!i||yn.length===0||!Pa,className:"px-4 py-2 bg-indigo-50 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Schedule a meeting",children:[be?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(ka,{className:"w-4 h-4"}),"Schedule Meeting"]}),u?a.jsx("button",{type:"button",onClick:async()=>{if(!i||yn.length===0||!Pa||!gs){r("Please fill in all required fields (To, Subject, Message)");return}si(!0);try{let D=gs;Tl&&(D+=`<br><br>${Tl}`);const de=await Promise.all(Ia.filter(Ve=>!Ve.isDriveFile).map(async Ve=>new Promise((it,zt)=>{const _t=new FileReader;_t.onload=()=>{const Jt=_t.result.split(",")[1];it({filename:Ve.file.name,content:Jt,type:Ve.file.type})},_t.onerror=zt,_t.readAsDataURL(Ve.file)}))),ge=Ia.filter(Ve=>Ve.isDriveFile&&Ve.driveWebViewLink);if(ge.length>0&&Ya==="compose"){let Ve='<br><br><div style="border-top: 1px solid #e2e8f0; padding-top: 12px; margin-top: 12px;"><p style="font-size: 12px; color: #64748b; margin-bottom: 8px;"><strong>Attached from Google Drive:</strong></p><ul style="margin: 0; padding-left: 20px;">';ge.forEach(it=>{Ve+=`<li style="margin-bottom: 4px;"><a href="${it.driveWebViewLink}" target="_blank" style="color: #4f46e5; text-decoration: none;">${it.file.name}</a></li>`}),Ve+="</ul></div>",D+=Ve}if(Ya==="reply"||Ya==="replyAll")await gae({emailId:w?.id||"",userId:i,accountEmail:vs||Re[0]?.email,body:D,replyAll:Ya==="replyAll",attachments:de.length>0?de:void 0}),t("Reply sent successfully");else if(Ya==="forward")await vae({emailId:w?.id||"",userId:i,accountEmail:vs||Re[0]?.email,to:yn,cc:Oa.length>0?Oa:void 0,bcc:dn.length>0?dn:void 0,body:D,attachments:de.length>0?de:void 0}),t("Email forwarded successfully");else{const it=(await xae({userId:i,accountEmail:vs||Re[0]?.email,to:yn,cc:Oa.length>0?Oa:void 0,bcc:dn.length>0?dn:void 0,subject:Pa,body:D,attachments:de.length>0?de:void 0}))?.data?.id;if(it){const zt=Ia.filter(_t=>_t.isDriveFile&&_t.driveFileId);for(const _t of zt)try{await JP({userId:i,emailId:it,fileId:_t.driveFileId,fileName:_t.file.name,fileMimeType:_t.file.type,webViewLink:_t.driveWebViewLink,webContentLink:void 0,iconLink:_t.driveIconLink})}catch(Jt){console.error("Failed to attach Drive file:",Jt)}}t("Email sent successfully")}Ia.forEach(Ve=>{Ve.preview&&URL.revokeObjectURL(Ve.preview)}),eo(!1),cs([]),xs([]),Ts([]),Fi(""),ua(""),wi([]),ii(""),Ri(""),Ps(""),ro(!1),await Ye()}catch(D){const de=b(D,"Failed to send email");r(de)}finally{si(!1)}},disabled:Yl||yn.length===0||!Pa||!gs||Re.length===0,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Yl?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Iu,{className:"w-4 h-4"}),Ya==="reply"||Ya==="replyAll"?"Send Reply":Ya==="forward"?"Forward":"Send"]})}):a.jsxs("div",{className:"px-4 py-2 bg-slate-100 text-slate-500 text-sm font-medium rounded-lg flex items-center gap-2",title:"You don't have permission to send emails. Contact an admin.",children:[a.jsx(Iu,{className:"w-4 h-4"}),"Send (Admin Only)"]})]})]})]})}),pn?.isOpen&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-[90vh] m-4 flex flex-col bg-white rounded-lg shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[(So(pn.mimeType)||js(pn.mimeType))&&a.jsx(gl,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 truncate",children:pn.filename})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{pn.url&&window.URL.revokeObjectURL(pn.url),Zt(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 transition-colors",title:"Close",children:a.jsx(cr,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>{w&&pn.url&&sl(pn.emailId,pn.attachmentId,pn.filename)},className:"px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",title:"Download",children:[a.jsx(H0,{className:"w-4 h-4"}),"Download"]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center bg-slate-50",children:pn.url?So(pn.mimeType)?a.jsx("img",{src:pn.url,alt:pn.filename,className:"max-w-full max-h-full object-contain rounded-lg"}):js(pn.mimeType)?a.jsx("iframe",{src:pn.url,className:"w-full h-full min-h-[600px] rounded-lg border border-slate-200",title:pn.filename}):a.jsxs("div",{className:"text-center text-slate-500",children:[a.jsx(cc,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),a.jsx("p",{className:"text-sm",children:"Preview not available for this file type"}),a.jsx("button",{onClick:()=>{w&&sl(pn.emailId,pn.attachmentId,pn.filename)},className:"mt-4 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Download File"})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[a.jsx(jt,{className:"w-8 h-8 animate-spin text-indigo-600"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Loading attachment..."})]})})]})}),mr&&zr&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{_r(!1),mn(null)},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage Labels"}),a.jsx("button",{onClick:()=>{_r(!1),mn(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Re.length>0&&a.jsx("div",{className:"mb-4 pb-4 border-b border-slate-200",children:a.jsxs("button",{onClick:()=>xo(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-50 border-2 border-dashed border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Create New Label"]})}),$r?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[a.jsx(jt,{className:"w-6 h-6 animate-spin text-indigo-600"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Loading labels"})]}):ln.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"No labels available. Connect Gmail and sync to see labels, or create one below."}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>Rn(!0),className:"inline-flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx(bd,{className:"w-4 h-4"}),"Retry"]}),Re.length>0&&a.jsxs("button",{onClick:()=>xo(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Create Your First Label"]})]})]}):a.jsx("div",{className:"space-y-2",children:ln.map(D=>{const ge=et.find(Ve=>Ve.id===zr)?.labels?.includes(D.id)||!1;return a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:ge,onChange:Ve=>{zr&&(Ve.target.checked?Ws(zr,[D.id],[]):Ws(zr,[],[D.id]))},className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("span",{className:"flex-1 text-sm font-medium text-slate-900",children:D.name}),D.type==="system"&&a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-slate-500 bg-slate-100 rounded",children:"System"})]},D.id)})})]})]})}),_c&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{xo(!1),Vo("")},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Label"}),a.jsx("button",{onClick:()=>{xo(!1),Vo(""),Ac("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Label Name"}),a.jsx("input",{type:"text",value:El,onChange:D=>Vo(D.target.value),placeholder:"e.g., Important, Follow-up, Project X",className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyDown:D=>{if(D.key==="Enter"&&El.trim()&&(Ko||Re.length>0)){const de=Ko||Re[0].email;Fa(El.trim(),de)}},autoFocus:!0})]}),Re.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gmail Account"}),a.jsx("select",{value:Ko||Re[0].email,onChange:D=>Ac(D.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:Re.map(D=>a.jsx("option",{value:D.email,children:D.email},D.email))})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[a.jsx("button",{onClick:()=>{xo(!1),Vo(""),Ac("")},className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{if(El.trim()&&Re.length>0){const D=Ko||Re[0].email;Fa(El.trim(),D)}},disabled:!El.trim()||du||Re.length===0,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:du?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Nn,{className:"w-4 h-4"}),"Create Label"]})})]})]})]})}),Ze&&i&&a.jsx(s1e,{isOpen:Ze,onClose:()=>{ht(!1),Gt(null),Mr(null)},userId:i,emailId:yr||void 0,emailSubject:Pa,emailBody:gs,participants:yn,extractedDetails:Pt||void 0,onCreateSuccess:()=>{yr&&w?.id===yr&&Bv(i,yr).then(D=>{D.success&&D.data&&Zi(D.data)}).catch(()=>{})}}),kh&&Dc&&w&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Link to ",Dc.charAt(0).toUpperCase()+Dc.slice(1)]}),a.jsx("button",{onClick:()=>{xu(!1),Lc(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Dc==="contact"&&a.jsx("div",{className:"space-y-2",children:Cc.map(D=>a.jsxs("button",{onClick:()=>_n("contact",D.id),disabled:nl,className:"w-full text-left p-3 bg-slate-50 hover:bg-blue-50 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.name}),a.jsx("p",{className:"text-xs text-slate-500",children:D.email})]},D.id))}),Dc==="company"&&a.jsx("div",{className:"space-y-2",children:Tc.map(D=>a.jsxs("button",{onClick:()=>_n("company",D.id),disabled:nl,className:"w-full text-left p-3 bg-slate-50 hover:bg-green-50 rounded-lg border border-slate-200 hover:border-green-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.name}),D.industry&&a.jsx("p",{className:"text-xs text-slate-500",children:D.industry})]},D.id))}),Dc==="deal"&&a.jsx("div",{className:"space-y-2",children:rl.map(D=>a.jsxs("button",{onClick:()=>_n("deal",D.id),disabled:nl,className:"w-full text-left p-3 bg-slate-50 hover:bg-purple-50 rounded-lg border border-slate-200 hover:border-purple-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.title||D.name}),D.stage&&a.jsx("p",{className:"text-xs text-slate-500",children:D.stage})]},D.id))}),Dc==="project"&&a.jsx("div",{className:"space-y-2",children:$s.map(D=>a.jsxs("button",{onClick:()=>_n("project",D.id),disabled:nl,className:"w-full text-left p-3 bg-slate-50 hover:bg-amber-50 rounded-lg border border-slate-200 hover:border-amber-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.title||D.name}),D.status&&a.jsx("p",{className:"text-xs text-slate-500",children:D.status})]},D.id))}),Dc==="contract"&&a.jsx("div",{className:"space-y-2",children:Md.map(D=>a.jsxs("button",{onClick:()=>_n("contract",D.id),disabled:nl,className:"w-full text-left p-3 bg-slate-50 hover:bg-red-50 rounded-lg border border-slate-200 hover:border-red-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:D.title}),D.status&&a.jsx("p",{className:"text-xs text-slate-500",children:D.status})]},D.id))})]})]})}),Sf&&w&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Task from Email"}),a.jsx("button",{onClick:()=>Fc(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",defaultValue:w.subject||"Task from Email",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-title"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-priority",defaultValue:"Medium",children:[a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"High",children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Project (Optional)"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-project",defaultValue:"",children:[a.jsx("option",{value:"",children:"None"}),$s.map(D=>a.jsx("option",{value:D.id,children:D.title||D.name},D.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Assign To (Optional)"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-assignee",defaultValue:"",children:[a.jsx("option",{value:"",children:"Unassigned"}),ga.map(D=>a.jsx("option",{value:D.id,children:D.name||D.email},D.id))]})]}),a.jsx("button",{onClick:()=>{const D=document.getElementById("task-title"),de=document.getElementById("task-priority"),ge=document.getElementById("task-project"),Ve=document.getElementById("task-assignee");ci({title:D?.value,priority:de?.value,projectId:ge?.value||void 0,assigneeId:Ve?.value||void 0})},className:"w-full px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Task"})]})]})}),Rc&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(As,{className:"w-5 h-5 text-indigo-500"}),"Schedule Send"]}),a.jsx("button",{onClick:()=>{Zl(!1),Bc("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Date & Time ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"datetime-local",value:ec,onChange:D=>Bc(D.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Timezone"}),a.jsxs("select",{value:Af,onChange:D=>tc(D.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),a.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),a.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),a.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),a.jsx("option",{value:"UTC",children:"UTC"}),a.jsxs("option",{value:Intl.DateTimeFormat().resolvedOptions().timeZone,children:[Intl.DateTimeFormat().resolvedOptions().timeZone," (Local)"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[a.jsx("button",{onClick:()=>{Zl(!1),Bc("")},className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(!ec){r("Please select a date and time");return}if(!i||yn.length===0||!Pa||!gs){r("Please fill in all required fields");return}try{const D=await Promise.all(Ia.filter(ge=>!ge.isDriveFile).map(async ge=>new Promise((Ve,it)=>{const zt=new FileReader;zt.onload=()=>{const _t=zt.result.split(",")[1];Ve({filename:ge.file.name,content:_t,type:ge.file.type})},zt.onerror=it,zt.readAsDataURL(ge.file)})));let de=gs;Tl&&(de+=`<br><br>${Tl}`),await Sae({userId:i,accountEmail:vs||Re[0]?.email,to:yn,cc:Oa.length>0?Oa:void 0,bcc:dn.length>0?dn:void 0,subject:Pa,body:de,scheduledDateTime:ec,timezone:Af,attachments:D.length>0?D:void 0}),t("Email scheduled successfully"),Zl(!1),eo(!1),cs([]),xs([]),Ts([]),Fi(""),ua(""),wi([]),Bc("")}catch(D){const de=b(D,"Failed to schedule email");r(de)}},className:"flex-1 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Schedule Send"})]})]})]})}),zs&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(cc,{className:"w-5 h-5 text-indigo-500"}),"Gmail Drafts"]}),a.jsx("button",{onClick:()=>{Hs(!1),Vn([])},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:na?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(jt,{className:"w-8 h-8 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-3 text-slate-600",children:"Loading drafts..."})]}):yo.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(cc,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No drafts found in Gmail"})]}):a.jsx("div",{className:"space-y-3",children:yo.map(D=>a.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",onClick:()=>{if(D.payload?.headers){const de=D.payload.headers,ge=de.find(_t=>_t.name==="To"),Ve=de.find(_t=>_t.name==="Cc"),it=de.find(_t=>_t.name==="Bcc"),zt=de.find(_t=>_t.name==="Subject");ge?.value&&cs(ge.value.split(",").map(_t=>_t.trim())),Ve?.value&&xs(Ve.value.split(",").map(_t=>_t.trim())),it?.value&&Ts(it.value.split(",").map(_t=>_t.trim())),zt?.value&&Fi(zt.value)}if(D.payload?.body?.data)try{const de=atob(D.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));ua(de)}catch(de){console.error("Failed to decode draft body:",de),r("Failed to decode draft body")}else if(D.payload?.parts){const de=D.payload.parts.find(ge=>ge.mimeType==="text/html");if(de?.body?.data)try{const ge=atob(de.body.data.replace(/-/g,"+").replace(/_/g,"/"));ua(ge)}catch(ge){console.error("Failed to decode draft body:",ge),r("Failed to decode draft body")}}Hs(!1),t("Draft loaded")},children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-1 truncate",children:D.payload?.headers?.find(de=>de.name==="Subject")?.value||"(No subject)"}),a.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["To: ",D.payload?.headers?.find(de=>de.name==="To")?.value||"No recipients"]}),a.jsxs("p",{className:"text-[10px] text-slate-400",children:["Created ",D.message?.internalDate?new Date(parseInt(D.message.internalDate)).toLocaleString():"Unknown date"]})]}),a.jsx("button",{onClick:de=>{if(de.stopPropagation(),D.payload?.headers){const ge=D.payload.headers,Ve=ge.find(Jt=>Jt.name==="To"),it=ge.find(Jt=>Jt.name==="Cc"),zt=ge.find(Jt=>Jt.name==="Bcc"),_t=ge.find(Jt=>Jt.name==="Subject");Ve?.value&&cs(Ve.value.split(",").map(Jt=>Jt.trim())),it?.value&&xs(it.value.split(",").map(Jt=>Jt.trim())),zt?.value&&Ts(zt.value.split(",").map(Jt=>Jt.trim())),_t?.value&&Fi(_t.value)}if(D.payload?.body?.data)try{const ge=atob(D.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));ua(ge)}catch(ge){console.error("Failed to decode draft body:",ge),r("Failed to decode draft body")}else if(D.payload?.parts){const ge=D.payload.parts.find(Ve=>Ve.mimeType==="text/html");if(ge?.body?.data)try{const Ve=atob(ge.body.data.replace(/-/g,"+").replace(/_/g,"/"));ua(Ve)}catch(Ve){console.error("Failed to decode draft body:",Ve),r("Failed to decode draft body")}}Hs(!1),t("Draft loaded")},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Load"})]})},D.id))})})]})}),pr&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{tr(!1),$t("")},children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:a.jsx(jn,{className:"w-5 h-5 text-emerald-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Team Connected Accounts"}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:[Re.length," account",Re.length!==1?"s":""," connected"]})]})]}),a.jsx("button",{onClick:()=>{tr(!1),$t("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-4 border-b border-slate-200 shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search by email or owner name...",value:ft,onChange:D=>$t(D.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:(()=>{const D=new Set(ut.map(ge=>ge.accountEmail.toLowerCase())),de=Re.filter((ge,Ve,it)=>it.findIndex(zt=>zt.email===ge.email&&zt.userId===ge.userId)===Ve).filter(ge=>{if(!ft.trim())return!0;const Ve=ft.toLowerCase();return ge.email.toLowerCase().includes(Ve)||ge.ownerName.toLowerCase().includes(Ve)});return de.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[a.jsx(e0,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-600 font-medium text-sm",children:ft?"No accounts found matching your search":"No accounts connected"}),ft&&a.jsx("button",{onClick:()=>$t(""),className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear search"})]}):a.jsx("div",{className:"space-y-2",children:de.map((ge,Ve)=>{const it=D.has(ge.email.toLowerCase()),zt=ut.find(_t=>_t.accountEmail.toLowerCase()===ge.email.toLowerCase());return a.jsxs("div",{className:`flex items-center justify-between p-4 bg-white border rounded-xl transition-all ${ge.isCurrentUser?"border-indigo-300 bg-indigo-50/30":it?"border-amber-300 bg-amber-50/30":"border-slate-200 hover:border-slate-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm shrink-0 ${it?"bg-amber-100 text-amber-600":"bg-indigo-100 text-indigo-600"}`,children:ge.email.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:ge.email}),ge.isCurrentUser&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-[10px] font-bold rounded uppercase shrink-0",children:"You"}),it&&a.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-bold rounded uppercase shrink-0",children:"Filtered"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:ge.ownerName==="Unknown User"?a.jsxs("span",{className:"italic",children:["Account synced from emails  ",new Date(ge.connectedAt).toLocaleDateString()]}):a.jsxs(a.Fragment,{children:[ge.ownerName,"  Connected ",new Date(ge.connectedAt).toLocaleDateString(),!ge.hasToken&&ge.ownerName!=="Unknown User"&&a.jsx("span",{className:"ml-1 text-amber-600",title:"No active token - emails were synced previously",children:""})]})})]})]}),a.jsxs("div",{className:"ml-3 flex items-center gap-2 shrink-0",children:[it?a.jsx("button",{onClick:()=>zt&&Jn(zt.id,ge.email),disabled:bt===ge.email,className:"px-3 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Show emails from this account",children:bt===ge.email?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Unfiltering..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(yd,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Show"})]})}):a.jsx("button",{onClick:()=>cn(ge.email),disabled:bt===ge.email,className:"px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Hide emails from this account",children:bt===ge.email?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Hiding..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(LB,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Hide"})]})}),ge.isCurrentUser&&ge.hasToken!==!1&&a.jsx("button",{onClick:()=>qn(ge.email),disabled:er===ge.email,className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Disconnect your account",children:er===ge.email?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Disconnecting..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(sD,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Remove"})]})}),ge.isCurrentUser&&ge.hasToken===!1&&a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded",title:"This account has no active token - cannot be disconnected",children:"No Token"})]})]},`${ge.email}-${ge.userId}-${Ve}`)})})})()}),a.jsx("div",{className:"p-4 border-t border-slate-200 shrink-0",children:a.jsxs("button",{onClick:()=>{tr(!1),Mn()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl transition-colors",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Connect Your Gmail Account"]})})]})})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 text-center",children:[a.jsx(Gg,{className:"w-14 h-14 text-slate-300 mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Sign in to view Shared Inbox"})]})},l1e=()=>{const{showSuccess:e,showError:t}=Ea(),[r,n]=z.useState([]),[s,i]=z.useState(!0),[o,l]=z.useState(!1),[c,u]=z.useState({name:"",trigger:"",action:"",description:""}),[f,d]=z.useState(!1),[m,p]=z.useState(null),[y,v]=z.useState(null),[g,b]=z.useState(null),[N,j]=z.useState(null);z.useEffect(()=>{(async()=>{i(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id,B=await UP(I),E=B?.data||B||[];n(Array.isArray(E)?E:[])}catch(I){console.error("[AUTOMATIONS] Failed to fetch automations:",I),t(I.message||"Failed to load automations"),n([])}finally{i(!1)}})()},[]),z.useEffect(()=>{const T=async()=>{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;try{const B=await UP(I),E=B?.data||B||[];n(Array.isArray(E)?E:[])}catch(B){console.error("Failed to refresh automations:",B)}};return window.addEventListener("refresh-automations",T),()=>window.removeEventListener("refresh-automations",T)},[]);const w=async T=>{p(T);try{await vne(T);const I=r.find(B=>B.id===T);n(B=>B.map(E=>E.id===T?{...E,active:!E.active}:E)),e(`Automation "${I?.name}" ${I?.active?"deactivated":"activated"}.`),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to toggle automation:",I),t(I.message||"Failed to toggle automation")}finally{p(null)}},S=T=>{j(T),b(T.id)},P=async()=>{if(N){v(N.id);try{await yne(N.id),n(T=>T.filter(I=>I.id!==N.id)),b(null),j(null),e("Automation rule removed."),window.dispatchEvent(new Event("refresh-automations"))}catch(T){console.error("Failed to delete automation:",T),t(T.message||"Failed to delete automation")}finally{v(null)}}},A=async T=>{T.preventDefault(),d(!0);try{const I=JSON.parse(localStorage.getItem("user_data")||"{}").id;await gne({name:c.name,trigger:c.trigger,action:c.action,description:c.description,active:!0,userId:I||void 0}),d(!1),l(!1),u({name:"",trigger:"",action:"",description:""}),e("Automation recipe created successfully!"),window.dispatchEvent(new Event("refresh-automations"))}catch(I){console.error("Failed to create automation:",I),t(I.message||"Failed to create automation"),d(!1)}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Logistics Automations"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Event-driven workflows and smart triggers"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[a.jsx(Nn,{className:"w-4 h-4"})," Create Recipe"]})]}),s?a.jsxs("div",{className:"flex items-center justify-center py-20 bg-white border border-slate-200 rounded-2xl",children:[a.jsx(jt,{className:"w-8 h-8 text-indigo-600 animate-spin mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Loading automations..."})]}):r.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border border-dashed border-slate-300 rounded-2xl text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:a.jsx(Yv,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Automations Found"}),a.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by creating your first automation recipe."}),a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-sm",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Create Your First Automation"]})]}):a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.map(T=>a.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-6 lg:p-8 shadow-sm hover:shadow-md transition-all flex flex-col lg:flex-row lg:items-center justify-between gap-6 group",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{onClick:()=>w(T.id),className:`w-14 h-14 rounded-2xl flex items-center justify-center cursor-pointer transition-all active:scale-90 ${T.active?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"bg-slate-100 text-slate-400"}`,children:a.jsx(Yv,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:T.name}),T.active&&a.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 text-emerald-600 rounded-full text-[9px] font-black uppercase tracking-tighter",children:[a.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"})," Running"]})]}),a.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed max-w-xl",children:T.description})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"hidden sm:flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Trigger"}),a.jsx("p",{className:"text-xs font-bold text-slate-700",children:T.trigger})]}),a.jsx(lo,{className:"w-4 h-4 text-slate-300"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Action"}),a.jsx("p",{className:"text-xs font-bold text-indigo-600",children:T.action})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>w(T.id),disabled:m===T.id,className:`p-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed ${T.active?"text-indigo-600 hover:bg-indigo-50":"text-slate-400 hover:bg-slate-50"}`,title:T.active?"Pause Automation":"Activate Automation",children:m===T.id?a.jsx(jt,{className:"w-5 h-5 animate-spin"}):T.active?a.jsx(ZB,{className:"w-5 h-5 fill-indigo-600"}):a.jsx(eU,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>S(T),disabled:y===T.id,className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Automation",children:y===T.id?a.jsx(jt,{className:"w-5 h-5 animate-spin"}):a.jsx(Br,{className:"w-5 h-5"})})]})]})]},T.id)),a.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 lg:p-12 text-white relative overflow-hidden group shadow-2xl",children:[a.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:a.jsx(Gi,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h3",{className:"text-2xl font-bold",children:"Impact AI Copilot"})]}),a.jsx("h2",{className:"text-3xl font-black mb-4 tracking-tight leading-tight",children:"Describe the automation you need, and we'll build it."}),a.jsx("p",{className:"text-slate-400 text-base font-medium mb-8 italic",children:'"When a deal is won, create a project workspace and notify the logistics team."'}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("input",{type:"text",placeholder:"I want to automate...",className:"flex-1 bg-white/10 border border-white/10 rounded-2xl px-6 py-4 text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50"}),a.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 py-4 rounded-2xl shadow-xl shadow-indigo-900 transition-all active:scale-95 flex items-center gap-2",children:["Generate ",a.jsx(lo,{className:"w-4 h-4"})]})]})]}),a.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-indigo-600/10 blur-[120px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none"})]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"New Automation Recipe"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:A,className:"p-6 space-y-4 text-left",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recipe Name"}),a.jsx("input",{required:!0,type:"text",value:c.name,onChange:T=>u({...c,name:T.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Lead Auto-Reply"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Trigger Event"}),a.jsx("input",{required:!0,type:"text",value:c.trigger,onChange:T=>u({...c,trigger:T.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., New Contact Created"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Automation Action"}),a.jsx("input",{required:!0,type:"text",value:c.action,onChange:T=>u({...c,action:T.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Send Welcome Template"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),a.jsx("textarea",{required:!0,value:c.description,onChange:T=>u({...c,description:T.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none resize-none",rows:3,placeholder:"Briefly explain what this does..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:f,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[f?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(kd,{className:"w-4 h-4"}),"Deploy Automation"]})]})]})]})}),g&&N&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>b(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(s0,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Automation"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5",children:"This action cannot be undone"})]})]}),a.jsx("button",{onClick:()=>b(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Are you sure you want to delete automation ",a.jsxs("span",{className:"font-bold text-slate-900",children:['"',N.name,'"']}),"?"]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs text-red-700 font-semibold mb-1",children:" Warning:"}),a.jsx("p",{className:"text-xs text-red-600",children:"This will permanently delete the automation rule and all its configurations. This action cannot be undone."})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>b(null),disabled:y===N.id,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:P,disabled:y===N.id,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:y===N.id?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Br,{className:"w-4 h-4"}),"Delete Automation"]})})]})]})]})})]})]})},c1e=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:n}=Ea(),[s,i]=z.useState("registry"),[o,l]=z.useState([]),[c,u]=z.useState([]),[f,d]=z.useState(!0),[m,p]=z.useState("all"),[y,v]=z.useState("open"),[g,b]=z.useState(null),[N,j]=z.useState(!1),[w,S]=z.useState(!1),[P,A]=z.useState({type:"feature",title:"",description:""}),[T,I]=z.useState({type:null,item:null}),[B,E]=z.useState(null),[C,M]=z.useState(!1),[q,G]=z.useState([]),[Z,te]=z.useState(!1),[ne,J]=z.useState(!1),[ee,H]=z.useState(null),[O,R]=z.useState(!1),[W,U]=z.useState(""),[K,oe]=z.useState(null),he=e?.role==="Admin",ie=async()=>{if(s==="registry"){d(!0);try{const[ue,Pe]=await Promise.all([Ene(),Ed()]),Ne=(ue.data||[]).map(Be=>{const nt=Be.url||null;let mt=[];return Array.isArray(Be.attachments)&&Be.attachments.length>0&&(mt=Be.attachments.filter(kt=>kt&&(kt.source==="file"||kt.data)).map(kt=>({type:kt.type||"image",data:kt.data||"",filename:kt.filename||"attachment",mimeType:kt.mimeType||"image/jpeg",source:"file"}))),{...Be,url:nt,attachments:mt}});l(Ne),u(Pe.data||[])}catch{n("Failed to synchronize roadmap registry.")}finally{d(!1)}}};z.useEffect(()=>{ie();const ue=()=>ie();return window.addEventListener("refresh-roadmap",ue),()=>window.removeEventListener("refresh-roadmap",ue)},[s]),z.useEffect(()=>{const ue=Pe=>{Pe.key==="Escape"&&K&&oe(null)};return window.addEventListener("keydown",ue),()=>window.removeEventListener("keydown",ue)},[K]),z.useEffect(()=>{U(g&&g.description||"")},[g]);const ce=async()=>{if(!(!g||!he)){R(!0);try{await YN(g.id,{description:W.trim()}),l(ue=>ue.map(Pe=>Pe.id===g.id?{...Pe,description:W.trim()}:Pe)),b(ue=>ue&&{...ue,description:W.trim()}),r("Context updated")}catch{n("Failed to update context")}finally{R(!1)}}},Le=async(ue,Pe)=>{if(he)try{await YN(ue,{status:Pe}),l(Ne=>Ne.map(Be=>Be.id===ue?{...Be,status:Pe}:Be)),g?.id===ue&&b({...g,status:Pe}),r(`Status updated to ${Pe}`)}catch{n("Update failed.")}},le=async ue=>{if(he){M(!0);try{await zP(ue),l(Pe=>Pe.filter(Ne=>Ne.id!==ue)),g?.id===ue&&b(null),E(null),r("Entry purged from registry.")}catch{n("Purge failed.")}finally{M(!1)}}},He=()=>{q.length===pe.length?G([]):G(pe.map(ue=>ue.id))},Fe=async()=>{if(!he){n("Only admins can delete entries");return}if(q.length===0){n("No items selected");return}te(!0);try{const ue=[...q],Pe=ue.map(Ne=>zP(Ne));await Promise.all(Pe),l(Ne=>Ne.filter(Be=>!ue.includes(Be.id))),g&&ue.includes(g.id)&&b(null),G([]),J(!1),r(`Successfully deleted ${ue.length} entr${ue.length>1?"ies":"y"}`)}catch(ue){console.error("Bulk delete error:",ue),n(ue.message||"Failed to delete entries. Please try again.")}finally{te(!1)}},fe=async ue=>{if(ue.preventDefault(),!P.title||!P.description){n("Title and description are required");return}S(!0);try{const Pe={...P,userId:e?.id||"anonymous",status:"planned"};await P7(Pe),r("Entry added to Strategic Pipeline"),j(!1),A({type:"feature",title:"",description:""}),ie()}catch(Pe){console.error("[FEEDBACK] Creation failed:",Pe),n(`Failed to add entry: ${Pe.message||"Unknown error"}`)}finally{S(!1)}},Q=async()=>{if(!T.item||!T.type)return;let ue,Pe;switch(T.type){case"done":ue="done",Pe="Entry marked as done";break;case"archive":ue="canceled",Pe="Entry archived";break;case"in-execution":ue="in-progress",Pe="Entry marked as in execution";break;default:return}try{await YN(T.item.id,{status:ue}),l(Ne=>Ne.map(Be=>Be.id===T.item.id?{...Be,status:ue}:Be)),g?.id===T.item.id&&b({...g,status:ue}),r(Pe),I({type:null,item:null})}catch{n("Failed to update entry status")}},we=(ue,Pe="w-4 h-4")=>{switch(ue){case"done":return a.jsx(jn,{className:`${Pe} text-emerald-500`});case"in-progress":return a.jsx(As,{className:`${Pe} text-blue-500 animate-pulse`});case"postponed":return a.jsx(DB,{className:`${Pe} text-amber-500`});case"canceled":return a.jsx(tD,{className:`${Pe} text-slate-400`});default:return a.jsx(Lv,{className:`${Pe} text-indigo-400`})}},ve=ue=>{switch(ue){case"bug":return"bg-red-50 text-red-600 border-red-100";case"feature":return"bg-indigo-50 text-indigo-600 border-indigo-100";case"idea":return"bg-amber-50 text-amber-600 border-amber-100"}},Ee=(ue,Pe="w-4 h-4")=>{switch(ue){case"bug":return a.jsx(Iv,{className:Pe});case"feature":return a.jsx(Gi,{className:Pe});case"idea":return a.jsx(Ej,{className:Pe})}},pe=o.filter(ue=>(y==="open"?ue.status!=="done"&&ue.status!=="canceled":ue.status==="done"||ue.status==="canceled")?m==="all"?!0:ue.type===m:!1);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-32 relative h-full",children:[a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Enterprise Roadmap"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Consolidated future trajectory, communication beta, and workflow automation"})]}),a.jsxs("div",{className:"flex bg-white px-5 py-2.5 rounded-[24px] border border-slate-200 shadow-sm w-fit items-center gap-3",children:[a.jsx(Lv,{className:"w-4 h-4 text-indigo-500"}),a.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700",children:"Trajectory Registry"}),a.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Live"})]})]}),s==="registry"&&a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white p-1.5 rounded-[20px] border border-slate-200 shadow-sm",children:[a.jsx("button",{onClick:()=>{v("open"),G([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${y==="open"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Strategic Pipeline"}),a.jsx("button",{onClick:()=>{v("completed"),G([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${y==="completed"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Archive & Done"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[["all","bug","feature","idea"].map(ue=>a.jsx("button",{onClick:()=>{p(ue),G([])},className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border transition-all ${m===ue?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:ue},ue)),a.jsxs("button",{onClick:()=>{const Pe=m!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[m]:"feature";A({type:Pe,title:"",description:""}),j(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Nn,{className:"w-3 h-3"})," New Entry"]})]})]}),f?a.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[a.jsx(jt,{className:"w-10 h-10 animate-spin text-indigo-600 mb-4"}),a.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Synchronizing Registry..."})]}):pe.length===0?a.jsxs("div",{className:"py-32 bg-white rounded-[40px] border border-dashed border-slate-200 text-center flex flex-col items-center justify-center gap-4",children:[a.jsx(Gv,{className:"w-16 h-16 text-slate-100"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-black text-slate-900",children:"No Registry Entries Found"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mb-4",children:"Add a new strategic entry to get started."}),a.jsxs("button",{onClick:()=>{const Pe=m!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[m]:"feature";A({type:Pe,title:"",description:""}),j(!0)},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 mx-auto",children:[a.jsx(Nn,{className:"w-4 h-4"})," Add Entry"]})]})]}):a.jsxs(a.Fragment,{children:[pe.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:pe.length>0&&q.length===pe.length,onChange:ue=>{ue.stopPropagation(),He()}}),a.jsx("span",{className:"text-sm font-semibold text-slate-600 cursor-pointer",onClick:ue=>{ue.stopPropagation(),He()},children:"Select All Entries"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:pe.map(ue=>{const Pe=c.find(Be=>Be.id===ue.userId),Ne=q.includes(ue.id);return a.jsxs("div",{onClick:()=>{b(ue),H(null)},className:`bg-white rounded-[32px] border ${Ne?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} p-8 shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all group flex flex-col relative cursor-pointer active:scale-[0.98] hover:scale-[1.02] overflow-visible`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border ${ve(ue.type)} flex items-center gap-1.5`,children:[Ee(ue.type,"w-2.5 h-2.5"),ue.type]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full text-[9px] font-black text-slate-500 uppercase",children:[we(ue.status,"w-2.5 h-2.5"),ue.status]}),a.jsxs("div",{className:"flex items-center gap-1.5",onClick:Be=>Be.stopPropagation(),children:[a.jsx("div",{className:`${Ne?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity flex items-center`,children:a.jsx("label",{className:`px-2 py-1 rounded-lg transition-all border flex items-center justify-center cursor-pointer ${Ne?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200 hover:bg-indigo-50/50 hover:border-indigo-200"}`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Ne,onChange:Be=>{Be.stopPropagation(),G(nt=>nt.includes(ue.id)?nt.filter(mt=>mt!==ue.id):[...nt,ue.id])},onClick:Be=>{Be.stopPropagation()}})})}),(ue.status==="planned"||ue.status==="in-progress"||ue.status==="postponed")&&a.jsxs(a.Fragment,{children:[ue.status!=="in-progress"&&a.jsx("button",{onClick:Be=>{Be.stopPropagation(),I({type:"in-execution",item:ue})},className:"px-2 py-1 hover:bg-blue-50 rounded-lg text-blue-600 transition-all border border-blue-100 hover:border-blue-200 flex items-center justify-center",title:"Mark as In Execution",children:a.jsx(As,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Be=>{Be.stopPropagation(),I({type:"done",item:ue})},className:"px-2 py-1 hover:bg-emerald-50 rounded-lg text-emerald-600 transition-all border border-emerald-100 hover:border-emerald-200 flex items-center justify-center",title:"Mark as Done",children:a.jsx(jn,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Be=>{Be.stopPropagation(),I({type:"archive",item:ue})},className:"px-2 py-1 hover:bg-slate-100 rounded-lg text-slate-500 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center",title:"Archive",children:a.jsx(fd,{className:"w-3.5 h-3.5"})})]}),he&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:Be=>{Be.stopPropagation(),H(ee===ue.id?null:ue.id)},className:`px-2 py-1 hover:bg-slate-50 rounded-lg text-slate-400 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center ${ee===ue.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,title:"More options",children:a.jsx(aD,{className:"w-3.5 h-3.5"})}),ee===ue.id&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-[55]",onClick:Be=>{Be.stopPropagation(),H(null)}}),a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-52 bg-slate-900 rounded-2xl shadow-2xl overflow-hidden z-[60] animate-in fade-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"p-2 border-b border-white/5 text-[9px] font-black text-white/40 uppercase tracking-widest px-4 py-2",children:"Lifecycle Management"}),a.jsxs("div",{className:"overflow-hidden rounded-b-2xl",children:[["planned","in-progress","done","postponed","canceled"].map(Be=>a.jsxs("button",{onClick:nt=>{nt.stopPropagation(),Le(ue.id,Be),H(null)},className:`w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest transition-colors ${ue.status===Be?"text-indigo-400 bg-white/5":"text-slate-300 hover:bg-white/5"}`,children:["Set ",Be]},Be)),a.jsx("button",{onClick:Be=>{Be.stopPropagation(),E(ue),H(null)},className:"w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest text-red-400 border-t border-white/5 hover:bg-red-500 hover:text-white transition-all",children:"Delete Terminal"})]})]})]})]})]})]})]}),a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-3 leading-tight group-hover:text-indigo-600 transition-colors",children:ue.title}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-4 flex-1 line-clamp-3 italic",children:['"',ue.description,'"']}),ue.url&&a.jsx("div",{className:"mb-6",children:a.jsxs("a",{href:ue.url,target:"_blank",rel:"noopener noreferrer",onClick:Be=>Be.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[ue.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?a.jsx(gl,{className:"w-3 h-3"}):a.jsx(Jh,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[120px]",children:ue.url.length>30?`${ue.url.substring(0,30)}...`:ue.url}),a.jsx(Ti,{className:"w-3 h-3"})]})}),ue.attachments&&Array.isArray(ue.attachments)&&ue.attachments.length>0&&a.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:ue.attachments.map((Be,nt)=>Be.type==="image"&&Be.data?a.jsxs("button",{type:"button",onClick:mt=>{mt.stopPropagation(),oe({src:Be.data,alt:Be.filename||"Attachment"})},className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(gl,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[100px]",children:Be.filename||"Screenshot"})]},nt):Be.type==="video"&&Be.data?a.jsxs("a",{href:Be.data,target:"_blank",rel:"noopener noreferrer",onClick:mt=>mt.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(Jh,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[100px]",children:Be.filename||"Video"}),a.jsx(Ti,{className:"w-3 h-3"})]},nt):null)}),a.jsxs("div",{className:"pt-6 border-t border-slate-50 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase shadow-inner group-hover:scale-110 transition-transform",children:Pe?.name?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black text-slate-900",children:Pe?.name||"Observer"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(ue.createdAt).toLocaleDateString()})]})]}),a.jsx(_s,{className:"w-4 h-4 text-slate-200 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]})]},ue.id)})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-12",children:[{label:"Total Requests",value:o.length,icon:a.jsx(Lv,{className:"w-4 h-4"})},{label:"Bugs Identified",value:o.filter(ue=>ue.type==="bug").length,icon:a.jsx(Iv,{className:"w-4 h-4 text-red-500"})},{label:"Features Shipped",value:o.filter(ue=>ue.status==="done").length,icon:a.jsx(Gi,{className:"w-4 h-4 text-emerald-500"})},{label:"In Execution",value:o.filter(ue=>ue.status==="in-progress").length,icon:a.jsx(As,{className:"w-4 h-4 text-blue-500"})}].map((ue,Pe)=>a.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400",children:ue.icon}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:ue.label}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:ue.value})]})]},Pe))})]}),s==="registry"&&a.jsxs("div",{className:"mt-10 space-y-4 pb-12",children:[a.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Gi,{className:"w-4 h-4 text-indigo-500"})," Features in Development"]}),a.jsxs("p",{className:"text-slate-500 text-sm max-w-2xl",children:["These confirmed feature requests are currently"," ",a.jsx("span",{className:"font-semibold text-slate-700",children:"in development"}),". You can preview their beta experiences below while the full workflows mature."]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(gi,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Shared Inbox"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Centralize customer conversations and feedback threads for your logistics team."}),a.jsxs("button",{onClick:()=>i("inbox"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 text-indigo-50 flex items-center justify-center",children:a.jsx(Yv,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Smart Automations"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-purple-50 text-purple-600",children:"Beta  In Progress"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Automate repetitive logistics workflows and notifications with configurable recipes."}),a.jsxs("button",{onClick:()=>i("automation"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:a.jsx(rD,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Business Card Scanner"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-blue-50 text-blue-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Scan a business card and create contact and company information directly inside the application."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(V0,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn Scanner"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-indigo-50 text-indigo-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Scan a LinkedIn account and create contact and company information directly inside the application."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center",children:a.jsx(nf,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Source Signals"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Source signals, such as recent funding, new hires, M&A, lay-offs, and attach this information to the company card."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center",children:a.jsx(eD,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Dashboards (Sales KPIs)"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Comprehensive sales dashboards with key performance indicators, revenue tracking, and analytics to monitor sales performance."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-600 flex items-center justify-center",children:a.jsx(BB,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Gemini Video Transcript"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Connect Gemini video transcripts and meeting sessions to company accounts for automatic note-taking and insights."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-violet-50 text-violet-600 flex items-center justify-center",children:a.jsx(OB,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Playbooks"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Create and manage sales playbooks, best practices, and standardized workflows for your team."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-pink-50 text-pink-600 flex items-center justify-center",children:a.jsx($B,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Client Satisfaction"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Track and manage client satisfaction scores, feedback, and surveys to improve customer relationships."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-50 text-cyan-600 flex items-center justify-center",children:a.jsx(QB,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Product & Service Library"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Centralized library to manage products, services, pricing, and catalog information for your business."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(lo,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(XB,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Integration"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn DMs & Sales Nav"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Integrate LinkedIn direct messages and LinkedIn Sales Navigator to manage conversations and leads directly in the platform."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(lo,{className:"w-3 h-3"})]})]})]})]}),s==="inbox"&&a.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:a.jsx(F9,{currentUser:e})}),s==="automation"&&a.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:a.jsx(l1e,{})}),K&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>oe(null),children:a.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[a.jsx("button",{onClick:()=>oe(null),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:a.jsx(cr,{className:"w-6 h-6"})}),a.jsx("img",{src:K.src,alt:K.alt,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:ue=>ue.stopPropagation()})]})}),N&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(Nn,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"New Registry Entry"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Strategic Pipeline"})]})]}),a.jsx("button",{onClick:()=>{j(!1),A({type:"feature",title:"",description:""})},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(cr,{className:"w-6 h-6 text-slate-400"})})]}),a.jsxs("form",{onSubmit:fe,className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),a.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:a.jsx(Iv,{className:"w-4 h-4"}),label:"Bug",color:"bg-red-50 text-red-600 border-red-200"},{id:"feature",icon:a.jsx(Gi,{className:"w-4 h-4"}),label:"Feature",color:"bg-indigo-50 text-indigo-600 border-indigo-200"},{id:"idea",icon:a.jsx(Ej,{className:"w-4 h-4"}),label:"Idea",color:"bg-amber-50 text-amber-600 border-amber-200"}].map(ue=>a.jsxs("button",{type:"button",onClick:()=>A({...P,type:ue.id}),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all border ${P.type===ue.id?`${ue.color} shadow-md`:"bg-white text-slate-400 border-transparent hover:text-slate-600"}`,children:[ue.icon," ",ue.label]},ue.id))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"Enter entry title...",value:P.title,onChange:ue=>A({...P,title:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description *"}),a.jsx("textarea",{required:!0,rows:6,placeholder:"Provide detailed context and strategic notes...",value:P.description,onChange:ue=>A({...P,description:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]})]}),a.jsxs("div",{className:"flex gap-4 pt-8 mt-8 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:()=>{j(!1),A({type:"feature",title:"",description:""})},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:w||!P.title||!P.description,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:w?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-5 h-5 animate-spin"})," Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Iu,{className:"w-5 h-5"})," Add to Pipeline"]})})]})]})]})}),g&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>b(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:()=>b(null),className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(cr,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:`w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl ${g.type==="bug"?"bg-red-500 shadow-red-100":g.type==="feature"?"bg-indigo-500 shadow-indigo-100":"bg-amber-500 shadow-amber-100"}`,children:Ee(g.type,"w-8 h-8")}),a.jsxs("div",{children:[a.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border inline-block mb-1.5 ${ve(g.type)}`,children:g.type}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:g.title})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[we(g.status,"w-5 h-5"),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Pipeline Status"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 capitalize",children:g.status.replace("-"," ")})]})]}),a.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[a.jsx(ka,{className:"w-5 h-5 text-indigo-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Submitted On"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:new Date(g.createdAt).toLocaleDateString()})]})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(fo,{className:"w-4 h-4 text-indigo-500"})," Observation Context"]}),he&&a.jsx("button",{type:"button",onClick:ce,disabled:O||W.trim()===(g.description||"").trim(),className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-default flex items-center gap-2",children:O?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-3 h-3 animate-spin"})," Saving"]}):a.jsxs(a.Fragment,{children:[a.jsx(jn,{className:"w-3 h-3"})," Save Context"]})})]}),he?a.jsxs("div",{className:"p-4 bg-slate-950 rounded-[32px] text-indigo-50 relative shadow-2xl",children:[a.jsx("textarea",{rows:4,value:W,onChange:ue=>U(ue.target.value),className:"w-full bg-transparent border-none outline-none resize-none text-sm leading-relaxed placeholder:text-slate-500",placeholder:"Describe the bug, feature, or idea in more detail..."}),a.jsx("div",{className:"pointer-events-none absolute top-0 right-0 w-40 h-40 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]}):a.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group shadow-2xl",children:[a.jsxs("p",{className:"text-lg leading-relaxed italic opacity-90 z-10 relative",children:['"',g.description,'"']}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),g.url&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Vf,{className:"w-4 h-4 text-indigo-500"})," URL Attachment"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:a.jsxs("a",{href:g.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-50 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[g.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?a.jsx(gl,{className:"w-4 h-4"}):a.jsx(Jh,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[200px]",children:g.url.length>40?`${g.url.substring(0,40)}...`:g.url}),a.jsx(Ti,{className:"w-4 h-4"})]})})]}),g.attachments&&g.attachments.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(gl,{className:"w-4 h-4 text-indigo-500"})," File Attachments"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:g.attachments.map((ue,Pe)=>ue.type==="image"&&ue.data?a.jsxs("button",{type:"button",onClick:()=>oe({src:ue.data,alt:ue.filename||"Attachment"}),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(gl,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[150px]",children:ue.filename||"Screenshot"})]},Pe):ue.type==="video"&&ue.data?a.jsxs("a",{href:ue.data,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(Jh,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[150px]",children:ue.filename||"Video"}),a.jsx(Ti,{className:"w-4 h-4"})]},Pe):null)})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(vl,{className:"w-4 h-4 text-indigo-500"})," Contributor Details"]}),a.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-[32px] flex items-center gap-5",children:[a.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-indigo-600 text-xl font-black shadow-sm border border-slate-200",children:c.find(ue=>ue.id===g.userId)?.name?.charAt(0)||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-black text-slate-900",children:c.find(ue=>ue.id===g.userId)?.name||"Impact Member"}),a.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:[c.find(ue=>ue.id===g.userId)?.role||"Stakeholder","  Enterprise Contributor"]})]})]})]}),he&&a.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(rf,{className:"w-4 h-4 text-indigo-500"})," Strategic Alignment"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["planned","in-progress","done","postponed","canceled"].map(ue=>a.jsxs("button",{onClick:()=>Le(g.id,ue),className:`flex items-center gap-2 p-4 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${g.status===ue?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:[we(ue,"w-3 h-3"),ue.replace("-"," ")]},ue))})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>E(g),className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(Br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>b(null),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(jn,{className:"w-5 h-5"})," Dismiss Audit View"]})]})]})]}),T.type&&T.item&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${T.type==="done"?"bg-emerald-50 text-emerald-600":T.type==="in-execution"?"bg-blue-50 text-blue-600":"bg-slate-100 text-slate-600"}`,children:T.type==="done"?a.jsx(jn,{className:"w-6 h-6"}):T.type==="in-execution"?a.jsx(As,{className:"w-6 h-6"}):a.jsx(fd,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:T.type==="done"?"Mark as Done?":T.type==="in-execution"?"Mark as In Execution?":"Archive Entry?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:T.type==="done"?"This will move the entry to Archive & Done":T.type==="in-execution"?"This will mark the entry as in progress":"This will archive the entry"})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:T.item.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:T.item.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>I({type:null,item:null}),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:Q,className:`flex-1 py-3 font-black uppercase text-xs tracking-widest rounded-xl transition-all shadow-lg ${T.type==="done"?"bg-emerald-600 text-white hover:bg-emerald-700":T.type==="in-execution"?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:T.type==="done"?"Mark Done":T.type==="in-execution"?"Start Execution":"Archive"})]})]})}),B&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Entry?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entry will be permanently removed from the registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:B.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:B.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>E(null),disabled:C,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>le(B.id),disabled:C,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:C?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Entry"})]})]})}),q.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:q.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:ue=>{if(ue.preventDefault(),ue.stopPropagation(),!he){n("Only admins can delete entries");return}if(q.length===0){n("No items selected");return}J(!0)},disabled:Z,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Z?a.jsx(jt,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>G([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(cr,{className:"w-5 h-5"})})]})]})}),ne&&q.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",q.length," Entr",q.length>1?"ies":"y","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entries will be permanently removed from the registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(ue=>q.includes(ue.id)).slice(0,5).map(ue=>a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[Ee(ue.type,"w-4 h-4"),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.title}),a.jsx("p",{className:"text-[10px] text-slate-500 capitalize",children:ue.type})]})]},ue.id)),q.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",q.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>J(!1),disabled:Z,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:ue=>{ue.preventDefault(),ue.stopPropagation(),Fe()},disabled:Z,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Z?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${q.length} Entr${q.length>1?"ies":"y"}`})]})]})})]})},u1e=({currentUser:e})=>{const{showSuccess:t,showError:r}=Ea(),[n,s]=z.useState([]),[i,o]=z.useState([]),[l,c]=z.useState([]),[u,f]=z.useState(null),[d,m]=z.useState(!0),[p,y]=z.useState(!1),[v,g]=z.useState([]),[b,N]=z.useState(!1),[j,w]=z.useState("select"),[S,P]=z.useState(""),[A,T]=z.useState(!1),[I,B]=z.useState(!1),[E,C]=z.useState([]),[M,q]=z.useState(!1),[G,Z]=z.useState(!1),[te,ne]=z.useState(!1),[J,ee]=z.useState(!1),[H,O]=z.useState(!1),[R,W]=z.useState(!1),[U,K]=z.useState(""),[oe,he]=z.useState(!1),ie=z.useRef(null),[ce,Le]=z.useState({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),le=z.useCallback(async()=>{try{const Re=await I7(),gt=Re?.data||Re||[];c(Array.isArray(gt)?gt:[])}catch{c([{id:"default-1",name:"Travel",isDefault:!0},{id:"default-2",name:"Meals",isDefault:!0},{id:"default-3",name:"Office Supplies",isDefault:!0},{id:"default-4",name:"Software",isDefault:!0},{id:"default-5",name:"Marketing",isDefault:!0},{id:"default-6",name:"Professional Services",isDefault:!0},{id:"default-7",name:"Utilities",isDefault:!0},{id:"default-8",name:"Equipment",isDefault:!0},{id:"default-9",name:"Other",isDefault:!0}])}},[]),He=z.useCallback(async()=>{m(!0);try{const Re=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Re){s([]),m(!1);return}const gt={userId:Re};v.length===1&&(gt.companyId=v[0]);const ut=await Cne(gt);let lt=ut?.data||ut||[];lt=Array.isArray(lt)?lt:[],v.length>1&&(lt=lt.filter(pr=>v.includes(pr.companyId))),s(lt);try{const pr=await Cd();o(pr?.data||pr||[])}catch(pr){console.error("[Expenses] Failed to fetch companies:",pr),o([])}}catch(Re){console.error("[Expenses] Error fetching expenses:",Re),r(Re.message||"Failed to load expenses"),s([])}finally{m(!1)}},[e,v,r]);z.useEffect(()=>{le()},[le]),z.useEffect(()=>{He()},[He]),z.useEffect(()=>{const Re=()=>He();return window.addEventListener("refresh-expenses",Re),()=>window.removeEventListener("refresh-expenses",Re)},[He]);const Fe=Re=>i.find(gt=>gt.id===Re),fe=Re=>{switch(Re){case"Approved":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Rejected":return"bg-red-50 text-red-600 border-red-100";default:return"bg-amber-50 text-amber-600 border-amber-100"}},Q=n,we={totalExpenses:Q.reduce((Re,gt)=>Re+(gt.amount||0),0),pendingCount:Q.filter(Re=>Re.status==="Pending"||!Re.status).length,approvedCount:Q.filter(Re=>Re.status==="Approved").length,thisMonth:Q.filter(Re=>{const gt=new Date(Re.date),ut=new Date;return gt.getMonth()===ut.getMonth()&&gt.getFullYear()===ut.getFullYear()}).reduce((Re,gt)=>Re+(gt.amount||0),0)},ve=()=>{E.length===Q.length&&Q.length>0?C([]):C(Q.map(Re=>Re.id))},Ee=(Re,gt=1920,ut=1080,lt=.8)=>new Promise((pr,tr)=>{const ft=new FileReader;ft.onload=$t=>{const er=new Image;er.onload=()=>{let qe=er.width,bt=er.height;qe>bt?qe>gt&&(bt=bt*gt/qe,qe=gt):bt>ut&&(qe=qe*ut/bt,bt=ut);const Nr=document.createElement("canvas");Nr.width=qe,Nr.height=bt;const rr=Nr.getContext("2d");if(!rr){tr(new Error("Failed to create canvas context"));return}rr.drawImage(er,0,0,qe,bt);const Lr=Nr.toDataURL("image/jpeg",lt);pr(Lr)},er.onerror=()=>tr(new Error("Failed to load image")),er.src=$t.target?.result},ft.onerror=()=>tr(new Error("Failed to read file")),ft.readAsDataURL(Re)}),pe=async Re=>{const gt=Re.target.files?.[0];if(gt){if(!gt.type.startsWith("image/")&&!gt.type.includes("pdf")){r("Please select an image or PDF file");return}if(gt.size>10*1024*1024){r("File size must be less than 10MB");return}W(!0);try{if(gt.type.startsWith("image/")){const ut=await Ee(gt,1920,1080,.8);K(ut),Le(lt=>({...lt,receiptFile:gt}))}else{const ut=new FileReader;ut.onload=()=>{K(ut.result),Le(lt=>({...lt,receiptFile:gt}))},ut.readAsDataURL(gt)}}catch(ut){r(ut.message||"Failed to process receipt")}finally{W(!1)}}},ue=async Re=>{if(Re.preventDefault(),!ce.companyId||!ce.title||!ce.amount||!ce.category||!ce.date){r("Please fill in all required fields");return}O(!0);try{const gt=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id;let ut="",lt="",pr="";ce.receiptFile&&(ce.receiptFile.type.startsWith("image/"),ut=U,lt=ce.receiptFile.name,pr=ce.receiptFile.type),await Tne({companyId:ce.companyId,title:ce.title,amount:parseFloat(ce.amount),category:ce.category,date:new Date(ce.date).toISOString(),description:ce.description,status:ce.status,receiptUrl:ut||void 0,receiptFilename:lt||void 0,receiptMimeType:pr||void 0,userId:gt}),t("Expense added successfully"),ee(!1),Le({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),K(""),ie.current&&(ie.current.value=""),He(),window.dispatchEvent(new Event("refresh-expenses"))}catch(gt){r(gt.message||"Failed to add expense")}finally{O(!1)}},Pe=async()=>{if(S.trim()){T(!0);try{const Re=await D7({name:S.trim()});if(Re?.data){const gt=Re.data;c(ut=>[...ut,gt]),Le(ut=>({...ut,category:gt.name})),P(""),N(!1),t("Category added successfully")}}catch(Re){Re.message?.includes("already exists")||Re.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(Re.message||"Failed to add category")}finally{T(!1)}}},Ne=async(Re,gt)=>{he(!0);try{await One(Re,{status:gt}),s(ut=>ut.map(lt=>lt.id===Re?{...lt,status:gt}:lt)),u&&u.id===Re&&f({...u,status:gt}),t(`Expense status updated to ${gt}`),window.dispatchEvent(new Event("refresh-expenses"))}catch(ut){r(ut.message||"Failed to update expense status")}finally{he(!1)}},Be=async()=>{if(u){y(!0);try{await HP(u.id),s(Re=>Re.filter(gt=>gt.id!==u.id)),f(null),ne(!1),t("Expense deleted successfully"),window.dispatchEvent(new Event("refresh-expenses"))}catch(Re){r(Re.message||"Failed to delete expense")}finally{y(!1)}}},nt=async()=>{const Re=[...E];if(Re.length!==0){q(!0),Z(!1);try{await Promise.all(Re.map(gt=>HP(gt))),s(gt=>gt.filter(ut=>!Re.includes(ut.id))),C([]),t(`Successfully deleted ${Re.length} expense(s)`),window.dispatchEvent(new Event("refresh-expenses"))}catch{r("Failed to delete some expenses")}finally{q(!1)}}},mt=Re=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(Re),kt=Re=>new Date(Re).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return d?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(jt,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.jsxs("div",{className:"w-full pt-0 pb-20 px-0",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"Expenses"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Manage company expenses and receipts"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>{w("manage"),N(!0)},className:"px-4 py-3 bg-white text-indigo-600 rounded-xl font-bold text-sm hover:bg-indigo-50 transition-all flex items-center gap-2 border-2 border-indigo-200",children:[a.jsx(ks,{className:"w-4 h-4"}),"Manage Categories"]}),a.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg",children:[a.jsx(Nn,{className:"w-5 h-5"}),"Add Expense"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Expenses",value:mt(we.totalExpenses),icon:a.jsx(df,{className:"w-5 h-5"}),color:"text-indigo-600 bg-indigo-50"},{label:"Pending",value:we.pendingCount.toString(),icon:a.jsx(As,{className:"w-5 h-5"}),color:"text-amber-600 bg-amber-50"},{label:"Approved",value:we.approvedCount.toString(),icon:a.jsx(bl,{className:"w-5 h-5"}),color:"text-emerald-600 bg-emerald-50"},{label:"This Month",value:mt(we.thisMonth),icon:a.jsx(ka,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50"}].map((Re,gt)=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("div",{className:`p-2 rounded-lg ${Re.color}`,children:Re.icon})}),a.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:Re.label}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:Re.value})]},gt))}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(nx,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Filter by Company:"})]}),a.jsxs("button",{onClick:()=>B(!0),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm font-bold bg-white hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors flex items-center gap-2",children:[a.jsx("span",{children:v.length===0?"All Companies":v.length===1?i.find(Re=>Re.id===v[0])?.name||"1 Selected":`${v.length} Companies Selected`}),v.length>0&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:v.length})]}),a.jsxs("div",{className:"text-xs text-slate-400 font-bold ml-auto",children:["Showing ",Q.length," expense(s)"]})]}),E.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-300",children:a.jsxs("div",{className:"bg-slate-900 rounded-full px-6 py-4 shadow-2xl flex items-center gap-4 min-w-[320px]",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-sm font-black",children:E.length})}),a.jsx("span",{className:"text-white text-sm font-bold",children:"Selected"}),a.jsx("div",{className:"w-px h-6 bg-white/20"}),a.jsx("button",{onClick:()=>Z(!0),disabled:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 flex-shrink-0",children:M?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Br,{className:"w-4 h-4"}),"DELETE"]})}),a.jsx("button",{onClick:()=>C([]),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors flex-shrink-0 ml-auto","aria-label":"Dismiss",children:a.jsx(cr,{className:"w-5 h-5 text-white"})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:`lg:col-span-2 space-y-4 ${u?"lg:pr-6":""}`,children:[Q.length>0&&a.jsx("div",{className:"flex items-center gap-3 mb-4",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:E.length===Q.length&&Q.length>0,onChange:ve,className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Select All"})]})}),Q.length===0?a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[a.jsx(Oj,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"No Expenses Found"}),a.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by adding your first expense"}),a.jsxs("button",{onClick:()=>ee(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all",children:[a.jsx(Nn,{className:"w-5 h-5 inline mr-2"}),"Add Expense"]})]}):Q.map(Re=>{const gt=Fe(Re.companyId),ut=E.includes(Re.id);return a.jsxs("div",{onClick:()=>f(Re),className:`bg-white rounded-2xl border ${ut?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:shadow-xl transition-all cursor-pointer p-6 ${u?.id===Re.id?"ring-2 ring-indigo-500":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("input",{type:"checkbox",checked:ut,onChange:lt=>{lt.stopPropagation(),C(pr=>ut?pr.filter(tr=>tr!==Re.id):[...pr,Re.id])},onClick:lt=>lt.stopPropagation(),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0"}),a.jsx(Qs,{src:gt?.logo,fallbackText:gt?.name,className:"w-10 h-10 rounded-xl shrink-0",isAvatar:!1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-black text-slate-900 text-lg mb-1 truncate",children:Re.title}),a.jsx("p",{className:"text-sm text-slate-500 truncate",children:gt?.name||"Unknown Company"})]})]}),a.jsxs("div",{className:"text-right shrink-0 ml-4",children:[a.jsx("p",{className:"text-2xl font-black text-slate-900 mb-1",children:mt(Re.amount)}),a.jsxs("select",{value:Re.status||"Pending",onChange:lt=>{lt.stopPropagation(),Ne(Re.id,lt.target.value)},onClick:lt=>lt.stopPropagation(),disabled:oe,className:`px-2 py-1 rounded-full text-[10px] font-black uppercase border outline-none cursor-pointer transition-all ${fe(Re.status||"Pending")} ${oe?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ks,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:Re.category})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(ka,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:kt(Re.date)})]}),Re.receiptUrl&&a.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[a.jsx(Ga,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:"Receipt"})]})]}),Re.description&&a.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:Re.description}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[a.jsxs("button",{onClick:lt=>{lt.stopPropagation(),f(Re)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Details",a.jsx(_s,{className:"w-3 h-3"})]}),a.jsx("button",{onClick:lt=>{lt.stopPropagation(),f(Re),ne(!0)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Br,{className:"w-4 h-4"})})]})]},Re.id)})]}),u&&a.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl border border-slate-200 shadow-xl p-6 sticky top-6 max-h-[calc(100vh-3rem)] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Expense Details"}),a.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Title"}),a.jsx("p",{className:"text-lg font-black text-slate-900",children:u.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Company"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Qs,{src:Fe(u.companyId)?.logo,fallbackText:Fe(u.companyId)?.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Fe(u.companyId)?.name||"Unknown"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Amount"}),a.jsx("p",{className:"text-2xl font-black text-indigo-600",children:mt(u.amount)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Category"}),a.jsx("span",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold",children:u.category})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),a.jsxs("select",{value:u.status||"Pending",onChange:Re=>{const gt=Re.target.value;Ne(u.id,gt)},disabled:oe,className:`w-full px-3 py-1.5 rounded-lg text-sm font-bold border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${fe(u.status||"Pending")} ${oe?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]}),oe&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(jt,{className:"w-3 h-3 animate-spin text-indigo-600"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Updating..."})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:kt(u.date)})]}),u.description&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),a.jsx("p",{className:"text-sm text-slate-600",children:u.description})]}),u.receiptUrl&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Receipt"}),a.jsx("div",{className:"space-y-2",children:u.receiptMimeType?.startsWith("image/")?a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:u.receiptUrl,alt:u.receiptFilename||"Receipt",className:"w-full rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const Re=window.open();Re&&Re.document.write(`<img src="${u.receiptUrl}" style="max-width:100%;height:auto;" />`)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:a.jsx(yd,{className:"w-6 h-6 text-white drop-shadow-lg"})})]}):a.jsxs("a",{href:u.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors",children:[a.jsx(Ga,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1 truncate",children:u.receiptFilename||"Receipt"}),a.jsx(H0,{className:"w-4 h-4 text-slate-400"})]})})]}),a.jsx("div",{className:"pt-4 border-t border-slate-200",children:a.jsx("button",{onClick:()=>{f(u),ne(!0)},disabled:p,className:"w-full px-4 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Br,{className:"w-4 h-4"}),"Delete Expense"]})})})]})]})]}),J&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(Oj,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Add Expense"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Company Expense Management"})]})]}),a.jsx("button",{onClick:()=>{ee(!1),Le({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",receiptFile:null}),K(""),ie.current&&(ie.current.value="")},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(cr,{className:"w-6 h-6 text-slate-400"})})]}),a.jsxs("form",{onSubmit:ue,className:"p-8 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company *"}),a.jsxs("select",{required:!0,value:ce.companyId,onChange:Re=>Le({...ce,companyId:Re.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[a.jsx("option",{value:"",children:"Select Company"}),i.map(Re=>a.jsx("option",{value:Re.id,children:Re.name},Re.id))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"Expense title...",value:ce.title,onChange:Re=>Le({...ce,title:Re.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Amount *"}),a.jsx("input",{required:!0,type:"number",step:"0.01",min:"0",placeholder:"0.00",value:ce.amount,onChange:Re=>Le({...ce,amount:Re.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Category *"}),a.jsxs("button",{type:"button",onClick:()=>{w("select"),N(!0)},className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50 text-left flex items-center justify-between ${ce.category?"text-slate-900":"text-slate-400"}`,children:[a.jsx("span",{children:ce.category||"Select Category"}),a.jsx(_s,{className:"w-4 h-4 text-slate-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Date *"}),a.jsx("input",{required:!0,type:"date",value:ce.date,onChange:Re=>Le({...ce,date:Re.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Status"}),a.jsxs("select",{value:ce.status,onChange:Re=>Le({...ce,status:Re.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),a.jsx("textarea",{rows:3,placeholder:"Additional details...",value:ce.description,onChange:Re=>Le({...ce,description:Re.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Receipt (Image/PDF)"}),a.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:R?a.jsx(jt,{className:"w-5 h-5 animate-spin"}):U?a.jsx(gl,{className:"w-5 h-5"}):a.jsx($u,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:U?ce.receiptFile?.name||"Receipt uploaded":"Upload Receipt"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, PDF (Max 10MB)"})]}),a.jsx("input",{ref:ie,type:"file",accept:"image/*,.pdf",onChange:pe,disabled:R,className:"hidden"})]}),U&&ce.receiptFile?.type.startsWith("image/")&&a.jsx("div",{className:"mt-3",children:a.jsx("img",{src:U,alt:"Receipt preview",className:"w-full max-h-48 object-contain rounded-lg border border-slate-200"})}),U&&ce.receiptFile?.type.includes("pdf")&&a.jsxs("div",{className:"mt-3 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-center gap-3",children:[a.jsx(Ga,{className:"w-8 h-8 text-red-600 shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-red-900",children:ce.receiptFile.name}),a.jsx("p",{className:"text-xs text-red-700 mt-0.5",children:"PDF document ready to upload"})]}),a.jsx("button",{type:"button",onClick:()=>{K(""),Le(Re=>({...Re,receiptFile:null})),ie.current&&(ie.current.value="")},className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-all",children:a.jsx(cr,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:()=>{ee(!1),Le({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",receiptFile:null}),K(""),ie.current&&(ie.current.value="")},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:H||R,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:H?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Nn,{className:"w-4 h-4"}),"Add Expense"]})})]})]})]})}),te&&u&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Expense?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:u.title}),a.jsxs("p",{className:"text-xs text-slate-500",children:[mt(u.amount),"  ",Fe(u.companyId)?.name||"Unknown"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>{ne(!1),f(null)},className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:Be,disabled:p,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:p?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),b&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:j==="manage"?"Manage Categories":"Select Category"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:j==="manage"?"View and add expense categories":"Choose an expense category"})]}),a.jsx("button",{onClick:()=>{N(!1),P("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ks,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):j==="manage"?l.map(Re=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(ks,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:Re.name})]}),a.jsx(jn,{className:"w-5 h-5 text-emerald-600"})]},Re.id)):l.map(Re=>a.jsxs("button",{type:"button",onClick:()=>{Le({...ce,category:Re.name}),N(!1)},className:`w-full px-4 py-3 rounded-xl text-left transition-all flex items-center justify-between ${ce.category===Re.name?"bg-indigo-50 text-indigo-600 border-2 border-indigo-200":"bg-slate-50 text-slate-900 border-2 border-transparent hover:bg-slate-100"}`,children:[a.jsx("span",{className:"font-bold text-sm",children:Re.name}),ce.category===Re.name?a.jsx(jn,{className:"w-5 h-5 text-indigo-600"}):a.jsx(vd,{className:"w-5 h-5 text-slate-300"})]},Re.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New category name...",value:S,onChange:Re=>P(Re.target.value),onKeyDown:Re=>{Re.key==="Enter"&&S.trim()&&!A&&(Re.preventDefault(),Pe())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Pe,disabled:!S.trim()||A,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:A?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Nn,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})}),I&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Filter by Company"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Select one or more companies"})]}),a.jsx("button",{onClick:()=>B(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx("input",{type:"checkbox",checked:v.length===0,onChange:()=>{g([])},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:"All Companies"})]}),i.map(Re=>a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx("input",{type:"checkbox",checked:v.includes(Re.id),onChange:gt=>{gt.target.checked?g(ut=>[...ut,Re.id]):g(ut=>ut.filter(lt=>lt!==Re.id))},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx(Qs,{src:Re.logo,fallbackText:Re.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),a.jsx("span",{className:"font-bold text-sm text-slate-900 flex-1",children:Re.name})]},Re.id))]})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>{g([])},disabled:v.length===0,className:"px-4 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(cr,{className:"w-4 h-4"}),"Clear All"]}),a.jsxs("button",{onClick:()=>{B(!1),He()},className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:["Apply Filters (",v.length===0?"All":v.length,")"]})]})]})}),G&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"p-8 border-b border-slate-100",children:a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(Br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",E.length," Expense(s)?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]})}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Z(!1),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:nt,disabled:M,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete All"})]})]})})]})},d1e=({currentUser:e})=>{const{showSuccess:t,showError:r}=Ea(),[n,s]=z.useState([]),[i,o]=z.useState([]),[l,c]=z.useState([]),[u,f]=z.useState(new Date().getFullYear()),[d,m]=z.useState(""),[p,y]=z.useState(null),[v,g]=z.useState(!0),[b,N]=z.useState(!1),[j,w]=z.useState("yearly"),[S,P]=z.useState(!1),[A,T]=z.useState(!1),[I,B]=z.useState(null),[E,C]=z.useState(!1),[M,q]=z.useState(!1),[G,Z]=z.useState(null),[te,ne]=z.useState(!1),[J,ee]=z.useState(""),[H,O]=z.useState(!1),[R,W]=z.useState({year:new Date().getFullYear(),department:"",categories:[]}),U=e?.role==="Admin",K=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,oe=Array.from({length:5},(pe,ue)=>new Date().getFullYear()-2+ue),he=z.useCallback(async()=>{try{const ue=(await Mne())?.data||[];o(Array.isArray(ue)?ue:[])}catch(pe){console.error("[BUDGET] Error fetching departments:",pe)}},[]),ie=z.useCallback(async()=>{try{const ue=(await I7())?.data||[];c(Array.isArray(ue)?ue:[])}catch(pe){console.error("[BUDGET] Error fetching categories:",pe)}},[]),ce=z.useCallback(async()=>{g(!0);try{const pe={year:u};d&&(pe.department=d),console.log("[Budget] Fetching budgets with params:",pe);const Pe=(await Pne(pe))?.data||[];console.log("[Budget] Received budgets:",Pe),s(Array.isArray(Pe)?Pe:[])}catch(pe){console.error("[Budget] Error fetching budgets:",pe),r(pe.message||"Failed to load budgets")}finally{g(!1)}},[u,d,r]),Le=z.useCallback(async()=>{N(!0);try{const pe={year:u};d&&(pe.department=d),console.log("[Budget] Fetching tracking with params:",pe);const ue=await Fne(pe);console.log("[Budget] Received tracking:",ue?.data),y(ue?.data||null)}catch(pe){console.error("[Budget] Error fetching tracking:",pe),y(null)}finally{N(!1)}},[u,d]);z.useEffect(()=>{he(),ie()},[he,ie]),z.useEffect(()=>{ce(),Le()},[ce,Le]);const le=()=>{W({year:u,department:d,categories:l.map(pe=>({categoryId:pe.id,categoryName:pe.name,yearlyBudget:0,q1Budget:0,q2Budget:0,q3Budget:0,q4Budget:0}))})},He=async()=>{if(J.trim()){O(!0);try{const pe=await D7({name:J.trim()});if(pe?.data){const ue=pe.data;c(Pe=>[...Pe,ue]),ee(""),t("Category added successfully"),ie()}}catch(pe){pe.message?.includes("already exists")||pe.message?.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(pe.message||"Failed to add category")}finally{O(!1)}}},Fe=async()=>{if(!K){r("User not found");return}if(R.categories.length===0){r("Please add at least one category");return}if(R.categories.reduce((ue,Pe)=>ue+Pe.yearlyBudget,0)===0){r("Total budget cannot be zero");return}C(!0);try{await Ine({year:R.year,department:R.department||null,categories:R.categories,createdBy:K}),t("Budget created successfully"),P(!1),ce(),Le()}catch(ue){r(ue.message||"Failed to create budget")}finally{C(!1)}},fe=async()=>{if(!(!I||!K)){C(!0);try{await Dne(I.id,{categories:R.categories,updatedBy:K}),t("Budget updated successfully"),T(!1),B(null),ce(),Le()}catch(pe){r(pe.message||"Failed to update budget")}finally{C(!1)}}},Q=async pe=>{q(!0);try{await Lne(pe.id),t("Budget deleted successfully"),Z(null),ce(),Le()}catch(ue){r(ue.message||"Failed to delete budget")}finally{q(!1)}},we=pe=>pe>=1e6?`$${(pe/1e6).toFixed(1)}M`:pe>=1e3?`$${(pe/1e3).toFixed(1)}k`:`$${pe.toLocaleString()}`,ve=pe=>pe>=100?"text-red-600":pe>=80?"text-amber-600":"text-emerald-600",Ee=pe=>pe>=100?"bg-red-500":pe>=80?"bg-amber-500":"bg-emerald-500";return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Budget Management"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Track spending against allocated budgets"})]}),U&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>ne(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[a.jsx(ks,{className:"w-4 h-4"})," Manage Categories"]}),a.jsxs("button",{onClick:()=>{le(),P(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx(Nn,{className:"w-4 h-4"})," Create Budget"]})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Year"}),a.jsx("select",{value:u,onChange:pe=>f(parseInt(pe.target.value)),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:oe.map(pe=>a.jsx("option",{value:pe,children:pe},pe))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),a.jsxs("select",{value:d,onChange:pe=>m(pe.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Departments"}),i.map(pe=>a.jsx("option",{value:pe,children:pe},pe))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"View Mode"}),a.jsx("div",{className:"flex gap-2",children:["yearly","quarterly","monthly"].map(pe=>a.jsx("button",{onClick:()=>w(pe),className:`flex-1 px-3 py-3 rounded-xl text-xs font-black uppercase transition-all ${j===pe?"bg-indigo-600 text-white shadow-lg":"bg-slate-50 text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:pe},pe))})]})]})}),!v&&n.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:p&&p.hasBudget!==!1?"Current Budget":"Available Budgets"}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1",children:[n.length," budget",n.length!==1?"s":""," for selected filters"]})]}),p&&p.hasBudget!==!1&&U&&a.jsxs("button",{onClick:()=>{const pe=n[0];B(pe),W({year:pe.year,department:pe.department||"",categories:pe.categories.map(ue=>({...ue,q1Budget:ue.q1Budget||0,q2Budget:ue.q2Budget||0,q3Budget:ue.q3Budget||0,q4Budget:ue.q4Budget||0}))}),T(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[a.jsx(vc,{className:"w-4 h-4"})," Edit Budget"]})]})}),a.jsx("div",{className:"divide-y divide-slate-100",children:n.map(pe=>a.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900",children:[pe.year," ",pe.department&&`- ${pe.department}`]}),!pe.department&&a.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-600 text-[10px] font-black uppercase rounded-lg border border-purple-200",children:"Global"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Budget"}),a.jsx("p",{className:"text-lg font-black text-indigo-600",children:we(pe.totalBudget)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Categories"}),a.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[pe.categories.length," configured"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Created"}),a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:pe.createdAt?new Date(pe.createdAt).toLocaleDateString():"N/A"})]})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:a.jsxs("details",{className:"group",children:[a.jsxs("summary",{className:"text-xs font-bold text-indigo-600 cursor-pointer hover:text-indigo-700 list-none flex items-center gap-2",children:[a.jsx(_s,{className:"w-4 h-4 transition-transform group-open:rotate-90"}),"View category breakdown"]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:pe.categories.map(ue=>a.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ue.categoryName}),a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Yearly: ",a.jsx("span",{className:"font-black",children:we(ue.yearlyBudget)})]})]},ue.categoryId))})]})})]}),U&&!(p&&p.hasBudget!==!1)&&a.jsxs("button",{onClick:()=>{B(pe),W({year:pe.year,department:pe.department||"",categories:pe.categories.map(ue=>({...ue,q1Budget:ue.q1Budget||0,q2Budget:ue.q2Budget||0,q3Budget:ue.q3Budget||0,q4Budget:ue.q4Budget||0}))}),T(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[a.jsx(vc,{className:"w-4 h-4"})," View/Edit"]})]})},pe.id))})]}),p&&p.hasBudget!==!1&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center",children:a.jsx(df,{className:"w-5 h-5 text-indigo-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Budget"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:we(p.totalBudget)})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center",children:a.jsx(nf,{className:"w-5 h-5 text-blue-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Spent"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:we(p.totalSpent)})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl ${p.totalRemaining>=0?"bg-emerald-50":"bg-red-50"} flex items-center justify-center`,children:p.totalRemaining>=0?a.jsx(jn,{className:"w-5 h-5 text-emerald-600"}):a.jsx(sa,{className:"w-5 h-5 text-red-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Remaining"})]}),a.jsx("h3",{className:`text-2xl font-black ${p.totalRemaining>=0?"text-emerald-600":"text-red-600"}`,children:we(Math.abs(p.totalRemaining))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-50 flex items-center justify-center",children:a.jsx(Bm,{className:"w-5 h-5 text-purple-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"% Used"})]}),a.jsxs("h3",{className:`text-2xl font-black ${ve(p.totalPercentUsed)}`,children:[p.totalPercentUsed.toFixed(1),"%"]})]})]}),p&&p.isOverBudget&&a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 flex items-start gap-4 animate-in slide-in-from-top-2",children:[a.jsx(s0,{className:"w-6 h-6 text-red-600 shrink-0 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-black text-red-900 mb-1",children:"Budget Exceeded"}),a.jsxs("p",{className:"text-sm text-red-700",children:["You are ",a.jsx("span",{className:"font-black",children:we(p.overBudgetAmount)})," over budget (",p.totalPercentUsed.toFixed(1),"% of total budget used)."]})]})]}),!v&&(!p||p.hasBudget===!1)&&a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[a.jsx(eD,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Budget Set"}),a.jsx("p",{className:"text-sm text-slate-500 mb-6",children:U?`No budget has been set for ${u}${d?` - ${d}`:""}. Create one to start tracking.`:`No budget available for ${u}${d?` - ${d}`:""}.`}),U&&a.jsxs("button",{onClick:()=>{le(),P(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[a.jsx(Nn,{className:"w-4 h-4"})," Create Budget"]})]}),p&&p.hasBudget!==!1&&p.categories&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:a.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Spending vs Budget by Category"})}),a.jsx("div",{className:"divide-y divide-slate-100",children:p.categories.map(pe=>a.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:pe.categoryName}),a.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.jsxs("span",{className:"text-slate-500 font-medium",children:["Budget: ",a.jsx("span",{className:"font-black text-slate-900",children:we(pe.yearlyBudget)})]}),a.jsxs("span",{className:"text-slate-500 font-medium",children:["Spent: ",a.jsx("span",{className:"font-black text-slate-900",children:we(pe.yearlySpent)})]}),a.jsxs("span",{className:`font-black ${ve(pe.yearlyPercentUsed)}`,children:[pe.yearlyPercentUsed.toFixed(1),"%"]})]})]}),pe.isOverBudget&&a.jsxs("div",{className:"px-3 py-1 bg-red-50 text-red-600 text-xs font-black uppercase rounded-lg border border-red-200",children:["Over by ",we(pe.overBudgetAmount)]})]}),a.jsxs("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:[a.jsx("div",{className:`absolute left-0 top-0 h-full transition-all ${Ee(pe.yearlyPercentUsed)}`,style:{width:`${Math.min(pe.yearlyPercentUsed,100)}%`}}),pe.yearlyPercentUsed>100&&a.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500/30 border-r-2 border-red-600",style:{width:"100%"}})]}),j==="quarterly"&&a.jsx("div",{className:"grid grid-cols-4 gap-3 mt-4 pt-4 border-t border-slate-100",children:["q1","q2","q3","q4"].map((ue,Pe)=>{const Ne=pe.quarters[ue];return a.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[a.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:["Q",Pe+1]}),a.jsxs("p",{className:"text-xs text-slate-600 font-medium",children:[a.jsx("span",{className:"font-black text-slate-900",children:we(Ne.spent)})," "," / ",we(Ne.budget)]}),a.jsxs("p",{className:`text-xs font-black mt-1 ${ve(Ne.percentUsed)}`,children:[Ne.percentUsed.toFixed(0),"%"]})]},ue)})})]},pe.categoryId))})]}),S&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>P(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(df,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Create Budget"}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Set budget allocations for ",R.year]})]})]}),a.jsx("button",{onClick:()=>P(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(cr,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Year ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{value:R.year,onChange:pe=>W(ue=>({...ue,year:parseInt(pe.target.value)})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:oe.map(pe=>a.jsx("option",{value:pe,children:pe},pe))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),a.jsxs("select",{value:R.department,onChange:pe=>W(ue=>({...ue,department:pe.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"All Departments"}),i.map(pe=>a.jsx("option",{value:pe,children:pe},pe))]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(ks,{className:"w-4 h-4 text-indigo-600"})," Category Budgets"]}),a.jsx("div",{className:"space-y-4",children:R.categories.map((pe,ue)=>a.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[a.jsx("h4",{className:"font-black text-slate-900 mb-3",children:pe.categoryName}),a.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),a.jsx("input",{type:"number",value:pe.yearlyBudget||"",onChange:Pe=>{const Ne=[...R.categories];Ne[ue].yearlyBudget=parseFloat(Pe.target.value)||0,W(Be=>({...Be,categories:Ne}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Pe,Ne)=>a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ne+1]}),a.jsx("input",{type:"number",value:pe[Pe]||"",onChange:Be=>{const nt=[...R.categories];nt[ue][Pe]=parseFloat(Be.target.value)||0,W(mt=>({...mt,categories:nt}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Pe))]})]},pe.categoryId))}),a.jsx("div",{className:"mt-6 p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),a.jsx("span",{className:"text-2xl font-black text-indigo-600",children:we(R.categories.reduce((pe,ue)=>pe+ue.yearlyBudget,0))})]})})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>P(!1),disabled:E,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Fe,disabled:E,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:E?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-4 h-4"}),"Create Budget"]})})]})]})})]}),A&&I&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{T(!1),B(null)}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(vc,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Edit Budget"}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Update budget allocations for ",I.year,I.department&&` - ${I.department}`]})]})]}),a.jsx("button",{onClick:()=>{T(!1),B(null)},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(cr,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-4",children:[R.categories.map((pe,ue)=>a.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[a.jsx("h4",{className:"font-black text-slate-900 mb-3",children:pe.categoryName}),a.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),a.jsx("input",{type:"number",value:pe.yearlyBudget||"",onChange:Pe=>{const Ne=[...R.categories];Ne[ue].yearlyBudget=parseFloat(Pe.target.value)||0,W(Be=>({...Be,categories:Ne}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Pe,Ne)=>a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ne+1]}),a.jsx("input",{type:"number",value:pe[Pe]||"",onChange:Be=>{const nt=[...R.categories];nt[ue][Pe]=parseFloat(Be.target.value)||0,W(mt=>({...mt,categories:nt}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Pe))]})]},pe.categoryId)),a.jsx("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),a.jsx("span",{className:"text-2xl font-black text-indigo-600",children:we(R.categories.reduce((pe,ue)=>pe+ue.yearlyBudget,0))})]})})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsxs("button",{onClick:()=>Z(I),disabled:E,className:"px-6 py-3 border-2 border-red-200 text-red-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-50 transition-all disabled:opacity-50 flex items-center gap-2",children:[a.jsx(Br,{className:"w-4 h-4"})," Delete"]}),a.jsx("button",{onClick:()=>{T(!1),B(null)},disabled:E,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:fe,disabled:E,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:E?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ii,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]}),G&&a.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>Z(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(s0,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Budget?"}),a.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Are you sure you want to delete the budget for ",G.year,G.department&&` - ${G.department}`,"? This action cannot be undone."]})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>Z(null),disabled:M,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:()=>Q(G),disabled:M,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Br,{className:"w-4 h-4"}),"Delete Budget"]})})]})]})})]}),te&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Categories"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add budget/expense categories"})]}),a.jsx("button",{onClick:()=>{ne(!1),ee("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ks,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):l.map(pe=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(ks,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:pe.name})]}),a.jsx(jn,{className:"w-5 h-5 text-emerald-600"})]},pe.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New category name...",value:J,onChange:pe=>ee(pe.target.value),onKeyDown:pe=>{pe.key==="Enter"&&J.trim()&&!H&&(pe.preventDefault(),He())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:He,disabled:!J.trim()||H,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:H?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Nn,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})})]})},JI=["Draft","Pending Signature","Signed","Expired","Terminated"],f1e=({currentUser:e})=>{const{showSuccess:t,showError:r}=Ea(),[n,s]=z.useState([]),[i,o]=z.useState([]),[l,c]=z.useState([]),[u,f]=z.useState([]),[d,m]=z.useState(null),[p,y]=z.useState(!0),[v,g]=z.useState(!1),[b,N]=z.useState(!1),[j,w]=z.useState(""),[S,P]=z.useState(""),[A,T]=z.useState(""),[I,B]=z.useState(!1),[E,C]=z.useState(!1),[M,q]=z.useState(!1),[G,Z]=z.useState(!1),te=z.useRef(null),[ne,J]=z.useState(!1),[ee,H]=z.useState(!1),[O,R]=z.useState(!1),[W,U]=z.useState(!1),[K,oe]=z.useState(!1),[he,ie]=z.useState(""),[ce,Le]=z.useState(!1),[le,He]=z.useState([]),[Fe,fe]=z.useState(!1),[Q,we]=z.useState({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),ve=e?.id||JSON.parse(localStorage.getItem("user_data")||"{}").id,Ee=z.useCallback(async()=>{y(!0);try{if(!ve){s([]),y(!1);return}const[qe,bt,Nr,rr]=await Promise.all([L7({userId:ve}),Cd(),fg(),$ne()]);s(qe?.data||[]),o(bt?.data||[]),c(Nr?.data||[]),f(rr?.data||[])}catch(qe){r(qe.message||"Failed to load contracts")}finally{y(!1)}},[ve,r]);z.useEffect(()=>{Ee()},[Ee]);const pe=async()=>{if(d){fe(!0);try{const qe=await D3("contract",d.id);He(qe?.data||[])}catch(qe){console.error("[CONTRACTS] Failed to fetch contract activities:",qe),He([])}finally{fe(!1)}}};z.useEffect(()=>{d?pe():He([])},[d?.id]),z.useEffect(()=>{(async()=>{if(ve)try{await WP({userId:ve}),R(!0)}catch{R(!1)}})()},[ve]);const ue=async()=>{if(!ve){r("User not authenticated");return}U(!0);try{let qe;try{qe=await WP({userId:ve})}catch(Er){throw Er.message?.includes("Failed to fetch")||Er.message?.includes("ERR_CONNECTION_REFUSED")||Er.message?.includes("NetworkError")?new Error("Backend server is not running. Please start the server and try again."):Er}const{accessToken:bt,apiKey:Nr}=qe?.data||{};if(!bt)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");console.log("Google Picker - Access Token:",bt?"Present":"Missing"),console.log("Google Picker - API Key:",Nr?`Present (${Nr.substring(0,10)}...)`:"Not using (optional with OAuth)"),console.log("Full token response:",qe?.data),await new Promise((Er,or)=>{let Ut=0;const wr=50,kr=setInterval(()=>{Ut++,window.google&&window.google.picker?(clearInterval(kr),Er()):Ut>=wr&&(clearInterval(kr),or(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const rr=window.google.picker;new rr.PickerBuilder().setOAuthToken(bt).setCallback(Er=>{U(!1);try{if(console.log("Google Picker Callback - Full response data:",JSON.stringify(Er,null,2)),console.log("Google Picker Response Action:",Er[rr.Response.ACTION]),console.log("Google Picker Action Constants:",{PICKED:rr.Action.PICKED,CANCEL:rr.Action.CANCEL}),Er[rr.Response.ACTION]===rr.Action.PICKED){const or=Er[rr.Response.DOCUMENTS];if(console.log("Google Picker - Documents array:",or),console.log("Google Picker - Number of documents:",or?.length),or&&or.length>0){const Ut=or[0];console.log("Google Picker - Selected file data:",JSON.stringify(Ut,null,2)),console.log("Google Picker - File ID:",Ut.id),console.log("Google Picker - File Name:",Ut.name),console.log("Google Picker - File MIME Type:",Ut.mimeType),console.log("Google Picker - File URL:",Ut.url),console.log("Google Picker - File Service ID:",Ut.serviceId),Pe(Ut)}else console.error("Google Picker - No documents in response"),r("No file selected")}else if(Er[rr.Response.ACTION]!==rr.Action.CANCEL){const or=Er[rr.Response.ERROR];or&&(console.error("Google Picker Error:",or),console.error("Error details:",JSON.stringify(Er,null,2)),or===rr.ResponseError.ACCESS_DENIED?r("Access denied. Please reconnect your Google account in Settings."):or===rr.ResponseError.INVALID_CREDENTIALS?r("Invalid credentials. Please reconnect your Google account."):or===rr.ResponseError.INVALID_DEVELOPER_KEY?r("Google Picker configuration error. Please try again."):r(`Google Picker error: ${or}. Check browser console for details.`))}}catch(or){console.error("Error handling picker callback:",or),r("Failed to process selected file")}}).addView(rr.ViewId.DOCS).enableFeature(rr.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(qe){U(!1),console.error("Google Drive Picker Error:",qe),qe.message?.includes("Backend server is not running")?r("Backend server is not running. Please start the server on port 8050 and try again."):qe.message?.includes("not connected")||qe.message?.includes("GOOGLE_NOT_CONNECTED")?r("Google Drive not connected. Please connect your Google account in Settings."):qe.message?.includes("Failed to fetch")||qe.message?.includes("ERR_CONNECTION_REFUSED")?r("Cannot connect to server. Please ensure the backend server is running on port 8050."):r(qe.message||"Failed to open Google Drive picker. Please check your connection and try again.")}},Pe=async qe=>{if(ve){console.log("handleGoogleDriveFileSelected called with file:",JSON.stringify(qe,null,2)),console.log("File data from Google Picker:",{id:qe.id,name:qe.name,url:qe.url,iconUrl:qe.iconUrl,mimeType:qe.mimeType,serviceId:qe.serviceId,type:qe.type,sizeBytes:qe.sizeBytes});try{const bt=qe.url||qe.embedUrl||"",Nr=qe.iconUrl||"",rr=qe.sizeBytes?parseInt(qe.sizeBytes):0;console.log("Storing file data:",{googleDriveFileId:qe.id,publicUrl:bt,iconUrl:Nr,fileName:qe.name,fileMimeType:qe.mimeType}),we(Lr=>({...Lr,isGoogleDriveLinked:!0,googleDriveFileId:qe.id,googleDriveWebViewLink:bt,googleDriveDownloadLink:bt,googleDriveIconUrl:Nr,fileName:qe.name||"Untitled",fileMimeType:qe.mimeType||"",fileSize:rr,fileUrl:bt,file:null})),t("File attached from Google Drive")}catch(bt){console.error("Error handling Google Drive file selection:",bt),r(bt.message||"Failed to attach file from Google Drive")}}},Ne=async()=>{if(he.trim()){Le(!0);try{const qe=await zne({name:he.trim()});if(qe?.data){const bt=qe.data;f(Nr=>[...Nr,bt]),ie(""),t("Document type added successfully")}}catch(qe){qe.message?.includes("already exists")||qe.message?.includes("TYPE_EXISTS")?r("Document type with this name already exists"):r(qe.message||"Failed to add document type")}finally{Le(!1)}}},Be=qe=>{const bt=qe.target.files?.[0];if(!bt)return;if(bt.size>10*1024*1024){r("File size must be less than 10MB");return}Z(!0);const Nr=new FileReader;Nr.onload=()=>{const rr=Nr.result;we(Lr=>({...Lr,file:bt,fileUrl:rr,fileName:bt.name,fileMimeType:bt.type,fileSize:bt.size})),Z(!1)},Nr.onerror=()=>{r("Failed to read file"),Z(!1)},Nr.readAsDataURL(bt)},nt=async()=>{if(!Q.fileUrl||!ve){r("Please select a file first");return}J(!0);try{const qe=await Hne({fileName:Q.fileName,fileContent:Q.fileUrl,fileMimeType:Q.fileMimeType,userId:ve});we(bt=>({...bt,isGoogleDriveLinked:!0,googleDriveFileId:qe.data.id,googleDriveWebViewLink:qe.data.webViewLink,googleDriveDownloadLink:qe.data.webContentLink})),t("File uploaded to Google Drive successfully")}catch(qe){r(qe.message||"Failed to upload to Google Drive")}finally{J(!1)}},mt=async(qe,bt)=>{H(!0);try{const Nr=await Wne({contractId:qe,userId:ve,title:bt});t("Signature document created in Google Docs"),Ee(),window.open(Nr.data.documentLink,"_blank")}catch(Nr){r(Nr.message||"Failed to create signature document")}finally{H(!1)}},kt=async()=>{if(!Q.title||!Q.documentType||!Q.contractParty){r("Please fill in all required fields");return}q(!0);try{await Rne({title:Q.title,documentType:Q.documentType,contractParty:Q.contractParty,companyId:Q.companyId||null,contactId:Q.contactId||null,expirationDate:Q.expirationDate||null,renewalDate:Q.renewalDate||null,signedDate:Q.signedDate||null,status:Q.status,description:Q.description||null,tags:Q.tags,requiresSignature:Q.requiresSignature,signatureStatus:Q.requiresSignature?"Pending":"Not Required",fileUrl:Q.fileUrl||null,fileName:Q.fileName||null,fileMimeType:Q.fileMimeType||null,fileSize:Q.fileSize||null,isGoogleDriveLinked:Q.isGoogleDriveLinked,googleDriveFileId:Q.googleDriveFileId||null,googleDriveWebViewLink:Q.googleDriveWebViewLink||null,googleDriveDownloadLink:Q.googleDriveDownloadLink||null,googleDriveIconUrl:Q.googleDriveIconUrl||null,userId:ve}),t("Contract created successfully"),B(!1),lt(),Ee()}catch(qe){r(qe.message||"Failed to create contract")}finally{q(!1)}},Re=async()=>{if(d){q(!0);try{await Bne(d.id,{title:Q.title,documentType:Q.documentType,contractParty:Q.contractParty,companyId:Q.companyId||null,contactId:Q.contactId||null,expirationDate:Q.expirationDate||null,renewalDate:Q.renewalDate||null,signedDate:Q.signedDate||null,status:Q.status,description:Q.description||null,tags:Q.tags,requiresSignature:Q.requiresSignature,fileUrl:Q.fileUrl||null,fileName:Q.fileName||null,fileMimeType:Q.fileMimeType||null,fileSize:Q.fileSize||null,isGoogleDriveLinked:Q.isGoogleDriveLinked,googleDriveFileId:Q.googleDriveFileId||null,googleDriveWebViewLink:Q.googleDriveWebViewLink||null,googleDriveDownloadLink:Q.googleDriveDownloadLink||null,googleDriveIconUrl:Q.googleDriveIconUrl||null}),t("Contract updated successfully"),C(!1),m(null),lt(),Ee()}catch(qe){r(qe.message||"Failed to update contract")}finally{q(!1)}}},gt=async()=>{if(d){g(!0);try{await Une(d.id),t("Contract deleted successfully"),N(!1),m(null),Ee()}catch(qe){r(qe.message||"Failed to delete contract")}finally{g(!1)}}},ut=async qe=>{try{await qne(qe.id,{signedBy:ve,signedDate:new Date().toISOString()}),t("Contract marked as signed"),Ee()}catch(bt){r(bt.message||"Failed to mark contract as signed")}},lt=()=>{we({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),te.current&&(te.current.value="")},pr=qe=>{m(qe),we({title:qe.title,documentType:qe.documentType,contractParty:qe.contractParty,companyId:qe.companyId||"",contactId:qe.contactId||"",expirationDate:qe.expirationDate||"",renewalDate:qe.renewalDate||"",signedDate:qe.signedDate||"",status:qe.status,description:qe.description||"",tags:qe.tags||[],requiresSignature:qe.requiresSignature,file:null,fileUrl:qe.fileUrl||"",fileName:qe.fileName||"",fileMimeType:qe.fileMimeType||"",fileSize:qe.fileSize||0,isGoogleDriveLinked:qe.isGoogleDriveLinked,googleDriveFileId:qe.googleDriveFileId||"",googleDriveWebViewLink:qe.googleDriveWebViewLink||"",googleDriveDownloadLink:qe.googleDriveDownloadLink||"",googleDriveIconUrl:qe.googleDriveIconUrl||""}),C(!0)},tr=qe=>{switch(qe){case"Signed":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"Pending Signature":return"bg-amber-50 text-amber-600 border-amber-200";case"Draft":return"bg-slate-50 text-slate-600 border-slate-200";case"Expired":return"bg-red-50 text-red-600 border-red-200";case"Terminated":return"bg-gray-50 text-gray-600 border-gray-200";default:return"bg-slate-50 text-slate-600 border-slate-200"}},ft=qe=>{switch(qe){case"Signed":return a.jsx(jn,{className:"w-4 h-4"});case"Pending Signature":return a.jsx(As,{className:"w-4 h-4"});case"Draft":return a.jsx(Ga,{className:"w-4 h-4"});case"Expired":return a.jsx(sa,{className:"w-4 h-4"});case"Terminated":return a.jsx(cr,{className:"w-4 h-4"});default:return a.jsx(Ga,{className:"w-4 h-4"})}},$t=n.filter(qe=>{const bt=qe.title.toLowerCase().includes(j.toLowerCase())||qe.contractParty.toLowerCase().includes(j.toLowerCase())||qe.documentType.toLowerCase().includes(j.toLowerCase()),Nr=!S||qe.status===S,rr=!A||qe.documentType===A;return bt&&Nr&&rr}),er={total:n.length,signed:n.filter(qe=>qe.status==="Signed").length,pending:n.filter(qe=>qe.status==="Pending Signature").length,expired:n.filter(qe=>qe.status==="Expired").length};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Contracts & Legal Documents"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Manage contracts with e-signature and Google Drive integration"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>oe(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[a.jsx(ks,{className:"w-4 h-4"})," Manage Document Types"]}),a.jsxs("button",{onClick:()=>{lt(),B(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx(Nn,{className:"w-4 h-4"})," Add Contract"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Ga,{className:"w-5 h-5 text-indigo-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:er.total})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(jn,{className:"w-5 h-5 text-emerald-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Signed"})]}),a.jsx("h3",{className:"text-2xl font-black text-emerald-600",children:er.signed})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(As,{className:"w-5 h-5 text-amber-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),a.jsx("h3",{className:"text-2xl font-black text-amber-600",children:er.pending})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(sa,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Expired"})]}),a.jsx("h3",{className:"text-2xl font-black text-red-600",children:er.expired})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(Sd,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:j,onChange:qe=>w(qe.target.value),placeholder:"Search contracts...",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500"})]}),a.jsxs("select",{value:S,onChange:qe=>P(qe.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Statuses"}),JI.map(qe=>a.jsx("option",{value:qe,children:qe},qe))]}),a.jsxs("select",{value:A,onChange:qe=>T(qe.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Types"}),u.map(qe=>a.jsx("option",{value:qe.name,children:qe.name},qe.id))]})]})}),p?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(jt,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):$t.length===0?a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[a.jsx(Ga,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No contracts found"}),a.jsx("p",{className:"text-sm text-slate-500 mb-6",children:j||S||A?"Try adjusting your filters":"Create your first contract to get started"}),!j&&!S&&!A&&a.jsxs("button",{onClick:()=>{lt(),B(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[a.jsx(Nn,{className:"w-4 h-4"})," Add Contract"]})]}):a.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-100",children:$t.map(qe=>a.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>m(qe),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-base font-black text-slate-900",children:qe.title}),a.jsxs("span",{className:`px-2 py-1 text-xs font-black uppercase rounded-lg border ${tr(qe.status)} flex items-center gap-1`,children:[ft(qe.status),qe.status]}),qe.isGoogleDriveLinked&&a.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs font-black uppercase rounded-lg border border-blue-200 flex items-center gap-1",children:[qe.googleDriveIconUrl?a.jsx("img",{src:qe.googleDriveIconUrl,alt:"File type",className:"w-3 h-3",onError:bt=>{bt.target.style.display="none"}}):a.jsx(dm,{className:"w-3 h-3"}),"Drive"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(ks,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-medium",children:qe.documentType})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(vl,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-medium",children:qe.contractParty})]}),qe.expirationDate&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(ka,{className:"w-4 h-4 text-slate-400"}),a.jsxs("span",{className:"font-medium",children:["Expires: ",new Date(qe.expirationDate).toLocaleDateString()]})]}),qe.requiresSignature&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[a.jsx(Dv,{className:"w-4 h-4"}),a.jsx("span",{className:"font-bold",children:qe.signatureStatus})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[qe.googleDriveWebViewLink&&a.jsx("a",{href:qe.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",onClick:bt=>bt.stopPropagation(),className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-all",title:"View in Google Drive",children:a.jsx(Ti,{className:"w-4 h-4"})}),a.jsx("button",{onClick:bt=>{bt.stopPropagation(),pr(qe)},className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:a.jsx(vc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:bt=>{bt.stopPropagation(),m(qe),N(!0)},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:a.jsx(Br,{className:"w-4 h-4"})})]})]})},qe.id))})}),(I||E)&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{B(!1),C(!1),lt()}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(Ga,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:I?"Add Contract":"Edit Contract"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:I?"Create a new contract with metadata and documents":"Update contract details"})]})]}),a.jsx("button",{onClick:()=>{B(!1),C(!1),lt()},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(cr,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Q.title,onChange:qe=>we(bt=>({...bt,title:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"e.g., Service Agreement with Acme Corp"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Document Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:Q.documentType,onChange:qe=>we(bt=>({...bt,documentType:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"Select type"}),u.map(qe=>a.jsx("option",{value:qe.name,children:qe.name},qe.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Party ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Q.contractParty,onChange:qe=>we(bt=>({...bt,contractParty:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"Other party name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Company"}),a.jsxs("select",{value:Q.companyId,onChange:qe=>we(bt=>({...bt,companyId:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"None"}),i.map(qe=>a.jsx("option",{value:qe.id,children:qe.name},qe.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Contact"}),a.jsxs("select",{value:Q.contactId,onChange:qe=>we(bt=>({...bt,contactId:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"None"}),l.map(qe=>a.jsx("option",{value:qe.id,children:qe.name},qe.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Expiration Date"}),a.jsx("input",{type:"date",value:Q.expirationDate,onChange:qe=>we(bt=>({...bt,expirationDate:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Renewal Date"}),a.jsx("input",{type:"date",value:Q.renewalDate,onChange:qe=>we(bt=>({...bt,renewalDate:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Signed Date"}),a.jsx("input",{type:"date",value:Q.signedDate,onChange:qe=>we(bt=>({...bt,signedDate:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),a.jsx("select",{value:Q.status,onChange:qe=>we(bt=>({...bt,status:qe.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:JI.map(qe=>a.jsx("option",{value:qe,children:qe},qe))})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:Q.requiresSignature,onChange:qe=>we(bt=>({...bt,requiresSignature:qe.target.checked})),className:"w-5 h-5 rounded border-2 border-slate-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),a.jsx("span",{className:"text-sm font-bold text-slate-900",children:"Requires E-Signature"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),a.jsx("textarea",{value:Q.description,onChange:qe=>we(bt=>({...bt,description:qe.target.value})),rows:3,className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none",placeholder:"Add notes or description..."})]}),(I||E)&&a.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx($u,{className:"w-4 h-4 text-indigo-600"})," Document Upload"]}),a.jsx("input",{ref:te,type:"file",onChange:Be,className:"hidden",accept:".pdf,.doc,.docx,.txt"}),!Q.fileUrl&&!Q.isGoogleDriveLinked?a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>te.current?.click(),disabled:G,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600",children:G?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx($u,{className:"w-4 h-4"}),"Choose File"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-px bg-slate-200"}),a.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"OR"}),a.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),a.jsx("button",{onClick:ue,disabled:!O||W,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:W?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Opening Google Drive..."]}):a.jsxs(a.Fragment,{children:[a.jsx(dm,{className:"w-4 h-4"}),"Attach from Google Drive"]})})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[Q.isGoogleDriveLinked&&Q.googleDriveIconUrl?a.jsx("img",{src:Q.googleDriveIconUrl,alt:"File type icon",className:"w-5 h-5",onError:qe=>{qe.target.style.display="none";const bt=document.createElement("div");bt.innerHTML='<svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>',qe.target.parentNode?.appendChild(bt)}}):Q.isGoogleDriveLinked?a.jsx(dm,{className:"w-5 h-5 text-blue-600"}):a.jsx(FB,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Q.fileName}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Q.fileSize>0&&a.jsxs("p",{className:"text-xs text-slate-500",children:[(Q.fileSize/1024).toFixed(1)," KB"]}),Q.isGoogleDriveLinked&&a.jsxs(a.Fragment,{children:[Q.fileSize>0&&a.jsx("span",{className:"text-slate-300",children:""}),a.jsx("span",{className:"text-xs text-blue-600 font-bold",children:"Google Drive"})]})]})]})]}),a.jsx("button",{onClick:()=>{we(qe=>({...qe,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""})),te.current&&(te.current.value="")},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:a.jsx(cr,{className:"w-4 h-4"})})]}),!Q.isGoogleDriveLinked&&Q.fileUrl&&a.jsx("button",{onClick:nt,disabled:ne,className:"w-full py-3 bg-blue-600 text-white font-bold text-sm rounded-xl hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:ne?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Uploading to Drive..."]}):a.jsxs(a.Fragment,{children:[a.jsx(dm,{className:"w-4 h-4"}),"Upload to Google Drive"]})}),Q.isGoogleDriveLinked&&Q.googleDriveWebViewLink&&a.jsxs("a",{href:Q.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all flex items-center justify-center gap-2 text-sm font-bold text-blue-900",children:[Q.googleDriveIconUrl?a.jsx("img",{src:Q.googleDriveIconUrl,alt:"File type",className:"w-4 h-4",onError:qe=>{qe.target.style.display="none"}}):a.jsx(Ti,{className:"w-4 h-4"}),"View in Google Drive"]})]})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>{B(!1),C(!1),lt()},disabled:M,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:I?kt:Re,disabled:M,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),I?"Creating...":"Updating..."]}):a.jsx(a.Fragment,{children:I?"Create Contract":"Update Contract"})})]})]})})]}),d&&!E&&!b&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>m(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:d.title}),a.jsxs("span",{className:`px-3 py-1 text-xs font-black uppercase rounded-lg border ${tr(d.status)} flex items-center gap-1`,children:[ft(d.status),d.status]})]}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[d.documentType," - ",d.contractParty]})]}),a.jsx("button",{onClick:()=>m(null),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(cr,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.expirationDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Expiration"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(d.expirationDate).toLocaleDateString()})]}),d.renewalDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Renewal"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(d.renewalDate).toLocaleDateString()})]}),d.signedDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Signed"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(d.signedDate).toLocaleDateString()})]})]}),d.description&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Description"}),a.jsx("p",{className:"text-sm text-slate-600",children:d.description})]}),(d.fileUrl||d.isGoogleDriveLinked)&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Documents"}),a.jsxs("div",{className:"space-y-2",children:[d.fileName&&a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[d.isGoogleDriveLinked&&d.googleDriveIconUrl?a.jsx("img",{src:d.googleDriveIconUrl,alt:"File type",className:"w-5 h-5",onError:qe=>{qe.target.style.display="none"}}):a.jsx(Ga,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:d.fileName}),d.fileSize&&a.jsxs("p",{className:"text-xs text-slate-500",children:[(d.fileSize/1024).toFixed(1)," KB"]})]})]}),d.fileUrl&&a.jsx("a",{href:d.fileUrl,download:d.fileName,className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:a.jsx(H0,{className:"w-4 h-4"})})]}),d.isGoogleDriveLinked&&d.googleDriveWebViewLink&&a.jsx("a",{href:d.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(dm,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"text-sm font-bold text-blue-900",children:"View in Google Drive"})]}),a.jsx(Ti,{className:"w-4 h-4 text-blue-600"})]})})]})]}),d.requiresSignature&&a.jsxs("div",{className:"border-2 border-amber-200 bg-amber-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(Dv,{className:"w-5 h-5 text-amber-600"}),a.jsx("h3",{className:"text-sm font-black text-amber-900",children:"E-Signature Required"})]}),a.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:["Status: ",a.jsx("span",{className:"font-black",children:d.signatureStatus})]}),d.googleDocsSignatureLink?a.jsx("a",{href:d.googleDocsSignatureLink,target:"_blank",rel:"noopener noreferrer",className:"block py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all text-center",children:"Open Signature Document"}):a.jsx("button",{onClick:()=>mt(d.id,d.title),disabled:ee,className:"w-full py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:ee?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Creating Document..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Dv,{className:"w-4 h-4"}),"Create Signature Document"]})}),d.status!=="Signed"&&a.jsxs("button",{onClick:()=>ut(d),className:"w-full mt-3 py-3 bg-emerald-600 text-white font-bold text-sm rounded-xl hover:bg-emerald-700 transition-all flex items-center justify-center gap-2",children:[a.jsx(jn,{className:"w-4 h-4"}),"Mark as Signed"]})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(rf,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),Fe?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(jt,{className:"w-6 h-6 animate-spin text-indigo-600"})}):le.length===0?a.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[a.jsx(gi,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this contract"})]}):a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:le.map((qe,bt)=>{const Nr=new Date(qe.createdAt),Lr=new Date().getTime()-Nr.getTime(),Er=Math.floor(Lr/(1e3*60*60*24));let or="";Er===0?or="Today":Er===1?or="Yesterday":Er<7?or=`${Er} days ago`:Er<30?or=`${Math.floor(Er/7)} week${Math.floor(Er/7)>1?"s":""} ago`:or=`${Math.floor(Er/30)} month${Math.floor(Er/30)>1?"s":""} ago`;const Ut=qe.activityType==="email_linked",wr=Ut?"border-indigo-600":"border-slate-200",kr=Ut?"bg-indigo-600":"bg-slate-300",Gr=Ut?"text-indigo-600":"text-slate-400";return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${wr} shadow-xl flex items-center justify-center`,children:Ut?a.jsx(gi,{className:"w-4 h-4 text-indigo-600"}):a.jsx("div",{className:`w-2 h-2 rounded-full ${kr}`})}),a.jsxs("p",{className:`text-[10px] font-black ${Gr} uppercase mb-1 tracking-widest`,children:[Ut?"Email Linked":qe.activityType||"Activity","  ",or]}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:qe.title||"Email Activity"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:qe.description||qe.title}),qe.emailId&&a.jsxs("button",{onClick:()=>{window.location.hash="#inbox",setTimeout(()=>{window.location.hash=`#inbox&email=${qe.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(Ti,{className:"w-3 h-3"})," View Email"]})]},qe.id||bt)})})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>m(null),className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all",children:"Close"}),a.jsxs("button",{onClick:()=>{pr(d)},className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(vc,{className:"w-4 h-4"}),"Edit Contract"]})]})]})})]}),b&&d&&a.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>N(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(sa,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Contract?"}),a.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-black",children:d.title}),"?"]}),a.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>N(!1),disabled:v,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:gt,disabled:v,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:v?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Br,{className:"w-4 h-4"}),"Delete Contract"]})})]})]})})]}),K&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Document Types"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add contract document types"})]}),a.jsx("button",{onClick:()=>{oe(!1),ie("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:u.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Ga,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No document types yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first document type below"})]}):u.map(qe=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(Ga,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:qe.name})]}),a.jsx(jn,{className:"w-5 h-5 text-emerald-600"})]},qe.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New document type...",value:he,onChange:qe=>ie(qe.target.value),onKeyDown:qe=>{qe.key==="Enter"&&he.trim()&&!ce&&(qe.preventDefault(),Ne())},className:"flex-1 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Ne,disabled:!he.trim()||ce,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:ce?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Nn,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Document types help categorize your contracts and legal documents"})]})]})})]})},h1e=({onLogin:e})=>{const[t,r]=z.useState("initial"),[n,s]=z.useState(""),[i,o]=z.useState(["","","","","",""]),[l,c]=z.useState(!1),[u,f]=z.useState(null),d=z.useRef([]),m=async()=>{if(!n||!n.includes("@")){f("Please enter a valid email address");return}c(!0),f(null);try{const N=await LP({email:n});if(N?.status===404)throw new Error(N.message);f(null),o(["","","","","",""]),r("verify")}catch(N){console.error("[AUTH UI] Error caught:",N),N.message&&(N.message.includes("Account not found")||N.status===404)?f("Account not found - contact your Administrator"):f(N.message||"Failed to send code. Please check your internet connection.")}finally{c(!1)}},p=async()=>{const N=i.join("");if(N.length===6){if(!/^\d{6}$/.test(N)){f("OTP must contain only numbers");return}c(!0),f(null);try{const j=await rne({email:n,verificationCode:N});if(j.token&&j.user)e(j);else throw new Error("Invalid response from server.")}catch(j){console.error("[AUTH] Verification error:",j),j.message?.includes("User not registered")||j.message?.includes("USER_NOT_REGISTERED")||j.message?.includes("Account not found")?f("Account not found - contact your Administrator"):f(j.message||"Invalid or expired code."),o(["","","","","",""]),setTimeout(()=>d.current[0]?.focus(),100)}finally{c(!1)}}},y=(N,j)=>{if(j&&!/^\d$/.test(j))return;const w=[...i];w[N]=j,o(w),u&&f(null),j&&N<5&&d.current[N+1]?.focus(),j&&N===5&&w.every(S=>S!=="")&&setTimeout(()=>p(),100)},v=(N,j)=>{if(j.key==="Backspace"||j.key==="Delete"){j.preventDefault();const w=[...i];i[N]?w[N]="":N>0&&(w[N-1]="",d.current[N-1]?.focus()),o(w),u&&f(null)}else j.key==="Enter"?(j.preventDefault(),p()):j.key==="ArrowLeft"&&N>0?(j.preventDefault(),d.current[N-1]?.focus()):j.key==="ArrowRight"&&N<5&&(j.preventDefault(),d.current[N+1]?.focus())},g=N=>{N.preventDefault();const j=N.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),w=[...i];for(let P=0;P<6;P++)w[P]=j[P]||"";o(w),u&&f(null);const S=w.findIndex(P=>P==="");d.current[S===-1?5:S]?.focus(),j.length===6&&setTimeout(()=>p(),100)};z.useEffect(()=>{t==="verify"?setTimeout(()=>d.current[0]?.focus(),100):o(["","","","","",""])},[t]);const b=N=>{N.preventDefault(),t==="initial"?m():p()};return a.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsx("div",{className:"w-full max-w-md z-10 animate-in fade-in zoom-in-95 duration-500",children:a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl",children:[a.jsx("div",{className:"mb-6 text-center",children:a.jsx("a",{href:"/privacy-policy",onClick:N=>{N.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-xs text-slate-400 hover:text-indigo-400 underline transition-colors",title:"Privacy Policy",children:"Privacy Policy"})}),a.jsxs("div",{className:"flex flex-col items-center mb-10",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl shadow-indigo-900/40 mb-6",children:"I"}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"ImpactFlow OS"}),a.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Team Access Portal"})]}),a.jsxs("form",{onSubmit:b,className:"space-y-5",children:[u&&a.jsxs("div",{className:"p-4 rounded-2xl text-xs font-bold bg-red-500/10 border border-red-500/50 text-red-400 flex items-start gap-3 animate-in slide-in-from-top-2",children:[a.jsx(sa,{className:"w-4 h-4 shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[u,u.includes("Administrator")&&a.jsx("p",{className:"text-[10px] mt-1 font-medium opacity-70",children:"New accounts must be provisioned by IT before sign-in."})]})]}),t==="initial"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1",children:"Professional Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(gi,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),a.jsx("input",{type:"email",required:!0,placeholder:"alex@impact247.com",value:n,onChange:N=>s(N.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-white/5 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]})]}),t==="verify"&&a.jsxs("div",{className:"space-y-4 text-center",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Code sent to"}),a.jsx("p",{className:"text-sm font-semibold text-white",children:n})]}),a.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-6",children:"Enter Verification Code"}),a.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-3",children:i.map((N,j)=>a.jsx("input",{ref:w=>{d.current[j]=w},type:"text",inputMode:"numeric",maxLength:1,value:N,onChange:w=>y(j,w.target.value),onKeyDown:w=>v(j,w),onPaste:j===0?g:void 0,className:"w-12 h-14 md:w-14 md:h-16 bg-white/5 border-2 border-white/10 rounded-xl text-white text-center text-2xl md:text-3xl font-bold outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all text-center",autoComplete:"off",disabled:l},j))}),a.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[a.jsx("button",{type:"button",onClick:async()=>{f(null),o(["","","","","",""]),c(!0);try{await LP({email:n}),f(null),setTimeout(()=>d.current[0]?.focus(),100)}catch(N){f(N.message||"Failed to send new code.")}finally{c(!1)}},disabled:l,className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors disabled:opacity-50",children:l?"Sending...":"Request New Code"}),a.jsx("button",{type:"button",onClick:()=>{r("initial"),o(["","","","","",""]),f(null)},className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors",children:"Use a different email"})]})]}),a.jsx("button",{disabled:l||t==="verify"&&i.some(N=>N===""),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-bold rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg active:scale-[0.98]",children:l?a.jsx(jt,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[t==="initial"?"Request Access Code":"Secure Login",a.jsx(lo,{className:"w-4 h-4"})]})})]}),a.jsxs("div",{className:"mt-12 pt-8 border-t border-white/5 text-center flex flex-col items-center gap-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsx(gd,{className:"w-5 h-5 text-slate-700"}),a.jsx("div",{className:"w-1 h-1 bg-slate-800 rounded-full"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-[0.2em]",children:"Impact 24x7 Enterprise"})]}),a.jsxs("div",{className:"text-[10px] text-slate-500 font-medium max-w-[300px] space-y-2",children:[a.jsx("p",{children:"Access restricted to authorized personnel."}),a.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap pt-2",children:[a.jsx("a",{href:"/help",onClick:N=>{N.preventDefault(),window.history.pushState({},"","/help"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Help & Support",children:"Help"}),a.jsx("span",{className:"text-slate-600",children:""}),a.jsx("a",{href:"/privacy-policy",onClick:N=>{N.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Privacy Policy",children:"Privacy Policy"})]})]})]})]})})]})},p1e=({children:e,onUserLoaded:t})=>{const[r,n]=z.useState(!0),[s,i]=z.useState(!1);return z.useEffect(()=>{(async()=>{const l=localStorage.getItem("auth_token"),c=localStorage.getItem("user_data");if(!l){c&&localStorage.removeItem("user_data"),n(!1);return}if(c)try{const u=JSON.parse(c);t(u),i(!0),n(!1),FP().then(f=>{const d=f.data||f,m=JSON.parse(localStorage.getItem("user_data")||"{}");JSON.stringify(d)!==JSON.stringify(m)&&(localStorage.setItem("user_data",JSON.stringify(d)),t(d))}).catch(f=>{console.warn("Session expired:",f),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.reload()});return}catch{localStorage.removeItem("user_data")}try{const u=await FP(),f=u.data||u;localStorage.setItem("user_data",JSON.stringify(f)),t(f),i(!0)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),i(!1)}finally{n(!1)}})()},[t]),r?a.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-950 text-white",children:[a.jsx(jt,{className:"w-10 h-10 animate-spin text-indigo-500 mb-4"}),a.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Establishing secure session..."})]}):s?a.jsx(a.Fragment,{children:e}):a.jsx(h1e,{onLogin:o=>{localStorage.setItem("auth_token",o.token||o.data?.token);const l=o.user||o.data?.user||o.data;l&&(localStorage.setItem("user_data",JSON.stringify(l)),t(l)),i(!0)}})},m1e=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onRefresh:n,isRefreshing:s=!1,onClose:i,onViewAll:o})=>{e.filter(u=>!u.read);const l=u=>{switch(u){case"lead":return a.jsx(Ru,{className:"w-4 h-4 text-blue-500"});case"deal":return a.jsx(fo,{className:"w-4 h-4 text-indigo-500"});case"task":return a.jsx(bl,{className:"w-4 h-4 text-emerald-500"});case"payment":return a.jsx(s0,{className:"w-4 h-4 text-red-500"});default:return a.jsx(ax,{className:"w-4 h-4 text-slate-400"})}},c=u=>{switch(u){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";default:return"bg-slate-50"}};return a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(gy,{className:"w-4 h-4 text-slate-500"}),"Notifications"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[n&&a.jsx("button",{onClick:n,disabled:s,className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:a.jsx(bd,{className:`w-3.5 h-3.5 text-slate-600 ${s?"animate-spin":""}`})}),a.jsx("button",{onClick:r,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-wider",children:"Mark all as read"})]})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length>0?a.jsx("div",{className:"divide-y divide-slate-50",children:e.map(u=>a.jsxs("div",{className:`p-4 flex gap-4 hover:bg-slate-50 transition-colors relative cursor-pointer group ${u.read?"":"bg-indigo-50/10"}`,onClick:()=>{t(u.id),u.link&&(u.link.startsWith("/?tab=")||u.link.startsWith("/"),window.location.href=u.link)},children:[a.jsx("div",{className:`shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${c(u.type)}`,children:l(u.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("p",{className:`text-sm font-semibold truncate ${u.read?"text-slate-600":"text-slate-900"}`,children:u.title}),a.jsx("span",{className:"text-[10px] text-slate-400 font-medium shrink-0",children:u.timestamp})]}),a.jsx("p",{className:`text-xs mt-0.5 line-clamp-2 ${u.read?"text-slate-400":"text-slate-500"}`,children:u.message})]}),!u.read&&a.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})})]},u.id))}):a.jsxs("div",{className:"p-12 text-center text-slate-400",children:[a.jsx(kd,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),a.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),a.jsx("p",{className:"text-xs",children:"No new notifications at this time."})]})}),a.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50/50 text-center",children:a.jsx("button",{onClick:()=>{i(),o&&o()},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-widest transition-colors",children:"View all activity"})})]})},Pv=20,x1e=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:n}=Ea(),[s,i]=z.useState([]),[o,l]=z.useState(!0),[c,u]=z.useState(!1),[f,d]=z.useState(1),[m,p]=z.useState(1),[y,v]=z.useState(0),[g,b]=z.useState(!1),N=z.useCallback(async(q=!1)=>{try{const G=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!G?.id)return;q?u(!0):l(!0);const Z=await C7(G.id,500),te=Z?.data||Z||[],ne=(Array.isArray(te)?te:[]).map(J=>{let ee="Just now";if(J.createdAt){const H=new Date(J.createdAt),R=new Date().getTime()-H.getTime(),W=Math.floor(R/6e4),U=Math.floor(R/36e5),K=Math.floor(R/864e5);W<1?ee="Just now":W<60?ee=`${W}m ago`:U<24?ee=`${U}h ago`:K<7?ee=`${K}d ago`:ee=H.toLocaleDateString()}return{id:J.id,userId:J.userId,type:J.type||"system",title:J.title,message:J.message,timestamp:ee,read:!!J.read,link:J.link||void 0}});i(ne),v(ne.length),p(Math.ceil(ne.length/Pv))}catch(G){console.error("[NOTIFICATIONS] Failed to load notifications",G),n(G.message||"Failed to load notifications")}finally{l(!1),u(!1)}},[e,n]);z.useEffect(()=>{N(!1)},[N]),z.useEffect(()=>{d(1)},[g]),z.useEffect(()=>{const q=()=>{N(!0)};return window.addEventListener("refresh-notifications",q),()=>{window.removeEventListener("refresh-notifications",q)}},[N]);const j=async q=>{try{const G=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!G?.id)return;await T7(q,G.id),i(Z=>Z.map(te=>te.id===q?{...te,read:!0}:te)),window.dispatchEvent(new Event("refresh-notifications"))}catch(G){console.error("[NOTIFICATIONS] Failed to mark as read",G),n(G.message||"Failed to mark notification as read")}},w=async()=>{try{const q=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!q?.id)return;await O7(q.id),i(G=>G.map(Z=>({...Z,read:!0}))),r("All notifications marked as read"),window.dispatchEvent(new Event("refresh-notifications"))}catch(q){console.error("[NOTIFICATIONS] Failed to mark all as read",q),n(q.message||"Failed to mark all notifications as read")}},S=(q,G)=>{if(q==="note-marked"||G?.toLowerCase().includes("marked"))return a.jsx(Ru,{className:"w-5 h-5 text-indigo-500"});if(G?.toLowerCase().includes("pipeline"))return a.jsx(nf,{className:"w-5 h-5 text-purple-500"});switch(q){case"lead":return a.jsx(Ru,{className:"w-5 h-5 text-blue-500"});case"deal":return a.jsx(fo,{className:"w-5 h-5 text-indigo-500"});case"task":return a.jsx(bl,{className:"w-5 h-5 text-emerald-500"});case"payment":return a.jsx(s0,{className:"w-5 h-5 text-red-500"});default:return a.jsx(ax,{className:"w-5 h-5 text-slate-400"})}},P=(q,G)=>{if(q==="note-marked"||G?.toLowerCase().includes("marked"))return"bg-indigo-50";if(G?.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(q){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";default:return"bg-slate-50"}},A=q=>{if(j(q.id),q.link)if(q.link.startsWith("/?tab=")){const Z=new URL(q.link,window.location.origin).searchParams.get("tab");Z&&t?t(Z):window.location.href=q.link}else q.link.startsWith("/"),window.location.href=q.link},T=g?s.filter(q=>q.type==="note-marked"||q.title?.toLowerCase().includes("marked")):s,I=(f-1)*Pv,B=I+Pv,E=T.slice(I,B),C=T.filter(q=>!q.read).length,M=Math.ceil(T.length/Pv);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[a.jsx(gy,{className:"w-6 h-6 text-indigo-600"}),"Notifications"]}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:C>0?`${C} unread notification${C!==1?"s":""}`:"All caught up!"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>b(!g),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center gap-2 ${g?"bg-indigo-600 text-white hover:bg-indigo-700":"text-slate-700 hover:bg-slate-100"}`,children:[a.jsx(Ru,{className:"w-4 h-4"}),g?"Show All":"Marked Notes"]}),a.jsxs("button",{onClick:()=>N(!0),disabled:c,className:"px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh notifications",children:[a.jsx(bd,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]}),C>0&&a.jsx("button",{onClick:w,className:"px-4 py-2 text-sm font-semibold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Mark all as read"})]})]}),o?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(bd,{className:"w-8 h-8 animate-spin text-indigo-600"})}):T.length===0?a.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-12 text-center",children:[a.jsx(kd,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:g?"No marked notes":"All caught up!"}),a.jsx("p",{className:"text-sm text-slate-500",children:g?"No notes have been marked for you yet.":"No notifications at this time."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-100",children:E.map(q=>a.jsxs("div",{className:`p-6 flex gap-4 hover:bg-slate-50 transition-colors cursor-pointer group ${q.read?"":"bg-indigo-50/30"}`,onClick:()=>A(q),children:[a.jsx("div",{className:`shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${P(q.type,q.title)}`,children:S(q.type,q.title)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4 mb-1",children:[a.jsx("p",{className:`text-sm font-semibold ${q.read?"text-slate-600":"text-slate-900 font-bold"}`,children:q.title}),a.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 font-medium",children:q.timestamp}),!q.read&&a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]})]}),a.jsx("p",{className:`text-sm ${q.read?"text-slate-400":"text-slate-600"}`,children:q.message})]})]},q.id))})}),M>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-6 py-4",children:[a.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",a.jsx("span",{className:"font-semibold",children:I+1})," to"," ",a.jsx("span",{className:"font-semibold",children:Math.min(B,T.length)})," of"," ",a.jsx("span",{className:"font-semibold",children:T.length})," notifications"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>d(q=>Math.max(1,q-1)),disabled:f===1,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(Aj,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:M},(q,G)=>G+1).map(q=>q===1||q===m||q>=f-1&&q<=f+1?a.jsx("button",{onClick:()=>d(q),className:`px-3 py-1.5 text-sm font-semibold rounded-lg transition-colors ${f===q?"bg-indigo-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:q},q):q===f-2||q===f+2?a.jsx("span",{className:"px-2 text-slate-400",children:"..."},q):null)}),a.jsx("button",{onClick:()=>d(q=>Math.min(M,q+1)),disabled:f===M,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(_s,{className:"w-5 h-5"})})]})]})]})]})},zf=e=>{if(!e||!e.trim())return null;const t=e.trim();if(t.includes("@")){const r=t.split("@");if(r.length!==2||!r[1])return null;const n=r[1].toLowerCase().trim();return n.includes(".")?n:null}try{if(!t.includes(".")&&!t.startsWith("http"))return null;const n=(t.startsWith("http")?new URL(t):new URL(`https://${t}`)).hostname.replace(/^www\./,"").toLowerCase();return n.includes(".")?n:null}catch{const n=t.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].toLowerCase().trim()||null;return n&&n.includes(".")?n:null}},g1e=(e,t)=>{if(!e||!t)return 0;const r=e.toLowerCase().trim(),n=t.toLowerCase().trim();if(r===n)return 1;const s=r.length,i=n.length;if(s===0||i===0)return 0;const o=[];for(let u=0;u<=s;u++)o[u]=[u];for(let u=0;u<=i;u++)o[0][u]=u;for(let u=1;u<=s;u++)for(let f=1;f<=i;f++){const d=r[u-1]===n[f-1]?0:1;o[u][f]=Math.min(o[u-1][f]+1,o[u][f-1]+1,o[u-1][f-1]+d)}const l=o[s][i],c=Math.max(s,i);return 1-l/c},v1e=(e,t)=>{const r=[];if(!e.email)return r;const n=e.email.toLowerCase().trim();return t.forEach(s=>{s.id!==e.id&&s.email&&s.email.toLowerCase().trim()===n&&r.push({record:s,matchType:"exact",confidence:1})}),r},y1e=(e,t,r=.8)=>{const n=[];return e.name&&t.forEach(s=>{if(s.id===e.id)return;const i=g1e(e.name||"",s.name||"");i>=r&&n.push({record:s,matchType:"fuzzy",confidence:i,similarity:i})}),n},b1e=["North America","South America","Europe","Asia","Africa","Middle East","Oceania","Central America","Caribbean","Eastern Europe","Western Europe","Northern Europe","Southern Europe","Southeast Asia","East Asia","South Asia","Central Asia","North Africa","Sub-Saharan Africa","Latin America","United States","Canada","Mexico","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Russia","China","Japan","India","South Korea","Singapore","Australia","New Zealand","Brazil","Argentina","Chile","United Arab Emirates","Saudi Arabia","Israel","South Africa","Global","International"],w1e=({type:e,stage:t,lockedType:r,onClose:n,onSuccess:s})=>{const[i,o]=z.useState(e),[l,c]=z.useState("form"),[u,f]=z.useState(!1),[d,m]=z.useState(null),[p,y]=z.useState({}),[v,g]=z.useState([]),[b,N]=z.useState([]),[j,w]=z.useState([]),[S,P]=z.useState([]),[A,T]=z.useState([]),[I,B]=z.useState(!1),[E,C]=z.useState(!1),[M,q]=z.useState(""),G=z.useRef(null),[Z,te]=z.useState(null),[ne,J]=z.useState(!1),[ee,H]=z.useState(""),[O,R]=z.useState(null),W=z.useRef(null),[U,K]=z.useState({name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",currency:xi,expectedCloseDate:"",stage:"Discovery",status:"Planning",progress:"0",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",priority:"Medium",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:"",lineItems:[]});z.useEffect(()=>{const fe={name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",expectedCloseDate:"",stage:t||"Discovery",status:"Planning",progress:"0",priority:"Medium",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:""};e==="invoice"?(fe.lineItems=[{description:"",quantity:1,rate:0,amount:0}],fe.currency=xi):(fe.lineItems=[],e!=="deal"&&(fe.currency=xi)),K(Q=>({...Q,...fe})),m(null),y({}),c("form"),B(!1),H(""),R(null),W.current&&(W.current.value="")},[e,t]),z.useEffect(()=>{(async()=>{try{const we=JSON.parse(localStorage.getItem("user_data")||"{}")?.id,[ve,Ee,pe,ue]=await Promise.all([Ed(),Cd(),fg(),Yp(we)]);w(ve.data||[]),g(Ee.data||[]),N(pe.data||[]);const Pe=Array.isArray(ue)?ue:ue?.data||[];if(P(Pe.filter(Ne=>!Ne.archived)),i==="task")try{const Ne=await X1(),Be=Array.isArray(Ne?.data)?Ne.data:[];T(Be)}catch{T([])}else T([]);we&&K(Ne=>({...Ne,ownerId:Ne.ownerId||we,assigneeId:Ne.assigneeId||we}))}catch(Q){console.error("[QUICK-CREATE] Data fetch failed:",Q)}})()},[i]),z.useEffect(()=>{const fe=Q=>{G.current&&!G.current.contains(Q.target)&&(C(!1),q(""))};if(E)return document.addEventListener("mousedown",fe),()=>document.removeEventListener("mousedown",fe)},[E]);const oe=b1e.filter(fe=>fe.toLowerCase().includes(M.toLowerCase())),he=(fe,Q=1200,we=1200,ve=.8)=>new Promise((Ee,pe)=>{const ue=new FileReader;ue.onload=Pe=>{const Ne=new Image;Ne.onload=()=>{let Be=Ne.width,nt=Ne.height;Be>nt?Be>Q&&(nt=nt*Q/Be,Be=Q):nt>we&&(Be=Be*we/nt,nt=we);const mt=document.createElement("canvas");mt.width=Be,mt.height=nt;const kt=mt.getContext("2d");kt?(kt.drawImage(Ne,0,0,Be,nt),Ee(mt.toDataURL("image/jpeg",ve))):pe(new Error("Canvas context not available"))},Ne.onerror=()=>pe(new Error("Failed to load image")),Ne.src=Pe.target?.result},ue.onerror=()=>pe(new Error("Failed to read file")),ue.readAsDataURL(fe)}),ie=async fe=>{const Q=fe.target.files?.[0];if(Q){if(!Q.type.startsWith("image/")){m("Please select an image file");return}if(Q.size>10*1024*1024){m("Image size must be less than 10MB");return}try{const we=await he(Q,1200,1200,.8);H(we),R(Q),m(null)}catch(we){m(we.message||"Failed to process image")}}},ce=()=>{H(""),R(null),W.current&&(W.current.value=""),n()},Le=()=>{const fe={};if(i==="contact")U.name?.trim()||(fe.name="Full Name is required"),U.email?.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(U.email)||(fe.email="Please enter a valid email address"):fe.email="Email Address is required";else if(i==="company"){U.name?.trim()||(fe.name="Company Name is required"),(!U.region||U.region.trim()==="")&&(fe.region="Region is required"),U.ownerId?.trim()||(fe.ownerId="Assignee / Lead is required");let Q=U.domain;!Q&&U.website&&(Q=zf(U.website)||""),!Q&&U.email&&(Q=zf(U.email)||""),(!Q||Q.trim()==="")&&(fe.domain="Domain is required (can be auto-populated from website or email)",fe.website="Add website or email to auto-populate domain")}else if(i==="deal")U.title?.trim()||(fe.title="Deal Name is required"),U.companyId?.trim()||(fe.companyId="Organization is required"),(!U.value||parseFloat(U.value)<=0)&&(fe.value="Amount is required and must be greater than $0"),U.stage?.trim()||(fe.stage="Stage is required"),U.ownerId||(fe.ownerId="Assignee / Lead is required");else if(i==="project"){if(U.title?.trim()||(fe.title="Project Name is required"),U.engagement?.trim()||(fe.engagement="Engagement is required"),U.startDate?.trim()||(fe.startDate="Start Date is required"),U.endDate?.trim()||(fe.endDate="End Date is required"),U.startDate&&U.endDate){const Q=new Date(U.startDate),we=new Date(U.endDate);!isNaN(Q.getTime())&&!isNaN(we.getTime())&&Q>=we&&(fe.endDate="End Date must be after Start Date")}U.ownerId||(fe.ownerId="Assignee / Lead is required")}else i==="task"?(U.title?.trim()||(fe.title="Task Title is required"),U.assigneeId||(fe.assigneeId="Designated Lead / Assignee is required")):i==="invoice"&&(U.companyId||(fe.companyId="Client (Organization) is required"),(!U.expectedCloseDate||U.expectedCloseDate.trim()==="")&&(fe.expectedCloseDate=i==="deal"?"Expected Close Date is required":"Due Date is required"),!U.lineItems||U.lineItems.length===0?fe.lineItems="At least one line item is required":(U.lineItems.forEach((we,ve)=>{(!we.description||!we.description.trim())&&(fe[`lineItem_${ve}_description`]=`Line item ${ve+1}: Description is required`),(!we.quantity||we.quantity<=0)&&(fe[`lineItem_${ve}_quantity`]=`Line item ${ve+1}: Quantity must be greater than 0`),(!we.rate||we.rate<=0)&&(fe[`lineItem_${ve}_rate`]=`Line item ${ve+1}: Rate must be greater than 0`)}),U.lineItems.reduce((we,ve)=>{const Ee=ve.amount||ve.rate*ve.quantity||0;return we+Ee},0)<=0&&(fe.lineItems="Total amount must be greater than $0")));return y(fe),Object.keys(fe).length===0},le=async fe=>{if(fe.preventDefault(),u)return;if(m(null),!Le()){f(!1);return}f(!0),console.debug(`[QUICK-CREATE] Deployment Start. Type: ${i}`,U);try{const ve=JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(i==="contact"){const Ee={name:U.name,email:U.email},pe=v1e(Ee,b),ue=y1e(Ee,b,.8);if(pe.length>0||ue.length>0){const Pe=new Map,Ne=new Set;pe.forEach(nt=>{const mt=nt.record,kt=mt.id||mt.email?.toLowerCase().trim()||"";kt&&!Pe.has(kt)&&(Pe.set(kt,{...mt,matchType:"exact",matchReason:"email"}),mt.email&&Ne.add(mt.email.toLowerCase().trim()))}),ue.forEach(nt=>{const mt=nt.record,kt=mt.id||mt.email?.toLowerCase().trim()||"",Re=mt.email?.toLowerCase().trim();kt&&!Pe.has(kt)&&(!Re||!Ne.has(Re))&&(Pe.set(kt,{...mt,matchType:"fuzzy",matchReason:"name",similarity:nt.similarity}),Re&&Ne.add(Re))});const Be=Array.from(Pe.values());te({open:!0,duplicates:Be,newContact:{name:U.name,email:U.email,companyId:U.companyId||void 0,role:U.role,phone:U.phone,linkedin:U.linkedin||void 0}}),f(!1);return}await MP({name:U.name,companyId:U.companyId||void 0,role:U.role,email:U.email,phone:U.phone,linkedin:U.linkedin||void 0})}else if(i==="company"){let Ee=U.domain;!Ee&&U.website&&(Ee=zf(U.website)||void 0),!Ee&&U.email&&(Ee=zf(U.email)||void 0);const pe={name:U.name?.trim(),industry:U.industry?.trim(),region:U.region?.trim()||"",website:U.website?.trim()||void 0,email:U.email?.trim()||void 0,domain:Ee||"",linkedin:U.linkedin?.trim()||void 0,ownerId:U.ownerId||ve};if(!pe.region){y({region:"Region is required"}),f(!1);return}if(!pe.domain){y({domain:"Domain is required (can be auto-populated from website or email)"}),f(!1);return}await une(pe)}else if(i==="deal"){if(!U.companyId||U.companyId.trim()===""){y({companyId:"Organization is required"}),f(!1);return}if(!U.value||parseFloat(U.value)<=0){y({value:"Amount is required and must be greater than $0"}),f(!1);return}if(!U.stage||U.stage.trim()===""){y({stage:"Stage is required"}),f(!1);return}await dne({title:U.title,companyId:U.companyId.trim(),value:parseFloat(U.value),currency:U.currency||xi,stage:U.stage,pipelineType:"sales",ownerId:U.ownerId,expectedCloseDate:U.expectedCloseDate||void 0,description:U.description||void 0})}else if(i==="project"){const Ee={};if(U.title?.trim()||(Ee.title="Project Name is required"),U.engagement?.trim()||(Ee.engagement="Engagement is required"),U.startDate?.trim()||(Ee.startDate="Start Date is required"),U.endDate?.trim()||(Ee.endDate="End Date is required"),U.ownerId?.trim()||(Ee.ownerId="Assignee / Lead is required"),U.startDate&&U.endDate){const ue=new Date(U.startDate),Pe=new Date(U.endDate);!isNaN(ue.getTime())&&!isNaN(Pe.getTime())&&ue>=Pe&&(Ee.endDate="End Date must be after Start Date")}if(Object.keys(Ee).length>0){y(Ee),f(!1);return}console.debug("[QUICK-CREATE] Attempting Project Creation...",{title:U.title,engagement:U.engagement,startDate:U.startDate,endDate:U.endDate,ownerId:U.ownerId});const pe={title:U.title.trim(),engagement:U.engagement.trim(),startDate:U.startDate,endDate:U.endDate,companyId:U.companyId&&U.companyId.trim()!==""?U.companyId:void 0,status:U.status,ownerId:U.ownerId,projectManager:U.ownerId,progress:0,description:U.description||void 0};ee&&O&&(pe.noteImage=ee,pe.noteImageName=O.name,pe.noteImageMimeType=O.type),console.debug("[QUICK-CREATE] Project payload:",pe),await hne(pe)}else if(i==="task"){console.debug("[QUICK-CREATE] Attempting Task Creation...",{title:U.title,assigneeId:U.assigneeId});const Ee={title:U.title,projectId:U.projectId||void 0,description:U.description||void 0,dueDate:U.expectedCloseDate||void 0,priority:U.priority,status:"Todo",assigneeId:U.assigneeId,category:U.category&&U.category.trim()?U.category.trim():void 0};if(ee||U.description){const pe=JSON.parse(localStorage.getItem("user_data")||"{}"),ue={id:`note_${Date.now()}`,userId:ve||pe.id,userName:pe.name||"Unknown User",text:U.description||"",createdAt:new Date().toISOString()};ee&&O&&(ue.imageUrl=ee,ue.imageName=O.name,ue.imageMimeType=O.type),Ee.notes=[ue]}await _7(Ee),window.dispatchEvent(new Event("refresh-tasks"))}else if(i==="invoice"){const Ee={};if(U.companyId?.trim()||(Ee.companyId="Client (Organization) is required"),U.expectedCloseDate?.trim()||(Ee.expectedCloseDate="Due Date is required"),(!U.lineItems||U.lineItems.length===0)&&(Ee.lineItems="At least one line item is required"),U.lineItems&&U.lineItems.length>0&&U.lineItems.forEach((Pe,Ne)=>{(!Pe.description||!Pe.description.trim())&&(Ee[`lineItem_${Ne}_description`]=`Line item ${Ne+1}: Description is required`),(!Pe.quantity||Pe.quantity<=0)&&(Ee[`lineItem_${Ne}_quantity`]=`Line item ${Ne+1}: Quantity must be greater than 0`),(!Pe.rate||Pe.rate<=0)&&(Ee[`lineItem_${Ne}_rate`]=`Line item ${Ne+1}: Rate must be greater than 0`)}),Object.keys(Ee).length>0){y(Ee),f(!1);return}const pe=U.lineItems.map(Pe=>({description:Pe.description.trim(),quantity:Pe.quantity,rate:Pe.rate,amount:Pe.amount||Pe.rate*Pe.quantity})),ue=pe.reduce((Pe,Ne)=>Pe+(Ne.amount||0),0);if(ue<=0){y({lineItems:"At least one line item with a valid amount is required"}),f(!1);return}console.debug("[QUICK-CREATE] Creating invoice with:",{companyId:U.companyId,amount:ue,dueDate:U.expectedCloseDate,lineItemsCount:pe.length,lineItems:pe,name:U.name,description:U.description}),await mne({companyId:U.companyId,amount:ue,currency:U.currency||xi,dueDate:U.expectedCloseDate,description:U.name||U.description||"",lineItems:pe,items:pe,status:"Draft",userId:ve||void 0}),window.dispatchEvent(new Event("refresh-invoices"))}console.debug("[QUICK-CREATE] Registry success. Finalizing UI update."),c("success"),H(""),R(null),W.current&&(W.current.value=""),i==="project"?(console.log("[QUICK-CREATE] Dispatching refresh-projects event"),window.dispatchEvent(new Event("refresh-projects"))):i==="invoice"&&(console.log("[QUICK-CREATE] Dispatching refresh-invoices event"),window.dispatchEvent(new Event("refresh-invoices"))),s&&(console.log("[QUICK-CREATE] Calling onSuccess callback"),s()),setTimeout(()=>{n()},1500)}catch(we){if(console.error("[QUICK-CREATE] Deployment failed:",we),console.error("[QUICK-CREATE] Error details:",{message:we.message,code:we.code,status:we.status,details:we.details,type:i}),we.code==="DUPLICATE_DETECTED"&&we.duplicates&&i==="contact"){const ve=new Map;we.duplicates.forEach(pe=>{if(pe.id)if(!ve.has(pe.id))ve.set(pe.id,pe);else{const ue=ve.get(pe.id);pe.matchType==="exact"&&ue.matchType!=="exact"&&ve.set(pe.id,pe)}});const Ee=Array.from(ve.values());te({open:!0,duplicates:Ee,newContact:{name:U.name,email:U.email,companyId:U.companyId||void 0,role:U.role,phone:U.phone,linkedin:U.linkedin||void 0}}),f(!1);return}if(we.code==="VALIDATION_ERROR"||we.details&&we.details.errors){const ve={};(we.details?.errors||(we.message?[we.message]:[])).forEach(pe=>{const ue=pe.toLowerCase();if(ue.includes("name")||ue.includes("title"))ve.title=pe;else if(ue.includes("industry"))ve.industry=pe;else if(ue.includes("region"))ve.region=pe;else if(ue.includes("domain"))ve.domain=pe;else if(ue.includes("email"))ve.email=pe;else if(ue.includes("engagement"))ve.engagement=pe;else if(ue.includes("start date")||ue.includes("startdate"))ve.startDate=pe;else if(ue.includes("end date")||ue.includes("enddate"))ve.endDate=pe;else if(ue.includes("project manager")||ue.includes("manager"))ve.ownerId=pe;else if(ue.includes("assignee")||ue.includes("lead")||ue.includes("owner"))ve.ownerId=pe;else if(ue.includes("client")||ue.includes("company"))ve.companyId=pe;else if(ue.includes("due date")||ue.includes("duedate"))ve.expectedCloseDate=pe;else if(ue.includes("line item")){const Pe=ue.match(/line item (\d+):\s*(.+)/);if(Pe){const Ne=parseInt(Pe[1])-1,Be=Pe[2];Be.includes("description")?ve[`lineItem_${Ne}_description`]=pe:Be.includes("quantity")?ve[`lineItem_${Ne}_quantity`]=pe:(Be.includes("rate")||Be.includes("amount"))&&(ve[`lineItem_${Ne}_rate`]=pe)}else ve.lineItems=pe}else ue.includes("amount")&&!ue.includes("line item")&&(ve.lineItems=pe)}),Object.keys(ve).length>0?(y(ve),m("Please correct the validation errors below")):m(we.message||"Validation failed. Please check all required fields.")}else m(we.message||"Operational error. Verify mandatory fields and team authorization.");f(!1)}},He=()=>{switch(i){case"deal":return"New Opportunity";case"project":return"New Project";case"task":return"New Task";case"invoice":return"New Invoice";case"company":return"Add Company";case"contact":return"Add Contact";default:return"Quick Entry"}},Fe=()=>a.jsx("span",{className:"text-red-500 ml-1 font-black text-base",children:"*"});return l==="success"?a.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-sm p-12 text-center animate-in zoom-in-95 duration-300 shadow-2xl",children:[a.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 text-emerald-500 ring-8 ring-emerald-50/50",children:a.jsx(jn,{className:"w-12 h-12 animate-in zoom-in duration-500"})}),a.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Deployment Success"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Record integrated into ImpactFlow OS."})]})}):a.jsxs("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"bg-white rounded-[48px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsxs("div",{className:"p-4 bg-indigo-600 rounded-[20px] text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:[(i==="deal"||i==="company")&&a.jsx(gd,{className:"w-6 h-6"}),i==="project"&&a.jsx(Zf,{className:"w-6 h-6"}),i==="task"&&a.jsx(bl,{className:"w-6 h-6"}),i==="invoice"&&a.jsx(Ga,{className:"w-6 h-6"}),i==="contact"&&a.jsx(vl,{className:"w-6 h-6"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none mb-1",children:He()}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black",children:"Workspace Update"})]})]}),a.jsx("button",{onClick:ce,className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:a.jsx(cr,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:le,className:"p-8 space-y-8 max-h-[75vh] overflow-y-auto custom-scrollbar",children:[!r&&a.jsx("div",{className:"flex bg-slate-100 p-1 rounded-[20px] mb-4 overflow-x-auto scrollbar-hide border border-slate-200",children:["deal","project","task","invoice","company","contact"].map(fe=>a.jsx("button",{type:"button",onClick:()=>o(fe),className:`flex-1 min-w-[80px] flex items-center justify-center py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${i===fe?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:fe},fe))}),d&&Object.keys(p).length===0&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs p-5 rounded-3xl font-bold flex items-start gap-3 animate-in slide-in-from-top-2",children:[a.jsx(sa,{className:"w-5 h-5 shrink-0"}),a.jsx("span",{children:d})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Name"," ",a.jsx(Fe,{})]}),a.jsx("input",{required:!0,type:"text",placeholder:i==="deal"?"e.g., Q4 Logistics Transformation":"Name...",value:i==="deal"||i==="project"||i==="task"?U.title:U.name,onChange:fe=>{const Q=i==="deal"||i==="project"||i==="task"?"title":"name";K(we=>({...we,[Q]:fe.target.value})),p[Q]&&y(we=>{const ve={...we};return delete ve[Q],ve})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.title||p.name?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),(p.title||p.name)&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.title||p.name]})]}),(i==="deal"||i==="project"||i==="invoice"||i==="contact")&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Organization ",(i==="deal"||i==="invoice")&&a.jsx(Fe,{})]}),a.jsxs("select",{required:i==="deal"||i==="invoice",value:U.companyId,onChange:fe=>{K(Q=>({...Q,companyId:fe.target.value})),p.companyId&&y(Q=>{const we={...Q};return delete we.companyId,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${p.companyId?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${p.companyId?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[a.jsx("option",{value:"",children:i==="deal"||i==="invoice"?"Select Organization":"No Organization"}),v.map(fe=>a.jsx("option",{value:fe.id,children:fe.name},fe.id))]}),p.companyId&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.companyId]})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Email ",a.jsx(Fe,{})]}),a.jsx("input",{required:!0,type:"email",placeholder:"contact@company.com",value:U.email,onChange:fe=>{K(Q=>({...Q,email:fe.target.value})),p.email&&y(Q=>{const we={...Q};return delete we.email,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.email&&i==="contact"&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.email]})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Role / Title"}),a.jsx("input",{type:"text",placeholder:"e.g., CEO, Manager",value:U.role,onChange:fe=>K(Q=>({...Q,role:fe.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Phone Number"}),a.jsx("input",{type:"tel",placeholder:"+1 (555) 000-0000",value:U.phone,onChange:fe=>K(Q=>({...Q,phone:fe.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Industry"}),a.jsx("input",{type:"text",placeholder:"e.g., Technology, Healthcare",value:U.industry,onChange:fe=>{K(Q=>({...Q,industry:fe.target.value})),p.industry&&y(Q=>{const we={...Q};return delete we.industry,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.industry?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.industry&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.industry]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2 relative",ref:G,children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Region ",a.jsx(Fe,{})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>{C(!E),E||q("")},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold text-left flex items-center justify-between ${p.region?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"} ${U.region?"text-slate-900":"text-slate-400"}`,children:[a.jsx("span",{children:U.region||"Select Region"}),a.jsx(hl,{className:`w-4 h-4 text-slate-400 transition-transform ${E?"rotate-180":""}`})]}),E&&a.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-[20px] shadow-2xl max-h-64 overflow-hidden",children:[a.jsx("div",{className:"p-3 border-b border-slate-100",children:a.jsxs("div",{className:"relative",children:[a.jsx(Sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search regions...",value:M,onChange:fe=>q(fe.target.value),onClick:fe=>fe.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]})}),a.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:oe.length>0?oe.map(fe=>a.jsx("button",{type:"button",onClick:()=>{const Q=fe.trim();K(we=>({...we,region:Q})),C(!1),q(""),y(we=>{const ve={...we};return delete ve.region,ve}),m(null)},className:`w-full px-6 py-3 text-left text-sm font-bold transition-colors hover:bg-indigo-50 ${U.region===fe?"bg-indigo-50 text-indigo-600":"text-slate-900"}`,children:fe},fe)):a.jsx("div",{className:"px-6 py-4 text-sm text-slate-400 font-bold text-center",children:"No regions found"})})]})]}),p.region&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1 mt-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.region]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Website"}),a.jsx("input",{type:"url",placeholder:"https://www.example.com",value:U.website,onChange:fe=>{const Q=fe.target.value;K(we=>{const ve={...we,website:Q},Ee=Q?zf(Q):null,pe=we.email?zf(we.email):null;return ve.domain=Ee||pe||"",ve}),(p.domain||p.website)&&y(we=>{const ve={...we};return delete ve.domain,delete ve.website,ve})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.website?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.website&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.website]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Email"}),a.jsx("input",{type:"email",placeholder:"contact@company.com",value:U.email,onChange:fe=>{const Q=fe.target.value;K(we=>{const ve={...we,email:Q},Ee=we.website?zf(we.website):null,pe=Q?zf(Q):null;return ve.domain=Ee||pe||"",ve}),(p.email||p.domain)&&y(we=>{const ve={...we};return delete ve.email,delete ve.domain,ve})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.email&&i==="contact"&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.email]})]}),i==="company"&&U.domain&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Domain ",a.jsx("span",{className:"text-xs text-slate-400",children:"(auto-populated)"})]}),a.jsx("input",{type:"text",value:U.domain,readOnly:!0,className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold cursor-not-allowed ${p.domain?"bg-red-50 border-2 border-red-500 text-red-600":"bg-slate-100 border border-slate-200 text-slate-600"}`}),p.domain&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.domain]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Linked Project"}),a.jsxs("select",{value:U.projectId||"",onChange:fe=>{const Q=fe.target.value;K(we=>({...we,projectId:Q===""?"":Q}))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),S.map(fe=>a.jsx("option",{value:fe.id,children:fe.title},fe.id))]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1 flex items-center gap-1.5",children:[a.jsx(ks,{className:"w-3.5 h-3.5"})," Task Category"]}),a.jsxs("select",{value:I?"__new__":U.category||"",onChange:fe=>{const Q=fe.target.value;Q==="__new__"?(B(!0),K(we=>({...we,category:""}))):(B(!1),K(we=>({...we,category:Q})))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),A.map(fe=>a.jsx("option",{value:fe,children:fe},fe)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),I&&a.jsx("div",{className:"pt-1",children:a.jsx("input",{type:"text",value:U.category,onChange:fe=>K(Q=>({...Q,category:fe.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-6 py-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 font-medium"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Assignee / Lead ",a.jsx(Fe,{})]}),a.jsxs("select",{required:!0,value:i==="task"?U.assigneeId:U.ownerId,onChange:fe=>{const Q=i==="task"?"assigneeId":"ownerId";K(we=>({...we,[Q]:fe.target.value})),p[Q]&&y(we=>{const ve={...we};return delete ve[Q],ve})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none ${p.ownerId||p.assigneeId?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`,children:[a.jsx("option",{value:"",children:"Select Resource Personnel"}),j.map(fe=>a.jsx("option",{value:fe.id,children:fe.name},fe.id))]}),(p.ownerId||p.assigneeId)&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.ownerId||p.assigneeId]})]}),i==="deal"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Value ",a.jsx(Fe,{})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"relative w-32",children:a.jsx("select",{value:U.currency||xi,onChange:fe=>{K(Q=>({...Q,currency:fe.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Mp.map(fe=>a.jsxs("option",{value:fe.code,children:[fe.code," (",fe.symbol,")"]},fe.code))})}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-indigo-500 font-black text-sm",children:Xd(U.currency)}),a.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0.00",value:U.value,onChange:fe=>{K(Q=>({...Q,value:fe.target.value})),p.value&&y(Q=>{const we={...Q};return delete we.value,we})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-black transition-all ${p.value?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600 text-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600"}`})]})]}),p.value&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.value]})]}),i==="invoice"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Currency"}),a.jsx("div",{className:"relative w-full",children:a.jsx("select",{value:U.currency||xi,onChange:fe=>{K(Q=>({...Q,currency:fe.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Mp.map(fe=>a.jsxs("option",{value:fe.code,children:[fe.code," (",fe.symbol,")"]},fe.code))})})]}),i==="invoice"&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Line Items ",a.jsx(Fe,{})]}),a.jsxs("div",{className:"space-y-3",children:[U.lineItems.map((fe,Q)=>a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-[20px] space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-xs font-bold text-slate-600",children:["Item ",Q+1]}),U.lineItems.length>1&&a.jsx("button",{type:"button",onClick:()=>{const we=U.lineItems.filter((ve,Ee)=>Ee!==Q);K(ve=>({...ve,lineItems:we})),y(ve=>{const Ee={...ve};return delete Ee[`lineItem_${Q}_description`],delete Ee[`lineItem_${Q}_quantity`],delete Ee[`lineItem_${Q}_rate`],Ee})},className:"text-red-500 hover:text-red-700 text-xs font-bold",children:"Remove"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Description ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Item description",value:fe.description,onChange:we=>{const ve=[...U.lineItems];ve[Q]={...ve[Q],description:we.target.value},K(Ee=>({...Ee,lineItems:ve})),p[`lineItem_${Q}_description`]&&y(Ee=>{const pe={...Ee};return delete pe[`lineItem_${Q}_description`],pe})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${p[`lineItem_${Q}_description`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),p[`lineItem_${Q}_description`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:p[`lineItem_${Q}_description`]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Quantity ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"1",value:fe.quantity||"",onChange:we=>{const ve=parseFloat(we.target.value)||0,Ee=fe.rate||0,pe=[...U.lineItems];pe[Q]={...pe[Q],quantity:ve,amount:ve*Ee},K(ue=>({...ue,lineItems:pe})),p[`lineItem_${Q}_quantity`]&&y(ue=>{const Pe={...ue};return delete Pe[`lineItem_${Q}_quantity`],Pe})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${p[`lineItem_${Q}_quantity`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),p[`lineItem_${Q}_quantity`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:p[`lineItem_${Q}_quantity`]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Rate (",Xd(U.currency),") ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:fe.rate||"",onChange:we=>{const ve=parseFloat(we.target.value)||0,Ee=fe.quantity||0,pe=[...U.lineItems];pe[Q]={...pe[Q],rate:ve,amount:Ee*ve},K(ue=>({...ue,lineItems:pe})),p[`lineItem_${Q}_rate`]&&y(ue=>{const Pe={...ue};return delete Pe[`lineItem_${Q}_rate`],Pe})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${p[`lineItem_${Q}_rate`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),p[`lineItem_${Q}_rate`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:p[`lineItem_${Q}_rate`]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:"Amount"}),a.jsx("div",{className:"px-4 py-2 bg-indigo-50 border border-indigo-200 rounded-xl",children:a.jsxs("p",{className:"text-sm font-black text-indigo-600",children:[Xd(U.currency),((fe.quantity||0)*(fe.rate||0)).toFixed(2)]})})]})]},Q)),a.jsxs("button",{type:"button",onClick:()=>{K(fe=>({...fe,lineItems:[...fe.lineItems,{description:"",quantity:1,rate:0,amount:0}]})),p.lineItems&&y(fe=>{const Q={...fe};return delete Q.lineItems,Q})},className:"w-full px-4 py-3 bg-indigo-50 border-2 border-dashed border-indigo-300 rounded-xl text-sm font-bold text-indigo-600 hover:bg-indigo-100 hover:border-indigo-400 transition-colors flex items-center justify-center gap-2",children:[a.jsx(Nn,{className:"w-4 h-4"}),"Add Line Item"]}),p.lineItems&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.lineItems]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Total Amount (",Xd(U.currency),")"]}),a.jsxs("div",{className:"relative",children:[a.jsx(df,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"w-full pl-12 pr-6 py-4 rounded-[20px] text-sm font-black bg-indigo-50 border-2 border-indigo-200 text-indigo-600",children:[Xd(U.currency),U.lineItems.reduce((fe,Q)=>{const we=Q.amount||Q.rate*Q.quantity||0;return fe+we},0).toFixed(2)]})]})]})]}),i==="deal"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Stage ",a.jsx(Fe,{})]}),a.jsxs("select",{required:!0,value:U.stage,onChange:fe=>{K(Q=>({...Q,stage:fe.target.value})),p.stage&&y(Q=>{const we={...Q};return delete we.stage,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${p.stage?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${p.stage?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[a.jsx("option",{value:"",children:"Select Stage"}),a.jsx("option",{value:"Discovery",children:"Discovery"}),a.jsx("option",{value:"Proposal",children:"Proposal"}),a.jsx("option",{value:"Negotiation",children:"Negotiation"}),a.jsx("option",{value:"Won",children:"Won"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),p.stage&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.stage]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Engagement ",a.jsx(Fe,{})]}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g., Consulting, Implementation, Support",value:U.engagement,onChange:fe=>{K(Q=>({...Q,engagement:fe.target.value})),p.engagement&&y(Q=>{const we={...Q};return delete we.engagement,we})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${p.engagement?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),p.engagement&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.engagement]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Start Date ",a.jsx(Fe,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ka,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:U.startDate,onChange:fe=>{if(K(Q=>({...Q,startDate:fe.target.value})),p.startDate&&y(Q=>{const we={...Q};return delete we.startDate,we}),fe.target.value&&U.endDate){const Q=new Date(fe.target.value),we=new Date(U.endDate);!isNaN(Q.getTime())&&!isNaN(we.getTime())&&Q>=we?y(ve=>({...ve,endDate:"End Date must be after Start Date"})):p.endDate==="End Date must be after Start Date"&&y(ve=>{const Ee={...ve};return delete Ee.endDate,Ee})}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${p.startDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),p.startDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.startDate]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["End Date ",a.jsx(Fe,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ka,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:U.endDate,onChange:fe=>{if(K(Q=>({...Q,endDate:fe.target.value})),p.endDate&&y(Q=>{const we={...Q};return delete we.endDate,we}),U.startDate&&fe.target.value){const Q=new Date(U.startDate),we=new Date(fe.target.value);!isNaN(Q.getTime())&&!isNaN(we.getTime())&&Q>=we&&y(ve=>({...ve,endDate:"End Date must be after Start Date"}))}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${p.endDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),p.endDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.endDate]})]}),i==="invoice"&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Due Date ",a.jsx(Fe,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx(ka,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:U.expectedCloseDate,onChange:fe=>{K(Q=>({...Q,expectedCloseDate:fe.target.value})),p.expectedCloseDate&&y(Q=>{const we={...Q};return delete we.expectedCloseDate,we})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${p.expectedCloseDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),p.expectedCloseDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(sa,{className:"w-3 h-3"}),p.expectedCloseDate]})]}),i!=="invoice"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:i==="deal"?"Expected Close Date":"Due Date"}),a.jsxs("div",{className:"relative",children:[a.jsx(ka,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"date",value:U.expectedCloseDate,onChange:fe=>K(Q=>({...Q,expectedCloseDate:fe.target.value})),className:"w-full pl-12 pr-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold"})]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Priority"}),a.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:["Low","Medium","High"].map(fe=>a.jsx("button",{type:"button",onClick:()=>K({...U,priority:fe}),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${U.priority===fe?"bg-white text-indigo-600 shadow-md":"text-slate-400"}`,children:fe},fe))})]}),a.jsxs("div",{className:"md:col-span-2 space-y-3",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Description"}),a.jsx("textarea",{placeholder:"Add Context or Notes...",value:U.description,onChange:fe=>K(Q=>({...Q,description:fe.target.value})),rows:3,className:"w-full px-6 py-5 bg-slate-50 border border-slate-200 rounded-[32px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 resize-none font-medium placeholder:text-slate-300"}),a.jsxs("label",{className:"cursor-pointer group block",children:[a.jsxs("div",{className:"flex items-center gap-3 px-5 py-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-[24px] hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:ee?a.jsx(gl,{className:"w-5 h-5"}):a.jsx($u,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-black text-slate-900",children:ee?O?.name||"Image attached":"Attach Image to Note"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:"PNG, JPG, GIF (Max 10MB)"})]})]}),a.jsx("input",{ref:W,type:"file",accept:"image/*",onChange:ie,className:"hidden"})]}),ee&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:ee,alt:"Note attachment preview",className:"w-full max-h-64 object-contain rounded-[24px] border-2 border-slate-200"}),a.jsx("button",{type:"button",onClick:()=>{H(""),R(null),W.current&&(W.current.value="")},className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all shadow-lg",children:a.jsx(cr,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-6 pt-6 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:ce,className:"flex-1 py-5 text-sm font-black text-slate-400 hover:text-slate-600 transition-all uppercase tracking-[0.2em]",children:"CANCEL"}),a.jsxs("button",{type:"submit",disabled:u,className:"flex-[2] py-5 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[24px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:[u?a.jsx(jt,{className:"w-5 h-5 animate-spin"}):a.jsx(Ii,{className:"w-5 h-5"}),"SAVE"]})]})]})]}),Z&&Z.open&&a.jsxs("div",{className:"fixed inset-0 z-[100] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>!ne&&te(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Potential Duplicate Contact"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Z.duplicates.some(fe=>fe.matchType==="exact"||fe.matchReason==="email")?"A contact with this email already exists":"A contact with a similar name was found"})]}),a.jsx("button",{onClick:()=>!ne&&te(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",disabled:ne,children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"New Contact Data"}),a.jsx("p",{className:"font-semibold text-slate-900",children:Z.newContact.name||""}),Z.newContact.email&&a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:Z.newContact.email}),Z.newContact.phone&&a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Z.newContact.phone]}),Z.newContact.role&&a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Z.newContact.role]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:["Existing Contact",Z.duplicates.length>1?"s":""]}),a.jsx("div",{className:"space-y-3",children:Z.duplicates.map((fe,Q)=>a.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-slate-900",children:fe.name||""}),fe.email&&a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:fe.email}),a.jsxs("div",{className:"mt-2 space-y-1",children:[fe.role?a.jsxs("p",{className:"text-xs text-slate-500",children:[" ",fe.role]}):Z.newContact.role&&a.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Z.newContact.role," (will be added)"]}),fe.phone?a.jsxs("p",{className:"text-xs text-slate-500",children:[" ",fe.phone]}):Z.newContact.phone&&a.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Z.newContact.phone," (will be added)"]}),!fe.companyId&&Z.newContact.companyId&&a.jsx("p",{className:"text-xs text-amber-600 font-medium",children:" Organization (will be linked)"})]}),fe.matchType==="fuzzy"&&fe.similarity&&a.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium",children:[Math.round(fe.similarity*100),"% name similarity"]}),fe.matchType==="exact"&&a.jsx("p",{className:"text-xs text-red-600 mt-2 font-medium",children:"Exact email match"})]}),a.jsxs("button",{onClick:async()=>{if(!ne){J(!0);try{const we={};Z.newContact.name&&(!fe.name||fe.name.trim()===""||Z.newContact.name.trim()!==fe.name.trim())&&(we.name=Z.newContact.name),Z.newContact.email&&(!fe.email||fe.email.trim()==="")&&(we.email=Z.newContact.email),Z.newContact.phone&&(!fe.phone||fe.phone.trim()==="")&&(we.phone=Z.newContact.phone),Z.newContact.role&&(!fe.role||fe.role.trim()==="")&&(we.role=Z.newContact.role),Z.newContact.companyId&&(!fe.companyId||fe.companyId.trim()==="")&&(we.companyId=Z.newContact.companyId),Z.newContact.linkedin&&(!fe.linkedin||fe.linkedin.trim()==="")&&(we.linkedin=Z.newContact.linkedin),Object.keys(we).length>0&&await N7(fe.id,we),te(null),c("success"),s&&s(),setTimeout(()=>n(),1500)}catch(we){console.error("[MERGE] Failed:",we),m(we.message||"Merge failed"),J(!1)}}},disabled:ne,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-60 transition-all whitespace-nowrap",children:[ne?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(Fv,{className:"w-4 h-4"}),"Merge"]})]})},fe.id||Q))})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>te(null),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200 transition-colors",disabled:ne,children:"Cancel"}),a.jsxs("button",{onClick:async()=>{if(!ne){J(!0);try{await MP(Z.newContact),te(null),c("success"),s&&s(),setTimeout(()=>n(),1500)}catch(fe){console.error("[CREATE] Failed:",fe),m(fe.message||"Failed to create contact"),J(!1),te(null)}}},disabled:ne,className:"flex-[2] py-3 bg-slate-900 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60 transition-all",children:[ne?a.jsx(jt,{className:"w-5 h-5 animate-spin"}):a.jsx(Nn,{className:"w-5 h-5"}),"Create Anyway"]})]})]})})]})]})},N1e=({event:e,selectedDate:t,onClose:r,onSuccess:n})=>{const{showSuccess:s,showError:i}=Ea(),[o,l]=z.useState(!1),[c,u]=z.useState({title:"",description:"",start:"",end:"",type:"meeting",color:"#4f46e5"});z.useEffect(()=>{if(e)u({title:e.title,description:e.description||"",start:e.start.substring(0,16),end:e.end.substring(0,16),type:e.type,color:e.color||"#4f46e5"});else if(t){const d=new Date(t);d.setHours(9,0,0,0);const m=new Date(t);m.setHours(10,0,0,0),u(p=>({...p,start:d.toISOString().substring(0,16),end:m.toISOString().substring(0,16)}))}},[e,t]);const f=async d=>{d.preventDefault(),l(!0);try{e?(await ese(e.id,c),s("Event updated successfully")):(await Zae({...c,source:"local"}),s("Event created successfully")),n(),r()}catch(m){i(m.message||"Failed to save event")}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:a.jsx(ka,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e?"Edit Event":"New Entry"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Workspace Schedule"})]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Event Title"}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync w/ Client",value:c.title,onChange:d=>u({...c,title:d.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(As,{className:"w-3 h-3"})," Start"]}),a.jsx("input",{required:!0,type:"datetime-local",value:c.start,onChange:d=>u({...c,start:d.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(As,{className:"w-3 h-3"})," End"]}),a.jsx("input",{required:!0,type:"datetime-local",value:c.end,onChange:d=>u({...c,end:d.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(ks,{className:"w-3 h-3"})," Event Type"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["meeting","task","deadline","reminder"].map(d=>a.jsx("button",{type:"button",onClick:()=>u({...c,type:d}),className:`px-4 py-2 rounded-xl text-xs font-bold capitalize transition-all border ${c.type===d?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-100":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300"}`,children:d},d))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(TB,{className:"w-3 h-3"})," Description"]}),a.jsx("textarea",{placeholder:"Add details, notes, or agenda...",value:c.description,onChange:d=>u({...c,description:d.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-2xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:o,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50",children:o?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(kd,{className:"w-4 h-4"}),e?"Save Changes":"Create Entry"]})})]})]})]})})},j1e=({currentUser:e})=>{const{showSuccess:t,showError:r}=Ea(),[n,s]=z.useState(!1),[i,o]=z.useState(!1),[l,c]=z.useState(!1),[u,f]=z.useState(!1);z.useEffect(()=>{const G=setTimeout(()=>f(!0),500);return()=>clearTimeout(G)},[]);const[d,m]=z.useState({type:"bug",title:"",description:""}),[p,y]=z.useState([]),[v,g]=z.useState(!1),[b,N]=z.useState("upload"),[j,w]=z.useState(""),[S,P]=z.useState(!1),A=z.useRef(null),T=z.useRef(p);z.useEffect(()=>{T.current=p},[p]),z.useEffect(()=>()=>{T.current.forEach(G=>{G.source==="file"&&G.type==="video"&&G.preview.startsWith("blob:")&&URL.revokeObjectURL(G.preview)})},[]);const I=(G,Z=1920,te=1080,ne=.8)=>new Promise((J,ee)=>{const H=new FileReader;H.onload=O=>{const R=new Image;R.onload=()=>{let W=R.width,U=R.height;W>U?W>Z&&(U=U*Z/W,W=Z):U>te&&(W=W*te/U,U=te);const K=document.createElement("canvas");K.width=W,K.height=U;const oe=K.getContext("2d");if(!oe){ee(new Error("Failed to create canvas context"));return}oe.drawImage(R,0,0,W,U);const he=K.toDataURL("image/jpeg",ne);J(he)},R.onerror=()=>ee(new Error("Failed to load image")),R.src=O.target?.result},H.onerror=()=>ee(new Error("Failed to read file")),H.readAsDataURL(G)}),B=async G=>{const Z=G.target.files;if(!(!Z||Z.length===0)){g(!0);try{const te=[];for(let ne=0;ne<Z.length;ne++){const J=Z[ne];if(!J.type.startsWith("image/")&&!J.type.startsWith("video/")){r("Please select only image or video files");continue}if(J.size>10*1024*1024){r(`File "${J.name}" is too large. Maximum size is 10MB`);continue}const ee=J.type.startsWith("image/");let H="";ee?H=await I(J,1920,1080,.8):H=URL.createObjectURL(J),te.push({file:J,preview:H,type:ee?"image":"video",source:"file"})}y(ne=>[...ne,...te]),A.current&&(A.current.value="")}catch(te){r(te.message||"Failed to process file")}finally{g(!1)}}},E=G=>new Promise(Z=>{const te=new Image,ne=document.createElement("video"),J=[".jpg",".jpeg",".png",".gif",".webp",".svg"],ee=[".mp4",".mov",".avi",".webm",".mkv"],H=G.toLowerCase(),O=J.some(W=>H.includes(W))||H.includes("image")||H.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i),R=ee.some(W=>H.includes(W))||H.includes("video")||H.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i);!O&&!R?(te.onload=()=>Z(!0),te.onerror=()=>{ne.onloadedmetadata=()=>Z(!0),ne.onerror=()=>Z(!1),ne.src=G},te.src=G):Z(!0)}),C=async()=>{if(!j.trim()){r("Please enter a valid URL");return}try{new URL(j.trim())}catch{r("Please enter a valid URL");return}P(!0);try{if(!await E(j.trim())){r("URL does not appear to be a valid image or video");return}const Z=j.toLowerCase(),te=Z.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)||Z.includes("image")||!Z.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)&&!Z.includes("video"),ne={url:j.trim(),preview:j.trim(),type:te?"image":"video",source:"url"};y(J=>[...J,ne]),w(""),t("URL added successfully")}catch(G){r(G.message||"Failed to validate URL")}finally{P(!1)}},M=G=>{const Z=p[G];Z.source==="file"&&Z.type==="video"&&Z.preview.startsWith("blob:")&&URL.revokeObjectURL(Z.preview),y(te=>te.filter((ne,J)=>J!==G))},q=async G=>{if(G.preventDefault(),!(!d.title||!d.description)){o(!0);try{const Z=p.filter(H=>H.source==="url"),te=p.filter(H=>H.source==="file"),ne=Z.length>0?Z[0].url:"",J=await Promise.all(te.map(async H=>H.type==="image"?{type:"image",data:H.preview,filename:H.file.name,mimeType:H.file.type,source:"file"}:new Promise((O,R)=>{const W=new FileReader;W.onload=()=>{O({type:"video",data:W.result,filename:H.file.name,mimeType:H.file.type,source:"file"})},W.onerror=R,W.readAsDataURL(H.file)}))),ee={...d,userId:e?.id||"anonymous",status:"planned",url:ne||void 0,attachments:J.length>0?J:[]};await P7(ee),c(!0),t("Integrated into Roadmap"),window.dispatchEvent(new Event("refresh-roadmap")),setTimeout(()=>{c(!1),s(!1),m({type:"bug",title:"",description:""}),p.forEach(H=>{H.type==="video"&&H.preview.startsWith("blob:")&&URL.revokeObjectURL(H.preview)}),y([])},2e3)}catch(Z){console.error("[FEEDBACK] Submission failed:",Z),r(`Submission error: ${Z.message||"Registry error"}`)}finally{o(!1)}}};return a.jsxs("div",{className:"fixed right-0 top-1/2 -translate-y-1/2 z-[100] flex items-center pointer-events-none",children:[a.jsx("button",{onClick:()=>s(!n),className:`pointer-events-auto h-32 w-10 bg-slate-900 text-white flex flex-col items-center justify-center rounded-l-2xl shadow-2xl hover:w-12 group border-l border-y border-white/10 ${u?"transition-all duration-300":""} ${n?"translate-x-full":""}`,children:a.jsx("span",{className:"[writing-mode:vertical-lr] text-[11px] font-black uppercase tracking-[0.3em] rotate-180",children:"Feedback"})}),a.jsx("div",{className:`pointer-events-auto fixed right-0 top-1/2 -translate-y-1/2 w-[90vw] sm:w-80 bg-white shadow-[-20px_0_60px_rgba(0,0,0,0.15)] rounded-l-[32px] border-l border-slate-100 transform overflow-hidden ${u?"transition-all duration-500 ease-out":""} ${n?"translate-x-0":"translate-x-full"}`,style:u?void 0:{transform:n?"translateY(-50%) translateX(0)":"translateY(-50%) translateX(100%)"},children:l?a.jsxs("div",{className:"p-10 text-center animate-in zoom-in-95 duration-300",children:[a.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500 mx-auto mb-6",children:a.jsx(jn,{className:"w-10 h-10"})}),a.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Submitted"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Entry Stored Successfully"})]}):a.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[a.jsxs("div",{className:"p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white",children:a.jsx(fo,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Feedback Hub"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none mt-0.5",children:"Community Input"})]})]}),a.jsx("button",{onClick:()=>{s(!1),p.forEach(G=>{G.source==="file"&&G.type==="video"&&G.preview.startsWith("blob:")&&URL.revokeObjectURL(G.preview)}),y([]),w("")},className:"p-2 hover:bg-white rounded-full text-slate-400 transition-all",children:a.jsx(cr,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:q,className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),a.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:a.jsx(Iv,{className:"w-3 h-3"}),label:"Bug"},{id:"feature",icon:a.jsx(Gi,{className:"w-3 h-3"}),label:"Feature"},{id:"idea",icon:a.jsx(Ej,{className:"w-3 h-3"}),label:"Idea"}].map(G=>a.jsxs("button",{type:"button",onClick:()=>m({...d,type:G.id}),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${d.type===G.id?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:[G.icon," ",G.label]},G.id))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title"}),a.jsx("input",{required:!0,type:"text",placeholder:"Summary...",value:d.title,onChange:G=>m({...d,title:G.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Context"}),a.jsx("textarea",{required:!0,rows:4,placeholder:"Provide details...",value:d.description,onChange:G=>m({...d,description:G.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Attachments (Screenshots/Videos)"}),a.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-xl border border-slate-200",children:[a.jsxs("button",{type:"button",onClick:()=>N("upload"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${b==="upload"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx($u,{className:"w-3 h-3"}),"Upload"]}),a.jsxs("button",{type:"button",onClick:()=>N("url"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${b==="url"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(Vf,{className:"w-3 h-3"}),"URL"]})]}),b==="upload"&&a.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:v?a.jsx(jt,{className:"w-5 h-5 animate-spin"}):a.jsx($u,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Add Screenshot or Video"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, MP4, MOV (Max 10MB)"})]}),a.jsx("input",{ref:A,type:"file",accept:"image/*,video/*",multiple:!0,onChange:B,disabled:v,className:"hidden"})]}),b==="url"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"url",placeholder:"https://example.com/image.png or video.mp4",value:j,onChange:G=>w(G.target.value),onKeyDown:G=>{G.key==="Enter"&&!S&&j.trim()&&(G.preventDefault(),C())},disabled:S,className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 disabled:opacity-50"}),a.jsx("button",{type:"button",onClick:C,disabled:S||!j.trim(),className:"px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:S?a.jsxs(a.Fragment,{children:[a.jsx(jt,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{className:"hidden sm:inline",children:"Adding..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Vf,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Add"})]})})]}),p.length>0&&a.jsx("div",{className:"space-y-2",children:p.map((G,Z)=>a.jsx("div",{className:"relative group p-2 bg-slate-50 rounded-xl border border-slate-200",children:G.type==="image"?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:G.preview,alt:`Attachment ${Z+1}`,className:"w-16 h-16 object-cover rounded-lg border border-slate-200",onError:te=>{te.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect fill="%23e0e7ff" width="64" height="64"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%234f46e5" font-size="24"%3E%3F%3C/text%3E%3C/svg%3E'}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(gl,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:G.source==="file"?G.file.name:"Image URL"}),G.source==="url"&&a.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),a.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:G.source==="file"?`${(G.file.size/1024).toFixed(1)} KB`:G.url})]}),a.jsx("button",{type:"button",onClick:()=>M(Z),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Br,{className:"w-4 h-4"})})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(Jh,{className:"w-6 h-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(Jh,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:G.source==="file"?G.file.name:"Video URL"}),G.source==="url"&&a.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),a.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:G.source==="file"?`${(G.file.size/(1024*1024)).toFixed(2)} MB`:G.url})]}),a.jsx("button",{type:"button",onClick:()=>M(Z),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(Br,{className:"w-4 h-4"})})]})},Z))})]}),a.jsxs("button",{type:"submit",disabled:i||v||S,className:"w-full py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-widest rounded-2xl shadow-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-3 disabled:opacity-50 active:scale-95",children:[i?a.jsx(jt,{className:"w-4 h-4 animate-spin"}):a.jsx(Iu,{className:"w-4 h-4"}),"Send Feedback"]})]})]})})]})},k1e=({onBack:e})=>a.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[a.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[a.jsx(Ak,{className:"w-4 h-4"}),"Back to login"]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[a.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:a.jsx(IB,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Help & Support"})]}),a.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"})]}),a.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"How to get access"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"ImpactFlow OS is restricted to authorized personnel. To gain access:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Enter your professional email address in the login portal"}),a.jsx("li",{children:'Click "Request Access Code" to receive a one-time verification code'}),a.jsx("li",{children:"Enter the 6-digit code sent to your email"}),a.jsx("li",{children:"If your account has not been provisioned yet, contact your administrator or IT team"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"I didn't receive the code"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"If you haven't received your verification code:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Check your spam or junk folder"}),a.jsx("li",{children:"Codes are valid for a limited time - request a new code if expired"}),a.jsx("li",{children:'Click "Request New Code" on the verification screen'}),a.jsx("li",{children:"Ensure your email is correctly provisioned in the system"}),a.jsx("li",{children:"Contact your administrator if the problem persists"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Troubleshooting"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account not found"}),a.jsx("p",{className:"leading-relaxed",children:`If you see an "Account not found" error, your account may not have been provisioned yet. Contact your organization's IT administrator to request access.`})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Code expired"}),a.jsx("p",{className:"leading-relaxed",children:'Verification codes expire after a set period for security. Simply request a new code using the "Request New Code" button.'})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Invalid code"}),a.jsx("p",{className:"leading-relaxed",children:"Make sure you're entering the most recent code sent to your email. Each new code request invalidates previous codes."})]})]})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(gi,{className:"w-5 h-5 text-indigo-400"}),"Contact support"]}),a.jsx("p",{className:"leading-relaxed mb-3",children:"For access issues, technical support, or account questions:"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Contact your organization's IT administrator"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsxs("span",{children:["Email: ",a.jsx("a",{href:"mailto:support@impact247.com",className:"text-indigo-400 hover:underline",children:"support@impact247.com"})]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Include your email address and a description of the issue"})]})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),a.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),S1e=({onBack:e})=>a.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[a.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[a.jsx(Ak,{className:"w-4 h-4"}),"Back to login"]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[a.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:a.jsx(ax,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Privacy Policy"})]}),a.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"}),a.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Last updated: February 2026"})]}),a.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[a.jsx("div",{children:a.jsx("p",{className:"leading-relaxed",children:'This Privacy Policy describes how ImpactFlow OS and Impact 24x7 Enterprise ("we," "our," or "us") collect, use, disclose, and protect your information when you use our platform and services.'})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(Ga,{className:"w-5 h-5 text-indigo-400"}),"Information We Collect"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account Information"}),a.jsx("p",{className:"leading-relaxed",children:"We collect information you provide when creating an account or signing in, including your professional email address, name, and any profile information you choose to provide."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Usage Data"}),a.jsx("p",{className:"leading-relaxed",children:"We automatically collect information about how you use ImpactFlow OS, including features accessed, actions taken, and time spent on the platform. This helps us improve our services."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Device Information"}),a.jsx("p",{className:"leading-relaxed",children:"We may collect information about your device, browser type, IP address, and operating system for security and compatibility purposes."})]}),a.jsx("p",{className:"leading-relaxed mt-3 text-indigo-400 font-medium",children:"We do not sell your personal information to third parties."})]})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(VB,{className:"w-5 h-5 text-indigo-400"}),"How We Use Your Information"]}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"To authenticate your access and maintain your account"}),a.jsx("li",{children:"To personalize your experience and provide relevant features"}),a.jsx("li",{children:"To provide customer support and respond to your inquiries"}),a.jsx("li",{children:"To improve our services, features, and user experience"}),a.jsx("li",{children:"To ensure security and prevent fraud or abuse"}),a.jsx("li",{children:"To comply with legal obligations and enforce our terms"}),a.jsx("li",{children:"Access is role-based and limited to what is necessary for your job function"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Security"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We implement industry-standard security measures to protect your information:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Encryption in transit (TLS/SSL) and at rest"}),a.jsx("li",{children:"Secure authentication mechanisms including multi-factor authentication"}),a.jsx("li",{children:"Access controls and role-based permissions"}),a.jsx("li",{children:"Regular security audits and monitoring"}),a.jsx("li",{children:"Restricted access to authorized personnel only"})]}),a.jsx("p",{className:"leading-relaxed mt-3",children:"While we strive to protect your information, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security but are committed to maintaining the highest standards."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Your Rights"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"Depending on your location, you may have certain rights regarding your personal information:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Access:"})," Request access to your personal data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Correction:"})," Request correction of inaccurate or incomplete data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Deletion:"})," Request deletion of your personal data where applicable by law"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]})]}),a.jsxs("p",{className:"leading-relaxed mt-3",children:["To exercise these rights, contact your administrator or our data protection contact at"," ",a.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"}),". Enterprise accounts may have additional policies defined by your organization."]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Cookies and Similar Technologies"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We use essential cookies and local storage for:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Authentication and session management"}),a.jsx("li",{children:"Remembering your preferences"}),a.jsx("li",{children:"Security and fraud prevention"})]}),a.jsx("p",{className:"leading-relaxed mt-3",children:"We do not use third-party advertising cookies or tracking cookies. You can manage cookie preferences in your browser settings, though disabling essential cookies may affect platform functionality."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Sharing and Disclosure"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We may share your information only in the following circumstances:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"With your organization's administrators as part of enterprise account management"}),a.jsx("li",{children:"With service providers who assist in operating our platform (under strict confidentiality agreements)"}),a.jsx("li",{children:"When required by law or to protect our rights and safety"}),a.jsx("li",{children:"In connection with a business transfer (merger, acquisition, etc.)"})]}),a.jsx("p",{className:"leading-relaxed mt-3 font-medium text-indigo-400",children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Retention"}),a.jsx("p",{className:"leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you request deletion, we will delete or anonymize your data in accordance with applicable laws, except where retention is required for legal or legitimate business purposes."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"International Data Transfers"}),a.jsx("p",{className:"leading-relaxed",children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable data protection laws."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Children's Privacy"}),a.jsx("p",{className:"leading-relaxed",children:"ImpactFlow OS is intended for business use and is not directed to individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Changes to This Policy"}),a.jsx("p",{className:"leading-relaxed",children:'We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. The "Last updated" date at the top indicates when the policy was last revised. We will notify you of material changes by posting the updated policy on this page and, where appropriate, through other communication channels. Continued use of ImpactFlow OS after changes constitutes acceptance of the updated policy.'})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(gi,{className:"w-5 h-5 text-indigo-400"}),"Contact Us"]}),a.jsx("p",{className:"leading-relaxed mb-3",children:"If you have questions, concerns, or requests regarding this Privacy Policy or our data practices:"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsxs("span",{children:["Email: ",a.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"})]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Contact your organization's data protection officer or IT administrator"})]})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),a.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),_1e=new Dse({defaultOptions:{queries:{staleTime:30*1e3,gcTime:300*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0,refetchInterval:60*1e3,retry:1,placeholderData:e=>e},mutations:{retry:1}}}),A1e=({children:e})=>a.jsx(Lse,{client:_1e,children:e}),E1e=()=>{const[e,t]=z.useState(()=>localStorage.getItem("activeTab")||"dashboard"),[r,n]=z.useState(!1),[s,i]=z.useState(null),[o,l]=z.useState(!1),[c,u]=z.useState(!1),[f,d]=z.useState(""),[m,p]=z.useState(!1),[y,v]=z.useState({isOpen:!1,type:"deal"}),[g,b]=z.useState({isOpen:!1,event:null}),[N,j]=z.useState([]),[w,S]=z.useState(!1),[P,A]=z.useState(!1),T=N.filter(R=>!R.read).length,I=z.useRef(null),B=z.useCallback(async(R=!1)=>{try{const W=s||JSON.parse(localStorage.getItem("user_data")||"null");if(!W?.id)return;R&&A(!0);const U=await C7(W.id,20),K=U?.data||U||[],oe=(Array.isArray(K)?K:[]).map(he=>{let ie="Just now";if(he.createdAt){const ce=new Date(he.createdAt),le=new Date().getTime()-ce.getTime(),He=Math.floor(le/6e4),Fe=Math.floor(le/36e5),fe=Math.floor(le/864e5);He<1?ie="Just now":He<60?ie=`${He}m ago`:Fe<24?ie=`${Fe}h ago`:fe<7?ie=`${fe}d ago`:ie=ce.toLocaleDateString()}return{id:he.id,userId:he.userId,type:he.type||"system",title:he.title,message:he.message,timestamp:ie,read:!!he.read,link:he.link||void 0}});j(oe)}catch(W){console.error("[NOTIFICATIONS] Failed to load notifications",W)}finally{R&&A(!1)}},[s]);z.useEffect(()=>{(s||JSON.parse(localStorage.getItem("user_data")||"null"))?.id},[s]),z.useEffect(()=>{B();const R=setInterval(()=>{B(!1)},3e4),W=()=>{B(!0)};return window.addEventListener("refresh-notifications",W),()=>{clearInterval(R),window.removeEventListener("refresh-notifications",W)}},[B]),z.useEffect(()=>{w&&B(!0)},[w,B]),z.useEffect(()=>{const R=()=>{const W=window.innerWidth<1024;l(W),n(!W)};return R(),window.addEventListener("resize",R),()=>window.removeEventListener("resize",R)},[]),z.useEffect(()=>{const R=new URLSearchParams(window.location.search),W=R.get("tab");if(W&&["dashboard","schedule","crm","pipeline","projects","tasks","invoices","roadmap","users","settings","integrations"].includes(W)){t(W),localStorage.setItem("activeTab",W),R.delete("tab");const K=R.toString()?`${window.location.pathname}?${R.toString()}`:window.location.pathname;window.history.replaceState({},"",K)}},[]),z.useEffect(()=>{const R=W=>{I.current&&!I.current.contains(W.target)&&S(!1)};return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const E=async()=>{await nne(),window.location.reload()},C=async R=>{const W=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(W){j(U=>U.map(K=>K.id===R?{...K,read:!0}:K));try{await T7(R,W)}catch{}}},M=async()=>{const R=s?.id||JSON.parse(localStorage.getItem("user_data")||"null")?.id;if(R){j(W=>W.map(U=>({...U,read:!0})));try{await O7(R)}catch{}}},q=(R,W)=>{v({isOpen:!0,type:R,stage:W||void 0})},G=(R,W)=>{b({isOpen:!0,event:null,selectedDate:W})},Z=()=>{b({isOpen:!1,event:null})},te=()=>{e==="schedule"&&window.dispatchEvent(new CustomEvent("refresh-schedule"))},ne=typeof window<"u"?window.location.pathname:"",[J,ee]=z.useState(()=>ne==="/privacy-policy"||ne==="/privacy"?"privacy":ne==="/help"?"help":null);if(z.useEffect(()=>{const R=window.location.pathname;ee(R==="/privacy-policy"||R==="/privacy"?"privacy":R==="/help"?"help":null)},[]),z.useEffect(()=>{const R=()=>{const W=window.location.pathname;ee(W==="/privacy-policy"||W==="/privacy"?"privacy":W==="/help"?"help":null)};return window.addEventListener("popstate",R),()=>window.removeEventListener("popstate",R)},[]),J==="privacy")return a.jsx(S1e,{onBack:()=>{window.history.pushState({},"","/"),ee(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(J==="help")return a.jsx(k1e,{onBack:()=>{window.history.pushState({},"","/"),ee(null),window.dispatchEvent(new PopStateEvent("popstate"))}});const H=()=>{switch(e){case"dashboard":return a.jsx(ZP,{onNavigate:t});case"schedule":return a.jsx(Eve,{currentUser:s,onNavigate:t,onNewEvent:()=>G()});case"crm":return a.jsx(aie,{onNavigate:t,onAddCompany:()=>q("company"),onAddContact:()=>q("contact"),externalSearchQuery:f});case"pipeline":return a.jsx(sie,{onNavigate:t,onNewDeal:R=>q("deal",R),currentUser:s});case"projects":return a.jsx(mie,{onNavigate:t,onCreateProject:()=>q("project"),currentUser:s});case"tasks":return a.jsx(jge,{onCreateTask:()=>q("task"),currentUser:s});case"invoices":return a.jsx(wve,{onCreateInvoice:()=>q("invoice"),currentUser:s});case"expenses":return a.jsx(u1e,{currentUser:s});case"budget":return a.jsx(d1e,{currentUser:s});case"contracts":return a.jsx(f1e,{currentUser:s});case"inbox":return a.jsx(F9,{currentUser:s});case"roadmap":return a.jsx(c1e,{currentUser:s,onNavigate:t});case"users":return a.jsx(Nve,{});case"settings":return a.jsx(_ve,{currentUser:s,onUserUpdate:i});case"data-hygiene":return a.jsx(Ave,{currentUser:s});case"integrations":return a.jsx(Cve,{});case"notifications":return a.jsx(x1e,{currentUser:s,onNavigate:t});default:return a.jsx(ZP,{onNavigate:t})}},O=R=>{t(R),localStorage.setItem("activeTab",R),d(""),o&&n(!1)};return z.useEffect(()=>{const R=setTimeout(()=>u(!0),400);return()=>clearTimeout(R)},[]),a.jsx(A1e,{children:a.jsx(ose,{children:a.jsx(p1e,{onUserLoaded:i,children:a.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden font-sans text-slate-900",children:[o&&r&&a.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 ${c?"transition-opacity duration-300":""}`,onClick:()=>n(!1)}),a.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          bg-white border-r border-slate-200
          ${c?"transition-all duration-300":""}
          ${r?"w-64 translate-x-0":"w-0 -translate-x-full lg:w-20 lg:translate-x-0"} 
          flex flex-col overflow-hidden
        `,children:[a.jsxs("div",{className:"p-6 flex items-center justify-between gap-3 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-indigo-100 shadow-lg",children:"I"}),r&&a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"ImpactFlow"})]}),o&&a.jsx("button",{onClick:()=>n(!1),className:"lg:hidden p-1 rounded-lg hover:bg-slate-100 transition-colors",children:a.jsx(cr,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto mt-2",children:lU.map(R=>a.jsxs("button",{onClick:()=>O(R.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${e===R.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[a.jsx("div",{className:"shrink-0",children:R.icon}),r&&a.jsx("span",{className:"font-medium whitespace-nowrap",children:R.label})]},R.id))}),a.jsxs("div",{className:"p-4 border-t border-slate-200 shrink-0",children:[a.jsxs("button",{onClick:()=>O("settings"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-colors ${e==="settings"?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:bg-slate-50"}`,children:[a.jsx(oD,{className:"w-5 h-5"}),r&&a.jsx("span",{className:"font-medium",children:"Settings"})]}),s?.role==="Admin"&&a.jsxs("button",{onClick:()=>O("data-hygiene"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-colors ${e==="data-hygiene"?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:bg-slate-50"}`,children:[a.jsx(vy,{className:"w-5 h-5"}),r&&a.jsx("span",{className:"font-medium",children:"Data Hygiene"})]}),a.jsxs("button",{onClick:()=>p(!0),className:"mt-4 w-full flex items-center gap-3 px-3 py-2 hover:bg-red-50 text-slate-500 hover:text-red-600 rounded-xl transition-all group text-left",children:[a.jsx(sD,{className:"w-5 h-5 shrink-0"}),r&&a.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),a.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden w-full relative",children:[a.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-6 shrink-0 relative",children:[a.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[a.jsx("button",{onClick:()=>n(!r),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(KB,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{className:"relative group hidden sm:block",children:[a.jsx(Sd,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-500"}),a.jsx("input",{type:"text",placeholder:"Search Current View...",value:f,onChange:R=>d(R.target.value),className:"pl-10 pr-4 py-2 bg-slate-50 border-none rounded-lg text-sm w-40 lg:w-80 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[a.jsxs("div",{className:"relative",ref:I,children:[a.jsxs("button",{onClick:()=>S(!w),className:`relative p-2 hover:bg-slate-100 rounded-lg transition-colors ${w?"bg-slate-100":""}`,children:[a.jsx(gy,{className:`w-5 h-5 transition-colors ${T>0?"text-indigo-600":"text-slate-600"} ${P?"animate-pulse":""}`}),T>0&&a.jsx("span",{className:"absolute top-1.5 right-1.5 flex h-4 w-4",children:a.jsx("span",{className:`relative inline-flex items-center justify-center rounded-full h-4 w-4 bg-red-500 text-white text-[10px] font-bold border-2 border-white ${P?"animate-pulse":""}`,children:T})})]}),w&&a.jsx(m1e,{notifications:N,onMarkAsRead:C,onMarkAllAsRead:M,onRefresh:()=>B(!0),isRefreshing:P,onClose:()=>S(!1),onViewAll:()=>{t("notifications"),localStorage.setItem("activeTab","notifications")}})]}),a.jsxs("button",{onClick:()=>q("deal"),className:"px-3 lg:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[a.jsx(Nn,{className:"w-4 h-4 shrink-0"}),a.jsx("span",{className:"hidden sm:inline",children:"Quick Create"})]})]})]}),a.jsx("section",{className:`flex-1 min-h-0 flex flex-col p-4 lg:p-8 pb-24 lg:pb-10 ${e==="pipeline"?"overflow-hidden":"overflow-y-auto"}`,children:a.jsx("div",{className:`w-full min-w-0 ${e==="inbox"?"min-h-0 flex-1 flex flex-col":e==="pipeline"?"min-h-0 flex flex-col h-full":""}`,children:H()})}),a.jsx(j1e,{currentUser:s})]}),y.isOpen&&a.jsx(w1e,{type:y.type,stage:y.stage,onClose:()=>v(R=>({...R,isOpen:!1})),onSuccess:()=>{(y.type==="contact"||y.type==="company")&&window.dispatchEvent(new Event("refresh-crm")),y.type==="deal"&&window.dispatchEvent(new Event("refresh-pipeline")),y.type==="project"&&window.dispatchEvent(new Event("refresh-projects")),y.type==="task"?window.dispatchEvent(new Event("refresh-tasks")):y.type==="invoice"&&window.dispatchEvent(new Event("refresh-invoices"))}}),g.isOpen&&a.jsx(N1e,{event:g.event,selectedDate:g.selectedDate,onClose:Z,onSuccess:te}),m&&a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>p(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("div",{children:a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm Logout"})}),a.jsx("button",{onClick:()=>p(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:a.jsx(cr,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to logout from your ImpactFlow workspace?"}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>p(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsx("button",{onClick:E,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 flex items-center justify-center gap-2",children:"Logout"})]})]})]})})]})]})})})})};function C1e(){const[e,t]=z.useState("loading"),[r,n]=z.useState(!1);z.useEffect(()=>{const c=Date.now();let u=!1;const f=()=>{if(u)return;const p=Date.now()-c,y=Math.max(0,850-p);setTimeout(()=>{u||t("fading")},y)},d=()=>{if(u)return;(document.fonts?.ready??Promise.resolve()).then(()=>{u||setTimeout(f,1100)}).catch(()=>setTimeout(f,1100))};if(document.readyState==="complete")return d(),()=>{u=!0};window.addEventListener("load",d);const m=setTimeout(()=>{u||t("fading")},4500);return()=>{u=!0,window.removeEventListener("load",d),clearTimeout(m)}},[]),z.useEffect(()=>{if(e!=="fading")return;const i=setTimeout(()=>t("done"),380);return()=>clearTimeout(i)},[e]),z.useEffect(()=>{if(e!=="done")return;const i=setTimeout(()=>n(!0),480);return()=>clearTimeout(i)},[e]);const s=e==="loading"||e==="fading";return a.jsxs(a.Fragment,{children:[(e==="fading"||e==="done")&&a.jsx("div",{style:{opacity:r?1:0,transition:"opacity 0.4s ease-out",width:"100%",height:"100%",minHeight:"100vh"},children:a.jsx(E1e,{})}),s&&a.jsxs("div",{role:"presentation","aria-hidden":"true",style:{position:"fixed",inset:0,zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(248, 250, 252)",fontFamily:"'Inter', sans-serif",color:"rgb(15, 23, 42)",opacity:e==="fading"?0:1,pointerEvents:e==="fading"?"none":"auto",transition:"opacity 0.35s ease-out"},children:[a.jsx("div",{style:{width:48,height:48,border:"4px solid rgb(226, 232, 240)",borderTopColor:"rgb(99, 102, 241)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),a.jsx("p",{style:{marginTop:16,fontSize:14,fontWeight:600,color:"rgb(100, 116, 139)"},children:"Loading ImpactFlow..."}),a.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker-app.js").then(e=>{console.log("[SW] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.warn("[SW] Service Worker registration failed:",e)})});const M9=document.getElementById("root");if(!M9)throw new Error("Could not find root element to mount to");const T1e=kB.createRoot(M9);T1e.render(a.jsx(at.StrictMode,{children:a.jsx(C1e,{})}));export{_a as _,Hg as c,Aa as g};
