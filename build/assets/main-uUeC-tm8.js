var VA=e=>{throw TypeError(e)};var XN=(e,t,r)=>t.has(e)||VA("Cannot "+r);var Ze=(e,t,r)=>(XN(e,t,"read from private field"),r?r.call(e):t.get(e)),Er=(e,t,r)=>t.has(e)?VA("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),or=(e,t,r,n)=>(XN(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),fn=(e,t,r)=>(XN(e,t,"access private method"),r);var Bb=(e,t,r,n)=>({set _(s){or(e,t,s,r)},get _(){return Ze(e,t,n)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var Pl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var _D={exports:{}},p5={},AD={exports:{}},Nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G1=Symbol.for("react.element"),GU=Symbol.for("react.portal"),KU=Symbol.for("react.fragment"),XU=Symbol.for("react.strict_mode"),YU=Symbol.for("react.profiler"),QU=Symbol.for("react.provider"),JU=Symbol.for("react.context"),ZU=Symbol.for("react.forward_ref"),ez=Symbol.for("react.suspense"),tz=Symbol.for("react.memo"),rz=Symbol.for("react.lazy"),GA=Symbol.iterator;function nz(e){return e===null||typeof e!="object"?null:(e=GA&&e[GA]||e["@@iterator"],typeof e=="function"?e:null)}var CD={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ED=Object.assign,TD={};function Ex(e,t,r){this.props=e,this.context=t,this.refs=TD,this.updater=r||CD}Ex.prototype.isReactComponent={};Ex.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Ex.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function OD(){}OD.prototype=Ex.prototype;function US(e,t,r){this.props=e,this.context=t,this.refs=TD,this.updater=r||CD}var zS=US.prototype=new OD;zS.constructor=US;ED(zS,Ex.prototype);zS.isPureReactComponent=!0;var KA=Array.isArray,PD=Object.prototype.hasOwnProperty,qS={current:null},ID={key:!0,ref:!0,__self:!0,__source:!0};function DD(e,t,r){var n,s={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)PD.call(t,n)&&!ID.hasOwnProperty(n)&&(s[n]=t[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:G1,type:e,key:i,ref:o,props:s,_owner:qS.current}}function az(e,t){return{$$typeof:G1,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function HS(e){return typeof e=="object"&&e!==null&&e.$$typeof===G1}function sz(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var XA=/\/+/g;function YN(e,t){return typeof e=="object"&&e!==null&&e.key!=null?sz(""+e.key):t.toString(36)}function Wy(e,t,r,n,s){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case G1:case GU:o=!0}}if(o)return o=e,s=s(o),e=n===""?"."+YN(o,0):n,KA(s)?(r="",e!=null&&(r=e.replace(XA,"$&/")+"/"),Wy(s,t,r,"",function(d){return d})):s!=null&&(HS(s)&&(s=az(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(XA,"$&/")+"/")+e)),t.push(s)),1;if(o=0,n=n===""?".":n+":",KA(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+YN(i,l);o+=Wy(i,t,r,c,s)}else if(c=nz(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+YN(i,l++),o+=Wy(i,t,r,c,s);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function $b(e,t,r){if(e==null)return e;var n=[],s=0;return Wy(e,n,"","",function(i){return t.call(r,i,s++)}),n}function iz(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Io={current:null},Vy={transition:null},oz={ReactCurrentDispatcher:Io,ReactCurrentBatchConfig:Vy,ReactCurrentOwner:qS};function LD(){throw Error("act(...) is not supported in production builds of React.")}Nn.Children={map:$b,forEach:function(e,t,r){$b(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $b(e,function(){t++}),t},toArray:function(e){return $b(e,function(t){return t})||[]},only:function(e){if(!HS(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Nn.Component=Ex;Nn.Fragment=KU;Nn.Profiler=YU;Nn.PureComponent=US;Nn.StrictMode=XU;Nn.Suspense=ez;Nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oz;Nn.act=LD;Nn.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=ED({},e.props),s=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=qS.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)PD.call(t,c)&&!ID.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:G1,type:e.type,key:s,ref:i,props:n,_owner:o}};Nn.createContext=function(e){return e={$$typeof:JU,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QU,_context:e},e.Consumer=e};Nn.createElement=DD;Nn.createFactory=function(e){var t=DD.bind(null,e);return t.type=e,t};Nn.createRef=function(){return{current:null}};Nn.forwardRef=function(e){return{$$typeof:ZU,render:e}};Nn.isValidElement=HS;Nn.lazy=function(e){return{$$typeof:rz,_payload:{_status:-1,_result:e},_init:iz}};Nn.memo=function(e,t){return{$$typeof:tz,type:e,compare:t===void 0?null:t}};Nn.startTransition=function(e){var t=Vy.transition;Vy.transition={};try{e()}finally{Vy.transition=t}};Nn.unstable_act=LD;Nn.useCallback=function(e,t){return Io.current.useCallback(e,t)};Nn.useContext=function(e){return Io.current.useContext(e)};Nn.useDebugValue=function(){};Nn.useDeferredValue=function(e){return Io.current.useDeferredValue(e)};Nn.useEffect=function(e,t){return Io.current.useEffect(e,t)};Nn.useId=function(){return Io.current.useId()};Nn.useImperativeHandle=function(e,t,r){return Io.current.useImperativeHandle(e,t,r)};Nn.useInsertionEffect=function(e,t){return Io.current.useInsertionEffect(e,t)};Nn.useLayoutEffect=function(e,t){return Io.current.useLayoutEffect(e,t)};Nn.useMemo=function(e,t){return Io.current.useMemo(e,t)};Nn.useReducer=function(e,t,r){return Io.current.useReducer(e,t,r)};Nn.useRef=function(e){return Io.current.useRef(e)};Nn.useState=function(e){return Io.current.useState(e)};Nn.useSyncExternalStore=function(e,t,r){return Io.current.useSyncExternalStore(e,t,r)};Nn.useTransition=function(){return Io.current.useTransition()};Nn.version="18.3.1";AD.exports=Nn;var P=AD.exports;const st=fa(P);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lz=P,cz=Symbol.for("react.element"),dz=Symbol.for("react.fragment"),uz=Object.prototype.hasOwnProperty,fz=lz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hz={key:!0,ref:!0,__self:!0,__source:!0};function FD(e,t,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)uz.call(t,n)&&!hz.hasOwnProperty(n)&&(s[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)s[n]===void 0&&(s[n]=t[n]);return{$$typeof:cz,type:e,key:i,ref:o,props:s,_owner:fz.current}}p5.Fragment=dz;p5.jsx=FD;p5.jsxs=FD;_D.exports=p5;var a=_D.exports,A4={},MD={exports:{}},Bl={},RD={exports:{}},BD={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(J,U){var X=J.length;J.push(U);e:for(;0<X;){var W=X-1>>>1,E=J[W];if(0<s(E,U))J[W]=U,J[X]=E,X=W;else break e}}function r(J){return J.length===0?null:J[0]}function n(J){if(J.length===0)return null;var U=J[0],X=J.pop();if(X!==U){J[0]=X;e:for(var W=0,E=J.length,R=E>>>1;W<R;){var q=2*(W+1)-1,L=J[q],H=q+1,se=J[H];if(0>s(L,X))H<E&&0>s(se,L)?(J[W]=se,J[H]=X,W=H):(J[W]=L,J[q]=X,W=q);else if(H<E&&0>s(se,X))J[W]=se,J[H]=X,W=H;else break e}}return U}function s(J,U){var X=J.sortIndex-U.sortIndex;return X!==0?X:J.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,u=null,p=3,h=!1,m=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(J){for(var U=r(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=J)n(d),U.sortIndex=U.expirationTime,t(c,U);else break;U=r(d)}}function y(J){if(g=!1,w(J),!m)if(r(c)!==null)m=!0,Y(N);else{var U=r(d);U!==null&&V(y,U.startTime-J)}}function N(J,U){m=!1,g&&(g=!1,v(_),_=-1),h=!0;var X=p;try{for(w(U),u=r(c);u!==null&&(!(u.expirationTime>U)||J&&!A());){var W=u.callback;if(typeof W=="function"){u.callback=null,p=u.priorityLevel;var E=W(u.expirationTime<=U);U=e.unstable_now(),typeof E=="function"?u.callback=E:u===r(c)&&n(c),w(U)}else n(c);u=r(c)}if(u!==null)var R=!0;else{var q=r(d);q!==null&&V(y,q.startTime-U),R=!1}return R}finally{u=null,p=X,h=!1}}var S=!1,j=null,_=-1,T=5,D=-1;function A(){return!(e.unstable_now()-D<T)}function C(){if(j!==null){var J=e.unstable_now();D=J;var U=!0;try{U=j(!0,J)}finally{U?M():(S=!1,j=null)}}else S=!1}var M;if(typeof b=="function")M=function(){b(C)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,B=F.port2;F.port1.onmessage=C,M=function(){B.postMessage(null)}}else M=function(){x(C,0)};function Y(J){j=J,S||(S=!0,M())}function V(J,U){_=x(function(){J(e.unstable_now())},U)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(J){J.callback=null},e.unstable_continueExecution=function(){m||h||(m=!0,Y(N))},e.unstable_forceFrameRate=function(J){0>J||125<J?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<J?Math.floor(1e3/J):5},e.unstable_getCurrentPriorityLevel=function(){return p},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(J){switch(p){case 1:case 2:case 3:var U=3;break;default:U=p}var X=p;p=U;try{return J()}finally{p=X}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(J,U){switch(J){case 1:case 2:case 3:case 4:case 5:break;default:J=3}var X=p;p=J;try{return U()}finally{p=X}},e.unstable_scheduleCallback=function(J,U,X){var W=e.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?W+X:W):X=W,J){case 1:var E=-1;break;case 2:E=250;break;case 5:E=1073741823;break;case 4:E=1e4;break;default:E=5e3}return E=X+E,J={id:f++,callback:U,priorityLevel:J,startTime:X,expirationTime:E,sortIndex:-1},X>W?(J.sortIndex=X,t(d,J),r(c)===null&&J===r(d)&&(g?(v(_),_=-1):g=!0,V(y,X-W))):(J.sortIndex=E,t(c,J),m||h||(m=!0,Y(N))),J},e.unstable_shouldYield=A,e.unstable_wrapCallback=function(J){var U=p;return function(){var X=p;p=U;try{return J.apply(this,arguments)}finally{p=X}}}})(BD);RD.exports=BD;var pz=RD.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mz=P,Fl=pz;function Wt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $D=new Set,Sv={};function sp(e,t){Xm(e,t),Xm(e+"Capture",t)}function Xm(e,t){for(Sv[e]=t,e=0;e<t.length;e++)$D.add(t[e])}var Mu=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),C4=Object.prototype.hasOwnProperty,xz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,YA={},QA={};function gz(e){return C4.call(QA,e)?!0:C4.call(YA,e)?!1:xz.test(e)?QA[e]=!0:(YA[e]=!0,!1)}function vz(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function bz(e,t,r,n){if(t===null||typeof t>"u"||vz(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Do(e,t,r,n,s,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Fi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Fi[e]=new Do(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Fi[t]=new Do(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Fi[e]=new Do(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Fi[e]=new Do(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Fi[e]=new Do(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Fi[e]=new Do(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Fi[e]=new Do(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Fi[e]=new Do(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Fi[e]=new Do(e,5,!1,e.toLowerCase(),null,!1,!1)});var WS=/[\-:]([a-z])/g;function VS(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(WS,VS);Fi[t]=new Do(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(WS,VS);Fi[t]=new Do(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(WS,VS);Fi[t]=new Do(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Fi[e]=new Do(e,1,!1,e.toLowerCase(),null,!1,!1)});Fi.xlinkHref=new Do("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Fi[e]=new Do(e,1,!1,e.toLowerCase(),null,!0,!0)});function GS(e,t,r,n){var s=Fi.hasOwnProperty(t)?Fi[t]:null;(s!==null?s.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(bz(t,r,s,n)&&(r=null),n||s===null?gz(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):s.mustUseProperty?e[s.propertyName]=r===null?s.type===3?!1:"":r:(t=s.attributeName,n=s.attributeNamespace,r===null?e.removeAttribute(t):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Gu=mz.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ub=Symbol.for("react.element"),tm=Symbol.for("react.portal"),rm=Symbol.for("react.fragment"),KS=Symbol.for("react.strict_mode"),E4=Symbol.for("react.profiler"),UD=Symbol.for("react.provider"),zD=Symbol.for("react.context"),XS=Symbol.for("react.forward_ref"),T4=Symbol.for("react.suspense"),O4=Symbol.for("react.suspense_list"),YS=Symbol.for("react.memo"),Sf=Symbol.for("react.lazy"),qD=Symbol.for("react.offscreen"),JA=Symbol.iterator;function pg(e){return e===null||typeof e!="object"?null:(e=JA&&e[JA]||e["@@iterator"],typeof e=="function"?e:null)}var ts=Object.assign,QN;function qg(e){if(QN===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);QN=t&&t[1]||""}return`
`+QN+e}var JN=!1;function ZN(e,t){if(!e||JN)return"";JN=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var n=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){n=d}e.call(t.prototype)}else{try{throw Error()}catch(d){n=d}e()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{JN=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?qg(e):""}function yz(e){switch(e.tag){case 5:return qg(e.type);case 16:return qg("Lazy");case 13:return qg("Suspense");case 19:return qg("SuspenseList");case 0:case 2:case 15:return e=ZN(e.type,!1),e;case 11:return e=ZN(e.type.render,!1),e;case 1:return e=ZN(e.type,!0),e;default:return""}}function P4(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case rm:return"Fragment";case tm:return"Portal";case E4:return"Profiler";case KS:return"StrictMode";case T4:return"Suspense";case O4:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case zD:return(e.displayName||"Context")+".Consumer";case UD:return(e._context.displayName||"Context")+".Provider";case XS:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case YS:return t=e.displayName||null,t!==null?t:P4(e.type)||"Memo";case Sf:t=e._payload,e=e._init;try{return P4(e(t))}catch{}}return null}function wz(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return P4(t);case 8:return t===KS?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function c0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function HD(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Nz(e){var t=HD(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function zb(e){e._valueTracker||(e._valueTracker=Nz(e))}function WD(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=HD(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function m2(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function I4(e,t){var r=t.checked;return ts({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ZA(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=c0(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function VD(e,t){t=t.checked,t!=null&&GS(e,"checked",t,!1)}function D4(e,t){VD(e,t);var r=c0(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?L4(e,t.type,r):t.hasOwnProperty("defaultValue")&&L4(e,t.type,c0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function eC(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function L4(e,t,r){(t!=="number"||m2(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Hg=Array.isArray;function bm(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+c0(r),t=null,s=0;s<e.length;s++){if(e[s].value===r){e[s].selected=!0,n&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function F4(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Wt(91));return ts({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function tC(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Wt(92));if(Hg(r)){if(1<r.length)throw Error(Wt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:c0(r)}}function GD(e,t){var r=c0(t.value),n=c0(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function rC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function KD(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function M4(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?KD(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var qb,XD=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,s){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(qb=qb||document.createElement("div"),qb.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=qb.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _v(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ev={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jz=["Webkit","ms","Moz","O"];Object.keys(ev).forEach(function(e){jz.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ev[t]=ev[e]})});function YD(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ev.hasOwnProperty(e)&&ev[e]?(""+t).trim():t+"px"}function QD(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=YD(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,s):e[r]=s}}var kz=ts({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function R4(e,t){if(t){if(kz[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Wt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Wt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Wt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Wt(62))}}function B4(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $4=null;function QS(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var U4=null,ym=null,wm=null;function nC(e){if(e=Y1(e)){if(typeof U4!="function")throw Error(Wt(280));var t=e.stateNode;t&&(t=b5(t),U4(e.stateNode,e.type,t))}}function JD(e){ym?wm?wm.push(e):wm=[e]:ym=e}function ZD(){if(ym){var e=ym,t=wm;if(wm=ym=null,nC(e),t)for(e=0;e<t.length;e++)nC(t[e])}}function eL(e,t){return e(t)}function tL(){}var ej=!1;function rL(e,t,r){if(ej)return e(t,r);ej=!0;try{return eL(e,t,r)}finally{ej=!1,(ym!==null||wm!==null)&&(tL(),ZD())}}function Av(e,t){var r=e.stateNode;if(r===null)return null;var n=b5(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Wt(231,t,typeof r));return r}var z4=!1;if(Mu)try{var mg={};Object.defineProperty(mg,"passive",{get:function(){z4=!0}}),window.addEventListener("test",mg,mg),window.removeEventListener("test",mg,mg)}catch{z4=!1}function Sz(e,t,r,n,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(r,d)}catch(f){this.onError(f)}}var tv=!1,x2=null,g2=!1,q4=null,_z={onError:function(e){tv=!0,x2=e}};function Az(e,t,r,n,s,i,o,l,c){tv=!1,x2=null,Sz.apply(_z,arguments)}function Cz(e,t,r,n,s,i,o,l,c){if(Az.apply(this,arguments),tv){if(tv){var d=x2;tv=!1,x2=null}else throw Error(Wt(198));g2||(g2=!0,q4=d)}}function ip(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function nL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function aC(e){if(ip(e)!==e)throw Error(Wt(188))}function Ez(e){var t=e.alternate;if(!t){if(t=ip(e),t===null)throw Error(Wt(188));return t!==e?null:e}for(var r=e,n=t;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return aC(s),e;if(i===n)return aC(s),t;i=i.sibling}throw Error(Wt(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,l=s.child;l;){if(l===r){o=!0,r=s,n=i;break}if(l===n){o=!0,n=s,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=s;break}if(l===n){o=!0,n=i,r=s;break}l=l.sibling}if(!o)throw Error(Wt(189))}}if(r.alternate!==n)throw Error(Wt(190))}if(r.tag!==3)throw Error(Wt(188));return r.stateNode.current===r?e:t}function aL(e){return e=Ez(e),e!==null?sL(e):null}function sL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=sL(e);if(t!==null)return t;e=e.sibling}return null}var iL=Fl.unstable_scheduleCallback,sC=Fl.unstable_cancelCallback,Tz=Fl.unstable_shouldYield,Oz=Fl.unstable_requestPaint,Ns=Fl.unstable_now,Pz=Fl.unstable_getCurrentPriorityLevel,JS=Fl.unstable_ImmediatePriority,oL=Fl.unstable_UserBlockingPriority,v2=Fl.unstable_NormalPriority,Iz=Fl.unstable_LowPriority,lL=Fl.unstable_IdlePriority,m5=null,zd=null;function Dz(e){if(zd&&typeof zd.onCommitFiberRoot=="function")try{zd.onCommitFiberRoot(m5,e,void 0,(e.current.flags&128)===128)}catch{}}var ed=Math.clz32?Math.clz32:Mz,Lz=Math.log,Fz=Math.LN2;function Mz(e){return e>>>=0,e===0?32:31-(Lz(e)/Fz|0)|0}var Hb=64,Wb=4194304;function Wg(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function b2(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,s=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~s;l!==0?n=Wg(l):(i&=o,i!==0&&(n=Wg(i)))}else o=r&~s,o!==0?n=Wg(o):i!==0&&(n=Wg(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&s)&&(s=n&-n,i=t&-t,s>=i||s===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ed(t),s=1<<r,n|=e[r],t&=~s;return n}function Rz(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Bz(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ed(i),l=1<<o,c=s[o];c===-1?(!(l&r)||l&n)&&(s[o]=Rz(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function H4(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function cL(){var e=Hb;return Hb<<=1,!(Hb&4194240)&&(Hb=64),e}function tj(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function K1(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ed(t),e[t]=r}function $z(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var s=31-ed(r),i=1<<s;t[s]=0,n[s]=-1,e[s]=-1,r&=~i}}function ZS(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ed(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}var sa=0;function dL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var uL,e_,fL,hL,pL,W4=!1,Vb=[],Xf=null,Yf=null,Qf=null,Cv=new Map,Ev=new Map,Cf=[],Uz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function iC(e,t){switch(e){case"focusin":case"focusout":Xf=null;break;case"dragenter":case"dragleave":Yf=null;break;case"mouseover":case"mouseout":Qf=null;break;case"pointerover":case"pointerout":Cv.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ev.delete(t.pointerId)}}function xg(e,t,r,n,s,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},t!==null&&(t=Y1(t),t!==null&&e_(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function zz(e,t,r,n,s){switch(t){case"focusin":return Xf=xg(Xf,e,t,r,n,s),!0;case"dragenter":return Yf=xg(Yf,e,t,r,n,s),!0;case"mouseover":return Qf=xg(Qf,e,t,r,n,s),!0;case"pointerover":var i=s.pointerId;return Cv.set(i,xg(Cv.get(i)||null,e,t,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Ev.set(i,xg(Ev.get(i)||null,e,t,r,n,s)),!0}return!1}function mL(e){var t=ch(e.target);if(t!==null){var r=ip(t);if(r!==null){if(t=r.tag,t===13){if(t=nL(r),t!==null){e.blockedOn=t,pL(e.priority,function(){fL(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Gy(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=V4(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);$4=n,r.target.dispatchEvent(n),$4=null}else return t=Y1(r),t!==null&&e_(t),e.blockedOn=r,!1;t.shift()}return!0}function oC(e,t,r){Gy(e)&&r.delete(t)}function qz(){W4=!1,Xf!==null&&Gy(Xf)&&(Xf=null),Yf!==null&&Gy(Yf)&&(Yf=null),Qf!==null&&Gy(Qf)&&(Qf=null),Cv.forEach(oC),Ev.forEach(oC)}function gg(e,t){e.blockedOn===t&&(e.blockedOn=null,W4||(W4=!0,Fl.unstable_scheduleCallback(Fl.unstable_NormalPriority,qz)))}function Tv(e){function t(s){return gg(s,e)}if(0<Vb.length){gg(Vb[0],e);for(var r=1;r<Vb.length;r++){var n=Vb[r];n.blockedOn===e&&(n.blockedOn=null)}}for(Xf!==null&&gg(Xf,e),Yf!==null&&gg(Yf,e),Qf!==null&&gg(Qf,e),Cv.forEach(t),Ev.forEach(t),r=0;r<Cf.length;r++)n=Cf[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Cf.length&&(r=Cf[0],r.blockedOn===null);)mL(r),r.blockedOn===null&&Cf.shift()}var Nm=Gu.ReactCurrentBatchConfig,y2=!0;function Hz(e,t,r,n){var s=sa,i=Nm.transition;Nm.transition=null;try{sa=1,t_(e,t,r,n)}finally{sa=s,Nm.transition=i}}function Wz(e,t,r,n){var s=sa,i=Nm.transition;Nm.transition=null;try{sa=4,t_(e,t,r,n)}finally{sa=s,Nm.transition=i}}function t_(e,t,r,n){if(y2){var s=V4(e,t,r,n);if(s===null)uj(e,t,n,w2,r),iC(e,n);else if(zz(s,e,t,r,n))n.stopPropagation();else if(iC(e,n),t&4&&-1<Uz.indexOf(e)){for(;s!==null;){var i=Y1(s);if(i!==null&&uL(i),i=V4(e,t,r,n),i===null&&uj(e,t,n,w2,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else uj(e,t,n,null,r)}}var w2=null;function V4(e,t,r,n){if(w2=null,e=QS(n),e=ch(e),e!==null)if(t=ip(e),t===null)e=null;else if(r=t.tag,r===13){if(e=nL(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return w2=e,null}function xL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Pz()){case JS:return 1;case oL:return 4;case v2:case Iz:return 16;case lL:return 536870912;default:return 16}default:return 16}}var zf=null,r_=null,Ky=null;function gL(){if(Ky)return Ky;var e,t=r_,r=t.length,n,s="value"in zf?zf.value:zf.textContent,i=s.length;for(e=0;e<r&&t[e]===s[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===s[i-n];n++);return Ky=s.slice(e,1<n?1-n:void 0)}function Xy(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Gb(){return!0}function lC(){return!1}function $l(e){function t(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Gb:lC,this.isPropagationStopped=lC,this}return ts(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Gb)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Gb)},persist:function(){},isPersistent:Gb}),t}var Tx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},n_=$l(Tx),X1=ts({},Tx,{view:0,detail:0}),Vz=$l(X1),rj,nj,vg,x5=ts({},X1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:a_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==vg&&(vg&&e.type==="mousemove"?(rj=e.screenX-vg.screenX,nj=e.screenY-vg.screenY):nj=rj=0,vg=e),rj)},movementY:function(e){return"movementY"in e?e.movementY:nj}}),cC=$l(x5),Gz=ts({},x5,{dataTransfer:0}),Kz=$l(Gz),Xz=ts({},X1,{relatedTarget:0}),aj=$l(Xz),Yz=ts({},Tx,{animationName:0,elapsedTime:0,pseudoElement:0}),Qz=$l(Yz),Jz=ts({},Tx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Zz=$l(Jz),eq=ts({},Tx,{data:0}),dC=$l(eq),tq={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rq={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nq={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aq(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nq[e])?!!t[e]:!1}function a_(){return aq}var sq=ts({},X1,{key:function(e){if(e.key){var t=tq[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Xy(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rq[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:a_,charCode:function(e){return e.type==="keypress"?Xy(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Xy(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),iq=$l(sq),oq=ts({},x5,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),uC=$l(oq),lq=ts({},X1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:a_}),cq=$l(lq),dq=ts({},Tx,{propertyName:0,elapsedTime:0,pseudoElement:0}),uq=$l(dq),fq=ts({},x5,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hq=$l(fq),pq=[9,13,27,32],s_=Mu&&"CompositionEvent"in window,rv=null;Mu&&"documentMode"in document&&(rv=document.documentMode);var mq=Mu&&"TextEvent"in window&&!rv,vL=Mu&&(!s_||rv&&8<rv&&11>=rv),fC=" ",hC=!1;function bL(e,t){switch(e){case"keyup":return pq.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var nm=!1;function xq(e,t){switch(e){case"compositionend":return yL(t);case"keypress":return t.which!==32?null:(hC=!0,fC);case"textInput":return e=t.data,e===fC&&hC?null:e;default:return null}}function gq(e,t){if(nm)return e==="compositionend"||!s_&&bL(e,t)?(e=gL(),Ky=r_=zf=null,nm=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return vL&&t.locale!=="ko"?null:t.data;default:return null}}var vq={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!vq[e.type]:t==="textarea"}function wL(e,t,r,n){JD(n),t=N2(t,"onChange"),0<t.length&&(r=new n_("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var nv=null,Ov=null;function bq(e){PL(e,0)}function g5(e){var t=im(e);if(WD(t))return e}function yq(e,t){if(e==="change")return t}var NL=!1;if(Mu){var sj;if(Mu){var ij="oninput"in document;if(!ij){var mC=document.createElement("div");mC.setAttribute("oninput","return;"),ij=typeof mC.oninput=="function"}sj=ij}else sj=!1;NL=sj&&(!document.documentMode||9<document.documentMode)}function xC(){nv&&(nv.detachEvent("onpropertychange",jL),Ov=nv=null)}function jL(e){if(e.propertyName==="value"&&g5(Ov)){var t=[];wL(t,Ov,e,QS(e)),rL(bq,t)}}function wq(e,t,r){e==="focusin"?(xC(),nv=t,Ov=r,nv.attachEvent("onpropertychange",jL)):e==="focusout"&&xC()}function Nq(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return g5(Ov)}function jq(e,t){if(e==="click")return g5(t)}function kq(e,t){if(e==="input"||e==="change")return g5(t)}function Sq(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ld=typeof Object.is=="function"?Object.is:Sq;function Pv(e,t){if(ld(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!C4.call(t,s)||!ld(e[s],t[s]))return!1}return!0}function gC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function vC(e,t){var r=gC(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=gC(r)}}function kL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?kL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function SL(){for(var e=window,t=m2();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=m2(e.document)}return t}function i_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _q(e){var t=SL(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&kL(r.ownerDocument.documentElement,r)){if(n!==null&&i_(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!e.extend&&i>n&&(s=n,n=i,i=s),s=vC(r,i);var o=vC(r,n);s&&o&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Aq=Mu&&"documentMode"in document&&11>=document.documentMode,am=null,G4=null,av=null,K4=!1;function bC(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;K4||am==null||am!==m2(n)||(n=am,"selectionStart"in n&&i_(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),av&&Pv(av,n)||(av=n,n=N2(G4,"onSelect"),0<n.length&&(t=new n_("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=am)))}function Kb(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var sm={animationend:Kb("Animation","AnimationEnd"),animationiteration:Kb("Animation","AnimationIteration"),animationstart:Kb("Animation","AnimationStart"),transitionend:Kb("Transition","TransitionEnd")},oj={},_L={};Mu&&(_L=document.createElement("div").style,"AnimationEvent"in window||(delete sm.animationend.animation,delete sm.animationiteration.animation,delete sm.animationstart.animation),"TransitionEvent"in window||delete sm.transitionend.transition);function v5(e){if(oj[e])return oj[e];if(!sm[e])return e;var t=sm[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in _L)return oj[e]=t[r];return e}var AL=v5("animationend"),CL=v5("animationiteration"),EL=v5("animationstart"),TL=v5("transitionend"),OL=new Map,yC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function b0(e,t){OL.set(e,t),sp(t,[e])}for(var lj=0;lj<yC.length;lj++){var cj=yC[lj],Cq=cj.toLowerCase(),Eq=cj[0].toUpperCase()+cj.slice(1);b0(Cq,"on"+Eq)}b0(AL,"onAnimationEnd");b0(CL,"onAnimationIteration");b0(EL,"onAnimationStart");b0("dblclick","onDoubleClick");b0("focusin","onFocus");b0("focusout","onBlur");b0(TL,"onTransitionEnd");Xm("onMouseEnter",["mouseout","mouseover"]);Xm("onMouseLeave",["mouseout","mouseover"]);Xm("onPointerEnter",["pointerout","pointerover"]);Xm("onPointerLeave",["pointerout","pointerover"]);sp("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));sp("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));sp("onBeforeInput",["compositionend","keypress","textInput","paste"]);sp("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));sp("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));sp("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vg="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tq=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vg));function wC(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Cz(n,t,void 0,e),e.currentTarget=null}function PL(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;wC(s,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;wC(s,l,d),i=c}}}if(g2)throw e=q4,g2=!1,q4=null,e}function Aa(e,t){var r=t[Z4];r===void 0&&(r=t[Z4]=new Set);var n=e+"__bubble";r.has(n)||(IL(t,e,2,!1),r.add(n))}function dj(e,t,r){var n=0;t&&(n|=4),IL(r,e,n,t)}var Xb="_reactListening"+Math.random().toString(36).slice(2);function Iv(e){if(!e[Xb]){e[Xb]=!0,$D.forEach(function(r){r!=="selectionchange"&&(Tq.has(r)||dj(r,!1,e),dj(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Xb]||(t[Xb]=!0,dj("selectionchange",!1,t))}}function IL(e,t,r,n){switch(xL(t)){case 1:var s=Hz;break;case 4:s=Wz;break;default:s=t_}r=s.bind(null,t,r,e),s=void 0,!z4||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),n?s!==void 0?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):s!==void 0?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function uj(e,t,r,n,s){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=ch(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}rL(function(){var d=i,f=QS(r),u=[];e:{var p=OL.get(e);if(p!==void 0){var h=n_,m=e;switch(e){case"keypress":if(Xy(r)===0)break e;case"keydown":case"keyup":h=iq;break;case"focusin":m="focus",h=aj;break;case"focusout":m="blur",h=aj;break;case"beforeblur":case"afterblur":h=aj;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=cC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Kz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=cq;break;case AL:case CL:case EL:h=Qz;break;case TL:h=uq;break;case"scroll":h=Vz;break;case"wheel":h=hq;break;case"copy":case"cut":case"paste":h=Zz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=uC}var g=(t&4)!==0,x=!g&&e==="scroll",v=g?p!==null?p+"Capture":null:p;g=[];for(var b=d,w;b!==null;){w=b;var y=w.stateNode;if(w.tag===5&&y!==null&&(w=y,v!==null&&(y=Av(b,v),y!=null&&g.push(Dv(b,y,w)))),x)break;b=b.return}0<g.length&&(p=new h(p,m,null,r,f),u.push({event:p,listeners:g}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",p&&r!==$4&&(m=r.relatedTarget||r.fromElement)&&(ch(m)||m[Ru]))break e;if((h||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=r.relatedTarget||r.toElement,h=d,m=m?ch(m):null,m!==null&&(x=ip(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=d),h!==m)){if(g=cC,y="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(g=uC,y="onPointerLeave",v="onPointerEnter",b="pointer"),x=h==null?p:im(h),w=m==null?p:im(m),p=new g(y,b+"leave",h,r,f),p.target=x,p.relatedTarget=w,y=null,ch(f)===d&&(g=new g(v,b+"enter",m,r,f),g.target=w,g.relatedTarget=x,y=g),x=y,h&&m)t:{for(g=h,v=m,b=0,w=g;w;w=qp(w))b++;for(w=0,y=v;y;y=qp(y))w++;for(;0<b-w;)g=qp(g),b--;for(;0<w-b;)v=qp(v),w--;for(;b--;){if(g===v||v!==null&&g===v.alternate)break t;g=qp(g),v=qp(v)}g=null}else g=null;h!==null&&NC(u,p,h,g,!1),m!==null&&x!==null&&NC(u,x,m,g,!0)}}e:{if(p=d?im(d):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var N=yq;else if(pC(p))if(NL)N=kq;else{N=Nq;var S=wq}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(N=jq);if(N&&(N=N(e,d))){wL(u,N,r,f);break e}S&&S(e,p,d),e==="focusout"&&(S=p._wrapperState)&&S.controlled&&p.type==="number"&&L4(p,"number",p.value)}switch(S=d?im(d):window,e){case"focusin":(pC(S)||S.contentEditable==="true")&&(am=S,G4=d,av=null);break;case"focusout":av=G4=am=null;break;case"mousedown":K4=!0;break;case"contextmenu":case"mouseup":case"dragend":K4=!1,bC(u,r,f);break;case"selectionchange":if(Aq)break;case"keydown":case"keyup":bC(u,r,f)}var j;if(s_)e:{switch(e){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else nm?bL(e,r)&&(_="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(_="onCompositionStart");_&&(vL&&r.locale!=="ko"&&(nm||_!=="onCompositionStart"?_==="onCompositionEnd"&&nm&&(j=gL()):(zf=f,r_="value"in zf?zf.value:zf.textContent,nm=!0)),S=N2(d,_),0<S.length&&(_=new dC(_,e,null,r,f),u.push({event:_,listeners:S}),j?_.data=j:(j=yL(r),j!==null&&(_.data=j)))),(j=mq?xq(e,r):gq(e,r))&&(d=N2(d,"onBeforeInput"),0<d.length&&(f=new dC("onBeforeInput","beforeinput",null,r,f),u.push({event:f,listeners:d}),f.data=j))}PL(u,t)})}function Dv(e,t,r){return{instance:e,listener:t,currentTarget:r}}function N2(e,t){for(var r=t+"Capture",n=[];e!==null;){var s=e,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Av(e,r),i!=null&&n.unshift(Dv(e,i,s)),i=Av(e,t),i!=null&&n.push(Dv(e,i,s))),e=e.return}return n}function qp(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function NC(e,t,r,n,s){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,s?(c=Av(r,i),c!=null&&o.unshift(Dv(r,c,l))):s||(c=Av(r,i),c!=null&&o.push(Dv(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Oq=/\r\n?/g,Pq=/\u0000|\uFFFD/g;function jC(e){return(typeof e=="string"?e:""+e).replace(Oq,`
`).replace(Pq,"")}function Yb(e,t,r){if(t=jC(t),jC(e)!==t&&r)throw Error(Wt(425))}function j2(){}var X4=null,Y4=null;function Q4(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var J4=typeof setTimeout=="function"?setTimeout:void 0,Iq=typeof clearTimeout=="function"?clearTimeout:void 0,kC=typeof Promise=="function"?Promise:void 0,Dq=typeof queueMicrotask=="function"?queueMicrotask:typeof kC<"u"?function(e){return kC.resolve(null).then(e).catch(Lq)}:J4;function Lq(e){setTimeout(function(){throw e})}function fj(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){e.removeChild(s),Tv(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Tv(t)}function Jf(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function SC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ox=Math.random().toString(36).slice(2),Fd="__reactFiber$"+Ox,Lv="__reactProps$"+Ox,Ru="__reactContainer$"+Ox,Z4="__reactEvents$"+Ox,Fq="__reactListeners$"+Ox,Mq="__reactHandles$"+Ox;function ch(e){var t=e[Fd];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Ru]||r[Fd]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=SC(e);e!==null;){if(r=e[Fd])return r;e=SC(e)}return t}e=r,r=e.parentNode}return null}function Y1(e){return e=e[Fd]||e[Ru],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function im(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Wt(33))}function b5(e){return e[Lv]||null}var ek=[],om=-1;function y0(e){return{current:e}}function Ia(e){0>om||(e.current=ek[om],ek[om]=null,om--)}function va(e,t){om++,ek[om]=e.current,e.current=t}var d0={},fo=y0(d0),tl=y0(!1),Bh=d0;function Ym(e,t){var r=e.type.contextTypes;if(!r)return d0;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function rl(e){return e=e.childContextTypes,e!=null}function k2(){Ia(tl),Ia(fo)}function _C(e,t,r){if(fo.current!==d0)throw Error(Wt(168));va(fo,t),va(tl,r)}function DL(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in t))throw Error(Wt(108,wz(e)||"Unknown",s));return ts({},r,n)}function S2(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||d0,Bh=fo.current,va(fo,e),va(tl,tl.current),!0}function AC(e,t,r){var n=e.stateNode;if(!n)throw Error(Wt(169));r?(e=DL(e,t,Bh),n.__reactInternalMemoizedMergedChildContext=e,Ia(tl),Ia(fo),va(fo,e)):Ia(tl),va(tl,r)}var hu=null,y5=!1,hj=!1;function LL(e){hu===null?hu=[e]:hu.push(e)}function Rq(e){y5=!0,LL(e)}function w0(){if(!hj&&hu!==null){hj=!0;var e=0,t=sa;try{var r=hu;for(sa=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}hu=null,y5=!1}catch(s){throw hu!==null&&(hu=hu.slice(e+1)),iL(JS,w0),s}finally{sa=t,hj=!1}}return null}var lm=[],cm=0,_2=null,A2=0,oc=[],lc=0,$h=null,bu=1,yu="";function eh(e,t){lm[cm++]=A2,lm[cm++]=_2,_2=e,A2=t}function FL(e,t,r){oc[lc++]=bu,oc[lc++]=yu,oc[lc++]=$h,$h=e;var n=bu;e=yu;var s=32-ed(n)-1;n&=~(1<<s),r+=1;var i=32-ed(t)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,bu=1<<32-ed(t)+s|r<<s|n,yu=i+e}else bu=1<<i|r<<s|n,yu=e}function o_(e){e.return!==null&&(eh(e,1),FL(e,1,0))}function l_(e){for(;e===_2;)_2=lm[--cm],lm[cm]=null,A2=lm[--cm],lm[cm]=null;for(;e===$h;)$h=oc[--lc],oc[lc]=null,yu=oc[--lc],oc[lc]=null,bu=oc[--lc],oc[lc]=null}var Ll=null,Il=null,Ua=!1,Xc=null;function ML(e,t){var r=dc(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function CC(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ll=e,Il=Jf(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ll=e,Il=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=$h!==null?{id:bu,overflow:yu}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=dc(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ll=e,Il=null,!0):!1;default:return!1}}function tk(e){return(e.mode&1)!==0&&(e.flags&128)===0}function rk(e){if(Ua){var t=Il;if(t){var r=t;if(!CC(e,t)){if(tk(e))throw Error(Wt(418));t=Jf(r.nextSibling);var n=Ll;t&&CC(e,t)?ML(n,r):(e.flags=e.flags&-4097|2,Ua=!1,Ll=e)}}else{if(tk(e))throw Error(Wt(418));e.flags=e.flags&-4097|2,Ua=!1,Ll=e}}}function EC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ll=e}function Qb(e){if(e!==Ll)return!1;if(!Ua)return EC(e),Ua=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Q4(e.type,e.memoizedProps)),t&&(t=Il)){if(tk(e))throw RL(),Error(Wt(418));for(;t;)ML(e,t),t=Jf(t.nextSibling)}if(EC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Wt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Il=Jf(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Il=null}}else Il=Ll?Jf(e.stateNode.nextSibling):null;return!0}function RL(){for(var e=Il;e;)e=Jf(e.nextSibling)}function Qm(){Il=Ll=null,Ua=!1}function c_(e){Xc===null?Xc=[e]:Xc.push(e)}var Bq=Gu.ReactCurrentBatchConfig;function bg(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Wt(309));var n=r.stateNode}if(!n)throw Error(Wt(147,e));var s=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(Wt(284));if(!r._owner)throw Error(Wt(290,e))}return e}function Jb(e,t){throw e=Object.prototype.toString.call(t),Error(Wt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function TC(e){var t=e._init;return t(e._payload)}function BL(e){function t(v,b){if(e){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function s(v,b){return v=r0(v,b),v.index=0,v.sibling=null,v}function i(v,b,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,w,y){return b===null||b.tag!==6?(b=yj(w,v.mode,y),b.return=v,b):(b=s(b,w),b.return=v,b)}function c(v,b,w,y){var N=w.type;return N===rm?f(v,b,w.props.children,y,w.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Sf&&TC(N)===b.type)?(y=s(b,w.props),y.ref=bg(v,b,w),y.return=v,y):(y=r2(w.type,w.key,w.props,null,v.mode,y),y.ref=bg(v,b,w),y.return=v,y)}function d(v,b,w,y){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=wj(w,v.mode,y),b.return=v,b):(b=s(b,w.children||[]),b.return=v,b)}function f(v,b,w,y,N){return b===null||b.tag!==7?(b=Eh(w,v.mode,y,N),b.return=v,b):(b=s(b,w),b.return=v,b)}function u(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=yj(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ub:return w=r2(b.type,b.key,b.props,null,v.mode,w),w.ref=bg(v,null,b),w.return=v,w;case tm:return b=wj(b,v.mode,w),b.return=v,b;case Sf:var y=b._init;return u(v,y(b._payload),w)}if(Hg(b)||pg(b))return b=Eh(b,v.mode,w,null),b.return=v,b;Jb(v,b)}return null}function p(v,b,w,y){var N=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(v,b,""+w,y);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ub:return w.key===N?c(v,b,w,y):null;case tm:return w.key===N?d(v,b,w,y):null;case Sf:return N=w._init,p(v,b,N(w._payload),y)}if(Hg(w)||pg(w))return N!==null?null:f(v,b,w,y,null);Jb(v,w)}return null}function h(v,b,w,y,N){if(typeof y=="string"&&y!==""||typeof y=="number")return v=v.get(w)||null,l(b,v,""+y,N);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ub:return v=v.get(y.key===null?w:y.key)||null,c(b,v,y,N);case tm:return v=v.get(y.key===null?w:y.key)||null,d(b,v,y,N);case Sf:var S=y._init;return h(v,b,w,S(y._payload),N)}if(Hg(y)||pg(y))return v=v.get(w)||null,f(b,v,y,N,null);Jb(b,y)}return null}function m(v,b,w,y){for(var N=null,S=null,j=b,_=b=0,T=null;j!==null&&_<w.length;_++){j.index>_?(T=j,j=null):T=j.sibling;var D=p(v,j,w[_],y);if(D===null){j===null&&(j=T);break}e&&j&&D.alternate===null&&t(v,j),b=i(D,b,_),S===null?N=D:S.sibling=D,S=D,j=T}if(_===w.length)return r(v,j),Ua&&eh(v,_),N;if(j===null){for(;_<w.length;_++)j=u(v,w[_],y),j!==null&&(b=i(j,b,_),S===null?N=j:S.sibling=j,S=j);return Ua&&eh(v,_),N}for(j=n(v,j);_<w.length;_++)T=h(j,v,_,w[_],y),T!==null&&(e&&T.alternate!==null&&j.delete(T.key===null?_:T.key),b=i(T,b,_),S===null?N=T:S.sibling=T,S=T);return e&&j.forEach(function(A){return t(v,A)}),Ua&&eh(v,_),N}function g(v,b,w,y){var N=pg(w);if(typeof N!="function")throw Error(Wt(150));if(w=N.call(w),w==null)throw Error(Wt(151));for(var S=N=null,j=b,_=b=0,T=null,D=w.next();j!==null&&!D.done;_++,D=w.next()){j.index>_?(T=j,j=null):T=j.sibling;var A=p(v,j,D.value,y);if(A===null){j===null&&(j=T);break}e&&j&&A.alternate===null&&t(v,j),b=i(A,b,_),S===null?N=A:S.sibling=A,S=A,j=T}if(D.done)return r(v,j),Ua&&eh(v,_),N;if(j===null){for(;!D.done;_++,D=w.next())D=u(v,D.value,y),D!==null&&(b=i(D,b,_),S===null?N=D:S.sibling=D,S=D);return Ua&&eh(v,_),N}for(j=n(v,j);!D.done;_++,D=w.next())D=h(j,v,_,D.value,y),D!==null&&(e&&D.alternate!==null&&j.delete(D.key===null?_:D.key),b=i(D,b,_),S===null?N=D:S.sibling=D,S=D);return e&&j.forEach(function(C){return t(v,C)}),Ua&&eh(v,_),N}function x(v,b,w,y){if(typeof w=="object"&&w!==null&&w.type===rm&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ub:e:{for(var N=w.key,S=b;S!==null;){if(S.key===N){if(N=w.type,N===rm){if(S.tag===7){r(v,S.sibling),b=s(S,w.props.children),b.return=v,v=b;break e}}else if(S.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Sf&&TC(N)===S.type){r(v,S.sibling),b=s(S,w.props),b.ref=bg(v,S,w),b.return=v,v=b;break e}r(v,S);break}else t(v,S);S=S.sibling}w.type===rm?(b=Eh(w.props.children,v.mode,y,w.key),b.return=v,v=b):(y=r2(w.type,w.key,w.props,null,v.mode,y),y.ref=bg(v,b,w),y.return=v,v=y)}return o(v);case tm:e:{for(S=w.key;b!==null;){if(b.key===S)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(v,b.sibling),b=s(b,w.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=wj(w,v.mode,y),b.return=v,v=b}return o(v);case Sf:return S=w._init,x(v,b,S(w._payload),y)}if(Hg(w))return m(v,b,w,y);if(pg(w))return g(v,b,w,y);Jb(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(v,b.sibling),b=s(b,w),b.return=v,v=b):(r(v,b),b=yj(w,v.mode,y),b.return=v,v=b),o(v)):r(v,b)}return x}var Jm=BL(!0),$L=BL(!1),C2=y0(null),E2=null,dm=null,d_=null;function u_(){d_=dm=E2=null}function f_(e){var t=C2.current;Ia(C2),e._currentValue=t}function nk(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function jm(e,t){E2=e,d_=dm=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zo=!0),e.firstContext=null)}function xc(e){var t=e._currentValue;if(d_!==e)if(e={context:e,memoizedValue:t,next:null},dm===null){if(E2===null)throw Error(Wt(308));dm=e,E2.dependencies={lanes:0,firstContext:e}}else dm=dm.next=e;return t}var dh=null;function h_(e){dh===null?dh=[e]:dh.push(e)}function UL(e,t,r,n){var s=t.interleaved;return s===null?(r.next=r,h_(t)):(r.next=s.next,s.next=r),t.interleaved=r,Bu(e,n)}function Bu(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var _f=!1;function p_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zL(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Au(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Zf(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,Fn&2){var s=n.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),n.pending=t,Bu(e,r)}return s=n.interleaved,s===null?(t.next=t,h_(n)):(t.next=s.next,s.next=t),n.interleaved=t,Bu(e,r)}function Yy(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ZS(e,r)}}function OC(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=t:i=i.next=t}else s=i=t;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function T2(e,t,r,n){var s=e.updateQueue;_f=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=e.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var u=s.baseState;o=0,f=d=c=null,l=i;do{var p=l.lane,h=l.eventTime;if((n&p)===p){f!==null&&(f=f.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(p=t,h=r,g.tag){case 1:if(m=g.payload,typeof m=="function"){u=m.call(h,u,p);break e}u=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=g.payload,p=typeof m=="function"?m.call(h,u,p):m,p==null)break e;u=ts({},u,p);break e;case 2:_f=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,p=s.effects,p===null?s.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=h,c=u):f=f.next=h,o|=p;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;p=l,l=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(c=u),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,t=s.shared.interleaved,t!==null){s=t;do o|=s.lane,s=s.next;while(s!==t)}else i===null&&(s.shared.lanes=0);zh|=o,e.lanes=o,e.memoizedState=u}}function PC(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Wt(191,s));s.call(n)}}}var Q1={},qd=y0(Q1),Fv=y0(Q1),Mv=y0(Q1);function uh(e){if(e===Q1)throw Error(Wt(174));return e}function m_(e,t){switch(va(Mv,t),va(Fv,e),va(qd,Q1),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:M4(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=M4(t,e)}Ia(qd),va(qd,t)}function Zm(){Ia(qd),Ia(Fv),Ia(Mv)}function qL(e){uh(Mv.current);var t=uh(qd.current),r=M4(t,e.type);t!==r&&(va(Fv,e),va(qd,r))}function x_(e){Fv.current===e&&(Ia(qd),Ia(Fv))}var Ka=y0(0);function O2(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var pj=[];function g_(){for(var e=0;e<pj.length;e++)pj[e]._workInProgressVersionPrimary=null;pj.length=0}var Qy=Gu.ReactCurrentDispatcher,mj=Gu.ReactCurrentBatchConfig,Uh=0,es=null,Zs=null,gi=null,P2=!1,sv=!1,Rv=0,$q=0;function Vi(){throw Error(Wt(321))}function v_(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ld(e[r],t[r]))return!1;return!0}function b_(e,t,r,n,s,i){if(Uh=i,es=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Qy.current=e===null||e.memoizedState===null?Hq:Wq,e=r(n,s),sv){i=0;do{if(sv=!1,Rv=0,25<=i)throw Error(Wt(301));i+=1,gi=Zs=null,t.updateQueue=null,Qy.current=Vq,e=r(n,s)}while(sv)}if(Qy.current=I2,t=Zs!==null&&Zs.next!==null,Uh=0,gi=Zs=es=null,P2=!1,t)throw Error(Wt(300));return e}function y_(){var e=Rv!==0;return Rv=0,e}function Od(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gi===null?es.memoizedState=gi=e:gi=gi.next=e,gi}function gc(){if(Zs===null){var e=es.alternate;e=e!==null?e.memoizedState:null}else e=Zs.next;var t=gi===null?es.memoizedState:gi.next;if(t!==null)gi=t,Zs=e;else{if(e===null)throw Error(Wt(310));Zs=e,e={memoizedState:Zs.memoizedState,baseState:Zs.baseState,baseQueue:Zs.baseQueue,queue:Zs.queue,next:null},gi===null?es.memoizedState=gi=e:gi=gi.next=e}return gi}function Bv(e,t){return typeof t=="function"?t(e):t}function xj(e){var t=gc(),r=t.queue;if(r===null)throw Error(Wt(311));r.lastRenderedReducer=e;var n=Zs,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((Uh&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:e(n,d.action);else{var u={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,o=n):c=c.next=u,es.lanes|=f,zh|=f}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,ld(n,t.memoizedState)||(Zo=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){s=e;do i=s.lane,es.lanes|=i,zh|=i,s=s.next;while(s!==e)}else s===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function gj(e){var t=gc(),r=t.queue;if(r===null)throw Error(Wt(311));r.lastRenderedReducer=e;var n=r.dispatch,s=r.pending,i=t.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=e(i,o.action),o=o.next;while(o!==s);ld(i,t.memoizedState)||(Zo=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function HL(){}function WL(e,t){var r=es,n=gc(),s=t(),i=!ld(n.memoizedState,s);if(i&&(n.memoizedState=s,Zo=!0),n=n.queue,w_(KL.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||gi!==null&&gi.memoizedState.tag&1){if(r.flags|=2048,$v(9,GL.bind(null,r,n,s,t),void 0,null),ji===null)throw Error(Wt(349));Uh&30||VL(r,t,s)}return s}function VL(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=es.updateQueue,t===null?(t={lastEffect:null,stores:null},es.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function GL(e,t,r,n){t.value=r,t.getSnapshot=n,XL(t)&&YL(e)}function KL(e,t,r){return r(function(){XL(t)&&YL(e)})}function XL(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ld(e,r)}catch{return!0}}function YL(e){var t=Bu(e,1);t!==null&&td(t,e,1,-1)}function IC(e){var t=Od();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Bv,lastRenderedState:e},t.queue=e,e=e.dispatch=qq.bind(null,es,e),[t.memoizedState,e]}function $v(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=es.updateQueue,t===null?(t={lastEffect:null,stores:null},es.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function QL(){return gc().memoizedState}function Jy(e,t,r,n){var s=Od();es.flags|=e,s.memoizedState=$v(1|t,r,void 0,n===void 0?null:n)}function w5(e,t,r,n){var s=gc();n=n===void 0?null:n;var i=void 0;if(Zs!==null){var o=Zs.memoizedState;if(i=o.destroy,n!==null&&v_(n,o.deps)){s.memoizedState=$v(t,r,i,n);return}}es.flags|=e,s.memoizedState=$v(1|t,r,i,n)}function DC(e,t){return Jy(8390656,8,e,t)}function w_(e,t){return w5(2048,8,e,t)}function JL(e,t){return w5(4,2,e,t)}function ZL(e,t){return w5(4,4,e,t)}function eF(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tF(e,t,r){return r=r!=null?r.concat([e]):null,w5(4,4,eF.bind(null,t,e),r)}function N_(){}function rF(e,t){var r=gc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&v_(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function nF(e,t){var r=gc();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&v_(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function aF(e,t,r){return Uh&21?(ld(r,t)||(r=cL(),es.lanes|=r,zh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zo=!0),e.memoizedState=r)}function Uq(e,t){var r=sa;sa=r!==0&&4>r?r:4,e(!0);var n=mj.transition;mj.transition={};try{e(!1),t()}finally{sa=r,mj.transition=n}}function sF(){return gc().memoizedState}function zq(e,t,r){var n=t0(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},iF(e))oF(t,r);else if(r=UL(e,t,r,n),r!==null){var s=Co();td(r,e,n,s),lF(r,t,n)}}function qq(e,t,r){var n=t0(e),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(iF(e))oF(t,s);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(s.hasEagerState=!0,s.eagerState=l,ld(l,o)){var c=t.interleaved;c===null?(s.next=s,h_(t)):(s.next=c.next,c.next=s),t.interleaved=s;return}}catch{}finally{}r=UL(e,t,s,n),r!==null&&(s=Co(),td(r,e,n,s),lF(r,t,n))}}function iF(e){var t=e.alternate;return e===es||t!==null&&t===es}function oF(e,t){sv=P2=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function lF(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ZS(e,r)}}var I2={readContext:xc,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useInsertionEffect:Vi,useLayoutEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useMutableSource:Vi,useSyncExternalStore:Vi,useId:Vi,unstable_isNewReconciler:!1},Hq={readContext:xc,useCallback:function(e,t){return Od().memoizedState=[e,t===void 0?null:t],e},useContext:xc,useEffect:DC,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Jy(4194308,4,eF.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Jy(4194308,4,e,t)},useInsertionEffect:function(e,t){return Jy(4,2,e,t)},useMemo:function(e,t){var r=Od();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Od();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=zq.bind(null,es,e),[n.memoizedState,e]},useRef:function(e){var t=Od();return e={current:e},t.memoizedState=e},useState:IC,useDebugValue:N_,useDeferredValue:function(e){return Od().memoizedState=e},useTransition:function(){var e=IC(!1),t=e[0];return e=Uq.bind(null,e[1]),Od().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=es,s=Od();if(Ua){if(r===void 0)throw Error(Wt(407));r=r()}else{if(r=t(),ji===null)throw Error(Wt(349));Uh&30||VL(n,t,r)}s.memoizedState=r;var i={value:r,getSnapshot:t};return s.queue=i,DC(KL.bind(null,n,i,e),[e]),n.flags|=2048,$v(9,GL.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Od(),t=ji.identifierPrefix;if(Ua){var r=yu,n=bu;r=(n&~(1<<32-ed(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Rv++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=$q++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Wq={readContext:xc,useCallback:rF,useContext:xc,useEffect:w_,useImperativeHandle:tF,useInsertionEffect:JL,useLayoutEffect:ZL,useMemo:nF,useReducer:xj,useRef:QL,useState:function(){return xj(Bv)},useDebugValue:N_,useDeferredValue:function(e){var t=gc();return aF(t,Zs.memoizedState,e)},useTransition:function(){var e=xj(Bv)[0],t=gc().memoizedState;return[e,t]},useMutableSource:HL,useSyncExternalStore:WL,useId:sF,unstable_isNewReconciler:!1},Vq={readContext:xc,useCallback:rF,useContext:xc,useEffect:w_,useImperativeHandle:tF,useInsertionEffect:JL,useLayoutEffect:ZL,useMemo:nF,useReducer:gj,useRef:QL,useState:function(){return gj(Bv)},useDebugValue:N_,useDeferredValue:function(e){var t=gc();return Zs===null?t.memoizedState=e:aF(t,Zs.memoizedState,e)},useTransition:function(){var e=gj(Bv)[0],t=gc().memoizedState;return[e,t]},useMutableSource:HL,useSyncExternalStore:WL,useId:sF,unstable_isNewReconciler:!1};function qc(e,t){if(e&&e.defaultProps){t=ts({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function ak(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:ts({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var N5={isMounted:function(e){return(e=e._reactInternals)?ip(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Co(),s=t0(e),i=Au(n,s);i.payload=t,r!=null&&(i.callback=r),t=Zf(e,i,s),t!==null&&(td(t,e,s,n),Yy(t,e,s))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Co(),s=t0(e),i=Au(n,s);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=Zf(e,i,s),t!==null&&(td(t,e,s,n),Yy(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Co(),n=t0(e),s=Au(r,n);s.tag=2,t!=null&&(s.callback=t),t=Zf(e,s,n),t!==null&&(td(t,e,n,r),Yy(t,e,n))}};function LC(e,t,r,n,s,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!Pv(r,n)||!Pv(s,i):!0}function cF(e,t,r){var n=!1,s=d0,i=t.contextType;return typeof i=="object"&&i!==null?i=xc(i):(s=rl(t)?Bh:fo.current,n=t.contextTypes,i=(n=n!=null)?Ym(e,s):d0),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=N5,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function FC(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&N5.enqueueReplaceState(t,t.state,null)}function sk(e,t,r,n){var s=e.stateNode;s.props=r,s.state=e.memoizedState,s.refs={},p_(e);var i=t.contextType;typeof i=="object"&&i!==null?s.context=xc(i):(i=rl(t)?Bh:fo.current,s.context=Ym(e,i)),s.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(ak(e,t,i,r),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&N5.enqueueReplaceState(s,s.state,null),T2(e,r,s,n),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function ex(e,t){try{var r="",n=t;do r+=yz(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:s,digest:null}}function vj(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function ik(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Gq=typeof WeakMap=="function"?WeakMap:Map;function dF(e,t,r){r=Au(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){L2||(L2=!0,xk=n),ik(e,t)},r}function uF(e,t,r){r=Au(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var s=t.value;r.payload=function(){return n(s)},r.callback=function(){ik(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){ik(e,t),typeof n!="function"&&(e0===null?e0=new Set([this]):e0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function MC(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new Gq;var s=new Set;n.set(t,s)}else s=n.get(t),s===void 0&&(s=new Set,n.set(t,s));s.has(r)||(s.add(r),e=oH.bind(null,e,t,r),t.then(e,e))}function RC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function BC(e,t,r,n,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Au(-1,1),t.tag=2,Zf(r,t,1))),r.lanes|=1),e)}var Kq=Gu.ReactCurrentOwner,Zo=!1;function No(e,t,r,n){t.child=e===null?$L(t,null,r,n):Jm(t,e.child,r,n)}function $C(e,t,r,n,s){r=r.render;var i=t.ref;return jm(t,s),n=b_(e,t,r,n,i,s),r=y_(),e!==null&&!Zo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,$u(e,t,s)):(Ua&&r&&o_(t),t.flags|=1,No(e,t,n,s),t.child)}function UC(e,t,r,n,s){if(e===null){var i=r.type;return typeof i=="function"&&!T_(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,fF(e,t,i,n,s)):(e=r2(r.type,null,n,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Pv,r(o,n)&&e.ref===t.ref)return $u(e,t,s)}return t.flags|=1,e=r0(i,n),e.ref=t.ref,e.return=t,t.child=e}function fF(e,t,r,n,s){if(e!==null){var i=e.memoizedProps;if(Pv(i,n)&&e.ref===t.ref)if(Zo=!1,t.pendingProps=n=i,(e.lanes&s)!==0)e.flags&131072&&(Zo=!0);else return t.lanes=e.lanes,$u(e,t,s)}return ok(e,t,r,n,s)}function hF(e,t,r){var n=t.pendingProps,s=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},va(fm,Sl),Sl|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,va(fm,Sl),Sl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,va(fm,Sl),Sl|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,va(fm,Sl),Sl|=n;return No(e,t,s,r),t.child}function pF(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function ok(e,t,r,n,s){var i=rl(r)?Bh:fo.current;return i=Ym(t,i),jm(t,s),r=b_(e,t,r,n,i,s),n=y_(),e!==null&&!Zo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,$u(e,t,s)):(Ua&&n&&o_(t),t.flags|=1,No(e,t,r,s),t.child)}function zC(e,t,r,n,s){if(rl(r)){var i=!0;S2(t)}else i=!1;if(jm(t,s),t.stateNode===null)Zy(e,t),cF(t,r,n),sk(t,r,n,s),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=r.contextType;typeof d=="object"&&d!==null?d=xc(d):(d=rl(r)?Bh:fo.current,d=Ym(t,d));var f=r.getDerivedStateFromProps,u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&FC(t,o,n,d),_f=!1;var p=t.memoizedState;o.state=p,T2(t,n,o,s),c=t.memoizedState,l!==n||p!==c||tl.current||_f?(typeof f=="function"&&(ak(t,r,f,n),c=t.memoizedState),(l=_f||LC(t,r,l,n,p,c,d))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,zL(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:qc(t.type,l),o.props=d,u=t.pendingProps,p=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=xc(c):(c=rl(r)?Bh:fo.current,c=Ym(t,c));var h=r.getDerivedStateFromProps;(f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||p!==c)&&FC(t,o,n,c),_f=!1,p=t.memoizedState,o.state=p,T2(t,n,o,s);var m=t.memoizedState;l!==u||p!==m||tl.current||_f?(typeof h=="function"&&(ak(t,r,h,n),m=t.memoizedState),(d=_f||LC(t,r,d,n,p,m,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,m,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,m,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=m),o.props=n,o.state=m,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),n=!1)}return lk(e,t,r,n,i,s)}function lk(e,t,r,n,s,i){pF(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return s&&AC(t,r,!1),$u(e,t,i);n=t.stateNode,Kq.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Jm(t,e.child,null,i),t.child=Jm(t,null,l,i)):No(e,t,l,i),t.memoizedState=n.state,s&&AC(t,r,!0),t.child}function mF(e){var t=e.stateNode;t.pendingContext?_C(e,t.pendingContext,t.pendingContext!==t.context):t.context&&_C(e,t.context,!1),m_(e,t.containerInfo)}function qC(e,t,r,n,s){return Qm(),c_(s),t.flags|=256,No(e,t,r,n),t.child}var ck={dehydrated:null,treeContext:null,retryLane:0};function dk(e){return{baseLanes:e,cachePool:null,transitions:null}}function xF(e,t,r){var n=t.pendingProps,s=Ka.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(s&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),va(Ka,s&1),e===null)return rk(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=S5(o,n,0,null),e=Eh(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=dk(r),t.memoizedState=ck,e):j_(t,o));if(s=e.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Xq(e,t,o,n,l,s,r);if(i){i=n.fallback,o=t.mode,s=e.child,l=s.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==s?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=r0(s,c),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=r0(l,i):(i=Eh(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?dk(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=ck,n}return i=e.child,e=i.sibling,n=r0(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function j_(e,t){return t=S5({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zb(e,t,r,n){return n!==null&&c_(n),Jm(t,e.child,null,r),e=j_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Xq(e,t,r,n,s,i,o){if(r)return t.flags&256?(t.flags&=-257,n=vj(Error(Wt(422))),Zb(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,s=t.mode,n=S5({mode:"visible",children:n.children},s,0,null),i=Eh(i,s,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&Jm(t,e.child,null,o),t.child.memoizedState=dk(o),t.memoizedState=ck,i);if(!(t.mode&1))return Zb(e,t,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(Wt(419)),n=vj(i,n,void 0),Zb(e,t,o,n)}if(l=(o&e.childLanes)!==0,Zo||l){if(n=ji,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Bu(e,s),td(n,e,s,-1))}return E_(),n=vj(Error(Wt(421))),Zb(e,t,o,n)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=lH.bind(null,e),s._reactRetry=t,null):(e=i.treeContext,Il=Jf(s.nextSibling),Ll=t,Ua=!0,Xc=null,e!==null&&(oc[lc++]=bu,oc[lc++]=yu,oc[lc++]=$h,bu=e.id,yu=e.overflow,$h=t),t=j_(t,n.children),t.flags|=4096,t)}function HC(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),nk(e.return,t,r)}function bj(e,t,r,n,s){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function gF(e,t,r){var n=t.pendingProps,s=n.revealOrder,i=n.tail;if(No(e,t,n.children,r),n=Ka.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&HC(e,r,t);else if(e.tag===19)HC(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(va(Ka,n),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(r=t.child,s=null;r!==null;)e=r.alternate,e!==null&&O2(e)===null&&(s=r),r=r.sibling;r=s,r===null?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),bj(t,!1,s,r,i);break;case"backwards":for(r=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&O2(e)===null){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}bj(t,!0,r,null,i);break;case"together":bj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Zy(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $u(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),zh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Wt(153));if(t.child!==null){for(e=t.child,r=r0(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=r0(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Yq(e,t,r){switch(t.tag){case 3:mF(t),Qm();break;case 5:qL(t);break;case 1:rl(t.type)&&S2(t);break;case 4:m_(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,s=t.memoizedProps.value;va(C2,n._currentValue),n._currentValue=s;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(va(Ka,Ka.current&1),t.flags|=128,null):r&t.child.childLanes?xF(e,t,r):(va(Ka,Ka.current&1),e=$u(e,t,r),e!==null?e.sibling:null);va(Ka,Ka.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return gF(e,t,r);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),va(Ka,Ka.current),n)break;return null;case 22:case 23:return t.lanes=0,hF(e,t,r)}return $u(e,t,r)}var vF,uk,bF,yF;vF=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};uk=function(){};bF=function(e,t,r,n){var s=e.memoizedProps;if(s!==n){e=t.stateNode,uh(qd.current);var i=null;switch(r){case"input":s=I4(e,s),n=I4(e,n),i=[];break;case"select":s=ts({},s,{value:void 0}),n=ts({},n,{value:void 0}),i=[];break;case"textarea":s=F4(e,s),n=F4(e,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=j2)}R4(r,n);var o;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Sv.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(d,r)),r=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Sv.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Aa("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}r&&(i=i||[]).push("style",r);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};yF=function(e,t,r,n){r!==n&&(t.flags|=4)};function yg(e,t){if(!Ua)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Gi(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function Qq(e,t,r){var n=t.pendingProps;switch(l_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gi(t),null;case 1:return rl(t.type)&&k2(),Gi(t),null;case 3:return n=t.stateNode,Zm(),Ia(tl),Ia(fo),g_(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Qb(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Xc!==null&&(bk(Xc),Xc=null))),uk(e,t),Gi(t),null;case 5:x_(t);var s=uh(Mv.current);if(r=t.type,e!==null&&t.stateNode!=null)bF(e,t,r,n,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(Wt(166));return Gi(t),null}if(e=uh(qd.current),Qb(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Fd]=t,n[Lv]=i,e=(t.mode&1)!==0,r){case"dialog":Aa("cancel",n),Aa("close",n);break;case"iframe":case"object":case"embed":Aa("load",n);break;case"video":case"audio":for(s=0;s<Vg.length;s++)Aa(Vg[s],n);break;case"source":Aa("error",n);break;case"img":case"image":case"link":Aa("error",n),Aa("load",n);break;case"details":Aa("toggle",n);break;case"input":ZA(n,i),Aa("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Aa("invalid",n);break;case"textarea":tC(n,i),Aa("invalid",n)}R4(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Yb(n.textContent,l,e),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Yb(n.textContent,l,e),s=["children",""+l]):Sv.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Aa("scroll",n)}switch(r){case"input":zb(n),eC(n,i,!0);break;case"textarea":zb(n),rC(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=j2)}n=s,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=KD(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Fd]=t,e[Lv]=n,vF(e,t,!1,!1),t.stateNode=e;e:{switch(o=B4(r,n),r){case"dialog":Aa("cancel",e),Aa("close",e),s=n;break;case"iframe":case"object":case"embed":Aa("load",e),s=n;break;case"video":case"audio":for(s=0;s<Vg.length;s++)Aa(Vg[s],e);s=n;break;case"source":Aa("error",e),s=n;break;case"img":case"image":case"link":Aa("error",e),Aa("load",e),s=n;break;case"details":Aa("toggle",e),s=n;break;case"input":ZA(e,n),s=I4(e,n),Aa("invalid",e);break;case"option":s=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},s=ts({},n,{value:void 0}),Aa("invalid",e);break;case"textarea":tC(e,n),s=F4(e,n),Aa("invalid",e);break;default:s=n}R4(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?QD(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&XD(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&_v(e,c):typeof c=="number"&&_v(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Sv.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Aa("scroll",e):c!=null&&GS(e,i,c,o))}switch(r){case"input":zb(e),eC(e,n,!1);break;case"textarea":zb(e),rC(e);break;case"option":n.value!=null&&e.setAttribute("value",""+c0(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?bm(e,!!n.multiple,i,!1):n.defaultValue!=null&&bm(e,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=j2)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Gi(t),null;case 6:if(e&&t.stateNode!=null)yF(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(Wt(166));if(r=uh(Mv.current),uh(qd.current),Qb(t)){if(n=t.stateNode,r=t.memoizedProps,n[Fd]=t,(i=n.nodeValue!==r)&&(e=Ll,e!==null))switch(e.tag){case 3:Yb(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Yb(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Fd]=t,t.stateNode=n}return Gi(t),null;case 13:if(Ia(Ka),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ua&&Il!==null&&t.mode&1&&!(t.flags&128))RL(),Qm(),t.flags|=98560,i=!1;else if(i=Qb(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(Wt(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Wt(317));i[Fd]=t}else Qm(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Gi(t),i=!1}else Xc!==null&&(bk(Xc),Xc=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||Ka.current&1?ri===0&&(ri=3):E_())),t.updateQueue!==null&&(t.flags|=4),Gi(t),null);case 4:return Zm(),uk(e,t),e===null&&Iv(t.stateNode.containerInfo),Gi(t),null;case 10:return f_(t.type._context),Gi(t),null;case 17:return rl(t.type)&&k2(),Gi(t),null;case 19:if(Ia(Ka),i=t.memoizedState,i===null)return Gi(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)yg(i,!1);else{if(ri!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=O2(e),o!==null){for(t.flags|=128,yg(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return va(Ka,Ka.current&1|2),t.child}e=e.sibling}i.tail!==null&&Ns()>tx&&(t.flags|=128,n=!0,yg(i,!1),t.lanes=4194304)}else{if(!n)if(e=O2(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),yg(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ua)return Gi(t),null}else 2*Ns()-i.renderingStartTime>tx&&r!==1073741824&&(t.flags|=128,n=!0,yg(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Ns(),t.sibling=null,r=Ka.current,va(Ka,n?r&1|2:r&1),t):(Gi(t),null);case 22:case 23:return C_(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Sl&1073741824&&(Gi(t),t.subtreeFlags&6&&(t.flags|=8192)):Gi(t),null;case 24:return null;case 25:return null}throw Error(Wt(156,t.tag))}function Jq(e,t){switch(l_(t),t.tag){case 1:return rl(t.type)&&k2(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Zm(),Ia(tl),Ia(fo),g_(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return x_(t),null;case 13:if(Ia(Ka),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Wt(340));Qm()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ia(Ka),null;case 4:return Zm(),null;case 10:return f_(t.type._context),null;case 22:case 23:return C_(),null;case 24:return null;default:return null}}var ey=!1,no=!1,Zq=typeof WeakSet=="function"?WeakSet:Set,mr=null;function um(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ds(e,t,n)}else r.current=null}function fk(e,t,r){try{r()}catch(n){ds(e,t,n)}}var WC=!1;function eH(e,t){if(X4=y2,e=SL(),i_(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,d=0,f=0,u=e,p=null;t:for(;;){for(var h;u!==r||s!==0&&u.nodeType!==3||(l=o+s),u!==i||n!==0&&u.nodeType!==3||(c=o+n),u.nodeType===3&&(o+=u.nodeValue.length),(h=u.firstChild)!==null;)p=u,u=h;for(;;){if(u===e)break t;if(p===r&&++d===s&&(l=o),p===i&&++f===n&&(c=o),(h=u.nextSibling)!==null)break;u=p,p=u.parentNode}u=h}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Y4={focusedElem:e,selectionRange:r},y2=!1,mr=t;mr!==null;)if(t=mr,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,mr=e;else for(;mr!==null;){t=mr;try{var m=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var g=m.memoizedProps,x=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:qc(t.type,g),x);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Wt(163))}}catch(y){ds(t,t.return,y)}if(e=t.sibling,e!==null){e.return=t.return,mr=e;break}mr=t.return}return m=WC,WC=!1,m}function iv(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,i!==void 0&&fk(t,r,i)}s=s.next}while(s!==n)}}function j5(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function hk(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function wF(e){var t=e.alternate;t!==null&&(e.alternate=null,wF(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Fd],delete t[Lv],delete t[Z4],delete t[Fq],delete t[Mq])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function NF(e){return e.tag===5||e.tag===3||e.tag===4}function VC(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||NF(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function pk(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=j2));else if(n!==4&&(e=e.child,e!==null))for(pk(e,t,r),e=e.sibling;e!==null;)pk(e,t,r),e=e.sibling}function mk(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(mk(e,t,r),e=e.sibling;e!==null;)mk(e,t,r),e=e.sibling}var Ti=null,Gc=!1;function vf(e,t,r){for(r=r.child;r!==null;)jF(e,t,r),r=r.sibling}function jF(e,t,r){if(zd&&typeof zd.onCommitFiberUnmount=="function")try{zd.onCommitFiberUnmount(m5,r)}catch{}switch(r.tag){case 5:no||um(r,t);case 6:var n=Ti,s=Gc;Ti=null,vf(e,t,r),Ti=n,Gc=s,Ti!==null&&(Gc?(e=Ti,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Ti.removeChild(r.stateNode));break;case 18:Ti!==null&&(Gc?(e=Ti,r=r.stateNode,e.nodeType===8?fj(e.parentNode,r):e.nodeType===1&&fj(e,r),Tv(e)):fj(Ti,r.stateNode));break;case 4:n=Ti,s=Gc,Ti=r.stateNode.containerInfo,Gc=!0,vf(e,t,r),Ti=n,Gc=s;break;case 0:case 11:case 14:case 15:if(!no&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&fk(r,t,o),s=s.next}while(s!==n)}vf(e,t,r);break;case 1:if(!no&&(um(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){ds(r,t,l)}vf(e,t,r);break;case 21:vf(e,t,r);break;case 22:r.mode&1?(no=(n=no)||r.memoizedState!==null,vf(e,t,r),no=n):vf(e,t,r);break;default:vf(e,t,r)}}function GC(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Zq),t.forEach(function(n){var s=cH.bind(null,e,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Fc(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ti=l.stateNode,Gc=!1;break e;case 3:Ti=l.stateNode.containerInfo,Gc=!0;break e;case 4:Ti=l.stateNode.containerInfo,Gc=!0;break e}l=l.return}if(Ti===null)throw Error(Wt(160));jF(i,o,s),Ti=null,Gc=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){ds(s,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)kF(t,e),t=t.sibling}function kF(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Fc(t,e),kd(e),n&4){try{iv(3,e,e.return),j5(3,e)}catch(g){ds(e,e.return,g)}try{iv(5,e,e.return)}catch(g){ds(e,e.return,g)}}break;case 1:Fc(t,e),kd(e),n&512&&r!==null&&um(r,r.return);break;case 5:if(Fc(t,e),kd(e),n&512&&r!==null&&um(r,r.return),e.flags&32){var s=e.stateNode;try{_v(s,"")}catch(g){ds(e,e.return,g)}}if(n&4&&(s=e.stateNode,s!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&VD(s,i),B4(l,o);var d=B4(l,i);for(o=0;o<c.length;o+=2){var f=c[o],u=c[o+1];f==="style"?QD(s,u):f==="dangerouslySetInnerHTML"?XD(s,u):f==="children"?_v(s,u):GS(s,f,u,d)}switch(l){case"input":D4(s,i);break;case"textarea":GD(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var h=i.value;h!=null?bm(s,!!i.multiple,h,!1):p!==!!i.multiple&&(i.defaultValue!=null?bm(s,!!i.multiple,i.defaultValue,!0):bm(s,!!i.multiple,i.multiple?[]:"",!1))}s[Lv]=i}catch(g){ds(e,e.return,g)}}break;case 6:if(Fc(t,e),kd(e),n&4){if(e.stateNode===null)throw Error(Wt(162));s=e.stateNode,i=e.memoizedProps;try{s.nodeValue=i}catch(g){ds(e,e.return,g)}}break;case 3:if(Fc(t,e),kd(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Tv(t.containerInfo)}catch(g){ds(e,e.return,g)}break;case 4:Fc(t,e),kd(e);break;case 13:Fc(t,e),kd(e),s=e.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(__=Ns())),n&4&&GC(e);break;case 22:if(f=r!==null&&r.memoizedState!==null,e.mode&1?(no=(d=no)||f,Fc(t,e),no=d):Fc(t,e),kd(e),n&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!f&&e.mode&1)for(mr=e,f=e.child;f!==null;){for(u=mr=f;mr!==null;){switch(p=mr,h=p.child,p.tag){case 0:case 11:case 14:case 15:iv(4,p,p.return);break;case 1:um(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){n=p,r=p.return;try{t=n,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){ds(n,r,g)}}break;case 5:um(p,p.return);break;case 22:if(p.memoizedState!==null){XC(u);continue}}h!==null?(h.return=p,mr=h):XC(u)}f=f.sibling}e:for(f=null,u=e;;){if(u.tag===5){if(f===null){f=u;try{s=u.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=u.stateNode,c=u.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=YD("display",o))}catch(g){ds(e,e.return,g)}}}else if(u.tag===6){if(f===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(g){ds(e,e.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;f===u&&(f=null),u=u.return}f===u&&(f=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:Fc(t,e),kd(e),n&4&&GC(e);break;case 21:break;default:Fc(t,e),kd(e)}}function kd(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(NF(r)){var n=r;break e}r=r.return}throw Error(Wt(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(_v(s,""),n.flags&=-33);var i=VC(e);mk(e,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,l=VC(e);pk(e,l,o);break;default:throw Error(Wt(161))}}catch(c){ds(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function tH(e,t,r){mr=e,SF(e)}function SF(e,t,r){for(var n=(e.mode&1)!==0;mr!==null;){var s=mr,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||ey;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||no;l=ey;var d=no;if(ey=o,(no=c)&&!d)for(mr=s;mr!==null;)o=mr,c=o.child,o.tag===22&&o.memoizedState!==null?YC(s):c!==null?(c.return=o,mr=c):YC(s);for(;i!==null;)mr=i,SF(i),i=i.sibling;mr=s,ey=l,no=d}KC(e)}else s.subtreeFlags&8772&&i!==null?(i.return=s,mr=i):KC(e)}}function KC(e){for(;mr!==null;){var t=mr;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:no||j5(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!no)if(r===null)n.componentDidMount();else{var s=t.elementType===t.type?r.memoizedProps:qc(t.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&PC(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}PC(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var u=f.dehydrated;u!==null&&Tv(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Wt(163))}no||t.flags&512&&hk(t)}catch(p){ds(t,t.return,p)}}if(t===e){mr=null;break}if(r=t.sibling,r!==null){r.return=t.return,mr=r;break}mr=t.return}}function XC(e){for(;mr!==null;){var t=mr;if(t===e){mr=null;break}var r=t.sibling;if(r!==null){r.return=t.return,mr=r;break}mr=t.return}}function YC(e){for(;mr!==null;){var t=mr;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{j5(4,t)}catch(c){ds(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var s=t.return;try{n.componentDidMount()}catch(c){ds(t,s,c)}}var i=t.return;try{hk(t)}catch(c){ds(t,i,c)}break;case 5:var o=t.return;try{hk(t)}catch(c){ds(t,o,c)}}}catch(c){ds(t,t.return,c)}if(t===e){mr=null;break}var l=t.sibling;if(l!==null){l.return=t.return,mr=l;break}mr=t.return}}var rH=Math.ceil,D2=Gu.ReactCurrentDispatcher,k_=Gu.ReactCurrentOwner,fc=Gu.ReactCurrentBatchConfig,Fn=0,ji=null,zs=null,Li=0,Sl=0,fm=y0(0),ri=0,Uv=null,zh=0,k5=0,S_=0,ov=null,Qo=null,__=0,tx=1/0,fu=null,L2=!1,xk=null,e0=null,ty=!1,qf=null,F2=0,lv=0,gk=null,e2=-1,t2=0;function Co(){return Fn&6?Ns():e2!==-1?e2:e2=Ns()}function t0(e){return e.mode&1?Fn&2&&Li!==0?Li&-Li:Bq.transition!==null?(t2===0&&(t2=cL()),t2):(e=sa,e!==0||(e=window.event,e=e===void 0?16:xL(e.type)),e):1}function td(e,t,r,n){if(50<lv)throw lv=0,gk=null,Error(Wt(185));K1(e,r,n),(!(Fn&2)||e!==ji)&&(e===ji&&(!(Fn&2)&&(k5|=r),ri===4&&Ef(e,Li)),nl(e,n),r===1&&Fn===0&&!(t.mode&1)&&(tx=Ns()+500,y5&&w0()))}function nl(e,t){var r=e.callbackNode;Bz(e,t);var n=b2(e,e===ji?Li:0);if(n===0)r!==null&&sC(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&sC(r),t===1)e.tag===0?Rq(QC.bind(null,e)):LL(QC.bind(null,e)),Dq(function(){!(Fn&6)&&w0()}),r=null;else{switch(dL(n)){case 1:r=JS;break;case 4:r=oL;break;case 16:r=v2;break;case 536870912:r=lL;break;default:r=v2}r=IF(r,_F.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function _F(e,t){if(e2=-1,t2=0,Fn&6)throw Error(Wt(327));var r=e.callbackNode;if(km()&&e.callbackNode!==r)return null;var n=b2(e,e===ji?Li:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=M2(e,n);else{t=n;var s=Fn;Fn|=2;var i=CF();(ji!==e||Li!==t)&&(fu=null,tx=Ns()+500,Ch(e,t));do try{sH();break}catch(l){AF(e,l)}while(!0);u_(),D2.current=i,Fn=s,zs!==null?t=0:(ji=null,Li=0,t=ri)}if(t!==0){if(t===2&&(s=H4(e),s!==0&&(n=s,t=vk(e,s))),t===1)throw r=Uv,Ch(e,0),Ef(e,n),nl(e,Ns()),r;if(t===6)Ef(e,n);else{if(s=e.current.alternate,!(n&30)&&!nH(s)&&(t=M2(e,n),t===2&&(i=H4(e),i!==0&&(n=i,t=vk(e,i))),t===1))throw r=Uv,Ch(e,0),Ef(e,n),nl(e,Ns()),r;switch(e.finishedWork=s,e.finishedLanes=n,t){case 0:case 1:throw Error(Wt(345));case 2:th(e,Qo,fu);break;case 3:if(Ef(e,n),(n&130023424)===n&&(t=__+500-Ns(),10<t)){if(b2(e,0)!==0)break;if(s=e.suspendedLanes,(s&n)!==n){Co(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=J4(th.bind(null,e,Qo,fu),t);break}th(e,Qo,fu);break;case 4:if(Ef(e,n),(n&4194240)===n)break;for(t=e.eventTimes,s=-1;0<n;){var o=31-ed(n);i=1<<o,o=t[o],o>s&&(s=o),n&=~i}if(n=s,n=Ns()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*rH(n/1960))-n,10<n){e.timeoutHandle=J4(th.bind(null,e,Qo,fu),n);break}th(e,Qo,fu);break;case 5:th(e,Qo,fu);break;default:throw Error(Wt(329))}}}return nl(e,Ns()),e.callbackNode===r?_F.bind(null,e):null}function vk(e,t){var r=ov;return e.current.memoizedState.isDehydrated&&(Ch(e,t).flags|=256),e=M2(e,t),e!==2&&(t=Qo,Qo=r,t!==null&&bk(t)),e}function bk(e){Qo===null?Qo=e:Qo.push.apply(Qo,e)}function nH(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!ld(i(),s))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ef(e,t){for(t&=~S_,t&=~k5,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ed(t),n=1<<r;e[r]=-1,t&=~n}}function QC(e){if(Fn&6)throw Error(Wt(327));km();var t=b2(e,0);if(!(t&1))return nl(e,Ns()),null;var r=M2(e,t);if(e.tag!==0&&r===2){var n=H4(e);n!==0&&(t=n,r=vk(e,n))}if(r===1)throw r=Uv,Ch(e,0),Ef(e,t),nl(e,Ns()),r;if(r===6)throw Error(Wt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,th(e,Qo,fu),nl(e,Ns()),null}function A_(e,t){var r=Fn;Fn|=1;try{return e(t)}finally{Fn=r,Fn===0&&(tx=Ns()+500,y5&&w0())}}function qh(e){qf!==null&&qf.tag===0&&!(Fn&6)&&km();var t=Fn;Fn|=1;var r=fc.transition,n=sa;try{if(fc.transition=null,sa=1,e)return e()}finally{sa=n,fc.transition=r,Fn=t,!(Fn&6)&&w0()}}function C_(){Sl=fm.current,Ia(fm)}function Ch(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Iq(r)),zs!==null)for(r=zs.return;r!==null;){var n=r;switch(l_(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&k2();break;case 3:Zm(),Ia(tl),Ia(fo),g_();break;case 5:x_(n);break;case 4:Zm();break;case 13:Ia(Ka);break;case 19:Ia(Ka);break;case 10:f_(n.type._context);break;case 22:case 23:C_()}r=r.return}if(ji=e,zs=e=r0(e.current,null),Li=Sl=t,ri=0,Uv=null,S_=k5=zh=0,Qo=ov=null,dh!==null){for(t=0;t<dh.length;t++)if(r=dh[t],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}dh=null}return e}function AF(e,t){do{var r=zs;try{if(u_(),Qy.current=I2,P2){for(var n=es.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}P2=!1}if(Uh=0,gi=Zs=es=null,sv=!1,Rv=0,k_.current=null,r===null||r.return===null){ri=1,Uv=t,zs=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=Li,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,u=f.tag;if(!(f.mode&1)&&(u===0||u===11||u===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var h=RC(o);if(h!==null){h.flags&=-257,BC(h,o,l,i,t),h.mode&1&&MC(i,d,t),t=h,c=d;var m=t.updateQueue;if(m===null){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}else{if(!(t&1)){MC(i,d,t),E_();break e}c=Error(Wt(426))}}else if(Ua&&l.mode&1){var x=RC(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),BC(x,o,l,i,t),c_(ex(c,l));break e}}i=c=ex(c,l),ri!==4&&(ri=2),ov===null?ov=[i]:ov.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=dF(i,c,t);OC(i,v);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(e0===null||!e0.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var y=uF(i,l,t);OC(i,y);break e}}i=i.return}while(i!==null)}TF(r)}catch(N){t=N,zs===r&&r!==null&&(zs=r=r.return);continue}break}while(!0)}function CF(){var e=D2.current;return D2.current=I2,e===null?I2:e}function E_(){(ri===0||ri===3||ri===2)&&(ri=4),ji===null||!(zh&268435455)&&!(k5&268435455)||Ef(ji,Li)}function M2(e,t){var r=Fn;Fn|=2;var n=CF();(ji!==e||Li!==t)&&(fu=null,Ch(e,t));do try{aH();break}catch(s){AF(e,s)}while(!0);if(u_(),Fn=r,D2.current=n,zs!==null)throw Error(Wt(261));return ji=null,Li=0,ri}function aH(){for(;zs!==null;)EF(zs)}function sH(){for(;zs!==null&&!Tz();)EF(zs)}function EF(e){var t=PF(e.alternate,e,Sl);e.memoizedProps=e.pendingProps,t===null?TF(e):zs=t,k_.current=null}function TF(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Jq(r,t),r!==null){r.flags&=32767,zs=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ri=6,zs=null;return}}else if(r=Qq(r,t,Sl),r!==null){zs=r;return}if(t=t.sibling,t!==null){zs=t;return}zs=t=e}while(t!==null);ri===0&&(ri=5)}function th(e,t,r){var n=sa,s=fc.transition;try{fc.transition=null,sa=1,iH(e,t,r,n)}finally{fc.transition=s,sa=n}return null}function iH(e,t,r,n){do km();while(qf!==null);if(Fn&6)throw Error(Wt(327));r=e.finishedWork;var s=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Wt(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if($z(e,i),e===ji&&(zs=ji=null,Li=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||ty||(ty=!0,IF(v2,function(){return km(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=fc.transition,fc.transition=null;var o=sa;sa=1;var l=Fn;Fn|=4,k_.current=null,eH(e,r),kF(r,e),_q(Y4),y2=!!X4,Y4=X4=null,e.current=r,tH(r),Oz(),Fn=l,sa=o,fc.transition=i}else e.current=r;if(ty&&(ty=!1,qf=e,F2=s),i=e.pendingLanes,i===0&&(e0=null),Dz(r.stateNode),nl(e,Ns()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)s=t[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(L2)throw L2=!1,e=xk,xk=null,e;return F2&1&&e.tag!==0&&km(),i=e.pendingLanes,i&1?e===gk?lv++:(lv=0,gk=e):lv=0,w0(),null}function km(){if(qf!==null){var e=dL(F2),t=fc.transition,r=sa;try{if(fc.transition=null,sa=16>e?16:e,qf===null)var n=!1;else{if(e=qf,qf=null,F2=0,Fn&6)throw Error(Wt(331));var s=Fn;for(Fn|=4,mr=e.current;mr!==null;){var i=mr,o=i.child;if(mr.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(mr=d;mr!==null;){var f=mr;switch(f.tag){case 0:case 11:case 15:iv(8,f,i)}var u=f.child;if(u!==null)u.return=f,mr=u;else for(;mr!==null;){f=mr;var p=f.sibling,h=f.return;if(wF(f),f===d){mr=null;break}if(p!==null){p.return=h,mr=p;break}mr=h}}}var m=i.alternate;if(m!==null){var g=m.child;if(g!==null){m.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}mr=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,mr=o;else e:for(;mr!==null;){if(i=mr,i.flags&2048)switch(i.tag){case 0:case 11:case 15:iv(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,mr=v;break e}mr=i.return}}var b=e.current;for(mr=b;mr!==null;){o=mr;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,mr=w;else e:for(o=b;mr!==null;){if(l=mr,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:j5(9,l)}}catch(N){ds(l,l.return,N)}if(l===o){mr=null;break e}var y=l.sibling;if(y!==null){y.return=l.return,mr=y;break e}mr=l.return}}if(Fn=s,w0(),zd&&typeof zd.onPostCommitFiberRoot=="function")try{zd.onPostCommitFiberRoot(m5,e)}catch{}n=!0}return n}finally{sa=r,fc.transition=t}}return!1}function JC(e,t,r){t=ex(r,t),t=dF(e,t,1),e=Zf(e,t,1),t=Co(),e!==null&&(K1(e,1,t),nl(e,t))}function ds(e,t,r){if(e.tag===3)JC(e,e,r);else for(;t!==null;){if(t.tag===3){JC(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(e0===null||!e0.has(n))){e=ex(r,e),e=uF(t,e,1),t=Zf(t,e,1),e=Co(),t!==null&&(K1(t,1,e),nl(t,e));break}}t=t.return}}function oH(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Co(),e.pingedLanes|=e.suspendedLanes&r,ji===e&&(Li&r)===r&&(ri===4||ri===3&&(Li&130023424)===Li&&500>Ns()-__?Ch(e,0):S_|=r),nl(e,t)}function OF(e,t){t===0&&(e.mode&1?(t=Wb,Wb<<=1,!(Wb&130023424)&&(Wb=4194304)):t=1);var r=Co();e=Bu(e,t),e!==null&&(K1(e,t,r),nl(e,r))}function lH(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),OF(e,r)}function cH(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,s=e.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(Wt(314))}n!==null&&n.delete(t),OF(e,r)}var PF;PF=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||tl.current)Zo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Zo=!1,Yq(e,t,r);Zo=!!(e.flags&131072)}else Zo=!1,Ua&&t.flags&1048576&&FL(t,A2,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Zy(e,t),e=t.pendingProps;var s=Ym(t,fo.current);jm(t,r),s=b_(null,t,n,e,s,r);var i=y_();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,rl(n)?(i=!0,S2(t)):i=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,p_(t),s.updater=N5,t.stateNode=s,s._reactInternals=t,sk(t,n,e,r),t=lk(null,t,n,!0,i,r)):(t.tag=0,Ua&&i&&o_(t),No(null,t,s,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Zy(e,t),e=t.pendingProps,s=n._init,n=s(n._payload),t.type=n,s=t.tag=uH(n),e=qc(n,e),s){case 0:t=ok(null,t,n,e,r);break e;case 1:t=zC(null,t,n,e,r);break e;case 11:t=$C(null,t,n,e,r);break e;case 14:t=UC(null,t,n,qc(n.type,e),r);break e}throw Error(Wt(306,n,""))}return t;case 0:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qc(n,s),ok(e,t,n,s,r);case 1:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qc(n,s),zC(e,t,n,s,r);case 3:e:{if(mF(t),e===null)throw Error(Wt(387));n=t.pendingProps,i=t.memoizedState,s=i.element,zL(e,t),T2(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){s=ex(Error(Wt(423)),t),t=qC(e,t,n,r,s);break e}else if(n!==s){s=ex(Error(Wt(424)),t),t=qC(e,t,n,r,s);break e}else for(Il=Jf(t.stateNode.containerInfo.firstChild),Ll=t,Ua=!0,Xc=null,r=$L(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Qm(),n===s){t=$u(e,t,r);break e}No(e,t,n,r)}t=t.child}return t;case 5:return qL(t),e===null&&rk(t),n=t.type,s=t.pendingProps,i=e!==null?e.memoizedProps:null,o=s.children,Q4(n,s)?o=null:i!==null&&Q4(n,i)&&(t.flags|=32),pF(e,t),No(e,t,o,r),t.child;case 6:return e===null&&rk(t),null;case 13:return xF(e,t,r);case 4:return m_(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Jm(t,null,n,r):No(e,t,n,r),t.child;case 11:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qc(n,s),$C(e,t,n,s,r);case 7:return No(e,t,t.pendingProps,r),t.child;case 8:return No(e,t,t.pendingProps.children,r),t.child;case 12:return No(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,s=t.pendingProps,i=t.memoizedProps,o=s.value,va(C2,n._currentValue),n._currentValue=o,i!==null)if(ld(i.value,o)){if(i.children===s.children&&!tl.current){t=$u(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Au(-1,r&-r),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),nk(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Wt(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),nk(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}No(e,t,s.children,r),t=t.child}return t;case 9:return s=t.type,n=t.pendingProps.children,jm(t,r),s=xc(s),n=n(s),t.flags|=1,No(e,t,n,r),t.child;case 14:return n=t.type,s=qc(n,t.pendingProps),s=qc(n.type,s),UC(e,t,n,s,r);case 15:return fF(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,s=t.pendingProps,s=t.elementType===n?s:qc(n,s),Zy(e,t),t.tag=1,rl(n)?(e=!0,S2(t)):e=!1,jm(t,r),cF(t,n,s),sk(t,n,s,r),lk(null,t,n,!0,e,r);case 19:return gF(e,t,r);case 22:return hF(e,t,r)}throw Error(Wt(156,t.tag))};function IF(e,t){return iL(e,t)}function dH(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function dc(e,t,r,n){return new dH(e,t,r,n)}function T_(e){return e=e.prototype,!(!e||!e.isReactComponent)}function uH(e){if(typeof e=="function")return T_(e)?1:0;if(e!=null){if(e=e.$$typeof,e===XS)return 11;if(e===YS)return 14}return 2}function r0(e,t){var r=e.alternate;return r===null?(r=dc(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function r2(e,t,r,n,s,i){var o=2;if(n=e,typeof e=="function")T_(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case rm:return Eh(r.children,s,i,t);case KS:o=8,s|=8;break;case E4:return e=dc(12,r,t,s|2),e.elementType=E4,e.lanes=i,e;case T4:return e=dc(13,r,t,s),e.elementType=T4,e.lanes=i,e;case O4:return e=dc(19,r,t,s),e.elementType=O4,e.lanes=i,e;case qD:return S5(r,s,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case UD:o=10;break e;case zD:o=9;break e;case XS:o=11;break e;case YS:o=14;break e;case Sf:o=16,n=null;break e}throw Error(Wt(130,e==null?e:typeof e,""))}return t=dc(o,r,t,s),t.elementType=e,t.type=n,t.lanes=i,t}function Eh(e,t,r,n){return e=dc(7,e,n,t),e.lanes=r,e}function S5(e,t,r,n){return e=dc(22,e,n,t),e.elementType=qD,e.lanes=r,e.stateNode={isHidden:!1},e}function yj(e,t,r){return e=dc(6,e,null,t),e.lanes=r,e}function wj(e,t,r){return t=dc(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function fH(e,t,r,n,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=tj(0),this.expirationTimes=tj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=tj(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function O_(e,t,r,n,s,i,o,l,c){return e=new fH(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=dc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},p_(i),e}function hH(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tm,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function DF(e){if(!e)return d0;e=e._reactInternals;e:{if(ip(e)!==e||e.tag!==1)throw Error(Wt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(rl(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Wt(171))}if(e.tag===1){var r=e.type;if(rl(r))return DL(e,r,t)}return t}function LF(e,t,r,n,s,i,o,l,c){return e=O_(r,n,!0,e,s,i,o,l,c),e.context=DF(null),r=e.current,n=Co(),s=t0(r),i=Au(n,s),i.callback=t??null,Zf(r,i,s),e.current.lanes=s,K1(e,s,n),nl(e,n),e}function _5(e,t,r,n){var s=t.current,i=Co(),o=t0(s);return r=DF(r),t.context===null?t.context=r:t.pendingContext=r,t=Au(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=Zf(s,t,o),e!==null&&(td(e,s,o,i),Yy(e,s,o)),o}function R2(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function ZC(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function P_(e,t){ZC(e,t),(e=e.alternate)&&ZC(e,t)}function pH(){return null}var FF=typeof reportError=="function"?reportError:function(e){console.error(e)};function I_(e){this._internalRoot=e}A5.prototype.render=I_.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Wt(409));_5(e,t,null,null)};A5.prototype.unmount=I_.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qh(function(){_5(null,e,null,null)}),t[Ru]=null}};function A5(e){this._internalRoot=e}A5.prototype.unstable_scheduleHydration=function(e){if(e){var t=hL();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Cf.length&&t!==0&&t<Cf[r].priority;r++);Cf.splice(r,0,e),r===0&&mL(e)}};function D_(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function C5(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function eE(){}function mH(e,t,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=R2(o);i.call(d)}}var o=LF(t,n,e,0,null,!1,!1,"",eE);return e._reactRootContainer=o,e[Ru]=o.current,Iv(e.nodeType===8?e.parentNode:e),qh(),o}for(;s=e.lastChild;)e.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=R2(c);l.call(d)}}var c=O_(e,0,!1,null,null,!1,!1,"",eE);return e._reactRootContainer=c,e[Ru]=c.current,Iv(e.nodeType===8?e.parentNode:e),qh(function(){_5(t,c,r,n)}),c}function E5(e,t,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=R2(o);l.call(c)}}_5(t,o,e,s)}else o=mH(r,t,e,s,n);return R2(o)}uL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Wg(t.pendingLanes);r!==0&&(ZS(t,r|1),nl(t,Ns()),!(Fn&6)&&(tx=Ns()+500,w0()))}break;case 13:qh(function(){var n=Bu(e,1);if(n!==null){var s=Co();td(n,e,1,s)}}),P_(e,1)}};e_=function(e){if(e.tag===13){var t=Bu(e,134217728);if(t!==null){var r=Co();td(t,e,134217728,r)}P_(e,134217728)}};fL=function(e){if(e.tag===13){var t=t0(e),r=Bu(e,t);if(r!==null){var n=Co();td(r,e,t,n)}P_(e,t)}};hL=function(){return sa};pL=function(e,t){var r=sa;try{return sa=e,t()}finally{sa=r}};U4=function(e,t,r){switch(t){case"input":if(D4(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var s=b5(n);if(!s)throw Error(Wt(90));WD(n),D4(n,s)}}}break;case"textarea":GD(e,r);break;case"select":t=r.value,t!=null&&bm(e,!!r.multiple,t,!1)}};eL=A_;tL=qh;var xH={usingClientEntryPoint:!1,Events:[Y1,im,b5,JD,ZD,A_]},wg={findFiberByHostInstance:ch,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},gH={bundleType:wg.bundleType,version:wg.version,rendererPackageName:wg.rendererPackageName,rendererConfig:wg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gu.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=aL(e),e===null?null:e.stateNode},findFiberByHostInstance:wg.findFiberByHostInstance||pH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ry=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ry.isDisabled&&ry.supportsFiber)try{m5=ry.inject(gH),zd=ry}catch{}}Bl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xH;Bl.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!D_(t))throw Error(Wt(200));return hH(e,t,null,r)};Bl.createRoot=function(e,t){if(!D_(e))throw Error(Wt(299));var r=!1,n="",s=FF;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=O_(e,1,!1,null,null,r,!1,n,s),e[Ru]=t.current,Iv(e.nodeType===8?e.parentNode:e),new I_(t)};Bl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Wt(188)):(e=Object.keys(e).join(","),Error(Wt(268,e)));return e=aL(t),e=e===null?null:e.stateNode,e};Bl.flushSync=function(e){return qh(e)};Bl.hydrate=function(e,t,r){if(!C5(t))throw Error(Wt(200));return E5(null,e,t,!0,r)};Bl.hydrateRoot=function(e,t,r){if(!D_(e))throw Error(Wt(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=FF;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=LF(t,null,e,1,r??null,s,!1,i,o),e[Ru]=t.current,Iv(e),n)for(e=0;e<n.length;e++)r=n[e],s=r._getVersion,s=s(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,s]:t.mutableSourceEagerHydrationData.push(r,s);return new A5(t)};Bl.render=function(e,t,r){if(!C5(t))throw Error(Wt(200));return E5(null,e,t,!1,r)};Bl.unmountComponentAtNode=function(e){if(!C5(e))throw Error(Wt(40));return e._reactRootContainer?(qh(function(){E5(null,null,e,!1,function(){e._reactRootContainer=null,e[Ru]=null})}),!0):!1};Bl.unstable_batchedUpdates=A_;Bl.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!C5(r))throw Error(Wt(200));if(e==null||e._reactInternals===void 0)throw Error(Wt(38));return E5(e,t,r,!1,n)};Bl.version="18.3.1-next-f1338f8080-20240426";function MF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(MF)}catch(e){console.error(e)}}MF(),MD.exports=Bl;var RF=MD.exports,tE=RF;A4.createRoot=tE.createRoot,A4.hydrateRoot=tE.hydrateRoot;const vH="modulepreload",bH=function(e){return"/"+e},rE={},B2=function(t,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(c=>{if(c=bH(c),c in rE)return;rE[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":vH,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((p,h)=>{u.addEventListener("load",p),u.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),BF=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var wH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NH=P.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...l},c)=>P.createElement("svg",{ref:c,...wH,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:BF("lucide",s),...l},[...o.map(([d,f])=>P.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=(e,t)=>{const r=P.forwardRef(({className:n,...s},i)=>P.createElement(NH,{ref:i,iconNode:t,className:BF(`lucide-${yH(e)}`,n),...s}));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=St("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=St("AlignLeft",[["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 18H3",key:"1amg6g"}],["path",{d:"M21 6H3",key:"1jwq7v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=St("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L_=St("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=St("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=St("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hh=St("AtSign",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M16 8v5a3 3 0 0 0 6 0v-1a10 10 0 1 0-4 8",key:"7n84p3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ny=St("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T5=St("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=St("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aE=St("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $2=St("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const al=St("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n2=St("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rd=St("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ln=St("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=St("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $F=St("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=St("ChartPie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yd=St("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=St("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yk=St("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ra=St("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wk=St("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=St("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=St("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=St("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=St("CirclePause",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"10",x2:"10",y1:"15",y2:"9",key:"c1nkhi"}],["line",{x1:"14",x2:"14",y1:"15",y2:"9",key:"h65svq"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UF=St("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hd=St("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=St("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tf=St("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=St("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zF=St("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qF=St("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uu=St("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n0=St("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=St("Earth",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3a2 2 0 0 1 2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.1.9-2 2-2h3.17",key:"1tzkfa"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"14pb5j"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F_=St("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=St("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CH=St("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wd=St("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EH=St("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a2=St("FilePenLine",[["path",{d:"m18 5-2.414-2.414A2 2 0 0 0 14.172 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2",key:"142zxg"}],["path",{d:"M21.378 12.626a1 1 0 0 0-3.004-3.004l-4.01 4.012a2 2 0 0 0-.506.854l-.837 2.87a.5.5 0 0 0 .62.62l2.87-.837a2 2 0 0 0 .854-.506z",key:"2t3380"}],["path",{d:"M8 18h1",key:"13wk12"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TH=St("FileSearch",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M4.268 21a2 2 0 0 0 1.727 1H18a2 2 0 0 0 2-2V7l-5-5H6a2 2 0 0 0-2 2v3",key:"ms7g94"}],["path",{d:"m9 18-1.5-1.5",key:"1j6qii"}],["circle",{cx:"5",cy:"14",r:"3",key:"ufru5t"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=St("FileSpreadsheet",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 17h2",key:"10kma7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=St("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oE=St("FileUp",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M12 12v6",key:"3ahymv"}],["path",{d:"m15 15-3-3-3 3",key:"15xj92"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=St("FileVideo",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=St("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nl=St("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a0=St("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=St("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Th=St("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=St("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jl=St("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=St("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cu=St("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=St("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=St("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ay=St("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u0=St("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nk=St("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jk=St("Link2",[["path",{d:"M9 17H7A5 5 0 0 1 7 7h2",key:"8i5ue5"}],["path",{d:"M15 7h2a5 5 0 1 1 0 10h-2",key:"1b9ql8"}],["line",{x1:"8",x2:"16",y1:"12",y2:"12",key:"1jonct"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=St("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=St("Linkedin",[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O5=St("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MH=St("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=St("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=St("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HF=St("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=St("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WF=St("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s2=St("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BH=St("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=St("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i2=St("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=St("MessageCircle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=St("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=St("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qH=St("Newspaper",[["path",{d:"M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2Zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2",key:"7pis2x"}],["path",{d:"M18 14h-8",key:"sponae"}],["path",{d:"M15 18h-5",key:"95g1m2"}],["path",{d:"M10 6h8v4h-8V6Z",key:"smlsk5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=St("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kk=St("PanelsTopLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rh=St("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=St("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sk=St("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eo=St("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=St("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VH=St("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=St("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ak=St("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z",key:"q3az6g"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17.5v-11",key:"1jc1ny"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vd=St("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=St("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U2=St("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qs=St("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=St("Scan",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const il=St("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jo=St("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lE=St("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VF=St("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z2=St("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=St("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=St("ShieldCheck",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=St("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=St("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hs=St("SquareCheckBig",[["path",{d:"M21 10.5V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.5",key:"1uzm8b"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YH=St("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QH=St("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eu=St("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=St("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ng=St("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=St("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=St("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=St("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ad=St("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f0=St("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cd=St("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sy=St("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=St("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=St("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s0=St("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hm=St("Video",[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eW=St("WandSparkles",[["path",{d:"m21.64 3.64-1.28-1.28a1.21 1.21 0 0 0-1.72 0L2.36 18.64a1.21 1.21 0 0 0 0 1.72l1.28 1.28a1.2 1.2 0 0 0 1.72 0L21.64 5.36a1.2 1.2 0 0 0 0-1.72",key:"ul74o6"}],["path",{d:"m14 7 3 3",key:"1r5n42"}],["path",{d:"M5 6v4",key:"ilb8ba"}],["path",{d:"M19 14v4",key:"blhpug"}],["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M7 8H3",key:"zfb6yr"}],["path",{d:"M21 16h-4",key:"1cnmox"}],["path",{d:"M11 3H9",key:"1obp7u"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zt=St("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.460.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q2=St("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),tW=[{id:"dashboard",label:"Dashboard",icon:a.jsx(FH,{className:"w-5 h-5"})},{id:"schedule",label:"Schedule",icon:a.jsx(Ln,{className:"w-5 h-5"})},{id:"inbox",label:"Shared Inbox",icon:a.jsx(ba,{className:"w-5 h-5"})},{id:"crm",label:"CRM",icon:a.jsx(s0,{className:"w-5 h-5"})},{id:"pipeline",label:"Deal Pipeline",icon:a.jsx(al,{className:"w-5 h-5"})},{id:"projects",label:"Projects",icon:a.jsx(Dn,{className:"w-5 h-5"})},{id:"playbooks",label:"Playbooks",icon:a.jsx(_s,{className:"w-5 h-5"})},{id:"satisfaction",label:"Client Satisfaction",icon:a.jsx(Eu,{className:"w-5 h-5"})},{id:"tasks",label:"Tasks",icon:a.jsx(Hs,{className:"w-5 h-5"})},{id:"invoices",label:"Billing & Invoicing",icon:a.jsx(Uu,{className:"w-5 h-5"})},{id:"expenses",label:"Expenses",icon:a.jsx(Ak,{className:"w-5 h-5"})},{id:"budget",label:"Budget Management",icon:a.jsx(cv,{className:"w-5 h-5"})},{id:"contracts",label:"Contracts & Legal",icon:a.jsx(a2,{className:"w-5 h-5"})},{id:"roadmap",label:"Roadmap",icon:a.jsx(s2,{className:"w-5 h-5"})},{id:"integrations",label:"Integrations",icon:a.jsx(z2,{className:"w-5 h-5"})}],o2=[{id:"u1",name:"Alex Rivera",email:"alex@impact247.com",role:"Admin",avatar:"https://picsum.photos/seed/alex/100/100",active:!0}],iy=[{id:"new-lead",label:"New Lead",description:"Alerts when a new lead is assigned to you",inApp:!0,email:!0},{id:"deal-update",label:"Deal Update",description:"Alerts when a deal status or stage changes",inApp:!0,email:!1},{id:"task-assigned",label:"Task Assigned",description:"Alerts when a teammate assigns a task to you",inApp:!0,email:!0},{id:"task-comment",label:"Task Comment/Note Added",description:"Alerts when someone posts in the Notes & Comments section of a task you're assigned to or involved in",inApp:!0,email:!1},{id:"task-mention",label:"Task @Mention",description:"Alerts when someone uses @ to mention you in a task comment",inApp:!0,email:!0},{id:"task-status-changed",label:"Task Status Changed",description:"Alerts when a task you're assigned to or created moves between statuses",inApp:!0,email:!1},{id:"task-due-date-reminder",label:"Task Due Date Reminder",description:"Alert before a task is due",inApp:!0,email:!0},{id:"project-update",label:"Project Update",description:"Alerts when milestone or status updates occur",inApp:!1,email:!0},{id:"company-update",label:"Company Update",description:"Alerts when company information or details are updated",inApp:!0,email:!1},{id:"contact-update",label:"Contact Update",description:"Alerts when contact information or details are updated",inApp:!0,email:!1},{id:"email-routing",label:"Email Auto-Assigned",description:"Alerts when an email is automatically assigned to you via routing rules",inApp:!0,email:!0},{id:"email-assigned",label:"Email Assigned",description:"Alerts when an email is manually assigned to you",inApp:!0,email:!1},{id:"email-mention",label:"Email Mentions",description:"Alerts when you are mentioned in an email note",inApp:!0,email:!0},{id:"new-email",label:"New Email",description:"Alerts when a new email is received in shared inbox",inApp:!1,email:!1}],rW=e=>{const t=e.match(/UTC([+-]?)(\d+)(?::(\d+))?/);if(!t)return 0;const r=t[1]==="-"?-1:1,n=parseInt(t[2],10),s=t[3]?parseInt(t[3],10):0;return r*(n+s/60)},dv=[{value:"UTC-12",label:"UTC-12 (Baker Island Time)"},{value:"UTC-11",label:"UTC-11 (Hawaii-Aleutian Standard Time)"},{value:"UTC-10",label:"UTC-10 (Hawaii Standard Time)"},{value:"UTC-9:30",label:"UTC-9:30 (Marquesas Time)"},{value:"UTC-9",label:"UTC-9 (Alaska Standard Time)"},{value:"UTC-8",label:"UTC-8 (Pacific Standard Time - PST)"},{value:"UTC-7",label:"UTC-7 (Mountain Standard Time - MST)"},{value:"UTC-6",label:"UTC-6 (Central Standard Time - CST)"},{value:"UTC-5",label:"UTC-5 (Eastern Standard Time - EST)"},{value:"UTC-4",label:"UTC-4 (Atlantic Standard Time - AST)"},{value:"UTC-3:30",label:"UTC-3:30 (Newfoundland Standard Time)"},{value:"UTC-3",label:"UTC-3 (Argentina Time)"},{value:"UTC-2",label:"UTC-2 (South Georgia Time)"},{value:"UTC-1",label:"UTC-1 (Cape Verde Time)"},{value:"UTC+0",label:"UTC+0 (Greenwich Mean Time - GMT)"},{value:"UTC+1",label:"UTC+1 (Central European Time - CET)"},{value:"UTC+2",label:"UTC+2 (Eastern European Time - EET)"},{value:"UTC+3",label:"UTC+3 (Moscow Time - MSK)"},{value:"UTC+3:30",label:"UTC+3:30 (Iran Standard Time)"},{value:"UTC+4",label:"UTC+4 (Gulf Standard Time)"},{value:"UTC+4:30",label:"UTC+4:30 (Afghanistan Time)"},{value:"UTC+5",label:"UTC+5 (Pakistan Standard Time)"},{value:"UTC+5:30",label:"UTC+5:30 (India Standard Time - IST)"},{value:"UTC+5:45",label:"UTC+5:45 (Nepal Time)"},{value:"UTC+6",label:"UTC+6 (Bangladesh Standard Time)"},{value:"UTC+6:30",label:"UTC+6:30 (Myanmar Time)"},{value:"UTC+7",label:"UTC+7 (Indochina Time)"},{value:"UTC+8",label:"UTC+8 (China Standard Time - CST)"},{value:"UTC+8:45",label:"UTC+8:45 (Australian Central Western Time)"},{value:"UTC+9",label:"UTC+9 (Japan Standard Time - JST)"},{value:"UTC+9:30",label:"UTC+9:30 (Australian Central Standard Time)"},{value:"UTC+10",label:"UTC+10 (Australian Eastern Standard Time)"},{value:"UTC+10:30",label:"UTC+10:30 (Lord Howe Standard Time)"},{value:"UTC+11",label:"UTC+11 (Solomon Islands Time)"},{value:"UTC+12",label:"UTC+12 (New Zealand Standard Time)"},{value:"UTC+12:45",label:"UTC+12:45 (Chatham Standard Time)"},{value:"UTC+13",label:"UTC+13 (Tonga Time)"},{value:"UTC+14",label:"UTC+14 (Line Islands Time)"}],jg=()=>{try{const e=-new Date().getTimezoneOffset(),t=e/60,r=e%60;if(r===0){const l=`UTC${t>=0?"+":""}${t}`;if(dv.find(c=>c.value===l))return l}else{const o=Math.floor(Math.abs(t)),l=Math.abs(r),d=`UTC${t>=0?"+":"-"}${o}:${l}`;if(dv.find(f=>f.value===d))return d}const n=t;let s="UTC+0",i=1/0;return dv.forEach(o=>{const l=rW(o.value),c=Math.abs(l-n);c<i&&(i=c,s=o.value)}),s}catch{return"UTC+0"}},cE=[{value:"English",label:"English"},{value:"Spanish",label:"Spanish (Espaol)"},{value:"French",label:"French (Franais)"}];function GF(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=GF(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Rn(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=GF(e))&&(n&&(n+=" "),n+=t);return n}var nW=Array.isArray,ll=nW,aW=typeof Pl=="object"&&Pl&&Pl.Object===Object&&Pl,KF=aW,sW=KF,iW=typeof self=="object"&&self&&self.Object===Object&&self,oW=sW||iW||Function("return this")(),Jd=oW,lW=Jd,cW=lW.Symbol,J1=cW,dE=J1,XF=Object.prototype,dW=XF.hasOwnProperty,uW=XF.toString,kg=dE?dE.toStringTag:void 0;function fW(e){var t=dW.call(e,kg),r=e[kg];try{e[kg]=void 0;var n=!0}catch{}var s=uW.call(e);return n&&(t?e[kg]=r:delete e[kg]),s}var hW=fW,pW=Object.prototype,mW=pW.toString;function xW(e){return mW.call(e)}var gW=xW,uE=J1,vW=hW,bW=gW,yW="[object Null]",wW="[object Undefined]",fE=uE?uE.toStringTag:void 0;function NW(e){return e==null?e===void 0?wW:yW:fE&&fE in Object(e)?vW(e):bW(e)}var Ku=NW;function jW(e){return e!=null&&typeof e=="object"}var Xu=jW,kW=Ku,SW=Xu,_W="[object Symbol]";function AW(e){return typeof e=="symbol"||SW(e)&&kW(e)==_W}var Px=AW,CW=ll,EW=Px,TW=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,OW=/^\w*$/;function PW(e,t){if(CW(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||EW(e)?!0:OW.test(e)||!TW.test(e)||t!=null&&e in Object(t)}var M_=PW;function IW(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var N0=IW;const Ix=fa(N0);var DW=Ku,LW=N0,FW="[object AsyncFunction]",MW="[object Function]",RW="[object GeneratorFunction]",BW="[object Proxy]";function $W(e){if(!LW(e))return!1;var t=DW(e);return t==MW||t==RW||t==FW||t==BW}var R_=$W;const cn=fa(R_);var UW=Jd,zW=UW["__core-js_shared__"],qW=zW,Nj=qW,hE=function(){var e=/[^.]+$/.exec(Nj&&Nj.keys&&Nj.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function HW(e){return!!hE&&hE in e}var WW=HW,VW=Function.prototype,GW=VW.toString;function KW(e){if(e!=null){try{return GW.call(e)}catch{}try{return e+""}catch{}}return""}var YF=KW,XW=R_,YW=WW,QW=N0,JW=YF,ZW=/[\\^$.*+?()[\]{}|]/g,eV=/^\[object .+?Constructor\]$/,tV=Function.prototype,rV=Object.prototype,nV=tV.toString,aV=rV.hasOwnProperty,sV=RegExp("^"+nV.call(aV).replace(ZW,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function iV(e){if(!QW(e)||YW(e))return!1;var t=XW(e)?sV:eV;return t.test(JW(e))}var oV=iV;function lV(e,t){return e==null?void 0:e[t]}var cV=lV,dV=oV,uV=cV;function fV(e,t){var r=uV(e,t);return dV(r)?r:void 0}var op=fV,hV=op,pV=hV(Object,"create"),I5=pV,pE=I5;function mV(){this.__data__=pE?pE(null):{},this.size=0}var xV=mV;function gV(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var vV=gV,bV=I5,yV="__lodash_hash_undefined__",wV=Object.prototype,NV=wV.hasOwnProperty;function jV(e){var t=this.__data__;if(bV){var r=t[e];return r===yV?void 0:r}return NV.call(t,e)?t[e]:void 0}var kV=jV,SV=I5,_V=Object.prototype,AV=_V.hasOwnProperty;function CV(e){var t=this.__data__;return SV?t[e]!==void 0:AV.call(t,e)}var EV=CV,TV=I5,OV="__lodash_hash_undefined__";function PV(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=TV&&t===void 0?OV:t,this}var IV=PV,DV=xV,LV=vV,FV=kV,MV=EV,RV=IV;function Dx(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Dx.prototype.clear=DV;Dx.prototype.delete=LV;Dx.prototype.get=FV;Dx.prototype.has=MV;Dx.prototype.set=RV;var BV=Dx;function $V(){this.__data__=[],this.size=0}var UV=$V;function zV(e,t){return e===t||e!==e&&t!==t}var B_=zV,qV=B_;function HV(e,t){for(var r=e.length;r--;)if(qV(e[r][0],t))return r;return-1}var D5=HV,WV=D5,VV=Array.prototype,GV=VV.splice;function KV(e){var t=this.__data__,r=WV(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():GV.call(t,r,1),--this.size,!0}var XV=KV,YV=D5;function QV(e){var t=this.__data__,r=YV(t,e);return r<0?void 0:t[r][1]}var JV=QV,ZV=D5;function eG(e){return ZV(this.__data__,e)>-1}var tG=eG,rG=D5;function nG(e,t){var r=this.__data__,n=rG(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var aG=nG,sG=UV,iG=XV,oG=JV,lG=tG,cG=aG;function Lx(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Lx.prototype.clear=sG;Lx.prototype.delete=iG;Lx.prototype.get=oG;Lx.prototype.has=lG;Lx.prototype.set=cG;var L5=Lx,dG=op,uG=Jd,fG=dG(uG,"Map"),$_=fG,mE=BV,hG=L5,pG=$_;function mG(){this.size=0,this.__data__={hash:new mE,map:new(pG||hG),string:new mE}}var xG=mG;function gG(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var vG=gG,bG=vG;function yG(e,t){var r=e.__data__;return bG(t)?r[typeof t=="string"?"string":"hash"]:r.map}var F5=yG,wG=F5;function NG(e){var t=wG(this,e).delete(e);return this.size-=t?1:0,t}var jG=NG,kG=F5;function SG(e){return kG(this,e).get(e)}var _G=SG,AG=F5;function CG(e){return AG(this,e).has(e)}var EG=CG,TG=F5;function OG(e,t){var r=TG(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var PG=OG,IG=xG,DG=jG,LG=_G,FG=EG,MG=PG;function Fx(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Fx.prototype.clear=IG;Fx.prototype.delete=DG;Fx.prototype.get=LG;Fx.prototype.has=FG;Fx.prototype.set=MG;var U_=Fx,QF=U_,RG="Expected a function";function z_(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(RG);var r=function(){var n=arguments,s=t?t.apply(this,n):n[0],i=r.cache;if(i.has(s))return i.get(s);var o=e.apply(this,n);return r.cache=i.set(s,o)||i,o};return r.cache=new(z_.Cache||QF),r}z_.Cache=QF;var JF=z_;const BG=fa(JF);var $G=JF,UG=500;function zG(e){var t=$G(e,function(n){return r.size===UG&&r.clear(),n}),r=t.cache;return t}var qG=zG,HG=qG,WG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,VG=/\\(\\)?/g,GG=HG(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(WG,function(r,n,s,i){t.push(s?i.replace(VG,"$1"):n||r)}),t}),KG=GG;function XG(e,t){for(var r=-1,n=e==null?0:e.length,s=Array(n);++r<n;)s[r]=t(e[r],r,e);return s}var q_=XG,xE=J1,YG=q_,QG=ll,JG=Px,gE=xE?xE.prototype:void 0,vE=gE?gE.toString:void 0;function ZF(e){if(typeof e=="string")return e;if(QG(e))return YG(e,ZF)+"";if(JG(e))return vE?vE.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var ZG=ZF,eK=ZG;function tK(e){return e==null?"":eK(e)}var e7=tK,rK=ll,nK=M_,aK=KG,sK=e7;function iK(e,t){return rK(e)?e:nK(e,t)?[e]:aK(sK(e))}var t7=iK,oK=Px;function lK(e){if(typeof e=="string"||oK(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var M5=lK,cK=t7,dK=M5;function uK(e,t){t=cK(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[dK(t[r++])];return r&&r==n?e:void 0}var H_=uK,fK=H_;function hK(e,t,r){var n=e==null?void 0:fK(e,t);return n===void 0?r:n}var r7=hK;const pc=fa(r7);function pK(e){return e==null}var mK=pK;const Sn=fa(mK);var xK=Ku,gK=ll,vK=Xu,bK="[object String]";function yK(e){return typeof e=="string"||!gK(e)&&vK(e)&&xK(e)==bK}var wK=yK;const Wh=fa(wK);var n7={exports:{}},ia={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var W_=Symbol.for("react.element"),V_=Symbol.for("react.portal"),R5=Symbol.for("react.fragment"),B5=Symbol.for("react.strict_mode"),$5=Symbol.for("react.profiler"),U5=Symbol.for("react.provider"),z5=Symbol.for("react.context"),NK=Symbol.for("react.server_context"),q5=Symbol.for("react.forward_ref"),H5=Symbol.for("react.suspense"),W5=Symbol.for("react.suspense_list"),V5=Symbol.for("react.memo"),G5=Symbol.for("react.lazy"),jK=Symbol.for("react.offscreen"),a7;a7=Symbol.for("react.module.reference");function wc(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case W_:switch(e=e.type,e){case R5:case $5:case B5:case H5:case W5:return e;default:switch(e=e&&e.$$typeof,e){case NK:case z5:case q5:case G5:case V5:case U5:return e;default:return t}}case V_:return t}}}ia.ContextConsumer=z5;ia.ContextProvider=U5;ia.Element=W_;ia.ForwardRef=q5;ia.Fragment=R5;ia.Lazy=G5;ia.Memo=V5;ia.Portal=V_;ia.Profiler=$5;ia.StrictMode=B5;ia.Suspense=H5;ia.SuspenseList=W5;ia.isAsyncMode=function(){return!1};ia.isConcurrentMode=function(){return!1};ia.isContextConsumer=function(e){return wc(e)===z5};ia.isContextProvider=function(e){return wc(e)===U5};ia.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===W_};ia.isForwardRef=function(e){return wc(e)===q5};ia.isFragment=function(e){return wc(e)===R5};ia.isLazy=function(e){return wc(e)===G5};ia.isMemo=function(e){return wc(e)===V5};ia.isPortal=function(e){return wc(e)===V_};ia.isProfiler=function(e){return wc(e)===$5};ia.isStrictMode=function(e){return wc(e)===B5};ia.isSuspense=function(e){return wc(e)===H5};ia.isSuspenseList=function(e){return wc(e)===W5};ia.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===R5||e===$5||e===B5||e===H5||e===W5||e===jK||typeof e=="object"&&e!==null&&(e.$$typeof===G5||e.$$typeof===V5||e.$$typeof===U5||e.$$typeof===z5||e.$$typeof===q5||e.$$typeof===a7||e.getModuleId!==void 0)};ia.typeOf=wc;n7.exports=ia;var kK=n7.exports,SK=Ku,_K=Xu,AK="[object Number]";function CK(e){return typeof e=="number"||_K(e)&&SK(e)==AK}var s7=CK;const EK=fa(s7);var TK=s7;function OK(e){return TK(e)&&e!=+e}var PK=OK;const Mx=fa(PK);var Qc=function(t){return t===0?0:t>0?1:-1},fh=function(t){return Wh(t)&&t.indexOf("%")===t.length-1},Yt=function(t){return EK(t)&&!Mx(t)},IK=function(t){return Sn(t)},ni=function(t){return Yt(t)||Wh(t)},DK=0,Z1=function(t){var r=++DK;return"".concat(t||"").concat(r)},Vh=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Yt(t)&&!Wh(t))return n;var i;if(fh(t)){var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return Mx(i)&&(i=n),s&&i>r&&(i=r),i},Pf=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},LK=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},s=0;s<r;s++)if(!n[t[s]])n[t[s]]=!0;else return!0;return!1},cc=function(t,r){return Yt(t)&&Yt(r)?function(n){return t+n*(r-t)}:function(){return r}};function H2(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):pc(n,t))===r})}var FK=function(t,r){return Yt(t)&&Yt(r)?t-r:Wh(t)&&Wh(r)?t.localeCompare(r):t instanceof Date&&r instanceof Date?t.getTime()-r.getTime():String(t).localeCompare(String(r))};function Sm(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Ck(e){"@babel/helpers - typeof";return Ck=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ck(e)}var MK=["viewBox","children"],RK=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],bE=["points","pathLength"],jj={svg:MK,polygon:bE,polyline:bE},G_=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],W2=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(P.isValidElement(t)&&(n=t.props),!Ix(n))return null;var s={};return Object.keys(n).forEach(function(i){G_.includes(i)&&(s[i]=r||function(o){return n[i](n,o)})}),s},BK=function(t,r,n){return function(s){return t(r,n,s),null}},V2=function(t,r,n){if(!Ix(t)||Ck(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(i){var o=t[i];G_.includes(i)&&typeof o=="function"&&(s||(s={}),s[i]=BK(o,r,n))}),s},$K=["children"],UK=["children"];function yE(e,t){if(e==null)return{};var r=zK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function zK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Ek(e){"@babel/helpers - typeof";return Ek=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ek(e)}var wE={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Tu=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},NE=null,kj=null,K_=function e(t){if(t===NE&&Array.isArray(kj))return kj;var r=[];return P.Children.forEach(t,function(n){Sn(n)||(kK.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),kj=r,NE=t,r};function sd(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(s){return Tu(s)}):n=[Tu(t)],K_(e).forEach(function(s){var i=pc(s,"type.displayName")||pc(s,"type.name");n.indexOf(i)!==-1&&r.push(s)}),r}function _l(e,t){var r=sd(e,t);return r&&r[0]}var jE=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,s=r.height;return!(!Yt(n)||n<=0||!Yt(s)||s<=0)},qK=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],HK=function(t){return t&&t.type&&Wh(t.type)&&qK.indexOf(t.type)>=0},WK=function(t){return t&&Ek(t)==="object"&&"clipDot"in t},VK=function(t,r,n,s){var i,o=(i=jj==null?void 0:jj[s])!==null&&i!==void 0?i:[];return r.startsWith("data-")||!cn(t)&&(s&&o.includes(r)||RK.includes(r))||n&&G_.includes(r)},wn=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(P.isValidElement(t)&&(s=t.props),!Ix(s))return null;var i={};return Object.keys(s).forEach(function(o){var l;VK((l=s)===null||l===void 0?void 0:l[o],o,r,n)&&(i[o]=s[o])}),i},Tk=function e(t,r){if(t===r)return!0;var n=P.Children.count(t);if(n!==P.Children.count(r))return!1;if(n===0)return!0;if(n===1)return kE(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var s=0;s<n;s++){var i=t[s],o=r[s];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!kE(i,o))return!1}return!0},kE=function(t,r){if(Sn(t)&&Sn(r))return!0;if(!Sn(t)&&!Sn(r)){var n=t.props||{},s=n.children,i=yE(n,$K),o=r.props||{},l=o.children,c=yE(o,UK);return s&&l?Sm(i,c)&&Tk(s,l):!s&&!l?Sm(i,c):!1}return!1},SE=function(t,r){var n=[],s={};return K_(t).forEach(function(i,o){if(HK(i))n.push(i);else if(i){var l=Tu(i.type),c=r[l]||{},d=c.handler,f=c.once;if(d&&(!f||!s[l])){var u=d(i,l,o);n.push(u),s[l]=!0}}}),n},GK=function(t){var r=t&&t.type;return r&&wE[r]?wE[r]:null},KK=function(t,r){return K_(r).indexOf(t)},XK=["children","width","height","viewBox","className","style","title","desc"];function Ok(){return Ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ok.apply(this,arguments)}function YK(e,t){if(e==null)return{};var r=QK(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function QK(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Pk(e){var t=e.children,r=e.width,n=e.height,s=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=YK(e,XK),f=s||{width:r,height:n,x:0,y:0},u=Rn("recharts-surface",i);return st.createElement("svg",Ok({},wn(d,!0,"svg"),{className:u,width:r,height:n,style:o,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height)}),st.createElement("title",null,l),st.createElement("desc",null,c),t)}var JK=["children","className"];function Ik(){return Ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ik.apply(this,arguments)}function ZK(e,t){if(e==null)return{};var r=eX(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eX(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ya=st.forwardRef(function(e,t){var r=e.children,n=e.className,s=ZK(e,JK),i=Rn("recharts-layer",n);return st.createElement("g",Ik({className:i},wn(s,!0),{ref:t}),r)}),Ou=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i]};function tX(e,t,r){var n=-1,s=e.length;t<0&&(t=-t>s?0:s+t),r=r>s?s:r,r<0&&(r+=s),s=t>r?0:r-t>>>0,t>>>=0;for(var i=Array(s);++n<s;)i[n]=e[n+t];return i}var rX=tX,nX=rX;function aX(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:nX(e,t,r)}var sX=aX,iX="\\ud800-\\udfff",oX="\\u0300-\\u036f",lX="\\ufe20-\\ufe2f",cX="\\u20d0-\\u20ff",dX=oX+lX+cX,uX="\\ufe0e\\ufe0f",fX="\\u200d",hX=RegExp("["+fX+iX+dX+uX+"]");function pX(e){return hX.test(e)}var i7=pX;function mX(e){return e.split("")}var xX=mX,o7="\\ud800-\\udfff",gX="\\u0300-\\u036f",vX="\\ufe20-\\ufe2f",bX="\\u20d0-\\u20ff",yX=gX+vX+bX,wX="\\ufe0e\\ufe0f",NX="["+o7+"]",Dk="["+yX+"]",Lk="\\ud83c[\\udffb-\\udfff]",jX="(?:"+Dk+"|"+Lk+")",l7="[^"+o7+"]",c7="(?:\\ud83c[\\udde6-\\uddff]){2}",d7="[\\ud800-\\udbff][\\udc00-\\udfff]",kX="\\u200d",u7=jX+"?",f7="["+wX+"]?",SX="(?:"+kX+"(?:"+[l7,c7,d7].join("|")+")"+f7+u7+")*",_X=f7+u7+SX,AX="(?:"+[l7+Dk+"?",Dk,c7,d7,NX].join("|")+")",CX=RegExp(Lk+"(?="+Lk+")|"+AX+_X,"g");function EX(e){return e.match(CX)||[]}var TX=EX,OX=xX,PX=i7,IX=TX;function DX(e){return PX(e)?IX(e):OX(e)}var LX=DX,FX=sX,MX=i7,RX=LX,BX=e7;function $X(e){return function(t){t=BX(t);var r=MX(t)?RX(t):void 0,n=r?r[0]:t.charAt(0),s=r?FX(r,1).join(""):t.slice(1);return n[e]()+s}}var UX=$X,zX=UX,qX=zX("toUpperCase"),HX=qX;const K5=fa(HX);function ga(e){return function(){return e}}const h7=Math.cos,G2=Math.sin,dd=Math.sqrt,K2=Math.PI,X5=2*K2,Fk=Math.PI,Mk=2*Fk,nh=1e-6,WX=Mk-nh;function p7(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function VX(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return p7;const r=10**t;return function(n){this._+=n[0];for(let s=1,i=n.length;s<i;++s)this._+=Math.round(arguments[s]*r)/r+n[s]}}class GX{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?p7:VX(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,s){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+s}`}bezierCurveTo(t,r,n,s,i,o){this._append`C${+t},${+r},${+n},${+s},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,s,i){if(t=+t,r=+r,n=+n,s=+s,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,d=s-r,f=o-t,u=l-r,p=f*f+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(p>nh)if(!(Math.abs(u*c-d*f)>nh)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let h=n-o,m=s-l,g=c*c+d*d,x=h*h+m*m,v=Math.sqrt(g),b=Math.sqrt(p),w=i*Math.tan((Fk-Math.acos((g+p-x)/(2*v*b)))/2),y=w/b,N=w/v;Math.abs(y-1)>nh&&this._append`L${t+y*f},${r+y*u}`,this._append`A${i},${i},0,0,${+(u*h>f*m)},${this._x1=t+N*c},${this._y1=r+N*d}`}}arc(t,r,n,s,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(s),c=n*Math.sin(s),d=t+l,f=r+c,u=1^o,p=o?s-i:i-s;this._x1===null?this._append`M${d},${f}`:(Math.abs(this._x1-d)>nh||Math.abs(this._y1-f)>nh)&&this._append`L${d},${f}`,n&&(p<0&&(p=p%Mk+Mk),p>WX?this._append`A${n},${n},0,1,${u},${t-l},${r-c}A${n},${n},0,1,${u},${this._x1=d},${this._y1=f}`:p>nh&&this._append`A${n},${n},0,${+(p>=Fk)},${u},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+s}h${-n}Z`}toString(){return this._}}function X_(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new GX(t)}function Y_(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function m7(e){this._context=e}m7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Y5(e){return new m7(e)}function x7(e){return e[0]}function g7(e){return e[1]}function v7(e,t){var r=ga(!0),n=null,s=Y5,i=null,o=X_(l);e=typeof e=="function"?e:e===void 0?x7:ga(e),t=typeof t=="function"?t:t===void 0?g7:ga(t);function l(c){var d,f=(c=Y_(c)).length,u,p=!1,h;for(n==null&&(i=s(h=o())),d=0;d<=f;++d)!(d<f&&r(u=c[d],d,c))===p&&((p=!p)?i.lineStart():i.lineEnd()),p&&i.point(+e(u,d,c),+t(u,d,c));if(h)return i=null,h+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:ga(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:ga(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:ga(!!c),l):r},l.curve=function(c){return arguments.length?(s=c,n!=null&&(i=s(n)),l):s},l.context=function(c){return arguments.length?(c==null?n=i=null:i=s(n=c),l):n},l}function oy(e,t,r){var n=null,s=ga(!0),i=null,o=Y5,l=null,c=X_(d);e=typeof e=="function"?e:e===void 0?x7:ga(+e),t=typeof t=="function"?t:ga(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?g7:ga(+r);function d(u){var p,h,m,g=(u=Y_(u)).length,x,v=!1,b,w=new Array(g),y=new Array(g);for(i==null&&(l=o(b=c())),p=0;p<=g;++p){if(!(p<g&&s(x=u[p],p,u))===v)if(v=!v)h=p,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),m=p-1;m>=h;--m)l.point(w[m],y[m]);l.lineEnd(),l.areaEnd()}v&&(w[p]=+e(x,p,u),y[p]=+t(x,p,u),l.point(n?+n(x,p,u):w[p],r?+r(x,p,u):y[p]))}if(b)return l=null,b+""||null}function f(){return v7().defined(s).curve(o).context(i)}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:ga(+u),n=null,d):e},d.x0=function(u){return arguments.length?(e=typeof u=="function"?u:ga(+u),d):e},d.x1=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:ga(+u),d):n},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:ga(+u),r=null,d):t},d.y0=function(u){return arguments.length?(t=typeof u=="function"?u:ga(+u),d):t},d.y1=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:ga(+u),d):r},d.lineX0=d.lineY0=function(){return f().x(e).y(t)},d.lineY1=function(){return f().x(e).y(r)},d.lineX1=function(){return f().x(n).y(t)},d.defined=function(u){return arguments.length?(s=typeof u=="function"?u:ga(!!u),d):s},d.curve=function(u){return arguments.length?(o=u,i!=null&&(l=o(i)),d):o},d.context=function(u){return arguments.length?(u==null?i=l=null:l=o(i=u),d):i},d}class b7{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function KX(e){return new b7(e,!0)}function XX(e){return new b7(e,!1)}const Q_={draw(e,t){const r=dd(t/K2);e.moveTo(r,0),e.arc(0,0,r,0,X5)}},YX={draw(e,t){const r=dd(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},y7=dd(1/3),QX=y7*2,JX={draw(e,t){const r=dd(t/QX),n=r*y7;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},ZX={draw(e,t){const r=dd(t),n=-r/2;e.rect(n,n,r,r)}},eY=.8908130915292852,w7=G2(K2/10)/G2(7*K2/10),tY=G2(X5/10)*w7,rY=-h7(X5/10)*w7,nY={draw(e,t){const r=dd(t*eY),n=tY*r,s=rY*r;e.moveTo(0,-r),e.lineTo(n,s);for(let i=1;i<5;++i){const o=X5*i/5,l=h7(o),c=G2(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*s,c*n+l*s)}e.closePath()}},Sj=dd(3),aY={draw(e,t){const r=-dd(t/(Sj*3));e.moveTo(0,r*2),e.lineTo(-Sj*r,-r),e.lineTo(Sj*r,-r),e.closePath()}},Xl=-.5,Yl=dd(3)/2,Rk=1/dd(12),sY=(Rk/2+1)*3,iY={draw(e,t){const r=dd(t/sY),n=r/2,s=r*Rk,i=n,o=r*Rk+r,l=-i,c=o;e.moveTo(n,s),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Xl*n-Yl*s,Yl*n+Xl*s),e.lineTo(Xl*i-Yl*o,Yl*i+Xl*o),e.lineTo(Xl*l-Yl*c,Yl*l+Xl*c),e.lineTo(Xl*n+Yl*s,Xl*s-Yl*n),e.lineTo(Xl*i+Yl*o,Xl*o-Yl*i),e.lineTo(Xl*l+Yl*c,Xl*c-Yl*l),e.closePath()}};function oY(e,t){let r=null,n=X_(s);e=typeof e=="function"?e:ga(e||Q_),t=typeof t=="function"?t:ga(t===void 0?64:+t);function s(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return s.type=function(i){return arguments.length?(e=typeof i=="function"?i:ga(i),s):e},s.size=function(i){return arguments.length?(t=typeof i=="function"?i:ga(+i),s):t},s.context=function(i){return arguments.length?(r=i??null,s):r},s}function X2(){}function Y2(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function N7(e){this._context=e}N7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Y2(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Y2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function lY(e){return new N7(e)}function j7(e){this._context=e}j7.prototype={areaStart:X2,areaEnd:X2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Y2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function cY(e){return new j7(e)}function k7(e){this._context=e}k7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Y2(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function dY(e){return new k7(e)}function S7(e){this._context=e}S7.prototype={areaStart:X2,areaEnd:X2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function uY(e){return new S7(e)}function _E(e){return e<0?-1:1}function AE(e,t,r){var n=e._x1-e._x0,s=t-e._x1,i=(e._y1-e._y0)/(n||s<0&&-0),o=(r-e._y1)/(s||n<0&&-0),l=(i*s+o*n)/(n+s);return(_E(i)+_E(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function CE(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function _j(e,t,r){var n=e._x0,s=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,s+l*t,i-l,o-l*r,i,o)}function Q2(e){this._context=e}Q2.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:_j(this,this._t0,CE(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,_j(this,CE(this,r=AE(this,e,t)),r);break;default:_j(this,this._t0,r=AE(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function _7(e){this._context=new A7(e)}(_7.prototype=Object.create(Q2.prototype)).point=function(e,t){Q2.prototype.point.call(this,t,e)};function A7(e){this._context=e}A7.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,s,i){this._context.bezierCurveTo(t,e,n,r,i,s)}};function fY(e){return new Q2(e)}function hY(e){return new _7(e)}function C7(e){this._context=e}C7.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=EE(e),s=EE(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],s[0][i],n[1][i],s[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function EE(e){var t,r=e.length-1,n,s=new Array(r),i=new Array(r),o=new Array(r);for(s[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)s[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(s[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=s[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(s[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)s[t]=(o[t]-s[t+1])/i[t];for(i[r-1]=(e[r]+s[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-s[t+1];return[s,i]}function pY(e){return new C7(e)}function Q5(e,t){this._context=e,this._t=t}Q5.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function mY(e){return new Q5(e,.5)}function xY(e){return new Q5(e,0)}function gY(e){return new Q5(e,1)}function rx(e,t){if((o=e.length)>1)for(var r=1,n,s,i=e[t[0]],o,l=i.length;r<o;++r)for(s=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(s[n][1])?s[n][0]:s[n][1]}function Bk(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function vY(e,t){return e[t]}function bY(e){const t=[];return t.key=e,t}function yY(){var e=ga([]),t=Bk,r=rx,n=vY;function s(i){var o=Array.from(e.apply(this,arguments),bY),l,c=o.length,d=-1,f;for(const u of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+n(u,o[l].key,d,i)]).data=u;for(l=0,f=Y_(t(o));l<c;++l)o[f[l]].index=l;return r(o,f),o}return s.keys=function(i){return arguments.length?(e=typeof i=="function"?i:ga(Array.from(i)),s):e},s.value=function(i){return arguments.length?(n=typeof i=="function"?i:ga(+i),s):n},s.order=function(i){return arguments.length?(t=i==null?Bk:typeof i=="function"?i:ga(Array.from(i)),s):t},s.offset=function(i){return arguments.length?(r=i??rx,s):r},s}function wY(e,t){if((n=e.length)>0){for(var r,n,s=0,i=e[0].length,o;s<i;++s){for(o=r=0;r<n;++r)o+=e[r][s][1]||0;if(o)for(r=0;r<n;++r)e[r][s][1]/=o}rx(e,t)}}function NY(e,t){if((s=e.length)>0){for(var r=0,n=e[t[0]],s,i=n.length;r<i;++r){for(var o=0,l=0;o<s;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}rx(e,t)}}function jY(e,t){if(!(!((o=e.length)>0)||!((i=(s=e[t[0]]).length)>0))){for(var r=0,n=1,s,i,o;n<i;++n){for(var l=0,c=0,d=0;l<o;++l){for(var f=e[t[l]],u=f[n][1]||0,p=f[n-1][1]||0,h=(u-p)/2,m=0;m<l;++m){var g=e[t[m]],x=g[n][1]||0,v=g[n-1][1]||0;h+=x-v}c+=u,d+=h*u}s[n-1][1]+=s[n-1][0]=r,c&&(r-=d/c)}s[n-1][1]+=s[n-1][0]=r,rx(e,t)}}function qv(e){"@babel/helpers - typeof";return qv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qv(e)}var kY=["type","size","sizeType"];function $k(){return $k=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$k.apply(this,arguments)}function TE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function OE(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TE(Object(r),!0).forEach(function(n){SY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function SY(e,t,r){return t=_Y(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _Y(e){var t=AY(e,"string");return qv(t)=="symbol"?t:t+""}function AY(e,t){if(qv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(qv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CY(e,t){if(e==null)return{};var r=EY(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function EY(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var E7={symbolCircle:Q_,symbolCross:YX,symbolDiamond:JX,symbolSquare:ZX,symbolStar:nY,symbolTriangle:aY,symbolWye:iY},TY=Math.PI/180,OY=function(t){var r="symbol".concat(K5(t));return E7[r]||Q_},PY=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*TY;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},IY=function(t,r){E7["symbol".concat(K5(t))]=r},J_=function(t){var r=t.type,n=r===void 0?"circle":r,s=t.size,i=s===void 0?64:s,o=t.sizeType,l=o===void 0?"area":o,c=CY(t,kY),d=OE(OE({},c),{},{type:n,size:i,sizeType:l}),f=function(){var x=OY(n),v=oY().type(x).size(PY(i,l,n));return v()},u=d.className,p=d.cx,h=d.cy,m=wn(d,!0);return p===+p&&h===+h&&i===+i?st.createElement("path",$k({},m,{className:Rn("recharts-symbols",u),transform:"translate(".concat(p,", ").concat(h,")"),d:f()})):null};J_.registerSymbol=IY;function nx(e){"@babel/helpers - typeof";return nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nx(e)}function Uk(){return Uk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Uk.apply(this,arguments)}function PE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function DY(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PE(Object(r),!0).forEach(function(n){Hv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PE(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LY(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function FY(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O7(n.key),n)}}function MY(e,t,r){return t&&FY(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RY(e,t,r){return t=J2(t),BY(e,T7()?Reflect.construct(t,r||[],J2(e).constructor):t.apply(e,r))}function BY(e,t){if(t&&(nx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $Y(e)}function $Y(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T7=function(){return!!e})()}function J2(e){return J2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},J2(e)}function UY(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zk(e,t)}function zk(e,t){return zk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},zk(e,t)}function Hv(e,t,r){return t=O7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function O7(e){var t=zY(e,"string");return nx(t)=="symbol"?t:t+""}function zY(e,t){if(nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ql=32,Z_=function(e){function t(){return LY(this,t),RY(this,t,arguments)}return UY(t,e),MY(t,[{key:"renderIcon",value:function(n){var s=this.props.inactiveColor,i=Ql/2,o=Ql/6,l=Ql/3,c=n.inactive?s:n.color;if(n.type==="plainline")return st.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:i,x2:Ql,y2:i,className:"recharts-legend-icon"});if(n.type==="line")return st.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Ql,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(n.type==="rect")return st.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Ql/8,"h").concat(Ql,"v").concat(Ql*3/4,"h").concat(-Ql,"z"),className:"recharts-legend-icon"});if(st.isValidElement(n.legendIcon)){var d=DY({},n);return delete d.legendIcon,st.cloneElement(n.legendIcon,d)}return st.createElement(J_,{fill:c,cx:i,cy:i,size:Ql,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,s=this.props,i=s.payload,o=s.iconSize,l=s.layout,c=s.formatter,d=s.inactiveColor,f={x:0,y:0,width:Ql,height:Ql},u={display:l==="horizontal"?"inline-block":"block",marginRight:10},p={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(h,m){var g=h.formatter||c,x=Rn(Hv(Hv({"recharts-legend-item":!0},"legend-item-".concat(m),!0),"inactive",h.inactive));if(h.type==="none")return null;var v=cn(h.value)?null:h.value;Ou(!cn(h.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var b=h.inactive?d:h.color;return st.createElement("li",Uk({className:x,style:u,key:"legend-item-".concat(m)},V2(n.props,h,m)),st.createElement(Pk,{width:o,height:o,viewBox:f,style:p},n.renderIcon(h)),st.createElement("span",{className:"recharts-legend-item-text",style:{color:b}},g?g(v,h,m):v))})}},{key:"render",value:function(){var n=this.props,s=n.payload,i=n.layout,o=n.align;if(!s||!s.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return st.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(P.PureComponent);Hv(Z_,"displayName","Legend");Hv(Z_,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var qY=L5;function HY(){this.__data__=new qY,this.size=0}var WY=HY;function VY(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var GY=VY;function KY(e){return this.__data__.get(e)}var XY=KY;function YY(e){return this.__data__.has(e)}var QY=YY,JY=L5,ZY=$_,eQ=U_,tQ=200;function rQ(e,t){var r=this.__data__;if(r instanceof JY){var n=r.__data__;if(!ZY||n.length<tQ-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new eQ(n)}return r.set(e,t),this.size=r.size,this}var nQ=rQ,aQ=L5,sQ=WY,iQ=GY,oQ=XY,lQ=QY,cQ=nQ;function Rx(e){var t=this.__data__=new aQ(e);this.size=t.size}Rx.prototype.clear=sQ;Rx.prototype.delete=iQ;Rx.prototype.get=oQ;Rx.prototype.has=lQ;Rx.prototype.set=cQ;var P7=Rx,dQ="__lodash_hash_undefined__";function uQ(e){return this.__data__.set(e,dQ),this}var fQ=uQ;function hQ(e){return this.__data__.has(e)}var pQ=hQ,mQ=U_,xQ=fQ,gQ=pQ;function Z2(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new mQ;++t<r;)this.add(e[t])}Z2.prototype.add=Z2.prototype.push=xQ;Z2.prototype.has=gQ;var I7=Z2;function vQ(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var D7=vQ;function bQ(e,t){return e.has(t)}var L7=bQ,yQ=I7,wQ=D7,NQ=L7,jQ=1,kQ=2;function SQ(e,t,r,n,s,i){var o=r&jQ,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),f=i.get(t);if(d&&f)return d==t&&f==e;var u=-1,p=!0,h=r&kQ?new yQ:void 0;for(i.set(e,t),i.set(t,e);++u<l;){var m=e[u],g=t[u];if(n)var x=o?n(g,m,u,t,e,i):n(m,g,u,e,t,i);if(x!==void 0){if(x)continue;p=!1;break}if(h){if(!wQ(t,function(v,b){if(!NQ(h,b)&&(m===v||s(m,v,r,n,i)))return h.push(b)})){p=!1;break}}else if(!(m===g||s(m,g,r,n,i))){p=!1;break}}return i.delete(e),i.delete(t),p}var F7=SQ,_Q=Jd,AQ=_Q.Uint8Array,CQ=AQ;function EQ(e){var t=-1,r=Array(e.size);return e.forEach(function(n,s){r[++t]=[s,n]}),r}var TQ=EQ;function OQ(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var e6=OQ,IE=J1,DE=CQ,PQ=B_,IQ=F7,DQ=TQ,LQ=e6,FQ=1,MQ=2,RQ="[object Boolean]",BQ="[object Date]",$Q="[object Error]",UQ="[object Map]",zQ="[object Number]",qQ="[object RegExp]",HQ="[object Set]",WQ="[object String]",VQ="[object Symbol]",GQ="[object ArrayBuffer]",KQ="[object DataView]",LE=IE?IE.prototype:void 0,Aj=LE?LE.valueOf:void 0;function XQ(e,t,r,n,s,i,o){switch(r){case KQ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case GQ:return!(e.byteLength!=t.byteLength||!i(new DE(e),new DE(t)));case RQ:case BQ:case zQ:return PQ(+e,+t);case $Q:return e.name==t.name&&e.message==t.message;case qQ:case WQ:return e==t+"";case UQ:var l=DQ;case HQ:var c=n&FQ;if(l||(l=LQ),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;n|=MQ,o.set(e,t);var f=IQ(l(e),l(t),n,s,i,o);return o.delete(e),f;case VQ:if(Aj)return Aj.call(e)==Aj.call(t)}return!1}var YQ=XQ;function QQ(e,t){for(var r=-1,n=t.length,s=e.length;++r<n;)e[s+r]=t[r];return e}var M7=QQ,JQ=M7,ZQ=ll;function eJ(e,t,r){var n=t(e);return ZQ(e)?n:JQ(n,r(e))}var tJ=eJ;function rJ(e,t){for(var r=-1,n=e==null?0:e.length,s=0,i=[];++r<n;){var o=e[r];t(o,r,e)&&(i[s++]=o)}return i}var nJ=rJ;function aJ(){return[]}var sJ=aJ,iJ=nJ,oJ=sJ,lJ=Object.prototype,cJ=lJ.propertyIsEnumerable,FE=Object.getOwnPropertySymbols,dJ=FE?function(e){return e==null?[]:(e=Object(e),iJ(FE(e),function(t){return cJ.call(e,t)}))}:oJ,uJ=dJ;function fJ(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var hJ=fJ,pJ=Ku,mJ=Xu,xJ="[object Arguments]";function gJ(e){return mJ(e)&&pJ(e)==xJ}var vJ=gJ,ME=vJ,bJ=Xu,R7=Object.prototype,yJ=R7.hasOwnProperty,wJ=R7.propertyIsEnumerable,NJ=ME(function(){return arguments}())?ME:function(e){return bJ(e)&&yJ.call(e,"callee")&&!wJ.call(e,"callee")},t6=NJ,ew={exports:{}};function jJ(){return!1}var kJ=jJ;ew.exports;(function(e,t){var r=Jd,n=kJ,s=t&&!t.nodeType&&t,i=s&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===s,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||n;e.exports=d})(ew,ew.exports);var B7=ew.exports,SJ=9007199254740991,_J=/^(?:0|[1-9]\d*)$/;function AJ(e,t){var r=typeof e;return t=t??SJ,!!t&&(r=="number"||r!="symbol"&&_J.test(e))&&e>-1&&e%1==0&&e<t}var r6=AJ,CJ=9007199254740991;function EJ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=CJ}var n6=EJ,TJ=Ku,OJ=n6,PJ=Xu,IJ="[object Arguments]",DJ="[object Array]",LJ="[object Boolean]",FJ="[object Date]",MJ="[object Error]",RJ="[object Function]",BJ="[object Map]",$J="[object Number]",UJ="[object Object]",zJ="[object RegExp]",qJ="[object Set]",HJ="[object String]",WJ="[object WeakMap]",VJ="[object ArrayBuffer]",GJ="[object DataView]",KJ="[object Float32Array]",XJ="[object Float64Array]",YJ="[object Int8Array]",QJ="[object Int16Array]",JJ="[object Int32Array]",ZJ="[object Uint8Array]",eZ="[object Uint8ClampedArray]",tZ="[object Uint16Array]",rZ="[object Uint32Array]",Ea={};Ea[KJ]=Ea[XJ]=Ea[YJ]=Ea[QJ]=Ea[JJ]=Ea[ZJ]=Ea[eZ]=Ea[tZ]=Ea[rZ]=!0;Ea[IJ]=Ea[DJ]=Ea[VJ]=Ea[LJ]=Ea[GJ]=Ea[FJ]=Ea[MJ]=Ea[RJ]=Ea[BJ]=Ea[$J]=Ea[UJ]=Ea[zJ]=Ea[qJ]=Ea[HJ]=Ea[WJ]=!1;function nZ(e){return PJ(e)&&OJ(e.length)&&!!Ea[TJ(e)]}var aZ=nZ;function sZ(e){return function(t){return e(t)}}var $7=sZ,tw={exports:{}};tw.exports;(function(e,t){var r=KF,n=t&&!t.nodeType&&t,s=n&&!0&&e&&!e.nodeType&&e,i=s&&s.exports===n,o=i&&r.process,l=function(){try{var c=s&&s.require&&s.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(tw,tw.exports);var iZ=tw.exports,oZ=aZ,lZ=$7,RE=iZ,BE=RE&&RE.isTypedArray,cZ=BE?lZ(BE):oZ,U7=cZ,dZ=hJ,uZ=t6,fZ=ll,hZ=B7,pZ=r6,mZ=U7,xZ=Object.prototype,gZ=xZ.hasOwnProperty;function vZ(e,t){var r=fZ(e),n=!r&&uZ(e),s=!r&&!n&&hZ(e),i=!r&&!n&&!s&&mZ(e),o=r||n||s||i,l=o?dZ(e.length,String):[],c=l.length;for(var d in e)(t||gZ.call(e,d))&&!(o&&(d=="length"||s&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||pZ(d,c)))&&l.push(d);return l}var bZ=vZ,yZ=Object.prototype;function wZ(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||yZ;return e===r}var NZ=wZ;function jZ(e,t){return function(r){return e(t(r))}}var z7=jZ,kZ=z7,SZ=kZ(Object.keys,Object),_Z=SZ,AZ=NZ,CZ=_Z,EZ=Object.prototype,TZ=EZ.hasOwnProperty;function OZ(e){if(!AZ(e))return CZ(e);var t=[];for(var r in Object(e))TZ.call(e,r)&&r!="constructor"&&t.push(r);return t}var PZ=OZ,IZ=R_,DZ=n6;function LZ(e){return e!=null&&DZ(e.length)&&!IZ(e)}var eb=LZ,FZ=bZ,MZ=PZ,RZ=eb;function BZ(e){return RZ(e)?FZ(e):MZ(e)}var J5=BZ,$Z=tJ,UZ=uJ,zZ=J5;function qZ(e){return $Z(e,zZ,UZ)}var HZ=qZ,$E=HZ,WZ=1,VZ=Object.prototype,GZ=VZ.hasOwnProperty;function KZ(e,t,r,n,s,i){var o=r&WZ,l=$E(e),c=l.length,d=$E(t),f=d.length;if(c!=f&&!o)return!1;for(var u=c;u--;){var p=l[u];if(!(o?p in t:GZ.call(t,p)))return!1}var h=i.get(e),m=i.get(t);if(h&&m)return h==t&&m==e;var g=!0;i.set(e,t),i.set(t,e);for(var x=o;++u<c;){p=l[u];var v=e[p],b=t[p];if(n)var w=o?n(b,v,p,t,e,i):n(v,b,p,e,t,i);if(!(w===void 0?v===b||s(v,b,r,n,i):w)){g=!1;break}x||(x=p=="constructor")}if(g&&!x){var y=e.constructor,N=t.constructor;y!=N&&"constructor"in e&&"constructor"in t&&!(typeof y=="function"&&y instanceof y&&typeof N=="function"&&N instanceof N)&&(g=!1)}return i.delete(e),i.delete(t),g}var XZ=KZ,YZ=op,QZ=Jd,JZ=YZ(QZ,"DataView"),ZZ=JZ,eee=op,tee=Jd,ree=eee(tee,"Promise"),nee=ree,aee=op,see=Jd,iee=aee(see,"Set"),q7=iee,oee=op,lee=Jd,cee=oee(lee,"WeakMap"),dee=cee,qk=ZZ,Hk=$_,Wk=nee,Vk=q7,Gk=dee,H7=Ku,Bx=YF,UE="[object Map]",uee="[object Object]",zE="[object Promise]",qE="[object Set]",HE="[object WeakMap]",WE="[object DataView]",fee=Bx(qk),hee=Bx(Hk),pee=Bx(Wk),mee=Bx(Vk),xee=Bx(Gk),ah=H7;(qk&&ah(new qk(new ArrayBuffer(1)))!=WE||Hk&&ah(new Hk)!=UE||Wk&&ah(Wk.resolve())!=zE||Vk&&ah(new Vk)!=qE||Gk&&ah(new Gk)!=HE)&&(ah=function(e){var t=H7(e),r=t==uee?e.constructor:void 0,n=r?Bx(r):"";if(n)switch(n){case fee:return WE;case hee:return UE;case pee:return zE;case mee:return qE;case xee:return HE}return t});var gee=ah,Cj=P7,vee=F7,bee=YQ,yee=XZ,VE=gee,GE=ll,KE=B7,wee=U7,Nee=1,XE="[object Arguments]",YE="[object Array]",ly="[object Object]",jee=Object.prototype,QE=jee.hasOwnProperty;function kee(e,t,r,n,s,i){var o=GE(e),l=GE(t),c=o?YE:VE(e),d=l?YE:VE(t);c=c==XE?ly:c,d=d==XE?ly:d;var f=c==ly,u=d==ly,p=c==d;if(p&&KE(e)){if(!KE(t))return!1;o=!0,f=!1}if(p&&!f)return i||(i=new Cj),o||wee(e)?vee(e,t,r,n,s,i):bee(e,t,c,r,n,s,i);if(!(r&Nee)){var h=f&&QE.call(e,"__wrapped__"),m=u&&QE.call(t,"__wrapped__");if(h||m){var g=h?e.value():e,x=m?t.value():t;return i||(i=new Cj),s(g,x,r,n,i)}}return p?(i||(i=new Cj),yee(e,t,r,n,s,i)):!1}var See=kee,_ee=See,JE=Xu;function W7(e,t,r,n,s){return e===t?!0:e==null||t==null||!JE(e)&&!JE(t)?e!==e&&t!==t:_ee(e,t,r,n,W7,s)}var a6=W7,Aee=P7,Cee=a6,Eee=1,Tee=2;function Oee(e,t,r,n){var s=r.length,i=s,o=!n;if(e==null)return!i;for(e=Object(e);s--;){var l=r[s];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++s<i;){l=r[s];var c=l[0],d=e[c],f=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var u=new Aee;if(n)var p=n(d,f,c,e,t,u);if(!(p===void 0?Cee(f,d,Eee|Tee,n,u):p))return!1}}return!0}var Pee=Oee,Iee=N0;function Dee(e){return e===e&&!Iee(e)}var V7=Dee,Lee=V7,Fee=J5;function Mee(e){for(var t=Fee(e),r=t.length;r--;){var n=t[r],s=e[n];t[r]=[n,s,Lee(s)]}return t}var Ree=Mee;function Bee(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var G7=Bee,$ee=Pee,Uee=Ree,zee=G7;function qee(e){var t=Uee(e);return t.length==1&&t[0][2]?zee(t[0][0],t[0][1]):function(r){return r===e||$ee(r,e,t)}}var Hee=qee;function Wee(e,t){return e!=null&&t in Object(e)}var Vee=Wee,Gee=t7,Kee=t6,Xee=ll,Yee=r6,Qee=n6,Jee=M5;function Zee(e,t,r){t=Gee(t,e);for(var n=-1,s=t.length,i=!1;++n<s;){var o=Jee(t[n]);if(!(i=e!=null&&r(e,o)))break;e=e[o]}return i||++n!=s?i:(s=e==null?0:e.length,!!s&&Qee(s)&&Yee(o,s)&&(Xee(e)||Kee(e)))}var ete=Zee,tte=Vee,rte=ete;function nte(e,t){return e!=null&&rte(e,t,tte)}var ate=nte,ste=a6,ite=r7,ote=ate,lte=M_,cte=V7,dte=G7,ute=M5,fte=1,hte=2;function pte(e,t){return lte(e)&&cte(t)?dte(ute(e),t):function(r){var n=ite(r,e);return n===void 0&&n===t?ote(r,e):ste(t,n,fte|hte)}}var mte=pte;function xte(e){return e}var $x=xte;function gte(e){return function(t){return t==null?void 0:t[e]}}var vte=gte,bte=H_;function yte(e){return function(t){return bte(t,e)}}var wte=yte,Nte=vte,jte=wte,kte=M_,Ste=M5;function _te(e){return kte(e)?Nte(Ste(e)):jte(e)}var Ate=_te,Cte=Hee,Ete=mte,Tte=$x,Ote=ll,Pte=Ate;function Ite(e){return typeof e=="function"?e:e==null?Tte:typeof e=="object"?Ote(e)?Ete(e[0],e[1]):Cte(e):Pte(e)}var j0=Ite;function Dte(e,t,r,n){for(var s=e.length,i=r+(n?1:-1);n?i--:++i<s;)if(t(e[i],i,e))return i;return-1}var K7=Dte;function Lte(e){return e!==e}var Fte=Lte;function Mte(e,t,r){for(var n=r-1,s=e.length;++n<s;)if(e[n]===t)return n;return-1}var Rte=Mte,Bte=K7,$te=Fte,Ute=Rte;function zte(e,t,r){return t===t?Ute(e,t,r):Bte(e,$te,r)}var qte=zte,Hte=qte;function Wte(e,t){var r=e==null?0:e.length;return!!r&&Hte(e,t,0)>-1}var Vte=Wte;function Gte(e,t,r){for(var n=-1,s=e==null?0:e.length;++n<s;)if(r(t,e[n]))return!0;return!1}var Kte=Gte;function Xte(){}var Yte=Xte,Ej=q7,Qte=Yte,Jte=e6,Zte=1/0,ere=Ej&&1/Jte(new Ej([,-0]))[1]==Zte?function(e){return new Ej(e)}:Qte,tre=ere,rre=I7,nre=Vte,are=Kte,sre=L7,ire=tre,ore=e6,lre=200;function cre(e,t,r){var n=-1,s=nre,i=e.length,o=!0,l=[],c=l;if(r)o=!1,s=are;else if(i>=lre){var d=t?null:ire(e);if(d)return ore(d);o=!1,s=sre,c=new rre}else c=t?[]:l;e:for(;++n<i;){var f=e[n],u=t?t(f):f;if(f=r||f!==0?f:0,o&&u===u){for(var p=c.length;p--;)if(c[p]===u)continue e;t&&c.push(u),l.push(f)}else s(c,u,r)||(c!==l&&c.push(u),l.push(f))}return l}var dre=cre,ure=j0,fre=dre;function hre(e,t){return e&&e.length?fre(e,ure(t)):[]}var pre=hre;const ZE=fa(pre);function X7(e,t,r){return t===!0?ZE(e,r):cn(t)?ZE(e,t):e}function ax(e){"@babel/helpers - typeof";return ax=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ax(e)}var mre=["ref"];function eT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function cu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?eT(Object(r),!0).forEach(function(n){Z5(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xre(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tT(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q7(n.key),n)}}function gre(e,t,r){return t&&tT(e.prototype,t),r&&tT(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vre(e,t,r){return t=rw(t),bre(e,Y7()?Reflect.construct(t,r||[],rw(e).constructor):t.apply(e,r))}function bre(e,t){if(t&&(ax(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yre(e)}function yre(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y7=function(){return!!e})()}function rw(e){return rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},rw(e)}function wre(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kk(e,t)}function Kk(e,t){return Kk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Kk(e,t)}function Z5(e,t,r){return t=Q7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q7(e){var t=Nre(e,"string");return ax(t)=="symbol"?t:t+""}function Nre(e,t){if(ax(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ax(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function jre(e,t){if(e==null)return{};var r=kre(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kre(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Sre(e){return e.value}function _re(e,t){if(st.isValidElement(e))return st.cloneElement(e,t);if(typeof e=="function")return st.createElement(e,t);t.ref;var r=jre(t,mre);return st.createElement(Z_,r)}var rT=1,_m=function(e){function t(){var r;xre(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=vre(this,t,[].concat(s)),Z5(r,"lastBoundingBox",{width:-1,height:-1}),r}return wre(t,e),gre(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>rT||Math.abs(s.height-this.lastBoundingBox.height)>rT)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,n&&n(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?cu({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var s=this.props,i=s.layout,o=s.align,l=s.verticalAlign,c=s.margin,d=s.chartWidth,f=s.chartHeight,u,p;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&i==="vertical"){var h=this.getBBoxSnapshot();u={left:((d||0)-h.width)/2}}else u=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var m=this.getBBoxSnapshot();p={top:((f||0)-m.height)/2}}else p=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return cu(cu({},u),p)}},{key:"render",value:function(){var n=this,s=this.props,i=s.content,o=s.width,l=s.height,c=s.wrapperStyle,d=s.payloadUniqBy,f=s.payload,u=cu(cu({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return st.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(h){n.wrapperNode=h}},_re(i,cu(cu({},this.props),{},{payload:X7(f,d,Sre)})))}}],[{key:"getWithHeight",value:function(n,s){var i=cu(cu({},this.defaultProps),n.props),o=i.layout;return o==="vertical"&&Yt(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||s}:null}}])}(P.PureComponent);Z5(_m,"displayName","Legend");Z5(_m,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var nT=J1,Are=t6,Cre=ll,aT=nT?nT.isConcatSpreadable:void 0;function Ere(e){return Cre(e)||Are(e)||!!(aT&&e&&e[aT])}var Tre=Ere,Ore=M7,Pre=Tre;function J7(e,t,r,n,s){var i=-1,o=e.length;for(r||(r=Pre),s||(s=[]);++i<o;){var l=e[i];t>0&&r(l)?t>1?J7(l,t-1,r,n,s):Ore(s,l):n||(s[s.length]=l)}return s}var Z7=J7;function Ire(e){return function(t,r,n){for(var s=-1,i=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++s];if(r(i[c],c,i)===!1)break}return t}}var Dre=Ire,Lre=Dre,Fre=Lre(),Mre=Fre,Rre=Mre,Bre=J5;function $re(e,t){return e&&Rre(e,t,Bre)}var eM=$re,Ure=eb;function zre(e,t){return function(r,n){if(r==null)return r;if(!Ure(r))return e(r,n);for(var s=r.length,i=t?s:-1,o=Object(r);(t?i--:++i<s)&&n(o[i],i,o)!==!1;);return r}}var qre=zre,Hre=eM,Wre=qre,Vre=Wre(Hre),s6=Vre,Gre=s6,Kre=eb;function Xre(e,t){var r=-1,n=Kre(e)?Array(e.length):[];return Gre(e,function(s,i,o){n[++r]=t(s,i,o)}),n}var tM=Xre;function Yre(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Qre=Yre,sT=Px;function Jre(e,t){if(e!==t){var r=e!==void 0,n=e===null,s=e===e,i=sT(e),o=t!==void 0,l=t===null,c=t===t,d=sT(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||n&&o&&c||!r&&c||!s)return 1;if(!n&&!i&&!d&&e<t||d&&r&&s&&!n&&!i||l&&r&&s||!o&&s||!c)return-1}return 0}var Zre=Jre,ene=Zre;function tne(e,t,r){for(var n=-1,s=e.criteria,i=t.criteria,o=s.length,l=r.length;++n<o;){var c=ene(s[n],i[n]);if(c){if(n>=l)return c;var d=r[n];return c*(d=="desc"?-1:1)}}return e.index-t.index}var rne=tne,Tj=q_,nne=H_,ane=j0,sne=tM,ine=Qre,one=$7,lne=rne,cne=$x,dne=ll;function une(e,t,r){t.length?t=Tj(t,function(i){return dne(i)?function(o){return nne(o,i.length===1?i[0]:i)}:i}):t=[cne];var n=-1;t=Tj(t,one(ane));var s=sne(e,function(i,o,l){var c=Tj(t,function(d){return d(i)});return{criteria:c,index:++n,value:i}});return ine(s,function(i,o){return lne(i,o,r)})}var fne=une;function hne(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var pne=hne,mne=pne,iT=Math.max;function xne(e,t,r){return t=iT(t===void 0?e.length-1:t,0),function(){for(var n=arguments,s=-1,i=iT(n.length-t,0),o=Array(i);++s<i;)o[s]=n[t+s];s=-1;for(var l=Array(t+1);++s<t;)l[s]=n[s];return l[t]=r(o),mne(e,this,l)}}var gne=xne;function vne(e){return function(){return e}}var bne=vne,yne=op,wne=function(){try{var e=yne(Object,"defineProperty");return e({},"",{}),e}catch{}}(),rM=wne,Nne=bne,oT=rM,jne=$x,kne=oT?function(e,t){return oT(e,"toString",{configurable:!0,enumerable:!1,value:Nne(t),writable:!0})}:jne,Sne=kne,_ne=800,Ane=16,Cne=Date.now;function Ene(e){var t=0,r=0;return function(){var n=Cne(),s=Ane-(n-r);if(r=n,s>0){if(++t>=_ne)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Tne=Ene,One=Sne,Pne=Tne,Ine=Pne(One),Dne=Ine,Lne=$x,Fne=gne,Mne=Dne;function Rne(e,t){return Mne(Fne(e,t,Lne),e+"")}var Bne=Rne,$ne=B_,Une=eb,zne=r6,qne=N0;function Hne(e,t,r){if(!qne(r))return!1;var n=typeof t;return(n=="number"?Une(r)&&zne(t,r.length):n=="string"&&t in r)?$ne(r[t],e):!1}var eN=Hne,Wne=Z7,Vne=fne,Gne=Bne,lT=eN,Kne=Gne(function(e,t){if(e==null)return[];var r=t.length;return r>1&&lT(e,t[0],t[1])?t=[]:r>2&&lT(t[0],t[1],t[2])&&(t=[t[0]]),Vne(e,Wne(t,1),[])}),Xne=Kne;const i6=fa(Xne);function Wv(e){"@babel/helpers - typeof";return Wv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wv(e)}function Xk(){return Xk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xk.apply(this,arguments)}function Yne(e,t){return eae(e)||Zne(e,t)||Jne(e,t)||Qne()}function Qne(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jne(e,t){if(e){if(typeof e=="string")return cT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cT(e,t)}}function cT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Zne(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function eae(e){if(Array.isArray(e))return e}function dT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Oj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dT(Object(r),!0).forEach(function(n){tae(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function tae(e,t,r){return t=rae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rae(e){var t=nae(e,"string");return Wv(t)=="symbol"?t:t+""}function nae(e,t){if(Wv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Wv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function aae(e){return Array.isArray(e)&&ni(e[0])&&ni(e[1])?e.join(" ~ "):e}var sae=function(t){var r=t.separator,n=r===void 0?" : ":r,s=t.contentStyle,i=s===void 0?{}:s,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,f=t.payload,u=t.formatter,p=t.itemSorter,h=t.wrapperClassName,m=t.labelClassName,g=t.label,x=t.labelFormatter,v=t.accessibilityLayer,b=v===void 0?!1:v,w=function(){if(f&&f.length){var C={padding:0,margin:0},M=(p?i6(f,p):f).map(function(F,B){if(F.type==="none")return null;var Y=Oj({display:"block",paddingTop:4,paddingBottom:4,color:F.color||"#000"},l),V=F.formatter||u||aae,J=F.value,U=F.name,X=J,W=U;if(V&&X!=null&&W!=null){var E=V(J,U,F,B,f);if(Array.isArray(E)){var R=Yne(E,2);X=R[0],W=R[1]}else X=E}return st.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(B),style:Y},ni(W)?st.createElement("span",{className:"recharts-tooltip-item-name"},W):null,ni(W)?st.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,st.createElement("span",{className:"recharts-tooltip-item-value"},X),st.createElement("span",{className:"recharts-tooltip-item-unit"},F.unit||""))});return st.createElement("ul",{className:"recharts-tooltip-item-list",style:C},M)}return null},y=Oj({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),N=Oj({margin:0},d),S=!Sn(g),j=S?g:"",_=Rn("recharts-default-tooltip",h),T=Rn("recharts-tooltip-label",m);S&&x&&f!==void 0&&f!==null&&(j=x(g,f));var D=b?{role:"status","aria-live":"assertive"}:{};return st.createElement("div",Xk({className:_,style:y},D),st.createElement("p",{className:T,style:N},st.isValidElement(j)?j:"".concat(j)),w())};function Vv(e){"@babel/helpers - typeof";return Vv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vv(e)}function cy(e,t,r){return t=iae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iae(e){var t=oae(e,"string");return Vv(t)=="symbol"?t:t+""}function oae(e,t){if(Vv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Vv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sg="recharts-tooltip-wrapper",lae={visibility:"hidden"};function cae(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return Rn(Sg,cy(cy(cy(cy({},"".concat(Sg,"-right"),Yt(r)&&t&&Yt(t.x)&&r>=t.x),"".concat(Sg,"-left"),Yt(r)&&t&&Yt(t.x)&&r<t.x),"".concat(Sg,"-bottom"),Yt(n)&&t&&Yt(t.y)&&n>=t.y),"".concat(Sg,"-top"),Yt(n)&&t&&Yt(t.y)&&n<t.y))}function uT(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,s=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&Yt(i[n]))return i[n];var f=r[n]-l-s,u=r[n]+s;if(t[n])return o[n]?f:u;if(o[n]){var p=f,h=c[n];return p<h?Math.max(u,c[n]):Math.max(f,c[n])}var m=u+l,g=c[n]+d;return m>g?Math.max(f,c[n]):Math.max(u,c[n])}function dae(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function uae(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,s=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,f,u;return o.height>0&&o.width>0&&r?(f=uT({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),u=uT({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:s,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=dae({translateX:f,translateY:u,useTranslate3d:l})):d=lae,{cssProperties:d,cssClasses:cae({translateX:f,translateY:u,coordinate:r})}}function sx(e){"@babel/helpers - typeof";return sx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sx(e)}function fT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function hT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fT(Object(r),!0).forEach(function(n){Qk(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function fae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,aM(n.key),n)}}function pae(e,t,r){return t&&hae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mae(e,t,r){return t=nw(t),xae(e,nM()?Reflect.construct(t,r||[],nw(e).constructor):t.apply(e,r))}function xae(e,t){if(t&&(sx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gae(e)}function gae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nM=function(){return!!e})()}function nw(e){return nw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},nw(e)}function vae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yk(e,t)}function Yk(e,t){return Yk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Yk(e,t)}function Qk(e,t,r){return t=aM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aM(e){var t=bae(e,"string");return sx(t)=="symbol"?t:t+""}function bae(e,t){if(sx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(sx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var pT=1,yae=function(e){function t(){var r;fae(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=mae(this,t,[].concat(s)),Qk(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Qk(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,f;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(f=r.props.coordinate)===null||f===void 0?void 0:f.y)!==null&&d!==void 0?d:0}})}}),r}return vae(t,e),pae(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>pT||Math.abs(n.height-this.state.lastBoundingBox.height)>pT)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.children,f=s.coordinate,u=s.hasPayload,p=s.isAnimationActive,h=s.offset,m=s.position,g=s.reverseDirection,x=s.useTranslate3d,v=s.viewBox,b=s.wrapperStyle,w=uae({allowEscapeViewBox:o,coordinate:f,offsetTopLeft:h,position:m,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:v}),y=w.cssClasses,N=w.cssProperties,S=hT(hT({transition:p&&i?"transform ".concat(l,"ms ").concat(c):void 0},N),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&u?"visible":"hidden",position:"absolute",top:0,left:0},b);return st.createElement("div",{tabIndex:-1,className:y,style:S,ref:function(_){n.wrapperNode=_}},d)}}])}(P.PureComponent),wae=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Ux={isSsr:wae()};function ix(e){"@babel/helpers - typeof";return ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ix(e)}function mT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function xT(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mT(Object(r),!0).forEach(function(n){o6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Nae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jae(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,iM(n.key),n)}}function kae(e,t,r){return t&&jae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Sae(e,t,r){return t=aw(t),_ae(e,sM()?Reflect.construct(t,r||[],aw(e).constructor):t.apply(e,r))}function _ae(e,t){if(t&&(ix(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Aae(e)}function Aae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sM(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(sM=function(){return!!e})()}function aw(e){return aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},aw(e)}function Cae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Jk(e,t)}function Jk(e,t){return Jk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},Jk(e,t)}function o6(e,t,r){return t=iM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iM(e){var t=Eae(e,"string");return ix(t)=="symbol"?t:t+""}function Eae(e,t){if(ix(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ix(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Tae(e){return e.dataKey}function Oae(e,t){return st.isValidElement(e)?st.cloneElement(e,t):typeof e=="function"?st.createElement(e,t):st.createElement(sae,t)}var Pd=function(e){function t(){return Nae(this,t),Sae(this,t,arguments)}return Cae(t,e),kae(t,[{key:"render",value:function(){var n=this,s=this.props,i=s.active,o=s.allowEscapeViewBox,l=s.animationDuration,c=s.animationEasing,d=s.content,f=s.coordinate,u=s.filterNull,p=s.isAnimationActive,h=s.offset,m=s.payload,g=s.payloadUniqBy,x=s.position,v=s.reverseDirection,b=s.useTranslate3d,w=s.viewBox,y=s.wrapperStyle,N=m??[];u&&N.length&&(N=X7(m.filter(function(j){return j.value!=null&&(j.hide!==!0||n.props.includeHidden)}),g,Tae));var S=N.length>0;return st.createElement(yae,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:p,active:i,coordinate:f,hasPayload:S,offset:h,position:x,reverseDirection:v,useTranslate3d:b,viewBox:w,wrapperStyle:y},Oae(d,xT(xT({},this.props),{},{payload:N})))}}])}(P.PureComponent);o6(Pd,"displayName","Tooltip");o6(Pd,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Ux.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Pae=Jd,Iae=function(){return Pae.Date.now()},Dae=Iae,Lae=/\s/;function Fae(e){for(var t=e.length;t--&&Lae.test(e.charAt(t)););return t}var Mae=Fae,Rae=Mae,Bae=/^\s+/;function $ae(e){return e&&e.slice(0,Rae(e)+1).replace(Bae,"")}var Uae=$ae,zae=Uae,gT=N0,qae=Px,vT=NaN,Hae=/^[-+]0x[0-9a-f]+$/i,Wae=/^0b[01]+$/i,Vae=/^0o[0-7]+$/i,Gae=parseInt;function Kae(e){if(typeof e=="number")return e;if(qae(e))return vT;if(gT(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=gT(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=zae(e);var r=Wae.test(e);return r||Vae.test(e)?Gae(e.slice(2),r?2:8):Hae.test(e)?vT:+e}var oM=Kae,Xae=N0,Pj=Dae,bT=oM,Yae="Expected a function",Qae=Math.max,Jae=Math.min;function Zae(e,t,r){var n,s,i,o,l,c,d=0,f=!1,u=!1,p=!0;if(typeof e!="function")throw new TypeError(Yae);t=bT(t)||0,Xae(r)&&(f=!!r.leading,u="maxWait"in r,i=u?Qae(bT(r.maxWait)||0,t):i,p="trailing"in r?!!r.trailing:p);function h(S){var j=n,_=s;return n=s=void 0,d=S,o=e.apply(_,j),o}function m(S){return d=S,l=setTimeout(v,t),f?h(S):o}function g(S){var j=S-c,_=S-d,T=t-j;return u?Jae(T,i-_):T}function x(S){var j=S-c,_=S-d;return c===void 0||j>=t||j<0||u&&_>=i}function v(){var S=Pj();if(x(S))return b(S);l=setTimeout(v,g(S))}function b(S){return l=void 0,p&&n?h(S):(n=s=void 0,o)}function w(){l!==void 0&&clearTimeout(l),d=0,n=c=s=l=void 0}function y(){return l===void 0?o:b(Pj())}function N(){var S=Pj(),j=x(S);if(n=arguments,s=this,c=S,j){if(l===void 0)return m(c);if(u)return clearTimeout(l),l=setTimeout(v,t),h(c)}return l===void 0&&(l=setTimeout(v,t)),o}return N.cancel=w,N.flush=y,N}var ese=Zae,tse=ese,rse=N0,nse="Expected a function";function ase(e,t,r){var n=!0,s=!0;if(typeof e!="function")throw new TypeError(nse);return rse(r)&&(n="leading"in r?!!r.leading:n,s="trailing"in r?!!r.trailing:s),tse(e,t,{leading:n,maxWait:t,trailing:s})}var sse=ase;const lM=fa(sse);function Gv(e){"@babel/helpers - typeof";return Gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gv(e)}function yT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function dy(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yT(Object(r),!0).forEach(function(n){ise(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ise(e,t,r){return t=ose(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ose(e){var t=lse(e,"string");return Gv(t)=="symbol"?t:t+""}function lse(e,t){if(Gv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Gv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cse(e,t){return hse(e)||fse(e,t)||use(e,t)||dse()}function dse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function use(e,t){if(e){if(typeof e=="string")return wT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wT(e,t)}}function wT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function fse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function hse(e){if(Array.isArray(e))return e}var pse=P.forwardRef(function(e,t){var r=e.aspect,n=e.initialDimension,s=n===void 0?{width:-1,height:-1}:n,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,f=d===void 0?0:d,u=e.minHeight,p=e.maxHeight,h=e.children,m=e.debounce,g=m===void 0?0:m,x=e.id,v=e.className,b=e.onResize,w=e.style,y=w===void 0?{}:w,N=P.useRef(null),S=P.useRef();S.current=b,P.useImperativeHandle(t,function(){return Object.defineProperty(N.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),N.current},configurable:!0})});var j=P.useState({containerWidth:s.width,containerHeight:s.height}),_=cse(j,2),T=_[0],D=_[1],A=P.useCallback(function(M,F){D(function(B){var Y=Math.round(M),V=Math.round(F);return B.containerWidth===Y&&B.containerHeight===V?B:{containerWidth:Y,containerHeight:V}})},[]);P.useEffect(function(){var M=function(U){var X,W=U[0].contentRect,E=W.width,R=W.height;A(E,R),(X=S.current)===null||X===void 0||X.call(S,E,R)};g>0&&(M=lM(M,g,{trailing:!0,leading:!1}));var F=new ResizeObserver(M),B=N.current.getBoundingClientRect(),Y=B.width,V=B.height;return A(Y,V),F.observe(N.current),function(){F.disconnect()}},[A,g]);var C=P.useMemo(function(){var M=T.containerWidth,F=T.containerHeight;if(M<0||F<0)return null;Ou(fh(o)||fh(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),Ou(!r||r>0,"The aspect(%s) must be greater than zero.",r);var B=fh(o)?M:o,Y=fh(c)?F:c;r&&r>0&&(B?Y=B/r:Y&&(B=Y*r),p&&Y>p&&(Y=p)),Ou(B>0||Y>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,B,Y,o,c,f,u,r);var V=!Array.isArray(h)&&Tu(h.type).endsWith("Chart");return st.Children.map(h,function(J){return st.isValidElement(J)?P.cloneElement(J,dy({width:B,height:Y},V?{style:dy({height:"100%",width:"100%",maxHeight:Y,maxWidth:B},J.props.style)}:{})):J})},[r,h,c,p,u,f,T,o]);return st.createElement("div",{id:x?"".concat(x):void 0,className:Rn("recharts-responsive-container",v),style:dy(dy({},y),{},{width:o,height:c,minWidth:f,minHeight:u,maxHeight:p}),ref:N},C)}),cM=function(t){return null};cM.displayName="Cell";function Kv(e){"@babel/helpers - typeof";return Kv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kv(e)}function NT(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Zk(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NT(Object(r),!0).forEach(function(n){mse(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NT(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function mse(e,t,r){return t=xse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xse(e){var t=gse(e,"string");return Kv(t)=="symbol"?t:t+""}function gse(e,t){if(Kv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Kv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Hp={widthCache:{},cacheCount:0},vse=2e3,bse={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},jT="recharts_measurement_span";function yse(e){var t=Zk({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var uv=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Ux.isSsr)return{width:0,height:0};var n=yse(r),s=JSON.stringify({text:t,copyStyle:n});if(Hp.widthCache[s])return Hp.widthCache[s];try{var i=document.getElementById(jT);i||(i=document.createElement("span"),i.setAttribute("id",jT),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=Zk(Zk({},bse),n);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return Hp.widthCache[s]=c,++Hp.cacheCount>vse&&(Hp.cacheCount=0,Hp.widthCache={}),c}catch{return{width:0,height:0}}},wse=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Xv(e){"@babel/helpers - typeof";return Xv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xv(e)}function sw(e,t){return Sse(e)||kse(e,t)||jse(e,t)||Nse()}function Nse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function jse(e,t){if(e){if(typeof e=="string")return kT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kT(e,t)}}function kT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Sse(e){if(Array.isArray(e))return e}function _se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ST(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Cse(n.key),n)}}function Ase(e,t,r){return t&&ST(e.prototype,t),r&&ST(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cse(e){var t=Ese(e,"string");return Xv(t)=="symbol"?t:t+""}function Ese(e,t){if(Xv(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xv(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var _T=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,AT=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Tse=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Ose=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,dM={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Pse=Object.keys(dM),pm="NaN";function Ise(e,t){return e*dM[t]}var uy=function(){function e(t,r){_se(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!Tse.test(r)&&(this.num=NaN,this.unit=""),Pse.includes(r)&&(this.num=Ise(t,r),this.unit="px")}return Ase(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,s=(n=Ose.exec(r))!==null&&n!==void 0?n:[],i=sw(s,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function uM(e){if(e.includes(pm))return pm;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=_T.exec(t))!==null&&r!==void 0?r:[],s=sw(n,4),i=s[1],o=s[2],l=s[3],c=uy.parse(i??""),d=uy.parse(l??""),f=o==="*"?c.multiply(d):c.divide(d);if(f.isNaN())return pm;t=t.replace(_T,f.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,p=(u=AT.exec(t))!==null&&u!==void 0?u:[],h=sw(p,4),m=h[1],g=h[2],x=h[3],v=uy.parse(m??""),b=uy.parse(x??""),w=g==="+"?v.add(b):v.subtract(b);if(w.isNaN())return pm;t=t.replace(AT,w.toString())}return t}var CT=/\(([^()]*)\)/;function Dse(e){for(var t=e;t.includes("(");){var r=CT.exec(t),n=sw(r,2),s=n[1];t=t.replace(CT,uM(s))}return t}function Lse(e){var t=e.replace(/\s+/g,"");return t=Dse(t),t=uM(t),t}function Fse(e){try{return Lse(e)}catch{return pm}}function Ij(e){var t=Fse(e.slice(5,-1));return t===pm?"":t}var Mse=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Rse=["dx","dy","angle","className","breakAll"];function e3(){return e3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},e3.apply(this,arguments)}function ET(e,t){if(e==null)return{};var r=Bse(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Bse(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function TT(e,t){return qse(e)||zse(e,t)||Use(e,t)||$se()}function $se(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Use(e,t){if(e){if(typeof e=="string")return OT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OT(e,t)}}function OT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function zse(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function qse(e){if(Array.isArray(e))return e}var fM=/[ \f\n\r\t\v\u2028\u2029]+/,hM=function(t){var r=t.children,n=t.breakAll,s=t.style;try{var i=[];Sn(r)||(n?i=r.toString().split(""):i=r.toString().split(fM));var o=i.map(function(c){return{word:c,width:uv(c,s).width}}),l=n?0:uv("",s).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Hse=function(t,r,n,s,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,f=Yt(o),u=l,p=function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return B.reduce(function(Y,V){var J=V.word,U=V.width,X=Y[Y.length-1];if(X&&(s==null||i||X.width+U+n<Number(s)))X.words.push(J),X.width+=U+n;else{var W={words:[J],width:U};Y.push(W)}return Y},[])},h=p(r),m=function(B){return B.reduce(function(Y,V){return Y.width>V.width?Y:V})};if(!f)return h;for(var g="",x=function(B){var Y=u.slice(0,B),V=hM({breakAll:d,style:c,children:Y+g}).wordsWithComputedWidth,J=p(V),U=J.length>o||m(J).width>Number(s);return[U,J]},v=0,b=u.length-1,w=0,y;v<=b&&w<=u.length-1;){var N=Math.floor((v+b)/2),S=N-1,j=x(S),_=TT(j,2),T=_[0],D=_[1],A=x(N),C=TT(A,1),M=C[0];if(!T&&!M&&(v=N+1),T&&M&&(b=N-1),!T&&M){y=D;break}w++}return y||h},PT=function(t){var r=Sn(t)?[]:t.toString().split(fM);return[{words:r}]},Wse=function(t){var r=t.width,n=t.scaleToFit,s=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!Ux.isSsr){var c,d,f=hM({breakAll:o,children:s,style:i});if(f){var u=f.wordsWithComputedWidth,p=f.spaceWidth;c=u,d=p}else return PT(s);return Hse({breakAll:o,children:s,maxLines:l,style:i},c,d,r,n)}return PT(s)},IT="#808080",iw=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,f=t.scaleToFit,u=f===void 0?!1:f,p=t.textAnchor,h=p===void 0?"start":p,m=t.verticalAnchor,g=m===void 0?"end":m,x=t.fill,v=x===void 0?IT:x,b=ET(t,Mse),w=P.useMemo(function(){return Wse({breakAll:b.breakAll,children:b.children,maxLines:b.maxLines,scaleToFit:u,style:b.style,width:b.width})},[b.breakAll,b.children,b.maxLines,u,b.style,b.width]),y=b.dx,N=b.dy,S=b.angle,j=b.className,_=b.breakAll,T=ET(b,Rse);if(!ni(n)||!ni(i))return null;var D=n+(Yt(y)?y:0),A=i+(Yt(N)?N:0),C;switch(g){case"start":C=Ij("calc(".concat(d,")"));break;case"middle":C=Ij("calc(".concat((w.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:C=Ij("calc(".concat(w.length-1," * -").concat(l,")"));break}var M=[];if(u){var F=w[0].width,B=b.width;M.push("scale(".concat((Yt(B)?B/F:1)/F,")"))}return S&&M.push("rotate(".concat(S,", ").concat(D,", ").concat(A,")")),M.length&&(T.transform=M.join(" ")),st.createElement("text",e3({},wn(T,!0),{x:D,y:A,className:Rn("recharts-text",j),textAnchor:h,fill:v.includes("url")?IT:v}),w.map(function(Y,V){var J=Y.words.join(_?"":" ");return st.createElement("tspan",{x:D,dy:V===0?C:l,key:"".concat(J,"-").concat(V)},J)}))};function i0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Vse(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function l6(e){let t,r,n;e.length!==2?(t=i0,r=(l,c)=>i0(e(l),c),n=(l,c)=>e(l)-c):(t=e===i0||e===Vse?e:Gse,r=e,n=e);function s(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const u=d+f>>>1;r(l[u],c)<0?d=u+1:f=u}while(d<f)}return d}function i(l,c,d=0,f=l.length){if(d<f){if(t(c,c)!==0)return f;do{const u=d+f>>>1;r(l[u],c)<=0?d=u+1:f=u}while(d<f)}return d}function o(l,c,d=0,f=l.length){const u=s(l,c,d,f-1);return u>d&&n(l[u-1],c)>-n(l[u],c)?u-1:u}return{left:s,center:o,right:i}}function Gse(){return 0}function pM(e){return e===null?NaN:+e}function*Kse(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const Xse=l6(i0),tb=Xse.right;l6(pM).center;class DT extends Map{constructor(t,r=Jse){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,s]of t)this.set(n,s)}get(t){return super.get(LT(this,t))}has(t){return super.has(LT(this,t))}set(t,r){return super.set(Yse(this,t),r)}delete(t){return super.delete(Qse(this,t))}}function LT({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function Yse({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function Qse({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function Jse(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Zse(e=i0){if(e===i0)return mM;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function mM(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const eie=Math.sqrt(50),tie=Math.sqrt(10),rie=Math.sqrt(2);function ow(e,t,r){const n=(t-e)/Math.max(0,r),s=Math.floor(Math.log10(n)),i=n/Math.pow(10,s),o=i>=eie?10:i>=tie?5:i>=rie?2:1;let l,c,d;return s<0?(d=Math.pow(10,-s)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,s)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=r&&r<2?ow(e,t,r*2):[l,c,d]}function t3(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[s,i,o]=n?ow(t,e,r):ow(e,t,r);if(!(i>=s))return[];const l=i-s+1,c=new Array(l);if(n)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(s+d)/-o;else for(let d=0;d<l;++d)c[d]=(s+d)*o;return c}function r3(e,t,r){return t=+t,e=+e,r=+r,ow(e,t,r)[2]}function n3(e,t,r){t=+t,e=+e,r=+r;const n=t<e,s=n?r3(t,e,r):r3(e,t,r);return(n?-1:1)*(s<0?1/-s:s)}function FT(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function MT(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function xM(e,t,r=0,n=1/0,s){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(s=s===void 0?mM:Zse(s);n>r;){if(n-r>600){const c=n-r+1,d=t-r+1,f=Math.log(c),u=.5*Math.exp(2*f/3),p=.5*Math.sqrt(f*u*(c-u)/c)*(d-c/2<0?-1:1),h=Math.max(r,Math.floor(t-d*u/c+p)),m=Math.min(n,Math.floor(t+(c-d)*u/c+p));xM(e,t,h,m,s)}const i=e[t];let o=r,l=n;for(_g(e,r,t),s(e[n],i)>0&&_g(e,r,n);o<l;){for(_g(e,o,l),++o,--l;s(e[o],i)<0;)++o;for(;s(e[l],i)>0;)--l}s(e[r],i)===0?_g(e,r,l):(++l,_g(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function _g(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function nie(e,t,r){if(e=Float64Array.from(Kse(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return MT(e);if(t>=1)return FT(e);var n,s=(n-1)*t,i=Math.floor(s),o=FT(xM(e,i).subarray(0,i+1)),l=MT(e.subarray(i+1));return o+(l-o)*(s-i)}}function aie(e,t,r=pM){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,s=(n-1)*t,i=Math.floor(s),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(s-i)}}function sie(e,t,r){e=+e,t=+t,r=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+r;for(var n=-1,s=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(s);++n<s;)i[n]=e+n*r;return i}function Nc(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Yu(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const a3=Symbol("implicit");function c6(){var e=new DT,t=[],r=[],n=a3;function s(i){let o=e.get(i);if(o===void 0){if(n!==a3)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return s.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new DT;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return s},s.range=function(i){return arguments.length?(r=Array.from(i),s):r.slice()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return c6(t,r).unknown(n)},Nc.apply(s,arguments),s}function Yv(){var e=c6().unknown(void 0),t=e.domain,r=e.range,n=0,s=1,i,o,l=!1,c=0,d=0,f=.5;delete e.unknown;function u(){var p=t().length,h=s<n,m=h?s:n,g=h?n:s;i=(g-m)/Math.max(1,p-c+d*2),l&&(i=Math.floor(i)),m+=(g-m-i*(p-c))*f,o=i*(1-c),l&&(m=Math.round(m),o=Math.round(o));var x=sie(p).map(function(v){return m+i*v});return r(h?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),u()):t()},e.range=function(p){return arguments.length?([n,s]=p,n=+n,s=+s,u()):[n,s]},e.rangeRound=function(p){return[n,s]=p,n=+n,s=+s,l=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(p){return arguments.length?(l=!!p,u()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,d=+p),u()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),u()):c},e.paddingOuter=function(p){return arguments.length?(d=+p,u()):d},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),u()):f},e.copy=function(){return Yv(t(),[n,s]).round(l).paddingInner(c).paddingOuter(d).align(f)},Nc.apply(u(),arguments)}function gM(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gM(t())},e}function fv(){return gM(Yv.apply(null,arguments).paddingInner(1))}function d6(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function vM(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function rb(){}var Qv=.7,lw=1/Qv,Am="\\s*([+-]?\\d+)\\s*",Jv="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Gd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",iie=/^#([0-9a-f]{3,8})$/,oie=new RegExp(`^rgb\\(${Am},${Am},${Am}\\)$`),lie=new RegExp(`^rgb\\(${Gd},${Gd},${Gd}\\)$`),cie=new RegExp(`^rgba\\(${Am},${Am},${Am},${Jv}\\)$`),die=new RegExp(`^rgba\\(${Gd},${Gd},${Gd},${Jv}\\)$`),uie=new RegExp(`^hsl\\(${Jv},${Gd},${Gd}\\)$`),fie=new RegExp(`^hsla\\(${Jv},${Gd},${Gd},${Jv}\\)$`),RT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};d6(rb,Zv,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:BT,formatHex:BT,formatHex8:hie,formatHsl:pie,formatRgb:$T,toString:$T});function BT(){return this.rgb().formatHex()}function hie(){return this.rgb().formatHex8()}function pie(){return bM(this).formatHsl()}function $T(){return this.rgb().formatRgb()}function Zv(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=iie.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?UT(t):r===3?new el(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?fy(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?fy(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=oie.exec(e))?new el(t[1],t[2],t[3],1):(t=lie.exec(e))?new el(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=cie.exec(e))?fy(t[1],t[2],t[3],t[4]):(t=die.exec(e))?fy(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=uie.exec(e))?HT(t[1],t[2]/100,t[3]/100,1):(t=fie.exec(e))?HT(t[1],t[2]/100,t[3]/100,t[4]):RT.hasOwnProperty(e)?UT(RT[e]):e==="transparent"?new el(NaN,NaN,NaN,0):null}function UT(e){return new el(e>>16&255,e>>8&255,e&255,1)}function fy(e,t,r,n){return n<=0&&(e=t=r=NaN),new el(e,t,r,n)}function mie(e){return e instanceof rb||(e=Zv(e)),e?(e=e.rgb(),new el(e.r,e.g,e.b,e.opacity)):new el}function s3(e,t,r,n){return arguments.length===1?mie(e):new el(e,t,r,n??1)}function el(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}d6(el,s3,vM(rb,{brighter(e){return e=e==null?lw:Math.pow(lw,e),new el(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Qv:Math.pow(Qv,e),new el(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new el(Ph(this.r),Ph(this.g),Ph(this.b),cw(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zT,formatHex:zT,formatHex8:xie,formatRgb:qT,toString:qT}));function zT(){return`#${hh(this.r)}${hh(this.g)}${hh(this.b)}`}function xie(){return`#${hh(this.r)}${hh(this.g)}${hh(this.b)}${hh((isNaN(this.opacity)?1:this.opacity)*255)}`}function qT(){const e=cw(this.opacity);return`${e===1?"rgb(":"rgba("}${Ph(this.r)}, ${Ph(this.g)}, ${Ph(this.b)}${e===1?")":`, ${e})`}`}function cw(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ph(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function hh(e){return e=Ph(e),(e<16?"0":"")+e.toString(16)}function HT(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Yc(e,t,r,n)}function bM(e){if(e instanceof Yc)return new Yc(e.h,e.s,e.l,e.opacity);if(e instanceof rb||(e=Zv(e)),!e)return new Yc;if(e instanceof Yc)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,s=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-s,c=(i+s)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+s:2-i-s,o*=60):l=c>0&&c<1?0:o,new Yc(o,l,c,e.opacity)}function gie(e,t,r,n){return arguments.length===1?bM(e):new Yc(e,t,r,n??1)}function Yc(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}d6(Yc,gie,vM(rb,{brighter(e){return e=e==null?lw:Math.pow(lw,e),new Yc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Qv:Math.pow(Qv,e),new Yc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,s=2*r-n;return new el(Dj(e>=240?e-240:e+120,s,n),Dj(e,s,n),Dj(e<120?e+240:e-120,s,n),this.opacity)},clamp(){return new Yc(WT(this.h),hy(this.s),hy(this.l),cw(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cw(this.opacity);return`${e===1?"hsl(":"hsla("}${WT(this.h)}, ${hy(this.s)*100}%, ${hy(this.l)*100}%${e===1?")":`, ${e})`}`}}));function WT(e){return e=(e||0)%360,e<0?e+360:e}function hy(e){return Math.max(0,Math.min(1,e||0))}function Dj(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const u6=e=>()=>e;function vie(e,t){return function(r){return e+r*t}}function bie(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function yie(e){return(e=+e)==1?yM:function(t,r){return r-t?bie(t,r,e):u6(isNaN(t)?r:t)}}function yM(e,t){var r=t-e;return r?vie(e,r):u6(isNaN(e)?t:e)}const VT=function e(t){var r=yie(t);function n(s,i){var o=r((s=s3(s)).r,(i=s3(i)).r),l=r(s.g,i.g),c=r(s.b,i.b),d=yM(s.opacity,i.opacity);return function(f){return s.r=o(f),s.g=l(f),s.b=c(f),s.opacity=d(f),s+""}}return n.gamma=e,n}(1);function wie(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),s;return function(i){for(s=0;s<r;++s)n[s]=e[s]*(1-i)+t[s]*i;return n}}function Nie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function jie(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,s=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)s[o]=zx(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=s[o](l);return i}}function kie(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function dw(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Sie(e,t){var r={},n={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?r[s]=zx(e[s],t[s]):n[s]=t[s];return function(i){for(s in r)n[s]=r[s](i);return n}}var i3=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lj=new RegExp(i3.source,"g");function _ie(e){return function(){return e}}function Aie(e){return function(t){return e(t)+""}}function Cie(e,t){var r=i3.lastIndex=Lj.lastIndex=0,n,s,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=i3.exec(e))&&(s=Lj.exec(t));)(i=s.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(s=s[0])?l[o]?l[o]+=s:l[++o]=s:(l[++o]=null,c.push({i:o,x:dw(n,s)})),r=Lj.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Aie(c[0].x):_ie(t):(t=c.length,function(d){for(var f=0,u;f<t;++f)l[(u=c[f]).i]=u.x(d);return l.join("")})}function zx(e,t){var r=typeof t,n;return t==null||r==="boolean"?u6(t):(r==="number"?dw:r==="string"?(n=Zv(t))?(t=n,VT):Cie:t instanceof Zv?VT:t instanceof Date?kie:Nie(t)?wie:Array.isArray(t)?jie:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Sie:dw)(e,t)}function f6(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Eie(e,t){t===void 0&&(t=e,e=zx);for(var r=0,n=t.length-1,s=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(s,s=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function Tie(e){return function(){return e}}function uw(e){return+e}var GT=[0,1];function Ao(e){return e}function o3(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:Tie(isNaN(t)?NaN:.5)}function Oie(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function Pie(e,t,r){var n=e[0],s=e[1],i=t[0],o=t[1];return s<n?(n=o3(s,n),i=r(o,i)):(n=o3(n,s),i=r(i,o)),function(l){return i(n(l))}}function Iie(e,t,r){var n=Math.min(e.length,t.length)-1,s=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)s[o]=o3(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=tb(e,l,1,n)-1;return i[c](s[c](l))}}function nb(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function tN(){var e=GT,t=GT,r=zx,n,s,i,o=Ao,l,c,d;function f(){var p=Math.min(e.length,t.length);return o!==Ao&&(o=Oie(e[0],e[p-1])),l=p>2?Iie:Pie,c=d=null,u}function u(p){return p==null||isNaN(p=+p)?i:(c||(c=l(e.map(n),t,r)))(n(o(p)))}return u.invert=function(p){return o(s((d||(d=l(t,e.map(n),dw)))(p)))},u.domain=function(p){return arguments.length?(e=Array.from(p,uw),f()):e.slice()},u.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},u.rangeRound=function(p){return t=Array.from(p),r=f6,f()},u.clamp=function(p){return arguments.length?(o=p?!0:Ao,f()):o!==Ao},u.interpolate=function(p){return arguments.length?(r=p,f()):r},u.unknown=function(p){return arguments.length?(i=p,u):i},function(p,h){return n=p,s=h,f()}}function h6(){return tN()(Ao,Ao)}function Die(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function fw(e,t){if(!isFinite(e)||e===0)return null;var r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function ox(e){return e=fw(Math.abs(e)),e?e[1]:NaN}function Lie(e,t){return function(r,n){for(var s=r.length,i=[],o=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(s-=l,s+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Fie(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var Mie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function e1(e){if(!(t=Mie.exec(e)))throw new Error("invalid format: "+e);var t;return new p6({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}e1.prototype=p6.prototype;function p6(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}p6.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Rie(e){e:for(var t=e.length,r=1,n=-1,s;r<t;++r)switch(e[r]){case".":n=s=r;break;case"0":n===0&&(n=r),s=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(s+1):e}var hw;function Bie(e,t){var r=fw(e,t);if(!r)return hw=void 0,e.toPrecision(t);var n=r[0],s=r[1],i=s-(hw=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+fw(e,Math.max(0,t+i-1))[0]}function KT(e,t){var r=fw(e,t);if(!r)return e+"";var n=r[0],s=r[1];return s<0?"0."+new Array(-s).join("0")+n:n.length>s+1?n.slice(0,s+1)+"."+n.slice(s+1):n+new Array(s-n.length+2).join("0")}const XT={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Die,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>KT(e*100,t),r:KT,s:Bie,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function YT(e){return e}var QT=Array.prototype.map,JT=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $ie(e){var t=e.grouping===void 0||e.thousands===void 0?YT:Lie(QT.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?YT:Fie(QT.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(u,p){u=e1(u);var h=u.fill,m=u.align,g=u.sign,x=u.symbol,v=u.zero,b=u.width,w=u.comma,y=u.precision,N=u.trim,S=u.type;S==="n"?(w=!0,S="g"):XT[S]||(y===void 0&&(y=12),N=!0,S="g"),(v||h==="0"&&m==="=")&&(v=!0,h="0",m="=");var j=(p&&p.prefix!==void 0?p.prefix:"")+(x==="$"?r:x==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():""),_=(x==="$"?n:/[%p]/.test(S)?o:"")+(p&&p.suffix!==void 0?p.suffix:""),T=XT[S],D=/[defgprs%]/.test(S);y=y===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function A(C){var M=j,F=_,B,Y,V;if(S==="c")F=T(C)+F,C="";else{C=+C;var J=C<0||1/C<0;if(C=isNaN(C)?c:T(Math.abs(C),y),N&&(C=Rie(C)),J&&+C==0&&g!=="+"&&(J=!1),M=(J?g==="("?g:l:g==="-"||g==="("?"":g)+M,F=(S==="s"&&!isNaN(C)&&hw!==void 0?JT[8+hw/3]:"")+F+(J&&g==="("?")":""),D){for(B=-1,Y=C.length;++B<Y;)if(V=C.charCodeAt(B),48>V||V>57){F=(V===46?s+C.slice(B+1):C.slice(B))+F,C=C.slice(0,B);break}}}w&&!v&&(C=t(C,1/0));var U=M.length+C.length+F.length,X=U<b?new Array(b-U+1).join(h):"";switch(w&&v&&(C=t(X+C,X.length?b-F.length:1/0),X=""),m){case"<":C=M+C+F+X;break;case"=":C=M+X+C+F;break;case"^":C=X.slice(0,U=X.length>>1)+M+C+F+X.slice(U);break;default:C=X+M+C+F;break}return i(C)}return A.toString=function(){return u+""},A}function f(u,p){var h=Math.max(-8,Math.min(8,Math.floor(ox(p)/3)))*3,m=Math.pow(10,-h),g=d((u=e1(u),u.type="f",u),{suffix:JT[8+h/3]});return function(x){return g(m*x)}}return{format:d,formatPrefix:f}}var py,m6,wM;Uie({thousands:",",grouping:[3],currency:["$",""]});function Uie(e){return py=$ie(e),m6=py.format,wM=py.formatPrefix,py}function zie(e){return Math.max(0,-ox(Math.abs(e)))}function qie(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ox(t)/3)))*3-ox(Math.abs(e)))}function Hie(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ox(t)-ox(e))+1}function NM(e,t,r,n){var s=n3(e,t,r),i;switch(n=e1(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=qie(s,o))&&(n.precision=i),wM(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=Hie(s,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=zie(s))&&(n.precision=i-(n.type==="%")*2);break}}return m6(n)}function k0(e){var t=e.domain;return e.ticks=function(r){var n=t();return t3(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var s=t();return NM(s[0],s[s.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),s=0,i=n.length-1,o=n[s],l=n[i],c,d,f=10;for(l<o&&(d=o,o=l,l=d,d=s,s=i,i=d);f-- >0;){if(d=r3(o,l,r),d===c)return n[s]=o,n[i]=l,t(n);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function pw(){var e=h6();return e.copy=function(){return nb(e,pw())},Nc.apply(e,arguments),k0(e)}function jM(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,uw),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return jM(e).unknown(t)},e=arguments.length?Array.from(e,uw):[0,1],k0(r)}function kM(e,t){e=e.slice();var r=0,n=e.length-1,s=e[r],i=e[n],o;return i<s&&(o=r,r=n,n=o,o=s,s=i,i=o),e[r]=t.floor(s),e[n]=t.ceil(i),e}function ZT(e){return Math.log(e)}function eO(e){return Math.exp(e)}function Wie(e){return-Math.log(-e)}function Vie(e){return-Math.exp(-e)}function Gie(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Kie(e){return e===10?Gie:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Xie(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function tO(e){return(t,r)=>-e(-t,r)}function x6(e){const t=e(ZT,eO),r=t.domain;let n=10,s,i;function o(){return s=Xie(n),i=Kie(n),r()[0]<0?(s=tO(s),i=tO(i),e(Wie,Vie)):e(ZT,eO),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let d=c[0],f=c[c.length-1];const u=f<d;u&&([d,f]=[f,d]);let p=s(d),h=s(f),m,g;const x=l==null?10:+l;let v=[];if(!(n%1)&&h-p<x){if(p=Math.floor(p),h=Math.ceil(h),d>0){for(;p<=h;++p)for(m=1;m<n;++m)if(g=p<0?m/i(-p):m*i(p),!(g<d)){if(g>f)break;v.push(g)}}else for(;p<=h;++p)for(m=n-1;m>=1;--m)if(g=p>0?m/i(-p):m*i(p),!(g<d)){if(g>f)break;v.push(g)}v.length*2<x&&(v=t3(d,f,x))}else v=t3(p,h,Math.min(h-p,x)).map(i);return u?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=e1(c)).precision==null&&(c.trim=!0),c=m6(c)),l===1/0)return c;const d=Math.max(1,n*l/t.ticks().length);return f=>{let u=f/i(Math.round(s(f)));return u*n<n-.5&&(u*=n),u<=d?c(f):""}},t.nice=()=>r(kM(r(),{floor:l=>i(Math.floor(s(l))),ceil:l=>i(Math.ceil(s(l)))})),t}function SM(){const e=x6(tN()).domain([1,10]);return e.copy=()=>nb(e,SM()).base(e.base()),Nc.apply(e,arguments),e}function rO(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function nO(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function g6(e){var t=1,r=e(rO(t),nO(t));return r.constant=function(n){return arguments.length?e(rO(t=+n),nO(t)):t},k0(r)}function _M(){var e=g6(tN());return e.copy=function(){return nb(e,_M()).constant(e.constant())},Nc.apply(e,arguments)}function aO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Yie(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Qie(e){return e<0?-e*e:e*e}function v6(e){var t=e(Ao,Ao),r=1;function n(){return r===1?e(Ao,Ao):r===.5?e(Yie,Qie):e(aO(r),aO(1/r))}return t.exponent=function(s){return arguments.length?(r=+s,n()):r},k0(t)}function b6(){var e=v6(tN());return e.copy=function(){return nb(e,b6()).exponent(e.exponent())},Nc.apply(e,arguments),e}function Jie(){return b6.apply(null,arguments).exponent(.5)}function sO(e){return Math.sign(e)*e*e}function Zie(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function AM(){var e=h6(),t=[0,1],r=!1,n;function s(i){var o=Zie(e(i));return isNaN(o)?n:r?Math.round(o):o}return s.invert=function(i){return e.invert(sO(i))},s.domain=function(i){return arguments.length?(e.domain(i),s):e.domain()},s.range=function(i){return arguments.length?(e.range((t=Array.from(i,uw)).map(sO)),s):t.slice()},s.rangeRound=function(i){return s.range(i).round(!0)},s.round=function(i){return arguments.length?(r=!!i,s):r},s.clamp=function(i){return arguments.length?(e.clamp(i),s):e.clamp()},s.unknown=function(i){return arguments.length?(n=i,s):n},s.copy=function(){return AM(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Nc.apply(s,arguments),k0(s)}function CM(){var e=[],t=[],r=[],n;function s(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=aie(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[tb(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(i0),s()},i.range=function(o){return arguments.length?(t=Array.from(o),s()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return CM().domain(e).range(t).unknown(n)},Nc.apply(i,arguments)}function EM(){var e=0,t=1,r=1,n=[.5],s=[0,1],i;function o(c){return c!=null&&c<=c?s[tb(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(s=Array.from(c)).length-1,l()):s.slice()},o.invertExtent=function(c){var d=s.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,n[0]]:d>=r?[n[r-1],t]:[n[d-1],n[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return EM().domain([e,t]).range(s).unknown(i)},Nc.apply(k0(o),arguments)}function TM(){var e=[.5],t=[0,1],r,n=1;function s(i){return i!=null&&i<=i?t[tb(e,i,0,n)]:r}return s.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},s.unknown=function(i){return arguments.length?(r=i,s):r},s.copy=function(){return TM().domain(e).range(t).unknown(r)},Nc.apply(s,arguments)}const Fj=new Date,Mj=new Date;function si(e,t,r,n){function s(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return s.floor=i=>(e(i=new Date(+i)),i),s.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),s.round=i=>{const o=s(i),l=s.ceil(i);return i-o<l-i?o:l},s.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),s.range=(i,o,l)=>{const c=[];if(i=s.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},s.filter=i=>si(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(s.count=(i,o)=>(Fj.setTime(+i),Mj.setTime(+o),e(Fj),e(Mj),Math.floor(r(Fj,Mj))),s.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?s.filter(n?o=>n(o)%i===0:o=>s.count(0,o)%i===0):s)),s}const mw=si(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);mw.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?si(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):mw);mw.range;const wu=1e3,uc=wu*60,Nu=uc*60,zu=Nu*24,y6=zu*7,iO=zu*30,Rj=zu*365,ph=si(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*wu)},(e,t)=>(t-e)/wu,e=>e.getUTCSeconds());ph.range;const w6=si(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wu)},(e,t)=>{e.setTime(+e+t*uc)},(e,t)=>(t-e)/uc,e=>e.getMinutes());w6.range;const N6=si(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*uc)},(e,t)=>(t-e)/uc,e=>e.getUTCMinutes());N6.range;const j6=si(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wu-e.getMinutes()*uc)},(e,t)=>{e.setTime(+e+t*Nu)},(e,t)=>(t-e)/Nu,e=>e.getHours());j6.range;const k6=si(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Nu)},(e,t)=>(t-e)/Nu,e=>e.getUTCHours());k6.range;const ab=si(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*uc)/zu,e=>e.getDate()-1);ab.range;const rN=si(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zu,e=>e.getUTCDate()-1);rN.range;const OM=si(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/zu,e=>Math.floor(e/zu));OM.range;function lp(e){return si(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*uc)/y6)}const nN=lp(0),xw=lp(1),eoe=lp(2),toe=lp(3),lx=lp(4),roe=lp(5),noe=lp(6);nN.range;xw.range;eoe.range;toe.range;lx.range;roe.range;noe.range;function cp(e){return si(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/y6)}const aN=cp(0),gw=cp(1),aoe=cp(2),soe=cp(3),cx=cp(4),ioe=cp(5),ooe=cp(6);aN.range;gw.range;aoe.range;soe.range;cx.range;ioe.range;ooe.range;const S6=si(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());S6.range;const _6=si(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_6.range;const qu=si(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());qu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:si(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});qu.range;const Hu=si(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Hu.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:si(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Hu.range;function PM(e,t,r,n,s,i){const o=[[ph,1,wu],[ph,5,5*wu],[ph,15,15*wu],[ph,30,30*wu],[i,1,uc],[i,5,5*uc],[i,15,15*uc],[i,30,30*uc],[s,1,Nu],[s,3,3*Nu],[s,6,6*Nu],[s,12,12*Nu],[n,1,zu],[n,2,2*zu],[r,1,y6],[t,1,iO],[t,3,3*iO],[e,1,Rj]];function l(d,f,u){const p=f<d;p&&([d,f]=[f,d]);const h=u&&typeof u.range=="function"?u:c(d,f,u),m=h?h.range(d,+f+1):[];return p?m.reverse():m}function c(d,f,u){const p=Math.abs(f-d)/u,h=l6(([,,x])=>x).right(o,p);if(h===o.length)return e.every(n3(d/Rj,f/Rj,u));if(h===0)return mw.every(Math.max(n3(d,f,u),1));const[m,g]=o[p/o[h-1][2]<o[h][2]/p?h-1:h];return m.every(g)}return[l,c]}const[loe,coe]=PM(Hu,_6,aN,OM,k6,N6),[doe,uoe]=PM(qu,S6,nN,ab,j6,w6);function Bj(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $j(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ag(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function foe(e){var t=e.dateTime,r=e.date,n=e.time,s=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=Cg(s),f=Eg(s),u=Cg(i),p=Eg(i),h=Cg(o),m=Eg(o),g=Cg(l),x=Eg(l),v=Cg(c),b=Eg(c),w={a:V,A:J,b:U,B:X,c:null,d:fO,e:fO,f:Loe,g:Woe,G:Goe,H:Poe,I:Ioe,j:Doe,L:IM,m:Foe,M:Moe,p:W,q:E,Q:mO,s:xO,S:Roe,u:Boe,U:$oe,V:Uoe,w:zoe,W:qoe,x:null,X:null,y:Hoe,Y:Voe,Z:Koe,"%":pO},y={a:R,A:q,b:L,B:H,c:null,d:hO,e:hO,f:Joe,g:lle,G:dle,H:Xoe,I:Yoe,j:Qoe,L:LM,m:Zoe,M:ele,p:se,q:ce,Q:mO,s:xO,S:tle,u:rle,U:nle,V:ale,w:sle,W:ile,x:null,X:null,y:ole,Y:cle,Z:ule,"%":pO},N={a:D,A,b:C,B:M,c:F,d:dO,e:dO,f:Coe,g:cO,G:lO,H:uO,I:uO,j:koe,L:Aoe,m:joe,M:Soe,p:T,q:Noe,Q:Toe,s:Ooe,S:_oe,u:goe,U:voe,V:boe,w:xoe,W:yoe,x:B,X:Y,y:cO,Y:lO,Z:woe,"%":Eoe};w.x=S(r,w),w.X=S(n,w),w.c=S(t,w),y.x=S(r,y),y.X=S(n,y),y.c=S(t,y);function S(ae,Z){return function(ve){var ne=[],He=-1,Xe=0,ie=ae.length,Q,Ne,de;for(ve instanceof Date||(ve=new Date(+ve));++He<ie;)ae.charCodeAt(He)===37&&(ne.push(ae.slice(Xe,He)),(Ne=oO[Q=ae.charAt(++He)])!=null?Q=ae.charAt(++He):Ne=Q==="e"?" ":"0",(de=Z[Q])&&(Q=de(ve,Ne)),ne.push(Q),Xe=He+1);return ne.push(ae.slice(Xe,He)),ne.join("")}}function j(ae,Z){return function(ve){var ne=Ag(1900,void 0,1),He=_(ne,ae,ve+="",0),Xe,ie;if(He!=ve.length)return null;if("Q"in ne)return new Date(ne.Q);if("s"in ne)return new Date(ne.s*1e3+("L"in ne?ne.L:0));if(Z&&!("Z"in ne)&&(ne.Z=0),"p"in ne&&(ne.H=ne.H%12+ne.p*12),ne.m===void 0&&(ne.m="q"in ne?ne.q:0),"V"in ne){if(ne.V<1||ne.V>53)return null;"w"in ne||(ne.w=1),"Z"in ne?(Xe=$j(Ag(ne.y,0,1)),ie=Xe.getUTCDay(),Xe=ie>4||ie===0?gw.ceil(Xe):gw(Xe),Xe=rN.offset(Xe,(ne.V-1)*7),ne.y=Xe.getUTCFullYear(),ne.m=Xe.getUTCMonth(),ne.d=Xe.getUTCDate()+(ne.w+6)%7):(Xe=Bj(Ag(ne.y,0,1)),ie=Xe.getDay(),Xe=ie>4||ie===0?xw.ceil(Xe):xw(Xe),Xe=ab.offset(Xe,(ne.V-1)*7),ne.y=Xe.getFullYear(),ne.m=Xe.getMonth(),ne.d=Xe.getDate()+(ne.w+6)%7)}else("W"in ne||"U"in ne)&&("w"in ne||(ne.w="u"in ne?ne.u%7:"W"in ne?1:0),ie="Z"in ne?$j(Ag(ne.y,0,1)).getUTCDay():Bj(Ag(ne.y,0,1)).getDay(),ne.m=0,ne.d="W"in ne?(ne.w+6)%7+ne.W*7-(ie+5)%7:ne.w+ne.U*7-(ie+6)%7);return"Z"in ne?(ne.H+=ne.Z/100|0,ne.M+=ne.Z%100,$j(ne)):Bj(ne)}}function _(ae,Z,ve,ne){for(var He=0,Xe=Z.length,ie=ve.length,Q,Ne;He<Xe;){if(ne>=ie)return-1;if(Q=Z.charCodeAt(He++),Q===37){if(Q=Z.charAt(He++),Ne=N[Q in oO?Z.charAt(He++):Q],!Ne||(ne=Ne(ae,ve,ne))<0)return-1}else if(Q!=ve.charCodeAt(ne++))return-1}return ne}function T(ae,Z,ve){var ne=d.exec(Z.slice(ve));return ne?(ae.p=f.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function D(ae,Z,ve){var ne=h.exec(Z.slice(ve));return ne?(ae.w=m.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function A(ae,Z,ve){var ne=u.exec(Z.slice(ve));return ne?(ae.w=p.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function C(ae,Z,ve){var ne=v.exec(Z.slice(ve));return ne?(ae.m=b.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function M(ae,Z,ve){var ne=g.exec(Z.slice(ve));return ne?(ae.m=x.get(ne[0].toLowerCase()),ve+ne[0].length):-1}function F(ae,Z,ve){return _(ae,t,Z,ve)}function B(ae,Z,ve){return _(ae,r,Z,ve)}function Y(ae,Z,ve){return _(ae,n,Z,ve)}function V(ae){return o[ae.getDay()]}function J(ae){return i[ae.getDay()]}function U(ae){return c[ae.getMonth()]}function X(ae){return l[ae.getMonth()]}function W(ae){return s[+(ae.getHours()>=12)]}function E(ae){return 1+~~(ae.getMonth()/3)}function R(ae){return o[ae.getUTCDay()]}function q(ae){return i[ae.getUTCDay()]}function L(ae){return c[ae.getUTCMonth()]}function H(ae){return l[ae.getUTCMonth()]}function se(ae){return s[+(ae.getUTCHours()>=12)]}function ce(ae){return 1+~~(ae.getUTCMonth()/3)}return{format:function(ae){var Z=S(ae+="",w);return Z.toString=function(){return ae},Z},parse:function(ae){var Z=j(ae+="",!1);return Z.toString=function(){return ae},Z},utcFormat:function(ae){var Z=S(ae+="",y);return Z.toString=function(){return ae},Z},utcParse:function(ae){var Z=j(ae+="",!0);return Z.toString=function(){return ae},Z}}}var oO={"-":"",_:" ",0:"0"},ki=/^\s*\d+/,hoe=/^%/,poe=/[\\^$*+?|[\]().{}]/g;function Hn(e,t,r){var n=e<0?"-":"",s=(n?-e:e)+"",i=s.length;return n+(i<r?new Array(r-i+1).join(t)+s:s)}function moe(e){return e.replace(poe,"\\$&")}function Cg(e){return new RegExp("^(?:"+e.map(moe).join("|")+")","i")}function Eg(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function xoe(e,t,r){var n=ki.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function goe(e,t,r){var n=ki.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function voe(e,t,r){var n=ki.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function boe(e,t,r){var n=ki.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function yoe(e,t,r){var n=ki.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function lO(e,t,r){var n=ki.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function cO(e,t,r){var n=ki.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function woe(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function Noe(e,t,r){var n=ki.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function joe(e,t,r){var n=ki.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function dO(e,t,r){var n=ki.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function koe(e,t,r){var n=ki.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function uO(e,t,r){var n=ki.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function Soe(e,t,r){var n=ki.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function _oe(e,t,r){var n=ki.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function Aoe(e,t,r){var n=ki.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function Coe(e,t,r){var n=ki.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function Eoe(e,t,r){var n=hoe.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function Toe(e,t,r){var n=ki.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function Ooe(e,t,r){var n=ki.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function fO(e,t){return Hn(e.getDate(),t,2)}function Poe(e,t){return Hn(e.getHours(),t,2)}function Ioe(e,t){return Hn(e.getHours()%12||12,t,2)}function Doe(e,t){return Hn(1+ab.count(qu(e),e),t,3)}function IM(e,t){return Hn(e.getMilliseconds(),t,3)}function Loe(e,t){return IM(e,t)+"000"}function Foe(e,t){return Hn(e.getMonth()+1,t,2)}function Moe(e,t){return Hn(e.getMinutes(),t,2)}function Roe(e,t){return Hn(e.getSeconds(),t,2)}function Boe(e){var t=e.getDay();return t===0?7:t}function $oe(e,t){return Hn(nN.count(qu(e)-1,e),t,2)}function DM(e){var t=e.getDay();return t>=4||t===0?lx(e):lx.ceil(e)}function Uoe(e,t){return e=DM(e),Hn(lx.count(qu(e),e)+(qu(e).getDay()===4),t,2)}function zoe(e){return e.getDay()}function qoe(e,t){return Hn(xw.count(qu(e)-1,e),t,2)}function Hoe(e,t){return Hn(e.getFullYear()%100,t,2)}function Woe(e,t){return e=DM(e),Hn(e.getFullYear()%100,t,2)}function Voe(e,t){return Hn(e.getFullYear()%1e4,t,4)}function Goe(e,t){var r=e.getDay();return e=r>=4||r===0?lx(e):lx.ceil(e),Hn(e.getFullYear()%1e4,t,4)}function Koe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Hn(t/60|0,"0",2)+Hn(t%60,"0",2)}function hO(e,t){return Hn(e.getUTCDate(),t,2)}function Xoe(e,t){return Hn(e.getUTCHours(),t,2)}function Yoe(e,t){return Hn(e.getUTCHours()%12||12,t,2)}function Qoe(e,t){return Hn(1+rN.count(Hu(e),e),t,3)}function LM(e,t){return Hn(e.getUTCMilliseconds(),t,3)}function Joe(e,t){return LM(e,t)+"000"}function Zoe(e,t){return Hn(e.getUTCMonth()+1,t,2)}function ele(e,t){return Hn(e.getUTCMinutes(),t,2)}function tle(e,t){return Hn(e.getUTCSeconds(),t,2)}function rle(e){var t=e.getUTCDay();return t===0?7:t}function nle(e,t){return Hn(aN.count(Hu(e)-1,e),t,2)}function FM(e){var t=e.getUTCDay();return t>=4||t===0?cx(e):cx.ceil(e)}function ale(e,t){return e=FM(e),Hn(cx.count(Hu(e),e)+(Hu(e).getUTCDay()===4),t,2)}function sle(e){return e.getUTCDay()}function ile(e,t){return Hn(gw.count(Hu(e)-1,e),t,2)}function ole(e,t){return Hn(e.getUTCFullYear()%100,t,2)}function lle(e,t){return e=FM(e),Hn(e.getUTCFullYear()%100,t,2)}function cle(e,t){return Hn(e.getUTCFullYear()%1e4,t,4)}function dle(e,t){var r=e.getUTCDay();return e=r>=4||r===0?cx(e):cx.ceil(e),Hn(e.getUTCFullYear()%1e4,t,4)}function ule(){return"+0000"}function pO(){return"%"}function mO(e){return+e}function xO(e){return Math.floor(+e/1e3)}var Wp,MM,RM;fle({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fle(e){return Wp=foe(e),MM=Wp.format,Wp.parse,RM=Wp.utcFormat,Wp.utcParse,Wp}function hle(e){return new Date(e)}function ple(e){return e instanceof Date?+e:+new Date(+e)}function A6(e,t,r,n,s,i,o,l,c,d){var f=h6(),u=f.invert,p=f.domain,h=d(".%L"),m=d(":%S"),g=d("%I:%M"),x=d("%I %p"),v=d("%a %d"),b=d("%b %d"),w=d("%B"),y=d("%Y");function N(S){return(c(S)<S?h:l(S)<S?m:o(S)<S?g:i(S)<S?x:n(S)<S?s(S)<S?v:b:r(S)<S?w:y)(S)}return f.invert=function(S){return new Date(u(S))},f.domain=function(S){return arguments.length?p(Array.from(S,ple)):p().map(hle)},f.ticks=function(S){var j=p();return e(j[0],j[j.length-1],S??10)},f.tickFormat=function(S,j){return j==null?N:d(j)},f.nice=function(S){var j=p();return(!S||typeof S.range!="function")&&(S=t(j[0],j[j.length-1],S??10)),S?p(kM(j,S)):f},f.copy=function(){return nb(f,A6(e,t,r,n,s,i,o,l,c,d))},f}function mle(){return Nc.apply(A6(doe,uoe,qu,S6,nN,ab,j6,w6,ph,MM).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function xle(){return Nc.apply(A6(loe,coe,Hu,_6,aN,rN,k6,N6,ph,RM).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function sN(){var e=0,t=1,r,n,s,i,o=Ao,l=!1,c;function d(u){return u==null||isNaN(u=+u)?c:o(s===0?.5:(u=(i(u)-r)*s,l?Math.max(0,Math.min(1,u)):u))}d.domain=function(u){return arguments.length?([e,t]=u,r=i(e=+e),n=i(t=+t),s=r===n?0:1/(n-r),d):[e,t]},d.clamp=function(u){return arguments.length?(l=!!u,d):l},d.interpolator=function(u){return arguments.length?(o=u,d):o};function f(u){return function(p){var h,m;return arguments.length?([h,m]=p,o=u(h,m),d):[o(0),o(1)]}}return d.range=f(zx),d.rangeRound=f(f6),d.unknown=function(u){return arguments.length?(c=u,d):c},function(u){return i=u,r=u(e),n=u(t),s=r===n?0:1/(n-r),d}}function S0(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function BM(){var e=k0(sN()(Ao));return e.copy=function(){return S0(e,BM())},Yu.apply(e,arguments)}function $M(){var e=x6(sN()).domain([1,10]);return e.copy=function(){return S0(e,$M()).base(e.base())},Yu.apply(e,arguments)}function UM(){var e=g6(sN());return e.copy=function(){return S0(e,UM()).constant(e.constant())},Yu.apply(e,arguments)}function C6(){var e=v6(sN());return e.copy=function(){return S0(e,C6()).exponent(e.exponent())},Yu.apply(e,arguments)}function gle(){return C6.apply(null,arguments).exponent(.5)}function zM(){var e=[],t=Ao;function r(n){if(n!=null&&!isNaN(n=+n))return t((tb(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let s of n)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(i0),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,s)=>t(s/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(s,i)=>nie(e,i/n))},r.copy=function(){return zM(t).domain(e)},Yu.apply(r,arguments)}function iN(){var e=0,t=.5,r=1,n=1,s,i,o,l,c,d=Ao,f,u=!1,p;function h(g){return isNaN(g=+g)?p:(g=.5+((g=+f(g))-i)*(n*g<n*i?l:c),d(u?Math.max(0,Math.min(1,g)):g))}h.domain=function(g){return arguments.length?([e,t,r]=g,s=f(e=+e),i=f(t=+t),o=f(r=+r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h):[e,t,r]},h.clamp=function(g){return arguments.length?(u=!!g,h):u},h.interpolator=function(g){return arguments.length?(d=g,h):d};function m(g){return function(x){var v,b,w;return arguments.length?([v,b,w]=x,d=Eie(g,[v,b,w]),h):[d(0),d(.5),d(1)]}}return h.range=m(zx),h.rangeRound=m(f6),h.unknown=function(g){return arguments.length?(p=g,h):p},function(g){return f=g,s=g(e),i=g(t),o=g(r),l=s===i?0:.5/(i-s),c=i===o?0:.5/(o-i),n=i<s?-1:1,h}}function qM(){var e=k0(iN()(Ao));return e.copy=function(){return S0(e,qM())},Yu.apply(e,arguments)}function HM(){var e=x6(iN()).domain([.1,1,10]);return e.copy=function(){return S0(e,HM()).base(e.base())},Yu.apply(e,arguments)}function WM(){var e=g6(iN());return e.copy=function(){return S0(e,WM()).constant(e.constant())},Yu.apply(e,arguments)}function E6(){var e=v6(iN());return e.copy=function(){return S0(e,E6()).exponent(e.exponent())},Yu.apply(e,arguments)}function vle(){return E6.apply(null,arguments).exponent(.5)}const gO=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Yv,scaleDiverging:qM,scaleDivergingLog:HM,scaleDivergingPow:E6,scaleDivergingSqrt:vle,scaleDivergingSymlog:WM,scaleIdentity:jM,scaleImplicit:a3,scaleLinear:pw,scaleLog:SM,scaleOrdinal:c6,scalePoint:fv,scalePow:b6,scaleQuantile:CM,scaleQuantize:EM,scaleRadial:AM,scaleSequential:BM,scaleSequentialLog:$M,scaleSequentialPow:C6,scaleSequentialQuantile:zM,scaleSequentialSqrt:gle,scaleSequentialSymlog:UM,scaleSqrt:Jie,scaleSymlog:_M,scaleThreshold:TM,scaleTime:mle,scaleUtc:xle,tickFormat:NM},Symbol.toStringTag,{value:"Module"}));var ble=Px;function yle(e,t,r){for(var n=-1,s=e.length;++n<s;){var i=e[n],o=t(i);if(o!=null&&(l===void 0?o===o&&!ble(o):r(o,l)))var l=o,c=i}return c}var VM=yle;function wle(e,t){return e>t}var Nle=wle,jle=VM,kle=Nle,Sle=$x;function _le(e){return e&&e.length?jle(e,Sle,kle):void 0}var Ale=_le;const Hf=fa(Ale);function Cle(e,t){return e<t}var Ele=Cle,Tle=VM,Ole=Ele,Ple=$x;function Ile(e){return e&&e.length?Tle(e,Ple,Ole):void 0}var Dle=Ile;const oN=fa(Dle);var Lle=q_,Fle=j0,Mle=tM,Rle=ll;function Ble(e,t){var r=Rle(e)?Lle:Mle;return r(e,Fle(t))}var $le=Ble,Ule=Z7,zle=$le;function qle(e,t){return Ule(zle(e,t),1)}var Hle=qle;const Wle=fa(Hle);var Vle=a6;function Gle(e,t){return Vle(e,t)}var GM=Gle;const t1=fa(GM);var qx=1e9,Kle={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},O6,qa=!0,vc="[DecimalError] ",Ih=vc+"Invalid argument: ",T6=vc+"Exponent out of range: ",Hx=Math.floor,sh=Math.pow,Xle=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,El,mi=1e7,Ta=7,KM=9007199254740991,vw=Hx(KM/Ta),xr={};xr.absoluteValue=xr.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};xr.comparedTo=xr.cmp=function(e){var t,r,n,s,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,s=e.d.length,t=0,r=n<s?n:s;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===s?0:n>s^i.s<0?1:-1};xr.decimalPlaces=xr.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ta;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};xr.dividedBy=xr.div=function(e){return Pu(this,new this.constructor(e))};xr.dividedToIntegerBy=xr.idiv=function(e){var t=this,r=t.constructor;return pa(Pu(t,new r(e),0,1),r.precision)};xr.equals=xr.eq=function(e){return!this.cmp(e)};xr.exponent=function(){return Ws(this)};xr.greaterThan=xr.gt=function(e){return this.cmp(e)>0};xr.greaterThanOrEqualTo=xr.gte=function(e){return this.cmp(e)>=0};xr.isInteger=xr.isint=function(){return this.e>this.d.length-2};xr.isNegative=xr.isneg=function(){return this.s<0};xr.isPositive=xr.ispos=function(){return this.s>0};xr.isZero=function(){return this.s===0};xr.lessThan=xr.lt=function(e){return this.cmp(e)<0};xr.lessThanOrEqualTo=xr.lte=function(e){return this.cmp(e)<1};xr.logarithm=xr.log=function(e){var t,r=this,n=r.constructor,s=n.precision,i=s+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(El))throw Error(vc+"NaN");if(r.s<1)throw Error(vc+(r.s?"NaN":"-Infinity"));return r.eq(El)?new n(0):(qa=!1,t=Pu(r1(r,i),r1(e,i),i),qa=!0,pa(t,s))};xr.minus=xr.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QM(t,e):XM(t,(e.s=-e.s,e))};xr.modulo=xr.mod=function(e){var t,r=this,n=r.constructor,s=n.precision;if(e=new n(e),!e.s)throw Error(vc+"NaN");return r.s?(qa=!1,t=Pu(r,e,0,1).times(e),qa=!0,r.minus(t)):pa(new n(r),s)};xr.naturalExponential=xr.exp=function(){return YM(this)};xr.naturalLogarithm=xr.ln=function(){return r1(this)};xr.negated=xr.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};xr.plus=xr.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?XM(t,e):QM(t,(e.s=-e.s,e))};xr.precision=xr.sd=function(e){var t,r,n,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Ih+e);if(t=Ws(s)+1,n=s.d.length-1,r=n*Ta+1,n=s.d[n],n){for(;n%10==0;n/=10)r--;for(n=s.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};xr.squareRoot=xr.sqrt=function(){var e,t,r,n,s,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(vc+"NaN")}for(e=Ws(l),qa=!1,s=Math.sqrt(+l),s==0||s==1/0?(t=Rd(l.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=Hx((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(s.toString()),r=c.precision,s=o=r+3;;)if(i=n,n=i.plus(Pu(l,i,o+2)).times(.5),Rd(i.d).slice(0,o)===(t=Rd(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),s==o&&t=="4999"){if(pa(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return qa=!0,pa(n,r)};xr.times=xr.mul=function(e){var t,r,n,s,i,o,l,c,d,f=this,u=f.constructor,p=f.d,h=(e=new u(e)).d;if(!f.s||!e.s)return new u(0);for(e.s*=f.s,r=f.e+e.e,c=p.length,d=h.length,c<d&&(i=p,p=h,h=i,o=c,c=d,d=o),i=[],o=c+d,n=o;n--;)i.push(0);for(n=d;--n>=0;){for(t=0,s=c+n;s>n;)l=i[s]+h[n]*p[s-n-1]+t,i[s--]=l%mi|0,t=l/mi|0;i[s]=(i[s]+t)%mi|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,qa?pa(e,u.precision):e};xr.toDecimalPlaces=xr.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Qd(e,0,qx),t===void 0?t=n.rounding:Qd(t,0,8),pa(r,e+Ws(r)+1,t))};xr.toExponential=function(e,t){var r,n=this,s=n.constructor;return e===void 0?r=Gh(n,!0):(Qd(e,0,qx),t===void 0?t=s.rounding:Qd(t,0,8),n=pa(new s(n),e+1,t),r=Gh(n,!0,e+1)),r};xr.toFixed=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?Gh(s):(Qd(e,0,qx),t===void 0?t=i.rounding:Qd(t,0,8),n=pa(new i(s),e+Ws(s)+1,t),r=Gh(n.abs(),!1,e+Ws(n)+1),s.isneg()&&!s.isZero()?"-"+r:r)};xr.toInteger=xr.toint=function(){var e=this,t=e.constructor;return pa(new t(e),Ws(e)+1,t.rounding)};xr.toNumber=function(){return+this};xr.toPower=xr.pow=function(e){var t,r,n,s,i,o,l=this,c=l.constructor,d=12,f=+(e=new c(e));if(!e.s)return new c(El);if(l=new c(l),!l.s){if(e.s<1)throw Error(vc+"Infinity");return l}if(l.eq(El))return l;if(n=c.precision,e.eq(El))return pa(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=f<0?-f:f)<=KM){for(s=new c(El),t=Math.ceil(n/Ta+4),qa=!1;r%2&&(s=s.times(l),bO(s.d,t)),r=Hx(r/2),r!==0;)l=l.times(l),bO(l.d,t);return qa=!0,e.s<0?new c(El).div(s):pa(s,n)}}else if(i<0)throw Error(vc+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,qa=!1,s=e.times(r1(l,n+d)),qa=!0,s=YM(s),s.s=i,s};xr.toPrecision=function(e,t){var r,n,s=this,i=s.constructor;return e===void 0?(r=Ws(s),n=Gh(s,r<=i.toExpNeg||r>=i.toExpPos)):(Qd(e,1,qx),t===void 0?t=i.rounding:Qd(t,0,8),s=pa(new i(s),e,t),r=Ws(s),n=Gh(s,e<=r||r<=i.toExpNeg,e)),n};xr.toSignificantDigits=xr.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Qd(e,1,qx),t===void 0?t=n.rounding:Qd(t,0,8)),pa(new n(r),e,t)};xr.toString=xr.valueOf=xr.val=xr.toJSON=xr[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ws(e),r=e.constructor;return Gh(e,t<=r.toExpNeg||t>=r.toExpPos)};function XM(e,t){var r,n,s,i,o,l,c,d,f=e.constructor,u=f.precision;if(!e.s||!t.s)return t.s||(t=new f(e)),qa?pa(t,u):t;if(c=e.d,d=t.d,o=e.e,s=t.e,c=c.slice(),i=o-s,i){for(i<0?(n=c,i=-i,l=d.length):(n=d,s=o,l=c.length),o=Math.ceil(u/Ta),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,n=d,d=c,c=n),r=0;i;)r=(c[--i]=c[i]+d[i]+r)/mi|0,c[i]%=mi;for(r&&(c.unshift(r),++s),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=s,qa?pa(t,u):t}function Qd(e,t,r){if(e!==~~e||e<t||e>r)throw Error(Ih+e)}function Rd(e){var t,r,n,s=e.length-1,i="",o=e[0];if(s>0){for(i+=o,t=1;t<s;t++)n=e[t]+"",r=Ta-n.length,r&&(i+=Af(r)),i+=n;o=e[t],n=o+"",r=Ta-n.length,r&&(i+=Af(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var Pu=function(){function e(n,s){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*s+o,n[l]=i%mi|0,o=i/mi|0;return o&&n.unshift(o),n}function t(n,s,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=s[l]){c=n[l]>s[l]?1:-1;break}return c}function r(n,s,i){for(var o=0;i--;)n[i]-=o,o=n[i]<s[i]?1:0,n[i]=o*mi+n[i]-s[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,s,i,o){var l,c,d,f,u,p,h,m,g,x,v,b,w,y,N,S,j,_,T=n.constructor,D=n.s==s.s?1:-1,A=n.d,C=s.d;if(!n.s)return new T(n);if(!s.s)throw Error(vc+"Division by zero");for(c=n.e-s.e,j=C.length,N=A.length,h=new T(D),m=h.d=[],d=0;C[d]==(A[d]||0);)++d;if(C[d]>(A[d]||0)&&--c,i==null?b=i=T.precision:o?b=i+(Ws(n)-Ws(s))+1:b=i,b<0)return new T(0);if(b=b/Ta+2|0,d=0,j==1)for(f=0,C=C[0],b++;(d<N||f)&&b--;d++)w=f*mi+(A[d]||0),m[d]=w/C|0,f=w%C|0;else{for(f=mi/(C[0]+1)|0,f>1&&(C=e(C,f),A=e(A,f),j=C.length,N=A.length),y=j,g=A.slice(0,j),x=g.length;x<j;)g[x++]=0;_=C.slice(),_.unshift(0),S=C[0],C[1]>=mi/2&&++S;do f=0,l=t(C,g,j,x),l<0?(v=g[0],j!=x&&(v=v*mi+(g[1]||0)),f=v/S|0,f>1?(f>=mi&&(f=mi-1),u=e(C,f),p=u.length,x=g.length,l=t(u,g,p,x),l==1&&(f--,r(u,j<p?_:C,p))):(f==0&&(l=f=1),u=C.slice()),p=u.length,p<x&&u.unshift(0),r(g,u,x),l==-1&&(x=g.length,l=t(C,g,j,x),l<1&&(f++,r(g,j<x?_:C,x))),x=g.length):l===0&&(f++,g=[0]),m[d++]=f,l&&g[0]?g[x++]=A[y]||0:(g=[A[y]],x=1);while((y++<N||g[0]!==void 0)&&b--)}return m[0]||m.shift(),h.e=c,pa(h,o?i+Ws(h)+1:i)}}();function YM(e,t){var r,n,s,i,o,l,c=0,d=0,f=e.constructor,u=f.precision;if(Ws(e)>16)throw Error(T6+Ws(e));if(!e.s)return new f(El);for(qa=!1,l=u,o=new f(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(n=Math.log(sh(2,d))/Math.LN10*2+5|0,l+=n,r=s=i=new f(El),f.precision=l;;){if(s=pa(s.times(e),l),r=r.times(++c),o=i.plus(Pu(s,r,l)),Rd(o.d).slice(0,l)===Rd(i.d).slice(0,l)){for(;d--;)i=pa(i.times(i),l);return f.precision=u,t==null?(qa=!0,pa(i,u)):i}i=o}}function Ws(e){for(var t=e.e*Ta,r=e.d[0];r>=10;r/=10)t++;return t}function Uj(e,t,r){if(t>e.LN10.sd())throw qa=!0,r&&(e.precision=r),Error(vc+"LN10 precision limit exceeded");return pa(new e(e.LN10),t)}function Af(e){for(var t="";e--;)t+="0";return t}function r1(e,t){var r,n,s,i,o,l,c,d,f,u=1,p=10,h=e,m=h.d,g=h.constructor,x=g.precision;if(h.s<1)throw Error(vc+(h.s?"NaN":"-Infinity"));if(h.eq(El))return new g(0);if(t==null?(qa=!1,d=x):d=t,h.eq(10))return t==null&&(qa=!0),Uj(g,d);if(d+=p,g.precision=d,r=Rd(m),n=r.charAt(0),i=Ws(h),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)h=h.times(e),r=Rd(h.d),n=r.charAt(0),u++;i=Ws(h),n>1?(h=new g("0."+r),i++):h=new g(n+"."+r.slice(1))}else return c=Uj(g,d+2,x).times(i+""),h=r1(new g(n+"."+r.slice(1)),d-p).plus(c),g.precision=x,t==null?(qa=!0,pa(h,x)):h;for(l=o=h=Pu(h.minus(El),h.plus(El),d),f=pa(h.times(h),d),s=3;;){if(o=pa(o.times(f),d),c=l.plus(Pu(o,new g(s),d)),Rd(c.d).slice(0,d)===Rd(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(Uj(g,d+2,x).times(i+""))),l=Pu(l,new g(u),d),g.precision=x,t==null?(qa=!0,pa(l,x)):l;l=c,s+=2}}function vO(e,t){var r,n,s;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(n,s),t){if(s-=n,r=r-n-1,e.e=Hx(r/Ta),e.d=[],n=(r+1)%Ta,r<0&&(n+=Ta),n<s){for(n&&e.d.push(+t.slice(0,n)),s-=Ta;n<s;)e.d.push(+t.slice(n,n+=Ta));t=t.slice(n),n=Ta-t.length}else n-=s;for(;n--;)t+="0";if(e.d.push(+t),qa&&(e.e>vw||e.e<-vw))throw Error(T6+r)}else e.s=0,e.e=0,e.d=[0];return e}function pa(e,t,r){var n,s,i,o,l,c,d,f,u=e.d;for(o=1,i=u[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ta,s=t,d=u[f=0];else{if(f=Math.ceil((n+1)/Ta),i=u.length,f>=i)return e;for(d=i=u[f],o=1;i>=10;i/=10)o++;n%=Ta,s=n-Ta+o}if(r!==void 0&&(i=sh(10,o-s-1),l=d/i%10|0,c=t<0||u[f+1]!==void 0||d%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?s>0?d/sh(10,o-s):0:u[f-1])%10&1||r==(e.s<0?8:7))),t<1||!u[0])return c?(i=Ws(e),u.length=1,t=t-i-1,u[0]=sh(10,(Ta-t%Ta)%Ta),e.e=Hx(-t/Ta)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(n==0?(u.length=f,i=1,f--):(u.length=f+1,i=sh(10,Ta-n),u[f]=s>0?(d/sh(10,o-s)%sh(10,s)|0)*i:0),c)for(;;)if(f==0){(u[0]+=i)==mi&&(u[0]=1,++e.e);break}else{if(u[f]+=i,u[f]!=mi)break;u[f--]=0,i=1}for(n=u.length;u[--n]===0;)u.pop();if(qa&&(e.e>vw||e.e<-vw))throw Error(T6+Ws(e));return e}function QM(e,t){var r,n,s,i,o,l,c,d,f,u,p=e.constructor,h=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),qa?pa(t,h):t;if(c=e.d,u=t.d,n=t.e,d=e.e,c=c.slice(),o=d-n,o){for(f=o<0,f?(r=c,o=-o,l=u.length):(r=u,n=d,l=c.length),s=Math.max(Math.ceil(h/Ta),l)+2,o>s&&(o=s,r.length=1),r.reverse(),s=o;s--;)r.push(0);r.reverse()}else{for(s=c.length,l=u.length,f=s<l,f&&(l=s),s=0;s<l;s++)if(c[s]!=u[s]){f=c[s]<u[s];break}o=0}for(f&&(r=c,c=u,u=r,t.s=-t.s),l=c.length,s=u.length-l;s>0;--s)c[l++]=0;for(s=u.length;s>o;){if(c[--s]<u[s]){for(i=s;i&&c[--i]===0;)c[i]=mi-1;--c[i],c[s]+=mi}c[s]-=u[s]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,qa?pa(t,h):t):new p(0)}function Gh(e,t,r){var n,s=Ws(e),i=Rd(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Af(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(s<0?"e":"e+")+s):s<0?(i="0."+Af(-s-1)+i,r&&(n=r-o)>0&&(i+=Af(n))):s>=o?(i+=Af(s+1-o),r&&(n=r-s-1)>0&&(i=i+"."+Af(n))):((n=s+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(s+1===o&&(i+="."),i+=Af(n))),e.s<0?"-"+i:i}function bO(e,t){if(e.length>t)return e.length=t,!0}function JM(e){var t,r,n;function s(i){var o=this;if(!(o instanceof s))return new s(i);if(o.constructor=s,i instanceof s){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(Ih+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return vO(o,i.toString())}else if(typeof i!="string")throw Error(Ih+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Xle.test(i))vO(o,i);else throw Error(Ih+i)}if(s.prototype=xr,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=JM,s.config=s.set=Yle,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return s.config(e),s}function Yle(e){if(!e||typeof e!="object")throw Error(vc+"Object expected");var t,r,n,s=["precision",1,qx,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((n=e[r=s[t]])!==void 0)if(Hx(n)===n&&n>=s[t+1]&&n<=s[t+2])this[r]=n;else throw Error(Ih+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(Ih+r+": "+n);return this}var O6=JM(Kle);El=new O6(1);const da=O6;function Qle(e){return tce(e)||ece(e)||Zle(e)||Jle()}function Jle(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zle(e,t){if(e){if(typeof e=="string")return l3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return l3(e,t)}}function ece(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function tce(e){if(Array.isArray(e))return l3(e)}function l3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var rce=function(t){return t},ZM={},e9=function(t){return t===ZM},yO=function(t){return function r(){return arguments.length===0||arguments.length===1&&e9(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},nce=function e(t,r){return t===1?r:yO(function(){for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];var o=s.filter(function(l){return l!==ZM}).length;return o>=t?r.apply(void 0,s):e(t-o,yO(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var f=s.map(function(u){return e9(u)?c.shift():u});return r.apply(void 0,Qle(f).concat(c))}))})},lN=function(t){return nce(t.length,t)},c3=function(t,r){for(var n=[],s=t;s<r;++s)n[s-t]=s;return n},ace=lN(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),sce=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return rce;var s=r.reverse(),i=s[0],o=s.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},d3=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},t9=function(t){var r=null,n=null;return function(){for(var s=arguments.length,i=new Array(s),o=0;o<s;o++)i[o]=arguments[o];return r&&i.every(function(l,c){return l===r[c]})||(r=i,n=t.apply(void 0,i)),n}};function ice(e){var t;return e===0?t=1:t=Math.floor(new da(e).abs().log(10).toNumber())+1,t}function oce(e,t,r){for(var n=new da(e),s=0,i=[];n.lt(t)&&s<1e5;)i.push(n.toNumber()),n=n.add(r),s++;return i}var lce=lN(function(e,t,r){var n=+e,s=+t;return n+r*(s-n)}),cce=lN(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),dce=lN(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const cN={rangeStep:oce,getDigitCount:ice,interpolateNumber:lce,uninterpolateNumber:cce,uninterpolateTruncation:dce};function u3(e){return hce(e)||fce(e)||r9(e)||uce()}function uce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fce(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function hce(e){if(Array.isArray(e))return f3(e)}function n1(e,t){return xce(e)||mce(e,t)||r9(e,t)||pce()}function pce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r9(e,t){if(e){if(typeof e=="string")return f3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return f3(e,t)}}function f3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mce(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,s=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){s=!0,i=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(s)throw i}}return r}}function xce(e){if(Array.isArray(e))return e}function n9(e){var t=n1(e,2),r=t[0],n=t[1],s=r,i=n;return r>n&&(s=n,i=r),[s,i]}function a9(e,t,r){if(e.lte(0))return new da(0);var n=cN.getDigitCount(e.toNumber()),s=new da(10).pow(n),i=e.div(s),o=n!==1?.05:.1,l=new da(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(s);return t?c:new da(Math.ceil(c))}function gce(e,t,r){var n=1,s=new da(e);if(!s.isint()&&r){var i=Math.abs(e);i<1?(n=new da(10).pow(cN.getDigitCount(e)-1),s=new da(Math.floor(s.div(n).toNumber())).mul(n)):i>1&&(s=new da(Math.floor(e)))}else e===0?s=new da(Math.floor((t-1)/2)):r||(s=new da(Math.floor(e)));var o=Math.floor((t-1)/2),l=sce(ace(function(c){return s.add(new da(c-o).mul(n)).toNumber()}),c3);return l(0,t)}function s9(e,t,r,n){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new da(0),tickMin:new da(0),tickMax:new da(0)};var i=a9(new da(t).sub(e).div(r-1),n,s),o;e<=0&&t>=0?o=new da(0):(o=new da(e).add(t).div(2),o=o.sub(new da(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new da(t).sub(o).div(i).toNumber()),d=l+c+1;return d>r?s9(e,t,r,n,s+1):(d<r&&(c=t>0?c+(r-d):c,l=t>0?l:l+(r-d)),{step:i,tickMin:o.sub(new da(l).mul(i)),tickMax:o.add(new da(c).mul(i))})}function vce(e){var t=n1(e,2),r=t[0],n=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(s,2),l=n9([r,n]),c=n1(l,2),d=c[0],f=c[1];if(d===-1/0||f===1/0){var u=f===1/0?[d].concat(u3(c3(0,s-1).map(function(){return 1/0}))):[].concat(u3(c3(0,s-1).map(function(){return-1/0})),[f]);return r>n?d3(u):u}if(d===f)return gce(d,s,i);var p=s9(d,f,o,i),h=p.step,m=p.tickMin,g=p.tickMax,x=cN.rangeStep(m,g.add(new da(.1).mul(h)),h);return r>n?d3(x):x}function bce(e,t){var r=n1(e,2),n=r[0],s=r[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=n9([n,s]),l=n1(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[n,s];if(c===d)return[c];var f=Math.max(t,2),u=a9(new da(d).sub(c).div(f-1),i,0),p=[].concat(u3(cN.rangeStep(new da(c),new da(d).sub(new da(.99).mul(u)),u)),[d]);return n>s?d3(p):p}var yce=t9(vce),wce=t9(bce),Nce="Invariant failed";function Kh(e,t){throw new Error(Nce)}var jce=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function dx(e){"@babel/helpers - typeof";return dx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dx(e)}function bw(){return bw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bw.apply(this,arguments)}function kce(e,t){return Cce(e)||Ace(e,t)||_ce(e,t)||Sce()}function Sce(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ce(e,t){if(e){if(typeof e=="string")return wO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wO(e,t)}}function wO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ace(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Cce(e){if(Array.isArray(e))return e}function Ece(e,t){if(e==null)return{};var r=Tce(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Tce(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Oce(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pce(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,l9(n.key),n)}}function Ice(e,t,r){return t&&Pce(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Dce(e,t,r){return t=yw(t),Lce(e,i9()?Reflect.construct(t,r||[],yw(e).constructor):t.apply(e,r))}function Lce(e,t){if(t&&(dx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fce(e)}function Fce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i9=function(){return!!e})()}function yw(e){return yw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yw(e)}function Mce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h3(e,t)}function h3(e,t){return h3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},h3(e,t)}function o9(e,t,r){return t=l9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l9(e){var t=Rce(e,"string");return dx(t)=="symbol"?t:t+""}function Rce(e,t){if(dx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(dx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var dN=function(e){function t(){return Oce(this,t),Dce(this,t,arguments)}return Mce(t,e),Ice(t,[{key:"render",value:function(){var n=this.props,s=n.offset,i=n.layout,o=n.width,l=n.dataKey,c=n.data,d=n.dataPointFormatter,f=n.xAxis,u=n.yAxis,p=Ece(n,jce),h=wn(p,!1);this.props.direction==="x"&&f.type!=="number"&&Kh();var m=c.map(function(g){var x=d(g,l),v=x.x,b=x.y,w=x.value,y=x.errorVal;if(!y)return null;var N=[],S,j;if(Array.isArray(y)){var _=kce(y,2);S=_[0],j=_[1]}else S=j=y;if(i==="vertical"){var T=f.scale,D=b+s,A=D+o,C=D-o,M=T(w-S),F=T(w+j);N.push({x1:F,y1:A,x2:F,y2:C}),N.push({x1:M,y1:D,x2:F,y2:D}),N.push({x1:M,y1:A,x2:M,y2:C})}else if(i==="horizontal"){var B=u.scale,Y=v+s,V=Y-o,J=Y+o,U=B(w-S),X=B(w+j);N.push({x1:V,y1:X,x2:J,y2:X}),N.push({x1:Y,y1:U,x2:Y,y2:X}),N.push({x1:V,y1:U,x2:J,y2:U})}return st.createElement(Ya,bw({className:"recharts-errorBar",key:"bar-".concat(N.map(function(W){return"".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))},h),N.map(function(W){return st.createElement("line",bw({},W,{key:"line-".concat(W.x1,"-").concat(W.x2,"-").concat(W.y1,"-").concat(W.y2)}))}))});return st.createElement(Ya,{className:"recharts-errorBars"},m)}}])}(st.Component);o9(dN,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});o9(dN,"displayName","ErrorBar");function a1(e){"@babel/helpers - typeof";return a1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a1(e)}function NO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function J0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NO(Object(r),!0).forEach(function(n){Bce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Bce(e,t,r){return t=$ce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ce(e){var t=Uce(e,"string");return a1(t)=="symbol"?t:t+""}function Uce(e,t){if(a1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(a1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var c9=function(t){var r=t.children,n=t.formattedGraphicalItems,s=t.legendWidth,i=t.legendContent,o=_l(r,_m);if(!o)return null;var l=_m.defaultProps,c=l!==void 0?J0(J0({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(n||[]).reduce(function(f,u){var p=u.item,h=u.props,m=h.sectors||h.data||[];return f.concat(m.map(function(g){return{type:o.props.iconType||p.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):d=(n||[]).map(function(f){var u=f.item,p=u.type.defaultProps,h=p!==void 0?J0(J0({},p),u.props):{},m=h.dataKey,g=h.name,x=h.legendType,v=h.hide;return{inactive:v,dataKey:m,type:c.iconType||x||"square",color:P6(u),value:g||m,payload:h}}),J0(J0(J0({},c),_m.getWithHeight(o,s)),{},{payload:d,item:o})};function s1(e){"@babel/helpers - typeof";return s1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s1(e)}function jO(e){return Wce(e)||Hce(e)||qce(e)||zce()}function zce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qce(e,t){if(e){if(typeof e=="string")return p3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return p3(e,t)}}function Hce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Wce(e){if(Array.isArray(e))return p3(e)}function p3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function us(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kO(Object(r),!0).forEach(function(n){Cm(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cm(e,t,r){return t=Vce(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vce(e){var t=Gce(e,"string");return s1(t)=="symbol"?t:t+""}function Gce(e,t){if(s1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(s1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ml(e,t,r){return Sn(e)||Sn(t)?r:ni(t)?pc(e,t,r):cn(t)?t(e):r}function hv(e,t,r,n){var s=Wle(e,function(l){return Ml(l,t)});if(r==="number"){var i=s.filter(function(l){return Yt(l)||parseFloat(l)});return i.length?[oN(i),Hf(i)]:[1/0,-1/0]}var o=n?s.filter(function(l){return!Sn(l)}):s;return o.map(function(l){return ni(l)||l instanceof Date?l:""})}var Kce=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var f=d>0?s[d-1].coordinate:s[l-1].coordinate,u=s[d].coordinate,p=d>=l-1?s[0].coordinate:s[d+1].coordinate,h=void 0;if(Qc(u-f)!==Qc(p-u)){var m=[];if(Qc(p-u)===Qc(c[1]-c[0])){h=p;var g=u+c[1]-c[0];m[0]=Math.min(g,(g+f)/2),m[1]=Math.max(g,(g+f)/2)}else{h=f;var x=p+c[1]-c[0];m[0]=Math.min(u,(x+u)/2),m[1]=Math.max(u,(x+u)/2)}var v=[Math.min(u,(h+u)/2),Math.max(u,(h+u)/2)];if(t>v[0]&&t<=v[1]||t>=m[0]&&t<=m[1]){o=s[d].index;break}}else{var b=Math.min(f,p),w=Math.max(f,p);if(t>(b+u)/2&&t<=(w+u)/2){o=s[d].index;break}}}else for(var y=0;y<l;y++)if(y===0&&t<=(n[y].coordinate+n[y+1].coordinate)/2||y>0&&y<l-1&&t>(n[y].coordinate+n[y-1].coordinate)/2&&t<=(n[y].coordinate+n[y+1].coordinate)/2||y===l-1&&t>(n[y].coordinate+n[y-1].coordinate)/2){o=n[y].index;break}return o},P6=function(t){var r,n=t,s=n.type.displayName,i=(r=t.type)!==null&&r!==void 0&&r.defaultProps?us(us({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(s){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Xce=function(t){var r=t.barSize,n=t.totalSize,s=t.stackGroups,i=s===void 0?{}:s;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var f=i[l[c]].stackGroups,u=Object.keys(f),p=0,h=u.length;p<h;p++){var m=f[u[p]],g=m.items,x=m.cateAxisId,v=g.filter(function(j){return Tu(j.type).indexOf("Bar")>=0});if(v&&v.length){var b=v[0].type.defaultProps,w=b!==void 0?us(us({},b),v[0].props):v[0].props,y=w.barSize,N=w[x];o[N]||(o[N]=[]);var S=Sn(y)?r:y;o[N].push({item:v[0],stackList:v.slice(1),barSize:Sn(S)?void 0:Vh(S,n,0)})}}return o},Yce=function(t){var r=t.barGap,n=t.barCategoryGap,s=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=Vh(r,s,0,!0),f,u=[];if(o[0].barSize===+o[0].barSize){var p=!1,h=s/c,m=o.reduce(function(y,N){return y+N.barSize||0},0);m+=(c-1)*d,m>=s&&(m-=(c-1)*d,d=0),m>=s&&h>0&&(p=!0,h*=.9,m=c*h);var g=(s-m)/2>>0,x={offset:g-d,size:0};f=o.reduce(function(y,N){var S={item:N.item,position:{offset:x.offset+x.size+d,size:p?h:N.barSize}},j=[].concat(jO(y),[S]);return x=j[j.length-1].position,N.stackList&&N.stackList.length&&N.stackList.forEach(function(_){j.push({item:_,position:x})}),j},u)}else{var v=Vh(n,s,0,!0);s-2*v-(c-1)*d<=0&&(d=0);var b=(s-2*v-(c-1)*d)/c;b>1&&(b>>=0);var w=l===+l?Math.min(b,l):b;f=o.reduce(function(y,N,S){var j=[].concat(jO(y),[{item:N.item,position:{offset:v+(b+d)*S+(b-w)/2,size:w}}]);return N.stackList&&N.stackList.length&&N.stackList.forEach(function(_){j.push({item:_,position:j[j.length-1].position})}),j},u)}return f},Qce=function(t,r,n,s){var i=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),d=c9({children:i,legendWidth:c});if(d){var f=s||{},u=f.width,p=f.height,h=d.align,m=d.verticalAlign,g=d.layout;if((g==="vertical"||g==="horizontal"&&m==="middle")&&h!=="center"&&Yt(t[h]))return us(us({},t),{},Cm({},h,t[h]+(u||0)));if((g==="horizontal"||g==="vertical"&&h==="center")&&m!=="middle"&&Yt(t[m]))return us(us({},t),{},Cm({},m,t[m]+(p||0)))}return t},Jce=function(t,r,n){return Sn(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},d9=function(t,r,n,s,i){var o=r.props.children,l=sd(o,dN).filter(function(d){return Jce(s,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,f){var u=Ml(f,n);if(Sn(u))return d;var p=Array.isArray(u)?[oN(u),Hf(u)]:[u,u],h=c.reduce(function(m,g){var x=Ml(f,g,0),v=p[0]-Math.abs(Array.isArray(x)?x[0]:x),b=p[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(v,m[0]),Math.max(b,m[1])]},[1/0,-1/0]);return[Math.min(h[0],d[0]),Math.max(h[1],d[1])]},[1/0,-1/0])}return null},Zce=function(t,r,n,s,i){var o=r.map(function(l){return d9(t,l,n,i,s)}).filter(function(l){return!Sn(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},u9=function(t,r,n,s,i){var o=r.map(function(c){var d=c.props.dataKey;return n==="number"&&d&&d9(t,c,d,s)||hv(t,d,n,i)});if(n==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var f=0,u=d.length;f<u;f++)l[d[f]]||(l[d[f]]=!0,c.push(d[f]));return c},[])},f9=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},h9=function(t,r,n,s){if(s)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===r&&(i=!0),c.coordinate===n&&(o=!0),c.coordinate});return i||l.push(r),o||l.push(n),l},ju=function(t,r,n){if(!t)return null;var s=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,d=(r||n)&&o==="category"&&s.bandwidth?s.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?Qc(l[0]-l[1])*2*d:d,r&&(t.ticks||t.niceTicks)){var f=(t.ticks||t.niceTicks).map(function(u){var p=i?i.indexOf(u):u;return{coordinate:s(p)+d,value:u,offset:d}});return f.filter(function(u){return!Mx(u.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(u,p){return{coordinate:s(u)+d,value:u,index:p,offset:d}}):s.ticks&&!n?s.ticks(t.tickCount).map(function(u){return{coordinate:s(u)+d,value:u,offset:d}}):s.domain().map(function(u,p){return{coordinate:s(u)+d,value:i?i[u]:u,index:p,offset:d}})},zj=new WeakMap,my=function(t,r){if(typeof r!="function")return t;zj.has(t)||zj.set(t,new WeakMap);var n=zj.get(t);if(n.has(r))return n.get(r);var s=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,s),s},ede=function(t,r,n){var s=t.scale,i=t.type,o=t.layout,l=t.axisType;if(s==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Yv(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:pw(),realScaleType:"linear"}:i==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:fv(),realScaleType:"point"}:i==="category"?{scale:Yv(),realScaleType:"band"}:{scale:pw(),realScaleType:"linear"};if(Wh(s)){var c="scale".concat(K5(s));return{scale:(gO[c]||fv)(),realScaleType:gO[c]?c:"point"}}return cn(s)?{scale:s}:{scale:fv(),realScaleType:"point"}},SO=1e-4,tde=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,s=t.range(),i=Math.min(s[0],s[1])-SO,o=Math.max(s[0],s[1])+SO,l=t(r[0]),c=t(r[n-1]);(l<i||l>o||c<i||c>o)&&t.domain([r[0],r[n-1]])}},rde=function(t,r){if(!t)return null;for(var n=0,s=t.length;n<s;n++)if(t[n].item===r)return t[n].position;return null},nde=function(t,r){if(!r||r.length!==2||!Yt(r[0])||!Yt(r[1]))return t;var n=Math.min(r[0],r[1]),s=Math.max(r[0],r[1]),i=[t[0],t[1]];return(!Yt(t[0])||t[0]<n)&&(i[0]=n),(!Yt(t[1])||t[1]>s)&&(i[1]=s),i[0]>s&&(i[0]=s),i[1]<n&&(i[1]=n),i},ade=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0,l=0;l<r;++l){var c=Mx(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=i,t[l][n][1]=i+c,i=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},sde=function(t){var r=t.length;if(!(r<=0))for(var n=0,s=t[0].length;n<s;++n)for(var i=0,o=0;o<r;++o){var l=Mx(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=i,t[o][n][1]=i+l,i=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},ide={sign:ade,expand:wY,none:rx,silhouette:NY,wiggle:jY,positive:sde},ode=function(t,r,n){var s=r.map(function(l){return l.props.dataKey}),i=ide[n],o=yY().keys(s).value(function(l,c){return+Ml(l,c,0)}).order(Bk).offset(i);return o(t)},lde=function(t,r,n,s,i,o){if(!t)return null;var l=o?r.reverse():r,c={},d=l.reduce(function(u,p){var h,m=(h=p.type)!==null&&h!==void 0&&h.defaultProps?us(us({},p.type.defaultProps),p.props):p.props,g=m.stackId,x=m.hide;if(x)return u;var v=m[n],b=u[v]||{hasStack:!1,stackGroups:{}};if(ni(g)){var w=b.stackGroups[g]||{numericAxisId:n,cateAxisId:s,items:[]};w.items.push(p),b.hasStack=!0,b.stackGroups[g]=w}else b.stackGroups[Z1("_stackId_")]={numericAxisId:n,cateAxisId:s,items:[p]};return us(us({},u),{},Cm({},v,b))},c),f={};return Object.keys(d).reduce(function(u,p){var h=d[p];if(h.hasStack){var m={};h.stackGroups=Object.keys(h.stackGroups).reduce(function(g,x){var v=h.stackGroups[x];return us(us({},g),{},Cm({},x,{numericAxisId:n,cateAxisId:s,items:v.items,stackedData:ode(t,v.items,i)}))},m)}return us(us({},u),{},Cm({},p,h))},f)},cde=function(t,r){var n=r.realScaleType,s=r.type,i=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&s==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var f=yce(d,i,l);return t.domain([oN(f),Hf(f)]),{niceTicks:f}}if(i&&s==="number"){var u=t.domain(),p=wce(u,i,l);return{niceTicks:p}}return null};function _O(e){var t=e.axis,r=e.ticks,n=e.bandSize,s=e.entry,i=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!Sn(s[t.dataKey])){var l=H2(r,"value",s[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=Ml(s,Sn(o)?t.dataKey:o);return Sn(c)?null:t.scale(c)}var AO=function(t){var r=t.axis,n=t.ticks,s=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+s:null;var c=Ml(o,r.dataKey,r.domain[l]);return Sn(c)?null:r.scale(c)-i/2+s},dde=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var s=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return s<=0&&i>=0?0:i<0?i:s}return n[0]},ude=function(t,r){var n,s=(n=t.type)!==null&&n!==void 0&&n.defaultProps?us(us({},t.type.defaultProps),t.props):t.props,i=s.stackId;if(ni(i)){var o=r[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},fde=function(t){return t.reduce(function(r,n){return[oN(n.concat([r[0]]).filter(Yt)),Hf(n.concat([r[1]]).filter(Yt))]},[1/0,-1/0])},p9=function(t,r,n){return Object.keys(t).reduce(function(s,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,f){var u=fde(f.slice(r,n+1));return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);return[Math.min(c[0],s[0]),Math.max(c[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},CO=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,EO=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,m3=function(t,r,n){if(cn(t))return t(r,n);if(!Array.isArray(t))return r;var s=[];if(Yt(t[0]))s[0]=n?t[0]:Math.min(t[0],r[0]);else if(CO.test(t[0])){var i=+CO.exec(t[0])[1];s[0]=r[0]-i}else cn(t[0])?s[0]=t[0](r[0]):s[0]=r[0];if(Yt(t[1]))s[1]=n?t[1]:Math.max(t[1],r[1]);else if(EO.test(t[1])){var o=+EO.exec(t[1])[1];s[1]=r[1]+o}else cn(t[1])?s[1]=t[1](r[1]):s[1]=r[1];return s},ww=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!n||s>0)return s}if(t&&r&&r.length>=2){for(var i=i6(r,function(u){return u.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],f=i[l-1];o=Math.min((d.coordinate||0)-(f.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},TO=function(t,r,n){return!t||!t.length||t1(t,pc(n,"type.defaultProps.domain"))?r:t},m9=function(t,r){var n=t.type.defaultProps?us(us({},t.type.defaultProps),t.props):t.props,s=n.dataKey,i=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,d=n.chartType,f=n.hide;return us(us({},wn(t,!1)),{},{dataKey:s,unit:o,formatter:l,name:i||s,color:P6(t),value:Ml(r,s),type:c,payload:r,chartType:d,hide:f})};function i1(e){"@babel/helpers - typeof";return i1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i1(e)}function OO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function PO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OO(Object(r),!0).forEach(function(n){hde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hde(e,t,r){return t=pde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pde(e){var t=mde(e,"string");return i1(t)=="symbol"?t:t+""}function mde(e,t){if(i1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(i1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Nw=Math.PI/180,xde=function(t){return t*180/Math.PI},Di=function(t,r,n,s){return{x:t+Math.cos(-Nw*s)*n,y:r+Math.sin(-Nw*s)*n}},gde=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(s-o,2))},vde=function(t,r){var n=t.x,s=t.y,i=r.cx,o=r.cy,l=gde({x:n,y:s},{x:i,y:o});if(l<=0)return{radius:l};var c=(n-i)/l,d=Math.acos(c);return s>o&&(d=2*Math.PI-d),{radius:l,angle:xde(d),angleInRadian:d}},bde=function(t){var r=t.startAngle,n=t.endAngle,s=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(s,i);return{startAngle:r-o*360,endAngle:n-o*360}},yde=function(t,r){var n=r.startAngle,s=r.endAngle,i=Math.floor(n/360),o=Math.floor(s/360),l=Math.min(i,o);return t+l*360},IO=function(t,r){var n=t.x,s=t.y,i=vde({x:n,y:s},r),o=i.radius,l=i.angle,c=r.innerRadius,d=r.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var f=bde(r),u=f.startAngle,p=f.endAngle,h=l,m;if(u<=p){for(;h>p;)h-=360;for(;h<u;)h+=360;m=h>=u&&h<=p}else{for(;h>u;)h-=360;for(;h<p;)h+=360;m=h>=p&&h<=u}return m?PO(PO({},r),{},{radius:o,angle:yde(h,r)}):null};function o1(e){"@babel/helpers - typeof";return o1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o1(e)}var wde=["offset"];function Nde(e){return _de(e)||Sde(e)||kde(e)||jde()}function jde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function kde(e,t){if(e){if(typeof e=="string")return x3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return x3(e,t)}}function Sde(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _de(e){if(Array.isArray(e))return x3(e)}function x3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Ade(e,t){if(e==null)return{};var r=Cde(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Cde(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function DO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Js(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DO(Object(r),!0).forEach(function(n){Ede(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ede(e,t,r){return t=Tde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tde(e){var t=Ode(e,"string");return o1(t)=="symbol"?t:t+""}function Ode(e,t){if(o1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(o1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l1(){return l1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},l1.apply(this,arguments)}var Pde=function(t){var r=t.value,n=t.formatter,s=Sn(t.children)?r:t.children;return cn(n)?n(s):s},Ide=function(t,r){var n=Qc(r-t),s=Math.min(Math.abs(r-t),360);return n*s},Dde=function(t,r,n){var s=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,f=c.cy,u=c.innerRadius,p=c.outerRadius,h=c.startAngle,m=c.endAngle,g=c.clockWise,x=(u+p)/2,v=Ide(h,m),b=v>=0?1:-1,w,y;s==="insideStart"?(w=h+b*o,y=g):s==="insideEnd"?(w=m-b*o,y=!g):s==="end"&&(w=m+b*o,y=g),y=v<=0?y:!y;var N=Di(d,f,x,w),S=Di(d,f,x,w+(y?1:-1)*359),j="M".concat(N.x,",").concat(N.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(y?0:1,`,
    `).concat(S.x,",").concat(S.y),_=Sn(t.id)?Z1("recharts-radial-line-"):t.id;return st.createElement("text",l1({},n,{dominantBaseline:"central",className:Rn("recharts-radial-bar-label",l)}),st.createElement("defs",null,st.createElement("path",{id:_,d:j})),st.createElement("textPath",{xlinkHref:"#".concat(_)},r))},Lde=function(t){var r=t.viewBox,n=t.offset,s=t.position,i=r,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,f=i.startAngle,u=i.endAngle,p=(f+u)/2;if(s==="outside"){var h=Di(o,l,d+n,p),m=h.x,g=h.y;return{x:m,y:g,textAnchor:m>=o?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+d)/2,v=Di(o,l,x,p),b=v.x,w=v.y;return{x:b,y:w,textAnchor:"middle",verticalAnchor:"middle"}},Fde=function(t){var r=t.viewBox,n=t.parentViewBox,s=t.offset,i=t.position,o=r,l=o.x,c=o.y,d=o.width,f=o.height,u=f>=0?1:-1,p=u*s,h=u>0?"end":"start",m=u>0?"start":"end",g=d>=0?1:-1,x=g*s,v=g>0?"end":"start",b=g>0?"start":"end";if(i==="top"){var w={x:l+d/2,y:c-u*s,textAnchor:"middle",verticalAnchor:h};return Js(Js({},w),n?{height:Math.max(c-n.y,0),width:d}:{})}if(i==="bottom"){var y={x:l+d/2,y:c+f+p,textAnchor:"middle",verticalAnchor:m};return Js(Js({},y),n?{height:Math.max(n.y+n.height-(c+f),0),width:d}:{})}if(i==="left"){var N={x:l-x,y:c+f/2,textAnchor:v,verticalAnchor:"middle"};return Js(Js({},N),n?{width:Math.max(N.x-n.x,0),height:f}:{})}if(i==="right"){var S={x:l+d+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"};return Js(Js({},S),n?{width:Math.max(n.x+n.width-S.x,0),height:f}:{})}var j=n?{width:d,height:f}:{};return i==="insideLeft"?Js({x:l+x,y:c+f/2,textAnchor:b,verticalAnchor:"middle"},j):i==="insideRight"?Js({x:l+d-x,y:c+f/2,textAnchor:v,verticalAnchor:"middle"},j):i==="insideTop"?Js({x:l+d/2,y:c+p,textAnchor:"middle",verticalAnchor:m},j):i==="insideBottom"?Js({x:l+d/2,y:c+f-p,textAnchor:"middle",verticalAnchor:h},j):i==="insideTopLeft"?Js({x:l+x,y:c+p,textAnchor:b,verticalAnchor:m},j):i==="insideTopRight"?Js({x:l+d-x,y:c+p,textAnchor:v,verticalAnchor:m},j):i==="insideBottomLeft"?Js({x:l+x,y:c+f-p,textAnchor:b,verticalAnchor:h},j):i==="insideBottomRight"?Js({x:l+d-x,y:c+f-p,textAnchor:v,verticalAnchor:h},j):Ix(i)&&(Yt(i.x)||fh(i.x))&&(Yt(i.y)||fh(i.y))?Js({x:l+Vh(i.x,d),y:c+Vh(i.y,f),textAnchor:"end",verticalAnchor:"end"},j):Js({x:l+d/2,y:c+f/2,textAnchor:"middle",verticalAnchor:"middle"},j)},Mde=function(t){return"cx"in t&&Yt(t.cx)};function ao(e){var t=e.offset,r=t===void 0?5:t,n=Ade(e,wde),s=Js({offset:r},n),i=s.viewBox,o=s.position,l=s.value,c=s.children,d=s.content,f=s.className,u=f===void 0?"":f,p=s.textBreakAll;if(!i||Sn(l)&&Sn(c)&&!P.isValidElement(d)&&!cn(d))return null;if(P.isValidElement(d))return P.cloneElement(d,s);var h;if(cn(d)){if(h=P.createElement(d,s),P.isValidElement(h))return h}else h=Pde(s);var m=Mde(i),g=wn(s,!0);if(m&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Dde(s,h,g);var x=m?Lde(s):Fde(s);return st.createElement(iw,l1({className:Rn("recharts-label",u)},g,x,{breakAll:p}),h)}ao.displayName="Label";var x9=function(t){var r=t.cx,n=t.cy,s=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,f=t.outerRadius,u=t.x,p=t.y,h=t.top,m=t.left,g=t.width,x=t.height,v=t.clockWise,b=t.labelViewBox;if(b)return b;if(Yt(g)&&Yt(x)){if(Yt(u)&&Yt(p))return{x:u,y:p,width:g,height:x};if(Yt(h)&&Yt(m))return{x:h,y:m,width:g,height:x}}return Yt(u)&&Yt(p)?{x:u,y:p,width:0,height:0}:Yt(r)&&Yt(n)?{cx:r,cy:n,startAngle:i||s||0,endAngle:o||s||0,innerRadius:d||0,outerRadius:f||c||l||0,clockWise:v}:t.viewBox?t.viewBox:{}},Rde=function(t,r){return t?t===!0?st.createElement(ao,{key:"label-implicit",viewBox:r}):ni(t)?st.createElement(ao,{key:"label-implicit",viewBox:r,value:t}):P.isValidElement(t)?t.type===ao?P.cloneElement(t,{key:"label-implicit",viewBox:r}):st.createElement(ao,{key:"label-implicit",content:t,viewBox:r}):cn(t)?st.createElement(ao,{key:"label-implicit",content:t,viewBox:r}):Ix(t)?st.createElement(ao,l1({viewBox:r},t,{key:"label-implicit"})):null:null},Bde=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var s=t.children,i=x9(t),o=sd(s,ao).map(function(c,d){return P.cloneElement(c,{viewBox:r||i,key:"label-".concat(d)})});if(!n)return o;var l=Rde(t.label,r||i);return[l].concat(Nde(o))};ao.parseViewBox=x9;ao.renderCallByParent=Bde;function $de(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Ude=$de;const zde=fa(Ude);function c1(e){"@babel/helpers - typeof";return c1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c1(e)}var qde=["valueAccessor"],Hde=["data","dataKey","clockWise","id","textBreakAll"];function Wde(e){return Xde(e)||Kde(e)||Gde(e)||Vde()}function Vde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gde(e,t){if(e){if(typeof e=="string")return g3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return g3(e,t)}}function Kde(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Xde(e){if(Array.isArray(e))return g3(e)}function g3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jw(){return jw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jw.apply(this,arguments)}function LO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function FO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(r),!0).forEach(function(n){Yde(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):LO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Yde(e,t,r){return t=Qde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qde(e){var t=Jde(e,"string");return c1(t)=="symbol"?t:t+""}function Jde(e,t){if(c1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(c1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function MO(e,t){if(e==null)return{};var r=Zde(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function Zde(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var eue=function(t){return Array.isArray(t.value)?zde(t.value):t.value};function o0(e){var t=e.valueAccessor,r=t===void 0?eue:t,n=MO(e,qde),s=n.data,i=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,d=MO(n,Hde);return!s||!s.length?null:st.createElement(Ya,{className:"recharts-label-list"},s.map(function(f,u){var p=Sn(i)?r(f,u):Ml(f&&f.payload,i),h=Sn(l)?{}:{id:"".concat(l,"-").concat(u)};return st.createElement(ao,jw({},wn(f,!0),d,h,{parentViewBox:f.parentViewBox,value:p,textBreakAll:c,viewBox:ao.parseViewBox(Sn(o)?f:FO(FO({},f),{},{clockWise:o})),key:"label-".concat(u),index:u}))}))}o0.displayName="LabelList";function tue(e,t){return e?e===!0?st.createElement(o0,{key:"labelList-implicit",data:t}):st.isValidElement(e)||cn(e)?st.createElement(o0,{key:"labelList-implicit",data:t,content:e}):Ix(e)?st.createElement(o0,jw({data:t},e,{key:"labelList-implicit"})):null:null}function rue(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,s=sd(n,o0).map(function(o,l){return P.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return s;var i=tue(e.label,t);return[i].concat(Wde(s))}o0.renderCallByParent=rue;function d1(e){"@babel/helpers - typeof";return d1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d1(e)}function v3(){return v3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},v3.apply(this,arguments)}function RO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function BO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RO(Object(r),!0).forEach(function(n){nue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nue(e,t,r){return t=aue(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aue(e){var t=sue(e,"string");return d1(t)=="symbol"?t:t+""}function sue(e,t){if(d1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(d1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var iue=function(t,r){var n=Qc(r-t),s=Math.min(Math.abs(r-t),359.999);return n*s},xy=function(t){var r=t.cx,n=t.cy,s=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,f=c*(l?1:-1)+s,u=Math.asin(c/f)/Nw,p=d?i:i+o*u,h=Di(r,n,f,p),m=Di(r,n,s,p),g=d?i-o*u:i,x=Di(r,n,f*Math.cos(u*Nw),g);return{center:h,circleTangency:m,lineTangency:x,theta:u}},g9=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=iue(o,l),d=o+c,f=Di(r,n,i,o),u=Di(r,n,i,d),p="M ".concat(f.x,",").concat(f.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(s>0){var h=Di(r,n,s,o),m=Di(r,n,s,d);p+="L ".concat(m.x,",").concat(m.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(h.x,",").concat(h.y," Z")}else p+="L ".concat(r,",").concat(n," Z");return p},oue=function(t){var r=t.cx,n=t.cy,s=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,f=t.endAngle,u=Qc(f-d),p=xy({cx:r,cy:n,radius:i,angle:d,sign:u,cornerRadius:o,cornerIsExternal:c}),h=p.circleTangency,m=p.lineTangency,g=p.theta,x=xy({cx:r,cy:n,radius:i,angle:f,sign:-u,cornerRadius:o,cornerIsExternal:c}),v=x.circleTangency,b=x.lineTangency,w=x.theta,y=c?Math.abs(d-f):Math.abs(d-f)-g-w;if(y<0)return l?"M ".concat(m.x,",").concat(m.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):g9({cx:r,cy:n,innerRadius:s,outerRadius:i,startAngle:d,endAngle:f});var N="M ".concat(m.x,",").concat(m.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(h.x,",").concat(h.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(y>180),",").concat(+(u<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(b.x,",").concat(b.y,`
  `);if(s>0){var S=xy({cx:r,cy:n,radius:s,angle:d,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),j=S.circleTangency,_=S.lineTangency,T=S.theta,D=xy({cx:r,cy:n,radius:s,angle:f,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),A=D.circleTangency,C=D.lineTangency,M=D.theta,F=c?Math.abs(d-f):Math.abs(d-f)-T-M;if(F<0&&o===0)return"".concat(N,"L").concat(r,",").concat(n,"Z");N+="L".concat(C.x,",").concat(C.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(A.x,",").concat(A.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(F>180),",").concat(+(u>0),",").concat(j.x,",").concat(j.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(_.x,",").concat(_.y,"Z")}else N+="L".concat(r,",").concat(n,"Z");return N},lue={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},v9=function(t){var r=BO(BO({},lue),t),n=r.cx,s=r.cy,i=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,d=r.cornerIsExternal,f=r.startAngle,u=r.endAngle,p=r.className;if(o<i||f===u)return null;var h=Rn("recharts-sector",p),m=o-i,g=Vh(l,m,0,!0),x;return g>0&&Math.abs(f-u)<360?x=oue({cx:n,cy:s,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:f,endAngle:u}):x=g9({cx:n,cy:s,innerRadius:i,outerRadius:o,startAngle:f,endAngle:u}),st.createElement("path",v3({},wn(r,!0),{className:h,d:x,role:"img"}))};function u1(e){"@babel/helpers - typeof";return u1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u1(e)}function b3(){return b3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},b3.apply(this,arguments)}function $O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function UO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$O(Object(r),!0).forEach(function(n){cue(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$O(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cue(e,t,r){return t=due(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function due(e){var t=uue(e,"string");return u1(t)=="symbol"?t:t+""}function uue(e,t){if(u1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(u1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var zO={curveBasisClosed:cY,curveBasisOpen:dY,curveBasis:lY,curveBumpX:KX,curveBumpY:XX,curveLinearClosed:uY,curveLinear:Y5,curveMonotoneX:fY,curveMonotoneY:hY,curveNatural:pY,curveStep:mY,curveStepAfter:gY,curveStepBefore:xY},gy=function(t){return t.x===+t.x&&t.y===+t.y},Tg=function(t){return t.x},Og=function(t){return t.y},fue=function(t,r){if(cn(t))return t;var n="curve".concat(K5(t));return(n==="curveMonotone"||n==="curveBump")&&r?zO["".concat(n).concat(r==="vertical"?"Y":"X")]:zO[n]||Y5},hue=function(t){var r=t.type,n=r===void 0?"linear":r,s=t.points,i=s===void 0?[]:s,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,f=fue(n,l),u=d?i.filter(function(g){return gy(g)}):i,p;if(Array.isArray(o)){var h=d?o.filter(function(g){return gy(g)}):o,m=u.map(function(g,x){return UO(UO({},g),{},{base:h[x]})});return l==="vertical"?p=oy().y(Og).x1(Tg).x0(function(g){return g.base.x}):p=oy().x(Tg).y1(Og).y0(function(g){return g.base.y}),p.defined(gy).curve(f),p(m)}return l==="vertical"&&Yt(o)?p=oy().y(Og).x1(Tg).x0(o):Yt(o)?p=oy().x(Tg).y1(Og).y0(o):p=v7().x(Tg).y(Og),p.defined(gy).curve(f),p(u)},pv=function(t){var r=t.className,n=t.points,s=t.path,i=t.pathRef;if((!n||!n.length)&&!s)return null;var o=n&&n.length?hue(t):s;return P.createElement("path",b3({},wn(t,!1),W2(t),{className:Rn("recharts-curve",r),d:o,ref:i}))},b9={exports:{}},pue="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",mue=pue,xue=mue;function y9(){}function w9(){}w9.resetWarningCache=y9;var gue=function(){function e(n,s,i,o,l,c){if(c!==xue){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:w9,resetWarningCache:y9};return r.PropTypes=r,r};b9.exports=gue();var vue=b9.exports;const Yn=fa(vue),{getOwnPropertyNames:bue,getOwnPropertySymbols:yue}=Object,{hasOwnProperty:wue}=Object.prototype;function qj(e,t){return function(n,s,i){return e(n,s,i)&&t(n,s,i)}}function vy(e){return function(r,n,s){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,s);const{cache:i}=s,o=i.get(r),l=i.get(n);if(o&&l)return o===n&&l===r;i.set(r,n),i.set(n,r);const c=e(r,n,s);return i.delete(r),i.delete(n),c}}function Nue(e){return e!=null?e[Symbol.toStringTag]:void 0}function qO(e){return bue(e).concat(yue(e))}const jue=Object.hasOwn||((e,t)=>wue.call(e,t));function dp(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const kue="__v",Sue="__o",_ue="_owner",{getOwnPropertyDescriptor:HO,keys:WO}=Object;function Aue(e,t){return e.byteLength===t.byteLength&&kw(new Uint8Array(e),new Uint8Array(t))}function Cue(e,t,r){let n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function Eue(e,t){return e.byteLength===t.byteLength&&kw(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Tue(e,t){return dp(e.getTime(),t.getTime())}function Oue(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Pue(e,t){return e===t}function VO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let f=!1,u=0;for(;(l=d.next())&&!l.done;){if(s[u]){u++;continue}const p=o.value,h=l.value;if(r.equals(p[0],h[0],c,u,e,t,r)&&r.equals(p[1],h[1],p[0],h[0],e,t,r)){f=s[u]=!0;break}u++}if(!f)return!1;c++}return!0}const Iue=dp;function Due(e,t,r){const n=WO(e);let s=n.length;if(WO(t).length!==s)return!1;for(;s-- >0;)if(!N9(e,t,r,n[s]))return!1;return!0}function Pg(e,t,r){const n=qO(e);let s=n.length;if(qO(t).length!==s)return!1;let i,o,l;for(;s-- >0;)if(i=n[s],!N9(e,t,r,i)||(o=HO(e,i),l=HO(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Lue(e,t){return dp(e.valueOf(),t.valueOf())}function Fue(e,t){return e.source===t.source&&e.flags===t.flags}function GO(e,t,r){const n=e.size;if(n!==t.size)return!1;if(!n)return!0;const s=new Array(n),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let d=!1,f=0;for(;(l=c.next())&&!l.done;){if(!s[f]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){d=s[f]=!0;break}f++}if(!d)return!1}return!0}function kw(e,t){let r=e.byteLength;if(t.byteLength!==r||e.byteOffset!==t.byteOffset)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Mue(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function N9(e,t,r,n){return(n===_ue||n===Sue||n===kue)&&(e.$$typeof||t.$$typeof)?!0:jue(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}const Rue="[object ArrayBuffer]",Bue="[object Arguments]",$ue="[object Boolean]",Uue="[object DataView]",zue="[object Date]",que="[object Error]",Hue="[object Map]",Wue="[object Number]",Vue="[object Object]",Gue="[object RegExp]",Kue="[object Set]",Xue="[object String]",Yue={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},Que="[object URL]",Jue=Object.prototype.toString;function Zue({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:r,areDatesEqual:n,areErrorsEqual:s,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:f,areSetsEqual:u,areTypedArraysEqual:p,areUrlsEqual:h,unknownTagComparators:m}){return function(x,v,b){if(x===v)return!0;if(x==null||v==null)return!1;const w=typeof x;if(w!==typeof v)return!1;if(w!=="object")return w==="number"?l(x,v,b):w==="function"?i(x,v,b):!1;const y=x.constructor;if(y!==v.constructor)return!1;if(y===Object)return c(x,v,b);if(Array.isArray(x))return t(x,v,b);if(y===Date)return n(x,v,b);if(y===RegExp)return f(x,v,b);if(y===Map)return o(x,v,b);if(y===Set)return u(x,v,b);const N=Jue.call(x);if(N===zue)return n(x,v,b);if(N===Gue)return f(x,v,b);if(N===Hue)return o(x,v,b);if(N===Kue)return u(x,v,b);if(N===Vue)return typeof x.then!="function"&&typeof v.then!="function"&&c(x,v,b);if(N===Que)return h(x,v,b);if(N===que)return s(x,v,b);if(N===Bue)return c(x,v,b);if(Yue[N])return p(x,v,b);if(N===Rue)return e(x,v,b);if(N===Uue)return r(x,v,b);if(N===$ue||N===Wue||N===Xue)return d(x,v,b);if(m){let S=m[N];if(!S){const j=Nue(x);j&&(S=m[j])}if(S)return S(x,v,b)}return!1}}function efe({circular:e,createCustomConfig:t,strict:r}){let n={areArrayBuffersEqual:Aue,areArraysEqual:r?Pg:Cue,areDataViewsEqual:Eue,areDatesEqual:Tue,areErrorsEqual:Oue,areFunctionsEqual:Pue,areMapsEqual:r?qj(VO,Pg):VO,areNumbersEqual:Iue,areObjectsEqual:r?Pg:Due,arePrimitiveWrappersEqual:Lue,areRegExpsEqual:Fue,areSetsEqual:r?qj(GO,Pg):GO,areTypedArraysEqual:r?qj(kw,Pg):kw,areUrlsEqual:Mue,unknownTagComparators:void 0};if(t&&(n=Object.assign({},n,t(n))),e){const s=vy(n.areArraysEqual),i=vy(n.areMapsEqual),o=vy(n.areObjectsEqual),l=vy(n.areSetsEqual);n=Object.assign({},n,{areArraysEqual:s,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return n}function tfe(e){return function(t,r,n,s,i,o,l){return e(t,r,l)}}function rfe({circular:e,comparator:t,createState:r,equals:n,strict:s}){if(r)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:f}=r();return t(l,c,{cache:d,equals:n,meta:f,strict:s})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:n,meta:void 0,strict:s})};const i={cache:void 0,equals:n,meta:void 0,strict:s};return function(l,c){return t(l,c,i)}}const nfe=_0();_0({strict:!0});_0({circular:!0});_0({circular:!0,strict:!0});_0({createInternalComparator:()=>dp});_0({strict:!0,createInternalComparator:()=>dp});_0({circular:!0,createInternalComparator:()=>dp});_0({circular:!0,createInternalComparator:()=>dp,strict:!0});function _0(e={}){const{circular:t=!1,createInternalComparator:r,createState:n,strict:s=!1}=e,i=efe(e),o=Zue(i),l=r?r(o):tfe(o);return rfe({circular:t,comparator:o,createState:n,equals:l,strict:s})}function afe(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function KO(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function s(i){r<0&&(r=i),i-r>t?(e(i),r=-1):afe(s)};requestAnimationFrame(n)}function y3(e){"@babel/helpers - typeof";return y3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y3(e)}function sfe(e){return cfe(e)||lfe(e)||ofe(e)||ife()}function ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ofe(e,t){if(e){if(typeof e=="string")return XO(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XO(e,t)}}function XO(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function lfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function cfe(e){if(Array.isArray(e))return e}function dfe(){var e={},t=function(){return null},r=!1,n=function s(i){if(!r){if(Array.isArray(i)){if(!i.length)return;var o=i,l=sfe(o),c=l[0],d=l.slice(1);if(typeof c=="number"){KO(s.bind(null,d),c);return}s(c),KO(s.bind(null,d));return}y3(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){r=!0},start:function(i){r=!1,n(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function f1(e){"@babel/helpers - typeof";return f1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f1(e)}function YO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function QO(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YO(Object(r),!0).forEach(function(n){j9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YO(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function j9(e,t,r){return t=ufe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ufe(e){var t=ffe(e,"string");return f1(t)==="symbol"?t:String(t)}function ffe(e,t){if(f1(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(f1(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hfe=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,s){return n.filter(function(i){return s.includes(i)})})},pfe=function(t){return t},mfe=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},mv=function(t,r){return Object.keys(r).reduce(function(n,s){return QO(QO({},n),{},j9({},s,t(s,r[s])))},{})},JO=function(t,r,n){return t.map(function(s){return"".concat(mfe(s)," ").concat(r,"ms ").concat(n)}).join(",")};function xfe(e,t){return bfe(e)||vfe(e,t)||k9(e,t)||gfe()}function gfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function bfe(e){if(Array.isArray(e))return e}function yfe(e){return jfe(e)||Nfe(e)||k9(e)||wfe()}function wfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function k9(e,t){if(e){if(typeof e=="string")return w3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w3(e,t)}}function Nfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function jfe(e){if(Array.isArray(e))return w3(e)}function w3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Sw=1e-4,S9=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},_9=function(t,r){return t.map(function(n,s){return n*Math.pow(r,s)}).reduce(function(n,s){return n+s})},ZO=function(t,r){return function(n){var s=S9(t,r);return _9(s,n)}},kfe=function(t,r){return function(n){var s=S9(t,r),i=[].concat(yfe(s.map(function(o,l){return o*l}).slice(1)),[0]);return _9(i,n)}},eP=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0],i=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":s=0,i=0,o=1,l=1;break;case"ease":s=.25,i=.1,o=.25,l=1;break;case"ease-in":s=.42,i=0,o=1,l=1;break;case"ease-out":s=.42,i=0,o=.58,l=1;break;case"ease-in-out":s=0,i=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),f=xfe(d,4);s=f[0],i=f[1],o=f[2],l=f[3]}}}var u=ZO(s,o),p=ZO(i,l),h=kfe(s,o),m=function(v){return v>1?1:v<0?0:v},g=function(v){for(var b=v>1?1:v,w=b,y=0;y<8;++y){var N=u(w)-b,S=h(w);if(Math.abs(N-b)<Sw||S<Sw)return p(w);w=m(w-N/S)}return p(w)};return g.isStepper=!1,g},Sfe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,s=t.damping,i=s===void 0?8:s,o=t.dt,l=o===void 0?17:o,c=function(f,u,p){var h=-(f-u)*n,m=p*i,g=p+(h-m)*l/1e3,x=p*l/1e3+f;return Math.abs(x-u)<Sw&&Math.abs(g)<Sw?[u,0]:[x,g]};return c.isStepper=!0,c.dt=l,c},_fe=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var s=r[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return eP(s);case"spring":return Sfe();default:if(s.split("(")[0]==="cubic-bezier")return eP(s)}return typeof s=="function"?s:null};function h1(e){"@babel/helpers - typeof";return h1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h1(e)}function tP(e){return Efe(e)||Cfe(e)||A9(e)||Afe()}function Afe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Efe(e){if(Array.isArray(e))return j3(e)}function rP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ei(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rP(Object(r),!0).forEach(function(n){N3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function N3(e,t,r){return t=Tfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Tfe(e){var t=Ofe(e,"string");return h1(t)==="symbol"?t:String(t)}function Ofe(e,t){if(h1(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(h1(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pfe(e,t){return Lfe(e)||Dfe(e,t)||A9(e,t)||Ife()}function Ife(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A9(e,t){if(e){if(typeof e=="string")return j3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return j3(e,t)}}function j3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function Dfe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function Lfe(e){if(Array.isArray(e))return e}var _w=function(t,r,n){return t+(r-t)*n},k3=function(t){var r=t.from,n=t.to;return r!==n},Ffe=function e(t,r,n){var s=mv(function(i,o){if(k3(o)){var l=t(o.from,o.to,o.velocity),c=Pfe(l,2),d=c[0],f=c[1];return Ei(Ei({},o),{},{from:d,velocity:f})}return o},r);return n<1?mv(function(i,o){return k3(o)?Ei(Ei({},o),{},{velocity:_w(o.velocity,s[i].velocity,n),from:_w(o.from,s[i].from,n)}):o},r):e(t,s,n-1)};const Mfe=function(e,t,r,n,s){var i=hfe(e,t),o=i.reduce(function(x,v){return Ei(Ei({},x),{},N3({},v,[e[v],t[v]]))},{}),l=i.reduce(function(x,v){return Ei(Ei({},x),{},N3({},v,{from:e[v],velocity:0,to:t[v]}))},{}),c=-1,d,f,u=function(){return null},p=function(){return mv(function(v,b){return b.from},l)},h=function(){return!Object.values(l).filter(k3).length},m=function(v){d||(d=v);var b=v-d,w=b/r.dt;l=Ffe(r,l,w),s(Ei(Ei(Ei({},e),t),p())),d=v,h()||(c=requestAnimationFrame(u))},g=function(v){f||(f=v);var b=(v-f)/n,w=mv(function(N,S){return _w.apply(void 0,tP(S).concat([r(b)]))},o);if(s(Ei(Ei(Ei({},e),t),w)),b<1)c=requestAnimationFrame(u);else{var y=mv(function(N,S){return _w.apply(void 0,tP(S).concat([r(1)]))},o);s(Ei(Ei(Ei({},e),t),y))}};return u=r.isStepper?m:g,function(){return requestAnimationFrame(u),function(){cancelAnimationFrame(c)}}};function ux(e){"@babel/helpers - typeof";return ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ux(e)}var Rfe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Bfe(e,t){if(e==null)return{};var r=$fe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function $fe(e,t){if(e==null)return{};var r={},n=Object.keys(e),s,i;for(i=0;i<n.length;i++)s=n[i],!(t.indexOf(s)>=0)&&(r[s]=e[s]);return r}function Hj(e){return Hfe(e)||qfe(e)||zfe(e)||Ufe()}function Ufe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zfe(e,t){if(e){if(typeof e=="string")return S3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return S3(e,t)}}function qfe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hfe(e){if(Array.isArray(e))return S3(e)}function S3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function nP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Mc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nP(Object(r),!0).forEach(function(n){Gg(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gg(e,t,r){return t=C9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Wfe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vfe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C9(n.key),n)}}function Gfe(e,t,r){return t&&Vfe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function C9(e){var t=Kfe(e,"string");return ux(t)==="symbol"?t:String(t)}function Kfe(e,t){if(ux(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(ux(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_3(e,t)}function _3(e,t){return _3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},_3(e,t)}function Yfe(e){var t=Qfe();return function(){var n=Aw(e),s;if(t){var i=Aw(this).constructor;s=Reflect.construct(n,arguments,i)}else s=n.apply(this,arguments);return A3(this,s)}}function A3(e,t){if(t&&(ux(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C3(e)}function C3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qfe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Aw(e){return Aw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Aw(e)}var Wu=function(e){Xfe(r,e);var t=Yfe(r);function r(n,s){var i;Wfe(this,r),i=t.call(this,n,s);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,f=o.to,u=o.steps,p=o.children,h=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(C3(i)),i.changeStyle=i.changeStyle.bind(C3(i)),!l||h<=0)return i.state={style:{}},typeof p=="function"&&(i.state={style:f}),A3(i);if(u&&u.length)i.state={style:u[0].style};else if(d){if(typeof p=="function")return i.state={style:d},A3(i);i.state={style:c?Gg({},c,d):d}}else i.state={style:{}};return i}return Gfe(r,[{key:"componentDidMount",value:function(){var s=this.props,i=s.isActive,o=s.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,f=i.to,u=i.from,p=this.state.style;if(l){if(!o){var h={style:c?Gg({},c,f):f};this.state&&p&&(c&&p[c]!==f||!c&&p!==f)&&this.setState(h);return}if(!(nfe(s.to,f)&&s.canBegin&&s.isActive)){var m=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=m||d?u:s.to;if(this.state&&p){var x={style:c?Gg({},c,g):g};(c&&p[c]!==g||!c&&p!==g)&&this.setState(x)}this.runAnimation(Mc(Mc({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var i=this,o=s.from,l=s.to,c=s.duration,d=s.easing,f=s.begin,u=s.onAnimationEnd,p=s.onAnimationStart,h=Mfe(o,l,_fe(d),c,this.changeStyle),m=function(){i.stopJSAnimation=h()};this.manager.start([p,f,m,c,u])}},{key:"runStepAnimation",value:function(s){var i=this,o=s.steps,l=s.begin,c=s.onAnimationStart,d=o[0],f=d.style,u=d.duration,p=u===void 0?0:u,h=function(g,x,v){if(v===0)return g;var b=x.duration,w=x.easing,y=w===void 0?"ease":w,N=x.style,S=x.properties,j=x.onAnimationEnd,_=v>0?o[v-1]:x,T=S||Object.keys(N);if(typeof y=="function"||y==="spring")return[].concat(Hj(g),[i.runJSAnimation.bind(i,{from:_.style,to:N,duration:b,easing:y}),b]);var D=JO(T,b,y),A=Mc(Mc(Mc({},_.style),N),{},{transition:D});return[].concat(Hj(g),[A,b,j]).filter(pfe)};return this.manager.start([c].concat(Hj(o.reduce(h,[f,Math.max(p,l)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=dfe());var i=s.begin,o=s.duration,l=s.attributeName,c=s.to,d=s.easing,f=s.onAnimationStart,u=s.onAnimationEnd,p=s.steps,h=s.children,m=this.manager;if(this.unSubscribe=m.subscribe(this.handleStyleChange),typeof d=="function"||typeof h=="function"||d==="spring"){this.runJSAnimation(s);return}if(p.length>1){this.runStepAnimation(s);return}var g=l?Gg({},l,c):c,x=JO(Object.keys(g),o,d);m.start([f,i,Mc(Mc({},g),{},{transition:x}),o,u])}},{key:"render",value:function(){var s=this.props,i=s.children;s.begin;var o=s.duration;s.attributeName,s.easing;var l=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var c=Bfe(s,Rfe),d=P.Children.count(i),f=this.state.style;if(typeof i=="function")return i(f);if(!l||d===0||o<=0)return i;var u=function(h){var m=h.props,g=m.style,x=g===void 0?{}:g,v=m.className,b=P.cloneElement(h,Mc(Mc({},c),{},{style:Mc(Mc({},x),f),className:v}));return b};return d===1?u(P.Children.only(i)):st.createElement("div",null,P.Children.map(i,function(p){return u(p)}))}}]),r}(P.PureComponent);Wu.displayName="Animate";Wu.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Wu.propTypes={from:Yn.oneOfType([Yn.object,Yn.string]),to:Yn.oneOfType([Yn.object,Yn.string]),attributeName:Yn.string,duration:Yn.number,begin:Yn.number,easing:Yn.oneOfType([Yn.string,Yn.func]),steps:Yn.arrayOf(Yn.shape({duration:Yn.number.isRequired,style:Yn.object.isRequired,easing:Yn.oneOfType([Yn.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Yn.func]),properties:Yn.arrayOf("string"),onAnimationEnd:Yn.func})),children:Yn.oneOfType([Yn.node,Yn.func]),isActive:Yn.bool,canBegin:Yn.bool,onAnimationEnd:Yn.func,shouldReAnimate:Yn.bool,onAnimationStart:Yn.func,onAnimationReStart:Yn.func};function p1(e){"@babel/helpers - typeof";return p1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p1(e)}function Cw(){return Cw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cw.apply(this,arguments)}function Jfe(e,t){return r0e(e)||t0e(e,t)||e0e(e,t)||Zfe()}function Zfe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e0e(e,t){if(e){if(typeof e=="string")return aP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return aP(e,t)}}function aP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function t0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function r0e(e){if(Array.isArray(e))return e}function sP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function iP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?sP(Object(r),!0).forEach(function(n){n0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function n0e(e,t,r){return t=a0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a0e(e){var t=s0e(e,"string");return p1(t)=="symbol"?t:t+""}function s0e(e,t){if(p1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(p1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oP=function(t,r,n,s,i){var o=Math.min(Math.abs(n)/2,Math.abs(s)/2),l=s>=0?1:-1,c=n>=0?1:-1,d=s>=0&&n>=0||s<0&&n<0?1:0,f;if(o>0&&i instanceof Array){for(var u=[0,0,0,0],p=0,h=4;p<h;p++)u[p]=i[p]>o?o:i[p];f="M".concat(t,",").concat(r+l*u[0]),u[0]>0&&(f+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(d,",").concat(t+c*u[0],",").concat(r)),f+="L ".concat(t+n-c*u[1],",").concat(r),u[1]>0&&(f+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(d,`,
        `).concat(t+n,",").concat(r+l*u[1])),f+="L ".concat(t+n,",").concat(r+s-l*u[2]),u[2]>0&&(f+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(d,`,
        `).concat(t+n-c*u[2],",").concat(r+s)),f+="L ".concat(t+c*u[3],",").concat(r+s),u[3]>0&&(f+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(r+s-l*u[3])),f+="Z"}else if(o>0&&i===+i&&i>0){var m=Math.min(o,i);f="M ".concat(t,",").concat(r+l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(t+c*m,",").concat(r,`
            L `).concat(t+n-c*m,",").concat(r,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(t+n,",").concat(r+l*m,`
            L `).concat(t+n,",").concat(r+s-l*m,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(t+n-c*m,",").concat(r+s,`
            L `).concat(t+c*m,",").concat(r+s,`
            A `).concat(m,",").concat(m,",0,0,").concat(d,",").concat(t,",").concat(r+s-l*m," Z")}else f="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(s," h ").concat(-n," Z");return f},i0e=function(t,r){if(!t||!r)return!1;var n=t.x,s=t.y,i=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),f=Math.max(i,i+l),u=Math.min(o,o+c),p=Math.max(o,o+c);return n>=d&&n<=f&&s>=u&&s<=p}return!1},o0e={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},I6=function(t){var r=iP(iP({},o0e),t),n=P.useRef(),s=P.useState(-1),i=Jfe(s,2),o=i[0],l=i[1];P.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var y=n.current.getTotalLength();y&&l(y)}catch{}},[]);var c=r.x,d=r.y,f=r.width,u=r.height,p=r.radius,h=r.className,m=r.animationEasing,g=r.animationDuration,x=r.animationBegin,v=r.isAnimationActive,b=r.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||u!==+u||f===0||u===0)return null;var w=Rn("recharts-rectangle",h);return b?st.createElement(Wu,{canBegin:o>0,from:{width:f,height:u,x:c,y:d},to:{width:f,height:u,x:c,y:d},duration:g,animationEasing:m,isActive:b},function(y){var N=y.width,S=y.height,j=y.x,_=y.y;return st.createElement(Wu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:v,easing:m},st.createElement("path",Cw({},wn(r,!0),{className:w,d:oP(j,_,N,S,p),ref:n})))}):st.createElement("path",Cw({},wn(r,!0),{className:w,d:oP(c,d,f,u,p)}))};function E3(){return E3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},E3.apply(this,arguments)}var D6=function(t){var r=t.cx,n=t.cy,s=t.r,i=t.className,o=Rn("recharts-dot",i);return r===+r&&n===+n&&s===+s?P.createElement("circle",E3({},wn(t,!1),W2(t),{className:o,cx:r,cy:n,r:s})):null};function m1(e){"@babel/helpers - typeof";return m1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m1(e)}var l0e=["x","y","top","left","width","height","className"];function T3(){return T3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},T3.apply(this,arguments)}function lP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function c0e(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lP(Object(r),!0).forEach(function(n){d0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function d0e(e,t,r){return t=u0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function u0e(e){var t=f0e(e,"string");return m1(t)=="symbol"?t:t+""}function f0e(e,t){if(m1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(m1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function h0e(e,t){if(e==null)return{};var r=p0e(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function p0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var m0e=function(t,r,n,s,i,o){return"M".concat(t,",").concat(i,"v").concat(s,"M").concat(o,",").concat(r,"h").concat(n)},x0e=function(t){var r=t.x,n=r===void 0?0:r,s=t.y,i=s===void 0?0:s,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,f=t.width,u=f===void 0?0:f,p=t.height,h=p===void 0?0:p,m=t.className,g=h0e(t,l0e),x=c0e({x:n,y:i,top:l,left:d,width:u,height:h},g);return!Yt(n)||!Yt(i)||!Yt(u)||!Yt(h)||!Yt(l)||!Yt(d)?null:st.createElement("path",T3({},wn(x,!0),{className:Rn("recharts-cross",m),d:m0e(n,i,u,h,l,d)}))},g0e=z7,v0e=g0e(Object.getPrototypeOf,Object),b0e=v0e,y0e=Ku,w0e=b0e,N0e=Xu,j0e="[object Object]",k0e=Function.prototype,S0e=Object.prototype,E9=k0e.toString,_0e=S0e.hasOwnProperty,A0e=E9.call(Object);function C0e(e){if(!N0e(e)||y0e(e)!=j0e)return!1;var t=w0e(e);if(t===null)return!0;var r=_0e.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&E9.call(r)==A0e}var E0e=C0e;const T0e=fa(E0e);var O0e=Ku,P0e=Xu,I0e="[object Boolean]";function D0e(e){return e===!0||e===!1||P0e(e)&&O0e(e)==I0e}var L0e=D0e;const F0e=fa(L0e);function x1(e){"@babel/helpers - typeof";return x1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},x1(e)}function Ew(){return Ew=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ew.apply(this,arguments)}function M0e(e,t){return U0e(e)||$0e(e,t)||B0e(e,t)||R0e()}function R0e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function B0e(e,t){if(e){if(typeof e=="string")return cP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cP(e,t)}}function cP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $0e(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function U0e(e){if(Array.isArray(e))return e}function dP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function uP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dP(Object(r),!0).forEach(function(n){z0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function z0e(e,t,r){return t=q0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q0e(e){var t=H0e(e,"string");return x1(t)=="symbol"?t:t+""}function H0e(e,t){if(x1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(x1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fP=function(t,r,n,s,i){var o=n-s,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+i),l+="L ".concat(t+n-o/2-s,",").concat(r+i),l+="L ".concat(t,",").concat(r," Z"),l},W0e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},V0e=function(t){var r=uP(uP({},W0e),t),n=P.useRef(),s=P.useState(-1),i=M0e(s,2),o=i[0],l=i[1];P.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var w=n.current.getTotalLength();w&&l(w)}catch{}},[]);var c=r.x,d=r.y,f=r.upperWidth,u=r.lowerWidth,p=r.height,h=r.className,m=r.animationEasing,g=r.animationDuration,x=r.animationBegin,v=r.isUpdateAnimationActive;if(c!==+c||d!==+d||f!==+f||u!==+u||p!==+p||f===0&&u===0||p===0)return null;var b=Rn("recharts-trapezoid",h);return v?st.createElement(Wu,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:p,x:c,y:d},to:{upperWidth:f,lowerWidth:u,height:p,x:c,y:d},duration:g,animationEasing:m,isActive:v},function(w){var y=w.upperWidth,N=w.lowerWidth,S=w.height,j=w.x,_=w.y;return st.createElement(Wu,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:m},st.createElement("path",Ew({},wn(r,!0),{className:b,d:fP(j,_,y,N,S),ref:n})))}):st.createElement("g",null,st.createElement("path",Ew({},wn(r,!0),{className:b,d:fP(c,d,f,u,p)})))},G0e=["option","shapeType","propTransformer","activeClassName","isActive"];function g1(e){"@babel/helpers - typeof";return g1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g1(e)}function K0e(e,t){if(e==null)return{};var r=X0e(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function X0e(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function hP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Tw(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hP(Object(r),!0).forEach(function(n){Y0e(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Y0e(e,t,r){return t=Q0e(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q0e(e){var t=J0e(e,"string");return g1(t)=="symbol"?t:t+""}function J0e(e,t){if(g1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(g1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Z0e(e,t){return Tw(Tw({},t),e)}function ehe(e,t){return e==="symbols"}function pP(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return st.createElement(I6,r);case"trapezoid":return st.createElement(V0e,r);case"sector":return st.createElement(v9,r);case"symbols":if(ehe(t))return st.createElement(J_,r);break;default:return null}}function the(e){return P.isValidElement(e)?e.props:e}function rhe(e){var t=e.option,r=e.shapeType,n=e.propTransformer,s=n===void 0?Z0e:n,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=K0e(e,G0e),d;if(P.isValidElement(t))d=P.cloneElement(t,Tw(Tw({},c),the(t)));else if(cn(t))d=t(c);else if(T0e(t)&&!F0e(t)){var f=s(t,c);d=st.createElement(pP,{shapeType:r,elementProps:f})}else{var u=c;d=st.createElement(pP,{shapeType:r,elementProps:u})}return l?st.createElement(Ya,{className:o},d):d}function uN(e,t){return t!=null&&"trapezoids"in e.props}function fN(e,t){return t!=null&&"sectors"in e.props}function v1(e,t){return t!=null&&"points"in e.props}function nhe(e,t){var r,n,s=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,i=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return s&&i}function ahe(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function she(e,t){var r=e.x===t.x,n=e.y===t.y,s=e.z===t.z;return r&&n&&s}function ihe(e,t){var r;return uN(e,t)?r=nhe:fN(e,t)?r=ahe:v1(e,t)&&(r=she),r}function ohe(e,t){var r;return uN(e,t)?r="trapezoids":fN(e,t)?r="sectors":v1(e,t)&&(r="points"),r}function lhe(e,t){if(uN(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(fN(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return v1(e,t)?t.payload:{}}function che(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,s=ohe(r,t),i=lhe(r,t),o=n.filter(function(c,d){var f=t1(i,c),u=r.props[s].filter(function(m){var g=ihe(r,t);return g(m,t)}),p=r.props[s].indexOf(u[u.length-1]),h=d===p;return f&&h}),l=n.indexOf(o[o.length-1]);return l}var dhe=Math.ceil,uhe=Math.max;function fhe(e,t,r,n){for(var s=-1,i=uhe(dhe((t-e)/(r||1)),0),o=Array(i);i--;)o[n?i:++s]=e,e+=r;return o}var hhe=fhe,phe=oM,mP=1/0,mhe=17976931348623157e292;function xhe(e){if(!e)return e===0?e:0;if(e=phe(e),e===mP||e===-mP){var t=e<0?-1:1;return t*mhe}return e===e?e:0}var T9=xhe,ghe=hhe,vhe=eN,Wj=T9;function bhe(e){return function(t,r,n){return n&&typeof n!="number"&&vhe(t,r,n)&&(r=n=void 0),t=Wj(t),r===void 0?(r=t,t=0):r=Wj(r),n=n===void 0?t<r?1:-1:Wj(n),ghe(t,r,n,e)}}var yhe=bhe,whe=yhe,Nhe=whe(),jhe=Nhe;const Ow=fa(jhe);function b1(e){"@babel/helpers - typeof";return b1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b1(e)}function xP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function gP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xP(Object(r),!0).forEach(function(n){O9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function O9(e,t,r){return t=khe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function khe(e){var t=She(e,"string");return b1(t)=="symbol"?t:t+""}function She(e,t){if(b1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(b1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _he=["Webkit","Moz","O","ms"],Ahe=function(t,r){var n=t.replace(/(\w)/,function(i){return i.toUpperCase()}),s=_he.reduce(function(i,o){return gP(gP({},i),{},O9({},o+n,r))},{});return s[t]=r,s};function fx(e){"@babel/helpers - typeof";return fx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fx(e)}function Pw(){return Pw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pw.apply(this,arguments)}function vP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Vj(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vP(Object(r),!0).forEach(function(n){kl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Che(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function bP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,I9(n.key),n)}}function Ehe(e,t,r){return t&&bP(e.prototype,t),r&&bP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function The(e,t,r){return t=Iw(t),Ohe(e,P9()?Reflect.construct(t,r||[],Iw(e).constructor):t.apply(e,r))}function Ohe(e,t){if(t&&(fx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Phe(e)}function Phe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(P9=function(){return!!e})()}function Iw(e){return Iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Iw(e)}function Ihe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O3(e,t)}function O3(e,t){return O3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},O3(e,t)}function kl(e,t,r){return t=I9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function I9(e){var t=Dhe(e,"string");return fx(t)=="symbol"?t:t+""}function Dhe(e,t){if(fx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(fx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Lhe=function(t){var r=t.data,n=t.startIndex,s=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,d=fv().domain(Ow(0,c)).range([i,i+o-l]),f=d.domain().map(function(u){return d(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(n),endX:d(s),scale:d,scaleValues:f}},yP=function(t){return t.changedTouches&&!!t.changedTouches.length},hx=function(e){function t(r){var n;return Che(this,t),n=The(this,t,[r]),kl(n,"handleDrag",function(s){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(s):n.state.isSlideMoving&&n.handleSlideDrag(s)}),kl(n,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&n.handleDrag(s.changedTouches[0])}),kl(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=n.props,i=s.endIndex,o=s.onDragEnd,l=s.startIndex;o==null||o({endIndex:i,startIndex:l})}),n.detachDragEndListener()}),kl(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),kl(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),kl(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),kl(n,"handleSlideDragStart",function(s){var i=yP(s)?s.changedTouches[0]:s;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return Ihe(t,e),Ehe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var s=n.startX,i=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,f=d.length-1,u=Math.min(s,i),p=Math.max(s,i),h=t.getIndexInRange(o,u),m=t.getIndexInRange(o,p);return{startIndex:h-h%c,endIndex:m===f?f:m-m%c}}},{key:"getTextOfTick",value:function(n){var s=this.props,i=s.data,o=s.tickFormatter,l=s.dataKey,c=Ml(i[n],l,n);return cn(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var s=this.state,i=s.slideMoveStartX,o=s.startX,l=s.endX,c=this.props,d=c.x,f=c.width,u=c.travellerWidth,p=c.startIndex,h=c.endIndex,m=c.onChange,g=n.pageX-i;g>0?g=Math.min(g,d+f-u-l,d+f-u-o):g<0&&(g=Math.max(g,d-o,d-l));var x=this.getIndex({startX:o+g,endX:l+g});(x.startIndex!==p||x.endIndex!==h)&&m&&m(x),this.setState({startX:o+g,endX:l+g,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,s){var i=yP(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var s=this.state,i=s.brushMoveStartX,o=s.movingTravellerId,l=s.endX,c=s.startX,d=this.state[o],f=this.props,u=f.x,p=f.width,h=f.travellerWidth,m=f.onChange,g=f.gap,x=f.data,v={startX:this.state.startX,endX:this.state.endX},b=n.pageX-i;b>0?b=Math.min(b,u+p-h-d):b<0&&(b=Math.max(b,u-d)),v[o]=d+b;var w=this.getIndex(v),y=w.startIndex,N=w.endIndex,S=function(){var _=x.length-1;return o==="startX"&&(l>c?y%g===0:N%g===0)||l<c&&N===_||o==="endX"&&(l>c?N%g===0:y%g===0)||l>c&&N===_};this.setState(kl(kl({},o,d+b),"brushMoveStartX",n.pageX),function(){m&&S()&&m(w)})}},{key:"handleTravellerMoveKeyboard",value:function(n,s){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,f=this.state[s],u=l.indexOf(f);if(u!==-1){var p=u+n;if(!(p===-1||p>=l.length)){var h=l[p];s==="startX"&&h>=d||s==="endX"&&h<=c||this.setState(kl({},s,h),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.fill,d=n.stroke;return st.createElement("rect",{stroke:d,fill:c,x:s,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.data,d=n.children,f=n.padding,u=P.Children.only(d);return u?st.cloneElement(u,{x:s,y:i,width:o,height:l,margin:f,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,s){var i,o,l=this,c=this.props,d=c.y,f=c.travellerWidth,u=c.height,p=c.traveller,h=c.ariaLabel,m=c.data,g=c.startIndex,x=c.endIndex,v=Math.max(n,this.props.x),b=Vj(Vj({},wn(this.props,!1)),{},{x:v,y:d,width:f,height:u}),w=h||"Min value: ".concat((i=m[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=m[x])===null||o===void 0?void 0:o.name);return st.createElement(Ya,{tabIndex:0,role:"slider","aria-label":w,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(N){["ArrowLeft","ArrowRight"].includes(N.key)&&(N.preventDefault(),N.stopPropagation(),l.handleTravellerMoveKeyboard(N.key==="ArrowRight"?1:-1,s))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(p,b))}},{key:"renderSlide",value:function(n,s){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,f=Math.min(n,s)+d,u=Math.max(Math.abs(s-n)-d,0);return st.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:f,y:o,width:u,height:l})}},{key:"renderText",value:function(){var n=this.props,s=n.startIndex,i=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,d=n.stroke,f=this.state,u=f.startX,p=f.endX,h=5,m={pointerEvents:"none",fill:d};return st.createElement(Ya,{className:"recharts-brush-texts"},st.createElement(iw,Pw({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,p)-h,y:o+l/2},m),this.getTextOfTick(s)),st.createElement(iw,Pw({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,p)+c+h,y:o+l/2},m),this.getTextOfTick(i)))}},{key:"render",value:function(){var n=this.props,s=n.data,i=n.className,o=n.children,l=n.x,c=n.y,d=n.width,f=n.height,u=n.alwaysShowText,p=this.state,h=p.startX,m=p.endX,g=p.isTextActive,x=p.isSlideMoving,v=p.isTravellerMoving,b=p.isTravellerFocused;if(!s||!s.length||!Yt(l)||!Yt(c)||!Yt(d)||!Yt(f)||d<=0||f<=0)return null;var w=Rn("recharts-brush",i),y=st.Children.count(o)===1,N=Ahe("userSelect","none");return st.createElement(Ya,{className:w,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:N},this.renderBackground(),y&&this.renderPanorama(),this.renderSlide(h,m),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(m,"endX"),(g||x||v||b||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var s=n.x,i=n.y,o=n.width,l=n.height,c=n.stroke,d=Math.floor(i+l/2)-1;return st.createElement(st.Fragment,null,st.createElement("rect",{x:s,y:i,width:o,height:l,fill:c,stroke:"none"}),st.createElement("line",{x1:s+1,y1:d,x2:s+o-1,y2:d,fill:"none",stroke:"#fff"}),st.createElement("line",{x1:s+1,y1:d+2,x2:s+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,s){var i;return st.isValidElement(n)?i=st.cloneElement(n,s):cn(n)?i=n(s):i=t.renderDefaultTraveller(s),i}},{key:"getDerivedStateFromProps",value:function(n,s){var i=n.data,o=n.width,l=n.x,c=n.travellerWidth,d=n.updateId,f=n.startIndex,u=n.endIndex;if(i!==s.prevData||d!==s.prevUpdateId)return Vj({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?Lhe({data:i,width:o,x:l,travellerWidth:c,startIndex:f,endIndex:u}):{scale:null,scaleValues:null});if(s.scale&&(o!==s.prevWidth||l!==s.prevX||c!==s.prevTravellerWidth)){s.scale.range([l,l+o-c]);var p=s.scale.domain().map(function(h){return s.scale(h)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:s.scale(n.startIndex),endX:s.scale(n.endIndex),scaleValues:p}}return null}},{key:"getIndexInRange",value:function(n,s){for(var i=n.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>s?l=c:o=c}return s>=n[l]?l:o}}])}(P.PureComponent);kl(hx,"displayName","Brush");kl(hx,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var Fhe=s6;function Mhe(e,t){var r;return Fhe(e,function(n,s,i){return r=t(n,s,i),!r}),!!r}var Rhe=Mhe,Bhe=D7,$he=j0,Uhe=Rhe,zhe=ll,qhe=eN;function Hhe(e,t,r){var n=zhe(e)?Bhe:Uhe;return r&&qhe(e,t,r)&&(t=void 0),n(e,$he(t))}var Whe=Hhe;const Vhe=fa(Whe);var Kd=function(t,r){var n=t.alwaysShow,s=t.ifOverflow;return n&&(s="extendDomain"),s===r},wP=rM;function Ghe(e,t,r){t=="__proto__"&&wP?wP(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Khe=Ghe,Xhe=Khe,Yhe=eM,Qhe=j0;function Jhe(e,t){var r={};return t=Qhe(t),Yhe(e,function(n,s,i){Xhe(r,s,t(n,s,i))}),r}var Zhe=Jhe;const epe=fa(Zhe);function tpe(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var rpe=tpe,npe=s6;function ape(e,t){var r=!0;return npe(e,function(n,s,i){return r=!!t(n,s,i),r}),r}var spe=ape,ipe=rpe,ope=spe,lpe=j0,cpe=ll,dpe=eN;function upe(e,t,r){var n=cpe(e)?ipe:ope;return r&&dpe(e,t,r)&&(t=void 0),n(e,lpe(t))}var fpe=upe;const D9=fa(fpe);var hpe=["x","y"];function y1(e){"@babel/helpers - typeof";return y1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y1(e)}function P3(){return P3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},P3.apply(this,arguments)}function NP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ig(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NP(Object(r),!0).forEach(function(n){ppe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ppe(e,t,r){return t=mpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mpe(e){var t=xpe(e,"string");return y1(t)=="symbol"?t:t+""}function xpe(e,t){if(y1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(y1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gpe(e,t){if(e==null)return{};var r=vpe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vpe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bpe(e,t){var r=e.x,n=e.y,s=gpe(e,hpe),i="".concat(r),o=parseInt(i,10),l="".concat(n),c=parseInt(l,10),d="".concat(t.height||s.height),f=parseInt(d,10),u="".concat(t.width||s.width),p=parseInt(u,10);return Ig(Ig(Ig(Ig(Ig({},t),s),o?{x:o}:{}),c?{y:c}:{}),{},{height:f,width:p,name:t.name,radius:t.radius})}function jP(e){return st.createElement(rhe,P3({shapeType:"rectangle",propTransformer:bpe,activeClassName:"recharts-active-bar"},e))}var ype=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,s){if(typeof t=="number")return t;var i=Yt(n)||IK(n);return i?t(n,s):(i||Kh(),r)}},wpe=["value","background"],L9;function px(e){"@babel/helpers - typeof";return px=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},px(e)}function Npe(e,t){if(e==null)return{};var r=jpe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function jpe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Dw(){return Dw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dw.apply(this,arguments)}function kP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Ms(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kP(Object(r),!0).forEach(function(n){Wf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function SP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M9(n.key),n)}}function Spe(e,t,r){return t&&SP(e.prototype,t),r&&SP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function _pe(e,t,r){return t=Lw(t),Ape(e,F9()?Reflect.construct(t,r||[],Lw(e).constructor):t.apply(e,r))}function Ape(e,t){if(t&&(px(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cpe(e)}function Cpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(F9=function(){return!!e})()}function Lw(e){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Lw(e)}function Epe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I3(e,t)}function I3(e,t){return I3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},I3(e,t)}function Wf(e,t,r){return t=M9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M9(e){var t=Tpe(e,"string");return px(t)=="symbol"?t:t+""}function Tpe(e,t){if(px(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(px(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sb=function(e){function t(){var r;kpe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=_pe(this,t,[].concat(s)),Wf(r,"state",{isAnimationFinished:!1}),Wf(r,"id",Z1("recharts-bar-")),Wf(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Wf(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return Epe(t,e),Spe(t,[{key:"renderRectanglesStatically",value:function(n){var s=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,f=wn(this.props,!1);return n&&n.map(function(u,p){var h=p===c,m=h?d:o,g=Ms(Ms(Ms({},f),u),{},{isActive:h,option:m,index:p,dataKey:l,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return st.createElement(Ya,Dw({className:"recharts-bar-rectangle"},V2(s.props,u,p),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value,"-").concat(p)}),st.createElement(jP,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,s=this.props,i=s.data,o=s.layout,l=s.isAnimationActive,c=s.animationBegin,d=s.animationDuration,f=s.animationEasing,u=s.animationId,p=this.state.prevData;return st.createElement(Wu,{begin:c,duration:d,isActive:l,easing:f,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(h){var m=h.t,g=i.map(function(x,v){var b=p&&p[v];if(b){var w=cc(b.x,x.x),y=cc(b.y,x.y),N=cc(b.width,x.width),S=cc(b.height,x.height);return Ms(Ms({},x),{},{x:w(m),y:y(m),width:N(m),height:S(m)})}if(o==="horizontal"){var j=cc(0,x.height),_=j(m);return Ms(Ms({},x),{},{y:x.y+x.height-_,height:_})}var T=cc(0,x.width),D=T(m);return Ms(Ms({},x),{},{width:D})});return st.createElement(Ya,null,n.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var n=this.props,s=n.data,i=n.isAnimationActive,o=this.state.prevData;return i&&s&&s.length&&(!o||!t1(o,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var n=this,s=this.props,i=s.data,o=s.dataKey,l=s.activeIndex,c=wn(this.props.background,!1);return i.map(function(d,f){d.value;var u=d.background,p=Npe(d,wpe);if(!u)return null;var h=Ms(Ms(Ms(Ms(Ms({},p),{},{fill:"#eee"},u),c),V2(n.props,d,f)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:f,className:"recharts-bar-background-rectangle"});return st.createElement(jP,Dw({key:"background-bar-".concat(f),option:n.props.background,isActive:f===l},h))})}},{key:"renderErrorBar",value:function(n,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,f=i.children,u=sd(f,dN);if(!u)return null;var p=d==="vertical"?o[0].height/2:o[0].width/2,h=function(x,v){var b=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:b,errorVal:Ml(x,v)}},m={clipPath:n?"url(#clipPath-".concat(s,")"):null};return st.createElement(Ya,m,u.map(function(g){return st.cloneElement(g,{key:"error-bar-".concat(s,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:p,dataPointFormatter:h})}))}},{key:"render",value:function(){var n=this.props,s=n.hide,i=n.data,o=n.className,l=n.xAxis,c=n.yAxis,d=n.left,f=n.top,u=n.width,p=n.height,h=n.isAnimationActive,m=n.background,g=n.id;if(s||!i||!i.length)return null;var x=this.state.isAnimationFinished,v=Rn("recharts-bar",o),b=l&&l.allowDataOverflow,w=c&&c.allowDataOverflow,y=b||w,N=Sn(g)?this.id:g;return st.createElement(Ya,{className:v},b||w?st.createElement("defs",null,st.createElement("clipPath",{id:"clipPath-".concat(N)},st.createElement("rect",{x:b?d:d-u/2,y:w?f:f-p/2,width:b?u:u*2,height:w?p:p*2}))):null,st.createElement(Ya,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(N,")"):null},m?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,N),(!h||x)&&o0.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:s.curData}:n.data!==s.curData?{curData:n.data}:null}}])}(P.PureComponent);L9=sb;Wf(sb,"displayName","Bar");Wf(sb,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Ux.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Wf(sb,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,s=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,f=e.dataStartIndex,u=e.displayedData,p=e.offset,h=rde(n,r);if(!h)return null;var m=t.layout,g=r.type.defaultProps,x=g!==void 0?Ms(Ms({},g),r.props):r.props,v=x.dataKey,b=x.children,w=x.minPointSize,y=m==="horizontal"?o:i,N=d?y.scale.domain():null,S=dde({numericAxis:y}),j=sd(b,cM),_=u.map(function(T,D){var A,C,M,F,B,Y;d?A=nde(d[f+D],N):(A=Ml(T,v),Array.isArray(A)||(A=[S,A]));var V=ype(w,L9.defaultProps.minPointSize)(A[1],D);if(m==="horizontal"){var J,U=[o.scale(A[0]),o.scale(A[1])],X=U[0],W=U[1];C=AO({axis:i,ticks:l,bandSize:s,offset:h.offset,entry:T,index:D}),M=(J=W??X)!==null&&J!==void 0?J:void 0,F=h.size;var E=X-W;if(B=Number.isNaN(E)?0:E,Y={x:C,y:o.y,width:F,height:o.height},Math.abs(V)>0&&Math.abs(B)<Math.abs(V)){var R=Qc(B||V)*(Math.abs(V)-Math.abs(B));M-=R,B+=R}}else{var q=[i.scale(A[0]),i.scale(A[1])],L=q[0],H=q[1];if(C=L,M=AO({axis:o,ticks:c,bandSize:s,offset:h.offset,entry:T,index:D}),F=H-L,B=h.size,Y={x:i.x,y:M,width:i.width,height:B},Math.abs(V)>0&&Math.abs(F)<Math.abs(V)){var se=Qc(F||V)*(Math.abs(V)-Math.abs(F));F+=se}}return Ms(Ms(Ms({},T),{},{x:C,y:M,width:F,height:B,value:d?A:A[1],payload:T,background:Y},j&&j[D]&&j[D].props),{},{tooltipPayload:[m9(r,T)],tooltipPosition:{x:C+F/2,y:M+B/2}})});return Ms({data:_,layout:m},p)});function w1(e){"@babel/helpers - typeof";return w1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w1(e)}function Ope(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _P(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,R9(n.key),n)}}function Ppe(e,t,r){return t&&_P(e.prototype,t),r&&_P(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function AP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Kc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?AP(Object(r),!0).forEach(function(n){hN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):AP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function hN(e,t,r){return t=R9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function R9(e){var t=Ipe(e,"string");return w1(t)=="symbol"?t:t+""}function Ipe(e,t){if(w1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(w1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Dpe=function(t,r,n,s,i){var o=t.width,l=t.height,c=t.layout,d=t.children,f=Object.keys(r),u={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},p=!!_l(d,sb);return f.reduce(function(h,m){var g=r[m],x=g.orientation,v=g.domain,b=g.padding,w=b===void 0?{}:b,y=g.mirror,N=g.reversed,S="".concat(x).concat(y?"Mirror":""),j,_,T,D,A;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var C=v[1]-v[0],M=1/0,F=g.categoricalDomain.sort(FK);if(F.forEach(function(q,L){L>0&&(M=Math.min((q||0)-(F[L-1]||0),M))}),Number.isFinite(M)){var B=M/C,Y=g.layout==="vertical"?n.height:n.width;if(g.padding==="gap"&&(j=B*Y/2),g.padding==="no-gap"){var V=Vh(t.barCategoryGap,B*Y),J=B*Y/2;j=J-V-(J-V)/Y*V}}}s==="xAxis"?_=[n.left+(w.left||0)+(j||0),n.left+n.width-(w.right||0)-(j||0)]:s==="yAxis"?_=c==="horizontal"?[n.top+n.height-(w.bottom||0),n.top+(w.top||0)]:[n.top+(w.top||0)+(j||0),n.top+n.height-(w.bottom||0)-(j||0)]:_=g.range,N&&(_=[_[1],_[0]]);var U=ede(g,i,p),X=U.scale,W=U.realScaleType;X.domain(v).range(_),tde(X);var E=cde(X,Kc(Kc({},g),{},{realScaleType:W}));s==="xAxis"?(A=x==="top"&&!y||x==="bottom"&&y,T=n.left,D=u[S]-A*g.height):s==="yAxis"&&(A=x==="left"&&!y||x==="right"&&y,T=u[S]-A*g.width,D=n.top);var R=Kc(Kc(Kc({},g),E),{},{realScaleType:W,x:T,y:D,scale:X,width:s==="xAxis"?n.width:g.width,height:s==="yAxis"?n.height:g.height});return R.bandSize=ww(R,E),!g.hide&&s==="xAxis"?u[S]+=(A?-1:1)*R.height:g.hide||(u[S]+=(A?-1:1)*R.width),Kc(Kc({},h),{},hN({},m,R))},{})},B9=function(t,r){var n=t.x,s=t.y,i=r.x,o=r.y;return{x:Math.min(n,i),y:Math.min(s,o),width:Math.abs(i-n),height:Math.abs(o-s)}},Lpe=function(t){var r=t.x1,n=t.y1,s=t.x2,i=t.y2;return B9({x:r,y:n},{x:s,y:i})},$9=function(){function e(t){Ope(this,e),this.scale=t}return Ppe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=n.bandAware,i=n.position;if(r!==void 0){if(i)switch(i){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(s){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),s=n[0],i=n[n.length-1];return s<=i?r>=s&&r<=i:r>=i&&r<=s}}],[{key:"create",value:function(r){return new e(r)}}])}();hN($9,"EPS",1e-4);var L6=function(t){var r=Object.keys(t).reduce(function(n,s){return Kc(Kc({},n),{},hN({},s,$9.create(t[s])))},{});return Kc(Kc({},r),{},{apply:function(s){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return epe(s,function(c,d){return r[d].apply(c,{bandAware:o,position:l})})},isInRange:function(s){return D9(s,function(i,o){return r[o].isInRange(i)})}})};function Fpe(e){return(e%180+180)%180}var Mpe=function(t){var r=t.width,n=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=Fpe(s),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},Rpe=j0,Bpe=eb,$pe=J5;function Upe(e){return function(t,r,n){var s=Object(t);if(!Bpe(t)){var i=Rpe(r);t=$pe(t),r=function(l){return i(s[l],l,s)}}var o=e(t,r,n);return o>-1?s[i?t[o]:o]:void 0}}var zpe=Upe,qpe=T9;function Hpe(e){var t=qpe(e),r=t%1;return t===t?r?t-r:t:0}var Wpe=Hpe,Vpe=K7,Gpe=j0,Kpe=Wpe,Xpe=Math.max;function Ype(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var s=r==null?0:Kpe(r);return s<0&&(s=Xpe(n+s,0)),Vpe(e,Gpe(t),s)}var Qpe=Ype,Jpe=zpe,Zpe=Qpe,eme=Jpe(Zpe),tme=eme;const rme=fa(tme);var nme=BG(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),F6=P.createContext(void 0),M6=P.createContext(void 0),U9=P.createContext(void 0),z9=P.createContext({}),q9=P.createContext(void 0),H9=P.createContext(0),W9=P.createContext(0),CP=function(t){var r=t.state,n=r.xAxisMap,s=r.yAxisMap,i=r.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,f=nme(i);return st.createElement(F6.Provider,{value:n},st.createElement(M6.Provider,{value:s},st.createElement(z9.Provider,{value:i},st.createElement(U9.Provider,{value:f},st.createElement(q9.Provider,{value:o},st.createElement(H9.Provider,{value:d},st.createElement(W9.Provider,{value:c},l)))))))},ame=function(){return P.useContext(q9)},V9=function(t){var r=P.useContext(F6);r==null&&Kh();var n=r[t];return n==null&&Kh(),n},sme=function(){var t=P.useContext(F6);return Pf(t)},ime=function(){var t=P.useContext(M6),r=rme(t,function(n){return D9(n.domain,Number.isFinite)});return r||Pf(t)},G9=function(t){var r=P.useContext(M6);r==null&&Kh();var n=r[t];return n==null&&Kh(),n},ome=function(){var t=P.useContext(U9);return t},lme=function(){return P.useContext(z9)},R6=function(){return P.useContext(W9)},B6=function(){return P.useContext(H9)};function mx(e){"@babel/helpers - typeof";return mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mx(e)}function cme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dme(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,X9(n.key),n)}}function ume(e,t,r){return t&&dme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function fme(e,t,r){return t=Fw(t),hme(e,K9()?Reflect.construct(t,r||[],Fw(e).constructor):t.apply(e,r))}function hme(e,t){if(t&&(mx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pme(e)}function pme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(K9=function(){return!!e})()}function Fw(e){return Fw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fw(e)}function mme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&D3(e,t)}function D3(e,t){return D3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},D3(e,t)}function EP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function TP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?EP(Object(r),!0).forEach(function(n){$6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):EP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $6(e,t,r){return t=X9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X9(e){var t=xme(e,"string");return mx(t)=="symbol"?t:t+""}function xme(e,t){if(mx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(mx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function gme(e,t){return wme(e)||yme(e,t)||bme(e,t)||vme()}function vme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bme(e,t){if(e){if(typeof e=="string")return OP(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return OP(e,t)}}function OP(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function yme(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function wme(e){if(Array.isArray(e))return e}function L3(){return L3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},L3.apply(this,arguments)}var Nme=function(t,r){var n;return st.isValidElement(t)?n=st.cloneElement(t,r):cn(t)?n=t(r):n=st.createElement("line",L3({},r,{className:"recharts-reference-line-line"})),n},jme=function(t,r,n,s,i,o,l,c,d){var f=i.x,u=i.y,p=i.width,h=i.height;if(n){var m=d.y,g=t.y.apply(m,{position:o});if(Kd(d,"discard")&&!t.y.isInRange(g))return null;var x=[{x:f+p,y:g},{x:f,y:g}];return c==="left"?x.reverse():x}if(r){var v=d.x,b=t.x.apply(v,{position:o});if(Kd(d,"discard")&&!t.x.isInRange(b))return null;var w=[{x:b,y:u+h},{x:b,y:u}];return l==="top"?w.reverse():w}if(s){var y=d.segment,N=y.map(function(S){return t.apply(S,{position:o})});return Kd(d,"discard")&&Vhe(N,function(S){return!t.isInRange(S)})?null:N}return null};function kme(e){var t=e.x,r=e.y,n=e.segment,s=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=ame(),f=V9(s),u=G9(i),p=ome();if(!d||!p)return null;Ou(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var h=L6({x:f.scale,y:u.scale}),m=ni(t),g=ni(r),x=n&&n.length===2,v=jme(h,m,g,x,p,e.position,f.orientation,u.orientation,e);if(!v)return null;var b=gme(v,2),w=b[0],y=w.x,N=w.y,S=b[1],j=S.x,_=S.y,T=Kd(e,"hidden")?"url(#".concat(d,")"):void 0,D=TP(TP({clipPath:T},wn(e,!0)),{},{x1:y,y1:N,x2:j,y2:_});return st.createElement(Ya,{className:Rn("recharts-reference-line",l)},Nme(o,D),ao.renderCallByParent(e,Lpe({x1:y,y1:N,x2:j,y2:_})))}var U6=function(e){function t(){return cme(this,t),fme(this,t,arguments)}return mme(t,e),ume(t,[{key:"render",value:function(){return st.createElement(kme,this.props)}}])}(st.Component);$6(U6,"displayName","ReferenceLine");$6(U6,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function F3(){return F3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F3.apply(this,arguments)}function xx(e){"@babel/helpers - typeof";return xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xx(e)}function PP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function IP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PP(Object(r),!0).forEach(function(n){pN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _me(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Q9(n.key),n)}}function Ame(e,t,r){return t&&_me(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cme(e,t,r){return t=Mw(t),Eme(e,Y9()?Reflect.construct(t,r||[],Mw(e).constructor):t.apply(e,r))}function Eme(e,t){if(t&&(xx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Tme(e)}function Tme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y9=function(){return!!e})()}function Mw(e){return Mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mw(e)}function Ome(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M3(e,t)}function M3(e,t){return M3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},M3(e,t)}function pN(e,t,r){return t=Q9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q9(e){var t=Pme(e,"string");return xx(t)=="symbol"?t:t+""}function Pme(e,t){if(xx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(xx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ime=function(t){var r=t.x,n=t.y,s=t.xAxis,i=t.yAxis,o=L6({x:s.scale,y:i.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return Kd(t,"discard")&&!o.isInRange(l)?null:l},mN=function(e){function t(){return Sme(this,t),Cme(this,t,arguments)}return Ome(t,e),Ame(t,[{key:"render",value:function(){var n=this.props,s=n.x,i=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,d=ni(s),f=ni(i);if(Ou(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!f)return null;var u=Ime(this.props);if(!u)return null;var p=u.x,h=u.y,m=this.props,g=m.shape,x=m.className,v=Kd(this.props,"hidden")?"url(#".concat(c,")"):void 0,b=IP(IP({clipPath:v},wn(this.props,!0)),{},{cx:p,cy:h});return st.createElement(Ya,{className:Rn("recharts-reference-dot",x)},t.renderDot(g,b),ao.renderCallByParent(this.props,{x:p-o,y:h-o,width:2*o,height:2*o}))}}])}(st.Component);pN(mN,"displayName","ReferenceDot");pN(mN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});pN(mN,"renderDot",function(e,t){var r;return st.isValidElement(e)?r=st.cloneElement(e,t):cn(e)?r=e(t):r=st.createElement(D6,F3({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function R3(){return R3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},R3.apply(this,arguments)}function gx(e){"@babel/helpers - typeof";return gx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gx(e)}function DP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function LP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?DP(Object(r),!0).forEach(function(n){xN(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):DP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Dme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lme(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Z9(n.key),n)}}function Fme(e,t,r){return t&&Lme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Mme(e,t,r){return t=Rw(t),Rme(e,J9()?Reflect.construct(t,r||[],Rw(e).constructor):t.apply(e,r))}function Rme(e,t){if(t&&(gx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bme(e)}function Bme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(J9=function(){return!!e})()}function Rw(e){return Rw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rw(e)}function $me(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&B3(e,t)}function B3(e,t){return B3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},B3(e,t)}function xN(e,t,r){return t=Z9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Z9(e){var t=Ume(e,"string");return gx(t)=="symbol"?t:t+""}function Ume(e,t){if(gx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(gx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var zme=function(t,r,n,s,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,f=i.xAxis,u=i.yAxis;if(!f||!u)return null;var p=L6({x:f.scale,y:u.scale}),h={x:t?p.x.apply(o,{position:"start"}):p.x.rangeMin,y:n?p.y.apply(c,{position:"start"}):p.y.rangeMin},m={x:r?p.x.apply(l,{position:"end"}):p.x.rangeMax,y:s?p.y.apply(d,{position:"end"}):p.y.rangeMax};return Kd(i,"discard")&&(!p.isInRange(h)||!p.isInRange(m))?null:B9(h,m)},gN=function(e){function t(){return Dme(this,t),Mme(this,t,arguments)}return $me(t,e),Fme(t,[{key:"render",value:function(){var n=this.props,s=n.x1,i=n.x2,o=n.y1,l=n.y2,c=n.className,d=n.alwaysShow,f=n.clipPathId;Ou(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=ni(s),p=ni(i),h=ni(o),m=ni(l),g=this.props.shape;if(!u&&!p&&!h&&!m&&!g)return null;var x=zme(u,p,h,m,this.props);if(!x&&!g)return null;var v=Kd(this.props,"hidden")?"url(#".concat(f,")"):void 0;return st.createElement(Ya,{className:Rn("recharts-reference-area",c)},t.renderRect(g,LP(LP({clipPath:v},wn(this.props,!0)),x)),ao.renderCallByParent(this.props,x))}}])}(st.Component);xN(gN,"displayName","ReferenceArea");xN(gN,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});xN(gN,"renderRect",function(e,t){var r;return st.isValidElement(e)?r=st.cloneElement(e,t):cn(e)?r=e(t):r=st.createElement(I6,R3({},t,{className:"recharts-reference-area-rect"})),r});function eR(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],s=0;s<e.length;s+=t)n.push(e[s]);return n}function qme(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return Mpe(n,r)}function Hme(e,t,r){var n=r==="width",s=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:n?s:i,end:n?s+o:i+l}:{start:n?s+o:i+l,end:n?s:i}}function Bw(e,t,r,n,s){if(e*t<e*n||e*t>e*s)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-s)<=0}function Wme(e,t){return eR(e,t+1)}function Vme(e,t,r,n,s){for(var i=(n||[]).slice(),o=t.start,l=t.end,c=0,d=1,f=o,u=function(){var m=n==null?void 0:n[c];if(m===void 0)return{v:eR(n,d)};var g=c,x,v=function(){return x===void 0&&(x=r(m,g)),x},b=m.coordinate,w=c===0||Bw(e,b,v,f,l);w||(c=0,f=o,d+=1),w&&(f=b+e*(v()/2+s),c+=d)},p;d<=i.length;)if(p=u(),p)return p.v;return[]}function N1(e){"@babel/helpers - typeof";return N1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N1(e)}function FP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?FP(Object(r),!0).forEach(function(n){Gme(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):FP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gme(e,t,r){return t=Kme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Kme(e){var t=Xme(e,"string");return N1(t)=="symbol"?t:t+""}function Xme(e,t){if(N1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(N1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yme(e,t,r,n,s){for(var i=(n||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(p){var h=i[p],m,g=function(){return m===void 0&&(m=r(h,p)),m};if(p===o-1){var x=e*(h.coordinate+e*g()/2-c);i[p]=h=eo(eo({},h),{},{tickCoord:x>0?h.coordinate-x*e:h.coordinate})}else i[p]=h=eo(eo({},h),{},{tickCoord:h.coordinate});var v=Bw(e,h.tickCoord,g,l,c);v&&(c=h.tickCoord-e*(g()/2+s),i[p]=eo(eo({},h),{},{isShow:!0}))},f=o-1;f>=0;f--)d(f);return i}function Qme(e,t,r,n,s,i){var o=(n||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var f=n[l-1],u=r(f,l-1),p=e*(f.coordinate+e*u/2-d);o[l-1]=f=eo(eo({},f),{},{tickCoord:p>0?f.coordinate-p*e:f.coordinate});var h=Bw(e,f.tickCoord,function(){return u},c,d);h&&(d=f.tickCoord-e*(u/2+s),o[l-1]=eo(eo({},f),{},{isShow:!0}))}for(var m=i?l-1:l,g=function(b){var w=o[b],y,N=function(){return y===void 0&&(y=r(w,b)),y};if(b===0){var S=e*(w.coordinate-e*N()/2-c);o[b]=w=eo(eo({},w),{},{tickCoord:S<0?w.coordinate-S*e:w.coordinate})}else o[b]=w=eo(eo({},w),{},{tickCoord:w.coordinate});var j=Bw(e,w.tickCoord,N,c,d);j&&(c=w.tickCoord+e*(N()/2+s),o[b]=eo(eo({},w),{},{isShow:!0}))},x=0;x<m;x++)g(x);return o}function z6(e,t,r){var n=e.tick,s=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,f=e.unit,u=e.angle;if(!s||!s.length||!n)return[];if(Yt(c)||Ux.isSsr)return Wme(s,typeof c=="number"&&Yt(c)?c:0);var p=[],h=l==="top"||l==="bottom"?"width":"height",m=f&&h==="width"?uv(f,{fontSize:t,letterSpacing:r}):{width:0,height:0},g=function(w,y){var N=cn(d)?d(w.value,y):w.value;return h==="width"?qme(uv(N,{fontSize:t,letterSpacing:r}),m,u):uv(N,{fontSize:t,letterSpacing:r})[h]},x=s.length>=2?Qc(s[1].coordinate-s[0].coordinate):1,v=Hme(i,x,h);return c==="equidistantPreserveStart"?Vme(x,v,g,s,o):(c==="preserveStart"||c==="preserveStartEnd"?p=Qme(x,v,g,s,o,c==="preserveStartEnd"):p=Yme(x,v,g,s,o),p.filter(function(b){return b.isShow}))}var Jme=["viewBox"],Zme=["viewBox"],exe=["ticks"];function vx(e){"@babel/helpers - typeof";return vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vx(e)}function mm(){return mm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mm.apply(this,arguments)}function MP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function Qs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?MP(Object(r),!0).forEach(function(n){q6(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Gj(e,t){if(e==null)return{};var r=txe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function txe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function rxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,rR(n.key),n)}}function nxe(e,t,r){return t&&RP(e.prototype,t),r&&RP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function axe(e,t,r){return t=$w(t),sxe(e,tR()?Reflect.construct(t,r||[],$w(e).constructor):t.apply(e,r))}function sxe(e,t){if(t&&(vx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ixe(e)}function ixe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(tR=function(){return!!e})()}function $w(e){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$w(e)}function oxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$3(e,t)}function $3(e,t){return $3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},$3(e,t)}function q6(e,t,r){return t=rR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function rR(e){var t=lxe(e,"string");return vx(t)=="symbol"?t:t+""}function lxe(e,t){if(vx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(vx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Wx=function(e){function t(r){var n;return rxe(this,t),n=axe(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return oxe(t,e),nxe(t,[{key:"shouldComponentUpdate",value:function(n,s){var i=n.viewBox,o=Gj(n,Jme),l=this.props,c=l.viewBox,d=Gj(l,Zme);return!Sm(i,c)||!Sm(o,d)||!Sm(s,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var s=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var s=this.props,i=s.x,o=s.y,l=s.width,c=s.height,d=s.orientation,f=s.tickSize,u=s.mirror,p=s.tickMargin,h,m,g,x,v,b,w=u?-1:1,y=n.tickSize||f,N=Yt(n.tickCoord)?n.tickCoord:n.coordinate;switch(d){case"top":h=m=n.coordinate,x=o+ +!u*c,g=x-w*y,b=g-w*p,v=N;break;case"left":g=x=n.coordinate,m=i+ +!u*l,h=m-w*y,v=h-w*p,b=N;break;case"right":g=x=n.coordinate,m=i+ +u*l,h=m+w*y,v=h+w*p,b=N;break;default:h=m=n.coordinate,x=o+ +u*c,g=x+w*y,b=g+w*p,v=N;break}return{line:{x1:h,y1:g,x2:m,y2:x},tick:{x:v,y:b}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o;switch(s){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,s=n.orientation,i=n.mirror,o="end";switch(s){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,s=n.x,i=n.y,o=n.width,l=n.height,c=n.orientation,d=n.mirror,f=n.axisLine,u=Qs(Qs(Qs({},wn(this.props,!1)),wn(f,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var p=+(c==="top"&&!d||c==="bottom"&&d);u=Qs(Qs({},u),{},{x1:s,y1:i+p*l,x2:s+o,y2:i+p*l})}else{var h=+(c==="left"&&!d||c==="right"&&d);u=Qs(Qs({},u),{},{x1:s+h*o,y1:i,x2:s+h*o,y2:i+l})}return st.createElement("line",mm({},u,{className:Rn("recharts-cartesian-axis-line",pc(f,"className"))}))}},{key:"renderTicks",value:function(n,s,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,f=l.tick,u=l.tickFormatter,p=l.unit,h=z6(Qs(Qs({},this.props),{},{ticks:n}),s,i),m=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),x=wn(this.props,!1),v=wn(f,!1),b=Qs(Qs({},x),{},{fill:"none"},wn(c,!1)),w=h.map(function(y,N){var S=o.getTickLineCoord(y),j=S.line,_=S.tick,T=Qs(Qs(Qs(Qs({textAnchor:m,verticalAnchor:g},x),{},{stroke:"none",fill:d},v),_),{},{index:N,payload:y,visibleTicksCount:h.length,tickFormatter:u});return st.createElement(Ya,mm({className:"recharts-cartesian-axis-tick",key:"tick-".concat(y.value,"-").concat(y.coordinate,"-").concat(y.tickCoord)},V2(o.props,y,N)),c&&st.createElement("line",mm({},b,j,{className:Rn("recharts-cartesian-axis-tick-line",pc(c,"className"))})),f&&t.renderTickItem(f,T,"".concat(cn(u)?u(y.value,N):y.value).concat(p||"")))});return st.createElement("g",{className:"recharts-cartesian-axis-ticks"},w)}},{key:"render",value:function(){var n=this,s=this.props,i=s.axisLine,o=s.width,l=s.height,c=s.ticksGenerator,d=s.className,f=s.hide;if(f)return null;var u=this.props,p=u.ticks,h=Gj(u,exe),m=p;return cn(c)&&(m=p&&p.length>0?c(this.props):c(h)),o<=0||l<=0||!m||!m.length?null:st.createElement(Ya,{className:Rn("recharts-cartesian-axis",d),ref:function(x){n.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(m,this.state.fontSize,this.state.letterSpacing),ao.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,s,i){var o,l=Rn(s.className,"recharts-cartesian-axis-tick-value");return st.isValidElement(n)?o=st.cloneElement(n,Qs(Qs({},s),{},{className:l})):cn(n)?o=n(Qs(Qs({},s),{},{className:l})):o=st.createElement(iw,mm({},s,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(P.Component);q6(Wx,"displayName","CartesianAxis");q6(Wx,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var cxe=["x1","y1","x2","y2","key"],dxe=["offset"];function Xh(e){"@babel/helpers - typeof";return Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xh(e)}function BP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function so(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BP(Object(r),!0).forEach(function(n){uxe(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uxe(e,t,r){return t=fxe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function fxe(e){var t=hxe(e,"string");return Xh(t)=="symbol"?t:t+""}function hxe(e,t){if(Xh(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Xh(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mh(){return mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},mh.apply(this,arguments)}function $P(e,t){if(e==null)return{};var r=pxe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function pxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var mxe=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,s=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return st.createElement("rect",{x:s,y:i,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function nR(e,t){var r;if(st.isValidElement(e))r=st.cloneElement(e,t);else if(cn(e))r=e(t);else{var n=t.x1,s=t.y1,i=t.x2,o=t.y2,l=t.key,c=$P(t,cxe),d=wn(c,!1);d.offset;var f=$P(d,dxe);r=st.createElement("line",mh({},f,{x1:n,y1:s,x2:i,y2:o,fill:"none",key:l}))}return r}function xxe(e){var t=e.x,r=e.width,n=e.horizontal,s=n===void 0?!0:n,i=e.horizontalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=so(so({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return nR(s,d)});return st.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function gxe(e){var t=e.y,r=e.height,n=e.vertical,s=n===void 0?!0:n,i=e.verticalPoints;if(!s||!i||!i.length)return null;var o=i.map(function(l,c){var d=so(so({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return nR(s,d)});return st.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function vxe(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,s=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var f=l.map(function(p){return Math.round(p+s-s)}).sort(function(p,h){return p-h});s!==f[0]&&f.unshift(0);var u=f.map(function(p,h){var m=!f[h+1],g=m?s+o-p:f[h+1]-p;if(g<=0)return null;var x=h%t.length;return st.createElement("rect",{key:"react-".concat(h),y:p,x:n,height:g,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return st.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function bxe(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,s=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!r||!n||!n.length)return null;var f=d.map(function(p){return Math.round(p+i-i)}).sort(function(p,h){return p-h});i!==f[0]&&f.unshift(0);var u=f.map(function(p,h){var m=!f[h+1],g=m?i+l-p:f[h+1]-p;if(g<=0)return null;var x=h%n.length;return st.createElement("rect",{key:"react-".concat(h),x:p,y:o,width:g,height:c,stroke:"none",fill:n[x],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return st.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var yxe=function(t,r){var n=t.xAxis,s=t.width,i=t.height,o=t.offset;return h9(z6(so(so(so({},Wx.defaultProps),n),{},{ticks:ju(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.left,o.left+o.width,r)},wxe=function(t,r){var n=t.yAxis,s=t.width,i=t.height,o=t.offset;return h9(z6(so(so(so({},Wx.defaultProps),n),{},{ticks:ju(n,!0),viewBox:{x:0,y:0,width:s,height:i}})),o.top,o.top+o.height,r)},Vp={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function aR(e){var t,r,n,s,i,o,l=R6(),c=B6(),d=lme(),f=so(so({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Vp.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:Vp.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:Vp.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:Vp.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Vp.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Vp.verticalFill,x:Yt(e.x)?e.x:d.left,y:Yt(e.y)?e.y:d.top,width:Yt(e.width)?e.width:d.width,height:Yt(e.height)?e.height:d.height}),u=f.x,p=f.y,h=f.width,m=f.height,g=f.syncWithTicks,x=f.horizontalValues,v=f.verticalValues,b=sme(),w=ime();if(!Yt(h)||h<=0||!Yt(m)||m<=0||!Yt(u)||u!==+u||!Yt(p)||p!==+p)return null;var y=f.verticalCoordinatesGenerator||yxe,N=f.horizontalCoordinatesGenerator||wxe,S=f.horizontalPoints,j=f.verticalPoints;if((!S||!S.length)&&cn(N)){var _=x&&x.length,T=N({yAxis:w?so(so({},w),{},{ticks:_?x:w.ticks}):void 0,width:l,height:c,offset:d},_?!0:g);Ou(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Xh(T),"]")),Array.isArray(T)&&(S=T)}if((!j||!j.length)&&cn(y)){var D=v&&v.length,A=y({xAxis:b?so(so({},b),{},{ticks:D?v:b.ticks}):void 0,width:l,height:c,offset:d},D?!0:g);Ou(Array.isArray(A),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Xh(A),"]")),Array.isArray(A)&&(j=A)}return st.createElement("g",{className:"recharts-cartesian-grid"},st.createElement(mxe,{fill:f.fill,fillOpacity:f.fillOpacity,x:f.x,y:f.y,width:f.width,height:f.height,ry:f.ry}),st.createElement(xxe,mh({},f,{offset:d,horizontalPoints:S,xAxis:b,yAxis:w})),st.createElement(gxe,mh({},f,{offset:d,verticalPoints:j,xAxis:b,yAxis:w})),st.createElement(vxe,mh({},f,{horizontalPoints:S})),st.createElement(bxe,mh({},f,{verticalPoints:j})))}aR.displayName="CartesianGrid";var Nxe=["layout","type","stroke","connectNulls","isRange","ref"],jxe=["key"],sR;function bx(e){"@babel/helpers - typeof";return bx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bx(e)}function iR(e,t){if(e==null)return{};var r=kxe(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function kxe(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function xh(){return xh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xh.apply(this,arguments)}function UP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function jf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?UP(Object(r),!0).forEach(function(n){Bd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):UP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Sxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lR(n.key),n)}}function _xe(e,t,r){return t&&zP(e.prototype,t),r&&zP(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Axe(e,t,r){return t=Uw(t),Cxe(e,oR()?Reflect.construct(t,r||[],Uw(e).constructor):t.apply(e,r))}function Cxe(e,t){if(t&&(bx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Exe(e)}function Exe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oR=function(){return!!e})()}function Uw(e){return Uw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Uw(e)}function Txe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U3(e,t)}function U3(e,t){return U3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},U3(e,t)}function Bd(e,t,r){return t=lR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lR(e){var t=Oxe(e,"string");return bx(t)=="symbol"?t:t+""}function Oxe(e,t){if(bx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(bx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var A0=function(e){function t(){var r;Sxe(this,t);for(var n=arguments.length,s=new Array(n),i=0;i<n;i++)s[i]=arguments[i];return r=Axe(this,t,[].concat(s)),Bd(r,"state",{isAnimationFinished:!0}),Bd(r,"id",Z1("recharts-area-")),Bd(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),cn(o)&&o()}),Bd(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),cn(o)&&o()}),r}return Txe(t,e),_xe(t,[{key:"renderDots",value:function(n,s,i){var o=this.props.isAnimationActive,l=this.state.isAnimationFinished;if(o&&!l)return null;var c=this.props,d=c.dot,f=c.points,u=c.dataKey,p=wn(this.props,!1),h=wn(d,!0),m=f.map(function(x,v){var b=jf(jf(jf({key:"dot-".concat(v),r:3},p),h),{},{index:v,cx:x.x,cy:x.y,dataKey:u,value:x.value,payload:x.payload,points:f});return t.renderDotItem(d,b)}),g={clipPath:n?"url(#clipPath-".concat(s?"":"dots-").concat(i,")"):null};return st.createElement(Ya,xh({className:"recharts-area-dots"},g),m)}},{key:"renderHorizontalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].x,d=o[o.length-1].x,f=n*Math.abs(c-d),u=Hf(o.map(function(p){return p.y||0}));return Yt(i)&&typeof i=="number"?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(Hf(i.map(function(p){return p.y||0})),u)),Yt(u)?st.createElement("rect",{x:c<d?c:c-f,y:0,width:f,height:Math.floor(u+(l?parseInt("".concat(l),10):1))}):null}},{key:"renderVerticalRect",value:function(n){var s=this.props,i=s.baseLine,o=s.points,l=s.strokeWidth,c=o[0].y,d=o[o.length-1].y,f=n*Math.abs(c-d),u=Hf(o.map(function(p){return p.x||0}));return Yt(i)&&typeof i=="number"?u=Math.max(i,u):i&&Array.isArray(i)&&i.length&&(u=Math.max(Hf(i.map(function(p){return p.x||0})),u)),Yt(u)?st.createElement("rect",{x:0,y:c<d?c:c-f,width:u+(l?parseInt("".concat(l),10):1),height:Math.floor(f)}):null}},{key:"renderClipRect",value:function(n){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(n):this.renderHorizontalRect(n)}},{key:"renderAreaStatically",value:function(n,s,i,o){var l=this.props,c=l.layout,d=l.type,f=l.stroke,u=l.connectNulls,p=l.isRange;l.ref;var h=iR(l,Nxe);return st.createElement(Ya,{clipPath:i?"url(#clipPath-".concat(o,")"):null},st.createElement(pv,xh({},wn(h,!0),{points:n,connectNulls:u,type:d,baseLine:s,layout:c,stroke:"none",className:"recharts-area-area"})),f!=="none"&&st.createElement(pv,xh({},wn(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:u,fill:"none",points:n})),f!=="none"&&p&&st.createElement(pv,xh({},wn(this.props,!1),{className:"recharts-area-curve",layout:c,type:d,connectNulls:u,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(n,s){var i=this,o=this.props,l=o.points,c=o.baseLine,d=o.isAnimationActive,f=o.animationBegin,u=o.animationDuration,p=o.animationEasing,h=o.animationId,m=this.state,g=m.prevPoints,x=m.prevBaseLine;return st.createElement(Wu,{begin:f,duration:u,isActive:d,easing:p,from:{t:0},to:{t:1},key:"area-".concat(h),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var b=v.t;if(g){var w=g.length/l.length,y=l.map(function(_,T){var D=Math.floor(T*w);if(g[D]){var A=g[D],C=cc(A.x,_.x),M=cc(A.y,_.y);return jf(jf({},_),{},{x:C(b),y:M(b)})}return _}),N;if(Yt(c)&&typeof c=="number"){var S=cc(x,c);N=S(b)}else if(Sn(c)||Mx(c)){var j=cc(x,0);N=j(b)}else N=c.map(function(_,T){var D=Math.floor(T*w);if(x[D]){var A=x[D],C=cc(A.x,_.x),M=cc(A.y,_.y);return jf(jf({},_),{},{x:C(b),y:M(b)})}return _});return i.renderAreaStatically(y,N,n,s)}return st.createElement(Ya,null,st.createElement("defs",null,st.createElement("clipPath",{id:"animationClipPath-".concat(s)},i.renderClipRect(b))),st.createElement(Ya,{clipPath:"url(#animationClipPath-".concat(s,")")},i.renderAreaStatically(l,c,n,s)))})}},{key:"renderArea",value:function(n,s){var i=this.props,o=i.points,l=i.baseLine,c=i.isAnimationActive,d=this.state,f=d.prevPoints,u=d.prevBaseLine,p=d.totalLength;return c&&o&&o.length&&(!f&&p>0||!t1(f,o)||!t1(u,l))?this.renderAreaWithAnimation(n,s):this.renderAreaStatically(o,l,n,s)}},{key:"render",value:function(){var n,s=this.props,i=s.hide,o=s.dot,l=s.points,c=s.className,d=s.top,f=s.left,u=s.xAxis,p=s.yAxis,h=s.width,m=s.height,g=s.isAnimationActive,x=s.id;if(i||!l||!l.length)return null;var v=this.state.isAnimationFinished,b=l.length===1,w=Rn("recharts-area",c),y=u&&u.allowDataOverflow,N=p&&p.allowDataOverflow,S=y||N,j=Sn(x)?this.id:x,_=(n=wn(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},T=_.r,D=T===void 0?3:T,A=_.strokeWidth,C=A===void 0?2:A,M=WK(o)?o:{},F=M.clipDot,B=F===void 0?!0:F,Y=D*2+C;return st.createElement(Ya,{className:w},y||N?st.createElement("defs",null,st.createElement("clipPath",{id:"clipPath-".concat(j)},st.createElement("rect",{x:y?f:f-h/2,y:N?d:d-m/2,width:y?h:h*2,height:N?m:m*2})),!B&&st.createElement("clipPath",{id:"clipPath-dots-".concat(j)},st.createElement("rect",{x:f-Y/2,y:d-Y/2,width:h+Y,height:m+Y}))):null,b?null:this.renderArea(S,j),(o||b)&&this.renderDots(S,B,j),(!g||v)&&o0.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,s){return n.animationId!==s.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,curBaseLine:n.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:n.points!==s.curPoints||n.baseLine!==s.curBaseLine?{curPoints:n.points,curBaseLine:n.baseLine}:null}}])}(P.PureComponent);sR=A0;Bd(A0,"displayName","Area");Bd(A0,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Ux.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});Bd(A0,"getBaseValue",function(e,t,r,n){var s=e.layout,i=e.baseValue,o=t.props.baseValue,l=o??i;if(Yt(l)&&typeof l=="number")return l;var c=s==="horizontal"?n:r,d=c.scale.domain();if(c.type==="number"){var f=Math.max(d[0],d[1]),u=Math.min(d[0],d[1]);return l==="dataMin"?u:l==="dataMax"||f<0?f:Math.max(Math.min(d[0],d[1]),0)}return l==="dataMin"?d[0]:l==="dataMax"?d[1]:d[0]});Bd(A0,"getComposedData",function(e){var t=e.props,r=e.item,n=e.xAxis,s=e.yAxis,i=e.xAxisTicks,o=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,f=e.dataStartIndex,u=e.displayedData,p=e.offset,h=t.layout,m=d&&d.length,g=sR.getBaseValue(t,r,n,s),x=h==="horizontal",v=!1,b=u.map(function(y,N){var S;m?S=d[f+N]:(S=Ml(y,c),Array.isArray(S)?v=!0:S=[g,S]);var j=S[1]==null||m&&Ml(y,c)==null;return x?{x:_O({axis:n,ticks:i,bandSize:l,entry:y,index:N}),y:j?null:s.scale(S[1]),value:S,payload:y}:{x:j?null:n.scale(S[1]),y:_O({axis:s,ticks:o,bandSize:l,entry:y,index:N}),value:S,payload:y}}),w;return m||v?w=b.map(function(y){var N=Array.isArray(y.value)?y.value[0]:null;return x?{x:y.x,y:N!=null&&y.y!=null?s.scale(N):null}:{x:N!=null?n.scale(N):null,y:y.y}}):w=x?s.scale(g):n.scale(g),jf({points:b,baseLine:w,layout:h,isRange:v},p)});Bd(A0,"renderDotItem",function(e,t){var r;if(st.isValidElement(e))r=st.cloneElement(e,t);else if(cn(e))r=e(t);else{var n=Rn("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,i=iR(t,jxe);r=st.createElement(D6,xh({},i,{key:s,className:n}))}return r});function yx(e){"@babel/helpers - typeof";return yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(e)}function Pxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ixe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,uR(n.key),n)}}function Dxe(e,t,r){return t&&Ixe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lxe(e,t,r){return t=zw(t),Fxe(e,cR()?Reflect.construct(t,r||[],zw(e).constructor):t.apply(e,r))}function Fxe(e,t){if(t&&(yx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mxe(e)}function Mxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(cR=function(){return!!e})()}function zw(e){return zw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zw(e)}function Rxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z3(e,t)}function z3(e,t){return z3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},z3(e,t)}function dR(e,t,r){return t=uR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uR(e){var t=Bxe(e,"string");return yx(t)=="symbol"?t:t+""}function Bxe(e,t){if(yx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(yx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function q3(){return q3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},q3.apply(this,arguments)}function $xe(e){var t=e.xAxisId,r=R6(),n=B6(),s=V9(t);return s==null?null:P.createElement(Wx,q3({},s,{className:Rn("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return ju(o,!0)}}))}var vN=function(e){function t(){return Pxe(this,t),Lxe(this,t,arguments)}return Rxe(t,e),Dxe(t,[{key:"render",value:function(){return P.createElement($xe,this.props)}}])}(P.Component);dR(vN,"displayName","XAxis");dR(vN,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function wx(e){"@babel/helpers - typeof";return wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wx(e)}function Uxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zxe(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pR(n.key),n)}}function qxe(e,t,r){return t&&zxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Hxe(e,t,r){return t=qw(t),Wxe(e,fR()?Reflect.construct(t,r||[],qw(e).constructor):t.apply(e,r))}function Wxe(e,t){if(t&&(wx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vxe(e)}function Vxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fR=function(){return!!e})()}function qw(e){return qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qw(e)}function Gxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&H3(e,t)}function H3(e,t){return H3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},H3(e,t)}function hR(e,t,r){return t=pR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pR(e){var t=Kxe(e,"string");return wx(t)=="symbol"?t:t+""}function Kxe(e,t){if(wx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(wx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function W3(){return W3=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},W3.apply(this,arguments)}var Xxe=function(t){var r=t.yAxisId,n=R6(),s=B6(),i=G9(r);return i==null?null:P.createElement(Wx,W3({},i,{className:Rn("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(l){return ju(l,!0)}}))},bN=function(e){function t(){return Uxe(this,t),Hxe(this,t,arguments)}return Gxe(t,e),qxe(t,[{key:"render",value:function(){return P.createElement(Xxe,this.props)}}])}(P.Component);hR(bN,"displayName","YAxis");hR(bN,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function qP(e){return Zxe(e)||Jxe(e)||Qxe(e)||Yxe()}function Yxe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qxe(e,t){if(e){if(typeof e=="string")return V3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return V3(e,t)}}function Jxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Zxe(e){if(Array.isArray(e))return V3(e)}function V3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var G3=function(t,r,n,s,i){var o=sd(t,U6),l=sd(t,mN),c=[].concat(qP(o),qP(l)),d=sd(t,gN),f="".concat(s,"Id"),u=s[0],p=r;if(c.length&&(p=c.reduce(function(g,x){if(x.props[f]===n&&Kd(x.props,"extendDomain")&&Yt(x.props[u])){var v=x.props[u];return[Math.min(g[0],v),Math.max(g[1],v)]}return g},p)),d.length){var h="".concat(u,"1"),m="".concat(u,"2");p=d.reduce(function(g,x){if(x.props[f]===n&&Kd(x.props,"extendDomain")&&Yt(x.props[h])&&Yt(x.props[m])){var v=x.props[h],b=x.props[m];return[Math.min(g[0],v,b),Math.max(g[1],v,b)]}return g},p)}return i&&i.length&&(p=i.reduce(function(g,x){return Yt(x)?[Math.min(g[0],x),Math.max(g[1],x)]:g},p)),p},mR={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function s(c,d,f){this.fn=c,this.context=d,this.once=f||!1}function i(c,d,f,u,p){if(typeof f!="function")throw new TypeError("The listener must be a function");var h=new s(f,u||c,p),m=r?r+d:d;return c._events[m]?c._events[m].fn?c._events[m]=[c._events[m],h]:c._events[m].push(h):(c._events[m]=h,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new n:delete c._events[d]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],f,u;if(this._eventsCount===0)return d;for(u in f=this._events)t.call(f,u)&&d.push(r?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(f)):d},l.prototype.listeners=function(d){var f=r?r+d:d,u=this._events[f];if(!u)return[];if(u.fn)return[u.fn];for(var p=0,h=u.length,m=new Array(h);p<h;p++)m[p]=u[p].fn;return m},l.prototype.listenerCount=function(d){var f=r?r+d:d,u=this._events[f];return u?u.fn?1:u.length:0},l.prototype.emit=function(d,f,u,p,h,m){var g=r?r+d:d;if(!this._events[g])return!1;var x=this._events[g],v=arguments.length,b,w;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),v){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,f),!0;case 3:return x.fn.call(x.context,f,u),!0;case 4:return x.fn.call(x.context,f,u,p),!0;case 5:return x.fn.call(x.context,f,u,p,h),!0;case 6:return x.fn.call(x.context,f,u,p,h,m),!0}for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];x.fn.apply(x.context,b)}else{var y=x.length,N;for(w=0;w<y;w++)switch(x[w].once&&this.removeListener(d,x[w].fn,void 0,!0),v){case 1:x[w].fn.call(x[w].context);break;case 2:x[w].fn.call(x[w].context,f);break;case 3:x[w].fn.call(x[w].context,f,u);break;case 4:x[w].fn.call(x[w].context,f,u,p);break;default:if(!b)for(N=1,b=new Array(v-1);N<v;N++)b[N-1]=arguments[N];x[w].fn.apply(x[w].context,b)}}return!0},l.prototype.on=function(d,f,u){return i(this,d,f,u,!1)},l.prototype.once=function(d,f,u){return i(this,d,f,u,!0)},l.prototype.removeListener=function(d,f,u,p){var h=r?r+d:d;if(!this._events[h])return this;if(!f)return o(this,h),this;var m=this._events[h];if(m.fn)m.fn===f&&(!p||m.once)&&(!u||m.context===u)&&o(this,h);else{for(var g=0,x=[],v=m.length;g<v;g++)(m[g].fn!==f||p&&!m[g].once||u&&m[g].context!==u)&&x.push(m[g]);x.length?this._events[h]=x.length===1?x[0]:x:o(this,h)}return this},l.prototype.removeAllListeners=function(d){var f;return d?(f=r?r+d:d,this._events[f]&&o(this,f)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(mR);var ege=mR.exports;const tge=fa(ege);var Kj=new tge,Xj="recharts.syncMouseEvents";function j1(e){"@babel/helpers - typeof";return j1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j1(e)}function rge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xR(n.key),n)}}function age(e,t,r){return t&&nge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yj(e,t,r){return t=xR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xR(e){var t=sge(e,"string");return j1(t)=="symbol"?t:t+""}function sge(e,t){if(j1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(j1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ige=function(){function e(){rge(this,e),Yj(this,"activeIndex",0),Yj(this,"coordinateList",[]),Yj(this,"layout","horizontal")}return age(e,[{key:"setDetails",value:function(r){var n,s=r.coordinateList,i=s===void 0?null:s,o=r.container,l=o===void 0?null:o,c=r.layout,d=c===void 0?null:c,f=r.offset,u=f===void 0?null:f,p=r.mouseHandlerCallback,h=p===void 0?null:p;this.coordinateList=(n=i??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=h??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),i=s.x,o=s.y,l=s.height,c=this.coordinateList[this.activeIndex].coordinate,d=((r=window)===null||r===void 0?void 0:r.scrollX)||0,f=((n=window)===null||n===void 0?void 0:n.scrollY)||0,u=i+c+d,p=o+this.offset.top+l/2+f;this.mouseHandlerCallback({pageX:u,pageY:p})}}}])}();function oge(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],s=e==null?void 0:e[1];if(n&&s&&Yt(n)&&Yt(s))return!0}return!1}function lge(e,t,r,n){var s=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-s,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function gR(e){var t=e.cx,r=e.cy,n=e.radius,s=e.startAngle,i=e.endAngle,o=Di(t,r,n,s),l=Di(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:s,endAngle:i}}function cge(e,t,r){var n,s,i,o;if(e==="horizontal")n=t.x,i=n,s=r.top,o=r.top+r.height;else if(e==="vertical")s=t.y,o=s,n=r.left,i=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,f=t.outerRadius,u=t.angle,p=Di(l,c,d,u),h=Di(l,c,f,u);n=p.x,s=p.y,i=h.x,o=h.y}else return gR(t);return[{x:n,y:s},{x:i,y:o}]}function k1(e){"@babel/helpers - typeof";return k1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},k1(e)}function HP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function by(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?HP(Object(r),!0).forEach(function(n){dge(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):HP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dge(e,t,r){return t=uge(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uge(e){var t=fge(e,"string");return k1(t)=="symbol"?t:t+""}function fge(e,t){if(k1(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(k1(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function hge(e){var t,r,n=e.element,s=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,f=e.tooltipAxisBandSize,u=e.layout,p=e.chartName,h=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!h||!i||!o||p!=="ScatterChart"&&s!=="axis")return null;var m,g=pv;if(p==="ScatterChart")m=o,g=x0e;else if(p==="BarChart")m=lge(u,o,c,f),g=I6;else if(u==="radial"){var x=gR(o),v=x.cx,b=x.cy,w=x.radius,y=x.startAngle,N=x.endAngle;m={cx:v,cy:b,startAngle:y,endAngle:N,innerRadius:w,outerRadius:w},g=v9}else m={points:cge(u,o,c)},g=pv;var S=by(by(by(by({stroke:"#ccc",pointerEvents:"none"},c),m),wn(h,!1)),{},{payload:l,payloadIndex:d,className:Rn("recharts-tooltip-cursor",h.className)});return P.isValidElement(h)?P.cloneElement(h,S):P.createElement(g,S)}var pge=["item"],mge=["children","className","width","height","style","compact","title","desc"];function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function xm(){return xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xm.apply(this,arguments)}function WP(e,t){return vge(e)||gge(e,t)||bR(e,t)||xge()}function xge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gge(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,s,i,o,l=[],c=!0,d=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(c=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(f){d=!0,s=f}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(d)throw s}}return l}}function vge(e){if(Array.isArray(e))return e}function VP(e,t){if(e==null)return{};var r=bge(e,t),n,s;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)n=i[s],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function bge(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wge(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,yR(n.key),n)}}function Nge(e,t,r){return t&&wge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jge(e,t,r){return t=Hw(t),kge(e,vR()?Reflect.construct(t,r||[],Hw(e).constructor):t.apply(e,r))}function kge(e,t){if(t&&(Nx(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Sge(e)}function Sge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vR(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vR=function(){return!!e})()}function Hw(e){return Hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Hw(e)}function _ge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&K3(e,t)}function K3(e,t){return K3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,s){return n.__proto__=s,n},K3(e,t)}function jx(e){return Ege(e)||Cge(e)||bR(e)||Age()}function Age(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bR(e,t){if(e){if(typeof e=="string")return X3(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return X3(e,t)}}function Cge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ege(e){if(Array.isArray(e))return X3(e)}function X3(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function GP(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),r.push.apply(r,n)}return r}function kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GP(Object(r),!0).forEach(function(n){Rr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GP(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Rr(e,t,r){return t=yR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yR(e){var t=Tge(e,"string");return Nx(t)=="symbol"?t:t+""}function Tge(e,t){if(Nx(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Nx(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Oge={xAxis:["bottom","top"],yAxis:["left","right"]},Pge={width:"100%",height:"100%"},wR={x:0,y:0};function yy(e){return e}var Ige=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},Dge=function(t,r,n,s){var i=r.find(function(f){return f&&f.index===n});if(i){if(t==="horizontal")return{x:i.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=s.radius;return kt(kt(kt({},s),Di(s.cx,s.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=s.angle;return kt(kt(kt({},s),Di(s.cx,s.cy,c,d)),{},{angle:d,radius:c})}return wR},yN=function(t,r){var n=r.graphicalItems,s=r.dataStartIndex,i=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(jx(l),jx(d)):l},[]);return o.length>0?o:t&&t.length&&Yt(s)&&Yt(i)?t.slice(s,i+1):[]};function NR(e){return e==="number"?[0,"auto"]:void 0}var Y3=function(t,r,n,s){var i=t.graphicalItems,o=t.tooltipAxis,l=yN(r,t);return n<0||!i||!i.length||n>=l.length?null:i.reduce(function(c,d){var f,u=(f=d.props.data)!==null&&f!==void 0?f:r;u&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(u=u.slice(t.dataStartIndex,t.dataEndIndex+1));var p;if(o.dataKey&&!o.allowDuplicatedCategory){var h=u===void 0?l:u;p=H2(h,o.dataKey,s)}else p=u&&u[n]||l[n];return p?[].concat(jx(c),[m9(d,p)]):c},[])},KP=function(t,r,n,s){var i=s||{x:t.chartX,y:t.chartY},o=Ige(i,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,f=Kce(o,l,d,c);if(f>=0&&d){var u=d[f]&&d[f].value,p=Y3(t,r,f,u),h=Dge(n,l,f,i);return{activeTooltipIndex:f,activeLabel:u,activePayload:p,activeCoordinate:h}}return null},Lge=function(t,r){var n=r.axes,s=r.graphicalItems,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,u=t.children,p=t.stackOffset,h=f9(f,i);return n.reduce(function(m,g){var x,v=g.type.defaultProps!==void 0?kt(kt({},g.type.defaultProps),g.props):g.props,b=v.type,w=v.dataKey,y=v.allowDataOverflow,N=v.allowDuplicatedCategory,S=v.scale,j=v.ticks,_=v.includeHidden,T=v[o];if(m[T])return m;var D=yN(t.data,{graphicalItems:s.filter(function(E){var R,q=o in E.props?E.props[o]:(R=E.type.defaultProps)===null||R===void 0?void 0:R[o];return q===T}),dataStartIndex:c,dataEndIndex:d}),A=D.length,C,M,F;oge(v.domain,y,b)&&(C=m3(v.domain,null,y),h&&(b==="number"||S!=="auto")&&(F=hv(D,w,"category")));var B=NR(b);if(!C||C.length===0){var Y,V=(Y=v.domain)!==null&&Y!==void 0?Y:B;if(w){if(C=hv(D,w,b),b==="category"&&h){var J=LK(C);N&&J?(M=C,C=Ow(0,A)):N||(C=TO(V,C,g).reduce(function(E,R){return E.indexOf(R)>=0?E:[].concat(jx(E),[R])},[]))}else if(b==="category")N?C=C.filter(function(E){return E!==""&&!Sn(E)}):C=TO(V,C,g).reduce(function(E,R){return E.indexOf(R)>=0||R===""||Sn(R)?E:[].concat(jx(E),[R])},[]);else if(b==="number"){var U=Zce(D,s.filter(function(E){var R,q,L=o in E.props?E.props[o]:(R=E.type.defaultProps)===null||R===void 0?void 0:R[o],H="hide"in E.props?E.props.hide:(q=E.type.defaultProps)===null||q===void 0?void 0:q.hide;return L===T&&(_||!H)}),w,i,f);U&&(C=U)}h&&(b==="number"||S!=="auto")&&(F=hv(D,w,"category"))}else h?C=Ow(0,A):l&&l[T]&&l[T].hasStack&&b==="number"?C=p==="expand"?[0,1]:p9(l[T].stackGroups,c,d):C=u9(D,s.filter(function(E){var R=o in E.props?E.props[o]:E.type.defaultProps[o],q="hide"in E.props?E.props.hide:E.type.defaultProps.hide;return R===T&&(_||!q)}),b,f,!0);if(b==="number")C=G3(u,C,T,i,j),V&&(C=m3(V,C,y));else if(b==="category"&&V){var X=V,W=C.every(function(E){return X.indexOf(E)>=0});W&&(C=X)}}return kt(kt({},m),{},Rr({},T,kt(kt({},v),{},{axisType:i,domain:C,categoricalDomain:F,duplicateDomain:M,originalDomain:(x=v.domain)!==null&&x!==void 0?x:B,isCategorical:h,layout:f})))},{})},Fge=function(t,r){var n=r.graphicalItems,s=r.Axis,i=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=t.layout,u=t.children,p=yN(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:d}),h=p.length,m=f9(f,i),g=-1;return n.reduce(function(x,v){var b=v.type.defaultProps!==void 0?kt(kt({},v.type.defaultProps),v.props):v.props,w=b[o],y=NR("number");if(!x[w]){g++;var N;return m?N=Ow(0,h):l&&l[w]&&l[w].hasStack?(N=p9(l[w].stackGroups,c,d),N=G3(u,N,w,i)):(N=m3(y,u9(p,n.filter(function(S){var j,_,T=o in S.props?S.props[o]:(j=S.type.defaultProps)===null||j===void 0?void 0:j[o],D="hide"in S.props?S.props.hide:(_=S.type.defaultProps)===null||_===void 0?void 0:_.hide;return T===w&&!D}),"number",f),s.defaultProps.allowDataOverflow),N=G3(u,N,w,i)),kt(kt({},x),{},Rr({},w,kt(kt({axisType:i},s.defaultProps),{},{hide:!0,orientation:pc(Oge,"".concat(i,".").concat(g%2),null),domain:N,originalDomain:y,isCategorical:m,layout:f})))}return x},{})},Mge=function(t,r){var n=r.axisType,s=n===void 0?"xAxis":n,i=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,d=r.dataEndIndex,f=t.children,u="".concat(s,"Id"),p=sd(f,i),h={};return p&&p.length?h=Lge(t,{axes:p,graphicalItems:o,axisType:s,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(h=Fge(t,{Axis:i,graphicalItems:o,axisType:s,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),h},Rge=function(t){var r=Pf(t),n=ju(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:i6(n,function(s){return s.coordinate}),tooltipAxis:r,tooltipAxisBandSize:ww(r,n)}},XP=function(t){var r=t.children,n=t.defaultShowTooltip,s=_l(r,hx),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(i=s.props.startIndex),s.props.endIndex>=0&&(o=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Bge=function(t){return!t||!t.length?!1:t.some(function(r){var n=Tu(r&&r.type);return n&&n.indexOf("Bar")>=0})},YP=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},$ge=function(t,r){var n=t.props,s=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=n.width,f=n.height,u=n.children,p=n.margin||{},h=_l(u,hx),m=_l(u,_m),g=Object.keys(c).reduce(function(N,S){var j=c[S],_=j.orientation;return!j.mirror&&!j.hide?kt(kt({},N),{},Rr({},_,N[_]+j.width)):N},{left:p.left||0,right:p.right||0}),x=Object.keys(o).reduce(function(N,S){var j=o[S],_=j.orientation;return!j.mirror&&!j.hide?kt(kt({},N),{},Rr({},_,pc(N,"".concat(_))+j.height)):N},{top:p.top||0,bottom:p.bottom||0}),v=kt(kt({},x),g),b=v.bottom;h&&(v.bottom+=h.props.height||hx.defaultProps.height),m&&r&&(v=Qce(v,s,n,r));var w=d-v.left-v.right,y=f-v.top-v.bottom;return kt(kt({brushBottom:b},v),{},{width:Math.max(w,0),height:Math.max(y,0)})},Uge=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},zge=function(t){var r=t.chartName,n=t.GraphicalChild,s=t.defaultTooltipEventType,i=s===void 0?"axis":s,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,f=t.formatAxisMap,u=t.defaultProps,p=function(v,b){var w=b.graphicalItems,y=b.stackGroups,N=b.offset,S=b.updateId,j=b.dataStartIndex,_=b.dataEndIndex,T=v.barSize,D=v.layout,A=v.barGap,C=v.barCategoryGap,M=v.maxBarSize,F=YP(D),B=F.numericAxisName,Y=F.cateAxisName,V=Bge(w),J=[];return w.forEach(function(U,X){var W=yN(v.data,{graphicalItems:[U],dataStartIndex:j,dataEndIndex:_}),E=U.type.defaultProps!==void 0?kt(kt({},U.type.defaultProps),U.props):U.props,R=E.dataKey,q=E.maxBarSize,L=E["".concat(B,"Id")],H=E["".concat(Y,"Id")],se={},ce=c.reduce(function(we,Ae){var Ue=b["".concat(Ae.axisType,"Map")],me=E["".concat(Ae.axisType,"Id")];Ue&&Ue[me]||Ae.axisType==="zAxis"||Kh();var ee=Ue[me];return kt(kt({},we),{},Rr(Rr({},Ae.axisType,ee),"".concat(Ae.axisType,"Ticks"),ju(ee)))},se),ae=ce[Y],Z=ce["".concat(Y,"Ticks")],ve=y&&y[L]&&y[L].hasStack&&ude(U,y[L].stackGroups),ne=Tu(U.type).indexOf("Bar")>=0,He=ww(ae,Z),Xe=[],ie=V&&Xce({barSize:T,stackGroups:y,totalSize:Uge(ce,Y)});if(ne){var Q,Ne,de=Sn(q)?M:q,ye=(Q=(Ne=ww(ae,Z,!0))!==null&&Ne!==void 0?Ne:de)!==null&&Q!==void 0?Q:0;Xe=Yce({barGap:A,barCategoryGap:C,bandSize:ye!==He?ye:He,sizeList:ie[H],maxBarSize:de}),ye!==He&&(Xe=Xe.map(function(we){return kt(kt({},we),{},{position:kt(kt({},we.position),{},{offset:we.position.offset-ye/2})})}))}var xe=U&&U.type&&U.type.getComposedData;xe&&J.push({props:kt(kt({},xe(kt(kt({},ce),{},{displayedData:W,props:v,dataKey:R,item:U,bandSize:He,barPosition:Xe,offset:N,stackedData:ve,layout:D,dataStartIndex:j,dataEndIndex:_}))),{},Rr(Rr(Rr({key:U.key||"item-".concat(X)},B,ce[B]),Y,ce[Y]),"animationId",S)),childIndex:KK(U,v.children),item:U})}),J},h=function(v,b){var w=v.props,y=v.dataStartIndex,N=v.dataEndIndex,S=v.updateId;if(!jE({props:w}))return null;var j=w.children,_=w.layout,T=w.stackOffset,D=w.data,A=w.reverseStackOrder,C=YP(_),M=C.numericAxisName,F=C.cateAxisName,B=sd(j,n),Y=lde(D,B,"".concat(M,"Id"),"".concat(F,"Id"),T,A),V=c.reduce(function(E,R){var q="".concat(R.axisType,"Map");return kt(kt({},E),{},Rr({},q,Mge(w,kt(kt({},R),{},{graphicalItems:B,stackGroups:R.axisType===M&&Y,dataStartIndex:y,dataEndIndex:N}))))},{}),J=$ge(kt(kt({},V),{},{props:w,graphicalItems:B}),b==null?void 0:b.legendBBox);Object.keys(V).forEach(function(E){V[E]=f(w,V[E],J,E.replace("Map",""),r)});var U=V["".concat(F,"Map")],X=Rge(U),W=p(w,kt(kt({},V),{},{dataStartIndex:y,dataEndIndex:N,updateId:S,graphicalItems:B,stackGroups:Y,offset:J}));return kt(kt({formattedGraphicalItems:W,graphicalItems:B,offset:J,stackGroups:Y},X),V)},m=function(x){function v(b){var w,y,N;return yge(this,v),N=jge(this,v,[b]),Rr(N,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Rr(N,"accessibilityManager",new ige),Rr(N,"handleLegendBBoxUpdate",function(S){if(S){var j=N.state,_=j.dataStartIndex,T=j.dataEndIndex,D=j.updateId;N.setState(kt({legendBBox:S},h({props:N.props,dataStartIndex:_,dataEndIndex:T,updateId:D},kt(kt({},N.state),{},{legendBBox:S}))))}}),Rr(N,"handleReceiveSyncEvent",function(S,j,_){if(N.props.syncId===S){if(_===N.eventEmitterSymbol&&typeof N.props.syncMethod!="function")return;N.applySyncEvent(j)}}),Rr(N,"handleBrushChange",function(S){var j=S.startIndex,_=S.endIndex;if(j!==N.state.dataStartIndex||_!==N.state.dataEndIndex){var T=N.state.updateId;N.setState(function(){return kt({dataStartIndex:j,dataEndIndex:_},h({props:N.props,dataStartIndex:j,dataEndIndex:_,updateId:T},N.state))}),N.triggerSyncEvent({dataStartIndex:j,dataEndIndex:_})}}),Rr(N,"handleMouseEnter",function(S){var j=N.getMouseInfo(S);if(j){var _=kt(kt({},j),{},{isTooltipActive:!0});N.setState(_),N.triggerSyncEvent(_);var T=N.props.onMouseEnter;cn(T)&&T(_,S)}}),Rr(N,"triggeredAfterMouseMove",function(S){var j=N.getMouseInfo(S),_=j?kt(kt({},j),{},{isTooltipActive:!0}):{isTooltipActive:!1};N.setState(_),N.triggerSyncEvent(_);var T=N.props.onMouseMove;cn(T)&&T(_,S)}),Rr(N,"handleItemMouseEnter",function(S){N.setState(function(){return{isTooltipActive:!0,activeItem:S,activePayload:S.tooltipPayload,activeCoordinate:S.tooltipPosition||{x:S.cx,y:S.cy}}})}),Rr(N,"handleItemMouseLeave",function(){N.setState(function(){return{isTooltipActive:!1}})}),Rr(N,"handleMouseMove",function(S){S.persist(),N.throttleTriggeredAfterMouseMove(S)}),Rr(N,"handleMouseLeave",function(S){N.throttleTriggeredAfterMouseMove.cancel();var j={isTooltipActive:!1};N.setState(j),N.triggerSyncEvent(j);var _=N.props.onMouseLeave;cn(_)&&_(j,S)}),Rr(N,"handleOuterEvent",function(S){var j=GK(S),_=pc(N.props,"".concat(j));if(j&&cn(_)){var T,D;/.*touch.*/i.test(j)?D=N.getMouseInfo(S.changedTouches[0]):D=N.getMouseInfo(S),_((T=D)!==null&&T!==void 0?T:{},S)}}),Rr(N,"handleClick",function(S){var j=N.getMouseInfo(S);if(j){var _=kt(kt({},j),{},{isTooltipActive:!0});N.setState(_),N.triggerSyncEvent(_);var T=N.props.onClick;cn(T)&&T(_,S)}}),Rr(N,"handleMouseDown",function(S){var j=N.props.onMouseDown;if(cn(j)){var _=N.getMouseInfo(S);j(_,S)}}),Rr(N,"handleMouseUp",function(S){var j=N.props.onMouseUp;if(cn(j)){var _=N.getMouseInfo(S);j(_,S)}}),Rr(N,"handleTouchMove",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.throttleTriggeredAfterMouseMove(S.changedTouches[0])}),Rr(N,"handleTouchStart",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseDown(S.changedTouches[0])}),Rr(N,"handleTouchEnd",function(S){S.changedTouches!=null&&S.changedTouches.length>0&&N.handleMouseUp(S.changedTouches[0])}),Rr(N,"handleDoubleClick",function(S){var j=N.props.onDoubleClick;if(cn(j)){var _=N.getMouseInfo(S);j(_,S)}}),Rr(N,"handleContextMenu",function(S){var j=N.props.onContextMenu;if(cn(j)){var _=N.getMouseInfo(S);j(_,S)}}),Rr(N,"triggerSyncEvent",function(S){N.props.syncId!==void 0&&Kj.emit(Xj,N.props.syncId,S,N.eventEmitterSymbol)}),Rr(N,"applySyncEvent",function(S){var j=N.props,_=j.layout,T=j.syncMethod,D=N.state.updateId,A=S.dataStartIndex,C=S.dataEndIndex;if(S.dataStartIndex!==void 0||S.dataEndIndex!==void 0)N.setState(kt({dataStartIndex:A,dataEndIndex:C},h({props:N.props,dataStartIndex:A,dataEndIndex:C,updateId:D},N.state)));else if(S.activeTooltipIndex!==void 0){var M=S.chartX,F=S.chartY,B=S.activeTooltipIndex,Y=N.state,V=Y.offset,J=Y.tooltipTicks;if(!V)return;if(typeof T=="function")B=T(J,S);else if(T==="value"){B=-1;for(var U=0;U<J.length;U++)if(J[U].value===S.activeLabel){B=U;break}}var X=kt(kt({},V),{},{x:V.left,y:V.top}),W=Math.min(M,X.x+X.width),E=Math.min(F,X.y+X.height),R=J[B]&&J[B].value,q=Y3(N.state,N.props.data,B),L=J[B]?{x:_==="horizontal"?J[B].coordinate:W,y:_==="horizontal"?E:J[B].coordinate}:wR;N.setState(kt(kt({},S),{},{activeLabel:R,activeCoordinate:L,activePayload:q,activeTooltipIndex:B}))}else N.setState(S)}),Rr(N,"renderCursor",function(S){var j,_=N.state,T=_.isTooltipActive,D=_.activeCoordinate,A=_.activePayload,C=_.offset,M=_.activeTooltipIndex,F=_.tooltipAxisBandSize,B=N.getTooltipEventType(),Y=(j=S.props.active)!==null&&j!==void 0?j:T,V=N.props.layout,J=S.key||"_recharts-cursor";return st.createElement(hge,{key:J,activeCoordinate:D,activePayload:A,activeTooltipIndex:M,chartName:r,element:S,isActive:Y,layout:V,offset:C,tooltipAxisBandSize:F,tooltipEventType:B})}),Rr(N,"renderPolarAxis",function(S,j,_){var T=pc(S,"type.axisType"),D=pc(N.state,"".concat(T,"Map")),A=S.type.defaultProps,C=A!==void 0?kt(kt({},A),S.props):S.props,M=D&&D[C["".concat(T,"Id")]];return P.cloneElement(S,kt(kt({},M),{},{className:Rn(T,M.className),key:S.key||"".concat(j,"-").concat(_),ticks:ju(M,!0)}))}),Rr(N,"renderPolarGrid",function(S){var j=S.props,_=j.radialLines,T=j.polarAngles,D=j.polarRadius,A=N.state,C=A.radiusAxisMap,M=A.angleAxisMap,F=Pf(C),B=Pf(M),Y=B.cx,V=B.cy,J=B.innerRadius,U=B.outerRadius;return P.cloneElement(S,{polarAngles:Array.isArray(T)?T:ju(B,!0).map(function(X){return X.coordinate}),polarRadius:Array.isArray(D)?D:ju(F,!0).map(function(X){return X.coordinate}),cx:Y,cy:V,innerRadius:J,outerRadius:U,key:S.key||"polar-grid",radialLines:_})}),Rr(N,"renderLegend",function(){var S=N.state.formattedGraphicalItems,j=N.props,_=j.children,T=j.width,D=j.height,A=N.props.margin||{},C=T-(A.left||0)-(A.right||0),M=c9({children:_,formattedGraphicalItems:S,legendWidth:C,legendContent:d});if(!M)return null;var F=M.item,B=VP(M,pge);return P.cloneElement(F,kt(kt({},B),{},{chartWidth:T,chartHeight:D,margin:A,onBBoxUpdate:N.handleLegendBBoxUpdate}))}),Rr(N,"renderTooltip",function(){var S,j=N.props,_=j.children,T=j.accessibilityLayer,D=_l(_,Pd);if(!D)return null;var A=N.state,C=A.isTooltipActive,M=A.activeCoordinate,F=A.activePayload,B=A.activeLabel,Y=A.offset,V=(S=D.props.active)!==null&&S!==void 0?S:C;return P.cloneElement(D,{viewBox:kt(kt({},Y),{},{x:Y.left,y:Y.top}),active:V,label:B,payload:V?F:[],coordinate:M,accessibilityLayer:T})}),Rr(N,"renderBrush",function(S){var j=N.props,_=j.margin,T=j.data,D=N.state,A=D.offset,C=D.dataStartIndex,M=D.dataEndIndex,F=D.updateId;return P.cloneElement(S,{key:S.key||"_recharts-brush",onChange:my(N.handleBrushChange,S.props.onChange),data:T,x:Yt(S.props.x)?S.props.x:A.left,y:Yt(S.props.y)?S.props.y:A.top+A.height+A.brushBottom-(_.bottom||0),width:Yt(S.props.width)?S.props.width:A.width,startIndex:C,endIndex:M,updateId:"brush-".concat(F)})}),Rr(N,"renderReferenceElement",function(S,j,_){if(!S)return null;var T=N,D=T.clipPathId,A=N.state,C=A.xAxisMap,M=A.yAxisMap,F=A.offset,B=S.type.defaultProps||{},Y=S.props,V=Y.xAxisId,J=V===void 0?B.xAxisId:V,U=Y.yAxisId,X=U===void 0?B.yAxisId:U;return P.cloneElement(S,{key:S.key||"".concat(j,"-").concat(_),xAxis:C[J],yAxis:M[X],viewBox:{x:F.left,y:F.top,width:F.width,height:F.height},clipPathId:D})}),Rr(N,"renderActivePoints",function(S){var j=S.item,_=S.activePoint,T=S.basePoint,D=S.childIndex,A=S.isRange,C=[],M=j.props.key,F=j.item.type.defaultProps!==void 0?kt(kt({},j.item.type.defaultProps),j.item.props):j.item.props,B=F.activeDot,Y=F.dataKey,V=kt(kt({index:D,dataKey:Y,cx:_.x,cy:_.y,r:4,fill:P6(j.item),strokeWidth:2,stroke:"#fff",payload:_.payload,value:_.value},wn(B,!1)),W2(B));return C.push(v.renderActiveDot(B,V,"".concat(M,"-activePoint-").concat(D))),T?C.push(v.renderActiveDot(B,kt(kt({},V),{},{cx:T.x,cy:T.y}),"".concat(M,"-basePoint-").concat(D))):A&&C.push(null),C}),Rr(N,"renderGraphicChild",function(S,j,_){var T=N.filterFormatItem(S,j,_);if(!T)return null;var D=N.getTooltipEventType(),A=N.state,C=A.isTooltipActive,M=A.tooltipAxis,F=A.activeTooltipIndex,B=A.activeLabel,Y=N.props.children,V=_l(Y,Pd),J=T.props,U=J.points,X=J.isRange,W=J.baseLine,E=T.item.type.defaultProps!==void 0?kt(kt({},T.item.type.defaultProps),T.item.props):T.item.props,R=E.activeDot,q=E.hide,L=E.activeBar,H=E.activeShape,se=!!(!q&&C&&V&&(R||L||H)),ce={};D!=="axis"&&V&&V.props.trigger==="click"?ce={onClick:my(N.handleItemMouseEnter,S.props.onClick)}:D!=="axis"&&(ce={onMouseLeave:my(N.handleItemMouseLeave,S.props.onMouseLeave),onMouseEnter:my(N.handleItemMouseEnter,S.props.onMouseEnter)});var ae=P.cloneElement(S,kt(kt({},T.props),ce));function Z(Ae){return typeof M.dataKey=="function"?M.dataKey(Ae.payload):null}if(se)if(F>=0){var ve,ne;if(M.dataKey&&!M.allowDuplicatedCategory){var He=typeof M.dataKey=="function"?Z:"payload.".concat(M.dataKey.toString());ve=H2(U,He,B),ne=X&&W&&H2(W,He,B)}else ve=U==null?void 0:U[F],ne=X&&W&&W[F];if(H||L){var Xe=S.props.activeIndex!==void 0?S.props.activeIndex:F;return[P.cloneElement(S,kt(kt(kt({},T.props),ce),{},{activeIndex:Xe})),null,null]}if(!Sn(ve))return[ae].concat(jx(N.renderActivePoints({item:T,activePoint:ve,basePoint:ne,childIndex:F,isRange:X})))}else{var ie,Q=(ie=N.getItemByXY(N.state.activeCoordinate))!==null&&ie!==void 0?ie:{graphicalItem:ae},Ne=Q.graphicalItem,de=Ne.item,ye=de===void 0?S:de,xe=Ne.childIndex,we=kt(kt(kt({},T.props),ce),{},{activeIndex:xe});return[P.cloneElement(ye,we),null,null]}return X?[ae,null,null]:[ae,null]}),Rr(N,"renderCustomized",function(S,j,_){return P.cloneElement(S,kt(kt({key:"recharts-customized-".concat(_)},N.props),N.state))}),Rr(N,"renderMap",{CartesianGrid:{handler:yy,once:!0},ReferenceArea:{handler:N.renderReferenceElement},ReferenceLine:{handler:yy},ReferenceDot:{handler:N.renderReferenceElement},XAxis:{handler:yy},YAxis:{handler:yy},Brush:{handler:N.renderBrush,once:!0},Bar:{handler:N.renderGraphicChild},Line:{handler:N.renderGraphicChild},Area:{handler:N.renderGraphicChild},Radar:{handler:N.renderGraphicChild},RadialBar:{handler:N.renderGraphicChild},Scatter:{handler:N.renderGraphicChild},Pie:{handler:N.renderGraphicChild},Funnel:{handler:N.renderGraphicChild},Tooltip:{handler:N.renderCursor,once:!0},PolarGrid:{handler:N.renderPolarGrid,once:!0},PolarAngleAxis:{handler:N.renderPolarAxis},PolarRadiusAxis:{handler:N.renderPolarAxis},Customized:{handler:N.renderCustomized}}),N.clipPathId="".concat((w=b.id)!==null&&w!==void 0?w:Z1("recharts"),"-clip"),N.throttleTriggeredAfterMouseMove=lM(N.triggeredAfterMouseMove,(y=b.throttleDelay)!==null&&y!==void 0?y:1e3/60),N.state={},N}return _ge(v,x),Nge(v,[{key:"componentDidMount",value:function(){var w,y;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(y=this.props.margin.top)!==null&&y!==void 0?y:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var w=this.props,y=w.children,N=w.data,S=w.height,j=w.layout,_=_l(y,Pd);if(_){var T=_.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var D=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,A=Y3(this.state,N,T,D),C=this.state.tooltipTicks[T].coordinate,M=(this.state.offset.top+S)/2,F=j==="horizontal",B=F?{x:C,y:M}:{y:C,x:M},Y=this.state.formattedGraphicalItems.find(function(J){var U=J.item;return U.type.name==="Scatter"});Y&&(B=kt(kt({},B),Y.props.points[T].tooltipPosition),A=Y.props.points[T].tooltipPayload);var V={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:D,activePayload:A,activeCoordinate:B};this.setState(V),this.renderCursor(_),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(w,y){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==y.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==w.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==w.margin){var N,S;this.accessibilityManager.setDetails({offset:{left:(N=this.props.margin.left)!==null&&N!==void 0?N:0,top:(S=this.props.margin.top)!==null&&S!==void 0?S:0}})}return null}},{key:"componentDidUpdate",value:function(w){Tk([_l(w.children,Pd)],[_l(this.props.children,Pd)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var w=_l(this.props.children,Pd);if(w&&typeof w.props.shared=="boolean"){var y=w.props.shared?"axis":"item";return l.indexOf(y)>=0?y:i}return i}},{key:"getMouseInfo",value:function(w){if(!this.container)return null;var y=this.container,N=y.getBoundingClientRect(),S=wse(N),j={chartX:Math.round(w.pageX-S.left),chartY:Math.round(w.pageY-S.top)},_=N.width/y.offsetWidth||1,T=this.inRange(j.chartX,j.chartY,_);if(!T)return null;var D=this.state,A=D.xAxisMap,C=D.yAxisMap,M=this.getTooltipEventType(),F=KP(this.state,this.props.data,this.props.layout,T);if(M!=="axis"&&A&&C){var B=Pf(A).scale,Y=Pf(C).scale,V=B&&B.invert?B.invert(j.chartX):null,J=Y&&Y.invert?Y.invert(j.chartY):null;return kt(kt({},j),{},{xValue:V,yValue:J},F)}return F?kt(kt({},j),F):null}},{key:"inRange",value:function(w,y){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,S=this.props.layout,j=w/N,_=y/N;if(S==="horizontal"||S==="vertical"){var T=this.state.offset,D=j>=T.left&&j<=T.left+T.width&&_>=T.top&&_<=T.top+T.height;return D?{x:j,y:_}:null}var A=this.state,C=A.angleAxisMap,M=A.radiusAxisMap;if(C&&M){var F=Pf(C);return IO({x:j,y:_},F)}return null}},{key:"parseEventsOfWrapper",value:function(){var w=this.props.children,y=this.getTooltipEventType(),N=_l(w,Pd),S={};N&&y==="axis"&&(N.props.trigger==="click"?S={onClick:this.handleClick}:S={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var j=W2(this.props,this.handleOuterEvent);return kt(kt({},j),S)}},{key:"addListener",value:function(){Kj.on(Xj,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Kj.removeListener(Xj,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(w,y,N){for(var S=this.state.formattedGraphicalItems,j=0,_=S.length;j<_;j++){var T=S[j];if(T.item===w||T.props.key===w.key||y===Tu(T.item.type)&&N===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var w=this.clipPathId,y=this.state.offset,N=y.left,S=y.top,j=y.height,_=y.width;return st.createElement("defs",null,st.createElement("clipPath",{id:w},st.createElement("rect",{x:N,y:S,height:j,width:_})))}},{key:"getXScales",value:function(){var w=this.state.xAxisMap;return w?Object.entries(w).reduce(function(y,N){var S=WP(N,2),j=S[0],_=S[1];return kt(kt({},y),{},Rr({},j,_.scale))},{}):null}},{key:"getYScales",value:function(){var w=this.state.yAxisMap;return w?Object.entries(w).reduce(function(y,N){var S=WP(N,2),j=S[0],_=S[1];return kt(kt({},y),{},Rr({},j,_.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(w){var y;return(y=this.state.xAxisMap)===null||y===void 0||(y=y[w])===null||y===void 0?void 0:y.scale}},{key:"getYScaleByAxisId",value:function(w){var y;return(y=this.state.yAxisMap)===null||y===void 0||(y=y[w])===null||y===void 0?void 0:y.scale}},{key:"getItemByXY",value:function(w){var y=this.state,N=y.formattedGraphicalItems,S=y.activeItem;if(N&&N.length)for(var j=0,_=N.length;j<_;j++){var T=N[j],D=T.props,A=T.item,C=A.type.defaultProps!==void 0?kt(kt({},A.type.defaultProps),A.props):A.props,M=Tu(A.type);if(M==="Bar"){var F=(D.data||[]).find(function(J){return i0e(w,J)});if(F)return{graphicalItem:T,payload:F}}else if(M==="RadialBar"){var B=(D.data||[]).find(function(J){return IO(w,J)});if(B)return{graphicalItem:T,payload:B}}else if(uN(T,S)||fN(T,S)||v1(T,S)){var Y=che({graphicalItem:T,activeTooltipItem:S,itemData:C.data}),V=C.activeIndex===void 0?Y:C.activeIndex;return{graphicalItem:kt(kt({},T),{},{childIndex:V}),payload:v1(T,S)?C.data[Y]:T.props.data[Y]}}}return null}},{key:"render",value:function(){var w=this;if(!jE(this))return null;var y=this.props,N=y.children,S=y.className,j=y.width,_=y.height,T=y.style,D=y.compact,A=y.title,C=y.desc,M=VP(y,mge),F=wn(M,!1);if(D)return st.createElement(CP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},st.createElement(Pk,xm({},F,{width:j,height:_,title:A,desc:C}),this.renderClipPath(),SE(N,this.renderMap)));if(this.props.accessibilityLayer){var B,Y;F.tabIndex=(B=this.props.tabIndex)!==null&&B!==void 0?B:0,F.role=(Y=this.props.role)!==null&&Y!==void 0?Y:"application",F.onKeyDown=function(J){w.accessibilityManager.keyboardEvent(J)},F.onFocus=function(){w.accessibilityManager.focus()}}var V=this.parseEventsOfWrapper();return st.createElement(CP,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},st.createElement("div",xm({className:Rn("recharts-wrapper",S),style:kt({position:"relative",cursor:"default",width:j,height:_},T)},V,{ref:function(U){w.container=U}}),st.createElement(Pk,xm({},F,{width:j,height:_,title:A,desc:C,style:Pge}),this.renderClipPath(),SE(N,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(P.Component);Rr(m,"displayName",r),Rr(m,"defaultProps",kt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Rr(m,"getDerivedStateFromProps",function(x,v){var b=x.dataKey,w=x.data,y=x.children,N=x.width,S=x.height,j=x.layout,_=x.stackOffset,T=x.margin,D=v.dataStartIndex,A=v.dataEndIndex;if(v.updateId===void 0){var C=XP(x);return kt(kt(kt({},C),{},{updateId:0},h(kt(kt({props:x},C),{},{updateId:0}),v)),{},{prevDataKey:b,prevData:w,prevWidth:N,prevHeight:S,prevLayout:j,prevStackOffset:_,prevMargin:T,prevChildren:y})}if(b!==v.prevDataKey||w!==v.prevData||N!==v.prevWidth||S!==v.prevHeight||j!==v.prevLayout||_!==v.prevStackOffset||!Sm(T,v.prevMargin)){var M=XP(x),F={chartX:v.chartX,chartY:v.chartY,isTooltipActive:v.isTooltipActive},B=kt(kt({},KP(v,w,j)),{},{updateId:v.updateId+1}),Y=kt(kt(kt({},M),F),B);return kt(kt(kt({},Y),h(kt({props:x},Y),v)),{},{prevDataKey:b,prevData:w,prevWidth:N,prevHeight:S,prevLayout:j,prevStackOffset:_,prevMargin:T,prevChildren:y})}if(!Tk(y,v.prevChildren)){var V,J,U,X,W=_l(y,hx),E=W&&(V=(J=W.props)===null||J===void 0?void 0:J.startIndex)!==null&&V!==void 0?V:D,R=W&&(U=(X=W.props)===null||X===void 0?void 0:X.endIndex)!==null&&U!==void 0?U:A,q=E!==D||R!==A,L=!Sn(w),H=L&&!q?v.updateId:v.updateId+1;return kt(kt({updateId:H},h(kt(kt({props:x},v),{},{updateId:H,dataStartIndex:E,dataEndIndex:R}),v)),{},{prevChildren:y,dataStartIndex:E,dataEndIndex:R})}return null}),Rr(m,"renderActiveDot",function(x,v,b){var w;return P.isValidElement(x)?w=P.cloneElement(x,v):cn(x)?w=x(v):w=st.createElement(D6,v),st.createElement(Ya,{className:"recharts-active-dot",key:b},w)});var g=P.forwardRef(function(v,b){return st.createElement(m,xm({},v,{ref:b}))});return g.displayName=m.displayName,g},qge=zge({chartName:"AreaChart",GraphicalChild:A0,axisComponents:[{axisType:"xAxis",AxisComp:vN},{axisType:"yAxis",AxisComp:bN}],formatAxisMap:Dpe});const Hge=e=>{const t=e.toUpperCase().charCodeAt(0),r=[{bg:"bg-indigo-500",text:"text-white"},{bg:"bg-emerald-500",text:"text-white"},{bg:"bg-amber-500",text:"text-white"},{bg:"bg-rose-500",text:"text-white"},{bg:"bg-blue-500",text:"text-white"},{bg:"bg-purple-500",text:"text-white"},{bg:"bg-pink-500",text:"text-white"},{bg:"bg-cyan-500",text:"text-white"},{bg:"bg-orange-500",text:"text-white"},{bg:"bg-teal-500",text:"text-white"},{bg:"bg-lime-500",text:"text-white"},{bg:"bg-violet-500",text:"text-white"},{bg:"bg-fuchsia-500",text:"text-white"},{bg:"bg-sky-500",text:"text-white"},{bg:"bg-red-500",text:"text-white"},{bg:"bg-green-500",text:"text-white"}];return r[t%r.length]},hs=({src:e,alt:t,className:r,fallbackText:n,isAvatar:s})=>{const[i,o]=P.useState(!1),[l,c]=P.useState(!1),d=P.useMemo(()=>{const x=(n||t||"").trim();if(!x)return"?";if(s){const v=x.match(/[a-zA-Z0-9]/);return v?v[0].toUpperCase():"?"}else{const v=x.split(/\s+/).filter(b=>b.length>0);if(v.length===0)return"?";if(v.length===1){const b=v[0].match(/[a-zA-Z0-9]/);return b?b[0].toUpperCase():"?"}else{const b=v[0].match(/[a-zA-Z0-9]/),w=v[1].match(/[a-zA-Z0-9]/),y=b?b[0].toUpperCase():"",N=w?w[0].toUpperCase():"";return y&&N?`${y}${N}`:y||"?"}}},[n,t,s]),f=P.useMemo(()=>Hge(d),[d]),u=()=>r!=null&&r.includes("w-5")||r!=null&&r.includes("h-5")?"text-[10px]":r!=null&&r.includes("w-6")||r!=null&&r.includes("h-6")?"text-xs":r!=null&&r.includes("w-8")||r!=null&&r.includes("h-8")?"text-sm":r!=null&&r.includes("w-10")||r!=null&&r.includes("h-10")?"text-base":r!=null&&r.includes("w-12")||r!=null&&r.includes("h-12")||r!=null&&r.includes("w-14")||r!=null&&r.includes("h-14")?"text-lg":r!=null&&r.includes("w-16")||r!=null&&r.includes("h-16")?"text-xl":r!=null&&r.includes("w-20")||r!=null&&r.includes("h-20")?"text-2xl":r!=null&&r.includes("w-24")||r!=null&&r.includes("h-24")?"text-3xl":"text-base",h=s?"rounded-full":r!=null&&r.includes("rounded-3xl")?"rounded-3xl":r!=null&&r.includes("rounded-xl")?"rounded-xl":r!=null&&r.includes("rounded-lg")?"rounded-lg":r!=null&&r.includes("rounded-md")?"rounded-md":r!=null&&r.includes("rounded-sm")?"rounded-sm":"rounded-lg",m=(r||"").replace(/\brounded-(full|3xl|xl|lg|md|sm)\b/g,"").trim();if(!s){const g=`${m} ${h} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return a.jsx("div",{className:g,children:a.jsx("span",{className:u(),children:d})})}if(!e||i){const g=`${m} ${h} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`;return a.jsx("div",{className:g,children:a.jsx("span",{className:u(),children:d})})}return a.jsxs(a.Fragment,{children:[!l&&a.jsx("div",{className:`${m} ${h} ${f.bg} ${f.text} flex items-center justify-center font-bold overflow-hidden select-none object-cover`,children:a.jsx("span",{className:u(),children:d})}),a.jsx("img",{src:e,alt:t,className:`${m} ${h} object-cover`,onError:()=>o(!0),onLoad:()=>c(!0),style:{display:l?"block":"none"}})]})},QP=(e,t=[])=>{if(typeof window>"u")return t;const r=localStorage.getItem(`impactflow_sim_${e}`);return r?JSON.parse(r):t},wy=(e,t)=>{typeof window>"u"||localStorage.setItem(`impactflow_sim_${e}`,JSON.stringify(t))},JP=async(e,t={})=>{var o,l;await new Promise(c=>setTimeout(c,600));const r=t.body?JSON.parse(t.body):{},n=(t.method||"GET").toUpperCase();if(console.info(`[VIRTUAL SERVER] ${n} ${e}`,r),e==="/auth/send-otp"||e==="/auth/request-code"){const c=(o=r.email)==null?void 0:o.toLowerCase().trim();return console.warn("[VIRTUAL SERVER] Simulator fallback active for AUTH"),o2.some(f=>f.email.toLowerCase().trim()===c)?{success:!0,message:"Simulated OTP sent to "+c}:{status:404,message:"Account not found - contact your Administrator",success:!1}}if(e==="/auth/verify-otp"||e==="/auth/verify"){const c=(l=r.email)==null?void 0:l.toLowerCase().trim();return{success:!0,token:"v-token-123",user:o2.find(f=>f.email.toLowerCase()===c)||{id:"u-gen",name:"Impact Member",email:r.email,role:"User",avatar:`https://picsum.photos/seed/${r.email}/100/100`,active:!0}}}if(e.includes("feedback")){let c=QP("feedback",[]);if(n==="POST"){const d={id:`fb-${Date.now()}`,...r,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()};return c.unshift(d),wy("feedback",c),{success:!0,data:d,simulated:!0}}if(n==="PATCH"||n==="PUT"){const d=e.split("/").pop();return c=c.map(f=>f.id===d?{...f,...r,updatedAt:new Date().toISOString()}:f),wy("feedback",c),{success:!0,simulated:!0}}if(n==="DELETE"){const d=e.split("/").pop();return c=c.filter(f=>f.id!==d),wy("feedback",c),{success:!0,simulated:!0}}return{success:!0,data:c,simulated:!0}}if(e.includes("/satisfaction/templates/default")){if(n==="GET")return{success:!0,data:{id:"sim-template-1",workspaceId:"default",name:"Default NPS Survey",isDefault:!0,questions:[{id:"q1",type:"nps",text:"On a scale of 010, how likely are you to recommend Impact 24x7 to a colleague or partner?",required:!0,order:1},{id:"q2",type:"multiple_choice",text:"What is the main reason for your score?",required:!1,options:["Service Quality","Communication","Timeliness","Value for Money","Technical Expertise","Other"],order:2},{id:"q3",type:"free_text",text:"What could we do to improve your experience?",required:!1,order:3},{id:"q4",type:"free_text",text:"Any additional comments or feedback?",required:!1,order:4}],updatedAt:new Date().toISOString(),updatedBy:"system"},simulated:!0};if(n==="PUT")return{success:!0,data:{...r,updatedAt:new Date().toISOString()},simulated:!0}}const i=["deals","projects","tasks","invoices","companies","contacts","expenses","expense-categories"].find(c=>e.includes(c));if(i){let c=QP(i,[]);if(n==="POST"){const d={id:`sim-${i}-${Date.now()}`,...r,createdAt:new Date().toISOString()};return c.unshift(d),wy(i,c),{success:!0,data:d,simulated:!0}}if(n==="GET"&&e.split("/").length>2){const d=e.split("/").pop();return{success:!0,data:c.find(u=>u.id===d),simulated:!0}}return{success:!0,data:c,simulated:!0}}if(e.includes("data-hygiene")){if(e.includes("duplicate-companies"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("duplicate-contacts"))return{success:!0,data:{groups:[],totalDuplicates:0},simulated:!0};if(e.includes("incomplete-records"))return{success:!0,data:{companies:[],contacts:[],deals:[],projects:[],invoices:[]},simulated:!0};if(e.includes("domain-mismatches"))return{success:!0,data:{mismatches:[],count:0},simulated:!0}}if(e.startsWith("/shared-inbox/labels"))return{success:!0,labels:[],simulated:!0};if(e.startsWith("/shared-inbox/senders"))return{success:!0,data:[],simulated:!0};if(e.startsWith("/shared-inbox/emails")&&n==="GET"&&!e.match(/\/emails\/[^/]+$/))return{data:[],success:!0,simulated:!0};switch(e){case"/me":case"/auth/me":return o2[0];case"/google-calendar/status":return{connected:!1,simulated:!0};default:return{data:[],status:"ok",simulated:!0}}},jR=()=>"http://127.0.0.1:8050/api/v1/impactOS",H6=jR();typeof window<"u"&&console.log(`[API] Initializing with Base: ${H6}`);const ot=async(e,t={})=>{var o,l;const r=localStorage.getItem("auth_token"),n=e.startsWith("/")?e:`/${e}`,s=`${H6}${n}`,i={"Content-Type":"application/json",...r?{Authorization:`Bearer ${r}`}:{},...t.headers};try{const c=await fetch(s,{...t,headers:i}),d=await c.json().catch(()=>({}));if(!c.ok){const u=["feedback","deals","projects","tasks","invoices","companies","contacts","automations","notifications","events","expenses","expense-categories","data-hygiene","satisfaction"].some(m=>n.includes(m));if(c.status===404&&u)return console.warn(`[SYSTEM] Live endpoint ${n} not found. Engaging Virtual Engine fallback.`),JP(n,t);let p=`Server Error ${c.status}`;try{d&&typeof d=="object"&&(p=d.message||((o=d.error)==null?void 0:o.message)||p)}catch{}const h=new Error(p);throw h.status=c.status,(l=d==null?void 0:d.error)!=null&&l.code&&typeof d.error.code=="string"&&(h.code=d.error.code),h}return d}catch(c){let d="Unknown error",f="Error",u,p;try{c&&typeof c=="object"?(d=c.message||String(c)||d,f=c.name||f,u=typeof c.status=="number"?c.status:void 0,p=typeof c.code=="string"?c.code:void 0):c&&(d=String(c))}catch{}const h=f==="TypeError"||d.includes("Failed to fetch"),m=u!==void 0&&u>=500,g=u!==void 0&&u>=400&&u<500;if(h||m&&!g)return console.info("[SYSTEM] Production API unreachable. Engaging Virtual Engine fallback."),JP(n,t);const x=new Error(d);throw u!==void 0&&(x.status=u),p&&(x.code=p),x}},ZP=e=>ot("/auth/send-otp",{method:"POST",body:JSON.stringify({email:e.email})}),Wge=e=>ot("/auth/verify-otp",{method:"POST",body:JSON.stringify({email:e.email,otp:e.verificationCode})}),eI=()=>ot("/auth/me"),Vge=async()=>{try{await ot("/auth/logout",{method:"POST"})}catch(e){console.error("Logout API error:",e)}finally{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data")}},ud=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return ot(`/users${t}`)},Gge=e=>ot("/users",{method:"POST",body:JSON.stringify(e)}),Kge=(e,t)=>ot(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),Xge=e=>ot(`/users/${e}/dashboard-layout`),Yge=(e,t)=>ot(`/users/${e}/dashboard-layout`,{method:"PUT",body:JSON.stringify({layout:t})}),Qge=e=>ot(`/users/${e}`,{method:"DELETE"}),Jge=(e,t)=>ot(`/users/${e}`,{method:"PUT",body:JSON.stringify(t)}),jc=e=>ot(`/companies${e?`?search=${encodeURIComponent(e)}`:""}`),Zge=e=>ot("/companies",{method:"POST",body:JSON.stringify(e)}),kR=(e,t)=>ot(`/companies/${e}`,{method:"PUT",body:JSON.stringify(t)}),SR=e=>ot(`/companies/${e}`,{method:"DELETE"}),Yh=(e,t)=>{const r=new URLSearchParams;e&&r.append("search",e),t&&r.append("companyId",t);const n=r.toString();return ot(`/contacts${n?`?${n}`:""}`)},tI=e=>ot("/contacts",{method:"POST",body:JSON.stringify(e)}),_R=(e,t)=>ot(`/contacts/${e}`,{method:"PUT",body:JSON.stringify(t)}),AR=e=>ot(`/contacts/${e}`,{method:"DELETE"}),ib=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return ot(`/deals${s?`?${s}`:""}`)},eve=e=>ot("/deals",{method:"POST",body:JSON.stringify(e)}),Ny=(e,t)=>ot(`/deals/${e}`,{method:"PUT",body:JSON.stringify(t)}),rI=e=>ot(`/deals/${e}`,{method:"DELETE"}),C0=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return ot(`/projects${s?`?${s}`:""}`)},tve=e=>ot(`/projects/${e}`),rve=e=>ot("/projects",{method:"POST",body:JSON.stringify(e)}),CR=(e,t)=>ot(`/projects/${e}`,{method:"PUT",body:JSON.stringify(t)}),ER=e=>ot(`/projects/${e}`,{method:"DELETE"}),wN=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return ot(`/tasks${s?`?${s}`:""}`)},Ww=()=>ot("/tasks/categories"),TR=e=>ot("/tasks",{method:"POST",body:JSON.stringify(e)}),Vw=(e,t)=>ot(`/tasks/${e}`,{method:"PUT",body:JSON.stringify(t)}),OR=e=>ot(`/tasks/${e}`,{method:"DELETE"}),nve=e=>ot("/tasks/bulk-import",{method:"POST",body:JSON.stringify({tasks:e})}),PR=(e,t,r)=>{const n=new URLSearchParams;e&&n.append("userId",e);const s=n.toString();return ot(`/invoices${s?`?${s}`:""}`)},ave=e=>ot("/invoices",{method:"POST",body:JSON.stringify(e)}),jy=(e,t)=>ot(`/invoices/${e}`,{method:"PUT",body:JSON.stringify(t)}),nI=e=>ot(`/invoices/${e}`,{method:"DELETE"}),sve=(e,t)=>ot(`/invoices/revenue-velocity?userId=${e}&timeframe=${t}`),aI=e=>ot(`/automations${e?`?userId=${e}`:""}`),ive=e=>ot("/automations",{method:"POST",body:JSON.stringify(e)}),ove=e=>ot(`/automations/${e}/toggle`,{method:"PATCH"}),lve=e=>ot(`/automations/${e}`,{method:"DELETE"}),IR=(e,t)=>ot(`/notifications?userId=${e}&limitNum=${t}`),kx=e=>ot("/notifications",{method:"POST",body:JSON.stringify(e)}),DR=(e,t)=>ot(`/notifications/${e}/read`,{method:"POST",body:JSON.stringify({userId:t})}),LR=e=>ot("/notifications/mark-all-read",{method:"POST",body:JSON.stringify({userId:e})}),cve=e=>ot(`/users/${e}/notification-preferences`),dve=(e,t)=>ot(`/users/${e}/notification-preferences`,{method:"PUT",body:JSON.stringify({preferences:t})}),uve=e=>{const t=e?`?search=${encodeURIComponent(e)}`:"";return ot(`/satisfaction/records${t}`)},fve=e=>ot(`/satisfaction/records/${e}`),hve=e=>ot("/satisfaction/records",{method:"POST",body:JSON.stringify(e)}),Q3=e=>ot(`/satisfaction/companies/${e}`),pve=e=>ot(`/satisfaction/surveys/${e}`),mve=e=>ot("/satisfaction/surveys",{method:"POST",body:JSON.stringify(e)}),xve=()=>ot("/satisfaction/templates/default"),gve=e=>ot("/satisfaction/templates/default",{method:"PUT",body:JSON.stringify(e)}),vve=(e,t)=>ot(`/satisfaction/surveys/${e}/responses`,{method:"POST",body:JSON.stringify(t)}),bve=()=>ot("/satisfaction/stats"),yve=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!=null).map(([r,n])=>[r,String(n)])).toString():"";return ot(`/playbooks/templates${t}`)},wve=e=>ot(`/playbooks/templates/${e}`),Nve=e=>ot("/playbooks/templates",{method:"POST",body:JSON.stringify(e)}),jve=(e,t)=>ot(`/playbooks/templates/${e}`,{method:"PUT",body:JSON.stringify(t)}),kve=e=>ot(`/playbooks/templates/${e}`,{method:"DELETE"}),Sve=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!=null).map(([r,n])=>[r,String(n)])).toString():"";return ot(`/playbooks/instances${t}`)},_ve=e=>ot(`/playbooks/instances/${e}`),Ave=e=>ot("/playbooks/instances",{method:"POST",body:JSON.stringify(e)}),Cve=(e,t)=>ot(`/playbooks/instances/${e}/status`,{method:"PATCH",body:JSON.stringify({status:t})}),Eve=(e,t)=>ot(`/playbooks/instances/${e}/steps/${t}/complete`,{method:"POST"}),Tve=e=>ot(`/playbooks/instances/${e}/completions`),Ove=(e="default")=>ot(`/data-retention/policy?workspaceId=${e}`),Pve=(e,t)=>ot("/data-retention/policy",{method:"PUT",body:JSON.stringify({workspaceId:e,...t})}),Ive=(e="default")=>ot(`/data-retention/stats?workspaceId=${e}`),Dve=(e="default",t=50)=>ot("/data-retention/archive",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),Lve=(e="default",t=50)=>ot("/data-retention/cleanup",{method:"POST",body:JSON.stringify({workspaceId:e,batchSize:t})}),Fve=(e="default",t={})=>{const r=new URLSearchParams({workspaceId:e});return t.format&&r.append("format",t.format),t.startDate&&r.append("startDate",t.startDate),t.endDate&&r.append("endDate",t.endDate),t.limit&&r.append("limit",t.limit.toString()),ot(`/data-retention/export?${r.toString()}`)},sI=()=>ot("/pipelines"),iI=e=>ot("/pipelines",{method:"POST",body:JSON.stringify(e)}),ky=(e,t)=>ot(`/pipelines/${e}`,{method:"PUT",body:JSON.stringify(t)}),Mve=()=>ot("/feedback"),FR=e=>ot("/feedback",{method:"POST",body:JSON.stringify(e)}),Qj=(e,t)=>ot(`/feedback/${e}`,{method:"PATCH",body:JSON.stringify(t)}),oI=e=>ot(`/feedback/${e}`,{method:"DELETE"}),Rve=e=>{const t=new URLSearchParams;e!=null&&e.companyId&&t.append("companyId",e.companyId),e!=null&&e.userId&&t.append("userId",e.userId);const r=t.toString();return ot(`/expenses${r?`?${r}`:""}`)},Bve=e=>ot("/expenses",{method:"POST",body:JSON.stringify(e)}),$ve=(e,t)=>ot(`/expenses/${e}`,{method:"PATCH",body:JSON.stringify(t)}),lI=e=>ot(`/expenses/${e}`,{method:"DELETE"}),MR=()=>ot("/expense-categories"),RR=e=>ot("/expense-categories",{method:"POST",body:JSON.stringify(e)}),Uve=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>[r,String(n)])).toString():"";return ot(`/budgets${t}`)},zve=e=>ot("/budgets",{method:"POST",body:JSON.stringify(e)}),qve=(e,t)=>ot(`/budgets/${e}`,{method:"PUT",body:JSON.stringify(t)}),Hve=e=>ot(`/budgets/${e}`,{method:"DELETE"}),Wve=e=>{const t="?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n!==void 0).map(([r,n])=>[r,String(n)])).toString();return ot(`/budgets/tracking${t}`)},Vve=()=>ot("/budgets/departments"),BR=e=>{const t=e?"?"+new URLSearchParams(Object.entries(e).filter(([r,n])=>n)).toString():"";return ot(`/contracts${t}`)},Gve=e=>ot("/contracts",{method:"POST",body:JSON.stringify(e)}),Kve=(e,t)=>ot(`/contracts/${e}`,{method:"PUT",body:JSON.stringify(t)}),Xve=e=>ot(`/contracts/${e}`,{method:"DELETE"}),Yve=(e,t)=>ot(`/contracts/${e}/sign`,{method:"POST",body:JSON.stringify(t)}),Qve=()=>ot("/contracts/document-types"),Jve=e=>ot("/contracts/document-types",{method:"POST",body:JSON.stringify(e)}),Gw=e=>{const t="?"+new URLSearchParams(Object.entries(e)).toString();return ot(`/contracts/google-drive/access-token${t}`)},Zve=e=>ot("/contracts/google-drive/upload",{method:"POST",body:JSON.stringify(e)}),e1e=e=>ot("/contracts/signature/create-doc",{method:"POST",body:JSON.stringify(e)}),t1e=(e,t)=>ot("/merge/companies",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),r1e=(e,t)=>ot("/merge/contacts",{method:"POST",body:JSON.stringify({primaryId:e,secondaryId:t})}),n1e=()=>ot("/data-hygiene/duplicate-companies"),a1e=()=>ot("/data-hygiene/duplicate-contacts"),s1e=()=>ot("/data-hygiene/incomplete-records"),i1e=()=>ot("/data-hygiene/domain-mismatches"),W6=e=>ot(`/google-calendar/status?userId=${e}`),$R=e=>ot(`/google-calendar/auth-url?userId=${e}`),o1e=(e,t,r)=>ot(`/google-calendar/events?userId=${r}&startDate=${e}&endDate=${t}`),l1e=e=>ot("/google-calendar/disconnect",{method:"POST",body:JSON.stringify({userId:e})}),c1e=(e,t,r,n)=>{const s=new URLSearchParams({userId:e});return t&&s.append("accountEmail",t),r!=null&&s.append("scopeHours",String(r)),n!=null&&s.append("scopeDays",String(n)),ot(`/shared-inbox/sync?${s.toString()}`,{method:"POST"})},d1e=e=>ot(`/shared-inbox/accounts?userId=${e}`),u1e=(e,t)=>ot("/shared-inbox/accounts",{method:"DELETE",body:JSON.stringify({userId:e,accountEmail:t})}),f1e=e=>ot(`/shared-inbox/filtered-accounts?userId=${e}`),h1e=(e,t)=>ot("/shared-inbox/filtered-accounts",{method:"POST",body:JSON.stringify({userId:e,accountEmail:t})}),p1e=(e,t)=>ot(`/shared-inbox/filtered-accounts/${t}?userId=${e}`,{method:"DELETE"}),UR=(e,t)=>{const r=new URLSearchParams({userId:e});return t?(t.search&&r.append("search",t.search),t.status&&r.append("status",t.status),t.from&&r.append("from",t.from),t.subject&&r.append("subject",t.subject),t.subjectOperator&&r.append("subjectOperator",t.subjectOperator),t.hasAttachment!==void 0&&r.append("hasAttachment",String(t.hasAttachment)),t.dateFrom&&r.append("dateFrom",t.dateFrom),t.dateTo&&r.append("dateTo",t.dateTo),t.labelId&&r.append("labelId",t.labelId),t.cursor&&r.append("cursor",t.cursor),t.page!==void 0&&!t.cursor&&r.append("page",String(t.page)),t.limit!==void 0&&r.append("limit",String(t.limit)),t.isRead!==void 0&&r.append("isRead",String(t.isRead)),t.isStarred!==void 0&&r.append("isStarred",String(t.isStarred)),ot(`/shared-inbox/emails?${r.toString()}`)):ot(`/shared-inbox/emails?${r.toString()}`)},m1e=(e,t)=>ot(`/shared-inbox/senders?userId=${e}${t!=null?`&limit=${t}`:""}`),x1e=(e,t)=>ot(`/shared-inbox/emails/${e}?userId=${t}`),cI=(e,t,r)=>ot(`/shared-inbox/emails/${e}/read`,{method:"PUT",body:JSON.stringify({read:t,userId:r})}),g1e=(e,t)=>ot(`/shared-inbox/emails/${e}/star`,{method:"PUT",body:JSON.stringify({isStarred:t})}),v1e=e=>ot("/shared-inbox/notes",{method:"POST",body:JSON.stringify(e)}),b1e=e=>ot(`/shared-inbox/notes/${e}`),y1e=(e,t)=>ot(`/shared-inbox/notes/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),w1e=(e,t,r)=>ot("/shared-inbox/ai-draft",{method:"POST",body:JSON.stringify({emailId:e,userId:t,templateId:r})}),N1e=e=>ot("/shared-inbox/templates",{method:"POST",body:JSON.stringify(e)}),j1e=e=>ot(`/shared-inbox/templates?userId=${e}`),k1e=(e,t)=>ot(`/shared-inbox/templates/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),S1e=e=>ot("/shared-inbox/send-email",{method:"POST",body:JSON.stringify(e)}),_1e=e=>ot("/shared-inbox/reply-email",{method:"POST",body:JSON.stringify(e)}),A1e=e=>ot("/shared-inbox/forward-email",{method:"POST",body:JSON.stringify(e)}),zR=e=>ot(`/shared-inbox/signatures?userId=${e}`),C1e=e=>ot("/shared-inbox/signatures",{method:"POST",body:JSON.stringify(e)}),E1e=(e,t)=>ot(`/shared-inbox/signatures/${e}`,{method:"PUT",body:JSON.stringify(t)}),T1e=(e,t)=>ot(`/shared-inbox/signatures/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),dI=(e,t)=>ot(`/shared-inbox/emails/${e}/archive`,{method:"POST",body:JSON.stringify({userId:t})}),uI=(e,t)=>ot(`/shared-inbox/emails/${e}`,{method:"DELETE",body:JSON.stringify({userId:t})}),O1e=(e,t)=>ot(`/shared-inbox/emails/${e}/restore`,{method:"POST",body:JSON.stringify({userId:t})}),Sy=(e,t)=>ot(`/shared-inbox/emails/${e}`,{method:"PUT",body:JSON.stringify(t)}),fI=(e,t,r)=>{const n=jR(),s=localStorage.getItem("auth_token"),i={"Content-Type":"application/json"};return s&&(i.Authorization=`Bearer ${s}`),fetch(`${n}/shared-inbox/emails/${e}/attachments/${t}?userId=${r}`,{method:"GET",headers:i}).then(async o=>{if(!o.ok){const l=await o.json().catch(()=>({message:"Failed to download attachment"}));throw new Error(l.message||"Failed to download attachment")}return o.blob()})},P1e=e=>ot("/shared-inbox/save-draft",{method:"POST",body:JSON.stringify(e)}),I1e=(e,t)=>ot(`/shared-inbox/drafts?userId=${e}&accountEmail=${encodeURIComponent(t)}`),D1e=e=>ot("/shared-inbox/schedule-send",{method:"POST",body:JSON.stringify(e)}),L1e=e=>ot(`/email-sync-filter?userId=${e}`),F1e=(e,t)=>ot("/email-sync-filter",{method:"POST",body:JSON.stringify({userId:e,domain:t})}),M1e=(e,t)=>ot(`/email-sync-filter/${t}?userId=${e}`,{method:"DELETE"}),V6=(e,t)=>ot(`/shared-inbox/activity/${e}/${t}`),R1e=e=>ot("/shared-inbox/link-contact",{method:"POST",body:JSON.stringify(e)}),B1e=e=>ot("/shared-inbox/link-company",{method:"POST",body:JSON.stringify(e)}),$1e=e=>ot("/shared-inbox/link-deal",{method:"POST",body:JSON.stringify(e)}),U1e=e=>ot("/shared-inbox/link-project",{method:"POST",body:JSON.stringify(e)}),z1e=e=>ot("/shared-inbox/link-contract",{method:"POST",body:JSON.stringify(e)}),q1e=e=>ot(`/shared-inbox/suggested-links?emailId=${e}`),H1e=e=>ot("/shared-inbox/create-task",{method:"POST",body:JSON.stringify(e)}),W1e=e=>ot(`/shared-inbox/related-tasks/${e}`),V1e=e=>ot(`/shared-inbox/related-projects/${e}`),G1e=e=>ot(`/shared-inbox/related-contracts/${e}`),K1e=e=>ot(`/shared-inbox/labels?userId=${e}`),X1e=e=>ot("/shared-inbox/labels",{method:"POST",body:JSON.stringify(e)}),Y1e=(e,t)=>ot(`/shared-inbox/emails/${e}/labels`,{method:"PUT",body:JSON.stringify(t)}),Q1e=(e,t)=>ot(`/shared-inbox/emails/${e}/labels/${t}`,{method:"DELETE"}),J1e=e=>ot("/shared-inbox/categorize-email",{method:"POST",body:JSON.stringify(e)}),hI=e=>ot(`/shared-inbox/categorization-rules?userId=${e}`),Z1e=(e,t=30)=>ot(`/shared-inbox/categorization-accuracy?userId=${e}&days=${t}`),ebe=e=>ot("/shared-inbox/categorization-rules",{method:"POST",body:JSON.stringify(e)}),tbe=(e,t)=>ot(`/shared-inbox/categorization-rules/${e}?userId=${t}`,{method:"DELETE"}),rbe=e=>ot(`/shared-inbox/folder-mapping?userId=${e}`),nbe=e=>ot("/shared-inbox/folder-mapping",{method:"POST",body:JSON.stringify(e)}),J3=(e,t,r,n)=>{const s=new URLSearchParams({userId:e});return t&&s.append("emailId",t),r&&s.append("startDate",r),n&&s.append("endDate",n),ot(`/shared-inbox/calendar-events?${s.toString()}`)},abe=e=>ot("/shared-inbox/calendar-events",{method:"POST",body:JSON.stringify(e)}),sbe=(e,t,r,n)=>{const s=new URLSearchParams({userId:e,teamMemberIds:t.join(","),startDate:r,endDate:n});return ot(`/shared-inbox/calendar-availability?${s.toString()}`)},ibe=(e,t,r,n,s,i)=>{const o=new URLSearchParams({userId:e});return t&&o.append("accountEmail",t),n&&o.append("query",n),s&&o.append("pageToken",s),ot(`/shared-inbox/drive-files?${o.toString()}`)},pI=e=>ot("/shared-inbox/attach-drive-file",{method:"POST",body:JSON.stringify(e)}),obe=e=>ot("/events",{method:"POST",body:JSON.stringify(e)}),lbe=(e,t)=>ot(`/events/${e}`,{method:"PUT",body:JSON.stringify(t)}),qR=e=>ot("/lead-sources?active=true"),cbe=async(e,t)=>{const r=localStorage.getItem("auth_token"),n=new FormData;n.append("file",e),n.append("userId",t);const s=await fetch(`${H6}/scanner/business-card/upload`,{method:"POST",headers:{Authorization:`Bearer ${r}`},body:n});if(!s.ok){const i=await s.json().catch(()=>({message:"Upload failed"}));throw new Error(i.message||"Failed to upload business card")}return s.json()},dbe=e=>ot("/scanner/business-card/confirm",{method:"POST",body:JSON.stringify(e)}),ube=e=>ot("/scanner/linkedin/fetch",{method:"POST",body:JSON.stringify(e)}),fbe=e=>ot("/scanner/linkedin/confirm",{method:"POST",body:JSON.stringify(e)}),hbe=({toast:e,onRemove:t})=>{P.useEffect(()=>{const s=setTimeout(()=>{t(e.id)},e.duration||3e3);return()=>clearTimeout(s)},[e.id,e.duration,t]);const r=()=>{switch(e.type){case"success":return a.jsx(Qr,{className:"w-5 h-5 text-emerald-600"});case"error":return a.jsx(UF,{className:"w-5 h-5 text-red-600"});case"warning":return a.jsx(On,{className:"w-5 h-5 text-amber-600"});case"info":return a.jsx(u0,{className:"w-5 h-5 text-blue-600"});default:return a.jsx(u0,{className:"w-5 h-5 text-blue-600"})}},n=()=>{switch(e.type){case"success":return"bg-emerald-50 border-emerald-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-amber-50 border-amber-200";case"info":return"bg-blue-50 border-blue-200";default:return"bg-blue-50 border-blue-200"}};return a.jsxs("div",{className:`${n()} border rounded-xl shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md animate-in slide-in-from-right duration-300`,children:[a.jsx("div",{className:"shrink-0",children:r()}),a.jsx("p",{className:"flex-1 text-sm font-medium text-slate-900",children:e.message}),a.jsx("button",{onClick:()=>t(e.id),className:"shrink-0 p-1 hover:bg-white/50 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-4 h-4 text-slate-400"})})]})},pbe=({toasts:e,onRemove:t})=>a.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-2 pointer-events-none",children:e.map(r=>a.jsx("div",{className:"pointer-events-auto",children:a.jsx(hbe,{toast:r,onRemove:t})},r.id))}),HR=P.createContext(void 0),hn=()=>{const e=P.useContext(HR);if(!e)throw new Error("useToast must be used within ToastProvider");return e},mbe=({children:e})=>{const[t,r]=P.useState([]),n=P.useCallback(d=>{r(f=>f.filter(u=>u.id!==d))},[]),s=P.useCallback((d,f="info",u=3e3)=>{const h={id:Math.random().toString(36).substring(2,9),message:d,type:f,duration:u};r(m=>[...m,h])},[]),i=P.useCallback((d,f)=>{s(d,"success",f)},[s]),o=P.useCallback((d,f)=>{s(d,"error",f||5e3)},[s]),l=P.useCallback((d,f)=>{s(d,"warning",f)},[s]),c=P.useCallback((d,f)=>{s(d,"info",f)},[s]);return a.jsxs(HR.Provider,{value:{showToast:s,showSuccess:i,showError:o,showWarning:l,showInfo:c},children:[e,a.jsx(pbe,{toasts:t,onRemove:n})]})},Sx=[{code:"USD",symbol:"$",name:"US Dollar"},{code:"EUR",symbol:"",name:"Euro"},{code:"GBP",symbol:"",name:"British Pound"},{code:"AED",symbol:".",name:"UAE Dirham"},{code:"SGD",symbol:"S$",name:"Singapore Dollar"},{code:"INR",symbol:"",name:"Indian Rupee"},{code:"AUD",symbol:"A$",name:"Australian Dollar"},{code:"CAD",symbol:"C$",name:"Canadian Dollar"},{code:"JPY",symbol:"",name:"Japanese Yen"},{code:"CNY",symbol:"",name:"Chinese Yuan"},{code:"CHF",symbol:"CHF",name:"Swiss Franc"},{code:"NZD",symbol:"NZ$",name:"New Zealand Dollar"},{code:"HKD",symbol:"HK$",name:"Hong Kong Dollar"},{code:"SAR",symbol:"",name:"Saudi Riyal"},{code:"ZAR",symbol:"R",name:"South African Rand"}],Us="USD",Z3=e=>Sx.find(t=>t.code===e),vu=e=>{var r;if(!e)return((r=Sx.find(n=>n.code===Us))==null?void 0:r.symbol)||"$";const t=Z3(e);return(t==null?void 0:t.symbol)||"$"},ku=(e,t)=>`${vu(t)}${e.toLocaleString()}`,mI=[{id:"stat-pipeline",order:0,size:"medium"},{id:"stat-projects",order:1,size:"medium"},{id:"stat-invoices",order:2,size:"medium"},{id:"stat-tasks",order:3,size:"medium"},{id:"revenue-chart",order:4,size:"large"},{id:"inbox-card",order:5,size:"medium"},{id:"tasks-card",order:6,size:"medium"},{id:"nps-average",order:7,size:"medium"},{id:"nps-needing-attention",order:8,size:"medium"},{id:"nps-recent-feedback",order:9,size:"medium"},{id:"nps-awaiting-feedback",order:10,size:"medium"}],xI=({onNavigate:e})=>{var xe;const{showError:t,showSuccess:r}=hn(),[n,s]=P.useState(null),[i,o]=P.useState({openPipeline:0,activeProjects:0,unpaidInvoices:0,actionableMail:0}),[l,c]=P.useState([]),[d,f]=P.useState([]),[u,p]=P.useState(!0),[h,m]=P.useState("1M"),[g,x]=P.useState([]),[v,b]=P.useState(!1),[w,y]=P.useState({}),[N,S]=P.useState({}),[j,_]=P.useState(Us),[T,D]=P.useState(!1),[A,C]=P.useState(mI),[M,F]=P.useState(null),[B,Y]=P.useState(!1),[V,J]=P.useState(!1),[U,X]=P.useState(null);P.useRef(0);const[W,E]=P.useState(null),[R,q]=P.useState(!1);P.useEffect(()=>{const we=JSON.parse(localStorage.getItem("user_data")||"null");s(we),we!=null&&we.id&&L(we.id)},[]);const L=async we=>{try{const Ae=await Xge(we);if(Ae!=null&&Ae.data&&Array.isArray(Ae.data)){const Ue=Ae.data.flatMap(fe=>fe.id==="stats-grid"?[{id:"stat-pipeline",order:fe.order,size:fe.size||"medium"},{id:"stat-projects",order:fe.order+.1,size:fe.size||"medium"},{id:"stat-invoices",order:fe.order+.2,size:fe.size||"medium"},{id:"stat-tasks",order:fe.order+.3,size:fe.size||"medium"}]:fe.order>0?[{...fe,order:fe.order+3,size:fe.size||"medium"}]:[{...fe,size:fe.size||"medium"}]),me=new Set,ee=Ue.filter(fe=>me.has(fe.id)?(console.warn(`[DASHBOARD] Duplicate widget found: ${fe.id}, removing duplicate`),!1):(me.add(fe.id),!0));C(ee)}}catch{console.log("[DASHBOARD] Using default layout")}},H=async()=>{if(n!=null&&n.id){J(!0);try{await Yge(n.id,A),r("Dashboard layout saved"),Y(!1)}catch{t("Failed to save layout")}finally{J(!1)}}},se=()=>{C(mI)},ce=(we,Ae)=>{C(Ue=>Ue.map(me=>me.id===we?{...me,size:Ae}:me))},ae=(we="medium",Ae)=>{if(Ae.startsWith("stat-"))return"";switch(we){case"small":return"lg:col-span-1";case"medium":return"lg:col-span-2";case"large":return"lg:col-span-3";default:return"lg:col-span-2"}},Z=(we,Ae)=>{B&&(F(Ae),we.dataTransfer.effectAllowed="move",we.dataTransfer.setData("text/html",Ae))},ve=we=>{!B||!M||(we.preventDefault(),we.dataTransfer.dropEffect="move")},ne=(we,Ae)=>{if(!B||!M||M===Ae)return;we.preventDefault();const Ue=[...A],me=Ue.findIndex(fe=>fe.id===M),ee=Ue.findIndex(fe=>fe.id===Ae);if(me!==-1&&ee!==-1){const fe=Ue[me];Ue.splice(me,1),Ue.splice(ee,0,fe),Ue.forEach((Fe,Ee)=>{Fe.order=Ee}),C(Ue)}F(null)},He=()=>{F(null)};P.useEffect(()=>{(async()=>{p(!0);try{const Ae=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ae){p(!1);return}const[Ue,me,ee,fe,Fe,Ee]=await Promise.all([ib(Ae).catch(()=>({data:[]})),C0(Ae).catch(()=>({data:[]})),wN(Ae).catch(()=>({data:[]})),PR(Ae).catch(()=>({data:[]})),UR(Ae).catch(()=>({data:[]})),ud().catch(()=>({data:[]}))]),qe=(Ue==null?void 0:Ue.data)||Ue||[],Ke=(me==null?void 0:me.data)||me||[],Qe=(ee==null?void 0:ee.data)||ee||[],_t=(fe==null?void 0:fe.data)||fe||[],vt=(Fe==null?void 0:Fe.data)||Fe||[],ke=(Ee==null?void 0:Ee.data)||Ee||[],Je=Array.isArray(qe)?qe.filter(cr=>cr.stage!=="Won"&&cr.stage!=="Lost"):[],mt={},ue={};Je.forEach(cr=>{const It=cr.currency||Us,yr=cr.value||0;mt[It]=(mt[It]||0)+yr,ue[It]=(ue[It]||0)+1});const Ye=Array.isArray(Ke)?Ke.filter(cr=>cr.status!=="Completed"&&cr.status!=="Cancelled").length:0,bt=Array.isArray(_t)?_t.filter(cr=>cr.status!=="Paid"):[],xt={};bt.forEach(cr=>{const It=cr.currency||Us,yr=cr.amount||0;xt[It]=(xt[It]||0)+yr,ue[It]=(ue[It]||0)+1});let Vt=0,gr=Us;Object.keys(ue).forEach(cr=>{ue[cr]>Vt&&(Vt=ue[cr],gr=cr)}),y(mt),S(xt),_(gr);const qt=mt[gr]||0,Gt=xt[gr]||0,Bt=0,fr=new Date;fr.setHours(0,0,0,0);const Sr=Array.isArray(Qe)?Qe.filter(cr=>{if(!cr.dueDate)return!1;const It=new Date(cr.dueDate);return It.setHours(0,0,0,0),It.getTime()===fr.getTime()&&cr.status!=="Done"}):[],Cr=await Promise.all(Sr.slice(0,2).map(async cr=>{var It;if(cr.projectId)try{const yr=await tve(cr.projectId);return{...cr,projectTitle:((It=yr==null?void 0:yr.data)==null?void 0:It.title)||"Software"}}catch{return{...cr,projectTitle:"Software"}}return{...cr,projectTitle:"Software"}}));o({openPipeline:qt,activeProjects:Ye,unpaidInvoices:Gt,actionableMail:Bt}),c(Cr),f(ke.slice(0,3))}catch(Ae){console.error("[DASHBOARD] Failed to fetch data:",Ae),t("Failed to load dashboard data")}finally{p(!1)}})()},[t]),P.useEffect(()=>{(async()=>{b(!0);try{const Ae=JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ae){b(!1);return}const Ue=await sve(Ae,h),me=(Ue==null?void 0:Ue.data)||Ue||[];x(Array.isArray(me)?me:[])}catch{x([])}finally{b(!1)}})()},[h]),P.useEffect(()=>{(async()=>{q(!0);try{const Ae=await bve(),Ue=Ae==null?void 0:Ae.data;Ue&&E({averageNps:Ue.averageNps??null,totalResponses:Ue.totalResponses??0,companiesNeedingAttention:Ue.companiesNeedingAttention??[],recentFeedback:Ue.recentFeedback??[],awaitingFeedback:Ue.awaitingFeedback??[]})}catch{E(null)}finally{q(!1)}})()},[]);const Xe=(we,Ae=j)=>{const Ue=vu(Ae);return we>=1e3?`${Ue}${(we/1e3).toFixed(1)}k`:`${Ue}${we.toLocaleString()}`},ie=(we,Ae)=>{const Ue=M===we,me=A.find(Ee=>Ee.id===we),ee=Ae||(me==null?void 0:me.size)||"medium",fe={draggable:B,onDragStart:Ee=>Z(Ee,we),onDragOver:ve,onDrop:Ee=>ne(Ee,we),onDragEnd:He,className:`transition-all ${Ue?"opacity-50 scale-95":""} ${B?"cursor-move":""}`},Fe=()=>{if(!B)return null;const Ee=[{value:"small",icon:a.jsx(zH,{className:"w-3 h-3"}),label:"Small"},{value:"medium",icon:a.jsx(YH,{className:"w-3 h-3"}),label:"Medium"},{value:"large",icon:a.jsx(BH,{className:"w-3 h-3"}),label:"Large"}];return a.jsx("div",{className:"flex items-center gap-1 mb-3 bg-slate-50 rounded-lg p-1 border border-slate-200",children:Ee.map(({value:qe,icon:Ke,label:Qe})=>a.jsx("button",{onClick:_t=>{_t.stopPropagation(),ce(we,qe)},onMouseEnter:()=>X(we),onMouseLeave:()=>X(null),className:`p-1.5 rounded transition-all ${ee===qe?"bg-indigo-600 text-white shadow-sm":"text-slate-500 hover:text-indigo-600 hover:bg-indigo-50"}`,title:Qe,children:Ke},qe))})};switch(we){case"stat-pipeline":return a.jsxs("div",{...fe,children:[B&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Open Pipeline"})]})}),a.jsxs("button",{onClick:()=>e("pipeline"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-blue-600 bg-blue-50/50 group-hover:scale-110 transition-transform",children:a.jsx(ad,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Open Pipeline"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Xe(i.openPipeline,j)})]}),a.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),D(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:a.jsx(Th,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},we);case"stat-projects":return a.jsxs("div",{...fe,children:[B&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Active Projects"})]})}),a.jsxs("button",{onClick:()=>e("projects"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-indigo-200 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-indigo-600 bg-indigo-50/50 group-hover:scale-110 transition-transform",children:a.jsx(al,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsx("div",{className:"flex items-end justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Active Projects"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:i.activeProjects})]})})]})]},we);case"stat-invoices":return a.jsxs("div",{...fe,children:[B&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Unpaid Invoices"})]})}),a.jsxs("button",{onClick:()=>e("invoices"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:[a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-emerald-600 bg-emerald-50/50 group-hover:scale-110 transition-transform",children:a.jsx(Uu,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),a.jsx("span",{className:"text-[9px] lg:text-[10px] font-black text-emerald-600 bg-emerald-50 px-2 py-0.5 rounded-full",children:"+12%"})]}),a.jsxs("div",{className:"flex items-end justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Unpaid Invoices"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:Xe(i.unpaidInvoices,j)})]}),a.jsx("button",{onClick:Ee=>{Ee.stopPropagation(),D(!0)},className:"p-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 rounded-lg transition-all shadow-sm ml-3 flex-shrink-0",title:"View in other currencies",children:a.jsx(Th,{className:"w-4 h-4 lg:w-5 lg:h-5"})})]})]})]},we);case"stat-tasks":return a.jsxs("div",{...fe,children:[B&&a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]})}),a.jsxs("button",{onClick:()=>e("tasks"),className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full",children:[a.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:a.jsx("div",{className:"p-2 rounded-lg lg:p-2.5 lg:rounded-xl text-purple-600 bg-purple-50/50 group-hover:scale-110 transition-transform",children:a.jsx(Hs,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),a.jsx("div",{className:"flex items-end justify-between",children:a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em] lg:tracking-[0.15em]",children:"Tasks Due Today"}),a.jsx("h3",{className:"text-lg lg:text-2xl font-black text-slate-900 mt-0.5 lg:mt-1",children:l.length})]})})]})]},we);case"revenue-chart":return a.jsxs("div",{...fe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Revenue Chart"})]}),Fe()]}),a.jsxs("div",{className:"bg-white p-5 lg:p-8 rounded-[24px] lg:rounded-[32px] border border-slate-100 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 lg:mb-10 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg lg:text-xl font-black text-slate-900",children:"Revenue Velocity"}),a.jsx("p",{className:"text-slate-400 text-[10px] lg:text-xs font-medium mt-0.5 lg:mt-1",children:"Digital transformation revenue flow"})]}),a.jsx("div",{className:"flex bg-slate-50 p-1 rounded-xl border border-slate-100 w-full sm:w-auto",children:["7D","1M","1Y"].map(Ee=>a.jsx("button",{onClick:()=>m(Ee),className:`flex-1 sm:flex-none px-4 py-1.5 text-[10px] font-black rounded-lg transition-all ${Ee===h?"bg-indigo-600 text-white shadow-md shadow-indigo-100":"text-slate-400 hover:text-slate-600"}`,children:Ee},Ee))})]}),a.jsx("div",{className:"h-60 lg:h-72 w-full relative",children:v?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsx(nE,{className:"w-10 h-10 text-slate-300 animate-pulse"})}):g.length===0?a.jsx("div",{className:"h-full flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ad,{className:"w-10 h-10 text-slate-200 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No revenue data available"})]})}):a.jsx(pse,{width:"100%",height:"100%",children:a.jsxs(qge,{data:g,children:[a.jsx("defs",{children:a.jsxs("linearGradient",{id:"colorValue",x1:"0",y1:"0",x2:"0",y2:"1",children:[a.jsx("stop",{offset:"5%",stopColor:"#4f46e5",stopOpacity:.1}),a.jsx("stop",{offset:"95%",stopColor:"#4f46e5",stopOpacity:0})]})}),a.jsx(aR,{strokeDasharray:"3 3",vertical:!1,stroke:"#f8fafc"}),a.jsx(vN,{dataKey:"name",axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},dy:10}),a.jsx(bN,{axisLine:!1,tickLine:!1,tick:{fill:"#94a3b8",fontSize:9,fontWeight:700},width:40,tickFormatter:Ee=>`$${Ee}`}),a.jsx(Pd,{contentStyle:{borderRadius:"16px",border:"none",boxShadow:"0 10px 25px rgba(0,0,0,0.1)",padding:"10px"},itemStyle:{fontWeight:"bold",fontSize:"12px",color:"#4f46e5"}}),a.jsx(A0,{type:"monotone",dataKey:"value",stroke:"#4f46e5",fillOpacity:1,fill:"url(#colorValue)",strokeWidth:3,animationDuration:1500})]})})})]})]},we);case"inbox-card":return a.jsxs("div",{...fe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Inbox Card"})]}),Fe()]}),a.jsxs("div",{onClick:()=>!B&&e("inbox"),className:`bg-[#312E81] rounded-[24px] lg:rounded-[32px] p-6 lg:p-8 text-white relative overflow-hidden group ${B?"":"cursor-pointer hover:scale-[1.02] active:scale-95"} transition-all shadow-xl shadow-indigo-100/50`,children:[a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6 lg:mb-10",children:[a.jsx("div",{className:"w-8 h-8 lg:w-10 lg:h-10 bg-white/10 rounded-full flex items-center justify-center backdrop-blur-sm border border-white/10 group-hover:bg-white/20 transition-all",children:a.jsx(Eu,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),!B&&a.jsx("button",{className:"text-white/40 group-hover:text-white transition-colors",children:a.jsx(Oi,{className:"w-5 h-5 lg:w-6 lg:h-6"})})]}),a.jsx("h3",{className:"text-xl lg:text-2xl font-black mb-2 lg:mb-3",children:"Check Inbox"}),a.jsxs("p",{className:"text-indigo-200 text-[10px] lg:text-xs font-medium leading-relaxed opacity-80 max-w-[200px]",children:["You have ",i.actionableMail," actionable items that need attention."]}),a.jsx("div",{className:"mt-6 lg:mt-8 flex items-center gap-3",children:a.jsxs("div",{className:"flex -space-x-2",children:[d.map((Ee,qe)=>a.jsx(hs,{src:Ee.avatar,isAvatar:!0,fallbackText:Ee.name||Ee.email||"U",className:"w-7 h-7 lg:w-9 lg:h-9 border-2 border-[#312E81] shadow-lg"},Ee.id||qe)),a.jsx("div",{className:"w-7 h-7 lg:w-9 lg:h-9 rounded-full bg-indigo-500 border-2 border-[#312E81] flex items-center justify-center text-[9px] font-black shadow-lg",children:"+1"})]})})]}),a.jsx("div",{className:"absolute right-0 bottom-0 opacity-10 translate-x-1/4 translate-y-1/4 pointer-events-none",children:a.jsx(s0,{className:"w-32 h-32 lg:w-48 lg:h-48"})})]})]},we);case"tasks-card":return a.jsxs("div",{...fe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Tasks Due Today"})]}),Fe()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 lg:mb-8",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Tasks Due Today"}),a.jsx(Hs,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-4 lg:space-y-6",children:u?a.jsx("div",{className:"space-y-3",children:[1,2].map(Ee=>a.jsx("div",{className:"h-4 bg-slate-50 rounded animate-pulse"},Ee))}):l.length>0?l.slice(0,2).map(Ee=>a.jsxs("div",{className:"flex gap-4 group cursor-pointer",children:[a.jsx("div",{className:"w-1.5 h-1.5 lg:w-2 lg:h-2 rounded-full bg-amber-400 mt-1.5 shrink-0 shadow-sm"}),a.jsxs("div",{children:[a.jsx("h5",{className:"text-xs lg:text-sm font-black text-slate-900 group-hover:text-indigo-600 transition-colors line-clamp-1",children:Ee.title}),a.jsx("p",{className:"text-[9px] lg:text-[10px] font-black text-slate-400 uppercase mt-0.5",children:Ee.projectTitle||"Software"})]})]},Ee.id)):a.jsx("div",{className:"text-center py-4",children:a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest",children:"No tasks due today"})})}),a.jsx("button",{onClick:()=>!B&&e("tasks"),disabled:B,className:"w-full mt-8 lg:mt-10 py-3 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest flex items-center justify-center gap-2 group border border-slate-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"View All Tasks"})]})]},we);case"nps-average":{const Ee=(W==null?void 0:W.averageNps)??null,qe=Ee===null?"text-slate-400":Ee>=9?"text-green-600":Ee>=7?"text-amber-600":"text-red-600",Ke=Ee===null?"bg-slate-50":Ee>=9?"bg-green-50":Ee>=7?"bg-amber-50":"bg-red-50";return a.jsxs("div",{...fe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Average NPS Score"})]}),Fe()]}),a.jsxs("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"bg-white p-4 lg:p-7 rounded-[24px] lg:rounded-[28px] border border-slate-100 shadow-[0_4px_20px_rgba(0,0,0,0.02)] flex flex-col justify-between hover:border-indigo-300 transition-all text-left group active:scale-[0.98] w-full disabled:opacity-50",children:[a.jsx("div",{className:"flex items-center justify-between mb-4 lg:mb-6",children:a.jsx("div",{className:`p-2 rounded-lg lg:p-2.5 lg:rounded-xl ${Ke} ${qe}`,children:a.jsx(Eu,{className:"w-4 h-4 lg:w-5 lg:h-5"})})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-400 text-[9px] lg:text-[10px] font-black uppercase tracking-[0.1em]",children:"Average NPS Score"}),R?a.jsx("div",{className:"h-8 w-16 bg-slate-100 rounded mt-1 animate-pulse"}):a.jsx("h3",{className:`text-2xl lg:text-3xl font-black mt-0.5 lg:mt-1 ${qe}`,children:Ee!==null?Ee.toFixed(1):""})]})]})]},we)}case"nps-needing-attention":{const Ee=(W==null?void 0:W.companiesNeedingAttention)??[];return a.jsxs("div",{...fe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Companies Needing Attention"})]}),Fe()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Detractors (06)"}),a.jsx(Eu,{className:"w-4 h-4 text-red-400"})]}),a.jsx("div",{className:"space-y-3",children:R?[1,2,3].map(qe=>a.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},qe)):Ee.length===0?a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No detractors"}):Ee.map(qe=>{var Qe;const Ke=qe.accountManagerId&&(d!=null&&d.length)?(Qe=d.find(_t=>_t.id===qe.accountManagerId))==null?void 0:Qe.name:null;return a.jsxs("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full flex flex-col gap-0.5 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2",children:[a.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:qe.companyName}),a.jsx("span",{className:"text-xs font-bold text-red-600 shrink-0",children:qe.npsScore})]}),Ke?a.jsxs("span",{className:"text-[10px] text-slate-500 truncate",children:["AM: ",Ke]}):null]},qe.companyId)})}),a.jsx("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},we)}case"nps-recent-feedback":{const Ee=(W==null?void 0:W.recentFeedback)??[];return a.jsxs("div",{...fe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Recent Feedback"})]}),Fe()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Latest 5 responses"}),a.jsx(wi,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-4",children:R?[1,2,3].map(qe=>a.jsx("div",{className:"h-14 bg-slate-50 rounded animate-pulse"},qe)):Ee.length===0?a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"No feedback yet"}):Ee.map((qe,Ke)=>a.jsxs("div",{className:"border-b border-slate-100 pb-3 last:border-0 last:pb-0",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-900",children:qe.companyName}),a.jsx("span",{className:`text-xs font-bold shrink-0 ${qe.npsScore>=9?"text-green-600":qe.npsScore>=7?"text-amber-600":"text-red-600"}`,children:qe.npsScore})]}),qe.feedback?a.jsx("p",{className:"text-[10px] text-slate-500 line-clamp-2",children:qe.feedback}):null,a.jsx("p",{className:"text-[9px] text-slate-400 mt-0.5",children:qe.date?new Date(qe.date).toLocaleDateString():""})]},Ke))}),a.jsx("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},we)}case"nps-awaiting-feedback":{const Ee=(W==null?void 0:W.awaitingFeedback)??[];return a.jsxs("div",{...fe,children:[B&&a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-indigo-600",children:[a.jsx(jl,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:"Awaiting Feedback"})]}),Fe()]}),a.jsxs("div",{className:"bg-white rounded-[24px] lg:rounded-[32px] border border-slate-100 p-6 lg:p-8 shadow-[0_8px_30px_rgba(0,0,0,0.02)]",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 lg:mb-6",children:[a.jsx("h4",{className:"text-[10px] lg:text-[11px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Survey sent, no response yet"}),a.jsx(ba,{className:"w-4 h-4 text-amber-400"})]}),a.jsx("div",{className:"space-y-3",children:R?[1,2,3].map(qe=>a.jsx("div",{className:"h-10 bg-slate-50 rounded animate-pulse"},qe)):Ee.length===0?a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"None"}):Ee.map(qe=>a.jsxs("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full flex items-center justify-between gap-2 p-2 rounded-lg hover:bg-slate-50 text-left disabled:pointer-events-none",children:[a.jsx("span",{className:"text-xs lg:text-sm font-semibold text-slate-900 truncate",children:qe.companyName}),a.jsxs("span",{className:"text-xs font-bold text-slate-500 shrink-0",children:[qe.daysElapsed,"d ago"]})]},qe.companyId))}),a.jsx("button",{onClick:()=>!B&&e("satisfaction"),disabled:B,className:"w-full mt-4 py-2.5 bg-slate-50 text-indigo-600 text-[10px] font-black rounded-xl hover:bg-indigo-50 transition-all uppercase tracking-widest",children:"View Client Satisfaction"})]})]},we)}default:return null}},Q=((xe=n==null?void 0:n.name)==null?void 0:xe.split(" ")[0])||"Alex",Ne=(n==null?void 0:n.avatar)||(n==null?void 0:n.photoURL)||"",de=(n==null?void 0:n.name)||(n==null?void 0:n.email)||"Impact Member",ye=[...A].sort((we,Ae)=>we.order-Ae.order);return a.jsxs("div",{className:"space-y-6 lg:space-y-8 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(hs,{src:Ne,alt:de,fallbackText:de,isAvatar:!0,className:"w-10 h-10 rounded-full border border-slate-200 shadow-sm"}),a.jsxs("div",{className:"flex flex-col gap-1",children:[a.jsxs("h1",{className:"text-2xl lg:text-3xl font-bold text-slate-900 tracking-tight",children:["Welcome, ",Q]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:"text-slate-500 text-xs lg:text-sm font-medium",children:"Logistics digitalization hub"})})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:B?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:se,className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Reset"}),a.jsx("button",{onClick:H,disabled:V,className:"px-4 py-2 bg-indigo-600 text-white text-xs font-black rounded-xl hover:bg-indigo-700 transition-all uppercase tracking-wider flex items-center gap-2 disabled:opacity-50 shadow-lg",children:V?a.jsxs(a.Fragment,{children:[a.jsx(nE,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),"Save Layout"]})}),a.jsx("button",{onClick:()=>Y(!1),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-xs font-black rounded-xl hover:bg-slate-50 transition-all uppercase tracking-wider",children:"Cancel"})]}):a.jsxs("button",{onClick:()=>Y(!0),className:"px-4 py-2 bg-gradient-to-r from-indigo-600 to-purple-600 text-white text-xs font-black rounded-xl hover:from-indigo-700 hover:to-purple-700 transition-all uppercase tracking-wider flex items-center gap-2 shadow-lg",children:[a.jsx(jl,{className:"w-4 h-4"}),"Customize Dashboard"]})})]}),B&&a.jsx("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-2 border-indigo-200 rounded-2xl p-4 animate-in slide-in-from-top duration-300",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center shrink-0",children:a.jsx(jl,{className:"w-5 h-5 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:"Customize Your Dashboard"}),a.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:"Drag and drop the cards below to rearrange them. Use the size controls to resize widgets (small, medium, large). Your layout will be saved to your account and synced across all devices."})]})]})}),a.jsx("div",{className:"space-y-6 lg:space-y-8",children:ye.map((we,Ae)=>{const Ue=ie(we.id,we.size);if(we.id.startsWith("stat-")){const Ee=ye[Ae-1];if(Ee&&Ee.id.startsWith("stat-"))return null;{const Ke=[];for(let Qe=Ae;Qe<ye.length&&ye[Qe].id.startsWith("stat-");Qe++)Ke.push(ye[Qe]);return a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 lg:gap-6",children:Ke.map(Qe=>ie(Qe.id,Qe.size))},`stat-cards-group-${Ae}`)}}if(we.id==="revenue-chart"){const Ee=ye[Ae+1],qe=ye[Ae+2],Ke=we.size||"large";if(Ee&&qe&&(Ee.id==="inbox-card"&&qe.id==="tasks-card"||Ee.id==="tasks-card"&&qe.id==="inbox-card")&&Ke==="large")return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:Ue}),a.jsxs("div",{className:"space-y-6 lg:space-y-8",children:[ie(Ee.id,Ee.size),ie(qe.id,qe.size)]})]},"revenue-with-sidebar")}const ee=ye[Ae-1],fe=ye[Ae-2];if((ee==null?void 0:ee.id)==="revenue-chart"&&(we.id==="inbox-card"||we.id==="tasks-card")){const Ee=ee.size||"large",qe=ye[Ae+1];if(Ee==="large"&&qe&&(we.id==="inbox-card"&&qe.id==="tasks-card"||we.id==="tasks-card"&&qe.id==="inbox-card"))return null}if((fe==null?void 0:fe.id)==="revenue-chart"&&(we.id==="inbox-card"||we.id==="tasks-card")&&(fe.size||"large")==="large")return null;const Fe=ae(we.size||"medium",we.id);return Fe?a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8",children:a.jsx("div",{className:Fe,children:Ue})},we.id):a.jsx("div",{children:Ue},we.id)})}),T&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>D(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-6 lg:p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(Th,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Currency Totals"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"View totals in different currencies"})]})]}),a.jsx("button",{onClick:()=>D(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(zt,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(ad,{className:"w-4 h-4 text-blue-600"}),"Open Pipeline"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(w).length>0?Object.entries(w).sort((we,Ae)=>Ae[1]-we[1]).map(([we,Ae])=>{const Ue=Z3(we),me=we===j;return a.jsxs("div",{className:`p-5 rounded-2xl border-2 ${me?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-black text-slate-900",children:(Ue==null?void 0:Ue.symbol)||we}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:we}),me&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:ku(Ae,we)}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:(Ue==null?void 0:Ue.name)||we})]},we)}):a.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-slate-400 font-medium",children:"No pipeline data available"})})})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 uppercase tracking-widest mb-4 flex items-center gap-2",children:[a.jsx(Uu,{className:"w-4 h-4 text-emerald-600"}),"Unpaid Invoices"]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.keys(N).length>0?Object.entries(N).sort((we,Ae)=>Ae[1]-we[1]).map(([we,Ae])=>{const Ue=Z3(we),me=we===j;return a.jsxs("div",{className:`p-5 rounded-2xl border-2 ${me?"bg-indigo-50 border-indigo-300 shadow-md":"bg-slate-50 border-slate-200"} transition-all hover:shadow-lg`,children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-lg font-black text-slate-900",children:(Ue==null?void 0:Ue.symbol)||we}),a.jsx("span",{className:"text-xs font-bold text-slate-500 uppercase",children:we}),me&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-[9px] font-black uppercase rounded-full",children:"Most Used"})]})}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:ku(Ae,we)}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:(Ue==null?void 0:Ue.name)||we})]},we)}):a.jsx("div",{className:"col-span-2 p-8 text-center bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-slate-400 font-medium",children:"No invoice data available"})})})]})]})}),a.jsx("div",{className:"p-6 lg:p-8 border-t border-slate-100 bg-slate-50",children:a.jsxs("button",{onClick:()=>D(!1),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(Hs,{className:"w-4 h-4"}),"Close"]})})]})})]})]})},WR=({extractedData:e,suggestions:t,source:r,onConfirm:n,onCancel:s,isProcessing:i=!1,companies:o})=>{var M,F,B,Y;const[l,c]=P.useState(""),[d,f]=P.useState(""),[u,p]=P.useState(""),[h,m]=P.useState(""),[g,x]=P.useState(""),[v,b]=P.useState(""),[w,y]=P.useState(""),[N,S]=P.useState(null),[j,_]=P.useState({});P.useEffect(()=>{var V,J,U,X,W,E,R;r==="business_card"?(c(((V=e==null?void 0:e.name)==null?void 0:V.value)||""),f(((J=e==null?void 0:e.email)==null?void 0:J.value)||""),p(((U=e==null?void 0:e.phone)==null?void 0:U.value)||""),m(((X=e==null?void 0:e.title)==null?void 0:X.value)||""),x(((W=e==null?void 0:e.linkedin)==null?void 0:W.value)||""),b(((E=e==null?void 0:e.company)==null?void 0:E.value)||""),y(((R=e==null?void 0:e.website)==null?void 0:R.value)||"")):r==="linkedin"&&(c((e==null?void 0:e.name)||""),f((e==null?void 0:e.email)||""),p((e==null?void 0:e.phone)||""),m((e==null?void 0:e.currentRole)||(e==null?void 0:e.headline)||""),x((e==null?void 0:e.profileImageUrl)||""),b((e==null?void 0:e.currentCompany)||""),y((e==null?void 0:e.companyWebsite)||"")),t!=null&&t.existingCompany&&S(t.existingCompany.id)},[e,t,r]);const T=V=>V>=95?"text-green-600 bg-green-50":V>=75?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",D=V=>V>=95?"High Confidence":V>=75?"Medium - Verify":"Low - Review",A=()=>{const V={};return l.trim()||(V.name="Name is required"),d&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d)&&(V.email="Invalid email format"),!N&&!v.trim()&&(V.company="Company is required"),_(V),Object.keys(V).length===0},C=()=>{if(!A())return;const V={name:l,email:d.toLowerCase(),phone:u,role:h,linkedin:g};n(V,{name:v,website:w},N)};return a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Review & Confirm"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r==="business_card"?"Verify scanned business card data":"Verify LinkedIn profile data"})]}),a.jsx("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:a.jsx(zt,{className:"w-6 h-6"})})]}),(t==null?void 0:t.existingContact)&&a.jsxs("div",{className:"mb-6 p-4 bg-yellow-50 border border-yellow-200 rounded-lg flex items-start",children:[a.jsx(f0,{className:"w-5 h-5 text-yellow-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-yellow-900",children:"Duplicate Contact Detected"}),a.jsxs("p",{className:"text-sm text-yellow-800 mt-1",children:['A contact with email "',t.existingContact.email,'" already exists.']}),a.jsx("div",{className:"mt-2 flex gap-2",children:a.jsx("button",{type:"button",className:"text-sm text-yellow-900 underline hover:no-underline",onClick:()=>window.dispatchEvent(new CustomEvent("navigate-to-contact",{detail:t.existingContact.id})),children:"View Existing Contact"})})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(co,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:l,onChange:V=>c(V.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${j.name?"border-red-500":"border-gray-300"}`,placeholder:"John Doe"}),r==="business_card"&&((M=e==null?void 0:e.name)==null?void 0:M.confidence)>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${T(e.name.confidence)}`,children:D(e.name.confidence)})]}),j.name&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:j.name})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(ba,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:d,onChange:V=>f(V.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${j.email?"border-red-500":"border-gray-300"}`,placeholder:"john@example.com"}),r==="business_card"&&((F=e==null?void 0:e.email)==null?void 0:F.confidence)>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${T(e.email.confidence)}`,children:D(e.email.confidence)})]}),j.email&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:j.email})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),a.jsxs("div",{className:"relative",children:[a.jsx(_k,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"tel",value:u,onChange:V=>p(V.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"+1 (555) 123-4567"}),r==="business_card"&&((B=e==null?void 0:e.phone)==null?void 0:B.confidence)>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${T(e.phone.confidence)}`,children:D(e.phone.confidence)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Role/Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(al,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:h,onChange:V=>m(V.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Chief Technology Officer"}),r==="business_card"&&((Y=e==null?void 0:e.title)==null?void 0:Y.confidence)>0&&a.jsx("span",{className:`absolute right-3 top-2.5 text-xs px-2 py-1 rounded ${T(e.title.confidence)}`,children:D(e.title.confidence)})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"LinkedIn Profile"}),a.jsxs("div",{className:"relative",children:[a.jsx(Oh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:g,onChange:V=>x(V.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://linkedin.com/in/johndoe"})]})]})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Company Information"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company *"}),a.jsxs("select",{value:N||"new",onChange:V=>{const J=V.target.value;if(J==="new")S(null);else{S(J);const U=o.find(X=>X.id===J);U&&(b(U.name),y(U.website))}},className:`w-full px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${j.company?"border-red-500":"border-gray-300"}`,children:[a.jsx("option",{value:"new",children:"+ Create New Company"}),o.map(V=>a.jsx("option",{value:V.id,children:V.name},V.id))]}),j.company&&a.jsx("p",{className:"text-xs text-red-600 mt-1",children:j.company})]}),!N&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),a.jsxs("div",{className:"relative",children:[a.jsx(rd,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"text",value:v,onChange:V=>b(V.target.value),className:`w-full pl-10 pr-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 ${j.company?"border-red-500":"border-gray-300"}`,placeholder:"TechCorp Industries"})]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Website"}),a.jsxs("div",{className:"relative",children:[a.jsx(Th,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:w,onChange:V=>y(V.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.techcorp.com"})]})]})]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{type:"button",onClick:s,disabled:i,className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),a.jsx("button",{type:"button",onClick:C,disabled:i,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50",children:i?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Qr,{className:"w-5 h-5"}),"Confirm & Save"]})})]})]})},xbe=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:n,showError:s}=hn(),[i,o]=P.useState("select"),[l,c]=P.useState(null),[d,f]=P.useState(null),[u,p]=P.useState(null),[h,m]=P.useState(null),[g,x]=P.useState(null),[v,b]=P.useState(!1),[w,y]=P.useState([]),[N,S]=P.useState([]),j=P.useRef(null),_=P.useRef(null),T=P.useRef(null),D=P.useRef(null);st.useEffect(()=>{(async()=>{try{const[U,X]=await Promise.all([jc(),qR(!0)]);y(U.data||[]),S(X.data||[])}catch(U){console.error("Failed to load data:",U)}})()},[]);const A=async()=>{console.log("Camera button clicked - starting camera..."),x(null);try{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)throw new Error("Camera not supported on this browser");o("camera-loading");let J;try{console.log("Requesting rear camera..."),J=await navigator.mediaDevices.getUserMedia({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080}}})}catch{console.log("Rear camera not available, trying any camera..."),J=await navigator.mediaDevices.getUserMedia({video:!0})}if(console.log("Camera stream obtained:",J),D.current=J,o("camera"),await new Promise(U=>setTimeout(U,100)),j.current){j.current.srcObject=J,console.log("Stream set to video element");try{await j.current.play(),console.log(" Camera started successfully")}catch(U){console.error("Video play error:",U)}}}catch(J){console.error(" Camera error:",J);let U="Camera access denied. Please grant camera permission or use file upload.";J.name==="NotAllowedError"?U="Camera permission denied. Please allow camera access in your browser settings.":J.name==="NotFoundError"?U="No camera found on this device. Please use file upload instead.":J.name==="NotReadableError"?U="Camera is already in use by another application.":J.name==="NotSupportedError"&&(U="Camera not supported on this browser. Please use file upload."),x(U),o("select"),C()}},C=()=>{D.current&&(D.current.getTracks().forEach(J=>J.stop()),D.current=null),j.current&&(j.current.srcObject=null)},M=()=>{if(!j.current||!_.current)return;const J=j.current,U=_.current,X=U.getContext("2d");X&&(U.width=J.videoWidth,U.height=J.videoHeight,X.drawImage(J,0,0),U.toBlob(W=>{if(W){const E=new File([W],`business-card-${Date.now()}.jpg`,{type:"image/jpeg"});c(E),f(U.toDataURL("image/jpeg")),C(),B(E)}},"image/jpeg",.95))},F=J=>{const U=J.target.files;if(!U||U.length===0)return;const X=U[0];if(!["image/jpeg","image/jpg","image/png","application/pdf"].includes(X.type)){x("Invalid file type. Please upload JPG, PNG, or PDF.");return}if(X.size>10*1024*1024){x("File too large. Maximum size is 10MB.");return}if(c(X),X.type.startsWith("image/")){const W=new FileReader;W.onload=E=>{var R;f((R=E.target)==null?void 0:R.result)},W.readAsDataURL(X)}B(X)},B=async J=>{o("processing"),x(null),b(!0);try{const U=await cbe(J,r);if(U.success)p(U.data.extractedData),m(U.data.suggestions),o("review");else throw new Error("Failed to process business card")}catch(U){console.error("Processing error:",U),x(U.message||"Failed to process business card. Please try again."),o("select")}finally{b(!1)}},Y=async(J,U,X)=>{b(!0),x(null);try{const W=N.find(R=>R.name==="Business Card Scanner");if((await dbe({contactData:J,companyData:U,linkToExistingCompany:X,leadSourceId:(W==null?void 0:W.id)||"",scanConfidenceScore:V(u),originalScanData:u,userId:r})).success)o("success"),n("Contact created from business card!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(W){console.error("Confirm error:",W),x(W.message||"Failed to create contact. Please try again."),s(W.message||"Failed to create contact")}finally{b(!1)}},V=J=>{var X,W,E,R,q;if(!J)return 0;const U=[((X=J.name)==null?void 0:X.confidence)||0,((W=J.email)==null?void 0:W.confidence)||0,((E=J.phone)==null?void 0:E.confidence)||0,((R=J.title)==null?void 0:R.confidence)||0,((q=J.company)==null?void 0:q.confidence)||0].filter(L=>L>0);return U.length===0?0:Math.round(U.reduce((L,H)=>L+H,0)/U.length)};return st.useEffect(()=>()=>{C()},[]),a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="select"&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan Business Card"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Choose how to capture the business card"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(zt,{className:"w-6 h-6"})})]}),g&&a.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-800",children:g}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:J=>{J.preventDefault(),console.log("Camera button clicked"),A()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center cursor-pointer",type:"button",children:[a.jsx(sE,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Use Camera"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Take a photo of the card"})]}),a.jsxs("button",{onClick:()=>{var J;return(J=T.current)==null?void 0:J.click()},className:"p-6 border-2 border-gray-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all text-center",children:[a.jsx(cd,{className:"w-12 h-12 mx-auto mb-3 text-blue-600"}),a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Upload File"}),a.jsx("p",{className:"text-sm text-gray-600",children:"JPG, PNG, or PDF (10MB max)"})]})]}),a.jsx("input",{ref:T,type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:F,className:"hidden"})]}),i==="camera-loading"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(ct,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Starting Camera..."}),a.jsx("p",{className:"text-gray-600",children:"Please allow camera access when prompted"})]}),i==="camera"&&a.jsxs("div",{className:"relative bg-black",children:[a.jsx("video",{ref:j,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-auto rounded-t-xl",style:{minHeight:"400px"}}),a.jsx("canvas",{ref:_,className:"hidden"}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"border-4 border-white border-dashed rounded-xl opacity-50",style:{width:"85%",height:"50%"}})}),a.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 text-white text-center bg-black bg-opacity-50 px-4 py-2 rounded-lg",children:a.jsx("p",{className:"text-sm font-semibold",children:"Center card in frame"})})]}),a.jsx("div",{className:"absolute top-4 left-4",children:a.jsx("button",{onClick:()=>{C(),o("select")},className:"bg-white rounded-full p-2 shadow-lg hover:bg-gray-100",children:a.jsx(L_,{className:"w-6 h-6 text-gray-700"})})}),a.jsx("div",{className:"absolute bottom-6 left-0 right-0 flex justify-center",children:a.jsx("button",{onClick:M,className:"w-16 h-16 bg-white rounded-full border-4 border-blue-600 shadow-lg hover:bg-blue-50 transition-colors active:scale-95",children:a.jsx(sE,{className:"w-8 h-8 mx-auto text-blue-600"})})})]}),i==="processing"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(ct,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Processing Business Card..."}),a.jsx("p",{className:"text-gray-600",children:"Extracting contact information"}),d&&a.jsx("div",{className:"mt-6",children:a.jsx("img",{src:d,alt:"Captured",className:"max-w-full max-h-40 mx-auto rounded-lg shadow-md"})})]}),i==="review"&&u&&a.jsx(WR,{extractedData:u,suggestions:h||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"business_card",onConfirm:Y,onCancel:e,isProcessing:v,companies:w}),i==="success"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Qr,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),a.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})},gbe=({onClose:e,onSuccess:t,currentUserId:r})=>{const{showSuccess:n,showError:s}=hn(),[i,o]=P.useState("input"),[l,c]=P.useState(""),[d,f]=P.useState(null),[u,p]=P.useState(null),[h,m]=P.useState(null),[g,x]=P.useState(!1),[v,b]=P.useState([]),[w,y]=P.useState([]);st.useEffect(()=>{(async()=>{try{const[A,C]=await Promise.all([jc(),qR(!0)]);b(A.data||[]),y(C.data||[])}catch(A){console.error("Failed to load data:",A)}})()},[]);const N=D=>/^(https?:\/\/)?(www\.)?linkedin\.com\/in\/[a-zA-Z0-9-_]+\/?$/i.test(D),S=D=>{let A=D.trim();return!A.startsWith("http://")&&!A.startsWith("https://")&&(A=`https://${A}`),A.includes("www.")||(A=A.replace("linkedin.com","www.linkedin.com")),A.replace(/\/$/,"")},j=D=>{c(D),m(null)},_=async()=>{var A,C,M;if(!l.trim()){m("Please enter a LinkedIn URL");return}const D=S(l);if(!N(D)){m("Invalid LinkedIn URL format. Example: linkedin.com/in/johndoe");return}o("fetching"),m(null),x(!0);try{const F=await ube({linkedinUrl:D,userId:r});if(F.success)f(F.data.profile),p(F.data.suggestions),o("review");else throw new Error("Failed to fetch LinkedIn profile")}catch(F){console.error("Fetch error:",F);let B="Failed to fetch LinkedIn profile";(A=F.message)!=null&&A.includes("Invalid LinkedIn URL")?B="Invalid LinkedIn URL format":(C=F.message)!=null&&C.includes("private")?B="This LinkedIn profile is private and cannot be accessed":(M=F.message)!=null&&M.includes("rate limit")&&(B="Rate limit exceeded. Please try again later"),m(B),o("input")}finally{x(!1)}},T=async(D,A,C)=>{x(!0),m(null);try{const M=w.find(B=>B.name==="LinkedIn Scanner");if((await fbe({contactData:D,linkedinData:d?{headline:d.headline,currentRole:d.currentRole,profileImageUrl:d.profileImageUrl}:void 0,companyData:A,linkToExistingCompany:C,leadSourceId:(M==null?void 0:M.id)||"",userId:r})).success)o("success"),n("Contact created from LinkedIn profile!"),setTimeout(()=>{t(),e()},2e3);else throw new Error("Failed to create contact")}catch(M){console.error("Confirm error:",M),m(M.message||"Failed to create contact. Please try again."),s(M.message||"Failed to create contact")}finally{x(!1)}};return a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[i==="input"&&a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Scan LinkedIn Profile"}),a.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Import contact from LinkedIn profile"})]}),a.jsx("button",{onClick:e,className:"text-gray-400 hover:text-gray-600",children:a.jsx(zt,{className:"w-6 h-6"})})]}),h&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start",children:[a.jsx(On,{className:"w-5 h-5 text-red-600 mr-3 mt-0.5 flex-shrink-0"}),a.jsx("div",{className:"text-red-800",children:h})]}),a.jsxs("div",{className:"mb-6",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"LinkedIn Profile URL"}),a.jsxs("div",{className:"relative",children:[a.jsx(Oh,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"url",value:l,onChange:D=>j(D.target.value),onKeyPress:D=>D.key==="Enter"&&_(),className:"w-full pl-10 pr-3 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"https://www.linkedin.com/in/johndoe"})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Example: linkedin.com/in/johndoe or https://www.linkedin.com/in/johndoe"})]}),a.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[a.jsx("h3",{className:"font-semibold text-blue-900 mb-2",children:"How it works"}),a.jsxs("ul",{className:"text-sm text-blue-800 space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"Paste any public LinkedIn profile URL"}),a.jsx("li",{children:"We'll extract available contact and company information"}),a.jsx("li",{children:"Review and edit before saving to your CRM"}),a.jsx("li",{children:"Note: Email and phone may not be publicly available"})]})]}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{onClick:_,disabled:!l.trim(),className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(Oh,{className:"w-5 h-5"}),"Fetch Profile"]})})]}),i==="fetching"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(ct,{className:"w-16 h-16 mx-auto text-blue-600 animate-spin mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Fetching LinkedIn Profile..."}),a.jsx("p",{className:"text-gray-600",children:"Extracting contact information"})]}),i==="review"&&d&&a.jsx(WR,{extractedData:d,suggestions:u||{existingContact:null,existingCompany:null,createNewCompany:!0},source:"linkedin",onConfirm:T,onCancel:e,isProcessing:g,companies:v}),i==="success"&&a.jsxs("div",{className:"p-12 text-center",children:[a.jsx(Qr,{className:"w-16 h-16 mx-auto text-green-600 mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Contact Created!"}),a.jsx("p",{className:"text-gray-600",children:"The contact has been successfully added to your CRM"})]})]})})};var Vx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},vbe={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},If,$S,mD,bbe=(mD=class{constructor(){Er(this,If,vbe);Er(this,$S,!1)}setTimeoutProvider(e){or(this,If,e)}setTimeout(e,t){return Ze(this,If).setTimeout(e,t)}clearTimeout(e){Ze(this,If).clearTimeout(e)}setInterval(e,t){return Ze(this,If).setInterval(e,t)}clearInterval(e){Ze(this,If).clearInterval(e)}},If=new WeakMap,$S=new WeakMap,mD),gh=new bbe;function ybe(e){setTimeout(e,0)}var Qh=typeof window>"u"||"Deno"in globalThis;function jo(){}function wbe(e,t){return typeof e=="function"?e(t):e}function eS(e){return typeof e=="number"&&e>=0&&e!==1/0}function VR(e,t){return Math.max(e+(t||0)-Date.now(),0)}function l0(e,t){return typeof e=="function"?e(t):e}function ic(e,t){return typeof e=="function"?e(t):e}function gI(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==G6(o,t.options))return!1}else if(!S1(t.queryKey,o))return!1}if(r!=="all"){const c=t.isActive();if(r==="active"&&!c||r==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||i&&!i(t))}function vI(e,t){const{exact:r,status:n,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(Jh(t.options.mutationKey)!==Jh(i))return!1}else if(!S1(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||s&&!s(t))}function G6(e,t){return((t==null?void 0:t.queryKeyHashFn)||Jh)(e)}function Jh(e){return JSON.stringify(e,(t,r)=>tS(r)?Object.keys(r).sort().reduce((n,s)=>(n[s]=r[s],n),{}):r)}function S1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>S1(e[r],t[r])):!1}var Nbe=Object.prototype.hasOwnProperty;function GR(e,t,r=0){if(e===t)return e;if(r>500)return t;const n=bI(e)&&bI(t);if(!n&&!(tS(e)&&tS(t)))return t;const i=(n?e:Object.keys(e)).length,o=n?t:Object.keys(t),l=o.length,c=n?new Array(l):{};let d=0;for(let f=0;f<l;f++){const u=n?f:o[f],p=e[u],h=t[u];if(p===h){c[u]=p,(n?f<i:Nbe.call(e,u))&&d++;continue}if(p===null||h===null||typeof p!="object"||typeof h!="object"){c[u]=h;continue}const m=GR(p,h,r+1);c[u]=m,m===p&&d++}return i===l&&d===i?e:c}function Kw(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function bI(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function tS(e){if(!yI(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!yI(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function yI(e){return Object.prototype.toString.call(e)==="[object Object]"}function jbe(e){return new Promise(t=>{gh.setTimeout(t,e)})}function rS(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?GR(e,t):t}function kbe(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function Sbe(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var K6=Symbol();function KR(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===K6?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function X6(e,t){return typeof e=="function"?e(...t):!!e}function _be(e,t,r){let n=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??(s=t()),n||(n=!0,s.aborted?r():s.addEventListener("abort",r,{once:!0})),s)}),e}var bh,Df,Mm,xD,Abe=(xD=class extends Vx{constructor(){super();Er(this,bh);Er(this,Df);Er(this,Mm);or(this,Mm,t=>{if(!Qh&&window.addEventListener){const r=()=>t();return window.addEventListener("visibilitychange",r,!1),()=>{window.removeEventListener("visibilitychange",r)}}})}onSubscribe(){Ze(this,Df)||this.setEventListener(Ze(this,Mm))}onUnsubscribe(){var t;this.hasListeners()||((t=Ze(this,Df))==null||t.call(this),or(this,Df,void 0))}setEventListener(t){var r;or(this,Mm,t),(r=Ze(this,Df))==null||r.call(this),or(this,Df,t(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()}))}setFocused(t){Ze(this,bh)!==t&&(or(this,bh,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(r=>{r(t)})}isFocused(){var t;return typeof Ze(this,bh)=="boolean"?Ze(this,bh):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},bh=new WeakMap,Df=new WeakMap,Mm=new WeakMap,xD),Y6=new Abe;function nS(){let e,t;const r=new Promise((s,i)=>{e=s,t=i});r.status="pending",r.catch(()=>{});function n(s){Object.assign(r,s),delete r.resolve,delete r.reject}return r.resolve=s=>{n({status:"fulfilled",value:s}),e(s)},r.reject=s=>{n({status:"rejected",reason:s}),t(s)},r}var Cbe=ybe;function Ebe(){let e=[],t=0,r=l=>{l()},n=l=>{l()},s=Cbe;const i=l=>{t?e.push(l):s(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&s(()=>{n(()=>{l.forEach(c=>{r(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{s=l}}}var ei=Ebe(),Rm,Lf,Bm,gD,Tbe=(gD=class extends Vx{constructor(){super();Er(this,Rm,!0);Er(this,Lf);Er(this,Bm);or(this,Bm,t=>{if(!Qh&&window.addEventListener){const r=()=>t(!0),n=()=>t(!1);return window.addEventListener("online",r,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",r),window.removeEventListener("offline",n)}}})}onSubscribe(){Ze(this,Lf)||this.setEventListener(Ze(this,Bm))}onUnsubscribe(){var t;this.hasListeners()||((t=Ze(this,Lf))==null||t.call(this),or(this,Lf,void 0))}setEventListener(t){var r;or(this,Bm,t),(r=Ze(this,Lf))==null||r.call(this),or(this,Lf,t(this.setOnline.bind(this)))}setOnline(t){Ze(this,Rm)!==t&&(or(this,Rm,t),this.listeners.forEach(n=>{n(t)}))}isOnline(){return Ze(this,Rm)}},Rm=new WeakMap,Lf=new WeakMap,Bm=new WeakMap,gD),Xw=new Tbe;function Obe(e){return Math.min(1e3*2**e,3e4)}function XR(e){return(e??"online")==="online"?Xw.isOnline():!0}var aS=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function YR(e){let t=!1,r=0,n;const s=nS(),i=()=>s.status!=="pending",o=g=>{var x;if(!i()){const v=new aS(g);p(v),(x=e.onCancel)==null||x.call(e,v)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>Y6.isFocused()&&(e.networkMode==="always"||Xw.isOnline())&&e.canRun(),f=()=>XR(e.networkMode)&&e.canRun(),u=g=>{i()||(n==null||n(),s.resolve(g))},p=g=>{i()||(n==null||n(),s.reject(g))},h=()=>new Promise(g=>{var x;n=v=>{(i()||d())&&g(v)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;n=void 0,i()||(g=e.onContinue)==null||g.call(e)}),m=()=>{if(i())return;let g;const x=r===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(v){g=Promise.reject(v)}Promise.resolve(g).then(u).catch(v=>{var S;if(i())return;const b=e.retry??(Qh?0:3),w=e.retryDelay??Obe,y=typeof w=="function"?w(r,v):w,N=b===!0||typeof b=="number"&&r<b||typeof b=="function"&&b(r,v);if(t||!N){p(v);return}r++,(S=e.onFail)==null||S.call(e,r,v),jbe(y).then(()=>d()?void 0:h()).then(()=>{t?p(v):m()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(n==null||n(),s),cancelRetry:l,continueRetry:c,canStart:f,start:()=>(f()?m():h().then(m),s)}}var yh,vD,QR=(vD=class{constructor(){Er(this,yh)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),eS(this.gcTime)&&or(this,yh,gh.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Qh?1/0:5*60*1e3))}clearGcTimeout(){Ze(this,yh)&&(gh.clearTimeout(Ze(this,yh)),or(this,yh,void 0))}},yh=new WeakMap,vD),wh,$m,ac,Nh,pi,z1,jh,Wc,uu,bD,Pbe=(bD=class extends QR{constructor(t){super();Er(this,Wc);Er(this,wh);Er(this,$m);Er(this,ac);Er(this,Nh);Er(this,pi);Er(this,z1);Er(this,jh);or(this,jh,!1),or(this,z1,t.defaultOptions),this.setOptions(t.options),this.observers=[],or(this,Nh,t.client),or(this,ac,Ze(this,Nh).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,or(this,wh,NI(this.options)),this.state=t.state??Ze(this,wh),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Ze(this,pi))==null?void 0:t.promise}setOptions(t){if(this.options={...Ze(this,z1),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const r=NI(this.options);r.data!==void 0&&(this.setState(wI(r.data,r.dataUpdatedAt)),or(this,wh,r))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Ze(this,ac).remove(this)}setData(t,r){const n=rS(this.state.data,t,this.options);return fn(this,Wc,uu).call(this,{data:n,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),n}setState(t,r){fn(this,Wc,uu).call(this,{type:"setState",state:t,setStateOptions:r})}cancel(t){var n,s;const r=(n=Ze(this,pi))==null?void 0:n.promise;return(s=Ze(this,pi))==null||s.cancel(t),r?r.then(jo).catch(jo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ze(this,wh))}isActive(){return this.observers.some(t=>ic(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===K6||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>l0(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!VR(this.state.dataUpdatedAt,t)}onFocus(){var r;const t=this.observers.find(n=>n.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(r=Ze(this,pi))==null||r.continue()}onOnline(){var r;const t=this.observers.find(n=>n.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(r=Ze(this,pi))==null||r.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Ze(this,ac).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(r=>r!==t),this.observers.length||(Ze(this,pi)&&(Ze(this,jh)?Ze(this,pi).cancel({revert:!0}):Ze(this,pi).cancelRetry()),this.scheduleGc()),Ze(this,ac).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||fn(this,Wc,uu).call(this,{type:"invalidate"})}async fetch(t,r){var c,d,f,u,p,h,m,g,x,v,b,w;if(this.state.fetchStatus!=="idle"&&((c=Ze(this,pi))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(Ze(this,pi))return Ze(this,pi).continueRetry(),Ze(this,pi).promise}if(t&&this.setOptions(t),!this.options.queryFn){const y=this.observers.find(N=>N.options.queryFn);y&&this.setOptions(y.options)}const n=new AbortController,s=y=>{Object.defineProperty(y,"signal",{enumerable:!0,get:()=>(or(this,jh,!0),n.signal)})},i=()=>{const y=KR(this.options,r),S=(()=>{const j={client:Ze(this,Nh),queryKey:this.queryKey,meta:this.meta};return s(j),j})();return or(this,jh,!1),this.options.persister?this.options.persister(y,S,this):y(S)},l=(()=>{const y={fetchOptions:r,options:this.options,queryKey:this.queryKey,client:Ze(this,Nh),state:this.state,fetchFn:i};return s(y),y})();(d=this.options.behavior)==null||d.onFetch(l,this),or(this,$m,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((f=l.fetchOptions)==null?void 0:f.meta))&&fn(this,Wc,uu).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta}),or(this,pi,YR({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,onCancel:y=>{y instanceof aS&&y.revert&&this.setState({...Ze(this,$m),fetchStatus:"idle"}),n.abort()},onFail:(y,N)=>{fn(this,Wc,uu).call(this,{type:"failed",failureCount:y,error:N})},onPause:()=>{fn(this,Wc,uu).call(this,{type:"pause"})},onContinue:()=>{fn(this,Wc,uu).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const y=await Ze(this,pi).start();if(y===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(y),(h=(p=Ze(this,ac).config).onSuccess)==null||h.call(p,y,this),(g=(m=Ze(this,ac).config).onSettled)==null||g.call(m,y,this.state.error,this),y}catch(y){if(y instanceof aS){if(y.silent)return Ze(this,pi).promise;if(y.revert){if(this.state.data===void 0)throw y;return this.state.data}}throw fn(this,Wc,uu).call(this,{type:"error",error:y}),(v=(x=Ze(this,ac).config).onError)==null||v.call(x,y,this),(w=(b=Ze(this,ac).config).onSettled)==null||w.call(b,this.state.data,y,this),y}finally{this.scheduleGc()}}},wh=new WeakMap,$m=new WeakMap,ac=new WeakMap,Nh=new WeakMap,pi=new WeakMap,z1=new WeakMap,jh=new WeakMap,Wc=new WeakSet,uu=function(t){const r=n=>{switch(t.type){case"failed":return{...n,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...JR(n.data,this.options),fetchMeta:t.meta??null};case"success":const s={...n,...wI(t.data,t.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return or(this,$m,t.manual?s:void 0),s;case"error":const i=t.error;return{...n,error:i,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...t.state}}};this.state=r(this.state),ei.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),Ze(this,ac).notify({query:this,type:"updated",action:t})})},bD);function JR(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:XR(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function wI(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function NI(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var Ko,En,q1,wo,kh,Um,pu,Ff,H1,zm,qm,Sh,_h,Mf,Hm,Qn,Kg,sS,iS,oS,lS,cS,dS,uS,eB,yD,ZR=(yD=class extends Vx{constructor(t,r){super();Er(this,Qn);Er(this,Ko);Er(this,En);Er(this,q1);Er(this,wo);Er(this,kh);Er(this,Um);Er(this,pu);Er(this,Ff);Er(this,H1);Er(this,zm);Er(this,qm);Er(this,Sh);Er(this,_h);Er(this,Mf);Er(this,Hm,new Set);this.options=r,or(this,Ko,t),or(this,Ff,null),or(this,pu,nS()),this.bindMethods(),this.setOptions(r)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Ze(this,En).addObserver(this),jI(Ze(this,En),this.options)?fn(this,Qn,Kg).call(this):this.updateResult(),fn(this,Qn,lS).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return fS(Ze(this,En),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return fS(Ze(this,En),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,fn(this,Qn,cS).call(this),fn(this,Qn,dS).call(this),Ze(this,En).removeObserver(this)}setOptions(t){const r=this.options,n=Ze(this,En);if(this.options=Ze(this,Ko).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof ic(this.options.enabled,Ze(this,En))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");fn(this,Qn,uS).call(this),Ze(this,En).setOptions(this.options),r._defaulted&&!Kw(this.options,r)&&Ze(this,Ko).getQueryCache().notify({type:"observerOptionsUpdated",query:Ze(this,En),observer:this});const s=this.hasListeners();s&&kI(Ze(this,En),n,this.options,r)&&fn(this,Qn,Kg).call(this),this.updateResult(),s&&(Ze(this,En)!==n||ic(this.options.enabled,Ze(this,En))!==ic(r.enabled,Ze(this,En))||l0(this.options.staleTime,Ze(this,En))!==l0(r.staleTime,Ze(this,En)))&&fn(this,Qn,sS).call(this);const i=fn(this,Qn,iS).call(this);s&&(Ze(this,En)!==n||ic(this.options.enabled,Ze(this,En))!==ic(r.enabled,Ze(this,En))||i!==Ze(this,Mf))&&fn(this,Qn,oS).call(this,i)}getOptimisticResult(t){const r=Ze(this,Ko).getQueryCache().build(Ze(this,Ko),t),n=this.createResult(r,t);return Dbe(this,n)&&(or(this,wo,n),or(this,Um,this.options),or(this,kh,Ze(this,En).state)),n}getCurrentResult(){return Ze(this,wo)}trackResult(t,r){return new Proxy(t,{get:(n,s)=>(this.trackProp(s),r==null||r(s),s==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Ze(this,pu).status==="pending"&&Ze(this,pu).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,s))})}trackProp(t){Ze(this,Hm).add(t)}getCurrentQuery(){return Ze(this,En)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const r=Ze(this,Ko).defaultQueryOptions(t),n=Ze(this,Ko).getQueryCache().build(Ze(this,Ko),r);return n.fetch().then(()=>this.createResult(n,r))}fetch(t){return fn(this,Qn,Kg).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Ze(this,wo)))}createResult(t,r){var T;const n=Ze(this,En),s=this.options,i=Ze(this,wo),o=Ze(this,kh),l=Ze(this,Um),d=t!==n?t.state:Ze(this,q1),{state:f}=t;let u={...f},p=!1,h;if(r._optimisticResults){const D=this.hasListeners(),A=!D&&jI(t,r),C=D&&kI(t,n,r,s);(A||C)&&(u={...u,...JR(f.data,t.options)}),r._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:m,errorUpdatedAt:g,status:x}=u;h=u.data;let v=!1;if(r.placeholderData!==void 0&&h===void 0&&x==="pending"){let D;i!=null&&i.isPlaceholderData&&r.placeholderData===(l==null?void 0:l.placeholderData)?(D=i.data,v=!0):D=typeof r.placeholderData=="function"?r.placeholderData((T=Ze(this,qm))==null?void 0:T.state.data,Ze(this,qm)):r.placeholderData,D!==void 0&&(x="success",h=rS(i==null?void 0:i.data,D,r),p=!0)}if(r.select&&h!==void 0&&!v)if(i&&h===(o==null?void 0:o.data)&&r.select===Ze(this,H1))h=Ze(this,zm);else try{or(this,H1,r.select),h=r.select(h),h=rS(i==null?void 0:i.data,h,r),or(this,zm,h),or(this,Ff,null)}catch(D){or(this,Ff,D)}Ze(this,Ff)&&(m=Ze(this,Ff),h=Ze(this,zm),g=Date.now(),x="error");const b=u.fetchStatus==="fetching",w=x==="pending",y=x==="error",N=w&&b,S=h!==void 0,_={status:x,fetchStatus:u.fetchStatus,isPending:w,isSuccess:x==="success",isError:y,isInitialLoading:N,isLoading:N,data:h,dataUpdatedAt:u.dataUpdatedAt,error:m,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:b,isRefetching:b&&!w,isLoadingError:y&&!S,isPaused:u.fetchStatus==="paused",isPlaceholderData:p,isRefetchError:y&&S,isStale:Q6(t,r),refetch:this.refetch,promise:Ze(this,pu),isEnabled:ic(r.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const D=_.data!==void 0,A=_.status==="error"&&!D,C=B=>{A?B.reject(_.error):D&&B.resolve(_.data)},M=()=>{const B=or(this,pu,_.promise=nS());C(B)},F=Ze(this,pu);switch(F.status){case"pending":t.queryHash===n.queryHash&&C(F);break;case"fulfilled":(A||_.data!==F.value)&&M();break;case"rejected":(!A||_.error!==F.reason)&&M();break}}return _}updateResult(){const t=Ze(this,wo),r=this.createResult(Ze(this,En),this.options);if(or(this,kh,Ze(this,En).state),or(this,Um,this.options),Ze(this,kh).data!==void 0&&or(this,qm,Ze(this,En)),Kw(r,t))return;or(this,wo,r);const n=()=>{if(!t)return!0;const{notifyOnChangeProps:s}=this.options,i=typeof s=="function"?s():s;if(i==="all"||!i&&!Ze(this,Hm).size)return!0;const o=new Set(i??Ze(this,Hm));return this.options.throwOnError&&o.add("error"),Object.keys(Ze(this,wo)).some(l=>{const c=l;return Ze(this,wo)[c]!==t[c]&&o.has(c)})};fn(this,Qn,eB).call(this,{listeners:n()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&fn(this,Qn,lS).call(this)}},Ko=new WeakMap,En=new WeakMap,q1=new WeakMap,wo=new WeakMap,kh=new WeakMap,Um=new WeakMap,pu=new WeakMap,Ff=new WeakMap,H1=new WeakMap,zm=new WeakMap,qm=new WeakMap,Sh=new WeakMap,_h=new WeakMap,Mf=new WeakMap,Hm=new WeakMap,Qn=new WeakSet,Kg=function(t){fn(this,Qn,uS).call(this);let r=Ze(this,En).fetch(this.options,t);return t!=null&&t.throwOnError||(r=r.catch(jo)),r},sS=function(){fn(this,Qn,cS).call(this);const t=l0(this.options.staleTime,Ze(this,En));if(Qh||Ze(this,wo).isStale||!eS(t))return;const n=VR(Ze(this,wo).dataUpdatedAt,t)+1;or(this,Sh,gh.setTimeout(()=>{Ze(this,wo).isStale||this.updateResult()},n))},iS=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Ze(this,En)):this.options.refetchInterval)??!1},oS=function(t){fn(this,Qn,dS).call(this),or(this,Mf,t),!(Qh||ic(this.options.enabled,Ze(this,En))===!1||!eS(Ze(this,Mf))||Ze(this,Mf)===0)&&or(this,_h,gh.setInterval(()=>{(this.options.refetchIntervalInBackground||Y6.isFocused())&&fn(this,Qn,Kg).call(this)},Ze(this,Mf)))},lS=function(){fn(this,Qn,sS).call(this),fn(this,Qn,oS).call(this,fn(this,Qn,iS).call(this))},cS=function(){Ze(this,Sh)&&(gh.clearTimeout(Ze(this,Sh)),or(this,Sh,void 0))},dS=function(){Ze(this,_h)&&(gh.clearInterval(Ze(this,_h)),or(this,_h,void 0))},uS=function(){const t=Ze(this,Ko).getQueryCache().build(Ze(this,Ko),this.options);if(t===Ze(this,En))return;const r=Ze(this,En);or(this,En,t),or(this,q1,t.state),this.hasListeners()&&(r==null||r.removeObserver(this),t.addObserver(this))},eB=function(t){ei.batch(()=>{t.listeners&&this.listeners.forEach(r=>{r(Ze(this,wo))}),Ze(this,Ko).getQueryCache().notify({query:Ze(this,En),type:"observerResultsUpdated"})})},yD);function Ibe(e,t){return ic(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function jI(e,t){return Ibe(e,t)||e.state.data!==void 0&&fS(e,t,t.refetchOnMount)}function fS(e,t,r){if(ic(t.enabled,e)!==!1&&l0(t.staleTime,e)!=="static"){const n=typeof r=="function"?r(e):r;return n==="always"||n!==!1&&Q6(e,t)}return!1}function kI(e,t,r,n){return(e!==t||ic(n.enabled,e)===!1)&&(!r.suspense||e.state.status!=="error")&&Q6(e,r)}function Q6(e,t){return ic(t.enabled,e)!==!1&&e.isStaleByTime(l0(t.staleTime,e))}function Dbe(e,t){return!Kw(e.getCurrentResult(),t)}function Yw(e){return{onFetch:(t,r)=>{var f,u,p,h,m;const n=t.options,s=(p=(u=(f=t.fetchOptions)==null?void 0:f.meta)==null?void 0:u.fetchMore)==null?void 0:p.direction,i=((h=t.state.data)==null?void 0:h.pages)||[],o=((m=t.state.data)==null?void 0:m.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const x=w=>{_be(w,()=>t.signal,()=>g=!0)},v=KR(t.options,t.fetchOptions),b=async(w,y,N)=>{if(g)return Promise.reject();if(y==null&&w.pages.length)return Promise.resolve(w);const j=(()=>{const A={client:t.client,queryKey:t.queryKey,pageParam:y,direction:N?"backward":"forward",meta:t.options.meta};return x(A),A})(),_=await v(j),{maxPages:T}=t.options,D=N?Sbe:kbe;return{pages:D(w.pages,_,T),pageParams:D(w.pageParams,y,T)}};if(s&&i.length){const w=s==="backward",y=w?tB:hS,N={pages:i,pageParams:o},S=y(n,N);l=await b(N,S,w)}else{const w=e??i.length;do{const y=c===0?o[0]??n.initialPageParam:hS(n,l);if(c>0&&y==null)break;l=await b(l,y),c++}while(c<w)}return l};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r)}:t.fetchFn=d}}}function hS(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function tB(e,{pages:t,pageParams:r}){var n;return t.length>0?(n=e.getPreviousPageParam)==null?void 0:n.call(e,t[0],t,r[0],r):void 0}function Lbe(e,t){return t?hS(e,t)!=null:!1}function Fbe(e,t){return!t||!e.getPreviousPageParam?!1:tB(e,t)!=null}var Mbe=class extends ZR{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:Yw()})}getOptimisticResult(e){return e.behavior=Yw(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){var m,g;const{state:r}=e,n=super.createResult(e,t),{isFetching:s,isRefetching:i,isError:o,isRefetchError:l}=n,c=(g=(m=r.fetchMeta)==null?void 0:m.fetchMore)==null?void 0:g.direction,d=o&&c==="forward",f=s&&c==="forward",u=o&&c==="backward",p=s&&c==="backward";return{...n,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:Lbe(t,r.data),hasPreviousPage:Fbe(t,r.data),isFetchNextPageError:d,isFetchingNextPage:f,isFetchPreviousPageError:u,isFetchingPreviousPage:p,isRefetchError:l&&!d&&!u,isRefetching:i&&!f&&!p}}},W1,Id,Zi,Ah,Dd,kf,wD,Rbe=(wD=class extends QR{constructor(t){super();Er(this,Dd);Er(this,W1);Er(this,Id);Er(this,Zi);Er(this,Ah);or(this,W1,t.client),this.mutationId=t.mutationId,or(this,Zi,t.mutationCache),or(this,Id,[]),this.state=t.state||rB(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Ze(this,Id).includes(t)||(Ze(this,Id).push(t),this.clearGcTimeout(),Ze(this,Zi).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){or(this,Id,Ze(this,Id).filter(r=>r!==t)),this.scheduleGc(),Ze(this,Zi).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Ze(this,Id).length||(this.state.status==="pending"?this.scheduleGc():Ze(this,Zi).remove(this))}continue(){var t;return((t=Ze(this,Ah))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,f,u,p,h,m,g,x,v,b,w,y,N,S,j;const r=()=>{fn(this,Dd,kf).call(this,{type:"continue"})},n={client:Ze(this,W1),meta:this.options.meta,mutationKey:this.options.mutationKey};or(this,Ah,YR({fn:()=>this.options.mutationFn?this.options.mutationFn(t,n):Promise.reject(new Error("No mutationFn found")),onFail:(_,T)=>{fn(this,Dd,kf).call(this,{type:"failed",failureCount:_,error:T})},onPause:()=>{fn(this,Dd,kf).call(this,{type:"pause"})},onContinue:r,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ze(this,Zi).canRun(this)}));const s=this.state.status==="pending",i=!Ze(this,Ah).canStart();try{if(s)r();else{fn(this,Dd,kf).call(this,{type:"pending",variables:t,isPaused:i}),Ze(this,Zi).config.onMutate&&await Ze(this,Zi).config.onMutate(t,this,n);const T=await((l=(o=this.options).onMutate)==null?void 0:l.call(o,t,n));T!==this.state.context&&fn(this,Dd,kf).call(this,{type:"pending",context:T,variables:t,isPaused:i})}const _=await Ze(this,Ah).start();return await((d=(c=Ze(this,Zi).config).onSuccess)==null?void 0:d.call(c,_,t,this.state.context,this,n)),await((u=(f=this.options).onSuccess)==null?void 0:u.call(f,_,t,this.state.context,n)),await((h=(p=Ze(this,Zi).config).onSettled)==null?void 0:h.call(p,_,null,this.state.variables,this.state.context,this,n)),await((g=(m=this.options).onSettled)==null?void 0:g.call(m,_,null,t,this.state.context,n)),fn(this,Dd,kf).call(this,{type:"success",data:_}),_}catch(_){try{await((v=(x=Ze(this,Zi).config).onError)==null?void 0:v.call(x,_,t,this.state.context,this,n))}catch(T){Promise.reject(T)}try{await((w=(b=this.options).onError)==null?void 0:w.call(b,_,t,this.state.context,n))}catch(T){Promise.reject(T)}try{await((N=(y=Ze(this,Zi).config).onSettled)==null?void 0:N.call(y,void 0,_,this.state.variables,this.state.context,this,n))}catch(T){Promise.reject(T)}try{await((j=(S=this.options).onSettled)==null?void 0:j.call(S,void 0,_,t,this.state.context,n))}catch(T){Promise.reject(T)}throw fn(this,Dd,kf).call(this,{type:"error",error:_}),_}finally{Ze(this,Zi).runNext(this)}}},W1=new WeakMap,Id=new WeakMap,Zi=new WeakMap,Ah=new WeakMap,Dd=new WeakSet,kf=function(t){const r=n=>{switch(t.type){case"failed":return{...n,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...n,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:t.error,failureCount:n.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=r(this.state),ei.batch(()=>{Ze(this,Id).forEach(n=>{n.onMutationUpdate(t)}),Ze(this,Zi).notify({mutation:this,type:"updated",action:t})})},wD);function rB(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var mu,Vc,V1,ND,Bbe=(ND=class extends Vx{constructor(t={}){super();Er(this,mu);Er(this,Vc);Er(this,V1);this.config=t,or(this,mu,new Set),or(this,Vc,new Map),or(this,V1,0)}build(t,r,n){const s=new Rbe({client:t,mutationCache:this,mutationId:++Bb(this,V1)._,options:t.defaultMutationOptions(r),state:n});return this.add(s),s}add(t){Ze(this,mu).add(t);const r=_y(t);if(typeof r=="string"){const n=Ze(this,Vc).get(r);n?n.push(t):Ze(this,Vc).set(r,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Ze(this,mu).delete(t)){const r=_y(t);if(typeof r=="string"){const n=Ze(this,Vc).get(r);if(n)if(n.length>1){const s=n.indexOf(t);s!==-1&&n.splice(s,1)}else n[0]===t&&Ze(this,Vc).delete(r)}}this.notify({type:"removed",mutation:t})}canRun(t){const r=_y(t);if(typeof r=="string"){const n=Ze(this,Vc).get(r),s=n==null?void 0:n.find(i=>i.state.status==="pending");return!s||s===t}else return!0}runNext(t){var n;const r=_y(t);if(typeof r=="string"){const s=(n=Ze(this,Vc).get(r))==null?void 0:n.find(i=>i!==t&&i.state.isPaused);return(s==null?void 0:s.continue())??Promise.resolve()}else return Promise.resolve()}clear(){ei.batch(()=>{Ze(this,mu).forEach(t=>{this.notify({type:"removed",mutation:t})}),Ze(this,mu).clear(),Ze(this,Vc).clear()})}getAll(){return Array.from(Ze(this,mu))}find(t){const r={exact:!0,...t};return this.getAll().find(n=>vI(r,n))}findAll(t={}){return this.getAll().filter(r=>vI(t,r))}notify(t){ei.batch(()=>{this.listeners.forEach(r=>{r(t)})})}resumePausedMutations(){const t=this.getAll().filter(r=>r.state.isPaused);return ei.batch(()=>Promise.all(t.map(r=>r.continue().catch(jo))))}},mu=new WeakMap,Vc=new WeakMap,V1=new WeakMap,ND);function _y(e){var t;return(t=e.options.scope)==null?void 0:t.id}var xu,Rf,Xo,gu,Fu,l2,pS,jD,$be=(jD=class extends Vx{constructor(r,n){super();Er(this,Fu);Er(this,xu);Er(this,Rf);Er(this,Xo);Er(this,gu);or(this,xu,r),this.setOptions(n),this.bindMethods(),fn(this,Fu,l2).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(r){var s;const n=this.options;this.options=Ze(this,xu).defaultMutationOptions(r),Kw(this.options,n)||Ze(this,xu).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ze(this,Xo),observer:this}),n!=null&&n.mutationKey&&this.options.mutationKey&&Jh(n.mutationKey)!==Jh(this.options.mutationKey)?this.reset():((s=Ze(this,Xo))==null?void 0:s.state.status)==="pending"&&Ze(this,Xo).setOptions(this.options)}onUnsubscribe(){var r;this.hasListeners()||(r=Ze(this,Xo))==null||r.removeObserver(this)}onMutationUpdate(r){fn(this,Fu,l2).call(this),fn(this,Fu,pS).call(this,r)}getCurrentResult(){return Ze(this,Rf)}reset(){var r;(r=Ze(this,Xo))==null||r.removeObserver(this),or(this,Xo,void 0),fn(this,Fu,l2).call(this),fn(this,Fu,pS).call(this)}mutate(r,n){var s;return or(this,gu,n),(s=Ze(this,Xo))==null||s.removeObserver(this),or(this,Xo,Ze(this,xu).getMutationCache().build(Ze(this,xu),this.options)),Ze(this,Xo).addObserver(this),Ze(this,Xo).execute(r)}},xu=new WeakMap,Rf=new WeakMap,Xo=new WeakMap,gu=new WeakMap,Fu=new WeakSet,l2=function(){var n;const r=((n=Ze(this,Xo))==null?void 0:n.state)??rB();or(this,Rf,{...r,isPending:r.status==="pending",isSuccess:r.status==="success",isError:r.status==="error",isIdle:r.status==="idle",mutate:this.mutate,reset:this.reset})},pS=function(r){ei.batch(()=>{var n,s,i,o,l,c,d,f;if(Ze(this,gu)&&this.hasListeners()){const u=Ze(this,Rf).variables,p=Ze(this,Rf).context,h={client:Ze(this,xu),meta:this.options.meta,mutationKey:this.options.mutationKey};if((r==null?void 0:r.type)==="success"){try{(s=(n=Ze(this,gu)).onSuccess)==null||s.call(n,r.data,u,p,h)}catch(m){Promise.reject(m)}try{(o=(i=Ze(this,gu)).onSettled)==null||o.call(i,r.data,null,u,p,h)}catch(m){Promise.reject(m)}}else if((r==null?void 0:r.type)==="error"){try{(c=(l=Ze(this,gu)).onError)==null||c.call(l,r.error,u,p,h)}catch(m){Promise.reject(m)}try{(f=(d=Ze(this,gu)).onSettled)==null||f.call(d,void 0,r.error,u,p,h)}catch(m){Promise.reject(m)}}}this.listeners.forEach(u=>{u(Ze(this,Rf))})})},jD),Ld,kD,Ube=(kD=class extends Vx{constructor(t={}){super();Er(this,Ld);this.config=t,or(this,Ld,new Map)}build(t,r,n){const s=r.queryKey,i=r.queryHash??G6(s,r);let o=this.get(i);return o||(o=new Pbe({client:t,queryKey:s,queryHash:i,options:t.defaultQueryOptions(r),state:n,defaultOptions:t.getQueryDefaults(s)}),this.add(o)),o}add(t){Ze(this,Ld).has(t.queryHash)||(Ze(this,Ld).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const r=Ze(this,Ld).get(t.queryHash);r&&(t.destroy(),r===t&&Ze(this,Ld).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){ei.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Ze(this,Ld).get(t)}getAll(){return[...Ze(this,Ld).values()]}find(t){const r={exact:!0,...t};return this.getAll().find(n=>gI(r,n))}findAll(t={}){const r=this.getAll();return Object.keys(t).length>0?r.filter(n=>gI(t,n)):r}notify(t){ei.batch(()=>{this.listeners.forEach(r=>{r(t)})})}onFocus(){ei.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){ei.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Ld=new WeakMap,kD),ls,Bf,$f,Wm,Vm,Uf,Gm,Km,SD,zbe=(SD=class{constructor(e={}){Er(this,ls);Er(this,Bf);Er(this,$f);Er(this,Wm);Er(this,Vm);Er(this,Uf);Er(this,Gm);Er(this,Km);or(this,ls,e.queryCache||new Ube),or(this,Bf,e.mutationCache||new Bbe),or(this,$f,e.defaultOptions||{}),or(this,Wm,new Map),or(this,Vm,new Map),or(this,Uf,0)}mount(){Bb(this,Uf)._++,Ze(this,Uf)===1&&(or(this,Gm,Y6.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ze(this,ls).onFocus())})),or(this,Km,Xw.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ze(this,ls).onOnline())})))}unmount(){var e,t;Bb(this,Uf)._--,Ze(this,Uf)===0&&((e=Ze(this,Gm))==null||e.call(this),or(this,Gm,void 0),(t=Ze(this,Km))==null||t.call(this),or(this,Km,void 0))}isFetching(e){return Ze(this,ls).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Ze(this,Bf).findAll({...e,status:"pending"}).length}getQueryData(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ze(this,ls).get(t.queryHash))==null?void 0:r.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=Ze(this,ls).build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(l0(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return Ze(this,ls).findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=Ze(this,ls).get(n.queryHash),i=s==null?void 0:s.state.data,o=wbe(t,i);if(o!==void 0)return Ze(this,ls).build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return ei.batch(()=>Ze(this,ls).findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){var r;const t=this.defaultQueryOptions({queryKey:e});return(r=Ze(this,ls).get(t.queryHash))==null?void 0:r.state}removeQueries(e){const t=Ze(this,ls);ei.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=Ze(this,ls);return ei.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=ei.batch(()=>Ze(this,ls).findAll(e).map(s=>s.cancel(r)));return Promise.all(n).then(jo).catch(jo)}invalidateQueries(e,t={}){return ei.batch(()=>(Ze(this,ls).findAll(e).forEach(r=>{r.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=ei.batch(()=>Ze(this,ls).findAll(e).filter(s=>!s.isDisabled()&&!s.isStatic()).map(s=>{let i=s.fetch(void 0,r);return r.throwOnError||(i=i.catch(jo)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(jo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=Ze(this,ls).build(this,t);return r.isStaleByTime(l0(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(jo).catch(jo)}fetchInfiniteQuery(e){return e.behavior=Yw(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(jo).catch(jo)}ensureInfiniteQueryData(e){return e.behavior=Yw(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Xw.isOnline()?Ze(this,Bf).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ze(this,ls)}getMutationCache(){return Ze(this,Bf)}getDefaultOptions(){return Ze(this,$f)}setDefaultOptions(e){or(this,$f,e)}setQueryDefaults(e,t){Ze(this,Wm).set(Jh(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ze(this,Wm).values()],r={};return t.forEach(n=>{S1(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){Ze(this,Vm).set(Jh(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ze(this,Vm).values()],r={};return t.forEach(n=>{S1(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Ze(this,$f).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=G6(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===K6&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Ze(this,$f).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Ze(this,ls).clear(),Ze(this,Bf).clear()}},ls=new WeakMap,Bf=new WeakMap,$f=new WeakMap,Wm=new WeakMap,Vm=new WeakMap,Uf=new WeakMap,Gm=new WeakMap,Km=new WeakMap,SD),nB=P.createContext(void 0),oa=e=>{const t=P.useContext(nB);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},qbe=({client:e,children:t})=>(P.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),a.jsx(nB.Provider,{value:e,children:t})),aB=P.createContext(!1),Hbe=()=>P.useContext(aB);aB.Provider;function Wbe(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var Vbe=P.createContext(Wbe()),Gbe=()=>P.useContext(Vbe),Kbe=(e,t,r)=>{const n=r!=null&&r.state.error&&typeof e.throwOnError=="function"?X6(e.throwOnError,[r.state.error,r]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||n)&&(t.isReset()||(e.retryOnMount=!1))},Xbe=e=>{P.useEffect(()=>{e.clearReset()},[e])},Ybe=({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&e.data===void 0||X6(r,[e.error,n])),Qbe=e=>{if(e.suspense){const r=s=>s==="static"?s:Math.max(s??1e3,1e3),n=e.staleTime;e.staleTime=typeof n=="function"?(...s)=>r(n(...s)):r(n),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},Jbe=(e,t)=>e.isLoading&&e.isFetching&&!t,Zbe=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,SI=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function sB(e,t,r){var p,h,m,g;const n=Hbe(),s=Gbe(),i=oa(),o=i.defaultQueryOptions(e);(h=(p=i.getDefaultOptions().queries)==null?void 0:p._experimental_beforeQuery)==null||h.call(p,o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=n?"isRestoring":"optimistic",Qbe(o),Kbe(o,s,l),Xbe(s);const c=!i.getQueryCache().get(o.queryHash),[d]=P.useState(()=>new t(i,o)),f=d.getOptimisticResult(o),u=!n&&e.subscribed!==!1;if(P.useSyncExternalStore(P.useCallback(x=>{const v=u?d.subscribe(ei.batchCalls(x)):jo;return d.updateResult(),v},[d,u]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),P.useEffect(()=>{d.setOptions(o)},[o,d]),Zbe(o,f))throw SI(o,d,s);if(Ybe({result:f,errorResetBoundary:s,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw f.error;if((g=(m=i.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,o,f),o.experimental_prefetchInRender&&!Qh&&Jbe(f,n)){const x=c?SI(o,d,s):l==null?void 0:l.promise;x==null||x.catch(jo).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?f:d.trackResult(f)}function ps(e,t){return sB(e,ZR)}function Cs(e,t){const r=oa(),[n]=P.useState(()=>new $be(r,e));P.useEffect(()=>{n.setOptions(e)},[n,e]);const s=P.useSyncExternalStore(P.useCallback(o=>n.subscribe(ei.batchCalls(o)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),i=P.useCallback((o,l)=>{n.mutate(o,l).catch(jo)},[n]);if(s.error&&X6(n.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}function eye(e,t){return sB(e,Mbe)}const NN={companies:e=>["companies",e],contacts:e=>["contacts",e],deals:()=>["deals"],users:()=>["users"]},tye=e=>ps({queryKey:NN.companies(e),queryFn:async()=>(await jc((e==null?void 0:e.trim())||void 0)).data||[],staleTime:10*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),rye=e=>ps({queryKey:NN.contacts(e),queryFn:async()=>(await Yh((e==null?void 0:e.trim())||void 0)).data||[],staleTime:10*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:30*1e3}),nye=()=>ps({queryKey:NN.deals(),queryFn:async()=>(await ib()).data||[],staleTime:60*1e3,gcTime:10*60*1e3}),aye=()=>ps({queryKey:NN.users(),queryFn:async()=>(await ud()).data||[],staleTime:5*60*1e3,gcTime:30*60*1e3}),sye=()=>{const e=oa();return Cs({mutationFn:async({id:t,updates:r})=>(await kR(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["companies"]});const n=e.getQueriesData({queryKey:["companies"]});return e.setQueriesData({queryKey:["companies"]},s=>s==null?void 0:s.map(i=>i.id===t?{...i,...r}:i)),{previousCompanies:n}},onError:(t,r,n)=>{n!=null&&n.previousCompanies&&n.previousCompanies.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["companies"]})}})},iye=()=>{const e=oa();return Cs({mutationFn:async({id:t,updates:r})=>(await _R(t,r),{id:t,updates:r}),onMutate:async({id:t,updates:r})=>{await e.cancelQueries({queryKey:["contacts"]});const n=e.getQueriesData({queryKey:["contacts"]});return e.setQueriesData({queryKey:["contacts"]},s=>s==null?void 0:s.map(i=>i.id===t?{...i,...r}:i)),{previousContacts:n}},onError:(t,r,n)=>{n!=null&&n.previousContacts&&n.previousContacts.forEach(([s,i])=>{e.setQueryData(s,i)})},onSuccess:()=>{e.invalidateQueries({queryKey:["contacts"]})}})},oye=()=>{const e=oa();return Cs({mutationFn:async t=>(await SR(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r==null?void 0:r.filter(n=>n.id!==t))}})},lye=()=>{const e=oa();return Cs({mutationFn:async t=>(await AR(t),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r==null?void 0:r.filter(n=>n.id!==t))}})},cye=()=>{const e=oa();return Cs({mutationFn:async t=>(await Promise.all(t.map(r=>SR(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["companies"]},r=>r==null?void 0:r.filter(n=>!t.includes(n.id)))}})},dye=()=>{const e=oa();return Cs({mutationFn:async t=>(await Promise.all(t.map(r=>AR(r))),t),onSuccess:t=>{e.setQueriesData({queryKey:["contacts"]},r=>r==null?void 0:r.filter(n=>!t.includes(n.id)))}})},uye=()=>{const e=oa();return Cs({mutationFn:async({ids:t,updates:r})=>(await Promise.all(t.map(n=>kR(n,r))),{ids:t,updates:r}),onSuccess:({ids:t,updates:r})=>{e.setQueriesData({queryKey:["companies"]},n=>n==null?void 0:n.map(s=>t.includes(s.id)?{...s,...r}:s))}})},Rc=["playbooks"],$a={templates:{all:()=>[...Rc,"templates"],lists:()=>[...Rc,"templates","list"],list:e=>[...Rc,"templates","list",e],details:()=>[...Rc,"templates","detail"],detail:e=>[...Rc,"templates","detail",e]},instances:{all:()=>[...Rc,"instances"],lists:()=>[...Rc,"instances","list"],list:e=>[...Rc,"instances","list",e],details:()=>[...Rc,"instances","detail"],detail:e=>[...Rc,"instances","detail",e],completions:e=>[...Rc,"instances","detail",e,"completions"]}},iB=e=>{const t=oa();return P.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:$a.templates.lists()})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[t]),ps({queryKey:$a.templates.list(e),queryFn:async()=>{const r=await yve(e);return r.data||r||[]},staleTime:0,refetchInterval:2*60*1e3,placeholderData:r=>r})},fye=e=>ps({queryKey:$a.templates.detail(e),queryFn:async()=>{const t=await wve(e);return t.data||t},enabled:!!e}),oB=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async n=>{const s=await Nve(n);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:$a.templates.lists()}),e.refetchQueries({queryKey:$a.templates.lists()}),t("Playbook template created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:n=>{r(n.message||"Failed to create playbook template")}})},hye=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async({id:n,data:s})=>{const i=await jve(n,s);return i.data||i},onSuccess:(n,s)=>{e.invalidateQueries({queryKey:$a.templates.lists()}),e.invalidateQueries({queryKey:$a.templates.detail(s.id)}),e.refetchQueries({queryKey:$a.templates.lists()}),t("Playbook template updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:n=>{r(n.message||"Failed to update playbook template")}})},pye=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async n=>(await kve(n),n),onSuccess:()=>{e.invalidateQueries({queryKey:$a.templates.lists()}),t("Playbook template deleted successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:n=>{r(n.message||"Failed to delete playbook template")}})},jN=e=>ps({queryKey:$a.instances.list(e),queryFn:async()=>{const t=await Sve(e);return t.data||t||[]},staleTime:0,refetchInterval:2*60*1e3,placeholderData:t=>t}),mye=e=>ps({queryKey:$a.instances.detail(e),queryFn:async()=>{const t=await _ve(e);return t.data||t},enabled:!!e}),xye=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async n=>{const s=await Ave(n);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:$a.instances.lists()}),e.refetchQueries({queryKey:$a.instances.lists()}),t("Playbook instance created successfully!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:n=>{r(n.message||"Failed to create playbook instance")}})},gye=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async({id:n,status:s})=>{const i=await Cve(n,s);return i.data||i},onSuccess:(n,s)=>{e.invalidateQueries({queryKey:$a.instances.lists()}),e.invalidateQueries({queryKey:$a.instances.detail(s.id)}),t("Playbook instance status updated successfully!"),window.dispatchEvent(new Event("refresh-playbooks"))},onError:n=>{r(n.message||"Failed to update playbook instance status")}})},vye=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async({instanceId:n,stepId:s})=>{const i=await Eve(n,s);return i.data||i},onMutate:async({instanceId:n,stepId:s})=>{await e.cancelQueries({queryKey:$a.instances.completions(n)});const i=e.getQueryData($a.instances.completions(n));return e.setQueryData($a.instances.completions(n),(o=[])=>{if(o.some(c=>c.stepId===s))return o;const l=JSON.parse(localStorage.getItem("user_data")||"{}");return[...o,{id:`temp-${Date.now()}`,instanceId:n,stepId:s,completedBy:l.id,completedAt:new Date().toISOString()}]}),{previousCompletions:i}},onSuccess:(n,s)=>{e.invalidateQueries({queryKey:$a.instances.completions(s.instanceId)}),e.invalidateQueries({queryKey:$a.instances.detail(s.instanceId)}),e.invalidateQueries({queryKey:$a.instances.lists()}),t("Step marked as complete!"),window.dispatchEvent(new Event("refresh-playbooks-queries"))},onError:(n,s,i)=>{i!=null&&i.previousCompletions&&e.setQueryData($a.instances.completions(s.instanceId),i.previousCompletions),r(n.message||"Failed to mark step as complete")}})},ob=e=>{const t=oa();return P.useEffect(()=>{const r=()=>{t.invalidateQueries({queryKey:$a.instances.completions(e)})};return window.addEventListener("refresh-playbooks-queries",r),()=>window.removeEventListener("refresh-playbooks-queries",r)},[e,t]),ps({queryKey:$a.instances.completions(e),queryFn:async()=>{const r=await Tve(e);return r.data||r||[]},enabled:!!e,staleTime:0,refetchOnWindowFocus:!1})};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:lB,setPrototypeOf:_I,isFrozen:bye,getPrototypeOf:yye,getOwnPropertyDescriptor:wye}=Object;let{freeze:Oo,seal:bc,create:mS}=Object,{apply:xS,construct:gS}=typeof Reflect<"u"&&Reflect;Oo||(Oo=function(t){return t});bc||(bc=function(t){return t});xS||(xS=function(t,r){for(var n=arguments.length,s=new Array(n>2?n-2:0),i=2;i<n;i++)s[i-2]=arguments[i];return t.apply(r,s)});gS||(gS=function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return new t(...n)});const Ay=Po(Array.prototype.forEach),Nye=Po(Array.prototype.lastIndexOf),AI=Po(Array.prototype.pop),Dg=Po(Array.prototype.push),jye=Po(Array.prototype.splice),c2=Po(String.prototype.toLowerCase),Jj=Po(String.prototype.toString),Zj=Po(String.prototype.match),Lg=Po(String.prototype.replace),kye=Po(String.prototype.indexOf),Sye=Po(String.prototype.trim),zc=Po(Object.prototype.hasOwnProperty),yo=Po(RegExp.prototype.test),Fg=_ye(TypeError);function Po(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var r=arguments.length,n=new Array(r>1?r-1:0),s=1;s<r;s++)n[s-1]=arguments[s];return xS(e,t,n)}}function _ye(e){return function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return gS(e,r)}}function vn(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:c2;_I&&_I(e,null);let n=t.length;for(;n--;){let s=t[n];if(typeof s=="string"){const i=r(s);i!==s&&(bye(t)||(t[n]=i),s=i)}e[s]=!0}return e}function Aye(e){for(let t=0;t<e.length;t++)zc(e,t)||(e[t]=null);return e}function Ad(e){const t=mS(null);for(const[r,n]of lB(e))zc(e,r)&&(Array.isArray(n)?t[r]=Aye(n):n&&typeof n=="object"&&n.constructor===Object?t[r]=Ad(n):t[r]=n);return t}function Mg(e,t){for(;e!==null;){const n=wye(e,t);if(n){if(n.get)return Po(n.get);if(typeof n.value=="function")return Po(n.value)}e=yye(e)}function r(){return null}return r}const CI=Oo(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),e4=Oo(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),t4=Oo(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Cye=Oo(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),r4=Oo(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Eye=Oo(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),EI=Oo(["#text"]),TI=Oo(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),n4=Oo(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),OI=Oo(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Cy=Oo(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Tye=bc(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Oye=bc(/<%[\w\W]*|[\w\W]*%>/gm),Pye=bc(/\$\{[\w\W]*/gm),Iye=bc(/^data-[\-\w.\u00B7-\uFFFF]+$/),Dye=bc(/^aria-[\-\w]+$/),cB=bc(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Lye=bc(/^(?:\w+script|data):/i),Fye=bc(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dB=bc(/^html$/i),Mye=bc(/^[a-z][.\w]*(-[.\w]+)+$/i);var PI=Object.freeze({__proto__:null,ARIA_ATTR:Dye,ATTR_WHITESPACE:Fye,CUSTOM_ELEMENT:Mye,DATA_ATTR:Iye,DOCTYPE_NAME:dB,ERB_EXPR:Oye,IS_ALLOWED_URI:cB,IS_SCRIPT_OR_DATA:Lye,MUSTACHE_EXPR:Tye,TMPLIT_EXPR:Pye});const Rg={element:1,text:3,progressingInstruction:7,comment:8,document:9},Rye=function(){return typeof window>"u"?null:window},Bye=function(t,r){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let n=null;const s="data-tt-policy-suffix";r&&r.hasAttribute(s)&&(n=r.getAttribute(s));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+i+" could not be created."),null}},II=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function uB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Rye();const t=Re=>uB(Re);if(t.version="3.3.1",t.removed=[],!e||!e.document||e.document.nodeType!==Rg.document||!e.Element)return t.isSupported=!1,t;let{document:r}=e;const n=r,s=n.currentScript,{DocumentFragment:i,HTMLTemplateElement:o,Node:l,Element:c,NodeFilter:d,NamedNodeMap:f=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:u,DOMParser:p,trustedTypes:h}=e,m=c.prototype,g=Mg(m,"cloneNode"),x=Mg(m,"remove"),v=Mg(m,"nextSibling"),b=Mg(m,"childNodes"),w=Mg(m,"parentNode");if(typeof o=="function"){const Re=r.createElement("template");Re.content&&Re.content.ownerDocument&&(r=Re.content.ownerDocument)}let y,N="";const{implementation:S,createNodeIterator:j,createDocumentFragment:_,getElementsByTagName:T}=r,{importNode:D}=n;let A=II();t.isSupported=typeof lB=="function"&&typeof w=="function"&&S&&S.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:C,ERB_EXPR:M,TMPLIT_EXPR:F,DATA_ATTR:B,ARIA_ATTR:Y,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:J,CUSTOM_ELEMENT:U}=PI;let{IS_ALLOWED_URI:X}=PI,W=null;const E=vn({},[...CI,...e4,...t4,...r4,...EI]);let R=null;const q=vn({},[...TI,...n4,...OI,...Cy]);let L=Object.seal(mS(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,se=null;const ce=Object.seal(mS(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ae=!0,Z=!0,ve=!1,ne=!0,He=!1,Xe=!0,ie=!1,Q=!1,Ne=!1,de=!1,ye=!1,xe=!1,we=!0,Ae=!1;const Ue="user-content-";let me=!0,ee=!1,fe={},Fe=null;const Ee=vn({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let qe=null;const Ke=vn({},["audio","video","img","source","image","track"]);let Qe=null;const _t=vn({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),vt="http://www.w3.org/1998/Math/MathML",ke="http://www.w3.org/2000/svg",Je="http://www.w3.org/1999/xhtml";let mt=Je,ue=!1,Ye=null;const bt=vn({},[vt,ke,Je],Jj);let xt=vn({},["mi","mo","mn","ms","mtext"]),Vt=vn({},["annotation-xml"]);const gr=vn({},["title","style","font","a","script"]);let qt=null;const Gt=["application/xhtml+xml","text/html"],Bt="text/html";let fr=null,Sr=null;const Cr=r.createElement("form"),cr=function(_e){return _e instanceof RegExp||_e instanceof Function},It=function(){let _e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Sr&&Sr===_e)){if((!_e||typeof _e!="object")&&(_e={}),_e=Ad(_e),qt=Gt.indexOf(_e.PARSER_MEDIA_TYPE)===-1?Bt:_e.PARSER_MEDIA_TYPE,fr=qt==="application/xhtml+xml"?Jj:c2,W=zc(_e,"ALLOWED_TAGS")?vn({},_e.ALLOWED_TAGS,fr):E,R=zc(_e,"ALLOWED_ATTR")?vn({},_e.ALLOWED_ATTR,fr):q,Ye=zc(_e,"ALLOWED_NAMESPACES")?vn({},_e.ALLOWED_NAMESPACES,Jj):bt,Qe=zc(_e,"ADD_URI_SAFE_ATTR")?vn(Ad(_t),_e.ADD_URI_SAFE_ATTR,fr):_t,qe=zc(_e,"ADD_DATA_URI_TAGS")?vn(Ad(Ke),_e.ADD_DATA_URI_TAGS,fr):Ke,Fe=zc(_e,"FORBID_CONTENTS")?vn({},_e.FORBID_CONTENTS,fr):Ee,H=zc(_e,"FORBID_TAGS")?vn({},_e.FORBID_TAGS,fr):Ad({}),se=zc(_e,"FORBID_ATTR")?vn({},_e.FORBID_ATTR,fr):Ad({}),fe=zc(_e,"USE_PROFILES")?_e.USE_PROFILES:!1,ae=_e.ALLOW_ARIA_ATTR!==!1,Z=_e.ALLOW_DATA_ATTR!==!1,ve=_e.ALLOW_UNKNOWN_PROTOCOLS||!1,ne=_e.ALLOW_SELF_CLOSE_IN_ATTR!==!1,He=_e.SAFE_FOR_TEMPLATES||!1,Xe=_e.SAFE_FOR_XML!==!1,ie=_e.WHOLE_DOCUMENT||!1,de=_e.RETURN_DOM||!1,ye=_e.RETURN_DOM_FRAGMENT||!1,xe=_e.RETURN_TRUSTED_TYPE||!1,Ne=_e.FORCE_BODY||!1,we=_e.SANITIZE_DOM!==!1,Ae=_e.SANITIZE_NAMED_PROPS||!1,me=_e.KEEP_CONTENT!==!1,ee=_e.IN_PLACE||!1,X=_e.ALLOWED_URI_REGEXP||cB,mt=_e.NAMESPACE||Je,xt=_e.MATHML_TEXT_INTEGRATION_POINTS||xt,Vt=_e.HTML_INTEGRATION_POINTS||Vt,L=_e.CUSTOM_ELEMENT_HANDLING||{},_e.CUSTOM_ELEMENT_HANDLING&&cr(_e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(L.tagNameCheck=_e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),_e.CUSTOM_ELEMENT_HANDLING&&cr(_e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(L.attributeNameCheck=_e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),_e.CUSTOM_ELEMENT_HANDLING&&typeof _e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(L.allowCustomizedBuiltInElements=_e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),He&&(Z=!1),ye&&(de=!0),fe&&(W=vn({},EI),R=[],fe.html===!0&&(vn(W,CI),vn(R,TI)),fe.svg===!0&&(vn(W,e4),vn(R,n4),vn(R,Cy)),fe.svgFilters===!0&&(vn(W,t4),vn(R,n4),vn(R,Cy)),fe.mathMl===!0&&(vn(W,r4),vn(R,OI),vn(R,Cy))),_e.ADD_TAGS&&(typeof _e.ADD_TAGS=="function"?ce.tagCheck=_e.ADD_TAGS:(W===E&&(W=Ad(W)),vn(W,_e.ADD_TAGS,fr))),_e.ADD_ATTR&&(typeof _e.ADD_ATTR=="function"?ce.attributeCheck=_e.ADD_ATTR:(R===q&&(R=Ad(R)),vn(R,_e.ADD_ATTR,fr))),_e.ADD_URI_SAFE_ATTR&&vn(Qe,_e.ADD_URI_SAFE_ATTR,fr),_e.FORBID_CONTENTS&&(Fe===Ee&&(Fe=Ad(Fe)),vn(Fe,_e.FORBID_CONTENTS,fr)),_e.ADD_FORBID_CONTENTS&&(Fe===Ee&&(Fe=Ad(Fe)),vn(Fe,_e.ADD_FORBID_CONTENTS,fr)),me&&(W["#text"]=!0),ie&&vn(W,["html","head","body"]),W.table&&(vn(W,["tbody"]),delete H.tbody),_e.TRUSTED_TYPES_POLICY){if(typeof _e.TRUSTED_TYPES_POLICY.createHTML!="function")throw Fg('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof _e.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Fg('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');y=_e.TRUSTED_TYPES_POLICY,N=y.createHTML("")}else y===void 0&&(y=Bye(h,s)),y!==null&&typeof N=="string"&&(N=y.createHTML(""));Oo&&Oo(_e),Sr=_e}},yr=vn({},[...e4,...t4,...Cye]),wr=vn({},[...r4,...Eye]),Fr=function(_e){let Ge=w(_e);(!Ge||!Ge.tagName)&&(Ge={namespaceURI:mt,tagName:"template"});const nt=c2(_e.tagName),ut=c2(Ge.tagName);return Ye[_e.namespaceURI]?_e.namespaceURI===ke?Ge.namespaceURI===Je?nt==="svg":Ge.namespaceURI===vt?nt==="svg"&&(ut==="annotation-xml"||xt[ut]):!!yr[nt]:_e.namespaceURI===vt?Ge.namespaceURI===Je?nt==="math":Ge.namespaceURI===ke?nt==="math"&&Vt[ut]:!!wr[nt]:_e.namespaceURI===Je?Ge.namespaceURI===ke&&!Vt[ut]||Ge.namespaceURI===vt&&!xt[ut]?!1:!wr[nt]&&(gr[nt]||!yr[nt]):!!(qt==="application/xhtml+xml"&&Ye[_e.namespaceURI]):!1},jr=function(_e){Dg(t.removed,{element:_e});try{w(_e).removeChild(_e)}catch{x(_e)}},Pr=function(_e,Ge){try{Dg(t.removed,{attribute:Ge.getAttributeNode(_e),from:Ge})}catch{Dg(t.removed,{attribute:null,from:Ge})}if(Ge.removeAttribute(_e),_e==="is")if(de||ye)try{jr(Ge)}catch{}else try{Ge.setAttribute(_e,"")}catch{}},ge=function(_e){let Ge=null,nt=null;if(Ne)_e="<remove></remove>"+_e;else{const Mt=Zj(_e,/^[\r\n\t ]+/);nt=Mt&&Mt[0]}qt==="application/xhtml+xml"&&mt===Je&&(_e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+_e+"</body></html>");const ut=y?y.createHTML(_e):_e;if(mt===Je)try{Ge=new p().parseFromString(ut,qt)}catch{}if(!Ge||!Ge.documentElement){Ge=S.createDocument(mt,"template",null);try{Ge.documentElement.innerHTML=ue?N:ut}catch{}}const wt=Ge.body||Ge.documentElement;return _e&&nt&&wt.insertBefore(r.createTextNode(nt),wt.childNodes[0]||null),mt===Je?T.call(Ge,ie?"html":"body")[0]:ie?Ge.documentElement:wt},De=function(_e){return j.call(_e.ownerDocument||_e,_e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},Ce=function(_e){return _e instanceof u&&(typeof _e.nodeName!="string"||typeof _e.textContent!="string"||typeof _e.removeChild!="function"||!(_e.attributes instanceof f)||typeof _e.removeAttribute!="function"||typeof _e.setAttribute!="function"||typeof _e.namespaceURI!="string"||typeof _e.insertBefore!="function"||typeof _e.hasChildNodes!="function")},Oe=function(_e){return typeof l=="function"&&_e instanceof l};function G(Re,_e,Ge){Ay(Re,nt=>{nt.call(t,_e,Ge,Sr)})}const oe=function(_e){let Ge=null;if(G(A.beforeSanitizeElements,_e,null),Ce(_e))return jr(_e),!0;const nt=fr(_e.nodeName);if(G(A.uponSanitizeElement,_e,{tagName:nt,allowedTags:W}),Xe&&_e.hasChildNodes()&&!Oe(_e.firstElementChild)&&yo(/<[/\w!]/g,_e.innerHTML)&&yo(/<[/\w!]/g,_e.textContent)||_e.nodeType===Rg.progressingInstruction||Xe&&_e.nodeType===Rg.comment&&yo(/<[/\w]/g,_e.data))return jr(_e),!0;if(!(ce.tagCheck instanceof Function&&ce.tagCheck(nt))&&(!W[nt]||H[nt])){if(!H[nt]&&$e(nt)&&(L.tagNameCheck instanceof RegExp&&yo(L.tagNameCheck,nt)||L.tagNameCheck instanceof Function&&L.tagNameCheck(nt)))return!1;if(me&&!Fe[nt]){const ut=w(_e)||_e.parentNode,wt=b(_e)||_e.childNodes;if(wt&&ut){const Mt=wt.length;for(let Xt=Mt-1;Xt>=0;--Xt){const _r=g(wt[Xt],!0);_r.__removalCount=(_e.__removalCount||0)+1,ut.insertBefore(_r,v(_e))}}}return jr(_e),!0}return _e instanceof c&&!Fr(_e)||(nt==="noscript"||nt==="noembed"||nt==="noframes")&&yo(/<\/no(script|embed|frames)/i,_e.innerHTML)?(jr(_e),!0):(He&&_e.nodeType===Rg.text&&(Ge=_e.textContent,Ay([C,M,F],ut=>{Ge=Lg(Ge,ut," ")}),_e.textContent!==Ge&&(Dg(t.removed,{element:_e.cloneNode()}),_e.textContent=Ge)),G(A.afterSanitizeElements,_e,null),!1)},Pe=function(_e,Ge,nt){if(we&&(Ge==="id"||Ge==="name")&&(nt in r||nt in Cr))return!1;if(!(Z&&!se[Ge]&&yo(B,Ge))){if(!(ae&&yo(Y,Ge))){if(!(ce.attributeCheck instanceof Function&&ce.attributeCheck(Ge,_e))){if(!R[Ge]||se[Ge]){if(!($e(_e)&&(L.tagNameCheck instanceof RegExp&&yo(L.tagNameCheck,_e)||L.tagNameCheck instanceof Function&&L.tagNameCheck(_e))&&(L.attributeNameCheck instanceof RegExp&&yo(L.attributeNameCheck,Ge)||L.attributeNameCheck instanceof Function&&L.attributeNameCheck(Ge,_e))||Ge==="is"&&L.allowCustomizedBuiltInElements&&(L.tagNameCheck instanceof RegExp&&yo(L.tagNameCheck,nt)||L.tagNameCheck instanceof Function&&L.tagNameCheck(nt))))return!1}else if(!Qe[Ge]){if(!yo(X,Lg(nt,J,""))){if(!((Ge==="src"||Ge==="xlink:href"||Ge==="href")&&_e!=="script"&&kye(nt,"data:")===0&&qe[_e])){if(!(ve&&!yo(V,Lg(nt,J,"")))){if(nt)return!1}}}}}}}return!0},$e=function(_e){return _e!=="annotation-xml"&&Zj(_e,U)},We=function(_e){G(A.beforeSanitizeAttributes,_e,null);const{attributes:Ge}=_e;if(!Ge||Ce(_e))return;const nt={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:R,forceKeepAttr:void 0};let ut=Ge.length;for(;ut--;){const wt=Ge[ut],{name:Mt,namespaceURI:Xt,value:_r}=wt,$n=fr(Mt),Ts=_r;let Pn=Mt==="value"?Ts:Sye(Ts);if(nt.attrName=$n,nt.attrValue=Pn,nt.keepAttr=!0,nt.forceKeepAttr=void 0,G(A.uponSanitizeAttribute,_e,nt),Pn=nt.attrValue,Ae&&($n==="id"||$n==="name")&&(Pr(Mt,_e),Pn=Ue+Pn),Xe&&yo(/((--!?|])>)|<\/(style|title|textarea)/i,Pn)){Pr(Mt,_e);continue}if($n==="attributename"&&Zj(Pn,"href")){Pr(Mt,_e);continue}if(nt.forceKeepAttr)continue;if(!nt.keepAttr){Pr(Mt,_e);continue}if(!ne&&yo(/\/>/i,Pn)){Pr(Mt,_e);continue}He&&Ay([C,M,F],ya=>{Pn=Lg(Pn,ya," ")});const Vs=fr(_e.nodeName);if(!Pe(Vs,$n,Pn)){Pr(Mt,_e);continue}if(y&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Xt)switch(h.getAttributeType(Vs,$n)){case"TrustedHTML":{Pn=y.createHTML(Pn);break}case"TrustedScriptURL":{Pn=y.createScriptURL(Pn);break}}if(Pn!==Ts)try{Xt?_e.setAttributeNS(Xt,Mt,Pn):_e.setAttribute(Mt,Pn),Ce(_e)?jr(_e):AI(t.removed)}catch{Pr(Mt,_e)}}G(A.afterSanitizeAttributes,_e,null)},Ve=function Re(_e){let Ge=null;const nt=De(_e);for(G(A.beforeSanitizeShadowDOM,_e,null);Ge=nt.nextNode();)G(A.uponSanitizeShadowNode,Ge,null),oe(Ge),We(Ge),Ge.content instanceof i&&Re(Ge.content);G(A.afterSanitizeShadowDOM,_e,null)};return t.sanitize=function(Re){let _e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Ge=null,nt=null,ut=null,wt=null;if(ue=!Re,ue&&(Re="<!-->"),typeof Re!="string"&&!Oe(Re))if(typeof Re.toString=="function"){if(Re=Re.toString(),typeof Re!="string")throw Fg("dirty is not a string, aborting")}else throw Fg("toString is not a function");if(!t.isSupported)return Re;if(Q||It(_e),t.removed=[],typeof Re=="string"&&(ee=!1),ee){if(Re.nodeName){const _r=fr(Re.nodeName);if(!W[_r]||H[_r])throw Fg("root node is forbidden and cannot be sanitized in-place")}}else if(Re instanceof l)Ge=ge("<!---->"),nt=Ge.ownerDocument.importNode(Re,!0),nt.nodeType===Rg.element&&nt.nodeName==="BODY"||nt.nodeName==="HTML"?Ge=nt:Ge.appendChild(nt);else{if(!de&&!He&&!ie&&Re.indexOf("<")===-1)return y&&xe?y.createHTML(Re):Re;if(Ge=ge(Re),!Ge)return de?null:xe?N:""}Ge&&Ne&&jr(Ge.firstChild);const Mt=De(ee?Re:Ge);for(;ut=Mt.nextNode();)oe(ut),We(ut),ut.content instanceof i&&Ve(ut.content);if(ee)return Re;if(de){if(ye)for(wt=_.call(Ge.ownerDocument);Ge.firstChild;)wt.appendChild(Ge.firstChild);else wt=Ge;return(R.shadowroot||R.shadowrootmode)&&(wt=D.call(n,wt,!0)),wt}let Xt=ie?Ge.outerHTML:Ge.innerHTML;return ie&&W["!doctype"]&&Ge.ownerDocument&&Ge.ownerDocument.doctype&&Ge.ownerDocument.doctype.name&&yo(dB,Ge.ownerDocument.doctype.name)&&(Xt="<!DOCTYPE "+Ge.ownerDocument.doctype.name+`>
`+Xt),He&&Ay([C,M,F],_r=>{Xt=Lg(Xt,_r," ")}),y&&xe?y.createHTML(Xt):Xt},t.setConfig=function(){let Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};It(Re),Q=!0},t.clearConfig=function(){Sr=null,Q=!1},t.isValidAttribute=function(Re,_e,Ge){Sr||It({});const nt=fr(Re),ut=fr(_e);return Pe(nt,ut,Ge)},t.addHook=function(Re,_e){typeof _e=="function"&&Dg(A[Re],_e)},t.removeHook=function(Re,_e){if(_e!==void 0){const Ge=Nye(A[Re],_e);return Ge===-1?void 0:jye(A[Re],Ge,1)[0]}return AI(A[Re])},t.removeHooks=function(Re){A[Re]=[]},t.removeAllHooks=function(){A=II()},t}var _1=uB();const Xg={all:["users"],lists:()=>[...Xg.all,"list"],list:e=>[...Xg.lists(),{search:e}],details:()=>[...Xg.all,"detail"],detail:e=>[...Xg.details(),e]},J6=e=>ps({queryKey:Xg.list(e),queryFn:async()=>{const t=await ud(void 0);return Array.isArray(t)?t:t!=null&&t.data&&Array.isArray(t.data)||t!=null&&t.success&&(t!=null&&t.data)&&Array.isArray(t.data)?t.data:[]},staleTime:5*60*1e3,refetchInterval:10*60*1e3,placeholderData:t=>t}),kN=({instanceId:e,isOpen:t,onClose:r})=>{var B,Y,V,J;const{showSuccess:n,showError:s}=hn(),[i,o]=P.useState(new Set),[l,c]=P.useState(new Set),[d,f]=P.useState(null),[u,p]=P.useState(new Map),h=P.useRef(!1),{data:m,isLoading:g}=mye(e),{data:x=[],isLoading:v}=ob(e),{data:b=[]}=J6(),w=vye(),y=gye(),N=U=>{const X=b.find(W=>W.id===U);return(X==null?void 0:X.name)||U};P.useEffect(()=>{var U;if((U=m==null?void 0:m.templateSnapshot)!=null&&U.sections){const X=m.templateSnapshot.sections.map(E=>String(E.id)).filter(Boolean),W=new Set(X);o(W)}},[m]);const S=P.useMemo(()=>{var E;if(!((E=m==null?void 0:m.templateSnapshot)!=null&&E.sections))return{completed:0,total:0,percentage:0};let U=0;m.templateSnapshot.sections.forEach(R=>{R.steps&&(U+=R.steps.length)});const X=x.length,W=U>0?Math.round(X/U*100):0;return{completed:X,total:U,percentage:W}},[m,x]);P.useEffect(()=>{m&&S.total>0&&S.completed>=S.total&&m.status!=="completed"&&!h.current&&!y.isPending&&(h.current=!0,y.mutate({id:e,status:"completed"})),(m==null?void 0:m.status)==="completed"&&(h.current=!1)},[S.completed,S.total,m==null?void 0:m.status,e,y.isPending]),P.useEffect(()=>{if(!y.isPending&&h.current){const U=setTimeout(()=>{(m==null?void 0:m.status)==="completed"&&(h.current=!1)},500);return()=>clearTimeout(U)}},[y.isPending,m==null?void 0:m.status]);const j=U=>x.some(X=>X.stepId===U),_=U=>x.find(X=>X.stepId===U),T=U=>{if(!U.steps)return{completed:0,total:0};const X=U.steps.length;return{completed:U.steps.filter(E=>j(E.id)).length,total:X}},D=U=>{o(X=>{const W=new Set(X);return W.has(U)?W.delete(U):W.add(U),W})},A=U=>{c(X=>{const W=new Set(X);return W.has(U)?W.delete(U):W.add(U),W})},C=async U=>{if(!j(U)){f(U);try{await w.mutateAsync({instanceId:e,stepId:U}),setTimeout(()=>{f(null)},300)}catch{f(null)}}},M=(U,X)=>{const W=document.createElement("a");W.href=U,W.download=X,W.target="_blank",document.body.appendChild(W),W.click(),document.body.removeChild(W)};if(!t)return null;const F=g||v;return a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:r}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(_s,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:((B=m==null?void 0:m.templateSnapshot)==null?void 0:B.name)||"Loading..."}),(((Y=m==null?void 0:m.templateSnapshot)==null?void 0:Y.version)||(m==null?void 0:m.templateVersion))&&a.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Version ",((V=m.templateSnapshot)==null?void 0:V.version)||m.templateVersion]})]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(zt,{className:"w-5 h-5"})})]}),!F&&a.jsxs("div",{className:"mt-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-700",children:[S.completed," of ",S.total," steps complete"]}),a.jsxs("span",{className:"text-sm font-bold text-slate-900",children:[S.percentage,"%"]})]}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-3",children:a.jsx("div",{className:`h-3 rounded-full transition-all ${S.percentage===100?"bg-green-500":S.percentage>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${S.percentage}%`}})}),S.percentage===100&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(Qr,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{className:"text-xs font-semibold text-green-700",children:"All steps completed!"})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:F?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"})}):(J=m==null?void 0:m.templateSnapshot)!=null&&J.sections?a.jsx("div",{className:"space-y-4",children:m.templateSnapshot.sections.sort((U,X)=>(U.order||0)-(X.order||0)).map(U=>{const X=T(U),W=i.has(U.id);return a.jsxs("div",{className:"border border-slate-200 rounded-xl overflow-hidden bg-white",children:[a.jsxs("button",{onClick:()=>D(U.id),className:"w-full p-5 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1 text-left",children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center transition-transform ${W?"bg-indigo-100 text-indigo-600":"bg-slate-100 text-slate-400"}`,children:a.jsx($s,{className:`w-5 h-5 transition-transform ${W?"":"-rotate-90"}`})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:U.name}),a.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[X.completed," of ",X.total," steps completed"]})]})]}),X.completed===X.total&&X.total>0&&a.jsx(Qr,{className:"w-5 h-5 text-green-500"})]}),W&&U.steps&&a.jsx("div",{className:"border-t border-slate-100 bg-slate-50/50",children:U.steps.sort((E,R)=>(E.order||0)-(R.order||0)).map(E=>{var H,se;const R=j(E.id),q=_(E.id),L=l.has(E.id);return a.jsxs("div",{className:"border-b border-slate-100 last:border-b-0",children:[a.jsxs("div",{className:"p-4 flex items-start gap-4",children:[a.jsx("div",{className:"pt-1",children:a.jsx("button",{onClick:()=>C(E.id),disabled:R||d===E.id||w.isPending,className:`w-6 h-6 rounded-lg border-2 flex items-center justify-center transition-all ${R?"bg-green-500 border-green-500 text-white":d===E.id?"bg-indigo-50 border-indigo-500":"bg-white border-slate-300 hover:border-indigo-500"} disabled:opacity-50 disabled:cursor-not-allowed`,children:d===E.id?a.jsx(ct,{className:"w-4 h-4 text-indigo-600 animate-spin"}):R?a.jsx(Hs,{className:"w-4 h-4"}):null})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:`text-sm font-semibold ${R?"text-slate-600 line-through":"text-slate-900"}`,children:E.name}),q&&a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx(co,{className:"w-3 h-3 text-slate-400"}),a.jsxs("span",{className:"text-xs text-slate-500",children:["Completed by ",q.completedBy?N(q.completedBy):"Unknown"," on"," ",q.completedAt?new Date(q.completedAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"Unknown date"]})]})]}),(E.instructions||((H=E.checklistItems)==null?void 0:H.length)>0||((se=E.attachments)==null?void 0:se.length)>0)&&a.jsx("button",{onClick:()=>A(E.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:a.jsx(ra,{className:`w-4 h-4 text-slate-400 transition-transform ${L?"rotate-90":""}`})})]})})]}),L&&a.jsxs("div",{className:"px-4 pb-4 pl-14 space-y-4",children:[E.instructions&&a.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[a.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-2 flex items-center gap-2",children:[a.jsx(Dn,{className:"w-3.5 h-3.5"}),"Instructions"]}),a.jsx("div",{className:"prose prose-sm max-w-none text-slate-700",dangerouslySetInnerHTML:{__html:_1.sanitize(E.instructions)}})]}),E.checklistItems&&E.checklistItems.length>0&&a.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[a.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(O5,{className:"w-3.5 h-3.5"}),"Checklist"]}),a.jsx("div",{className:"space-y-2",children:E.checklistItems.map((ce,ae)=>{`${E.id}${ae}`;const ve=(u.get(E.id)||new Set).has(ae);return a.jsxs("div",{className:"flex items-start gap-2 cursor-pointer hover:bg-slate-50 rounded-lg p-1 -ml-1 transition-colors",onClick:()=>{const ne=u.get(E.id)||new Set,He=new Set(ne);ve?He.delete(ae):He.add(ae),p(Xe=>{const ie=new Map(Xe);return He.size>0?ie.set(E.id,He):ie.delete(E.id),ie})},children:[a.jsx("div",{className:`w-4 h-4 rounded border-2 mt-0.5 flex-shrink-0 flex items-center justify-center transition-all ${ve?"bg-green-500 border-green-500":"border-slate-300 hover:border-indigo-500"}`,children:ve&&a.jsx(Hs,{className:"w-3 h-3 text-white"})}),a.jsx("span",{className:`text-sm flex-1 ${ve?"text-slate-500 line-through":"text-slate-700"}`,children:ce})]},ae)})})]}),E.attachments&&E.attachments.length>0&&a.jsxs("div",{className:"p-4 bg-white rounded-lg border border-slate-200",children:[a.jsxs("h5",{className:"text-xs font-semibold text-slate-600 uppercase tracking-wider mb-3 flex items-center gap-2",children:[a.jsx(Dn,{className:"w-3.5 h-3.5"}),"Attachments"]}),a.jsx("div",{className:"space-y-2",children:E.attachments.map((ce,ae)=>a.jsx("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-lg hover:bg-slate-100 transition-colors",children:ce.type==="pdf"?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-50 flex items-center justify-center",children:a.jsx(Dn,{className:"w-5 h-5 text-red-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:ce.name||"Document.pdf"}),a.jsx("p",{className:"text-xs text-slate-500",children:"PDF Document"})]}),a.jsx("button",{onClick:()=>M(ce.url,ce.name||"document.pdf"),className:"p-2 hover:bg-white rounded-lg transition-colors",title:"Download PDF",children:a.jsx(n0,{className:"w-4 h-4 text-indigo-600"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-50 flex items-center justify-center",children:a.jsx(Tf,{className:"w-5 h-5 text-blue-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:ce.name||"Google Drive File"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Google Drive"})]}),a.jsx("a",{href:ce.url,target:"_blank",rel:"noopener noreferrer",className:"p-2 hover:bg-white rounded-lg transition-colors flex items-center gap-1 text-indigo-600 hover:text-indigo-700",title:"View in Google Drive",children:a.jsx(za,{className:"w-4 h-4"})})]})},ae))})]})]})]},E.id)})})]},U.id)})}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(_s,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Playbook Data"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Unable to load playbook instance data."})]})}),a.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:a.jsx("button",{onClick:r,className:"w-full px-6 py-3 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm",children:"Close"})})]})})]})},$ye=({instance:e,deals:t,projects:r,onView:n})=>{var u,p,h;const{data:s=[]}=ob(e.id),i=((p=(u=e.templateSnapshot)==null?void 0:u.sections)==null?void 0:p.reduce((m,g)=>{var x;return m+(((x=g.steps)==null?void 0:x.length)||0)},0))||0,o=s.length,l=i>0?Math.round(o/i*100):0,c=e.dealId?t.find(m=>m.id===e.dealId):null,d=e.projectId?r.find(m=>m.id===e.projectId):null,f=c?{type:"Deal",name:c.title||c.name,id:c.id}:d?{type:"Project",name:d.title||d.name,id:d.id}:null;return a.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center shrink-0",children:a.jsx(_s,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900 truncate",children:((h=e.templateSnapshot)==null?void 0:h.name)||"Unknown Playbook"}),f&&a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[f.type==="Deal"?a.jsx(al,{className:"w-3 h-3 text-slate-400"}):a.jsx(nd,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-xs text-slate-500 truncate",children:f.name})]})]})]}),l===100&&a.jsx(Hs,{className:"w-5 h-5 text-green-500 shrink-0"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[o," / ",i," steps completed"]}),a.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[l,"%"]})]}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:a.jsx("div",{className:`h-1.5 rounded-full transition-all ${l===100?"bg-green-500":l>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${l}%`}})})]}),a.jsxs("button",{onClick:()=>{(f==null?void 0:f.type)==="Deal"||f==null||f.type,n(e.id)},className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View ",f?f.type:"Playbook",a.jsx(za,{className:"w-3 h-3"})]})]})},Uye=({onNavigate:e,onAddCompany:t,onAddContact:r,externalSearchQuery:n=""})=>{var Na,oi,rn,Jr,sn;const{showSuccess:s,showError:i}=hn(),o=oa(),l=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[c,d]=P.useState("companies"),[f,u]=P.useState(""),[p,h]=P.useState(null),[m,g]=P.useState(null),[x,v]=P.useState(null),{data:b=[],isLoading:w}=jN({companyId:p==null?void 0:p.id}),{data:y=[],isLoading:N}=tye(f),{data:S=[],isLoading:j}=rye(f),{data:_=[],isLoading:T}=nye(),{data:D=[],isLoading:A}=aye(),{data:C=[]}=ps({queryKey:["projects"],queryFn:async()=>{const Ie=await C0();return Ie.data||Ie||[]},staleTime:5*60*1e3}),M=sye(),F=iye(),B=oye(),Y=lye(),V=cye(),J=dye(),U=uye(),X=N||j||T||A,[W,E]=P.useState([]),[R,q]=P.useState([]),[L,H]=P.useState([]),[se,ce]=P.useState(!1),[ae,Z]=P.useState(!1),[ve,ne]=P.useState({}),[He,Xe]=P.useState(!1),[ie,Q]=P.useState(!1),[Ne,de]=P.useState({}),[ye,xe]=P.useState("details"),[we,Ae]=P.useState(!1),[Ue,me]=P.useState(null),[ee,fe]=P.useState(null),[Fe,Ee]=P.useState(!1),[qe,Ke]=P.useState(!1),[Qe,_t]=P.useState([]),[vt,ke]=P.useState([]),[Je,mt]=P.useState(!1),[ue,Ye]=P.useState(!1),[bt,xt]=P.useState(!1),[Vt,gr]=P.useState(!1),[qt,Gt]=P.useState(null),[Bt,fr]=P.useState(null),[Sr,Cr]=P.useState(!1),[cr,It]=P.useState(""),[yr,wr]=P.useState(!1),[Fr,jr]=P.useState(null),[Pr,ge]=P.useState(null),[De,Ce]=P.useState(!1),[Oe,G]=P.useState(""),[oe,Pe]=P.useState(0),[$e,We]=P.useState([]),[Ve,Re]=P.useState(""),[_e,Ge]=P.useState(!1),[nt,ut]=P.useState(null),[wt,Mt]=P.useState(null),[Xt,_r]=P.useState(!1),[$n,Ts]=P.useState(""),[Pn,Vs]=P.useState(0),[ya,gs]=P.useState([]),[Fa,dn]=P.useState(!1),[dl,Gn]=P.useState(!1),[Si,Ul]=P.useState(!1),pd=async()=>{Ul(!0);try{await Promise.all([o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})]),s("Data refreshed successfully")}catch{i("Failed to refresh data")}finally{setTimeout(()=>Ul(!1),500)}};P.useEffect(()=>{n!==void 0&&u(n)},[n]),P.useEffect(()=>{_t([]),ke([])},[c,f]),P.useEffect(()=>{const Ie=()=>{console.log(" CRM refresh triggered - invalidating cache"),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]}),o.invalidateQueries({queryKey:["deals"]}),o.invalidateQueries({queryKey:["users"]})};return window.addEventListener("refresh-crm",Ie),()=>window.removeEventListener("refresh-crm",Ie)},[o]);const ii=async Ie=>{if(p)try{await M.mutateAsync({id:p.id,updates:Ie}),h({...p,...Ie}),s("Account updated")}catch{i("Update failed")}},Be=async()=>{if(!(!m||we)){if(!Ne.name||!Ne.email){i("Name and Email are required fields");return}Ae(!0);try{const Ie={...Ne,companyId:Ne.companyId===""?null:Ne.companyId,phone:Ne.phone===""?null:Ne.phone,linkedin:Ne.linkedin===""?null:Ne.linkedin,role:Ne.role===""?null:Ne.role};await F.mutateAsync({id:m.id,updates:Ie});const Dt={...m,...Ie};g(Dt),Q(!1),s("Contact profile updated successfully")}catch(Ie){console.error("Contact update error:",Ie),i(Ie.message||"Failed to update contact. Please try again.")}finally{Ae(!1)}}},gt=async Ie=>{Ee(!0);try{await B.mutateAsync(Ie),(p==null?void 0:p.id)===Ie&&(h(null),Z(!1)),me(null),s("Company deleted successfully")}catch(Dt){i(Dt.message||"Failed to delete company")}finally{Ee(!1)}},Pt=async Ie=>{Ke(!0);try{await Y.mutateAsync(Ie),(m==null?void 0:m.id)===Ie&&(g(null),Q(!1)),fe(null),s("Contact deleted successfully")}catch(Dt){i(Dt.message||"Failed to delete contact")}finally{Ke(!1)}};P.useEffect(()=>{p!=null&&p.id?(async()=>{try{Cr(!0);const Dt=await Q3(p.id);Dt.success&&fr(Dt.data)}catch{fr(null)}finally{Cr(!1)}})():fr(null)},[p==null?void 0:p.id]);const $t=()=>{h(null),Z(!1),It(""),Ce(!1),fr(null)},dr=()=>{g(null),Q(!1),Re(""),_r(!1)},hr=Ie=>{const Dt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,ir=[];let kr;for(;(kr=Dt.exec(Ie))!==null;){const Xr=kr[1].trim(),un=D.find(In=>In.name.toLowerCase()===Xr.toLowerCase());un&&ir.push(un.id)}return[...new Set(ir)]},Mr=Ie=>{const Dt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,ir=[];let kr=0,Xr;for(;(Xr=Dt.exec(Ie))!==null;){Xr.index>kr&&ir.push(Ie.substring(kr,Xr.index));const un=Xr[1].trim(),In=D.find(rs=>rs.name.toLowerCase()===un.toLowerCase());In?ir.push(a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",In.name]},Xr.index)):ir.push(`@${un}`),kr=Xr.index+Xr[0].length}return kr<Ie.length&&ir.push(Ie.substring(kr)),ir.length>0?ir:Ie},Wn=Ie=>{const Dt=Ie.target.value,ir=Ie.target.selectionStart;It(Dt),Pe(ir);const kr=Dt.substring(0,ir),Xr=kr.lastIndexOf("@");if(Xr!==-1){const un=kr.substring(Xr+1),In=Xr>0?kr[Xr-1]:" ";if((In===" "||In===`
`||Xr===0)&&!un.includes(" ")&&!un.includes(`
`)){G(un);const rs=D.filter(Os=>Os.name.toLowerCase().includes(un.toLowerCase())||Os.email.toLowerCase().includes(un.toLowerCase()));We(rs.slice(0,5)),Ce(!0);return}}Ce(!1)},Jn=Ie=>{const ir=cr.substring(0,oe).lastIndexOf("@"),kr=cr.substring(oe),un=`${cr.substring(0,ir)}@${Ie.name} ${kr}`;It(un),Ce(!1)},_n=async()=>{if(!(!p||!cr.trim())){wr(!0);try{const Ie=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",Dt=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",ir={id:`note_${Date.now()}`,userId:Ie,userName:Dt,text:cr.trim(),createdAt:new Date().toISOString()},kr=[...p.notes||[],ir];await M.mutateAsync({id:p.id,updates:{notes:kr}}),h({...p,notes:kr}),o.invalidateQueries({queryKey:["companies"]});const Xr=hr(cr);for(const In of Xr)try{await kx({userId:In,type:"mention",title:"You were mentioned in a company note",message:`${Dt} mentioned you in ${p.name}`,relatedId:p.id,relatedType:"company",read:!1})}catch(rs){console.error("Failed to send notification:",rs)}It("");const un=Xr.length>0?`Note added and ${Xr.length} user(s) notified`:"Note added successfully";s(un)}catch(Ie){i(Ie.message||"Failed to add note")}finally{wr(!1)}}},Nr=async()=>{var Ie;if(!(!p||!l||!Pr))try{jr(Pr);const Dt=((Ie=p.notes)==null?void 0:Ie.filter(ir=>ir.id!==Pr))||[];await M.mutateAsync({id:p.id,updates:{notes:Dt}}),h({...p,notes:Dt}),o.invalidateQueries({queryKey:["companies"]}),s("Note deleted successfully"),ge(null)}catch(Dt){i(Dt.message||"Failed to delete note")}finally{jr(null)}},Rt=Ie=>{const Dt=Ie.target.value,ir=Ie.target.selectionStart;Re(Dt),Vs(ir);const kr=Dt.substring(0,ir),Xr=kr.lastIndexOf("@");if(Xr!==-1){const un=kr.substring(Xr+1),In=Xr>0?kr[Xr-1]:" ";if((In===" "||In===`
`||Xr===0)&&!un.includes(" ")&&!un.includes(`
`)){Ts(un);const rs=D.filter(Os=>Os.name.toLowerCase().includes(un.toLowerCase())||Os.email.toLowerCase().includes(un.toLowerCase()));gs(rs.slice(0,5)),_r(!0);return}}_r(!1)},Ur=Ie=>{const ir=Ve.substring(0,Pn).lastIndexOf("@"),kr=Ve.substring(Pn),un=`${Ve.substring(0,ir)}@${Ie.name} ${kr}`;Re(un),_r(!1)},lr=async()=>{if(!(!m||!Ve.trim())){Ge(!0);try{const Ie=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").id:"",Dt=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}").name:"Unknown User",ir={id:`note_${Date.now()}`,userId:Ie,userName:Dt,text:Ve.trim(),createdAt:new Date().toISOString()},kr=[...m.notes||[],ir];await F.mutateAsync({id:m.id,updates:{notes:kr}}),g({...m,notes:kr}),o.invalidateQueries({queryKey:["contacts"]});const Xr=hr(Ve);for(const In of Xr)try{await kx({userId:In,type:"mention",title:"You were mentioned in a contact note",message:`${Dt} mentioned you in ${m.name}`,relatedId:m.id,relatedType:"contact",read:!1})}catch(rs){console.error("Failed to send notification:",rs)}Re("");const un=Xr.length>0?`Note added and ${Xr.length} user(s) notified`:"Note added successfully";s(un)}catch(Ie){i(Ie.message||"Failed to add note")}finally{Ge(!1)}}},pr=async()=>{var Ie;if(!(!m||!l||!wt))try{ut(wt);const Dt=((Ie=m.notes)==null?void 0:Ie.filter(ir=>ir.id!==wt))||[];await F.mutateAsync({id:m.id,updates:{notes:Dt}}),g({...m,notes:Dt}),o.invalidateQueries({queryKey:["contacts"]}),s("Note deleted successfully"),Mt(null)}catch(Dt){i(Dt.message||"Failed to delete note")}finally{ut(null)}},Qt=P.useCallback(Ie=>_.some(Dt=>Dt.companyId===Ie),[_]),An=P.useMemo(()=>y.filter(Ie=>{if(W.length>0){const Dt=W.includes("target")&&Ie.isTargetAccount,ir=W.includes("non-target")&&!Ie.isTargetAccount;if(!Dt&&!ir)return!1}if(R.length>0){const Dt=R.includes("assigned")&&Ie.ownerId,ir=R.includes("unassigned")&&!Ie.ownerId;if(!Dt&&!ir)return!1}if(L.length>0){const Dt=L.includes("has-deals")&&Qt(Ie.id),ir=L.includes("no-deals")&&!Qt(Ie.id);if(!Dt&&!ir)return!1}return!0}),[y,W,R,L,Qt]),Ir=P.useMemo(()=>W.length>0||R.length>0||L.length>0,[W,R,L]),Jt=()=>{E([]),q([]),H([])},tn=(Ie,Dt)=>{Ie==="target"?E(ir=>ir.includes(Dt)?ir.filter(kr=>kr!==Dt):[...ir,Dt]):Ie==="assigned"?q(ir=>ir.includes(Dt)?ir.filter(kr=>kr!==Dt):[...ir,Dt]):Ie==="deals"&&H(ir=>ir.includes(Dt)?ir.filter(kr=>kr!==Dt):[...ir,Dt])},ur=()=>{Qe.length===An.length&&An.length>0?_t([]):_t(An.map(Ie=>Ie.id))},nr=()=>{vt.length===S.length?ke([]):ke(S.map(Ie=>Ie.id))},ar=async()=>{mt(!0);try{const Ie=[...Qe];await V.mutateAsync(Ie),p&&Ie.includes(p.id)&&(h(null),Z(!1)),_t([]),Gt(null),s(`Successfully deleted ${Ie.length} compan${Ie.length>1?"ies":"y"}`)}catch(Ie){i(Ie.message||"Failed to delete companies")}finally{mt(!1)}},Un=async()=>{Ye(!0);try{const Ie=[...vt];await J.mutateAsync(Ie),m&&Ie.includes(m.id)&&(g(null),Q(!1)),ke([]),Gt(null),s(`Successfully deleted ${Ie.length} contact${Ie.length>1?"s":""}`)}catch(Ie){i(Ie.message||"Failed to delete contacts")}finally{Ye(!1)}},wa=async()=>{if(Qe.length!==0){xt(!0);try{const Ie=[...Qe];await U.mutateAsync({ids:Ie,updates:{isTargetAccount:!0}}),p&&Ie.includes(p.id)&&h({...p,isTargetAccount:!0}),_t([]),s(`Successfully marked ${Ie.length} compan${Ie.length>1?"ies":"y"} as target account${Ie.length>1?"s":""}`)}catch(Ie){i(Ie.message||"Failed to mark companies as target accounts")}finally{xt(!1)}}},vs=async()=>{if(Qe.length!==0){gr(!0);try{const Ie=[...Qe];await U.mutateAsync({ids:Ie,updates:{isTargetAccount:!1}}),p&&Ie.includes(p.id)&&h({...p,isTargetAccount:!1}),_t([]),s(`Successfully unmarked ${Ie.length} compan${Ie.length>1?"ies":"y"} as target account${Ie.length>1?"s":""}`)}catch(Ie){i(Ie.message||"Failed to unmark companies as target accounts")}finally{gr(!1)}}},yn=async()=>{p&&i("AI Intelligence feature is not available. Please install @google/genai package to enable this feature.")},Mi=Ie=>_.filter(Dt=>Dt.companyId===Ie&&Dt.stage!=="Won"&&Dt.stage!=="Lost").length,Lo=Ie=>{var Dt;return Ie?((Dt=D.find(ir=>ir.id===Ie))==null?void 0:Dt.name)||"Unknown":"Unassigned"};return a.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10 min-w-0 overflow-x-hidden",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 min-w-0",children:[a.jsxs("div",{className:"min-w-0",children:[a.jsx("h1",{className:"text-xl sm:text-2xl font-bold tracking-tight truncate",children:"CRM"}),a.jsxs("div",{className:"flex flex-wrap gap-x-4 gap-y-1 mt-2",children:[a.jsxs("button",{onClick:()=>{d("companies"),_t([]),ke([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="companies"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Companies (",c==="companies"?An.length:y.length,")"]}),a.jsxs("button",{onClick:()=>{d("contacts"),_t([]),ke([])},className:`text-sm font-semibold pb-1 border-b-2 transition-colors whitespace-nowrap ${c==="contacts"?"border-indigo-600 text-slate-900":"border-transparent text-slate-500 hover:text-slate-700"}`,children:["Contacts (",S.length,")"]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 w-full sm:w-auto",children:[a.jsxs("button",{onClick:pd,disabled:Si,className:"px-2 sm:px-3 py-2 bg-slate-100 text-slate-700 text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-slate-200 transition-all shadow-sm disabled:opacity-50 shrink-0",title:"Refresh data",children:[a.jsx(Vd,{className:`w-4 h-4 ${Si?"animate-spin":""}`}),a.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),a.jsxs("button",{onClick:()=>c==="companies"?t():r(),className:"px-3 sm:px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-indigo-700 transition-all shadow-sm shrink-0",children:[a.jsx($r,{className:"w-4 h-4 shrink-0"})," ",a.jsxs("span",{className:"whitespace-nowrap",children:["Add ",c==="companies"?"Company":"Contact"]})]}),c==="contacts"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>dn(!0),className:"px-3 sm:px-4 py-2 bg-blue-600 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-700 transition-all shadow-sm shrink-0",title:"Scan Business Card",children:[a.jsx(KH,{className:"w-4 h-4 shrink-0"})," ",a.jsx("span",{className:"whitespace-nowrap",children:"Scan Card"})]}),a.jsxs("button",{onClick:()=>Gn(!0),className:"px-3 sm:px-4 py-2 bg-blue-700 text-white text-sm font-semibold rounded-lg flex items-center gap-1.5 sm:gap-2 hover:bg-blue-800 transition-all shadow-sm shrink-0",title:"Import from LinkedIn",children:[a.jsx(Oh,{className:"w-4 h-4 shrink-0"})," ",a.jsx("span",{className:"whitespace-nowrap",children:"LinkedIn"})]})]})]})]}),a.jsxs("div",{className:"flex-1 flex flex-col gap-6 w-full min-w-0",children:[a.jsx("div",{className:"w-full min-w-0",children:a.jsxs("div",{className:"relative group w-full min-w-0",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-600 transition-colors shrink-0"}),a.jsx("input",{type:"text",placeholder:`Search ${c}...`,value:f,onChange:Ie=>u(Ie.target.value),className:"w-full min-w-0 pl-10 pr-10 py-3 bg-white border border-slate-200 rounded-xl shadow-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]})}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 pb-2 min-w-0",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0",disabled:X,checked:c==="companies"?An.length>0&&Qe.length===An.length&&An.every(Ie=>Qe.includes(Ie.id)):S.length>0&&vt.length===S.length,onChange:c==="companies"?ur:nr}),a.jsxs("span",{className:"text-sm font-semibold text-slate-600 truncate",children:["Select All ",c==="companies"?"Companies":"Contacts"]})]}),a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4 min-w-0",children:c==="companies"?a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>ce(!0),disabled:X,className:`px-3 sm:px-4 py-2 rounded-xl border-2 transition-all flex items-center gap-2 w-fit shrink-0 ${Ir?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-slate-200 bg-white text-slate-600 hover:border-indigo-300"} disabled:opacity-50 disabled:cursor-not-allowed`,children:[a.jsx(a0,{className:"w-4 h-4 shrink-0"}),a.jsx("span",{className:"text-sm font-bold",children:"Filters"}),Ir&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:W.length+R.length+L.length})]}),a.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 sm:text-right break-words",children:X?"Loading...":`Showing ${An.length} of ${y.length} companies`})]}):a.jsx("div",{className:"text-xs text-slate-400 font-bold min-w-0 text-right",children:X?"Loading...":`Showing ${S.length} contact${S.length!==1?"s":""}`})}),se&&c==="companies"&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-3 sm:p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 my-auto",children:[a.jsxs("div",{className:"p-4 sm:p-6 border-b border-slate-200 flex items-center justify-between gap-3 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center shrink-0",children:a.jsx(a0,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("h3",{className:"font-black text-lg sm:text-xl text-slate-900 truncate",children:"Filter Companies"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium hidden sm:block",children:"Select multiple filters to refine your search"})]})]}),a.jsx("button",{onClick:()=>ce(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-4 sm:p-6 space-y-6 max-h-[60vh] overflow-y-auto",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Ng,{className:"w-4 h-4"}),"Target Account"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:W.includes("target"),onChange:()=>tn("target","target"),className:"w-4 h-4 rounded border-slate-300 text-amber-500 focus:ring-amber-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Ng,{className:"w-4 h-4 text-amber-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Target Account"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[y.filter(Ie=>Ie.isTargetAccount).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:W.includes("non-target"),onChange:()=>tn("target","non-target"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(rd,{className:"w-4 h-4 text-slate-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Standard Account"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[y.filter(Ie=>!Ie.isTargetAccount).length," companies"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(sy,{className:"w-4 h-4"}),"Assignment"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:R.includes("assigned"),onChange:()=>tn("assigned","assigned"),className:"w-4 h-4 rounded border-slate-300 text-green-600 focus:ring-green-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(sy,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Assigned"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[y.filter(Ie=>Ie.ownerId).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:R.includes("unassigned"),onChange:()=>tn("assigned","unassigned"),className:"w-4 h-4 rounded border-slate-300 text-orange-500 focus:ring-orange-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(Hd,{className:"w-4 h-4 text-orange-500"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Unassigned"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[y.filter(Ie=>!Ie.ownerId).length," companies"]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(al,{className:"w-4 h-4"}),"Deals"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:L.includes("has-deals"),onChange:()=>tn("deals","has-deals"),className:"w-4 h-4 rounded border-slate-300 text-purple-600 focus:ring-purple-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(al,{className:"w-4 h-4 text-purple-600"}),a.jsx("span",{className:"font-bold text-slate-900",children:"Has Deals"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[y.filter(Ie=>Qt(Ie.id)).length," companies"]})]}),a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl border-2 border-slate-200 hover:border-indigo-300 cursor-pointer transition-all",children:[a.jsx("input",{type:"checkbox",checked:L.includes("no-deals"),onChange:()=>tn("deals","no-deals"),className:"w-4 h-4 rounded border-slate-300 text-slate-600 focus:ring-slate-500"}),a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx(al,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-bold text-slate-900",children:"No Deals"})]}),a.jsxs("span",{className:"text-xs text-slate-400",children:[y.filter(Ie=>!Qt(Ie.id)).length," companies"]})]})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[a.jsxs("button",{onClick:Jt,disabled:!Ir,className:"px-4 py-2 text-sm font-bold text-slate-500 hover:text-slate-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 transition-colors",children:[a.jsx(zt,{className:"w-4 h-4"}),"Clear All Filters"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[An.length," of ",y.length," companies"]}),a.jsx("button",{onClick:()=>ce(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:"Apply Filters"})]})]})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-6 min-h-[600px] w-full min-w-0 items-start",children:X?Array.from({length:8}).map((Ie,Dt)=>a.jsx("div",{className:`bg-white rounded-2xl border border-slate-200 shadow-sm animate-pulse flex flex-col ${c==="companies"?"p-6":"p-5 h-[220px]"}`,children:c==="companies"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-200 rounded-lg"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[a.jsx("div",{className:"h-3 bg-slate-200 rounded w-2/3"}),a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-11 h-11 bg-slate-200 rounded-full"}),a.jsxs("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2"})]})]}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-4 h-4 bg-slate-200 rounded"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded flex-1"})]})]}),a.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:a.jsx("div",{className:"h-8 bg-slate-200 rounded-xl w-full"})})]})},`skeleton-${Dt}`)):c==="companies"?An.map(Ie=>{const Dt=D.find(kr=>kr.id===Ie.ownerId),ir=Qe.includes(Ie.id);return a.jsxs("div",{onClick:()=>h(Ie),className:`bg-white p-6 rounded-2xl border ${ir?"border-indigo-400 bg-indigo-50/30":Ie.isTargetAccount?"border-amber-400 shadow-[0_0_15px_rgba(251,191,36,0.1)]":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group flex flex-col relative`,children:[Ie.isTargetAccount&&a.jsxs("div",{className:"absolute -top-3 left-1/2 -translate-x-1/2 px-2 py-0.5 bg-amber-500 text-white text-[9px] font-black uppercase rounded shadow-sm flex items-center gap-1 whitespace-nowrap",children:[a.jsx(Ng,{className:"w-2.5 h-2.5"})," Target Account"]}),a.jsx("div",{className:"absolute top-4 right-4",onClick:kr=>kr.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ir,onChange:()=>_t(kr=>ir?kr.filter(Xr=>Xr!==Ie.id):[...kr,Ie.id])})}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx(hs,{src:Ie.logo,fallbackText:Ie.name,className:"w-12 h-12 border border-slate-100",isAvatar:!1}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900 truncate group-hover:text-indigo-600 transition-colors",children:Ie.name}),a.jsx("p",{className:"text-slate-500 text-xs font-bold uppercase",children:Ie.industry})]})]}),a.jsxs("div",{className:"space-y-3 mb-6 text-sm text-slate-600",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Th,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate",children:Ie.website||"No website"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(co,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate font-medium",children:(Dt==null?void 0:Dt.name)||"Unassigned"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100 flex items-center justify-between",children:[a.jsxs("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:[Mi(Ie.id)," Active Deals"]}),a.jsx(ra,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},Ie.id)}):S.map(Ie=>{const Dt=y.find(kr=>kr.id===Ie.companyId),ir=vt.includes(Ie.id);return a.jsxs("div",{onClick:()=>g(Ie),className:`bg-white p-5 rounded-2xl border ${ir?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} hover:border-indigo-300 hover:shadow-md transition-all cursor-pointer group shadow-sm relative flex flex-col h-[220px]`,children:[a.jsx("div",{className:"absolute top-4 right-4",onClick:kr=>kr.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ir,onChange:()=>ke(kr=>ir?kr.filter(Xr=>Xr!==Ie.id):[...kr,Ie.id])})}),a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-11 h-11 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-lg uppercase shadow-inner",children:Ie.name.charAt(0)}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("h3",{className:"font-bold text-base text-slate-900 truncate",children:Ie.name}),a.jsxs("p",{className:"text-slate-500 text-[11px] font-bold uppercase truncate",children:[Ie.role," @ ",(Dt==null?void 0:Dt.name)||"Partner"]})]})]}),a.jsxs("div",{className:"space-y-2 text-sm text-slate-600 flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ba,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"truncate text-indigo-600 text-[13px]",children:Ie.email})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_k,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-[13px]",children:Ie.phone})]})]}),Ie.linkedin&&a.jsx("div",{className:"pt-3 mt-auto border-t border-slate-100",children:a.jsxs("a",{href:Ie.linkedin,target:"_blank",rel:"noreferrer",onClick:kr=>kr.stopPropagation(),className:"w-full py-2 bg-blue-50 text-blue-600 rounded-xl hover:bg-blue-100 transition-colors flex items-center justify-center gap-2 text-[10px] font-black uppercase tracking-widest",children:[a.jsx(Oh,{className:"w-4 h-4"}),"LinkedIn"]})})]},Ie.id)})})]}),(c==="companies"&&Qe.length>0||c==="contacts"&&vt.length>0)&&a.jsx("div",{className:"fixed bottom-6 left-2 right-2 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300 max-w-2xl sm:max-w-none mx-auto",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-2xl sm:rounded-3xl shadow-2xl px-4 sm:px-8 py-3 sm:py-4 flex flex-col sm:flex-row items-stretch sm:items-center gap-3 sm:gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3 shrink-0",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:c==="companies"?Qe.length:vt.length}),"Selected"]}),a.jsx("div",{className:"hidden sm:block h-8 w-px bg-white/10 shrink-0"}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 sm:gap-3 min-w-0",children:[c==="companies"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:Ie=>{Ie.stopPropagation(),wa()},disabled:bt||Vt,className:"px-3 sm:px-5 py-2 bg-amber-600 hover:bg-amber-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[bt?a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(Ng,{className:"w-3.5 h-3.5 shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:"Mark Target"})]}),a.jsxs("button",{onClick:Ie=>{Ie.stopPropagation(),vs()},disabled:bt||Vt,className:"px-3 sm:px-5 py-2 bg-slate-600 hover:bg-slate-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[Vt?a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(Hd,{className:"w-3.5 h-3.5 shrink-0"}),a.jsx("span",{className:"whitespace-nowrap",children:"Unmark Target"})]})]}),a.jsxs("button",{onClick:Ie=>{Ie.stopPropagation(),Gt(c)},disabled:c==="companies"?Je:ue,className:"px-3 sm:px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-1.5 sm:gap-2 disabled:opacity-50 shrink-0",children:[(c==="companies"?Je:ue)?a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin shrink-0"}):a.jsx(br,{className:"w-3.5 h-3.5 shrink-0"}),"Delete"]}),a.jsx("button",{onClick:()=>{c==="companies"?_t([]):ke([])},className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors shrink-0 ml-auto sm:ml-0",children:a.jsx(zt,{className:"w-5 h-5"})})]})]})}),p&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:$t}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(hs,{src:p.logo,fallbackText:p.name,className:"w-12 h-12 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:p.name}),a.jsx("button",{onClick:()=>ii({isTargetAccount:!p.isTargetAccount}),className:`p-1 rounded-lg transition-all ${p.isTargetAccount?"text-amber-500 bg-amber-50":"text-slate-300 hover:text-amber-500 hover:bg-amber-50"}`,title:"Mark as Target Account",children:a.jsx(Ng,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-slate-500",children:p.industry})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[ae?a.jsx("button",{onClick:async()=>{await ii(ve),Z(!1)},className:"p-2 bg-indigo-600 text-white rounded-xl hover:bg-indigo-700 shadow-lg",children:a.jsx(qs,{className:"w-5 h-5"})}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{ne({...p}),Z(!0)},className:"p-2 hover:bg-slate-100 rounded-xl text-slate-400",children:a.jsx(Sk,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>me(p),className:"p-2 hover:bg-red-50 rounded-xl text-red-500 transition-all",title:"Delete Company",children:a.jsx(br,{className:"w-5 h-5"})})]}),a.jsx("button",{onClick:$t,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:a.jsx(zt,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[ae?a.jsxs("div",{className:"grid grid-cols-2 gap-4 animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"col-span-2 space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Company Name"}),a.jsx("input",{type:"text",value:ve.name,onChange:Ie=>ne({...ve,name:Ie.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Industry"}),a.jsx("input",{type:"text",value:ve.industry,onChange:Ie=>ne({...ve,industry:Ie.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Owner"}),a.jsxs("select",{value:ve.ownerId,onChange:Ie=>ne({...ve,ownerId:Ie.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"",children:"Unassigned"}),D.map(Ie=>a.jsx("option",{value:Ie.id,children:Ie.name},Ie.id))]})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Website"}),a.jsx("input",{type:"text",value:ve.website,onChange:Ie=>ne({...ve,website:Ie.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"LinkedIn"}),a.jsx("input",{type:"text",value:ve.linkedin,onChange:Ie=>ne({...ve,linkedin:Ie.target.value}),className:"w-full px-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Account Manager"}),a.jsxs("span",{className:"text-sm font-bold text-indigo-600 flex items-center gap-2",children:[a.jsx(co,{className:"w-4 h-4"})," ",Lo(p.ownerId)]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),a.jsx("span",{className:`text-[10px] font-black uppercase px-2 py-0.5 rounded-full ${p.isTargetAccount?"bg-amber-500 text-white":"bg-slate-200 text-slate-500"}`,children:p.isTargetAccount?"Target Account":"Standard Account"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(ad,{className:"w-4 h-4 text-emerald-500"})," Social Signals & Intelligence"]}),a.jsxs("button",{onClick:yn,disabled:He,className:"flex items-center gap-1.5 px-3 py-1 bg-indigo-50 text-indigo-600 rounded-xl text-[10px] font-black uppercase hover:bg-indigo-100 transition-all disabled:opacity-50",children:[He?a.jsx(ct,{className:"w-3 h-3 animate-spin"}):a.jsx(eW,{className:"w-3 h-3"})," Execute Intelligence Scan"]})]}),a.jsxs("div",{className:"space-y-3",children:[He&&a.jsxs("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-indigo-200 flex flex-col items-center justify-center text-center",children:[a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-400 mb-2"}),a.jsx("p",{className:"text-xs text-indigo-400 font-bold uppercase tracking-widest",children:"Scanning global digital signals..."})]}),(!p.socialSignals||p.socialSignals.length===0)&&!He?a.jsxs("div",{className:"py-12 text-center text-slate-400",children:[a.jsx(ad,{className:"w-12 h-12 mx-auto mb-2 opacity-10"}),a.jsx("p",{className:"text-xs font-medium",children:"No signals found. Use AI Scan to refresh intelligence."})]}):(p.socialSignals||[]).map(Ie=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl hover:border-indigo-200 transition-all shadow-sm group",children:[a.jsxs("div",{className:"flex justify-between items-start mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${Ie.type==="funding"?"bg-emerald-50 text-emerald-600":Ie.type==="hiring"?"bg-blue-50 text-blue-600":"bg-purple-50 text-purple-600"}`,children:[Ie.type==="funding"&&a.jsx(GH,{className:"w-4 h-4"}),Ie.type==="hiring"&&a.jsx(hc,{className:"w-4 h-4"}),Ie.type==="acquisition"&&a.jsx(q2,{className:"w-4 h-4"}),Ie.type==="news"&&a.jsx(qH,{className:"w-4 h-4"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-bold text-sm text-slate-900",children:Ie.title}),Ie.isAiGenerated&&a.jsxs("span",{className:"text-[8px] font-black text-indigo-400 uppercase tracking-tighter flex items-center gap-1",children:[a.jsx(vi,{className:"w-2 h-2"})," Verified by Impact AI"]})]})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-400 uppercase",children:Ie.date})]}),a.jsx("p",{className:"text-xs text-slate-500 leading-relaxed",children:Ie.description})]},Ie.id))]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Eu,{className:"w-4 h-4 text-yellow-500"}),"Client Satisfaction"]}),Bt&&a.jsxs("button",{onClick:()=>e("satisfaction"),className:"text-xs text-indigo-600 hover:text-indigo-700 font-semibold flex items-center gap-1",children:["View Details",a.jsx(ra,{className:"w-3 h-3"})]})]}),Sr?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(ct,{className:"w-6 h-6 animate-spin text-indigo-600"})}):Bt?a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:`p-4 rounded-2xl border-2 ${Bt.latestNpsScore>=9?"bg-green-50 border-green-200":Bt.latestNpsScore>=7?"bg-yellow-50 border-yellow-200":Bt.latestNpsScore!==void 0&&Bt.latestNpsScore!==null?"bg-red-50 border-red-200":"bg-slate-50 border-slate-200"}`,children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Latest NPS Score"}),Bt.latestNpsScore!==void 0&&Bt.latestNpsScore!==null?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-2xl font-black ${Bt.latestNpsScore>=9?"text-green-600":Bt.latestNpsScore>=7?"text-yellow-600":"text-red-600"}`,children:Bt.latestNpsScore}),Bt.npsCategory&&a.jsx("span",{className:`px-2 py-1 rounded-full text-[10px] font-black uppercase ${Bt.npsCategory==="Promoter"?"bg-green-100 text-green-700":Bt.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:Bt.npsCategory})]}):a.jsx("span",{className:"text-sm text-slate-400",children:"No score yet"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Last Survey"}),Bt.lastSurveyDate?a.jsxs("span",{className:"text-sm font-bold text-slate-900 flex items-center gap-1",children:[a.jsx(Ln,{className:"w-4 h-4"}),new Date(Bt.lastSurveyDate).toLocaleDateString()]}):a.jsx("span",{className:"text-sm text-slate-400",children:"Not sent"})]})]}):a.jsx("div",{className:"p-6 bg-slate-50 rounded-2xl border border-dashed border-slate-200 text-center",children:a.jsx("p",{className:"text-xs text-slate-400",children:"No satisfaction data available"})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(_s,{className:"w-4 h-4 text-indigo-500"}),"Playbooks",b.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:b.length})]}),w?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(ct,{className:"w-5 h-5 animate-spin text-indigo-600"})}):b.length>0?a.jsx("div",{className:"space-y-3",children:b.map(Ie=>a.jsx($ye,{instance:Ie,deals:_,projects:C,onView:Dt=>v(Dt)},Ie.id))}):a.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[a.jsx(_s,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to deals or projects for this company."})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(wi,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",p.notes&&p.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:p.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{rows:3,value:cr,onChange:Wn,onBlur:()=>setTimeout(()=>Ce(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add a note or comment... (Use @ to mention users)"}),De&&$e.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Hh,{className:"w-3 h-3"}),"Mention User"]}),$e.map(Ie=>a.jsxs("button",{onClick:()=>Jn(Ie),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Ie.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Ie.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:Ie.email})]})]},Ie.id))]})})]}),a.jsx("button",{onClick:_n,disabled:yr||!cr.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:yr?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jo,{className:"w-4 h-4"}),"Send"]})})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:p.notes&&p.notes.length>0?[...p.notes].reverse().map(Ie=>{var ir;const Dt=(l==null?void 0:l.role)==="Admin"||Ie.userId===(l==null?void 0:l.id);return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:((ir=Ie.userName)==null?void 0:ir.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ie.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Ie.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Dt&&a.jsx("button",{onClick:()=>ge(Ie.id),disabled:Fr===Ie.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Fr===Ie.id?a.jsx(ct,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Ie.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Mr(Ie.text)})]},Ie.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(wi,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Active Contacts"}),a.jsx("div",{className:"space-y-3",children:S.filter(Ie=>Ie.companyId===p.id).map(Ie=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-2xl flex items-center justify-between hover:border-indigo-200 transition-all cursor-pointer",onClick:()=>g(Ie),children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 border border-indigo-100 rounded-xl flex items-center justify-center text-xs font-black text-indigo-600 uppercase",children:Ie.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Ie.name}),a.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase",children:Ie.role})]})]}),a.jsx(ra,{className:"w-4 h-4 text-slate-300"})]},Ie.id))})]})]})]})]}),m&&a.jsxs("div",{className:"fixed inset-0 z-[75] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:dr}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:dr,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(zt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{className:"w-24 h-24 bg-indigo-600 rounded-3xl flex items-center justify-center text-white text-3xl font-black shadow-xl shadow-indigo-100 ring-4 ring-indigo-50 shrink-0",children:m.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900 truncate mb-1",children:m.name}),a.jsxs("p",{className:"text-sm font-bold text-indigo-600 uppercase tracking-widest truncate",children:[m.role," @ ",((Na=y.find(Ie=>Ie.id===m.companyId))==null?void 0:Na.name)||"Direct Contact"]}),a.jsx("div",{className:"flex gap-2 mt-4",children:ie?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:Be,disabled:we,className:"px-4 py-2 bg-indigo-600 border border-indigo-600 rounded-xl text-xs font-black uppercase tracking-widest text-white hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg disabled:opacity-50 disabled:cursor-not-allowed",children:we?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"})," Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-3.5 h-3.5"})," Save Changes"]})}),a.jsxs("button",{onClick:()=>{Q(!1),de({...m})},disabled:we,className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-slate-300 transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(zt,{className:"w-3.5 h-3.5"})," Cancel"]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{de({...m}),Q(!0)},className:"px-4 py-2 bg-white border border-slate-200 rounded-xl text-xs font-black uppercase tracking-widest text-slate-600 hover:border-indigo-300 transition-all flex items-center gap-2",children:[a.jsx(Sk,{className:"w-3.5 h-3.5"})," Edit Profile"]}),a.jsx("a",{href:`mailto:${m.email}`,className:"p-2.5 bg-slate-900 text-white rounded-xl hover:bg-slate-800 transition-all shadow-lg shadow-slate-200",children:a.jsx(ba,{className:"w-4 h-4"})}),m.linkedin&&a.jsx("a",{href:m.linkedin,target:"_blank",rel:"noreferrer",className:"p-2.5 bg-[#0077b5] text-white rounded-xl hover:bg-[#006da5] transition-all shadow-lg shadow-blue-100",children:a.jsx(Oh,{className:"w-4 h-4"})})]})})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-200 w-fit mt-8",children:[{id:"details",label:"Overview",icon:a.jsx(u0,{className:"w-3.5 h-3.5"})},{id:"notes",label:"Strategic Context",icon:a.jsx(Dn,{className:"w-3.5 h-3.5"})},{id:"activity",label:"History",icon:a.jsx(Cu,{className:"w-3.5 h-3.5"})}].map(Ie=>a.jsxs("button",{onClick:()=>{xe(Ie.id),Q(!1)},className:`flex items-center gap-2 px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${ye===Ie.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[Ie.icon," ",Ie.label]},Ie.id))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[ye==="details"&&a.jsx("div",{className:"space-y-8 animate-in fade-in slide-in-from-bottom-2 duration-300",children:ie?a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-top-2 duration-300",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Full Legal Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{required:!0,type:"text",value:Ne.name||"",onChange:Ie=>de({...Ne,name:Ie.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Professional Role"}),a.jsx("input",{type:"text",value:Ne.role||"",onChange:Ie=>de({...Ne,role:Ie.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Linked Organization"}),a.jsxs("select",{value:Ne.companyId||"",onChange:Ie=>de({...Ne,companyId:Ie.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"No Organization"}),y.map(Ie=>a.jsx("option",{value:Ie.id,children:Ie.name},Ie.id))]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-3xl border border-slate-200 space-y-6",children:[a.jsx("h4",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] border-b border-slate-200 pb-2",children:"Communication Registry"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:["Enterprise Email ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{required:!0,type:"email",value:Ne.email||"",onChange:Ie=>de({...Ne,email:Ie.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Mobile Contact"}),a.jsx("input",{type:"tel",value:Ne.phone||"",onChange:Ie=>de({...Ne,phone:Ie.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]}),a.jsxs("div",{className:"space-y-2 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"LinkedIn Intelligence URL"}),a.jsx("input",{type:"url",value:Ne.linkedin||"",onChange:Ie=>de({...Ne,linkedin:Ie.target.value}),className:"w-full px-4 py-3 bg-white border border-slate-200 rounded-2xl text-sm font-bold focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all"})]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Contact Channel"}),a.jsx(ba,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),a.jsx("p",{className:"text-sm font-black text-slate-900 truncate",children:m.email}),a.jsx("p",{className:"text-[10px] text-indigo-500 font-bold uppercase mt-2",children:"Verified Enterprise Mail"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between group hover:bg-white hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Voice Registry"}),a.jsx(_k,{className:"w-4 h-4 text-indigo-400 group-hover:scale-110 transition-transform"})]}),a.jsx("p",{className:"text-sm font-black text-slate-900",children:m.phone||"Registry Pending"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase mt-2",children:"Direct Terminal"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(rd,{className:"w-4 h-4 text-indigo-500"})," Account Context"]}),a.jsxs("div",{className:"p-6 bg-white border border-slate-100 rounded-[36px] shadow-sm flex items-center gap-5 hover:border-indigo-300 transition-all group",children:[a.jsx(hs,{src:(oi=y.find(Ie=>Ie.id===m.companyId))==null?void 0:oi.logo,className:"w-16 h-16 border-2 border-slate-50",fallbackText:"C",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-lg text-slate-900 leading-none mb-1 group-hover:text-indigo-600 transition-colors",children:((rn=y.find(Ie=>Ie.id===m.companyId))==null?void 0:rn.name)||"Independent Partner"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-black uppercase",children:((Jr=y.find(Ie=>Ie.id===m.companyId))==null?void 0:Jr.industry)||"Uncategorized"}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-200"}),a.jsx("span",{className:"text-[10px] text-indigo-500 font-black uppercase",children:"Primary Stakeholder"})]})]}),a.jsx("button",{className:"p-3 text-indigo-600 bg-indigo-50 rounded-2xl hover:bg-indigo-100 transition-all",children:a.jsx(za,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(vi,{className:"w-4 h-4 text-amber-500"})," Intelligence Summary"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-emerald-50/50 rounded-2xl border border-emerald-100 flex items-center gap-3",children:[a.jsx(sy,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-emerald-600 uppercase",children:"Influence"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Decision Maker"})]})]}),a.jsxs("div",{className:"p-4 bg-blue-50/50 rounded-2xl border border-blue-100 flex items-center gap-3",children:[a.jsx(z2,{className:"w-5 h-5 text-blue-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-blue-600 uppercase",children:"Network"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Executive Hub"})]})]})]})]})]})}),ye==="notes"&&a.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-4 duration-300",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(wi,{className:"w-4 h-4 text-indigo-500"}),"Strategic Context & Notes",m.notes&&m.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:m.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{rows:4,value:Ve,onChange:Rt,onBlur:()=>setTimeout(()=>_r(!1),200),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none",placeholder:"Add strategic context, decision-making patterns, or meeting insights... (Use @ to mention users)"}),Xt&&ya.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Hh,{className:"w-3 h-3"}),"Mention User"]}),ya.map(Ie=>a.jsxs("button",{onClick:()=>Ur(Ie),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Ie.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Ie.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:Ie.email})]})]},Ie.id))]})})]}),a.jsx("button",{onClick:lr,disabled:_e||!Ve.trim(),className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:_e?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jo,{className:"w-4 h-4"}),"Send"]})})]}),m.legacyNotes&&a.jsxs("div",{className:"p-6 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(u0,{className:"w-4 h-4 text-amber-600"}),a.jsx("p",{className:"text-xs font-bold text-amber-900 uppercase tracking-wider",children:"Legacy Notes"})]}),a.jsx("p",{className:"text-sm text-amber-800 leading-relaxed italic",children:m.legacyNotes})]}),a.jsx("div",{className:"space-y-3 max-h-[500px] overflow-y-auto",children:m.notes&&m.notes.length>0?[...m.notes].reverse().map(Ie=>{var ir;const Dt=(l==null?void 0:l.role)==="Admin"||Ie.userId===(l==null?void 0:l.id);return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:((ir=Ie.userName)==null?void 0:ir.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ie.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Ie.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Dt&&a.jsx("button",{onClick:()=>Mt(Ie.id),disabled:nt===Ie.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:nt===Ie.id?a.jsx(ct,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Ie.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Mr(Ie.text)})]},Ie.id)}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(wi,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add strategic insights above"})]})})]}),ye==="activity"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Operational Engagement Timeline"}),a.jsxs("button",{className:"text-[10px] font-black text-slate-400 uppercase bg-slate-100 px-3 py-1.5 rounded-xl hover:bg-slate-200 transition-all flex items-center gap-1.5",children:[a.jsx(TH,{className:"w-3 h-3"})," Audit Log"]})]}),a.jsxs("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-indigo-600 shadow-xl flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-600"})}),a.jsx("p",{className:"text-[10px] font-black text-indigo-600 uppercase mb-1 tracking-widest",children:"Digital Touchpoint  Yesterday"}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Enterprise Email Receipt"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Confirmed receipt of Logistics Transformation Proposal V3. Stakeholder requested EMEA regional review by Friday."})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 border-slate-200 shadow-sm flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-slate-300"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase mb-1 tracking-widest",children:"Registry Update  Last Week"}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Registry Association Linked"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:"Manually associated with the 'Q4 Global Logistics Consolidation' opportunity by Alex Rivera (Admin)."})]})]})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>fe(m),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[28px] transition-all group shrink-0 active:scale-95",children:a.jsx(br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>{g(null),Q(!1)},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[28px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(sy,{className:"w-5 h-5"})," Save"]})]})]})]}),Ue&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Company?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. All associated contacts, deals, and projects will be affected."})]})]}),a.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(hs,{src:Ue.logo,fallbackText:Ue.name,className:"w-10 h-10 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Ue.name}),a.jsx("p",{className:"text-xs text-slate-500",children:Ue.industry})]})]})})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>me(null),disabled:Fe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>gt(Ue.id),disabled:Fe,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Fe?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Company"})]})]})}),ee&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Contact?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The contact will be permanently removed from the enterprise registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-lg border border-indigo-100",children:ee.name.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:ee.name}),a.jsx("p",{className:"text-xs text-slate-500",children:ee.email}),ee.role&&a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:ee.role})]})]}),y.find(Ie=>Ie.id===ee.companyId)&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[a.jsx(rd,{className:"w-4 h-4 text-slate-400"}),a.jsx("p",{className:"text-xs font-bold text-slate-600",children:(sn=y.find(Ie=>Ie.id===ee.companyId))==null?void 0:sn.name})]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>fe(null),disabled:qe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Pt(ee.id),disabled:qe,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:qe?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Contact"})]})]})}),qt&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",qt==="companies"?Qe.length:vt.length," ",qt==="companies"?"Compan":"Contact",qt==="companies"?Qe.length>1?"ies":"y":vt.length>1?"s":"","?"]}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["This action cannot be undone. ",qt==="companies"?"All associated contacts, deals, and projects will be affected.":"The contacts will be permanently removed from the enterprise registry."]})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[(qt==="companies"?y.filter(Ie=>Qe.includes(Ie.id)):S.filter(Ie=>vt.includes(Ie.id))).slice(0,5).map(Ie=>a.jsx("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:qt==="companies"?a.jsxs(a.Fragment,{children:[a.jsx(hs,{src:Ie.logo,fallbackText:Ie.name,className:"w-8 h-8 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ie.name}),a.jsx("p",{className:"text-[10px] text-slate-500",children:Ie.industry})]})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-full flex items-center justify-center text-indigo-600 font-bold text-xs uppercase",children:Ie.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Ie.name}),a.jsx("p",{className:"text-[10px] text-slate-500",children:Ie.email})]})]})},Ie.id)),(qt==="companies"?Qe.length:vt.length)>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",(qt==="companies"?Qe.length:vt.length)-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Gt(null),disabled:qt==="companies"?Je:ue,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>{qt==="companies"?ar():Un()},disabled:qt==="companies"?Je:ue,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:(qt==="companies"?Je:ue)?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${qt==="companies"?Qe.length:vt.length} ${qt==="companies"?"Compan":"Contact"}${qt==="companies"?Qe.length>1?"ies":"y":vt.length>1?"s":""}`})]})]})}),Pr&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(f0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>ge(null),disabled:Fr===Pr,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Nr,disabled:Fr===Pr,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Fr===Pr?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(br,{className:"w-4 h-4"}),"Delete"]})})]})]})}),wt&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(f0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>Mt(null),disabled:nt===wt,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:pr,disabled:nt===wt,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:nt===wt?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(br,{className:"w-4 h-4"}),"Delete"]})})]})]})}),Fa&&a.jsx(xbe,{onClose:()=>dn(!1),onSuccess:()=>{dn(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:(l==null?void 0:l.id)||""}),dl&&a.jsx(gbe,{onClose:()=>Gn(!1),onSuccess:()=>{Gn(!1),o.invalidateQueries({queryKey:["companies"]}),o.invalidateQueries({queryKey:["contacts"]})},currentUserId:(l==null?void 0:l.id)||""}),x&&a.jsx(kN,{instanceId:x,isOpen:!!x,onClose:()=>v(null)})]})},Z6=({isOpen:e,dealId:t,projectId:r,preSelectedTemplateId:n,onClose:s,onSuccess:i})=>{const{showError:o}=hn(),[l,c]=P.useState(""),[d,f]=P.useState(null),[u,p]=P.useState(!1);P.useEffect(()=>{e&&n?f(n):e||(f(null),c(""))},[e,n]);const{data:h=[],isLoading:m}=iB(),g=xye();if(!e)return null;const x=h.filter(y=>{var S,j,_;if(!l)return!0;const N=l.toLowerCase();return((S=y.name)==null?void 0:S.toLowerCase().includes(N))||((j=y.description)==null?void 0:j.toLowerCase().includes(N))||((_=y.category)==null?void 0:_.toLowerCase().includes(N))}),v=y=>!y.sections||!Array.isArray(y.sections)?0:y.sections.reduce((N,S)=>{var j;return N+(((j=S.steps)==null?void 0:j.length)||0)},0),b=y=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[y]||"bg-slate-100 text-slate-700",w=async()=>{if(!d){o("Please select a playbook template");return}if(!t&&!r){o("Either dealId or projectId must be provided");return}p(!0);try{await g.mutateAsync({templateId:d,dealId:t||void 0,projectId:r||void 0}),i==null||i(),s(),f(null),c("")}catch(y){o(y.message||"Failed to attach playbook")}finally{p(!1)}};return a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:s}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(_s,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:n?"Activate Onboarding Playbook?":"Attach Playbook"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:n?"The Client Onboarding Playbook is ready to activate for this deal.":"Select a playbook template to attach"})]})]}),a.jsx("button",{onClick:s,className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(zt,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search playbooks...",value:l,onChange:y=>c(y.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]})}),m?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"})}):x.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(_s,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Templates Found"}),a.jsx("p",{className:"text-sm text-slate-500",children:l?"No templates match your search. Try a different query.":"No playbook templates available. Create one first."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.map(y=>{var _;const N=v(y),S=((_=y.sections)==null?void 0:_.length)||0,j=d===y.id;return a.jsxs("div",{onClick:()=>f(y.id),className:`p-6 border-2 rounded-xl cursor-pointer transition-all ${j?"border-indigo-500 bg-indigo-50 shadow-lg":"border-slate-200 hover:border-slate-300 hover:shadow-md bg-white"}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:y.name}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${b(y.category||"Custom")}`,children:y.category||"Custom"})]}),j&&a.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center",children:a.jsx("div",{className:"w-2 h-2 rounded-full bg-white"})})]}),y.description&&a.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:y.description}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Dn,{className:"w-4 h-4"}),a.jsxs("span",{children:[S," section",S!==1?"s":""]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(O5,{className:"w-4 h-4"}),a.jsxs("span",{children:[N," step",N!==1?"s":""]})]})]})]},y.id)})})]}),a.jsx("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50",children:n&&d===n?a.jsxs("div",{className:"flex flex-col gap-3",children:[a.jsx("button",{onClick:w,disabled:u,className:"w-full px-6 py-3 bg-green-600 text-white text-sm font-semibold rounded-xl hover:bg-green-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Activating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Hs,{className:"w-4 h-4"}),"Yes, Activate Onboarding Playbook"]})}),a.jsx("button",{onClick:s,disabled:u,className:"w-full px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Maybe Later"})]}):a.jsxs("div",{className:"flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:s,disabled:u,className:"px-6 py-2.5 text-sm font-semibold text-slate-600 hover:bg-white rounded-xl transition-colors border border-slate-200 disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:w,disabled:!d||u,className:"px-6 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 transition-all shadow-sm flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:u?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Attaching..."]}):"Attach Playbook"})]})})]})})]})},DI=[{id:"sales",name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]},{id:"ops",name:"Operations Flow",type:"operations",stages:["Order Received","Processing","In Transit","Delivered"]}],zye=({instance:e,onView:t})=>{var o,l,c,d;const{data:r=[]}=ob(e.id),n=((l=(o=e.templateSnapshot)==null?void 0:o.sections)==null?void 0:l.reduce((f,u)=>{var p;return f+(((p=u.steps)==null?void 0:p.length)||0)},0))||0,s=r.length,i=n>0?Math.round(s/n*100):0;return a.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:a.jsx(_s,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:((c=e.templateSnapshot)==null?void 0:c.name)||"Unknown Playbook"}),((d=e.templateSnapshot)==null?void 0:d.version)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0.5",children:["Version ",e.templateSnapshot.version]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("span",{className:`px-2 py-1 rounded-lg text-xs font-semibold ${e.status==="completed"?"bg-green-100 text-green-700":"bg-indigo-100 text-indigo-700"}`,children:e.status==="completed"?"Completed":"Active"})})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs text-slate-600 font-medium",children:"Progress"}),a.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:[s," / ",n," steps"]})]}),a.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2",children:a.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all",style:{width:`${i}%`}})})]}),a.jsxs("button",{onClick:t,className:"w-full px-4 py-2 bg-indigo-50 hover:bg-indigo-100 text-indigo-600 text-xs font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:[a.jsx(_s,{className:"w-4 h-4"}),"View Playbook"]})]})},qye=({onNavigate:e,onNewDeal:t,currentUser:r})=>{var Oe;const{showSuccess:n,showError:s,showInfo:i}=hn(),[o,l]=P.useState([]),[c,d]=P.useState([]),[f,u]=P.useState([]),[p,h]=P.useState([]),[m,g]=P.useState(!0),[x,v]=P.useState(null),[b,w]=P.useState("overview"),[y,N]=P.useState(!1),[S,j]=P.useState(null),{data:_=[],isLoading:T}=jN({dealId:x==null?void 0:x.id}),[D,A]=P.useState(!1),[C,M]=P.useState(null),[F,B]=P.useState(null),[Y,V]=P.useState(""),[J,U]=P.useState(null),[X,W]=P.useState(!1),[E,R]=P.useState(!1),[q,L]=P.useState(!1),[H,se]=P.useState({title:"",companyId:"",value:"",currency:Us,stage:"Discovery",ownerId:"",expectedCloseDate:"",description:""}),[ce,ae]=P.useState([]),[Z,ve]=P.useState(!1),[ne,He]=P.useState(!1),[Xe,ie]=P.useState([]),[Q,Ne]=P.useState(!1),[de,ye]=P.useState([]),[xe,we]=P.useState(""),[Ae]=P.useState("sales"),[Ue,me]=P.useState(!1),[ee,fe]=P.useState(!1),[Fe,Ee]=P.useState(!0),[qe,Ke]=P.useState(!1),[Qe,_t]=P.useState(null),[vt,ke]=P.useState(""),[Je,mt]=P.useState(""),ue=de.find(G=>G.id===xe)||null,[Ye,bt]=P.useState(null),xt=async()=>{var G;try{Ee(!0);const oe=await sI(),$e=((oe==null?void 0:oe.data)||[]).filter(We=>We.type==="sales");if($e.length===0)try{const We=await iI({name:"Sales Pipeline",type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});(G=We==null?void 0:We.data)!=null&&G.id&&await ky(We.data.id,{isActive:!0});const Ve=await sI(),_e=((Ve==null?void 0:Ve.data)||[]).filter(nt=>nt.type==="sales");ye(_e);const Ge=_e.find(nt=>nt.isActive)||_e[0];Ge&&we(Ge.id)}catch(We){console.error("[PIPELINE] Failed to create default sales pipeline:",We);const Ve=DI.filter(Re=>Re.type==="sales");ye(Ve),Ve.length>0&&we(Ve[0].id)}else{ye($e);const We=$e.find(Ve=>Ve.isActive)||$e[0];We&&we(We.id)}}catch(oe){console.error("[PIPELINE] Failed to fetch pipelines:",oe);const Pe=DI.filter($e=>$e.type==="sales");ye(Pe),Pe.length>0&&we(Pe[0].id)}finally{Ee(!1)}};P.useEffect(()=>{xt()},[]);const Vt=async()=>{g(!0);try{const[G,oe,Pe,$e]=await Promise.all([ib(),jc(),ud(),Yh()]),Ve=(Array.isArray(G)?G:(G==null?void 0:G.data)||[]).filter(Re=>Re.pipelineType?Re.pipelineType==="sales":!["Order Received","Processing","In Transit","Delivered"].includes(Re.stage));l(Ve),d((oe==null?void 0:oe.data)||[]),u((Pe==null?void 0:Pe.data)||[]),h(($e==null?void 0:$e.data)||[])}catch{s("Failed to load pipeline data")}finally{g(!1)}};P.useEffect(()=>{Vt()},[r,Ae]),P.useEffect(()=>{const G=()=>Vt();return window.addEventListener("refresh-pipeline",G),()=>window.removeEventListener("refresh-pipeline",G)},[]);const gr=(G,oe)=>{bt(oe),G.dataTransfer.setData("dealId",oe)},qt=async(G,oe)=>{G.preventDefault();const Pe=G.dataTransfer.getData("dealId"),$e=o.find(We=>We.id===Pe);if(!(!$e||$e.stage===oe))try{await Ny(Pe,{stage:oe,pipelineType:"sales"}),l(We=>We.map(Ve=>Ve.id===Pe?{...Ve,stage:oe}:Ve)),n(`Deal moved to ${oe}`),$e.ownerId&&$e.ownerId!==(r==null?void 0:r.id)&&await kx({userId:$e.ownerId,type:"deal",title:"Deal Advanced",message:`The deal "${$e.title}" was moved to ${oe}.`,link:"/?tab=pipeline"})}catch{s("Failed to move deal")}finally{bt(null)}},Gt=async()=>{if(!(!vt.trim()||!xe||qe))try{Ke(!0);const G=de.find(Pe=>Pe.id===xe);if(!G)return;const oe=[...G.stages,vt.trim()];await ky(xe,{stages:oe}),ye(Pe=>Pe.map($e=>$e.id===xe?{...$e,stages:oe}:$e)),ke(""),n("Stage added successfully")}catch(G){s(G.message||"Failed to add stage")}finally{Ke(!1)}},Bt=async G=>{if(xe)try{const oe=de.find($e=>$e.id===xe);if(!oe)return;const Pe=oe.stages.filter(($e,We)=>We!==G);await ky(xe,{stages:Pe}),ye($e=>$e.map(We=>We.id===xe?{...We,stages:Pe}:We)),n("Stage removed successfully")}catch(oe){s(oe.message||"Failed to remove stage")}},fr=async()=>{if(Je.trim())try{const G=await iI({name:Je.trim(),type:"sales",stages:["Discovery","Proposal","Negotiation","Won","Lost"]});G!=null&&G.data&&(await xt(),we(G.data.id),mt(""),me(!1),n("Sales pipeline created successfully"))}catch(G){s(G.message||"Failed to create pipeline")}},Sr=async G=>{try{const oe=de.find(Pe=>Pe.id===G);if(!oe)return;await ky(G,{isActive:!0}),we(G),await xt(),await Vt(),n(`Switched to ${oe.name}`)}catch(oe){s(oe.message||"Failed to switch pipeline")}},Cr=async G=>{W(!0);try{await rI(G),l(oe=>oe.filter(Pe=>Pe.id!==G)),(x==null?void 0:x.id)===G&&v(null),U(null),n("Opportunity removed from pipeline")}catch(oe){s(oe.message||"Failed to delete opportunity")}finally{W(!1)}},cr=()=>{ce.length===o.length?ae([]):ae(o.map(G=>G.id))},It=async()=>{ve(!0);try{const G=[...ce];await Promise.all(G.map(oe=>rI(oe))),l(oe=>oe.filter(Pe=>!G.includes(Pe.id))),x&&G.includes(x.id)&&v(null),ae([]),He(!1),n(`Successfully deleted ${G.length} opportunit${G.length>1?"ies":"y"}`)}catch(G){s(G.message||"Failed to delete opportunities")}finally{ve(!1)}},yr=async G=>{var Pe;if(!x)return;if((Pe=x.stakeholderIds)!=null&&Pe.includes(G)){s("Stakeholder already linked");return}M(G);const oe=[...x.stakeholderIds||[],G];try{await Ny(x.id,{stakeholderIds:oe});const $e={...x,stakeholderIds:oe};v($e),l(We=>We.map(Ve=>Ve.id===x.id?$e:Ve)),A(!1),V(""),n("Stakeholder linked to opportunity")}catch{s("Link failed")}finally{M(null)}},wr=c.find(G=>G.id===(x==null?void 0:x.companyId)),Fr=f.find(G=>G.id===(x==null?void 0:x.ownerId)),jr=p.filter(G=>{var oe;return(oe=x==null?void 0:x.stakeholderIds)==null?void 0:oe.includes(G.id)}),Pr=p.filter(G=>{var oe;return!((oe=x==null?void 0:x.stakeholderIds)!=null&&oe.includes(G.id))&&(G.name.toLowerCase().includes(Y.toLowerCase())||G.email.toLowerCase().includes(Y.toLowerCase()))});P.useEffect(()=>{x&&!E&&se({title:x.title,companyId:x.companyId||"",value:x.value?x.value.toString():"",currency:x.currency||Us,stage:x.stage,ownerId:x.ownerId,expectedCloseDate:x.expectedCloseDate||"",description:x.description||""})},[x]);const ge=async()=>{if(x){if(!H.title.trim()){s("Deal title is required");return}if(!H.ownerId){s("Opportunity lead is required");return}L(!0);try{const G={title:H.title.trim(),companyId:H.companyId&&H.companyId.trim()!==""?H.companyId:null,value:parseFloat(H.value)||0,currency:H.currency||Us,stage:H.stage,pipelineType:"sales",ownerId:H.ownerId,expectedCloseDate:H.expectedCloseDate&&H.expectedCloseDate.trim()!==""?H.expectedCloseDate:null,description:H.description.trim()||null};await Ny(x.id,G);const oe={...x,...G};l(Pe=>Pe.map($e=>$e.id===x.id?oe:$e)),v(oe),R(!1),n("Deal updated successfully")}catch(G){s(G.message||"Failed to update deal")}finally{L(!1)}}},De=async()=>{if(!(!x||b!=="activity")){Ne(!0);try{const G=await V6("deal",x.id);ie((G==null?void 0:G.data)||[])}catch(G){console.error("[PIPELINE] Failed to fetch deal activities:",G),ie([])}finally{Ne(!1)}}};P.useEffect(()=>{x&&b==="activity"?De():ie([])},[x==null?void 0:x.id,b]);const Ce=()=>{if(!x)return[];const G=[];return x.createdAt&&G.push({id:"created",type:"created",title:"Opportunity Created",description:`Deal "${x.title}" was created${Fr?` by ${Fr.name}`:""}`,date:x.createdAt,icon:a.jsx($r,{className:"w-4 h-4"}),color:"indigo"}),G.push({id:"stage",type:"stage",title:`Current Stage: ${x.stage}`,description:`Opportunity is currently in the ${x.stage} stage`,date:x.updatedAt||x.createdAt||new Date().toISOString(),icon:a.jsx(ad,{className:"w-4 h-4"}),color:x.stage==="Won"?"emerald":x.stage==="Lost"?"red":"blue"}),x.value>0&&G.push({id:"value",type:"value",title:`Deal Value: ${ku(x.value,x.currency)}`,description:`Gross contract revenue for this opportunity: ${ku(x.value,x.currency)}`,date:x.updatedAt||x.createdAt||new Date().toISOString(),icon:a.jsx(Uu,{className:"w-4 h-4"}),color:"emerald"}),x.expectedCloseDate&&G.push({id:"close_date",type:"close_date",title:`Expected Close Date: ${x.expectedCloseDate}`,description:"Target date for closing this opportunity",date:x.expectedCloseDate,icon:a.jsx(Ln,{className:"w-4 h-4"}),color:"amber"}),jr.length>0&&G.push({id:"stakeholders",type:"stakeholder",title:`${jr.length} Stakeholder${jr.length>1?"s":""} Linked`,description:jr.map(oe=>oe.name).join(", "),date:x.updatedAt||x.createdAt||new Date().toISOString(),icon:a.jsx(s0,{className:"w-4 h-4"}),color:"purple"}),x.description&&G.push({id:"description",type:"description",title:"Strategic Context Added",description:x.description.substring(0,100)+(x.description.length>100?"...":""),date:x.updatedAt||x.createdAt||new Date().toISOString(),icon:a.jsx(wi,{className:"w-4 h-4"}),color:"slate"}),Xe.forEach(oe=>{oe.activityType==="email_linked"&&G.push({id:oe.id||`email-${oe.emailId}`,type:"email_linked",title:oe.title||"Email Linked",description:oe.description||`Email "${oe.emailSubject||"Untitled"}" from ${oe.emailSender||"Unknown"}`,date:oe.createdAt,icon:a.jsx(ba,{className:"w-4 h-4"}),color:"indigo",emailId:oe.emailId})}),G.sort((oe,Pe)=>new Date(Pe.date).getTime()-new Date(oe.date).getTime())};return a.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500 relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center shrink-0 gap-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"relative group",children:[a.jsxs("button",{className:"flex items-center gap-2 px-4 py-2 bg-white border border-slate-200 rounded-xl shadow-sm hover:border-indigo-300 transition-all font-bold",children:[a.jsx(kk,{className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-slate-900",children:(ue==null?void 0:ue.name)||"Loading..."}),a.jsx($s,{className:"w-4 h-4 text-slate-400"})]}),a.jsxs("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-slate-100 rounded-2xl shadow-xl z-50 overflow-hidden opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all",children:[de.length>0?de.map(G=>a.jsxs("button",{onClick:()=>Sr(G.id),className:`w-full px-4 py-3 text-left text-sm font-bold flex items-center justify-between hover:bg-indigo-50 transition-colors ${xe===G.id?"text-indigo-600":"text-slate-600"}`,children:[G.name," ",xe===G.id&&a.jsx(Yd,{className:"w-4 h-4"})]},G.id)):a.jsx("div",{className:"px-4 py-3 text-sm text-slate-400",children:"No pipelines available"}),a.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:a.jsxs("button",{onClick:()=>me(!0),className:"w-full text-xs text-indigo-600 font-bold hover:text-indigo-700 flex items-center gap-2",children:[a.jsx($r,{className:"w-3 h-3"}),"Manage Pipelines"]})}),a.jsx("div",{className:"p-3 border-t border-slate-50 bg-slate-50/30",children:a.jsx("input",{type:"text",placeholder:"New Pipeline Name...",value:Je,onChange:G=>mt(G.target.value),onKeyDown:G=>G.key==="Enter"&&fr(),className:"w-full text-xs px-2 py-1.5 border border-slate-200 rounded-lg outline-none focus:ring-1 focus:ring-indigo-100"})})]})]}),a.jsxs("p",{className:"text-slate-400 text-xs hidden lg:block font-medium",children:["Tracking ",o.length," active opportunities"]})]}),a.jsxs("div",{className:"flex gap-2 w-full sm:w-auto",children:[a.jsx("button",{onClick:()=>me(!0),className:"p-2 border border-slate-200 bg-white text-slate-600 rounded-lg hover:bg-slate-50 shadow-sm transition-all",children:a.jsx(lE,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>t(),className:"flex-1 sm:flex-none px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center justify-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all",children:[a.jsx($r,{className:"w-4 h-4"})," New Deal"]})]})]}),!m&&o.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:o.length>0&&ce.length===o.length,onChange:cr}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Opportunities"})]}),a.jsx("div",{className:"flex-1 min-h-0 flex gap-6 overflow-x-auto overflow-y-hidden pb-6 -mx-4 px-4 lg:mx-0 lg:px-0 scrollbar-hide",children:m||Fe||!ue?a.jsx("div",{className:"flex items-center justify-center w-full min-h-[400px]",children:a.jsx(ct,{className:"w-10 h-10 animate-spin text-indigo-600"})}):ue.stages.map(G=>{const oe=o.filter(Pe=>Pe.stage===G);return a.jsxs("div",{onDragOver:Pe=>Pe.preventDefault(),onDrop:Pe=>qt(Pe,G),className:"flex flex-col min-h-0 w-[85vw] sm:w-72 lg:w-80 shrink-0 bg-slate-100/40 rounded-3xl p-4 border border-slate-200/50",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6 px-1",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"font-black text-slate-900 text-xs uppercase tracking-widest",children:G}),a.jsx("span",{className:"text-[10px] bg-white text-slate-400 px-2 py-0.5 rounded-full border border-slate-200 font-bold",children:oe.length})]}),a.jsx($r,{onClick:()=>t(G),className:"w-4 h-4 text-slate-300 hover:text-indigo-600 cursor-pointer transition-colors"})]}),a.jsx("div",{className:"flex-1 min-h-0 space-y-4 overflow-y-auto pr-1",children:oe.map(Pe=>{const $e=c.find(Ve=>Ve.id===Pe.companyId),We=ce.includes(Pe.id);return a.jsxs("div",{onClick:()=>v(Pe),draggable:!0,onDragStart:Ve=>gr(Ve,Pe.id),className:`bg-white p-5 rounded-2xl border ${We?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all cursor-move group active:scale-[0.98] relative ${Ye===Pe.id?"opacity-30":""}`,children:[a.jsx("div",{className:"absolute top-3 right-3",onClick:Ve=>Ve.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:We,onChange:()=>ae(Ve=>We?Ve.filter(Re=>Re!==Pe.id):[...Ve,Pe.id])})}),a.jsxs("div",{className:"flex items-start gap-2.5 mb-3",children:[a.jsx(hs,{src:$e==null?void 0:$e.logo,fallbackText:$e==null?void 0:$e.name,className:"w-5 h-5 shrink-0 mt-0.5",isAvatar:!1}),a.jsx("h4",{className:"font-bold text-slate-900 text-sm group-hover:text-indigo-600 transition-colors break-words leading-tight flex-1 min-w-0",children:Pe.title})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest mb-4",children:($e==null?void 0:$e.name)||"Independent"}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-indigo-600 font-black text-xs",children:ku(Pe.value,Pe.currency)}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-[9px] font-bold text-slate-400 uppercase",children:Pe.expectedCloseDate}),a.jsx("div",{className:"w-6 h-6 bg-slate-50 rounded-full flex items-center justify-center text-[8px] font-black text-slate-300 border border-slate-100 uppercase",children:"DE"})]})]})]},Pe.id)})})]},G)})}),x&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{v(null),A(!1)}}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[20px] flex items-center justify-center text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:a.jsx(al,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[E?a.jsx("input",{type:"text",value:H.title,onChange:G=>se(oe=>({...oe,title:G.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-2xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Deal title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight",children:x.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[E?a.jsx("select",{value:H.stage,onChange:G=>se(oe=>({...oe,stage:G.target.value})),className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200 outline-none focus:ring-2 focus:ring-indigo-300",children:((Oe=ue==null?void 0:ue.stages)==null?void 0:Oe.map(G=>a.jsx("option",{value:G,children:G},G)))||[]}):a.jsx("span",{className:"px-2.5 py-1 bg-indigo-100 text-indigo-700 text-[10px] font-black uppercase rounded-lg border border-indigo-200",children:x.stage}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Opportunity ID: #",x.id.substring(0,8)]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[E?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{R(!1),se({title:x.title,companyId:x.companyId||"",value:x.value?x.value.toString():"",currency:x.currency||Us,stage:x.stage,ownerId:x.ownerId,expectedCloseDate:x.expectedCloseDate||"",description:x.description||""})},disabled:q,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:ge,disabled:q||!H.title.trim()||!H.ownerId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:q?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>R(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Eo,{className:"w-4 h-4"}),"Edit Deal"]}),a.jsx("button",{onClick:()=>{v(null),A(!1),R(!1)},className:"p-3 hover:bg-white rounded-full text-slate-400 shadow-sm transition-all",children:a.jsx(zt,{className:"w-6 h-6"})})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-2xl border border-slate-100 w-fit",children:[{id:"overview",label:"Overview",icon:a.jsx(u0,{className:"w-4 h-4"})},{id:"activity",label:"Timeline",icon:a.jsx(Cu,{className:"w-4 h-4"})},{id:"stakeholders",label:"Stakeholders",icon:a.jsx(s0,{className:"w-4 h-4"})},{id:"playbooks",label:"Playbooks",icon:a.jsx(_s,{className:"w-4 h-4"})}].map(G=>a.jsxs("button",{onClick:()=>{w(G.id),A(!1),R(!1)},className:`flex items-center gap-2 px-6 py-2.5 rounded-xl text-xs font-black uppercase tracking-widest transition-all ${b===G.id?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600 hover:bg-slate-50"}`,children:[G.icon," ",G.label]},G.id))})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10 custom-scrollbar",children:[b==="overview"&&a.jsxs("div",{className:"space-y-10 animate-in fade-in slide-in-from-bottom-2 duration-300",children:[E?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),a.jsx(cv,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("div",{className:"space-y-3",children:a.jsxs("div",{className:"flex gap-3 items-center",children:[a.jsx("select",{value:H.currency||Us,onChange:G=>se(oe=>({...oe,currency:G.target.value})),className:"px-4 py-3 text-sm font-bold bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 text-indigo-600 appearance-none min-w-[140px] h-[60px]",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236366f1" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 8px center",backgroundSize:"16px",paddingRight:"32px",height:"60px"},children:Sx.map(G=>a.jsxs("option",{value:G.code,children:[G.code," (",G.symbol,")"]},G.code))}),a.jsxs("div",{className:"relative flex-1 min-w-[200px]",children:[a.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-indigo-600 font-black text-xl pointer-events-none z-10",children:vu(H.currency||Us)}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:H.value||"",onChange:G=>se(oe=>({...oe,value:G.target.value})),className:"w-full pl-10 pr-4 py-3 text-2xl font-black text-indigo-600 bg-white border-2 border-indigo-200 rounded-xl outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-400 placeholder:text-slate-300 h-[60px]",placeholder:"0",autoFocus:!1,style:{WebkitAppearance:"textfield",MozAppearance:"textfield",appearance:"textfield",color:"#4f46e5",fontSize:"1.5rem",fontWeight:"900",height:"60px"}})]})]})}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),a.jsx(Ln,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("input",{type:"date",value:H.expectedCloseDate,onChange:G=>se(oe=>({...oe,expectedCloseDate:G.target.value})),className:"text-xl font-black text-slate-900 bg-white border-2 border-indigo-200 rounded-xl px-3 py-2 outline-none focus:ring-4 focus:ring-indigo-100 w-full"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}):a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Deal Value"}),a.jsx(cv,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("h3",{className:"text-3xl font-black text-indigo-600",children:ku(x.value,x.currency)}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Gross Contract Revenue"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[32px] border border-slate-100 flex flex-col justify-between",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Expected Close Date"}),a.jsx(Ln,{className:"w-4 h-4 text-indigo-400"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:x.expectedCloseDate||"Not set"}),a.jsx("p",{className:"text-[10px] font-bold text-slate-400 mt-2",children:"Target Implementation"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(rd,{className:"w-4 h-4"})," Account Association"]}),E?a.jsxs("select",{value:H.companyId,onChange:G=>se(oe=>({...oe,companyId:G.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",children:[a.jsx("option",{value:"",children:"Independent/Direct"}),c.map(G=>a.jsx("option",{value:G.id,children:G.name},G.id))]}):a.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm hover:border-indigo-300 transition-all group flex items-center gap-4",children:[a.jsx(hs,{src:wr==null?void 0:wr.logo,className:"w-14 h-14",fallbackText:(wr==null?void 0:wr.name)||"A",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-slate-900",children:(wr==null?void 0:wr.name)||"Independent/Direct"}),a.jsx("p",{className:"text-xs text-indigo-500 font-bold",children:(wr==null?void 0:wr.industry)||"Uncategorized"})]}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600 transition-colors",children:a.jsx(za,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(P5,{className:"w-4 h-4"})," Opportunity Lead"]}),E?a.jsxs("select",{value:H.ownerId,onChange:G=>se(oe=>({...oe,ownerId:G.target.value})),className:"w-full p-5 bg-white border-2 border-indigo-200 rounded-3xl shadow-sm outline-none focus:ring-4 focus:ring-indigo-100 text-sm font-bold",required:!0,children:[a.jsx("option",{value:"",children:"Select Owner"}),f.map(G=>a.jsxs("option",{value:G.id,children:[G.name," (",G.role,")"]},G.id))]}):a.jsxs("div",{className:"p-5 bg-white border border-slate-100 rounded-3xl shadow-sm flex items-center gap-4",children:[a.jsx(hs,{src:Fr==null?void 0:Fr.avatar,className:"w-14 h-14",fallbackText:(Fr==null?void 0:Fr.name)||"U",isAvatar:!0}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-black text-slate-900",children:(Fr==null?void 0:Fr.name)||"Unassigned"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:(Fr==null?void 0:Fr.role)||"Teammate"})]})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(wi,{className:"w-4 h-4"})," Strategic Context"]}),E?a.jsx("textarea",{value:H.description,onChange:G=>se(oe=>({...oe,description:G.target.value})),rows:6,className:"w-full p-8 bg-slate-950 rounded-[40px] text-indigo-50 border-2 border-indigo-200 outline-none focus:ring-4 focus:ring-indigo-100 resize-none text-sm leading-relaxed italic",placeholder:"Enter strategic context and operational notes..."}):a.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group",children:[a.jsx("p",{className:"text-sm leading-relaxed italic opacity-80 z-10 relative",children:x.description||"The logistics assessment phase is currently gathering data points to populate this strategic summary. No specific operational notes are archived yet."}),a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-indigo-500/10 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Digital Readiness & Proposal"}),a.jsxs("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-700 text-[9px] font-black uppercase rounded-full border border-indigo-200 flex items-center gap-1",children:[a.jsx(vi,{className:"w-2.5 h-2.5"})," AI Engine"]})]}),a.jsxs("div",{className:"p-6 border-2 border-dashed border-slate-200 rounded-[32px] flex flex-col items-center text-center",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:a.jsx(Dn,{className:"w-6 h-6"})}),a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:"Proposal Engine Coming Soon"}),a.jsx("p",{className:"text-xs text-slate-400 mb-6 max-w-xs",children:"Automated PDF generation and strategic roadmap visualization for this opportunity are in final audit."}),a.jsx("button",{onClick:()=>i("Proposal engine is currently in development."),className:"px-6 py-2.5 bg-slate-900 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-slate-800 transition-all opacity-50 cursor-not-allowed",children:"Generate Proposal [LOCKED]"})]})]})]}),b==="activity"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 mb-6",children:[a.jsx(Cu,{className:"w-4 h-4 text-indigo-500"})," Opportunity Timeline"]}),Q?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(ct,{className:"w-6 h-6 animate-spin text-indigo-600"})}):(()=>{const G=Ce();return G.length===0?a.jsxs("div",{className:"py-20 bg-white border border-dashed border-slate-200 rounded-3xl text-center",children:[a.jsx(Cu,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No timeline events available"})]}):a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-6 top-0 bottom-0 w-0.5 bg-slate-200"}),a.jsx("div",{className:"space-y-6",children:G.map((oe,Pe)=>{const $e=_e=>{const Ge={indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",blue:"bg-blue-50 text-blue-600 border-blue-200",emerald:"bg-emerald-50 text-emerald-600 border-emerald-200",amber:"bg-amber-50 text-amber-600 border-amber-200",purple:"bg-purple-50 text-purple-600 border-purple-200",red:"bg-red-50 text-red-600 border-red-200",slate:"bg-slate-50 text-slate-600 border-slate-200"};return Ge[_e]||Ge.slate},We=new Date(oe.date),Ve=We.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),Re=We.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"});return a.jsxs("div",{className:"relative flex items-start gap-4",children:[a.jsx("div",{className:`relative z-10 w-12 h-12 rounded-full border-2 ${$e(oe.color)} flex items-center justify-center flex-shrink-0`,children:oe.icon}),a.jsx("div",{className:"flex-1 pb-6",children:a.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-5 shadow-sm hover:shadow-md transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h4",{className:"font-black text-slate-900 text-sm",children:oe.title}),a.jsxs("span",{className:"text-[10px] font-bold text-slate-400 uppercase whitespace-nowrap ml-4",children:[Ve," ",Re]})]}),a.jsx("p",{className:"text-xs text-slate-600 leading-relaxed",children:oe.description}),oe.type==="email_linked"&&oe.emailId&&a.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${oe.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(za,{className:"w-3 h-3"})," View Email"]})]})})]},oe.id)})})]})})()]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-8 border-t border-slate-100",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Days in Pipeline"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:x.createdAt?Math.floor((new Date().getTime()-new Date(x.createdAt).getTime())/(1e3*60*60*24)):"N/A"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Current Stage"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:x.stage})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Stakeholders"}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:jr.length})]})]})]}),b==="stakeholders"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Key Account Decision Makers"}),!D&&a.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[a.jsx(hc,{className:"w-3 h-3"})," Link Person"]})]}),D?a.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-[32px] animate-in slide-in-from-top-2",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h4",{className:"text-sm font-black text-slate-900",children:"Select Existing Contact"}),a.jsx("button",{onClick:()=>A(!1),className:"p-1 hover:bg-white rounded-lg",children:a.jsx(zt,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search global registry...",value:Y,onChange:G=>V(G.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs"})]}),a.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:Pr.length>0?Pr.map(G=>{const oe=C===G.id;return a.jsxs("button",{onClick:()=>yr(G.id),disabled:oe||!!C,className:"w-full p-4 bg-white border border-slate-100 rounded-2xl flex items-center gap-3 hover:border-indigo-400 hover:shadow-sm transition-all text-left group disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase group-hover:scale-105 transition-transform",children:G.name.charAt(0)}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:"font-bold text-xs text-slate-900 truncate",children:G.name}),a.jsx("p",{className:"text-[10px] text-slate-500 font-bold uppercase truncate",children:G.role})]}),oe?a.jsx(ct,{className:"w-4 h-4 text-indigo-600 animate-spin"}):a.jsx($r,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600"})]},G.id)}):a.jsx("div",{className:"py-10 text-center text-xs text-slate-400",children:"No matching contacts found in CRM."})})]}):jr.length>0?a.jsx("div",{className:"grid grid-cols-1 gap-3",children:jr.map(G=>a.jsxs("div",{className:"p-4 bg-white border border-slate-100 rounded-3xl flex items-center justify-between hover:border-indigo-200 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 font-black text-lg",children:G.name.charAt(0)}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:G.name}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:G.role})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:async()=>{if(x){B(G.id);try{const oe=(x.stakeholderIds||[]).filter($e=>$e!==G.id);await Ny(x.id,{stakeholderIds:oe});const Pe={...x,stakeholderIds:oe};v(Pe),l($e=>$e.map(We=>We.id===x.id?Pe:We)),n("Stakeholder removed")}catch{s("Failed to remove stakeholder")}finally{B(null)}}},disabled:F===G.id,className:"p-2 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:F===G.id?a.jsx(ct,{className:"w-4 h-4 animate-spin text-red-500"}):a.jsx(br,{className:"w-4 h-4"})}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-indigo-600",children:a.jsx(ra,{className:"w-5 h-5"})})]})]},G.id))}):a.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[a.jsx(s0,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No stakeholders linked to this opportunity yet."})]})]}),b==="playbooks"&&a.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-left-4 duration-300",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(_s,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),a.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[a.jsx($r,{className:"w-3 h-3"})," Attach Playbook"]})]}),T?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(ct,{className:"w-5 h-5 animate-spin text-indigo-600"})}):_.length>0?a.jsx("div",{className:"space-y-3",children:_.map(G=>a.jsx(zye,{instance:G,onView:()=>j(G.id)},G.id))}):a.jsxs("div",{className:"p-12 border-2 border-dashed border-slate-100 rounded-[40px] text-center",children:[a.jsx(_s,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this deal yet."})]})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>U(x),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-[24px] transition-all group",children:a.jsx(br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>i("Lifecycle management automated through digital registry."),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(Hs,{className:"w-5 h-5"})," Confirm Strategic Deployment"]})]})]})]}),J&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Opportunity?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunity will be permanently removed from the pipeline."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(al,{className:"w-5 h-5 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:J.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:J.stage}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),a.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",J.value.toLocaleString()]})]})]})]}),wr&&a.jsxs("div",{className:"flex items-center gap-2 mt-3 pt-3 border-t border-slate-200",children:[a.jsx(hs,{src:wr.logo,fallbackText:wr.name,className:"w-6 h-6",isAvatar:!1}),a.jsx("p",{className:"text-xs font-bold text-slate-600",children:wr.name})]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>U(null),disabled:X,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Cr(J.id),disabled:X,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:X?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Opportunity"})]})]})}),ce.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:ce.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:G=>{G.stopPropagation(),He(!0)},disabled:Z,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[Z?a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>ae([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(zt,{className:"w-5 h-5"})})]})]})}),ne&&ce.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",ce.length," Opportunit",ce.length>1?"ies":"y","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The opportunities will be permanently removed from the pipeline."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(G=>ce.includes(G.id)).slice(0,5).map(G=>(c.find(oe=>oe.id===G.companyId),a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(al,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:G.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[a.jsx("span",{className:"text-[10px] text-slate-400 font-bold uppercase",children:G.stage}),a.jsx("span",{className:"w-1 h-1 rounded-full bg-slate-300"}),a.jsxs("span",{className:"text-[10px] text-indigo-600 font-black",children:["$",G.value.toLocaleString()]})]})]})]},G.id))),ce.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",ce.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>He(!1),disabled:Z,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:It,disabled:Z,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Z?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${ce.length} Opportunit${ce.length>1?"ies":"y"}`})]})]})}),ee&&a.jsxs("div",{className:"fixed inset-0 z-[140] flex",children:[a.jsx("div",{className:"flex-1 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>fe(!1)}),a.jsxs("div",{className:"w-full max-w-md bg-white shadow-2xl animate-in slide-in-from-right duration-300 overflow-y-auto",children:[a.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 p-6 flex items-center justify-between z-10",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(lE,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"font-black text-xl text-slate-900",children:"Pipeline Settings"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"Configure your pipeline stages"})]})]}),a.jsx("button",{onClick:()=>fe(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Sales Pipelines"}),a.jsx("div",{className:"space-y-2",children:de.map(G=>a.jsx("button",{onClick:()=>Sr(G.id),className:`w-full p-4 rounded-xl border-2 transition-all text-left ${xe===G.id?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-200"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:G.name}),a.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[G.stages.length," stages"]})]}),xe===G.id&&a.jsx(Yd,{className:"w-5 h-5 text-indigo-600"})]})},G.id))})]}),ue&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Stages"}),a.jsxs("span",{className:"text-xs text-slate-400 font-bold",children:[ue.stages.length," stages"]})]}),a.jsx("div",{className:"space-y-2",children:ue.stages.map((G,oe)=>a.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-100 rounded-lg flex items-center justify-center text-xs font-black text-indigo-600",children:oe+1}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-bold text-sm text-slate-900",children:G}),a.jsxs("p",{className:"text-xs text-slate-400",children:[o.filter(Pe=>Pe.stage===G).length," deals"]})]})]},G))})]}),a.jsxs("div",{className:"p-4 bg-gradient-to-br from-indigo-50 to-purple-50 rounded-xl border border-indigo-100",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(cv,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h3",{className:"font-black text-slate-900",children:"Pipeline Overview"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Deals"}),a.jsx("p",{className:"text-2xl font-black text-slate-900 mt-1",children:o.length})]}),a.jsxs("div",{className:"bg-white/60 rounded-lg p-3 border border-white/80",children:[a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase",children:"Total Value"}),a.jsxs("p",{className:"text-lg font-black text-slate-900 mt-1",children:["$",o.reduce((G,oe)=>G+(oe.value||0),0).toLocaleString()]})]})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Quick Actions"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("button",{onClick:()=>{fe(!1),me(!0)},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[a.jsx(kk,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:"Edit Pipeline"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Add or remove stages"})]}),a.jsx(ra,{className:"w-5 h-5 text-slate-300 ml-auto"})]}),a.jsxs("button",{onClick:()=>{fe(!1),Vt(),n("Pipeline refreshed")},className:"w-full p-4 bg-white border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all text-left flex items-center gap-3",children:[a.jsx(Vd,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900",children:"Refresh Data"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Reload all deals"})]}),a.jsx(ra,{className:"w-5 h-5 text-slate-300 ml-auto"})]})]})]})]})]})]}),Ue&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between",children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Pipeline Configuration"}),a.jsx("button",{onClick:()=>me(!1),className:"p-2 hover:bg-slate-100 rounded-lg",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-6 max-h-[70vh] overflow-y-auto",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Select Pipeline"}),a.jsx("div",{className:"space-y-2",children:de.map(G=>a.jsx("button",{onClick:()=>Sr(G.id),className:`w-full p-3 rounded-xl border-2 text-left ${xe===G.id?"border-indigo-500 bg-indigo-50":"border-slate-200"}`,children:a.jsx("p",{className:"font-bold",children:G.name})},G.id))})]}),ue&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Edit Stages"}),a.jsx("div",{className:"space-y-2",children:ue.stages.map((G,oe)=>a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[a.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1",children:G}),a.jsx("button",{onClick:()=>Bt(oe),disabled:Qe!==null,className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center",children:Qe===oe?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(br,{className:"w-4 h-4"})})]},oe))}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsx("input",{type:"text",placeholder:"New stage name...",value:vt,onChange:G=>ke(G.target.value),onKeyDown:G=>{G.key==="Enter"&&vt.trim()&&!qe&&Gt()},disabled:qe,className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm disabled:opacity-50 disabled:cursor-not-allowed"}),a.jsx("button",{onClick:Gt,disabled:qe||!vt.trim(),className:"px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:qe?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{children:"Adding..."})]}):"Add"})]})]}),a.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-3 block",children:"Create New Sales Pipeline"}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("input",{type:"text",placeholder:"Pipeline name...",value:Je,onChange:G=>mt(G.target.value),className:"w-full px-4 py-2 border border-slate-200 rounded-xl text-sm"}),a.jsx("button",{onClick:fr,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm",children:"Create Sales Pipeline"})]})]})]}),a.jsx("div",{className:"p-6 border-t border-slate-100 flex justify-end",children:a.jsx("button",{onClick:()=>me(!1),className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold",children:"Done"})})]})}),a.jsx(Z6,{isOpen:y,dealId:x==null?void 0:x.id,onClose:()=>N(!1),onSuccess:()=>{N(!1)}}),S&&a.jsx(kN,{instanceId:S,isOpen:!!S,onClose:()=>j(null)})]})},up={projects:e=>["projects",e],companies:["companies"],users:["users"],tasks:e=>["tasks",e],projectActivities:e=>["project-activities",e]},Hye=e=>ps({queryKey:up.projects(e||""),queryFn:async()=>(await C0()).data||[],enabled:!0,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),Wye=()=>ps({queryKey:up.companies,queryFn:async()=>(await jc()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),Vye=()=>ps({queryKey:up.users,queryFn:async()=>(await ud()).data||[],staleTime:6e4,refetchOnWindowFocus:!1}),Gye=e=>ps({queryKey:up.tasks(e||""),queryFn:async()=>e?(await wN(e)).data||[]:[],enabled:!!e,staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchInterval:3e4}),Kye=e=>ps({queryKey:up.projectActivities(e||""),queryFn:async()=>{if(!e)return[];const t=await V6("project",e);return(t==null?void 0:t.data)||[]},enabled:!!e,staleTime:1e4,refetchOnWindowFocus:!0}),Xye=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async({id:n,data:s})=>await CR(n,s),onSuccess:async(n,s)=>{t("Project updated successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"}),e.refetchQueries({queryKey:up.projectActivities(s.id),type:"active"})])},onError:n=>{console.error("Failed to update project:",n),r((n==null?void 0:n.message)||"Failed to update project")}})},Yye=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async n=>await ER(n),onSuccess:async()=>{t("Project deleted successfully"),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:n=>{console.error("Failed to delete project:",n),r((n==null?void 0:n.message)||"Failed to delete project")}})},Qye=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async({id:n,archived:s})=>await CR(n,{archived:s}),onSuccess:async(n,s)=>{t(s.archived?"Project archived successfully":"Project restored successfully"),await e.refetchQueries({queryKey:["projects"],type:"active"}),e.invalidateQueries({queryKey:up.projectActivities(s.id)})},onError:n=>{console.error("Failed to archive/restore project:",n),r((n==null?void 0:n.message)||"Failed to update project")}})},Jye=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async n=>{await Promise.all(n.map(s=>ER(s)))},onSuccess:async(n,s)=>{t(`${s.length} project(s) deleted successfully`),await Promise.all([e.refetchQueries({queryKey:["projects"],type:"active"}),e.refetchQueries({queryKey:["tasks"],type:"active"})])},onError:n=>{console.error("Failed to bulk delete projects:",n),r((n==null?void 0:n.message)||"Failed to delete projects")}})},Zye=({instance:e,onView:t})=>{var o,l,c,d;const{data:r=[]}=ob(e.id),n=((l=(o=e.templateSnapshot)==null?void 0:o.sections)==null?void 0:l.reduce((f,u)=>{var p;return f+(((p=u.steps)==null?void 0:p.length)||0)},0))||0,s=r.length,i=n>0?Math.round(s/n*100):0;return a.jsxs("div",{className:"p-5 bg-white border border-slate-200 rounded-2xl hover:border-indigo-200 transition-all",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center",children:a.jsx(_s,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-bold text-slate-900",children:((c=e.templateSnapshot)==null?void 0:c.name)||"Unknown Playbook"}),((d=e.templateSnapshot)==null?void 0:d.version)&&a.jsxs("p",{className:"text-[10px] text-slate-400 font-medium",children:["v",e.templateSnapshot.version]})]})]}),i===100&&a.jsx(Hs,{className:"w-5 h-5 text-green-500"})]}),a.jsxs("div",{className:"mb-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[a.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[s," / ",n," steps completed"]}),a.jsxs("span",{className:"text-xs font-bold text-slate-500",children:[i,"%"]})]}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:a.jsx("div",{className:`h-1.5 rounded-full transition-all ${i===100?"bg-green-500":i>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${i}%`}})})]}),a.jsxs("button",{onClick:()=>t(e.id),className:"text-xs font-semibold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Playbook",a.jsx(za,{className:"w-3 h-3"})]})]})},e2e=({onNavigate:e,onCreateProject:t,currentUser:r})=>{var qe,Ke,Qe,_t,vt;const{showSuccess:n,showError:s}=hn(),i=(r==null?void 0:r.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:o=[],isLoading:l}=Hye(i),{data:c=[]}=Wye(),{data:d=[]}=Vye(),{data:f=[]}=Gye(i),[u,p]=P.useState(null),{data:h=[],isLoading:m}=Kye((u==null?void 0:u.id)||null),[g,x]=P.useState(null),[v,b]=P.useState(!1),{data:w=[],isLoading:y}=jN({projectId:u==null?void 0:u.id}),[N,S]=P.useState("active"),j=l,_=Xye(),T=Yye(),D=Qye(),A=Jye(),C=ke=>{const Je=f.filter(ue=>ue.projectId===ke);if(Je.length===0)return 0;const mt=Je.filter(ue=>ue.status==="Done").length;return Math.round(mt/Je.length*100)},[M,F]=P.useState(null),[B,Y]=P.useState(null),[V,J]=P.useState(null),[U,X]=P.useState(null),[W,E]=P.useState([]),[R,q]=P.useState(!1),[L,H]=P.useState(!1),[se,ce]=P.useState(!1),[ae,Z]=P.useState(!1),[ve,ne]=P.useState(!1),[He,Xe]=P.useState(""),[ie,Q]=P.useState({title:"",description:"",companyId:"",status:"Planning",engagement:"",startDate:"",endDate:""}),[Ne,de]=P.useState(null),ye=async ke=>{if(o.find(mt=>mt.id===ke)){Y(ke);try{await D.mutateAsync({id:ke,archived:N==="active"}),J(null),(u==null?void 0:u.id)===ke&&p(null)}finally{Y(null)}}},xe=async ke=>{F(ke);try{await T.mutateAsync(ke),X(null),(u==null?void 0:u.id)===ke&&p(null)}finally{F(null)}},we=()=>{W.length===Ee.length?E([]):E(Ee.map(ke=>ke.id))},Ae=async()=>{q(!0);try{const ke=[...W];await A.mutateAsync(ke),E([]),H(!1),u&&ke.includes(u.id)&&p(null),n(`Successfully deleted ${ke.length} project${ke.length>1?"s":""}`)}catch(ke){s(ke.message||"Failed to delete projects")}finally{q(!1)}},Ue=ke=>{if(!ke)return"";try{const Je=new Date(ke);if(isNaN(Je.getTime()))return"";const mt=Je.getFullYear(),ue=String(Je.getMonth()+1).padStart(2,"0"),Ye=String(Je.getDate()).padStart(2,"0");return`${mt}-${ue}-${Ye}`}catch{return""}},me=ke=>{p(ke),Q({title:ke.title,description:ke.description||"",companyId:ke.companyId||"",status:ke.status,engagement:ke.engagement||"",startDate:Ue(ke.startDate),endDate:Ue(ke.endDate)}),ce(!1)},ee=async()=>{if(u){if(!ie.title.trim()){s("Project title is required");return}Z(!0);try{const ke={title:ie.title.trim(),description:ie.description.trim(),status:ie.status,companyId:ie.companyId&&ie.companyId.trim()!==""?ie.companyId:null};await _.mutateAsync({id:u.id,data:ke});const Je={...u,...ke};p(Je),ce(!1)}catch{}finally{Z(!1)}}},fe=async ke=>{if(u){Z(!0);try{await _.mutateAsync({id:u.id,data:{status:ke}});const Je={...u,status:ke};p(Je),Q(mt=>({...mt,status:ke}))}catch{}finally{Z(!1)}}},Fe=async(ke,Je)=>{de(ke);try{const mt=Je==="Done"?"Todo":"Done";await Vw(ke,{status:mt}),setTasks(bt=>bt.map(xt=>xt.id===ke?{...xt,status:mt}:xt));const ue=(r==null?void 0:r.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,Ye=await apiGetTasks(ue);setTasks(Ye.data||[]),n(mt==="Done"?"Task marked as done":"Task marked as todo")}catch(mt){s(mt.message||"Failed to update task status")}finally{de(null)}},Ee=P.useMemo(()=>o.filter(ke=>{const Je=ke.archived===!0;return N==="archived"?Je:!Je}),[o,N]);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-24 relative",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Project Workspace"}),a.jsxs("div",{className:"flex gap-4 mt-2",children:[a.jsx("button",{onClick:()=>{S("active"),E([])},className:`text-sm font-bold pb-1 transition-all ${N==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),a.jsxs("button",{onClick:()=>{S("archived"),E([])},className:`text-sm font-bold pb-1 transition-all ${N==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archived (",o.filter(ke=>ke.archived).length,")"]})]})]}),a.jsxs("button",{onClick:t,className:"px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg shadow-indigo-100",children:[a.jsx($r,{className:"w-4 h-4"})," Create Project"]})]}),!j&&Ee.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Ee.length>0&&W.length===Ee.length,onChange:we}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Projects"})]}),j?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(ct,{className:"w-10 h-10 animate-spin text-indigo-600"})}):Ee.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-24 bg-white border border-dashed border-slate-300 rounded-[40px] text-center",children:[a.jsx($2,{className:"w-16 h-16 text-slate-200 mb-6"}),a.jsxs("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:["No ",N," projects found"]}),a.jsx("p",{className:"text-slate-500 text-sm max-w-xs",children:"Start a new logistics transformation project to see milestones and tracking."})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ee.map(ke=>{const Je=c.find(Ye=>Ye.id===ke.companyId),mt=C(ke.id),ue=W.includes(ke.id);return a.jsxs("div",{onClick:Ye=>{!ke.archived&&!ue&&(Ye.stopPropagation(),me(ke))},className:`bg-white rounded-3xl border ${ue?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} overflow-hidden shadow-sm transition-all relative ${ke.archived?"opacity-70 grayscale-[0.5]":"hover:border-indigo-300 hover:shadow-md cursor-pointer active:scale-[0.98] group"}`,children:[a.jsxs("div",{className:"absolute top-5 right-5 flex items-center gap-2",children:[a.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),J(ke)},className:"p-2 bg-slate-50 hover:bg-indigo-50 text-slate-400 hover:text-indigo-600 rounded-xl transition-all",title:N==="active"?"Archive":"Restore",children:N==="active"?a.jsx(Md,{className:"w-4 h-4"}):a.jsx(U2,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),X(ke)},className:"p-2 bg-slate-50 hover:bg-red-50 text-slate-400 hover:text-red-600 rounded-xl transition-all",children:a.jsx(br,{className:"w-4 h-4"})}),a.jsx("div",{onClick:Ye=>Ye.stopPropagation(),className:`p-1.5 rounded-xl transition-all ${ue?"bg-indigo-50":"bg-slate-50 hover:bg-indigo-50/50"}`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:ue,onChange:()=>E(Ye=>ue?Ye.filter(bt=>bt!==ke.id):[...Ye,ke.id])})})]}),a.jsxs("div",{className:"p-7",children:[a.jsx("div",{className:"w-12 h-12 bg-indigo-50 rounded-2xl flex items-center justify-center text-indigo-600 mb-6 group-hover:scale-110 transition-transform",children:a.jsx(nd,{className:"w-6 h-6"})}),a.jsx("h3",{className:"font-bold text-lg text-slate-900 mb-1 group-hover:text-indigo-600 transition-colors truncate",children:ke.title}),a.jsx("p",{className:"text-sm font-medium text-slate-400 mb-8 truncate",children:(Je==null?void 0:Je.name)||"Standalone Project"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center text-[10px] font-black uppercase tracking-widest",children:[a.jsx("span",{className:"text-slate-400",children:"Implementation Progress"}),a.jsxs("span",{className:"text-indigo-600",children:[mt,"%"]})]}),a.jsx("div",{className:"w-full bg-slate-100 rounded-full h-2.5 overflow-hidden",children:a.jsx("div",{className:"bg-indigo-600 h-full transition-all duration-700",style:{width:`${mt}%`}})})]})]}),a.jsxs("div",{className:"bg-slate-50/50 px-7 py-4 border-t border-slate-100 flex justify-between items-center",children:[a.jsxs("span",{className:"text-[10px] font-black uppercase text-slate-600 tracking-wider flex items-center gap-2",children:[a.jsx(Qa,{className:"w-3.5 h-3.5"})," ",ke.status]}),!ke.archived&&a.jsx(ra,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-600 group-hover:translate-x-1 transition-all"})]})]},ke.id)})}),V&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:V.archived?a.jsx(U2,{className:"w-6 h-6"}):a.jsx(Md,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:V.archived?"Restore Project?":"Archive Project?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:V.archived?"This will restore the project to active status.":"This will move the project to archive. You can restore it later."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:V.title}),a.jsx("p",{className:"text-xs text-slate-500",children:((qe=c.find(ke=>ke.id===V.companyId))==null?void 0:qe.name)||"Standalone Project"})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>J(null),disabled:B===V.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>ye(V.id),disabled:B===V.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:B===V.id?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),V.archived?"Restoring...":"Archiving..."]}):V.archived?"Restore Project":"Archive Project"})]})]})}),U&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Project?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The project and all its tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:U.title}),a.jsx("p",{className:"text-xs text-slate-500",children:((Ke=c.find(ke=>ke.id===U.companyId))==null?void 0:Ke.name)||"Standalone Project"})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>X(null),disabled:M===U.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>xe(U.id),disabled:M===U.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M===U.id?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Project"})]})]})}),W.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:W.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:ke=>{ke.stopPropagation(),H(!0)},disabled:R,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[R?a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>E([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(zt,{className:"w-5 h-5"})})]})]})}),L&&W.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",W.length," Project",W.length>1?"s":"","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The projects and all their tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(ke=>W.includes(ke.id)).slice(0,5).map(ke=>{const Je=c.find(mt=>mt.id===ke.companyId);return a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(nd,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ke.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:(Je==null?void 0:Je.name)||"Standalone Project"})]})]},ke.id)}),W.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",W.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>H(!1),disabled:R,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Ae,disabled:R,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:R?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${W.length} Project${W.length>1?"s":""}`})]})]})}),u&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{!se&&!ae&&(p(null),ce(!1))}}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-3xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative shrink-0",children:[a.jsx("button",{onClick:()=>{!se&&!ae&&(p(null),ce(!1))},className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",disabled:ae,children:a.jsx(zt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6 pr-12",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-[24px] flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(nd,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[se?a.jsxs("div",{children:[a.jsx("input",{type:"text",value:ie.title,onChange:ke=>Q(Je=>({...Je,title:ke.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Project name",required:!0}),a.jsxs("p",{className:"text-[9px] text-slate-400 mt-1 px-1",children:[a.jsx("span",{className:"text-red-500",children:"*"})," Required field"]})]}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:u.title}),a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${u.status==="Planning"?"bg-blue-50 text-blue-600 border-blue-200":u.status==="Active"?"bg-emerald-50 text-emerald-600 border-emerald-200":u.status==="On Hold"?"bg-amber-50 text-amber-600 border-amber-200":"bg-slate-50 text-slate-600 border-slate-200"}`,children:u.status}),a.jsx("span",{className:"text-xs text-slate-400",children:((Qe=c.find(ke=>ke.id===u.companyId))==null?void 0:Qe.name)||"Standalone Project"})]})]})]}),a.jsx("div",{className:"flex gap-3",children:se?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{ce(!1),Q({title:u.title,description:u.description||"",companyId:u.companyId||"",status:u.status,engagement:u.engagement||"",startDate:Ue(u.startDate),endDate:Ue(u.endDate)})},disabled:ae,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:ee,disabled:ae||!ie.title.trim()||!ie.engagement.trim()||!ie.startDate.trim()||!ie.endDate.trim(),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:ae?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>ce(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Eo,{className:"w-4 h-4"}),"Edit Project"]})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Xa,{className:"w-4 h-4 text-indigo-500"})," Project Details"]}),a.jsx("div",{className:"space-y-4",children:se?a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Engagement ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:ie.engagement,onChange:ke=>Q(Je=>({...Je,engagement:ke.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"e.g., Consulting, Implementation, Support",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["Start Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:ie.startDate,onChange:ke=>{if(Q(Je=>({...Je,startDate:ke.target.value})),ke.target.value&&ie.endDate){const Je=new Date(ke.target.value),mt=new Date(ie.endDate);!isNaN(Je.getTime())&&!isNaN(mt.getTime())&&Je>=mt}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:["End Date ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"date",value:ie.endDate,onChange:ke=>{if(Q(Je=>({...Je,endDate:ke.target.value})),ie.startDate&&ke.target.value){const Je=new Date(ie.startDate),mt=new Date(ke.target.value);!isNaN(Je.getTime())&&!isNaN(mt.getTime())&&Je>=mt}},className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),a.jsx("textarea",{value:ie.description,onChange:ke=>Q(Je=>({...Je,description:ke.target.value})),rows:4,className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-100 resize-none",placeholder:"Project description..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company"}),a.jsxs("select",{value:ie.companyId,onChange:ke=>Q(Je=>({...Je,companyId:ke.target.value})),className:"w-full px-4 py-3 bg-slate-50 border-2 border-indigo-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-100",children:[a.jsx("option",{value:"",children:"Standalone Project"}),c.map(ke=>a.jsx("option",{value:ke.id,children:ke.name},ke.id))]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Name"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:u.title})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Engagement"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:u.engagement||""})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Start Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:u.startDate?new Date(u.startDate).toLocaleDateString():""})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"End Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:u.endDate?new Date(u.endDate).toLocaleDateString():""})]})]}),u.description&&a.jsx("div",{className:"p-6 bg-slate-50 border border-slate-200 rounded-2xl",children:a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed",children:u.description})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Company"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((_t=c.find(ke=>ke.id===u.companyId))==null?void 0:_t.name)||"Standalone Project"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-xl",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Progress"}),a.jsxs("p",{className:"text-sm font-bold text-slate-900",children:[C(u.id),"%"]})]})]}),u.noteImage&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Dn,{className:"w-4 h-4 text-indigo-500"})," Attached File"]}),(vt=u.noteImageMimeType)!=null&&vt.includes("pdf")?a.jsx("div",{className:"p-5 bg-white border-2 border-slate-200 rounded-2xl hover:border-indigo-300 transition-all group",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-red-50 flex items-center justify-center text-red-600 shrink-0",children:a.jsx(Dn,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:u.noteImageName||"Document.pdf"}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:"PDF Document"})]}),a.jsxs("button",{onClick:()=>{const ke=window.open();ke&&ke.document.write(`
                                        <html>
                                          <head>
                                            <title>${u.noteImageName||"Document.pdf"}</title>
                                            <style>
                                              body { margin: 0; padding: 0; }
                                              embed { width: 100vw; height: 100vh; }
                                            </style>
                                          </head>
                                          <body>
                                            <embed src="${u.noteImage}" type="application/pdf" width="100%" height="100%" />
                                          </body>
                                        </html>
                                      `)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2 opacity-0 group-hover:opacity-100",children:[a.jsx(Wd,{className:"w-4 h-4"}),"View PDF"]})]})}):a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:u.noteImage,alt:u.noteImageName||"Attachment",className:"w-full max-h-80 object-contain rounded-2xl border-2 border-slate-200 cursor-pointer hover:border-indigo-300 transition-all",onClick:()=>{Xe(u.noteImage||""),ne(!0)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-2xl transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-sm px-4 py-2 rounded-xl shadow-lg",children:a.jsx(Wd,{className:"w-5 h-5 text-indigo-600"})})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(_s,{className:"w-4 h-4 text-indigo-500"})," Playbooks"]}),a.jsxs("button",{onClick:()=>b(!0),className:"flex items-center gap-1.5 text-[10px] font-black text-indigo-600 uppercase tracking-widest bg-indigo-50 px-3 py-1.5 rounded-xl hover:bg-indigo-100",children:[a.jsx($r,{className:"w-3 h-3"})," Attach"]})]}),y?a.jsx("div",{className:"flex items-center justify-center py-8",children:a.jsx(ct,{className:"w-5 h-5 animate-spin text-indigo-600"})}):w.length>0?a.jsx("div",{className:"space-y-3",children:w.map(ke=>a.jsx(Zye,{instance:ke,onView:Je=>x(Je)},ke.id))}):a.jsxs("div",{className:"p-8 border-2 border-dashed border-slate-100 rounded-2xl text-center",children:[a.jsx(_s,{className:"w-10 h-10 text-slate-200 mx-auto mb-3"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium",children:"No playbooks attached to this project yet."})]})]})]})})]}),!se&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Qa,{className:"w-4 h-4 text-indigo-500"})," Change Status"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["Planning","Active","On Hold","Completed"].map(ke=>a.jsxs("button",{onClick:()=>fe(ke),disabled:ae||u.status===ke,className:`flex items-center gap-2 p-4 rounded-xl border text-[10px] font-black uppercase tracking-widest transition-all ${u.status===ke?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400 disabled:opacity-50 disabled:cursor-not-allowed"}`,children:[u.status===ke?a.jsx(Qr,{className:"w-4 h-4"}):a.jsx(Hd,{className:"w-4 h-4"}),ke]},ke))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(O5,{className:"w-4 h-4 text-indigo-500"})," Related Tasks"]}),a.jsxs("button",{onClick:()=>{sessionStorage.setItem("selectedProjectId",u.id),e("tasks"),p(null)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View All Tasks",a.jsx(ra,{className:"w-3 h-3"})]})]}),(()=>{const ke=f.filter(Je=>Je.projectId===u.id);return ke.length===0?a.jsxs("div",{className:"p-8 bg-slate-50 border border-dashed border-slate-200 rounded-2xl text-center",children:[a.jsx($2,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold",children:"No tasks found for this project"})]}):a.jsx("div",{className:"space-y-2",children:ke.map(Je=>{const mt=d.find(Ye=>Ye.id===Je.assigneeId),ue=Ne===Je.id;return a.jsx("div",{className:"p-4 bg-white border border-slate-200 rounded-xl hover:border-indigo-300 hover:shadow-sm transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),ue||Fe(Je.id,Je.status)},disabled:ue,className:"disabled:opacity-50 disabled:cursor-not-allowed",children:ue?a.jsx(ct,{className:"w-4 h-4 text-indigo-500 animate-spin"}):Je.status==="Done"?a.jsx(Qr,{className:"w-4 h-4 text-emerald-500 hover:text-emerald-600 transition-colors"}):a.jsx(Hd,{className:"w-4 h-4 text-slate-300 hover:text-indigo-500 transition-colors cursor-pointer"})}),a.jsx("p",{className:`text-sm font-bold ${Je.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Je.title})]}),Je.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-1 ml-6",children:Je.description}),a.jsxs("div",{className:"flex items-center gap-3 mt-2 ml-6",children:[a.jsx("span",{className:`px-2 py-0.5 rounded-full text-[9px] font-black uppercase ${Je.priority==="High"?"bg-red-50 text-red-600":Je.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Je.priority}),a.jsx("span",{className:"text-[9px] text-slate-400 font-bold uppercase",children:Je.status}),Je.dueDate&&a.jsxs("span",{className:"text-[9px] text-slate-400 font-bold flex items-center gap-1",children:[a.jsx(Ln,{className:"w-3 h-3"}),Je.dueDate]})]})]}),mt&&a.jsx("div",{className:"flex items-center gap-2",children:a.jsx("div",{className:"w-8 h-8 bg-indigo-50 rounded-lg flex items-center justify-center text-indigo-600 text-xs font-black",children:mt.name.charAt(0)})})]})},Je.id)})})})()]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Cu,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),m?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(ct,{className:"w-6 h-6 animate-spin text-indigo-600"})}):h.length===0?a.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[a.jsx(ba,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this project"})]}):a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:h.map((ke,Je)=>{const mt=new Date(ke.createdAt),Ye=new Date().getTime()-mt.getTime(),bt=Math.floor(Ye/(1e3*60*60*24));let xt="";bt===0?xt="Today":bt===1?xt="Yesterday":bt<7?xt=`${bt} days ago`:bt<30?xt=`${Math.floor(bt/7)} week${Math.floor(bt/7)>1?"s":""} ago`:xt=`${Math.floor(bt/30)} month${Math.floor(bt/30)>1?"s":""} ago`;const Vt=ke.activityType==="email_linked",gr=Vt?"border-indigo-600":"border-slate-200",qt=Vt?"bg-indigo-600":"bg-slate-300",Gt=Vt?"text-indigo-600":"text-slate-400";return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${gr} shadow-xl flex items-center justify-center`,children:Vt?a.jsx(ba,{className:"w-4 h-4 text-indigo-600"}):a.jsx("div",{className:`w-2 h-2 rounded-full ${qt}`})}),a.jsxs("p",{className:`text-[10px] font-black ${Gt} uppercase mb-1 tracking-widest`,children:[Vt?"Email Linked":ke.activityType||"Activity","  ",xt]}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:ke.title||"Email Activity"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:ke.description||ke.title}),ke.emailId&&a.jsxs("button",{onClick:()=>{e("inbox"),setTimeout(()=>{window.location.hash=`email=${ke.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(za,{className:"w-3 h-3"})," View Email"]})]},ke.id||Je)})})]})]}),a.jsx("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:a.jsxs("button",{onClick:()=>{!se&&!ae&&(p(null),ce(!1))},className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",disabled:ae,children:[a.jsx(Qr,{className:"w-5 h-5"})," Close"]})})]})]}),ve&&a.jsxs("div",{className:"fixed inset-0 z-[150] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/95 backdrop-blur-md animate-in fade-in duration-300",onClick:()=>ne(!1)}),a.jsxs("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:[a.jsx("button",{onClick:()=>ne(!1),className:"absolute top-6 right-6 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-all z-10 backdrop-blur-sm",children:a.jsx(zt,{className:"w-6 h-6"})}),a.jsx("div",{className:"relative max-w-7xl max-h-[90vh] animate-in zoom-in-95 duration-300",children:a.jsx("img",{src:He,alt:"Full size",className:"max-w-full max-h-[90vh] object-contain rounded-2xl shadow-2xl",onClick:ke=>ke.stopPropagation()})})]})]}),a.jsx(Z6,{isOpen:v,projectId:u==null?void 0:u.id,onClose:()=>b(!1),onSuccess:()=>{b(!1)}}),g&&a.jsx(kN,{instanceId:g,isOpen:!!g,onClose:()=>x(null)})]})};var fB={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(e,t){(function(n,s){e.exports=s()})(typeof self<"u"?self:Pl,function(){return function(r){var n={};function s(i){if(n[i])return n[i].exports;var o=n[i]={i,l:!1,exports:{}};return r[i].call(o.exports,o,o.exports,s),o.l=!0,o.exports}return s.m=r,s.c=n,s.d=function(i,o,l){s.o(i,o)||Object.defineProperty(i,o,{configurable:!1,enumerable:!0,get:l})},s.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return s.d(o,"a",o),o},s.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},s.p="",s(s.s=109)}([function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(17),o=s(18),l=s(19),c=s(45),d=s(46),f=s(47),u=s(48),p=s(49),h=s(12),m=s(32),g=s(33),x=s(31),v=s(1),b={Scope:v.Scope,create:v.create,find:v.find,query:v.query,register:v.register,Container:i.default,Format:o.default,Leaf:l.default,Embed:u.default,Scroll:c.default,Block:f.default,Inline:d.default,Text:p.default,Attributor:{Attribute:h.default,Class:m.default,Style:g.default,Store:x.default}};n.default=b},function(r,n,s){var i=this&&this.__extends||function(){var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(v,b){v.__proto__=b}||function(v,b){for(var w in b)b.hasOwnProperty(w)&&(v[w]=b[w])};return function(v,b){x(v,b);function w(){this.constructor=v}v.prototype=b===null?Object.create(b):(w.prototype=b.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=function(x){i(v,x);function v(b){var w=this;return b="[Parchment] "+b,w=x.call(this,b)||this,w.message=b,w.name=w.constructor.name,w}return v}(Error);n.ParchmentError=o;var l={},c={},d={},f={};n.DATA_KEY="__blot";var u;(function(x){x[x.TYPE=3]="TYPE",x[x.LEVEL=12]="LEVEL",x[x.ATTRIBUTE=13]="ATTRIBUTE",x[x.BLOT=14]="BLOT",x[x.INLINE=7]="INLINE",x[x.BLOCK=11]="BLOCK",x[x.BLOCK_BLOT=10]="BLOCK_BLOT",x[x.INLINE_BLOT=6]="INLINE_BLOT",x[x.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",x[x.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",x[x.ANY=15]="ANY"})(u=n.Scope||(n.Scope={}));function p(x,v){var b=m(x);if(b==null)throw new o("Unable to create "+x+" blot");var w=b,y=x instanceof Node||x.nodeType===Node.TEXT_NODE?x:w.create(v);return new w(y,v)}n.create=p;function h(x,v){return v===void 0&&(v=!1),x==null?null:x[n.DATA_KEY]!=null?x[n.DATA_KEY].blot:v?h(x.parentNode,v):null}n.find=h;function m(x,v){v===void 0&&(v=u.ANY);var b;if(typeof x=="string")b=f[x]||l[x];else if(x instanceof Text||x.nodeType===Node.TEXT_NODE)b=f.text;else if(typeof x=="number")x&u.LEVEL&u.BLOCK?b=f.block:x&u.LEVEL&u.INLINE&&(b=f.inline);else if(x instanceof HTMLElement){var w=(x.getAttribute("class")||"").split(/\s+/);for(var y in w)if(b=c[w[y]],b)break;b=b||d[x.tagName]}return b==null?null:v&u.LEVEL&b.scope&&v&u.TYPE&b.scope?b:null}n.query=m;function g(){for(var x=[],v=0;v<arguments.length;v++)x[v]=arguments[v];if(x.length>1)return x.map(function(y){return g(y)});var b=x[0];if(typeof b.blotName!="string"&&typeof b.attrName!="string")throw new o("Invalid definition");if(b.blotName==="abstract")throw new o("Cannot register abstract class");if(f[b.blotName||b.attrName]=b,typeof b.keyName=="string")l[b.keyName]=b;else if(b.className!=null&&(c[b.className]=b),b.tagName!=null){Array.isArray(b.tagName)?b.tagName=b.tagName.map(function(y){return y.toUpperCase()}):b.tagName=b.tagName.toUpperCase();var w=Array.isArray(b.tagName)?b.tagName:[b.tagName];w.forEach(function(y){(d[y]==null||b.className==null)&&(d[y]=b)})}return b}n.register=g},function(r,n,s){var i=s(51),o=s(11),l=s(3),c=s(20),d="\0",f=function(u){Array.isArray(u)?this.ops=u:u!=null&&Array.isArray(u.ops)?this.ops=u.ops:this.ops=[]};f.prototype.insert=function(u,p){var h={};return u.length===0?this:(h.insert=u,p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(h.attributes=p),this.push(h))},f.prototype.delete=function(u){return u<=0?this:this.push({delete:u})},f.prototype.retain=function(u,p){if(u<=0)return this;var h={retain:u};return p!=null&&typeof p=="object"&&Object.keys(p).length>0&&(h.attributes=p),this.push(h)},f.prototype.push=function(u){var p=this.ops.length,h=this.ops[p-1];if(u=l(!0,{},u),typeof h=="object"){if(typeof u.delete=="number"&&typeof h.delete=="number")return this.ops[p-1]={delete:h.delete+u.delete},this;if(typeof h.delete=="number"&&u.insert!=null&&(p-=1,h=this.ops[p-1],typeof h!="object"))return this.ops.unshift(u),this;if(o(u.attributes,h.attributes)){if(typeof u.insert=="string"&&typeof h.insert=="string")return this.ops[p-1]={insert:h.insert+u.insert},typeof u.attributes=="object"&&(this.ops[p-1].attributes=u.attributes),this;if(typeof u.retain=="number"&&typeof h.retain=="number")return this.ops[p-1]={retain:h.retain+u.retain},typeof u.attributes=="object"&&(this.ops[p-1].attributes=u.attributes),this}}return p===this.ops.length?this.ops.push(u):this.ops.splice(p,0,u),this},f.prototype.chop=function(){var u=this.ops[this.ops.length-1];return u&&u.retain&&!u.attributes&&this.ops.pop(),this},f.prototype.filter=function(u){return this.ops.filter(u)},f.prototype.forEach=function(u){this.ops.forEach(u)},f.prototype.map=function(u){return this.ops.map(u)},f.prototype.partition=function(u){var p=[],h=[];return this.forEach(function(m){var g=u(m)?p:h;g.push(m)}),[p,h]},f.prototype.reduce=function(u,p){return this.ops.reduce(u,p)},f.prototype.changeLength=function(){return this.reduce(function(u,p){return p.insert?u+c.length(p):p.delete?u-p.delete:u},0)},f.prototype.length=function(){return this.reduce(function(u,p){return u+c.length(p)},0)},f.prototype.slice=function(u,p){u=u||0,typeof p!="number"&&(p=1/0);for(var h=[],m=c.iterator(this.ops),g=0;g<p&&m.hasNext();){var x;g<u?x=m.next(u-g):(x=m.next(p-g),h.push(x)),g+=c.length(x)}return new f(h)},f.prototype.compose=function(u){var p=c.iterator(this.ops),h=c.iterator(u.ops),m=[],g=h.peek();if(g!=null&&typeof g.retain=="number"&&g.attributes==null){for(var x=g.retain;p.peekType()==="insert"&&p.peekLength()<=x;)x-=p.peekLength(),m.push(p.next());g.retain-x>0&&h.next(g.retain-x)}for(var v=new f(m);p.hasNext()||h.hasNext();)if(h.peekType()==="insert")v.push(h.next());else if(p.peekType()==="delete")v.push(p.next());else{var b=Math.min(p.peekLength(),h.peekLength()),w=p.next(b),y=h.next(b);if(typeof y.retain=="number"){var N={};typeof w.retain=="number"?N.retain=b:N.insert=w.insert;var S=c.attributes.compose(w.attributes,y.attributes,typeof w.retain=="number");if(S&&(N.attributes=S),v.push(N),!h.hasNext()&&o(v.ops[v.ops.length-1],N)){var j=new f(p.rest());return v.concat(j).chop()}}else typeof y.delete=="number"&&typeof w.retain=="number"&&v.push(y)}return v.chop()},f.prototype.concat=function(u){var p=new f(this.ops.slice());return u.ops.length>0&&(p.push(u.ops[0]),p.ops=p.ops.concat(u.ops.slice(1))),p},f.prototype.diff=function(u,p){if(this.ops===u.ops)return new f;var h=[this,u].map(function(b){return b.map(function(w){if(w.insert!=null)return typeof w.insert=="string"?w.insert:d;var y=b===u?"on":"with";throw new Error("diff() called "+y+" non-document")}).join("")}),m=new f,g=i(h[0],h[1],p),x=c.iterator(this.ops),v=c.iterator(u.ops);return g.forEach(function(b){for(var w=b[1].length;w>0;){var y=0;switch(b[0]){case i.INSERT:y=Math.min(v.peekLength(),w),m.push(v.next(y));break;case i.DELETE:y=Math.min(w,x.peekLength()),x.next(y),m.delete(y);break;case i.EQUAL:y=Math.min(x.peekLength(),v.peekLength(),w);var N=x.next(y),S=v.next(y);o(N.insert,S.insert)?m.retain(y,c.attributes.diff(N.attributes,S.attributes)):m.push(S).delete(y);break}w-=y}}),m.chop()},f.prototype.eachLine=function(u,p){p=p||`
`;for(var h=c.iterator(this.ops),m=new f,g=0;h.hasNext();){if(h.peekType()!=="insert")return;var x=h.peek(),v=c.length(x)-h.peekLength(),b=typeof x.insert=="string"?x.insert.indexOf(p,v)-v:-1;if(b<0)m.push(h.next());else if(b>0)m.push(h.next(b));else{if(u(m,h.next(1).attributes||{},g)===!1)return;g+=1,m=new f}}m.length()>0&&u(m,{},g)},f.prototype.transform=function(u,p){if(p=!!p,typeof u=="number")return this.transformPosition(u,p);for(var h=c.iterator(this.ops),m=c.iterator(u.ops),g=new f;h.hasNext()||m.hasNext();)if(h.peekType()==="insert"&&(p||m.peekType()!=="insert"))g.retain(c.length(h.next()));else if(m.peekType()==="insert")g.push(m.next());else{var x=Math.min(h.peekLength(),m.peekLength()),v=h.next(x),b=m.next(x);if(v.delete)continue;b.delete?g.push(b):g.retain(x,c.attributes.transform(v.attributes,b.attributes,p))}return g.chop()},f.prototype.transformPosition=function(u,p){p=!!p;for(var h=c.iterator(this.ops),m=0;h.hasNext()&&m<=u;){var g=h.peekLength(),x=h.peekType();if(h.next(),x==="delete"){u-=Math.min(g,u-m);continue}else x==="insert"&&(m<u||!p)&&(u+=g);m+=g}return u},r.exports=f},function(r,n){var s=Object.prototype.hasOwnProperty,i=Object.prototype.toString,o=Object.defineProperty,l=Object.getOwnPropertyDescriptor,c=function(h){return typeof Array.isArray=="function"?Array.isArray(h):i.call(h)==="[object Array]"},d=function(h){if(!h||i.call(h)!=="[object Object]")return!1;var m=s.call(h,"constructor"),g=h.constructor&&h.constructor.prototype&&s.call(h.constructor.prototype,"isPrototypeOf");if(h.constructor&&!m&&!g)return!1;var x;for(x in h);return typeof x>"u"||s.call(h,x)},f=function(h,m){o&&m.name==="__proto__"?o(h,m.name,{enumerable:!0,configurable:!0,value:m.newValue,writable:!0}):h[m.name]=m.newValue},u=function(h,m){if(m==="__proto__")if(s.call(h,m)){if(l)return l(h,m).value}else return;return h[m]};r.exports=function p(){var h,m,g,x,v,b,w=arguments[0],y=1,N=arguments.length,S=!1;for(typeof w=="boolean"&&(S=w,w=arguments[1]||{},y=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});y<N;++y)if(h=arguments[y],h!=null)for(m in h)g=u(w,m),x=u(h,m),w!==x&&(S&&x&&(d(x)||(v=c(x)))?(v?(v=!1,b=g&&c(g)?g:[]):b=g&&d(g)?g:{},f(w,{name:m,newValue:p(S,b,x)})):typeof x<"u"&&f(w,{name:m,newValue:x}));return w}},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var i=function(){function A(C,M){for(var F=0;F<M.length;F++){var B=M[F];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(C,B.key,B)}}return function(C,M,F){return M&&A(C.prototype,M),F&&A(C,F),C}}(),o=function A(C,M,F){C===null&&(C=Function.prototype);var B=Object.getOwnPropertyDescriptor(C,M);if(B===void 0){var Y=Object.getPrototypeOf(C);return Y===null?void 0:A(Y,M,F)}else{if("value"in B)return B.value;var V=B.get;return V===void 0?void 0:V.call(F)}},l=s(3),c=w(l),d=s(2),f=w(d),u=s(0),p=w(u),h=s(16),m=w(h),g=s(6),x=w(g),v=s(7),b=w(v);function w(A){return A&&A.__esModule?A:{default:A}}function y(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function N(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function S(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var j=1,_=function(A){S(C,A);function C(){return y(this,C),N(this,(C.__proto__||Object.getPrototypeOf(C)).apply(this,arguments))}return i(C,[{key:"attach",value:function(){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"attach",this).call(this),this.attributes=new p.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new f.default().insert(this.value(),(0,c.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(F,B){var Y=p.default.query(F,p.default.Scope.BLOCK_ATTRIBUTE);Y!=null&&this.attributes.attribute(Y,B)}},{key:"formatAt",value:function(F,B,Y,V){this.format(Y,V)}},{key:"insertAt",value:function(F,B,Y){if(typeof B=="string"&&B.endsWith(`
`)){var V=p.default.create(T.blotName);this.parent.insertBefore(V,F===0?this:this.next),V.insertAt(0,B.slice(0,-1))}else o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,F,B,Y)}}]),C}(p.default.Embed);_.scope=p.default.Scope.BLOCK_BLOT;var T=function(A){S(C,A);function C(M){y(this,C);var F=N(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,M));return F.cache={},F}return i(C,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(p.default.Leaf).reduce(function(F,B){return B.length()===0?F:F.insert(B.value(),D(B))},new f.default).insert(`
`,D(this))),this.cache.delta}},{key:"deleteAt",value:function(F,B){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"deleteAt",this).call(this,F,B),this.cache={}}},{key:"formatAt",value:function(F,B,Y,V){B<=0||(p.default.query(Y,p.default.Scope.BLOCK)?F+B===this.length()&&this.format(Y,V):o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"formatAt",this).call(this,F,Math.min(B,this.length()-F-1),Y,V),this.cache={})}},{key:"insertAt",value:function(F,B,Y){if(Y!=null)return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,F,B,Y);if(B.length!==0){var V=B.split(`
`),J=V.shift();J.length>0&&(F<this.length()-1||this.children.tail==null?o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertAt",this).call(this,Math.min(F,this.length()-1),J):this.children.tail.insertAt(this.children.tail.length(),J),this.cache={});var U=this;V.reduce(function(X,W){return U=U.split(X,!0),U.insertAt(0,W),W.length},F+J.length)}}},{key:"insertBefore",value:function(F,B){var Y=this.children.head;o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"insertBefore",this).call(this,F,B),Y instanceof m.default&&Y.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"length",this).call(this)+j),this.cache.length}},{key:"moveChildren",value:function(F,B){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"moveChildren",this).call(this,F,B),this.cache={}}},{key:"optimize",value:function(F){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"optimize",this).call(this,F),this.cache={}}},{key:"path",value:function(F){return o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"path",this).call(this,F,!0)}},{key:"removeChild",value:function(F){o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"removeChild",this).call(this,F),this.cache={}}},{key:"split",value:function(F){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(B&&(F===0||F>=this.length()-j)){var Y=this.clone();return F===0?(this.parent.insertBefore(Y,this),this):(this.parent.insertBefore(Y,this.next),Y)}else{var V=o(C.prototype.__proto__||Object.getPrototypeOf(C.prototype),"split",this).call(this,F,B);return this.cache={},V}}}]),C}(p.default.Block);T.blotName="block",T.tagName="P",T.defaultChild="break",T.allowedChildren=[x.default,p.default.Embed,b.default];function D(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return A==null||(typeof A.formats=="function"&&(C=(0,c.default)(C,A.formats())),A.parent==null||A.parent.blotName=="scroll"||A.parent.statics.scope!==A.statics.scope)?C:D(A.parent,C)}n.bubbleFormats=D,n.BlockEmbed=_,n.default=T},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(X,W){var E=[],R=!0,q=!1,L=void 0;try{for(var H=X[Symbol.iterator](),se;!(R=(se=H.next()).done)&&(E.push(se.value),!(W&&E.length===W));R=!0);}catch(ce){q=!0,L=ce}finally{try{!R&&H.return&&H.return()}finally{if(q)throw L}}return E}return function(X,W){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return U(X,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function U(X,W){for(var E=0;E<W.length;E++){var R=W[E];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(X,R.key,R)}}return function(X,W,E){return W&&U(X.prototype,W),E&&U(X,E),X}}();s(50);var c=s(2),d=D(c),f=s(14),u=D(f),p=s(8),h=D(p),m=s(9),g=D(m),x=s(0),v=D(x),b=s(15),w=D(b),y=s(3),N=D(y),S=s(10),j=D(S),_=s(34),T=D(_);function D(U){return U&&U.__esModule?U:{default:U}}function A(U,X,W){return X in U?Object.defineProperty(U,X,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[X]=W,U}function C(U,X){if(!(U instanceof X))throw new TypeError("Cannot call a class as a function")}var M=(0,j.default)("quill"),F=function(){l(U,null,[{key:"debug",value:function(W){W===!0&&(W="log"),j.default.level(W)}},{key:"find",value:function(W){return W.__quill||v.default.find(W)}},{key:"import",value:function(W){return this.imports[W]==null&&M.error("Cannot import "+W+". Are you sure it was registered?"),this.imports[W]}},{key:"register",value:function(W,E){var R=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof W!="string"){var L=W.attrName||W.blotName;typeof L=="string"?this.register("formats/"+L,W,E):Object.keys(W).forEach(function(H){R.register(H,W[H],E)})}else this.imports[W]!=null&&!q&&M.warn("Overwriting "+W+" with",E),this.imports[W]=E,(W.startsWith("blots/")||W.startsWith("formats/"))&&E.blotName!=="abstract"?v.default.register(E):W.startsWith("modules")&&typeof E.register=="function"&&E.register()}}]);function U(X){var W=this,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(C(this,U),this.options=B(X,E),this.container=this.options.container,this.container==null)return M.error("Invalid Quill container",X);this.options.debug&&U.debug(this.options.debug);var R=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new h.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new u.default(this.scroll),this.selection=new w.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(h.default.events.EDITOR_CHANGE,function(L){L===h.default.events.TEXT_CHANGE&&W.root.classList.toggle("ql-blank",W.editor.isBlank())}),this.emitter.on(h.default.events.SCROLL_UPDATE,function(L,H){var se=W.selection.lastRange,ce=se&&se.length===0?se.index:void 0;Y.call(W,function(){return W.editor.update(null,H,ce)},L)});var q=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+R+"<p><br></p></div>");this.setContents(q),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return l(U,[{key:"addContainer",value:function(W){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof W=="string"){var R=W;W=document.createElement("div"),W.classList.add(R)}return this.container.insertBefore(W,E),W}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(W,E,R){var q=this,L=V(W,E,R),H=o(L,4);return W=H[0],E=H[1],R=H[3],Y.call(this,function(){return q.editor.deleteText(W,E)},R,W,-1*E)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(W),this.container.classList.toggle("ql-disabled",!W)}},{key:"focus",value:function(){var W=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=W,this.scrollIntoView()}},{key:"format",value:function(W,E){var R=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:h.default.sources.API;return Y.call(this,function(){var L=R.getSelection(!0),H=new d.default;if(L==null)return H;if(v.default.query(W,v.default.Scope.BLOCK))H=R.editor.formatLine(L.index,L.length,A({},W,E));else{if(L.length===0)return R.selection.format(W,E),H;H=R.editor.formatText(L.index,L.length,A({},W,E))}return R.setSelection(L,h.default.sources.SILENT),H},q)}},{key:"formatLine",value:function(W,E,R,q,L){var H=this,se=void 0,ce=V(W,E,R,q,L),ae=o(ce,4);return W=ae[0],E=ae[1],se=ae[2],L=ae[3],Y.call(this,function(){return H.editor.formatLine(W,E,se)},L,W,0)}},{key:"formatText",value:function(W,E,R,q,L){var H=this,se=void 0,ce=V(W,E,R,q,L),ae=o(ce,4);return W=ae[0],E=ae[1],se=ae[2],L=ae[3],Y.call(this,function(){return H.editor.formatText(W,E,se)},L,W,0)}},{key:"getBounds",value:function(W){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=void 0;typeof W=="number"?R=this.selection.getBounds(W,E):R=this.selection.getBounds(W.index,W.length);var q=this.container.getBoundingClientRect();return{bottom:R.bottom-q.top,height:R.height,left:R.left-q.left,right:R.right-q.left,top:R.top-q.top,width:R.width}}},{key:"getContents",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,R=V(W,E),q=o(R,2);return W=q[0],E=q[1],this.editor.getContents(W,E)}},{key:"getFormat",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof W=="number"?this.editor.getFormat(W,E):this.editor.getFormat(W.index,W.length)}},{key:"getIndex",value:function(W){return W.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(W){return this.scroll.leaf(W)}},{key:"getLine",value:function(W){return this.scroll.line(W)}},{key:"getLines",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof W!="number"?this.scroll.lines(W.index,W.length):this.scroll.lines(W,E)}},{key:"getModule",value:function(W){return this.theme.modules[W]}},{key:"getSelection",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return W&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-W,R=V(W,E),q=o(R,2);return W=q[0],E=q[1],this.editor.getText(W,E)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(W,E,R){var q=this,L=arguments.length>3&&arguments[3]!==void 0?arguments[3]:U.sources.API;return Y.call(this,function(){return q.editor.insertEmbed(W,E,R)},L,W)}},{key:"insertText",value:function(W,E,R,q,L){var H=this,se=void 0,ce=V(W,0,R,q,L),ae=o(ce,4);return W=ae[0],se=ae[2],L=ae[3],Y.call(this,function(){return H.editor.insertText(W,E,se)},L,W,E.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(W,E,R){this.clipboard.dangerouslyPasteHTML(W,E,R)}},{key:"removeFormat",value:function(W,E,R){var q=this,L=V(W,E,R),H=o(L,4);return W=H[0],E=H[1],R=H[3],Y.call(this,function(){return q.editor.removeFormat(W,E)},R,W)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(W){var E=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API;return Y.call(this,function(){W=new d.default(W);var q=E.getLength(),L=E.editor.deleteText(0,q),H=E.editor.applyDelta(W),se=H.ops[H.ops.length-1];se!=null&&typeof se.insert=="string"&&se.insert[se.insert.length-1]===`
`&&(E.editor.deleteText(E.getLength()-1,1),H.delete(1));var ce=L.compose(H);return ce},R)}},{key:"setSelection",value:function(W,E,R){if(W==null)this.selection.setRange(null,E||U.sources.API);else{var q=V(W,E,R),L=o(q,4);W=L[0],E=L[1],R=L[3],this.selection.setRange(new b.Range(W,E),R),R!==h.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(W){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API,R=new d.default().insert(W);return this.setContents(R,E)}},{key:"update",value:function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:h.default.sources.USER,E=this.scroll.update(W);return this.selection.update(W),E}},{key:"updateContents",value:function(W){var E=this,R=arguments.length>1&&arguments[1]!==void 0?arguments[1]:h.default.sources.API;return Y.call(this,function(){return W=new d.default(W),E.editor.applyDelta(W,R)},R,!0)}}]),U}();F.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},F.events=h.default.events,F.sources=h.default.sources,F.version="1.3.7",F.imports={delta:d.default,parchment:v.default,"core/module":g.default,"core/theme":T.default};function B(U,X){if(X=(0,N.default)(!0,{container:U,modules:{clipboard:!0,keyboard:!0,history:!0}},X),!X.theme||X.theme===F.DEFAULTS.theme)X.theme=T.default;else if(X.theme=F.import("themes/"+X.theme),X.theme==null)throw new Error("Invalid theme "+X.theme+". Did you register it?");var W=(0,N.default)(!0,{},X.theme.DEFAULTS);[W,X].forEach(function(q){q.modules=q.modules||{},Object.keys(q.modules).forEach(function(L){q.modules[L]===!0&&(q.modules[L]={})})});var E=Object.keys(W.modules).concat(Object.keys(X.modules)),R=E.reduce(function(q,L){var H=F.import("modules/"+L);return H==null?M.error("Cannot load "+L+" module. Are you sure you registered it?"):q[L]=H.DEFAULTS||{},q},{});return X.modules!=null&&X.modules.toolbar&&X.modules.toolbar.constructor!==Object&&(X.modules.toolbar={container:X.modules.toolbar}),X=(0,N.default)(!0,{},F.DEFAULTS,{modules:R},W,X),["bounds","container","scrollingContainer"].forEach(function(q){typeof X[q]=="string"&&(X[q]=document.querySelector(X[q]))}),X.modules=Object.keys(X.modules).reduce(function(q,L){return X.modules[L]&&(q[L]=X.modules[L]),q},{}),X}function Y(U,X,W,E){if(this.options.strict&&!this.isEnabled()&&X===h.default.sources.USER)return new d.default;var R=W==null?null:this.getSelection(),q=this.editor.delta,L=U();if(R!=null&&(W===!0&&(W=R.index),E==null?R=J(R,L,X):E!==0&&(R=J(R,W,E,X)),this.setSelection(R,h.default.sources.SILENT)),L.length()>0){var H,se=[h.default.events.TEXT_CHANGE,L,q,X];if((H=this.emitter).emit.apply(H,[h.default.events.EDITOR_CHANGE].concat(se)),X!==h.default.sources.SILENT){var ce;(ce=this.emitter).emit.apply(ce,se)}}return L}function V(U,X,W,E,R){var q={};return typeof U.index=="number"&&typeof U.length=="number"?typeof X!="number"?(R=E,E=W,W=X,X=U.length,U=U.index):(X=U.length,U=U.index):typeof X!="number"&&(R=E,E=W,W=X,X=0),(typeof W>"u"?"undefined":i(W))==="object"?(q=W,R=E):typeof W=="string"&&(E!=null?q[W]=E:R=W),R=R||h.default.sources.API,[U,X,q,R]}function J(U,X,W,E){if(U==null)return null;var R=void 0,q=void 0;if(X instanceof d.default){var L=[U.index,U.index+U.length].map(function(ae){return X.transformPosition(ae,E!==h.default.sources.USER)}),H=o(L,2);R=H[0],q=H[1]}else{var se=[U.index,U.index+U.length].map(function(ae){return ae<X||ae===X&&E===h.default.sources.USER?ae:W>=0?ae+W:Math.max(X,ae+W)}),ce=o(se,2);R=ce[0],q=ce[1]}return new b.Range(R,q-R)}n.expandConfig=B,n.overload=V,n.default=F},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function x(v,b){for(var w=0;w<b.length;w++){var y=b[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,w){return b&&x(v.prototype,b),w&&x(v,w),v}}(),o=function x(v,b,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,b);if(y===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:x(N,b,w)}else{if("value"in y)return y.value;var S=y.get;return S===void 0?void 0:S.call(w)}},l=s(7),c=u(l),d=s(0),f=u(d);function u(x){return x&&x.__esModule?x:{default:x}}function p(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function h(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function m(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var g=function(x){m(v,x);function v(){return p(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"formatAt",value:function(w,y,N,S){if(v.compare(this.statics.blotName,N)<0&&f.default.query(N,f.default.Scope.BLOT)){var j=this.isolate(w,y);S&&j.wrap(N,S)}else o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"formatAt",this).call(this,w,y,N,S)}},{key:"optimize",value:function(w){if(o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"optimize",this).call(this,w),this.parent instanceof v&&v.compare(this.statics.blotName,this.parent.statics.blotName)>0){var y=this.parent.isolate(this.offset(),this.length());this.moveChildren(y),y.wrap(this)}}}],[{key:"compare",value:function(w,y){var N=v.order.indexOf(w),S=v.order.indexOf(y);return N>=0||S>=0?N-S:w===y?0:w<y?-1:1}}]),v}(f.default.Inline);g.allowedChildren=[g,f.default.Embed,c.default],g.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=g},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function d(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var u=function(p){f(h,p);function h(){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default.Text);n.default=u},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function b(w,y){for(var N=0;N<y.length;N++){var S=y[N];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(w,S.key,S)}}return function(w,y,N){return y&&b(w.prototype,y),N&&b(w,N),w}}(),o=function b(w,y,N){w===null&&(w=Function.prototype);var S=Object.getOwnPropertyDescriptor(w,y);if(S===void 0){var j=Object.getPrototypeOf(w);return j===null?void 0:b(j,y,N)}else{if("value"in S)return S.value;var _=S.get;return _===void 0?void 0:_.call(N)}},l=s(54),c=u(l),d=s(10),f=u(d);function u(b){return b&&b.__esModule?b:{default:b}}function p(b,w){if(!(b instanceof w))throw new TypeError("Cannot call a class as a function")}function h(b,w){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:b}function m(b,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);b.prototype=Object.create(w&&w.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(b,w):b.__proto__=w)}var g=(0,f.default)("quill:events"),x=["selectionchange","mousedown","mouseup","click"];x.forEach(function(b){document.addEventListener(b,function(){for(var w=arguments.length,y=Array(w),N=0;N<w;N++)y[N]=arguments[N];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(S){if(S.__quill&&S.__quill.emitter){var j;(j=S.__quill.emitter).handleDOM.apply(j,y)}})})});var v=function(b){m(w,b);function w(){p(this,w);var y=h(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return y.listeners={},y.on("error",g.error),y}return i(w,[{key:"emit",value:function(){g.log.apply(g,arguments),o(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(N){for(var S=arguments.length,j=Array(S>1?S-1:0),_=1;_<S;_++)j[_-1]=arguments[_];(this.listeners[N.type]||[]).forEach(function(T){var D=T.node,A=T.handler;(N.target===D||D.contains(N.target))&&A.apply(void 0,[N].concat(j))})}},{key:"listenDOM",value:function(N,S,j){this.listeners[N]||(this.listeners[N]=[]),this.listeners[N].push({node:S,handler:j})}}]),w}(c.default);v.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},v.sources={API:"api",SILENT:"silent",USER:"user"},n.default=v},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});function i(l,c){if(!(l instanceof c))throw new TypeError("Cannot call a class as a function")}var o=function l(c){var d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};i(this,l),this.quill=c,this.options=d};o.DEFAULTS={},n.default=o},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=["error","warn","log","info"],o="warn";function l(d){if(i.indexOf(d)<=i.indexOf(o)){for(var f,u=arguments.length,p=Array(u>1?u-1:0),h=1;h<u;h++)p[h-1]=arguments[h];(f=console)[d].apply(f,p)}}function c(d){return i.reduce(function(f,u){return f[u]=l.bind(console,u,d),f},{})}l.level=c.level=function(d){o=d},n.default=c},function(r,n,s){var i=Array.prototype.slice,o=s(52),l=s(53),c=r.exports=function(p,h,m){return m||(m={}),p===h?!0:p instanceof Date&&h instanceof Date?p.getTime()===h.getTime():!p||!h||typeof p!="object"&&typeof h!="object"?m.strict?p===h:p==h:u(p,h,m)};function d(p){return p==null}function f(p){return!(!p||typeof p!="object"||typeof p.length!="number"||typeof p.copy!="function"||typeof p.slice!="function"||p.length>0&&typeof p[0]!="number")}function u(p,h,m){var g,x;if(d(p)||d(h)||p.prototype!==h.prototype)return!1;if(l(p))return l(h)?(p=i.call(p),h=i.call(h),c(p,h,m)):!1;if(f(p)){if(!f(h)||p.length!==h.length)return!1;for(g=0;g<p.length;g++)if(p[g]!==h[g])return!1;return!0}try{var v=o(p),b=o(h)}catch{return!1}if(v.length!=b.length)return!1;for(v.sort(),b.sort(),g=v.length-1;g>=0;g--)if(v[g]!=b[g])return!1;for(g=v.length-1;g>=0;g--)if(x=v[g],!c(p[x],h[x],m))return!1;return typeof p==typeof h}},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(1),o=function(){function l(c,d,f){f===void 0&&(f={}),this.attrName=c,this.keyName=d;var u=i.Scope.TYPE&i.Scope.ATTRIBUTE;f.scope!=null?this.scope=f.scope&i.Scope.LEVEL|u:this.scope=i.Scope.ATTRIBUTE,f.whitelist!=null&&(this.whitelist=f.whitelist)}return l.keys=function(c){return[].map.call(c.attributes,function(d){return d.name})},l.prototype.add=function(c,d){return this.canAdd(c,d)?(c.setAttribute(this.keyName,d),!0):!1},l.prototype.canAdd=function(c,d){var f=i.query(c,i.Scope.BLOT&(this.scope|i.Scope.TYPE));return f==null?!1:this.whitelist==null?!0:typeof d=="string"?this.whitelist.indexOf(d.replace(/["']/g,""))>-1:this.whitelist.indexOf(d)>-1},l.prototype.remove=function(c){c.removeAttribute(this.keyName)},l.prototype.value=function(c){var d=c.getAttribute(this.keyName);return this.canAdd(c,d)&&d?d:""},l}();n.default=o},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var i=function(){function _(T,D){var A=[],C=!0,M=!1,F=void 0;try{for(var B=T[Symbol.iterator](),Y;!(C=(Y=B.next()).done)&&(A.push(Y.value),!(D&&A.length===D));C=!0);}catch(V){M=!0,F=V}finally{try{!C&&B.return&&B.return()}finally{if(M)throw F}}return A}return function(T,D){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return _(T,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function _(T,D){for(var A=0;A<D.length;A++){var C=D[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,C.key,C)}}return function(T,D,A){return D&&_(T.prototype,D),A&&_(T,A),T}}(),l=function _(T,D,A){T===null&&(T=Function.prototype);var C=Object.getOwnPropertyDescriptor(T,D);if(C===void 0){var M=Object.getPrototypeOf(T);return M===null?void 0:_(M,D,A)}else{if("value"in C)return C.value;var F=C.get;return F===void 0?void 0:F.call(A)}},c=s(2),d=b(c),f=s(0),u=b(f),p=s(4),h=b(p),m=s(6),g=b(m),x=s(7),v=b(x);function b(_){return _&&_.__esModule?_:{default:_}}function w(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}function y(_,T){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return T&&(typeof T=="object"||typeof T=="function")?T:_}function N(_,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof T);_.prototype=Object.create(T&&T.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),T&&(Object.setPrototypeOf?Object.setPrototypeOf(_,T):_.__proto__=T)}var S=function(_){N(T,_);function T(){return w(this,T),y(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return T}(g.default);S.blotName="code",S.tagName="CODE";var j=function(_){N(T,_);function T(){return w(this,T),y(this,(T.__proto__||Object.getPrototypeOf(T)).apply(this,arguments))}return o(T,[{key:"delta",value:function(){var A=this,C=this.domNode.textContent;return C.endsWith(`
`)&&(C=C.slice(0,-1)),C.split(`
`).reduce(function(M,F){return M.insert(F).insert(`
`,A.formats())},new d.default)}},{key:"format",value:function(A,C){if(!(A===this.statics.blotName&&C)){var M=this.descendant(v.default,this.length()-1),F=i(M,1),B=F[0];B!=null&&B.deleteAt(B.length()-1,1),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"format",this).call(this,A,C)}}},{key:"formatAt",value:function(A,C,M,F){if(C!==0&&!(u.default.query(M,u.default.Scope.BLOCK)==null||M===this.statics.blotName&&F===this.statics.formats(this.domNode))){var B=this.newlineIndex(A);if(!(B<0||B>=A+C)){var Y=this.newlineIndex(A,!0)+1,V=B-Y+1,J=this.isolate(Y,V),U=J.next;J.format(M,F),U instanceof T&&U.formatAt(0,A-Y+C-V,M,F)}}}},{key:"insertAt",value:function(A,C,M){if(M==null){var F=this.descendant(v.default,A),B=i(F,2),Y=B[0],V=B[1];Y.insertAt(V,C)}}},{key:"length",value:function(){var A=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?A:A+1}},{key:"newlineIndex",value:function(A){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(C)return this.domNode.textContent.slice(0,A).lastIndexOf(`
`);var M=this.domNode.textContent.slice(A).indexOf(`
`);return M>-1?A+M:-1}},{key:"optimize",value:function(A){this.domNode.textContent.endsWith(`
`)||this.appendChild(u.default.create("text",`
`)),l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"optimize",this).call(this,A);var C=this.next;C!=null&&C.prev===this&&C.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===C.statics.formats(C.domNode)&&(C.optimize(A),C.moveChildren(this),C.remove())}},{key:"replace",value:function(A){l(T.prototype.__proto__||Object.getPrototypeOf(T.prototype),"replace",this).call(this,A),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(C){var M=u.default.find(C);M==null?C.parentNode.removeChild(C):M instanceof u.default.Embed?M.remove():M.unwrap()})}}],[{key:"create",value:function(A){var C=l(T.__proto__||Object.getPrototypeOf(T),"create",this).call(this,A);return C.setAttribute("spellcheck",!1),C}},{key:"formats",value:function(){return!0}}]),T}(h.default);j.blotName="code-block",j.tagName="PRE",j.TAB="  ",n.Code=S,n.default=j},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},o=function(){function U(X,W){var E=[],R=!0,q=!1,L=void 0;try{for(var H=X[Symbol.iterator](),se;!(R=(se=H.next()).done)&&(E.push(se.value),!(W&&E.length===W));R=!0);}catch(ce){q=!0,L=ce}finally{try{!R&&H.return&&H.return()}finally{if(q)throw L}}return E}return function(X,W){if(Array.isArray(X))return X;if(Symbol.iterator in Object(X))return U(X,W);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function U(X,W){for(var E=0;E<W.length;E++){var R=W[E];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(X,R.key,R)}}return function(X,W,E){return W&&U(X.prototype,W),E&&U(X,E),X}}(),c=s(2),d=C(c),f=s(20),u=C(f),p=s(0),h=C(p),m=s(13),g=C(m),x=s(24),v=C(x),b=s(4),w=C(b),y=s(16),N=C(y),S=s(21),j=C(S),_=s(11),T=C(_),D=s(3),A=C(D);function C(U){return U&&U.__esModule?U:{default:U}}function M(U,X,W){return X in U?Object.defineProperty(U,X,{value:W,enumerable:!0,configurable:!0,writable:!0}):U[X]=W,U}function F(U,X){if(!(U instanceof X))throw new TypeError("Cannot call a class as a function")}var B=/^[ -~]*$/,Y=function(){function U(X){F(this,U),this.scroll=X,this.delta=this.getDelta()}return l(U,[{key:"applyDelta",value:function(W){var E=this,R=!1;this.scroll.update();var q=this.scroll.length();return this.scroll.batchStart(),W=J(W),W.reduce(function(L,H){var se=H.retain||H.delete||H.insert.length||1,ce=H.attributes||{};if(H.insert!=null){if(typeof H.insert=="string"){var ae=H.insert;ae.endsWith(`
`)&&R&&(R=!1,ae=ae.slice(0,-1)),L>=q&&!ae.endsWith(`
`)&&(R=!0),E.scroll.insertAt(L,ae);var Z=E.scroll.line(L),ve=o(Z,2),ne=ve[0],He=ve[1],Xe=(0,A.default)({},(0,b.bubbleFormats)(ne));if(ne instanceof w.default){var ie=ne.descendant(h.default.Leaf,He),Q=o(ie,1),Ne=Q[0];Xe=(0,A.default)(Xe,(0,b.bubbleFormats)(Ne))}ce=u.default.attributes.diff(Xe,ce)||{}}else if(i(H.insert)==="object"){var de=Object.keys(H.insert)[0];if(de==null)return L;E.scroll.insertAt(L,de,H.insert[de])}q+=se}return Object.keys(ce).forEach(function(ye){E.scroll.formatAt(L,se,ye,ce[ye])}),L+se},0),W.reduce(function(L,H){return typeof H.delete=="number"?(E.scroll.deleteAt(L,H.delete),L):L+(H.retain||H.insert.length||1)},0),this.scroll.batchEnd(),this.update(W)}},{key:"deleteText",value:function(W,E){return this.scroll.deleteAt(W,E),this.update(new d.default().retain(W).delete(E))}},{key:"formatLine",value:function(W,E){var R=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(q).forEach(function(L){if(!(R.scroll.whitelist!=null&&!R.scroll.whitelist[L])){var H=R.scroll.lines(W,Math.max(E,1)),se=E;H.forEach(function(ce){var ae=ce.length();if(!(ce instanceof g.default))ce.format(L,q[L]);else{var Z=W-ce.offset(R.scroll),ve=ce.newlineIndex(Z+se)-Z+1;ce.formatAt(Z,ve,L,q[L])}se-=ae})}}),this.scroll.optimize(),this.update(new d.default().retain(W).retain(E,(0,j.default)(q)))}},{key:"formatText",value:function(W,E){var R=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(q).forEach(function(L){R.scroll.formatAt(W,E,L,q[L])}),this.update(new d.default().retain(W).retain(E,(0,j.default)(q)))}},{key:"getContents",value:function(W,E){return this.delta.slice(W,W+E)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(W,E){return W.concat(E.delta())},new d.default)}},{key:"getFormat",value:function(W){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,R=[],q=[];E===0?this.scroll.path(W).forEach(function(H){var se=o(H,1),ce=se[0];ce instanceof w.default?R.push(ce):ce instanceof h.default.Leaf&&q.push(ce)}):(R=this.scroll.lines(W,E),q=this.scroll.descendants(h.default.Leaf,W,E));var L=[R,q].map(function(H){if(H.length===0)return{};for(var se=(0,b.bubbleFormats)(H.shift());Object.keys(se).length>0;){var ce=H.shift();if(ce==null)return se;se=V((0,b.bubbleFormats)(ce),se)}return se});return A.default.apply(A.default,L)}},{key:"getText",value:function(W,E){return this.getContents(W,E).filter(function(R){return typeof R.insert=="string"}).map(function(R){return R.insert}).join("")}},{key:"insertEmbed",value:function(W,E,R){return this.scroll.insertAt(W,E,R),this.update(new d.default().retain(W).insert(M({},E,R)))}},{key:"insertText",value:function(W,E){var R=this,q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return E=E.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(W,E),Object.keys(q).forEach(function(L){R.scroll.formatAt(W,E.length,L,q[L])}),this.update(new d.default().retain(W).insert(E,(0,j.default)(q)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var W=this.scroll.children.head;return W.statics.blotName!==w.default.blotName||W.children.length>1?!1:W.children.head instanceof N.default}},{key:"removeFormat",value:function(W,E){var R=this.getText(W,E),q=this.scroll.line(W+E),L=o(q,2),H=L[0],se=L[1],ce=0,ae=new d.default;H!=null&&(H instanceof g.default?ce=H.newlineIndex(se)-se+1:ce=H.length()-se,ae=H.delta().slice(se,se+ce-1).insert(`
`));var Z=this.getContents(W,E+ce),ve=Z.diff(new d.default().insert(R).concat(ae)),ne=new d.default().retain(W).concat(ve);return this.applyDelta(ne)}},{key:"update",value:function(W){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],R=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,q=this.delta;if(E.length===1&&E[0].type==="characterData"&&E[0].target.data.match(B)&&h.default.find(E[0].target)){var L=h.default.find(E[0].target),H=(0,b.bubbleFormats)(L),se=L.offset(this.scroll),ce=E[0].oldValue.replace(v.default.CONTENTS,""),ae=new d.default().insert(ce),Z=new d.default().insert(L.value()),ve=new d.default().retain(se).concat(ae.diff(Z,R));W=ve.reduce(function(ne,He){return He.insert?ne.insert(He.insert,H):ne.push(He)},new d.default),this.delta=q.compose(W)}else this.delta=this.getDelta(),(!W||!(0,T.default)(q.compose(W),this.delta))&&(W=q.diff(this.delta,R));return W}}]),U}();function V(U,X){return Object.keys(X).reduce(function(W,E){return U[E]==null||(X[E]===U[E]?W[E]=X[E]:Array.isArray(X[E])?X[E].indexOf(U[E])<0&&(W[E]=X[E].concat([U[E]])):W[E]=[X[E],U[E]]),W},{})}function J(U){return U.reduce(function(X,W){if(W.insert===1){var E=(0,j.default)(W.attributes);return delete E.image,X.insert({image:W.attributes.image},E)}if(W.attributes!=null&&(W.attributes.list===!0||W.attributes.bullet===!0)&&(W=(0,j.default)(W),W.attributes.list?W.attributes.list="ordered":(W.attributes.list="bullet",delete W.attributes.bullet)),typeof W.insert=="string"){var R=W.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return X.insert(R,W.attributes)}return X.push(W)},new d.default)}n.default=Y},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var i=function(){function _(T,D){var A=[],C=!0,M=!1,F=void 0;try{for(var B=T[Symbol.iterator](),Y;!(C=(Y=B.next()).done)&&(A.push(Y.value),!(D&&A.length===D));C=!0);}catch(V){M=!0,F=V}finally{try{!C&&B.return&&B.return()}finally{if(M)throw F}}return A}return function(T,D){if(Array.isArray(T))return T;if(Symbol.iterator in Object(T))return _(T,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function _(T,D){for(var A=0;A<D.length;A++){var C=D[A];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(T,C.key,C)}}return function(T,D,A){return D&&_(T.prototype,D),A&&_(T,A),T}}(),l=s(0),c=v(l),d=s(21),f=v(d),u=s(11),p=v(u),h=s(8),m=v(h),g=s(10),x=v(g);function v(_){return _&&_.__esModule?_:{default:_}}function b(_){if(Array.isArray(_)){for(var T=0,D=Array(_.length);T<_.length;T++)D[T]=_[T];return D}else return Array.from(_)}function w(_,T){if(!(_ instanceof T))throw new TypeError("Cannot call a class as a function")}var y=(0,x.default)("quill:selection"),N=function _(T){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;w(this,_),this.index=T,this.length=D},S=function(){function _(T,D){var A=this;w(this,_),this.emitter=D,this.scroll=T,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new N(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){A.mouseDown||setTimeout(A.update.bind(A,m.default.sources.USER),1)}),this.emitter.on(m.default.events.EDITOR_CHANGE,function(C,M){C===m.default.events.TEXT_CHANGE&&M.length()>0&&A.update(m.default.sources.SILENT)}),this.emitter.on(m.default.events.SCROLL_BEFORE_UPDATE,function(){if(A.hasFocus()){var C=A.getNativeRange();C!=null&&C.start.node!==A.cursor.textNode&&A.emitter.once(m.default.events.SCROLL_UPDATE,function(){try{A.setNativeRange(C.start.node,C.start.offset,C.end.node,C.end.offset)}catch{}})}}),this.emitter.on(m.default.events.SCROLL_OPTIMIZE,function(C,M){if(M.range){var F=M.range,B=F.startNode,Y=F.startOffset,V=F.endNode,J=F.endOffset;A.setNativeRange(B,Y,V,J)}}),this.update(m.default.sources.SILENT)}return o(_,[{key:"handleComposition",value:function(){var D=this;this.root.addEventListener("compositionstart",function(){D.composing=!0}),this.root.addEventListener("compositionend",function(){if(D.composing=!1,D.cursor.parent){var A=D.cursor.restore();if(!A)return;setTimeout(function(){D.setNativeRange(A.startNode,A.startOffset,A.endNode,A.endOffset)},1)}})}},{key:"handleDragging",value:function(){var D=this;this.emitter.listenDOM("mousedown",document.body,function(){D.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){D.mouseDown=!1,D.update(m.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(D,A){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[D])){this.scroll.update();var C=this.getNativeRange();if(!(C==null||!C.native.collapsed||c.default.query(D,c.default.Scope.BLOCK))){if(C.start.node!==this.cursor.textNode){var M=c.default.find(C.start.node,!1);if(M==null)return;if(M instanceof c.default.Leaf){var F=M.split(C.start.offset);M.parent.insertBefore(this.cursor,F)}else M.insertBefore(this.cursor,C.start.node);this.cursor.attach()}this.cursor.format(D,A),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(D){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,C=this.scroll.length();D=Math.min(D,C-1),A=Math.min(D+A,C-1)-D;var M=void 0,F=this.scroll.leaf(D),B=i(F,2),Y=B[0],V=B[1];if(Y==null)return null;var J=Y.position(V,!0),U=i(J,2);M=U[0],V=U[1];var X=document.createRange();if(A>0){X.setStart(M,V);var W=this.scroll.leaf(D+A),E=i(W,2);if(Y=E[0],V=E[1],Y==null)return null;var R=Y.position(V,!0),q=i(R,2);return M=q[0],V=q[1],X.setEnd(M,V),X.getBoundingClientRect()}else{var L="left",H=void 0;return M instanceof Text?(V<M.data.length?(X.setStart(M,V),X.setEnd(M,V+1)):(X.setStart(M,V-1),X.setEnd(M,V),L="right"),H=X.getBoundingClientRect()):(H=Y.domNode.getBoundingClientRect(),V>0&&(L="right")),{bottom:H.top+H.height,height:H.height,left:H[L],right:H[L],top:H.top,width:0}}}},{key:"getNativeRange",value:function(){var D=document.getSelection();if(D==null||D.rangeCount<=0)return null;var A=D.getRangeAt(0);if(A==null)return null;var C=this.normalizeNative(A);return y.info("getNativeRange",C),C}},{key:"getRange",value:function(){var D=this.getNativeRange();if(D==null)return[null,null];var A=this.normalizedToRange(D);return[A,D]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(D){var A=this,C=[[D.start.node,D.start.offset]];D.native.collapsed||C.push([D.end.node,D.end.offset]);var M=C.map(function(Y){var V=i(Y,2),J=V[0],U=V[1],X=c.default.find(J,!0),W=X.offset(A.scroll);return U===0?W:X instanceof c.default.Container?W+X.length():W+X.index(J,U)}),F=Math.min(Math.max.apply(Math,b(M)),this.scroll.length()-1),B=Math.min.apply(Math,[F].concat(b(M)));return new N(B,F-B)}},{key:"normalizeNative",value:function(D){if(!j(this.root,D.startContainer)||!D.collapsed&&!j(this.root,D.endContainer))return null;var A={start:{node:D.startContainer,offset:D.startOffset},end:{node:D.endContainer,offset:D.endOffset},native:D};return[A.start,A.end].forEach(function(C){for(var M=C.node,F=C.offset;!(M instanceof Text)&&M.childNodes.length>0;)if(M.childNodes.length>F)M=M.childNodes[F],F=0;else if(M.childNodes.length===F)M=M.lastChild,F=M instanceof Text?M.data.length:M.childNodes.length+1;else break;C.node=M,C.offset=F}),A}},{key:"rangeToNative",value:function(D){var A=this,C=D.collapsed?[D.index]:[D.index,D.index+D.length],M=[],F=this.scroll.length();return C.forEach(function(B,Y){B=Math.min(F-1,B);var V=void 0,J=A.scroll.leaf(B),U=i(J,2),X=U[0],W=U[1],E=X.position(W,Y!==0),R=i(E,2);V=R[0],W=R[1],M.push(V,W)}),M.length<2&&(M=M.concat(M)),M}},{key:"scrollIntoView",value:function(D){var A=this.lastRange;if(A!=null){var C=this.getBounds(A.index,A.length);if(C!=null){var M=this.scroll.length()-1,F=this.scroll.line(Math.min(A.index,M)),B=i(F,1),Y=B[0],V=Y;if(A.length>0){var J=this.scroll.line(Math.min(A.index+A.length,M)),U=i(J,1);V=U[0]}if(!(Y==null||V==null)){var X=D.getBoundingClientRect();C.top<X.top?D.scrollTop-=X.top-C.top:C.bottom>X.bottom&&(D.scrollTop+=C.bottom-X.bottom)}}}}},{key:"setNativeRange",value:function(D,A){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:D,M=arguments.length>3&&arguments[3]!==void 0?arguments[3]:A,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(y.info("setNativeRange",D,A,C,M),!(D!=null&&(this.root.parentNode==null||D.parentNode==null||C.parentNode==null))){var B=document.getSelection();if(B!=null)if(D!=null){this.hasFocus()||this.root.focus();var Y=(this.getNativeRange()||{}).native;if(Y==null||F||D!==Y.startContainer||A!==Y.startOffset||C!==Y.endContainer||M!==Y.endOffset){D.tagName=="BR"&&(A=[].indexOf.call(D.parentNode.childNodes,D),D=D.parentNode),C.tagName=="BR"&&(M=[].indexOf.call(C.parentNode.childNodes,C),C=C.parentNode);var V=document.createRange();V.setStart(D,A),V.setEnd(C,M),B.removeAllRanges(),B.addRange(V)}}else B.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(D){var A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:m.default.sources.API;if(typeof A=="string"&&(C=A,A=!1),y.info("setRange",D),D!=null){var M=this.rangeToNative(D);this.setNativeRange.apply(this,b(M).concat([A]))}else this.setNativeRange(null);this.update(C)}},{key:"update",value:function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m.default.sources.USER,A=this.lastRange,C=this.getRange(),M=i(C,2),F=M[0],B=M[1];if(this.lastRange=F,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,p.default)(A,this.lastRange)){var Y;!this.composing&&B!=null&&B.native.collapsed&&B.start.node!==this.cursor.textNode&&this.cursor.restore();var V=[m.default.events.SELECTION_CHANGE,(0,f.default)(this.lastRange),(0,f.default)(A),D];if((Y=this.emitter).emit.apply(Y,[m.default.events.EDITOR_CHANGE].concat(V)),D!==m.default.sources.SILENT){var J;(J=this.emitter).emit.apply(J,V)}}}}]),_}();function j(_,T){try{T.parentNode}catch{return!1}return T instanceof Text&&(T=T.parentNode),_.contains(T)}n.Range=N,n.default=S},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(g,x){for(var v=0;v<x.length;v++){var b=x[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,x,v){return x&&m(g.prototype,x),v&&m(g,v),g}}(),o=function m(g,x,v){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,x);if(b===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:m(w,x,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=s(0),c=d(l);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function u(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var h=function(m){p(g,m);function g(){return f(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"insertInto",value:function(v,b){v.children.length===0?o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"insertInto",this).call(this,v,b):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),g}(c.default.Embed);h.blotName="break",h.tagName="BR",n.default=h},function(r,n,s){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])};return function(p,h){u(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(44),l=s(30),c=s(1),d=function(u){i(p,u);function p(h){var m=u.call(this,h)||this;return m.build(),m}return p.prototype.appendChild=function(h){this.insertBefore(h)},p.prototype.attach=function(){u.prototype.attach.call(this),this.children.forEach(function(h){h.attach()})},p.prototype.build=function(){var h=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(m){try{var g=f(m);h.insertBefore(g,h.children.head||void 0)}catch(x){if(x instanceof c.ParchmentError)return;throw x}})},p.prototype.deleteAt=function(h,m){if(h===0&&m===this.length())return this.remove();this.children.forEachAt(h,m,function(g,x,v){g.deleteAt(x,v)})},p.prototype.descendant=function(h,m){var g=this.children.find(m),x=g[0],v=g[1];return h.blotName==null&&h(x)||h.blotName!=null&&x instanceof h?[x,v]:x instanceof p?x.descendant(h,v):[null,-1]},p.prototype.descendants=function(h,m,g){m===void 0&&(m=0),g===void 0&&(g=Number.MAX_VALUE);var x=[],v=g;return this.children.forEachAt(m,g,function(b,w,y){(h.blotName==null&&h(b)||h.blotName!=null&&b instanceof h)&&x.push(b),b instanceof p&&(x=x.concat(b.descendants(h,w,v))),v-=y}),x},p.prototype.detach=function(){this.children.forEach(function(h){h.detach()}),u.prototype.detach.call(this)},p.prototype.formatAt=function(h,m,g,x){this.children.forEachAt(h,m,function(v,b,w){v.formatAt(b,w,g,x)})},p.prototype.insertAt=function(h,m,g){var x=this.children.find(h),v=x[0],b=x[1];if(v)v.insertAt(b,m,g);else{var w=g==null?c.create("text",m):c.create(m,g);this.appendChild(w)}},p.prototype.insertBefore=function(h,m){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(g){return h instanceof g}))throw new c.ParchmentError("Cannot insert "+h.statics.blotName+" into "+this.statics.blotName);h.insertInto(this,m)},p.prototype.length=function(){return this.children.reduce(function(h,m){return h+m.length()},0)},p.prototype.moveChildren=function(h,m){this.children.forEach(function(g){h.insertBefore(g,m)})},p.prototype.optimize=function(h){if(u.prototype.optimize.call(this,h),this.children.length===0)if(this.statics.defaultChild!=null){var m=c.create(this.statics.defaultChild);this.appendChild(m),m.optimize(h)}else this.remove()},p.prototype.path=function(h,m){m===void 0&&(m=!1);var g=this.children.find(h,m),x=g[0],v=g[1],b=[[this,h]];return x instanceof p?b.concat(x.path(v,m)):(x!=null&&b.push([x,v]),b)},p.prototype.removeChild=function(h){this.children.remove(h)},p.prototype.replace=function(h){h instanceof p&&h.moveChildren(this),u.prototype.replace.call(this,h)},p.prototype.split=function(h,m){if(m===void 0&&(m=!1),!m){if(h===0)return this;if(h===this.length())return this.next}var g=this.clone();return this.parent.insertBefore(g,this.next),this.children.forEachAt(h,this.length(),function(x,v,b){x=x.split(v,m),g.appendChild(x)}),g},p.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},p.prototype.update=function(h,m){var g=this,x=[],v=[];h.forEach(function(b){b.target===g.domNode&&b.type==="childList"&&(x.push.apply(x,b.addedNodes),v.push.apply(v,b.removedNodes))}),v.forEach(function(b){if(!(b.parentNode!=null&&b.tagName!=="IFRAME"&&document.body.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var w=c.find(b);w!=null&&(w.domNode.parentNode==null||w.domNode.parentNode===g.domNode)&&w.detach()}}),x.filter(function(b){return b.parentNode==g.domNode}).sort(function(b,w){return b===w?0:b.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(b){var w=null;b.nextSibling!=null&&(w=c.find(b.nextSibling));var y=f(b);(y.next!=w||y.next==null)&&(y.parent!=null&&y.parent.removeChild(g),g.insertBefore(y,w||void 0))})},p}(l.default);function f(u){var p=c.find(u);if(p==null)try{p=c.create(u)}catch{p=c.create(c.Scope.INLINE),[].slice.call(u.childNodes).forEach(function(m){p.domNode.appendChild(m)}),u.parentNode&&u.parentNode.replaceChild(p.domNode,u),p.attach()}return p}n.default=d},function(r,n,s){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])};return function(p,h){u(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12),l=s(31),c=s(17),d=s(1),f=function(u){i(p,u);function p(h){var m=u.call(this,h)||this;return m.attributes=new l.default(m.domNode),m}return p.formats=function(h){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return h.tagName.toLowerCase()},p.prototype.format=function(h,m){var g=d.query(h);g instanceof o.default?this.attributes.attribute(g,m):m&&g!=null&&(h!==this.statics.blotName||this.formats()[h]!==m)&&this.replaceWith(h,m)},p.prototype.formats=function(){var h=this.attributes.values(),m=this.statics.formats(this.domNode);return m!=null&&(h[this.statics.blotName]=m),h},p.prototype.replaceWith=function(h,m){var g=u.prototype.replaceWith.call(this,h,m);return this.attributes.copy(g),g},p.prototype.update=function(h,m){var g=this;u.prototype.update.call(this,h,m),h.some(function(x){return x.target===g.domNode&&x.type==="attributes"})&&this.attributes.build()},p.prototype.wrap=function(h,m){var g=u.prototype.wrap.call(this,h,m);return g instanceof p&&g.statics.scope===this.statics.scope&&this.attributes.move(g),g},p}(c.default);n.default=f},function(r,n,s){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var p in u)u.hasOwnProperty(p)&&(f[p]=u[p])};return function(f,u){d(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(30),l=s(1),c=function(d){i(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.value=function(u){return!0},f.prototype.index=function(u,p){return this.domNode===u||this.domNode.compareDocumentPosition(u)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(p,1):-1},f.prototype.position=function(u,p){var h=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return u>0&&(h+=1),[this.parent.domNode,h]},f.prototype.value=function(){var u;return u={},u[this.statics.blotName]=this.statics.value(this.domNode)||!0,u},f.scope=l.Scope.INLINE_BLOT,f}(o.default);n.default=c},function(r,n,s){var i=s(11),o=s(3),l={attributes:{compose:function(d,f,u){typeof d!="object"&&(d={}),typeof f!="object"&&(f={});var p=o(!0,{},f);u||(p=Object.keys(p).reduce(function(m,g){return p[g]!=null&&(m[g]=p[g]),m},{}));for(var h in d)d[h]!==void 0&&f[h]===void 0&&(p[h]=d[h]);return Object.keys(p).length>0?p:void 0},diff:function(d,f){typeof d!="object"&&(d={}),typeof f!="object"&&(f={});var u=Object.keys(d).concat(Object.keys(f)).reduce(function(p,h){return i(d[h],f[h])||(p[h]=f[h]===void 0?null:f[h]),p},{});return Object.keys(u).length>0?u:void 0},transform:function(d,f,u){if(typeof d!="object")return f;if(typeof f=="object"){if(!u)return f;var p=Object.keys(f).reduce(function(h,m){return d[m]===void 0&&(h[m]=f[m]),h},{});return Object.keys(p).length>0?p:void 0}}},iterator:function(d){return new c(d)},length:function(d){return typeof d.delete=="number"?d.delete:typeof d.retain=="number"?d.retain:typeof d.insert=="string"?d.insert.length:1}};function c(d){this.ops=d,this.index=0,this.offset=0}c.prototype.hasNext=function(){return this.peekLength()<1/0},c.prototype.next=function(d){d||(d=1/0);var f=this.ops[this.index];if(f){var u=this.offset,p=l.length(f);if(d>=p-u?(d=p-u,this.index+=1,this.offset=0):this.offset+=d,typeof f.delete=="number")return{delete:d};var h={};return f.attributes&&(h.attributes=f.attributes),typeof f.retain=="number"?h.retain=d:typeof f.insert=="string"?h.insert=f.insert.substr(u,d):h.insert=f.insert,h}else return{retain:1/0}},c.prototype.peek=function(){return this.ops[this.index]},c.prototype.peekLength=function(){return this.ops[this.index]?l.length(this.ops[this.index])-this.offset:1/0},c.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},c.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var d=this.offset,f=this.index,u=this.next(),p=this.ops.slice(this.index);return this.offset=d,this.index=f,[u].concat(p)}else return[]},r.exports=l},function(r,n){var s=function(){function i(g,x){return x!=null&&g instanceof x}var o;try{o=Map}catch{o=function(){}}var l;try{l=Set}catch{l=function(){}}var c;try{c=Promise}catch{c=function(){}}function d(g,x,v,b,w){typeof x=="object"&&(v=x.depth,b=x.prototype,w=x.includeNonEnumerable,x=x.circular);var y=[],N=[],S=typeof Buffer<"u";typeof x>"u"&&(x=!0),typeof v>"u"&&(v=1/0);function j(_,T){if(_===null)return null;if(T===0)return _;var D,A;if(typeof _!="object")return _;if(i(_,o))D=new o;else if(i(_,l))D=new l;else if(i(_,c))D=new c(function(X,W){_.then(function(E){X(j(E,T-1))},function(E){W(j(E,T-1))})});else if(d.__isArray(_))D=[];else if(d.__isRegExp(_))D=new RegExp(_.source,m(_)),_.lastIndex&&(D.lastIndex=_.lastIndex);else if(d.__isDate(_))D=new Date(_.getTime());else{if(S&&Buffer.isBuffer(_))return Buffer.allocUnsafe?D=Buffer.allocUnsafe(_.length):D=new Buffer(_.length),_.copy(D),D;i(_,Error)?D=Object.create(_):typeof b>"u"?(A=Object.getPrototypeOf(_),D=Object.create(A)):(D=Object.create(b),A=b)}if(x){var C=y.indexOf(_);if(C!=-1)return N[C];y.push(_),N.push(D)}i(_,o)&&_.forEach(function(X,W){var E=j(W,T-1),R=j(X,T-1);D.set(E,R)}),i(_,l)&&_.forEach(function(X){var W=j(X,T-1);D.add(W)});for(var M in _){var F;A&&(F=Object.getOwnPropertyDescriptor(A,M)),!(F&&F.set==null)&&(D[M]=j(_[M],T-1))}if(Object.getOwnPropertySymbols)for(var B=Object.getOwnPropertySymbols(_),M=0;M<B.length;M++){var Y=B[M],V=Object.getOwnPropertyDescriptor(_,Y);V&&!V.enumerable&&!w||(D[Y]=j(_[Y],T-1),V.enumerable||Object.defineProperty(D,Y,{enumerable:!1}))}if(w)for(var J=Object.getOwnPropertyNames(_),M=0;M<J.length;M++){var U=J[M],V=Object.getOwnPropertyDescriptor(_,U);V&&V.enumerable||(D[U]=j(_[U],T-1),Object.defineProperty(D,U,{enumerable:!1}))}return D}return j(g,v)}d.clonePrototype=function(x){if(x===null)return null;var v=function(){};return v.prototype=x,new v};function f(g){return Object.prototype.toString.call(g)}d.__objToStr=f;function u(g){return typeof g=="object"&&f(g)==="[object Date]"}d.__isDate=u;function p(g){return typeof g=="object"&&f(g)==="[object Array]"}d.__isArray=p;function h(g){return typeof g=="object"&&f(g)==="[object RegExp]"}d.__isRegExp=h;function m(g){var x="";return g.global&&(x+="g"),g.ignoreCase&&(x+="i"),g.multiline&&(x+="m"),x}return d.__getRegExpFlags=m,d}();typeof r=="object"&&r.exports&&(r.exports=s)},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function D(A,C){var M=[],F=!0,B=!1,Y=void 0;try{for(var V=A[Symbol.iterator](),J;!(F=(J=V.next()).done)&&(M.push(J.value),!(C&&M.length===C));F=!0);}catch(U){B=!0,Y=U}finally{try{!F&&V.return&&V.return()}finally{if(B)throw Y}}return M}return function(A,C){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return D(A,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function D(A,C){for(var M=0;M<C.length;M++){var F=C[M];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}return function(A,C,M){return C&&D(A.prototype,C),M&&D(A,M),A}}(),l=function D(A,C,M){A===null&&(A=Function.prototype);var F=Object.getOwnPropertyDescriptor(A,C);if(F===void 0){var B=Object.getPrototypeOf(A);return B===null?void 0:D(B,C,M)}else{if("value"in F)return F.value;var Y=F.get;return Y===void 0?void 0:Y.call(M)}},c=s(0),d=y(c),f=s(8),u=y(f),p=s(4),h=y(p),m=s(16),g=y(m),x=s(13),v=y(x),b=s(25),w=y(b);function y(D){return D&&D.__esModule?D:{default:D}}function N(D,A){if(!(D instanceof A))throw new TypeError("Cannot call a class as a function")}function S(D,A){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:D}function j(D,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);D.prototype=Object.create(A&&A.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(D,A):D.__proto__=A)}function _(D){return D instanceof h.default||D instanceof p.BlockEmbed}var T=function(D){j(A,D);function A(C,M){N(this,A);var F=S(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C));return F.emitter=M.emitter,Array.isArray(M.whitelist)&&(F.whitelist=M.whitelist.reduce(function(B,Y){return B[Y]=!0,B},{})),F.domNode.addEventListener("DOMNodeInserted",function(){}),F.optimize(),F.enable(),F}return o(A,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(M,F){var B=this.line(M),Y=i(B,2),V=Y[0],J=Y[1],U=this.line(M+F),X=i(U,1),W=X[0];if(l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"deleteAt",this).call(this,M,F),W!=null&&V!==W&&J>0){if(V instanceof p.BlockEmbed||W instanceof p.BlockEmbed){this.optimize();return}if(V instanceof v.default){var E=V.newlineIndex(V.length(),!0);if(E>-1&&(V=V.split(E+1),V===W)){this.optimize();return}}else if(W instanceof v.default){var R=W.newlineIndex(0);R>-1&&W.split(R+1)}var q=W.children.head instanceof g.default?null:W.children.head;V.moveChildren(W,q),V.remove()}this.optimize()}},{key:"enable",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",M)}},{key:"formatAt",value:function(M,F,B,Y){this.whitelist!=null&&!this.whitelist[B]||(l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"formatAt",this).call(this,M,F,B,Y),this.optimize())}},{key:"insertAt",value:function(M,F,B){if(!(B!=null&&this.whitelist!=null&&!this.whitelist[F])){if(M>=this.length())if(B==null||d.default.query(F,d.default.Scope.BLOCK)==null){var Y=d.default.create(this.statics.defaultChild);this.appendChild(Y),B==null&&F.endsWith(`
`)&&(F=F.slice(0,-1)),Y.insertAt(0,F,B)}else{var V=d.default.create(F,B);this.appendChild(V)}else l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertAt",this).call(this,M,F,B);this.optimize()}}},{key:"insertBefore",value:function(M,F){if(M.statics.scope===d.default.Scope.INLINE_BLOT){var B=d.default.create(this.statics.defaultChild);B.appendChild(M),M=B}l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"insertBefore",this).call(this,M,F)}},{key:"leaf",value:function(M){return this.path(M).pop()||[null,-1]}},{key:"line",value:function(M){return M===this.length()?this.line(M-1):this.descendant(_,M)}},{key:"lines",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,B=function Y(V,J,U){var X=[],W=U;return V.children.forEachAt(J,U,function(E,R,q){_(E)?X.push(E):E instanceof d.default.Container&&(X=X.concat(Y(E,R,W))),W-=q}),X};return B(this,M,F)}},{key:"optimize",value:function(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"optimize",this).call(this,M,F),M.length>0&&this.emitter.emit(u.default.events.SCROLL_OPTIMIZE,M,F))}},{key:"path",value:function(M){return l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"path",this).call(this,M).slice(1)}},{key:"update",value:function(M){if(this.batch!==!0){var F=u.default.sources.USER;typeof M=="string"&&(F=M),Array.isArray(M)||(M=this.observer.takeRecords()),M.length>0&&this.emitter.emit(u.default.events.SCROLL_BEFORE_UPDATE,F,M),l(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"update",this).call(this,M.concat([])),M.length>0&&this.emitter.emit(u.default.events.SCROLL_UPDATE,F,M)}}}]),A}(d.default.Scroll);T.blotName="scroll",T.className="ql-editor",T.tagName="DIV",T.defaultChild="block",T.allowedChildren=[h.default,p.BlockEmbed,w.default],n.default=T},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(H){return typeof H}:function(H){return H&&typeof Symbol=="function"&&H.constructor===Symbol&&H!==Symbol.prototype?"symbol":typeof H},o=function(){function H(se,ce){var ae=[],Z=!0,ve=!1,ne=void 0;try{for(var He=se[Symbol.iterator](),Xe;!(Z=(Xe=He.next()).done)&&(ae.push(Xe.value),!(ce&&ae.length===ce));Z=!0);}catch(ie){ve=!0,ne=ie}finally{try{!Z&&He.return&&He.return()}finally{if(ve)throw ne}}return ae}return function(se,ce){if(Array.isArray(se))return se;if(Symbol.iterator in Object(se))return H(se,ce);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function H(se,ce){for(var ae=0;ae<ce.length;ae++){var Z=ce[ae];Z.enumerable=Z.enumerable||!1,Z.configurable=!0,"value"in Z&&(Z.writable=!0),Object.defineProperty(se,Z.key,Z)}}return function(se,ce,ae){return ce&&H(se.prototype,ce),ae&&H(se,ae),se}}(),c=s(21),d=D(c),f=s(11),u=D(f),p=s(3),h=D(p),m=s(2),g=D(m),x=s(20),v=D(x),b=s(0),w=D(b),y=s(5),N=D(y),S=s(10),j=D(S),_=s(9),T=D(_);function D(H){return H&&H.__esModule?H:{default:H}}function A(H,se,ce){return se in H?Object.defineProperty(H,se,{value:ce,enumerable:!0,configurable:!0,writable:!0}):H[se]=ce,H}function C(H,se){if(!(H instanceof se))throw new TypeError("Cannot call a class as a function")}function M(H,se){if(!H)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return se&&(typeof se=="object"||typeof se=="function")?se:H}function F(H,se){if(typeof se!="function"&&se!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof se);H.prototype=Object.create(se&&se.prototype,{constructor:{value:H,enumerable:!1,writable:!0,configurable:!0}}),se&&(Object.setPrototypeOf?Object.setPrototypeOf(H,se):H.__proto__=se)}var B=(0,j.default)("quill:keyboard"),Y=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",V=function(H){F(se,H),l(se,null,[{key:"match",value:function(ae,Z){return Z=L(Z),["altKey","ctrlKey","metaKey","shiftKey"].some(function(ve){return!!Z[ve]!==ae[ve]&&Z[ve]!==null})?!1:Z.key===(ae.which||ae.keyCode)}}]);function se(ce,ae){C(this,se);var Z=M(this,(se.__proto__||Object.getPrototypeOf(se)).call(this,ce,ae));return Z.bindings={},Object.keys(Z.options.bindings).forEach(function(ve){ve==="list autofill"&&ce.scroll.whitelist!=null&&!ce.scroll.whitelist.list||Z.options.bindings[ve]&&Z.addBinding(Z.options.bindings[ve])}),Z.addBinding({key:se.keys.ENTER,shiftKey:null},E),Z.addBinding({key:se.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(Z.addBinding({key:se.keys.BACKSPACE},{collapsed:!0},U),Z.addBinding({key:se.keys.DELETE},{collapsed:!0},X)):(Z.addBinding({key:se.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},U),Z.addBinding({key:se.keys.DELETE},{collapsed:!0,suffix:/^.?$/},X)),Z.addBinding({key:se.keys.BACKSPACE},{collapsed:!1},W),Z.addBinding({key:se.keys.DELETE},{collapsed:!1},W),Z.addBinding({key:se.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},U),Z.listen(),Z}return l(se,[{key:"addBinding",value:function(ae){var Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ve=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},ne=L(ae);if(ne==null||ne.key==null)return B.warn("Attempted to add invalid keyboard binding",ne);typeof Z=="function"&&(Z={handler:Z}),typeof ve=="function"&&(ve={handler:ve}),ne=(0,h.default)(ne,Z,ve),this.bindings[ne.key]=this.bindings[ne.key]||[],this.bindings[ne.key].push(ne)}},{key:"listen",value:function(){var ae=this;this.quill.root.addEventListener("keydown",function(Z){if(!Z.defaultPrevented){var ve=Z.which||Z.keyCode,ne=(ae.bindings[ve]||[]).filter(function(Ke){return se.match(Z,Ke)});if(ne.length!==0){var He=ae.quill.getSelection();if(!(He==null||!ae.quill.hasFocus())){var Xe=ae.quill.getLine(He.index),ie=o(Xe,2),Q=ie[0],Ne=ie[1],de=ae.quill.getLeaf(He.index),ye=o(de,2),xe=ye[0],we=ye[1],Ae=He.length===0?[xe,we]:ae.quill.getLeaf(He.index+He.length),Ue=o(Ae,2),me=Ue[0],ee=Ue[1],fe=xe instanceof w.default.Text?xe.value().slice(0,we):"",Fe=me instanceof w.default.Text?me.value().slice(ee):"",Ee={collapsed:He.length===0,empty:He.length===0&&Q.length()<=1,format:ae.quill.getFormat(He),offset:Ne,prefix:fe,suffix:Fe},qe=ne.some(function(Ke){if(Ke.collapsed!=null&&Ke.collapsed!==Ee.collapsed||Ke.empty!=null&&Ke.empty!==Ee.empty||Ke.offset!=null&&Ke.offset!==Ee.offset)return!1;if(Array.isArray(Ke.format)){if(Ke.format.every(function(Qe){return Ee.format[Qe]==null}))return!1}else if(i(Ke.format)==="object"&&!Object.keys(Ke.format).every(function(Qe){return Ke.format[Qe]===!0?Ee.format[Qe]!=null:Ke.format[Qe]===!1?Ee.format[Qe]==null:(0,u.default)(Ke.format[Qe],Ee.format[Qe])}))return!1;return Ke.prefix!=null&&!Ke.prefix.test(Ee.prefix)||Ke.suffix!=null&&!Ke.suffix.test(Ee.suffix)?!1:Ke.handler.call(ae,He,Ee)!==!0});qe&&Z.preventDefault()}}}})}}]),se}(T.default);V.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},V.DEFAULTS={bindings:{bold:q("bold"),italic:q("italic"),underline:q("underline"),indent:{key:V.keys.TAB,format:["blockquote","indent","list"],handler:function(se,ce){if(ce.collapsed&&ce.offset!==0)return!0;this.quill.format("indent","+1",N.default.sources.USER)}},outdent:{key:V.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(se,ce){if(ce.collapsed&&ce.offset!==0)return!0;this.quill.format("indent","-1",N.default.sources.USER)}},"outdent backspace":{key:V.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(se,ce){ce.format.indent!=null?this.quill.format("indent","-1",N.default.sources.USER):ce.format.list!=null&&this.quill.format("list",!1,N.default.sources.USER)}},"indent code-block":R(!0),"outdent code-block":R(!1),"remove tab":{key:V.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(se){this.quill.deleteText(se.index-1,1,N.default.sources.USER)}},tab:{key:V.keys.TAB,handler:function(se){this.quill.history.cutoff();var ce=new g.default().retain(se.index).delete(se.length).insert("	");this.quill.updateContents(ce,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(se.index+1,N.default.sources.SILENT)}},"list empty enter":{key:V.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(se,ce){this.quill.format("list",!1,N.default.sources.USER),ce.format.indent&&this.quill.format("indent",!1,N.default.sources.USER)}},"checklist enter":{key:V.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(se){var ce=this.quill.getLine(se.index),ae=o(ce,2),Z=ae[0],ve=ae[1],ne=(0,h.default)({},Z.formats(),{list:"checked"}),He=new g.default().retain(se.index).insert(`
`,ne).retain(Z.length()-ve-1).retain(1,{list:"unchecked"});this.quill.updateContents(He,N.default.sources.USER),this.quill.setSelection(se.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:V.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(se,ce){var ae=this.quill.getLine(se.index),Z=o(ae,2),ve=Z[0],ne=Z[1],He=new g.default().retain(se.index).insert(`
`,ce.format).retain(ve.length()-ne-1).retain(1,{header:null});this.quill.updateContents(He,N.default.sources.USER),this.quill.setSelection(se.index+1,N.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(se,ce){var ae=ce.prefix.length,Z=this.quill.getLine(se.index),ve=o(Z,2),ne=ve[0],He=ve[1];if(He>ae)return!0;var Xe=void 0;switch(ce.prefix.trim()){case"[]":case"[ ]":Xe="unchecked";break;case"[x]":Xe="checked";break;case"-":case"*":Xe="bullet";break;default:Xe="ordered"}this.quill.insertText(se.index," ",N.default.sources.USER),this.quill.history.cutoff();var ie=new g.default().retain(se.index-He).delete(ae+1).retain(ne.length()-2-He).retain(1,{list:Xe});this.quill.updateContents(ie,N.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(se.index-ae,N.default.sources.SILENT)}},"code exit":{key:V.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(se){var ce=this.quill.getLine(se.index),ae=o(ce,2),Z=ae[0],ve=ae[1],ne=new g.default().retain(se.index+Z.length()-ve-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(ne,N.default.sources.USER)}},"embed left":J(V.keys.LEFT,!1),"embed left shift":J(V.keys.LEFT,!0),"embed right":J(V.keys.RIGHT,!1),"embed right shift":J(V.keys.RIGHT,!0)}};function J(H,se){var ce,ae=H===V.keys.LEFT?"prefix":"suffix";return ce={key:H,shiftKey:se,altKey:null},A(ce,ae,/^$/),A(ce,"handler",function(ve){var ne=ve.index;H===V.keys.RIGHT&&(ne+=ve.length+1);var He=this.quill.getLeaf(ne),Xe=o(He,1),ie=Xe[0];return ie instanceof w.default.Embed?(H===V.keys.LEFT?se?this.quill.setSelection(ve.index-1,ve.length+1,N.default.sources.USER):this.quill.setSelection(ve.index-1,N.default.sources.USER):se?this.quill.setSelection(ve.index,ve.length+1,N.default.sources.USER):this.quill.setSelection(ve.index+ve.length+1,N.default.sources.USER),!1):!0}),ce}function U(H,se){if(!(H.index===0||this.quill.getLength()<=1)){var ce=this.quill.getLine(H.index),ae=o(ce,1),Z=ae[0],ve={};if(se.offset===0){var ne=this.quill.getLine(H.index-1),He=o(ne,1),Xe=He[0];if(Xe!=null&&Xe.length()>1){var ie=Z.formats(),Q=this.quill.getFormat(H.index-1,1);ve=v.default.attributes.diff(ie,Q)||{}}}var Ne=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(se.prefix)?2:1;this.quill.deleteText(H.index-Ne,Ne,N.default.sources.USER),Object.keys(ve).length>0&&this.quill.formatLine(H.index-Ne,Ne,ve,N.default.sources.USER),this.quill.focus()}}function X(H,se){var ce=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(se.suffix)?2:1;if(!(H.index>=this.quill.getLength()-ce)){var ae={},Z=0,ve=this.quill.getLine(H.index),ne=o(ve,1),He=ne[0];if(se.offset>=He.length()-1){var Xe=this.quill.getLine(H.index+1),ie=o(Xe,1),Q=ie[0];if(Q){var Ne=He.formats(),de=this.quill.getFormat(H.index,1);ae=v.default.attributes.diff(Ne,de)||{},Z=Q.length()}}this.quill.deleteText(H.index,ce,N.default.sources.USER),Object.keys(ae).length>0&&this.quill.formatLine(H.index+Z-1,ce,ae,N.default.sources.USER)}}function W(H){var se=this.quill.getLines(H),ce={};if(se.length>1){var ae=se[0].formats(),Z=se[se.length-1].formats();ce=v.default.attributes.diff(Z,ae)||{}}this.quill.deleteText(H,N.default.sources.USER),Object.keys(ce).length>0&&this.quill.formatLine(H.index,1,ce,N.default.sources.USER),this.quill.setSelection(H.index,N.default.sources.SILENT),this.quill.focus()}function E(H,se){var ce=this;H.length>0&&this.quill.scroll.deleteAt(H.index,H.length);var ae=Object.keys(se.format).reduce(function(Z,ve){return w.default.query(ve,w.default.Scope.BLOCK)&&!Array.isArray(se.format[ve])&&(Z[ve]=se.format[ve]),Z},{});this.quill.insertText(H.index,`
`,ae,N.default.sources.USER),this.quill.setSelection(H.index+1,N.default.sources.SILENT),this.quill.focus(),Object.keys(se.format).forEach(function(Z){ae[Z]==null&&(Array.isArray(se.format[Z])||Z!=="link"&&ce.quill.format(Z,se.format[Z],N.default.sources.USER))})}function R(H){return{key:V.keys.TAB,shiftKey:!H,format:{"code-block":!0},handler:function(ce){var ae=w.default.query("code-block"),Z=ce.index,ve=ce.length,ne=this.quill.scroll.descendant(ae,Z),He=o(ne,2),Xe=He[0],ie=He[1];if(Xe!=null){var Q=this.quill.getIndex(Xe),Ne=Xe.newlineIndex(ie,!0)+1,de=Xe.newlineIndex(Q+ie+ve),ye=Xe.domNode.textContent.slice(Ne,de).split(`
`);ie=0,ye.forEach(function(xe,we){H?(Xe.insertAt(Ne+ie,ae.TAB),ie+=ae.TAB.length,we===0?Z+=ae.TAB.length:ve+=ae.TAB.length):xe.startsWith(ae.TAB)&&(Xe.deleteAt(Ne+ie,ae.TAB.length),ie-=ae.TAB.length,we===0?Z-=ae.TAB.length:ve-=ae.TAB.length),ie+=xe.length+1}),this.quill.update(N.default.sources.USER),this.quill.setSelection(Z,ve,N.default.sources.SILENT)}}}}function q(H){return{key:H[0].toUpperCase(),shortKey:!0,handler:function(ce,ae){this.quill.format(H,!ae.format[H],N.default.sources.USER)}}}function L(H){if(typeof H=="string"||typeof H=="number")return L({key:H});if((typeof H>"u"?"undefined":i(H))==="object"&&(H=(0,d.default)(H,!1)),typeof H.key=="string")if(V.keys[H.key.toUpperCase()]!=null)H.key=V.keys[H.key.toUpperCase()];else if(H.key.length===1)H.key=H.key.toUpperCase().charCodeAt(0);else return null;return H.shortKey&&(H[Y]=H.shortKey,delete H.shortKey),H}n.default=V,n.SHORTKEY=Y},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function v(b,w){var y=[],N=!0,S=!1,j=void 0;try{for(var _=b[Symbol.iterator](),T;!(N=(T=_.next()).done)&&(y.push(T.value),!(w&&y.length===w));N=!0);}catch(D){S=!0,j=D}finally{try{!N&&_.return&&_.return()}finally{if(S)throw j}}return y}return function(b,w){if(Array.isArray(b))return b;if(Symbol.iterator in Object(b))return v(b,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function v(b,w,y){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:v(S,w,y)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(y)}},l=function(){function v(b,w){for(var y=0;y<w.length;y++){var N=w[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,y){return w&&v(b.prototype,w),y&&v(b,y),b}}(),c=s(0),d=p(c),f=s(7),u=p(f);function p(v){return v&&v.__esModule?v:{default:v}}function h(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function m(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function g(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var x=function(v){g(b,v),l(b,null,[{key:"value",value:function(){}}]);function b(w,y){h(this,b);var N=m(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return N.selection=y,N.textNode=document.createTextNode(b.CONTENTS),N.domNode.appendChild(N.textNode),N._length=0,N}return l(b,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(y,N){if(this._length!==0)return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"format",this).call(this,y,N);for(var S=this,j=0;S!=null&&S.statics.scope!==d.default.Scope.BLOCK_BLOT;)j+=S.offset(S.parent),S=S.parent;S!=null&&(this._length=b.CONTENTS.length,S.optimize(),S.formatAt(j,b.CONTENTS.length,y,N),this._length=0)}},{key:"index",value:function(y,N){return y===this.textNode?0:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,y,N)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var y=this.textNode,N=this.selection.getNativeRange(),S=void 0,j=void 0,_=void 0;if(N!=null&&N.start.node===y&&N.end.node===y){var T=[y,N.start.offset,N.end.offset];S=T[0],j=T[1],_=T[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==b.CONTENTS){var D=this.textNode.data.split(b.CONTENTS).join("");this.next instanceof u.default?(S=this.next.domNode,this.next.insertAt(0,D),this.textNode.data=b.CONTENTS):(this.textNode.data=D,this.parent.insertBefore(d.default.create(this.textNode),this),this.textNode=document.createTextNode(b.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),j!=null){var A=[j,_].map(function(M){return Math.max(0,Math.min(S.data.length,M-1))}),C=i(A,2);return j=C[0],_=C[1],{startNode:S,startOffset:j,endNode:S,endOffset:_}}}}},{key:"update",value:function(y,N){var S=this;if(y.some(function(_){return _.type==="characterData"&&_.target===S.textNode})){var j=this.restore();j&&(N.range=j)}}},{key:"value",value:function(){return""}}]),b}(d.default.Embed);x.blotName="cursor",x.className="ql-cursor",x.tagName="span",x.CONTENTS="\uFEFF",n.default=x},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=d(i),l=s(4),c=d(l);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function u(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var h=function(m){p(g,m);function g(){return f(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return g}(o.default.Container);h.allowedChildren=[c.default,l.BlockEmbed,h],n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var i=function(){function x(v,b){for(var w=0;w<b.length;w++){var y=b[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,w){return b&&x(v.prototype,b),w&&x(v,w),v}}(),o=function x(v,b,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,b);if(y===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:x(N,b,w)}else{if("value"in y)return y.value;var S=y.get;return S===void 0?void 0:S.call(w)}},l=s(0),c=d(l);function d(x){return x&&x.__esModule?x:{default:x}}function f(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function u(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function p(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var h=function(x){p(v,x);function v(){return f(this,v),u(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"value",value:function(w){var y=o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,w);return y.startsWith("rgb(")?(y=y.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+y.split(",").map(function(N){return("00"+parseInt(N).toString(16)).slice(-2)}).join("")):y}}]),v}(c.default.Attributor.Style),m=new c.default.Attributor.Class("color","ql-color",{scope:c.default.Scope.INLINE}),g=new h("color","color",{scope:c.default.Scope.INLINE});n.ColorAttributor=h,n.ColorClass=m,n.ColorStyle=g},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var i=function(){function g(x,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,v,b){return v&&g(x.prototype,v),b&&g(x,b),x}}(),o=function g(x,v,b){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,v);if(w===void 0){var y=Object.getPrototypeOf(x);return y===null?void 0:g(y,v,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(6),c=d(l);function d(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function u(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function p(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var h=function(g){p(x,g);function x(){return f(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,[{key:"format",value:function(b,w){if(b!==this.statics.blotName||!w)return o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"format",this).call(this,b,w);w=this.constructor.sanitize(w),this.domNode.setAttribute("href",w)}}],[{key:"create",value:function(b){var w=o(x.__proto__||Object.getPrototypeOf(x),"create",this).call(this,b);return b=this.sanitize(b),w.setAttribute("href",b),w.setAttribute("rel","noopener noreferrer"),w.setAttribute("target","_blank"),w}},{key:"formats",value:function(b){return b.getAttribute("href")}},{key:"sanitize",value:function(b){return m(b,this.PROTOCOL_WHITELIST)?b:this.SANITIZED_URL}}]),x}(c.default);h.blotName="link",h.tagName="A",h.SANITIZED_URL="about:blank",h.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function m(g,x){var v=document.createElement("a");v.href=g;var b=v.href.slice(0,v.href.indexOf(":"));return x.indexOf(b)>-1}n.default=h,n.sanitize=m},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(x){return typeof x}:function(x){return x&&typeof Symbol=="function"&&x.constructor===Symbol&&x!==Symbol.prototype?"symbol":typeof x},o=function(){function x(v,b){for(var w=0;w<b.length;w++){var y=b[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,w){return b&&x(v.prototype,b),w&&x(v,w),v}}(),l=s(23),c=u(l),d=s(107),f=u(d);function u(x){return x&&x.__esModule?x:{default:x}}function p(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}var h=0;function m(x,v){x.setAttribute(v,x.getAttribute(v)!=="true")}var g=function(){function x(v){var b=this;p(this,x),this.select=v,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){b.togglePicker()}),this.label.addEventListener("keydown",function(w){switch(w.keyCode){case c.default.keys.ENTER:b.togglePicker();break;case c.default.keys.ESCAPE:b.escape(),w.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return o(x,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),m(this.label,"aria-expanded"),m(this.options,"aria-hidden")}},{key:"buildItem",value:function(b){var w=this,y=document.createElement("span");return y.tabIndex="0",y.setAttribute("role","button"),y.classList.add("ql-picker-item"),b.hasAttribute("value")&&y.setAttribute("data-value",b.getAttribute("value")),b.textContent&&y.setAttribute("data-label",b.textContent),y.addEventListener("click",function(){w.selectItem(y,!0)}),y.addEventListener("keydown",function(N){switch(N.keyCode){case c.default.keys.ENTER:w.selectItem(y,!0),N.preventDefault();break;case c.default.keys.ESCAPE:w.escape(),N.preventDefault();break}}),y}},{key:"buildLabel",value:function(){var b=document.createElement("span");return b.classList.add("ql-picker-label"),b.innerHTML=f.default,b.tabIndex="0",b.setAttribute("role","button"),b.setAttribute("aria-expanded","false"),this.container.appendChild(b),b}},{key:"buildOptions",value:function(){var b=this,w=document.createElement("span");w.classList.add("ql-picker-options"),w.setAttribute("aria-hidden","true"),w.tabIndex="-1",w.id="ql-picker-options-"+h,h+=1,this.label.setAttribute("aria-controls",w.id),this.options=w,[].slice.call(this.select.options).forEach(function(y){var N=b.buildItem(y);w.appendChild(N),y.selected===!0&&b.selectItem(N)}),this.container.appendChild(w)}},{key:"buildPicker",value:function(){var b=this;[].slice.call(this.select.attributes).forEach(function(w){b.container.setAttribute(w.name,w.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var b=this;this.close(),setTimeout(function(){return b.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(b){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y=this.container.querySelector(".ql-selected");if(b!==y&&(y!=null&&y.classList.remove("ql-selected"),b!=null&&(b.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(b.parentNode.children,b),b.hasAttribute("data-value")?this.label.setAttribute("data-value",b.getAttribute("data-value")):this.label.removeAttribute("data-value"),b.hasAttribute("data-label")?this.label.setAttribute("data-label",b.getAttribute("data-label")):this.label.removeAttribute("data-label"),w))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":i(Event))==="object"){var N=document.createEvent("Event");N.initEvent("change",!0,!0),this.select.dispatchEvent(N)}this.close()}}},{key:"update",value:function(){var b=void 0;if(this.select.selectedIndex>-1){var w=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];b=this.select.options[this.select.selectedIndex],this.selectItem(w)}else this.selectItem(null);var y=b!=null&&b!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",y)}}]),x}();n.default=g},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(0),o=B(i),l=s(5),c=B(l),d=s(4),f=B(d),u=s(16),p=B(u),h=s(25),m=B(h),g=s(24),x=B(g),v=s(35),b=B(v),w=s(6),y=B(w),N=s(22),S=B(N),j=s(7),_=B(j),T=s(55),D=B(T),A=s(42),C=B(A),M=s(23),F=B(M);function B(Y){return Y&&Y.__esModule?Y:{default:Y}}c.default.register({"blots/block":f.default,"blots/block/embed":d.BlockEmbed,"blots/break":p.default,"blots/container":m.default,"blots/cursor":x.default,"blots/embed":b.default,"blots/inline":y.default,"blots/scroll":S.default,"blots/text":_.default,"modules/clipboard":D.default,"modules/history":C.default,"modules/keyboard":F.default}),o.default.register(f.default,p.default,x.default,y.default,S.default,_.default),n.default=c.default},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(1),o=function(){function l(c){this.domNode=c,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(l.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),l.create=function(c){if(this.tagName==null)throw new i.ParchmentError("Blot definition missing tagName");var d;return Array.isArray(this.tagName)?(typeof c=="string"&&(c=c.toUpperCase(),parseInt(c).toString()===c&&(c=parseInt(c))),typeof c=="number"?d=document.createElement(this.tagName[c-1]):this.tagName.indexOf(c)>-1?d=document.createElement(c):d=document.createElement(this.tagName[0])):d=document.createElement(this.tagName),this.className&&d.classList.add(this.className),d},l.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},l.prototype.clone=function(){var c=this.domNode.cloneNode(!1);return i.create(c)},l.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},l.prototype.deleteAt=function(c,d){var f=this.isolate(c,d);f.remove()},l.prototype.formatAt=function(c,d,f,u){var p=this.isolate(c,d);if(i.query(f,i.Scope.BLOT)!=null&&u)p.wrap(f,u);else if(i.query(f,i.Scope.ATTRIBUTE)!=null){var h=i.create(this.statics.scope);p.wrap(h),h.format(f,u)}},l.prototype.insertAt=function(c,d,f){var u=f==null?i.create("text",d):i.create(d,f),p=this.split(c);this.parent.insertBefore(u,p)},l.prototype.insertInto=function(c,d){d===void 0&&(d=null),this.parent!=null&&this.parent.children.remove(this);var f=null;c.children.insertBefore(this,d),d!=null&&(f=d.domNode),(this.domNode.parentNode!=c.domNode||this.domNode.nextSibling!=f)&&c.domNode.insertBefore(this.domNode,f),this.parent=c,this.attach()},l.prototype.isolate=function(c,d){var f=this.split(c);return f.split(d),f},l.prototype.length=function(){return 1},l.prototype.offset=function(c){return c===void 0&&(c=this.parent),this.parent==null||this==c?0:this.parent.children.offset(this)+this.parent.offset(c)},l.prototype.optimize=function(c){this.domNode[i.DATA_KEY]!=null&&delete this.domNode[i.DATA_KEY].mutations},l.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},l.prototype.replace=function(c){c.parent!=null&&(c.parent.insertBefore(this,c.next),c.remove())},l.prototype.replaceWith=function(c,d){var f=typeof c=="string"?i.create(c,d):c;return f.replace(this),f},l.prototype.split=function(c,d){return c===0?this:this.next},l.prototype.update=function(c,d){},l.prototype.wrap=function(c,d){var f=typeof c=="string"?i.create(c,d):c;return this.parent!=null&&this.parent.insertBefore(f,this.next),f.appendChild(this),f},l.blotName="abstract",l}();n.default=o},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(12),o=s(32),l=s(33),c=s(1),d=function(){function f(u){this.attributes={},this.domNode=u,this.build()}return f.prototype.attribute=function(u,p){p?u.add(this.domNode,p)&&(u.value(this.domNode)!=null?this.attributes[u.attrName]=u:delete this.attributes[u.attrName]):(u.remove(this.domNode),delete this.attributes[u.attrName])},f.prototype.build=function(){var u=this;this.attributes={};var p=i.default.keys(this.domNode),h=o.default.keys(this.domNode),m=l.default.keys(this.domNode);p.concat(h).concat(m).forEach(function(g){var x=c.query(g,c.Scope.ATTRIBUTE);x instanceof i.default&&(u.attributes[x.attrName]=x)})},f.prototype.copy=function(u){var p=this;Object.keys(this.attributes).forEach(function(h){var m=p.attributes[h].value(p.domNode);u.format(h,m)})},f.prototype.move=function(u){var p=this;this.copy(u),Object.keys(this.attributes).forEach(function(h){p.attributes[h].remove(p.domNode)}),this.attributes={}},f.prototype.values=function(){var u=this;return Object.keys(this.attributes).reduce(function(p,h){return p[h]=u.attributes[h].value(u.domNode),p},{})},f}();n.default=d},function(r,n,s){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var p in u)u.hasOwnProperty(p)&&(f[p]=u[p])};return function(f,u){d(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12);function l(d,f){var u=d.getAttribute("class")||"";return u.split(/\s+/).filter(function(p){return p.indexOf(f+"-")===0})}var c=function(d){i(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.keys=function(u){return(u.getAttribute("class")||"").split(/\s+/).map(function(p){return p.split("-").slice(0,-1).join("-")})},f.prototype.add=function(u,p){return this.canAdd(u,p)?(this.remove(u),u.classList.add(this.keyName+"-"+p),!0):!1},f.prototype.remove=function(u){var p=l(u,this.keyName);p.forEach(function(h){u.classList.remove(h)}),u.classList.length===0&&u.removeAttribute("class")},f.prototype.value=function(u){var p=l(u,this.keyName)[0]||"",h=p.slice(this.keyName.length+1);return this.canAdd(u,h)?h:""},f}(o.default);n.default=c},function(r,n,s){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var p in u)u.hasOwnProperty(p)&&(f[p]=u[p])};return function(f,u){d(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(12);function l(d){var f=d.split("-"),u=f.slice(1).map(function(p){return p[0].toUpperCase()+p.slice(1)}).join("");return f[0]+u}var c=function(d){i(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.keys=function(u){return(u.getAttribute("style")||"").split(";").map(function(p){var h=p.split(":");return h[0].trim()})},f.prototype.add=function(u,p){return this.canAdd(u,p)?(u.style[l(this.keyName)]=p,!0):!1},f.prototype.remove=function(u){u.style[l(this.keyName)]="",u.getAttribute("style")||u.removeAttribute("style")},f.prototype.value=function(u){var p=u.style[l(this.keyName)];return this.canAdd(u,p)?p:""},f}(o.default);n.default=c},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function c(d,f){for(var u=0;u<f.length;u++){var p=f[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,f,u){return f&&c(d.prototype,f),u&&c(d,u),d}}();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=function(){function c(d,f){o(this,c),this.quill=d,this.options=f,this.modules={}}return i(c,[{key:"init",value:function(){var f=this;Object.keys(this.options.modules).forEach(function(u){f.modules[u]==null&&f.addModule(u)})}},{key:"addModule",value:function(f){var u=this.quill.constructor.import("modules/"+f);return this.modules[f]=new u(this.quill,this.options.modules[f]||{}),this.modules[f]}}]),c}();l.DEFAULTS={modules:{}},l.themes={default:l},n.default=l},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function v(b,w){for(var y=0;y<w.length;y++){var N=w[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,y){return w&&v(b.prototype,w),y&&v(b,y),b}}(),o=function v(b,w,y){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:v(S,w,y)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(y)}},l=s(0),c=u(l),d=s(7),f=u(d);function u(v){return v&&v.__esModule?v:{default:v}}function p(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function h(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function m(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var g="\uFEFF",x=function(v){m(b,v);function b(w){p(this,b);var y=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,w));return y.contentNode=document.createElement("span"),y.contentNode.setAttribute("contenteditable",!1),[].slice.call(y.domNode.childNodes).forEach(function(N){y.contentNode.appendChild(N)}),y.leftGuard=document.createTextNode(g),y.rightGuard=document.createTextNode(g),y.domNode.appendChild(y.leftGuard),y.domNode.appendChild(y.contentNode),y.domNode.appendChild(y.rightGuard),y}return i(b,[{key:"index",value:function(y,N){return y===this.leftGuard?0:y===this.rightGuard?1:o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"index",this).call(this,y,N)}},{key:"restore",value:function(y){var N=void 0,S=void 0,j=y.data.split(g).join("");if(y===this.leftGuard)if(this.prev instanceof f.default){var _=this.prev.length();this.prev.insertAt(_,j),N={startNode:this.prev.domNode,startOffset:_+j.length}}else S=document.createTextNode(j),this.parent.insertBefore(c.default.create(S),this),N={startNode:S,startOffset:j.length};else y===this.rightGuard&&(this.next instanceof f.default?(this.next.insertAt(0,j),N={startNode:this.next.domNode,startOffset:j.length}):(S=document.createTextNode(j),this.parent.insertBefore(c.default.create(S),this.next),N={startNode:S,startOffset:j.length}));return y.data=g,N}},{key:"update",value:function(y,N){var S=this;y.forEach(function(j){if(j.type==="characterData"&&(j.target===S.leftGuard||j.target===S.rightGuard)){var _=S.restore(j.target);_&&(N.range=_)}})}}]),b}(c.default.Embed);n.default=x},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["right","center","justify"]},d=new o.default.Attributor.Attribute("align","align",c),f=new o.default.Attributor.Class("align","ql-align",c),u=new o.default.Attributor.Style("align","text-align",c);n.AlignAttribute=d,n.AlignClass=f,n.AlignStyle=u},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var i=s(0),o=c(i),l=s(26);function c(u){return u&&u.__esModule?u:{default:u}}var d=new o.default.Attributor.Class("background","ql-bg",{scope:o.default.Scope.INLINE}),f=new l.ColorAttributor("background","background-color",{scope:o.default.Scope.INLINE});n.BackgroundClass=d,n.BackgroundStyle=f},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var i=s(0),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}var c={scope:o.default.Scope.BLOCK,whitelist:["rtl"]},d=new o.default.Attributor.Attribute("direction","dir",c),f=new o.default.Attributor.Class("direction","ql-direction",c),u=new o.default.Attributor.Style("direction","direction",c);n.DirectionAttribute=d,n.DirectionClass=f,n.DirectionStyle=u},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var i=function(){function v(b,w){for(var y=0;y<w.length;y++){var N=w[y];N.enumerable=N.enumerable||!1,N.configurable=!0,"value"in N&&(N.writable=!0),Object.defineProperty(b,N.key,N)}}return function(b,w,y){return w&&v(b.prototype,w),y&&v(b,y),b}}(),o=function v(b,w,y){b===null&&(b=Function.prototype);var N=Object.getOwnPropertyDescriptor(b,w);if(N===void 0){var S=Object.getPrototypeOf(b);return S===null?void 0:v(S,w,y)}else{if("value"in N)return N.value;var j=N.get;return j===void 0?void 0:j.call(y)}},l=s(0),c=d(l);function d(v){return v&&v.__esModule?v:{default:v}}function f(v,b){if(!(v instanceof b))throw new TypeError("Cannot call a class as a function")}function u(v,b){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:v}function p(v,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);v.prototype=Object.create(b&&b.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(v,b):v.__proto__=b)}var h={scope:c.default.Scope.INLINE,whitelist:["serif","monospace"]},m=new c.default.Attributor.Class("font","ql-font",h),g=function(v){p(b,v);function b(){return f(this,b),u(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return i(b,[{key:"value",value:function(y){return o(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"value",this).call(this,y).replace(/["']/g,"")}}]),b}(c.default.Attributor.Style),x=new g("font","font-family",h);n.FontStyle=x,n.FontClass=m},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var i=s(0),o=l(i);function l(f){return f&&f.__esModule?f:{default:f}}var c=new o.default.Attributor.Class("size","ql-size",{scope:o.default.Scope.INLINE,whitelist:["small","large","huge"]}),d=new o.default.Attributor.Style("size","font-size",{scope:o.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=c,n.SizeStyle=d},function(r,n,s){r.exports={align:{"":s(76),center:s(77),right:s(78),justify:s(79)},background:s(80),blockquote:s(81),bold:s(82),clean:s(83),code:s(58),"code-block":s(58),color:s(84),direction:{"":s(85),rtl:s(86)},float:{center:s(87),full:s(88),left:s(89),right:s(90)},formula:s(91),header:{1:s(92),2:s(93)},italic:s(94),image:s(95),indent:{"+1":s(96),"-1":s(97)},link:s(98),list:{ordered:s(99),bullet:s(100),check:s(101)},script:{sub:s(102),super:s(103)},strike:s(104),underline:s(105),video:s(106)}},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var i=function(){function w(y,N){for(var S=0;S<N.length;S++){var j=N[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(y,j.key,j)}}return function(y,N,S){return N&&w(y.prototype,N),S&&w(y,S),y}}(),o=s(0),l=p(o),c=s(5),d=p(c),f=s(9),u=p(f);function p(w){return w&&w.__esModule?w:{default:w}}function h(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function m(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function g(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var x=function(w){g(y,w);function y(N,S){h(this,y);var j=m(this,(y.__proto__||Object.getPrototypeOf(y)).call(this,N,S));return j.lastRecorded=0,j.ignoreChange=!1,j.clear(),j.quill.on(d.default.events.EDITOR_CHANGE,function(_,T,D,A){_!==d.default.events.TEXT_CHANGE||j.ignoreChange||(!j.options.userOnly||A===d.default.sources.USER?j.record(T,D):j.transform(T))}),j.quill.keyboard.addBinding({key:"Z",shortKey:!0},j.undo.bind(j)),j.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},j.redo.bind(j)),/Win/i.test(navigator.platform)&&j.quill.keyboard.addBinding({key:"Y",shortKey:!0},j.redo.bind(j)),j}return i(y,[{key:"change",value:function(S,j){if(this.stack[S].length!==0){var _=this.stack[S].pop();this.stack[j].push(_),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(_[S],d.default.sources.USER),this.ignoreChange=!1;var T=b(_[S]);this.quill.setSelection(T)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(S,j){if(S.ops.length!==0){this.stack.redo=[];var _=this.quill.getContents().diff(j),T=Date.now();if(this.lastRecorded+this.options.delay>T&&this.stack.undo.length>0){var D=this.stack.undo.pop();_=_.compose(D.undo),S=D.redo.compose(S)}else this.lastRecorded=T;this.stack.undo.push({redo:S,undo:_}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(S){this.stack.undo.forEach(function(j){j.undo=S.transform(j.undo,!0),j.redo=S.transform(j.redo,!0)}),this.stack.redo.forEach(function(j){j.undo=S.transform(j.undo,!0),j.redo=S.transform(j.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),y}(u.default);x.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function v(w){var y=w.ops[w.ops.length-1];return y==null?!1:y.insert!=null?typeof y.insert=="string"&&y.insert.endsWith(`
`):y.attributes!=null?Object.keys(y.attributes).some(function(N){return l.default.query(N,l.default.Scope.BLOCK)!=null}):!1}function b(w){var y=w.reduce(function(S,j){return S+=j.delete||0,S},0),N=w.length()-y;return v(w)&&(N-=1),N}n.default=x,n.getLastChangeIndex=b},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var i=function(){function E(R,q){for(var L=0;L<q.length;L++){var H=q[L];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(R,H.key,H)}}return function(R,q,L){return q&&E(R.prototype,q),L&&E(R,L),R}}(),o=function E(R,q,L){R===null&&(R=Function.prototype);var H=Object.getOwnPropertyDescriptor(R,q);if(H===void 0){var se=Object.getPrototypeOf(R);return se===null?void 0:E(se,q,L)}else{if("value"in H)return H.value;var ce=H.get;return ce===void 0?void 0:ce.call(L)}},l=s(3),c=T(l),d=s(2),f=T(d),u=s(8),p=T(u),h=s(23),m=T(h),g=s(34),x=T(g),v=s(59),b=T(v),w=s(60),y=T(w),N=s(28),S=T(N),j=s(61),_=T(j);function T(E){return E&&E.__esModule?E:{default:E}}function D(E,R){if(!(E instanceof R))throw new TypeError("Cannot call a class as a function")}function A(E,R){if(!E)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return R&&(typeof R=="object"||typeof R=="function")?R:E}function C(E,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof R);E.prototype=Object.create(R&&R.prototype,{constructor:{value:E,enumerable:!1,writable:!0,configurable:!0}}),R&&(Object.setPrototypeOf?Object.setPrototypeOf(E,R):E.__proto__=R)}var M=[!1,"center","right","justify"],F=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],B=[!1,"serif","monospace"],Y=["1","2","3",!1],V=["small",!1,"large","huge"],J=function(E){C(R,E);function R(q,L){D(this,R);var H=A(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,q,L)),se=function ce(ae){if(!document.body.contains(q.root))return document.body.removeEventListener("click",ce);H.tooltip!=null&&!H.tooltip.root.contains(ae.target)&&document.activeElement!==H.tooltip.textbox&&!H.quill.hasFocus()&&H.tooltip.hide(),H.pickers!=null&&H.pickers.forEach(function(Z){Z.container.contains(ae.target)||Z.close()})};return q.emitter.listenDOM("click",document.body,se),H}return i(R,[{key:"addModule",value:function(L){var H=o(R.prototype.__proto__||Object.getPrototypeOf(R.prototype),"addModule",this).call(this,L);return L==="toolbar"&&this.extendToolbar(H),H}},{key:"buildButtons",value:function(L,H){L.forEach(function(se){var ce=se.getAttribute("class")||"";ce.split(/\s+/).forEach(function(ae){if(ae.startsWith("ql-")&&(ae=ae.slice(3),H[ae]!=null))if(ae==="direction")se.innerHTML=H[ae][""]+H[ae].rtl;else if(typeof H[ae]=="string")se.innerHTML=H[ae];else{var Z=se.value||"";Z!=null&&H[ae][Z]&&(se.innerHTML=H[ae][Z])}})})}},{key:"buildPickers",value:function(L,H){var se=this;this.pickers=L.map(function(ae){if(ae.classList.contains("ql-align"))return ae.querySelector("option")==null&&W(ae,M),new y.default(ae,H.align);if(ae.classList.contains("ql-background")||ae.classList.contains("ql-color")){var Z=ae.classList.contains("ql-background")?"background":"color";return ae.querySelector("option")==null&&W(ae,F,Z==="background"?"#ffffff":"#000000"),new b.default(ae,H[Z])}else return ae.querySelector("option")==null&&(ae.classList.contains("ql-font")?W(ae,B):ae.classList.contains("ql-header")?W(ae,Y):ae.classList.contains("ql-size")&&W(ae,V)),new S.default(ae)});var ce=function(){se.pickers.forEach(function(Z){Z.update()})};this.quill.on(p.default.events.EDITOR_CHANGE,ce)}}]),R}(x.default);J.DEFAULTS=(0,c.default)(!0,{},x.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var R=this,q=this.container.querySelector("input.ql-image[type=file]");q==null&&(q=document.createElement("input"),q.setAttribute("type","file"),q.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),q.classList.add("ql-image"),q.addEventListener("change",function(){if(q.files!=null&&q.files[0]!=null){var L=new FileReader;L.onload=function(H){var se=R.quill.getSelection(!0);R.quill.updateContents(new f.default().retain(se.index).delete(se.length).insert({image:H.target.result}),p.default.sources.USER),R.quill.setSelection(se.index+1,p.default.sources.SILENT),q.value=""},L.readAsDataURL(q.files[0])}}),this.container.appendChild(q)),q.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var U=function(E){C(R,E);function R(q,L){D(this,R);var H=A(this,(R.__proto__||Object.getPrototypeOf(R)).call(this,q,L));return H.textbox=H.root.querySelector('input[type="text"]'),H.listen(),H}return i(R,[{key:"listen",value:function(){var L=this;this.textbox.addEventListener("keydown",function(H){m.default.match(H,"enter")?(L.save(),H.preventDefault()):m.default.match(H,"escape")&&(L.cancel(),H.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),H!=null?this.textbox.value=H:L!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+L)||""),this.root.setAttribute("data-mode",L)}},{key:"restoreFocus",value:function(){var L=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=L}},{key:"save",value:function(){var L=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var H=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",L,p.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",L,p.default.sources.USER)),this.quill.root.scrollTop=H;break}case"video":L=X(L);case"formula":{if(!L)break;var se=this.quill.getSelection(!0);if(se!=null){var ce=se.index+se.length;this.quill.insertEmbed(ce,this.root.getAttribute("data-mode"),L,p.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(ce+1," ",p.default.sources.USER),this.quill.setSelection(ce+2,p.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),R}(_.default);function X(E){var R=E.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||E.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return R?(R[1]||"https")+"://www.youtube.com/embed/"+R[2]+"?showinfo=0":(R=E.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(R[1]||"https")+"://player.vimeo.com/video/"+R[2]+"/":E}function W(E,R){var q=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;R.forEach(function(L){var H=document.createElement("option");L===q?H.setAttribute("selected","selected"):H.setAttribute("value",L),E.appendChild(H)})}n.BaseTooltip=U,n.default=J},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function o(){this.head=this.tail=null,this.length=0}return o.prototype.append=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];this.insertBefore(l[0],null),l.length>1&&this.append.apply(this,l.slice(1))},o.prototype.contains=function(l){for(var c,d=this.iterator();c=d();)if(c===l)return!0;return!1},o.prototype.insertBefore=function(l,c){l&&(l.next=c,c!=null?(l.prev=c.prev,c.prev!=null&&(c.prev.next=l),c.prev=l,c===this.head&&(this.head=l)):this.tail!=null?(this.tail.next=l,l.prev=this.tail,this.tail=l):(l.prev=null,this.head=this.tail=l),this.length+=1)},o.prototype.offset=function(l){for(var c=0,d=this.head;d!=null;){if(d===l)return c;c+=d.length(),d=d.next}return-1},o.prototype.remove=function(l){this.contains(l)&&(l.prev!=null&&(l.prev.next=l.next),l.next!=null&&(l.next.prev=l.prev),l===this.head&&(this.head=l.next),l===this.tail&&(this.tail=l.prev),this.length-=1)},o.prototype.iterator=function(l){return l===void 0&&(l=this.head),function(){var c=l;return l!=null&&(l=l.next),c}},o.prototype.find=function(l,c){c===void 0&&(c=!1);for(var d,f=this.iterator();d=f();){var u=d.length();if(l<u||c&&l===u&&(d.next==null||d.next.length()!==0))return[d,l];l-=u}return[null,0]},o.prototype.forEach=function(l){for(var c,d=this.iterator();c=d();)l(c)},o.prototype.forEachAt=function(l,c,d){if(!(c<=0))for(var f=this.find(l),u=f[0],p=f[1],h,m=l-p,g=this.iterator(u);(h=g())&&m<l+c;){var x=h.length();l>m?d(h,l-m,Math.min(c,m+x-l)):d(h,0,Math.min(x,l+c-m)),m+=x}},o.prototype.map=function(l){return this.reduce(function(c,d){return c.push(l(d)),c},[])},o.prototype.reduce=function(l,c){for(var d,f=this.iterator();d=f();)c=l(c,d);return c},o}();n.default=i},function(r,n,s){var i=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,h){p.__proto__=h}||function(p,h){for(var m in h)h.hasOwnProperty(m)&&(p[m]=h[m])};return function(p,h){u(p,h);function m(){this.constructor=p}p.prototype=h===null?Object.create(h):(m.prototype=h.prototype,new m)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(17),l=s(1),c={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},d=100,f=function(u){i(p,u);function p(h){var m=u.call(this,h)||this;return m.scroll=m,m.observer=new MutationObserver(function(g){m.update(g)}),m.observer.observe(m.domNode,c),m.attach(),m}return p.prototype.detach=function(){u.prototype.detach.call(this),this.observer.disconnect()},p.prototype.deleteAt=function(h,m){this.update(),h===0&&m===this.length()?this.children.forEach(function(g){g.remove()}):u.prototype.deleteAt.call(this,h,m)},p.prototype.formatAt=function(h,m,g,x){this.update(),u.prototype.formatAt.call(this,h,m,g,x)},p.prototype.insertAt=function(h,m,g){this.update(),u.prototype.insertAt.call(this,h,m,g)},p.prototype.optimize=function(h,m){var g=this;h===void 0&&(h=[]),m===void 0&&(m={}),u.prototype.optimize.call(this,m);for(var x=[].slice.call(this.observer.takeRecords());x.length>0;)h.push(x.pop());for(var v=function(N,S){S===void 0&&(S=!0),!(N==null||N===g)&&N.domNode.parentNode!=null&&(N.domNode[l.DATA_KEY].mutations==null&&(N.domNode[l.DATA_KEY].mutations=[]),S&&v(N.parent))},b=function(N){N.domNode[l.DATA_KEY]==null||N.domNode[l.DATA_KEY].mutations==null||(N instanceof o.default&&N.children.forEach(b),N.optimize(m))},w=h,y=0;w.length>0;y+=1){if(y>=d)throw new Error("[Parchment] Maximum optimize iterations reached");for(w.forEach(function(N){var S=l.find(N.target,!0);S!=null&&(S.domNode===N.target&&(N.type==="childList"?(v(l.find(N.previousSibling,!1)),[].forEach.call(N.addedNodes,function(j){var _=l.find(j,!1);v(_,!1),_ instanceof o.default&&_.children.forEach(function(T){v(T,!1)})})):N.type==="attributes"&&v(S.prev)),v(S))}),this.children.forEach(b),w=[].slice.call(this.observer.takeRecords()),x=w.slice();x.length>0;)h.push(x.pop())}},p.prototype.update=function(h,m){var g=this;m===void 0&&(m={}),h=h||this.observer.takeRecords(),h.map(function(x){var v=l.find(x.target,!0);return v==null?null:v.domNode[l.DATA_KEY].mutations==null?(v.domNode[l.DATA_KEY].mutations=[x],v):(v.domNode[l.DATA_KEY].mutations.push(x),null)}).forEach(function(x){x==null||x===g||x.domNode[l.DATA_KEY]==null||x.update(x.domNode[l.DATA_KEY].mutations||[],m)}),this.domNode[l.DATA_KEY].mutations!=null&&u.prototype.update.call(this,this.domNode[l.DATA_KEY].mutations,m),this.optimize(h,m)},p.blotName="scroll",p.defaultChild="block",p.scope=l.Scope.BLOCK_BLOT,p.tagName="DIV",p}(o.default);n.default=f},function(r,n,s){var i=this&&this.__extends||function(){var f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,p){u.__proto__=p}||function(u,p){for(var h in p)p.hasOwnProperty(h)&&(u[h]=p[h])};return function(u,p){f(u,p);function h(){this.constructor=u}u.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(18),l=s(1);function c(f,u){if(Object.keys(f).length!==Object.keys(u).length)return!1;for(var p in f)if(f[p]!==u[p])return!1;return!0}var d=function(f){i(u,f);function u(){return f!==null&&f.apply(this,arguments)||this}return u.formats=function(p){if(p.tagName!==u.tagName)return f.formats.call(this,p)},u.prototype.format=function(p,h){var m=this;p===this.statics.blotName&&!h?(this.children.forEach(function(g){g instanceof o.default||(g=g.wrap(u.blotName,!0)),m.attributes.copy(g)}),this.unwrap()):f.prototype.format.call(this,p,h)},u.prototype.formatAt=function(p,h,m,g){if(this.formats()[m]!=null||l.query(m,l.Scope.ATTRIBUTE)){var x=this.isolate(p,h);x.format(m,g)}else f.prototype.formatAt.call(this,p,h,m,g)},u.prototype.optimize=function(p){f.prototype.optimize.call(this,p);var h=this.formats();if(Object.keys(h).length===0)return this.unwrap();var m=this.next;m instanceof u&&m.prev===this&&c(h,m.formats())&&(m.moveChildren(this),m.remove())},u.blotName="inline",u.scope=l.Scope.INLINE_BLOT,u.tagName="SPAN",u}(o.default);n.default=d},function(r,n,s){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var p in u)u.hasOwnProperty(p)&&(f[p]=u[p])};return function(f,u){d(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(18),l=s(1),c=function(d){i(f,d);function f(){return d!==null&&d.apply(this,arguments)||this}return f.formats=function(u){var p=l.query(f.blotName).tagName;if(u.tagName!==p)return d.formats.call(this,u)},f.prototype.format=function(u,p){l.query(u,l.Scope.BLOCK)!=null&&(u===this.statics.blotName&&!p?this.replaceWith(f.blotName):d.prototype.format.call(this,u,p))},f.prototype.formatAt=function(u,p,h,m){l.query(h,l.Scope.BLOCK)!=null?this.format(h,m):d.prototype.formatAt.call(this,u,p,h,m)},f.prototype.insertAt=function(u,p,h){if(h==null||l.query(p,l.Scope.INLINE)!=null)d.prototype.insertAt.call(this,u,p,h);else{var m=this.split(u),g=l.create(p,h);m.parent.insertBefore(g,m)}},f.prototype.update=function(u,p){navigator.userAgent.match(/Trident/)?this.build():d.prototype.update.call(this,u,p)},f.blotName="block",f.scope=l.Scope.BLOCK_BLOT,f.tagName="P",f}(o.default);n.default=c},function(r,n,s){var i=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,f){d.__proto__=f}||function(d,f){for(var u in f)f.hasOwnProperty(u)&&(d[u]=f[u])};return function(d,f){c(d,f);function u(){this.constructor=d}d.prototype=f===null?Object.create(f):(u.prototype=f.prototype,new u)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(19),l=function(c){i(d,c);function d(){return c!==null&&c.apply(this,arguments)||this}return d.formats=function(f){},d.prototype.format=function(f,u){c.prototype.formatAt.call(this,0,this.length(),f,u)},d.prototype.formatAt=function(f,u,p,h){f===0&&u===this.length()?this.format(p,h):c.prototype.formatAt.call(this,f,u,p,h)},d.prototype.formats=function(){return this.statics.formats(this.domNode)},d}(o.default);n.default=l},function(r,n,s){var i=this&&this.__extends||function(){var d=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,u){f.__proto__=u}||function(f,u){for(var p in u)u.hasOwnProperty(p)&&(f[p]=u[p])};return function(f,u){d(f,u);function p(){this.constructor=f}f.prototype=u===null?Object.create(u):(p.prototype=u.prototype,new p)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=s(19),l=s(1),c=function(d){i(f,d);function f(u){var p=d.call(this,u)||this;return p.text=p.statics.value(p.domNode),p}return f.create=function(u){return document.createTextNode(u)},f.value=function(u){var p=u.data;return p.normalize&&(p=p.normalize()),p},f.prototype.deleteAt=function(u,p){this.domNode.data=this.text=this.text.slice(0,u)+this.text.slice(u+p)},f.prototype.index=function(u,p){return this.domNode===u?p:-1},f.prototype.insertAt=function(u,p,h){h==null?(this.text=this.text.slice(0,u)+p+this.text.slice(u),this.domNode.data=this.text):d.prototype.insertAt.call(this,u,p,h)},f.prototype.length=function(){return this.text.length},f.prototype.optimize=function(u){d.prototype.optimize.call(this,u),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof f&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},f.prototype.position=function(u,p){return[this.domNode,u]},f.prototype.split=function(u,p){if(p===void 0&&(p=!1),!p){if(u===0)return this;if(u===this.length())return this.next}var h=l.create(this.domNode.splitText(u));return this.parent.insertBefore(h,this.next),this.text=this.statics.value(this.domNode),h},f.prototype.update=function(u,p){var h=this;u.some(function(m){return m.type==="characterData"&&m.target===h.domNode})&&(this.text=this.statics.value(this.domNode))},f.prototype.value=function(){return this.text},f.blotName="text",f.scope=l.Scope.INLINE_BLOT,f}(o.default);n.default=c},function(r,n,s){var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var o=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(l,c){return arguments.length>1&&!this.contains(l)==!c?c:o.call(this,l)}}String.prototype.startsWith||(String.prototype.startsWith=function(l,c){return c=c||0,this.substr(c,l.length)===l}),String.prototype.endsWith||(String.prototype.endsWith=function(l,c){var d=this.toString();(typeof c!="number"||!isFinite(c)||Math.floor(c)!==c||c>d.length)&&(c=d.length),c-=l.length;var f=d.indexOf(l,c);return f!==-1&&f===c}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(c){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof c!="function")throw new TypeError("predicate must be a function");for(var d=Object(this),f=d.length>>>0,u=arguments[1],p,h=0;h<f;h++)if(p=d[h],c.call(u,p,h,d))return p}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(r,n){var s=-1,i=1,o=0;function l(y,N,S){if(y==N)return y?[[o,y]]:[];(S<0||y.length<S)&&(S=null);var j=u(y,N),_=y.substring(0,j);y=y.substring(j),N=N.substring(j),j=p(y,N);var T=y.substring(y.length-j);y=y.substring(0,y.length-j),N=N.substring(0,N.length-j);var D=c(y,N);return _&&D.unshift([o,_]),T&&D.push([o,T]),m(D),S!=null&&(D=v(D,S)),D=b(D),D}function c(y,N){var S;if(!y)return[[i,N]];if(!N)return[[s,y]];var j=y.length>N.length?y:N,_=y.length>N.length?N:y,T=j.indexOf(_);if(T!=-1)return S=[[i,j.substring(0,T)],[o,_],[i,j.substring(T+_.length)]],y.length>N.length&&(S[0][0]=S[2][0]=s),S;if(_.length==1)return[[s,y],[i,N]];var D=h(y,N);if(D){var A=D[0],C=D[1],M=D[2],F=D[3],B=D[4],Y=l(A,M),V=l(C,F);return Y.concat([[o,B]],V)}return d(y,N)}function d(y,N){for(var S=y.length,j=N.length,_=Math.ceil((S+j)/2),T=_,D=2*_,A=new Array(D),C=new Array(D),M=0;M<D;M++)A[M]=-1,C[M]=-1;A[T+1]=0,C[T+1]=0;for(var F=S-j,B=F%2!=0,Y=0,V=0,J=0,U=0,X=0;X<_;X++){for(var W=-X+Y;W<=X-V;W+=2){var E=T+W,R;W==-X||W!=X&&A[E-1]<A[E+1]?R=A[E+1]:R=A[E-1]+1;for(var q=R-W;R<S&&q<j&&y.charAt(R)==N.charAt(q);)R++,q++;if(A[E]=R,R>S)V+=2;else if(q>j)Y+=2;else if(B){var L=T+F-W;if(L>=0&&L<D&&C[L]!=-1){var H=S-C[L];if(R>=H)return f(y,N,R,q)}}}for(var se=-X+J;se<=X-U;se+=2){var L=T+se,H;se==-X||se!=X&&C[L-1]<C[L+1]?H=C[L+1]:H=C[L-1]+1;for(var ce=H-se;H<S&&ce<j&&y.charAt(S-H-1)==N.charAt(j-ce-1);)H++,ce++;if(C[L]=H,H>S)U+=2;else if(ce>j)J+=2;else if(!B){var E=T+F-se;if(E>=0&&E<D&&A[E]!=-1){var R=A[E],q=T+R-E;if(H=S-H,R>=H)return f(y,N,R,q)}}}}return[[s,y],[i,N]]}function f(y,N,S,j){var _=y.substring(0,S),T=N.substring(0,j),D=y.substring(S),A=N.substring(j),C=l(_,T),M=l(D,A);return C.concat(M)}function u(y,N){if(!y||!N||y.charAt(0)!=N.charAt(0))return 0;for(var S=0,j=Math.min(y.length,N.length),_=j,T=0;S<_;)y.substring(T,_)==N.substring(T,_)?(S=_,T=S):j=_,_=Math.floor((j-S)/2+S);return _}function p(y,N){if(!y||!N||y.charAt(y.length-1)!=N.charAt(N.length-1))return 0;for(var S=0,j=Math.min(y.length,N.length),_=j,T=0;S<_;)y.substring(y.length-_,y.length-T)==N.substring(N.length-_,N.length-T)?(S=_,T=S):j=_,_=Math.floor((j-S)/2+S);return _}function h(y,N){var S=y.length>N.length?y:N,j=y.length>N.length?N:y;if(S.length<4||j.length*2<S.length)return null;function _(V,J,U){for(var X=V.substring(U,U+Math.floor(V.length/4)),W=-1,E="",R,q,L,H;(W=J.indexOf(X,W+1))!=-1;){var se=u(V.substring(U),J.substring(W)),ce=p(V.substring(0,U),J.substring(0,W));E.length<ce+se&&(E=J.substring(W-ce,W)+J.substring(W,W+se),R=V.substring(0,U-ce),q=V.substring(U+se),L=J.substring(0,W-ce),H=J.substring(W+se))}return E.length*2>=V.length?[R,q,L,H,E]:null}var T=_(S,j,Math.ceil(S.length/4)),D=_(S,j,Math.ceil(S.length/2)),A;if(!T&&!D)return null;D?T?A=T[4].length>D[4].length?T:D:A=D:A=T;var C,M,F,B;y.length>N.length?(C=A[0],M=A[1],F=A[2],B=A[3]):(F=A[0],B=A[1],C=A[2],M=A[3]);var Y=A[4];return[C,M,F,B,Y]}function m(y){y.push([o,""]);for(var N=0,S=0,j=0,_="",T="",D;N<y.length;)switch(y[N][0]){case i:j++,T+=y[N][1],N++;break;case s:S++,_+=y[N][1],N++;break;case o:S+j>1?(S!==0&&j!==0&&(D=u(T,_),D!==0&&(N-S-j>0&&y[N-S-j-1][0]==o?y[N-S-j-1][1]+=T.substring(0,D):(y.splice(0,0,[o,T.substring(0,D)]),N++),T=T.substring(D),_=_.substring(D)),D=p(T,_),D!==0&&(y[N][1]=T.substring(T.length-D)+y[N][1],T=T.substring(0,T.length-D),_=_.substring(0,_.length-D))),S===0?y.splice(N-j,S+j,[i,T]):j===0?y.splice(N-S,S+j,[s,_]):y.splice(N-S-j,S+j,[s,_],[i,T]),N=N-S-j+(S?1:0)+(j?1:0)+1):N!==0&&y[N-1][0]==o?(y[N-1][1]+=y[N][1],y.splice(N,1)):N++,j=0,S=0,_="",T="";break}y[y.length-1][1]===""&&y.pop();var A=!1;for(N=1;N<y.length-1;)y[N-1][0]==o&&y[N+1][0]==o&&(y[N][1].substring(y[N][1].length-y[N-1][1].length)==y[N-1][1]?(y[N][1]=y[N-1][1]+y[N][1].substring(0,y[N][1].length-y[N-1][1].length),y[N+1][1]=y[N-1][1]+y[N+1][1],y.splice(N-1,1),A=!0):y[N][1].substring(0,y[N+1][1].length)==y[N+1][1]&&(y[N-1][1]+=y[N+1][1],y[N][1]=y[N][1].substring(y[N+1][1].length)+y[N+1][1],y.splice(N+1,1),A=!0)),N++;A&&m(y)}var g=l;g.INSERT=i,g.DELETE=s,g.EQUAL=o,r.exports=g;function x(y,N){if(N===0)return[o,y];for(var S=0,j=0;j<y.length;j++){var _=y[j];if(_[0]===s||_[0]===o){var T=S+_[1].length;if(N===T)return[j+1,y];if(N<T){y=y.slice();var D=N-S,A=[_[0],_[1].slice(0,D)],C=[_[0],_[1].slice(D)];return y.splice(j,1,A,C),[j+1,y]}else S=T}}throw new Error("cursor_pos is out of bounds!")}function v(y,N){var S=x(y,N),j=S[1],_=S[0],T=j[_],D=j[_+1];if(T==null)return y;if(T[0]!==o)return y;if(D!=null&&T[1]+D[1]===D[1]+T[1])return j.splice(_,2,D,T),w(j,_,2);if(D!=null&&D[1].indexOf(T[1])===0){j.splice(_,2,[D[0],T[1]],[0,T[1]]);var A=D[1].slice(T[1].length);return A.length>0&&j.splice(_+2,0,[D[0],A]),w(j,_,3)}else return y}function b(y){for(var N=!1,S=function(D){return D.charCodeAt(0)>=56320&&D.charCodeAt(0)<=57343},j=function(D){return D.charCodeAt(D.length-1)>=55296&&D.charCodeAt(D.length-1)<=56319},_=2;_<y.length;_+=1)y[_-2][0]===o&&j(y[_-2][1])&&y[_-1][0]===s&&S(y[_-1][1])&&y[_][0]===i&&S(y[_][1])&&(N=!0,y[_-1][1]=y[_-2][1].slice(-1)+y[_-1][1],y[_][1]=y[_-2][1].slice(-1)+y[_][1],y[_-2][1]=y[_-2][1].slice(0,-1));if(!N)return y;for(var T=[],_=0;_<y.length;_+=1)y[_][1].length>0&&T.push(y[_]);return T}function w(y,N,S){for(var j=N+S-1;j>=0&&j>=N-1;j--)if(j+1<y.length){var _=y[j],T=y[j+1];_[0]===T[1]&&y.splice(j,2,[_[0],_[1]+T[1]])}return y}},function(r,n){n=r.exports=typeof Object.keys=="function"?Object.keys:s,n.shim=s;function s(i){var o=[];for(var l in i)o.push(l);return o}},function(r,n){var s=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=r.exports=s?i:o,n.supported=i;function i(l){return Object.prototype.toString.call(l)=="[object Arguments]"}n.unsupported=o;function o(l){return l&&typeof l=="object"&&typeof l.length=="number"&&Object.prototype.hasOwnProperty.call(l,"callee")&&!Object.prototype.propertyIsEnumerable.call(l,"callee")||!1}},function(r,n){var s=Object.prototype.hasOwnProperty,i="~";function o(){}Object.create&&(o.prototype=Object.create(null),new o().__proto__||(i=!1));function l(d,f,u){this.fn=d,this.context=f,this.once=u||!1}function c(){this._events=new o,this._eventsCount=0}c.prototype.eventNames=function(){var f=[],u,p;if(this._eventsCount===0)return f;for(p in u=this._events)s.call(u,p)&&f.push(i?p.slice(1):p);return Object.getOwnPropertySymbols?f.concat(Object.getOwnPropertySymbols(u)):f},c.prototype.listeners=function(f,u){var p=i?i+f:f,h=this._events[p];if(u)return!!h;if(!h)return[];if(h.fn)return[h.fn];for(var m=0,g=h.length,x=new Array(g);m<g;m++)x[m]=h[m].fn;return x},c.prototype.emit=function(f,u,p,h,m,g){var x=i?i+f:f;if(!this._events[x])return!1;var v=this._events[x],b=arguments.length,w,y;if(v.fn){switch(v.once&&this.removeListener(f,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,u),!0;case 3:return v.fn.call(v.context,u,p),!0;case 4:return v.fn.call(v.context,u,p,h),!0;case 5:return v.fn.call(v.context,u,p,h,m),!0;case 6:return v.fn.call(v.context,u,p,h,m,g),!0}for(y=1,w=new Array(b-1);y<b;y++)w[y-1]=arguments[y];v.fn.apply(v.context,w)}else{var N=v.length,S;for(y=0;y<N;y++)switch(v[y].once&&this.removeListener(f,v[y].fn,void 0,!0),b){case 1:v[y].fn.call(v[y].context);break;case 2:v[y].fn.call(v[y].context,u);break;case 3:v[y].fn.call(v[y].context,u,p);break;case 4:v[y].fn.call(v[y].context,u,p,h);break;default:if(!w)for(S=1,w=new Array(b-1);S<b;S++)w[S-1]=arguments[S];v[y].fn.apply(v[y].context,w)}}return!0},c.prototype.on=function(f,u,p){var h=new l(u,p||this),m=i?i+f:f;return this._events[m]?this._events[m].fn?this._events[m]=[this._events[m],h]:this._events[m].push(h):(this._events[m]=h,this._eventsCount++),this},c.prototype.once=function(f,u,p){var h=new l(u,p||this,!0),m=i?i+f:f;return this._events[m]?this._events[m].fn?this._events[m]=[this._events[m],h]:this._events[m].push(h):(this._events[m]=h,this._eventsCount++),this},c.prototype.removeListener=function(f,u,p,h){var m=i?i+f:f;if(!this._events[m])return this;if(!u)return--this._eventsCount===0?this._events=new o:delete this._events[m],this;var g=this._events[m];if(g.fn)g.fn===u&&(!h||g.once)&&(!p||g.context===p)&&(--this._eventsCount===0?this._events=new o:delete this._events[m]);else{for(var x=0,v=[],b=g.length;x<b;x++)(g[x].fn!==u||h&&!g[x].once||p&&g[x].context!==p)&&v.push(g[x]);v.length?this._events[m]=v.length===1?v[0]:v:--this._eventsCount===0?this._events=new o:delete this._events[m]}return this},c.prototype.removeAllListeners=function(f){var u;return f?(u=i?i+f:f,this._events[u]&&(--this._eventsCount===0?this._events=new o:delete this._events[u])):(this._events=new o,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prototype.setMaxListeners=function(){return this},c.prefixed=i,c.EventEmitter=c,typeof r<"u"&&(r.exports=c)},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(de){return typeof de}:function(de){return de&&typeof Symbol=="function"&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de},o=function(){function de(ye,xe){var we=[],Ae=!0,Ue=!1,me=void 0;try{for(var ee=ye[Symbol.iterator](),fe;!(Ae=(fe=ee.next()).done)&&(we.push(fe.value),!(xe&&we.length===xe));Ae=!0);}catch(Fe){Ue=!0,me=Fe}finally{try{!Ae&&ee.return&&ee.return()}finally{if(Ue)throw me}}return we}return function(ye,xe){if(Array.isArray(ye))return ye;if(Symbol.iterator in Object(ye))return de(ye,xe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function de(ye,xe){for(var we=0;we<xe.length;we++){var Ae=xe[we];Ae.enumerable=Ae.enumerable||!1,Ae.configurable=!0,"value"in Ae&&(Ae.writable=!0),Object.defineProperty(ye,Ae.key,Ae)}}return function(ye,xe,we){return xe&&de(ye.prototype,xe),we&&de(ye,we),ye}}(),c=s(3),d=C(c),f=s(2),u=C(f),p=s(0),h=C(p),m=s(5),g=C(m),x=s(10),v=C(x),b=s(9),w=C(b),y=s(36),N=s(37),S=s(13),j=C(S),_=s(26),T=s(38),D=s(39),A=s(40);function C(de){return de&&de.__esModule?de:{default:de}}function M(de,ye,xe){return ye in de?Object.defineProperty(de,ye,{value:xe,enumerable:!0,configurable:!0,writable:!0}):de[ye]=xe,de}function F(de,ye){if(!(de instanceof ye))throw new TypeError("Cannot call a class as a function")}function B(de,ye){if(!de)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ye&&(typeof ye=="object"||typeof ye=="function")?ye:de}function Y(de,ye){if(typeof ye!="function"&&ye!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof ye);de.prototype=Object.create(ye&&ye.prototype,{constructor:{value:de,enumerable:!1,writable:!0,configurable:!0}}),ye&&(Object.setPrototypeOf?Object.setPrototypeOf(de,ye):de.__proto__=ye)}var V=(0,v.default)("quill:clipboard"),J="__ql-matcher",U=[[Node.TEXT_NODE,Ne],[Node.TEXT_NODE,Xe],["br",ve],[Node.ELEMENT_NODE,Xe],[Node.ELEMENT_NODE,Z],[Node.ELEMENT_NODE,ie],[Node.ELEMENT_NODE,ae],[Node.ELEMENT_NODE,Q],["li",He],["b",ce.bind(ce,"bold")],["i",ce.bind(ce,"italic")],["style",ne]],X=[y.AlignAttribute,T.DirectionAttribute].reduce(function(de,ye){return de[ye.keyName]=ye,de},{}),W=[y.AlignStyle,N.BackgroundStyle,_.ColorStyle,T.DirectionStyle,D.FontStyle,A.SizeStyle].reduce(function(de,ye){return de[ye.keyName]=ye,de},{}),E=function(de){Y(ye,de);function ye(xe,we){F(this,ye);var Ae=B(this,(ye.__proto__||Object.getPrototypeOf(ye)).call(this,xe,we));return Ae.quill.root.addEventListener("paste",Ae.onPaste.bind(Ae)),Ae.container=Ae.quill.addContainer("ql-clipboard"),Ae.container.setAttribute("contenteditable",!0),Ae.container.setAttribute("tabindex",-1),Ae.matchers=[],U.concat(Ae.options.matchers).forEach(function(Ue){var me=o(Ue,2),ee=me[0],fe=me[1];!we.matchVisual&&fe===ie||Ae.addMatcher(ee,fe)}),Ae}return l(ye,[{key:"addMatcher",value:function(we,Ae){this.matchers.push([we,Ae])}},{key:"convert",value:function(we){if(typeof we=="string")return this.container.innerHTML=we.replace(/\>\r?\n +\</g,"><"),this.convert();var Ae=this.quill.getFormat(this.quill.selection.savedRange.index);if(Ae[j.default.blotName]){var Ue=this.container.innerText;return this.container.innerHTML="",new u.default().insert(Ue,M({},j.default.blotName,Ae[j.default.blotName]))}var me=this.prepareMatching(),ee=o(me,2),fe=ee[0],Fe=ee[1],Ee=se(this.container,fe,Fe);return L(Ee,`
`)&&Ee.ops[Ee.ops.length-1].attributes==null&&(Ee=Ee.compose(new u.default().retain(Ee.length()-1).delete(1))),V.log("convert",this.container.innerHTML,Ee),this.container.innerHTML="",Ee}},{key:"dangerouslyPasteHTML",value:function(we,Ae){var Ue=arguments.length>2&&arguments[2]!==void 0?arguments[2]:g.default.sources.API;if(typeof we=="string")this.quill.setContents(this.convert(we),Ae),this.quill.setSelection(0,g.default.sources.SILENT);else{var me=this.convert(Ae);this.quill.updateContents(new u.default().retain(we).concat(me),Ue),this.quill.setSelection(we+me.length(),g.default.sources.SILENT)}}},{key:"onPaste",value:function(we){var Ae=this;if(!(we.defaultPrevented||!this.quill.isEnabled())){var Ue=this.quill.getSelection(),me=new u.default().retain(Ue.index),ee=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(g.default.sources.SILENT),setTimeout(function(){me=me.concat(Ae.convert()).delete(Ue.length),Ae.quill.updateContents(me,g.default.sources.USER),Ae.quill.setSelection(me.length()-Ue.length,g.default.sources.SILENT),Ae.quill.scrollingContainer.scrollTop=ee,Ae.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var we=this,Ae=[],Ue=[];return this.matchers.forEach(function(me){var ee=o(me,2),fe=ee[0],Fe=ee[1];switch(fe){case Node.TEXT_NODE:Ue.push(Fe);break;case Node.ELEMENT_NODE:Ae.push(Fe);break;default:[].forEach.call(we.container.querySelectorAll(fe),function(Ee){Ee[J]=Ee[J]||[],Ee[J].push(Fe)});break}}),[Ae,Ue]}}]),ye}(w.default);E.DEFAULTS={matchers:[],matchVisual:!0};function R(de,ye,xe){return(typeof ye>"u"?"undefined":i(ye))==="object"?Object.keys(ye).reduce(function(we,Ae){return R(we,Ae,ye[Ae])},de):de.reduce(function(we,Ae){return Ae.attributes&&Ae.attributes[ye]?we.push(Ae):we.insert(Ae.insert,(0,d.default)({},M({},ye,xe),Ae.attributes))},new u.default)}function q(de){if(de.nodeType!==Node.ELEMENT_NODE)return{};var ye="__ql-computed-style";return de[ye]||(de[ye]=window.getComputedStyle(de))}function L(de,ye){for(var xe="",we=de.ops.length-1;we>=0&&xe.length<ye.length;--we){var Ae=de.ops[we];if(typeof Ae.insert!="string")break;xe=Ae.insert+xe}return xe.slice(-1*ye.length)===ye}function H(de){if(de.childNodes.length===0)return!1;var ye=q(de);return["block","list-item"].indexOf(ye.display)>-1}function se(de,ye,xe){return de.nodeType===de.TEXT_NODE?xe.reduce(function(we,Ae){return Ae(de,we)},new u.default):de.nodeType===de.ELEMENT_NODE?[].reduce.call(de.childNodes||[],function(we,Ae){var Ue=se(Ae,ye,xe);return Ae.nodeType===de.ELEMENT_NODE&&(Ue=ye.reduce(function(me,ee){return ee(Ae,me)},Ue),Ue=(Ae[J]||[]).reduce(function(me,ee){return ee(Ae,me)},Ue)),we.concat(Ue)},new u.default):new u.default}function ce(de,ye,xe){return R(xe,de,!0)}function ae(de,ye){var xe=h.default.Attributor.Attribute.keys(de),we=h.default.Attributor.Class.keys(de),Ae=h.default.Attributor.Style.keys(de),Ue={};return xe.concat(we).concat(Ae).forEach(function(me){var ee=h.default.query(me,h.default.Scope.ATTRIBUTE);ee!=null&&(Ue[ee.attrName]=ee.value(de),Ue[ee.attrName])||(ee=X[me],ee!=null&&(ee.attrName===me||ee.keyName===me)&&(Ue[ee.attrName]=ee.value(de)||void 0),ee=W[me],ee!=null&&(ee.attrName===me||ee.keyName===me)&&(ee=W[me],Ue[ee.attrName]=ee.value(de)||void 0))}),Object.keys(Ue).length>0&&(ye=R(ye,Ue)),ye}function Z(de,ye){var xe=h.default.query(de);if(xe==null)return ye;if(xe.prototype instanceof h.default.Embed){var we={},Ae=xe.value(de);Ae!=null&&(we[xe.blotName]=Ae,ye=new u.default().insert(we,xe.formats(de)))}else typeof xe.formats=="function"&&(ye=R(ye,xe.blotName,xe.formats(de)));return ye}function ve(de,ye){return L(ye,`
`)||ye.insert(`
`),ye}function ne(){return new u.default}function He(de,ye){var xe=h.default.query(de);if(xe==null||xe.blotName!=="list-item"||!L(ye,`
`))return ye;for(var we=-1,Ae=de.parentNode;!Ae.classList.contains("ql-clipboard");)(h.default.query(Ae)||{}).blotName==="list"&&(we+=1),Ae=Ae.parentNode;return we<=0?ye:ye.compose(new u.default().retain(ye.length()-1).retain(1,{indent:we}))}function Xe(de,ye){return L(ye,`
`)||(H(de)||ye.length()>0&&de.nextSibling&&H(de.nextSibling))&&ye.insert(`
`),ye}function ie(de,ye){if(H(de)&&de.nextElementSibling!=null&&!L(ye,`

`)){var xe=de.offsetHeight+parseFloat(q(de).marginTop)+parseFloat(q(de).marginBottom);de.nextElementSibling.offsetTop>de.offsetTop+xe*1.5&&ye.insert(`
`)}return ye}function Q(de,ye){var xe={},we=de.style||{};return we.fontStyle&&q(de).fontStyle==="italic"&&(xe.italic=!0),we.fontWeight&&(q(de).fontWeight.startsWith("bold")||parseInt(q(de).fontWeight)>=700)&&(xe.bold=!0),Object.keys(xe).length>0&&(ye=R(ye,xe)),parseFloat(we.textIndent||0)>0&&(ye=new u.default().insert("	").concat(ye)),ye}function Ne(de,ye){var xe=de.data;if(de.parentNode.tagName==="O:P")return ye.insert(xe.trim());if(xe.trim().length===0&&de.parentNode.classList.contains("ql-clipboard"))return ye;if(!q(de.parentNode).whiteSpace.startsWith("pre")){var we=function(Ue,me){return me=me.replace(/[^\u00a0]/g,""),me.length<1&&Ue?" ":me};xe=xe.replace(/\r\n/g," ").replace(/\n/g," "),xe=xe.replace(/\s\s+/g,we.bind(we,!0)),(de.previousSibling==null&&H(de.parentNode)||de.previousSibling!=null&&H(de.previousSibling))&&(xe=xe.replace(/^\s+/,we.bind(we,!1))),(de.nextSibling==null&&H(de.parentNode)||de.nextSibling!=null&&H(de.nextSibling))&&(xe=xe.replace(/\s+$/,we.bind(we,!1)))}return ye.insert(xe)}n.default=E,n.matchAttributor=ae,n.matchBlot=Z,n.matchNewline=Xe,n.matchSpacing=ie,n.matchText=Ne},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(g,x){for(var v=0;v<x.length;v++){var b=x[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,x,v){return x&&m(g.prototype,x),v&&m(g,v),g}}(),o=function m(g,x,v){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,x);if(b===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:m(w,x,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=s(6),c=d(l);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function u(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var h=function(m){p(g,m);function g(){return f(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,[{key:"optimize",value:function(v){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,v),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),g}(c.default);h.blotName="bold",h.tagName=["STRONG","B"],n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var i=function(){function A(C,M){var F=[],B=!0,Y=!1,V=void 0;try{for(var J=C[Symbol.iterator](),U;!(B=(U=J.next()).done)&&(F.push(U.value),!(M&&F.length===M));B=!0);}catch(X){Y=!0,V=X}finally{try{!B&&J.return&&J.return()}finally{if(Y)throw V}}return F}return function(C,M){if(Array.isArray(C))return C;if(Symbol.iterator in Object(C))return A(C,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function A(C,M){for(var F=0;F<M.length;F++){var B=M[F];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(C,B.key,B)}}return function(C,M,F){return M&&A(C.prototype,M),F&&A(C,F),C}}(),l=s(2),c=v(l),d=s(0),f=v(d),u=s(5),p=v(u),h=s(10),m=v(h),g=s(9),x=v(g);function v(A){return A&&A.__esModule?A:{default:A}}function b(A,C,M){return C in A?Object.defineProperty(A,C,{value:M,enumerable:!0,configurable:!0,writable:!0}):A[C]=M,A}function w(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")}function y(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return C&&(typeof C=="object"||typeof C=="function")?C:A}function N(A,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof C);A.prototype=Object.create(C&&C.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),C&&(Object.setPrototypeOf?Object.setPrototypeOf(A,C):A.__proto__=C)}var S=(0,m.default)("quill:toolbar"),j=function(A){N(C,A);function C(M,F){w(this,C);var B=y(this,(C.__proto__||Object.getPrototypeOf(C)).call(this,M,F));if(Array.isArray(B.options.container)){var Y=document.createElement("div");T(Y,B.options.container),M.container.parentNode.insertBefore(Y,M.container),B.container=Y}else typeof B.options.container=="string"?B.container=document.querySelector(B.options.container):B.container=B.options.container;if(!(B.container instanceof HTMLElement)){var V;return V=S.error("Container required for toolbar",B.options),y(B,V)}return B.container.classList.add("ql-toolbar"),B.controls=[],B.handlers={},Object.keys(B.options.handlers).forEach(function(J){B.addHandler(J,B.options.handlers[J])}),[].forEach.call(B.container.querySelectorAll("button, select"),function(J){B.attach(J)}),B.quill.on(p.default.events.EDITOR_CHANGE,function(J,U){J===p.default.events.SELECTION_CHANGE&&B.update(U)}),B.quill.on(p.default.events.SCROLL_OPTIMIZE,function(){var J=B.quill.selection.getRange(),U=i(J,1),X=U[0];B.update(X)}),B}return o(C,[{key:"addHandler",value:function(F,B){this.handlers[F]=B}},{key:"attach",value:function(F){var B=this,Y=[].find.call(F.classList,function(J){return J.indexOf("ql-")===0});if(Y){if(Y=Y.slice(3),F.tagName==="BUTTON"&&F.setAttribute("type","button"),this.handlers[Y]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[Y]==null){S.warn("ignoring attaching to disabled format",Y,F);return}if(f.default.query(Y)==null){S.warn("ignoring attaching to nonexistent format",Y,F);return}}var V=F.tagName==="SELECT"?"change":"click";F.addEventListener(V,function(J){var U=void 0;if(F.tagName==="SELECT"){if(F.selectedIndex<0)return;var X=F.options[F.selectedIndex];X.hasAttribute("selected")?U=!1:U=X.value||!1}else F.classList.contains("ql-active")?U=!1:U=F.value||!F.hasAttribute("value"),J.preventDefault();B.quill.focus();var W=B.quill.selection.getRange(),E=i(W,1),R=E[0];if(B.handlers[Y]!=null)B.handlers[Y].call(B,U);else if(f.default.query(Y).prototype instanceof f.default.Embed){if(U=prompt("Enter "+Y),!U)return;B.quill.updateContents(new c.default().retain(R.index).delete(R.length).insert(b({},Y,U)),p.default.sources.USER)}else B.quill.format(Y,U,p.default.sources.USER);B.update(R)}),this.controls.push([Y,F])}}},{key:"update",value:function(F){var B=F==null?{}:this.quill.getFormat(F);this.controls.forEach(function(Y){var V=i(Y,2),J=V[0],U=V[1];if(U.tagName==="SELECT"){var X=void 0;if(F==null)X=null;else if(B[J]==null)X=U.querySelector("option[selected]");else if(!Array.isArray(B[J])){var W=B[J];typeof W=="string"&&(W=W.replace(/\"/g,'\\"')),X=U.querySelector('option[value="'+W+'"]')}X==null?(U.value="",U.selectedIndex=-1):X.selected=!0}else if(F==null)U.classList.remove("ql-active");else if(U.hasAttribute("value")){var E=B[J]===U.getAttribute("value")||B[J]!=null&&B[J].toString()===U.getAttribute("value")||B[J]==null&&!U.getAttribute("value");U.classList.toggle("ql-active",E)}else U.classList.toggle("ql-active",B[J]!=null)})}}]),C}(x.default);j.DEFAULTS={};function _(A,C,M){var F=document.createElement("button");F.setAttribute("type","button"),F.classList.add("ql-"+C),M!=null&&(F.value=M),A.appendChild(F)}function T(A,C){Array.isArray(C[0])||(C=[C]),C.forEach(function(M){var F=document.createElement("span");F.classList.add("ql-formats"),M.forEach(function(B){if(typeof B=="string")_(F,B);else{var Y=Object.keys(B)[0],V=B[Y];Array.isArray(V)?D(F,Y,V):_(F,Y,V)}}),A.appendChild(F)})}function D(A,C,M){var F=document.createElement("select");F.classList.add("ql-"+C),M.forEach(function(B){var Y=document.createElement("option");B!==!1?Y.setAttribute("value",B):Y.setAttribute("selected","selected"),F.appendChild(Y)}),A.appendChild(F)}j.DEFAULTS={container:null,handlers:{clean:function(){var C=this,M=this.quill.getSelection();if(M!=null)if(M.length==0){var F=this.quill.getFormat();Object.keys(F).forEach(function(B){f.default.query(B,f.default.Scope.INLINE)!=null&&C.quill.format(B,!1)})}else this.quill.removeFormat(M,p.default.sources.USER)},direction:function(C){var M=this.quill.getFormat().align;C==="rtl"&&M==null?this.quill.format("align","right",p.default.sources.USER):!C&&M==="right"&&this.quill.format("align",!1,p.default.sources.USER),this.quill.format("direction",C,p.default.sources.USER)},indent:function(C){var M=this.quill.getSelection(),F=this.quill.getFormat(M),B=parseInt(F.indent||0);if(C==="+1"||C==="-1"){var Y=C==="+1"?1:-1;F.direction==="rtl"&&(Y*=-1),this.quill.format("indent",B+Y,p.default.sources.USER)}},link:function(C){C===!0&&(C=prompt("Enter link URL:")),this.quill.format("link",C,p.default.sources.USER)},list:function(C){var M=this.quill.getSelection(),F=this.quill.getFormat(M);C==="check"?F.list==="checked"||F.list==="unchecked"?this.quill.format("list",!1,p.default.sources.USER):this.quill.format("list","unchecked",p.default.sources.USER):this.quill.format("list",C,p.default.sources.USER)}}},n.default=j,n.addControls=T},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(g,x){for(var v=0;v<x.length;v++){var b=x[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,x,v){return x&&m(g.prototype,x),v&&m(g,v),g}}(),o=function m(g,x,v){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,x);if(b===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:m(w,x,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=s(28),c=d(l);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function u(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var h=function(m){p(g,m);function g(x,v){f(this,g);var b=u(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,x));return b.label.innerHTML=v,b.container.classList.add("ql-color-picker"),[].slice.call(b.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(w){w.classList.add("ql-primary")}),b}return i(g,[{key:"buildItem",value:function(v){var b=o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"buildItem",this).call(this,v);return b.style.backgroundColor=v.getAttribute("value")||"",b}},{key:"selectItem",value:function(v,b){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,v,b);var w=this.label.querySelector(".ql-color-label"),y=v&&v.getAttribute("data-value")||"";w&&(w.tagName==="line"?w.style.stroke=y:w.style.fill=y)}}]),g}(c.default);n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(g,x){for(var v=0;v<x.length;v++){var b=x[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,x,v){return x&&m(g.prototype,x),v&&m(g,v),g}}(),o=function m(g,x,v){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,x);if(b===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:m(w,x,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=s(28),c=d(l);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function u(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var h=function(m){p(g,m);function g(x,v){f(this,g);var b=u(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,x));return b.container.classList.add("ql-icon-picker"),[].forEach.call(b.container.querySelectorAll(".ql-picker-item"),function(w){w.innerHTML=v[w.getAttribute("data-value")||""]}),b.defaultItem=b.container.querySelector(".ql-selected"),b.selectItem(b.defaultItem),b}return i(g,[{key:"selectItem",value:function(v,b){o(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"selectItem",this).call(this,v,b),v=v||this.defaultItem,this.label.innerHTML=v.innerHTML}}]),g}(c.default);n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function c(d,f){for(var u=0;u<f.length;u++){var p=f[u];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(d,p.key,p)}}return function(d,f,u){return f&&c(d.prototype,f),u&&c(d,u),d}}();function o(c,d){if(!(c instanceof d))throw new TypeError("Cannot call a class as a function")}var l=function(){function c(d,f){var u=this;o(this,c),this.quill=d,this.boundsContainer=f||document.body,this.root=d.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){u.root.style.marginTop=-1*u.quill.root.scrollTop+"px"}),this.hide()}return i(c,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(f){var u=f.left+f.width/2-this.root.offsetWidth/2,p=f.bottom+this.quill.root.scrollTop;this.root.style.left=u+"px",this.root.style.top=p+"px",this.root.classList.remove("ql-flip");var h=this.boundsContainer.getBoundingClientRect(),m=this.root.getBoundingClientRect(),g=0;if(m.right>h.right&&(g=h.right-m.right,this.root.style.left=u+g+"px"),m.left<h.left&&(g=h.left-m.left,this.root.style.left=u+g+"px"),m.bottom>h.bottom){var x=m.bottom-m.top,v=f.bottom-f.top+x;this.root.style.top=p-v+"px",this.root.classList.add("ql-flip")}return g}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),c}();n.default=l},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function D(A,C){var M=[],F=!0,B=!1,Y=void 0;try{for(var V=A[Symbol.iterator](),J;!(F=(J=V.next()).done)&&(M.push(J.value),!(C&&M.length===C));F=!0);}catch(U){B=!0,Y=U}finally{try{!F&&V.return&&V.return()}finally{if(B)throw Y}}return M}return function(A,C){if(Array.isArray(A))return A;if(Symbol.iterator in Object(A))return D(A,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function D(A,C,M){A===null&&(A=Function.prototype);var F=Object.getOwnPropertyDescriptor(A,C);if(F===void 0){var B=Object.getPrototypeOf(A);return B===null?void 0:D(B,C,M)}else{if("value"in F)return F.value;var Y=F.get;return Y===void 0?void 0:Y.call(M)}},l=function(){function D(A,C){for(var M=0;M<C.length;M++){var F=C[M];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(A,F.key,F)}}return function(A,C,M){return C&&D(A.prototype,C),M&&D(A,M),A}}(),c=s(3),d=w(c),f=s(8),u=w(f),p=s(43),h=w(p),m=s(27),g=w(m),x=s(15),v=s(41),b=w(v);function w(D){return D&&D.__esModule?D:{default:D}}function y(D,A){if(!(D instanceof A))throw new TypeError("Cannot call a class as a function")}function N(D,A){if(!D)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:D}function S(D,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);D.prototype=Object.create(A&&A.prototype,{constructor:{value:D,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(D,A):D.__proto__=A)}var j=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],_=function(D){S(A,D);function A(C,M){y(this,A),M.modules.toolbar!=null&&M.modules.toolbar.container==null&&(M.modules.toolbar.container=j);var F=N(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,M));return F.quill.container.classList.add("ql-snow"),F}return l(A,[{key:"extendToolbar",value:function(M){M.container.classList.add("ql-snow"),this.buildButtons([].slice.call(M.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(M.container.querySelectorAll("select")),b.default),this.tooltip=new T(this.quill,this.options.bounds),M.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(F,B){M.handlers.link.call(M,!B.format.link)})}}]),A}(h.default);_.DEFAULTS=(0,d.default)(!0,{},h.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(A){if(A){var C=this.quill.getSelection();if(C==null||C.length==0)return;var M=this.quill.getText(C);/^\S+@\S+\.\S+$/.test(M)&&M.indexOf("mailto:")!==0&&(M="mailto:"+M);var F=this.quill.theme.tooltip;F.edit("link",M)}else this.quill.format("link",!1)}}}}});var T=function(D){S(A,D);function A(C,M){y(this,A);var F=N(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C,M));return F.preview=F.root.querySelector("a.ql-preview"),F}return l(A,[{key:"listen",value:function(){var M=this;o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(F){M.root.classList.contains("ql-editing")?M.save():M.edit("link",M.preview.textContent),F.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(F){if(M.linkRange!=null){var B=M.linkRange;M.restoreFocus(),M.quill.formatText(B,"link",!1,u.default.sources.USER),delete M.linkRange}F.preventDefault(),M.hide()}),this.quill.on(u.default.events.SELECTION_CHANGE,function(F,B,Y){if(F!=null){if(F.length===0&&Y===u.default.sources.USER){var V=M.quill.scroll.descendant(g.default,F.index),J=i(V,2),U=J[0],X=J[1];if(U!=null){M.linkRange=new x.Range(F.index-X,U.length());var W=g.default.formats(U.domNode);M.preview.textContent=W,M.preview.setAttribute("href",W),M.show(),M.position(M.quill.getBounds(M.linkRange));return}}else delete M.linkRange;M.hide()}})}},{key:"show",value:function(){o(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),A}(p.BaseTooltip);T.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=_},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(29),o=Ae(i),l=s(36),c=s(38),d=s(64),f=s(65),u=Ae(f),p=s(66),h=Ae(p),m=s(67),g=Ae(m),x=s(37),v=s(26),b=s(39),w=s(40),y=s(56),N=Ae(y),S=s(68),j=Ae(S),_=s(27),T=Ae(_),D=s(69),A=Ae(D),C=s(70),M=Ae(C),F=s(71),B=Ae(F),Y=s(72),V=Ae(Y),J=s(73),U=Ae(J),X=s(13),W=Ae(X),E=s(74),R=Ae(E),q=s(75),L=Ae(q),H=s(57),se=Ae(H),ce=s(41),ae=Ae(ce),Z=s(28),ve=Ae(Z),ne=s(59),He=Ae(ne),Xe=s(60),ie=Ae(Xe),Q=s(61),Ne=Ae(Q),de=s(108),ye=Ae(de),xe=s(62),we=Ae(xe);function Ae(Ue){return Ue&&Ue.__esModule?Ue:{default:Ue}}o.default.register({"attributors/attribute/direction":c.DirectionAttribute,"attributors/class/align":l.AlignClass,"attributors/class/background":x.BackgroundClass,"attributors/class/color":v.ColorClass,"attributors/class/direction":c.DirectionClass,"attributors/class/font":b.FontClass,"attributors/class/size":w.SizeClass,"attributors/style/align":l.AlignStyle,"attributors/style/background":x.BackgroundStyle,"attributors/style/color":v.ColorStyle,"attributors/style/direction":c.DirectionStyle,"attributors/style/font":b.FontStyle,"attributors/style/size":w.SizeStyle},!0),o.default.register({"formats/align":l.AlignClass,"formats/direction":c.DirectionClass,"formats/indent":d.IndentClass,"formats/background":x.BackgroundStyle,"formats/color":v.ColorStyle,"formats/font":b.FontClass,"formats/size":w.SizeClass,"formats/blockquote":u.default,"formats/code-block":W.default,"formats/header":h.default,"formats/list":g.default,"formats/bold":N.default,"formats/code":X.Code,"formats/italic":j.default,"formats/link":T.default,"formats/script":A.default,"formats/strike":M.default,"formats/underline":B.default,"formats/image":V.default,"formats/video":U.default,"formats/list/item":m.ListItem,"modules/formula":R.default,"modules/syntax":L.default,"modules/toolbar":se.default,"themes/bubble":ye.default,"themes/snow":we.default,"ui/icons":ae.default,"ui/picker":ve.default,"ui/icon-picker":ie.default,"ui/color-picker":He.default,"ui/tooltip":Ne.default},!0),n.default=o.default},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var i=function(){function g(x,v){for(var b=0;b<v.length;b++){var w=v[b];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(x,w.key,w)}}return function(x,v,b){return v&&g(x.prototype,v),b&&g(x,b),x}}(),o=function g(x,v,b){x===null&&(x=Function.prototype);var w=Object.getOwnPropertyDescriptor(x,v);if(w===void 0){var y=Object.getPrototypeOf(x);return y===null?void 0:g(y,v,b)}else{if("value"in w)return w.value;var N=w.get;return N===void 0?void 0:N.call(b)}},l=s(0),c=d(l);function d(g){return g&&g.__esModule?g:{default:g}}function f(g,x){if(!(g instanceof x))throw new TypeError("Cannot call a class as a function")}function u(g,x){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x&&(typeof x=="object"||typeof x=="function")?x:g}function p(g,x){if(typeof x!="function"&&x!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof x);g.prototype=Object.create(x&&x.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),x&&(Object.setPrototypeOf?Object.setPrototypeOf(g,x):g.__proto__=x)}var h=function(g){p(x,g);function x(){return f(this,x),u(this,(x.__proto__||Object.getPrototypeOf(x)).apply(this,arguments))}return i(x,[{key:"add",value:function(b,w){if(w==="+1"||w==="-1"){var y=this.value(b)||0;w=w==="+1"?y+1:y-1}return w===0?(this.remove(b),!0):o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"add",this).call(this,b,w)}},{key:"canAdd",value:function(b,w){return o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"canAdd",this).call(this,b,w)||o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"canAdd",this).call(this,b,parseInt(w))}},{key:"value",value:function(b){return parseInt(o(x.prototype.__proto__||Object.getPrototypeOf(x.prototype),"value",this).call(this,b))||void 0}}]),x}(c.default.Attributor.Class),m=new h("indent","ql-indent",{scope:c.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=m},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(4),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function d(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var u=function(p){f(h,p);function h(){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default);u.blotName="blockquote",u.tagName="blockquote",n.default=u},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function h(m,g){for(var x=0;x<g.length;x++){var v=g[x];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(m,v.key,v)}}return function(m,g,x){return g&&h(m.prototype,g),x&&h(m,x),m}}(),o=s(4),l=c(o);function c(h){return h&&h.__esModule?h:{default:h}}function d(h,m){if(!(h instanceof m))throw new TypeError("Cannot call a class as a function")}function f(h,m){if(!h)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:h}function u(h,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);h.prototype=Object.create(m&&m.prototype,{constructor:{value:h,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(h,m):h.__proto__=m)}var p=function(h){u(m,h);function m(){return d(this,m),f(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return i(m,null,[{key:"formats",value:function(x){return this.tagName.indexOf(x.tagName)+1}}]),m}(l.default);p.blotName="header",p.tagName=["H1","H2","H3","H4","H5","H6"],n.default=p},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var i=function(){function y(N,S){for(var j=0;j<S.length;j++){var _=S[j];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(N,_.key,_)}}return function(N,S,j){return S&&y(N.prototype,S),j&&y(N,j),N}}(),o=function y(N,S,j){N===null&&(N=Function.prototype);var _=Object.getOwnPropertyDescriptor(N,S);if(_===void 0){var T=Object.getPrototypeOf(N);return T===null?void 0:y(T,S,j)}else{if("value"in _)return _.value;var D=_.get;return D===void 0?void 0:D.call(j)}},l=s(0),c=h(l),d=s(4),f=h(d),u=s(25),p=h(u);function h(y){return y&&y.__esModule?y:{default:y}}function m(y,N,S){return N in y?Object.defineProperty(y,N,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[N]=S,y}function g(y,N){if(!(y instanceof N))throw new TypeError("Cannot call a class as a function")}function x(y,N){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return N&&(typeof N=="object"||typeof N=="function")?N:y}function v(y,N){if(typeof N!="function"&&N!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof N);y.prototype=Object.create(N&&N.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),N&&(Object.setPrototypeOf?Object.setPrototypeOf(y,N):y.__proto__=N)}var b=function(y){v(N,y);function N(){return g(this,N),x(this,(N.__proto__||Object.getPrototypeOf(N)).apply(this,arguments))}return i(N,[{key:"format",value:function(j,_){j===w.blotName&&!_?this.replaceWith(c.default.create(this.statics.scope)):o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"format",this).call(this,j,_)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(j,_){return this.parent.isolate(this.offset(this.parent),this.length()),j===this.parent.statics.blotName?(this.parent.replaceWith(j,_),this):(this.parent.unwrap(),o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replaceWith",this).call(this,j,_))}}],[{key:"formats",value:function(j){return j.tagName===this.tagName?void 0:o(N.__proto__||Object.getPrototypeOf(N),"formats",this).call(this,j)}}]),N}(f.default);b.blotName="list-item",b.tagName="LI";var w=function(y){v(N,y),i(N,null,[{key:"create",value:function(j){var _=j==="ordered"?"OL":"UL",T=o(N.__proto__||Object.getPrototypeOf(N),"create",this).call(this,_);return(j==="checked"||j==="unchecked")&&T.setAttribute("data-checked",j==="checked"),T}},{key:"formats",value:function(j){if(j.tagName==="OL")return"ordered";if(j.tagName==="UL")return j.hasAttribute("data-checked")?j.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function N(S){g(this,N);var j=x(this,(N.__proto__||Object.getPrototypeOf(N)).call(this,S)),_=function(D){if(D.target.parentNode===S){var A=j.statics.formats(S),C=c.default.find(D.target);A==="checked"?C.format("list","unchecked"):A==="unchecked"&&C.format("list","checked")}};return S.addEventListener("touchstart",_),S.addEventListener("mousedown",_),j}return i(N,[{key:"format",value:function(j,_){this.children.length>0&&this.children.tail.format(j,_)}},{key:"formats",value:function(){return m({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(j,_){if(j instanceof b)o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"insertBefore",this).call(this,j,_);else{var T=_==null?this.length():_.offset(this),D=this.split(T);D.parent.insertBefore(j,D)}}},{key:"optimize",value:function(j){o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"optimize",this).call(this,j);var _=this.next;_!=null&&_.prev===this&&_.statics.blotName===this.statics.blotName&&_.domNode.tagName===this.domNode.tagName&&_.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(_.moveChildren(this),_.remove())}},{key:"replace",value:function(j){if(j.statics.blotName!==this.statics.blotName){var _=c.default.create(this.statics.defaultChild);j.moveChildren(_),this.appendChild(_)}o(N.prototype.__proto__||Object.getPrototypeOf(N.prototype),"replace",this).call(this,j)}}]),N}(p.default);w.blotName="list",w.scope=c.default.Scope.BLOCK_BLOT,w.tagName=["OL","UL"],w.defaultChild="list-item",w.allowedChildren=[b],n.ListItem=b,n.default=w},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(56),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function d(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var u=function(p){f(h,p);function h(){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default);u.blotName="italic",u.tagName=["EM","I"],n.default=u},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function m(g,x){for(var v=0;v<x.length;v++){var b=x[v];b.enumerable=b.enumerable||!1,b.configurable=!0,"value"in b&&(b.writable=!0),Object.defineProperty(g,b.key,b)}}return function(g,x,v){return x&&m(g.prototype,x),v&&m(g,v),g}}(),o=function m(g,x,v){g===null&&(g=Function.prototype);var b=Object.getOwnPropertyDescriptor(g,x);if(b===void 0){var w=Object.getPrototypeOf(g);return w===null?void 0:m(w,x,v)}else{if("value"in b)return b.value;var y=b.get;return y===void 0?void 0:y.call(v)}},l=s(6),c=d(l);function d(m){return m&&m.__esModule?m:{default:m}}function f(m,g){if(!(m instanceof g))throw new TypeError("Cannot call a class as a function")}function u(m,g){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:m}function p(m,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);m.prototype=Object.create(g&&g.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(m,g):m.__proto__=g)}var h=function(m){p(g,m);function g(){return f(this,g),u(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return i(g,null,[{key:"create",value:function(v){return v==="super"?document.createElement("sup"):v==="sub"?document.createElement("sub"):o(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,v)}},{key:"formats",value:function(v){if(v.tagName==="SUB")return"sub";if(v.tagName==="SUP")return"super"}}]),g}(c.default);h.blotName="script",h.tagName=["SUB","SUP"],n.default=h},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function d(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var u=function(p){f(h,p);function h(){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default);u.blotName="strike",u.tagName="S",n.default=u},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=s(6),o=l(i);function l(p){return p&&p.__esModule?p:{default:p}}function c(p,h){if(!(p instanceof h))throw new TypeError("Cannot call a class as a function")}function d(p,h){if(!p)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return h&&(typeof h=="object"||typeof h=="function")?h:p}function f(p,h){if(typeof h!="function"&&h!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof h);p.prototype=Object.create(h&&h.prototype,{constructor:{value:p,enumerable:!1,writable:!0,configurable:!0}}),h&&(Object.setPrototypeOf?Object.setPrototypeOf(p,h):p.__proto__=h)}var u=function(p){f(h,p);function h(){return c(this,h),d(this,(h.__proto__||Object.getPrototypeOf(h)).apply(this,arguments))}return h}(o.default);u.blotName="underline",u.tagName="U",n.default=u},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function x(v,b){for(var w=0;w<b.length;w++){var y=b[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,w){return b&&x(v.prototype,b),w&&x(v,w),v}}(),o=function x(v,b,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,b);if(y===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:x(N,b,w)}else{if("value"in y)return y.value;var S=y.get;return S===void 0?void 0:S.call(w)}},l=s(0),c=f(l),d=s(27);function f(x){return x&&x.__esModule?x:{default:x}}function u(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function p(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function h(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var m=["alt","height","width"],g=function(x){h(v,x);function v(){return u(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(w,y){m.indexOf(w)>-1?y?this.domNode.setAttribute(w,y):this.domNode.removeAttribute(w):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,w,y)}}],[{key:"create",value:function(w){var y=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,w);return typeof w=="string"&&y.setAttribute("src",this.sanitize(w)),y}},{key:"formats",value:function(w){return m.reduce(function(y,N){return w.hasAttribute(N)&&(y[N]=w.getAttribute(N)),y},{})}},{key:"match",value:function(w){return/\.(jpe?g|gif|png)$/.test(w)||/^data:image\/.+;base64/.test(w)}},{key:"sanitize",value:function(w){return(0,d.sanitize)(w,["http","https","data"])?w:"//:0"}},{key:"value",value:function(w){return w.getAttribute("src")}}]),v}(c.default.Embed);g.blotName="image",g.tagName="IMG",n.default=g},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function x(v,b){for(var w=0;w<b.length;w++){var y=b[w];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(v,y.key,y)}}return function(v,b,w){return b&&x(v.prototype,b),w&&x(v,w),v}}(),o=function x(v,b,w){v===null&&(v=Function.prototype);var y=Object.getOwnPropertyDescriptor(v,b);if(y===void 0){var N=Object.getPrototypeOf(v);return N===null?void 0:x(N,b,w)}else{if("value"in y)return y.value;var S=y.get;return S===void 0?void 0:S.call(w)}},l=s(4),c=s(27),d=f(c);function f(x){return x&&x.__esModule?x:{default:x}}function u(x,v){if(!(x instanceof v))throw new TypeError("Cannot call a class as a function")}function p(x,v){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:x}function h(x,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);x.prototype=Object.create(v&&v.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(x,v):x.__proto__=v)}var m=["height","width"],g=function(x){h(v,x);function v(){return u(this,v),p(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return i(v,[{key:"format",value:function(w,y){m.indexOf(w)>-1?y?this.domNode.setAttribute(w,y):this.domNode.removeAttribute(w):o(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,w,y)}}],[{key:"create",value:function(w){var y=o(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,w);return y.setAttribute("frameborder","0"),y.setAttribute("allowfullscreen",!0),y.setAttribute("src",this.sanitize(w)),y}},{key:"formats",value:function(w){return m.reduce(function(y,N){return w.hasAttribute(N)&&(y[N]=w.getAttribute(N)),y},{})}},{key:"sanitize",value:function(w){return d.default.sanitize(w)}},{key:"value",value:function(w){return w.getAttribute("src")}}]),v}(l.BlockEmbed);g.blotName="video",g.className="ql-video",g.tagName="IFRAME",n.default=g},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var i=function(){function w(y,N){for(var S=0;S<N.length;S++){var j=N[S];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(y,j.key,j)}}return function(y,N,S){return N&&w(y.prototype,N),S&&w(y,S),y}}(),o=function w(y,N,S){y===null&&(y=Function.prototype);var j=Object.getOwnPropertyDescriptor(y,N);if(j===void 0){var _=Object.getPrototypeOf(y);return _===null?void 0:w(_,N,S)}else{if("value"in j)return j.value;var T=j.get;return T===void 0?void 0:T.call(S)}},l=s(35),c=h(l),d=s(5),f=h(d),u=s(9),p=h(u);function h(w){return w&&w.__esModule?w:{default:w}}function m(w,y){if(!(w instanceof y))throw new TypeError("Cannot call a class as a function")}function g(w,y){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:w}function x(w,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);w.prototype=Object.create(y&&y.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(w,y):w.__proto__=y)}var v=function(w){x(y,w);function y(){return m(this,y),g(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return i(y,null,[{key:"create",value:function(S){var j=o(y.__proto__||Object.getPrototypeOf(y),"create",this).call(this,S);return typeof S=="string"&&(window.katex.render(S,j,{throwOnError:!1,errorColor:"#f00"}),j.setAttribute("data-value",S)),j}},{key:"value",value:function(S){return S.getAttribute("data-value")}}]),y}(c.default);v.blotName="formula",v.className="ql-formula",v.tagName="SPAN";var b=function(w){x(y,w),i(y,null,[{key:"register",value:function(){f.default.register(v,!0)}}]);function y(){m(this,y);var N=g(this,(y.__proto__||Object.getPrototypeOf(y)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return N}return y}(p.default);n.FormulaBlot=v,n.default=b},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var i=function(){function S(j,_){for(var T=0;T<_.length;T++){var D=_[T];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(j,D.key,D)}}return function(j,_,T){return _&&S(j.prototype,_),T&&S(j,T),j}}(),o=function S(j,_,T){j===null&&(j=Function.prototype);var D=Object.getOwnPropertyDescriptor(j,_);if(D===void 0){var A=Object.getPrototypeOf(j);return A===null?void 0:S(A,_,T)}else{if("value"in D)return D.value;var C=D.get;return C===void 0?void 0:C.call(T)}},l=s(0),c=g(l),d=s(5),f=g(d),u=s(9),p=g(u),h=s(13),m=g(h);function g(S){return S&&S.__esModule?S:{default:S}}function x(S,j){if(!(S instanceof j))throw new TypeError("Cannot call a class as a function")}function v(S,j){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return j&&(typeof j=="object"||typeof j=="function")?j:S}function b(S,j){if(typeof j!="function"&&j!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof j);S.prototype=Object.create(j&&j.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),j&&(Object.setPrototypeOf?Object.setPrototypeOf(S,j):S.__proto__=j)}var w=function(S){b(j,S);function j(){return x(this,j),v(this,(j.__proto__||Object.getPrototypeOf(j)).apply(this,arguments))}return i(j,[{key:"replaceWith",value:function(T){this.domNode.textContent=this.domNode.textContent,this.attach(),o(j.prototype.__proto__||Object.getPrototypeOf(j.prototype),"replaceWith",this).call(this,T)}},{key:"highlight",value:function(T){var D=this.domNode.textContent;this.cachedText!==D&&((D.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=T(D),this.domNode.normalize(),this.attach()),this.cachedText=D)}}]),j}(m.default);w.className="ql-syntax";var y=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),N=function(S){b(j,S),i(j,null,[{key:"register",value:function(){f.default.register(y,!0),f.default.register(w,!0)}}]);function j(_,T){x(this,j);var D=v(this,(j.__proto__||Object.getPrototypeOf(j)).call(this,_,T));if(typeof D.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var A=null;return D.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(A),A=setTimeout(function(){D.highlight(),A=null},D.options.interval)}),D.highlight(),D}return i(j,[{key:"highlight",value:function(){var T=this;if(!this.quill.selection.composing){this.quill.update(f.default.sources.USER);var D=this.quill.getSelection();this.quill.scroll.descendants(w).forEach(function(A){A.highlight(T.options.highlight)}),this.quill.update(f.default.sources.SILENT),D!=null&&this.quill.setSelection(D,f.default.sources.SILENT)}}}]),j}(p.default);N.DEFAULTS={highlight:function(){return window.hljs==null?null:function(S){var j=window.hljs.highlightAuto(S);return j.value}}(),interval:1e3},n.CodeBlock=w,n.CodeToken=y,n.default=N},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(r,n){r.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(r,n){r.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(r,n){r.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(r,n,s){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var i=function j(_,T,D){_===null&&(_=Function.prototype);var A=Object.getOwnPropertyDescriptor(_,T);if(A===void 0){var C=Object.getPrototypeOf(_);return C===null?void 0:j(C,T,D)}else{if("value"in A)return A.value;var M=A.get;return M===void 0?void 0:M.call(D)}},o=function(){function j(_,T){for(var D=0;D<T.length;D++){var A=T[D];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(_,A.key,A)}}return function(_,T,D){return T&&j(_.prototype,T),D&&j(_,D),_}}(),l=s(3),c=x(l),d=s(8),f=x(d),u=s(43),p=x(u),h=s(15),m=s(41),g=x(m);function x(j){return j&&j.__esModule?j:{default:j}}function v(j,_){if(!(j instanceof _))throw new TypeError("Cannot call a class as a function")}function b(j,_){if(!j)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:j}function w(j,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);j.prototype=Object.create(_&&_.prototype,{constructor:{value:j,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(j,_):j.__proto__=_)}var y=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],N=function(j){w(_,j);function _(T,D){v(this,_),D.modules.toolbar!=null&&D.modules.toolbar.container==null&&(D.modules.toolbar.container=y);var A=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,T,D));return A.quill.container.classList.add("ql-bubble"),A}return o(_,[{key:"extendToolbar",value:function(D){this.tooltip=new S(this.quill,this.options.bounds),this.tooltip.root.appendChild(D.container),this.buildButtons([].slice.call(D.container.querySelectorAll("button")),g.default),this.buildPickers([].slice.call(D.container.querySelectorAll("select")),g.default)}}]),_}(p.default);N.DEFAULTS=(0,c.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(_){_?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var S=function(j){w(_,j);function _(T,D){v(this,_);var A=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,T,D));return A.quill.on(f.default.events.EDITOR_CHANGE,function(C,M,F,B){if(C===f.default.events.SELECTION_CHANGE)if(M!=null&&M.length>0&&B===f.default.sources.USER){A.show(),A.root.style.left="0px",A.root.style.width="",A.root.style.width=A.root.offsetWidth+"px";var Y=A.quill.getLines(M.index,M.length);if(Y.length===1)A.position(A.quill.getBounds(M));else{var V=Y[Y.length-1],J=A.quill.getIndex(V),U=Math.min(V.length()-1,M.index+M.length-J),X=A.quill.getBounds(new h.Range(J,U));A.position(X)}}else document.activeElement!==A.textbox&&A.quill.hasFocus()&&A.hide()}),A}return o(_,[{key:"listen",value:function(){var D=this;i(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){D.root.classList.remove("ql-editing")}),this.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!D.root.classList.contains("ql-hidden")){var A=D.quill.getSelection();A!=null&&D.position(D.quill.getBounds(A))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(D){var A=i(_.prototype.__proto__||Object.getPrototypeOf(_.prototype),"position",this).call(this,D),C=this.root.querySelector(".ql-tooltip-arrow");if(C.style.marginLeft="",A===0)return A;C.style.marginLeft=-1*A-C.offsetWidth/2+"px"}}]),_}(u.BaseTooltip);S.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=S,n.default=N},function(r,n,s){r.exports=s(63)}]).default})})(fB);var t2e=fB.exports,r2e=Pl&&Pl.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)s.hasOwnProperty(i)&&(n[i]=s[i])},e(t,r)};return function(t,r){e(t,r);function n(){this.constructor=t}t.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qw=Pl&&Pl.__assign||function(){return Qw=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Qw.apply(this,arguments)},n2e=Pl&&Pl.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,s++)n[s]=i[o];return n},SN=Pl&&Pl.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Sd=SN(P),a2e=SN(RF),Bg=SN(GM),LI=SN(t2e),s2e=function(e){r2e(t,e);function t(r){var n=e.call(this,r)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(i,o,l,c){var d,f,u,p;i==="text-change"?(f=(d=n).onEditorChangeText)===null||f===void 0||f.call(d,n.editor.root.innerHTML,o,c,n.unprivilegedEditor):i==="selection-change"&&((p=(u=n).onEditorChangeSelection)===null||p===void 0||p.call(u,o,c,n.unprivilegedEditor))};var s=n.isControlled()?r.value:r.defaultValue;return n.value=s??"",n}return t.prototype.validateProps=function(r){var n;if(Sd.default.Children.count(r.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(Sd.default.Children.count(r.children)){var s=Sd.default.Children.only(r.children);if(((n=s)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&r.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},t.prototype.shouldComponentUpdate=function(r,n){var s=this,i;if(this.validateProps(r),!this.editor||this.state.generation!==n.generation)return!0;if("value"in r){var o=this.getEditorContents(),l=(i=r.value,i??"");this.isEqualValue(l,o)||this.setEditorContents(this.editor,l)}return r.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,r.readOnly),n2e(this.cleanProps,this.dirtyProps).some(function(c){return!Bg.default(r[c],s.props[c])})},t.prototype.shouldComponentRegenerate=function(r){var n=this;return this.dirtyProps.some(function(s){return!Bg.default(r[s],n.props[s])})},t.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},t.prototype.componentWillUnmount=function(){this.destroyEditor()},t.prototype.componentDidUpdate=function(r,n){var s=this;if(this.editor&&this.shouldComponentRegenerate(r)){var i=this.editor.getContents(),o=this.editor.getSelection();this.regenerationSnapshot={delta:i,selection:o},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var l=this.regenerationSnapshot,i=l.delta,c=l.selection;delete this.regenerationSnapshot,this.instantiateEditor();var d=this.editor;d.setContents(i),FI(function(){return s.setEditorSelection(d,c)})}},t.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},t.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},t.prototype.isControlled=function(){return"value"in this.props},t.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},t.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},t.prototype.createEditor=function(r,n){var s=new LI.default(r,n);return n.tabIndex!=null&&this.setEditorTabIndex(s,n.tabIndex),this.hookEditor(s),s},t.prototype.hookEditor=function(r){this.unprivilegedEditor=this.makeUnprivilegedEditor(r),r.on("editor-change",this.onEditorChange)},t.prototype.unhookEditor=function(r){r.off("editor-change",this.onEditorChange)},t.prototype.getEditorContents=function(){return this.value},t.prototype.getEditorSelection=function(){return this.selection},t.prototype.isDelta=function(r){return r&&r.ops},t.prototype.isEqualValue=function(r,n){return this.isDelta(r)&&this.isDelta(n)?Bg.default(r.ops,n.ops):Bg.default(r,n)},t.prototype.setEditorContents=function(r,n){var s=this;this.value=n;var i=this.getEditorSelection();typeof n=="string"?r.setContents(r.clipboard.convert(n)):r.setContents(n),FI(function(){return s.setEditorSelection(r,i)})},t.prototype.setEditorSelection=function(r,n){if(this.selection=n,n){var s=r.getLength();n.index=Math.max(0,Math.min(n.index,s-1)),n.length=Math.max(0,Math.min(n.length,s-1-n.index)),r.setSelection(n)}},t.prototype.setEditorTabIndex=function(r,n){var s,i;!((i=(s=r)===null||s===void 0?void 0:s.scroll)===null||i===void 0)&&i.domNode&&(r.scroll.domNode.tabIndex=n)},t.prototype.setEditorReadOnly=function(r,n){n?r.disable():r.enable()},t.prototype.makeUnprivilegedEditor=function(r){var n=r;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},t.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var r=a2e.default.findDOMNode(this.editingArea);if(!r)throw new Error("Cannot find element for editing area");if(r.nodeType===3)throw new Error("Editing area cannot be a text node");return r},t.prototype.renderEditingArea=function(){var r=this,n=this.props,s=n.children,i=n.preserveWhitespace,o=this.state.generation,l={key:o,ref:function(c){r.editingArea=c}};return Sd.default.Children.count(s)?Sd.default.cloneElement(Sd.default.Children.only(s),l):i?Sd.default.createElement("pre",Qw({},l)):Sd.default.createElement("div",Qw({},l))},t.prototype.render=function(){var r;return Sd.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(r=this.props.className,r??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},t.prototype.onEditorChangeText=function(r,n,s,i){var o,l;if(this.editor){var c=this.isDelta(this.value)?i.getContents():i.getHTML();c!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=c,(l=(o=this.props).onChange)===null||l===void 0||l.call(o,r,n,s,i))}},t.prototype.onEditorChangeSelection=function(r,n,s){var i,o,l,c,d,f;if(this.editor){var u=this.getEditorSelection(),p=!u&&r,h=u&&!r;Bg.default(r,u)||(this.selection=r,(o=(i=this.props).onChangeSelection)===null||o===void 0||o.call(i,r,n,s),p?(c=(l=this.props).onFocus)===null||c===void 0||c.call(l,r,n,s):h&&((f=(d=this.props).onBlur)===null||f===void 0||f.call(d,u,n,s)))}},t.prototype.focus=function(){this.editor&&this.editor.focus()},t.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},t.displayName="React Quill",t.Quill=LI.default,t.defaultProps={theme:"snow",modules:{},readOnly:!1},t}(Sd.default.Component);function FI(e){Promise.resolve().then(e)}var i2e=s2e;const eA=fa(i2e),o2e=({isOpen:e,templateId:t,onClose:r,onSuccess:n})=>{const{showSuccess:s,showError:i}=hn();oa();const o=JSON.parse(localStorage.getItem("user_data")||"{}").id,{data:l,isLoading:c}=fye(t||""),d=oB(),f=hye(),[u,p]=P.useState(""),[h,m]=P.useState("Custom"),[g,x]=P.useState(""),[v,b]=P.useState(!1),[w,y]=P.useState(""),[N,S]=P.useState([]),[j,_]=P.useState(!1),[T,D]=P.useState(new Set),[A,C]=P.useState(new Set),[M,F]=P.useState(null),[B,Y]=P.useState(""),[V,J]=P.useState(!1),[U,X]=P.useState(!1),W=P.useRef({});P.useEffect(()=>{t&&l&&e?(p(l.name||""),m(l.category||"Custom"),y(l.description||""),l.sections&&Array.isArray(l.sections)?S(l.sections.map((me,ee)=>({id:me.id||`section_${Date.now()}_${ee}`,name:me.name||`Section ${ee+1}`,order:me.order!==void 0?me.order:ee,steps:(me.steps||[]).map((fe,Fe)=>({id:fe.id||`step_${Date.now()}_${ee}_${Fe}`,name:fe.name||"",instructions:fe.instructions||"",checklistItems:Array.isArray(fe.checklistItems)?fe.checklistItems:[],attachments:Array.isArray(fe.attachments)?fe.attachments:[],order:fe.order!==void 0?fe.order:Fe}))}))):S([])):!t&&e&&(p(""),m("Custom"),x(""),b(!1),y(""),S([]),D(new Set),C(new Set))},[t,l,e]),P.useEffect(()=>{e&&(async()=>{if(o)try{await Gw({userId:o}),X(!0)}catch{X(!1)}})()},[o,e]);const E={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]]},R=["header","bold","italic","underline","strike","list","bullet","link"],q=()=>{const me={id:`section_${Date.now()}`,name:`Section ${N.length+1}`,order:N.length,steps:[]};S([...N,me]),D(ee=>new Set([...ee,me.id]))},L=me=>{S(N.filter(ee=>ee.id!==me)),D(ee=>{const fe=new Set(ee);return fe.delete(me),fe})},H=(me,ee)=>{S(N.map(fe=>fe.id===me?{...fe,name:ee}:fe))},se=(me,ee)=>{const fe=N.findIndex(qe=>qe.id===me);if(fe===-1)return;const Fe=ee==="up"?fe-1:fe+1;if(Fe<0||Fe>=N.length)return;const Ee=[...N];[Ee[fe],Ee[Fe]]=[Ee[Fe],Ee[fe]],Ee.forEach((qe,Ke)=>{qe.order=Ke}),S(Ee)},ce=me=>{D(ee=>{const fe=new Set(ee);return fe.has(me)?fe.delete(me):fe.add(me),fe})},ae=me=>{const ee=N.find(Fe=>Fe.id===me);if(!ee)return;const fe={id:`step_${Date.now()}`,name:`Step ${ee.steps.length+1}`,instructions:"",checklistItems:[],attachments:[],order:ee.steps.length};S(N.map(Fe=>Fe.id===me?{...Fe,steps:[...Fe.steps,fe]}:Fe)),C(Fe=>new Set([...Fe,fe.id]))},Z=(me,ee)=>{S(N.map(fe=>fe.id===me?{...fe,steps:fe.steps.filter(Fe=>Fe.id!==ee)}:fe)),C(fe=>{const Fe=new Set(fe);return Fe.delete(ee),Fe}),F(null)},ve=(me,ee,fe)=>{S(N.map(Fe=>Fe.id===me?{...Fe,steps:Fe.steps.map(Ee=>Ee.id===ee?{...Ee,name:fe}:Ee)}:Fe))},ne=(me,ee,fe)=>{const Fe=N.find(Qe=>Qe.id===me);if(!Fe)return;const Ee=Fe.steps.findIndex(Qe=>Qe.id===ee);if(Ee===-1)return;const qe=fe==="up"?Ee-1:Ee+1;if(qe<0||qe>=Fe.steps.length)return;const Ke=[...Fe.steps];[Ke[Ee],Ke[qe]]=[Ke[qe],Ke[Ee]],Ke.forEach((Qe,_t)=>{Qe.order=_t}),S(N.map(Qe=>Qe.id===me?{...Qe,steps:Ke}:Qe))},He=me=>{C(ee=>{const fe=new Set(ee);return fe.has(me)?(fe.delete(me),F(null)):fe.add(me),fe})},Xe=(me,ee)=>{const fe=N.find(Ee=>Ee.id===me),Fe=fe==null?void 0:fe.steps.find(Ee=>Ee.id===ee);Fe&&(F(ee),Y(Fe.instructions))},ie=(me,ee)=>{S(N.map(fe=>fe.id===me?{...fe,steps:fe.steps.map(Fe=>Fe.id===ee?{...Fe,instructions:B}:Fe)}:fe)),F(null),Y("")},Q=(me,ee)=>{S(N.map(fe=>fe.id===me?{...fe,steps:fe.steps.map(Fe=>Fe.id===ee?{...Fe,checklistItems:[...Fe.checklistItems,""]}:Fe)}:fe))},Ne=(me,ee,fe,Fe)=>{S(N.map(Ee=>Ee.id===me?{...Ee,steps:Ee.steps.map(qe=>qe.id===ee?{...qe,checklistItems:qe.checklistItems.map((Ke,Qe)=>Qe===fe?Fe:Ke)}:qe)}:Ee))},de=(me,ee,fe)=>{S(N.map(Fe=>Fe.id===me?{...Fe,steps:Fe.steps.map(Ee=>Ee.id===ee?{...Ee,checklistItems:Ee.checklistItems.filter((qe,Ke)=>Ke!==fe)}:Ee)}:Fe))},ye=(me,ee,fe)=>{var qe;const Fe=(qe=fe.target.files)==null?void 0:qe[0];if(!Fe)return;if(Fe.type!=="application/pdf"){i("Please select a PDF file");return}if(Fe.size>10*1024*1024){i("File size must be less than 10MB");return}const Ee=new FileReader;Ee.onload=()=>{const Qe={type:"pdf",url:Ee.result,name:Fe.name};S(N.map(_t=>_t.id===me?{..._t,steps:_t.steps.map(vt=>vt.id===ee?{...vt,attachments:[...vt.attachments,Qe]}:vt)}:_t)),s("PDF attached successfully")},Ee.readAsDataURL(Fe)},xe=async(me,ee)=>{if(!o){i("User not authenticated");return}J(!0);try{const fe=await Gw({userId:o}),{accessToken:Fe}=(fe==null?void 0:fe.data)||{};if(!Fe)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");await new Promise((Ke,Qe)=>{let _t=0;const vt=50,ke=setInterval(()=>{_t++,window.google&&window.google.picker?(clearInterval(ke),Ke()):_t>=vt&&(clearInterval(ke),Qe(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const Ee=window.google.picker;new Ee.PickerBuilder().setOAuthToken(Fe).setCallback(Ke=>{if(J(!1),Ke[Ee.Response.ACTION]===Ee.Action.PICKED){const Qe=Ke[Ee.Response.DOCUMENTS];if(Qe&&Qe.length>0){const _t=Qe[0],vt={type:"gdrive",url:_t.url||_t.embedUrl||"",name:_t.name||"Untitled",fileId:_t.id};S(N.map(ke=>ke.id===me?{...ke,steps:ke.steps.map(Je=>Je.id===ee?{...Je,attachments:[...Je.attachments,vt]}:Je)}:ke)),s("File attached from Google Drive")}}else Ke[Ee.Response.ACTION]===Ee.Action.CANCEL&&J(!1)}).addView(Ee.ViewId.DOCS).enableFeature(Ee.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(fe){J(!1),i(fe.message||"Failed to open Google Drive picker")}},we=(me,ee,fe)=>{S(N.map(Fe=>Fe.id===me?{...Fe,steps:Fe.steps.map(Ee=>Ee.id===ee?{...Ee,attachments:Ee.attachments.filter((qe,Ke)=>Ke!==fe)}:Ee)}:Fe))},Ae=()=>{if(!u.trim())return"Template name is required";if(N.length===0)return"At least one section is required";for(const me of N){if(!me.name.trim())return`Section "${me.name||"Unnamed"}" must have a name`;if(me.steps.length===0)return`Section "${me.name}" must have at least one step`;for(const ee of me.steps)if(!ee.name.trim())return"All steps must have a name"}return null},Ue=async()=>{const me=Ae();if(me){i(me);return}_(!0);try{const ee=v&&g.trim()?g.trim():h,fe={name:u.trim(),category:ee,description:w,sections:N.map(Fe=>({id:Fe.id,name:Fe.name.trim(),order:Fe.order,steps:Fe.steps.map(Ee=>({id:Ee.id,name:Ee.name.trim(),instructions:Ee.instructions,checklistItems:Ee.checklistItems.filter(qe=>qe.trim()!==""),attachments:Ee.attachments,order:Ee.order}))}))};t?await f.mutateAsync({id:t,data:fe}):await d.mutateAsync(fe),n==null||n(),r()}catch(ee){i(ee.message||"Failed to save template")}finally{_(!1)}};return e?a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:r}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-6xl max-h-[90vh] shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between shrink-0",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:t?"Edit Playbook Template":"Create New Playbook Template"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:t?"Update your playbook template":"Build a reusable workflow template"})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6 space-y-6",children:c&&t?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(ct,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:["Template Name ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:u,onChange:me=>p(me.target.value),placeholder:"e.g., Sales Playbook",className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Category"}),a.jsx("div",{className:"flex items-center gap-2",children:v?a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"text",value:g,onChange:me=>x(me.target.value),placeholder:"Enter category name",className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"}),a.jsx("button",{onClick:()=>{b(!1),x("")},className:"px-3 py-2.5 text-slate-500 hover:text-slate-700",children:a.jsx(zt,{className:"w-4 h-4"})})]}):a.jsx(a.Fragment,{children:a.jsxs("select",{value:h,onChange:me=>{me.target.value==="custom"?b(!0):m(me.target.value)},className:"flex-1 px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"Sales",children:"Sales"}),a.jsx("option",{value:"Onboarding",children:"Onboarding"}),a.jsx("option",{value:"Custom",children:"Custom"}),a.jsx("option",{value:"custom",children:"+ Create New Category"})]})})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Description"}),a.jsx("textarea",{value:w,onChange:me=>y(me.target.value),placeholder:"Brief description of this playbook...",rows:3,className:"w-full px-4 py-2.5 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Sections & Steps"}),a.jsxs("button",{onClick:q,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors",children:[a.jsx($r,{className:"w-4 h-4"}),"Add Section"]})]}),N.length===0?a.jsxs("div",{className:"text-center py-12 border-2 border-dashed border-slate-200 rounded-xl",children:[a.jsx(_s,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500",children:"No sections yet. Add your first section to get started."})]}):a.jsx("div",{className:"space-y-3",children:N.map((me,ee)=>a.jsxs("div",{className:"border-2 border-slate-200 rounded-xl overflow-hidden",children:[a.jsxs("div",{className:"bg-slate-50 p-4 flex items-center gap-3",children:[a.jsx("button",{onClick:()=>ce(me.id),className:"p-1 hover:bg-white rounded-lg transition-colors",children:a.jsx($s,{className:`w-4 h-4 text-slate-400 transition-transform ${T.has(me.id)?"":"-rotate-90"}`})}),a.jsx("input",{type:"text",value:me.name,onChange:fe=>H(me.id,fe.target.value),placeholder:"Section name",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded-lg text-sm font-semibold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>se(me.id,"up"),disabled:ee===0,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:a.jsx(wk,{className:"w-4 h-4 text-slate-400"})}),a.jsx("button",{onClick:()=>se(me.id,"down"),disabled:ee===N.length-1,className:"p-1.5 hover:bg-white rounded-lg transition-colors disabled:opacity-30 disabled:cursor-not-allowed",children:a.jsx($s,{className:"w-4 h-4 text-slate-400"})}),a.jsx("button",{onClick:()=>L(me.id),className:"p-1.5 hover:bg-red-50 rounded-lg transition-colors text-red-600",children:a.jsx(br,{className:"w-4 h-4"})})]})]}),T.has(me.id)&&a.jsxs("div",{className:"p-4 space-y-3 bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-xs font-semibold text-slate-500 uppercase",children:[me.steps.length," Step",me.steps.length!==1?"s":""]}),a.jsxs("button",{onClick:()=>ae(me.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[a.jsx($r,{className:"w-3 h-3"}),"Add Step"]})]}),me.steps.length===0?a.jsxs("div",{className:"text-center py-8 border-2 border-dashed border-slate-200 rounded-lg",children:[a.jsx(Dn,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-xs text-slate-500",children:"No steps yet. Add your first step."})]}):a.jsx("div",{className:"space-y-3",children:me.steps.map((fe,Fe)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden",children:[a.jsxs("div",{className:"bg-white p-3 flex items-center gap-2",children:[a.jsx("button",{onClick:()=>He(fe.id),className:"p-1 hover:bg-slate-50 rounded transition-colors",children:a.jsx($s,{className:`w-3.5 h-3.5 text-slate-400 transition-transform ${A.has(fe.id)?"":"-rotate-90"}`})}),a.jsx("input",{type:"text",value:fe.name,onChange:Ee=>ve(me.id,fe.id,Ee.target.value),placeholder:"Step name",className:"flex-1 px-2 py-1 bg-slate-50 border border-slate-200 rounded text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{onClick:()=>ne(me.id,fe.id,"up"),disabled:Fe===0,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:a.jsx(wk,{className:"w-3 h-3 text-slate-400"})}),a.jsx("button",{onClick:()=>ne(me.id,fe.id,"down"),disabled:Fe===me.steps.length-1,className:"p-1 hover:bg-slate-50 rounded transition-colors disabled:opacity-30",children:a.jsx($s,{className:"w-3 h-3 text-slate-400"})}),a.jsx("button",{onClick:()=>Z(me.id,fe.id),className:"p-1 hover:bg-red-50 rounded transition-colors text-red-600",children:a.jsx(br,{className:"w-3 h-3"})})]})]}),A.has(fe.id)&&a.jsxs("div",{className:"p-4 bg-slate-50 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Instructions"}),M===fe.id?a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"bg-white border border-slate-200 rounded-lg",children:a.jsx(eA,{theme:"snow",value:B,onChange:Y,modules:E,formats:R,placeholder:"Add instructions, best practices, talking points...",className:"text-sm"})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>ie(me.id,fe.id),className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-semibold rounded-lg transition-colors",children:"Save Instructions"}),a.jsx("button",{onClick:()=>{F(null),Y("")},className:"px-3 py-1.5 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg transition-colors",children:"Cancel"})]})]}):a.jsxs("div",{className:"space-y-2",children:[fe.instructions?a.jsx("div",{className:"p-3 bg-white border border-slate-200 rounded-lg text-sm text-slate-700 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:_1.sanitize(fe.instructions)}}):a.jsx("div",{className:"p-3 bg-white border-2 border-dashed border-slate-200 rounded-lg text-sm text-slate-400 text-center",children:"No instructions added"}),a.jsxs("button",{onClick:()=>Xe(me.id,fe.id),className:"px-3 py-1.5 bg-indigo-50 hover:bg-indigo-100 text-indigo-700 text-xs font-semibold rounded-lg flex items-center gap-1.5 transition-colors",children:[a.jsx(Eo,{className:"w-3 h-3"}),fe.instructions?"Edit Instructions":"Add Instructions"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Checklist Items"}),a.jsxs("div",{className:"space-y-2",children:[fe.checklistItems.length===0?a.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No checklist items"}):fe.checklistItems.map((Ee,qe)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:Ee,onChange:Ke=>Ne(me.id,fe.id,qe,Ke.target.value),placeholder:"Checklist item",className:"flex-1 px-3 py-1.5 bg-white border border-slate-200 rounded text-sm text-slate-900 outline-none focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300"}),a.jsx("button",{onClick:()=>de(me.id,fe.id,qe),className:"p-1.5 hover:bg-red-50 rounded text-red-600 transition-colors",children:a.jsx(zt,{className:"w-3.5 h-3.5"})})]},qe)),a.jsxs("button",{onClick:()=>Q(me.id,fe.id),className:"w-full px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[a.jsx($r,{className:"w-3 h-3"}),"Add Checklist Item"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-700 mb-2",children:"Attachments"}),a.jsxs("div",{className:"space-y-2",children:[fe.attachments.length===0?a.jsx("div",{className:"text-xs text-slate-400 text-center py-2",children:"No attachments"}):fe.attachments.map((Ee,qe)=>a.jsxs("div",{className:"flex items-center justify-between p-2 bg-white border border-slate-200 rounded-lg",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[Ee.type==="pdf"?a.jsx(Dn,{className:"w-4 h-4 text-red-600 shrink-0"}):a.jsx(Tf,{className:"w-4 h-4 text-blue-600 shrink-0"}),a.jsx("span",{className:"text-xs font-medium text-slate-700 truncate",children:Ee.name}),Ee.type==="gdrive"&&a.jsx("span",{className:"text-xs text-blue-600 font-semibold shrink-0",children:"Google Drive"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[Ee.type==="gdrive"&&a.jsx("a",{href:Ee.url,target:"_blank",rel:"noopener noreferrer",className:"p-1 hover:bg-blue-50 rounded text-blue-600",children:a.jsx(za,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:()=>we(me.id,fe.id,qe),className:"p-1 hover:bg-red-50 rounded text-red-600",children:a.jsx(zt,{className:"w-3.5 h-3.5"})})]})]},qe)),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{ref:Ee=>{W.current[`${me.id}_${fe.id}_pdf`]=Ee},type:"file",accept:".pdf",onChange:Ee=>ye(me.id,fe.id,Ee),className:"hidden"}),a.jsxs("button",{onClick:()=>{var Ee;return(Ee=W.current[`${me.id}_${fe.id}_pdf`])==null?void 0:Ee.click()},className:"flex-1 px-3 py-2 bg-slate-100 hover:bg-slate-200 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[a.jsx(rh,{className:"w-3 h-3"}),"Upload PDF"]}),a.jsx("button",{onClick:()=>xe(me.id,fe.id),disabled:V||!U,className:"flex-1 px-3 py-2 bg-blue-50 hover:bg-blue-100 text-blue-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:V?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-3 h-3 animate-spin"}),"Loading..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Tf,{className:"w-3 h-3"}),"Google Drive"]})})]})]})]})]})]},fe.id))})]})]},me.id))})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 flex items-center justify-end gap-3 shrink-0",children:[a.jsx("button",{onClick:r,className:"px-4 py-2.5 text-slate-600 hover:bg-slate-50 text-sm font-semibold rounded-xl transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Ue,disabled:j||c,className:"px-6 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:j?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),t?"Update Template":"Create Template"]})})]})]})})]}):null},l2e=({instance:e,getCompanyName:t,getDealName:r,getProjectName:n,getUserName:s,onView:i})=>{var p,h,m,g;const{data:o=[]}=ob(e.id),l=((h=(p=e.templateSnapshot)==null?void 0:p.sections)==null?void 0:h.reduce((x,v)=>{var b;return x+(((b=v.steps)==null?void 0:b.length)||0)},0))||0,c=o.length,d=l>0?Math.round(c/l*100):0,f=e.dealId?{type:"Deal",name:r(e.dealId),id:e.dealId}:e.projectId?{type:"Project",name:n(e.projectId),id:e.projectId}:null,u=x=>{if(!x)return"";const v=new Date(x),b=new Date,w=new Date(b);return w.setDate(w.getDate()-1),v.toDateString()===b.toDateString()?"Today":v.toDateString()===w.toDateString()?"Yesterday":v.toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})};return a.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(_s,{className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:((m=e.templateSnapshot)==null?void 0:m.name)||"Unknown Playbook"}),((g=e.templateSnapshot)==null?void 0:g.version)&&a.jsxs("span",{className:"text-xs text-slate-400",children:["v",e.templateSnapshot.version]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:f?a.jsxs("div",{className:"flex items-center gap-2",children:[f.type==="Deal"?a.jsx(al,{className:"w-4 h-4 text-slate-400"}):a.jsx(nd,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-sm text-slate-600",children:f.name})]}):a.jsx("span",{className:"text-sm text-slate-400",children:""})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(rd,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-sm text-slate-600",children:e.companyId?t(e.companyId):""})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-[120px]",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsxs("span",{className:"text-xs font-medium text-slate-600",children:[c," / ",l]}),a.jsxs("span",{className:"text-xs text-slate-500",children:[d,"%"]})]}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all ${d===100?"bg-green-500":d>=50?"bg-indigo-500":"bg-yellow-500"}`,style:{width:`${d}%`}})})]}),d===100&&a.jsx(Qr,{className:"w-4 h-4 text-green-500"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:"text-sm text-slate-600",children:e.activatedBy?s(e.activatedBy):""})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Ln,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-sm text-slate-600",children:u(e.activatedAt)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("button",{onClick:()=>i(e.id),className:"text-indigo-600 hover:text-indigo-700 text-sm font-semibold flex items-center gap-1.5 transition-colors",children:["View",a.jsx(za,{className:"w-3.5 h-3.5"})]})})]})},c2e=({onNavigate:e,currentUser:t,playbookPrompt:r,onClearPlaybookPrompt:n})=>{const{showSuccess:s,showError:i}=hn(),[o,l]=P.useState("templates"),[c,d]=P.useState(""),[f,u]=P.useState("all"),[p,h]=P.useState(null),[m,g]=P.useState(!1),[x,v]=P.useState([]),[b,w]=P.useState(!1),[y,N]=P.useState(null),[S,j]=P.useState(!1),[_,T]=P.useState(null),[D,A]=P.useState(!1),[C,M]=P.useState(void 0),[F,B]=P.useState(void 0),[Y,V]=P.useState(""),[J,U]=P.useState("all"),[X,W]=P.useState("all"),{data:E=[],isLoading:R,error:q}=iB({category:f!=="all"?f:void 0,search:c||void 0}),L=pye(),H=oB(),{data:se=[],isLoading:ce}=jN({companyId:J!=="all"?J:void 0,status:X!=="all"?X:void 0}),{data:ae=[]}=ps({queryKey:["companies"],queryFn:async()=>{const ee=await jc();return ee.data||ee||[]},staleTime:5*60*1e3}),{data:Z=[]}=ps({queryKey:["deals"],queryFn:async()=>{const ee=await ib();return ee.data||ee||[]},staleTime:5*60*1e3}),{data:ve=[]}=ps({queryKey:["projects"],queryFn:async()=>{const ee=await C0();return ee.data||ee||[]},staleTime:5*60*1e3}),{data:ne=[]}=J6(),He=P.useRef("");P.useEffect(()=>{const ee=new Set;E.forEach(Ee=>{Ee.category&&ee.add(Ee.category)});const fe=Array.from(ee).sort(),Fe=fe.join(",");Fe!==He.current&&(He.current=Fe,v(fe))},[E.length]),P.useEffect(()=>{const ee=()=>{window.dispatchEvent(new Event("refresh-playbooks-queries"))};return window.addEventListener("refresh-playbooks",ee),()=>window.removeEventListener("refresh-playbooks",ee)},[]),P.useEffect(()=>{r&&r.dealId&&(l("templates"),M(r.dealId),B(r.templateId),A(!0),n&&n())},[r,n]),P.useEffect(()=>{S||R||j(!0)},[E.length,R]);const Xe=async ee=>{g(!0);try{await L.mutateAsync(ee.id),h(null)}catch(fe){i(fe.message||"Failed to delete template")}finally{g(!1)}},ie=async ee=>{try{await H.mutateAsync({name:`${ee.name} (Copy)`,category:ee.category||"Custom",description:ee.description||"",sections:ee.sections||[]}),s("Template duplicated successfully!")}catch(fe){i(fe.message||"Failed to duplicate template")}},Q=ee=>!ee.sections||!Array.isArray(ee.sections)?0:ee.sections.reduce((fe,Fe)=>{var Ee;return fe+(((Ee=Fe.steps)==null?void 0:Ee.length)||0)},0),Ne=ee=>{if(!ee)return"Never";const fe=new Date(ee),Ee=new Date().getTime()-fe.getTime(),qe=Math.floor(Ee/(1e3*60*60*24));return qe===0?"Today":qe===1?"Yesterday":qe<7?`${qe} days ago`:qe<30?`${Math.floor(qe/7)} weeks ago`:fe.toLocaleDateString()},de=ee=>({Sales:"bg-blue-100 text-blue-700",Onboarding:"bg-green-100 text-green-700",Custom:"bg-purple-100 text-purple-700"})[ee]||"bg-slate-100 text-slate-700",ye=P.useMemo(()=>{if(!c)return E;const ee=c.toLowerCase();return E.filter(fe=>{var Fe,Ee;return((Fe=fe.name)==null?void 0:Fe.toLowerCase().includes(ee))||((Ee=fe.description)==null?void 0:Ee.toLowerCase().includes(ee))})},[E,c]),xe=ee=>{const fe=ae.find(Fe=>Fe.id===ee);return(fe==null?void 0:fe.name)||"Unknown Company"},we=ee=>{const fe=Z.find(Fe=>Fe.id===ee);return(fe==null?void 0:fe.title)||(fe==null?void 0:fe.name)||"Unknown Deal"},Ae=ee=>{const fe=ve.find(Fe=>Fe.id===ee);return(fe==null?void 0:fe.title)||(fe==null?void 0:fe.name)||"Unknown Project"},Ue=ee=>{const fe=ne.find(Fe=>Fe.id===ee);return(fe==null?void 0:fe.name)||ee},me=P.useMemo(()=>{let ee=se;if(Y){const fe=Y.toLowerCase();ee=ee.filter(Fe=>{var _t;const Ee=((_t=Fe.templateSnapshot)==null?void 0:_t.name)||"",qe=Fe.companyId?xe(Fe.companyId).toLowerCase():"",Ke=Fe.dealId?we(Fe.dealId).toLowerCase():"",Qe=Fe.projectId?Ae(Fe.projectId).toLowerCase():"";return Ee.toLowerCase().includes(fe)||qe.includes(fe)||Ke.includes(fe)||Qe.includes(fe)})}return ee},[se,Y,ae,Z,ve]);return a.jsxs("div",{className:"h-full min-h-0 flex flex-col gap-6 animate-in slide-in-from-right-2 duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 shrink-0",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Playbooks"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Create and manage standardized workflows for your team"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:()=>l("templates"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="templates"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Template Library"}),a.jsx("button",{onClick:()=>l("active"),className:`px-4 py-2 rounded-xl font-semibold text-sm transition-all ${o==="active"?"bg-indigo-600 text-white shadow-lg shadow-indigo-100":"bg-white text-slate-600 border border-slate-200 hover:bg-slate-50"}`,children:"Active Playbooks"})]})]}),o==="templates"&&a.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[q&&a.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:a.jsxs("p",{className:"text-red-800 text-sm font-medium",children:["Error loading playbooks: ",q instanceof Error?q.message:"Unknown error"]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search playbooks...",value:c,onChange:ee=>d(ee.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(a0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsxs("select",{value:f,onChange:ee=>u(ee.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[a.jsx("option",{value:"all",children:"All Categories"}),x.map(ee=>a.jsx("option",{value:ee,children:ee},ee))]}),a.jsx(ra,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),a.jsxs("button",{onClick:()=>{N(null),w(!0)},className:"px-4 py-2.5 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[a.jsx($r,{className:"w-4 h-4"}),"Create New Playbook"]})]}),R?a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"flex flex-col items-center gap-3",children:[a.jsx(ct,{className:"w-8 h-8 text-indigo-600 animate-spin"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Loading playbooks..."})]})}):ye.length===0?a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx(_s,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No playbooks found"}),a.jsx("p",{className:"text-sm text-slate-500 mb-6",children:c||f!=="all"?"Try adjusting your search or filters":"Get started by creating your first playbook template"}),!c&&f==="all"&&a.jsxs("button",{onClick:()=>{N(null),w(!0)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 mx-auto transition-colors",children:[a.jsx($r,{className:"w-4 h-4"}),"Create Your First Playbook"]})]})}):a.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 pb-6",children:ye.map(ee=>{var Ee;const fe=Q(ee),Fe=((Ee=ee.sections)==null?void 0:Ee.length)||0;return a.jsxs("div",{className:"bg-white border border-slate-200 rounded-2xl p-6 hover:border-indigo-300 hover:shadow-lg transition-all cursor-pointer group",children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(_s,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 line-clamp-1",children:ee.name})]}),a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-lg text-xs font-semibold ${de(ee.category||"Custom")}`,children:ee.category||"Custom"})]}),a.jsx("div",{className:"relative",children:a.jsx("button",{onClick:qe=>{qe.stopPropagation()},className:"p-1.5 hover:bg-slate-100 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:a.jsx(F_,{className:"w-4 h-4 text-slate-400"})})})]}),ee.description&&a.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:ee.description}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Dn,{className:"w-4 h-4"}),a.jsxs("span",{children:[Fe," section",Fe!==1?"s":""]})]}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(O5,{className:"w-4 h-4"}),a.jsxs("span",{children:[fe," step",fe!==1?"s":""]})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-500",children:[a.jsx(Ln,{className:"w-3.5 h-3.5"}),a.jsxs("span",{children:["Updated ",Ne(ee.updatedAt||ee.createdAt)]})]}),a.jsx("div",{className:"flex items-center gap-1",children:a.jsxs("span",{className:"text-xs font-semibold text-slate-400",children:["v",ee.version||1]})})]}),a.jsxs("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-slate-100",children:[a.jsxs("button",{onClick:qe=>{qe.stopPropagation(),N(ee.id),w(!0)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[a.jsx(Eo,{className:"w-3.5 h-3.5"}),"Edit"]}),a.jsxs("button",{onClick:qe=>{qe.stopPropagation(),ie(ee)},className:"flex-1 px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:[a.jsx(AH,{className:"w-3.5 h-3.5"}),"Duplicate"]}),a.jsx("button",{onClick:qe=>{qe.stopPropagation(),h(ee)},className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-700 text-xs font-semibold rounded-lg flex items-center justify-center gap-1.5 transition-colors",children:a.jsx(br,{className:"w-3.5 h-3.5"})})]})]},ee.id)})})})]}),o==="active"&&a.jsxs("div",{className:"flex-1 min-h-0 flex flex-col gap-6",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 shrink-0",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search by playbook name, company, deal, or project...",value:Y,onChange:ee=>V(ee.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none transition-all"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(a0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsxs("select",{value:J,onChange:ee=>U(ee.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[a.jsx("option",{value:"all",children:"All Companies"}),ae.map(ee=>a.jsx("option",{value:ee.id,children:ee.name},ee.id))]}),a.jsx(ra,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(a0,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsxs("select",{value:X,onChange:ee=>W(ee.target.value),className:"pl-10 pr-8 py-2.5 bg-white border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 focus:border-indigo-300 outline-none appearance-none cursor-pointer",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"completed",children:"Completed"})]}),a.jsx(ra,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none rotate-90"})]})]}),ce?a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"})}):me.length===0?a.jsx("div",{className:"flex-1 flex items-center justify-center",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx(nd,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 mb-2",children:"No Active Playbooks"}),a.jsx("p",{className:"text-sm text-slate-500",children:Y||J!=="all"||X!=="all"?"No playbooks match your filters. Try adjusting your search criteria.":"No active playbook instances found. Attach a playbook to a Deal or Project to get started."})]})}):a.jsx("div",{className:"flex-1 min-h-0 overflow-y-auto",children:a.jsx("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Playbook Name"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Attached To"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Company"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Progress"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated By"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Activated Date"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-slate-600 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-slate-100",children:me.map(ee=>a.jsx(l2e,{instance:ee,getCompanyName:xe,getDealName:we,getProjectName:Ae,getUserName:Ue,onView:fe=>T(fe)},ee.id))})]})})})})]}),p&&a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>h(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Playbook Template"}),a.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:['Are you sure you want to delete "',p.name,'"? This action cannot be undone.']})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>h(null),className:"flex-1 py-2.5 text-sm font-semibold text-slate-600 hover:bg-slate-50 rounded-xl transition-colors border border-slate-200",disabled:m,children:"Cancel"}),a.jsx("button",{onClick:()=>Xe(p),disabled:m,className:"flex-1 py-2.5 bg-red-600 text-white text-sm font-semibold rounded-xl hover:bg-red-700 transition-all shadow-sm flex items-center justify-center gap-2 disabled:opacity-50",children:m?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})})]}),a.jsx(o2e,{isOpen:b,templateId:y,onClose:()=>{w(!1),N(null)},onSuccess:()=>{}}),a.jsx(Z6,{isOpen:D,dealId:C,preSelectedTemplateId:F,onClose:()=>{A(!1),M(void 0),B(void 0)},onSuccess:()=>{A(!1),M(void 0),B(void 0)}}),_&&a.jsx(kN,{instanceId:_,isOpen:!!_,onClose:()=>T(null)})]})},d2e=({onNavigate:e,companyIdFromUrl:t,onClearCompanyIdFromUrl:r})=>{const{showSuccess:n,showError:s}=hn(),i=localStorage.getItem("user_data")?JSON.parse(localStorage.getItem("user_data")||"{}"):null,[o,l]=P.useState([]),[c,d]=P.useState(!0),[f,u]=P.useState(""),[p,h]=P.useState(null),[m,g]=P.useState("date"),[x,v]=P.useState("desc"),[b,w]=P.useState([]),[y,N]=P.useState(!1),[S,j]=P.useState(!1),[_,T]=P.useState(null),[D,A]=P.useState([]),[C,M]=P.useState([]),[F,B]=P.useState("email"),[Y,V]=P.useState(!1),[J,U]=P.useState(!1),[X,W]=P.useState(null),[E,R]=P.useState(!1),[q,L]=P.useState({}),[H,se]=P.useState([]),[ce,ae]=P.useState({}),Z=P.useRef(!1),ve=async()=>{var me;try{R(!0);const ee=await xve();console.log("[SATISFACTION] Template response:",ee),ee&&ee.success&&ee.data?W(ee.data):(console.error("[SATISFACTION] Invalid response format:",ee),s(((me=ee==null?void 0:ee.error)==null?void 0:me.message)||(ee==null?void 0:ee.message)||"Failed to load survey template"))}catch(ee){console.error("[SATISFACTION] Error loading template:",ee),s(ee.message||"Failed to load survey template")}finally{R(!1)}};P.useEffect(()=>{J&&!X&&ve()},[J]),P.useEffect(()=>{(async()=>{try{const ee=await ud(),fe=(ee==null?void 0:ee.data)||ee||[];Array.isArray(fe)&&se(fe)}catch(ee){console.error("[SATISFACTION] Failed to load users",ee)}})()},[]),P.useEffect(()=>{(async()=>{try{const ee=await jc(),fe=(ee==null?void 0:ee.data)||ee||[];if(Array.isArray(fe)){const Fe={};fe.forEach(Ee=>{Ee.id&&(Fe[Ee.id]=Ee)}),ae(Fe)}}catch(ee){console.error("[SATISFACTION] Failed to load companies",ee)}})()},[]),P.useEffect(()=>{ne()},[]),P.useEffect(()=>{p&&Q(p.id)},[p]),P.useEffect(()=>{(async()=>{if(p!=null&&p.companyId)try{const ee=await Yh("",p.companyId);if(ee.success&&ee.data){const fe={};ee.data.forEach(Fe=>{Fe.id&&(fe[Fe.id]=Fe)}),L(fe)}}catch(ee){console.error("[SATISFACTION] Failed to load contacts for timeline",ee)}})()},[p==null?void 0:p.companyId]),P.useEffect(()=>{if(!t||Z.current||!r)return;Z.current=!0;const me=t;(async()=>{var ee;try{const fe=await Q3(me),Fe=(ee=fe==null?void 0:fe.data)==null?void 0:ee.satisfactionRecordId;Fe&&h({id:Fe,companyId:me,createdAt:"",createdBy:"",source:"manual"}),await Ae(me)}catch{await Ae(me)}finally{r()}})()},[t,r]);const ne=async()=>{try{d(!0);const me=await uve(f);if(me.success&&me.data){const ee=me.data.map(fe=>{var Fe,Ee;return{companyId:fe.companyId,companyName:((Fe=fe.company)==null?void 0:Fe.name)||"Unknown Company",latestNpsScore:fe.latestNpsScore,npsCategory:fe.npsCategory,accountManagerId:(Ee=fe.company)==null?void 0:Ee.ownerId,accountManagerName:null,lastSurveyDate:fe.lastSurveyDate,status:fe.status||"not_yet_sent",satisfactionRecordId:fe.id}});l(ee)}}catch(me){s(me.message||"Failed to load satisfaction records")}finally{d(!1)}},He=me=>me==null?null:me>=9?"Promoter":me>=7?"Passive":"Detractor",Xe=P.useMemo(()=>{const me=[];return b.forEach(ee=>{(ee.responses||[]).forEach(fe=>{const Fe=fe.contactId?q[fe.contactId]:null;let Ee="";if(fe.answers&&Array.isArray(fe.answers)){const qe=fe.answers.find(Ke=>typeof Ke.answer=="string"&&Ke.questionText&&(Ke.questionText.toLowerCase().includes("improve")||Ke.questionText.toLowerCase().includes("additional")))||fe.answers.find(Ke=>typeof Ke.answer=="string");qe&&typeof qe.answer=="string"&&(Ee=qe.answer)}me.push({id:fe.id,submittedAt:fe.submittedAt,npsScore:fe.npsScore,contactId:fe.contactId,contactName:Fe==null?void 0:Fe.name,feedback:Ee})})}),me.sort((ee,fe)=>{const Fe=ee.submittedAt?new Date(ee.submittedAt).getTime():0;return(fe.submittedAt?new Date(fe.submittedAt).getTime():0)-Fe}),me},[b,q]),ie=me=>{if(!me.accountManagerId||!H||H.length===0)return null;const ee=H.find(fe=>fe.id===me.accountManagerId);return(ee==null?void 0:ee.name)||null},Q=async me=>{try{N(!0);const ee=await fve(me);ee.success&&ee.data&&w(ee.data.surveys||[])}catch(ee){s(ee.message||"Failed to load record details")}finally{N(!1)}},Ne=me=>me==null?"text-slate-400":me>=9?"text-green-600":me>=7?"text-yellow-600":"text-red-600",de=me=>me==null?"bg-slate-100":me>=9?"bg-green-50":me>=7?"bg-yellow-50":"bg-red-50",ye=me=>{const fe={awaiting_response:{label:"Awaiting Response",color:"bg-yellow-100 text-yellow-700"},completed:{label:"Completed",color:"bg-green-100 text-green-700"},not_yet_sent:{label:"Not Yet Sent",color:"bg-slate-100 text-slate-700"}}[me];return a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${fe.color}`,children:fe.label})},xe=P.useMemo(()=>[...o.filter(ee=>ee.companyName.toLowerCase().includes(f.toLowerCase()))].sort((ee,fe)=>{let Fe=0;if(m==="score"){const Ee=ee.latestNpsScore??-1,qe=fe.latestNpsScore??-1;Fe=Ee-qe}else if(m==="date"){const Ee=ee.lastSurveyDate?new Date(ee.lastSurveyDate).getTime():0,qe=fe.lastSurveyDate?new Date(fe.lastSurveyDate).getTime():0;Fe=Ee-qe}else m==="status"&&(Fe=ee.status.localeCompare(fe.status));return x==="asc"?Fe:-Fe}),[o,f,m,x]),we=async()=>{var me,ee;if(!_||C.length===0){s("Please select a company and at least one contact");return}try{V(!0);let Fe=(me=(await Q3(_)).data)==null?void 0:me.satisfactionRecordId;Fe||(Fe=(await hve({companyId:_,source:"manual"})).data.id);const Ee=await mve({satisfactionRecordId:Fe,contactIds:C,deliveryMethod:F});if(F==="link"&&((ee=Ee.data)!=null&&ee.surveyUrl)){const qe=Ee.data.surveyUrl;navigator.clipboard?navigator.clipboard.writeText(qe).then(()=>{n(`Survey link copied to clipboard! Share: ${qe}`)}).catch(()=>{n(`Survey created! Copy this link: ${qe}`)}):n(`Survey created! Copy this link: ${qe}`)}else n("Survey sent successfully");j(!1),M([]),ne()}catch(fe){s(fe.message||"Failed to send survey")}finally{V(!1)}},Ae=async me=>{T(me),j(!0);try{const ee=await Yh("",me);if(ee.success&&ee.data){const fe=ee.data.filter(Fe=>Fe.email);A(fe)}}catch(ee){s(ee.message||"Failed to load contacts")}},Ue=me=>{if(!i)return!1;const ee=i.role==="Admin",fe=i.id===me.accountManagerId;return ee||fe};return a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 bg-white",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Client Satisfaction"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Track NPS scores and client feedback"})]}),!!i&&(i.role==="Admin"||o.some(ee=>ee.accountManagerId===i.id))?a.jsxs("button",{onClick:()=>U(!0),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold text-sm flex items-center gap-2",children:[a.jsx(Sk,{className:"w-4 h-4"}),"Survey Builder"]}):null]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex-1 relative",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search companies...",value:f,onChange:me=>u(me.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:m,onChange:me=>g(me.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"date",children:"Sort by Date"}),a.jsx("option",{value:"score",children:"Sort by Score"}),a.jsx("option",{value:"status",children:"Sort by Status"})]}),a.jsx("button",{onClick:()=>v(x==="asc"?"desc":"asc"),className:"p-2 border border-slate-300 rounded-lg hover:bg-slate-50",children:a.jsx(kH,{className:"w-4 h-4"})})]})]})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:c?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"})}):xe.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Eu,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500",children:"No satisfaction records found"})]}):a.jsx("div",{className:"space-y-4",children:xe.map(me=>{var ee,fe,Fe;return a.jsx("div",{onClick:()=>{const Ee={id:me.satisfactionRecordId,companyId:me.companyId,createdAt:"",createdBy:"",source:"manual"};h(Ee)},className:"bg-white border border-slate-200 rounded-xl p-6 hover:shadow-md transition-shadow cursor-pointer",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[a.jsx(hs,{src:(ee=ce[me.companyId])==null?void 0:ee.logo,fallbackText:((fe=ce[me.companyId])==null?void 0:fe.name)||me.companyName,className:"w-16 h-16 border border-slate-200",isAvatar:!1}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:((Fe=ce[me.companyId])==null?void 0:Fe.name)||me.companyName}),me.latestNpsScore!==void 0&&me.latestNpsScore!==null&&a.jsxs("span",{className:`px-2 py-0.5 rounded-lg text-sm font-bold ${me.latestNpsScore>=9?"bg-green-100 text-green-700":me.latestNpsScore>=7?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:["NPS ",me.latestNpsScore]})]}),a.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[me.npsCategory&&a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${me.npsCategory==="Promoter"?"bg-green-100 text-green-700":me.npsCategory==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:me.npsCategory}),ye(me.status),me.lastSurveyDate&&a.jsxs("span",{className:"text-xs text-slate-500 flex items-center gap-1",children:[a.jsx(Ln,{className:"w-3 h-3"}),new Date(me.lastSurveyDate).toLocaleDateString()]})]}),ie(me)&&a.jsxs("p",{className:"text-[11px] text-slate-500 mt-1",children:["Account Manager: ",ie(me)]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[Ue(me)&&a.jsxs("button",{onClick:Ee=>{Ee.stopPropagation(),Ae(me.companyId)},className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[a.jsx(Jo,{className:"w-4 h-4"}),"Send Survey"]}),a.jsx(ra,{className:"w-5 h-5 text-slate-400"})]})]})},me.satisfactionRecordId)})})}),p&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>h(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-2xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Satisfaction Details"}),a.jsx("button",{onClick:()=>h(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:y?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"border border-slate-200 rounded-2xl p-4 bg-slate-50/60",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em] mb-2",children:"Current NPS Score"}),Xe.length===0?a.jsx("p",{className:"text-sm text-slate-500",children:"No responses yet"}):a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center ${de(Xe[0].npsScore)}`,children:a.jsx("span",{className:`text-3xl font-black ${Ne(Xe[0].npsScore)}`,children:Xe[0].npsScore})}),a.jsxs("div",{className:"flex flex-col gap-1",children:[He(Xe[0].npsScore)&&a.jsx("span",{className:`inline-flex items-center px-2.5 py-1 rounded-full text-[10px] font-black uppercase tracking-widest ${He(Xe[0].npsScore)==="Promoter"?"bg-green-100 text-green-700":He(Xe[0].npsScore)==="Passive"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:He(Xe[0].npsScore)}),a.jsxs("p",{className:"text-xs text-slate-500",children:["Last response on"," ",Xe[0].submittedAt?new Date(Xe[0].submittedAt).toLocaleDateString():""]})]})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Historical Timeline"}),Xe.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No responses yet"}):a.jsx("div",{className:"space-y-3",children:Xe.map(me=>a.jsxs("div",{className:"flex items-start gap-3 border-l-2 border-slate-200 pl-4 relative",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500 absolute -left-[5px] mt-2"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("span",{className:"text-xs font-semibold text-slate-900",children:["NPS ",me.npsScore]}),me.contactName&&a.jsx("span",{className:"text-[11px] text-slate-500",children:me.contactName})]}),a.jsx("span",{className:"text-[10px] text-slate-400",children:me.submittedAt?new Date(me.submittedAt).toLocaleDateString():""})]}),me.feedback&&a.jsx("p",{className:"text-xs text-slate-600 line-clamp-2",children:me.feedback})]})]},me.id))})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-4",children:"Survey History"}),b.length===0?a.jsx("p",{className:"text-slate-500",children:"No surveys sent yet"}):a.jsx("div",{className:"space-y-4",children:b.map(me=>{var ee,fe;return a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-900",children:["Sent ",me.sentAt?new Date(me.sentAt).toLocaleDateString():""]}),a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-semibold ${me.status==="completed"?"bg-green-100 text-green-700":me.status==="sent"?"bg-yellow-100 text-yellow-700":me.status==="expired"?"bg-slate-200 text-slate-700":"bg-slate-100 text-slate-700"}`,children:me.status==="sent"?"Sent":me.status==="completed"?"Completed":me.status==="expired"?"Expired":me.status})]}),a.jsxs("div",{className:"text-xs text-slate-500 mb-1",children:[((ee=me.recipients)==null?void 0:ee.length)||0," recipient(s)  ",((fe=me.responses)==null?void 0:fe.length)||0," response(s)"]}),me.recipients&&me.recipients.length>0&&a.jsxs("div",{className:"text-[11px] text-slate-500 mb-2",children:["Recipients:"," ",me.recipients.slice(0,3).map(Fe=>Fe.email||Fe.contactId).join(", "),me.recipients.length>3&&a.jsxs("span",{className:"text-slate-400",children:[" ","+",me.recipients.length-3," more"]})]}),me.responses&&me.responses.length>0&&a.jsx("div",{className:"mt-3 space-y-3",children:me.responses.map(Fe=>a.jsxs("div",{className:"bg-slate-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-sm font-semibold",children:["NPS: ",Fe.npsScore]}),a.jsx("span",{className:"text-xs text-slate-500",children:new Date(Fe.submittedAt).toLocaleDateString()})]}),Fe.answers.map((Ee,qe)=>Ee.questionText&&Ee.answer&&a.jsxs("div",{className:"mt-2 text-sm",children:[a.jsx("span",{className:"font-medium text-slate-700",children:Ee.questionText}),a.jsx("p",{className:"text-slate-600 mt-1",children:String(Ee.answer)})]},qe))]},Fe.id))})]},me.id)})})]})]})})]})]}),S&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>j(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md pointer-events-auto",onClick:me=>me.stopPropagation(),children:[a.jsx("div",{className:"p-6 border-b border-slate-200",children:a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Send Survey"})}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Select Contacts"}),a.jsx("div",{className:"border border-slate-300 rounded-lg max-h-48 overflow-y-auto",children:D.map(me=>a.jsxs("label",{className:"flex items-center gap-3 p-3 hover:bg-slate-50 cursor-pointer border-b border-slate-100 last:border-b-0",children:[a.jsx("input",{type:"checkbox",checked:C.includes(me.id),onChange:ee=>{ee.target.checked?M([...C,me.id]):M(C.filter(fe=>fe!==me.id))},className:"w-4 h-4 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-900",children:me.name}),a.jsx("div",{className:"text-xs text-slate-500",children:me.email})]})]},me.id))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Delivery Method"}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",checked:F==="email",onChange:()=>B("email"),className:"w-4 h-4 text-indigo-600"}),a.jsx(ba,{className:"w-4 h-4"}),a.jsx("span",{children:"Email"})]}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"radio",checked:F==="link",onChange:()=>B("link"),className:"w-4 h-4 text-indigo-600"}),a.jsx(jk,{className:"w-4 h-4"}),a.jsx("span",{children:"Copy Link"})]})]}),F==="link"&&a.jsx("p",{className:"text-xs text-slate-500 mt-2",children:"A unique survey link will be generated after you send the survey. You can copy and share it via WhatsApp, SMS, or any other channel."})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex justify-end gap-3",children:[a.jsx("button",{onClick:()=>j(!1),className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),a.jsxs("button",{onClick:we,disabled:Y||C.length===0,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[Y&&a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Send Survey"]})]})]})})]}),J&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto",onClick:()=>U(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden flex flex-col pointer-events-auto",onClick:me=>me.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex justify-between items-center",children:[a.jsx("h3",{className:"text-xl font-bold text-slate-900",children:"Survey Builder"}),a.jsx("button",{onClick:()=>U(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:E?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"})}):X?a.jsx(u2e,{template:X,setTemplate:W,onClose:()=>U(!1),showSuccess:n,showError:s}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(On,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 mb-2",children:"Failed to load survey template"}),a.jsx("p",{className:"text-xs text-slate-400 mb-4",children:"Check browser console for details"}),a.jsx("button",{onClick:()=>{ve()},className:"mt-4 px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg",children:"Retry"})]})})]})})]})]})},u2e=({template:e,setTemplate:t,onClose:r,showSuccess:n,showError:s})=>{const[i,o]=P.useState(e),[l,c]=P.useState(!1),d=async()=>{try{c(!0),(await gve({questions:i.questions,name:i.name})).success&&(n("Survey template updated successfully"),t(i),r())}catch(m){s(m.message||"Failed to update survey template")}finally{c(!1)}},f=()=>{const m={id:`q${Date.now()}`,type:"free_text",text:"",required:!1,order:i.questions.length+1};o({...i,questions:[...i.questions,m]})},u=m=>{const g=i.questions.find(x=>x.order===1);if(g&&g.id===m){s("Cannot delete Q1 (the first NPS question)");return}o({...i,questions:i.questions.filter(x=>x.id!==m).map((x,v)=>({...x,order:v+1}))})},p=(m,g)=>{o({...i,questions:i.questions.map(x=>x.id===m?{...x,...g}:x)})},h=(m,g)=>{const x=[...i.questions],v=x.findIndex(N=>N.id===m);if(v===-1)return;const b=x.find(N=>N.order===1);if(b&&b.id===m){s("Q1 must remain first");return}if(g==="up"&&v<=0){s("Cannot move question before Q1");return}const w=g==="up"?v-1:v+1;if(w<0||w>=x.length)return;[x[v],x[w]]=[x[w],x[v]];const y=x.map((N,S)=>({...N,order:S+1}));o({...i,questions:y})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-slate-700 mb-2",children:"Template Name"}),a.jsx("input",{type:"text",value:i.name||"",onChange:m=>o({...i,name:m.target.value}),className:"w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h4",{className:"text-lg font-semibold text-slate-900",children:"Questions"}),a.jsxs("button",{onClick:f,className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg text-sm font-semibold flex items-center gap-2",children:[a.jsx($r,{className:"w-4 h-4"}),"Add Question"]})]}),a.jsx("div",{className:"space-y-4",children:i.questions.map((m,g)=>a.jsxs("div",{className:"border border-slate-200 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-start justify-between mb-3",children:[a.jsxs("span",{className:"text-sm font-semibold text-slate-500",children:["Q",m.order]}),a.jsxs("div",{className:"flex items-center gap-2",children:[g>0&&m.type!=="nps"&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>h(m.id,"up"),className:"p-1 hover:bg-slate-100 rounded",title:"Move up",children:a.jsx(ad,{className:"w-4 h-4 text-slate-500"})}),a.jsx("button",{onClick:()=>h(m.id,"down"),className:"p-1 hover:bg-slate-100 rounded",title:"Move down",children:a.jsx(ZH,{className:"w-4 h-4 text-slate-500"})})]}),!(m.order===1&&m.type==="nps")&&a.jsx("button",{onClick:()=>u(m.id),className:"p-1 hover:bg-red-50 rounded text-red-500",title:"Delete question",children:a.jsx(zt,{className:"w-4 h-4"})})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Type"}),a.jsxs("select",{value:m.type,onChange:x=>p(m.id,{type:x.target.value}),disabled:m.order===1&&m.type==="nps",className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm disabled:bg-slate-100",children:[a.jsx("option",{value:"nps",children:"NPS (0-10 scale)"}),a.jsx("option",{value:"multiple_choice",children:"Multiple Choice"}),a.jsx("option",{value:"free_text",children:"Free Text"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-1",children:"Question Text"}),a.jsx("input",{type:"text",value:m.text,onChange:x=>p(m.id,{text:x.target.value}),className:"w-full px-3 py-2 border border-slate-300 rounded-lg text-sm",placeholder:"Enter question text..."})]}),m.type==="multiple_choice"&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-semibold text-slate-600 mb-2",children:"Options"}),a.jsxs("div",{className:"space-y-2",children:[(m.options||[]).map((x,v)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:x,onChange:b=>{const w=[...m.options||[]];w[v]=b.target.value,p(m.id,{options:w})},className:"flex-1 px-3 py-2 border border-slate-300 rounded-lg text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:`Option ${v+1}`}),a.jsx("button",{onClick:()=>{const b=[...m.options||[]];b.splice(v,1),p(m.id,{options:b})},className:"p-2 hover:bg-red-50 rounded-lg text-red-500 transition-colors",title:"Remove option",children:a.jsx(zt,{className:"w-4 h-4"})})]},v)),a.jsxs("button",{onClick:()=>{const x=m.options||[];p(m.id,{options:[...x,""]})},className:"w-full px-3 py-2 border-2 border-dashed border-slate-300 rounded-lg text-sm text-slate-600 hover:border-indigo-400 hover:text-indigo-600 hover:bg-indigo-50 transition-colors flex items-center justify-center gap-2",children:[a.jsx($r,{className:"w-4 h-4"}),"Add Option"]}),(!m.options||m.options.length===0)&&a.jsx("p",{className:"text-xs text-slate-400 text-center py-2",children:'No options yet. Click "Add Option" to add choices.'})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",checked:m.required,onChange:x=>p(m.id,{required:x.target.checked}),disabled:m.order===1&&m.type==="nps",className:"w-4 h-4 text-indigo-600 disabled:opacity-50"}),a.jsx("label",{className:"text-sm text-slate-700",children:"Required"})]})]})]},m.id))})]}),a.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-slate-200",children:[a.jsx("button",{onClick:r,className:"px-4 py-2 border border-slate-300 rounded-lg text-slate-700 hover:bg-slate-50",children:"Cancel"}),a.jsxs("button",{onClick:d,disabled:l,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[l&&a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Save Template"]})]})]})},f2e=({surveyId:e})=>{const[t,r]=P.useState(null),[n,s]=P.useState(!0),[i,o]=P.useState(!1),[l,c]=P.useState(!1),[d,f]=P.useState(null),[u,p]=P.useState({}),[h,m]=P.useState(null);P.useEffect(()=>{g()},[e]);const g=async()=>{try{s(!0);const b=await pve(e);if(b.success&&b.data){r(b.data);const w={};b.data.templateSnapshot.forEach(S=>{S.type==="nps"?w[S.id]=null:(S.type,w[S.id]="")}),p(w);const N=new URLSearchParams(window.location.search).get("contact");N?m(N):b.data.recipients&&b.data.recipients.length>0&&m(b.data.recipients[0].contactId)}else f("Survey not found")}catch(b){f(b.message||"Failed to load survey")}finally{s(!1)}},x=(b,w)=>{p(y=>({...y,[b]:w}))},v=async()=>{if(!h){f("Contact information is missing");return}const b=t.templateSnapshot.find(w=>w.type==="nps");if(b&&(u[b.id]===null||u[b.id]===void 0)){f("Please answer the NPS question (required)");return}for(const w of t.templateSnapshot)if(w.required&&(!u[w.id]||u[w.id]==="")){f(`Please answer: ${w.text}`);return}try{o(!0),f(null);const w=Object.entries(u).filter(([y,N])=>N!==null&&N!=="").map(([y,N])=>({questionId:y,answer:N}));await vve(e,{contactId:h,answers:w}),c(!0)}catch(w){f(w.message||"Failed to submit survey")}finally{o(!1)}};return n?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ct,{className:"w-12 h-12 animate-spin text-indigo-600 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-600",children:"Loading survey..."})]})}):d&&!t?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md",children:[a.jsx(On,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Survey Not Found"}),a.jsx("p",{className:"text-slate-600",children:d})]})}):l?a.jsx("div",{className:"min-h-screen bg-slate-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"text-center max-w-md bg-white rounded-xl shadow-lg p-8",children:[a.jsx(Qr,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Thank You!"}),a.jsx("p",{className:"text-slate-600",children:"Your feedback has been submitted successfully."})]})}):t?(t.templateSnapshot.find(b=>b.type==="nps"),a.jsx("div",{className:"min-h-screen bg-slate-50 py-12 px-4",children:a.jsx("div",{className:"max-w-2xl mx-auto",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-900 mb-2",children:"Client Satisfaction Survey"}),a.jsx("p",{className:"text-slate-600",children:"We value your feedback. Please take a few moments to share your experience."})]}),d&&a.jsx("div",{className:"mb-6 p-4 bg-red-50 border border-red-200 rounded-lg",children:a.jsx("p",{className:"text-red-700 text-sm",children:d})}),a.jsx("div",{className:"space-y-8",children:t.templateSnapshot.map((b,w)=>{var y;return a.jsxs("div",{className:"space-y-3",children:[a.jsxs("label",{className:"block text-sm font-semibold text-slate-900",children:[b.text,b.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),b.type==="nps"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"flex items-center justify-between gap-2",children:[0,1,2,3,4,5,6,7,8,9,10].map(N=>a.jsx("button",{type:"button",onClick:()=>x(b.id,N),className:`flex-1 py-3 px-2 rounded-lg border-2 font-semibold transition-all ${u[b.id]===N?"bg-indigo-600 text-white border-indigo-600":"bg-white text-slate-700 border-slate-300 hover:border-indigo-400"}`,children:N},N))}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500 mt-2",children:[a.jsx("span",{children:"Not at all likely"}),a.jsx("span",{children:"Extremely likely"})]})]}),b.type==="multiple_choice"&&a.jsx("div",{className:"space-y-2",children:(y=b.options)==null?void 0:y.map(N=>a.jsxs("label",{className:"flex items-center gap-3 p-3 border border-slate-200 rounded-lg hover:bg-slate-50 cursor-pointer",children:[a.jsx("input",{type:"radio",name:b.id,value:N,checked:u[b.id]===N,onChange:S=>x(b.id,S.target.value),className:"w-4 h-4 text-indigo-600"}),a.jsx("span",{className:"text-slate-700",children:N})]},N))}),b.type==="free_text"&&a.jsx("textarea",{value:u[b.id]||"",onChange:N=>x(b.id,N.target.value),rows:4,className:"w-full px-4 py-3 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your answer..."})]},b.id)})}),a.jsx("div",{className:"mt-8 pt-6 border-t border-slate-200",children:a.jsx("button",{onClick:v,disabled:i,className:"w-full py-3 px-6 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:i?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-5 h-5 animate-spin"}),"Submitting..."]}):"Submit Survey"})})]})})})):null};/*! xlsx.js (C) 2013-present SheetJS -- http://sheetjs.com */var Jw={};Jw.version="0.18.5";var hB=1252,h2e=[874,932,936,949,950,1250,1251,1252,1253,1254,1255,1256,1257,1258,1e4],tA={0:1252,1:65001,2:65001,77:1e4,128:932,129:949,130:1361,134:936,136:950,161:1253,162:1254,163:1258,177:1255,178:1256,186:1257,204:1251,222:874,238:1250,255:1252,69:6969},rA=function(e){h2e.indexOf(e)!=-1&&(hB=tA[0]=e)};function p2e(){rA(1252)}var Jc=function(e){rA(e)};function nA(){Jc(1200),p2e()}function MI(e){for(var t=[],r=0,n=e.length;r<n;++r)t[r]=e.charCodeAt(r);return t}function m2e(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r)+(e.charCodeAt(2*r+1)<<8));return t.join("")}function pB(e){for(var t=[],r=0;r<e.length>>1;++r)t[r]=String.fromCharCode(e.charCodeAt(2*r+1)+(e.charCodeAt(2*r)<<8));return t.join("")}var Yg=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1);return t==255&&r==254?m2e(e.slice(2)):t==254&&r==255?pB(e.slice(2)):t==65279?e.slice(1):e},Ey=function(t){return String.fromCharCode(t)},RI=function(t){return String.fromCharCode(t)},A1,Vf="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function C1(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0,d=0;d<e.length;)r=e.charCodeAt(d++),i=r>>2,n=e.charCodeAt(d++),o=(r&3)<<4|n>>4,s=e.charCodeAt(d++),l=(n&15)<<2|s>>6,c=s&63,isNaN(n)?l=c=64:isNaN(s)&&(c=64),t+=Vf.charAt(i)+Vf.charAt(o)+Vf.charAt(l)+Vf.charAt(c);return t}function Rl(e){var t="",r=0,n=0,s=0,i=0,o=0,l=0,c=0;e=e.replace(/[^\w\+\/\=]/g,"");for(var d=0;d<e.length;)i=Vf.indexOf(e.charAt(d++)),o=Vf.indexOf(e.charAt(d++)),r=i<<2|o>>4,t+=String.fromCharCode(r),l=Vf.indexOf(e.charAt(d++)),n=(o&15)<<4|l>>2,l!==64&&(t+=String.fromCharCode(n)),c=Vf.indexOf(e.charAt(d++)),s=(l&3)<<6|c,c!==64&&(t+=String.fromCharCode(s));return t}var pn=function(){return typeof Buffer<"u"&&typeof process<"u"&&typeof process.versions<"u"&&!!process.versions.node}(),Qu=function(){if(typeof Buffer<"u"){var e=!Buffer.from;if(!e)try{Buffer.from("foo","utf8")}catch{e=!0}return e?function(t,r){return r?new Buffer(t,r):new Buffer(t)}:Buffer.from.bind(Buffer)}return function(){}}();function h0(e){return pn?Buffer.alloc?Buffer.alloc(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}function BI(e){return pn?Buffer.allocUnsafe?Buffer.allocUnsafe(e):new Buffer(e):typeof Uint8Array<"u"?new Uint8Array(e):new Array(e)}var Tl=function(t){return pn?Qu(t,"binary"):t.split("").map(function(r){return r.charCodeAt(0)&255})};function _N(e){if(typeof ArrayBuffer>"u")return Tl(e);for(var t=new ArrayBuffer(e.length),r=new Uint8Array(t),n=0;n!=e.length;++n)r[n]=e.charCodeAt(n)&255;return t}function E0(e){if(Array.isArray(e))return e.map(function(n){return String.fromCharCode(n)}).join("");for(var t=[],r=0;r<e.length;++r)t[r]=String.fromCharCode(e[r]);return t.join("")}function x2e(e){if(typeof Uint8Array>"u")throw new Error("Unsupported");return new Uint8Array(e)}function aA(e){if(typeof ArrayBuffer>"u")throw new Error("Unsupported");if(e instanceof ArrayBuffer)return aA(new Uint8Array(e));for(var t=new Array(e.length),r=0;r<e.length;++r)t[r]=e[r];return t}var yi=pn?function(e){return Buffer.concat(e.map(function(t){return Buffer.isBuffer(t)?t:Qu(t)}))}:function(e){if(typeof Uint8Array<"u"){var t=0,r=0;for(t=0;t<e.length;++t)r+=e[t].length;var n=new Uint8Array(r),s=0;for(t=0,r=0;t<e.length;r+=s,++t)if(s=e[t].length,e[t]instanceof Uint8Array)n.set(e[t],r);else{if(typeof e[t]=="string")throw"wtf";n.set(new Uint8Array(e[t]),r)}return n}return[].concat.apply([],e.map(function(i){return Array.isArray(i)?i:[].slice.call(i)}))};function g2e(e){for(var t=[],r=0,n=e.length+250,s=h0(e.length+255),i=0;i<e.length;++i){var o=e.charCodeAt(i);if(o<128)s[r++]=o;else if(o<2048)s[r++]=192|o>>6&31,s[r++]=128|o&63;else if(o>=55296&&o<57344){o=(o&1023)+64;var l=e.charCodeAt(++i)&1023;s[r++]=240|o>>8&7,s[r++]=128|o>>2&63,s[r++]=128|l>>6&15|(o&3)<<4,s[r++]=128|l&63}else s[r++]=224|o>>12&15,s[r++]=128|o>>6&63,s[r++]=128|o&63;r>n&&(t.push(s.slice(0,r)),r=0,s=h0(65535),n=65530)}return t.push(s.slice(0,r)),yi(t)}var To=/\u0000/g,Qg=/[\u0001-\u0006]/g;function Em(e){for(var t="",r=e.length-1;r>=0;)t+=e.charAt(r--);return t}function Zc(e,t){var r=""+e;return r.length>=t?r:fs("0",t-r.length)+r}function sA(e,t){var r=""+e;return r.length>=t?r:fs(" ",t-r.length)+r}function Zw(e,t){var r=""+e;return r.length>=t?r:r+fs(" ",t-r.length)}function v2e(e,t){var r=""+Math.round(e);return r.length>=t?r:fs("0",t-r.length)+r}function b2e(e,t){var r=""+e;return r.length>=t?r:fs("0",t-r.length)+r}var $I=Math.pow(2,32);function Gp(e,t){if(e>$I||e<-$I)return v2e(e,t);var r=Math.round(e);return b2e(r,t)}function e5(e,t){return t=t||0,e.length>=7+t&&(e.charCodeAt(t)|32)===103&&(e.charCodeAt(t+1)|32)===101&&(e.charCodeAt(t+2)|32)===110&&(e.charCodeAt(t+3)|32)===101&&(e.charCodeAt(t+4)|32)===114&&(e.charCodeAt(t+5)|32)===97&&(e.charCodeAt(t+6)|32)===108}var UI=[["Sun","Sunday"],["Mon","Monday"],["Tue","Tuesday"],["Wed","Wednesday"],["Thu","Thursday"],["Fri","Friday"],["Sat","Saturday"]],a4=[["J","Jan","January"],["F","Feb","February"],["M","Mar","March"],["A","Apr","April"],["M","May","May"],["J","Jun","June"],["J","Jul","July"],["A","Aug","August"],["S","Sep","September"],["O","Oct","October"],["N","Nov","November"],["D","Dec","December"]];function y2e(e){return e||(e={}),e[0]="General",e[1]="0",e[2]="0.00",e[3]="#,##0",e[4]="#,##0.00",e[9]="0%",e[10]="0.00%",e[11]="0.00E+00",e[12]="# ?/?",e[13]="# ??/??",e[14]="m/d/yy",e[15]="d-mmm-yy",e[16]="d-mmm",e[17]="mmm-yy",e[18]="h:mm AM/PM",e[19]="h:mm:ss AM/PM",e[20]="h:mm",e[21]="h:mm:ss",e[22]="m/d/yy h:mm",e[37]="#,##0 ;(#,##0)",e[38]="#,##0 ;[Red](#,##0)",e[39]="#,##0.00;(#,##0.00)",e[40]="#,##0.00;[Red](#,##0.00)",e[45]="mm:ss",e[46]="[h]:mm:ss",e[47]="mmss.0",e[48]="##0.0E+0",e[49]="@",e[56]='"/ "hh""mm""ss" "',e}var Br={0:"General",1:"0",2:"0.00",3:"#,##0",4:"#,##0.00",9:"0%",10:"0.00%",11:"0.00E+00",12:"# ?/?",13:"# ??/??",14:"m/d/yy",15:"d-mmm-yy",16:"d-mmm",17:"mmm-yy",18:"h:mm AM/PM",19:"h:mm:ss AM/PM",20:"h:mm",21:"h:mm:ss",22:"m/d/yy h:mm",37:"#,##0 ;(#,##0)",38:"#,##0 ;[Red](#,##0)",39:"#,##0.00;(#,##0.00)",40:"#,##0.00;[Red](#,##0.00)",45:"mm:ss",46:"[h]:mm:ss",47:"mmss.0",48:"##0.0E+0",49:"@",56:'"/ "hh""mm""ss" "'},zI={5:37,6:38,7:39,8:40,23:0,24:0,25:0,26:0,27:14,28:14,29:14,30:14,31:14,50:14,51:14,52:14,53:14,54:14,55:14,56:14,57:14,58:14,59:1,60:2,61:3,62:4,67:9,68:10,69:12,70:13,71:14,72:14,73:15,74:16,75:17,76:20,77:21,78:22,79:45,80:46,81:47,82:0},w2e={5:'"$"#,##0_);\\("$"#,##0\\)',63:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',41:'_(* #,##0_);_(* \\(#,##0\\);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* \\(#,##0\\);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* \\(#,##0.00\\);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* \\(#,##0.00\\);_("$"* "-"??_);_(@_)'};function t5(e,t,r){for(var n=e<0?-1:1,s=e*n,i=0,o=1,l=0,c=1,d=0,f=0,u=Math.floor(s);d<t&&(u=Math.floor(s),l=u*o+i,f=u*d+c,!(s-u<5e-8));)s=1/(s-u),i=o,o=l,c=d,d=f;if(f>t&&(d>t?(f=c,l=i):(f=d,l=o)),!r)return[0,n*l,f];var p=Math.floor(n*l/f);return[p,n*l-p*f,f]}function vh(e,t,r){if(e>2958465||e<0)return null;var n=e|0,s=Math.floor(86400*(e-n)),i=0,o=[],l={D:n,T:s,u:86400*(e-n)-s,y:0,m:0,d:0,H:0,M:0,S:0,q:0};if(Math.abs(l.u)<1e-6&&(l.u=0),t&&t.date1904&&(n+=1462),l.u>.9999&&(l.u=0,++s==86400&&(l.T=s=0,++n,++l.D)),n===60)o=r?[1317,10,29]:[1900,2,29],i=3;else if(n===0)o=r?[1317,8,29]:[1900,1,0],i=6;else{n>60&&--n;var c=new Date(1900,0,1);c.setDate(c.getDate()+n-1),o=[c.getFullYear(),c.getMonth()+1,c.getDate()],i=c.getDay(),n<60&&(i=(i+6)%7),r&&(i=A2e(c,o))}return l.y=o[0],l.m=o[1],l.d=o[2],l.S=s%60,s=Math.floor(s/60),l.M=s%60,s=Math.floor(s/60),l.H=s,l.q=i,l}var mB=new Date(1899,11,31,0,0,0),N2e=mB.getTime(),j2e=new Date(1900,2,1,0,0,0);function xB(e,t){var r=e.getTime();return t?r-=1461*24*60*60*1e3:e>=j2e&&(r+=24*60*60*1e3),(r-(N2e+(e.getTimezoneOffset()-mB.getTimezoneOffset())*6e4))/(24*60*60*1e3)}function iA(e){return e.indexOf(".")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)$/,"$1")}function k2e(e){return e.indexOf("E")==-1?e:e.replace(/(?:\.0*|(\.\d*[1-9])0+)[Ee]/,"$1E").replace(/(E[+-])(\d)$/,"$10$2")}function S2e(e){var t=e<0?12:11,r=iA(e.toFixed(12));return r.length<=t||(r=e.toPrecision(10),r.length<=t)?r:e.toExponential(5)}function _2e(e){var t=iA(e.toFixed(11));return t.length>(e<0?12:11)||t==="0"||t==="-0"?e.toPrecision(6):t}function E1(e){var t=Math.floor(Math.log(Math.abs(e))*Math.LOG10E),r;return t>=-4&&t<=-1?r=e.toPrecision(10+t):Math.abs(t)<=9?r=S2e(e):t===10?r=e.toFixed(10).substr(0,12):r=_2e(e),iA(k2e(r.toUpperCase()))}function Zh(e,t){switch(typeof e){case"string":return e;case"boolean":return e?"TRUE":"FALSE";case"number":return(e|0)===e?e.toString(10):E1(e);case"undefined":return"";case"object":if(e==null)return"";if(e instanceof Date)return yc(14,xB(e,t&&t.date1904),t)}throw new Error("unsupported value in General format: "+e)}function A2e(e,t){t[0]-=581;var r=e.getDay();return e<60&&(r=(r+6)%7),r}function C2e(e,t,r,n){var s="",i=0,o=0,l=r.y,c,d=0;switch(e){case 98:l=r.y+543;case 121:switch(t.length){case 1:case 2:c=l%100,d=2;break;default:c=l%1e4,d=4;break}break;case 109:switch(t.length){case 1:case 2:c=r.m,d=t.length;break;case 3:return a4[r.m-1][1];case 5:return a4[r.m-1][0];default:return a4[r.m-1][2]}break;case 100:switch(t.length){case 1:case 2:c=r.d,d=t.length;break;case 3:return UI[r.q][0];default:return UI[r.q][1]}break;case 104:switch(t.length){case 1:case 2:c=1+(r.H+11)%12,d=t.length;break;default:throw"bad hour format: "+t}break;case 72:switch(t.length){case 1:case 2:c=r.H,d=t.length;break;default:throw"bad hour format: "+t}break;case 77:switch(t.length){case 1:case 2:c=r.M,d=t.length;break;default:throw"bad minute format: "+t}break;case 115:if(t!="s"&&t!="ss"&&t!=".0"&&t!=".00"&&t!=".000")throw"bad second format: "+t;return r.u===0&&(t=="s"||t=="ss")?Zc(r.S,t.length):(n>=2?o=n===3?1e3:100:o=n===1?10:1,i=Math.round(o*(r.S+r.u)),i>=60*o&&(i=0),t==="s"?i===0?"0":""+i/o:(s=Zc(i,2+n),t==="ss"?s.substr(0,2):"."+s.substr(2,t.length-1)));case 90:switch(t){case"[h]":case"[hh]":c=r.D*24+r.H;break;case"[m]":case"[mm]":c=(r.D*24+r.H)*60+r.M;break;case"[s]":case"[ss]":c=((r.D*24+r.H)*60+r.M)*60+Math.round(r.S+r.u);break;default:throw"bad abstime format: "+t}d=t.length===3?1:2;break;case 101:c=l,d=1;break}var f=d>0?Zc(c,d):"";return f}function Gf(e){var t=3;if(e.length<=t)return e;for(var r=e.length%t,n=e.substr(0,r);r!=e.length;r+=t)n+=(n.length>0?",":"")+e.substr(r,t);return n}var gB=/%/g;function E2e(e,t,r){var n=t.replace(gB,""),s=t.length-n.length;return Iu(e,n,r*Math.pow(10,2*s))+fs("%",s)}function T2e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Iu(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function vB(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+vB(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),r.indexOf("e")===-1){var o=Math.floor(Math.log(t)*Math.LOG10E);for(r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i);r.substr(0,2)==="0.";)r=r.charAt(0)+r.substr(2,s)+"."+r.substr(2+s),r=r.replace(/^0+([1-9])/,"$1").replace(/^0+\./,"0.");r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,f){return c+d+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}var bB=/# (\?+)( ?)\/( ?)(\d+)/;function O2e(e,t,r){var n=parseInt(e[4],10),s=Math.round(t*n),i=Math.floor(s/n),o=s-i*n,l=n;return r+(i===0?"":""+i)+" "+(o===0?fs(" ",e[1].length+1+e[4].length):sA(o,e[1].length)+e[2]+"/"+e[3]+Zc(l,e[4].length))}function P2e(e,t,r){return r+(t===0?"":""+t)+fs(" ",e[1].length+2+e[4].length)}var yB=/^#*0*\.([0#]+)/,wB=/\).*[0#]/,NB=/\(###\) ###\\?-####/;function ko(e){for(var t="",r,n=0;n!=e.length;++n)switch(r=e.charCodeAt(n)){case 35:break;case 63:t+=" ";break;case 48:t+="0";break;default:t+=String.fromCharCode(r)}return t}function qI(e,t){var r=Math.pow(10,t);return""+Math.round(e*r)/r}function HI(e,t){var r=e-Math.floor(e),n=Math.pow(10,t);return t<(""+Math.round(r*n)).length?0:Math.round(r*n)}function I2e(e,t){return t<(""+Math.round((e-Math.floor(e))*Math.pow(10,t))).length?1:0}function D2e(e){return e<2147483647&&e>-2147483648?""+(e>=0?e|0:e-1|0):""+Math.floor(e)}function ec(e,t,r){if(e.charCodeAt(0)===40&&!t.match(wB)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?ec("n",n,r):"("+ec("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return T2e(e,t,r);if(t.indexOf("%")!==-1)return E2e(e,t,r);if(t.indexOf("E")!==-1)return vB(t,r);if(t.charCodeAt(0)===36)return"$"+ec(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Gp(c,t.length);if(t.match(/^[#?]+$/))return s=Gp(r,0),s==="0"&&(s=""),s.length>t.length?s:ko(t.substr(0,t.length-s.length))+s;if(i=t.match(bB))return O2e(i,c,d);if(t.match(/^#+0+$/))return d+Gp(c,t.length-t.indexOf("0"));if(i=t.match(yB))return s=qI(r,i[1].length).replace(/^([^\.]+)$/,"$1."+ko(i[1])).replace(/\.$/,"."+ko(i[1])).replace(/\.(\d*)$/,function(m,g){return"."+g+fs("0",ko(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+qI(c,i[2].length).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Gf(Gp(c,0));if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+ec(e,t,-r):Gf(""+(Math.floor(r)+I2e(r,i[1].length)))+"."+Zc(HI(r,i[1].length),i[1].length);if(i=t.match(/^#,#*,#0/))return ec(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Em(ec(e,t.replace(/[\\-]/g,""),r)),o=0,Em(Em(t.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<s.length?s.charAt(o++):m==="0"?"0":""}));if(t.match(NB))return s=ec(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=t5(c,Math.pow(10,o)-1,!1),s=""+d,f=Iu("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Zw(l[2],o),f.length<i[4].length&&(f=ko(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=t5(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?sA(l[1],o)+i[2]+"/"+i[3]+Zw(l[2],o):fs(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=Gp(r,0),t.length<=s.length?s:ko(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0?]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var u=t.indexOf(".")-o,p=t.length-s.length-u;return ko(t.substr(0,u)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return o=HI(r,i[1].length),r<0?"-"+ec(e,t,-r):Gf(D2e(r)).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Zc(0,3-m.length):"")+m})+"."+Zc(o,i[1].length);switch(t){case"###,##0.00":return ec(e,"#,##0.00",r);case"###,###":case"##,###":case"#,###":var h=Gf(Gp(c,0));return h!=="0"?d+h:"";case"###,###.00":return ec(e,"###,##0.00",r).replace(/^0\./,".");case"#,###.00":return ec(e,"#,##0.00",r).replace(/^0\./,".")}throw new Error("unsupported format |"+t+"|")}function L2e(e,t,r){for(var n=t.length-1;t.charCodeAt(n-1)===44;)--n;return Iu(e,t.substr(0,n),r/Math.pow(10,3*(t.length-n)))}function F2e(e,t,r){var n=t.replace(gB,""),s=t.length-n.length;return Iu(e,n,r*Math.pow(10,2*s))+fs("%",s)}function jB(e,t){var r,n=e.indexOf("E")-e.indexOf(".")-1;if(e.match(/^#+0.0E\+0$/)){if(t==0)return"0.0E+0";if(t<0)return"-"+jB(e,-t);var s=e.indexOf(".");s===-1&&(s=e.indexOf("E"));var i=Math.floor(Math.log(t)*Math.LOG10E)%s;if(i<0&&(i+=s),r=(t/Math.pow(10,i)).toPrecision(n+1+(s+i)%s),!r.match(/[Ee]/)){var o=Math.floor(Math.log(t)*Math.LOG10E);r.indexOf(".")===-1?r=r.charAt(0)+"."+r.substr(1)+"E+"+(o-r.length+i):r+="E+"+(o-i),r=r.replace(/\+-/,"-")}r=r.replace(/^([+-]?)(\d*)\.(\d*)[Ee]/,function(l,c,d,f){return c+d+f.substr(0,(s+i)%s)+"."+f.substr(i)+"E"})}else r=t.toExponential(n);return e.match(/E\+00$/)&&r.match(/e[+-]\d$/)&&(r=r.substr(0,r.length-1)+"0"+r.charAt(r.length-1)),e.match(/E\-/)&&r.match(/e\+/)&&(r=r.replace(/e\+/,"e")),r.replace("e","E")}function Cd(e,t,r){if(e.charCodeAt(0)===40&&!t.match(wB)){var n=t.replace(/\( */,"").replace(/ \)/,"").replace(/\)/,"");return r>=0?Cd("n",n,r):"("+Cd("n",n,-r)+")"}if(t.charCodeAt(t.length-1)===44)return L2e(e,t,r);if(t.indexOf("%")!==-1)return F2e(e,t,r);if(t.indexOf("E")!==-1)return jB(t,r);if(t.charCodeAt(0)===36)return"$"+Cd(e,t.substr(t.charAt(1)==" "?2:1),r);var s,i,o,l,c=Math.abs(r),d=r<0?"-":"";if(t.match(/^00+$/))return d+Zc(c,t.length);if(t.match(/^[#?]+$/))return s=""+r,r===0&&(s=""),s.length>t.length?s:ko(t.substr(0,t.length-s.length))+s;if(i=t.match(bB))return P2e(i,c,d);if(t.match(/^#+0+$/))return d+Zc(c,t.length-t.indexOf("0"));if(i=t.match(yB))return s=(""+r).replace(/^([^\.]+)$/,"$1."+ko(i[1])).replace(/\.$/,"."+ko(i[1])),s=s.replace(/\.(\d*)$/,function(m,g){return"."+g+fs("0",ko(i[1]).length-g.length)}),t.indexOf("0.")!==-1?s:s.replace(/^0\./,".");if(t=t.replace(/^#+([0.])/,"$1"),i=t.match(/^(0*)\.(#*)$/))return d+(""+c).replace(/\.(\d*[1-9])0*$/,".$1").replace(/^(-?\d*)$/,"$1.").replace(/^0\./,i[1].length?"0.":".");if(i=t.match(/^#{1,3},##0(\.?)$/))return d+Gf(""+c);if(i=t.match(/^#,##0\.([#0]*0)$/))return r<0?"-"+Cd(e,t,-r):Gf(""+r)+"."+fs("0",i[1].length);if(i=t.match(/^#,#*,#0/))return Cd(e,t.replace(/^#,#*,/,""),r);if(i=t.match(/^([0#]+)(\\?-([0#]+))+$/))return s=Em(Cd(e,t.replace(/[\\-]/g,""),r)),o=0,Em(Em(t.replace(/\\/g,"")).replace(/[0#]/g,function(m){return o<s.length?s.charAt(o++):m==="0"?"0":""}));if(t.match(NB))return s=Cd(e,"##########",r),"("+s.substr(0,3)+") "+s.substr(3,3)+"-"+s.substr(6);var f="";if(i=t.match(/^([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(i[4].length,7),l=t5(c,Math.pow(10,o)-1,!1),s=""+d,f=Iu("n",i[1],l[1]),f.charAt(f.length-1)==" "&&(f=f.substr(0,f.length-1)+"0"),s+=f+i[2]+"/"+i[3],f=Zw(l[2],o),f.length<i[4].length&&(f=ko(i[4].substr(i[4].length-f.length))+f),s+=f,s;if(i=t.match(/^# ([#0?]+)( ?)\/( ?)([#0?]+)/))return o=Math.min(Math.max(i[1].length,i[4].length),7),l=t5(c,Math.pow(10,o)-1,!0),d+(l[0]||(l[1]?"":"0"))+" "+(l[1]?sA(l[1],o)+i[2]+"/"+i[3]+Zw(l[2],o):fs(" ",2*o+1+i[2].length+i[3].length));if(i=t.match(/^[#0?]+$/))return s=""+r,t.length<=s.length?s:ko(t.substr(0,t.length-s.length))+s;if(i=t.match(/^([#0]+)\.([#0]+)$/)){s=""+r.toFixed(Math.min(i[2].length,10)).replace(/([^0])0+$/,"$1"),o=s.indexOf(".");var u=t.indexOf(".")-o,p=t.length-s.length-u;return ko(t.substr(0,u)+s+t.substr(t.length-p))}if(i=t.match(/^00,000\.([#0]*0)$/))return r<0?"-"+Cd(e,t,-r):Gf(""+r).replace(/^\d,\d{3}$/,"0$&").replace(/^\d*$/,function(m){return"00,"+(m.length<3?Zc(0,3-m.length):"")+m})+"."+Zc(0,i[1].length);switch(t){case"###,###":case"##,###":case"#,###":var h=Gf(""+c);return h!=="0"?d+h:"";default:if(t.match(/\.[0#?]*$/))return Cd(e,t.slice(0,t.lastIndexOf(".")),r)+ko(t.slice(t.lastIndexOf(".")))}throw new Error("unsupported format |"+t+"|")}function Iu(e,t,r){return(r|0)===r?Cd(e,t,r):ec(e,t,r)}function M2e(e){for(var t=[],r=!1,n=0,s=0;n<e.length;++n)switch(e.charCodeAt(n)){case 34:r=!r;break;case 95:case 42:case 92:++n;break;case 59:t[t.length]=e.substr(s,n-s),s=n+1}if(t[t.length]=e.substr(s),r===!0)throw new Error("Format |"+e+"| unterminated string ");return t}var kB=/\[[HhMmSs\u0E0A\u0E19\u0E17]*\]/;function Gx(e){for(var t=0,r="",n="";t<e.length;)switch(r=e.charAt(t)){case"G":e5(e,t)&&(t+=6),t++;break;case'"':for(;e.charCodeAt(++t)!==34&&t<e.length;);++t;break;case"\\":t+=2;break;case"_":t+=2;break;case"@":++t;break;case"B":case"b":if(e.charAt(t+1)==="1"||e.charAt(t+1)==="2")return!0;case"M":case"D":case"Y":case"H":case"S":case"E":case"m":case"d":case"y":case"h":case"s":case"e":case"g":return!0;case"A":case"a":case"":if(e.substr(t,3).toUpperCase()==="A/P"||e.substr(t,5).toUpperCase()==="AM/PM"||e.substr(t,5).toUpperCase()==="/")return!0;++t;break;case"[":for(n=r;e.charAt(t++)!=="]"&&t<e.length;)n+=e.charAt(t);if(n.match(kB))return!0;break;case".":case"0":case"#":for(;t<e.length&&("0#?.,E+-%".indexOf(r=e.charAt(++t))>-1||r=="\\"&&e.charAt(t+1)=="-"&&"0#".indexOf(e.charAt(t+2))>-1););break;case"?":for(;e.charAt(++t)===r;);break;case"*":++t,(e.charAt(t)==" "||e.charAt(t)=="*")&&++t;break;case"(":case")":++t;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;t<e.length&&"0123456789".indexOf(e.charAt(++t))>-1;);break;case" ":++t;break;default:++t;break}return!1}function R2e(e,t,r,n){for(var s=[],i="",o=0,l="",c="t",d,f,u,p="H";o<e.length;)switch(l=e.charAt(o)){case"G":if(!e5(e,o))throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"G",v:"General"},o+=7;break;case'"':for(i="";(u=e.charCodeAt(++o))!==34&&o<e.length;)i+=String.fromCharCode(u);s[s.length]={t:"t",v:i},++o;break;case"\\":var h=e.charAt(++o),m=h==="("||h===")"?h:"t";s[s.length]={t:m,v:h},++o;break;case"_":s[s.length]={t:"t",v:" "},o+=2;break;case"@":s[s.length]={t:"T",v:t},++o;break;case"B":case"b":if(e.charAt(o+1)==="1"||e.charAt(o+1)==="2"){if(d==null&&(d=vh(t,r,e.charAt(o+1)==="2"),d==null))return"";s[s.length]={t:"X",v:e.substr(o,2)},c=l,o+=2;break}case"M":case"D":case"Y":case"H":case"S":case"E":l=l.toLowerCase();case"m":case"d":case"y":case"h":case"s":case"e":case"g":if(t<0||d==null&&(d=vh(t,r),d==null))return"";for(i=l;++o<e.length&&e.charAt(o).toLowerCase()===l;)i+=l;l==="m"&&c.toLowerCase()==="h"&&(l="M"),l==="h"&&(l=p),s[s.length]={t:l,v:i},c=l;break;case"A":case"a":case"":var g={t:l,v:l};if(d==null&&(d=vh(t,r)),e.substr(o,3).toUpperCase()==="A/P"?(d!=null&&(g.v=d.H>=12?"P":"A"),g.t="T",p="h",o+=3):e.substr(o,5).toUpperCase()==="AM/PM"?(d!=null&&(g.v=d.H>=12?"PM":"AM"),g.t="T",o+=5,p="h"):e.substr(o,5).toUpperCase()==="/"?(d!=null&&(g.v=d.H>=12?"":""),g.t="T",o+=5,p="h"):(g.t="t",++o),d==null&&g.t==="T")return"";s[s.length]=g,c=l;break;case"[":for(i=l;e.charAt(o++)!=="]"&&o<e.length;)i+=e.charAt(o);if(i.slice(-1)!=="]")throw'unterminated "[" block: |'+i+"|";if(i.match(kB)){if(d==null&&(d=vh(t,r),d==null))return"";s[s.length]={t:"Z",v:i.toLowerCase()},c=i.charAt(1)}else i.indexOf("$")>-1&&(i=(i.match(/\$([^-\[\]]*)/)||[])[1]||"$",Gx(e)||(s[s.length]={t:"t",v:i}));break;case".":if(d!=null){for(i=l;++o<e.length&&(l=e.charAt(o))==="0";)i+=l;s[s.length]={t:"s",v:i};break}case"0":case"#":for(i=l;++o<e.length&&"0#?.,E+-%".indexOf(l=e.charAt(o))>-1;)i+=l;s[s.length]={t:"n",v:i};break;case"?":for(i=l;e.charAt(++o)===l;)i+=l;s[s.length]={t:l,v:i},c=l;break;case"*":++o,(e.charAt(o)==" "||e.charAt(o)=="*")&&++o;break;case"(":case")":s[s.length]={t:n===1?"t":l,v:l},++o;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(i=l;o<e.length&&"0123456789".indexOf(e.charAt(++o))>-1;)i+=e.charAt(o);s[s.length]={t:"D",v:i};break;case" ":s[s.length]={t:l,v:l},++o;break;case"$":s[s.length]={t:"t",v:"$"},++o;break;default:if(",$-+/():!^&'~{}<>=acfijklopqrtuvwxzP".indexOf(l)===-1)throw new Error("unrecognized character "+l+" in "+e);s[s.length]={t:"t",v:l},++o;break}var x=0,v=0,b;for(o=s.length-1,c="t";o>=0;--o)switch(s[o].t){case"h":case"H":s[o].t=p,c="h",x<1&&(x=1);break;case"s":(b=s[o].v.match(/\.0+$/))&&(v=Math.max(v,b[0].length-1)),x<3&&(x=3);case"d":case"y":case"M":case"e":c=s[o].t;break;case"m":c==="s"&&(s[o].t="M",x<2&&(x=2));break;case"X":break;case"Z":x<1&&s[o].v.match(/[Hh]/)&&(x=1),x<2&&s[o].v.match(/[Mm]/)&&(x=2),x<3&&s[o].v.match(/[Ss]/)&&(x=3)}switch(x){case 0:break;case 1:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M),d.M>=60&&(d.M=0,++d.H);break;case 2:d.u>=.5&&(d.u=0,++d.S),d.S>=60&&(d.S=0,++d.M);break}var w="",y;for(o=0;o<s.length;++o)switch(s[o].t){case"t":case"T":case" ":case"D":break;case"X":s[o].v="",s[o].t=";";break;case"d":case"m":case"y":case"h":case"H":case"M":case"s":case"e":case"b":case"Z":s[o].v=C2e(s[o].t.charCodeAt(0),s[o].v,d,v),s[o].t="t";break;case"n":case"?":for(y=o+1;s[y]!=null&&((l=s[y].t)==="?"||l==="D"||(l===" "||l==="t")&&s[y+1]!=null&&(s[y+1].t==="?"||s[y+1].t==="t"&&s[y+1].v==="/")||s[o].t==="("&&(l===" "||l==="n"||l===")")||l==="t"&&(s[y].v==="/"||s[y].v===" "&&s[y+1]!=null&&s[y+1].t=="?"));)s[o].v+=s[y].v,s[y]={v:"",t:";"},++y;w+=s[o].v,o=y-1;break;case"G":s[o].t="t",s[o].v=Zh(t,r);break}var N="",S,j;if(w.length>0){w.charCodeAt(0)==40?(S=t<0&&w.charCodeAt(0)===45?-t:t,j=Iu("n",w,S)):(S=t<0&&n>1?-t:t,j=Iu("n",w,S),S<0&&s[0]&&s[0].t=="t"&&(j=j.substr(1),s[0].v="-"+s[0].v)),y=j.length-1;var _=s.length;for(o=0;o<s.length;++o)if(s[o]!=null&&s[o].t!="t"&&s[o].v.indexOf(".")>-1){_=o;break}var T=s.length;if(_===s.length&&j.indexOf("E")===-1){for(o=s.length-1;o>=0;--o)s[o]==null||"n?".indexOf(s[o].t)===-1||(y>=s[o].v.length-1?(y-=s[o].v.length,s[o].v=j.substr(y+1,s[o].v.length)):y<0?s[o].v="":(s[o].v=j.substr(0,y+1),y=-1),s[o].t="t",T=o);y>=0&&T<s.length&&(s[T].v=j.substr(0,y+1)+s[T].v)}else if(_!==s.length&&j.indexOf("E")===-1){for(y=j.indexOf(".")-1,o=_;o>=0;--o)if(!(s[o]==null||"n?".indexOf(s[o].t)===-1)){for(f=s[o].v.indexOf(".")>-1&&o===_?s[o].v.indexOf(".")-1:s[o].v.length-1,N=s[o].v.substr(f+1);f>=0;--f)y>=0&&(s[o].v.charAt(f)==="0"||s[o].v.charAt(f)==="#")&&(N=j.charAt(y--)+N);s[o].v=N,s[o].t="t",T=o}for(y>=0&&T<s.length&&(s[T].v=j.substr(0,y+1)+s[T].v),y=j.indexOf(".")+1,o=_;o<s.length;++o)if(!(s[o]==null||"n?(".indexOf(s[o].t)===-1&&o!==_)){for(f=s[o].v.indexOf(".")>-1&&o===_?s[o].v.indexOf(".")+1:0,N=s[o].v.substr(0,f);f<s[o].v.length;++f)y<j.length&&(N+=j.charAt(y++));s[o].v=N,s[o].t="t",T=o}}}for(o=0;o<s.length;++o)s[o]!=null&&"n?".indexOf(s[o].t)>-1&&(S=n>1&&t<0&&o>0&&s[o-1].v==="-"?-t:t,s[o].v=Iu(s[o].t,s[o].v,S),s[o].t="t");var D="";for(o=0;o!==s.length;++o)s[o]!=null&&(D+=s[o].v);return D}var WI=/\[(=|>[=]?|<[>=]?)(-?\d+(?:\.\d*)?)\]/;function VI(e,t){if(t==null)return!1;var r=parseFloat(t[2]);switch(t[1]){case"=":if(e==r)return!0;break;case">":if(e>r)return!0;break;case"<":if(e<r)return!0;break;case"<>":if(e!=r)return!0;break;case">=":if(e>=r)return!0;break;case"<=":if(e<=r)return!0;break}return!1}function B2e(e,t){var r=M2e(e),n=r.length,s=r[n-1].indexOf("@");if(n<4&&s>-1&&--n,r.length>4)throw new Error("cannot find right format for |"+r.join("|")+"|");if(typeof t!="number")return[4,r.length===4||s>-1?r[r.length-1]:"@"];switch(r.length){case 1:r=s>-1?["General","General","General",r[0]]:[r[0],r[0],r[0],"@"];break;case 2:r=s>-1?[r[0],r[0],r[0],r[1]]:[r[0],r[1],r[0],"@"];break;case 3:r=s>-1?[r[0],r[1],r[0],r[2]]:[r[0],r[1],r[2],"@"];break}var i=t>0?r[0]:t<0?r[1]:r[2];if(r[0].indexOf("[")===-1&&r[1].indexOf("[")===-1)return[n,i];if(r[0].match(/\[[=<>]/)!=null||r[1].match(/\[[=<>]/)!=null){var o=r[0].match(WI),l=r[1].match(WI);return VI(t,o)?[n,r[0]]:VI(t,l)?[n,r[1]]:[n,r[o!=null&&l!=null?2:1]]}return[n,i]}function yc(e,t,r){r==null&&(r={});var n="";switch(typeof e){case"string":e=="m/d/yy"&&r.dateNF?n=r.dateNF:n=e;break;case"number":e==14&&r.dateNF?n=r.dateNF:n=(r.table!=null?r.table:Br)[e],n==null&&(n=r.table&&r.table[zI[e]]||Br[zI[e]]),n==null&&(n=w2e[e]||"General");break}if(e5(n,0))return Zh(t,r);t instanceof Date&&(t=xB(t,r.date1904));var s=B2e(n,t);if(e5(s[1]))return Zh(t,r);if(t===!0)t="TRUE";else if(t===!1)t="FALSE";else if(t===""||t==null)return"";return R2e(s[1],t,r,s[0])}function Du(e,t){if(typeof t!="number"){t=+t||-1;for(var r=0;r<392;++r){if(Br[r]==null){t<0&&(t=r);continue}if(Br[r]==e){t=r;break}}t<0&&(t=391)}return Br[t]=e,t}function AN(e){for(var t=0;t!=392;++t)e[t]!==void 0&&Du(e[t],t)}function Kx(){Br=y2e()}var $2e={5:'"$"#,##0_);\\("$"#,##0\\)',6:'"$"#,##0_);[Red]\\("$"#,##0\\)',7:'"$"#,##0.00_);\\("$"#,##0.00\\)',8:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',23:"General",24:"General",25:"General",26:"General",27:"m/d/yy",28:"m/d/yy",29:"m/d/yy",30:"m/d/yy",31:"m/d/yy",32:"h:mm:ss",33:"h:mm:ss",34:"h:mm:ss",35:"h:mm:ss",36:"m/d/yy",41:'_(* #,##0_);_(* (#,##0);_(* "-"_);_(@_)',42:'_("$"* #,##0_);_("$"* (#,##0);_("$"* "-"_);_(@_)',43:'_(* #,##0.00_);_(* (#,##0.00);_(* "-"??_);_(@_)',44:'_("$"* #,##0.00_);_("$"* (#,##0.00);_("$"* "-"??_);_(@_)',50:"m/d/yy",51:"m/d/yy",52:"m/d/yy",53:"m/d/yy",54:"m/d/yy",55:"m/d/yy",56:"m/d/yy",57:"m/d/yy",58:"m/d/yy",59:"0",60:"0.00",61:"#,##0",62:"#,##0.00",63:'"$"#,##0_);\\("$"#,##0\\)',64:'"$"#,##0_);[Red]\\("$"#,##0\\)',65:'"$"#,##0.00_);\\("$"#,##0.00\\)',66:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',67:"0%",68:"0.00%",69:"# ?/?",70:"# ??/??",71:"m/d/yy",72:"m/d/yy",73:"d-mmm-yy",74:"d-mmm",75:"mmm-yy",76:"h:mm",77:"h:mm:ss",78:"m/d/yy h:mm",79:"mm:ss",80:"[h]:mm:ss",81:"mmss.0"},SB=/[dD]+|[mM]+|[yYeE]+|[Hh]+|[Ss]+/g;function U2e(e){var t=typeof e=="number"?Br[e]:e;return t=t.replace(SB,"(\\d+)"),new RegExp("^"+t+"$")}function z2e(e,t,r){var n=-1,s=-1,i=-1,o=-1,l=-1,c=-1;(t.match(SB)||[]).forEach(function(u,p){var h=parseInt(r[p+1],10);switch(u.toLowerCase().charAt(0)){case"y":n=h;break;case"d":i=h;break;case"h":o=h;break;case"s":c=h;break;case"m":o>=0?l=h:s=h;break}}),c>=0&&l==-1&&s>=0&&(l=s,s=-1);var d=(""+(n>=0?n:new Date().getFullYear())).slice(-4)+"-"+("00"+(s>=1?s:1)).slice(-2)+"-"+("00"+(i>=1?i:1)).slice(-2);d.length==7&&(d="0"+d),d.length==8&&(d="20"+d);var f=("00"+(o>=0?o:0)).slice(-2)+":"+("00"+(l>=0?l:0)).slice(-2)+":"+("00"+(c>=0?c:0)).slice(-2);return o==-1&&l==-1&&c==-1?d:n==-1&&s==-1&&i==-1?f:d+"T"+f}var q2e=function(){var e={};e.version="1.2.0";function t(){for(var j=0,_=new Array(256),T=0;T!=256;++T)j=T,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,j=j&1?-306674912^j>>>1:j>>>1,_[T]=j;return typeof Int32Array<"u"?new Int32Array(_):_}var r=t();function n(j){var _=0,T=0,D=0,A=typeof Int32Array<"u"?new Int32Array(4096):new Array(4096);for(D=0;D!=256;++D)A[D]=j[D];for(D=0;D!=256;++D)for(T=j[D],_=256+D;_<4096;_+=256)T=A[_]=T>>>8^j[T&255];var C=[];for(D=1;D!=16;++D)C[D-1]=typeof Int32Array<"u"?A.subarray(D*256,D*256+256):A.slice(D*256,D*256+256);return C}var s=n(r),i=s[0],o=s[1],l=s[2],c=s[3],d=s[4],f=s[5],u=s[6],p=s[7],h=s[8],m=s[9],g=s[10],x=s[11],v=s[12],b=s[13],w=s[14];function y(j,_){for(var T=_^-1,D=0,A=j.length;D<A;)T=T>>>8^r[(T^j.charCodeAt(D++))&255];return~T}function N(j,_){for(var T=_^-1,D=j.length-15,A=0;A<D;)T=w[j[A++]^T&255]^b[j[A++]^T>>8&255]^v[j[A++]^T>>16&255]^x[j[A++]^T>>>24]^g[j[A++]]^m[j[A++]]^h[j[A++]]^p[j[A++]]^u[j[A++]]^f[j[A++]]^d[j[A++]]^c[j[A++]]^l[j[A++]]^o[j[A++]]^i[j[A++]]^r[j[A++]];for(D+=15;A<D;)T=T>>>8^r[(T^j[A++])&255];return~T}function S(j,_){for(var T=_^-1,D=0,A=j.length,C=0,M=0;D<A;)C=j.charCodeAt(D++),C<128?T=T>>>8^r[(T^C)&255]:C<2048?(T=T>>>8^r[(T^(192|C>>6&31))&255],T=T>>>8^r[(T^(128|C&63))&255]):C>=55296&&C<57344?(C=(C&1023)+64,M=j.charCodeAt(D++)&1023,T=T>>>8^r[(T^(240|C>>8&7))&255],T=T>>>8^r[(T^(128|C>>2&63))&255],T=T>>>8^r[(T^(128|M>>6&15|(C&3)<<4))&255],T=T>>>8^r[(T^(128|M&63))&255]):(T=T>>>8^r[(T^(224|C>>12&15))&255],T=T>>>8^r[(T^(128|C>>6&63))&255],T=T>>>8^r[(T^(128|C&63))&255]);return~T}return e.table=r,e.bstr=y,e.buf=N,e.str=S,e}(),Or=function(){var t={};t.version="1.2.1";function r(ge,De){for(var Ce=ge.split("/"),Oe=De.split("/"),G=0,oe=0,Pe=Math.min(Ce.length,Oe.length);G<Pe;++G){if(oe=Ce[G].length-Oe[G].length)return oe;if(Ce[G]!=Oe[G])return Ce[G]<Oe[G]?-1:1}return Ce.length-Oe.length}function n(ge){if(ge.charAt(ge.length-1)=="/")return ge.slice(0,-1).indexOf("/")===-1?ge:n(ge.slice(0,-1));var De=ge.lastIndexOf("/");return De===-1?ge:ge.slice(0,De+1)}function s(ge){if(ge.charAt(ge.length-1)=="/")return s(ge.slice(0,-1));var De=ge.lastIndexOf("/");return De===-1?ge:ge.slice(De+1)}function i(ge,De){typeof De=="string"&&(De=new Date(De));var Ce=De.getHours();Ce=Ce<<6|De.getMinutes(),Ce=Ce<<5|De.getSeconds()>>>1,ge.write_shift(2,Ce);var Oe=De.getFullYear()-1980;Oe=Oe<<4|De.getMonth()+1,Oe=Oe<<5|De.getDate(),ge.write_shift(2,Oe)}function o(ge){var De=ge.read_shift(2)&65535,Ce=ge.read_shift(2)&65535,Oe=new Date,G=Ce&31;Ce>>>=5;var oe=Ce&15;Ce>>>=4,Oe.setMilliseconds(0),Oe.setFullYear(Ce+1980),Oe.setMonth(oe-1),Oe.setDate(G);var Pe=De&31;De>>>=5;var $e=De&63;return De>>>=6,Oe.setHours(De),Oe.setMinutes($e),Oe.setSeconds(Pe<<1),Oe}function l(ge){Pi(ge,0);for(var De={},Ce=0;ge.l<=ge.length-4;){var Oe=ge.read_shift(2),G=ge.read_shift(2),oe=ge.l+G,Pe={};switch(Oe){case 21589:Ce=ge.read_shift(1),Ce&1&&(Pe.mtime=ge.read_shift(4)),G>5&&(Ce&2&&(Pe.atime=ge.read_shift(4)),Ce&4&&(Pe.ctime=ge.read_shift(4))),Pe.mtime&&(Pe.mt=new Date(Pe.mtime*1e3));break}ge.l=oe,De[Oe]=Pe}return De}var c;function d(){return c||(c={})}function f(ge,De){if(ge[0]==80&&ge[1]==75)return xt(ge,De);if((ge[0]|32)==109&&(ge[1]|32)==105)return cr(ge,De);if(ge.length<512)throw new Error("CFB file size "+ge.length+" < 512");var Ce=3,Oe=512,G=0,oe=0,Pe=0,$e=0,We=0,Ve=[],Re=ge.slice(0,512);Pi(Re,0);var _e=u(Re);switch(Ce=_e[0],Ce){case 3:Oe=512;break;case 4:Oe=4096;break;case 0:if(_e[1]==0)return xt(ge,De);default:throw new Error("Major Version: Expected 3 or 4 saw "+Ce)}Oe!==512&&(Re=ge.slice(0,Oe),Pi(Re,28));var Ge=ge.slice(0,Oe);p(Re,Ce);var nt=Re.read_shift(4,"i");if(Ce===3&&nt!==0)throw new Error("# Directory Sectors: Expected 0 saw "+nt);Re.l+=4,Pe=Re.read_shift(4,"i"),Re.l+=4,Re.chk("00100000","Mini Stream Cutoff Size: "),$e=Re.read_shift(4,"i"),G=Re.read_shift(4,"i"),We=Re.read_shift(4,"i"),oe=Re.read_shift(4,"i");for(var ut=-1,wt=0;wt<109&&(ut=Re.read_shift(4,"i"),!(ut<0));++wt)Ve[wt]=ut;var Mt=h(ge,Oe);x(We,oe,Mt,Oe,Ve);var Xt=b(Mt,Pe,Ve,Oe);Xt[Pe].name="!Directory",G>0&&$e!==M&&(Xt[$e].name="!MiniFAT"),Xt[Ve[0]].name="!FAT",Xt.fat_addrs=Ve,Xt.ssz=Oe;var _r={},$n=[],Ts=[],Pn=[];w(Pe,Xt,Mt,$n,G,_r,Ts,$e),m(Ts,Pn,$n),$n.shift();var Vs={FileIndex:Ts,FullPaths:Pn};return De&&De.raw&&(Vs.raw={header:Ge,sectors:Mt}),Vs}function u(ge){if(ge[ge.l]==80&&ge[ge.l+1]==75)return[0,0];ge.chk(F,"Header Signature: "),ge.l+=16;var De=ge.read_shift(2,"u");return[ge.read_shift(2,"u"),De]}function p(ge,De){var Ce=9;switch(ge.l+=2,Ce=ge.read_shift(2)){case 9:if(De!=3)throw new Error("Sector Shift: Expected 9 saw "+Ce);break;case 12:if(De!=4)throw new Error("Sector Shift: Expected 12 saw "+Ce);break;default:throw new Error("Sector Shift: Expected 9 or 12 saw "+Ce)}ge.chk("0600","Mini Sector Shift: "),ge.chk("000000000000","Reserved: ")}function h(ge,De){for(var Ce=Math.ceil(ge.length/De)-1,Oe=[],G=1;G<Ce;++G)Oe[G-1]=ge.slice(G*De,(G+1)*De);return Oe[Ce-1]=ge.slice(Ce*De),Oe}function m(ge,De,Ce){for(var Oe=0,G=0,oe=0,Pe=0,$e=0,We=Ce.length,Ve=[],Re=[];Oe<We;++Oe)Ve[Oe]=Re[Oe]=Oe,De[Oe]=Ce[Oe];for(;$e<Re.length;++$e)Oe=Re[$e],G=ge[Oe].L,oe=ge[Oe].R,Pe=ge[Oe].C,Ve[Oe]===Oe&&(G!==-1&&Ve[G]!==G&&(Ve[Oe]=Ve[G]),oe!==-1&&Ve[oe]!==oe&&(Ve[Oe]=Ve[oe])),Pe!==-1&&(Ve[Pe]=Oe),G!==-1&&Oe!=Ve[Oe]&&(Ve[G]=Ve[Oe],Re.lastIndexOf(G)<$e&&Re.push(G)),oe!==-1&&Oe!=Ve[Oe]&&(Ve[oe]=Ve[Oe],Re.lastIndexOf(oe)<$e&&Re.push(oe));for(Oe=1;Oe<We;++Oe)Ve[Oe]===Oe&&(oe!==-1&&Ve[oe]!==oe?Ve[Oe]=Ve[oe]:G!==-1&&Ve[G]!==G&&(Ve[Oe]=Ve[G]));for(Oe=1;Oe<We;++Oe)if(ge[Oe].type!==0){if($e=Oe,$e!=Ve[$e])do $e=Ve[$e],De[Oe]=De[$e]+"/"+De[Oe];while($e!==0&&Ve[$e]!==-1&&$e!=Ve[$e]);Ve[Oe]=-1}for(De[0]+="/",Oe=1;Oe<We;++Oe)ge[Oe].type!==2&&(De[Oe]+="/")}function g(ge,De,Ce){for(var Oe=ge.start,G=ge.size,oe=[],Pe=Oe;Ce&&G>0&&Pe>=0;)oe.push(De.slice(Pe*C,Pe*C+C)),G-=C,Pe=oh(Ce,Pe*4);return oe.length===0?jt(0):yi(oe).slice(0,ge.size)}function x(ge,De,Ce,Oe,G){var oe=M;if(ge===M){if(De!==0)throw new Error("DIFAT chain shorter than expected")}else if(ge!==-1){var Pe=Ce[ge],$e=(Oe>>>2)-1;if(!Pe)return;for(var We=0;We<$e&&(oe=oh(Pe,We*4))!==M;++We)G.push(oe);x(oh(Pe,Oe-4),De-1,Ce,Oe,G)}}function v(ge,De,Ce,Oe,G){var oe=[],Pe=[];G||(G=[]);var $e=Oe-1,We=0,Ve=0;for(We=De;We>=0;){G[We]=!0,oe[oe.length]=We,Pe.push(ge[We]);var Re=Ce[Math.floor(We*4/Oe)];if(Ve=We*4&$e,Oe<4+Ve)throw new Error("FAT boundary crossed: "+We+" 4 "+Oe);if(!ge[Re])break;We=oh(ge[Re],Ve)}return{nodes:oe,data:a8([Pe])}}function b(ge,De,Ce,Oe){var G=ge.length,oe=[],Pe=[],$e=[],We=[],Ve=Oe-1,Re=0,_e=0,Ge=0,nt=0;for(Re=0;Re<G;++Re)if($e=[],Ge=Re+De,Ge>=G&&(Ge-=G),!Pe[Ge]){We=[];var ut=[];for(_e=Ge;_e>=0;){ut[_e]=!0,Pe[_e]=!0,$e[$e.length]=_e,We.push(ge[_e]);var wt=Ce[Math.floor(_e*4/Oe)];if(nt=_e*4&Ve,Oe<4+nt)throw new Error("FAT boundary crossed: "+_e+" 4 "+Oe);if(!ge[wt]||(_e=oh(ge[wt],nt),ut[_e]))break}oe[Ge]={nodes:$e,data:a8([We])}}return oe}function w(ge,De,Ce,Oe,G,oe,Pe,$e){for(var We=0,Ve=Oe.length?2:0,Re=De[ge].data,_e=0,Ge=0,nt;_e<Re.length;_e+=128){var ut=Re.slice(_e,_e+128);Pi(ut,64),Ge=ut.read_shift(2),nt=hA(ut,0,Ge-Ve),Oe.push(nt);var wt={name:nt,type:ut.read_shift(1),color:ut.read_shift(1),L:ut.read_shift(4,"i"),R:ut.read_shift(4,"i"),C:ut.read_shift(4,"i"),clsid:ut.read_shift(16),state:ut.read_shift(4,"i"),start:0,size:0},Mt=ut.read_shift(2)+ut.read_shift(2)+ut.read_shift(2)+ut.read_shift(2);Mt!==0&&(wt.ct=y(ut,ut.l-8));var Xt=ut.read_shift(2)+ut.read_shift(2)+ut.read_shift(2)+ut.read_shift(2);Xt!==0&&(wt.mt=y(ut,ut.l-8)),wt.start=ut.read_shift(4,"i"),wt.size=ut.read_shift(4,"i"),wt.size<0&&wt.start<0&&(wt.size=wt.type=0,wt.start=M,wt.name=""),wt.type===5?(We=wt.start,G>0&&We!==M&&(De[We].name="!StreamData")):wt.size>=4096?(wt.storage="fat",De[wt.start]===void 0&&(De[wt.start]=v(Ce,wt.start,De.fat_addrs,De.ssz)),De[wt.start].name=wt.name,wt.content=De[wt.start].data.slice(0,wt.size)):(wt.storage="minifat",wt.size<0?wt.size=0:We!==M&&wt.start!==M&&De[We]&&(wt.content=g(wt,De[We].data,(De[$e]||{}).data))),wt.content&&Pi(wt.content,0),oe[nt]=wt,Pe.push(wt)}}function y(ge,De){return new Date((Cl(ge,De+4)/1e7*Math.pow(2,32)+Cl(ge,De)/1e7-11644473600)*1e3)}function N(ge,De){return d(),f(c.readFileSync(ge),De)}function S(ge,De){var Ce=De&&De.type;switch(Ce||pn&&Buffer.isBuffer(ge)&&(Ce="buffer"),Ce||"base64"){case"file":return N(ge,De);case"base64":return f(Tl(Rl(ge)),De);case"binary":return f(Tl(ge),De)}return f(ge,De)}function j(ge,De){var Ce=De||{},Oe=Ce.root||"Root Entry";if(ge.FullPaths||(ge.FullPaths=[]),ge.FileIndex||(ge.FileIndex=[]),ge.FullPaths.length!==ge.FileIndex.length)throw new Error("inconsistent CFB structure");ge.FullPaths.length===0&&(ge.FullPaths[0]=Oe+"/",ge.FileIndex[0]={name:Oe,type:5}),Ce.CLSID&&(ge.FileIndex[0].clsid=Ce.CLSID),_(ge)}function _(ge){var De="Sh33tJ5";if(!Or.find(ge,"/"+De)){var Ce=jt(4);Ce[0]=55,Ce[1]=Ce[3]=50,Ce[2]=54,ge.FileIndex.push({name:De,type:2,content:Ce,size:4,L:69,R:69,C:69}),ge.FullPaths.push(ge.FullPaths[0]+De),T(ge)}}function T(ge,De){j(ge);for(var Ce=!1,Oe=!1,G=ge.FullPaths.length-1;G>=0;--G){var oe=ge.FileIndex[G];switch(oe.type){case 0:Oe?Ce=!0:(ge.FileIndex.pop(),ge.FullPaths.pop());break;case 1:case 2:case 5:Oe=!0,isNaN(oe.R*oe.L*oe.C)&&(Ce=!0),oe.R>-1&&oe.L>-1&&oe.R==oe.L&&(Ce=!0);break;default:Ce=!0;break}}if(!(!Ce&&!De)){var Pe=new Date(1987,1,19),$e=0,We=Object.create?Object.create(null):{},Ve=[];for(G=0;G<ge.FullPaths.length;++G)We[ge.FullPaths[G]]=!0,ge.FileIndex[G].type!==0&&Ve.push([ge.FullPaths[G],ge.FileIndex[G]]);for(G=0;G<Ve.length;++G){var Re=n(Ve[G][0]);Oe=We[Re],Oe||(Ve.push([Re,{name:s(Re).replace("/",""),type:1,clsid:Y,ct:Pe,mt:Pe,content:null}]),We[Re]=!0)}for(Ve.sort(function(nt,ut){return r(nt[0],ut[0])}),ge.FullPaths=[],ge.FileIndex=[],G=0;G<Ve.length;++G)ge.FullPaths[G]=Ve[G][0],ge.FileIndex[G]=Ve[G][1];for(G=0;G<Ve.length;++G){var _e=ge.FileIndex[G],Ge=ge.FullPaths[G];if(_e.name=s(Ge).replace("/",""),_e.L=_e.R=_e.C=-(_e.color=1),_e.size=_e.content?_e.content.length:0,_e.start=0,_e.clsid=_e.clsid||Y,G===0)_e.C=Ve.length>1?1:-1,_e.size=0,_e.type=5;else if(Ge.slice(-1)=="/"){for($e=G+1;$e<Ve.length&&n(ge.FullPaths[$e])!=Ge;++$e);for(_e.C=$e>=Ve.length?-1:$e,$e=G+1;$e<Ve.length&&n(ge.FullPaths[$e])!=n(Ge);++$e);_e.R=$e>=Ve.length?-1:$e,_e.type=1}else n(ge.FullPaths[G+1]||"")==n(Ge)&&(_e.R=G+1),_e.type=2}}}function D(ge,De){var Ce=De||{};if(Ce.fileType=="mad")return It(ge,Ce);switch(T(ge),Ce.fileType){case"zip":return gr(ge,Ce)}var Oe=function(nt){for(var ut=0,wt=0,Mt=0;Mt<nt.FileIndex.length;++Mt){var Xt=nt.FileIndex[Mt];if(Xt.content){var _r=Xt.content.length;_r>0&&(_r<4096?ut+=_r+63>>6:wt+=_r+511>>9)}}for(var $n=nt.FullPaths.length+3>>2,Ts=ut+7>>3,Pn=ut+127>>7,Vs=Ts+wt+$n+Pn,ya=Vs+127>>7,gs=ya<=109?0:Math.ceil((ya-109)/127);Vs+ya+gs+127>>7>ya;)gs=++ya<=109?0:Math.ceil((ya-109)/127);var Fa=[1,gs,ya,Pn,$n,wt,ut,0];return nt.FileIndex[0].size=ut<<6,Fa[7]=(nt.FileIndex[0].start=Fa[0]+Fa[1]+Fa[2]+Fa[3]+Fa[4]+Fa[5])+(Fa[6]+7>>3),Fa}(ge),G=jt(Oe[7]<<9),oe=0,Pe=0;{for(oe=0;oe<8;++oe)G.write_shift(1,B[oe]);for(oe=0;oe<8;++oe)G.write_shift(2,0);for(G.write_shift(2,62),G.write_shift(2,3),G.write_shift(2,65534),G.write_shift(2,9),G.write_shift(2,6),oe=0;oe<3;++oe)G.write_shift(2,0);for(G.write_shift(4,0),G.write_shift(4,Oe[2]),G.write_shift(4,Oe[0]+Oe[1]+Oe[2]+Oe[3]-1),G.write_shift(4,0),G.write_shift(4,4096),G.write_shift(4,Oe[3]?Oe[0]+Oe[1]+Oe[2]-1:M),G.write_shift(4,Oe[3]),G.write_shift(-4,Oe[1]?Oe[0]-1:M),G.write_shift(4,Oe[1]),oe=0;oe<109;++oe)G.write_shift(-4,oe<Oe[2]?Oe[1]+oe:-1)}if(Oe[1])for(Pe=0;Pe<Oe[1];++Pe){for(;oe<236+Pe*127;++oe)G.write_shift(-4,oe<Oe[2]?Oe[1]+oe:-1);G.write_shift(-4,Pe===Oe[1]-1?M:Pe+1)}var $e=function(nt){for(Pe+=nt;oe<Pe-1;++oe)G.write_shift(-4,oe+1);nt&&(++oe,G.write_shift(-4,M))};for(Pe=oe=0,Pe+=Oe[1];oe<Pe;++oe)G.write_shift(-4,V.DIFSECT);for(Pe+=Oe[2];oe<Pe;++oe)G.write_shift(-4,V.FATSECT);$e(Oe[3]),$e(Oe[4]);for(var We=0,Ve=0,Re=ge.FileIndex[0];We<ge.FileIndex.length;++We)Re=ge.FileIndex[We],Re.content&&(Ve=Re.content.length,!(Ve<4096)&&(Re.start=Pe,$e(Ve+511>>9)));for($e(Oe[6]+7>>3);G.l&511;)G.write_shift(-4,V.ENDOFCHAIN);for(Pe=oe=0,We=0;We<ge.FileIndex.length;++We)Re=ge.FileIndex[We],Re.content&&(Ve=Re.content.length,!(!Ve||Ve>=4096)&&(Re.start=Pe,$e(Ve+63>>6)));for(;G.l&511;)G.write_shift(-4,V.ENDOFCHAIN);for(oe=0;oe<Oe[4]<<2;++oe){var _e=ge.FullPaths[oe];if(!_e||_e.length===0){for(We=0;We<17;++We)G.write_shift(4,0);for(We=0;We<3;++We)G.write_shift(4,-1);for(We=0;We<12;++We)G.write_shift(4,0);continue}Re=ge.FileIndex[oe],oe===0&&(Re.start=Re.size?Re.start-1:M);var Ge=oe===0&&Ce.root||Re.name;if(Ve=2*(Ge.length+1),G.write_shift(64,Ge,"utf16le"),G.write_shift(2,Ve),G.write_shift(1,Re.type),G.write_shift(1,Re.color),G.write_shift(-4,Re.L),G.write_shift(-4,Re.R),G.write_shift(-4,Re.C),Re.clsid)G.write_shift(16,Re.clsid,"hex");else for(We=0;We<4;++We)G.write_shift(4,0);G.write_shift(4,Re.state||0),G.write_shift(4,0),G.write_shift(4,0),G.write_shift(4,0),G.write_shift(4,0),G.write_shift(4,Re.start),G.write_shift(4,Re.size),G.write_shift(4,0)}for(oe=1;oe<ge.FileIndex.length;++oe)if(Re=ge.FileIndex[oe],Re.size>=4096)if(G.l=Re.start+1<<9,pn&&Buffer.isBuffer(Re.content))Re.content.copy(G,G.l,0,Re.size),G.l+=Re.size+511&-512;else{for(We=0;We<Re.size;++We)G.write_shift(1,Re.content[We]);for(;We&511;++We)G.write_shift(1,0)}for(oe=1;oe<ge.FileIndex.length;++oe)if(Re=ge.FileIndex[oe],Re.size>0&&Re.size<4096)if(pn&&Buffer.isBuffer(Re.content))Re.content.copy(G,G.l,0,Re.size),G.l+=Re.size+63&-64;else{for(We=0;We<Re.size;++We)G.write_shift(1,Re.content[We]);for(;We&63;++We)G.write_shift(1,0)}if(pn)G.l=G.length;else for(;G.l<G.length;)G.write_shift(1,0);return G}function A(ge,De){var Ce=ge.FullPaths.map(function(We){return We.toUpperCase()}),Oe=Ce.map(function(We){var Ve=We.split("/");return Ve[Ve.length-(We.slice(-1)=="/"?2:1)]}),G=!1;De.charCodeAt(0)===47?(G=!0,De=Ce[0].slice(0,-1)+De):G=De.indexOf("/")!==-1;var oe=De.toUpperCase(),Pe=G===!0?Ce.indexOf(oe):Oe.indexOf(oe);if(Pe!==-1)return ge.FileIndex[Pe];var $e=!oe.match(Qg);for(oe=oe.replace(To,""),$e&&(oe=oe.replace(Qg,"!")),Pe=0;Pe<Ce.length;++Pe)if(($e?Ce[Pe].replace(Qg,"!"):Ce[Pe]).replace(To,"")==oe||($e?Oe[Pe].replace(Qg,"!"):Oe[Pe]).replace(To,"")==oe)return ge.FileIndex[Pe];return null}var C=64,M=-2,F="d0cf11e0a1b11ae1",B=[208,207,17,224,161,177,26,225],Y="00000000000000000000000000000000",V={MAXREGSECT:-6,DIFSECT:-4,FATSECT:-3,ENDOFCHAIN:M,FREESECT:-1,HEADER_SIGNATURE:F,HEADER_MINOR_VERSION:"3e00",MAXREGSID:-6,NOSTREAM:-1,HEADER_CLSID:Y,EntryTypes:["unknown","storage","stream","lockbytes","property","root"]};function J(ge,De,Ce){d();var Oe=D(ge,Ce);c.writeFileSync(De,Oe)}function U(ge){for(var De=new Array(ge.length),Ce=0;Ce<ge.length;++Ce)De[Ce]=String.fromCharCode(ge[Ce]);return De.join("")}function X(ge,De){var Ce=D(ge,De);switch(De&&De.type||"buffer"){case"file":return d(),c.writeFileSync(De.filename,Ce),Ce;case"binary":return typeof Ce=="string"?Ce:U(Ce);case"base64":return C1(typeof Ce=="string"?Ce:U(Ce));case"buffer":if(pn)return Buffer.isBuffer(Ce)?Ce:Qu(Ce);case"array":return typeof Ce=="string"?Tl(Ce):Ce}return Ce}var W;function E(ge){try{var De=ge.InflateRaw,Ce=new De;if(Ce._processChunk(new Uint8Array([3,0]),Ce._finishFlushFlag),Ce.bytesRead)W=ge;else throw new Error("zlib does not expose bytesRead")}catch(Oe){console.error("cannot use native zlib: "+(Oe.message||Oe))}}function R(ge,De){if(!W)return Ye(ge,De);var Ce=W.InflateRaw,Oe=new Ce,G=Oe._processChunk(ge.slice(ge.l),Oe._finishFlushFlag);return ge.l+=Oe.bytesRead,G}function q(ge){return W?W.deflateRawSync(ge):Ke(ge)}var L=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],H=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258],se=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577];function ce(ge){var De=(ge<<1|ge<<11)&139536|(ge<<5|ge<<15)&558144;return(De>>16|De>>8|De)&255}for(var ae=typeof Uint8Array<"u",Z=ae?new Uint8Array(256):[],ve=0;ve<256;++ve)Z[ve]=ce(ve);function ne(ge,De){var Ce=Z[ge&255];return De<=8?Ce>>>8-De:(Ce=Ce<<8|Z[ge>>8&255],De<=16?Ce>>>16-De:(Ce=Ce<<8|Z[ge>>16&255],Ce>>>24-De))}function He(ge,De){var Ce=De&7,Oe=De>>>3;return(ge[Oe]|(Ce<=6?0:ge[Oe+1]<<8))>>>Ce&3}function Xe(ge,De){var Ce=De&7,Oe=De>>>3;return(ge[Oe]|(Ce<=5?0:ge[Oe+1]<<8))>>>Ce&7}function ie(ge,De){var Ce=De&7,Oe=De>>>3;return(ge[Oe]|(Ce<=4?0:ge[Oe+1]<<8))>>>Ce&15}function Q(ge,De){var Ce=De&7,Oe=De>>>3;return(ge[Oe]|(Ce<=3?0:ge[Oe+1]<<8))>>>Ce&31}function Ne(ge,De){var Ce=De&7,Oe=De>>>3;return(ge[Oe]|(Ce<=1?0:ge[Oe+1]<<8))>>>Ce&127}function de(ge,De,Ce){var Oe=De&7,G=De>>>3,oe=(1<<Ce)-1,Pe=ge[G]>>>Oe;return Ce<8-Oe||(Pe|=ge[G+1]<<8-Oe,Ce<16-Oe)||(Pe|=ge[G+2]<<16-Oe,Ce<24-Oe)||(Pe|=ge[G+3]<<24-Oe),Pe&oe}function ye(ge,De,Ce){var Oe=De&7,G=De>>>3;return Oe<=5?ge[G]|=(Ce&7)<<Oe:(ge[G]|=Ce<<Oe&255,ge[G+1]=(Ce&7)>>8-Oe),De+3}function xe(ge,De,Ce){var Oe=De&7,G=De>>>3;return Ce=(Ce&1)<<Oe,ge[G]|=Ce,De+1}function we(ge,De,Ce){var Oe=De&7,G=De>>>3;return Ce<<=Oe,ge[G]|=Ce&255,Ce>>>=8,ge[G+1]=Ce,De+8}function Ae(ge,De,Ce){var Oe=De&7,G=De>>>3;return Ce<<=Oe,ge[G]|=Ce&255,Ce>>>=8,ge[G+1]=Ce&255,ge[G+2]=Ce>>>8,De+16}function Ue(ge,De){var Ce=ge.length,Oe=2*Ce>De?2*Ce:De+5,G=0;if(Ce>=De)return ge;if(pn){var oe=BI(Oe);if(ge.copy)ge.copy(oe);else for(;G<ge.length;++G)oe[G]=ge[G];return oe}else if(ae){var Pe=new Uint8Array(Oe);if(Pe.set)Pe.set(ge);else for(;G<Ce;++G)Pe[G]=ge[G];return Pe}return ge.length=Oe,ge}function me(ge){for(var De=new Array(ge),Ce=0;Ce<ge;++Ce)De[Ce]=0;return De}function ee(ge,De,Ce){var Oe=1,G=0,oe=0,Pe=0,$e=0,We=ge.length,Ve=ae?new Uint16Array(32):me(32);for(oe=0;oe<32;++oe)Ve[oe]=0;for(oe=We;oe<Ce;++oe)ge[oe]=0;We=ge.length;var Re=ae?new Uint16Array(We):me(We);for(oe=0;oe<We;++oe)Ve[G=ge[oe]]++,Oe<G&&(Oe=G),Re[oe]=0;for(Ve[0]=0,oe=1;oe<=Oe;++oe)Ve[oe+16]=$e=$e+Ve[oe-1]<<1;for(oe=0;oe<We;++oe)$e=ge[oe],$e!=0&&(Re[oe]=Ve[$e+16]++);var _e=0;for(oe=0;oe<We;++oe)if(_e=ge[oe],_e!=0)for($e=ne(Re[oe],Oe)>>Oe-_e,Pe=(1<<Oe+4-_e)-1;Pe>=0;--Pe)De[$e|Pe<<_e]=_e&15|oe<<4;return Oe}var fe=ae?new Uint16Array(512):me(512),Fe=ae?new Uint16Array(32):me(32);if(!ae){for(var Ee=0;Ee<512;++Ee)fe[Ee]=0;for(Ee=0;Ee<32;++Ee)Fe[Ee]=0}(function(){for(var ge=[],De=0;De<32;De++)ge.push(5);ee(ge,Fe,32);var Ce=[];for(De=0;De<=143;De++)Ce.push(8);for(;De<=255;De++)Ce.push(9);for(;De<=279;De++)Ce.push(7);for(;De<=287;De++)Ce.push(8);ee(Ce,fe,288)})();var qe=function(){for(var De=ae?new Uint8Array(32768):[],Ce=0,Oe=0;Ce<se.length-1;++Ce)for(;Oe<se[Ce+1];++Oe)De[Oe]=Ce;for(;Oe<32768;++Oe)De[Oe]=29;var G=ae?new Uint8Array(259):[];for(Ce=0,Oe=0;Ce<H.length-1;++Ce)for(;Oe<H[Ce+1];++Oe)G[Oe]=Ce;function oe($e,We){for(var Ve=0;Ve<$e.length;){var Re=Math.min(65535,$e.length-Ve),_e=Ve+Re==$e.length;for(We.write_shift(1,+_e),We.write_shift(2,Re),We.write_shift(2,~Re&65535);Re-- >0;)We[We.l++]=$e[Ve++]}return We.l}function Pe($e,We){for(var Ve=0,Re=0,_e=ae?new Uint16Array(32768):[];Re<$e.length;){var Ge=Math.min(65535,$e.length-Re);if(Ge<10){for(Ve=ye(We,Ve,+(Re+Ge==$e.length)),Ve&7&&(Ve+=8-(Ve&7)),We.l=Ve/8|0,We.write_shift(2,Ge),We.write_shift(2,~Ge&65535);Ge-- >0;)We[We.l++]=$e[Re++];Ve=We.l*8;continue}Ve=ye(We,Ve,+(Re+Ge==$e.length)+2);for(var nt=0;Ge-- >0;){var ut=$e[Re];nt=(nt<<5^ut)&32767;var wt=-1,Mt=0;if((wt=_e[nt])&&(wt|=Re&-32768,wt>Re&&(wt-=32768),wt<Re))for(;$e[wt+Mt]==$e[Re+Mt]&&Mt<250;)++Mt;if(Mt>2){ut=G[Mt],ut<=22?Ve=we(We,Ve,Z[ut+1]>>1)-1:(we(We,Ve,3),Ve+=5,we(We,Ve,Z[ut-23]>>5),Ve+=3);var Xt=ut<8?0:ut-4>>2;Xt>0&&(Ae(We,Ve,Mt-H[ut]),Ve+=Xt),ut=De[Re-wt],Ve=we(We,Ve,Z[ut]>>3),Ve-=3;var _r=ut<4?0:ut-2>>1;_r>0&&(Ae(We,Ve,Re-wt-se[ut]),Ve+=_r);for(var $n=0;$n<Mt;++$n)_e[nt]=Re&32767,nt=(nt<<5^$e[Re])&32767,++Re;Ge-=Mt-1}else ut<=143?ut=ut+48:Ve=xe(We,Ve,1),Ve=we(We,Ve,Z[ut]),_e[nt]=Re&32767,++Re}Ve=we(We,Ve,0)-1}return We.l=(Ve+7)/8|0,We.l}return function(We,Ve){return We.length<8?oe(We,Ve):Pe(We,Ve)}}();function Ke(ge){var De=jt(50+Math.floor(ge.length*1.1)),Ce=qe(ge,De);return De.slice(0,Ce)}var Qe=ae?new Uint16Array(32768):me(32768),_t=ae?new Uint16Array(32768):me(32768),vt=ae?new Uint16Array(128):me(128),ke=1,Je=1;function mt(ge,De){var Ce=Q(ge,De)+257;De+=5;var Oe=Q(ge,De)+1;De+=5;var G=ie(ge,De)+4;De+=4;for(var oe=0,Pe=ae?new Uint8Array(19):me(19),$e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],We=1,Ve=ae?new Uint8Array(8):me(8),Re=ae?new Uint8Array(8):me(8),_e=Pe.length,Ge=0;Ge<G;++Ge)Pe[L[Ge]]=oe=Xe(ge,De),We<oe&&(We=oe),Ve[oe]++,De+=3;var nt=0;for(Ve[0]=0,Ge=1;Ge<=We;++Ge)Re[Ge]=nt=nt+Ve[Ge-1]<<1;for(Ge=0;Ge<_e;++Ge)(nt=Pe[Ge])!=0&&($e[Ge]=Re[nt]++);var ut=0;for(Ge=0;Ge<_e;++Ge)if(ut=Pe[Ge],ut!=0){nt=Z[$e[Ge]]>>8-ut;for(var wt=(1<<7-ut)-1;wt>=0;--wt)vt[nt|wt<<ut]=ut&7|Ge<<3}var Mt=[];for(We=1;Mt.length<Ce+Oe;)switch(nt=vt[Ne(ge,De)],De+=nt&7,nt>>>=3){case 16:for(oe=3+He(ge,De),De+=2,nt=Mt[Mt.length-1];oe-- >0;)Mt.push(nt);break;case 17:for(oe=3+Xe(ge,De),De+=3;oe-- >0;)Mt.push(0);break;case 18:for(oe=11+Ne(ge,De),De+=7;oe-- >0;)Mt.push(0);break;default:Mt.push(nt),We<nt&&(We=nt);break}var Xt=Mt.slice(0,Ce),_r=Mt.slice(Ce);for(Ge=Ce;Ge<286;++Ge)Xt[Ge]=0;for(Ge=Oe;Ge<30;++Ge)_r[Ge]=0;return ke=ee(Xt,Qe,286),Je=ee(_r,_t,30),De}function ue(ge,De){if(ge[0]==3&&!(ge[1]&3))return[h0(De),2];for(var Ce=0,Oe=0,G=BI(De||1<<18),oe=0,Pe=G.length>>>0,$e=0,We=0;!(Oe&1);){if(Oe=Xe(ge,Ce),Ce+=3,Oe>>>1)Oe>>1==1?($e=9,We=5):(Ce=mt(ge,Ce),$e=ke,We=Je);else{Ce&7&&(Ce+=8-(Ce&7));var Ve=ge[Ce>>>3]|ge[(Ce>>>3)+1]<<8;if(Ce+=32,Ve>0)for(!De&&Pe<oe+Ve&&(G=Ue(G,oe+Ve),Pe=G.length);Ve-- >0;)G[oe++]=ge[Ce>>>3],Ce+=8;continue}for(;;){!De&&Pe<oe+32767&&(G=Ue(G,oe+32767),Pe=G.length);var Re=de(ge,Ce,$e),_e=Oe>>>1==1?fe[Re]:Qe[Re];if(Ce+=_e&15,_e>>>=4,!(_e>>>8&255))G[oe++]=_e;else{if(_e==256)break;_e-=257;var Ge=_e<8?0:_e-4>>2;Ge>5&&(Ge=0);var nt=oe+H[_e];Ge>0&&(nt+=de(ge,Ce,Ge),Ce+=Ge),Re=de(ge,Ce,We),_e=Oe>>>1==1?Fe[Re]:_t[Re],Ce+=_e&15,_e>>>=4;var ut=_e<4?0:_e-2>>1,wt=se[_e];for(ut>0&&(wt+=de(ge,Ce,ut),Ce+=ut),!De&&Pe<nt&&(G=Ue(G,nt+100),Pe=G.length);oe<nt;)G[oe]=G[oe-wt],++oe}}}return De?[G,Ce+7>>>3]:[G.slice(0,oe),Ce+7>>>3]}function Ye(ge,De){var Ce=ge.slice(ge.l||0),Oe=ue(Ce,De);return ge.l+=Oe[1],Oe[0]}function bt(ge,De){if(ge)typeof console<"u"&&console.error(De);else throw new Error(De)}function xt(ge,De){var Ce=ge;Pi(Ce,0);var Oe=[],G=[],oe={FileIndex:Oe,FullPaths:G};j(oe,{root:De.root});for(var Pe=Ce.length-4;(Ce[Pe]!=80||Ce[Pe+1]!=75||Ce[Pe+2]!=5||Ce[Pe+3]!=6)&&Pe>=0;)--Pe;Ce.l=Pe+4,Ce.l+=4;var $e=Ce.read_shift(2);Ce.l+=6;var We=Ce.read_shift(4);for(Ce.l=We,Pe=0;Pe<$e;++Pe){Ce.l+=20;var Ve=Ce.read_shift(4),Re=Ce.read_shift(4),_e=Ce.read_shift(2),Ge=Ce.read_shift(2),nt=Ce.read_shift(2);Ce.l+=8;var ut=Ce.read_shift(4),wt=l(Ce.slice(Ce.l+_e,Ce.l+_e+Ge));Ce.l+=_e+Ge+nt;var Mt=Ce.l;Ce.l=ut+4,Vt(Ce,Ve,Re,oe,wt),Ce.l=Mt}return oe}function Vt(ge,De,Ce,Oe,G){ge.l+=2;var oe=ge.read_shift(2),Pe=ge.read_shift(2),$e=o(ge);if(oe&8257)throw new Error("Unsupported ZIP encryption");for(var We=ge.read_shift(4),Ve=ge.read_shift(4),Re=ge.read_shift(4),_e=ge.read_shift(2),Ge=ge.read_shift(2),nt="",ut=0;ut<_e;++ut)nt+=String.fromCharCode(ge[ge.l++]);if(Ge){var wt=l(ge.slice(ge.l,ge.l+Ge));(wt[21589]||{}).mt&&($e=wt[21589].mt),((G||{})[21589]||{}).mt&&($e=G[21589].mt)}ge.l+=Ge;var Mt=ge.slice(ge.l,ge.l+Ve);switch(Pe){case 8:Mt=R(ge,Re);break;case 0:break;default:throw new Error("Unsupported ZIP Compression method "+Pe)}var Xt=!1;oe&8&&(We=ge.read_shift(4),We==134695760&&(We=ge.read_shift(4),Xt=!0),Ve=ge.read_shift(4),Re=ge.read_shift(4)),Ve!=De&&bt(Xt,"Bad compressed size: "+De+" != "+Ve),Re!=Ce&&bt(Xt,"Bad uncompressed size: "+Ce+" != "+Re),wr(Oe,nt,Mt,{unsafe:!0,mt:$e})}function gr(ge,De){var Ce=De||{},Oe=[],G=[],oe=jt(1),Pe=Ce.compression?8:0,$e=0,We=0,Ve=0,Re=0,_e=0,Ge=ge.FullPaths[0],nt=Ge,ut=ge.FileIndex[0],wt=[],Mt=0;for(We=1;We<ge.FullPaths.length;++We)if(nt=ge.FullPaths[We].slice(Ge.length),ut=ge.FileIndex[We],!(!ut.size||!ut.content||nt=="Sh33tJ5")){var Xt=Re,_r=jt(nt.length);for(Ve=0;Ve<nt.length;++Ve)_r.write_shift(1,nt.charCodeAt(Ve)&127);_r=_r.slice(0,_r.l),wt[_e]=q2e.buf(ut.content,0);var $n=ut.content;Pe==8&&($n=q($n)),oe=jt(30),oe.write_shift(4,67324752),oe.write_shift(2,20),oe.write_shift(2,$e),oe.write_shift(2,Pe),ut.mt?i(oe,ut.mt):oe.write_shift(4,0),oe.write_shift(-4,wt[_e]),oe.write_shift(4,$n.length),oe.write_shift(4,ut.content.length),oe.write_shift(2,_r.length),oe.write_shift(2,0),Re+=oe.length,Oe.push(oe),Re+=_r.length,Oe.push(_r),Re+=$n.length,Oe.push($n),oe=jt(46),oe.write_shift(4,33639248),oe.write_shift(2,0),oe.write_shift(2,20),oe.write_shift(2,$e),oe.write_shift(2,Pe),oe.write_shift(4,0),oe.write_shift(-4,wt[_e]),oe.write_shift(4,$n.length),oe.write_shift(4,ut.content.length),oe.write_shift(2,_r.length),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(4,0),oe.write_shift(4,Xt),Mt+=oe.l,G.push(oe),Mt+=_r.length,G.push(_r),++_e}return oe=jt(22),oe.write_shift(4,101010256),oe.write_shift(2,0),oe.write_shift(2,0),oe.write_shift(2,_e),oe.write_shift(2,_e),oe.write_shift(4,Mt),oe.write_shift(4,Re),oe.write_shift(2,0),yi([yi(Oe),yi(G),oe])}var qt={htm:"text/html",xml:"text/xml",gif:"image/gif",jpg:"image/jpeg",png:"image/png",mso:"application/x-mso",thmx:"application/vnd.ms-officetheme",sh33tj5:"application/octet-stream"};function Gt(ge,De){if(ge.ctype)return ge.ctype;var Ce=ge.name||"",Oe=Ce.match(/\.([^\.]+)$/);return Oe&&qt[Oe[1]]||De&&(Oe=(Ce=De).match(/[\.\\]([^\.\\])+$/),Oe&&qt[Oe[1]])?qt[Oe[1]]:"application/octet-stream"}function Bt(ge){for(var De=C1(ge),Ce=[],Oe=0;Oe<De.length;Oe+=76)Ce.push(De.slice(Oe,Oe+76));return Ce.join(`\r
`)+`\r
`}function fr(ge){var De=ge.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF=]/g,function(Ve){var Re=Ve.charCodeAt(0).toString(16).toUpperCase();return"="+(Re.length==1?"0"+Re:Re)});De=De.replace(/ $/mg,"=20").replace(/\t$/mg,"=09"),De.charAt(0)==`
`&&(De="=0D"+De.slice(1)),De=De.replace(/\r(?!\n)/mg,"=0D").replace(/\n\n/mg,`
=0A`).replace(/([^\r\n])\n/mg,"$1=0A");for(var Ce=[],Oe=De.split(`\r
`),G=0;G<Oe.length;++G){var oe=Oe[G];if(oe.length==0){Ce.push("");continue}for(var Pe=0;Pe<oe.length;){var $e=76,We=oe.slice(Pe,Pe+$e);We.charAt($e-1)=="="?$e--:We.charAt($e-2)=="="?$e-=2:We.charAt($e-3)=="="&&($e-=3),We=oe.slice(Pe,Pe+$e),Pe+=$e,Pe<oe.length&&(We+="="),Ce.push(We)}}return Ce.join(`\r
`)}function Sr(ge){for(var De=[],Ce=0;Ce<ge.length;++Ce){for(var Oe=ge[Ce];Ce<=ge.length&&Oe.charAt(Oe.length-1)=="=";)Oe=Oe.slice(0,Oe.length-1)+ge[++Ce];De.push(Oe)}for(var G=0;G<De.length;++G)De[G]=De[G].replace(/[=][0-9A-Fa-f]{2}/g,function(oe){return String.fromCharCode(parseInt(oe.slice(1),16))});return Tl(De.join(`\r
`))}function Cr(ge,De,Ce){for(var Oe="",G="",oe="",Pe,$e=0;$e<10;++$e){var We=De[$e];if(!We||We.match(/^\s*$/))break;var Ve=We.match(/^(.*?):\s*([^\s].*)$/);if(Ve)switch(Ve[1].toLowerCase()){case"content-location":Oe=Ve[2].trim();break;case"content-type":oe=Ve[2].trim();break;case"content-transfer-encoding":G=Ve[2].trim();break}}switch(++$e,G.toLowerCase()){case"base64":Pe=Tl(Rl(De.slice($e).join("")));break;case"quoted-printable":Pe=Sr(De.slice($e));break;default:throw new Error("Unsupported Content-Transfer-Encoding "+G)}var Re=wr(ge,Oe.slice(Ce.length),Pe,{unsafe:!0});oe&&(Re.ctype=oe)}function cr(ge,De){if(U(ge.slice(0,13)).toLowerCase()!="mime-version:")throw new Error("Unsupported MAD header");var Ce=De&&De.root||"",Oe=(pn&&Buffer.isBuffer(ge)?ge.toString("binary"):U(ge)).split(`\r
`),G=0,oe="";for(G=0;G<Oe.length;++G)if(oe=Oe[G],!!/^Content-Location:/i.test(oe)&&(oe=oe.slice(oe.indexOf("file")),Ce||(Ce=oe.slice(0,oe.lastIndexOf("/")+1)),oe.slice(0,Ce.length)!=Ce))for(;Ce.length>0&&(Ce=Ce.slice(0,Ce.length-1),Ce=Ce.slice(0,Ce.lastIndexOf("/")+1),oe.slice(0,Ce.length)!=Ce););var Pe=(Oe[1]||"").match(/boundary="(.*?)"/);if(!Pe)throw new Error("MAD cannot find boundary");var $e="--"+(Pe[1]||""),We=[],Ve=[],Re={FileIndex:We,FullPaths:Ve};j(Re);var _e,Ge=0;for(G=0;G<Oe.length;++G){var nt=Oe[G];nt!==$e&&nt!==$e+"--"||(Ge++&&Cr(Re,Oe.slice(_e,G),Ce),_e=G)}return Re}function It(ge,De){var Ce=De||{},Oe=Ce.boundary||"SheetJS";Oe="------="+Oe;for(var G=["MIME-Version: 1.0",'Content-Type: multipart/related; boundary="'+Oe.slice(2)+'"',"","",""],oe=ge.FullPaths[0],Pe=oe,$e=ge.FileIndex[0],We=1;We<ge.FullPaths.length;++We)if(Pe=ge.FullPaths[We].slice(oe.length),$e=ge.FileIndex[We],!(!$e.size||!$e.content||Pe=="Sh33tJ5")){Pe=Pe.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7E-\xFF]/g,function(Mt){return"_x"+Mt.charCodeAt(0).toString(16)+"_"}).replace(/[\u0080-\uFFFF]/g,function(Mt){return"_u"+Mt.charCodeAt(0).toString(16)+"_"});for(var Ve=$e.content,Re=pn&&Buffer.isBuffer(Ve)?Ve.toString("binary"):U(Ve),_e=0,Ge=Math.min(1024,Re.length),nt=0,ut=0;ut<=Ge;++ut)(nt=Re.charCodeAt(ut))>=32&&nt<128&&++_e;var wt=_e>=Ge*4/5;G.push(Oe),G.push("Content-Location: "+(Ce.root||"file:///C:/SheetJS/")+Pe),G.push("Content-Transfer-Encoding: "+(wt?"quoted-printable":"base64")),G.push("Content-Type: "+Gt($e,Pe)),G.push(""),G.push(wt?fr(Re):Bt(Re))}return G.push(Oe+`--\r
`),G.join(`\r
`)}function yr(ge){var De={};return j(De,ge),De}function wr(ge,De,Ce,Oe){var G=Oe&&Oe.unsafe;G||j(ge);var oe=!G&&Or.find(ge,De);if(!oe){var Pe=ge.FullPaths[0];De.slice(0,Pe.length)==Pe?Pe=De:(Pe.slice(-1)!="/"&&(Pe+="/"),Pe=(Pe+De).replace("//","/")),oe={name:s(De),type:2},ge.FileIndex.push(oe),ge.FullPaths.push(Pe),G||Or.utils.cfb_gc(ge)}return oe.content=Ce,oe.size=Ce?Ce.length:0,Oe&&(Oe.CLSID&&(oe.clsid=Oe.CLSID),Oe.mt&&(oe.mt=Oe.mt),Oe.ct&&(oe.ct=Oe.ct)),oe}function Fr(ge,De){j(ge);var Ce=Or.find(ge,De);if(Ce){for(var Oe=0;Oe<ge.FileIndex.length;++Oe)if(ge.FileIndex[Oe]==Ce)return ge.FileIndex.splice(Oe,1),ge.FullPaths.splice(Oe,1),!0}return!1}function jr(ge,De,Ce){j(ge);var Oe=Or.find(ge,De);if(Oe){for(var G=0;G<ge.FileIndex.length;++G)if(ge.FileIndex[G]==Oe)return ge.FileIndex[G].name=s(Ce),ge.FullPaths[G]=Ce,!0}return!1}function Pr(ge){T(ge,!0)}return t.find=A,t.read=S,t.parse=f,t.write=X,t.writeFile=J,t.utils={cfb_new:yr,cfb_add:wr,cfb_del:Fr,cfb_mov:jr,cfb_gc:Pr,ReadShift:xv,CheckField:GB,prep_blob:Pi,bconcat:yi,use_zlib:E,_deflateRaw:Ke,_inflateRaw:Ye,consts:V},t}();function H2e(e){return typeof e=="string"?_N(e):Array.isArray(e)?x2e(e):e}function lb(e,t,r){if(typeof Deno<"u"){if(r&&typeof t=="string")switch(r){case"utf8":t=new TextEncoder(r).encode(t);break;case"binary":t=_N(t);break;default:throw new Error("Unsupported encoding "+r)}return Deno.writeFileSync(e,t)}var n=r=="utf8"?$d(t):t;if(typeof IE_SaveFile<"u")return IE_SaveFile(n,e);if(typeof Blob<"u"){var s=new Blob([H2e(n)],{type:"application/octet-stream"});if(typeof navigator<"u"&&navigator.msSaveBlob)return navigator.msSaveBlob(s,e);if(typeof saveAs<"u")return saveAs(s,e);if(typeof URL<"u"&&typeof document<"u"&&document.createElement&&URL.createObjectURL){var i=URL.createObjectURL(s);if(typeof chrome=="object"&&typeof(chrome.downloads||{}).download=="function")return URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),chrome.downloads.download({url:i,filename:e,saveAs:!0});var o=document.createElement("a");if(o.download!=null)return o.download=e,o.href=i,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL&&typeof setTimeout<"u"&&setTimeout(function(){URL.revokeObjectURL(i)},6e4),i}}if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var l=File(e);return l.open("w"),l.encoding="binary",Array.isArray(t)&&(t=E0(t)),l.write(t),l.close(),t}catch(c){if(!c.message||!c.message.match(/onstruct/))throw c}throw new Error("cannot save file "+e)}function W2e(e){if(typeof Deno<"u")return Deno.readFileSync(e);if(typeof $<"u"&&typeof File<"u"&&typeof Folder<"u")try{var t=File(e);t.open("r"),t.encoding="binary";var r=t.read();return t.close(),r}catch(n){if(!n.message||!n.message.match(/onstruct/))throw n}throw new Error("Cannot access file "+e)}function xs(e){for(var t=Object.keys(e),r=[],n=0;n<t.length;++n)Object.prototype.hasOwnProperty.call(e,t[n])&&r.push(t[n]);return r}function GI(e,t){for(var r=[],n=xs(e),s=0;s!==n.length;++s)r[e[n[s]][t]]==null&&(r[e[n[s]][t]]=n[s]);return r}function CN(e){for(var t=[],r=xs(e),n=0;n!==r.length;++n)t[e[r[n]]]=r[n];return t}function EN(e){for(var t=[],r=xs(e),n=0;n!==r.length;++n)t[e[r[n]]]=parseInt(r[n],10);return t}function V2e(e){for(var t=[],r=xs(e),n=0;n!==r.length;++n)t[e[r[n]]]==null&&(t[e[r[n]]]=[]),t[e[r[n]]].push(r[n]);return t}var r5=new Date(1899,11,30,0,0,0);function ai(e,t){var r=e.getTime(),n=r5.getTime()+(e.getTimezoneOffset()-r5.getTimezoneOffset())*6e4;return(r-n)/(24*60*60*1e3)}var _B=new Date,G2e=r5.getTime()+(_B.getTimezoneOffset()-r5.getTimezoneOffset())*6e4,KI=_B.getTimezoneOffset();function TN(e){var t=new Date;return t.setTime(e*24*60*60*1e3+G2e),t.getTimezoneOffset()!==KI&&t.setTime(t.getTime()+(t.getTimezoneOffset()-KI)*6e4),t}function K2e(e){var t=0,r=0,n=!1,s=e.match(/P([0-9\.]+Y)?([0-9\.]+M)?([0-9\.]+D)?T([0-9\.]+H)?([0-9\.]+M)?([0-9\.]+S)?/);if(!s)throw new Error("|"+e+"| is not an ISO8601 Duration");for(var i=1;i!=s.length;++i)if(s[i]){switch(r=1,i>3&&(n=!0),s[i].slice(s[i].length-1)){case"Y":throw new Error("Unsupported ISO Duration Field: "+s[i].slice(s[i].length-1));case"D":r*=24;case"H":r*=60;case"M":if(n)r*=60;else throw new Error("Unsupported ISO Duration Field: M")}t+=r*parseInt(s[i],10)}return t}var XI=new Date("2017-02-19T19:06:09.000Z"),AB=isNaN(XI.getFullYear())?new Date("2/19/17"):XI,X2e=AB.getFullYear()==2017;function Da(e,t){var r=new Date(e);if(X2e)return t>0?r.setTime(r.getTime()+r.getTimezoneOffset()*60*1e3):t<0&&r.setTime(r.getTime()-r.getTimezoneOffset()*60*1e3),r;if(e instanceof Date)return e;if(AB.getFullYear()==1917&&!isNaN(r.getFullYear())){var n=r.getFullYear();return e.indexOf(""+n)>-1||r.setFullYear(r.getFullYear()+100),r}var s=e.match(/\d+/g)||["2017","2","19","0","0","0"],i=new Date(+s[0],+s[1]-1,+s[2],+s[3]||0,+s[4]||0,+s[5]||0);return e.indexOf("Z")>-1&&(i=new Date(i.getTime()-i.getTimezoneOffset()*60*1e3)),i}function ep(e,t){if(pn&&Buffer.isBuffer(e)){if(t){if(e[0]==255&&e[1]==254)return $d(e.slice(2).toString("utf16le"));if(e[1]==254&&e[2]==255)return $d(pB(e.slice(2).toString("binary")))}return e.toString("binary")}if(typeof TextDecoder<"u")try{if(t){if(e[0]==255&&e[1]==254)return $d(new TextDecoder("utf-16le").decode(e.slice(2)));if(e[0]==254&&e[1]==255)return $d(new TextDecoder("utf-16be").decode(e.slice(2)))}var r={"":"","":"",:"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"","":"","":"","":"","":"","":"","":"","":"","":"","":"",:"","":"",:"",:"",:""};return Array.isArray(e)&&(e=new Uint8Array(e)),new TextDecoder("latin1").decode(e).replace(/[]/g,function(i){return r[i]||i})}catch{}for(var n=[],s=0;s!=e.length;++s)n.push(String.fromCharCode(e[s]));return n.join("")}function La(e){if(typeof JSON<"u"&&!Array.isArray(e))return JSON.parse(JSON.stringify(e));if(typeof e!="object"||e==null)return e;if(e instanceof Date)return new Date(e.getTime());var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=La(e[r]));return t}function fs(e,t){for(var r="";r.length<t;)r+=e;return r}function id(e){var t=Number(e);if(!isNaN(t))return isFinite(t)?t:NaN;if(!/\d/.test(e))return t;var r=1,n=e.replace(/([\d]),([\d])/g,"$1$2").replace(/[$]/g,"").replace(/[%]/g,function(){return r*=100,""});return!isNaN(t=Number(n))||(n=n.replace(/[(](.*)[)]/,function(s,i){return r=-r,i}),!isNaN(t=Number(n)))?t/r:t}var Y2e=["january","february","march","april","may","june","july","august","september","october","november","december"];function _x(e){var t=new Date(e),r=new Date(NaN),n=t.getYear(),s=t.getMonth(),i=t.getDate();if(isNaN(i))return r;var o=e.toLowerCase();if(o.match(/jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec/)){if(o=o.replace(/[^a-z]/g,"").replace(/([^a-z]|^)[ap]m?([^a-z]|$)/,""),o.length>3&&Y2e.indexOf(o)==-1)return r}else if(o.match(/[a-z]/))return r;return n<0||n>8099?r:(s>0||i>1)&&n!=101?t:e.match(/[^-0-9:,\/\\]/)?r:t}var Q2e=function(){var e="abacaba".split(/(:?b)/i).length==5;return function(r,n,s){if(e||typeof n=="string")return r.split(n);for(var i=r.split(n),o=[i[0]],l=1;l<i.length;++l)o.push(s),o.push(i[l]);return o}}();function CB(e){return e?e.content&&e.type?ep(e.content,!0):e.data?Yg(e.data):e.asNodeBuffer&&pn?Yg(e.asNodeBuffer().toString("binary")):e.asBinary?Yg(e.asBinary()):e._data&&e._data.getContent?Yg(ep(Array.prototype.slice.call(e._data.getContent(),0))):null:null}function EB(e){if(!e)return null;if(e.data)return MI(e.data);if(e.asNodeBuffer&&pn)return e.asNodeBuffer();if(e._data&&e._data.getContent){var t=e._data.getContent();return typeof t=="string"?MI(t):Array.prototype.slice.call(t)}return e.content&&e.type?e.content:null}function J2e(e){return e&&e.name.slice(-4)===".bin"?EB(e):CB(e)}function nc(e,t){for(var r=e.FullPaths||xs(e.files),n=t.toLowerCase().replace(/[\/]/g,"\\"),s=n.replace(/\\/g,"/"),i=0;i<r.length;++i){var o=r[i].replace(/^Root Entry[\/]/,"").toLowerCase();if(n==o||s==o)return e.files?e.files[r[i]]:e.FileIndex[i]}return null}function oA(e,t){var r=nc(e,t);if(r==null)throw new Error("Cannot find file "+t+" in zip");return r}function Rs(e,t,r){if(!r)return J2e(oA(e,t));if(!t)return null;try{return Rs(e,t)}catch{return null}}function Ol(e,t,r){if(!r)return CB(oA(e,t));if(!t)return null;try{return Ol(e,t)}catch{return null}}function Z2e(e,t,r){return EB(oA(e,t))}function YI(e){for(var t=e.FullPaths||xs(e.files),r=[],n=0;n<t.length;++n)t[n].slice(-1)!="/"&&r.push(t[n].replace(/^Root Entry[\/]/,""));return r.sort()}function ln(e,t,r){if(e.FullPaths){if(typeof r=="string"){var n;return pn?n=Qu(r):n=g2e(r),Or.utils.cfb_add(e,t,n)}Or.utils.cfb_add(e,t,r)}else e.file(t,r)}function lA(){return Or.utils.cfb_new()}function TB(e,t){switch(t.type){case"base64":return Or.read(e,{type:"base64"});case"binary":return Or.read(e,{type:"binary"});case"buffer":case"array":return Or.read(e,{type:"buffer"})}throw new Error("Unrecognized type "+t.type)}function Jg(e,t){if(e.charAt(0)=="/")return e.slice(1);var r=t.split("/");t.slice(-1)!="/"&&r.pop();for(var n=e.split("/");n.length!==0;){var s=n.shift();s===".."?r.pop():s!=="."&&r.push(s)}return r.join("/")}var Es=`<?xml version="1.0" encoding="UTF-8" standalone="yes"?>\r
`,ewe=/([^"\s?>\/]+)\s*=\s*((?:")([^"]*)(?:")|(?:')([^']*)(?:')|([^'">\s]+))/g,QI=/<[\/\?]?[a-zA-Z0-9:_-]+(?:\s+[^"\s?>\/]+\s*=\s*(?:"[^"]*"|'[^']*'|[^'">\s=]+))*\s*[\/\?]?>/mg,twe=/<[^>]*>/g,po=Es.match(QI)?QI:twe,rwe=/<\w*:/,nwe=/<(\/?)\w+:/;function Vr(e,t,r){for(var n={},s=0,i=0;s!==e.length&&!((i=e.charCodeAt(s))===32||i===10||i===13);++s);if(t||(n[0]=e.slice(0,s)),s===e.length)return n;var o=e.match(ewe),l=0,c="",d=0,f="",u="",p=1;if(o)for(d=0;d!=o.length;++d){for(u=o[d],i=0;i!=u.length&&u.charCodeAt(i)!==61;++i);for(f=u.slice(0,i).trim();u.charCodeAt(i+1)==32;)++i;for(p=(s=u.charCodeAt(i+1))==34||s==39?1:0,c=u.slice(i+1+p,u.length-p),l=0;l!=f.length&&f.charCodeAt(l)!==58;++l);if(l===f.length)f.indexOf("_")>0&&(f=f.slice(0,f.indexOf("_"))),n[f]=c,n[f.toLowerCase()]=c;else{var h=(l===5&&f.slice(0,5)==="xmlns"?"xmlns":"")+f.slice(l+1);if(n[h]&&f.slice(l-3,l)=="ext")continue;n[h]=c,n[h.toLowerCase()]=c}}return n}function Zd(e){return e.replace(nwe,"<$1")}var OB={"&quot;":'"',"&apos;":"'","&gt;":">","&lt;":"<","&amp;":"&"},cA=CN(OB),Mn=function(){var e=/&(?:quot|apos|gt|lt|amp|#x?([\da-fA-F]+));/ig,t=/_x([\da-fA-F]{4})_/ig;return function r(n){var s=n+"",i=s.indexOf("<![CDATA[");if(i==-1)return s.replace(e,function(l,c){return OB[l]||String.fromCharCode(parseInt(c,l.indexOf("x")>-1?16:10))||l}).replace(t,function(l,c){return String.fromCharCode(parseInt(c,16))});var o=s.indexOf("]]>");return r(s.slice(0,i))+s.slice(i+9,o)+r(s.slice(o+3))}}(),dA=/[&<>'"]/g,awe=/[\u0000-\u0008\u000b-\u001f]/g;function na(e){var t=e+"";return t.replace(dA,function(r){return cA[r]}).replace(awe,function(r){return"_x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+"_"})}function JI(e){return na(e).replace(/ /g,"_x0020_")}var PB=/[\u0000-\u001f]/g;function uA(e){var t=e+"";return t.replace(dA,function(r){return cA[r]}).replace(/\n/g,"<br/>").replace(PB,function(r){return"&#x"+("000"+r.charCodeAt(0).toString(16)).slice(-4)+";"})}function swe(e){var t=e+"";return t.replace(dA,function(r){return cA[r]}).replace(PB,function(r){return"&#x"+r.charCodeAt(0).toString(16).toUpperCase()+";"})}var ZI=function(){var e=/&#(\d+);/g;function t(r,n){return String.fromCharCode(parseInt(n,10))}return function(n){return n.replace(e,t)}}();function iwe(e){return e.replace(/(\r\n|[\r\n])/g,"&#10;")}function Oa(e){switch(e){case 1:case!0:case"1":case"true":case"TRUE":return!0;default:return!1}}function s4(e){for(var t="",r=0,n=0,s=0,i=0,o=0,l=0;r<e.length;){if(n=e.charCodeAt(r++),n<128){t+=String.fromCharCode(n);continue}if(s=e.charCodeAt(r++),n>191&&n<224){o=(n&31)<<6,o|=s&63,t+=String.fromCharCode(o);continue}if(i=e.charCodeAt(r++),n<240){t+=String.fromCharCode((n&15)<<12|(s&63)<<6|i&63);continue}o=e.charCodeAt(r++),l=((n&7)<<18|(s&63)<<12|(i&63)<<6|o&63)-65536,t+=String.fromCharCode(55296+(l>>>10&1023)),t+=String.fromCharCode(56320+(l&1023))}return t}function e8(e){var t=h0(2*e.length),r,n,s=1,i=0,o=0,l;for(n=0;n<e.length;n+=s)s=1,(l=e.charCodeAt(n))<128?r=l:l<224?(r=(l&31)*64+(e.charCodeAt(n+1)&63),s=2):l<240?(r=(l&15)*4096+(e.charCodeAt(n+1)&63)*64+(e.charCodeAt(n+2)&63),s=3):(s=4,r=(l&7)*262144+(e.charCodeAt(n+1)&63)*4096+(e.charCodeAt(n+2)&63)*64+(e.charCodeAt(n+3)&63),r-=65536,o=55296+(r>>>10&1023),r=56320+(r&1023)),o!==0&&(t[i++]=o&255,t[i++]=o>>>8,o=0),t[i++]=r%256,t[i++]=r>>>8;return t.slice(0,i).toString("ucs2")}function t8(e){return Qu(e,"binary").toString("utf8")}var Ty="foo bar baz",ua=pn&&(t8(Ty)==s4(Ty)&&t8||e8(Ty)==s4(Ty)&&e8)||s4,$d=pn?function(e){return Qu(e,"utf8").toString("binary")}:function(e){for(var t=[],r=0,n=0,s=0;r<e.length;)switch(n=e.charCodeAt(r++),!0){case n<128:t.push(String.fromCharCode(n));break;case n<2048:t.push(String.fromCharCode(192+(n>>6))),t.push(String.fromCharCode(128+(n&63)));break;case(n>=55296&&n<57344):n-=55296,s=e.charCodeAt(r++)-56320+(n<<10),t.push(String.fromCharCode(240+(s>>18&7))),t.push(String.fromCharCode(144+(s>>12&63))),t.push(String.fromCharCode(128+(s>>6&63))),t.push(String.fromCharCode(128+(s&63)));break;default:t.push(String.fromCharCode(224+(n>>12))),t.push(String.fromCharCode(128+(n>>6&63))),t.push(String.fromCharCode(128+(n&63)))}return t.join("")},T1=function(){var e={};return function(r,n){var s=r+"|"+(n||"");return e[s]?e[s]:e[s]=new RegExp("<(?:\\w+:)?"+r+'(?: xml:space="preserve")?(?:[^>]*)>([\\s\\S]*?)</(?:\\w+:)?'+r+">",n||"")}}(),IB=function(){var e=[["nbsp"," "],["middot",""],["quot",'"'],["apos","'"],["gt",">"],["lt","<"],["amp","&"]].map(function(t){return[new RegExp("&"+t[0]+";","ig"),t[1]]});return function(r){for(var n=r.replace(/^[\t\n\r ]+/,"").replace(/[\t\n\r ]+$/,"").replace(/>\s+/g,">").replace(/\s+</g,"<").replace(/[\t\n\r ]+/g," ").replace(/<\s*[bB][rR]\s*\/?>/g,`
`).replace(/<[^>]*>/g,""),s=0;s<e.length;++s)n=n.replace(e[s][0],e[s][1]);return n}}(),owe=function(){var e={};return function(r){return e[r]!==void 0?e[r]:e[r]=new RegExp("<(?:vt:)?"+r+">([\\s\\S]*?)</(?:vt:)?"+r+">","g")}}(),lwe=/<\/?(?:vt:)?variant>/g,cwe=/<(?:vt:)([^>]*)>([\s\S]*)</;function r8(e,t){var r=Vr(e),n=e.match(owe(r.baseType))||[],s=[];if(n.length!=r.size){if(t.WTF)throw new Error("unexpected vector length "+n.length+" != "+r.size);return s}return n.forEach(function(i){var o=i.replace(lwe,"").match(cwe);o&&s.push({v:ua(o[2]),t:o[1]})}),s}var DB=/(^\s|\s$|\n)/;function Ii(e,t){return"<"+e+(t.match(DB)?' xml:space="preserve"':"")+">"+t+"</"+e+">"}function O1(e){return xs(e).map(function(t){return" "+t+'="'+e[t]+'"'}).join("")}function Zt(e,t,r){return"<"+e+(r!=null?O1(r):"")+(t!=null?(t.match(DB)?' xml:space="preserve"':"")+">"+t+"</"+e:"/")+">"}function vS(e,t){try{return e.toISOString().replace(/\.\d*/,"")}catch(r){if(t)throw r}return""}function dwe(e,t){switch(typeof e){case"string":var r=Zt("vt:lpwstr",na(e));return r=r.replace(/&quot;/g,"_x0022_"),r;case"number":return Zt((e|0)==e?"vt:i4":"vt:r8",na(String(e)));case"boolean":return Zt("vt:bool",e?"true":"false")}if(e instanceof Date)return Zt("vt:filetime",vS(e));throw new Error("Unable to serialize "+e)}function fA(e){if(pn&&Buffer.isBuffer(e))return e.toString("utf8");if(typeof e=="string")return e;if(typeof Uint8Array<"u"&&e instanceof Uint8Array)return ua(E0(aA(e)));throw new Error("Bad input format: expected Buffer or string")}var P1=/<(\/?)([^\s?><!\/:]*:|)([^\s?<>:\/]+)(?:[\s?:\/][^>]*)?>/mg,ti={CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/metadata/core-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/custom-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/extended-properties",CT:"http://schemas.openxmlformats.org/package/2006/content-types",RELS:"http://schemas.openxmlformats.org/package/2006/relationships",TCMNT:"http://schemas.microsoft.com/office/spreadsheetml/2018/threadedcomments",dc:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",dcmitype:"http://purl.org/dc/dcmitype/",r:"http://schemas.openxmlformats.org/officeDocument/2006/relationships",vt:"http://schemas.openxmlformats.org/officeDocument/2006/docPropsVTypes",xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},fp=["http://schemas.openxmlformats.org/spreadsheetml/2006/main","http://purl.oclc.org/ooxml/spreadsheetml/main","http://schemas.microsoft.com/office/excel/2006/main","http://schemas.microsoft.com/office/excel/2006/2"],Al={o:"urn:schemas-microsoft-com:office:office",x:"urn:schemas-microsoft-com:office:excel",ss:"urn:schemas-microsoft-com:office:spreadsheet",dt:"uuid:C2F41010-65B3-11d1-A29F-00AA00C14882",mv:"http://macVmlSchemaUri",v:"urn:schemas-microsoft-com:vml",html:"http://www.w3.org/TR/REC-html40"};function uwe(e,t){for(var r=1-2*(e[t+7]>>>7),n=((e[t+7]&127)<<4)+(e[t+6]>>>4&15),s=e[t+6]&15,i=5;i>=0;--i)s=s*256+e[t+i];return n==2047?s==0?r*(1/0):NaN:(n==0?n=-1022:(n-=1023,s+=Math.pow(2,52)),r*Math.pow(2,n-52)*s)}function fwe(e,t,r){var n=(t<0||1/t==-1/0?1:0)<<7,s=0,i=0,o=n?-t:t;isFinite(o)?o==0?s=i=0:(s=Math.floor(Math.log(o)/Math.LN2),i=o*Math.pow(2,52-s),s<=-1023&&(!isFinite(i)||i<Math.pow(2,52))?s=-1022:(i-=Math.pow(2,52),s+=1023)):(s=2047,i=isNaN(t)?26985:0);for(var l=0;l<=5;++l,i/=256)e[r+l]=i&255;e[r+6]=(s&15)<<4|i&15,e[r+7]=s>>4|n}var n8=function(e){for(var t=[],r=10240,n=0;n<e[0].length;++n)if(e[0][n])for(var s=0,i=e[0][n].length;s<i;s+=r)t.push.apply(t,e[0][n].slice(s,s+r));return t},a8=pn?function(e){return e[0].length>0&&Buffer.isBuffer(e[0][0])?Buffer.concat(e[0].map(function(t){return Buffer.isBuffer(t)?t:Qu(t)})):n8(e)}:n8,s8=function(e,t,r){for(var n=[],s=t;s<r;s+=2)n.push(String.fromCharCode(Su(e,s)));return n.join("").replace(To,"")},hA=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("utf16le",t,r).replace(To,""):s8(e,t,r)}:s8,i8=function(e,t,r){for(var n=[],s=t;s<t+r;++s)n.push(("0"+e[s].toString(16)).slice(-2));return n.join("")},LB=pn?function(e,t,r){return Buffer.isBuffer(e)?e.toString("hex",t,t+r):i8(e,t,r)}:i8,o8=function(e,t,r){for(var n=[],s=t;s<r;s++)n.push(String.fromCharCode(Jp(e,s)));return n.join("")},cb=pn?function(t,r,n){return Buffer.isBuffer(t)?t.toString("utf8",r,n):o8(t,r,n)}:o8,FB=function(e,t){var r=Cl(e,t);return r>0?cb(e,t+4,t+4+r-1):""},MB=FB,RB=function(e,t){var r=Cl(e,t);return r>0?cb(e,t+4,t+4+r-1):""},BB=RB,$B=function(e,t){var r=2*Cl(e,t);return r>0?cb(e,t+4,t+4+r-1):""},UB=$B,zB=function(t,r){var n=Cl(t,r);return n>0?hA(t,r+4,r+4+n):""},qB=zB,HB=function(e,t){var r=Cl(e,t);return r>0?cb(e,t+4,t+4+r):""},WB=HB,VB=function(e,t){return uwe(e,t)},n5=VB,pA=function(t){return Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array};pn&&(MB=function(t,r){if(!Buffer.isBuffer(t))return FB(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},BB=function(t,r){if(!Buffer.isBuffer(t))return RB(t,r);var n=t.readUInt32LE(r);return n>0?t.toString("utf8",r+4,r+4+n-1):""},UB=function(t,r){if(!Buffer.isBuffer(t))return $B(t,r);var n=2*t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n-1)},qB=function(t,r){if(!Buffer.isBuffer(t))return zB(t,r);var n=t.readUInt32LE(r);return t.toString("utf16le",r+4,r+4+n)},WB=function(t,r){if(!Buffer.isBuffer(t))return HB(t,r);var n=t.readUInt32LE(r);return t.toString("utf8",r+4,r+4+n)},n5=function(t,r){return Buffer.isBuffer(t)?t.readDoubleLE(r):VB(t,r)},pA=function(t){return Buffer.isBuffer(t)||Array.isArray(t)||typeof Uint8Array<"u"&&t instanceof Uint8Array});var Jp=function(e,t){return e[t]},Su=function(e,t){return e[t+1]*256+e[t]},hwe=function(e,t){var r=e[t+1]*256+e[t];return r<32768?r:(65535-r+1)*-1},Cl=function(e,t){return e[t+3]*(1<<24)+(e[t+2]<<16)+(e[t+1]<<8)+e[t]},oh=function(e,t){return e[t+3]<<24|e[t+2]<<16|e[t+1]<<8|e[t]},pwe=function(e,t){return e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3]};function xv(e,t){var r="",n,s,i=[],o,l,c,d;switch(t){case"dbcs":if(d=this.l,pn&&Buffer.isBuffer(this))r=this.slice(this.l,this.l+2*e).toString("utf16le");else for(c=0;c<e;++c)r+=String.fromCharCode(Su(this,d)),d+=2;e*=2;break;case"utf8":r=cb(this,this.l,this.l+e);break;case"utf16le":e*=2,r=hA(this,this.l,this.l+e);break;case"wstr":return xv.call(this,e,"dbcs");case"lpstr-ansi":r=MB(this,this.l),e=4+Cl(this,this.l);break;case"lpstr-cp":r=BB(this,this.l),e=4+Cl(this,this.l);break;case"lpwstr":r=UB(this,this.l),e=4+2*Cl(this,this.l);break;case"lpp4":e=4+Cl(this,this.l),r=qB(this,this.l),e&2&&(e+=2);break;case"8lpp4":e=4+Cl(this,this.l),r=WB(this,this.l),e&3&&(e+=4-(e&3));break;case"cstr":for(e=0,r="";(o=Jp(this,this.l+e++))!==0;)i.push(Ey(o));r=i.join("");break;case"_wstr":for(e=0,r="";(o=Su(this,this.l+e))!==0;)i.push(Ey(o)),e+=2;e+=2,r=i.join("");break;case"dbcs-cont":for(r="",d=this.l,c=0;c<e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Jp(this,d),this.l=d+1,l=xv.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Ey(Su(this,d))),d+=2}r=i.join(""),e*=2;break;case"cpstr":case"sbcs-cont":for(r="",d=this.l,c=0;c!=e;++c){if(this.lens&&this.lens.indexOf(d)!==-1)return o=Jp(this,d),this.l=d+1,l=xv.call(this,e-c,o?"dbcs-cont":"sbcs-cont"),i.join("")+l;i.push(Ey(Jp(this,d))),d+=1}r=i.join("");break;default:switch(e){case 1:return n=Jp(this,this.l),this.l++,n;case 2:return n=(t==="i"?hwe:Su)(this,this.l),this.l+=2,n;case 4:case-4:return t==="i"||!(this[this.l+3]&128)?(n=(e>0?oh:pwe)(this,this.l),this.l+=4,n):(s=Cl(this,this.l),this.l+=4,s);case 8:case-8:if(t==="f")return e==8?s=n5(this,this.l):s=n5([this[this.l+7],this[this.l+6],this[this.l+5],this[this.l+4],this[this.l+3],this[this.l+2],this[this.l+1],this[this.l+0]],0),this.l+=8,s;e=8;case 16:r=LB(this,this.l,e);break}}return this.l+=e,r}var mwe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255,e[r+2]=t>>>16&255,e[r+3]=t>>>24&255},xwe=function(e,t,r){e[r]=t&255,e[r+1]=t>>8&255,e[r+2]=t>>16&255,e[r+3]=t>>24&255},gwe=function(e,t,r){e[r]=t&255,e[r+1]=t>>>8&255};function vwe(e,t,r){var n=0,s=0;if(r==="dbcs"){for(s=0;s!=t.length;++s)gwe(this,t.charCodeAt(s),this.l+2*s);n=2*t.length}else if(r==="sbcs"){for(t=t.replace(/[^\x00-\x7F]/g,"_"),s=0;s!=t.length;++s)this[this.l+s]=t.charCodeAt(s)&255;n=t.length}else if(r==="hex"){for(;s<e;++s)this[this.l++]=parseInt(t.slice(2*s,2*s+2),16)||0;return this}else if(r==="utf16le"){var i=Math.min(this.l+e,this.length);for(s=0;s<Math.min(t.length,e);++s){var o=t.charCodeAt(s);this[this.l++]=o&255,this[this.l++]=o>>8}for(;this.l<i;)this[this.l++]=0;return this}else switch(e){case 1:n=1,this[this.l]=t&255;break;case 2:n=2,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255;break;case 3:n=3,this[this.l]=t&255,t>>>=8,this[this.l+1]=t&255,t>>>=8,this[this.l+2]=t&255;break;case 4:n=4,mwe(this,t,this.l);break;case 8:if(n=8,r==="f"){fwe(this,t,this.l);break}case 16:break;case-4:n=4,xwe(this,t,this.l);break}return this.l+=n,this}function GB(e,t){var r=LB(this,this.l,e.length>>1);if(r!==e)throw new Error(t+"Expected "+e+" saw "+r);this.l+=e.length>>1}function Pi(e,t){e.l=t,e.read_shift=xv,e.chk=GB,e.write_shift=vwe}function ho(e,t){e.l+=t}function jt(e){var t=h0(e);return Pi(t,0),t}function Ju(e,t,r){if(e){var n,s,i;Pi(e,e.l||0);for(var o=e.length,l=0,c=0;e.l<o;){l=e.read_shift(1),l&128&&(l=(l&127)+((e.read_shift(1)&127)<<7));var d=R1[l]||R1[65535];for(n=e.read_shift(1),i=n&127,s=1;s<4&&n&128;++s)i+=((n=e.read_shift(1))&127)<<7*s;c=e.l+i;var f=d.f&&d.f(e,i,r);if(e.l=c,t(f,d,l))return}}}function sl(){var e=[],t=pn?256:2048,r=function(d){var f=jt(d);return Pi(f,0),f},n=r(t),s=function(){n&&(n.length>n.l&&(n=n.slice(0,n.l),n.l=n.length),n.length>0&&e.push(n),n=null)},i=function(d){return n&&d<n.length-n.l?n:(s(),n=r(Math.max(d+1,t)))},o=function(){return s(),yi(e)},l=function(d){s(),n=d,n.l==null&&(n.l=n.length),i(t)};return{next:i,push:l,end:o,_bufs:e}}function Lt(e,t,r,n){var s=+t,i;if(!isNaN(s)){n||(n=R1[s].p||(r||[]).length||0),i=1+(s>=128?1:0)+1,n>=128&&++i,n>=16384&&++i,n>=2097152&&++i;var o=e.next(i);s<=127?o.write_shift(1,s):(o.write_shift(1,(s&127)+128),o.write_shift(1,s>>7));for(var l=0;l!=4;++l)if(n>=128)o.write_shift(1,(n&127)+128),n>>=7;else{o.write_shift(1,n);break}n>0&&pA(r)&&e.push(r)}}function gv(e,t,r){var n=La(e);if(t.s?(n.cRel&&(n.c+=t.s.c),n.rRel&&(n.r+=t.s.r)):(n.cRel&&(n.c+=t.c),n.rRel&&(n.r+=t.r)),!r||r.biff<12){for(;n.c>=256;)n.c-=256;for(;n.r>=65536;)n.r-=65536}return n}function l8(e,t,r){var n=La(e);return n.s=gv(n.s,t.s,r),n.e=gv(n.e,t.s,r),n}function vv(e,t){if(e.cRel&&e.c<0)for(e=La(e);e.c<0;)e.c+=t>8?16384:256;if(e.rRel&&e.r<0)for(e=La(e);e.r<0;)e.r+=t>8?1048576:t>5?65536:16384;var r=Wr(e);return!e.cRel&&e.cRel!=null&&(r=wwe(r)),!e.rRel&&e.rRel!=null&&(r=bwe(r)),r}function i4(e,t){return e.s.r==0&&!e.s.rRel&&e.e.r==(t.biff>=12?1048575:t.biff>=8?65536:16384)&&!e.e.rRel?(e.s.cRel?"":"$")+Ja(e.s.c)+":"+(e.e.cRel?"":"$")+Ja(e.e.c):e.s.c==0&&!e.s.cRel&&e.e.c==(t.biff>=12?16383:255)&&!e.e.cRel?(e.s.rRel?"":"$")+As(e.s.r)+":"+(e.e.rRel?"":"$")+As(e.e.r):vv(e.s,t.biff)+":"+vv(e.e,t.biff)}function mA(e){return parseInt(ywe(e),10)-1}function As(e){return""+(e+1)}function bwe(e){return e.replace(/([A-Z]|^)(\d+)$/,"$1$$$2")}function ywe(e){return e.replace(/\$(\d+)$/,"$1")}function xA(e){for(var t=Nwe(e),r=0,n=0;n!==t.length;++n)r=26*r+t.charCodeAt(n)-64;return r-1}function Ja(e){if(e<0)throw new Error("invalid column "+e);var t="";for(++e;e;e=Math.floor((e-1)/26))t=String.fromCharCode((e-1)%26+65)+t;return t}function wwe(e){return e.replace(/^([A-Z])/,"$$$1")}function Nwe(e){return e.replace(/^\$([A-Z])/,"$1")}function jwe(e){return e.replace(/(\$?[A-Z]*)(\$?\d*)/,"$1,$2").split(",")}function Za(e){for(var t=0,r=0,n=0;n<e.length;++n){var s=e.charCodeAt(n);s>=48&&s<=57?t=10*t+(s-48):s>=65&&s<=90&&(r=26*r+(s-64))}return{c:r-1,r:t-1}}function Wr(e){for(var t=e.c+1,r="";t;t=(t-1)/26|0)r=String.fromCharCode((t-1)%26+65)+r;return r+(e.r+1)}function ol(e){var t=e.indexOf(":");return t==-1?{s:Za(e),e:Za(e)}:{s:Za(e.slice(0,t)),e:Za(e.slice(t+1))}}function an(e,t){return typeof t>"u"||typeof t=="number"?an(e.s,e.e):(typeof e!="string"&&(e=Wr(e)),typeof t!="string"&&(t=Wr(t)),e==t?e:e+":"+t)}function Bn(e){var t={s:{c:0,r:0},e:{c:0,r:0}},r=0,n=0,s=0,i=e.length;for(r=0;n<i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.s.c=--r,r=0;n<i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;if(t.s.r=--r,n===i||s!=10)return t.e.c=t.s.c,t.e.r=t.s.r,t;for(++n,r=0;n!=i&&!((s=e.charCodeAt(n)-64)<1||s>26);++n)r=26*r+s;for(t.e.c=--r,r=0;n!=i&&!((s=e.charCodeAt(n)-48)<0||s>9);++n)r=10*r+s;return t.e.r=--r,t}function c8(e,t){var r=e.t=="d"&&t instanceof Date;if(e.z!=null)try{return e.w=yc(e.z,r?ai(t):t)}catch{}try{return e.w=yc((e.XF||{}).numFmtId||(r?14:0),r?ai(t):t)}catch{return""+t}}function Vu(e,t,r){return e==null||e.t==null||e.t=="z"?"":e.w!==void 0?e.w:(e.t=="d"&&!e.z&&r&&r.dateNF&&(e.z=r.dateNF),e.t=="e"?Zu[e.v]||e.v:t==null?c8(e,e.v):c8(e,t))}function T0(e,t){var r=t&&t.sheet?t.sheet:"Sheet1",n={};return n[r]=e,{SheetNames:[r],Sheets:n}}function KB(e,t,r){var n=r||{},s=e?Array.isArray(e):n.dense,i=e||(s?[]:{}),o=0,l=0;if(i&&n.origin!=null){if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Za(n.origin):n.origin;o=c.r,l=c.c}i["!ref"]||(i["!ref"]="A1:A1")}var d={s:{c:1e7,r:1e7},e:{c:0,r:0}};if(i["!ref"]){var f=Bn(i["!ref"]);d.s.c=f.s.c,d.s.r=f.s.r,d.e.c=Math.max(d.e.c,f.e.c),d.e.r=Math.max(d.e.r,f.e.r),o==-1&&(d.e.r=o=f.e.r+1)}for(var u=0;u!=t.length;++u)if(t[u]){if(!Array.isArray(t[u]))throw new Error("aoa_to_sheet expects an array of arrays");for(var p=0;p!=t[u].length;++p)if(!(typeof t[u][p]>"u")){var h={v:t[u][p]},m=o+u,g=l+p;if(d.s.r>m&&(d.s.r=m),d.s.c>g&&(d.s.c=g),d.e.r<m&&(d.e.r=m),d.e.c<g&&(d.e.c=g),t[u][p]&&typeof t[u][p]=="object"&&!Array.isArray(t[u][p])&&!(t[u][p]instanceof Date))h=t[u][p];else if(Array.isArray(h.v)&&(h.f=t[u][p][1],h.v=h.v[0]),h.v===null)if(h.f)h.t="n";else if(n.nullError)h.t="e",h.v=0;else if(n.sheetStubs)h.t="z";else continue;else typeof h.v=="number"?h.t="n":typeof h.v=="boolean"?h.t="b":h.v instanceof Date?(h.z=n.dateNF||Br[14],n.cellDates?(h.t="d",h.w=yc(h.z,ai(h.v))):(h.t="n",h.v=ai(h.v),h.w=yc(h.z,h.v))):h.t="s";if(s)i[m]||(i[m]=[]),i[m][g]&&i[m][g].z&&(h.z=i[m][g].z),i[m][g]=h;else{var x=Wr({c:g,r:m});i[x]&&i[x].z&&(h.z=i[x].z),i[x]=h}}}return d.s.c<1e7&&(i["!ref"]=an(d)),i}function Xx(e,t){return KB(null,e,t)}function kwe(e){return e.read_shift(4,"i")}function od(e,t){return t||(t=jt(4)),t.write_shift(4,e),t}function uo(e){var t=e.read_shift(4);return t===0?"":e.read_shift(t,"dbcs")}function Ni(e,t){var r=!1;return t==null&&(r=!0,t=jt(4+2*e.length)),t.write_shift(4,e.length),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}function Swe(e){return{ich:e.read_shift(2),ifnt:e.read_shift(2)}}function _we(e,t){return t||(t=jt(4)),t.write_shift(2,0),t.write_shift(2,0),t}function gA(e,t){var r=e.l,n=e.read_shift(1),s=uo(e),i=[],o={t:s,h:s};if(n&1){for(var l=e.read_shift(4),c=0;c!=l;++c)i.push(Swe(e));o.r=i}else o.r=[{ich:0,ifnt:0}];return e.l=r+t,o}function Awe(e,t){var r=!1;return t==null&&(r=!0,t=jt(15+4*e.t.length)),t.write_shift(1,0),Ni(e.t,t),r?t.slice(0,t.l):t}var Cwe=gA;function Ewe(e,t){var r=!1;return t==null&&(r=!0,t=jt(23+4*e.t.length)),t.write_shift(1,1),Ni(e.t,t),t.write_shift(4,1),_we({},t),r?t.slice(0,t.l):t}function kc(e){var t=e.read_shift(4),r=e.read_shift(2);return r+=e.read_shift(1)<<16,e.l++,{c:t,iStyleRef:r}}function hp(e,t){return t==null&&(t=jt(8)),t.write_shift(-4,e.c),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}function pp(e){var t=e.read_shift(2);return t+=e.read_shift(1)<<16,e.l++,{c:-1,iStyleRef:t}}function mp(e,t){return t==null&&(t=jt(4)),t.write_shift(3,e.iStyleRef||e.s),t.write_shift(1,0),t}var Twe=uo,XB=Ni;function vA(e){var t=e.read_shift(4);return t===0||t===4294967295?"":e.read_shift(t,"dbcs")}function a5(e,t){var r=!1;return t==null&&(r=!0,t=jt(127)),t.write_shift(4,e.length>0?e.length:4294967295),e.length>0&&t.write_shift(0,e,"dbcs"),r?t.slice(0,t.l):t}var Owe=uo,bS=vA,bA=a5;function yA(e){var t=e.slice(e.l,e.l+4),r=t[0]&1,n=t[0]&2;e.l+=4;var s=n===0?n5([0,0,0,0,t[0]&252,t[1],t[2],t[3]],0):oh(t,0)>>2;return r?s/100:s}function YB(e,t){t==null&&(t=jt(4));var r=0,n=0,s=e*100;if(e==(e|0)&&e>=-536870912&&e<1<<29?n=1:s==(s|0)&&s>=-536870912&&s<1<<29&&(n=1,r=1),n)t.write_shift(-4,((r?s:e)<<2)+(r+2));else throw new Error("unsupported RkNumber "+e)}function QB(e){var t={s:{},e:{}};return t.s.r=e.read_shift(4),t.e.r=e.read_shift(4),t.s.c=e.read_shift(4),t.e.c=e.read_shift(4),t}function Pwe(e,t){return t||(t=jt(16)),t.write_shift(4,e.s.r),t.write_shift(4,e.e.r),t.write_shift(4,e.s.c),t.write_shift(4,e.e.c),t}var xp=QB,Yx=Pwe;function oo(e){if(e.length-e.l<8)throw"XLS Xnum Buffer underflow";return e.read_shift(8,"f")}function tp(e,t){return(t||jt(8)).write_shift(8,e,"f")}function Iwe(e){var t={},r=e.read_shift(1),n=r>>>1,s=e.read_shift(1),i=e.read_shift(2,"i"),o=e.read_shift(1),l=e.read_shift(1),c=e.read_shift(1);switch(e.l++,n){case 0:t.auto=1;break;case 1:t.index=s;var d=Dh[s];d&&(t.rgb=D1(d));break;case 2:t.rgb=D1([o,l,c]);break;case 3:t.theme=s;break}return i!=0&&(t.tint=i>0?i/32767:i/32768),t}function s5(e,t){if(t||(t=jt(8)),!e||e.auto)return t.write_shift(4,0),t.write_shift(4,0),t;e.index!=null?(t.write_shift(1,2),t.write_shift(1,e.index)):e.theme!=null?(t.write_shift(1,6),t.write_shift(1,e.theme)):(t.write_shift(1,5),t.write_shift(1,0));var r=e.tint||0;if(r>0?r*=32767:r<0&&(r*=32768),t.write_shift(2,r),!e.rgb||e.theme!=null)t.write_shift(2,0),t.write_shift(1,0),t.write_shift(1,0);else{var n=e.rgb||"FFFFFF";typeof n=="number"&&(n=("000000"+n.toString(16)).slice(-6)),t.write_shift(1,parseInt(n.slice(0,2),16)),t.write_shift(1,parseInt(n.slice(2,4),16)),t.write_shift(1,parseInt(n.slice(4,6),16)),t.write_shift(1,255)}return t}function Dwe(e){var t=e.read_shift(1);e.l++;var r={fBold:t&1,fItalic:t&2,fUnderline:t&4,fStrikeout:t&8,fOutline:t&16,fShadow:t&32,fCondense:t&64,fExtend:t&128};return r}function Lwe(e,t){t||(t=jt(2));var r=(e.italic?2:0)|(e.strike?8:0)|(e.outline?16:0)|(e.shadow?32:0)|(e.condense?64:0)|(e.extend?128:0);return t.write_shift(1,r),t.write_shift(1,0),t}function JB(e,t){var r={2:"BITMAP",3:"METAFILEPICT",8:"DIB",14:"ENHMETAFILE"},n=e.read_shift(4);switch(n){case 0:return"";case 4294967295:case 4294967294:return r[e.read_shift(4)]||""}if(n>400)throw new Error("Unsupported Clipboard: "+n.toString(16));return e.l-=4,e.read_shift(0,t==1?"lpstr":"lpwstr")}function Fwe(e){return JB(e,1)}function Mwe(e){return JB(e,2)}var wA=2,Yo=3,Oy=11,d8=12,i5=19,Py=64,Rwe=65,Bwe=71,$we=4108,Uwe=4126,xi=80,ZB=81,zwe=[xi,ZB],yS={1:{n:"CodePage",t:wA},2:{n:"Category",t:xi},3:{n:"PresentationFormat",t:xi},4:{n:"ByteCount",t:Yo},5:{n:"LineCount",t:Yo},6:{n:"ParagraphCount",t:Yo},7:{n:"SlideCount",t:Yo},8:{n:"NoteCount",t:Yo},9:{n:"HiddenCount",t:Yo},10:{n:"MultimediaClipCount",t:Yo},11:{n:"ScaleCrop",t:Oy},12:{n:"HeadingPairs",t:$we},13:{n:"TitlesOfParts",t:Uwe},14:{n:"Manager",t:xi},15:{n:"Company",t:xi},16:{n:"LinksUpToDate",t:Oy},17:{n:"CharacterCount",t:Yo},19:{n:"SharedDoc",t:Oy},22:{n:"HyperlinksChanged",t:Oy},23:{n:"AppVersion",t:Yo,p:"version"},24:{n:"DigSig",t:Rwe},26:{n:"ContentType",t:xi},27:{n:"ContentStatus",t:xi},28:{n:"Language",t:xi},29:{n:"Version",t:xi},255:{},2147483648:{n:"Locale",t:i5},2147483651:{n:"Behavior",t:i5},1919054434:{}},wS={1:{n:"CodePage",t:wA},2:{n:"Title",t:xi},3:{n:"Subject",t:xi},4:{n:"Author",t:xi},5:{n:"Keywords",t:xi},6:{n:"Comments",t:xi},7:{n:"Template",t:xi},8:{n:"LastAuthor",t:xi},9:{n:"RevNumber",t:xi},10:{n:"EditTime",t:Py},11:{n:"LastPrinted",t:Py},12:{n:"CreatedDate",t:Py},13:{n:"ModifiedDate",t:Py},14:{n:"PageCount",t:Yo},15:{n:"WordCount",t:Yo},16:{n:"CharCount",t:Yo},17:{n:"Thumbnail",t:Bwe},18:{n:"Application",t:xi},19:{n:"DocSecurity",t:Yo},255:{},2147483648:{n:"Locale",t:i5},2147483651:{n:"Behavior",t:i5},1919054434:{}},u8={1:"US",2:"CA",3:"",7:"RU",20:"EG",30:"GR",31:"NL",32:"BE",33:"FR",34:"ES",36:"HU",39:"IT",41:"CH",43:"AT",44:"GB",45:"DK",46:"SE",47:"NO",48:"PL",49:"DE",52:"MX",55:"BR",61:"AU",64:"NZ",66:"TH",81:"JP",82:"KR",84:"VN",86:"CN",90:"TR",105:"JS",213:"DZ",216:"MA",218:"LY",351:"PT",354:"IS",358:"FI",420:"CZ",886:"TW",961:"LB",962:"JO",963:"SY",964:"IQ",965:"KW",966:"SA",971:"AE",972:"IL",974:"QA",981:"IR",65535:"US"},qwe=[null,"solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"];function Hwe(e){return e.map(function(t){return[t>>16&255,t>>8&255,t&255]})}var Wwe=Hwe([0,16777215,16711680,65280,255,16776960,16711935,65535,0,16777215,16711680,65280,255,16776960,16711935,65535,8388608,32768,128,8421376,8388736,32896,12632256,8421504,10066431,10040166,16777164,13434879,6684774,16744576,26316,13421823,128,16711935,16776960,65535,8388736,8388608,32896,255,52479,13434879,13434828,16777113,10079487,16751052,13408767,16764057,3368703,3394764,10079232,16763904,16750848,16737792,6710937,9868950,13158,3381606,13056,3355392,10040064,10040166,3355545,3355443,16777215,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Dh=La(Wwe),Zu={0:"#NULL!",7:"#DIV/0!",15:"#VALUE!",23:"#REF!",29:"#NAME?",36:"#NUM!",42:"#N/A",43:"#GETTING_DATA",255:"#WTF?"},e$={"#NULL!":0,"#DIV/0!":7,"#VALUE!":15,"#REF!":23,"#NAME?":29,"#NUM!":36,"#N/A":42,"#GETTING_DATA":43,"#WTF?":255},NS={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml":"workbooks","application/vnd.ms-excel.sheet.macroEnabled.main+xml":"workbooks","application/vnd.ms-excel.sheet.binary.macroEnabled.main":"workbooks","application/vnd.ms-excel.addin.macroEnabled.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml":"workbooks","application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml":"sheets","application/vnd.ms-excel.worksheet":"sheets","application/vnd.ms-excel.binIndexWs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml":"charts","application/vnd.ms-excel.chartsheet":"charts","application/vnd.ms-excel.macrosheet+xml":"macros","application/vnd.ms-excel.macrosheet":"macros","application/vnd.ms-excel.intlmacrosheet":"TODO","application/vnd.ms-excel.binIndexMs":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml":"dialogs","application/vnd.ms-excel.dialogsheet":"dialogs","application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml":"strs","application/vnd.ms-excel.sharedStrings":"strs","application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml":"styles","application/vnd.ms-excel.styles":"styles","application/vnd.openxmlformats-package.core-properties+xml":"coreprops","application/vnd.openxmlformats-officedocument.custom-properties+xml":"custprops","application/vnd.openxmlformats-officedocument.extended-properties+xml":"extprops","application/vnd.openxmlformats-officedocument.customXmlProperties+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.customProperty":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml":"comments","application/vnd.ms-excel.comments":"comments","application/vnd.ms-excel.threadedcomments+xml":"threadedcomments","application/vnd.ms-excel.person+xml":"people","application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml":"metadata","application/vnd.ms-excel.sheetMetadata":"metadata","application/vnd.ms-excel.pivotTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.chart+xml":"TODO","application/vnd.ms-office.chartcolorstyle+xml":"TODO","application/vnd.ms-office.chartstyle+xml":"TODO","application/vnd.ms-office.chartex+xml":"TODO","application/vnd.ms-excel.calcChain":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.calcChain+xml":"calcchains","application/vnd.openxmlformats-officedocument.spreadsheetml.printerSettings":"TODO","application/vnd.ms-office.activeX":"TODO","application/vnd.ms-office.activeX+xml":"TODO","application/vnd.ms-excel.attachedToolbars":"TODO","application/vnd.ms-excel.connections":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.connections+xml":"TODO","application/vnd.ms-excel.externalLink":"links","application/vnd.openxmlformats-officedocument.spreadsheetml.externalLink+xml":"links","application/vnd.ms-excel.pivotCacheDefinition":"TODO","application/vnd.ms-excel.pivotCacheRecords":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml":"TODO","application/vnd.ms-excel.queryTable":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.queryTable+xml":"TODO","application/vnd.ms-excel.userNames":"TODO","application/vnd.ms-excel.revisionHeaders":"TODO","application/vnd.ms-excel.revisionLog":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionHeaders+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.revisionLog+xml":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.userNames+xml":"TODO","application/vnd.ms-excel.tableSingleCells":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.tableSingleCells+xml":"TODO","application/vnd.ms-excel.slicer":"TODO","application/vnd.ms-excel.slicerCache":"TODO","application/vnd.ms-excel.slicer+xml":"TODO","application/vnd.ms-excel.slicerCache+xml":"TODO","application/vnd.ms-excel.wsSortMap":"TODO","application/vnd.ms-excel.table":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.table+xml":"TODO","application/vnd.openxmlformats-officedocument.theme+xml":"themes","application/vnd.openxmlformats-officedocument.themeOverride+xml":"TODO","application/vnd.ms-excel.Timeline+xml":"TODO","application/vnd.ms-excel.TimelineCache+xml":"TODO","application/vnd.ms-office.vbaProject":"vba","application/vnd.ms-office.vbaProjectSignature":"TODO","application/vnd.ms-office.volatileDependencies":"TODO","application/vnd.openxmlformats-officedocument.spreadsheetml.volatileDependencies+xml":"TODO","application/vnd.ms-excel.controlproperties+xml":"TODO","application/vnd.openxmlformats-officedocument.model+data":"TODO","application/vnd.ms-excel.Survey+xml":"TODO","application/vnd.openxmlformats-officedocument.drawing+xml":"drawings","application/vnd.openxmlformats-officedocument.drawingml.chartshapes+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramColors+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramData+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramLayout+xml":"TODO","application/vnd.openxmlformats-officedocument.drawingml.diagramStyle+xml":"TODO","application/vnd.openxmlformats-officedocument.vmlDrawing":"TODO","application/vnd.openxmlformats-package.relationships+xml":"rels","application/vnd.openxmlformats-officedocument.oleObject":"TODO","image/png":"TODO",sheet:"js"},Iy={workbooks:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml",xlsm:"application/vnd.ms-excel.sheet.macroEnabled.main+xml",xlsb:"application/vnd.ms-excel.sheet.binary.macroEnabled.main",xlam:"application/vnd.ms-excel.addin.macroEnabled.main+xml",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template.main+xml"},strs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml",xlsb:"application/vnd.ms-excel.sharedStrings"},comments:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.comments+xml",xlsb:"application/vnd.ms-excel.comments"},sheets:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml",xlsb:"application/vnd.ms-excel.worksheet"},charts:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.chartsheet+xml",xlsb:"application/vnd.ms-excel.chartsheet"},dialogs:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.dialogsheet+xml",xlsb:"application/vnd.ms-excel.dialogsheet"},macros:{xlsx:"application/vnd.ms-excel.macrosheet+xml",xlsb:"application/vnd.ms-excel.macrosheet"},metadata:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheetMetadata+xml",xlsb:"application/vnd.ms-excel.sheetMetadata"},styles:{xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml",xlsb:"application/vnd.ms-excel.styles"}};function NA(){return{workbooks:[],sheets:[],charts:[],dialogs:[],macros:[],rels:[],strs:[],comments:[],threadedcomments:[],links:[],coreprops:[],extprops:[],custprops:[],themes:[],styles:[],calcchains:[],vba:[],drawings:[],metadata:[],people:[],TODO:[],xmlns:""}}function Vwe(e){var t=NA();if(!e||!e.match)return t;var r={};if((e.match(po)||[]).forEach(function(n){var s=Vr(n);switch(s[0].replace(rwe,"<")){case"<?xml":break;case"<Types":t.xmlns=s["xmlns"+(s[0].match(/<(\w+):/)||["",""])[1]];break;case"<Default":r[s.Extension]=s.ContentType;break;case"<Override":t[NS[s.ContentType]]!==void 0&&t[NS[s.ContentType]].push(s.PartName);break}}),t.xmlns!==ti.CT)throw new Error("Unknown Namespace: "+t.xmlns);return t.calcchain=t.calcchains.length>0?t.calcchains[0]:"",t.sst=t.strs.length>0?t.strs[0]:"",t.style=t.styles.length>0?t.styles[0]:"",t.defaults=r,delete t.calcchains,t}function t$(e,t){var r=V2e(NS),n=[],s;n[n.length]=Es,n[n.length]=Zt("Types",null,{xmlns:ti.CT,"xmlns:xsd":ti.xsd,"xmlns:xsi":ti.xsi}),n=n.concat([["xml","application/xml"],["bin","application/vnd.ms-excel.sheet.binary.macroEnabled.main"],["vml","application/vnd.openxmlformats-officedocument.vmlDrawing"],["data","application/vnd.openxmlformats-officedocument.model+data"],["bmp","image/bmp"],["png","image/png"],["gif","image/gif"],["emf","image/x-emf"],["wmf","image/x-wmf"],["jpg","image/jpeg"],["jpeg","image/jpeg"],["tif","image/tiff"],["tiff","image/tiff"],["pdf","application/pdf"],["rels","application/vnd.openxmlformats-package.relationships+xml"]].map(function(c){return Zt("Default",null,{Extension:c[0],ContentType:c[1]})}));var i=function(c){e[c]&&e[c].length>0&&(s=e[c][0],n[n.length]=Zt("Override",null,{PartName:(s[0]=="/"?"":"/")+s,ContentType:Iy[c][t.bookType]||Iy[c].xlsx}))},o=function(c){(e[c]||[]).forEach(function(d){n[n.length]=Zt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:Iy[c][t.bookType]||Iy[c].xlsx})})},l=function(c){(e[c]||[]).forEach(function(d){n[n.length]=Zt("Override",null,{PartName:(d[0]=="/"?"":"/")+d,ContentType:r[c][0]})})};return i("workbooks"),o("sheets"),o("charts"),l("themes"),["strs","styles"].forEach(i),["coreprops","extprops","custprops"].forEach(l),l("vba"),l("comments"),l("threadedcomments"),l("drawings"),o("metadata"),l("people"),n.length>2&&(n[n.length]="</Types>",n[1]=n[1].replace("/>",">")),n.join("")}var bn={WB:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument",SHEET:"http://sheetjs.openxmlformats.org/officeDocument/2006/relationships/officeDocument",HLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/hyperlink",VML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/vmlDrawing",XPATH:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLinkPath",XMISS:"http://schemas.microsoft.com/office/2006/relationships/xlExternalLinkPath/xlPathMissing",XLINK:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/externalLink",CXML:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXml",CXMLP:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/customXmlProps",CMNT:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/comments",CORE_PROPS:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",EXT_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties",CUST_PROPS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/custom-properties",SST:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",STY:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",THEME:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme",CHART:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chart",CHARTEX:"http://schemas.microsoft.com/office/2014/relationships/chartEx",CS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/chartsheet",WS:["http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet","http://purl.oclc.org/ooxml/officeDocument/relationships/worksheet"],DS:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/dialogsheet",MS:"http://schemas.microsoft.com/office/2006/relationships/xlMacrosheet",IMG:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image",DRAW:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/drawing",XLMETA:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sheetMetadata",TCMNT:"http://schemas.microsoft.com/office/2017/10/relationships/threadedComment",PEOPLE:"http://schemas.microsoft.com/office/2017/10/relationships/person",VBA:"http://schemas.microsoft.com/office/2006/relationships/vbaProject"};function I1(e){var t=e.lastIndexOf("/");return e.slice(0,t+1)+"_rels/"+e.slice(t+1)+".rels"}function bv(e,t){var r={"!id":{}};if(!e)return r;t.charAt(0)!=="/"&&(t="/"+t);var n={};return(e.match(po)||[]).forEach(function(s){var i=Vr(s);if(i[0]==="<Relationship"){var o={};o.Type=i.Type,o.Target=i.Target,o.Id=i.Id,i.TargetMode&&(o.TargetMode=i.TargetMode);var l=i.TargetMode==="External"?i.Target:Jg(i.Target,t);r[l]=o,n[i.Id]=o}}),r["!id"]=n,r}function Tm(e){var t=[Es,Zt("Relationships",null,{xmlns:ti.RELS})];return xs(e["!id"]).forEach(function(r){t[t.length]=Zt("Relationship",null,e["!id"][r])}),t.length>2&&(t[t.length]="</Relationships>",t[1]=t[1].replace("/>",">")),t.join("")}function ta(e,t,r,n,s,i){if(s||(s={}),e["!id"]||(e["!id"]={}),e["!idx"]||(e["!idx"]=1),t<0)for(t=e["!idx"];e["!id"]["rId"+t];++t);if(e["!idx"]=t+1,s.Id="rId"+t,s.Type=n,s.Target=r,[bn.HLINK,bn.XPATH,bn.XMISS].indexOf(s.Type)>-1&&(s.TargetMode="External"),e["!id"][s.Id])throw new Error("Cannot rewrite rId "+t);return e["!id"][s.Id]=s,e[("/"+s.Target).replace("//","/")]=s,t}var Gwe="application/vnd.oasis.opendocument.spreadsheet";function Kwe(e,t){for(var r=fA(e),n,s;n=P1.exec(r);)switch(n[3]){case"manifest":break;case"file-entry":if(s=Vr(n[0],!1),s.path=="/"&&s.type!==Gwe)throw new Error("This OpenDocument is not a spreadsheet");break;case"encryption-data":case"algorithm":case"start-key-generation":case"key-derivation":throw new Error("Unsupported ODS Encryption");default:if(t&&t.WTF)throw n}}function Xwe(e){var t=[Es];t.push(`<manifest:manifest xmlns:manifest="urn:oasis:names:tc:opendocument:xmlns:manifest:1.0" manifest:version="1.2">
`),t.push(`  <manifest:file-entry manifest:full-path="/" manifest:version="1.2" manifest:media-type="application/vnd.oasis.opendocument.spreadsheet"/>
`);for(var r=0;r<e.length;++r)t.push('  <manifest:file-entry manifest:full-path="'+e[r][0]+'" manifest:media-type="'+e[r][1]+`"/>
`);return t.push("</manifest:manifest>"),t.join("")}function f8(e,t,r){return['  <rdf:Description rdf:about="'+e+`">
`,'    <rdf:type rdf:resource="http://docs.oasis-open.org/ns/office/1.2/meta/'+(r||"odf")+"#"+t+`"/>
`,`  </rdf:Description>
`].join("")}function Ywe(e,t){return['  <rdf:Description rdf:about="'+e+`">
`,'    <ns0:hasPart xmlns:ns0="http://docs.oasis-open.org/ns/office/1.2/meta/pkg#" rdf:resource="'+t+`"/>
`,`  </rdf:Description>
`].join("")}function Qwe(e){var t=[Es];t.push(`<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#">
`);for(var r=0;r!=e.length;++r)t.push(f8(e[r][0],e[r][1])),t.push(Ywe("",e[r][0]));return t.push(f8("","Document","pkg")),t.push("</rdf:RDF>"),t.join("")}function r$(){return'<office:document-meta xmlns:office="urn:oasis:names:tc:opendocument:xmlns:office:1.0" xmlns:meta="urn:oasis:names:tc:opendocument:xmlns:meta:1.0" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:xlink="http://www.w3.org/1999/xlink" office:version="1.2"><office:meta><meta:generator>SheetJS '+Jw.version+"</meta:generator></office:meta></office:document-meta>"}var mc=[["cp:category","Category"],["cp:contentStatus","ContentStatus"],["cp:keywords","Keywords"],["cp:lastModifiedBy","LastAuthor"],["cp:lastPrinted","LastPrinted"],["cp:revision","RevNumber"],["cp:version","Version"],["dc:creator","Author"],["dc:description","Comments"],["dc:identifier","Identifier"],["dc:language","Language"],["dc:subject","Subject"],["dc:title","Title"],["dcterms:created","CreatedDate","date"],["dcterms:modified","ModifiedDate","date"]],Jwe=function(){for(var e=new Array(mc.length),t=0;t<mc.length;++t){var r=mc[t],n="(?:"+r[0].slice(0,r[0].indexOf(":"))+":)"+r[0].slice(r[0].indexOf(":")+1);e[t]=new RegExp("<"+n+"[^>]*>([\\s\\S]*?)</"+n+">")}return e}();function n$(e){var t={};e=ua(e);for(var r=0;r<mc.length;++r){var n=mc[r],s=e.match(Jwe[r]);s!=null&&s.length>0&&(t[n[1]]=Mn(s[1])),n[2]==="date"&&t[n[1]]&&(t[n[1]]=Da(t[n[1]]))}return t}function o4(e,t,r,n,s){s[e]!=null||t==null||t===""||(s[e]=t,t=na(t),n[n.length]=r?Zt(e,t,r):Ii(e,t))}function a$(e,t){var r=t||{},n=[Es,Zt("cp:coreProperties",null,{"xmlns:cp":ti.CORE_PROPS,"xmlns:dc":ti.dc,"xmlns:dcterms":ti.dcterms,"xmlns:dcmitype":ti.dcmitype,"xmlns:xsi":ti.xsi})],s={};if(!e&&!r.Props)return n.join("");e&&(e.CreatedDate!=null&&o4("dcterms:created",typeof e.CreatedDate=="string"?e.CreatedDate:vS(e.CreatedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s),e.ModifiedDate!=null&&o4("dcterms:modified",typeof e.ModifiedDate=="string"?e.ModifiedDate:vS(e.ModifiedDate,r.WTF),{"xsi:type":"dcterms:W3CDTF"},n,s));for(var i=0;i!=mc.length;++i){var o=mc[i],l=r.Props&&r.Props[o[1]]!=null?r.Props[o[1]]:e?e[o[1]]:null;l===!0?l="1":l===!1?l="0":typeof l=="number"&&(l=String(l)),l!=null&&o4(o[0],l,null,n,s)}return n.length>2&&(n[n.length]="</cp:coreProperties>",n[1]=n[1].replace("/>",">")),n.join("")}var Lh=[["Application","Application","string"],["AppVersion","AppVersion","string"],["Company","Company","string"],["DocSecurity","DocSecurity","string"],["Manager","Manager","string"],["HyperlinksChanged","HyperlinksChanged","bool"],["SharedDoc","SharedDoc","bool"],["LinksUpToDate","LinksUpToDate","bool"],["ScaleCrop","ScaleCrop","bool"],["HeadingPairs","HeadingPairs","raw"],["TitlesOfParts","TitlesOfParts","raw"]],s$=["Worksheets","SheetNames","NamedRanges","DefinedNames","Chartsheets","ChartNames"];function i$(e,t,r,n){var s=[];if(typeof e=="string")s=r8(e,n);else for(var i=0;i<e.length;++i)s=s.concat(e[i].map(function(f){return{v:f}}));var o=typeof t=="string"?r8(t,n).map(function(f){return f.v}):t,l=0,c=0;if(o.length>0)for(var d=0;d!==s.length;d+=2){switch(c=+s[d+1].v,s[d].v){case"Worksheets":case"":case"":case" ":case"":case" ":case"Arbeitsbltter":case"alma Sayfalar":case"Feuilles de calcul":case"Fogli di lavoro":case"Folhas de clculo":case"Planilhas":case"Regneark":case"Hojas de clculo":case"Werkbladen":r.Worksheets=c,r.SheetNames=o.slice(l,l+c);break;case"Named Ranges":case"Rangos con nombre":case"":case"Benannte Bereiche":case"Navngivne omrder":r.NamedRanges=c,r.DefinedNames=o.slice(l,l+c);break;case"Charts":case"Diagramme":r.Chartsheets=c,r.ChartNames=o.slice(l,l+c);break}l+=c}}function Zwe(e,t,r){var n={};return t||(t={}),e=ua(e),Lh.forEach(function(s){var i=(e.match(T1(s[0]))||[])[1];switch(s[2]){case"string":i&&(t[s[1]]=Mn(i));break;case"bool":t[s[1]]=i==="true";break;case"raw":var o=e.match(new RegExp("<"+s[0]+"[^>]*>([\\s\\S]*?)</"+s[0]+">"));o&&o.length>0&&(n[s[1]]=o[1]);break}}),n.HeadingPairs&&n.TitlesOfParts&&i$(n.HeadingPairs,n.TitlesOfParts,t,r),t}function o$(e){var t=[],r=Zt;return e||(e={}),e.Application="SheetJS",t[t.length]=Es,t[t.length]=Zt("Properties",null,{xmlns:ti.EXT_PROPS,"xmlns:vt":ti.vt}),Lh.forEach(function(n){if(e[n[1]]!==void 0){var s;switch(n[2]){case"string":s=na(String(e[n[1]]));break;case"bool":s=e[n[1]]?"true":"false";break}s!==void 0&&(t[t.length]=r(n[0],s))}}),t[t.length]=r("HeadingPairs",r("vt:vector",r("vt:variant","<vt:lpstr>Worksheets</vt:lpstr>")+r("vt:variant",r("vt:i4",String(e.Worksheets))),{size:2,baseType:"variant"})),t[t.length]=r("TitlesOfParts",r("vt:vector",e.SheetNames.map(function(n){return"<vt:lpstr>"+na(n)+"</vt:lpstr>"}).join(""),{size:e.Worksheets,baseType:"lpstr"})),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var e5e=/<[^>]+>[^<]*/g;function t5e(e,t){var r={},n="",s=e.match(e5e);if(s)for(var i=0;i!=s.length;++i){var o=s[i],l=Vr(o);switch(l[0]){case"<?xml":break;case"<Properties":break;case"<property":n=Mn(l.name);break;case"</property>":n=null;break;default:if(o.indexOf("<vt:")===0){var c=o.split(">"),d=c[0].slice(4),f=c[1];switch(d){case"lpstr":case"bstr":case"lpwstr":r[n]=Mn(f);break;case"bool":r[n]=Oa(f);break;case"i1":case"i2":case"i4":case"i8":case"int":case"uint":r[n]=parseInt(f,10);break;case"r4":case"r8":case"decimal":r[n]=parseFloat(f);break;case"filetime":case"date":r[n]=Da(f);break;case"cy":case"error":r[n]=Mn(f);break;default:if(d.slice(-1)=="/")break;t.WTF&&typeof console<"u"&&console.warn("Unexpected",o,d,c)}}else if(o.slice(0,2)!=="</"){if(t.WTF)throw new Error(o)}}}return r}function l$(e){var t=[Es,Zt("Properties",null,{xmlns:ti.CUST_PROPS,"xmlns:vt":ti.vt})];if(!e)return t.join("");var r=1;return xs(e).forEach(function(s){++r,t[t.length]=Zt("property",dwe(e[s]),{fmtid:"{D5CDD505-2E9C-101B-9397-08002B2CF9AE}",pid:r,name:na(s)})}),t.length>2&&(t[t.length]="</Properties>",t[1]=t[1].replace("/>",">")),t.join("")}var jS={Title:"Title",Subject:"Subject",Author:"Author",Keywords:"Keywords",Comments:"Description",LastAuthor:"LastAuthor",RevNumber:"Revision",Application:"AppName",LastPrinted:"LastPrinted",CreatedDate:"Created",ModifiedDate:"LastSaved",Category:"Category",Manager:"Manager",Company:"Company",AppVersion:"Version",ContentStatus:"ContentStatus",Identifier:"Identifier",Language:"Language"},l4;function r5e(e,t,r){l4||(l4=CN(jS)),t=l4[t]||t,e[t]=r}function n5e(e,t){var r=[];return xs(jS).map(function(n){for(var s=0;s<mc.length;++s)if(mc[s][1]==n)return mc[s];for(s=0;s<Lh.length;++s)if(Lh[s][1]==n)return Lh[s];throw n}).forEach(function(n){if(e[n[1]]!=null){var s=t&&t.Props&&t.Props[n[1]]!=null?t.Props[n[1]]:e[n[1]];switch(n[2]){case"date":s=new Date(s).toISOString().replace(/\.\d*Z/,"Z");break}typeof s=="number"?s=String(s):s===!0||s===!1?s=s?"1":"0":s instanceof Date&&(s=new Date(s).toISOString().replace(/\.\d*Z/,"")),r.push(Ii(jS[n[1]]||n[1],s))}}),Zt("DocumentProperties",r.join(""),{xmlns:Al.o})}function a5e(e,t){var r=["Worksheets","SheetNames"],n="CustomDocumentProperties",s=[];return e&&xs(e).forEach(function(i){if(Object.prototype.hasOwnProperty.call(e,i)){for(var o=0;o<mc.length;++o)if(i==mc[o][1])return;for(o=0;o<Lh.length;++o)if(i==Lh[o][1])return;for(o=0;o<r.length;++o)if(i==r[o])return;var l=e[i],c="string";typeof l=="number"?(c="float",l=String(l)):l===!0||l===!1?(c="boolean",l=l?"1":"0"):l=String(l),s.push(Zt(JI(i),l,{"dt:dt":c}))}}),t&&xs(t).forEach(function(i){if(Object.prototype.hasOwnProperty.call(t,i)&&!(e&&Object.prototype.hasOwnProperty.call(e,i))){var o=t[i],l="string";typeof o=="number"?(l="float",o=String(o)):o===!0||o===!1?(l="boolean",o=o?"1":"0"):o instanceof Date?(l="dateTime.tz",o=o.toISOString()):o=String(o),s.push(Zt(JI(i),o,{"dt:dt":l}))}}),"<"+n+' xmlns="'+Al.o+'">'+s.join("")+"</"+n+">"}function jA(e){var t=e.read_shift(4),r=e.read_shift(4);return new Date((r/1e7*Math.pow(2,32)+t/1e7-11644473600)*1e3).toISOString().replace(/\.000/,"")}function s5e(e){var t=typeof e=="string"?new Date(Date.parse(e)):e,r=t.getTime()/1e3+11644473600,n=r%Math.pow(2,32),s=(r-n)/Math.pow(2,32);n*=1e7,s*=1e7;var i=n/Math.pow(2,32)|0;i>0&&(n=n%Math.pow(2,32),s+=i);var o=jt(8);return o.write_shift(4,n),o.write_shift(4,s),o}function c$(e,t,r){var n=e.l,s=e.read_shift(0,"lpstr-cp");if(r)for(;e.l-n&3;)++e.l;return s}function d$(e,t,r){var n=e.read_shift(0,"lpwstr");return n}function u$(e,t,r){return t===31?d$(e):c$(e,t,r)}function kS(e,t,r){return u$(e,t,r===!1?0:4)}function i5e(e,t){if(!t)throw new Error("VtUnalignedString must have positive length");return u$(e,t,0)}function o5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n){var s=e.l;r[n]=e.read_shift(0,"lpwstr").replace(To,""),e.l-s&2&&(e.l+=2)}return r}function l5e(e){for(var t=e.read_shift(4),r=[],n=0;n!=t;++n)r[n]=e.read_shift(0,"lpstr-cp").replace(To,"");return r}function c5e(e){var t=e.l,r=o5(e,ZB);e[e.l]==0&&e[e.l+1]==0&&e.l-t&2&&(e.l+=2);var n=o5(e,Yo);return[r,n]}function d5e(e){for(var t=e.read_shift(4),r=[],n=0;n<t/2;++n)r.push(c5e(e));return r}function h8(e,t){for(var r=e.read_shift(4),n={},s=0;s!=r;++s){var i=e.read_shift(4),o=e.read_shift(4);n[i]=e.read_shift(o,t===1200?"utf16le":"utf8").replace(To,"").replace(Qg,"!"),t===1200&&o%2&&(e.l+=2)}return e.l&3&&(e.l=e.l>>3<<2),n}function f$(e){var t=e.read_shift(4),r=e.slice(e.l,e.l+t);return e.l+=t,(t&3)>0&&(e.l+=4-(t&3)&3),r}function u5e(e){var t={};return t.Size=e.read_shift(4),e.l+=t.Size+3-(t.Size-1)%4,t}function o5(e,t,r){var n=e.read_shift(2),s,i=r||{};if(e.l+=2,t!==d8&&n!==t&&zwe.indexOf(t)===-1&&!((t&65534)==4126&&(n&65534)==4126))throw new Error("Expected type "+t+" saw "+n);switch(t===d8?n:t){case 2:return s=e.read_shift(2,"i"),i.raw||(e.l+=2),s;case 3:return s=e.read_shift(4,"i"),s;case 11:return e.read_shift(4)!==0;case 19:return s=e.read_shift(4),s;case 30:return c$(e,n,4).replace(To,"");case 31:return d$(e);case 64:return jA(e);case 65:return f$(e);case 71:return u5e(e);case 80:return kS(e,n,!i.raw).replace(To,"");case 81:return i5e(e,n).replace(To,"");case 4108:return d5e(e);case 4126:case 4127:return n==4127?o5e(e):l5e(e);default:throw new Error("TypedPropertyValue unrecognized type "+t+" "+n)}}function p8(e,t){var r=jt(4),n=jt(4);switch(r.write_shift(4,e==80?31:e),e){case 3:n.write_shift(-4,t);break;case 5:n=jt(8),n.write_shift(8,t,"f");break;case 11:n.write_shift(4,t?1:0);break;case 64:n=s5e(t);break;case 31:case 80:for(n=jt(4+2*(t.length+1)+(t.length%2?0:2)),n.write_shift(4,t.length+1),n.write_shift(0,t,"dbcs");n.l!=n.length;)n.write_shift(1,0);break;default:throw new Error("TypedPropertyValue unrecognized type "+e+" "+t)}return yi([r,n])}function m8(e,t){var r=e.l,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0,l=0,c=-1,d={};for(o=0;o!=s;++o){var f=e.read_shift(4),u=e.read_shift(4);i[o]=[f,u+r]}i.sort(function(b,w){return b[1]-w[1]});var p={};for(o=0;o!=s;++o){if(e.l!==i[o][1]){var h=!0;if(o>0&&t)switch(t[i[o-1][0]].t){case 2:e.l+2===i[o][1]&&(e.l+=2,h=!1);break;case 80:e.l<=i[o][1]&&(e.l=i[o][1],h=!1);break;case 4108:e.l<=i[o][1]&&(e.l=i[o][1],h=!1);break}if((!t||o==0)&&e.l<=i[o][1]&&(h=!1,e.l=i[o][1]),h)throw new Error("Read Error: Expected address "+i[o][1]+" at "+e.l+" :"+o)}if(t){var m=t[i[o][0]];if(p[m.n]=o5(e,m.t,{raw:!0}),m.p==="version"&&(p[m.n]=String(p[m.n]>>16)+"."+("0000"+String(p[m.n]&65535)).slice(-4)),m.n=="CodePage")switch(p[m.n]){case 0:p[m.n]=1252;case 874:case 932:case 936:case 949:case 950:case 1250:case 1251:case 1253:case 1254:case 1255:case 1256:case 1257:case 1258:case 1e4:case 1200:case 1201:case 1252:case 65e3:case-536:case 65001:case-535:Jc(l=p[m.n]>>>0&65535);break;default:throw new Error("Unsupported CodePage: "+p[m.n])}}else if(i[o][0]===1){if(l=p.CodePage=o5(e,wA),Jc(l),c!==-1){var g=e.l;e.l=i[c][1],d=h8(e,l),e.l=g}}else if(i[o][0]===0){if(l===0){c=o,e.l=i[o+1][1];continue}d=h8(e,l)}else{var x=d[i[o][0]],v;switch(e[e.l]){case 65:e.l+=4,v=f$(e);break;case 30:e.l+=4,v=kS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 31:e.l+=4,v=kS(e,e[e.l-4]).replace(/\u0000+$/,"");break;case 3:e.l+=4,v=e.read_shift(4,"i");break;case 19:e.l+=4,v=e.read_shift(4);break;case 5:e.l+=4,v=e.read_shift(8,"f");break;case 11:e.l+=4,v=ws(e,4);break;case 64:e.l+=4,v=Da(jA(e));break;default:throw new Error("unparsed value: "+e[e.l])}p[x]=v}}return e.l=r+n,p}var h$=["CodePage","Thumbnail","_PID_LINKBASE","_PID_HLINKS","SystemIdentifier","FMTID"];function f5e(e){switch(typeof e){case"boolean":return 11;case"number":return(e|0)==e?3:5;case"string":return 31;case"object":if(e instanceof Date)return 64;break}return-1}function x8(e,t,r){var n=jt(8),s=[],i=[],o=8,l=0,c=jt(8),d=jt(8);if(c.write_shift(4,2),c.write_shift(4,1200),d.write_shift(4,1),i.push(c),s.push(d),o+=8+c.length,!t){d=jt(8),d.write_shift(4,0),s.unshift(d);var f=[jt(4)];for(f[0].write_shift(4,e.length),l=0;l<e.length;++l){var u=e[l][0];for(c=jt(8+2*(u.length+1)+(u.length%2?0:2)),c.write_shift(4,l+2),c.write_shift(4,u.length+1),c.write_shift(0,u,"dbcs");c.l!=c.length;)c.write_shift(1,0);f.push(c)}c=yi(f),i.unshift(c),o+=8+c.length}for(l=0;l<e.length;++l)if(!(t&&!t[e[l][0]])&&!(h$.indexOf(e[l][0])>-1||s$.indexOf(e[l][0])>-1)&&e[l][1]!=null){var p=e[l][1],h=0;if(t){h=+t[e[l][0]];var m=r[h];if(m.p=="version"&&typeof p=="string"){var g=p.split(".");p=(+g[0]<<16)+(+g[1]||0)}c=p8(m.t,p)}else{var x=f5e(p);x==-1&&(x=31,p=String(p)),c=p8(x,p)}i.push(c),d=jt(8),d.write_shift(4,t?h:2+l),s.push(d),o+=8+c.length}var v=8*(i.length+1);for(l=0;l<i.length;++l)s[l].write_shift(4,v),v+=i[l].length;return n.write_shift(4,o),n.write_shift(4,i.length),yi([n].concat(s).concat(i))}function g8(e,t,r){var n=e.content;if(!n)return{};Pi(n,0);var s,i,o,l,c=0;n.chk("feff","Byte Order: "),n.read_shift(2);var d=n.read_shift(4),f=n.read_shift(16);if(f!==Or.utils.consts.HEADER_CLSID&&f!==r)throw new Error("Bad PropertySet CLSID "+f);if(s=n.read_shift(4),s!==1&&s!==2)throw new Error("Unrecognized #Sets: "+s);if(i=n.read_shift(16),l=n.read_shift(4),s===1&&l!==n.l)throw new Error("Length mismatch: "+l+" !== "+n.l);s===2&&(o=n.read_shift(16),c=n.read_shift(4));var u=m8(n,t),p={SystemIdentifier:d};for(var h in u)p[h]=u[h];if(p.FMTID=i,s===1)return p;if(c-n.l==2&&(n.l+=2),n.l!==c)throw new Error("Length mismatch 2: "+n.l+" !== "+c);var m;try{m=m8(n,null)}catch{}for(h in m)p[h]=m[h];return p.FMTID=[i,o],p}function v8(e,t,r,n,s,i){var o=jt(s?68:48),l=[o];o.write_shift(2,65534),o.write_shift(2,0),o.write_shift(4,842412599),o.write_shift(16,Or.utils.consts.HEADER_CLSID,"hex"),o.write_shift(4,s?2:1),o.write_shift(16,t,"hex"),o.write_shift(4,s?68:48);var c=x8(e,r,n);if(l.push(c),s){var d=x8(s,null,null);o.write_shift(16,i,"hex"),o.write_shift(4,68+c.length),l.push(d)}return yi(l)}function bf(e,t){return e.read_shift(t),null}function h5e(e,t){t||(t=jt(e));for(var r=0;r<e;++r)t.write_shift(1,0);return t}function p5e(e,t,r){for(var n=[],s=e.l+t;e.l<s;)n.push(r(e,s-e.l));if(s!==e.l)throw new Error("Slurp error");return n}function ws(e,t){return e.read_shift(t)===1}function So(e,t){return t||(t=jt(2)),t.write_shift(2,+!!e),t}function Bs(e){return e.read_shift(2,"u")}function sc(e,t){return t||(t=jt(2)),t.write_shift(2,e),t}function p$(e,t){return p5e(e,t,Bs)}function m5e(e){var t=e.read_shift(1),r=e.read_shift(1);return r===1?t:t===1}function m$(e,t,r){return r||(r=jt(2)),r.write_shift(1,t=="e"?+e:+!!e),r.write_shift(1,t=="e"?1:0),r}function db(e,t,r){var n=e.read_shift(r&&r.biff>=12?2:1),s="sbcs-cont";if(r&&r.biff>=8,!r||r.biff==8){var i=e.read_shift(1);i&&(s="dbcs-cont")}else r.biff==12&&(s="wstr");r.biff>=2&&r.biff<=5&&(s="cpstr");var o=n?e.read_shift(n,s):"";return o}function x5e(e){var t=e.read_shift(2),r=e.read_shift(1),n=r&4,s=r&8,i=1+(r&1),o=0,l,c={};s&&(o=e.read_shift(2)),n&&(l=e.read_shift(4));var d=i==2?"dbcs-cont":"sbcs-cont",f=t===0?"":e.read_shift(t,d);return s&&(e.l+=4*o),n&&(e.l+=l),c.t=f,s||(c.raw="<t>"+c.t+"</t>",c.r=c.t),c}function g5e(e){var t=e.t||"",r=jt(3);r.write_shift(2,t.length),r.write_shift(1,1);var n=jt(2*t.length);n.write_shift(2*t.length,t,"utf16le");var s=[r,n];return yi(s)}function rp(e,t,r){var n;if(r){if(r.biff>=2&&r.biff<=5)return e.read_shift(t,"cpstr");if(r.biff>=12)return e.read_shift(t,"dbcs-cont")}var s=e.read_shift(1);return s===0?n=e.read_shift(t,"sbcs-cont"):n=e.read_shift(t,"dbcs-cont"),n}function ub(e,t,r){var n=e.read_shift(r&&r.biff==2?1:2);return n===0?(e.l++,""):rp(e,n,r)}function gp(e,t,r){if(r.biff>5)return ub(e,t,r);var n=e.read_shift(1);return n===0?(e.l++,""):e.read_shift(n,r.biff<=4||!e.lens?"cpstr":"sbcs-cont")}function x$(e,t,r){return r||(r=jt(3+2*e.length)),r.write_shift(2,e.length),r.write_shift(1,1),r.write_shift(31,e,"utf16le"),r}function v5e(e){var t=e.read_shift(1);e.l++;var r=e.read_shift(2);return e.l+=2,[t,r]}function b5e(e){var t=e.read_shift(4),r=e.l,n=!1;t>24&&(e.l+=t-24,e.read_shift(16)==="795881f43b1d7f48af2c825dc4852763"&&(n=!0),e.l=r);var s=e.read_shift((n?t-24:t)>>1,"utf16le").replace(To,"");return n&&(e.l+=24),s}function y5e(e){for(var t=e.read_shift(2),r="";t-- >0;)r+="../";var n=e.read_shift(0,"lpstr-ansi");if(e.l+=2,e.read_shift(2)!=57005)throw new Error("Bad FileMoniker");var s=e.read_shift(4);if(s===0)return r+n.replace(/\\/g,"/");var i=e.read_shift(4);if(e.read_shift(2)!=3)throw new Error("Bad FileMoniker");var o=e.read_shift(i>>1,"utf16le").replace(To,"");return r+o}function w5e(e,t){var r=e.read_shift(16);switch(r){case"e0c9ea79f9bace118c8200aa004ba90b":return b5e(e);case"0303000000000000c000000000000046":return y5e(e);default:throw new Error("Unsupported Moniker "+r)}}function Dy(e){var t=e.read_shift(4),r=t>0?e.read_shift(t,"utf16le").replace(To,""):"";return r}function b8(e,t){t||(t=jt(6+e.length*2)),t.write_shift(4,1+e.length);for(var r=0;r<e.length;++r)t.write_shift(2,e.charCodeAt(r));return t.write_shift(2,0),t}function N5e(e,t){var r=e.l+t,n=e.read_shift(4);if(n!==2)throw new Error("Unrecognized streamVersion: "+n);var s=e.read_shift(2);e.l+=2;var i,o,l,c,d="",f,u;s&16&&(i=Dy(e,r-e.l)),s&128&&(o=Dy(e,r-e.l)),(s&257)===257&&(l=Dy(e,r-e.l)),(s&257)===1&&(c=w5e(e,r-e.l)),s&8&&(d=Dy(e,r-e.l)),s&32&&(f=e.read_shift(16)),s&64&&(u=jA(e)),e.l=r;var p=o||l||c||"";p&&d&&(p+="#"+d),p||(p="#"+d),s&2&&p.charAt(0)=="/"&&p.charAt(1)!="/"&&(p="file://"+p);var h={Target:p};return f&&(h.guid=f),u&&(h.time=u),i&&(h.Tooltip=i),h}function j5e(e){var t=jt(512),r=0,n=e.Target;n.slice(0,7)=="file://"&&(n=n.slice(7));var s=n.indexOf("#"),i=s>-1?31:23;switch(n.charAt(0)){case"#":i=28;break;case".":i&=-3;break}t.write_shift(4,2),t.write_shift(4,i);var o=[8,6815827,6619237,4849780,83];for(r=0;r<o.length;++r)t.write_shift(4,o[r]);if(i==28)n=n.slice(1),b8(n,t);else if(i&2){for(o="e0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));var l=s>-1?n.slice(0,s):n;for(t.write_shift(4,2*(l.length+1)),r=0;r<l.length;++r)t.write_shift(2,l.charCodeAt(r));t.write_shift(2,0),i&8&&b8(s>-1?n.slice(s+1):"",t)}else{for(o="03 03 00 00 00 00 00 00 c0 00 00 00 00 00 00 46".split(" "),r=0;r<o.length;++r)t.write_shift(1,parseInt(o[r],16));for(var c=0;n.slice(c*3,c*3+3)=="../"||n.slice(c*3,c*3+3)=="..\\";)++c;for(t.write_shift(2,c),t.write_shift(4,n.length-3*c+1),r=0;r<n.length-3*c;++r)t.write_shift(1,n.charCodeAt(r+3*c)&255);for(t.write_shift(1,0),t.write_shift(2,65535),t.write_shift(2,57005),r=0;r<6;++r)t.write_shift(4,0)}return t.slice(0,t.l)}function g$(e){var t=e.read_shift(1),r=e.read_shift(1),n=e.read_shift(1),s=e.read_shift(1);return[t,r,n,s]}function v$(e,t){var r=g$(e);return r[3]=0,r}function eu(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return{r:t,c:r,ixfe:n}}function np(e,t,r,n){return n||(n=jt(6)),n.write_shift(2,e),n.write_shift(2,t),n.write_shift(2,r||0),n}function k5e(e){var t=e.read_shift(2),r=e.read_shift(2);return e.l+=8,{type:t,flags:r}}function S5e(e,t,r){return t===0?"":gp(e,t,r)}function _5e(e,t,r){var n=r.biff>8?4:2,s=e.read_shift(n),i=e.read_shift(n,"i"),o=e.read_shift(n,"i");return[s,i,o]}function b$(e){var t=e.read_shift(2),r=yA(e);return[t,r]}function A5e(e,t,r){e.l+=4,t-=4;var n=e.l+t,s=db(e,t,r),i=e.read_shift(2);if(n-=e.l,i!==n)throw new Error("Malformed AddinUdf: padding = "+n+" != "+i);return e.l+=i,s}function ON(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2);return{s:{c:n,r:t},e:{c:s,r}}}function y$(e,t){return t||(t=jt(8)),t.write_shift(2,e.s.r),t.write_shift(2,e.e.r),t.write_shift(2,e.s.c),t.write_shift(2,e.e.c),t}function w$(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(1),s=e.read_shift(1);return{s:{c:n,r:t},e:{c:s,r}}}var C5e=w$;function N$(e){e.l+=4;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2);return e.l+=12,[r,t,n]}function E5e(e){var t={};return e.l+=4,e.l+=16,t.fSharedNote=e.read_shift(2),e.l+=4,t}function T5e(e){var t={};return e.l+=4,e.cf=e.read_shift(2),t}function Ki(e){e.l+=2,e.l+=e.read_shift(2)}var O5e={0:Ki,4:Ki,5:Ki,6:Ki,7:T5e,8:Ki,9:Ki,10:Ki,11:Ki,12:Ki,13:E5e,14:Ki,15:Ki,16:Ki,17:Ki,18:Ki,19:Ki,20:Ki,21:N$};function P5e(e,t){for(var r=e.l+t,n=[];e.l<r;){var s=e.read_shift(2);e.l-=2;try{n.push(O5e[s](e,r-e.l))}catch{return e.l=r,n}}return e.l!=r&&(e.l=r),n}function Ly(e,t){var r={BIFFVer:0,dt:0};switch(r.BIFFVer=e.read_shift(2),t-=2,t>=2&&(r.dt=e.read_shift(2),e.l-=2),r.BIFFVer){case 1536:case 1280:case 1024:case 768:case 512:case 2:case 7:break;default:if(t>6)throw new Error("Unexpected BIFF Ver "+r.BIFFVer)}return e.read_shift(t),r}function kA(e,t,r){var n=1536,s=16;switch(r.bookType){case"biff8":break;case"biff5":n=1280,s=8;break;case"biff4":n=4,s=6;break;case"biff3":n=3,s=6;break;case"biff2":n=2,s=4;break;case"xla":break;default:throw new Error("unsupported BIFF version")}var i=jt(s);return i.write_shift(2,n),i.write_shift(2,t),s>4&&i.write_shift(2,29282),s>6&&i.write_shift(2,1997),s>8&&(i.write_shift(2,49161),i.write_shift(2,1),i.write_shift(2,1798),i.write_shift(2,0)),i}function I5e(e,t){return t===0||e.read_shift(2),1200}function D5e(e,t,r){if(r.enc)return e.l+=t,"";var n=e.l,s=gp(e,0,r);return e.read_shift(t+n-e.l),s}function L5e(e,t){var r=!t||t.biff==8,n=jt(r?112:54);for(n.write_shift(t.biff==8?2:1,7),r&&n.write_shift(1,0),n.write_shift(4,859007059),n.write_shift(4,5458548|(r?0:536870912));n.l<n.length;)n.write_shift(1,r?0:32);return n}function F5e(e,t,r){var n=r&&r.biff==8||t==2?e.read_shift(2):(e.l+=t,0);return{fDialog:n&16,fBelow:n&64,fRight:n&128}}function M5e(e,t,r){var n=e.read_shift(4),s=e.read_shift(1)&3,i=e.read_shift(1);switch(i){case 0:i="Worksheet";break;case 1:i="Macrosheet";break;case 2:i="Chartsheet";break;case 6:i="VBAModule";break}var o=db(e,0,r);return o.length===0&&(o="Sheet1"),{pos:n,hs:s,dt:i,name:o}}function R5e(e,t){var r=!t||t.biff>=8?2:1,n=jt(8+r*e.name.length);n.write_shift(4,e.pos),n.write_shift(1,e.hs||0),n.write_shift(1,e.dt),n.write_shift(1,e.name.length),t.biff>=8&&n.write_shift(1,1),n.write_shift(r*e.name.length,e.name,t.biff<8?"sbcs":"utf16le");var s=n.slice(0,n.l);return s.l=n.l,s}function B5e(e,t){for(var r=e.l+t,n=e.read_shift(4),s=e.read_shift(4),i=[],o=0;o!=s&&e.l<r;++o)i.push(x5e(e));return i.Count=n,i.Unique=s,i}function $5e(e,t){var r=jt(8);r.write_shift(4,e.Count),r.write_shift(4,e.Unique);for(var n=[],s=0;s<e.length;++s)n[s]=g5e(e[s]);var i=yi([r].concat(n));return i.parts=[r.length].concat(n.map(function(o){return o.length})),i}function U5e(e,t){var r={};return r.dsst=e.read_shift(2),e.l+=t-2,r}function z5e(e){var t={};t.r=e.read_shift(2),t.c=e.read_shift(2),t.cnt=e.read_shift(2)-t.c;var r=e.read_shift(2);e.l+=4;var n=e.read_shift(1);return e.l+=3,n&7&&(t.level=n&7),n&32&&(t.hidden=!0),n&64&&(t.hpt=r/20),t}function q5e(e){var t=k5e(e);if(t.type!=2211)throw new Error("Invalid Future Record "+t.type);var r=e.read_shift(4);return r!==0}function H5e(e){return e.read_shift(2),e.read_shift(4)}function y8(e,t,r){var n=0;r&&r.biff==2||(n=e.read_shift(2));var s=e.read_shift(2);r&&r.biff==2&&(n=1-(s>>15),s&=32767);var i={Unsynced:n&1,DyZero:(n&2)>>1,ExAsc:(n&4)>>2,ExDsc:(n&8)>>3};return[i,s]}function W5e(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=e.read_shift(2),c=e.read_shift(2),d=e.read_shift(2);return{Pos:[t,r],Dim:[n,s],Flags:i,CurTab:o,FirstTab:l,Selected:c,TabRatio:d}}function V5e(){var e=jt(18);return e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,29280),e.write_shift(2,17600),e.write_shift(2,56),e.write_shift(2,0),e.write_shift(2,0),e.write_shift(2,1),e.write_shift(2,500),e}function G5e(e,t,r){if(r&&r.biff>=2&&r.biff<5)return{};var n=e.read_shift(2);return{RTL:n&64}}function K5e(e){var t=jt(18),r=1718;return e&&e.RTL&&(r|=64),t.write_shift(2,r),t.write_shift(4,0),t.write_shift(4,64),t.write_shift(4,0),t.write_shift(4,0),t}function X5e(){}function Y5e(e,t,r){var n={dyHeight:e.read_shift(2),fl:e.read_shift(2)};switch(r&&r.biff||8){case 2:break;case 3:case 4:e.l+=2;break;default:e.l+=10;break}return n.name=db(e,0,r),n}function Q5e(e,t){var r=e.name||"Arial",n=t&&t.biff==5,s=n?15+r.length:16+2*r.length,i=jt(s);return i.write_shift(2,e.sz*20),i.write_shift(4,0),i.write_shift(2,400),i.write_shift(4,0),i.write_shift(2,0),i.write_shift(1,r.length),n||i.write_shift(1,1),i.write_shift((n?1:2)*r.length,r,n?"sbcs":"utf16le"),i}function J5e(e){var t=eu(e);return t.isst=e.read_shift(4),t}function Z5e(e,t,r,n){var s=jt(10);return np(e,t,n,s),s.write_shift(4,r),s}function eNe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=e.l+t,s=eu(e);r.biff==2&&e.l++;var i=ub(e,n-e.l,r);return s.val=i,s}function tNe(e,t,r,n,s){var i=!s||s.biff==8,o=jt(8+ +i+(1+i)*r.length);return np(e,t,n,o),o.write_shift(2,r.length),i&&o.write_shift(1,1),o.write_shift((1+i)*r.length,r,i?"utf16le":"sbcs"),o}function rNe(e,t,r){var n=e.read_shift(2),s=gp(e,0,r);return[n,s]}function nNe(e,t,r,n){var s=r&&r.biff==5;n||(n=jt(s?3+t.length:5+2*t.length)),n.write_shift(2,e),n.write_shift(s?1:2,t.length),s||n.write_shift(1,1),n.write_shift((s?1:2)*t.length,t,s?"sbcs":"utf16le");var i=n.length>n.l?n.slice(0,n.l):n;return i.l==null&&(i.l=i.length),i}var aNe=gp;function w8(e,t,r){var n=e.l+t,s=r.biff==8||!r.biff?4:2,i=e.read_shift(s),o=e.read_shift(s),l=e.read_shift(2),c=e.read_shift(2);return e.l=n,{s:{r:i,c:l},e:{r:o,c}}}function sNe(e,t){var r=t.biff==8||!t.biff?4:2,n=jt(2*r+6);return n.write_shift(r,e.s.r),n.write_shift(r,e.e.r+1),n.write_shift(2,e.s.c),n.write_shift(2,e.e.c+1),n.write_shift(2,0),n}function iNe(e){var t=e.read_shift(2),r=e.read_shift(2),n=b$(e);return{r:t,c:r,ixfe:n[0],rknum:n[1]}}function oNe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(b$(e));if(e.l!==r)throw new Error("MulRK read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulRK length mismatch");return{r:n,c:s,C:o,rkrec:i}}function lNe(e,t){for(var r=e.l+t-2,n=e.read_shift(2),s=e.read_shift(2),i=[];e.l<r;)i.push(e.read_shift(2));if(e.l!==r)throw new Error("MulBlank read error");var o=e.read_shift(2);if(i.length!=o-s+1)throw new Error("MulBlank length mismatch");return{r:n,c:s,C:o,ixfe:i}}function cNe(e,t,r,n){var s={},i=e.read_shift(4),o=e.read_shift(4),l=e.read_shift(4),c=e.read_shift(2);return s.patternType=qwe[l>>26],n.cellStyles&&(s.alc=i&7,s.fWrap=i>>3&1,s.alcV=i>>4&7,s.fJustLast=i>>7&1,s.trot=i>>8&255,s.cIndent=i>>16&15,s.fShrinkToFit=i>>20&1,s.iReadOrder=i>>22&2,s.fAtrNum=i>>26&1,s.fAtrFnt=i>>27&1,s.fAtrAlc=i>>28&1,s.fAtrBdr=i>>29&1,s.fAtrPat=i>>30&1,s.fAtrProt=i>>31&1,s.dgLeft=o&15,s.dgRight=o>>4&15,s.dgTop=o>>8&15,s.dgBottom=o>>12&15,s.icvLeft=o>>16&127,s.icvRight=o>>23&127,s.grbitDiag=o>>30&3,s.icvTop=l&127,s.icvBottom=l>>7&127,s.icvDiag=l>>14&127,s.dgDiag=l>>21&15,s.icvFore=c&127,s.icvBack=c>>7&127,s.fsxButton=c>>14&1),s}function dNe(e,t,r){var n={};return n.ifnt=e.read_shift(2),n.numFmtId=e.read_shift(2),n.flags=e.read_shift(2),n.fStyle=n.flags>>2&1,t-=6,n.data=cNe(e,t,n.fStyle,r),n}function N8(e,t,r,n){var s=r&&r.biff==5;n||(n=jt(s?16:20)),n.write_shift(2,0),e.style?(n.write_shift(2,e.numFmtId||0),n.write_shift(2,65524)):(n.write_shift(2,e.numFmtId||0),n.write_shift(2,t<<4));var i=0;return e.numFmtId>0&&s&&(i|=1024),n.write_shift(4,i),n.write_shift(4,0),s||n.write_shift(4,0),n.write_shift(2,0),n}function uNe(e){e.l+=4;var t=[e.read_shift(2),e.read_shift(2)];if(t[0]!==0&&t[0]--,t[1]!==0&&t[1]--,t[0]>7||t[1]>7)throw new Error("Bad Gutters: "+t.join("|"));return t}function fNe(e){var t=jt(8);return t.write_shift(4,0),t.write_shift(2,0),t.write_shift(2,0),t}function j8(e,t,r){var n=eu(e);(r.biff==2||t==9)&&++e.l;var s=m5e(e);return n.val=s,n.t=s===!0||s===!1?"b":"e",n}function hNe(e,t,r,n,s,i){var o=jt(8);return np(e,t,n,o),m$(r,i,o),o}function pNe(e,t,r){r.biffguess&&r.biff==2&&(r.biff=5);var n=eu(e),s=oo(e);return n.val=s,n}function mNe(e,t,r,n){var s=jt(14);return np(e,t,n,s),tp(r,s),s}var k8=S5e;function xNe(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(2);if(r.sbcch=i,i==1025||i==14849)return[i,s];if(i<1||i>255)throw new Error("Unexpected SupBook type: "+i);for(var o=rp(e,i),l=[];n>e.l;)l.push(ub(e));return[i,s,o,l]}function S8(e,t,r){var n=e.read_shift(2),s,i={fBuiltIn:n&1,fWantAdvise:n>>>1&1,fWantPict:n>>>2&1,fOle:n>>>3&1,fOleLink:n>>>4&1,cf:n>>>5&1023,fIcon:n>>>15&1};return r.sbcch===14849&&(s=A5e(e,t-2,r)),i.body=s||e.read_shift(t-2),typeof s=="string"&&(i.Name=s),i}var gNe=["_xlnm.Consolidate_Area","_xlnm.Auto_Open","_xlnm.Auto_Close","_xlnm.Extract","_xlnm.Database","_xlnm.Criteria","_xlnm.Print_Area","_xlnm.Print_Titles","_xlnm.Recorder","_xlnm.Data_Form","_xlnm.Auto_Activate","_xlnm.Auto_Deactivate","_xlnm.Sheet_Title","_xlnm._FilterDatabase"];function _8(e,t,r){var n=e.l+t,s=e.read_shift(2),i=e.read_shift(1),o=e.read_shift(1),l=e.read_shift(r&&r.biff==2?1:2),c=0;(!r||r.biff>=5)&&(r.biff!=5&&(e.l+=2),c=e.read_shift(2),r.biff==5&&(e.l+=2),e.l+=4);var d=rp(e,o,r);s&32&&(d=gNe[d.charCodeAt(0)]);var f=n-e.l;r&&r.biff==2&&--f;var u=n==e.l||l===0||!(f>0)?[]:P3e(e,f,r,l);return{chKey:i,Name:d,itab:c,rgce:u}}function j$(e,t,r){if(r.biff<8)return vNe(e,t,r);for(var n=[],s=e.l+t,i=e.read_shift(r.biff>8?4:2);i--!==0;)n.push(_5e(e,r.biff>8?12:6,r));if(e.l!=s)throw new Error("Bad ExternSheet: "+e.l+" != "+s);return n}function vNe(e,t,r){e[e.l+1]==3&&e[e.l]++;var n=db(e,t,r);return n.charCodeAt(0)==3?n.slice(1):n}function bNe(e,t,r){if(r.biff<8){e.l+=t;return}var n=e.read_shift(2),s=e.read_shift(2),i=rp(e,n,r),o=rp(e,s,r);return[i,o]}function yNe(e,t,r){var n=w$(e);e.l++;var s=e.read_shift(1);return t-=8,[I3e(e,t,r),s,n]}function A8(e,t,r){var n=C5e(e);switch(r.biff){case 2:e.l++,t-=7;break;case 3:case 4:e.l+=2,t-=8;break;default:e.l+=6,t-=12}return[n,T3e(e,t,r)]}function wNe(e){var t=e.read_shift(4)!==0,r=e.read_shift(4)!==0,n=e.read_shift(4);return[t,r,n]}function NNe(e,t,r){if(!(r.biff<8)){var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2),o=e.read_shift(2),l=gp(e,0,r);return r.biff<8&&e.read_shift(1),[{r:n,c:s},l,o,i]}}function jNe(e,t,r){return NNe(e,t,r)}function kNe(e,t){for(var r=[],n=e.read_shift(2);n--;)r.push(ON(e));return r}function SNe(e){var t=jt(2+e.length*8);t.write_shift(2,e.length);for(var r=0;r<e.length;++r)y$(e[r],t);return t}function _Ne(e,t,r){if(r&&r.biff<8)return CNe(e,t,r);var n=N$(e),s=P5e(e,t-22,n[1]);return{cmo:n,ft:s}}var ANe={8:function(e,t){var r=e.l+t;e.l+=10;var n=e.read_shift(2);e.l+=4,e.l+=2,e.l+=2,e.l+=2,e.l+=4;var s=e.read_shift(1);return e.l+=s,e.l=r,{fmt:n}}};function CNe(e,t,r){e.l+=4;var n=e.read_shift(2),s=e.read_shift(2),i=e.read_shift(2);e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=2,e.l+=6,t-=36;var o=[];return o.push((ANe[n]||ho)(e,t,r)),{cmo:[s,n,i],ft:o}}function ENe(e,t,r){var n=e.l,s="";try{e.l+=4;var i=(r.lastobj||{cmo:[0,0]}).cmo[1],o;[0,5,7,11,12,14].indexOf(i)==-1?e.l+=6:o=v5e(e,6,r);var l=e.read_shift(2);e.read_shift(2),Bs(e,2);var c=e.read_shift(2);e.l+=c;for(var d=1;d<e.lens.length-1;++d){if(e.l-n!=e.lens[d])throw new Error("TxO: bad continue record");var f=e[e.l],u=rp(e,e.lens[d+1]-e.lens[d]-1);if(s+=u,s.length>=(f?l:2*l))break}if(s.length!==l&&s.length!==l*2)throw new Error("cchText: "+l+" != "+s.length);return e.l=n+t,{t:s}}catch{return e.l=n+t,{t:s}}}function TNe(e,t){var r=ON(e);e.l+=16;var n=N5e(e,t-24);return[r,n]}function ONe(e){var t=jt(24),r=Za(e[0]);t.write_shift(2,r.r),t.write_shift(2,r.r),t.write_shift(2,r.c),t.write_shift(2,r.c);for(var n="d0 c9 ea 79 f9 ba ce 11 8c 82 00 aa 00 4b a9 0b".split(" "),s=0;s<16;++s)t.write_shift(1,parseInt(n[s],16));return yi([t,j5e(e[1])])}function PNe(e,t){e.read_shift(2);var r=ON(e),n=e.read_shift((t-10)/2,"dbcs-cont");return n=n.replace(To,""),[r,n]}function INe(e){var t=e[1].Tooltip,r=jt(10+2*(t.length+1));r.write_shift(2,2048);var n=Za(e[0]);r.write_shift(2,n.r),r.write_shift(2,n.r),r.write_shift(2,n.c),r.write_shift(2,n.c);for(var s=0;s<t.length;++s)r.write_shift(2,t.charCodeAt(s));return r.write_shift(2,0),r}function DNe(e){var t=[0,0],r;return r=e.read_shift(2),t[0]=u8[r]||r,r=e.read_shift(2),t[1]=u8[r]||r,t}function LNe(e){return e||(e=jt(4)),e.write_shift(2,1),e.write_shift(2,1),e}function FNe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(v$(e));return r}function MNe(e){for(var t=e.read_shift(2),r=[];t-- >0;)r.push(v$(e));return r}function RNe(e){e.l+=2;var t={cxfs:0,crc:0};return t.cxfs=e.read_shift(2),t.crc=e.read_shift(4),t}function k$(e,t,r){if(!r.cellStyles)return ho(e,t);var n=r&&r.biff>=12?4:2,s=e.read_shift(n),i=e.read_shift(n),o=e.read_shift(n),l=e.read_shift(n),c=e.read_shift(2);n==2&&(e.l+=2);var d={s,e:i,w:o,ixfe:l,flags:c};return(r.biff>=5||!r.biff)&&(d.level=c>>8&7),d}function BNe(e,t){var r=jt(12);r.write_shift(2,t),r.write_shift(2,t),r.write_shift(2,e.width*256),r.write_shift(2,0);var n=0;return e.hidden&&(n|=1),r.write_shift(1,n),n=e.level||0,r.write_shift(1,n),r.write_shift(2,0),r}function $Ne(e,t){var r={};return t<32||(e.l+=16,r.header=oo(e),r.footer=oo(e),e.l+=2),r}function UNe(e,t,r){var n={area:!1};if(r.biff!=5)return e.l+=t,n;var s=e.read_shift(1);return e.l+=3,s&16&&(n.area=!0),n}function zNe(e){for(var t=jt(2*e),r=0;r<e;++r)t.write_shift(2,r+1);return t}var qNe=eu,HNe=p$,WNe=ub;function VNe(e){var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s={fmt:t,env:r,len:n,data:e.slice(e.l,e.l+n)};return e.l+=n,s}function GNe(e,t,r){r.biffguess&&r.biff==5&&(r.biff=2);var n=eu(e);++e.l;var s=gp(e,t-7,r);return n.t="str",n.val=s,n}function KNe(e){var t=eu(e);++e.l;var r=oo(e);return t.t="n",t.val=r,t}function XNe(e,t,r){var n=jt(15);return mb(n,e,t),n.write_shift(8,r,"f"),n}function YNe(e){var t=eu(e);++e.l;var r=e.read_shift(2);return t.t="n",t.val=r,t}function QNe(e,t,r){var n=jt(9);return mb(n,e,t),n.write_shift(2,r),n}function JNe(e){var t=e.read_shift(1);return t===0?(e.l++,""):e.read_shift(t,"sbcs-cont")}function ZNe(e,t){e.l+=6,e.l+=2,e.l+=1,e.l+=3,e.l+=1,e.l+=t-13}function eje(e,t,r){var n=e.l+t,s=eu(e),i=e.read_shift(2),o=rp(e,i,r);return e.l=n,s.t="str",s.val=o,s}var tje=[2,3,48,49,131,139,140,245],SS=function(){var e={1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127,8:865,9:437,10:850,11:437,13:437,14:850,15:437,16:850,17:437,18:850,19:932,20:850,21:437,22:850,23:865,24:437,25:437,26:850,27:437,28:863,29:850,31:852,34:852,35:852,36:860,37:850,38:866,55:850,64:852,77:936,78:949,79:950,80:874,87:1252,88:1252,89:1252,108:863,134:737,135:852,136:857,204:1257,255:16969},t=CN({1:437,2:850,3:1252,4:1e4,100:852,101:866,102:865,103:861,104:895,105:620,106:737,107:857,120:950,121:949,122:936,123:932,124:874,125:1255,126:1256,150:10007,151:10029,152:10006,200:1250,201:1251,202:1254,203:1253,0:20127});function r(l,c){var d=[],f=h0(1);switch(c.type){case"base64":f=Tl(Rl(l));break;case"binary":f=Tl(l);break;case"buffer":case"array":f=l;break}Pi(f,0);var u=f.read_shift(1),p=!!(u&136),h=!1,m=!1;switch(u){case 2:break;case 3:break;case 48:h=!0,p=!0;break;case 49:h=!0,p=!0;break;case 131:break;case 139:break;case 140:m=!0;break;case 245:break;default:throw new Error("DBF Unsupported Version: "+u.toString(16))}var g=0,x=521;u==2&&(g=f.read_shift(2)),f.l+=3,u!=2&&(g=f.read_shift(4)),g>1048576&&(g=1e6),u!=2&&(x=f.read_shift(2));var v=f.read_shift(2),b=c.codepage||1252;u!=2&&(f.l+=16,f.read_shift(1),f[f.l]!==0&&(b=e[f[f.l]]),f.l+=1,f.l+=2),m&&(f.l+=36);for(var w=[],y={},N=Math.min(f.length,u==2?521:x-10-(h?264:0)),S=m?32:11;f.l<N&&f[f.l]!=13;)switch(y={},y.name=A1.utils.decode(b,f.slice(f.l,f.l+S)).replace(/[\u0000\r\n].*$/g,""),f.l+=S,y.type=String.fromCharCode(f.read_shift(1)),u!=2&&!m&&(y.offset=f.read_shift(4)),y.len=f.read_shift(1),u==2&&(y.offset=f.read_shift(2)),y.dec=f.read_shift(1),y.name.length&&w.push(y),u!=2&&(f.l+=m?13:14),y.type){case"B":(!h||y.len!=8)&&c.WTF&&console.log("Skipping "+y.name+":"+y.type);break;case"G":case"P":c.WTF&&console.log("Skipping "+y.name+":"+y.type);break;case"+":case"0":case"@":case"C":case"D":case"F":case"I":case"L":case"M":case"N":case"O":case"T":case"Y":break;default:throw new Error("Unknown Field Type: "+y.type)}if(f[f.l]!==13&&(f.l=x-1),f.read_shift(1)!==13)throw new Error("DBF Terminator not found "+f.l+" "+f[f.l]);f.l=x;var j=0,_=0;for(d[0]=[],_=0;_!=w.length;++_)d[0][_]=w[_].name;for(;g-- >0;){if(f[f.l]===42){f.l+=v;continue}for(++f.l,d[++j]=[],_=0,_=0;_!=w.length;++_){var T=f.slice(f.l,f.l+w[_].len);f.l+=w[_].len,Pi(T,0);var D=A1.utils.decode(b,T);switch(w[_].type){case"C":D.trim().length&&(d[j][_]=D.replace(/\s+$/,""));break;case"D":D.length===8?d[j][_]=new Date(+D.slice(0,4),+D.slice(4,6)-1,+D.slice(6,8)):d[j][_]=D;break;case"F":d[j][_]=parseFloat(D.trim());break;case"+":case"I":d[j][_]=m?T.read_shift(-4,"i")^2147483648:T.read_shift(4,"i");break;case"L":switch(D.trim().toUpperCase()){case"Y":case"T":d[j][_]=!0;break;case"N":case"F":d[j][_]=!1;break;case"":case"?":break;default:throw new Error("DBF Unrecognized L:|"+D+"|")}break;case"M":if(!p)throw new Error("DBF Unexpected MEMO for type "+u.toString(16));d[j][_]="##MEMO##"+(m?parseInt(D.trim(),10):T.read_shift(4));break;case"N":D=D.replace(/\u0000/g,"").trim(),D&&D!="."&&(d[j][_]=+D||0);break;case"@":d[j][_]=new Date(T.read_shift(-8,"f")-621356832e5);break;case"T":d[j][_]=new Date((T.read_shift(4)-2440588)*864e5+T.read_shift(4));break;case"Y":d[j][_]=T.read_shift(4,"i")/1e4+T.read_shift(4,"i")/1e4*Math.pow(2,32);break;case"O":d[j][_]=-T.read_shift(-8,"f");break;case"B":if(h&&w[_].len==8){d[j][_]=T.read_shift(8,"f");break}case"G":case"P":T.l+=w[_].len;break;case"0":if(w[_].name==="_NullFlags")break;default:throw new Error("DBF Unsupported data type "+w[_].type)}}}if(u!=2&&f.l<f.length&&f[f.l++]!=26)throw new Error("DBF EOF Marker missing "+(f.l-1)+" of "+f.length+" "+f[f.l-1].toString(16));return c&&c.sheetRows&&(d=d.slice(0,c.sheetRows)),c.DBF=w,d}function n(l,c){var d=c||{};d.dateNF||(d.dateNF="yyyymmdd");var f=Xx(r(l,d),d);return f["!cols"]=d.DBF.map(function(u){return{wch:u.len,DBF:u}}),delete d.DBF,f}function s(l,c){try{return T0(n(l,c),c)}catch(d){if(c&&c.WTF)throw d}return{SheetNames:[],Sheets:{}}}var i={B:8,C:250,L:1,D:8,"?":0,"":0};function o(l,c){var d=c||{};if(+d.codepage>=0&&Jc(+d.codepage),d.type=="string")throw new Error("Cannot write DBF to JS string");var f=sl(),u=u5(l,{header:1,raw:!0,cellDates:!0}),p=u[0],h=u.slice(1),m=l["!cols"]||[],g=0,x=0,v=0,b=1;for(g=0;g<p.length;++g){if(((m[g]||{}).DBF||{}).name){p[g]=m[g].DBF.name,++v;continue}if(p[g]!=null){if(++v,typeof p[g]=="number"&&(p[g]=p[g].toString(10)),typeof p[g]!="string")throw new Error("DBF Invalid column name "+p[g]+" |"+typeof p[g]+"|");if(p.indexOf(p[g])!==g){for(x=0;x<1024;++x)if(p.indexOf(p[g]+"_"+x)==-1){p[g]+="_"+x;break}}}}var w=Bn(l["!ref"]),y=[],N=[],S=[];for(g=0;g<=w.e.c-w.s.c;++g){var j="",_="",T=0,D=[];for(x=0;x<h.length;++x)h[x][g]!=null&&D.push(h[x][g]);if(D.length==0||p[g]==null){y[g]="?";continue}for(x=0;x<D.length;++x){switch(typeof D[x]){case"number":_="B";break;case"string":_="C";break;case"boolean":_="L";break;case"object":_=D[x]instanceof Date?"D":"C";break;default:_="C"}T=Math.max(T,String(D[x]).length),j=j&&j!=_?"C":_}T>250&&(T=250),_=((m[g]||{}).DBF||{}).type,_=="C"&&m[g].DBF.len>T&&(T=m[g].DBF.len),j=="B"&&_=="N"&&(j="N",S[g]=m[g].DBF.dec,T=m[g].DBF.len),N[g]=j=="C"||_=="N"?T:i[j]||0,b+=N[g],y[g]=j}var A=f.next(32);for(A.write_shift(4,318902576),A.write_shift(4,h.length),A.write_shift(2,296+32*v),A.write_shift(2,b),g=0;g<4;++g)A.write_shift(4,0);for(A.write_shift(4,0|(+t[hB]||3)<<8),g=0,x=0;g<p.length;++g)if(p[g]!=null){var C=f.next(32),M=(p[g].slice(-10)+"\0\0\0\0\0\0\0\0\0\0\0").slice(0,11);C.write_shift(1,M,"sbcs"),C.write_shift(1,y[g]=="?"?"C":y[g],"sbcs"),C.write_shift(4,x),C.write_shift(1,N[g]||i[y[g]]||0),C.write_shift(1,S[g]||0),C.write_shift(1,2),C.write_shift(4,0),C.write_shift(1,0),C.write_shift(4,0),C.write_shift(4,0),x+=N[g]||i[y[g]]||0}var F=f.next(264);for(F.write_shift(4,13),g=0;g<65;++g)F.write_shift(4,0);for(g=0;g<h.length;++g){var B=f.next(b);for(B.write_shift(1,0),x=0;x<p.length;++x)if(p[x]!=null)switch(y[x]){case"L":B.write_shift(1,h[g][x]==null?63:h[g][x]?84:70);break;case"B":B.write_shift(8,h[g][x]||0,"f");break;case"N":var Y="0";for(typeof h[g][x]=="number"&&(Y=h[g][x].toFixed(S[x]||0)),v=0;v<N[x]-Y.length;++v)B.write_shift(1,32);B.write_shift(1,Y,"sbcs");break;case"D":h[g][x]?(B.write_shift(4,("0000"+h[g][x].getFullYear()).slice(-4),"sbcs"),B.write_shift(2,("00"+(h[g][x].getMonth()+1)).slice(-2),"sbcs"),B.write_shift(2,("00"+h[g][x].getDate()).slice(-2),"sbcs")):B.write_shift(8,"00000000","sbcs");break;case"C":var V=String(h[g][x]!=null?h[g][x]:"").slice(0,N[x]);for(B.write_shift(1,V,"sbcs"),v=0;v<N[x]-V.length;++v)B.write_shift(1,32);break}}return f.next(1).write_shift(1,26),f.end()}return{to_workbook:s,to_sheet:n,from_sheet:o}}(),S$=function(){var e={AA:"",BA:"",CA:"",DA:195,HA:"",JA:197,AE:"",BE:"",CE:"",HE:"",AI:"",BI:"",CI:"",HI:"",AO:"",BO:"",CO:"",DO:213,HO:"",AU:"",BU:"",CU:"",HU:"",Aa:"",Ba:"",Ca:"",Da:227,Ha:"",Ja:229,Ae:"",Be:"",Ce:"",He:"",Ai:"",Bi:"",Ci:"",Hi:"",Ao:"",Bo:"",Co:"",Do:245,Ho:"",Au:"",Bu:"",Cu:"",Hu:"",KC:"",Kc:"",q:"",z:"",a:"",j:"",DN:209,Dn:241,Hy:255,S:169,c:170,R:174,"B ":180,0:176,1:177,2:178,3:179,5:181,6:182,7:183,Q:185,k:186,b:208,i:216,l:222,s:240,y:248,"!":161,'"':162,"#":163,"(":164,"%":165,"'":167,"H ":168,"+":171,";":187,"<":188,"=":189,">":190,"?":191,"{":223},t=new RegExp("\x1BN("+xs(e).join("|").replace(/\|\|\|/,"|\\||").replace(/([?()+])/g,"\\$1")+"|\\|)","gm"),r=function(p,h){var m=e[h];return typeof m=="number"?RI(m):m},n=function(p,h,m){var g=h.charCodeAt(0)-32<<4|m.charCodeAt(0)-48;return g==59?p:RI(g)};e["|"]=254;function s(p,h){switch(h.type){case"base64":return i(Rl(p),h);case"binary":return i(p,h);case"buffer":return i(pn&&Buffer.isBuffer(p)?p.toString("binary"):E0(p),h);case"array":return i(ep(p),h)}throw new Error("Unrecognized type "+h.type)}function i(p,h){var m=p.split(/[\n\r]+/),g=-1,x=-1,v=0,b=0,w=[],y=[],N=null,S={},j=[],_=[],T=[],D=0,A;for(+h.codepage>=0&&Jc(+h.codepage);v!==m.length;++v){D=0;var C=m[v].trim().replace(/\x1B([\x20-\x2F])([\x30-\x3F])/g,n).replace(t,r),M=C.replace(/;;/g,"\0").split(";").map(function(L){return L.replace(/\u0000/g,";")}),F=M[0],B;if(C.length>0)switch(F){case"ID":break;case"E":break;case"B":break;case"O":break;case"W":break;case"P":M[1].charAt(0)=="P"&&y.push(C.slice(3).replace(/;;/g,";"));break;case"C":var Y=!1,V=!1,J=!1,U=!1,X=-1,W=-1;for(b=1;b<M.length;++b)switch(M[b].charAt(0)){case"A":break;case"X":x=parseInt(M[b].slice(1))-1,V=!0;break;case"Y":for(g=parseInt(M[b].slice(1))-1,V||(x=0),A=w.length;A<=g;++A)w[A]=[];break;case"K":B=M[b].slice(1),B.charAt(0)==='"'?B=B.slice(1,B.length-1):B==="TRUE"?B=!0:B==="FALSE"?B=!1:isNaN(id(B))?isNaN(_x(B).getDate())||(B=Da(B)):(B=id(B),N!==null&&Gx(N)&&(B=TN(B))),Y=!0;break;case"E":U=!0;var E=Om(M[b].slice(1),{r:g,c:x});w[g][x]=[w[g][x],E];break;case"S":J=!0,w[g][x]=[w[g][x],"S5S"];break;case"G":break;case"R":X=parseInt(M[b].slice(1))-1;break;case"C":W=parseInt(M[b].slice(1))-1;break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+C)}if(Y&&(w[g][x]&&w[g][x].length==2?w[g][x][0]=B:w[g][x]=B,N=null),J){if(U)throw new Error("SYLK shared formula cannot have own formula");var R=X>-1&&w[X][W];if(!R||!R[1])throw new Error("SYLK shared formula cannot find base");w[g][x][1]=q$(R[1],{r:g-X,c:x-W})}break;case"F":var q=0;for(b=1;b<M.length;++b)switch(M[b].charAt(0)){case"X":x=parseInt(M[b].slice(1))-1,++q;break;case"Y":for(g=parseInt(M[b].slice(1))-1,A=w.length;A<=g;++A)w[A]=[];break;case"M":D=parseInt(M[b].slice(1))/20;break;case"F":break;case"G":break;case"P":N=y[parseInt(M[b].slice(1))];break;case"S":break;case"D":break;case"N":break;case"W":for(T=M[b].slice(1).split(" "),A=parseInt(T[0],10);A<=parseInt(T[1],10);++A)D=parseInt(T[2],10),_[A-1]=D===0?{hidden:!0}:{wch:D},p0(_[A-1]);break;case"C":x=parseInt(M[b].slice(1))-1,_[x]||(_[x]={});break;case"R":g=parseInt(M[b].slice(1))-1,j[g]||(j[g]={}),D>0?(j[g].hpt=D,j[g].hpx=Cx(D)):D===0&&(j[g].hidden=!0);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+C)}q<1&&(N=null);break;default:if(h&&h.WTF)throw new Error("SYLK bad record "+C)}}return j.length>0&&(S["!rows"]=j),_.length>0&&(S["!cols"]=_),h&&h.sheetRows&&(w=w.slice(0,h.sheetRows)),[w,S]}function o(p,h){var m=s(p,h),g=m[0],x=m[1],v=Xx(g,h);return xs(x).forEach(function(b){v[b]=x[b]}),v}function l(p,h){return T0(o(p,h),h)}function c(p,h,m,g){var x="C;Y"+(m+1)+";X"+(g+1)+";K";switch(p.t){case"n":x+=p.v||0,p.f&&!p.F&&(x+=";E"+TA(p.f,{r:m,c:g}));break;case"b":x+=p.v?"TRUE":"FALSE";break;case"e":x+=p.w||p.v;break;case"d":x+='"'+(p.w||p.v)+'"';break;case"s":x+='"'+p.v.replace(/"/g,"").replace(/;/g,";;")+'"';break}return x}function d(p,h){h.forEach(function(m,g){var x="F;W"+(g+1)+" "+(g+1)+" ";m.hidden?x+="0":(typeof m.width=="number"&&!m.wpx&&(m.wpx=L1(m.width)),typeof m.wpx=="number"&&!m.wch&&(m.wch=F1(m.wpx)),typeof m.wch=="number"&&(x+=Math.round(m.wch))),x.charAt(x.length-1)!=" "&&p.push(x)})}function f(p,h){h.forEach(function(m,g){var x="F;";m.hidden?x+="M0;":m.hpt?x+="M"+20*m.hpt+";":m.hpx&&(x+="M"+20*M1(m.hpx)+";"),x.length>2&&p.push(x+"R"+(g+1))})}function u(p,h){var m=["ID;PWXL;N;E"],g=[],x=Bn(p["!ref"]),v,b=Array.isArray(p),w=`\r
`;m.push("P;PGeneral"),m.push("F;P0;DG0G8;M255"),p["!cols"]&&d(m,p["!cols"]),p["!rows"]&&f(m,p["!rows"]),m.push("B;Y"+(x.e.r-x.s.r+1)+";X"+(x.e.c-x.s.c+1)+";D"+[x.s.c,x.s.r,x.e.c,x.e.r].join(" "));for(var y=x.s.r;y<=x.e.r;++y)for(var N=x.s.c;N<=x.e.c;++N){var S=Wr({r:y,c:N});v=b?(p[y]||[])[N]:p[S],!(!v||v.v==null&&(!v.f||v.F))&&g.push(c(v,p,y,N))}return m.join(w)+w+g.join(w)+w+"E"+w}return{to_workbook:l,to_sheet:o,from_sheet:u}}(),_$=function(){function e(i,o){switch(o.type){case"base64":return t(Rl(i),o);case"binary":return t(i,o);case"buffer":return t(pn&&Buffer.isBuffer(i)?i.toString("binary"):E0(i),o);case"array":return t(ep(i),o)}throw new Error("Unrecognized type "+o.type)}function t(i,o){for(var l=i.split(`
`),c=-1,d=-1,f=0,u=[];f!==l.length;++f){if(l[f].trim()==="BOT"){u[++c]=[],d=0;continue}if(!(c<0)){var p=l[f].trim().split(","),h=p[0],m=p[1];++f;for(var g=l[f]||"";(g.match(/["]/g)||[]).length&1&&f<l.length-1;)g+=`
`+l[++f];switch(g=g.trim(),+h){case-1:if(g==="BOT"){u[++c]=[],d=0;continue}else if(g!=="EOD")throw new Error("Unrecognized DIF special command "+g);break;case 0:g==="TRUE"?u[c][d]=!0:g==="FALSE"?u[c][d]=!1:isNaN(id(m))?isNaN(_x(m).getDate())?u[c][d]=m:u[c][d]=Da(m):u[c][d]=id(m),++d;break;case 1:g=g.slice(1,g.length-1),g=g.replace(/""/g,'"'),g&&g.match(/^=".*"$/)&&(g=g.slice(2,-1)),u[c][d++]=g!==""?g:null;break}if(g==="EOD")break}}return o&&o.sheetRows&&(u=u.slice(0,o.sheetRows)),u}function r(i,o){return Xx(e(i,o),o)}function n(i,o){return T0(r(i,o),o)}var s=function(){var i=function(c,d,f,u,p){c.push(d),c.push(f+","+u),c.push('"'+p.replace(/"/g,'""')+'"')},o=function(c,d,f,u){c.push(d+","+f),c.push(d==1?'"'+u.replace(/"/g,'""')+'"':u)};return function(c){var d=[],f=Bn(c["!ref"]),u,p=Array.isArray(c);i(d,"TABLE",0,1,"sheetjs"),i(d,"VECTORS",0,f.e.r-f.s.r+1,""),i(d,"TUPLES",0,f.e.c-f.s.c+1,""),i(d,"DATA",0,0,"");for(var h=f.s.r;h<=f.e.r;++h){o(d,-1,0,"BOT");for(var m=f.s.c;m<=f.e.c;++m){var g=Wr({r:h,c:m});if(u=p?(c[h]||[])[m]:c[g],!u){o(d,1,0,"");continue}switch(u.t){case"n":var x=u.w;!x&&u.v!=null&&(x=u.v),x==null?u.f&&!u.F?o(d,1,0,"="+u.f):o(d,1,0,""):o(d,0,x,"V");break;case"b":o(d,0,u.v?1:0,u.v?"TRUE":"FALSE");break;case"s":o(d,1,0,isNaN(u.v)?u.v:'="'+u.v+'"');break;case"d":u.w||(u.w=yc(u.z||Br[14],ai(Da(u.v)))),o(d,0,u.w,"V");break;default:o(d,1,0,"")}}}o(d,-1,0,"EOD");var v=`\r
`,b=d.join(v);return b}}();return{to_workbook:n,to_sheet:r,from_sheet:s}}(),A$=function(){function e(u){return u.replace(/\\b/g,"\\").replace(/\\c/g,":").replace(/\\n/g,`
`)}function t(u){return u.replace(/\\/g,"\\b").replace(/:/g,"\\c").replace(/\n/g,"\\n")}function r(u,p){for(var h=u.split(`
`),m=-1,g=-1,x=0,v=[];x!==h.length;++x){var b=h[x].trim().split(":");if(b[0]==="cell"){var w=Za(b[1]);if(v.length<=w.r)for(m=v.length;m<=w.r;++m)v[m]||(v[m]=[]);switch(m=w.r,g=w.c,b[2]){case"t":v[m][g]=e(b[3]);break;case"v":v[m][g]=+b[3];break;case"vtf":var y=b[b.length-1];case"vtc":switch(b[3]){case"nl":v[m][g]=!!+b[4];break;default:v[m][g]=+b[4];break}b[2]=="vtf"&&(v[m][g]=[v[m][g],y])}}}return p&&p.sheetRows&&(v=v.slice(0,p.sheetRows)),v}function n(u,p){return Xx(r(u,p),p)}function s(u,p){return T0(n(u,p),p)}var i=["socialcalc:version:1.5","MIME-Version: 1.0","Content-Type: multipart/mixed; boundary=SocialCalcSpreadsheetControlSave"].join(`
`),o=["--SocialCalcSpreadsheetControlSave","Content-type: text/plain; charset=UTF-8"].join(`
`)+`
`,l=["# SocialCalc Spreadsheet Control Save","part:sheet"].join(`
`),c="--SocialCalcSpreadsheetControlSave--";function d(u){if(!u||!u["!ref"])return"";for(var p=[],h=[],m,g="",x=ol(u["!ref"]),v=Array.isArray(u),b=x.s.r;b<=x.e.r;++b)for(var w=x.s.c;w<=x.e.c;++w)if(g=Wr({r:b,c:w}),m=v?(u[b]||[])[w]:u[g],!(!m||m.v==null||m.t==="z")){switch(h=["cell",g,"t"],m.t){case"s":case"str":h.push(t(m.v));break;case"n":m.f?(h[2]="vtf",h[3]="n",h[4]=m.v,h[5]=t(m.f)):(h[2]="v",h[3]=m.v);break;case"b":h[2]="vt"+(m.f?"f":"c"),h[3]="nl",h[4]=m.v?"1":"0",h[5]=t(m.f||(m.v?"TRUE":"FALSE"));break;case"d":var y=ai(Da(m.v));h[2]="vtc",h[3]="nd",h[4]=""+y,h[5]=m.w||yc(m.z||Br[14],y);break;case"e":continue}p.push(h.join(":"))}return p.push("sheet:c:"+(x.e.c-x.s.c+1)+":r:"+(x.e.r-x.s.r+1)+":tvf:1"),p.push("valueformat:1:text-wiki"),p.join(`
`)}function f(u){return[i,o,l,o,d(u),c].join(`
`)}return{to_workbook:s,to_sheet:n,from_sheet:f}}(),Ax=function(){function e(f,u,p,h,m){m.raw?u[p][h]=f:f===""||(f==="TRUE"?u[p][h]=!0:f==="FALSE"?u[p][h]=!1:isNaN(id(f))?isNaN(_x(f).getDate())?u[p][h]=f:u[p][h]=Da(f):u[p][h]=id(f))}function t(f,u){var p=u||{},h=[];if(!f||f.length===0)return h;for(var m=f.split(/[\r\n]/),g=m.length-1;g>=0&&m[g].length===0;)--g;for(var x=10,v=0,b=0;b<=g;++b)v=m[b].indexOf(" "),v==-1?v=m[b].length:v++,x=Math.max(x,v);for(b=0;b<=g;++b){h[b]=[];var w=0;for(e(m[b].slice(0,x).trim(),h,b,w,p),w=1;w<=(m[b].length-x)/10+1;++w)e(m[b].slice(x+(w-1)*10,x+w*10).trim(),h,b,w,p)}return p.sheetRows&&(h=h.slice(0,p.sheetRows)),h}var r={44:",",9:"	",59:";",124:"|"},n={44:3,9:2,59:1,124:0};function s(f){for(var u={},p=!1,h=0,m=0;h<f.length;++h)(m=f.charCodeAt(h))==34?p=!p:!p&&m in r&&(u[m]=(u[m]||0)+1);m=[];for(h in u)Object.prototype.hasOwnProperty.call(u,h)&&m.push([u[h],h]);if(!m.length){u=n;for(h in u)Object.prototype.hasOwnProperty.call(u,h)&&m.push([u[h],h])}return m.sort(function(g,x){return g[0]-x[0]||n[g[1]]-n[x[1]]}),r[m.pop()[1]]||44}function i(f,u){var p=u||{},h="",m=p.dense?[]:{},g={s:{c:0,r:0},e:{c:0,r:0}};f.slice(0,4)=="sep="?f.charCodeAt(5)==13&&f.charCodeAt(6)==10?(h=f.charAt(4),f=f.slice(7)):f.charCodeAt(5)==13||f.charCodeAt(5)==10?(h=f.charAt(4),f=f.slice(6)):h=s(f.slice(0,1024)):p&&p.FS?h=p.FS:h=s(f.slice(0,1024));var x=0,v=0,b=0,w=0,y=0,N=h.charCodeAt(0),S=!1,j=0,_=f.charCodeAt(0);f=f.replace(/\r\n/mg,`
`);var T=p.dateNF!=null?U2e(p.dateNF):null;function D(){var A=f.slice(w,y),C={};if(A.charAt(0)=='"'&&A.charAt(A.length-1)=='"'&&(A=A.slice(1,-1).replace(/""/g,'"')),A.length===0)C.t="z";else if(p.raw)C.t="s",C.v=A;else if(A.trim().length===0)C.t="s",C.v=A;else if(A.charCodeAt(0)==61)A.charCodeAt(1)==34&&A.charCodeAt(A.length-1)==34?(C.t="s",C.v=A.slice(2,-1).replace(/""/g,'"')):xke(A)?(C.t="n",C.f=A.slice(1)):(C.t="s",C.v=A);else if(A=="TRUE")C.t="b",C.v=!0;else if(A=="FALSE")C.t="b",C.v=!1;else if(!isNaN(b=id(A)))C.t="n",p.cellText!==!1&&(C.w=A),C.v=b;else if(!isNaN(_x(A).getDate())||T&&A.match(T)){C.z=p.dateNF||Br[14];var M=0;T&&A.match(T)&&(A=z2e(A,p.dateNF,A.match(T)||[]),M=1),p.cellDates?(C.t="d",C.v=Da(A,M)):(C.t="n",C.v=ai(Da(A,M))),p.cellText!==!1&&(C.w=yc(C.z,C.v instanceof Date?ai(C.v):C.v)),p.cellNF||delete C.z}else C.t="s",C.v=A;if(C.t=="z"||(p.dense?(m[x]||(m[x]=[]),m[x][v]=C):m[Wr({c:v,r:x})]=C),w=y+1,_=f.charCodeAt(w),g.e.c<v&&(g.e.c=v),g.e.r<x&&(g.e.r=x),j==N)++v;else if(v=0,++x,p.sheetRows&&p.sheetRows<=x)return!0}e:for(;y<f.length;++y)switch(j=f.charCodeAt(y)){case 34:_===34&&(S=!S);break;case N:case 10:case 13:if(!S&&D())break e;break}return y-w>0&&D(),m["!ref"]=an(g),m}function o(f,u){return!(u&&u.PRN)||u.FS||f.slice(0,4)=="sep="||f.indexOf("	")>=0||f.indexOf(",")>=0||f.indexOf(";")>=0?i(f,u):Xx(t(f,u),u)}function l(f,u){var p="",h=u.type=="string"?[0,0,0,0]:RA(f,u);switch(u.type){case"base64":p=Rl(f);break;case"binary":p=f;break;case"buffer":u.codepage==65001?p=f.toString("utf8"):u.codepage&&typeof A1<"u"||(p=pn&&Buffer.isBuffer(f)?f.toString("binary"):E0(f));break;case"array":p=ep(f);break;case"string":p=f;break;default:throw new Error("Unrecognized type "+u.type)}return h[0]==239&&h[1]==187&&h[2]==191?p=ua(p.slice(3)):u.type!="string"&&u.type!="buffer"&&u.codepage==65001?p=ua(p):u.type=="binary"&&typeof A1<"u",p.slice(0,19)=="socialcalc:version:"?A$.to_sheet(u.type=="string"?p:ua(p),u):o(p,u)}function c(f,u){return T0(l(f,u),u)}function d(f){for(var u=[],p=Bn(f["!ref"]),h,m=Array.isArray(f),g=p.s.r;g<=p.e.r;++g){for(var x=[],v=p.s.c;v<=p.e.c;++v){var b=Wr({r:g,c:v});if(h=m?(f[g]||[])[v]:f[b],!h||h.v==null){x.push("          ");continue}for(var w=(h.w||(Vu(h),h.w)||"").slice(0,10);w.length<10;)w+=" ";x.push(w+(v===0?" ":""))}u.push(x.join(""))}return u.join(`
`)}return{to_workbook:c,to_sheet:l,from_sheet:d}}();function rje(e,t){var r=t||{},n=!!r.WTF;r.WTF=!0;try{var s=S$.to_workbook(e,r);return r.WTF=n,s}catch(i){if(r.WTF=n,!i.message.match(/SYLK bad record ID/)&&n)throw i;return Ax.to_workbook(e,t)}}var Fh=function(){function e(E,R,q){if(E){Pi(E,E.l||0);for(var L=q.Enum||X;E.l<E.length;){var H=E.read_shift(2),se=L[H]||L[65535],ce=E.read_shift(2),ae=E.l+ce,Z=se.f&&se.f(E,ce,q);if(E.l=ae,R(Z,se,H))return}}}function t(E,R){switch(R.type){case"base64":return r(Tl(Rl(E)),R);case"binary":return r(Tl(E),R);case"buffer":case"array":return r(E,R)}throw"Unsupported type "+R.type}function r(E,R){if(!E)return E;var q=R||{},L=q.dense?[]:{},H="Sheet1",se="",ce=0,ae={},Z=[],ve=[],ne={s:{r:0,c:0},e:{r:0,c:0}},He=q.sheetRows||0;if(E[2]==0&&(E[3]==8||E[3]==9)&&E.length>=16&&E[14]==5&&E[15]===108)throw new Error("Unsupported Works 3 for Mac file");if(E[2]==2)q.Enum=X,e(E,function(Ne,de,ye){switch(ye){case 0:q.vers=Ne,Ne>=4096&&(q.qpro=!0);break;case 6:ne=Ne;break;case 204:Ne&&(se=Ne);break;case 222:se=Ne;break;case 15:case 51:q.qpro||(Ne[1].v=Ne[1].v.slice(1));case 13:case 14:case 16:ye==14&&(Ne[2]&112)==112&&(Ne[2]&15)>1&&(Ne[2]&15)<15&&(Ne[1].z=q.dateNF||Br[14],q.cellDates&&(Ne[1].t="d",Ne[1].v=TN(Ne[1].v))),q.qpro&&Ne[3]>ce&&(L["!ref"]=an(ne),ae[H]=L,Z.push(H),L=q.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ce=Ne[3],H=se||"Sheet"+(ce+1),se="");var xe=q.dense?(L[Ne[0].r]||[])[Ne[0].c]:L[Wr(Ne[0])];if(xe){xe.t=Ne[1].t,xe.v=Ne[1].v,Ne[1].z!=null&&(xe.z=Ne[1].z),Ne[1].f!=null&&(xe.f=Ne[1].f);break}q.dense?(L[Ne[0].r]||(L[Ne[0].r]=[]),L[Ne[0].r][Ne[0].c]=Ne[1]):L[Wr(Ne[0])]=Ne[1];break}},q);else if(E[2]==26||E[2]==14)q.Enum=W,E[2]==14&&(q.qpro=!0,E.l=0),e(E,function(Ne,de,ye){switch(ye){case 204:H=Ne;break;case 22:Ne[1].v=Ne[1].v.slice(1);case 23:case 24:case 25:case 37:case 39:case 40:if(Ne[3]>ce&&(L["!ref"]=an(ne),ae[H]=L,Z.push(H),L=q.dense?[]:{},ne={s:{r:0,c:0},e:{r:0,c:0}},ce=Ne[3],H="Sheet"+(ce+1)),He>0&&Ne[0].r>=He)break;q.dense?(L[Ne[0].r]||(L[Ne[0].r]=[]),L[Ne[0].r][Ne[0].c]=Ne[1]):L[Wr(Ne[0])]=Ne[1],ne.e.c<Ne[0].c&&(ne.e.c=Ne[0].c),ne.e.r<Ne[0].r&&(ne.e.r=Ne[0].r);break;case 27:Ne[14e3]&&(ve[Ne[14e3][0]]=Ne[14e3][1]);break;case 1537:ve[Ne[0]]=Ne[1],Ne[0]==ce&&(H=Ne[1]);break}},q);else throw new Error("Unrecognized LOTUS BOF "+E[2]);if(L["!ref"]=an(ne),ae[se||H]=L,Z.push(se||H),!ve.length)return{SheetNames:Z,Sheets:ae};for(var Xe={},ie=[],Q=0;Q<ve.length;++Q)ae[Z[Q]]?(ie.push(ve[Q]||Z[Q]),Xe[ve[Q]]=ae[ve[Q]]||ae[Z[Q]]):(ie.push(ve[Q]),Xe[ve[Q]]={"!ref":"A1"});return{SheetNames:ie,Sheets:Xe}}function n(E,R){var q=R||{};if(+q.codepage>=0&&Jc(+q.codepage),q.type=="string")throw new Error("Cannot write WK1 to JS string");var L=sl(),H=Bn(E["!ref"]),se=Array.isArray(E),ce=[];er(L,0,i(1030)),er(L,6,c(H));for(var ae=Math.min(H.e.r,8191),Z=H.s.r;Z<=ae;++Z)for(var ve=As(Z),ne=H.s.c;ne<=H.e.c;++ne){Z===H.s.r&&(ce[ne]=Ja(ne));var He=ce[ne]+ve,Xe=se?(E[Z]||[])[ne]:E[He];if(!(!Xe||Xe.t=="z"))if(Xe.t=="n")(Xe.v|0)==Xe.v&&Xe.v>=-32768&&Xe.v<=32767?er(L,13,h(Z,ne,Xe.v)):er(L,14,g(Z,ne,Xe.v));else{var ie=Vu(Xe);er(L,15,u(Z,ne,ie.slice(0,239)))}}return er(L,1),L.end()}function s(E,R){var q=R||{};if(+q.codepage>=0&&Jc(+q.codepage),q.type=="string")throw new Error("Cannot write WK3 to JS string");var L=sl();er(L,0,o(E));for(var H=0,se=0;H<E.SheetNames.length;++H)(E.Sheets[E.SheetNames[H]]||{})["!ref"]&&er(L,27,U(E.SheetNames[H],se++));var ce=0;for(H=0;H<E.SheetNames.length;++H){var ae=E.Sheets[E.SheetNames[H]];if(!(!ae||!ae["!ref"])){for(var Z=Bn(ae["!ref"]),ve=Array.isArray(ae),ne=[],He=Math.min(Z.e.r,8191),Xe=Z.s.r;Xe<=He;++Xe)for(var ie=As(Xe),Q=Z.s.c;Q<=Z.e.c;++Q){Xe===Z.s.r&&(ne[Q]=Ja(Q));var Ne=ne[Q]+ie,de=ve?(ae[Xe]||[])[Q]:ae[Ne];if(!(!de||de.t=="z"))if(de.t=="n")er(L,23,D(Xe,Q,ce,de.v));else{var ye=Vu(de);er(L,22,j(Xe,Q,ce,ye.slice(0,239)))}}++ce}}return er(L,1),L.end()}function i(E){var R=jt(2);return R.write_shift(2,E),R}function o(E){var R=jt(26);R.write_shift(2,4096),R.write_shift(2,4),R.write_shift(4,0);for(var q=0,L=0,H=0,se=0;se<E.SheetNames.length;++se){var ce=E.SheetNames[se],ae=E.Sheets[ce];if(!(!ae||!ae["!ref"])){++H;var Z=ol(ae["!ref"]);q<Z.e.r&&(q=Z.e.r),L<Z.e.c&&(L=Z.e.c)}}return q>8191&&(q=8191),R.write_shift(2,q),R.write_shift(1,H),R.write_shift(1,L),R.write_shift(2,0),R.write_shift(2,0),R.write_shift(1,1),R.write_shift(1,2),R.write_shift(4,0),R.write_shift(4,0),R}function l(E,R,q){var L={s:{c:0,r:0},e:{c:0,r:0}};return R==8&&q.qpro?(L.s.c=E.read_shift(1),E.l++,L.s.r=E.read_shift(2),L.e.c=E.read_shift(1),E.l++,L.e.r=E.read_shift(2),L):(L.s.c=E.read_shift(2),L.s.r=E.read_shift(2),R==12&&q.qpro&&(E.l+=2),L.e.c=E.read_shift(2),L.e.r=E.read_shift(2),R==12&&q.qpro&&(E.l+=2),L.s.c==65535&&(L.s.c=L.e.c=L.s.r=L.e.r=0),L)}function c(E){var R=jt(8);return R.write_shift(2,E.s.c),R.write_shift(2,E.s.r),R.write_shift(2,E.e.c),R.write_shift(2,E.e.r),R}function d(E,R,q){var L=[{c:0,r:0},{t:"n",v:0},0,0];return q.qpro&&q.vers!=20768?(L[0].c=E.read_shift(1),L[3]=E.read_shift(1),L[0].r=E.read_shift(2),E.l+=2):(L[2]=E.read_shift(1),L[0].c=E.read_shift(2),L[0].r=E.read_shift(2)),L}function f(E,R,q){var L=E.l+R,H=d(E,R,q);if(H[1].t="s",q.vers==20768){E.l++;var se=E.read_shift(1);return H[1].v=E.read_shift(se,"utf8"),H}return q.qpro&&E.l++,H[1].v=E.read_shift(L-E.l,"cstr"),H}function u(E,R,q){var L=jt(7+q.length);L.write_shift(1,255),L.write_shift(2,R),L.write_shift(2,E),L.write_shift(1,39);for(var H=0;H<L.length;++H){var se=q.charCodeAt(H);L.write_shift(1,se>=128?95:se)}return L.write_shift(1,0),L}function p(E,R,q){var L=d(E,R,q);return L[1].v=E.read_shift(2,"i"),L}function h(E,R,q){var L=jt(7);return L.write_shift(1,255),L.write_shift(2,R),L.write_shift(2,E),L.write_shift(2,q,"i"),L}function m(E,R,q){var L=d(E,R,q);return L[1].v=E.read_shift(8,"f"),L}function g(E,R,q){var L=jt(13);return L.write_shift(1,255),L.write_shift(2,R),L.write_shift(2,E),L.write_shift(8,q,"f"),L}function x(E,R,q){var L=E.l+R,H=d(E,R,q);if(H[1].v=E.read_shift(8,"f"),q.qpro)E.l=L;else{var se=E.read_shift(2);y(E.slice(E.l,E.l+se),H),E.l+=se}return H}function v(E,R,q){var L=R&32768;return R&=-32769,R=(L?E:0)+(R>=8192?R-16384:R),(L?"":"$")+(q?Ja(R):As(R))}var b={51:["FALSE",0],52:["TRUE",0],70:["LEN",1],80:["SUM",69],81:["AVERAGEA",69],82:["COUNTA",69],83:["MINA",69],84:["MAXA",69],111:["T",1]},w=["","","","","","","","","","+","-","*","/","^","=","<>","<=",">=","<",">","","","","","&","","","","","","",""];function y(E,R){Pi(E,0);for(var q=[],L=0,H="",se="",ce="",ae="";E.l<E.length;){var Z=E[E.l++];switch(Z){case 0:q.push(E.read_shift(8,"f"));break;case 1:se=v(R[0].c,E.read_shift(2),!0),H=v(R[0].r,E.read_shift(2),!1),q.push(se+H);break;case 2:{var ve=v(R[0].c,E.read_shift(2),!0),ne=v(R[0].r,E.read_shift(2),!1);se=v(R[0].c,E.read_shift(2),!0),H=v(R[0].r,E.read_shift(2),!1),q.push(ve+ne+":"+se+H)}break;case 3:if(E.l<E.length){console.error("WK1 premature formula end");return}break;case 4:q.push("("+q.pop()+")");break;case 5:q.push(E.read_shift(2));break;case 6:{for(var He="";Z=E[E.l++];)He+=String.fromCharCode(Z);q.push('"'+He.replace(/"/g,'""')+'"')}break;case 8:q.push("-"+q.pop());break;case 23:q.push("+"+q.pop());break;case 22:q.push("NOT("+q.pop()+")");break;case 20:case 21:ae=q.pop(),ce=q.pop(),q.push(["AND","OR"][Z-20]+"("+ce+","+ae+")");break;default:if(Z<32&&w[Z])ae=q.pop(),ce=q.pop(),q.push(ce+w[Z]+ae);else if(b[Z]){if(L=b[Z][1],L==69&&(L=E[E.l++]),L>q.length){console.error("WK1 bad formula parse 0x"+Z.toString(16)+":|"+q.join("|")+"|");return}var Xe=q.slice(-L);q.length-=L,q.push(b[Z][0]+"("+Xe.join(",")+")")}else return Z<=7?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=24?console.error("WK1 unsupported op "+Z.toString(16)):Z<=30?console.error("WK1 invalid opcode "+Z.toString(16)):Z<=115?console.error("WK1 unsupported function opcode "+Z.toString(16)):console.error("WK1 unrecognized opcode "+Z.toString(16))}}q.length==1?R[1].f=""+q[0]:console.error("WK1 bad formula parse |"+q.join("|")+"|")}function N(E){var R=[{c:0,r:0},{t:"n",v:0},0];return R[0].r=E.read_shift(2),R[3]=E[E.l++],R[0].c=E[E.l++],R}function S(E,R){var q=N(E);return q[1].t="s",q[1].v=E.read_shift(R-4,"cstr"),q}function j(E,R,q,L){var H=jt(6+L.length);H.write_shift(2,E),H.write_shift(1,q),H.write_shift(1,R),H.write_shift(1,39);for(var se=0;se<L.length;++se){var ce=L.charCodeAt(se);H.write_shift(1,ce>=128?95:ce)}return H.write_shift(1,0),H}function _(E,R){var q=N(E);q[1].v=E.read_shift(2);var L=q[1].v>>1;if(q[1].v&1)switch(L&7){case 0:L=(L>>3)*5e3;break;case 1:L=(L>>3)*500;break;case 2:L=(L>>3)/20;break;case 3:L=(L>>3)/200;break;case 4:L=(L>>3)/2e3;break;case 5:L=(L>>3)/2e4;break;case 6:L=(L>>3)/16;break;case 7:L=(L>>3)/64;break}return q[1].v=L,q}function T(E,R){var q=N(E),L=E.read_shift(4),H=E.read_shift(4),se=E.read_shift(2);if(se==65535)return L===0&&H===3221225472?(q[1].t="e",q[1].v=15):L===0&&H===3489660928?(q[1].t="e",q[1].v=42):q[1].v=0,q;var ce=se&32768;return se=(se&32767)-16446,q[1].v=(1-ce*2)*(H*Math.pow(2,se+32)+L*Math.pow(2,se)),q}function D(E,R,q,L){var H=jt(14);if(H.write_shift(2,E),H.write_shift(1,q),H.write_shift(1,R),L==0)return H.write_shift(4,0),H.write_shift(4,0),H.write_shift(2,65535),H;var se=0,ce=0,ae=0,Z=0;return L<0&&(se=1,L=-L),ce=Math.log2(L)|0,L/=Math.pow(2,ce-31),Z=L>>>0,Z&2147483648||(L/=2,++ce,Z=L>>>0),L-=Z,Z|=2147483648,Z>>>=0,L*=Math.pow(2,32),ae=L>>>0,H.write_shift(4,ae),H.write_shift(4,Z),ce+=16383+(se?32768:0),H.write_shift(2,ce),H}function A(E,R){var q=T(E);return E.l+=R-14,q}function C(E,R){var q=N(E),L=E.read_shift(4);return q[1].v=L>>6,q}function M(E,R){var q=N(E),L=E.read_shift(8,"f");return q[1].v=L,q}function F(E,R){var q=M(E);return E.l+=R-10,q}function B(E,R){return E[E.l+R-1]==0?E.read_shift(R,"cstr"):""}function Y(E,R){var q=E[E.l++];q>R-1&&(q=R-1);for(var L="";L.length<q;)L+=String.fromCharCode(E[E.l++]);return L}function V(E,R,q){if(!(!q.qpro||R<21)){var L=E.read_shift(1);E.l+=17,E.l+=1,E.l+=2;var H=E.read_shift(R-21,"cstr");return[L,H]}}function J(E,R){for(var q={},L=E.l+R;E.l<L;){var H=E.read_shift(2);if(H==14e3){for(q[H]=[0,""],q[H][0]=E.read_shift(2);E[E.l];)q[H][1]+=String.fromCharCode(E[E.l]),E.l++;E.l++}}return q}function U(E,R){var q=jt(5+E.length);q.write_shift(2,14e3),q.write_shift(2,R);for(var L=0;L<E.length;++L){var H=E.charCodeAt(L);q[q.l++]=H>127?95:H}return q[q.l++]=0,q}var X={0:{n:"BOF",f:Bs},1:{n:"EOF"},2:{n:"CALCMODE"},3:{n:"CALCORDER"},4:{n:"SPLIT"},5:{n:"SYNC"},6:{n:"RANGE",f:l},7:{n:"WINDOW1"},8:{n:"COLW1"},9:{n:"WINTWO"},10:{n:"COLW2"},11:{n:"NAME"},12:{n:"BLANK"},13:{n:"INTEGER",f:p},14:{n:"NUMBER",f:m},15:{n:"LABEL",f},16:{n:"FORMULA",f:x},24:{n:"TABLE"},25:{n:"ORANGE"},26:{n:"PRANGE"},27:{n:"SRANGE"},28:{n:"FRANGE"},29:{n:"KRANGE1"},32:{n:"HRANGE"},35:{n:"KRANGE2"},36:{n:"PROTEC"},37:{n:"FOOTER"},38:{n:"HEADER"},39:{n:"SETUP"},40:{n:"MARGINS"},41:{n:"LABELFMT"},42:{n:"TITLES"},43:{n:"SHEETJS"},45:{n:"GRAPH"},46:{n:"NGRAPH"},47:{n:"CALCCOUNT"},48:{n:"UNFORMATTED"},49:{n:"CURSORW12"},50:{n:"WINDOW"},51:{n:"STRING",f},55:{n:"PASSWORD"},56:{n:"LOCKED"},60:{n:"QUERY"},61:{n:"QUERYNAME"},62:{n:"PRINT"},63:{n:"PRINTNAME"},64:{n:"GRAPH2"},65:{n:"GRAPHNAME"},66:{n:"ZOOM"},67:{n:"SYMSPLIT"},68:{n:"NSROWS"},69:{n:"NSCOLS"},70:{n:"RULER"},71:{n:"NNAME"},72:{n:"ACOMM"},73:{n:"AMACRO"},74:{n:"PARSE"},102:{n:"PRANGES??"},103:{n:"RRANGES??"},104:{n:"FNAME??"},105:{n:"MRANGES??"},204:{n:"SHEETNAMECS",f:B},222:{n:"SHEETNAMELP",f:Y},65535:{n:""}},W={0:{n:"BOF"},1:{n:"EOF"},2:{n:"PASSWORD"},3:{n:"CALCSET"},4:{n:"WINDOWSET"},5:{n:"SHEETCELLPTR"},6:{n:"SHEETLAYOUT"},7:{n:"COLUMNWIDTH"},8:{n:"HIDDENCOLUMN"},9:{n:"USERRANGE"},10:{n:"SYSTEMRANGE"},11:{n:"ZEROFORCE"},12:{n:"SORTKEYDIR"},13:{n:"FILESEAL"},14:{n:"DATAFILLNUMS"},15:{n:"PRINTMAIN"},16:{n:"PRINTSTRING"},17:{n:"GRAPHMAIN"},18:{n:"GRAPHSTRING"},19:{n:"??"},20:{n:"ERRCELL"},21:{n:"NACELL"},22:{n:"LABEL16",f:S},23:{n:"NUMBER17",f:T},24:{n:"NUMBER18",f:_},25:{n:"FORMULA19",f:A},26:{n:"FORMULA1A"},27:{n:"XFORMAT",f:J},28:{n:"DTLABELMISC"},29:{n:"DTLABELCELL"},30:{n:"GRAPHWINDOW"},31:{n:"CPA"},32:{n:"LPLAUTO"},33:{n:"QUERY"},34:{n:"HIDDENSHEET"},35:{n:"??"},37:{n:"NUMBER25",f:C},38:{n:"??"},39:{n:"NUMBER27",f:M},40:{n:"FORMULA28",f:F},142:{n:"??"},147:{n:"??"},150:{n:"??"},151:{n:"??"},152:{n:"??"},153:{n:"??"},154:{n:"??"},155:{n:"??"},156:{n:"??"},163:{n:"??"},174:{n:"??"},175:{n:"??"},176:{n:"??"},177:{n:"??"},184:{n:"??"},185:{n:"??"},186:{n:"??"},187:{n:"??"},188:{n:"??"},195:{n:"??"},201:{n:"??"},204:{n:"SHEETNAMECS",f:B},205:{n:"??"},206:{n:"??"},207:{n:"??"},208:{n:"??"},256:{n:"??"},259:{n:"??"},260:{n:"??"},261:{n:"??"},262:{n:"??"},263:{n:"??"},265:{n:"??"},266:{n:"??"},267:{n:"??"},268:{n:"??"},270:{n:"??"},271:{n:"??"},384:{n:"??"},389:{n:"??"},390:{n:"??"},393:{n:"??"},396:{n:"??"},512:{n:"??"},514:{n:"??"},513:{n:"??"},516:{n:"??"},517:{n:"??"},640:{n:"??"},641:{n:"??"},642:{n:"??"},643:{n:"??"},644:{n:"??"},645:{n:"??"},646:{n:"??"},647:{n:"??"},648:{n:"??"},658:{n:"??"},659:{n:"??"},660:{n:"??"},661:{n:"??"},662:{n:"??"},665:{n:"??"},666:{n:"??"},768:{n:"??"},772:{n:"??"},1537:{n:"SHEETINFOQP",f:V},1600:{n:"??"},1602:{n:"??"},1793:{n:"??"},1794:{n:"??"},1795:{n:"??"},1796:{n:"??"},1920:{n:"??"},2048:{n:"??"},2049:{n:"??"},2052:{n:"??"},2688:{n:"??"},10998:{n:"??"},12849:{n:"??"},28233:{n:"??"},28484:{n:"??"},65535:{n:""}};return{sheet_to_wk1:n,book_to_wk3:s,to_workbook:t}}();function nje(e){var t={},r=e.match(po),n=0,s=!1;if(r)for(;n!=r.length;++n){var i=Vr(r[n]);switch(i[0].replace(/\w*:/g,"")){case"<condense":break;case"<extend":break;case"<shadow":if(!i.val)break;case"<shadow>":case"<shadow/>":t.shadow=1;break;case"</shadow>":break;case"<charset":if(i.val=="1")break;t.cp=tA[parseInt(i.val,10)];break;case"<outline":if(!i.val)break;case"<outline>":case"<outline/>":t.outline=1;break;case"</outline>":break;case"<rFont":t.name=i.val;break;case"<sz":t.sz=i.val;break;case"<strike":if(!i.val)break;case"<strike>":case"<strike/>":t.strike=1;break;case"</strike>":break;case"<u":if(!i.val)break;switch(i.val){case"double":t.uval="double";break;case"singleAccounting":t.uval="single-accounting";break;case"doubleAccounting":t.uval="double-accounting";break}case"<u>":case"<u/>":t.u=1;break;case"</u>":break;case"<b":if(i.val=="0")break;case"<b>":case"<b/>":t.b=1;break;case"</b>":break;case"<i":if(i.val=="0")break;case"<i>":case"<i/>":t.i=1;break;case"</i>":break;case"<color":i.rgb&&(t.color=i.rgb.slice(2,8));break;case"<color>":case"<color/>":case"</color>":break;case"<family":t.family=i.val;break;case"<family>":case"<family/>":case"</family>":break;case"<vertAlign":t.valign=i.val;break;case"<vertAlign>":case"<vertAlign/>":case"</vertAlign>":break;case"<scheme":break;case"<scheme>":case"<scheme/>":case"</scheme>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(i[0].charCodeAt(1)!==47&&!s)throw new Error("Unrecognized rich format "+i[0])}}return t}var aje=function(){var e=T1("t"),t=T1("rPr");function r(i){var o=i.match(e);if(!o)return{t:"s",v:""};var l={t:"s",v:Mn(o[1])},c=i.match(t);return c&&(l.s=nje(c[1])),l}var n=/<(?:\w+:)?r>/g,s=/<\/(?:\w+:)?r>/;return function(o){return o.replace(n,"").split(s).map(r).filter(function(l){return l.v})}}(),sje=function(){var t=/(\r\n|\n)/g;function r(s,i,o){var l=[];s.u&&l.push("text-decoration: underline;"),s.uval&&l.push("text-underline-style:"+s.uval+";"),s.sz&&l.push("font-size:"+s.sz+"pt;"),s.outline&&l.push("text-effect: outline;"),s.shadow&&l.push("text-shadow: auto;"),i.push('<span style="'+l.join("")+'">'),s.b&&(i.push("<b>"),o.push("</b>")),s.i&&(i.push("<i>"),o.push("</i>")),s.strike&&(i.push("<s>"),o.push("</s>"));var c=s.valign||"";return c=="superscript"||c=="super"?c="sup":c=="subscript"&&(c="sub"),c!=""&&(i.push("<"+c+">"),o.push("</"+c+">")),o.push("</span>"),s}function n(s){var i=[[],s.v,[]];return s.v?(s.s&&r(s.s,i[0],i[2]),i[0].join("")+i[1].replace(t,"<br/>")+i[2].join("")):""}return function(i){return i.map(n).join("")}}(),ije=/<(?:\w+:)?t[^>]*>([^<]*)<\/(?:\w+:)?t>/g,oje=/<(?:\w+:)?r>/,lje=/<(?:\w+:)?rPh.*?>([\s\S]*?)<\/(?:\w+:)?rPh>/g;function SA(e,t){var r=t?t.cellHTML:!0,n={};return e?(e.match(/^\s*<(?:\w+:)?t[^>]*>/)?(n.t=Mn(ua(e.slice(e.indexOf(">")+1).split(/<\/(?:\w+:)?t>/)[0]||"")),n.r=ua(e),r&&(n.h=uA(n.t))):e.match(oje)&&(n.r=ua(e),n.t=Mn(ua((e.replace(lje,"").match(ije)||[]).join("").replace(po,""))),r&&(n.h=sje(aje(n.r)))),n):{t:""}}var cje=/<(?:\w+:)?sst([^>]*)>([\s\S]*)<\/(?:\w+:)?sst>/,dje=/<(?:\w+:)?(?:si|sstItem)>/g,uje=/<\/(?:\w+:)?(?:si|sstItem)>/;function fje(e,t){var r=[],n="";if(!e)return r;var s=e.match(cje);if(s){n=s[2].replace(dje,"").split(uje);for(var i=0;i!=n.length;++i){var o=SA(n[i].trim(),t);o!=null&&(r[r.length]=o)}s=Vr(s[1]),r.Count=s.count,r.Unique=s.uniqueCount}return r}var hje=/^\s|\s$|[\t\n\r]/;function C$(e,t){if(!t.bookSST)return"";var r=[Es];r[r.length]=Zt("sst",null,{xmlns:fp[0],count:e.Count,uniqueCount:e.Unique});for(var n=0;n!=e.length;++n)if(e[n]!=null){var s=e[n],i="<si>";s.r?i+=s.r:(i+="<t",s.t||(s.t=""),s.t.match(hje)&&(i+=' xml:space="preserve"'),i+=">"+na(s.t)+"</t>"),i+="</si>",r[r.length]=i}return r.length>2&&(r[r.length]="</sst>",r[1]=r[1].replace("/>",">")),r.join("")}function pje(e){return[e.read_shift(4),e.read_shift(4)]}function mje(e,t){var r=[],n=!1;return Ju(e,function(i,o,l){switch(l){case 159:r.Count=i[0],r.Unique=i[1];break;case 19:r.push(i);break;case 160:return!0;case 35:n=!0;break;case 36:n=!1;break;default:if(o.T,!n||t.WTF)throw new Error("Unexpected record 0x"+l.toString(16))}}),r}function xje(e,t){return t||(t=jt(8)),t.write_shift(4,e.Count),t.write_shift(4,e.Unique),t}var gje=Awe;function vje(e){var t=sl();Lt(t,159,xje(e));for(var r=0;r<e.length;++r)Lt(t,19,gje(e[r]));return Lt(t,160),t.end()}function E$(e){for(var t=[],r=e.split(""),n=0;n<r.length;++n)t[n]=r[n].charCodeAt(0);return t}function Lu(e,t){var r={};return r.Major=e.read_shift(2),r.Minor=e.read_shift(2),t>=4&&(e.l+=t-4),r}function bje(e){var t={};return t.id=e.read_shift(0,"lpp4"),t.R=Lu(e,4),t.U=Lu(e,4),t.W=Lu(e,4),t}function yje(e){for(var t=e.read_shift(4),r=e.l+t-4,n={},s=e.read_shift(4),i=[];s-- >0;)i.push({t:e.read_shift(4),v:e.read_shift(0,"lpp4")});if(n.name=e.read_shift(0,"lpp4"),n.comps=i,e.l!=r)throw new Error("Bad DataSpaceMapEntry: "+e.l+" != "+r);return n}function wje(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(yje(e));return t}function Nje(e){var t=[];e.l+=4;for(var r=e.read_shift(4);r-- >0;)t.push(e.read_shift(0,"lpp4"));return t}function jje(e){var t={};return e.read_shift(4),e.l+=4,t.id=e.read_shift(0,"lpp4"),t.name=e.read_shift(0,"lpp4"),t.R=Lu(e,4),t.U=Lu(e,4),t.W=Lu(e,4),t}function kje(e){var t=jje(e);if(t.ename=e.read_shift(0,"8lpp4"),t.blksz=e.read_shift(4),t.cmode=e.read_shift(4),e.read_shift(4)!=4)throw new Error("Bad !Primary record");return t}function T$(e,t){var r=e.l+t,n={};n.Flags=e.read_shift(4)&63,e.l+=4,n.AlgID=e.read_shift(4);var s=!1;switch(n.AlgID){case 26126:case 26127:case 26128:s=n.Flags==36;break;case 26625:s=n.Flags==4;break;case 0:s=n.Flags==16||n.Flags==4||n.Flags==36;break;default:throw"Unrecognized encryption algorithm: "+n.AlgID}if(!s)throw new Error("Encryption Flags/AlgID mismatch");return n.AlgIDHash=e.read_shift(4),n.KeySize=e.read_shift(4),n.ProviderType=e.read_shift(4),e.l+=8,n.CSPName=e.read_shift(r-e.l>>1,"utf16le"),e.l=r,n}function O$(e,t){var r={},n=e.l+t;return e.l+=4,r.Salt=e.slice(e.l,e.l+16),e.l+=16,r.Verifier=e.slice(e.l,e.l+16),e.l+=16,e.read_shift(4),r.VerifierHash=e.slice(e.l,n),e.l=n,r}function Sje(e){var t=Lu(e);switch(t.Minor){case 2:return[t.Minor,_je(e)];case 3:return[t.Minor,Aje()];case 4:return[t.Minor,Cje(e)]}throw new Error("ECMA-376 Encrypted file unrecognized Version: "+t.Minor)}function _je(e){var t=e.read_shift(4);if((t&63)!=36)throw new Error("EncryptionInfo mismatch");var r=e.read_shift(4),n=T$(e,r),s=O$(e,e.length-e.l);return{t:"Std",h:n,v:s}}function Aje(){throw new Error("File is password-protected: ECMA-376 Extensible")}function Cje(e){var t=["saltSize","blockSize","keyBits","hashSize","cipherAlgorithm","cipherChaining","hashAlgorithm","saltValue"];e.l+=4;var r=e.read_shift(e.length-e.l,"utf8"),n={};return r.replace(po,function(i){var o=Vr(i);switch(Zd(o[0])){case"<?xml":break;case"<encryption":case"</encryption>":break;case"<keyData":t.forEach(function(l){n[l]=o[l]});break;case"<dataIntegrity":n.encryptedHmacKey=o.encryptedHmacKey,n.encryptedHmacValue=o.encryptedHmacValue;break;case"<keyEncryptors>":case"<keyEncryptors":n.encs=[];break;case"</keyEncryptors>":break;case"<keyEncryptor":n.uri=o.uri;break;case"</keyEncryptor>":break;case"<encryptedKey":n.encs.push(o);break;default:throw o[0]}}),n}function Eje(e,t){var r={},n=r.EncryptionVersionInfo=Lu(e,4);if(t-=4,n.Minor!=2)throw new Error("unrecognized minor version code: "+n.Minor);if(n.Major>4||n.Major<2)throw new Error("unrecognized major version code: "+n.Major);r.Flags=e.read_shift(4),t-=4;var s=e.read_shift(4);return t-=4,r.EncryptionHeader=T$(e,s),t-=s,r.EncryptionVerifier=O$(e,t),r}function Tje(e){var t={},r=t.EncryptionVersionInfo=Lu(e,4);if(r.Major!=1||r.Minor!=1)throw"unrecognized version code "+r.Major+" : "+r.Minor;return t.Salt=e.read_shift(16),t.EncryptedVerifier=e.read_shift(16),t.EncryptedVerifierHash=e.read_shift(16),t}function _A(e){var t=0,r,n=E$(e),s=n.length+1,i,o,l,c,d;for(r=h0(s),r[0]=n.length,i=1;i!=s;++i)r[i]=n[i-1];for(i=s-1;i>=0;--i)o=r[i],l=t&16384?1:0,c=t<<1&32767,d=l|c,t=d^o;return t^52811}var P$=function(){var e=[187,255,255,186,255,255,185,128,0,190,15,0,191,15,0],t=[57840,7439,52380,33984,4364,3600,61902,12606,6258,57657,54287,34041,10252,43370,20163],r=[44796,19929,39858,10053,20106,40212,10761,31585,63170,64933,60267,50935,40399,11199,17763,35526,1453,2906,5812,11624,23248,885,1770,3540,7080,14160,28320,56640,55369,41139,20807,41614,21821,43642,17621,28485,56970,44341,19019,38038,14605,29210,60195,50791,40175,10751,21502,43004,24537,18387,36774,3949,7898,15796,31592,63184,47201,24803,49606,37805,14203,28406,56812,17824,35648,1697,3394,6788,13576,27152,43601,17539,35078,557,1114,2228,4456,30388,60776,51953,34243,7079,14158,28316,14128,28256,56512,43425,17251,34502,7597,13105,26210,52420,35241,883,1766,3532,4129,8258,16516,33032,4657,9314,18628],n=function(o){return(o/2|o*128)&255},s=function(o,l){return n(o^l)},i=function(o){for(var l=t[o.length-1],c=104,d=o.length-1;d>=0;--d)for(var f=o[d],u=0;u!=7;++u)f&64&&(l^=r[c]),f*=2,--c;return l};return function(o){for(var l=E$(o),c=i(l),d=l.length,f=h0(16),u=0;u!=16;++u)f[u]=0;var p,h,m;for((d&1)===1&&(p=c>>8,f[d]=s(e[0],p),--d,p=c&255,h=l[l.length-1],f[d]=s(h,p));d>0;)--d,p=c>>8,f[d]=s(l[d],p),--d,p=c&255,f[d]=s(l[d],p);for(d=15,m=15-l.length;m>0;)p=c>>8,f[d]=s(e[m],p),--d,--m,p=c&255,f[d]=s(l[d],p),--d,--m;return f}}(),Oje=function(e,t,r,n,s){s||(s=t),n||(n=P$(e));var i,o;for(i=0;i!=t.length;++i)o=t[i],o^=n[r],o=(o>>5|o<<3)&255,s[i]=o,++r;return[s,r,n]},Pje=function(e){var t=0,r=P$(e);return function(n){var s=Oje("",n,t,r);return t=s[1],s[0]}};function Ije(e,t,r,n){var s={key:Bs(e),verificationBytes:Bs(e)};return r.password&&(s.verifier=_A(r.password)),n.valid=s.verificationBytes===s.verifier,n.valid&&(n.insitu=Pje(r.password)),s}function Dje(e,t,r){var n=r||{};return n.Info=e.read_shift(2),e.l-=2,n.Info===1?n.Data=Tje(e):n.Data=Eje(e,t),n}function Lje(e,t,r){var n={Type:r.biff>=8?e.read_shift(2):0};return n.Type?Dje(e,t-2,n):Ije(e,r.biff>=8?t:t-2,r,n),n}var I$=function(){function e(s,i){switch(i.type){case"base64":return t(Rl(s),i);case"binary":return t(s,i);case"buffer":return t(pn&&Buffer.isBuffer(s)?s.toString("binary"):E0(s),i);case"array":return t(ep(s),i)}throw new Error("Unrecognized type "+i.type)}function t(s,i){var o=i||{},l=o.dense?[]:{},c=s.match(/\\trowd.*?\\row\b/g);if(!c.length)throw new Error("RTF missing table");var d={s:{c:0,r:0},e:{c:0,r:c.length-1}};return c.forEach(function(f,u){Array.isArray(l)&&(l[u]=[]);for(var p=/\\\w+\b/g,h=0,m,g=-1;m=p.exec(f);){switch(m[0]){case"\\cell":var x=f.slice(h,p.lastIndex-m[0].length);if(x[0]==" "&&(x=x.slice(1)),++g,x.length){var v={v:x,t:"s"};Array.isArray(l)?l[u][g]=v:l[Wr({r:u,c:g})]=v}break}h=p.lastIndex}g>d.e.c&&(d.e.c=g)}),l["!ref"]=an(d),l}function r(s,i){return T0(e(s,i),i)}function n(s){for(var i=["{\\rtf1\\ansi"],o=Bn(s["!ref"]),l,c=Array.isArray(s),d=o.s.r;d<=o.e.r;++d){i.push("\\trowd\\trautofit1");for(var f=o.s.c;f<=o.e.c;++f)i.push("\\cellx"+(f+1));for(i.push("\\pard\\intbl"),f=o.s.c;f<=o.e.c;++f){var u=Wr({r:d,c:f});l=c?(s[d]||[])[f]:s[u],!(!l||l.v==null&&(!l.f||l.F))&&(i.push(" "+(l.w||(Vu(l),l.w))),i.push("\\cell"))}i.push("\\pard\\intbl\\row")}return i.join("")+"}"}return{to_workbook:r,to_sheet:e,from_sheet:n}}();function Fje(e){var t=e.slice(e[0]==="#"?1:0).slice(0,6);return[parseInt(t.slice(0,2),16),parseInt(t.slice(2,4),16),parseInt(t.slice(4,6),16)]}function D1(e){for(var t=0,r=1;t!=3;++t)r=r*256+(e[t]>255?255:e[t]<0?0:e[t]);return r.toString(16).toUpperCase().slice(1)}function Mje(e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,s=Math.max(t,r,n),i=Math.min(t,r,n),o=s-i;if(o===0)return[0,0,t];var l=0,c=0,d=s+i;switch(c=o/(d>1?2-d:d),s){case t:l=((r-n)/o+6)%6;break;case r:l=(n-t)/o+2;break;case n:l=(t-r)/o+4;break}return[l/6,c,d/2]}function Rje(e){var t=e[0],r=e[1],n=e[2],s=r*2*(n<.5?n:1-n),i=n-s/2,o=[i,i,i],l=6*t,c;if(r!==0)switch(l|0){case 0:case 6:c=s*l,o[0]+=s,o[1]+=c;break;case 1:c=s*(2-l),o[0]+=c,o[1]+=s;break;case 2:c=s*(l-2),o[1]+=s,o[2]+=c;break;case 3:c=s*(4-l),o[1]+=c,o[2]+=s;break;case 4:c=s*(l-4),o[2]+=s,o[0]+=c;break;case 5:c=s*(6-l),o[2]+=c,o[0]+=s;break}for(var d=0;d!=3;++d)o[d]=Math.round(o[d]*255);return o}function l5(e,t){if(t===0)return e;var r=Mje(Fje(e));return t<0?r[2]=r[2]*(1+t):r[2]=1-(1-r[2])*(1-t),D1(Rje(r))}var D$=6,Bje=15,$je=1,io=D$;function L1(e){return Math.floor((e+Math.round(128/io)/256)*io)}function F1(e){return Math.floor((e-5)/io*100+.5)/100}function c5(e){return Math.round((e*io+5)/io*256)/256}function c4(e){return c5(F1(L1(e)))}function AA(e){var t=Math.abs(e-c4(e)),r=io;if(t>.005)for(io=$je;io<Bje;++io)Math.abs(e-c4(e))<=t&&(t=Math.abs(e-c4(e)),r=io);io=r}function p0(e){e.width?(e.wpx=L1(e.width),e.wch=F1(e.wpx),e.MDW=io):e.wpx?(e.wch=F1(e.wpx),e.width=c5(e.wch),e.MDW=io):typeof e.wch=="number"&&(e.width=c5(e.wch),e.wpx=L1(e.width),e.MDW=io),e.customWidth&&delete e.customWidth}var Uje=96,L$=Uje;function M1(e){return e*96/L$}function Cx(e){return e*L$/96}var zje={None:"none",Solid:"solid",Gray50:"mediumGray",Gray75:"darkGray",Gray25:"lightGray",HorzStripe:"darkHorizontal",VertStripe:"darkVertical",ReverseDiagStripe:"darkDown",DiagStripe:"darkUp",DiagCross:"darkGrid",ThickDiagCross:"darkTrellis",ThinHorzStripe:"lightHorizontal",ThinVertStripe:"lightVertical",ThinReverseDiagStripe:"lightDown",ThinHorzCross:"lightGrid"};function qje(e,t,r,n){t.Borders=[];var s={},i=!1;(e[0].match(po)||[]).forEach(function(o){var l=Vr(o);switch(Zd(l[0])){case"<borders":case"<borders>":case"</borders>":break;case"<border":case"<border>":case"<border/>":s={},l.diagonalUp&&(s.diagonalUp=Oa(l.diagonalUp)),l.diagonalDown&&(s.diagonalDown=Oa(l.diagonalDown)),t.Borders.push(s);break;case"</border>":break;case"<left/>":break;case"<left":case"<left>":break;case"</left>":break;case"<right/>":break;case"<right":case"<right>":break;case"</right>":break;case"<top/>":break;case"<top":case"<top>":break;case"</top>":break;case"<bottom/>":break;case"<bottom":case"<bottom>":break;case"</bottom>":break;case"<diagonal":case"<diagonal>":case"<diagonal/>":break;case"</diagonal>":break;case"<horizontal":case"<horizontal>":case"<horizontal/>":break;case"</horizontal>":break;case"<vertical":case"<vertical>":case"<vertical/>":break;case"</vertical>":break;case"<start":case"<start>":case"<start/>":break;case"</start>":break;case"<end":case"<end>":case"<end/>":break;case"</end>":break;case"<color":case"<color>":break;case"<color/>":case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in borders")}})}function Hje(e,t,r,n){t.Fills=[];var s={},i=!1;(e[0].match(po)||[]).forEach(function(o){var l=Vr(o);switch(Zd(l[0])){case"<fills":case"<fills>":case"</fills>":break;case"<fill>":case"<fill":case"<fill/>":s={},t.Fills.push(s);break;case"</fill>":break;case"<gradientFill>":break;case"<gradientFill":case"</gradientFill>":t.Fills.push(s),s={};break;case"<patternFill":case"<patternFill>":l.patternType&&(s.patternType=l.patternType);break;case"<patternFill/>":case"</patternFill>":break;case"<bgColor":s.bgColor||(s.bgColor={}),l.indexed&&(s.bgColor.indexed=parseInt(l.indexed,10)),l.theme&&(s.bgColor.theme=parseInt(l.theme,10)),l.tint&&(s.bgColor.tint=parseFloat(l.tint)),l.rgb&&(s.bgColor.rgb=l.rgb.slice(-6));break;case"<bgColor/>":case"</bgColor>":break;case"<fgColor":s.fgColor||(s.fgColor={}),l.theme&&(s.fgColor.theme=parseInt(l.theme,10)),l.tint&&(s.fgColor.tint=parseFloat(l.tint)),l.rgb!=null&&(s.fgColor.rgb=l.rgb.slice(-6));break;case"<fgColor/>":case"</fgColor>":break;case"<stop":case"<stop/>":break;case"</stop>":break;case"<color":case"<color/>":break;case"</color>":break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fills")}})}function Wje(e,t,r,n){t.Fonts=[];var s={},i=!1;(e[0].match(po)||[]).forEach(function(o){var l=Vr(o);switch(Zd(l[0])){case"<fonts":case"<fonts>":case"</fonts>":break;case"<font":case"<font>":break;case"</font>":case"<font/>":t.Fonts.push(s),s={};break;case"<name":l.val&&(s.name=ua(l.val));break;case"<name/>":case"</name>":break;case"<b":s.bold=l.val?Oa(l.val):1;break;case"<b/>":s.bold=1;break;case"<i":s.italic=l.val?Oa(l.val):1;break;case"<i/>":s.italic=1;break;case"<u":switch(l.val){case"none":s.underline=0;break;case"single":s.underline=1;break;case"double":s.underline=2;break;case"singleAccounting":s.underline=33;break;case"doubleAccounting":s.underline=34;break}break;case"<u/>":s.underline=1;break;case"<strike":s.strike=l.val?Oa(l.val):1;break;case"<strike/>":s.strike=1;break;case"<outline":s.outline=l.val?Oa(l.val):1;break;case"<outline/>":s.outline=1;break;case"<shadow":s.shadow=l.val?Oa(l.val):1;break;case"<shadow/>":s.shadow=1;break;case"<condense":s.condense=l.val?Oa(l.val):1;break;case"<condense/>":s.condense=1;break;case"<extend":s.extend=l.val?Oa(l.val):1;break;case"<extend/>":s.extend=1;break;case"<sz":l.val&&(s.sz=+l.val);break;case"<sz/>":case"</sz>":break;case"<vertAlign":l.val&&(s.vertAlign=l.val);break;case"<vertAlign/>":case"</vertAlign>":break;case"<family":l.val&&(s.family=parseInt(l.val,10));break;case"<family/>":case"</family>":break;case"<scheme":l.val&&(s.scheme=l.val);break;case"<scheme/>":case"</scheme>":break;case"<charset":if(l.val=="1")break;l.codepage=tA[parseInt(l.val,10)];break;case"<color":if(s.color||(s.color={}),l.auto&&(s.color.auto=Oa(l.auto)),l.rgb)s.color.rgb=l.rgb.slice(-6);else if(l.indexed){s.color.index=parseInt(l.indexed,10);var c=Dh[s.color.index];s.color.index==81&&(c=Dh[1]),c||(c=Dh[1]),s.color.rgb=c[0].toString(16)+c[1].toString(16)+c[2].toString(16)}else l.theme&&(s.color.theme=parseInt(l.theme,10),l.tint&&(s.color.tint=parseFloat(l.tint)),l.theme&&r.themeElements&&r.themeElements.clrScheme&&(s.color.rgb=l5(r.themeElements.clrScheme[s.color.theme].rgb,s.color.tint||0)));break;case"<color/>":case"</color>":break;case"<AlternateContent":i=!0;break;case"</AlternateContent>":i=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":i=!0;break;case"</ext>":i=!1;break;default:if(n&&n.WTF&&!i)throw new Error("unrecognized "+l[0]+" in fonts")}})}function Vje(e,t,r){t.NumberFmt=[];for(var n=xs(Br),s=0;s<n.length;++s)t.NumberFmt[n[s]]=Br[n[s]];var i=e[0].match(po);if(i)for(s=0;s<i.length;++s){var o=Vr(i[s]);switch(Zd(o[0])){case"<numFmts":case"</numFmts>":case"<numFmts/>":case"<numFmts>":break;case"<numFmt":{var l=Mn(ua(o.formatCode)),c=parseInt(o.numFmtId,10);if(t.NumberFmt[c]=l,c>0){if(c>392){for(c=392;c>60&&t.NumberFmt[c]!=null;--c);t.NumberFmt[c]=l}Du(l,c)}}break;case"</numFmt>":break;default:if(r.WTF)throw new Error("unrecognized "+o[0]+" in numFmts")}}}function Gje(e){var t=["<numFmts>"];return[[5,8],[23,26],[41,44],[50,392]].forEach(function(r){for(var n=r[0];n<=r[1];++n)e[n]!=null&&(t[t.length]=Zt("numFmt",null,{numFmtId:n,formatCode:na(e[n])}))}),t.length===1?"":(t[t.length]="</numFmts>",t[0]=Zt("numFmts",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Fy=["numFmtId","fillId","fontId","borderId","xfId"],My=["applyAlignment","applyBorder","applyFill","applyFont","applyNumberFormat","applyProtection","pivotButton","quotePrefix"];function Kje(e,t,r){t.CellXf=[];var n,s=!1;(e[0].match(po)||[]).forEach(function(i){var o=Vr(i),l=0;switch(Zd(o[0])){case"<cellXfs":case"<cellXfs>":case"<cellXfs/>":case"</cellXfs>":break;case"<xf":case"<xf/>":for(n=o,delete n[0],l=0;l<Fy.length;++l)n[Fy[l]]&&(n[Fy[l]]=parseInt(n[Fy[l]],10));for(l=0;l<My.length;++l)n[My[l]]&&(n[My[l]]=Oa(n[My[l]]));if(t.NumberFmt&&n.numFmtId>392){for(l=392;l>60;--l)if(t.NumberFmt[n.numFmtId]==t.NumberFmt[l]){n.numFmtId=l;break}}t.CellXf.push(n);break;case"</xf>":break;case"<alignment":case"<alignment/>":var c={};o.vertical&&(c.vertical=o.vertical),o.horizontal&&(c.horizontal=o.horizontal),o.textRotation!=null&&(c.textRotation=o.textRotation),o.indent&&(c.indent=o.indent),o.wrapText&&(c.wrapText=Oa(o.wrapText)),n.alignment=c;break;case"</alignment>":break;case"<protection":break;case"</protection>":case"<protection/>":break;case"<AlternateContent":s=!0;break;case"</AlternateContent>":s=!1;break;case"<extLst":case"<extLst>":case"</extLst>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;default:if(r&&r.WTF&&!s)throw new Error("unrecognized "+o[0]+" in cellXfs")}})}function Xje(e){var t=[];return t[t.length]=Zt("cellXfs",null),e.forEach(function(r){t[t.length]=Zt("xf",null,r)}),t[t.length]="</cellXfs>",t.length===2?"":(t[0]=Zt("cellXfs",null,{count:t.length-2}).replace("/>",">"),t.join(""))}var Yje=function(){var t=/<(?:\w+:)?numFmts([^>]*)>[\S\s]*?<\/(?:\w+:)?numFmts>/,r=/<(?:\w+:)?cellXfs([^>]*)>[\S\s]*?<\/(?:\w+:)?cellXfs>/,n=/<(?:\w+:)?fills([^>]*)>[\S\s]*?<\/(?:\w+:)?fills>/,s=/<(?:\w+:)?fonts([^>]*)>[\S\s]*?<\/(?:\w+:)?fonts>/,i=/<(?:\w+:)?borders([^>]*)>[\S\s]*?<\/(?:\w+:)?borders>/;return function(l,c,d){var f={};if(!l)return f;l=l.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");var u;return(u=l.match(t))&&Vje(u,f,d),(u=l.match(s))&&Wje(u,f,c,d),(u=l.match(n))&&Hje(u,f,c,d),(u=l.match(i))&&qje(u,f,c,d),(u=l.match(r))&&Kje(u,f,d),f}}();function F$(e,t){var r=[Es,Zt("styleSheet",null,{xmlns:fp[0],"xmlns:vt":ti.vt})],n;return e.SSF&&(n=Gje(e.SSF))!=null&&(r[r.length]=n),r[r.length]='<fonts count="1"><font><sz val="12"/><color theme="1"/><name val="Calibri"/><family val="2"/><scheme val="minor"/></font></fonts>',r[r.length]='<fills count="2"><fill><patternFill patternType="none"/></fill><fill><patternFill patternType="gray125"/></fill></fills>',r[r.length]='<borders count="1"><border><left/><right/><top/><bottom/><diagonal/></border></borders>',r[r.length]='<cellStyleXfs count="1"><xf numFmtId="0" fontId="0" fillId="0" borderId="0"/></cellStyleXfs>',(n=Xje(t.cellXfs))&&(r[r.length]=n),r[r.length]='<cellStyles count="1"><cellStyle name="Normal" xfId="0" builtinId="0"/></cellStyles>',r[r.length]='<dxfs count="0"/>',r[r.length]='<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium4"/>',r.length>2&&(r[r.length]="</styleSheet>",r[1]=r[1].replace("/>",">")),r.join("")}function Qje(e,t){var r=e.read_shift(2),n=uo(e);return[r,n]}function Jje(e,t,r){r||(r=jt(6+4*t.length)),r.write_shift(2,e),Ni(t,r);var n=r.length>r.l?r.slice(0,r.l):r;return r.l==null&&(r.l=r.length),n}function Zje(e,t,r){var n={};n.sz=e.read_shift(2)/20;var s=Dwe(e);s.fItalic&&(n.italic=1),s.fCondense&&(n.condense=1),s.fExtend&&(n.extend=1),s.fShadow&&(n.shadow=1),s.fOutline&&(n.outline=1),s.fStrikeout&&(n.strike=1);var i=e.read_shift(2);switch(i===700&&(n.bold=1),e.read_shift(2)){case 1:n.vertAlign="superscript";break;case 2:n.vertAlign="subscript";break}var o=e.read_shift(1);o!=0&&(n.underline=o);var l=e.read_shift(1);l>0&&(n.family=l);var c=e.read_shift(1);switch(c>0&&(n.charset=c),e.l++,n.color=Iwe(e),e.read_shift(1)){case 1:n.scheme="major";break;case 2:n.scheme="minor";break}return n.name=uo(e),n}function e4e(e,t){t||(t=jt(25+4*32)),t.write_shift(2,e.sz*20),Lwe(e,t),t.write_shift(2,e.bold?700:400);var r=0;e.vertAlign=="superscript"?r=1:e.vertAlign=="subscript"&&(r=2),t.write_shift(2,r),t.write_shift(1,e.underline||0),t.write_shift(1,e.family||0),t.write_shift(1,e.charset||0),t.write_shift(1,0),s5(e.color,t);var n=0;return n=2,t.write_shift(1,n),Ni(e.name,t),t.length>t.l?t.slice(0,t.l):t}var t4e=["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],d4,r4e=ho;function C8(e,t){t||(t=jt(4*3+8*7+16*1)),d4||(d4=CN(t4e));var r=d4[e.patternType];r==null&&(r=40),t.write_shift(4,r);var n=0;if(r!=40)for(s5({auto:1},t),s5({auto:1},t);n<12;++n)t.write_shift(4,0);else{for(;n<4;++n)t.write_shift(4,0);for(;n<12;++n)t.write_shift(4,0)}return t.length>t.l?t.slice(0,t.l):t}function n4e(e,t){var r=e.l+t,n=e.read_shift(2),s=e.read_shift(2);return e.l=r,{ixfe:n,numFmtId:s}}function M$(e,t,r){r||(r=jt(16)),r.write_shift(2,t||0),r.write_shift(2,e.numFmtId||0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(1,0),r.write_shift(1,0);var n=0;return r.write_shift(1,n),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(1,0),r}function $g(e,t){return t||(t=jt(10)),t.write_shift(1,0),t.write_shift(1,0),t.write_shift(4,0),t.write_shift(4,0),t}var a4e=ho;function s4e(e,t){return t||(t=jt(51)),t.write_shift(1,0),$g(null,t),$g(null,t),$g(null,t),$g(null,t),$g(null,t),t.length>t.l?t.slice(0,t.l):t}function i4e(e,t){return t||(t=jt(12+4*10)),t.write_shift(4,e.xfId),t.write_shift(2,1),t.write_shift(1,0),t.write_shift(1,0),a5(e.name||"",t),t.length>t.l?t.slice(0,t.l):t}function o4e(e,t,r){var n=jt(2052);return n.write_shift(4,e),a5(t,n),a5(r,n),n.length>n.l?n.slice(0,n.l):n}function l4e(e,t,r){var n={};n.NumberFmt=[];for(var s in Br)n.NumberFmt[s]=Br[s];n.CellXf=[],n.Fonts=[];var i=[],o=!1;return Ju(e,function(c,d,f){switch(f){case 44:n.NumberFmt[c[0]]=c[1],Du(c[1],c[0]);break;case 43:n.Fonts.push(c),c.color.theme!=null&&t&&t.themeElements&&t.themeElements.clrScheme&&(c.color.rgb=l5(t.themeElements.clrScheme[c.color.theme].rgb,c.color.tint||0));break;case 1025:break;case 45:break;case 46:break;case 47:i[i.length-1]==617&&n.CellXf.push(c);break;case 48:case 507:case 572:case 475:break;case 1171:case 2102:case 1130:case 512:case 2095:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:i.push(f),o=!0;break;case 38:i.pop(),o=!1;break;default:if(d.T>0)i.push(f);else if(d.T<0)i.pop();else if(!o||r.WTF&&i[i.length-1]!=37)throw new Error("Unexpected record 0x"+f.toString(16))}}),n}function c4e(e,t){if(t){var r=0;[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&++r}),r!=0&&(Lt(e,615,od(r)),[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&Lt(e,44,Jje(s,t[s]))}),Lt(e,616))}}function d4e(e){var t=1;Lt(e,611,od(t)),Lt(e,43,e4e({sz:12,color:{theme:1},name:"Calibri",family:2})),Lt(e,612)}function u4e(e){var t=2;Lt(e,603,od(t)),Lt(e,45,C8({patternType:"none"})),Lt(e,45,C8({patternType:"gray125"})),Lt(e,604)}function f4e(e){var t=1;Lt(e,613,od(t)),Lt(e,46,s4e()),Lt(e,614)}function h4e(e){var t=1;Lt(e,626,od(t)),Lt(e,47,M$({numFmtId:0},65535)),Lt(e,627)}function p4e(e,t){Lt(e,617,od(t.length)),t.forEach(function(r){Lt(e,47,M$(r,0))}),Lt(e,618)}function m4e(e){var t=1;Lt(e,619,od(t)),Lt(e,48,i4e({xfId:0,name:"Normal"})),Lt(e,620)}function x4e(e){var t=0;Lt(e,505,od(t)),Lt(e,506)}function g4e(e){var t=0;Lt(e,508,o4e(t,"TableStyleMedium9","PivotStyleMedium4")),Lt(e,509)}function v4e(e,t){var r=sl();return Lt(r,278),c4e(r,e.SSF),d4e(r),u4e(r),f4e(r),h4e(r),p4e(r,t.cellXfs),m4e(r),x4e(r),g4e(r),Lt(r,279),r.end()}var b4e=["</a:lt1>","</a:dk1>","</a:lt2>","</a:dk2>","</a:accent1>","</a:accent2>","</a:accent3>","</a:accent4>","</a:accent5>","</a:accent6>","</a:hlink>","</a:folHlink>"];function y4e(e,t,r){t.themeElements.clrScheme=[];var n={};(e[0].match(po)||[]).forEach(function(s){var i=Vr(s);switch(i[0]){case"<a:clrScheme":case"</a:clrScheme>":break;case"<a:srgbClr":n.rgb=i.val;break;case"<a:sysClr":n.rgb=i.lastClr;break;case"<a:dk1>":case"</a:dk1>":case"<a:lt1>":case"</a:lt1>":case"<a:dk2>":case"</a:dk2>":case"<a:lt2>":case"</a:lt2>":case"<a:accent1>":case"</a:accent1>":case"<a:accent2>":case"</a:accent2>":case"<a:accent3>":case"</a:accent3>":case"<a:accent4>":case"</a:accent4>":case"<a:accent5>":case"</a:accent5>":case"<a:accent6>":case"</a:accent6>":case"<a:hlink>":case"</a:hlink>":case"<a:folHlink>":case"</a:folHlink>":i[0].charAt(1)==="/"?(t.themeElements.clrScheme[b4e.indexOf(i[0])]=n,n={}):n.name=i[0].slice(3,i[0].length-1);break;default:if(r&&r.WTF)throw new Error("Unrecognized "+i[0]+" in clrScheme")}})}function w4e(){}function N4e(){}var j4e=/<a:clrScheme([^>]*)>[\s\S]*<\/a:clrScheme>/,k4e=/<a:fontScheme([^>]*)>[\s\S]*<\/a:fontScheme>/,S4e=/<a:fmtScheme([^>]*)>[\s\S]*<\/a:fmtScheme>/;function _4e(e,t,r){t.themeElements={};var n;[["clrScheme",j4e,y4e],["fontScheme",k4e,w4e],["fmtScheme",S4e,N4e]].forEach(function(s){if(!(n=e.match(s[1])))throw new Error(s[0]+" not found in themeElements");s[2](n,t,r)})}var A4e=/<a:themeElements([^>]*)>[\s\S]*<\/a:themeElements>/;function R$(e,t){(!e||e.length===0)&&(e=CA());var r,n={};if(!(r=e.match(A4e)))throw new Error("themeElements not found in theme");return _4e(r[0],n,t),n.raw=e,n}function CA(e,t){if(t&&t.themeXLSX)return t.themeXLSX;if(e&&typeof e.raw=="string")return e.raw;var r=[Es];return r[r.length]='<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',r[r.length]="<a:themeElements>",r[r.length]='<a:clrScheme name="Office">',r[r.length]='<a:dk1><a:sysClr val="windowText" lastClr="000000"/></a:dk1>',r[r.length]='<a:lt1><a:sysClr val="window" lastClr="FFFFFF"/></a:lt1>',r[r.length]='<a:dk2><a:srgbClr val="1F497D"/></a:dk2>',r[r.length]='<a:lt2><a:srgbClr val="EEECE1"/></a:lt2>',r[r.length]='<a:accent1><a:srgbClr val="4F81BD"/></a:accent1>',r[r.length]='<a:accent2><a:srgbClr val="C0504D"/></a:accent2>',r[r.length]='<a:accent3><a:srgbClr val="9BBB59"/></a:accent3>',r[r.length]='<a:accent4><a:srgbClr val="8064A2"/></a:accent4>',r[r.length]='<a:accent5><a:srgbClr val="4BACC6"/></a:accent5>',r[r.length]='<a:accent6><a:srgbClr val="F79646"/></a:accent6>',r[r.length]='<a:hlink><a:srgbClr val="0000FF"/></a:hlink>',r[r.length]='<a:folHlink><a:srgbClr val="800080"/></a:folHlink>',r[r.length]="</a:clrScheme>",r[r.length]='<a:fontScheme name="Office">',r[r.length]="<a:majorFont>",r[r.length]='<a:latin typeface="Cambria"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Times New Roman"/>',r[r.length]='<a:font script="Hebr" typeface="Times New Roman"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="MoolBoran"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Times New Roman"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:majorFont>",r[r.length]="<a:minorFont>",r[r.length]='<a:latin typeface="Calibri"/>',r[r.length]='<a:ea typeface=""/>',r[r.length]='<a:cs typeface=""/>',r[r.length]='<a:font script="Jpan" typeface=" "/>',r[r.length]='<a:font script="Hang" typeface=" "/>',r[r.length]='<a:font script="Hans" typeface=""/>',r[r.length]='<a:font script="Hant" typeface=""/>',r[r.length]='<a:font script="Arab" typeface="Arial"/>',r[r.length]='<a:font script="Hebr" typeface="Arial"/>',r[r.length]='<a:font script="Thai" typeface="Tahoma"/>',r[r.length]='<a:font script="Ethi" typeface="Nyala"/>',r[r.length]='<a:font script="Beng" typeface="Vrinda"/>',r[r.length]='<a:font script="Gujr" typeface="Shruti"/>',r[r.length]='<a:font script="Khmr" typeface="DaunPenh"/>',r[r.length]='<a:font script="Knda" typeface="Tunga"/>',r[r.length]='<a:font script="Guru" typeface="Raavi"/>',r[r.length]='<a:font script="Cans" typeface="Euphemia"/>',r[r.length]='<a:font script="Cher" typeface="Plantagenet Cherokee"/>',r[r.length]='<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>',r[r.length]='<a:font script="Tibt" typeface="Microsoft Himalaya"/>',r[r.length]='<a:font script="Thaa" typeface="MV Boli"/>',r[r.length]='<a:font script="Deva" typeface="Mangal"/>',r[r.length]='<a:font script="Telu" typeface="Gautami"/>',r[r.length]='<a:font script="Taml" typeface="Latha"/>',r[r.length]='<a:font script="Syrc" typeface="Estrangelo Edessa"/>',r[r.length]='<a:font script="Orya" typeface="Kalinga"/>',r[r.length]='<a:font script="Mlym" typeface="Kartika"/>',r[r.length]='<a:font script="Laoo" typeface="DokChampa"/>',r[r.length]='<a:font script="Sinh" typeface="Iskoola Pota"/>',r[r.length]='<a:font script="Mong" typeface="Mongolian Baiti"/>',r[r.length]='<a:font script="Viet" typeface="Arial"/>',r[r.length]='<a:font script="Uigh" typeface="Microsoft Uighur"/>',r[r.length]='<a:font script="Geor" typeface="Sylfaen"/>',r[r.length]="</a:minorFont>",r[r.length]="</a:fontScheme>",r[r.length]='<a:fmtScheme name="Office">',r[r.length]="<a:fillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="50000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="35000"><a:schemeClr val="phClr"><a:tint val="37000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="15000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="1"/>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="100000"/><a:shade val="100000"/><a:satMod val="130000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:tint val="50000"/><a:shade val="100000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:lin ang="16200000" scaled="0"/>',r[r.length]="</a:gradFill>",r[r.length]="</a:fillStyleLst>",r[r.length]="<a:lnStyleLst>",r[r.length]='<a:ln w="9525" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"><a:shade val="95000"/><a:satMod val="105000"/></a:schemeClr></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="25400" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]='<a:ln w="38100" cap="flat" cmpd="sng" algn="ctr"><a:solidFill><a:schemeClr val="phClr"/></a:solidFill><a:prstDash val="solid"/></a:ln>',r[r.length]="</a:lnStyleLst>",r[r.length]="<a:effectStyleLst>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="20000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="38000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]="</a:effectStyle>",r[r.length]="<a:effectStyle>",r[r.length]="<a:effectLst>",r[r.length]='<a:outerShdw blurRad="40000" dist="23000" dir="5400000" rotWithShape="0"><a:srgbClr val="000000"><a:alpha val="35000"/></a:srgbClr></a:outerShdw>',r[r.length]="</a:effectLst>",r[r.length]='<a:scene3d><a:camera prst="orthographicFront"><a:rot lat="0" lon="0" rev="0"/></a:camera><a:lightRig rig="threePt" dir="t"><a:rot lat="0" lon="0" rev="1200000"/></a:lightRig></a:scene3d>',r[r.length]='<a:sp3d><a:bevelT w="63500" h="25400"/></a:sp3d>',r[r.length]="</a:effectStyle>",r[r.length]="</a:effectStyleLst>",r[r.length]="<a:bgFillStyleLst>",r[r.length]='<a:solidFill><a:schemeClr val="phClr"/></a:solidFill>',r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="40000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="40000"><a:schemeClr val="phClr"><a:tint val="45000"/><a:shade val="99000"/><a:satMod val="350000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="20000"/><a:satMod val="255000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="-80000" r="50000" b="180000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]='<a:gradFill rotWithShape="1">',r[r.length]="<a:gsLst>",r[r.length]='<a:gs pos="0"><a:schemeClr val="phClr"><a:tint val="80000"/><a:satMod val="300000"/></a:schemeClr></a:gs>',r[r.length]='<a:gs pos="100000"><a:schemeClr val="phClr"><a:shade val="30000"/><a:satMod val="200000"/></a:schemeClr></a:gs>',r[r.length]="</a:gsLst>",r[r.length]='<a:path path="circle"><a:fillToRect l="50000" t="50000" r="50000" b="50000"/></a:path>',r[r.length]="</a:gradFill>",r[r.length]="</a:bgFillStyleLst>",r[r.length]="</a:fmtScheme>",r[r.length]="</a:themeElements>",r[r.length]="<a:objectDefaults>",r[r.length]="<a:spDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="1"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="3"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="2"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="lt1"/></a:fontRef></a:style>',r[r.length]="</a:spDef>",r[r.length]="<a:lnDef>",r[r.length]='<a:spPr/><a:bodyPr/><a:lstStyle/><a:style><a:lnRef idx="2"><a:schemeClr val="accent1"/></a:lnRef><a:fillRef idx="0"><a:schemeClr val="accent1"/></a:fillRef><a:effectRef idx="1"><a:schemeClr val="accent1"/></a:effectRef><a:fontRef idx="minor"><a:schemeClr val="tx1"/></a:fontRef></a:style>',r[r.length]="</a:lnDef>",r[r.length]="</a:objectDefaults>",r[r.length]="<a:extraClrSchemeLst/>",r[r.length]="</a:theme>",r.join("")}function C4e(e,t,r){var n=e.l+t,s=e.read_shift(4);if(s!==124226){if(!r.cellStyles){e.l=n;return}var i=e.slice(e.l);e.l=n;var o;try{o=TB(i,{type:"array"})}catch{return}var l=Ol(o,"theme/theme/theme1.xml",!0);if(l)return R$(l,r)}}function E4e(e){return e.read_shift(4)}function T4e(e){var t={};switch(t.xclrType=e.read_shift(2),t.nTintShade=e.read_shift(2),t.xclrType){case 0:e.l+=4;break;case 1:t.xclrValue=O4e(e,4);break;case 2:t.xclrValue=g$(e);break;case 3:t.xclrValue=E4e(e);break;case 4:e.l+=4;break}return e.l+=8,t}function O4e(e,t){return ho(e,t)}function P4e(e,t){return ho(e,t)}function I4e(e){var t=e.read_shift(2),r=e.read_shift(2)-4,n=[t];switch(t){case 4:case 5:case 7:case 8:case 9:case 10:case 11:case 13:n[1]=T4e(e);break;case 6:n[1]=P4e(e,r);break;case 14:case 15:n[1]=e.read_shift(r===1?1:2);break;default:throw new Error("Unrecognized ExtProp type: "+t+" "+r)}return n}function D4e(e,t){var r=e.l+t;e.l+=2;var n=e.read_shift(2);e.l+=2;for(var s=e.read_shift(2),i=[];s-- >0;)i.push(I4e(e,r-e.l));return{ixfe:n,ext:i}}function L4e(e,t){t.forEach(function(r){switch(r[0]){}})}function F4e(e,t){return{flags:e.read_shift(4),version:e.read_shift(4),name:uo(e)}}function M4e(e){var t=jt(12+2*e.name.length);return t.write_shift(4,e.flags),t.write_shift(4,e.version),Ni(e.name,t),t.slice(0,t.l)}function R4e(e){for(var t=[],r=e.read_shift(4);r-- >0;)t.push([e.read_shift(4),e.read_shift(4)]);return t}function B4e(e){var t=jt(4+8*e.length);t.write_shift(4,e.length);for(var r=0;r<e.length;++r)t.write_shift(4,e[r][0]),t.write_shift(4,e[r][1]);return t}function $4e(e,t){var r=jt(8+2*t.length);return r.write_shift(4,e),Ni(t,r),r.slice(0,r.l)}function U4e(e){return e.l+=4,e.read_shift(4)!=0}function z4e(e,t){var r=jt(8);return r.write_shift(4,e),r.write_shift(4,1),r}function q4e(e,t,r){var n={Types:[],Cell:[],Value:[]},s=r||{},i=[],o=!1,l=2;return Ju(e,function(c,d,f){switch(f){case 335:n.Types.push({name:c.name});break;case 51:c.forEach(function(u){l==1?n.Cell.push({type:n.Types[u[0]-1].name,index:u[1]}):l==0&&n.Value.push({type:n.Types[u[0]-1].name,index:u[1]})});break;case 337:l=c?1:0;break;case 338:l=2;break;case 35:i.push(f),o=!0;break;case 36:i.pop(),o=!1;break;default:if(!d.T){if(!o||s.WTF&&i[i.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}}),n}function H4e(){var e=sl();return Lt(e,332),Lt(e,334,od(1)),Lt(e,335,M4e({name:"XLDAPR",version:12e4,flags:3496657072})),Lt(e,336),Lt(e,339,$4e(1,"XLDAPR")),Lt(e,52),Lt(e,35,od(514)),Lt(e,4096,od(0)),Lt(e,4097,sc(1)),Lt(e,36),Lt(e,53),Lt(e,340),Lt(e,337,z4e(1)),Lt(e,51,B4e([[1,0]])),Lt(e,338),Lt(e,333),e.end()}function W4e(e,t,r){var n={Types:[],Cell:[],Value:[]};if(!e)return n;var s=!1,i=2,o;return e.replace(po,function(l){var c=Vr(l);switch(Zd(c[0])){case"<?xml":break;case"<metadata":case"</metadata>":break;case"<metadataTypes":case"</metadataTypes>":break;case"<metadataType":n.Types.push({name:c.name});break;case"</metadataType>":break;case"<futureMetadata":for(var d=0;d<n.Types.length;++d)n.Types[d].name==c.name&&(o=n.Types[d]);break;case"</futureMetadata>":break;case"<bk>":break;case"</bk>":break;case"<rc":i==1?n.Cell.push({type:n.Types[c.t-1].name,index:+c.v}):i==0&&n.Value.push({type:n.Types[c.t-1].name,index:+c.v});break;case"</rc>":break;case"<cellMetadata":i=1;break;case"</cellMetadata>":i=2;break;case"<valueMetadata":i=0;break;case"</valueMetadata>":i=2;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":s=!0;break;case"</ext>":s=!1;break;case"<rvb":if(!o)break;o.offsets||(o.offsets=[]),o.offsets.push(+c.i);break;default:if(!s&&r.WTF)throw new Error("unrecognized "+c[0]+" in metadata")}return l}),n}function B$(){var e=[Es];return e.push(`<metadata xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" xmlns:xlrd="http://schemas.microsoft.com/office/spreadsheetml/2017/richdata" xmlns:xda="http://schemas.microsoft.com/office/spreadsheetml/2017/dynamicarray">
  <metadataTypes count="1">
    <metadataType name="XLDAPR" minSupportedVersion="120000" copy="1" pasteAll="1" pasteValues="1" merge="1" splitFirst="1" rowColShift="1" clearFormats="1" clearComments="1" assign="1" coerce="1" cellMeta="1"/>
  </metadataTypes>
  <futureMetadata name="XLDAPR" count="1">
    <bk>
      <extLst>
        <ext uri="{bdbb8cdc-fa1e-496e-a857-3c3f30c029c3}">
          <xda:dynamicArrayProperties fDynamic="1" fCollapsed="0"/>
        </ext>
      </extLst>
    </bk>
  </futureMetadata>
  <cellMetadata count="1">
    <bk>
      <rc t="1" v="0"/>
    </bk>
  </cellMetadata>
</metadata>`),e.join("")}function V4e(e){var t=[];if(!e)return t;var r=1;return(e.match(po)||[]).forEach(function(n){var s=Vr(n);switch(s[0]){case"<?xml":break;case"<calcChain":case"<calcChain>":case"</calcChain>":break;case"<c":delete s[0],s.i?r=s.i:s.i=r,t.push(s);break}}),t}function G4e(e){var t={};t.i=e.read_shift(4);var r={};r.r=e.read_shift(4),r.c=e.read_shift(4),t.r=Wr(r);var n=e.read_shift(1);return n&2&&(t.l="1"),n&8&&(t.a="1"),t}function K4e(e,t,r){var n=[];return Ju(e,function(i,o,l){switch(l){case 63:n.push(i);break;default:if(!o.T)throw new Error("Unexpected record 0x"+l.toString(16))}}),n}function X4e(e,t,r,n){if(!e)return e;var s=n||{},i=!1;Ju(e,function(l,c,d){switch(d){case 359:case 363:case 364:case 366:case 367:case 368:case 369:case 370:case 371:case 472:case 577:case 578:case 579:case 580:case 581:case 582:case 583:case 584:case 585:case 586:case 587:break;case 35:i=!0;break;case 36:i=!1;break;default:if(!c.T){if(!i||s.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}},s)}function Y4e(e,t){if(!e)return"??";var r=(e.match(/<c:chart [^>]*r:id="([^"]*)"/)||["",""])[1];return t["!id"][r].Target}var gm=1024;function $$(e,t){for(var r=[21600,21600],n=["m0,0l0",r[1],r[0],r[1],r[0],"0xe"].join(","),s=[Zt("xml",null,{"xmlns:v":Al.v,"xmlns:o":Al.o,"xmlns:x":Al.x,"xmlns:mv":Al.mv}).replace(/\/>/,">"),Zt("o:shapelayout",Zt("o:idmap",null,{"v:ext":"edit",data:e}),{"v:ext":"edit"}),Zt("v:shapetype",[Zt("v:stroke",null,{joinstyle:"miter"}),Zt("v:path",null,{gradientshapeok:"t","o:connecttype":"rect"})].join(""),{id:"_x0000_t202","o:spt":202,coordsize:r.join(","),path:n})];gm<e*1e3;)gm+=1e3;return t.forEach(function(i){var o=Za(i[0]),l={color2:"#BEFF82",type:"gradient"};l.type=="gradient"&&(l.angle="-180");var c=l.type=="gradient"?Zt("o:fill",null,{type:"gradientUnscaled","v:ext":"view"}):null,d=Zt("v:fill",c,l),f={on:"t",obscured:"t"};++gm,s=s.concat(["<v:shape"+O1({id:"_x0000_s"+gm,type:"#_x0000_t202",style:"position:absolute; margin-left:80pt;margin-top:5pt;width:104pt;height:64pt;z-index:10"+(i[1].hidden?";visibility:hidden":""),fillcolor:"#ECFAD4",strokecolor:"#edeaa1"})+">",d,Zt("v:shadow",null,f),Zt("v:path",null,{"o:connecttype":"none"}),'<v:textbox><div style="text-align:left"></div></v:textbox>','<x:ClientData ObjectType="Note">',"<x:MoveWithCells/>","<x:SizeWithCells/>",Ii("x:Anchor",[o.c+1,0,o.r+1,0,o.c+3,20,o.r+5,20].join(",")),Ii("x:AutoFill","False"),Ii("x:Row",String(o.r)),Ii("x:Column",String(o.c)),i[1].hidden?"":"<x:Visible/>","</x:ClientData>","</v:shape>"])}),s.push("</xml>"),s.join("")}function E8(e,t,r,n){var s=Array.isArray(e),i;t.forEach(function(o){var l=Za(o.ref);if(s?(e[l.r]||(e[l.r]=[]),i=e[l.r][l.c]):i=e[o.ref],!i){i={t:"z"},s?e[l.r][l.c]=i:e[o.ref]=i;var c=Bn(e["!ref"]||"BDWGO1000001:A1");c.s.r>l.r&&(c.s.r=l.r),c.e.r<l.r&&(c.e.r=l.r),c.s.c>l.c&&(c.s.c=l.c),c.e.c<l.c&&(c.e.c=l.c);var d=an(c);d!==e["!ref"]&&(e["!ref"]=d)}i.c||(i.c=[]);var f={a:o.author,t:o.t,r:o.r,T:r};o.h&&(f.h=o.h);for(var u=i.c.length-1;u>=0;--u){if(!r&&i.c[u].T)return;r&&!i.c[u].T&&i.c.splice(u,1)}if(r&&n){for(u=0;u<n.length;++u)if(f.a==n[u].id){f.a=n[u].name||f.a;break}}i.c.push(f)})}function Q4e(e,t){if(e.match(/<(?:\w+:)?comments *\/>/))return[];var r=[],n=[],s=e.match(/<(?:\w+:)?authors>([\s\S]*)<\/(?:\w+:)?authors>/);s&&s[1]&&s[1].split(/<\/\w*:?author>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?author[^>]*>(.*)/);l&&r.push(l[1])}});var i=e.match(/<(?:\w+:)?commentList>([\s\S]*)<\/(?:\w+:)?commentList>/);return i&&i[1]&&i[1].split(/<\/\w*:?comment>/).forEach(function(o){if(!(o===""||o.trim()==="")){var l=o.match(/<(?:\w+:)?comment[^>]*>/);if(l){var c=Vr(l[0]),d={author:c.authorId&&r[c.authorId]||"sheetjsghost",ref:c.ref,guid:c.guid},f=Za(c.ref);if(!(t.sheetRows&&t.sheetRows<=f.r)){var u=o.match(/<(?:\w+:)?text>([\s\S]*)<\/(?:\w+:)?text>/),p=!!u&&!!u[1]&&SA(u[1])||{r:"",t:"",h:""};d.r=p.r,p.r=="<t></t>"&&(p.t=p.h=""),d.t=(p.t||"").replace(/\r\n/g,`
`).replace(/\r/g,`
`),t.cellHTML&&(d.h=p.h),n.push(d)}}}}),n}function U$(e){var t=[Es,Zt("comments",null,{xmlns:fp[0]})],r=[];return t.push("<authors>"),e.forEach(function(n){n[1].forEach(function(s){var i=na(s.a);r.indexOf(i)==-1&&(r.push(i),t.push("<author>"+i+"</author>")),s.T&&s.ID&&r.indexOf("tc="+s.ID)==-1&&(r.push("tc="+s.ID),t.push("<author>tc="+s.ID+"</author>"))})}),r.length==0&&(r.push("SheetJ5"),t.push("<author>SheetJ5</author>")),t.push("</authors>"),t.push("<commentList>"),e.forEach(function(n){var s=0,i=[];if(n[1][0]&&n[1][0].T&&n[1][0].ID?s=r.indexOf("tc="+n[1][0].ID):n[1].forEach(function(c){c.a&&(s=r.indexOf(na(c.a))),i.push(c.t||"")}),t.push('<comment ref="'+n[0]+'" authorId="'+s+'"><text>'),i.length<=1)t.push(Ii("t",na(i[0]||"")));else{for(var o=`Comment:
    `+i[0]+`
`,l=1;l<i.length;++l)o+=`Reply:
    `+i[l]+`
`;t.push(Ii("t",na(o)))}t.push("</text></comment>")}),t.push("</commentList>"),t.length>2&&(t[t.length]="</comments>",t[1]=t[1].replace("/>",">")),t.join("")}function J4e(e,t){var r=[],n=!1,s={},i=0;return e.replace(po,function(l,c){var d=Vr(l);switch(Zd(d[0])){case"<?xml":break;case"<ThreadedComments":break;case"</ThreadedComments>":break;case"<threadedComment":s={author:d.personId,guid:d.id,ref:d.ref,T:1};break;case"</threadedComment>":s.t!=null&&r.push(s);break;case"<text>":case"<text":i=c+l.length;break;case"</text>":s.t=e.slice(i,c).replace(/\r\n/g,`
`).replace(/\r/g,`
`);break;case"<mentions":case"<mentions>":n=!0;break;case"</mentions>":n=!1;break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+d[0]+" in threaded comments")}return l}),r}function Z4e(e,t,r){var n=[Es,Zt("ThreadedComments",null,{xmlns:ti.TCMNT}).replace(/[\/]>/,">")];return e.forEach(function(s){var i="";(s[1]||[]).forEach(function(o,l){if(!o.T){delete o.ID;return}o.a&&t.indexOf(o.a)==-1&&t.push(o.a);var c={ref:s[0],id:"{54EE7951-7262-4200-6969-"+("000000000000"+r.tcid++).slice(-12)+"}"};l==0?i=c.id:c.parentId=i,o.ID=c.id,o.a&&(c.personId="{54EE7950-7262-4200-6969-"+("000000000000"+t.indexOf(o.a)).slice(-12)+"}"),n.push(Zt("threadedComment",Ii("text",o.t||""),c))})}),n.push("</ThreadedComments>"),n.join("")}function eke(e,t){var r=[],n=!1;return e.replace(po,function(i){var o=Vr(i);switch(Zd(o[0])){case"<?xml":break;case"<personList":break;case"</personList>":break;case"<person":r.push({name:o.displayname,id:o.id});break;case"</person>":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;default:if(!n&&t.WTF)throw new Error("unrecognized "+o[0]+" in threaded comments")}return i}),r}function tke(e){var t=[Es,Zt("personList",null,{xmlns:ti.TCMNT,"xmlns:x":fp[0]}).replace(/[\/]>/,">")];return e.forEach(function(r,n){t.push(Zt("person",null,{displayName:r,id:"{54EE7950-7262-4200-6969-"+("000000000000"+n).slice(-12)+"}",userId:r,providerId:"None"}))}),t.push("</personList>"),t.join("")}function rke(e){var t={};t.iauthor=e.read_shift(4);var r=xp(e);return t.rfx=r.s,t.ref=Wr(r.s),e.l+=16,t}function nke(e,t){return t==null&&(t=jt(36)),t.write_shift(4,e[1].iauthor),Yx(e[0],t),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t.write_shift(4,0),t}var ake=uo;function ske(e){return Ni(e.slice(0,54))}function ike(e,t){var r=[],n=[],s={},i=!1;return Ju(e,function(l,c,d){switch(d){case 632:n.push(l);break;case 635:s=l;break;case 637:s.t=l.t,s.h=l.h,s.r=l.r;break;case 636:if(s.author=n[s.iauthor],delete s.iauthor,t.sheetRows&&s.rfx&&t.sheetRows<=s.rfx.r)break;s.t||(s.t=""),delete s.rfx,r.push(s);break;case 3072:break;case 35:i=!0;break;case 36:i=!1;break;case 37:break;case 38:break;default:if(!c.T){if(!i||t.WTF)throw new Error("Unexpected record 0x"+d.toString(16))}}}),r}function oke(e){var t=sl(),r=[];return Lt(t,628),Lt(t,630),e.forEach(function(n){n[1].forEach(function(s){r.indexOf(s.a)>-1||(r.push(s.a.slice(0,54)),Lt(t,632,ske(s.a)))})}),Lt(t,631),Lt(t,633),e.forEach(function(n){n[1].forEach(function(s){s.iauthor=r.indexOf(s.a);var i={s:Za(n[0]),e:Za(n[0])};Lt(t,635,nke([i,s])),s.t&&s.t.length>0&&Lt(t,637,Ewe(s)),Lt(t,636),delete s.iauthor})}),Lt(t,634),Lt(t,629),t.end()}var lke="application/vnd.ms-office.vbaProject";function cke(e){var t=Or.utils.cfb_new({root:"R"});return e.FullPaths.forEach(function(r,n){if(!(r.slice(-1)==="/"||!r.match(/_VBA_PROJECT_CUR/))){var s=r.replace(/^[^\/]*/,"R").replace(/\/_VBA_PROJECT_CUR\u0000*/,"");Or.utils.cfb_add(t,s,e.FileIndex[n].content)}}),Or.write(t)}function dke(e,t){t.FullPaths.forEach(function(r,n){if(n!=0){var s=r.replace(/[^\/]*[\/]/,"/_VBA_PROJECT_CUR/");s.slice(-1)!=="/"&&Or.utils.cfb_add(e,s,t.FileIndex[n].content)}})}var z$=["xlsb","xlsm","xlam","biff8","xla"];function uke(){return{"!type":"dialog"}}function fke(){return{"!type":"dialog"}}function hke(){return{"!type":"macro"}}function pke(){return{"!type":"macro"}}var Om=function(){var e=/(^|[^A-Za-z_])R(\[?-?\d+\]|[1-9]\d*|)C(\[?-?\d+\]|[1-9]\d*|)(?![A-Za-z0-9_])/g,t={r:0,c:0};function r(n,s,i,o){var l=!1,c=!1;i.length==0?c=!0:i.charAt(0)=="["&&(c=!0,i=i.slice(1,-1)),o.length==0?l=!0:o.charAt(0)=="["&&(l=!0,o=o.slice(1,-1));var d=i.length>0?parseInt(i,10)|0:0,f=o.length>0?parseInt(o,10)|0:0;return l?f+=t.c:--f,c?d+=t.r:--d,s+(l?"":"$")+Ja(f)+(c?"":"$")+As(d)}return function(s,i){return t=i,s.replace(e,r)}}(),EA=/(^|[^._A-Z0-9])([$]?)([A-Z]{1,2}|[A-W][A-Z]{2}|X[A-E][A-Z]|XF[A-D])([$]?)(10[0-3]\d{4}|104[0-7]\d{3}|1048[0-4]\d{2}|10485[0-6]\d|104857[0-6]|[1-9]\d{0,5})(?![_.\(A-Za-z0-9])/g,TA=function(){return function(t,r){return t.replace(EA,function(n,s,i,o,l,c){var d=xA(o)-(i?0:r.c),f=mA(c)-(l?0:r.r),u=f==0?"":l?f+1:"["+f+"]",p=d==0?"":i?d+1:"["+d+"]";return s+"R"+u+"C"+p})}}();function q$(e,t){return e.replace(EA,function(r,n,s,i,o,l){return n+(s=="$"?s+i:Ja(xA(i)+t.c))+(o=="$"?o+l:As(mA(l)+t.r))})}function mke(e,t,r){var n=ol(t),s=n.s,i=Za(r),o={r:i.r-s.r,c:i.c-s.c};return q$(e,o)}function xke(e){return e.length!=1}function T8(e){return e.replace(/_xlfn\./g,"")}function Fs(e){e.l+=1}function m0(e,t){var r=e.read_shift(2);return[r&16383,r>>14&1,r>>15&1]}function H$(e,t,r){var n=2;if(r){if(r.biff>=2&&r.biff<=5)return W$(e);r.biff==12&&(n=4)}var s=e.read_shift(n),i=e.read_shift(n),o=m0(e),l=m0(e);return{s:{r:s,c:o[0],cRel:o[1],rRel:o[2]},e:{r:i,c:l[0],cRel:l[1],rRel:l[2]}}}function W$(e){var t=m0(e),r=m0(e),n=e.read_shift(1),s=e.read_shift(1);return{s:{r:t[0],c:n,cRel:t[1],rRel:t[2]},e:{r:r[0],c:s,cRel:r[1],rRel:r[2]}}}function gke(e,t,r){if(r.biff<8)return W$(e);var n=e.read_shift(r.biff==12?4:2),s=e.read_shift(r.biff==12?4:2),i=m0(e),o=m0(e);return{s:{r:n,c:i[0],cRel:i[1],rRel:i[2]},e:{r:s,c:o[0],cRel:o[1],rRel:o[2]}}}function V$(e,t,r){if(r&&r.biff>=2&&r.biff<=5)return vke(e);var n=e.read_shift(r&&r.biff==12?4:2),s=m0(e);return{r:n,c:s[0],cRel:s[1],rRel:s[2]}}function vke(e){var t=m0(e),r=e.read_shift(1);return{r:t[0],c:r,cRel:t[1],rRel:t[2]}}function bke(e){var t=e.read_shift(2),r=e.read_shift(2);return{r:t,c:r&255,fQuoted:!!(r&16384),cRel:r>>15,rRel:r>>15}}function yke(e,t,r){var n=r&&r.biff?r.biff:8;if(n>=2&&n<=5)return wke(e);var s=e.read_shift(n>=12?4:2),i=e.read_shift(2),o=(i&16384)>>14,l=(i&32768)>>15;if(i&=16383,l==1)for(;s>524287;)s-=1048576;if(o==1)for(;i>8191;)i=i-16384;return{r:s,c:i,cRel:o,rRel:l}}function wke(e){var t=e.read_shift(2),r=e.read_shift(1),n=(t&32768)>>15,s=(t&16384)>>14;return t&=16383,n==1&&t>=8192&&(t=t-16384),s==1&&r>=128&&(r=r-256),{r:t,c:r,cRel:s,rRel:n}}function Nke(e,t,r){var n=(e[e.l++]&96)>>5,s=H$(e,r.biff>=2&&r.biff<=5?6:8,r);return[n,s]}function jke(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2,"i"),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}var o=H$(e,i,r);return[n,s,o]}function kke(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r&&r.biff>8?12:r.biff<8?6:8,[n]}function Ske(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=8;if(r)switch(r.biff){case 5:e.l+=12,i=6;break;case 12:i=12;break}return e.l+=i,[n,s]}function _ke(e,t,r){var n=(e[e.l++]&96)>>5,s=gke(e,t-1,r);return[n,s]}function Ake(e,t,r){var n=(e[e.l++]&96)>>5;return e.l+=r.biff==2?6:r.biff==12?14:7,[n]}function O8(e){var t=e[e.l+1]&1,r=1;return e.l+=4,[t,r]}function Cke(e,t,r){e.l+=2;for(var n=e.read_shift(r&&r.biff==2?1:2),s=[],i=0;i<=n;++i)s.push(e.read_shift(r&&r.biff==2?1:2));return s}function Eke(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Tke(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=2,[n,e.read_shift(r&&r.biff==2?1:2)]}function Oke(e){var t=e[e.l+1]&255?1:0;return e.l+=2,[t,e.read_shift(2)]}function Pke(e,t,r){var n=e[e.l+1]&255?1:0;return e.l+=r&&r.biff==2?3:4,[n]}function G$(e){var t=e.read_shift(1),r=e.read_shift(1);return[t,r]}function Ike(e){return e.read_shift(2),G$(e)}function Dke(e){return e.read_shift(2),G$(e)}function Lke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=V$(e,0,r);return[n,s]}function Fke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=yke(e,0,r);return[n,s]}function Mke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(2);r&&r.biff==5&&(e.l+=12);var i=V$(e,0,r);return[n,s,i]}function Rke(e,t,r){var n=(e[e.l]&96)>>5;e.l+=1;var s=e.read_shift(r&&r.biff<=3?1:2);return[U3e[s],Y$[s],n]}function Bke(e,t,r){var n=e[e.l++],s=e.read_shift(1),i=r&&r.biff<=3?[n==88?-1:0,e.read_shift(1)]:$ke(e);return[s,(i[0]===0?Y$:$3e)[i[1]]]}function $ke(e){return[e[e.l+1]>>7,e.read_shift(2)&32767]}function Uke(e,t,r){e.l+=r&&r.biff==2?3:4}function zke(e,t,r){if(e.l++,r&&r.biff==12)return[e.read_shift(4,"i"),0];var n=e.read_shift(2),s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function qke(e){return e.l++,Zu[e.read_shift(1)]}function Hke(e){return e.l++,e.read_shift(2)}function Wke(e){return e.l++,e.read_shift(1)!==0}function Vke(e){return e.l++,oo(e)}function Gke(e,t,r){return e.l++,db(e,t-1,r)}function Kke(e,t){var r=[e.read_shift(1)];if(t==12)switch(r[0]){case 2:r[0]=4;break;case 4:r[0]=16;break;case 0:r[0]=1;break;case 1:r[0]=2;break}switch(r[0]){case 4:r[1]=ws(e,1)?"TRUE":"FALSE",t!=12&&(e.l+=7);break;case 37:case 16:r[1]=Zu[e[e.l]],e.l+=t==12?4:8;break;case 0:e.l+=8;break;case 1:r[1]=oo(e);break;case 2:r[1]=gp(e,0,{biff:t>0&&t<8?2:t});break;default:throw new Error("Bad SerAr: "+r[0])}return r}function Xke(e,t,r){for(var n=e.read_shift(r.biff==12?4:2),s=[],i=0;i!=n;++i)s.push((r.biff==12?xp:ON)(e));return s}function Yke(e,t,r){var n=0,s=0;r.biff==12?(n=e.read_shift(4),s=e.read_shift(4)):(s=1+e.read_shift(1),n=1+e.read_shift(2)),r.biff>=2&&r.biff<8&&(--n,--s==0&&(s=256));for(var i=0,o=[];i!=n&&(o[i]=[]);++i)for(var l=0;l!=s;++l)o[i][l]=Kke(e,r.biff);return o}function Qke(e,t,r){var n=e.read_shift(1)>>>5&3,s=!r||r.biff>=8?4:2,i=e.read_shift(s);switch(r.biff){case 2:e.l+=5;break;case 3:case 4:e.l+=8;break;case 5:e.l+=12;break}return[n,0,i]}function Jke(e,t,r){if(r.biff==5)return Zke(e);var n=e.read_shift(1)>>>5&3,s=e.read_shift(2),i=e.read_shift(4);return[n,s,i]}function Zke(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2,"i");e.l+=8;var n=e.read_shift(2);return e.l+=12,[t,r,n]}function e3e(e,t,r){var n=e.read_shift(1)>>>5&3;e.l+=r&&r.biff==2?3:4;var s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function t3e(e,t,r){var n=e.read_shift(1)>>>5&3,s=e.read_shift(r&&r.biff==2?1:2);return[n,s]}function r3e(e,t,r){var n=e.read_shift(1)>>>5&3;return e.l+=4,r.biff<8&&e.l--,r.biff==12&&(e.l+=2),[n]}function n3e(e,t,r){var n=(e[e.l++]&96)>>5,s=e.read_shift(2),i=4;if(r)switch(r.biff){case 5:i=15;break;case 12:i=6;break}return e.l+=i,[n,s]}var a3e=ho,s3e=ho,i3e=ho;function fb(e,t,r){return e.l+=2,[bke(e)]}function OA(e){return e.l+=6,[]}var o3e=fb,l3e=OA,c3e=OA,d3e=fb;function K$(e){return e.l+=2,[Bs(e),e.read_shift(2)&1]}var u3e=fb,f3e=K$,h3e=OA,p3e=fb,m3e=fb,x3e=["Data","All","Headers","??","?Data2","??","?DataHeaders","??","Totals","??","??","??","?DataTotals","??","??","??","?Current"];function g3e(e){e.l+=2;var t=e.read_shift(2),r=e.read_shift(2),n=e.read_shift(4),s=e.read_shift(2),i=e.read_shift(2),o=x3e[r>>2&31];return{ixti:t,coltype:r&3,rt:o,idx:n,c:s,C:i}}function v3e(e){return e.l+=2,[e.read_shift(4)]}function b3e(e,t,r){return e.l+=5,e.l+=2,e.l+=r.biff==2?1:4,["PTGSHEET"]}function y3e(e,t,r){return e.l+=r.biff==2?4:5,["PTGENDSHEET"]}function w3e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function N3e(e){var t=e.read_shift(1)>>>5&3,r=e.read_shift(2);return[t,r]}function j3e(e){return e.l+=4,[0,0]}var P8={1:{n:"PtgExp",f:zke},2:{n:"PtgTbl",f:i3e},3:{n:"PtgAdd",f:Fs},4:{n:"PtgSub",f:Fs},5:{n:"PtgMul",f:Fs},6:{n:"PtgDiv",f:Fs},7:{n:"PtgPower",f:Fs},8:{n:"PtgConcat",f:Fs},9:{n:"PtgLt",f:Fs},10:{n:"PtgLe",f:Fs},11:{n:"PtgEq",f:Fs},12:{n:"PtgGe",f:Fs},13:{n:"PtgGt",f:Fs},14:{n:"PtgNe",f:Fs},15:{n:"PtgIsect",f:Fs},16:{n:"PtgUnion",f:Fs},17:{n:"PtgRange",f:Fs},18:{n:"PtgUplus",f:Fs},19:{n:"PtgUminus",f:Fs},20:{n:"PtgPercent",f:Fs},21:{n:"PtgParen",f:Fs},22:{n:"PtgMissArg",f:Fs},23:{n:"PtgStr",f:Gke},26:{n:"PtgSheet",f:b3e},27:{n:"PtgEndSheet",f:y3e},28:{n:"PtgErr",f:qke},29:{n:"PtgBool",f:Wke},30:{n:"PtgInt",f:Hke},31:{n:"PtgNum",f:Vke},32:{n:"PtgArray",f:Ake},33:{n:"PtgFunc",f:Rke},34:{n:"PtgFuncVar",f:Bke},35:{n:"PtgName",f:Qke},36:{n:"PtgRef",f:Lke},37:{n:"PtgArea",f:Nke},38:{n:"PtgMemArea",f:e3e},39:{n:"PtgMemErr",f:a3e},40:{n:"PtgMemNoMem",f:s3e},41:{n:"PtgMemFunc",f:t3e},42:{n:"PtgRefErr",f:r3e},43:{n:"PtgAreaErr",f:kke},44:{n:"PtgRefN",f:Fke},45:{n:"PtgAreaN",f:_ke},46:{n:"PtgMemAreaN",f:w3e},47:{n:"PtgMemNoMemN",f:N3e},57:{n:"PtgNameX",f:Jke},58:{n:"PtgRef3d",f:Mke},59:{n:"PtgArea3d",f:jke},60:{n:"PtgRefErr3d",f:n3e},61:{n:"PtgAreaErr3d",f:Ske},255:{}},k3e={64:32,96:32,65:33,97:33,66:34,98:34,67:35,99:35,68:36,100:36,69:37,101:37,70:38,102:38,71:39,103:39,72:40,104:40,73:41,105:41,74:42,106:42,75:43,107:43,76:44,108:44,77:45,109:45,78:46,110:46,79:47,111:47,88:34,120:34,89:57,121:57,90:58,122:58,91:59,123:59,92:60,124:60,93:61,125:61},S3e={1:{n:"PtgElfLel",f:K$},2:{n:"PtgElfRw",f:p3e},3:{n:"PtgElfCol",f:o3e},6:{n:"PtgElfRwV",f:m3e},7:{n:"PtgElfColV",f:d3e},10:{n:"PtgElfRadical",f:u3e},11:{n:"PtgElfRadicalS",f:h3e},13:{n:"PtgElfColS",f:l3e},15:{n:"PtgElfColSV",f:c3e},16:{n:"PtgElfRadicalLel",f:f3e},25:{n:"PtgList",f:g3e},29:{n:"PtgSxName",f:v3e},255:{}},_3e={0:{n:"PtgAttrNoop",f:j3e},1:{n:"PtgAttrSemi",f:Pke},2:{n:"PtgAttrIf",f:Tke},4:{n:"PtgAttrChoose",f:Cke},8:{n:"PtgAttrGoto",f:Eke},16:{n:"PtgAttrSum",f:Uke},32:{n:"PtgAttrBaxcel",f:O8},33:{n:"PtgAttrBaxcel",f:O8},64:{n:"PtgAttrSpace",f:Ike},65:{n:"PtgAttrSpaceSemi",f:Dke},128:{n:"PtgAttrIfError",f:Oke},255:{}};function hb(e,t,r,n){if(n.biff<8)return ho(e,t);for(var s=e.l+t,i=[],o=0;o!==r.length;++o)switch(r[o][0]){case"PtgArray":r[o][1]=Yke(e,0,n),i.push(r[o][1]);break;case"PtgMemArea":r[o][2]=Xke(e,r[o][1],n),i.push(r[o][2]);break;case"PtgExp":n&&n.biff==12&&(r[o][1][1]=e.read_shift(4),i.push(r[o][1]));break;case"PtgList":case"PtgElfRadicalS":case"PtgElfColS":case"PtgElfColSV":throw"Unsupported "+r[o][0]}return t=s-e.l,t!==0&&i.push(ho(e,t)),i}function pb(e,t,r){for(var n=e.l+t,s,i,o=[];n!=e.l;)t=n-e.l,i=e[e.l],s=P8[i]||P8[k3e[i]],(i===24||i===25)&&(s=(i===24?S3e:_3e)[e[e.l+1]]),!s||!s.f?ho(e,t):o.push([s.n,s.f(e,t,r)]);return o}function A3e(e){for(var t=[],r=0;r<e.length;++r){for(var n=e[r],s=[],i=0;i<n.length;++i){var o=n[i];if(o)switch(o[0]){case 2:s.push('"'+o[1].replace(/"/g,'""')+'"');break;default:s.push(o[1])}else s.push("")}t.push(s.join(","))}return t.join(";")}var C3e={PtgAdd:"+",PtgConcat:"&",PtgDiv:"/",PtgEq:"=",PtgGe:">=",PtgGt:">",PtgLe:"<=",PtgLt:"<",PtgMul:"*",PtgNe:"<>",PtgPower:"^",PtgSub:"-"};function E3e(e,t){if(!e&&!(t&&t.biff<=5&&t.biff>=2))throw new Error("empty sheet name");return/[^\w\u4E00-\u9FFF\u3040-\u30FF]/.test(e)?"'"+e+"'":e}function X$(e,t,r){if(!e)return"SH33TJSERR0";if(r.biff>8&&(!e.XTI||!e.XTI[t]))return e.SheetNames[t];if(!e.XTI)return"SH33TJSERR6";var n=e.XTI[t];if(r.biff<8)return t>1e4&&(t-=65536),t<0&&(t=-t),t==0?"":e.XTI[t-1];if(!n)return"SH33TJSERR1";var s="";if(r.biff>8)switch(e[n[0]][0]){case 357:return s=n[1]==-1?"#REF":e.SheetNames[n[1]],n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 358:return r.SID!=null?e.SheetNames[r.SID]:"SH33TJSSAME"+e[n[0]][0];case 355:default:return"SH33TJSSRC"+e[n[0]][0]}switch(e[n[0]][0][0]){case 1025:return s=n[1]==-1?"#REF":e.SheetNames[n[1]]||"SH33TJSERR3",n[1]==n[2]?s:s+":"+e.SheetNames[n[2]];case 14849:return e[n[0]].slice(1).map(function(i){return i.Name}).join(";;");default:return e[n[0]][0][3]?(s=n[1]==-1?"#REF":e[n[0]][0][3][n[1]]||"SH33TJSERR4",n[1]==n[2]?s:s+":"+e[n[0]][0][3][n[2]]):"SH33TJSERR2"}}function I8(e,t,r){var n=X$(e,t,r);return n=="#REF"?n:E3e(n,r)}function ro(e,t,r,n,s){var i=s&&s.biff||8,o={s:{c:0,r:0}},l=[],c,d,f,u=0,p=0,h,m="";if(!e[0]||!e[0][0])return"";for(var g=-1,x="",v=0,b=e[0].length;v<b;++v){var w=e[0][v];switch(w[0]){case"PtgUminus":l.push("-"+l.pop());break;case"PtgUplus":l.push("+"+l.pop());break;case"PtgPercent":l.push(l.pop()+"%");break;case"PtgAdd":case"PtgConcat":case"PtgDiv":case"PtgEq":case"PtgGe":case"PtgGt":case"PtgLe":case"PtgLt":case"PtgMul":case"PtgNe":case"PtgPower":case"PtgSub":if(c=l.pop(),d=l.pop(),g>=0){switch(e[0][g][1][0]){case 0:x=fs(" ",e[0][g][1][1]);break;case 1:x=fs("\r",e[0][g][1][1]);break;default:if(x="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}d=d+x,g=-1}l.push(d+C3e[w[0]]+c);break;case"PtgIsect":c=l.pop(),d=l.pop(),l.push(d+" "+c);break;case"PtgUnion":c=l.pop(),d=l.pop(),l.push(d+","+c);break;case"PtgRange":c=l.pop(),d=l.pop(),l.push(d+":"+c);break;case"PtgAttrChoose":break;case"PtgAttrGoto":break;case"PtgAttrIf":break;case"PtgAttrIfError":break;case"PtgRef":f=gv(w[1][1],o,s),l.push(vv(f,i));break;case"PtgRefN":f=r?gv(w[1][1],r,s):w[1][1],l.push(vv(f,i));break;case"PtgRef3d":u=w[1][1],f=gv(w[1][2],o,s),m=I8(n,u,s),l.push(m+"!"+vv(f,i));break;case"PtgFunc":case"PtgFuncVar":var y=w[1][0],N=w[1][1];y||(y=0),y&=127;var S=y==0?[]:l.slice(-y);l.length-=y,N==="User"&&(N=S.shift()),l.push(N+"("+S.join(",")+")");break;case"PtgBool":l.push(w[1]?"TRUE":"FALSE");break;case"PtgInt":l.push(w[1]);break;case"PtgNum":l.push(String(w[1]));break;case"PtgStr":l.push('"'+w[1].replace(/"/g,'""')+'"');break;case"PtgErr":l.push(w[1]);break;case"PtgAreaN":h=l8(w[1][1],r?{s:r}:o,s),l.push(i4(h,s));break;case"PtgArea":h=l8(w[1][1],o,s),l.push(i4(h,s));break;case"PtgArea3d":u=w[1][1],h=w[1][2],m=I8(n,u,s),l.push(m+"!"+i4(h,s));break;case"PtgAttrSum":l.push("SUM("+l.pop()+")");break;case"PtgAttrBaxcel":case"PtgAttrSemi":break;case"PtgName":p=w[1][2];var j=(n.names||[])[p-1]||(n[0]||[])[p],_=j?j.Name:"SH33TJSNAME"+String(p);_&&_.slice(0,6)=="_xlfn."&&!s.xlfn&&(_=_.slice(6)),l.push(_);break;case"PtgNameX":var T=w[1][1];p=w[1][2];var D;if(s.biff<=5)T<0&&(T=-T),n[T]&&(D=n[T][p]);else{var A="";if(((n[T]||[])[0]||[])[0]==14849||(((n[T]||[])[0]||[])[0]==1025?n[T][p]&&n[T][p].itab>0&&(A=n.SheetNames[n[T][p].itab-1]+"!"):A=n.SheetNames[p-1]+"!"),n[T]&&n[T][p])A+=n[T][p].Name;else if(n[0]&&n[0][p])A+=n[0][p].Name;else{var C=(X$(n,T,s)||"").split(";;");C[p-1]?A=C[p-1]:A+="SH33TJSERRX"}l.push(A);break}D||(D={Name:"SH33TJSERRY"}),l.push(D.Name);break;case"PtgParen":var M="(",F=")";if(g>=0){switch(x="",e[0][g][1][0]){case 2:M=fs(" ",e[0][g][1][1])+M;break;case 3:M=fs("\r",e[0][g][1][1])+M;break;case 4:F=fs(" ",e[0][g][1][1])+F;break;case 5:F=fs("\r",e[0][g][1][1])+F;break;default:if(s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+e[0][g][1][0])}g=-1}l.push(M+l.pop()+F);break;case"PtgRefErr":l.push("#REF!");break;case"PtgRefErr3d":l.push("#REF!");break;case"PtgExp":f={c:w[1][1],r:w[1][0]};var B={c:r.c,r:r.r};if(n.sharedf[Wr(f)]){var Y=n.sharedf[Wr(f)];l.push(ro(Y,o,B,n,s))}else{var V=!1;for(c=0;c!=n.arrayf.length;++c)if(d=n.arrayf[c],!(f.c<d[0].s.c||f.c>d[0].e.c)&&!(f.r<d[0].s.r||f.r>d[0].e.r)){l.push(ro(d[1],o,B,n,s)),V=!0;break}V||l.push(w[1])}break;case"PtgArray":l.push("{"+A3e(w[1])+"}");break;case"PtgMemArea":break;case"PtgAttrSpace":case"PtgAttrSpaceSemi":g=v;break;case"PtgTbl":break;case"PtgMemErr":break;case"PtgMissArg":l.push("");break;case"PtgAreaErr":l.push("#REF!");break;case"PtgAreaErr3d":l.push("#REF!");break;case"PtgList":l.push("Table"+w[1].idx+"[#"+w[1].rt+"]");break;case"PtgMemAreaN":case"PtgMemNoMemN":case"PtgAttrNoop":case"PtgSheet":case"PtgEndSheet":break;case"PtgMemFunc":break;case"PtgMemNoMem":break;case"PtgElfCol":case"PtgElfColS":case"PtgElfColSV":case"PtgElfColV":case"PtgElfLel":case"PtgElfRadical":case"PtgElfRadicalLel":case"PtgElfRadicalS":case"PtgElfRw":case"PtgElfRwV":throw new Error("Unsupported ELFs");case"PtgSxName":throw new Error("Unrecognized Formula Token: "+String(w));default:throw new Error("Unrecognized Formula Token: "+String(w))}var J=["PtgAttrSpace","PtgAttrSpaceSemi","PtgAttrGoto"];if(s.biff!=3&&g>=0&&J.indexOf(e[0][v][0])==-1){w=e[0][g];var U=!0;switch(w[1][0]){case 4:U=!1;case 0:x=fs(" ",w[1][1]);break;case 5:U=!1;case 1:x=fs("\r",w[1][1]);break;default:if(x="",s.WTF)throw new Error("Unexpected PtgAttrSpaceType "+w[1][0])}l.push((U?x:"")+l.pop()+(U?"":x)),g=-1}}if(l.length>1&&s.WTF)throw new Error("bad formula stack");return l[0]}function T3e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],ho(e,t-2)];var l=pb(e,o,r);return t!==o+s&&(i=hb(e,t-o-s,l,r)),e.l=n,[l,i]}function O3e(e,t,r){var n=e.l+t,s=r.biff==2?1:2,i,o=e.read_shift(s);if(o==65535)return[[],ho(e,t-2)];var l=pb(e,o,r);return t!==o+s&&(i=hb(e,t-o-s,l,r)),e.l=n,[l,i]}function P3e(e,t,r,n){var s=e.l+t,i=pb(e,n,r),o;return s!==e.l&&(o=hb(e,s-e.l,i,r)),[i,o]}function I3e(e,t,r){var n=e.l+t,s,i=e.read_shift(2),o=pb(e,i,r);return i==65535?[[],ho(e,t-2)]:(t!==i+2&&(s=hb(e,n-i-2,o,r)),[o,s])}function D3e(e){var t;if(Su(e,e.l+6)!==65535)return[oo(e),"n"];switch(e[e.l]){case 0:return e.l+=8,["String","s"];case 1:return t=e[e.l+2]===1,e.l+=8,[t,"b"];case 2:return t=e[e.l+2],e.l+=8,[t,"e"];case 3:return e.l+=8,["","s"]}return[]}function L3e(e){if(e==null){var t=jt(8);return t.write_shift(1,3),t.write_shift(1,0),t.write_shift(2,0),t.write_shift(2,0),t.write_shift(2,65535),t}else if(typeof e=="number")return tp(e);return tp(0)}function u4(e,t,r){var n=e.l+t,s=eu(e);r.biff==2&&++e.l;var i=D3e(e),o=e.read_shift(1);r.biff!=2&&(e.read_shift(1),r.biff>=5&&e.read_shift(4));var l=O3e(e,n-e.l,r);return{cell:s,val:i[0],formula:l,shared:o>>3&1,tt:i[1]}}function F3e(e,t,r,n,s){var i=np(t,r,s),o=L3e(e.v),l=jt(6),c=33;l.write_shift(2,c),l.write_shift(4,0);for(var d=jt(e.bf.length),f=0;f<e.bf.length;++f)d[f]=e.bf[f];var u=yi([i,o,l,d]);return u}function PN(e,t,r){var n=e.read_shift(4),s=pb(e,n,r),i=e.read_shift(4),o=i>0?hb(e,i,s,r):null;return[s,o]}var M3e=PN,IN=PN,R3e=PN,B3e=PN,$3e={0:"BEEP",1:"OPEN",2:"OPEN.LINKS",3:"CLOSE.ALL",4:"SAVE",5:"SAVE.AS",6:"FILE.DELETE",7:"PAGE.SETUP",8:"PRINT",9:"PRINTER.SETUP",10:"QUIT",11:"NEW.WINDOW",12:"ARRANGE.ALL",13:"WINDOW.SIZE",14:"WINDOW.MOVE",15:"FULL",16:"CLOSE",17:"RUN",22:"SET.PRINT.AREA",23:"SET.PRINT.TITLES",24:"SET.PAGE.BREAK",25:"REMOVE.PAGE.BREAK",26:"FONT",27:"DISPLAY",28:"PROTECT.DOCUMENT",29:"PRECISION",30:"A1.R1C1",31:"CALCULATE.NOW",32:"CALCULATION",34:"DATA.FIND",35:"EXTRACT",36:"DATA.DELETE",37:"SET.DATABASE",38:"SET.CRITERIA",39:"SORT",40:"DATA.SERIES",41:"TABLE",42:"FORMAT.NUMBER",43:"ALIGNMENT",44:"STYLE",45:"BORDER",46:"CELL.PROTECTION",47:"COLUMN.WIDTH",48:"UNDO",49:"CUT",50:"COPY",51:"PASTE",52:"CLEAR",53:"PASTE.SPECIAL",54:"EDIT.DELETE",55:"INSERT",56:"FILL.RIGHT",57:"FILL.DOWN",61:"DEFINE.NAME",62:"CREATE.NAMES",63:"FORMULA.GOTO",64:"FORMULA.FIND",65:"SELECT.LAST.CELL",66:"SHOW.ACTIVE.CELL",67:"GALLERY.AREA",68:"GALLERY.BAR",69:"GALLERY.COLUMN",70:"GALLERY.LINE",71:"GALLERY.PIE",72:"GALLERY.SCATTER",73:"COMBINATION",74:"PREFERRED",75:"ADD.OVERLAY",76:"GRIDLINES",77:"SET.PREFERRED",78:"AXES",79:"LEGEND",80:"ATTACH.TEXT",81:"ADD.ARROW",82:"SELECT.CHART",83:"SELECT.PLOT.AREA",84:"PATTERNS",85:"MAIN.CHART",86:"OVERLAY",87:"SCALE",88:"FORMAT.LEGEND",89:"FORMAT.TEXT",90:"EDIT.REPEAT",91:"PARSE",92:"JUSTIFY",93:"HIDE",94:"UNHIDE",95:"WORKSPACE",96:"FORMULA",97:"FORMULA.FILL",98:"FORMULA.ARRAY",99:"DATA.FIND.NEXT",100:"DATA.FIND.PREV",101:"FORMULA.FIND.NEXT",102:"FORMULA.FIND.PREV",103:"ACTIVATE",104:"ACTIVATE.NEXT",105:"ACTIVATE.PREV",106:"UNLOCKED.NEXT",107:"UNLOCKED.PREV",108:"COPY.PICTURE",109:"SELECT",110:"DELETE.NAME",111:"DELETE.FORMAT",112:"VLINE",113:"HLINE",114:"VPAGE",115:"HPAGE",116:"VSCROLL",117:"HSCROLL",118:"ALERT",119:"NEW",120:"CANCEL.COPY",121:"SHOW.CLIPBOARD",122:"MESSAGE",124:"PASTE.LINK",125:"APP.ACTIVATE",126:"DELETE.ARROW",127:"ROW.HEIGHT",128:"FORMAT.MOVE",129:"FORMAT.SIZE",130:"FORMULA.REPLACE",131:"SEND.KEYS",132:"SELECT.SPECIAL",133:"APPLY.NAMES",134:"REPLACE.FONT",135:"FREEZE.PANES",136:"SHOW.INFO",137:"SPLIT",138:"ON.WINDOW",139:"ON.DATA",140:"DISABLE.INPUT",142:"OUTLINE",143:"LIST.NAMES",144:"FILE.CLOSE",145:"SAVE.WORKBOOK",146:"DATA.FORM",147:"COPY.CHART",148:"ON.TIME",149:"WAIT",150:"FORMAT.FONT",151:"FILL.UP",152:"FILL.LEFT",153:"DELETE.OVERLAY",155:"SHORT.MENUS",159:"SET.UPDATE.STATUS",161:"COLOR.PALETTE",162:"DELETE.STYLE",163:"WINDOW.RESTORE",164:"WINDOW.MAXIMIZE",166:"CHANGE.LINK",167:"CALCULATE.DOCUMENT",168:"ON.KEY",169:"APP.RESTORE",170:"APP.MOVE",171:"APP.SIZE",172:"APP.MINIMIZE",173:"APP.MAXIMIZE",174:"BRING.TO.FRONT",175:"SEND.TO.BACK",185:"MAIN.CHART.TYPE",186:"OVERLAY.CHART.TYPE",187:"SELECT.END",188:"OPEN.MAIL",189:"SEND.MAIL",190:"STANDARD.FONT",191:"CONSOLIDATE",192:"SORT.SPECIAL",193:"GALLERY.3D.AREA",194:"GALLERY.3D.COLUMN",195:"GALLERY.3D.LINE",196:"GALLERY.3D.PIE",197:"VIEW.3D",198:"GOAL.SEEK",199:"WORKGROUP",200:"FILL.GROUP",201:"UPDATE.LINK",202:"PROMOTE",203:"DEMOTE",204:"SHOW.DETAIL",206:"UNGROUP",207:"OBJECT.PROPERTIES",208:"SAVE.NEW.OBJECT",209:"SHARE",210:"SHARE.NAME",211:"DUPLICATE",212:"APPLY.STYLE",213:"ASSIGN.TO.OBJECT",214:"OBJECT.PROTECTION",215:"HIDE.OBJECT",216:"SET.EXTRACT",217:"CREATE.PUBLISHER",218:"SUBSCRIBE.TO",219:"ATTRIBUTES",220:"SHOW.TOOLBAR",222:"PRINT.PREVIEW",223:"EDIT.COLOR",224:"SHOW.LEVELS",225:"FORMAT.MAIN",226:"FORMAT.OVERLAY",227:"ON.RECALC",228:"EDIT.SERIES",229:"DEFINE.STYLE",240:"LINE.PRINT",243:"ENTER.DATA",249:"GALLERY.RADAR",250:"MERGE.STYLES",251:"EDITION.OPTIONS",252:"PASTE.PICTURE",253:"PASTE.PICTURE.LINK",254:"SPELLING",256:"ZOOM",259:"INSERT.OBJECT",260:"WINDOW.MINIMIZE",265:"SOUND.NOTE",266:"SOUND.PLAY",267:"FORMAT.SHAPE",268:"EXTEND.POLYGON",269:"FORMAT.AUTO",272:"GALLERY.3D.BAR",273:"GALLERY.3D.SURFACE",274:"FILL.AUTO",276:"CUSTOMIZE.TOOLBAR",277:"ADD.TOOL",278:"EDIT.OBJECT",279:"ON.DOUBLECLICK",280:"ON.ENTRY",281:"WORKBOOK.ADD",282:"WORKBOOK.MOVE",283:"WORKBOOK.COPY",284:"WORKBOOK.OPTIONS",285:"SAVE.WORKSPACE",288:"CHART.WIZARD",289:"DELETE.TOOL",290:"MOVE.TOOL",291:"WORKBOOK.SELECT",292:"WORKBOOK.ACTIVATE",293:"ASSIGN.TO.TOOL",295:"COPY.TOOL",296:"RESET.TOOL",297:"CONSTRAIN.NUMERIC",298:"PASTE.TOOL",302:"WORKBOOK.NEW",305:"SCENARIO.CELLS",306:"SCENARIO.DELETE",307:"SCENARIO.ADD",308:"SCENARIO.EDIT",309:"SCENARIO.SHOW",310:"SCENARIO.SHOW.NEXT",311:"SCENARIO.SUMMARY",312:"PIVOT.TABLE.WIZARD",313:"PIVOT.FIELD.PROPERTIES",314:"PIVOT.FIELD",315:"PIVOT.ITEM",316:"PIVOT.ADD.FIELDS",318:"OPTIONS.CALCULATION",319:"OPTIONS.EDIT",320:"OPTIONS.VIEW",321:"ADDIN.MANAGER",322:"MENU.EDITOR",323:"ATTACH.TOOLBARS",324:"VBAActivate",325:"OPTIONS.CHART",328:"VBA.INSERT.FILE",330:"VBA.PROCEDURE.DEFINITION",336:"ROUTING.SLIP",338:"ROUTE.DOCUMENT",339:"MAIL.LOGON",342:"INSERT.PICTURE",343:"EDIT.TOOL",344:"GALLERY.DOUGHNUT",350:"CHART.TREND",352:"PIVOT.ITEM.PROPERTIES",354:"WORKBOOK.INSERT",355:"OPTIONS.TRANSITION",356:"OPTIONS.GENERAL",370:"FILTER.ADVANCED",373:"MAIL.ADD.MAILER",374:"MAIL.DELETE.MAILER",375:"MAIL.REPLY",376:"MAIL.REPLY.ALL",377:"MAIL.FORWARD",378:"MAIL.NEXT.LETTER",379:"DATA.LABEL",380:"INSERT.TITLE",381:"FONT.PROPERTIES",382:"MACRO.OPTIONS",383:"WORKBOOK.HIDE",384:"WORKBOOK.UNHIDE",385:"WORKBOOK.DELETE",386:"WORKBOOK.NAME",388:"GALLERY.CUSTOM",390:"ADD.CHART.AUTOFORMAT",391:"DELETE.CHART.AUTOFORMAT",392:"CHART.ADD.DATA",393:"AUTO.OUTLINE",394:"TAB.ORDER",395:"SHOW.DIALOG",396:"SELECT.ALL",397:"UNGROUP.SHEETS",398:"SUBTOTAL.CREATE",399:"SUBTOTAL.REMOVE",400:"RENAME.OBJECT",412:"WORKBOOK.SCROLL",413:"WORKBOOK.NEXT",414:"WORKBOOK.PREV",415:"WORKBOOK.TAB.SPLIT",416:"FULL.SCREEN",417:"WORKBOOK.PROTECT",420:"SCROLLBAR.PROPERTIES",421:"PIVOT.SHOW.PAGES",422:"TEXT.TO.COLUMNS",423:"FORMAT.CHARTTYPE",424:"LINK.FORMAT",425:"TRACER.DISPLAY",430:"TRACER.NAVIGATE",431:"TRACER.CLEAR",432:"TRACER.ERROR",433:"PIVOT.FIELD.GROUP",434:"PIVOT.FIELD.UNGROUP",435:"CHECKBOX.PROPERTIES",436:"LABEL.PROPERTIES",437:"LISTBOX.PROPERTIES",438:"EDITBOX.PROPERTIES",439:"PIVOT.REFRESH",440:"LINK.COMBO",441:"OPEN.TEXT",442:"HIDE.DIALOG",443:"SET.DIALOG.FOCUS",444:"ENABLE.OBJECT",445:"PUSHBUTTON.PROPERTIES",446:"SET.DIALOG.DEFAULT",447:"FILTER",448:"FILTER.SHOW.ALL",449:"CLEAR.OUTLINE",450:"FUNCTION.WIZARD",451:"ADD.LIST.ITEM",452:"SET.LIST.ITEM",453:"REMOVE.LIST.ITEM",454:"SELECT.LIST.ITEM",455:"SET.CONTROL.VALUE",456:"SAVE.COPY.AS",458:"OPTIONS.LISTS.ADD",459:"OPTIONS.LISTS.DELETE",460:"SERIES.AXES",461:"SERIES.X",462:"SERIES.Y",463:"ERRORBAR.X",464:"ERRORBAR.Y",465:"FORMAT.CHART",466:"SERIES.ORDER",467:"MAIL.LOGOFF",468:"CLEAR.ROUTING.SLIP",469:"APP.ACTIVATE.MICROSOFT",470:"MAIL.EDIT.MAILER",471:"ON.SHEET",472:"STANDARD.WIDTH",473:"SCENARIO.MERGE",474:"SUMMARY.INFO",475:"FIND.FILE",476:"ACTIVE.CELL.FONT",477:"ENABLE.TIPWIZARD",478:"VBA.MAKE.ADDIN",480:"INSERTDATATABLE",481:"WORKGROUP.OPTIONS",482:"MAIL.SEND.MAILER",485:"AUTOCORRECT",489:"POST.DOCUMENT",491:"PICKLIST",493:"VIEW.SHOW",494:"VIEW.DEFINE",495:"VIEW.DELETE",509:"SHEET.BACKGROUND",510:"INSERT.MAP.OBJECT",511:"OPTIONS.MENONO",517:"MSOCHECKS",518:"NORMAL",519:"LAYOUT",520:"RM.PRINT.AREA",521:"CLEAR.PRINT.AREA",522:"ADD.PRINT.AREA",523:"MOVE.BRK",545:"HIDECURR.NOTE",546:"HIDEALL.NOTES",547:"DELETE.NOTE",548:"TRAVERSE.NOTES",549:"ACTIVATE.NOTES",620:"PROTECT.REVISIONS",621:"UNPROTECT.REVISIONS",647:"OPTIONS.ME",653:"WEB.PUBLISH",667:"NEWWEBQUERY",673:"PIVOT.TABLE.CHART",753:"OPTIONS.SAVE",755:"OPTIONS.SPELL",808:"HIDEALL.INKANNOTS"},Y$={0:"COUNT",1:"IF",2:"ISNA",3:"ISERROR",4:"SUM",5:"AVERAGE",6:"MIN",7:"MAX",8:"ROW",9:"COLUMN",10:"NA",11:"NPV",12:"STDEV",13:"DOLLAR",14:"FIXED",15:"SIN",16:"COS",17:"TAN",18:"ATAN",19:"PI",20:"SQRT",21:"EXP",22:"LN",23:"LOG10",24:"ABS",25:"INT",26:"SIGN",27:"ROUND",28:"LOOKUP",29:"INDEX",30:"REPT",31:"MID",32:"LEN",33:"VALUE",34:"TRUE",35:"FALSE",36:"AND",37:"OR",38:"NOT",39:"MOD",40:"DCOUNT",41:"DSUM",42:"DAVERAGE",43:"DMIN",44:"DMAX",45:"DSTDEV",46:"VAR",47:"DVAR",48:"TEXT",49:"LINEST",50:"TREND",51:"LOGEST",52:"GROWTH",53:"GOTO",54:"HALT",55:"RETURN",56:"PV",57:"FV",58:"NPER",59:"PMT",60:"RATE",61:"MIRR",62:"IRR",63:"RAND",64:"MATCH",65:"DATE",66:"TIME",67:"DAY",68:"MONTH",69:"YEAR",70:"WEEKDAY",71:"HOUR",72:"MINUTE",73:"SECOND",74:"NOW",75:"AREAS",76:"ROWS",77:"COLUMNS",78:"OFFSET",79:"ABSREF",80:"RELREF",81:"ARGUMENT",82:"SEARCH",83:"TRANSPOSE",84:"ERROR",85:"STEP",86:"TYPE",87:"ECHO",88:"SET.NAME",89:"CALLER",90:"DEREF",91:"WINDOWS",92:"SERIES",93:"DOCUMENTS",94:"ACTIVE.CELL",95:"SELECTION",96:"RESULT",97:"ATAN2",98:"ASIN",99:"ACOS",100:"CHOOSE",101:"HLOOKUP",102:"VLOOKUP",103:"LINKS",104:"INPUT",105:"ISREF",106:"GET.FORMULA",107:"GET.NAME",108:"SET.VALUE",109:"LOG",110:"EXEC",111:"CHAR",112:"LOWER",113:"UPPER",114:"PROPER",115:"LEFT",116:"RIGHT",117:"EXACT",118:"TRIM",119:"REPLACE",120:"SUBSTITUTE",121:"CODE",122:"NAMES",123:"DIRECTORY",124:"FIND",125:"CELL",126:"ISERR",127:"ISTEXT",128:"ISNUMBER",129:"ISBLANK",130:"T",131:"N",132:"FOPEN",133:"FCLOSE",134:"FSIZE",135:"FREADLN",136:"FREAD",137:"FWRITELN",138:"FWRITE",139:"FPOS",140:"DATEVALUE",141:"TIMEVALUE",142:"SLN",143:"SYD",144:"DDB",145:"GET.DEF",146:"REFTEXT",147:"TEXTREF",148:"INDIRECT",149:"REGISTER",150:"CALL",151:"ADD.BAR",152:"ADD.MENU",153:"ADD.COMMAND",154:"ENABLE.COMMAND",155:"CHECK.COMMAND",156:"RENAME.COMMAND",157:"SHOW.BAR",158:"DELETE.MENU",159:"DELETE.COMMAND",160:"GET.CHART.ITEM",161:"DIALOG.BOX",162:"CLEAN",163:"MDETERM",164:"MINVERSE",165:"MMULT",166:"FILES",167:"IPMT",168:"PPMT",169:"COUNTA",170:"CANCEL.KEY",171:"FOR",172:"WHILE",173:"BREAK",174:"NEXT",175:"INITIATE",176:"REQUEST",177:"POKE",178:"EXECUTE",179:"TERMINATE",180:"RESTART",181:"HELP",182:"GET.BAR",183:"PRODUCT",184:"FACT",185:"GET.CELL",186:"GET.WORKSPACE",187:"GET.WINDOW",188:"GET.DOCUMENT",189:"DPRODUCT",190:"ISNONTEXT",191:"GET.NOTE",192:"NOTE",193:"STDEVP",194:"VARP",195:"DSTDEVP",196:"DVARP",197:"TRUNC",198:"ISLOGICAL",199:"DCOUNTA",200:"DELETE.BAR",201:"UNREGISTER",204:"USDOLLAR",205:"FINDB",206:"SEARCHB",207:"REPLACEB",208:"LEFTB",209:"RIGHTB",210:"MIDB",211:"LENB",212:"ROUNDUP",213:"ROUNDDOWN",214:"ASC",215:"DBCS",216:"RANK",219:"ADDRESS",220:"DAYS360",221:"TODAY",222:"VDB",223:"ELSE",224:"ELSE.IF",225:"END.IF",226:"FOR.CELL",227:"MEDIAN",228:"SUMPRODUCT",229:"SINH",230:"COSH",231:"TANH",232:"ASINH",233:"ACOSH",234:"ATANH",235:"DGET",236:"CREATE.OBJECT",237:"VOLATILE",238:"LAST.ERROR",239:"CUSTOM.UNDO",240:"CUSTOM.REPEAT",241:"FORMULA.CONVERT",242:"GET.LINK.INFO",243:"TEXT.BOX",244:"INFO",245:"GROUP",246:"GET.OBJECT",247:"DB",248:"PAUSE",251:"RESUME",252:"FREQUENCY",253:"ADD.TOOLBAR",254:"DELETE.TOOLBAR",255:"User",256:"RESET.TOOLBAR",257:"EVALUATE",258:"GET.TOOLBAR",259:"GET.TOOL",260:"SPELLING.CHECK",261:"ERROR.TYPE",262:"APP.TITLE",263:"WINDOW.TITLE",264:"SAVE.TOOLBAR",265:"ENABLE.TOOL",266:"PRESS.TOOL",267:"REGISTER.ID",268:"GET.WORKBOOK",269:"AVEDEV",270:"BETADIST",271:"GAMMALN",272:"BETAINV",273:"BINOMDIST",274:"CHIDIST",275:"CHIINV",276:"COMBIN",277:"CONFIDENCE",278:"CRITBINOM",279:"EVEN",280:"EXPONDIST",281:"FDIST",282:"FINV",283:"FISHER",284:"FISHERINV",285:"FLOOR",286:"GAMMADIST",287:"GAMMAINV",288:"CEILING",289:"HYPGEOMDIST",290:"LOGNORMDIST",291:"LOGINV",292:"NEGBINOMDIST",293:"NORMDIST",294:"NORMSDIST",295:"NORMINV",296:"NORMSINV",297:"STANDARDIZE",298:"ODD",299:"PERMUT",300:"POISSON",301:"TDIST",302:"WEIBULL",303:"SUMXMY2",304:"SUMX2MY2",305:"SUMX2PY2",306:"CHITEST",307:"CORREL",308:"COVAR",309:"FORECAST",310:"FTEST",311:"INTERCEPT",312:"PEARSON",313:"RSQ",314:"STEYX",315:"SLOPE",316:"TTEST",317:"PROB",318:"DEVSQ",319:"GEOMEAN",320:"HARMEAN",321:"SUMSQ",322:"KURT",323:"SKEW",324:"ZTEST",325:"LARGE",326:"SMALL",327:"QUARTILE",328:"PERCENTILE",329:"PERCENTRANK",330:"MODE",331:"TRIMMEAN",332:"TINV",334:"MOVIE.COMMAND",335:"GET.MOVIE",336:"CONCATENATE",337:"POWER",338:"PIVOT.ADD.DATA",339:"GET.PIVOT.TABLE",340:"GET.PIVOT.FIELD",341:"GET.PIVOT.ITEM",342:"RADIANS",343:"DEGREES",344:"SUBTOTAL",345:"SUMIF",346:"COUNTIF",347:"COUNTBLANK",348:"SCENARIO.GET",349:"OPTIONS.LISTS.GET",350:"ISPMT",351:"DATEDIF",352:"DATESTRING",353:"NUMBERSTRING",354:"ROMAN",355:"OPEN.DIALOG",356:"SAVE.DIALOG",357:"VIEW.GET",358:"GETPIVOTDATA",359:"HYPERLINK",360:"PHONETIC",361:"AVERAGEA",362:"MAXA",363:"MINA",364:"STDEVPA",365:"VARPA",366:"STDEVA",367:"VARA",368:"BAHTTEXT",369:"THAIDAYOFWEEK",370:"THAIDIGIT",371:"THAIMONTHOFYEAR",372:"THAINUMSOUND",373:"THAINUMSTRING",374:"THAISTRINGLENGTH",375:"ISTHAIDIGIT",376:"ROUNDBAHTDOWN",377:"ROUNDBAHTUP",378:"THAIYEAR",379:"RTD",380:"CUBEVALUE",381:"CUBEMEMBER",382:"CUBEMEMBERPROPERTY",383:"CUBERANKEDMEMBER",384:"HEX2BIN",385:"HEX2DEC",386:"HEX2OCT",387:"DEC2BIN",388:"DEC2HEX",389:"DEC2OCT",390:"OCT2BIN",391:"OCT2HEX",392:"OCT2DEC",393:"BIN2DEC",394:"BIN2OCT",395:"BIN2HEX",396:"IMSUB",397:"IMDIV",398:"IMPOWER",399:"IMABS",400:"IMSQRT",401:"IMLN",402:"IMLOG2",403:"IMLOG10",404:"IMSIN",405:"IMCOS",406:"IMEXP",407:"IMARGUMENT",408:"IMCONJUGATE",409:"IMAGINARY",410:"IMREAL",411:"COMPLEX",412:"IMSUM",413:"IMPRODUCT",414:"SERIESSUM",415:"FACTDOUBLE",416:"SQRTPI",417:"QUOTIENT",418:"DELTA",419:"GESTEP",420:"ISEVEN",421:"ISODD",422:"MROUND",423:"ERF",424:"ERFC",425:"BESSELJ",426:"BESSELK",427:"BESSELY",428:"BESSELI",429:"XIRR",430:"XNPV",431:"PRICEMAT",432:"YIELDMAT",433:"INTRATE",434:"RECEIVED",435:"DISC",436:"PRICEDISC",437:"YIELDDISC",438:"TBILLEQ",439:"TBILLPRICE",440:"TBILLYIELD",441:"PRICE",442:"YIELD",443:"DOLLARDE",444:"DOLLARFR",445:"NOMINAL",446:"EFFECT",447:"CUMPRINC",448:"CUMIPMT",449:"EDATE",450:"EOMONTH",451:"YEARFRAC",452:"COUPDAYBS",453:"COUPDAYS",454:"COUPDAYSNC",455:"COUPNCD",456:"COUPNUM",457:"COUPPCD",458:"DURATION",459:"MDURATION",460:"ODDLPRICE",461:"ODDLYIELD",462:"ODDFPRICE",463:"ODDFYIELD",464:"RANDBETWEEN",465:"WEEKNUM",466:"AMORDEGRC",467:"AMORLINC",468:"CONVERT",724:"SHEETJS",469:"ACCRINT",470:"ACCRINTM",471:"WORKDAY",472:"NETWORKDAYS",473:"GCD",474:"MULTINOMIAL",475:"LCM",476:"FVSCHEDULE",477:"CUBEKPIMEMBER",478:"CUBESET",479:"CUBESETCOUNT",480:"IFERROR",481:"COUNTIFS",482:"SUMIFS",483:"AVERAGEIF",484:"AVERAGEIFS"},U3e={2:1,3:1,10:0,15:1,16:1,17:1,18:1,19:0,20:1,21:1,22:1,23:1,24:1,25:1,26:1,27:2,30:2,31:3,32:1,33:1,34:0,35:0,38:1,39:2,40:3,41:3,42:3,43:3,44:3,45:3,47:3,48:2,53:1,61:3,63:0,65:3,66:3,67:1,68:1,69:1,70:1,71:1,72:1,73:1,74:0,75:1,76:1,77:1,79:2,80:2,83:1,85:0,86:1,89:0,90:1,94:0,95:0,97:2,98:1,99:1,101:3,102:3,105:1,106:1,108:2,111:1,112:1,113:1,114:1,117:2,118:1,119:4,121:1,126:1,127:1,128:1,129:1,130:1,131:1,133:1,134:1,135:1,136:2,137:2,138:2,140:1,141:1,142:3,143:4,144:4,161:1,162:1,163:1,164:1,165:2,172:1,175:2,176:2,177:3,178:2,179:1,184:1,186:1,189:3,190:1,195:3,196:3,197:1,198:1,199:3,201:1,207:4,210:3,211:1,212:2,213:2,214:1,215:1,225:0,229:1,230:1,231:1,232:1,233:1,234:1,235:3,244:1,247:4,252:2,257:1,261:1,271:1,273:4,274:2,275:2,276:2,277:3,278:3,279:1,280:3,281:3,282:3,283:1,284:1,285:2,286:4,287:3,288:2,289:4,290:3,291:3,292:3,293:4,294:1,295:3,296:1,297:3,298:1,299:2,300:3,301:3,302:4,303:2,304:2,305:2,306:2,307:2,308:2,309:3,310:2,311:2,312:2,313:2,314:2,315:2,316:4,325:2,326:2,327:2,328:2,331:2,332:2,337:2,342:1,343:1,346:2,347:1,350:4,351:3,352:1,353:2,360:1,368:1,369:1,370:1,371:1,372:1,373:1,374:1,375:1,376:1,377:1,378:1,382:3,385:1,392:1,393:1,396:2,397:2,398:2,399:1,400:1,401:1,402:1,403:1,404:1,405:1,406:1,407:1,408:1,409:1,410:1,414:4,415:1,416:1,417:2,420:1,421:1,422:2,424:1,425:2,426:2,427:2,428:2,430:3,438:3,439:3,440:3,443:2,444:2,445:2,446:2,447:6,448:6,449:2,450:2,464:2,468:3,476:2,479:1,480:2,65535:0};function D8(e){return e.slice(0,3)=="of:"&&(e=e.slice(3)),e.charCodeAt(0)==61&&(e=e.slice(1),e.charCodeAt(0)==61&&(e=e.slice(1))),e=e.replace(/COM\.MICROSOFT\./g,""),e=e.replace(/\[((?:\.[A-Z]+[0-9]+)(?::\.[A-Z]+[0-9]+)?)\]/g,function(t,r){return r.replace(/\./g,"")}),e=e.replace(/\[.(#[A-Z]*[?!])\]/g,"$1"),e.replace(/[;~]/g,",").replace(/\|/g,";")}function z3e(e){var t="of:="+e.replace(EA,"$1[.$2$3$4$5]").replace(/\]:\[/g,":");return t.replace(/;/g,"|").replace(/,/g,";")}function f4(e){var t=e.split(":"),r=t[0].split(".")[0];return[r,t[0].split(".")[1]+(t.length>1?":"+(t[1].split(".")[1]||t[1].split(".")[0]):"")]}function q3e(e){return e.replace(/\./,"!")}var yv={},Pm={},wv=typeof Map<"u";function PA(e,t,r){var n=0,s=e.length;if(r){if(wv?r.has(t):Object.prototype.hasOwnProperty.call(r,t)){for(var i=wv?r.get(t):r[t];n<i.length;++n)if(e[i[n]].t===t)return e.Count++,i[n]}}else for(;n<s;++n)if(e[n].t===t)return e.Count++,n;return e[s]={t},e.Count++,e.Unique++,r&&(wv?(r.has(t)||r.set(t,[]),r.get(t).push(s)):(Object.prototype.hasOwnProperty.call(r,t)||(r[t]=[]),r[t].push(s))),s}function DN(e,t){var r={min:e+1,max:e+1},n=-1;return t.MDW&&(io=t.MDW),t.width!=null?r.customWidth=1:t.wpx!=null?n=F1(t.wpx):t.wch!=null&&(n=t.wch),n>-1?(r.width=c5(n),r.customWidth=1):t.width!=null&&(r.width=t.width),t.hidden&&(r.hidden=!0),t.level!=null&&(r.outlineLevel=r.level=t.level),r}function Mh(e,t){if(e){var r=[.7,.7,.75,.75,.3,.3];t=="xlml"&&(r=[1,1,1,1,.5,.5]),e.left==null&&(e.left=r[0]),e.right==null&&(e.right=r[1]),e.top==null&&(e.top=r[2]),e.bottom==null&&(e.bottom=r[3]),e.header==null&&(e.header=r[4]),e.footer==null&&(e.footer=r[5])}}function O0(e,t,r){var n=r.revssf[t.z!=null?t.z:"General"],s=60,i=e.length;if(n==null&&r.ssf){for(;s<392;++s)if(r.ssf[s]==null){Du(t.z,s),r.ssf[s]=t.z,r.revssf[t.z]=n=s;break}}for(s=0;s!=i;++s)if(e[s].numFmtId===n)return s;return e[i]={numFmtId:n,fontId:0,fillId:0,borderId:0,xfId:0,applyNumberFormat:1},i}function Q$(e,t,r,n,s,i){try{n.cellNF&&(e.z=Br[t])}catch(l){if(n.WTF)throw l}if(!(e.t==="z"&&!n.cellStyles)){if(e.t==="d"&&typeof e.v=="string"&&(e.v=Da(e.v)),(!n||n.cellText!==!1)&&e.t!=="z")try{if(Br[t]==null&&Du($2e[t]||"General",t),e.t==="e")e.w=e.w||Zu[e.v];else if(t===0)if(e.t==="n")(e.v|0)===e.v?e.w=e.v.toString(10):e.w=E1(e.v);else if(e.t==="d"){var o=ai(e.v);(o|0)===o?e.w=o.toString(10):e.w=E1(o)}else{if(e.v===void 0)return"";e.w=Zh(e.v,Pm)}else e.t==="d"?e.w=yc(t,ai(e.v),Pm):e.w=yc(t,e.v,Pm)}catch(l){if(n.WTF)throw l}if(n.cellStyles&&r!=null)try{e.s=i.Fills[r],e.s.fgColor&&e.s.fgColor.theme&&!e.s.fgColor.rgb&&(e.s.fgColor.rgb=l5(s.themeElements.clrScheme[e.s.fgColor.theme].rgb,e.s.fgColor.tint||0),n.WTF&&(e.s.fgColor.raw_rgb=s.themeElements.clrScheme[e.s.fgColor.theme].rgb)),e.s.bgColor&&e.s.bgColor.theme&&(e.s.bgColor.rgb=l5(s.themeElements.clrScheme[e.s.bgColor.theme].rgb,e.s.bgColor.tint||0),n.WTF&&(e.s.bgColor.raw_rgb=s.themeElements.clrScheme[e.s.bgColor.theme].rgb))}catch(l){if(n.WTF&&i.Fills)throw l}}}function H3e(e,t,r){if(e&&e["!ref"]){var n=Bn(e["!ref"]);if(n.e.c<n.s.c||n.e.r<n.s.r)throw new Error("Bad range ("+r+"): "+e["!ref"])}}function W3e(e,t){var r=Bn(t);r.s.r<=r.e.r&&r.s.c<=r.e.c&&r.s.r>=0&&r.s.c>=0&&(e["!ref"]=an(r))}var V3e=/<(?:\w:)?mergeCell ref="[A-Z0-9:]+"\s*[\/]?>/g,G3e=/<(?:\w+:)?sheetData[^>]*>([\s\S]*)<\/(?:\w+:)?sheetData>/,K3e=/<(?:\w:)?hyperlink [^>]*>/mg,X3e=/"(\w*:\w*)"/,Y3e=/<(?:\w:)?col\b[^>]*[\/]?>/g,Q3e=/<(?:\w:)?autoFilter[^>]*([\/]|>([\s\S]*)<\/(?:\w:)?autoFilter)>/g,J3e=/<(?:\w:)?pageMargins[^>]*\/>/g,J$=/<(?:\w:)?sheetPr\b(?:[^>a-z][^>]*)?\/>/,Z3e=/<(?:\w:)?sheetPr[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetPr)>/,eSe=/<(?:\w:)?sheetViews[^>]*(?:[\/]|>([\s\S]*)<\/(?:\w:)?sheetViews)>/;function tSe(e,t,r,n,s,i,o){if(!e)return e;n||(n={"!id":{}});var l=t.dense?[]:{},c={s:{r:2e6,c:2e6},e:{r:0,c:0}},d="",f="",u=e.match(G3e);u?(d=e.slice(0,u.index),f=e.slice(u.index+u[0].length)):d=f=e;var p=d.match(J$);p?IA(p[0],l,s,r):(p=d.match(Z3e))&&nSe(p[0],p[1]||"",l,s,r);var h=(d.match(/<(?:\w*:)?dimension/)||{index:-1}).index;if(h>0){var m=d.slice(h,h+50).match(X3e);m&&W3e(l,m[1])}var g=d.match(eSe);g&&g[1]&&xSe(g[1],s);var x=[];if(t.cellStyles){var v=d.match(Y3e);v&&uSe(x,v)}u&&bSe(u[1],l,t,c,i,o);var b=f.match(Q3e);b&&(l["!autofilter"]=hSe(b[0]));var w=[],y=f.match(V3e);if(y)for(h=0;h!=y.length;++h)w[h]=Bn(y[h].slice(y[h].indexOf('"')+1));var N=f.match(K3e);N&&lSe(l,N,n);var S=f.match(J3e);if(S&&(l["!margins"]=cSe(Vr(S[0]))),!l["!ref"]&&c.e.c>=c.s.c&&c.e.r>=c.s.r&&(l["!ref"]=an(c)),t.sheetRows>0&&l["!ref"]){var j=Bn(l["!ref"]);t.sheetRows<=+j.e.r&&(j.e.r=t.sheetRows-1,j.e.r>c.e.r&&(j.e.r=c.e.r),j.e.r<j.s.r&&(j.s.r=j.e.r),j.e.c>c.e.c&&(j.e.c=c.e.c),j.e.c<j.s.c&&(j.s.c=j.e.c),l["!fullref"]=l["!ref"],l["!ref"]=an(j))}return x.length>0&&(l["!cols"]=x),w.length>0&&(l["!merges"]=w),l}function rSe(e){if(e.length===0)return"";for(var t='<mergeCells count="'+e.length+'">',r=0;r!=e.length;++r)t+='<mergeCell ref="'+an(e[r])+'"/>';return t+"</mergeCells>"}function IA(e,t,r,n){var s=Vr(e);r.Sheets[n]||(r.Sheets[n]={}),s.codeName&&(r.Sheets[n].CodeName=Mn(ua(s.codeName)))}function nSe(e,t,r,n,s){IA(e.slice(0,e.indexOf(">")),r,n,s)}function aSe(e,t,r,n,s){var i=!1,o={},l=null;if(n.bookType!=="xlsx"&&t.vbaraw){var c=t.SheetNames[r];try{t.Workbook&&(c=t.Workbook.Sheets[r].CodeName||c)}catch{}i=!0,o.codeName=$d(na(c))}if(e&&e["!outline"]){var d={summaryBelow:1,summaryRight:1};e["!outline"].above&&(d.summaryBelow=0),e["!outline"].left&&(d.summaryRight=0),l=(l||"")+Zt("outlinePr",null,d)}!i&&!l||(s[s.length]=Zt("sheetPr",l,o))}var sSe=["objects","scenarios","selectLockedCells","selectUnlockedCells"],iSe=["formatColumns","formatRows","formatCells","insertColumns","insertRows","insertHyperlinks","deleteColumns","deleteRows","sort","autoFilter","pivotTables"];function oSe(e){var t={sheet:1};return sSe.forEach(function(r){e[r]!=null&&e[r]&&(t[r]="1")}),iSe.forEach(function(r){e[r]!=null&&!e[r]&&(t[r]="0")}),e.password&&(t.password=_A(e.password).toString(16).toUpperCase()),Zt("sheetProtection",null,t)}function lSe(e,t,r){for(var n=Array.isArray(e),s=0;s!=t.length;++s){var i=Vr(ua(t[s]),!0);if(!i.ref)return;var o=((r||{})["!id"]||[])[i.id];o?(i.Target=o.Target,i.location&&(i.Target+="#"+Mn(i.location))):(i.Target="#"+Mn(i.location),o={Target:i.Target,TargetMode:"Internal"}),i.Rel=o,i.tooltip&&(i.Tooltip=i.tooltip,delete i.tooltip);for(var l=Bn(i.ref),c=l.s.r;c<=l.e.r;++c)for(var d=l.s.c;d<=l.e.c;++d){var f=Wr({c:d,r:c});n?(e[c]||(e[c]=[]),e[c][d]||(e[c][d]={t:"z",v:void 0}),e[c][d].l=i):(e[f]||(e[f]={t:"z",v:void 0}),e[f].l=i)}}}function cSe(e){var t={};return["left","right","top","bottom","header","footer"].forEach(function(r){e[r]&&(t[r]=parseFloat(e[r]))}),t}function dSe(e){return Mh(e),Zt("pageMargins",null,e)}function uSe(e,t){for(var r=!1,n=0;n!=t.length;++n){var s=Vr(t[n],!0);s.hidden&&(s.hidden=Oa(s.hidden));var i=parseInt(s.min,10)-1,o=parseInt(s.max,10)-1;for(s.outlineLevel&&(s.level=+s.outlineLevel||0),delete s.min,delete s.max,s.width=+s.width,!r&&s.width&&(r=!0,AA(s.width)),p0(s);i<=o;)e[i++]=La(s)}}function fSe(e,t){for(var r=["<cols>"],n,s=0;s!=t.length;++s)(n=t[s])&&(r[r.length]=Zt("col",null,DN(s,n)));return r[r.length]="</cols>",r.join("")}function hSe(e){var t={ref:(e.match(/ref="([^"]*)"/)||[])[1]};return t}function pSe(e,t,r,n){var s=typeof e.ref=="string"?e.ref:an(e.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var i=r.Workbook.Names,o=ol(s);o.s.r==o.e.r&&(o.e.r=ol(t["!ref"]).e.r,s=an(o));for(var l=0;l<i.length;++l){var c=i[l];if(c.Name=="_xlnm._FilterDatabase"&&c.Sheet==n){c.Ref="'"+r.SheetNames[n]+"'!"+s;break}}return l==i.length&&i.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+s}),Zt("autoFilter",null,{ref:s})}var mSe=/<(?:\w:)?sheetView(?:[^>a-z][^>]*)?\/?>/;function xSe(e,t){t.Views||(t.Views=[{}]),(e.match(mSe)||[]).forEach(function(r,n){var s=Vr(r);t.Views[n]||(t.Views[n]={}),+s.zoomScale&&(t.Views[n].zoom=+s.zoomScale),Oa(s.rightToLeft)&&(t.Views[n].RTL=!0)})}function gSe(e,t,r,n){var s={workbookViewId:"0"};return(((n||{}).Workbook||{}).Views||[])[0]&&(s.rightToLeft=n.Workbook.Views[0].RTL?"1":"0"),Zt("sheetViews",Zt("sheetView",null,s),{})}function vSe(e,t,r,n){if(e.c&&r["!comments"].push([t,e.c]),e.v===void 0&&typeof e.f!="string"||e.t==="z"&&!e.f)return"";var s="",i=e.t,o=e.v;if(e.t!=="z")switch(e.t){case"b":s=e.v?"1":"0";break;case"n":s=""+e.v;break;case"e":s=Zu[e.v];break;case"d":n&&n.cellDates?s=Da(e.v,-1).toISOString():(e=La(e),e.t="n",s=""+(e.v=ai(Da(e.v)))),typeof e.z>"u"&&(e.z=Br[14]);break;default:s=e.v;break}var l=Ii("v",na(s)),c={r:t},d=O0(n.cellXfs,e,n);switch(d!==0&&(c.s=d),e.t){case"n":break;case"d":c.t="d";break;case"b":c.t="b";break;case"e":c.t="e";break;case"z":break;default:if(e.v==null){delete e.t;break}if(e.v.length>32767)throw new Error("Text length must not exceed 32767 characters");if(n&&n.bookSST){l=Ii("v",""+PA(n.Strings,e.v,n.revStrings)),c.t="s";break}c.t="str";break}if(e.t!=i&&(e.t=i,e.v=o),typeof e.f=="string"&&e.f){var f=e.F&&e.F.slice(0,t.length)==t?{t:"array",ref:e.F}:null;l=Zt("f",na(e.f),f)+(e.v!=null?l:"")}return e.l&&r["!links"].push([t,e.l]),e.D&&(c.cm=1),Zt("c",l,c)}var bSe=function(){var e=/<(?:\w+:)?c[ \/>]/,t=/<\/(?:\w+:)?row>/,r=/r=["']([^"']*)["']/,n=/<(?:\w+:)?is>([\S\s]*?)<\/(?:\w+:)?is>/,s=/ref=["']([^"']*)["']/,i=T1("v"),o=T1("f");return function(c,d,f,u,p,h){for(var m=0,g="",x=[],v=[],b=0,w=0,y=0,N="",S,j,_=0,T=0,D,A,C=0,M=0,F=Array.isArray(h.CellXf),B,Y=[],V=[],J=Array.isArray(d),U=[],X={},W=!1,E=!!f.sheetStubs,R=c.split(t),q=0,L=R.length;q!=L;++q){g=R[q].trim();var H=g.length;if(H!==0){var se=0;e:for(m=0;m<H;++m)switch(g[m]){case">":if(g[m-1]!="/"){++m;break e}if(f&&f.cellStyles){if(j=Vr(g.slice(se,m),!0),_=j.r!=null?parseInt(j.r,10):_+1,T=-1,f.sheetRows&&f.sheetRows<_)continue;X={},W=!1,j.ht&&(W=!0,X.hpt=parseFloat(j.ht),X.hpx=Cx(X.hpt)),j.hidden=="1"&&(W=!0,X.hidden=!0),j.outlineLevel!=null&&(W=!0,X.level=+j.outlineLevel),W&&(U[_-1]=X)}break;case"<":se=m;break}if(se>=m)break;if(j=Vr(g.slice(se,m),!0),_=j.r!=null?parseInt(j.r,10):_+1,T=-1,!(f.sheetRows&&f.sheetRows<_)){u.s.r>_-1&&(u.s.r=_-1),u.e.r<_-1&&(u.e.r=_-1),f&&f.cellStyles&&(X={},W=!1,j.ht&&(W=!0,X.hpt=parseFloat(j.ht),X.hpx=Cx(X.hpt)),j.hidden=="1"&&(W=!0,X.hidden=!0),j.outlineLevel!=null&&(W=!0,X.level=+j.outlineLevel),W&&(U[_-1]=X)),x=g.slice(m).split(e);for(var ce=0;ce!=x.length&&x[ce].trim().charAt(0)=="<";++ce);for(x=x.slice(ce),m=0;m!=x.length;++m)if(g=x[m].trim(),g.length!==0){if(v=g.match(r),b=m,w=0,y=0,g="<c "+(g.slice(0,1)=="<"?">":"")+g,v!=null&&v.length===2){for(b=0,N=v[1],w=0;w!=N.length&&!((y=N.charCodeAt(w)-64)<1||y>26);++w)b=26*b+y;--b,T=b}else++T;for(w=0;w!=g.length&&g.charCodeAt(w)!==62;++w);if(++w,j=Vr(g.slice(0,w),!0),j.r||(j.r=Wr({r:_-1,c:T})),N=g.slice(w),S={t:""},(v=N.match(i))!=null&&v[1]!==""&&(S.v=Mn(v[1])),f.cellFormula){if((v=N.match(o))!=null&&v[1]!==""){if(S.f=Mn(ua(v[1])).replace(/\r\n/g,`
`),f.xlfn||(S.f=T8(S.f)),v[0].indexOf('t="array"')>-1)S.F=(N.match(s)||[])[1],S.F.indexOf(":")>-1&&Y.push([Bn(S.F),S.F]);else if(v[0].indexOf('t="shared"')>-1){A=Vr(v[0]);var ae=Mn(ua(v[1]));f.xlfn||(ae=T8(ae)),V[parseInt(A.si,10)]=[A,ae,j.r]}}else(v=N.match(/<f[^>]*\/>/))&&(A=Vr(v[0]),V[A.si]&&(S.f=mke(V[A.si][1],V[A.si][2],j.r)));var Z=Za(j.r);for(w=0;w<Y.length;++w)Z.r>=Y[w][0].s.r&&Z.r<=Y[w][0].e.r&&Z.c>=Y[w][0].s.c&&Z.c<=Y[w][0].e.c&&(S.F=Y[w][1])}if(j.t==null&&S.v===void 0)if(S.f||S.F)S.v=0,S.t="n";else if(E)S.t="z";else continue;else S.t=j.t||"n";switch(u.s.c>T&&(u.s.c=T),u.e.c<T&&(u.e.c=T),S.t){case"n":if(S.v==""||S.v==null){if(!E)continue;S.t="z"}else S.v=parseFloat(S.v);break;case"s":if(typeof S.v>"u"){if(!E)continue;S.t="z"}else D=yv[parseInt(S.v,10)],S.v=D.t,S.r=D.r,f.cellHTML&&(S.h=D.h);break;case"str":S.t="s",S.v=S.v!=null?ua(S.v):"",f.cellHTML&&(S.h=uA(S.v));break;case"inlineStr":v=N.match(n),S.t="s",v!=null&&(D=SA(v[1]))?(S.v=D.t,f.cellHTML&&(S.h=D.h)):S.v="";break;case"b":S.v=Oa(S.v);break;case"d":f.cellDates?S.v=Da(S.v,1):(S.v=ai(Da(S.v,1)),S.t="n");break;case"e":(!f||f.cellText!==!1)&&(S.w=S.v),S.v=e$[S.v];break}if(C=M=0,B=null,F&&j.s!==void 0&&(B=h.CellXf[j.s],B!=null&&(B.numFmtId!=null&&(C=B.numFmtId),f.cellStyles&&B.fillId!=null&&(M=B.fillId))),Q$(S,C,M,f,p,h),f.cellDates&&F&&S.t=="n"&&Gx(Br[C])&&(S.t="d",S.v=TN(S.v)),j.cm&&f.xlmeta){var ve=(f.xlmeta.Cell||[])[+j.cm-1];ve&&ve.type=="XLDAPR"&&(S.D=!0)}if(J){var ne=Za(j.r);d[ne.r]||(d[ne.r]=[]),d[ne.r][ne.c]=S}else d[j.r]=S}}}}U.length>0&&(d["!rows"]=U)}}();function ySe(e,t,r,n){var s=[],i=[],o=Bn(e["!ref"]),l="",c,d="",f=[],u=0,p=0,h=e["!rows"],m=Array.isArray(e),g={r:d},x,v=-1;for(p=o.s.c;p<=o.e.c;++p)f[p]=Ja(p);for(u=o.s.r;u<=o.e.r;++u){for(i=[],d=As(u),p=o.s.c;p<=o.e.c;++p){c=f[p]+d;var b=m?(e[u]||[])[p]:e[c];b!==void 0&&(l=vSe(b,c,e,t))!=null&&i.push(l)}(i.length>0||h&&h[u])&&(g={r:d},h&&h[u]&&(x=h[u],x.hidden&&(g.hidden=1),v=-1,x.hpx?v=M1(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(g.ht=v,g.customHeight=1),x.level&&(g.outlineLevel=x.level)),s[s.length]=Zt("row",i.join(""),g))}if(h)for(;u<h.length;++u)h&&h[u]&&(g={r:u+1},x=h[u],x.hidden&&(g.hidden=1),v=-1,x.hpx?v=M1(x.hpx):x.hpt&&(v=x.hpt),v>-1&&(g.ht=v,g.customHeight=1),x.level&&(g.outlineLevel=x.level),s[s.length]=Zt("row","",g));return s.join("")}function Z$(e,t,r,n){var s=[Es,Zt("worksheet",null,{xmlns:fp[0],"xmlns:r":ti.r})],i=r.SheetNames[e],o=0,l="",c=r.Sheets[i];c==null&&(c={});var d=c["!ref"]||"A1",f=Bn(d);if(f.e.c>16383||f.e.r>1048575){if(t.WTF)throw new Error("Range "+d+" exceeds format limit A1:XFD1048576");f.e.c=Math.min(f.e.c,16383),f.e.r=Math.min(f.e.c,1048575),d=an(f)}n||(n={}),c["!comments"]=[];var u=[];aSe(c,r,e,t,s),s[s.length]=Zt("dimension",null,{ref:d}),s[s.length]=gSe(c,t,e,r),t.sheetFormat&&(s[s.length]=Zt("sheetFormatPr",null,{defaultRowHeight:t.sheetFormat.defaultRowHeight||"16",baseColWidth:t.sheetFormat.baseColWidth||"10",outlineLevelRow:t.sheetFormat.outlineLevelRow||"7"})),c["!cols"]!=null&&c["!cols"].length>0&&(s[s.length]=fSe(c,c["!cols"])),s[o=s.length]="<sheetData/>",c["!links"]=[],c["!ref"]!=null&&(l=ySe(c,t),l.length>0&&(s[s.length]=l)),s.length>o+1&&(s[s.length]="</sheetData>",s[o]=s[o].replace("/>",">")),c["!protect"]&&(s[s.length]=oSe(c["!protect"])),c["!autofilter"]!=null&&(s[s.length]=pSe(c["!autofilter"],c,r,e)),c["!merges"]!=null&&c["!merges"].length>0&&(s[s.length]=rSe(c["!merges"]));var p=-1,h,m=-1;return c["!links"].length>0&&(s[s.length]="<hyperlinks>",c["!links"].forEach(function(g){g[1].Target&&(h={ref:g[0]},g[1].Target.charAt(0)!="#"&&(m=ta(n,-1,na(g[1].Target).replace(/#.*$/,""),bn.HLINK),h["r:id"]="rId"+m),(p=g[1].Target.indexOf("#"))>-1&&(h.location=na(g[1].Target.slice(p+1))),g[1].Tooltip&&(h.tooltip=na(g[1].Tooltip)),s[s.length]=Zt("hyperlink",null,h))}),s[s.length]="</hyperlinks>"),delete c["!links"],c["!margins"]!=null&&(s[s.length]=dSe(c["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&(s[s.length]=Ii("ignoredErrors",Zt("ignoredError",null,{numberStoredAsText:1,sqref:d}))),u.length>0&&(m=ta(n,-1,"../drawings/drawing"+(e+1)+".xml",bn.DRAW),s[s.length]=Zt("drawing",null,{"r:id":"rId"+m}),c["!drawing"]=u),c["!comments"].length>0&&(m=ta(n,-1,"../drawings/vmlDrawing"+(e+1)+".vml",bn.VML),s[s.length]=Zt("legacyDrawing",null,{"r:id":"rId"+m}),c["!legacy"]=m),s.length>1&&(s[s.length]="</worksheet>",s[1]=s[1].replace("/>",">")),s.join("")}function wSe(e,t){var r={},n=e.l+t;r.r=e.read_shift(4),e.l+=4;var s=e.read_shift(2);e.l+=1;var i=e.read_shift(1);return e.l=n,i&7&&(r.level=i&7),i&16&&(r.hidden=!0),i&32&&(r.hpt=s/20),r}function NSe(e,t,r){var n=jt(145),s=(r["!rows"]||[])[e]||{};n.write_shift(4,e),n.write_shift(4,0);var i=320;s.hpx?i=M1(s.hpx)*20:s.hpt&&(i=s.hpt*20),n.write_shift(2,i),n.write_shift(1,0);var o=0;s.level&&(o|=s.level),s.hidden&&(o|=16),(s.hpx||s.hpt)&&(o|=32),n.write_shift(1,o),n.write_shift(1,0);var l=0,c=n.l;n.l+=4;for(var d={r:e,c:0},f=0;f<16;++f)if(!(t.s.c>f+1<<10||t.e.c<f<<10)){for(var u=-1,p=-1,h=f<<10;h<f+1<<10;++h){d.c=h;var m=Array.isArray(r)?(r[d.r]||[])[d.c]:r[Wr(d)];m&&(u<0&&(u=h),p=h)}u<0||(++l,n.write_shift(4,u),n.write_shift(4,p))}var g=n.l;return n.l=c,n.write_shift(4,l),n.l=g,n.length>n.l?n.slice(0,n.l):n}function jSe(e,t,r,n){var s=NSe(n,r,t);(s.length>17||(t["!rows"]||[])[n])&&Lt(e,0,s)}var kSe=xp,SSe=Yx;function _Se(){}function ASe(e,t){var r={},n=e[e.l];return++e.l,r.above=!(n&64),r.left=!(n&128),e.l+=18,r.name=Twe(e),r}function CSe(e,t,r){r==null&&(r=jt(84+4*e.length));var n=192;t&&(t.above&&(n&=-65),t.left&&(n&=-129)),r.write_shift(1,n);for(var s=1;s<3;++s)r.write_shift(1,0);return s5({auto:1},r),r.write_shift(-4,-1),r.write_shift(-4,-1),XB(e,r),r.slice(0,r.l)}function ESe(e){var t=kc(e);return[t]}function TSe(e,t,r){return r==null&&(r=jt(8)),hp(t,r)}function OSe(e){var t=pp(e);return[t]}function PSe(e,t,r){return r==null&&(r=jt(4)),mp(t,r)}function ISe(e){var t=kc(e),r=e.read_shift(1);return[t,r,"b"]}function DSe(e,t,r){return r==null&&(r=jt(9)),hp(t,r),r.write_shift(1,e.v?1:0),r}function LSe(e){var t=pp(e),r=e.read_shift(1);return[t,r,"b"]}function FSe(e,t,r){return r==null&&(r=jt(5)),mp(t,r),r.write_shift(1,e.v?1:0),r}function MSe(e){var t=kc(e),r=e.read_shift(1);return[t,r,"e"]}function RSe(e,t,r){return r==null&&(r=jt(9)),hp(t,r),r.write_shift(1,e.v),r}function BSe(e){var t=pp(e),r=e.read_shift(1);return[t,r,"e"]}function $Se(e,t,r){return r==null&&(r=jt(8)),mp(t,r),r.write_shift(1,e.v),r.write_shift(2,0),r.write_shift(1,0),r}function USe(e){var t=kc(e),r=e.read_shift(4);return[t,r,"s"]}function zSe(e,t,r){return r==null&&(r=jt(12)),hp(t,r),r.write_shift(4,t.v),r}function qSe(e){var t=pp(e),r=e.read_shift(4);return[t,r,"s"]}function HSe(e,t,r){return r==null&&(r=jt(8)),mp(t,r),r.write_shift(4,t.v),r}function WSe(e){var t=kc(e),r=oo(e);return[t,r,"n"]}function VSe(e,t,r){return r==null&&(r=jt(16)),hp(t,r),tp(e.v,r),r}function eU(e){var t=pp(e),r=oo(e);return[t,r,"n"]}function GSe(e,t,r){return r==null&&(r=jt(12)),mp(t,r),tp(e.v,r),r}function KSe(e){var t=kc(e),r=yA(e);return[t,r,"n"]}function XSe(e,t,r){return r==null&&(r=jt(12)),hp(t,r),YB(e.v,r),r}function YSe(e){var t=pp(e),r=yA(e);return[t,r,"n"]}function QSe(e,t,r){return r==null&&(r=jt(8)),mp(t,r),YB(e.v,r),r}function JSe(e){var t=kc(e),r=gA(e);return[t,r,"is"]}function ZSe(e){var t=kc(e),r=uo(e);return[t,r,"str"]}function e_e(e,t,r){return r==null&&(r=jt(12+4*e.v.length)),hp(t,r),Ni(e.v,r),r.length>r.l?r.slice(0,r.l):r}function t_e(e){var t=pp(e),r=uo(e);return[t,r,"str"]}function r_e(e,t,r){return r==null&&(r=jt(8+4*e.v.length)),mp(t,r),Ni(e.v,r),r.length>r.l?r.slice(0,r.l):r}function n_e(e,t,r){var n=e.l+t,s=kc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"b"];if(r.cellFormula){e.l+=2;var l=IN(e,n-e.l,r);o[3]=ro(l,null,s,r.supbooks,r)}else e.l=n;return o}function a_e(e,t,r){var n=e.l+t,s=kc(e);s.r=r["!row"];var i=e.read_shift(1),o=[s,i,"e"];if(r.cellFormula){e.l+=2;var l=IN(e,n-e.l,r);o[3]=ro(l,null,s,r.supbooks,r)}else e.l=n;return o}function s_e(e,t,r){var n=e.l+t,s=kc(e);s.r=r["!row"];var i=oo(e),o=[s,i,"n"];if(r.cellFormula){e.l+=2;var l=IN(e,n-e.l,r);o[3]=ro(l,null,s,r.supbooks,r)}else e.l=n;return o}function i_e(e,t,r){var n=e.l+t,s=kc(e);s.r=r["!row"];var i=uo(e),o=[s,i,"str"];if(r.cellFormula){e.l+=2;var l=IN(e,n-e.l,r);o[3]=ro(l,null,s,r.supbooks,r)}else e.l=n;return o}var o_e=xp,l_e=Yx;function c_e(e,t){return t==null&&(t=jt(4)),t.write_shift(4,e),t}function d_e(e,t){var r=e.l+t,n=xp(e),s=vA(e),i=uo(e),o=uo(e),l=uo(e);e.l=r;var c={rfx:n,relId:s,loc:i,display:l};return o&&(c.Tooltip=o),c}function u_e(e,t){var r=jt(50+4*(e[1].Target.length+(e[1].Tooltip||"").length));Yx({s:Za(e[0]),e:Za(e[0])},r),bA("rId"+t,r);var n=e[1].Target.indexOf("#"),s=n==-1?"":e[1].Target.slice(n+1);return Ni(s||"",r),Ni(e[1].Tooltip||"",r),Ni("",r),r.slice(0,r.l)}function f_e(){}function h_e(e,t,r){var n=e.l+t,s=QB(e),i=e.read_shift(1),o=[s];if(o[2]=i,r.cellFormula){var l=M3e(e,n-e.l,r);o[1]=l}else e.l=n;return o}function p_e(e,t,r){var n=e.l+t,s=xp(e),i=[s];if(r.cellFormula){var o=B3e(e,n-e.l,r);i[1]=o,e.l=n}else e.l=n;return i}function m_e(e,t,r){r==null&&(r=jt(18));var n=DN(e,t);r.write_shift(-4,e),r.write_shift(-4,e),r.write_shift(4,(n.width||10)*256),r.write_shift(4,0);var s=0;return t.hidden&&(s|=1),typeof n.width=="number"&&(s|=2),t.level&&(s|=t.level<<8),r.write_shift(2,s),r}var tU=["left","right","top","bottom","header","footer"];function x_e(e){var t={};return tU.forEach(function(r){t[r]=oo(e)}),t}function g_e(e,t){return t==null&&(t=jt(6*8)),Mh(e),tU.forEach(function(r){tp(e[r],t)}),t}function v_e(e){var t=e.read_shift(2);return e.l+=28,{RTL:t&32}}function b_e(e,t,r){r==null&&(r=jt(30));var n=924;return(((t||{}).Views||[])[0]||{}).RTL&&(n|=32),r.write_shift(2,n),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(1,0),r.write_shift(1,0),r.write_shift(2,0),r.write_shift(2,100),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(2,0),r.write_shift(4,0),r}function y_e(e){var t=jt(24);return t.write_shift(4,4),t.write_shift(4,1),Yx(e,t),t}function w_e(e,t){return t==null&&(t=jt(16*4+2)),t.write_shift(2,e.password?_A(e.password):0),t.write_shift(4,1),[["objects",!1],["scenarios",!1],["formatCells",!0],["formatColumns",!0],["formatRows",!0],["insertColumns",!0],["insertRows",!0],["insertHyperlinks",!0],["deleteColumns",!0],["deleteRows",!0],["selectLockedCells",!1],["sort",!0],["autoFilter",!0],["pivotTables",!0],["selectUnlockedCells",!1]].forEach(function(r){r[1]?t.write_shift(4,e[r[0]]!=null&&!e[r[0]]?1:0):t.write_shift(4,e[r[0]]!=null&&e[r[0]]?0:1)}),t}function N_e(){}function j_e(){}function k_e(e,t,r,n,s,i,o){if(!e)return e;var l=t||{};n||(n={"!id":{}});var c=l.dense?[]:{},d,f={s:{r:2e6,c:2e6},e:{r:0,c:0}},u=!1,p=!1,h,m,g,x,v,b,w,y,N,S=[];l.biff=12,l["!row"]=0;var j=0,_=!1,T=[],D={},A=l.supbooks||s.supbooks||[[]];if(A.sharedf=D,A.arrayf=T,A.SheetNames=s.SheetNames||s.Sheets.map(function(J){return J.name}),!l.supbooks&&(l.supbooks=A,s.Names))for(var C=0;C<s.Names.length;++C)A[0][C+1]=s.Names[C];var M=[],F=[],B=!1;R1[16]={n:"BrtShortReal",f:eU};var Y;if(Ju(e,function(U,X,W){if(!p)switch(W){case 148:d=U;break;case 0:h=U,l.sheetRows&&l.sheetRows<=h.r&&(p=!0),y=As(x=h.r),l["!row"]=h.r,(U.hidden||U.hpt||U.level!=null)&&(U.hpt&&(U.hpx=Cx(U.hpt)),F[U.r]=U);break;case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 13:case 14:case 15:case 16:case 17:case 18:case 62:switch(m={t:U[2]},U[2]){case"n":m.v=U[1];break;case"s":w=yv[U[1]],m.v=w.t,m.r=w.r;break;case"b":m.v=!!U[1];break;case"e":m.v=U[1],l.cellText!==!1&&(m.w=Zu[m.v]);break;case"str":m.t="s",m.v=U[1];break;case"is":m.t="s",m.v=U[1].t;break}if((g=o.CellXf[U[0].iStyleRef])&&Q$(m,g.numFmtId,null,l,i,o),v=U[0].c==-1?v+1:U[0].c,l.dense?(c[x]||(c[x]=[]),c[x][v]=m):c[Ja(v)+y]=m,l.cellFormula){for(_=!1,j=0;j<T.length;++j){var E=T[j];h.r>=E[0].s.r&&h.r<=E[0].e.r&&v>=E[0].s.c&&v<=E[0].e.c&&(m.F=an(E[0]),_=!0)}!_&&U.length>3&&(m.f=U[3])}if(f.s.r>h.r&&(f.s.r=h.r),f.s.c>v&&(f.s.c=v),f.e.r<h.r&&(f.e.r=h.r),f.e.c<v&&(f.e.c=v),l.cellDates&&g&&m.t=="n"&&Gx(Br[g.numFmtId])){var R=vh(m.v);R&&(m.t="d",m.v=new Date(R.y,R.m-1,R.d,R.H,R.M,R.S,R.u))}Y&&(Y.type=="XLDAPR"&&(m.D=!0),Y=void 0);break;case 1:case 12:if(!l.sheetStubs||u)break;m={t:"z",v:void 0},v=U[0].c==-1?v+1:U[0].c,l.dense?(c[x]||(c[x]=[]),c[x][v]=m):c[Ja(v)+y]=m,f.s.r>h.r&&(f.s.r=h.r),f.s.c>v&&(f.s.c=v),f.e.r<h.r&&(f.e.r=h.r),f.e.c<v&&(f.e.c=v),Y&&(Y.type=="XLDAPR"&&(m.D=!0),Y=void 0);break;case 176:S.push(U);break;case 49:Y=((l.xlmeta||{}).Cell||[])[U-1];break;case 494:var q=n["!id"][U.relId];for(q?(U.Target=q.Target,U.loc&&(U.Target+="#"+U.loc),U.Rel=q):U.relId==""&&(U.Target="#"+U.loc),x=U.rfx.s.r;x<=U.rfx.e.r;++x)for(v=U.rfx.s.c;v<=U.rfx.e.c;++v)l.dense?(c[x]||(c[x]=[]),c[x][v]||(c[x][v]={t:"z",v:void 0}),c[x][v].l=U):(b=Wr({c:v,r:x}),c[b]||(c[b]={t:"z",v:void 0}),c[b].l=U);break;case 426:if(!l.cellFormula)break;T.push(U),N=l.dense?c[x][v]:c[Ja(v)+y],N.f=ro(U[1],f,{r:h.r,c:v},A,l),N.F=an(U[0]);break;case 427:if(!l.cellFormula)break;D[Wr(U[0].s)]=U[1],N=l.dense?c[x][v]:c[Ja(v)+y],N.f=ro(U[1],f,{r:h.r,c:v},A,l);break;case 60:if(!l.cellStyles)break;for(;U.e>=U.s;)M[U.e--]={width:U.w/256,hidden:!!(U.flags&1),level:U.level},B||(B=!0,AA(U.w/256)),p0(M[U.e+1]);break;case 161:c["!autofilter"]={ref:an(U)};break;case 476:c["!margins"]=U;break;case 147:s.Sheets[r]||(s.Sheets[r]={}),U.name&&(s.Sheets[r].CodeName=U.name),(U.above||U.left)&&(c["!outline"]={above:U.above,left:U.left});break;case 137:s.Views||(s.Views=[{}]),s.Views[0]||(s.Views[0]={}),U.RTL&&(s.Views[0].RTL=!0);break;case 485:break;case 64:case 1053:break;case 151:break;case 152:case 175:case 644:case 625:case 562:case 396:case 1112:case 1146:case 471:case 1050:case 649:case 1105:case 589:case 607:case 564:case 1055:case 168:case 174:case 1180:case 499:case 507:case 550:case 171:case 167:case 1177:case 169:case 1181:case 551:case 552:case 661:case 639:case 478:case 537:case 477:case 536:case 1103:case 680:case 1104:case 1024:case 663:case 535:case 678:case 504:case 1043:case 428:case 170:case 3072:case 50:case 2070:case 1045:break;case 35:u=!0;break;case 36:u=!1;break;case 37:u=!0;break;case 38:u=!1;break;default:if(!X.T){if(!u||l.WTF)throw new Error("Unexpected record 0x"+W.toString(16))}}},l),delete l.supbooks,delete l["!row"],!c["!ref"]&&(f.s.r<2e6||d&&(d.e.r>0||d.e.c>0||d.s.r>0||d.s.c>0))&&(c["!ref"]=an(d||f)),l.sheetRows&&c["!ref"]){var V=Bn(c["!ref"]);l.sheetRows<=+V.e.r&&(V.e.r=l.sheetRows-1,V.e.r>f.e.r&&(V.e.r=f.e.r),V.e.r<V.s.r&&(V.s.r=V.e.r),V.e.c>f.e.c&&(V.e.c=f.e.c),V.e.c<V.s.c&&(V.s.c=V.e.c),c["!fullref"]=c["!ref"],c["!ref"]=an(V))}return S.length>0&&(c["!merges"]=S),M.length>0&&(c["!cols"]=M),F.length>0&&(c["!rows"]=F),c}function S_e(e,t,r,n,s,i,o){if(t.v===void 0)return!1;var l="";switch(t.t){case"b":l=t.v?"1":"0";break;case"d":t=La(t),t.z=t.z||Br[14],t.v=ai(Da(t.v)),t.t="n";break;case"n":case"e":l=""+t.v;break;default:l=t.v;break}var c={r,c:n};switch(c.s=O0(s.cellXfs,t,s),t.l&&i["!links"].push([Wr(c),t.l]),t.c&&i["!comments"].push([Wr(c),t.c]),t.t){case"s":case"str":return s.bookSST?(l=PA(s.Strings,t.v,s.revStrings),c.t="s",c.v=l,o?Lt(e,18,HSe(t,c)):Lt(e,7,zSe(t,c))):(c.t="str",o?Lt(e,17,r_e(t,c)):Lt(e,6,e_e(t,c))),!0;case"n":return t.v==(t.v|0)&&t.v>-1e3&&t.v<1e3?o?Lt(e,13,QSe(t,c)):Lt(e,2,XSe(t,c)):o?Lt(e,16,GSe(t,c)):Lt(e,5,VSe(t,c)),!0;case"b":return c.t="b",o?Lt(e,15,FSe(t,c)):Lt(e,4,DSe(t,c)),!0;case"e":return c.t="e",o?Lt(e,14,$Se(t,c)):Lt(e,3,RSe(t,c)),!0}return o?Lt(e,12,PSe(t,c)):Lt(e,1,TSe(t,c)),!0}function __e(e,t,r,n){var s=Bn(t["!ref"]||"A1"),i,o="",l=[];Lt(e,145);var c=Array.isArray(t),d=s.e.r;t["!rows"]&&(d=Math.max(s.e.r,t["!rows"].length-1));for(var f=s.s.r;f<=d;++f){o=As(f),jSe(e,t,s,f);var u=!1;if(f<=s.e.r)for(var p=s.s.c;p<=s.e.c;++p){f===s.s.r&&(l[p]=Ja(p)),i=l[p]+o;var h=c?(t[f]||[])[p]:t[i];if(!h){u=!1;continue}u=S_e(e,h,f,p,n,t,u)}}Lt(e,146)}function A_e(e,t){!t||!t["!merges"]||(Lt(e,177,c_e(t["!merges"].length)),t["!merges"].forEach(function(r){Lt(e,176,l_e(r))}),Lt(e,178))}function C_e(e,t){!t||!t["!cols"]||(Lt(e,390),t["!cols"].forEach(function(r,n){r&&Lt(e,60,m_e(n,r))}),Lt(e,391))}function E_e(e,t){!t||!t["!ref"]||(Lt(e,648),Lt(e,649,y_e(Bn(t["!ref"]))),Lt(e,650))}function T_e(e,t,r){t["!links"].forEach(function(n){if(n[1].Target){var s=ta(r,-1,n[1].Target.replace(/#.*$/,""),bn.HLINK);Lt(e,494,u_e(n,s))}}),delete t["!links"]}function O_e(e,t,r,n){if(t["!comments"].length>0){var s=ta(n,-1,"../drawings/vmlDrawing"+(r+1)+".vml",bn.VML);Lt(e,551,bA("rId"+s)),t["!legacy"]=s}}function P_e(e,t,r,n){if(t["!autofilter"]){var s=t["!autofilter"],i=typeof s.ref=="string"?s.ref:an(s.ref);r.Workbook||(r.Workbook={Sheets:[]}),r.Workbook.Names||(r.Workbook.Names=[]);var o=r.Workbook.Names,l=ol(i);l.s.r==l.e.r&&(l.e.r=ol(t["!ref"]).e.r,i=an(l));for(var c=0;c<o.length;++c){var d=o[c];if(d.Name=="_xlnm._FilterDatabase"&&d.Sheet==n){d.Ref="'"+r.SheetNames[n]+"'!"+i;break}}c==o.length&&o.push({Name:"_xlnm._FilterDatabase",Sheet:n,Ref:"'"+r.SheetNames[n]+"'!"+i}),Lt(e,161,Yx(Bn(i))),Lt(e,162)}}function I_e(e,t,r){Lt(e,133),Lt(e,137,b_e(t,r)),Lt(e,138),Lt(e,134)}function D_e(e,t){t["!protect"]&&Lt(e,535,w_e(t["!protect"]))}function L_e(e,t,r,n){var s=sl(),i=r.SheetNames[e],o=r.Sheets[i]||{},l=i;try{r&&r.Workbook&&(l=r.Workbook.Sheets[e].CodeName||l)}catch{}var c=Bn(o["!ref"]||"A1");if(c.e.c>16383||c.e.r>1048575){if(t.WTF)throw new Error("Range "+(o["!ref"]||"A1")+" exceeds format limit A1:XFD1048576");c.e.c=Math.min(c.e.c,16383),c.e.r=Math.min(c.e.c,1048575)}return o["!links"]=[],o["!comments"]=[],Lt(s,129),(r.vbaraw||o["!outline"])&&Lt(s,147,CSe(l,o["!outline"])),Lt(s,148,SSe(c)),I_e(s,o,r.Workbook),C_e(s,o),__e(s,o,e,t),D_e(s,o),P_e(s,o,r,e),A_e(s,o),T_e(s,o,n),o["!margins"]&&Lt(s,476,g_e(o["!margins"])),(!t||t.ignoreEC||t.ignoreEC==null)&&E_e(s,o),O_e(s,o,e,n),Lt(s,130),s.end()}function F_e(e){var t=[],r=e.match(/^<c:numCache>/),n;(e.match(/<c:pt idx="(\d*)">(.*?)<\/c:pt>/mg)||[]).forEach(function(i){var o=i.match(/<c:pt idx="(\d*?)"><c:v>(.*)<\/c:v><\/c:pt>/);o&&(t[+o[1]]=r?+o[2]:o[2])});var s=Mn((e.match(/<c:formatCode>([\s\S]*?)<\/c:formatCode>/)||["","General"])[1]);return(e.match(/<c:f>(.*?)<\/c:f>/mg)||[]).forEach(function(i){n=i.replace(/<.*?>/g,"")}),[t,s,n]}function M_e(e,t,r,n,s,i){var o=i||{"!type":"chart"};if(!e)return i;var l=0,c=0,d="A",f={s:{r:2e6,c:2e6},e:{r:0,c:0}};return(e.match(/<c:numCache>[\s\S]*?<\/c:numCache>/gm)||[]).forEach(function(u){var p=F_e(u);f.s.r=f.s.c=0,f.e.c=l,d=Ja(l),p[0].forEach(function(h,m){o[d+As(m)]={t:"n",v:h,z:p[1]},c=m}),f.e.r<c&&(f.e.r=c),++l}),l>0&&(o["!ref"]=an(f)),o}function R_e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o,l=e.match(J$);return l&&IA(l[0],i,s,r),(o=e.match(/drawing r:id="(.*?)"/))&&(i["!rel"]=o[1]),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}function B_e(e,t){e.l+=10;var r=uo(e);return{name:r}}function $_e(e,t,r,n,s){if(!e)return e;n||(n={"!id":{}});var i={"!type":"chart","!drawel":null,"!rel":""},o=!1;return Ju(e,function(c,d,f){switch(f){case 550:i["!rel"]=c;break;case 651:s.Sheets[r]||(s.Sheets[r]={}),c.name&&(s.Sheets[r].CodeName=c.name);break;case 562:case 652:case 669:case 679:case 551:case 552:case 476:case 3072:break;case 35:o=!0;break;case 36:o=!1;break;case 37:break;case 38:break;default:if(!(d.T>0)){if(!(d.T<0)){if(!o||t.WTF)throw new Error("Unexpected record 0x"+f.toString(16))}}}},t),n["!id"][i["!rel"]]&&(i["!drawel"]=n["!id"][i["!rel"]]),i}var DA=[["allowRefreshQuery",!1,"bool"],["autoCompressPictures",!0,"bool"],["backupFile",!1,"bool"],["checkCompatibility",!1,"bool"],["CodeName",""],["date1904",!1,"bool"],["defaultThemeVersion",0,"int"],["filterPrivacy",!1,"bool"],["hidePivotFieldList",!1,"bool"],["promptedSolutions",!1,"bool"],["publishItems",!1,"bool"],["refreshAllConnections",!1,"bool"],["saveExternalLinkValues",!0,"bool"],["showBorderUnselectedTables",!0,"bool"],["showInkAnnotation",!0,"bool"],["showObjects","all"],["showPivotChartFilter",!1,"bool"],["updateLinks","userSet"]],U_e=[["activeTab",0,"int"],["autoFilterDateGrouping",!0,"bool"],["firstSheet",0,"int"],["minimized",!1,"bool"],["showHorizontalScroll",!0,"bool"],["showSheetTabs",!0,"bool"],["showVerticalScroll",!0,"bool"],["tabRatio",600,"int"],["visibility","visible"]],z_e=[],q_e=[["calcCompleted","true"],["calcMode","auto"],["calcOnSave","true"],["concurrentCalc","true"],["fullCalcOnLoad","false"],["fullPrecision","true"],["iterate","false"],["iterateCount","100"],["iterateDelta","0.001"],["refMode","A1"]];function L8(e,t){for(var r=0;r!=e.length;++r)for(var n=e[r],s=0;s!=t.length;++s){var i=t[s];if(n[i[0]]==null)n[i[0]]=i[1];else switch(i[2]){case"bool":typeof n[i[0]]=="string"&&(n[i[0]]=Oa(n[i[0]]));break;case"int":typeof n[i[0]]=="string"&&(n[i[0]]=parseInt(n[i[0]],10));break}}}function F8(e,t){for(var r=0;r!=t.length;++r){var n=t[r];if(e[n[0]]==null)e[n[0]]=n[1];else switch(n[2]){case"bool":typeof e[n[0]]=="string"&&(e[n[0]]=Oa(e[n[0]]));break;case"int":typeof e[n[0]]=="string"&&(e[n[0]]=parseInt(e[n[0]],10));break}}}function rU(e){F8(e.WBProps,DA),F8(e.CalcPr,q_e),L8(e.WBView,U_e),L8(e.Sheets,z_e),Pm.date1904=Oa(e.WBProps.date1904)}function H_e(e){return!e.Workbook||!e.Workbook.WBProps?"false":Oa(e.Workbook.WBProps.date1904)?"true":"false"}var W_e="][*?/\\".split("");function nU(e,t){if(e.length>31)throw new Error("Sheet names cannot exceed 31 chars");var r=!0;return W_e.forEach(function(n){if(e.indexOf(n)!=-1)throw new Error("Sheet name cannot contain : \\ / ? * [ ]")}),r}function V_e(e,t,r){e.forEach(function(n,s){nU(n);for(var i=0;i<s;++i)if(n==e[i])throw new Error("Duplicate Sheet Name: "+n);if(r){var o=t&&t[s]&&t[s].CodeName||n;if(o.charCodeAt(0)==95&&o.length>22)throw new Error("Bad Code Name: Worksheet"+o)}})}function G_e(e){if(!e||!e.SheetNames||!e.Sheets)throw new Error("Invalid Workbook");if(!e.SheetNames.length)throw new Error("Workbook is empty");var t=e.Workbook&&e.Workbook.Sheets||[];V_e(e.SheetNames,t,!!e.vbaraw);for(var r=0;r<e.SheetNames.length;++r)H3e(e.Sheets[e.SheetNames[r]],e.SheetNames[r],r)}var K_e=/<\w+:workbook/;function X_e(e,t){if(!e)throw new Error("Could not find file");var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},Names:[],xmlns:""},n=!1,s="xmlns",i={},o=0;if(e.replace(po,function(c,d){var f=Vr(c);switch(Zd(f[0])){case"<?xml":break;case"<workbook":c.match(K_e)&&(s="xmlns"+c.match(/<(\w+):/)[1]),r.xmlns=f[s];break;case"</workbook>":break;case"<fileVersion":delete f[0],r.AppVersion=f;break;case"<fileVersion/>":case"</fileVersion>":break;case"<fileSharing":break;case"<fileSharing/>":break;case"<workbookPr":case"<workbookPr/>":DA.forEach(function(u){if(f[u[0]]!=null)switch(u[2]){case"bool":r.WBProps[u[0]]=Oa(f[u[0]]);break;case"int":r.WBProps[u[0]]=parseInt(f[u[0]],10);break;default:r.WBProps[u[0]]=f[u[0]]}}),f.codeName&&(r.WBProps.CodeName=ua(f.codeName));break;case"</workbookPr>":break;case"<workbookProtection":break;case"<workbookProtection/>":break;case"<bookViews":case"<bookViews>":case"</bookViews>":break;case"<workbookView":case"<workbookView/>":delete f[0],r.WBView.push(f);break;case"</workbookView>":break;case"<sheets":case"<sheets>":case"</sheets>":break;case"<sheet":switch(f.state){case"hidden":f.Hidden=1;break;case"veryHidden":f.Hidden=2;break;default:f.Hidden=0}delete f.state,f.name=Mn(ua(f.name)),delete f[0],r.Sheets.push(f);break;case"</sheet>":break;case"<functionGroups":case"<functionGroups/>":break;case"<functionGroup":break;case"<externalReferences":case"</externalReferences>":case"<externalReferences>":break;case"<externalReference":break;case"<definedNames/>":break;case"<definedNames>":case"<definedNames":n=!0;break;case"</definedNames>":n=!1;break;case"<definedName":i={},i.Name=ua(f.name),f.comment&&(i.Comment=f.comment),f.localSheetId&&(i.Sheet=+f.localSheetId),Oa(f.hidden||"0")&&(i.Hidden=!0),o=d+c.length;break;case"</definedName>":i.Ref=Mn(ua(e.slice(o,d))),r.Names.push(i);break;case"<definedName/>":break;case"<calcPr":delete f[0],r.CalcPr=f;break;case"<calcPr/>":delete f[0],r.CalcPr=f;break;case"</calcPr>":break;case"<oleSize":break;case"<customWorkbookViews>":case"</customWorkbookViews>":case"<customWorkbookViews":break;case"<customWorkbookView":case"</customWorkbookView>":break;case"<pivotCaches>":case"</pivotCaches>":case"<pivotCaches":break;case"<pivotCache":break;case"<smartTagPr":case"<smartTagPr/>":break;case"<smartTagTypes":case"<smartTagTypes>":case"</smartTagTypes>":break;case"<smartTagType":break;case"<webPublishing":case"<webPublishing/>":break;case"<fileRecoveryPr":case"<fileRecoveryPr/>":break;case"<webPublishObjects>":case"<webPublishObjects":case"</webPublishObjects>":break;case"<webPublishObject":break;case"<extLst":case"<extLst>":case"</extLst>":case"<extLst/>":break;case"<ext":n=!0;break;case"</ext>":n=!1;break;case"<ArchID":break;case"<AlternateContent":case"<AlternateContent>":n=!0;break;case"</AlternateContent>":n=!1;break;case"<revisionPtr":break;default:if(!n&&t.WTF)throw new Error("unrecognized "+f[0]+" in workbook")}return c}),fp.indexOf(r.xmlns)===-1)throw new Error("Unknown Namespace: "+r.xmlns);return rU(r),r}function aU(e){var t=[Es];t[t.length]=Zt("workbook",null,{xmlns:fp[0],"xmlns:r":ti.r});var r=e.Workbook&&(e.Workbook.Names||[]).length>0,n={codeName:"ThisWorkbook"};e.Workbook&&e.Workbook.WBProps&&(DA.forEach(function(l){e.Workbook.WBProps[l[0]]!=null&&e.Workbook.WBProps[l[0]]!=l[1]&&(n[l[0]]=e.Workbook.WBProps[l[0]])}),e.Workbook.WBProps.CodeName&&(n.codeName=e.Workbook.WBProps.CodeName,delete n.CodeName)),t[t.length]=Zt("workbookPr",null,n);var s=e.Workbook&&e.Workbook.Sheets||[],i=0;if(s&&s[0]&&s[0].Hidden){for(t[t.length]="<bookViews>",i=0;i!=e.SheetNames.length&&!(!s[i]||!s[i].Hidden);++i);i==e.SheetNames.length&&(i=0),t[t.length]='<workbookView firstSheet="'+i+'" activeTab="'+i+'"/>',t[t.length]="</bookViews>"}for(t[t.length]="<sheets>",i=0;i!=e.SheetNames.length;++i){var o={name:na(e.SheetNames[i].slice(0,31))};if(o.sheetId=""+(i+1),o["r:id"]="rId"+(i+1),s[i])switch(s[i].Hidden){case 1:o.state="hidden";break;case 2:o.state="veryHidden";break}t[t.length]=Zt("sheet",null,o)}return t[t.length]="</sheets>",r&&(t[t.length]="<definedNames>",e.Workbook&&e.Workbook.Names&&e.Workbook.Names.forEach(function(l){var c={name:l.Name};l.Comment&&(c.comment=l.Comment),l.Sheet!=null&&(c.localSheetId=""+l.Sheet),l.Hidden&&(c.hidden="1"),l.Ref&&(t[t.length]=Zt("definedName",na(l.Ref),c))}),t[t.length]="</definedNames>"),t.length>2&&(t[t.length]="</workbook>",t[1]=t[1].replace("/>",">")),t.join("")}function Y_e(e,t){var r={};return r.Hidden=e.read_shift(4),r.iTabID=e.read_shift(4),r.strRelID=bS(e),r.name=uo(e),r}function Q_e(e,t){return t||(t=jt(127)),t.write_shift(4,e.Hidden),t.write_shift(4,e.iTabID),bA(e.strRelID,t),Ni(e.name.slice(0,31),t),t.length>t.l?t.slice(0,t.l):t}function J_e(e,t){var r={},n=e.read_shift(4);r.defaultThemeVersion=e.read_shift(4);var s=t>8?uo(e):"";return s.length>0&&(r.CodeName=s),r.autoCompressPictures=!!(n&65536),r.backupFile=!!(n&64),r.checkCompatibility=!!(n&4096),r.date1904=!!(n&1),r.filterPrivacy=!!(n&8),r.hidePivotFieldList=!!(n&1024),r.promptedSolutions=!!(n&16),r.publishItems=!!(n&2048),r.refreshAllConnections=!!(n&262144),r.saveExternalLinkValues=!!(n&128),r.showBorderUnselectedTables=!!(n&4),r.showInkAnnotation=!!(n&32),r.showObjects=["all","placeholders","none"][n>>13&3],r.showPivotChartFilter=!!(n&32768),r.updateLinks=["userSet","never","always"][n>>8&3],r}function Z_e(e,t){t||(t=jt(72));var r=0;return e&&e.filterPrivacy&&(r|=8),t.write_shift(4,r),t.write_shift(4,0),XB(e&&e.CodeName||"ThisWorkbook",t),t.slice(0,t.l)}function e6e(e,t){var r={};return e.read_shift(4),r.ArchID=e.read_shift(4),e.l+=t-8,r}function t6e(e,t,r){var n=e.l+t;e.l+=4,e.l+=1;var s=e.read_shift(4),i=Owe(e),o=R3e(e,0,r),l=vA(e);e.l=n;var c={Name:i,Ptg:o};return s<268435455&&(c.Sheet=s),l&&(c.Comment=l),c}function r6e(e,t){var r={AppVersion:{},WBProps:{},WBView:[],Sheets:[],CalcPr:{},xmlns:""},n=[],s=!1;t||(t={}),t.biff=12;var i=[],o=[[]];return o.SheetNames=[],o.XTI=[],R1[16]={n:"BrtFRTArchID$",f:e6e},Ju(e,function(c,d,f){switch(f){case 156:o.SheetNames.push(c.name),r.Sheets.push(c);break;case 153:r.WBProps=c;break;case 39:c.Sheet!=null&&(t.SID=c.Sheet),c.Ref=ro(c.Ptg,null,null,o,t),delete t.SID,delete c.Ptg,i.push(c);break;case 1036:break;case 357:case 358:case 355:case 667:o[0].length?o.push([f,c]):o[0]=[f,c],o[o.length-1].XTI=[];break;case 362:o.length===0&&(o[0]=[],o[0].XTI=[]),o[o.length-1].XTI=o[o.length-1].XTI.concat(c),o.XTI=o.XTI.concat(c);break;case 361:break;case 2071:case 158:case 143:case 664:case 353:break;case 3072:case 3073:case 534:case 677:case 157:case 610:case 2050:case 155:case 548:case 676:case 128:case 665:case 2128:case 2125:case 549:case 2053:case 596:case 2076:case 2075:case 2082:case 397:case 154:case 1117:case 553:case 2091:break;case 35:n.push(f),s=!0;break;case 36:n.pop(),s=!1;break;case 37:n.push(f),s=!0;break;case 38:n.pop(),s=!1;break;case 16:break;default:if(!d.T){if(!s||t.WTF&&n[n.length-1]!=37&&n[n.length-1]!=35)throw new Error("Unexpected record 0x"+f.toString(16))}}},t),rU(r),r.Names=i,r.supbooks=o,r}function n6e(e,t){Lt(e,143);for(var r=0;r!=t.SheetNames.length;++r){var n=t.Workbook&&t.Workbook.Sheets&&t.Workbook.Sheets[r]&&t.Workbook.Sheets[r].Hidden||0,s={Hidden:n,iTabID:r+1,strRelID:"rId"+(r+1),name:t.SheetNames[r]};Lt(e,156,Q_e(s))}Lt(e,144)}function a6e(e,t){t||(t=jt(127));for(var r=0;r!=4;++r)t.write_shift(4,0);return Ni("SheetJS",t),Ni(Jw.version,t),Ni(Jw.version,t),Ni("7262",t),t.length>t.l?t.slice(0,t.l):t}function s6e(e,t){t||(t=jt(29)),t.write_shift(-4,0),t.write_shift(-4,460),t.write_shift(4,28800),t.write_shift(4,17600),t.write_shift(4,500),t.write_shift(4,e),t.write_shift(4,e);var r=120;return t.write_shift(1,r),t.length>t.l?t.slice(0,t.l):t}function i6e(e,t){if(!(!t.Workbook||!t.Workbook.Sheets)){for(var r=t.Workbook.Sheets,n=0,s=-1,i=-1;n<r.length;++n)!r[n]||!r[n].Hidden&&s==-1?s=n:r[n].Hidden==1&&i==-1&&(i=n);i>s||(Lt(e,135),Lt(e,158,s6e(s)),Lt(e,136))}}function o6e(e,t){var r=sl();return Lt(r,131),Lt(r,128,a6e()),Lt(r,153,Z_e(e.Workbook&&e.Workbook.WBProps||null)),i6e(r,e),n6e(r,e),Lt(r,132),r.end()}function l6e(e,t,r){return t.slice(-4)===".bin"?r6e(e,r):X_e(e,r)}function c6e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?k_e(e,n,r,s,i,o,l):tSe(e,n,r,s,i,o,l)}function d6e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?$_e(e,n,r,s,i):R_e(e,n,r,s,i)}function u6e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?hke():pke()}function f6e(e,t,r,n,s,i,o,l){return t.slice(-4)===".bin"?uke():fke()}function h6e(e,t,r,n){return t.slice(-4)===".bin"?l4e(e,r,n):Yje(e,r,n)}function p6e(e,t,r){return R$(e,r)}function m6e(e,t,r){return t.slice(-4)===".bin"?mje(e,r):fje(e,r)}function x6e(e,t,r){return t.slice(-4)===".bin"?ike(e,r):Q4e(e,r)}function g6e(e,t,r){return t.slice(-4)===".bin"?K4e(e):V4e(e)}function v6e(e,t,r,n){return r.slice(-4)===".bin"?X4e(e,t,r,n):void 0}function b6e(e,t,r){return t.slice(-4)===".bin"?q4e(e,t,r):W4e(e,t,r)}function y6e(e,t,r){return(t.slice(-4)===".bin"?o6e:aU)(e)}function w6e(e,t,r,n,s){return(t.slice(-4)===".bin"?L_e:Z$)(e,r,n,s)}function N6e(e,t,r){return(t.slice(-4)===".bin"?v4e:F$)(e,r)}function j6e(e,t,r){return(t.slice(-4)===".bin"?vje:C$)(e,r)}function k6e(e,t,r){return(t.slice(-4)===".bin"?oke:U$)(e)}function S6e(e){return(e.slice(-4)===".bin"?H4e:B$)()}var sU=/([\w:]+)=((?:")([^"]*)(?:")|(?:')([^']*)(?:'))/g,iU=/([\w:]+)=((?:")(?:[^"]*)(?:")|(?:')(?:[^']*)(?:'))/;function Bc(e,t){var r=e.split(/\s+/),n=[];if(n[0]=r[0],r.length===1)return n;var s=e.match(sU),i,o,l,c;if(s)for(c=0;c!=s.length;++c)i=s[c].match(iU),(o=i[1].indexOf(":"))===-1?n[i[1]]=i[2].slice(1,i[2].length-1):(i[1].slice(0,6)==="xmlns:"?l="xmlns"+i[1].slice(6):l=i[1].slice(o+1),n[l]=i[2].slice(1,i[2].length-1));return n}function _6e(e){var t=e.split(/\s+/),r={};if(t.length===1)return r;var n=e.match(sU),s,i,o,l;if(n)for(l=0;l!=n.length;++l)s=n[l].match(iU),(i=s[1].indexOf(":"))===-1?r[s[1]]=s[2].slice(1,s[2].length-1):(s[1].slice(0,6)==="xmlns:"?o="xmlns"+s[1].slice(6):o=s[1].slice(i+1),r[o]=s[2].slice(1,s[2].length-1));return r}var Nv;function A6e(e,t){var r=Nv[e]||Mn(e);return r==="General"?Zh(t):yc(r,t)}function C6e(e,t,r,n){var s=n;switch((r[0].match(/dt:dt="([\w.]+)"/)||["",""])[1]){case"boolean":s=Oa(n);break;case"i2":case"int":s=parseInt(n,10);break;case"r4":case"float":s=parseFloat(n);break;case"date":case"dateTime.tz":s=Da(n);break;case"i8":case"string":case"fixed":case"uuid":case"bin.base64":break;default:throw new Error("bad custprop:"+r[0])}e[Mn(t)]=s}function E6e(e,t,r){if(e.t!=="z"){if(!r||r.cellText!==!1)try{e.t==="e"?e.w=e.w||Zu[e.v]:t==="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=E1(e.v):e.w=Zh(e.v):e.w=A6e(t||"General",e.v)}catch(i){if(r.WTF)throw i}try{var n=Nv[t]||t||"General";if(r.cellNF&&(e.z=n),r.cellDates&&e.t=="n"&&Gx(n)){var s=vh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}catch(i){if(r.WTF)throw i}}}function T6e(e,t,r){if(r.cellStyles&&t.Interior){var n=t.Interior;n.Pattern&&(n.patternType=zje[n.Pattern]||n.Pattern)}e[t.ID]=t}function O6e(e,t,r,n,s,i,o,l,c,d){var f="General",u=n.StyleID,p={};d=d||{};var h=[],m=0;for(u===void 0&&l&&(u=l.StyleID),u===void 0&&o&&(u=o.StyleID);i[u]!==void 0&&(i[u].nf&&(f=i[u].nf),i[u].Interior&&h.push(i[u].Interior),!!i[u].Parent);)u=i[u].Parent;switch(r.Type){case"Boolean":n.t="b",n.v=Oa(e);break;case"String":n.t="s",n.r=ZI(Mn(e)),n.v=e.indexOf("<")>-1?Mn(t||e).replace(/<.*?>/g,""):n.r;break;case"DateTime":e.slice(-1)!="Z"&&(e+="Z"),n.v=(Da(e)-new Date(Date.UTC(1899,11,30)))/(24*60*60*1e3),n.v!==n.v?n.v=Mn(e):n.v<60&&(n.v=n.v-1),(!f||f=="General")&&(f="yyyy-mm-dd");case"Number":n.v===void 0&&(n.v=+e),n.t||(n.t="n");break;case"Error":n.t="e",n.v=e$[e],d.cellText!==!1&&(n.w=e);break;default:e==""&&t==""?n.t="z":(n.t="s",n.v=ZI(t||e));break}if(E6e(n,f,d),d.cellFormula!==!1)if(n.Formula){var g=Mn(n.Formula);g.charCodeAt(0)==61&&(g=g.slice(1)),n.f=Om(g,s),delete n.Formula,n.ArrayRange=="RC"?n.F=Om("RC:RC",s):n.ArrayRange&&(n.F=Om(n.ArrayRange,s),c.push([Bn(n.F),n.F]))}else for(m=0;m<c.length;++m)s.r>=c[m][0].s.r&&s.r<=c[m][0].e.r&&s.c>=c[m][0].s.c&&s.c<=c[m][0].e.c&&(n.F=c[m][1]);d.cellStyles&&(h.forEach(function(x){!p.patternType&&x.patternType&&(p.patternType=x.patternType)}),n.s=p),n.StyleID!==void 0&&(n.ixfe=n.StyleID)}function P6e(e){e.t=e.v||"",e.t=e.t.replace(/\r\n/g,`
`).replace(/\r/g,`
`),e.v=e.w=e.ixfe=void 0}function h4(e,t){var r=t||{};Kx();var n=Yg(fA(e));(r.type=="binary"||r.type=="array"||r.type=="base64")&&(n=ua(n));var s=n.slice(0,1024).toLowerCase(),i=!1;if(s=s.replace(/".*?"/g,""),(s.indexOf(">")&1023)>Math.min(s.indexOf(",")&1023,s.indexOf(";")&1023)){var o=La(r);return o.type="string",Ax.to_workbook(n,o)}if(s.indexOf("<?xml")==-1&&["html","table","head","meta","script","style","div"].forEach(function(de){s.indexOf("<"+de)>=0&&(i=!0)}),i)return gAe(n,r);Nv={"General Number":"General","General Date":Br[22],"Long Date":"dddd, mmmm dd, yyyy","Medium Date":Br[15],"Short Date":Br[14],"Long Time":Br[19],"Medium Time":Br[18],"Short Time":Br[20],Currency:'"$"#,##0.00_);[Red]\\("$"#,##0.00\\)',Fixed:Br[2],Standard:Br[4],Percent:Br[10],Scientific:Br[11],"Yes/No":'"Yes";"Yes";"No";@',"True/False":'"True";"True";"False";@',"On/Off":'"Yes";"Yes";"No";@'};var l,c=[],d,f={},u=[],p=r.dense?[]:{},h="",m={},g={},x=Bc('<Data ss:Type="String">'),v=0,b=0,w=0,y={s:{r:2e6,c:2e6},e:{r:0,c:0}},N={},S={},j="",_=0,T=[],D={},A={},C=0,M=[],F=[],B={},Y=[],V,J=!1,U=[],X=[],W={},E=0,R=0,q={Sheets:[],WBProps:{date1904:!1}},L={};P1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"");for(var H="";l=P1.exec(n);)switch(l[3]=(H=l[3]).toLowerCase()){case"data":if(H=="data"){if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break}if(c[c.length-1][1])break;l[1]==="/"?O6e(n.slice(v,l.index),j,x,c[c.length-1][0]=="comment"?B:m,{c:b,r:w},N,Y[b],g,U,r):(j="",x=Bc(l[0]),v=l.index+l[0].length);break;case"cell":if(l[1]==="/")if(F.length>0&&(m.c=F),(!r.sheetRows||r.sheetRows>w)&&m.v!==void 0&&(r.dense?(p[w]||(p[w]=[]),p[w][b]=m):p[Ja(b)+As(w)]=m),m.HRef&&(m.l={Target:Mn(m.HRef)},m.HRefScreenTip&&(m.l.Tooltip=m.HRefScreenTip),delete m.HRef,delete m.HRefScreenTip),(m.MergeAcross||m.MergeDown)&&(E=b+(parseInt(m.MergeAcross,10)|0),R=w+(parseInt(m.MergeDown,10)|0),T.push({s:{c:b,r:w},e:{c:E,r:R}})),!r.sheetStubs)m.MergeAcross?b=E+1:++b;else if(m.MergeAcross||m.MergeDown){for(var se=b;se<=E;++se)for(var ce=w;ce<=R;++ce)(se>b||ce>w)&&(r.dense?(p[ce]||(p[ce]=[]),p[ce][se]={t:"z"}):p[Ja(se)+As(ce)]={t:"z"});b=E+1}else++b;else m=_6e(l[0]),m.Index&&(b=+m.Index-1),b<y.s.c&&(y.s.c=b),b>y.e.c&&(y.e.c=b),l[0].slice(-2)==="/>"&&++b,F=[];break;case"row":l[1]==="/"||l[0].slice(-2)==="/>"?(w<y.s.r&&(y.s.r=w),w>y.e.r&&(y.e.r=w),l[0].slice(-2)==="/>"&&(g=Bc(l[0]),g.Index&&(w=+g.Index-1)),b=0,++w):(g=Bc(l[0]),g.Index&&(w=+g.Index-1),W={},(g.AutoFitHeight=="0"||g.Height)&&(W.hpx=parseInt(g.Height,10),W.hpt=M1(W.hpx),X[w]=W),g.Hidden=="1"&&(W.hidden=!0,X[w]=W));break;case"worksheet":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));u.push(h),y.s.r<=y.e.r&&y.s.c<=y.e.c&&(p["!ref"]=an(y),r.sheetRows&&r.sheetRows<=y.e.r&&(p["!fullref"]=p["!ref"],y.e.r=r.sheetRows-1,p["!ref"]=an(y))),T.length&&(p["!merges"]=T),Y.length>0&&(p["!cols"]=Y),X.length>0&&(p["!rows"]=X),f[h]=p}else y={s:{r:2e6,c:2e6},e:{r:0,c:0}},w=b=0,c.push([l[3],!1]),d=Bc(l[0]),h=Mn(d.Name),p=r.dense?[]:{},T=[],U=[],X=[],L={name:h,Hidden:0},q.Sheets.push(L);break;case"table":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else{if(l[0].slice(-2)=="/>")break;c.push([l[3],!1]),Y=[],J=!1}break;case"style":l[1]==="/"?T6e(N,S,r):S=Bc(l[0]);break;case"numberformat":S.nf=Mn(Bc(l[0]).Format||"General"),Nv[S.nf]&&(S.nf=Nv[S.nf]);for(var ae=0;ae!=392&&Br[ae]!=S.nf;++ae);if(ae==392){for(ae=57;ae!=392;++ae)if(Br[ae]==null){Du(S.nf,ae);break}}break;case"column":if(c[c.length-1][0]!=="table")break;if(V=Bc(l[0]),V.Hidden&&(V.hidden=!0,delete V.Hidden),V.Width&&(V.wpx=parseInt(V.Width,10)),!J&&V.wpx>10){J=!0,io=D$;for(var Z=0;Z<Y.length;++Z)Y[Z]&&p0(Y[Z])}J&&p0(V),Y[V.Index-1||Y.length]=V;for(var ve=0;ve<+V.Span;++ve)Y[Y.length]=La(V);break;case"namedrange":if(l[1]==="/")break;q.Names||(q.Names=[]);var ne=Vr(l[0]),He={Name:ne.Name,Ref:Om(ne.RefersTo.slice(1),{r:0,c:0})};q.Sheets.length>0&&(He.Sheet=q.Sheets.length-1),q.Names.push(He);break;case"namedcell":break;case"b":break;case"i":break;case"u":break;case"s":break;case"em":break;case"h2":break;case"h3":break;case"sub":break;case"sup":break;case"span":break;case"alignment":break;case"borders":break;case"border":break;case"font":if(l[0].slice(-2)==="/>")break;l[1]==="/"?j+=n.slice(_,l.index):_=l.index+l[0].length;break;case"interior":if(!r.cellStyles)break;S.Interior=Bc(l[0]);break;case"protection":break;case"author":case"title":case"description":case"created":case"keywords":case"subject":case"category":case"company":case"lastauthor":case"lastsaved":case"lastprinted":case"version":case"revision":case"totaltime":case"hyperlinkbase":case"manager":case"contentstatus":case"identifier":case"language":case"appname":if(l[0].slice(-2)==="/>")break;l[1]==="/"?r5e(D,H,n.slice(C,l.index)):C=l.index+l[0].length;break;case"paragraphs":break;case"styles":case"workbook":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else c.push([l[3],!1]);break;case"comment":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"));P6e(B),F.push(B)}else c.push([l[3],!1]),d=Bc(l[0]),B={a:d.Author};break;case"autofilter":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else if(l[0].charAt(l[0].length-2)!=="/"){var Xe=Bc(l[0]);p["!autofilter"]={ref:Om(Xe.Range).replace(/\$/g,"")},c.push([l[3],!0])}break;case"name":break;case"datavalidation":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"pixelsperinch":break;case"componentoptions":case"documentproperties":case"customdocumentproperties":case"officedocumentsettings":case"pivottable":case"pivotcache":case"names":case"mapinfo":case"pagebreaks":case"querytable":case"sorting":case"schema":case"conditionalformatting":case"smarttagtype":case"smarttags":case"excelworkbook":case"workbookoptions":case"worksheetoptions":if(l[1]==="/"){if((d=c.pop())[0]!==l[3])throw new Error("Bad state: "+d.join("|"))}else l[0].charAt(l[0].length-2)!=="/"&&c.push([l[3],!0]);break;case"null":break;default:if(c.length==0&&l[3]=="document"||c.length==0&&l[3]=="uof")return U8(n,r);var ie=!0;switch(c[c.length-1][0]){case"officedocumentsettings":switch(l[3]){case"allowpng":break;case"removepersonalinformation":break;case"downloadcomponents":break;case"locationofcomponents":break;case"colors":break;case"color":break;case"index":break;case"rgb":break;case"targetscreensize":break;case"readonlyrecommended":break;default:ie=!1}break;case"componentoptions":switch(l[3]){case"toolbar":break;case"hideofficelogo":break;case"spreadsheetautofit":break;case"label":break;case"caption":break;case"maxheight":break;case"maxwidth":break;case"nextsheetnumber":break;default:ie=!1}break;case"excelworkbook":switch(l[3]){case"date1904":q.WBProps.date1904=!0;break;case"windowheight":break;case"windowwidth":break;case"windowtopx":break;case"windowtopy":break;case"tabratio":break;case"protectstructure":break;case"protectwindow":break;case"protectwindows":break;case"activesheet":break;case"displayinknotes":break;case"firstvisiblesheet":break;case"supbook":break;case"sheetname":break;case"sheetindex":break;case"sheetindexfirst":break;case"sheetindexlast":break;case"dll":break;case"acceptlabelsinformulas":break;case"donotsavelinkvalues":break;case"iteration":break;case"maxiterations":break;case"maxchange":break;case"path":break;case"xct":break;case"count":break;case"selectedsheets":break;case"calculation":break;case"uncalced":break;case"startupprompt":break;case"crn":break;case"externname":break;case"formula":break;case"colfirst":break;case"collast":break;case"wantadvise":break;case"boolean":break;case"error":break;case"text":break;case"ole":break;case"noautorecover":break;case"publishobjects":break;case"donotcalculatebeforesave":break;case"number":break;case"refmoder1c1":break;case"embedsavesmarttags":break;default:ie=!1}break;case"workbookoptions":switch(l[3]){case"owcversion":break;case"height":break;case"width":break;default:ie=!1}break;case"worksheetoptions":switch(l[3]){case"visible":if(l[0].slice(-2)!=="/>")if(l[1]==="/")switch(n.slice(C,l.index)){case"SheetHidden":L.Hidden=1;break;case"SheetVeryHidden":L.Hidden=2;break}else C=l.index+l[0].length;break;case"header":p["!margins"]||Mh(p["!margins"]={},"xlml"),isNaN(+Vr(l[0]).Margin)||(p["!margins"].header=+Vr(l[0]).Margin);break;case"footer":p["!margins"]||Mh(p["!margins"]={},"xlml"),isNaN(+Vr(l[0]).Margin)||(p["!margins"].footer=+Vr(l[0]).Margin);break;case"pagemargins":var Q=Vr(l[0]);p["!margins"]||Mh(p["!margins"]={},"xlml"),isNaN(+Q.Top)||(p["!margins"].top=+Q.Top),isNaN(+Q.Left)||(p["!margins"].left=+Q.Left),isNaN(+Q.Right)||(p["!margins"].right=+Q.Right),isNaN(+Q.Bottom)||(p["!margins"].bottom=+Q.Bottom);break;case"displayrighttoleft":q.Views||(q.Views=[]),q.Views[0]||(q.Views[0]={}),q.Views[0].RTL=!0;break;case"freezepanes":break;case"frozennosplit":break;case"splithorizontal":case"splitvertical":break;case"donotdisplaygridlines":break;case"activerow":break;case"activecol":break;case"toprowbottompane":break;case"leftcolumnrightpane":break;case"unsynced":break;case"print":break;case"printerrors":break;case"panes":break;case"scale":break;case"pane":break;case"number":break;case"layout":break;case"pagesetup":break;case"selected":break;case"protectobjects":break;case"enableselection":break;case"protectscenarios":break;case"validprinterinfo":break;case"horizontalresolution":break;case"verticalresolution":break;case"numberofcopies":break;case"activepane":break;case"toprowvisible":break;case"leftcolumnvisible":break;case"fittopage":break;case"rangeselection":break;case"papersizeindex":break;case"pagelayoutzoom":break;case"pagebreakzoom":break;case"filteron":break;case"fitwidth":break;case"fitheight":break;case"commentslayout":break;case"zoom":break;case"lefttoright":break;case"gridlines":break;case"allowsort":break;case"allowfilter":break;case"allowinsertrows":break;case"allowdeleterows":break;case"allowinsertcols":break;case"allowdeletecols":break;case"allowinserthyperlinks":break;case"allowformatcells":break;case"allowsizecols":break;case"allowsizerows":break;case"nosummaryrowsbelowdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].above=!0;break;case"tabcolorindex":break;case"donotdisplayheadings":break;case"showpagelayoutzoom":break;case"nosummarycolumnsrightdetail":p["!outline"]||(p["!outline"]={}),p["!outline"].left=!0;break;case"blackandwhite":break;case"donotdisplayzeros":break;case"displaypagebreak":break;case"rowcolheadings":break;case"donotdisplayoutline":break;case"noorientation":break;case"allowusepivottables":break;case"zeroheight":break;case"viewablerange":break;case"selection":break;case"protectcontents":break;default:ie=!1}break;case"pivottable":case"pivotcache":switch(l[3]){case"immediateitemsondrop":break;case"showpagemultipleitemlabel":break;case"compactrowindent":break;case"location":break;case"pivotfield":break;case"orientation":break;case"layoutform":break;case"layoutsubtotallocation":break;case"layoutcompactrow":break;case"position":break;case"pivotitem":break;case"datatype":break;case"datafield":break;case"sourcename":break;case"parentfield":break;case"ptlineitems":break;case"ptlineitem":break;case"countofsameitems":break;case"item":break;case"itemtype":break;case"ptsource":break;case"cacheindex":break;case"consolidationreference":break;case"filename":break;case"reference":break;case"nocolumngrand":break;case"norowgrand":break;case"blanklineafteritems":break;case"hidden":break;case"subtotal":break;case"basefield":break;case"mapchilditems":break;case"function":break;case"refreshonfileopen":break;case"printsettitles":break;case"mergelabels":break;case"defaultversion":break;case"refreshname":break;case"refreshdate":break;case"refreshdatecopy":break;case"versionlastrefresh":break;case"versionlastupdate":break;case"versionupdateablemin":break;case"versionrefreshablemin":break;case"calculation":break;default:ie=!1}break;case"pagebreaks":switch(l[3]){case"colbreaks":break;case"colbreak":break;case"rowbreaks":break;case"rowbreak":break;case"colstart":break;case"colend":break;case"rowend":break;default:ie=!1}break;case"autofilter":switch(l[3]){case"autofiltercolumn":break;case"autofiltercondition":break;case"autofilterand":break;case"autofilteror":break;default:ie=!1}break;case"querytable":switch(l[3]){case"id":break;case"autoformatfont":break;case"autoformatpattern":break;case"querysource":break;case"querytype":break;case"enableredirections":break;case"refreshedinxl9":break;case"urlstring":break;case"htmltables":break;case"connection":break;case"commandtext":break;case"refreshinfo":break;case"notitles":break;case"nextid":break;case"columninfo":break;case"overwritecells":break;case"donotpromptforfile":break;case"textwizardsettings":break;case"source":break;case"number":break;case"decimal":break;case"thousandseparator":break;case"trailingminusnumbers":break;case"formatsettings":break;case"fieldtype":break;case"delimiters":break;case"tab":break;case"comma":break;case"autoformatname":break;case"versionlastedit":break;case"versionlastrefresh":break;default:ie=!1}break;case"datavalidation":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;case"cellrangelist":break;default:ie=!1}break;case"sorting":case"conditionalformatting":switch(l[3]){case"range":break;case"type":break;case"min":break;case"max":break;case"sort":break;case"descending":break;case"order":break;case"casesensitive":break;case"value":break;case"errorstyle":break;case"errormessage":break;case"errortitle":break;case"cellrangelist":break;case"inputmessage":break;case"inputtitle":break;case"combohide":break;case"inputhide":break;case"condition":break;case"qualifier":break;case"useblank":break;case"value1":break;case"value2":break;case"format":break;default:ie=!1}break;case"mapinfo":case"schema":case"data":switch(l[3]){case"map":break;case"entry":break;case"range":break;case"xpath":break;case"field":break;case"xsdtype":break;case"filteron":break;case"aggregate":break;case"elementtype":break;case"attributetype":break;case"schema":case"element":case"complextype":case"datatype":case"all":case"attribute":case"extends":break;case"row":break;default:ie=!1}break;case"smarttags":break;default:ie=!1;break}if(ie||l[3].match(/!\[CDATA/))break;if(!c[c.length-1][1])throw"Unrecognized tag: "+l[3]+"|"+c.join("|");if(c[c.length-1][0]==="customdocumentproperties"){if(l[0].slice(-2)==="/>")break;l[1]==="/"?C6e(A,H,M,n.slice(C,l.index)):(M=l,C=l.index+l[0].length);break}if(r.WTF)throw"Unrecognized tag: "+l[3]+"|"+c.join("|")}var Ne={};return!r.bookSheets&&!r.bookProps&&(Ne.Sheets=f),Ne.SheetNames=u,Ne.Workbook=q,Ne.SSF=La(Br),Ne.Props=D,Ne.Custprops=A,Ne}function _S(e,t){switch(FA(t=t||{}),t.type||"base64"){case"base64":return h4(Rl(e),t);case"binary":case"buffer":case"file":return h4(e,t);case"array":return h4(E0(e),t)}}function I6e(e,t){var r=[];return e.Props&&r.push(n5e(e.Props,t)),e.Custprops&&r.push(a5e(e.Props,e.Custprops)),r.join("")}function D6e(){return""}function L6e(e,t){var r=['<Style ss:ID="Default" ss:Name="Normal"><NumberFormat/></Style>'];return t.cellXfs.forEach(function(n,s){var i=[];i.push(Zt("NumberFormat",null,{"ss:Format":na(Br[n.numFmtId])}));var o={"ss:ID":"s"+(21+s)};r.push(Zt("Style",i.join(""),o))}),Zt("Styles",r.join(""))}function oU(e){return Zt("NamedRange",null,{"ss:Name":e.Name,"ss:RefersTo":"="+TA(e.Ref,{r:0,c:0})})}function F6e(e){if(!((e||{}).Workbook||{}).Names)return"";for(var t=e.Workbook.Names,r=[],n=0;n<t.length;++n){var s=t[n];s.Sheet==null&&(s.Name.match(/^_xlfn\./)||r.push(oU(s)))}return Zt("Names",r.join(""))}function M6e(e,t,r,n){if(!e||!((n||{}).Workbook||{}).Names)return"";for(var s=n.Workbook.Names,i=[],o=0;o<s.length;++o){var l=s[o];l.Sheet==r&&(l.Name.match(/^_xlfn\./)||i.push(oU(l)))}return i.join("")}function R6e(e,t,r,n){if(!e)return"";var s=[];if(e["!margins"]&&(s.push("<PageSetup>"),e["!margins"].header&&s.push(Zt("Header",null,{"x:Margin":e["!margins"].header})),e["!margins"].footer&&s.push(Zt("Footer",null,{"x:Margin":e["!margins"].footer})),s.push(Zt("PageMargins",null,{"x:Bottom":e["!margins"].bottom||"0.75","x:Left":e["!margins"].left||"0.7","x:Right":e["!margins"].right||"0.7","x:Top":e["!margins"].top||"0.75"})),s.push("</PageSetup>")),n&&n.Workbook&&n.Workbook.Sheets&&n.Workbook.Sheets[r])if(n.Workbook.Sheets[r].Hidden)s.push(Zt("Visible",n.Workbook.Sheets[r].Hidden==1?"SheetHidden":"SheetVeryHidden",{}));else{for(var i=0;i<r&&!(n.Workbook.Sheets[i]&&!n.Workbook.Sheets[i].Hidden);++i);i==r&&s.push("<Selected/>")}return((((n||{}).Workbook||{}).Views||[])[0]||{}).RTL&&s.push("<DisplayRightToLeft/>"),e["!protect"]&&(s.push(Ii("ProtectContents","True")),e["!protect"].objects&&s.push(Ii("ProtectObjects","True")),e["!protect"].scenarios&&s.push(Ii("ProtectScenarios","True")),e["!protect"].selectLockedCells!=null&&!e["!protect"].selectLockedCells?s.push(Ii("EnableSelection","NoSelection")):e["!protect"].selectUnlockedCells!=null&&!e["!protect"].selectUnlockedCells&&s.push(Ii("EnableSelection","UnlockedCells")),[["formatCells","AllowFormatCells"],["formatColumns","AllowSizeCols"],["formatRows","AllowSizeRows"],["insertColumns","AllowInsertCols"],["insertRows","AllowInsertRows"],["insertHyperlinks","AllowInsertHyperlinks"],["deleteColumns","AllowDeleteCols"],["deleteRows","AllowDeleteRows"],["sort","AllowSort"],["autoFilter","AllowFilter"],["pivotTables","AllowUsePivotTables"]].forEach(function(o){e["!protect"][o[0]]&&s.push("<"+o[1]+"/>")})),s.length==0?"":Zt("WorksheetOptions",s.join(""),{xmlns:Al.x})}function B6e(e){return e.map(function(t){var r=iwe(t.t||""),n=Zt("ss:Data",r,{xmlns:"http://www.w3.org/TR/REC-html40"});return Zt("Comment",n,{"ss:Author":t.a})}).join("")}function $6e(e,t,r,n,s,i,o){if(!e||e.v==null&&e.f==null)return"";var l={};if(e.f&&(l["ss:Formula"]="="+na(TA(e.f,o))),e.F&&e.F.slice(0,t.length)==t){var c=Za(e.F.slice(t.length+1));l["ss:ArrayRange"]="RC:R"+(c.r==o.r?"":"["+(c.r-o.r)+"]")+"C"+(c.c==o.c?"":"["+(c.c-o.c)+"]")}if(e.l&&e.l.Target&&(l["ss:HRef"]=na(e.l.Target),e.l.Tooltip&&(l["x:HRefScreenTip"]=na(e.l.Tooltip))),r["!merges"])for(var d=r["!merges"],f=0;f!=d.length;++f)d[f].s.c!=o.c||d[f].s.r!=o.r||(d[f].e.c>d[f].s.c&&(l["ss:MergeAcross"]=d[f].e.c-d[f].s.c),d[f].e.r>d[f].s.r&&(l["ss:MergeDown"]=d[f].e.r-d[f].s.r));var u="",p="";switch(e.t){case"z":if(!n.sheetStubs)return"";break;case"n":u="Number",p=String(e.v);break;case"b":u="Boolean",p=e.v?"1":"0";break;case"e":u="Error",p=Zu[e.v];break;case"d":u="DateTime",p=new Date(e.v).toISOString(),e.z==null&&(e.z=e.z||Br[14]);break;case"s":u="String",p=swe(e.v||"");break}var h=O0(n.cellXfs,e,n);l["ss:StyleID"]="s"+(21+h),l["ss:Index"]=o.c+1;var m=e.v!=null?p:"",g=e.t=="z"?"":'<Data ss:Type="'+u+'">'+m+"</Data>";return(e.c||[]).length>0&&(g+=B6e(e.c)),Zt("Cell",g,l)}function U6e(e,t){var r='<Row ss:Index="'+(e+1)+'"';return t&&(t.hpt&&!t.hpx&&(t.hpx=Cx(t.hpt)),t.hpx&&(r+=' ss:AutoFitHeight="0" ss:Height="'+t.hpx+'"'),t.hidden&&(r+=' ss:Hidden="1"')),r+">"}function z6e(e,t,r,n){if(!e["!ref"])return"";var s=Bn(e["!ref"]),i=e["!merges"]||[],o=0,l=[];e["!cols"]&&e["!cols"].forEach(function(x,v){p0(x);var b=!!x.width,w=DN(v,x),y={"ss:Index":v+1};b&&(y["ss:Width"]=L1(w.width)),x.hidden&&(y["ss:Hidden"]="1"),l.push(Zt("Column",null,y))});for(var c=Array.isArray(e),d=s.s.r;d<=s.e.r;++d){for(var f=[U6e(d,(e["!rows"]||[])[d])],u=s.s.c;u<=s.e.c;++u){var p=!1;for(o=0;o!=i.length;++o)if(!(i[o].s.c>u)&&!(i[o].s.r>d)&&!(i[o].e.c<u)&&!(i[o].e.r<d)){(i[o].s.c!=u||i[o].s.r!=d)&&(p=!0);break}if(!p){var h={r:d,c:u},m=Wr(h),g=c?(e[d]||[])[u]:e[m];f.push($6e(g,m,e,t,r,n,h))}}f.push("</Row>"),f.length>2&&l.push(f.join(""))}return l.join("")}function q6e(e,t,r){var n=[],s=r.SheetNames[e],i=r.Sheets[s],o=i?M6e(i,t,e,r):"";return o.length>0&&n.push("<Names>"+o+"</Names>"),o=i?z6e(i,t,e,r):"",o.length>0&&n.push("<Table>"+o+"</Table>"),n.push(R6e(i,t,e,r)),n.join("")}function H6e(e,t){t||(t={}),e.SSF||(e.SSF=La(Br)),e.SSF&&(Kx(),AN(e.SSF),t.revssf=EN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF,t.cellXfs=[],O0(t.cellXfs,{},{revssf:{General:0}}));var r=[];r.push(I6e(e,t)),r.push(D6e()),r.push(""),r.push("");for(var n=0;n<e.SheetNames.length;++n)r.push(Zt("Worksheet",q6e(n,t,e),{"ss:Name":na(e.SheetNames[n])}));return r[2]=L6e(e,t),r[3]=F6e(e),Es+Zt("Workbook",r.join(""),{xmlns:Al.ss,"xmlns:o":Al.o,"xmlns:x":Al.x,"xmlns:ss":Al.ss,"xmlns:dt":Al.dt,"xmlns:html":Al.html})}function W6e(e){var t={},r=e.content;if(r.l=28,t.AnsiUserType=r.read_shift(0,"lpstr-ansi"),t.AnsiClipboardFormat=Fwe(r),r.length-r.l<=4)return t;var n=r.read_shift(4);if(n==0||n>40||(r.l-=4,t.Reserved1=r.read_shift(0,"lpstr-ansi"),r.length-r.l<=4)||(n=r.read_shift(4),n!==1907505652)||(t.UnicodeClipboardFormat=Mwe(r),n=r.read_shift(4),n==0||n>40))return t;r.l-=4,t.Reserved2=r.read_shift(0,"lpwstr")}var V6e=[60,1084,2066,2165,2175];function G6e(e,t,r,n,s){var i=n,o=[],l=r.slice(r.l,r.l+i);if(s&&s.enc&&s.enc.insitu&&l.length>0)switch(e){case 9:case 521:case 1033:case 2057:case 47:case 405:case 225:case 406:case 312:case 404:case 10:break;case 133:break;default:s.enc.insitu(l)}o.push(l),r.l+=i;for(var c=Su(r,r.l),d=AS[c],f=0;d!=null&&V6e.indexOf(c)>-1;)i=Su(r,r.l+2),f=r.l+4,c==2066?f+=4:(c==2165||c==2175)&&(f+=12),l=r.slice(f,r.l+4+i),o.push(l),r.l+=4+i,d=AS[c=Su(r,r.l)];var u=yi(o);Pi(u,0);var p=0;u.lens=[];for(var h=0;h<o.length;++h)u.lens.push(p),p+=o[h].length;if(u.length<n)throw"XLS Record 0x"+e.toString(16)+" Truncated: "+u.length+" < "+n;return t.f(u,u.length,s)}function _d(e,t,r){if(e.t!=="z"&&e.XF){var n=0;try{n=e.z||e.XF.numFmtId||0,t.cellNF&&(e.z=Br[n])}catch(i){if(t.WTF)throw i}if(!t||t.cellText!==!1)try{e.t==="e"?e.w=e.w||Zu[e.v]:n===0||n=="General"?e.t==="n"?(e.v|0)===e.v?e.w=e.v.toString(10):e.w=E1(e.v):e.w=Zh(e.v):e.w=yc(n,e.v,{date1904:!!r,dateNF:t&&t.dateNF})}catch(i){if(t.WTF)throw i}if(t.cellDates&&n&&e.t=="n"&&Gx(Br[n]||String(n))){var s=vh(e.v);s&&(e.t="d",e.v=new Date(s.y,s.m-1,s.d,s.H,s.M,s.S,s.u))}}}function Ry(e,t,r){return{v:e,ixfe:t,t:r}}function K6e(e,t){var r={opts:{}},n={},s=t.dense?[]:{},i={},o={},l=null,c=[],d="",f={},u,p="",h,m,g,x,v={},b=[],w,y,N=[],S=[],j={Sheets:[],WBProps:{date1904:!1},Views:[{}]},_={},T=function(Ke){return Ke<8?Dh[Ke]:Ke<64&&S[Ke-8]||Dh[Ke]},D=function(Ke,Qe,_t){var vt=Qe.XF.data;if(!(!vt||!vt.patternType||!_t||!_t.cellStyles)){Qe.s={},Qe.s.patternType=vt.patternType;var ke;(ke=D1(T(vt.icvFore)))&&(Qe.s.fgColor={rgb:ke}),(ke=D1(T(vt.icvBack)))&&(Qe.s.bgColor={rgb:ke})}},A=function(Ke,Qe,_t){if(!(W>1)&&!(_t.sheetRows&&Ke.r>=_t.sheetRows)){if(_t.cellStyles&&Qe.XF&&Qe.XF.data&&D(Ke,Qe,_t),delete Qe.ixfe,delete Qe.XF,u=Ke,p=Wr(Ke),(!o||!o.s||!o.e)&&(o={s:{r:0,c:0},e:{r:0,c:0}}),Ke.r<o.s.r&&(o.s.r=Ke.r),Ke.c<o.s.c&&(o.s.c=Ke.c),Ke.r+1>o.e.r&&(o.e.r=Ke.r+1),Ke.c+1>o.e.c&&(o.e.c=Ke.c+1),_t.cellFormula&&Qe.f){for(var vt=0;vt<b.length;++vt)if(!(b[vt][0].s.c>Ke.c||b[vt][0].s.r>Ke.r)&&!(b[vt][0].e.c<Ke.c||b[vt][0].e.r<Ke.r)){Qe.F=an(b[vt][0]),(b[vt][0].s.c!=Ke.c||b[vt][0].s.r!=Ke.r)&&delete Qe.f,Qe.f&&(Qe.f=""+ro(b[vt][1],o,Ke,U,C));break}}_t.dense?(s[Ke.r]||(s[Ke.r]=[]),s[Ke.r][Ke.c]=Qe):s[p]=Qe}},C={enc:!1,sbcch:0,snames:[],sharedf:v,arrayf:b,rrtabid:[],lastuser:"",biff:8,codepage:0,winlocked:0,cellStyles:!!t&&!!t.cellStyles,WTF:!!t&&!!t.wtf};t.password&&(C.password=t.password);var M,F=[],B=[],Y=[],V=[],J=!1,U=[];U.SheetNames=C.snames,U.sharedf=C.sharedf,U.arrayf=C.arrayf,U.names=[],U.XTI=[];var X=0,W=0,E=0,R=[],q=[],L;C.codepage=1200,Jc(1200);for(var H=!1;e.l<e.length-1;){var se=e.l,ce=e.read_shift(2);if(ce===0&&X===10)break;var ae=e.l===e.length?0:e.read_shift(2),Z=AS[ce];if(Z&&Z.f){if(t.bookSheets&&X===133&&ce!==133)break;if(X=ce,Z.r===2||Z.r==12){var ve=e.read_shift(2);if(ae-=2,!C.enc&&ve!==ce&&((ve&255)<<8|ve>>8)!==ce)throw new Error("rt mismatch: "+ve+"!="+ce);Z.r==12&&(e.l+=10,ae-=10)}var ne={};if(ce===10?ne=Z.f(e,ae,C):ne=G6e(ce,Z,e,ae,C),W==0&&[9,521,1033,2057].indexOf(X)===-1)continue;switch(ce){case 34:r.opts.Date1904=j.WBProps.date1904=ne;break;case 134:r.opts.WriteProtect=!0;break;case 47:if(C.enc||(e.l=0),C.enc=ne,!t.password)throw new Error("File is password-protected");if(ne.valid==null)throw new Error("Encryption scheme unsupported");if(!ne.valid)throw new Error("Password is incorrect");break;case 92:C.lastuser=ne;break;case 66:var He=Number(ne);switch(He){case 21010:He=1200;break;case 32768:He=1e4;break;case 32769:He=1252;break}Jc(C.codepage=He),H=!0;break;case 317:C.rrtabid=ne;break;case 25:C.winlocked=ne;break;case 439:r.opts.RefreshAll=ne;break;case 12:r.opts.CalcCount=ne;break;case 16:r.opts.CalcDelta=ne;break;case 17:r.opts.CalcIter=ne;break;case 13:r.opts.CalcMode=ne;break;case 14:r.opts.CalcPrecision=ne;break;case 95:r.opts.CalcSaveRecalc=ne;break;case 15:C.CalcRefMode=ne;break;case 2211:r.opts.FullCalc=ne;break;case 129:ne.fDialog&&(s["!type"]="dialog"),ne.fBelow||((s["!outline"]||(s["!outline"]={})).above=!0),ne.fRight||((s["!outline"]||(s["!outline"]={})).left=!0);break;case 224:N.push(ne);break;case 430:U.push([ne]),U[U.length-1].XTI=[];break;case 35:case 547:U[U.length-1].push(ne);break;case 24:case 536:L={Name:ne.Name,Ref:ro(ne.rgce,o,null,U,C)},ne.itab>0&&(L.Sheet=ne.itab-1),U.names.push(L),U[0]||(U[0]=[],U[0].XTI=[]),U[U.length-1].push(ne),ne.Name=="_xlnm._FilterDatabase"&&ne.itab>0&&ne.rgce&&ne.rgce[0]&&ne.rgce[0][0]&&ne.rgce[0][0][0]=="PtgArea3d"&&(q[ne.itab-1]={ref:an(ne.rgce[0][0][1][2])});break;case 22:C.ExternCount=ne;break;case 23:U.length==0&&(U[0]=[],U[0].XTI=[]),U[U.length-1].XTI=U[U.length-1].XTI.concat(ne),U.XTI=U.XTI.concat(ne);break;case 2196:if(C.biff<8)break;L!=null&&(L.Comment=ne[1]);break;case 18:s["!protect"]=ne;break;case 19:ne!==0&&C.WTF&&console.error("Password verifier: "+ne);break;case 133:i[ne.pos]=ne,C.snames.push(ne.name);break;case 10:{if(--W)break;if(o.e){if(o.e.r>0&&o.e.c>0){if(o.e.r--,o.e.c--,s["!ref"]=an(o),t.sheetRows&&t.sheetRows<=o.e.r){var Xe=o.e.r;o.e.r=t.sheetRows-1,s["!fullref"]=s["!ref"],s["!ref"]=an(o),o.e.r=Xe}o.e.r++,o.e.c++}F.length>0&&(s["!merges"]=F),B.length>0&&(s["!objects"]=B),Y.length>0&&(s["!cols"]=Y),V.length>0&&(s["!rows"]=V),j.Sheets.push(_)}d===""?f=s:n[d]=s,s=t.dense?[]:{}}break;case 9:case 521:case 1033:case 2057:{if(C.biff===8&&(C.biff={9:2,521:3,1033:4}[ce]||{512:2,768:3,1024:4,1280:5,1536:8,2:2,7:2}[ne.BIFFVer]||8),C.biffguess=ne.BIFFVer==0,ne.BIFFVer==0&&ne.dt==4096&&(C.biff=5,H=!0,Jc(C.codepage=28591)),C.biff==8&&ne.BIFFVer==0&&ne.dt==16&&(C.biff=2),W++)break;if(s=t.dense?[]:{},C.biff<8&&!H&&(H=!0,Jc(C.codepage=t.codepage||1252)),C.biff<5||ne.BIFFVer==0&&ne.dt==4096){d===""&&(d="Sheet1"),o={s:{r:0,c:0},e:{r:0,c:0}};var ie={pos:e.l-ae,name:d};i[ie.pos]=ie,C.snames.push(d)}else d=(i[se]||{name:""}).name;ne.dt==32&&(s["!type"]="chart"),ne.dt==64&&(s["!type"]="macro"),F=[],B=[],C.arrayf=b=[],Y=[],V=[],J=!1,_={Hidden:(i[se]||{hs:0}).hs,name:d}}break;case 515:case 3:case 2:s["!type"]=="chart"&&(t.dense?(s[ne.r]||[])[ne.c]:s[Wr({c:ne.c,r:ne.r})])&&++ne.c,w={ixfe:ne.ixfe,XF:N[ne.ixfe]||{},v:ne.val,t:"n"},E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A({c:ne.c,r:ne.r},w,t);break;case 5:case 517:w={ixfe:ne.ixfe,XF:N[ne.ixfe],v:ne.val,t:ne.t},E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A({c:ne.c,r:ne.r},w,t);break;case 638:w={ixfe:ne.ixfe,XF:N[ne.ixfe],v:ne.rknum,t:"n"},E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A({c:ne.c,r:ne.r},w,t);break;case 189:for(var Q=ne.c;Q<=ne.C;++Q){var Ne=ne.rkrec[Q-ne.c][0];w={ixfe:Ne,XF:N[Ne],v:ne.rkrec[Q-ne.c][1],t:"n"},E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A({c:Q,r:ne.r},w,t)}break;case 6:case 518:case 1030:{if(ne.val=="String"){l=ne;break}if(w=Ry(ne.val,ne.cell.ixfe,ne.tt),w.XF=N[w.ixfe],t.cellFormula){var de=ne.formula;if(de&&de[0]&&de[0][0]&&de[0][0][0]=="PtgExp"){var ye=de[0][0][1][0],xe=de[0][0][1][1],we=Wr({r:ye,c:xe});v[we]?w.f=""+ro(ne.formula,o,ne.cell,U,C):w.F=((t.dense?(s[ye]||[])[xe]:s[we])||{}).F}else w.f=""+ro(ne.formula,o,ne.cell,U,C)}E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A(ne.cell,w,t),l=ne}break;case 7:case 519:if(l)l.val=ne,w=Ry(ne,l.cell.ixfe,"s"),w.XF=N[w.ixfe],t.cellFormula&&(w.f=""+ro(l.formula,o,l.cell,U,C)),E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A(l.cell,w,t),l=null;else throw new Error("String record expects Formula");break;case 33:case 545:{b.push(ne);var Ae=Wr(ne[0].s);if(h=t.dense?(s[ne[0].s.r]||[])[ne[0].s.c]:s[Ae],t.cellFormula&&h){if(!l||!Ae||!h)break;h.f=""+ro(ne[1],o,ne[0],U,C),h.F=an(ne[0])}}break;case 1212:{if(!t.cellFormula)break;if(p){if(!l)break;v[Wr(l.cell)]=ne[0],h=t.dense?(s[l.cell.r]||[])[l.cell.c]:s[Wr(l.cell)],(h||{}).f=""+ro(ne[0],o,u,U,C)}}break;case 253:w=Ry(c[ne.isst].t,ne.ixfe,"s"),c[ne.isst].h&&(w.h=c[ne.isst].h),w.XF=N[w.ixfe],E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A({c:ne.c,r:ne.r},w,t);break;case 513:t.sheetStubs&&(w={ixfe:ne.ixfe,XF:N[ne.ixfe],t:"z"},E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A({c:ne.c,r:ne.r},w,t));break;case 190:if(t.sheetStubs)for(var Ue=ne.c;Ue<=ne.C;++Ue){var me=ne.ixfe[Ue-ne.c];w={ixfe:me,XF:N[me],t:"z"},E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A({c:Ue,r:ne.r},w,t)}break;case 214:case 516:case 4:w=Ry(ne.val,ne.ixfe,"s"),w.XF=N[w.ixfe],E>0&&(w.z=R[w.ixfe>>8&63]),_d(w,t,r.opts.Date1904),A({c:ne.c,r:ne.r},w,t);break;case 0:case 512:W===1&&(o=ne);break;case 252:c=ne;break;case 1054:if(C.biff==4){R[E++]=ne[1];for(var ee=0;ee<E+163&&Br[ee]!=ne[1];++ee);ee>=163&&Du(ne[1],E+163)}else Du(ne[1],ne[0]);break;case 30:{R[E++]=ne;for(var fe=0;fe<E+163&&Br[fe]!=ne;++fe);fe>=163&&Du(ne,E+163)}break;case 229:F=F.concat(ne);break;case 93:B[ne.cmo[0]]=C.lastobj=ne;break;case 438:C.lastobj.TxO=ne;break;case 127:C.lastobj.ImData=ne;break;case 440:for(x=ne[0].s.r;x<=ne[0].e.r;++x)for(g=ne[0].s.c;g<=ne[0].e.c;++g)h=t.dense?(s[x]||[])[g]:s[Wr({c:g,r:x})],h&&(h.l=ne[1]);break;case 2048:for(x=ne[0].s.r;x<=ne[0].e.r;++x)for(g=ne[0].s.c;g<=ne[0].e.c;++g)h=t.dense?(s[x]||[])[g]:s[Wr({c:g,r:x})],h&&h.l&&(h.l.Tooltip=ne[1]);break;case 28:{if(C.biff<=5&&C.biff>=2)break;h=t.dense?(s[ne[0].r]||[])[ne[0].c]:s[Wr(ne[0])];var Fe=B[ne[2]];h||(t.dense?(s[ne[0].r]||(s[ne[0].r]=[]),h=s[ne[0].r][ne[0].c]={t:"z"}):h=s[Wr(ne[0])]={t:"z"},o.e.r=Math.max(o.e.r,ne[0].r),o.s.r=Math.min(o.s.r,ne[0].r),o.e.c=Math.max(o.e.c,ne[0].c),o.s.c=Math.min(o.s.c,ne[0].c)),h.c||(h.c=[]),m={a:ne[1],t:Fe.TxO.t},h.c.push(m)}break;case 2173:L4e(N[ne.ixfe],ne.ext);break;case 125:{if(!C.cellStyles)break;for(;ne.e>=ne.s;)Y[ne.e--]={width:ne.w/256,level:ne.level||0,hidden:!!(ne.flags&1)},J||(J=!0,AA(ne.w/256)),p0(Y[ne.e+1])}break;case 520:{var Ee={};ne.level!=null&&(V[ne.r]=Ee,Ee.level=ne.level),ne.hidden&&(V[ne.r]=Ee,Ee.hidden=!0),ne.hpt&&(V[ne.r]=Ee,Ee.hpt=ne.hpt,Ee.hpx=Cx(ne.hpt))}break;case 38:case 39:case 40:case 41:s["!margins"]||Mh(s["!margins"]={}),s["!margins"][{38:"left",39:"right",40:"top",41:"bottom"}[ce]]=ne;break;case 161:s["!margins"]||Mh(s["!margins"]={}),s["!margins"].header=ne.header,s["!margins"].footer=ne.footer;break;case 574:ne.RTL&&(j.Views[0].RTL=!0);break;case 146:S=ne;break;case 2198:M=ne;break;case 140:y=ne;break;case 442:d?_.CodeName=ne||_.name:j.WBProps.CodeName=ne||"ThisWorkbook";break}}else Z||console.error("Missing Info for XLS Record 0x"+ce.toString(16)),e.l+=ae}return r.SheetNames=xs(i).sort(function(qe,Ke){return Number(qe)-Number(Ke)}).map(function(qe){return i[qe].name}),t.bookSheets||(r.Sheets=n),!r.SheetNames.length&&f["!ref"]?(r.SheetNames.push("Sheet1"),r.Sheets&&(r.Sheets.Sheet1=f)):r.Preamble=f,r.Sheets&&q.forEach(function(qe,Ke){r.Sheets[r.SheetNames[Ke]]["!autofilter"]=qe}),r.Strings=c,r.SSF=La(Br),C.enc&&(r.Encryption=C.enc),M&&(r.Themes=M),r.Metadata={},y!==void 0&&(r.Metadata.Country=y),U.names.length>0&&(j.Names=U.names),r.Workbook=j,r}var jv={SI:"e0859ff2f94f6810ab9108002b27b3d9",DSI:"02d5cdd59c2e1b10939708002b2cf9ae",UDI:"05d5cdd59c2e1b10939708002b2cf9ae"};function X6e(e,t,r){var n=Or.find(e,"/!DocumentSummaryInformation");if(n&&n.size>0)try{var s=g8(n,yS,jv.DSI);for(var i in s)t[i]=s[i]}catch(d){if(r.WTF)throw d}var o=Or.find(e,"/!SummaryInformation");if(o&&o.size>0)try{var l=g8(o,wS,jv.SI);for(var c in l)t[c]==null&&(t[c]=l[c])}catch(d){if(r.WTF)throw d}t.HeadingPairs&&t.TitlesOfParts&&(i$(t.HeadingPairs,t.TitlesOfParts,t,r),delete t.HeadingPairs,delete t.TitlesOfParts)}function Y6e(e,t){var r=[],n=[],s=[],i=0,o,l=GI(yS,"n"),c=GI(wS,"n");if(e.Props)for(o=xs(e.Props),i=0;i<o.length;++i)(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Props[o[i]]]);if(e.Custprops)for(o=xs(e.Custprops),i=0;i<o.length;++i)Object.prototype.hasOwnProperty.call(e.Props||{},o[i])||(Object.prototype.hasOwnProperty.call(l,o[i])?r:Object.prototype.hasOwnProperty.call(c,o[i])?n:s).push([o[i],e.Custprops[o[i]]]);var d=[];for(i=0;i<s.length;++i)h$.indexOf(s[i][0])>-1||s$.indexOf(s[i][0])>-1||s[i][1]!=null&&d.push(s[i]);n.length&&Or.utils.cfb_add(t,"/SummaryInformation",v8(n,jv.SI,c,wS)),(r.length||d.length)&&Or.utils.cfb_add(t,"/DocumentSummaryInformation",v8(r,jv.DSI,l,yS,d.length?d:null,jv.UDI))}function lU(e,t){t||(t={}),FA(t),nA(),t.codepage&&rA(t.codepage);var r,n;if(e.FullPaths){if(Or.find(e,"/encryption"))throw new Error("File is password-protected");r=Or.find(e,"!CompObj"),n=Or.find(e,"/Workbook")||Or.find(e,"/Book")}else{switch(t.type){case"base64":e=Tl(Rl(e));break;case"binary":e=Tl(e);break;case"buffer":break;case"array":Array.isArray(e)||(e=Array.prototype.slice.call(e));break}Pi(e,0),n={content:e}}var s,i;if(r&&W6e(r),t.bookProps&&!t.bookSheets)s={};else{var o=pn?"buffer":"array";if(n&&n.content)s=K6e(n.content,t);else if((i=Or.find(e,"PerfectOffice_MAIN"))&&i.content)s=Fh.to_workbook(i.content,(t.type=o,t));else if((i=Or.find(e,"NativeContent_MAIN"))&&i.content)s=Fh.to_workbook(i.content,(t.type=o,t));else throw(i=Or.find(e,"MN0"))&&i.content?new Error("Unsupported Works 4 for Mac file"):new Error("Cannot find Workbook stream");t.bookVBA&&e.FullPaths&&Or.find(e,"/_VBA_PROJECT_CUR/VBA/dir")&&(s.vbaraw=cke(e))}var l={};return e.FullPaths&&X6e(e,l,t),s.Props=s.Custprops=l,t.bookFiles&&(s.cfb=e),s}function Q6e(e,t){var r=t||{},n=Or.utils.cfb_new({root:"R"}),s="/Workbook";switch(r.bookType||"xls"){case"xls":r.bookType="biff8";case"xla":r.bookType||(r.bookType="xla");case"biff8":s="/Workbook",r.biff=8;break;case"biff5":s="/Book",r.biff=5;break;default:throw new Error("invalid type "+r.bookType+" for XLS CFB")}return Or.utils.cfb_add(n,s,cU(e,r)),r.biff==8&&(e.Props||e.Custprops)&&Y6e(e,n),r.biff==8&&e.vbaraw&&dke(n,Or.read(e.vbaraw,{type:typeof e.vbaraw=="string"?"binary":"buffer"})),n}var R1={0:{f:wSe},1:{f:ESe},2:{f:KSe},3:{f:MSe},4:{f:ISe},5:{f:WSe},6:{f:ZSe},7:{f:USe},8:{f:i_e},9:{f:s_e},10:{f:n_e},11:{f:a_e},12:{f:OSe},13:{f:YSe},14:{f:BSe},15:{f:LSe},16:{f:eU},17:{f:t_e},18:{f:qSe},19:{f:gA},20:{},21:{},22:{},23:{},24:{},25:{},26:{},27:{},28:{},29:{},30:{},31:{},32:{},33:{},34:{},35:{T:1},36:{T:-1},37:{T:1},38:{T:-1},39:{f:t6e},40:{},42:{},43:{f:Zje},44:{f:Qje},45:{f:r4e},46:{f:a4e},47:{f:n4e},48:{},49:{f:kwe},50:{},51:{f:R4e},52:{T:1},53:{T:-1},54:{T:1},55:{T:-1},56:{T:1},57:{T:-1},58:{},59:{},60:{f:k$},62:{f:JSe},63:{f:G4e},64:{f:N_e},65:{},66:{},67:{},68:{},69:{},70:{},128:{},129:{T:1},130:{T:-1},131:{T:1,f:ho,p:0},132:{T:-1},133:{T:1},134:{T:-1},135:{T:1},136:{T:-1},137:{T:1,f:v_e},138:{T:-1},139:{T:1},140:{T:-1},141:{T:1},142:{T:-1},143:{T:1},144:{T:-1},145:{T:1},146:{T:-1},147:{f:ASe},148:{f:kSe,p:16},151:{f:f_e},152:{},153:{f:J_e},154:{},155:{},156:{f:Y_e},157:{},158:{},159:{T:1,f:pje},160:{T:-1},161:{T:1,f:xp},162:{T:-1},163:{T:1},164:{T:-1},165:{T:1},166:{T:-1},167:{},168:{},169:{},170:{},171:{},172:{T:1},173:{T:-1},174:{},175:{},176:{f:o_e},177:{T:1},178:{T:-1},179:{T:1},180:{T:-1},181:{T:1},182:{T:-1},183:{T:1},184:{T:-1},185:{T:1},186:{T:-1},187:{T:1},188:{T:-1},189:{T:1},190:{T:-1},191:{T:1},192:{T:-1},193:{T:1},194:{T:-1},195:{T:1},196:{T:-1},197:{T:1},198:{T:-1},199:{T:1},200:{T:-1},201:{T:1},202:{T:-1},203:{T:1},204:{T:-1},205:{T:1},206:{T:-1},207:{T:1},208:{T:-1},209:{T:1},210:{T:-1},211:{T:1},212:{T:-1},213:{T:1},214:{T:-1},215:{T:1},216:{T:-1},217:{T:1},218:{T:-1},219:{T:1},220:{T:-1},221:{T:1},222:{T:-1},223:{T:1},224:{T:-1},225:{T:1},226:{T:-1},227:{T:1},228:{T:-1},229:{T:1},230:{T:-1},231:{T:1},232:{T:-1},233:{T:1},234:{T:-1},235:{T:1},236:{T:-1},237:{T:1},238:{T:-1},239:{T:1},240:{T:-1},241:{T:1},242:{T:-1},243:{T:1},244:{T:-1},245:{T:1},246:{T:-1},247:{T:1},248:{T:-1},249:{T:1},250:{T:-1},251:{T:1},252:{T:-1},253:{T:1},254:{T:-1},255:{T:1},256:{T:-1},257:{T:1},258:{T:-1},259:{T:1},260:{T:-1},261:{T:1},262:{T:-1},263:{T:1},264:{T:-1},265:{T:1},266:{T:-1},267:{T:1},268:{T:-1},269:{T:1},270:{T:-1},271:{T:1},272:{T:-1},273:{T:1},274:{T:-1},275:{T:1},276:{T:-1},277:{},278:{T:1},279:{T:-1},280:{T:1},281:{T:-1},282:{T:1},283:{T:1},284:{T:-1},285:{T:1},286:{T:-1},287:{T:1},288:{T:-1},289:{T:1},290:{T:-1},291:{T:1},292:{T:-1},293:{T:1},294:{T:-1},295:{T:1},296:{T:-1},297:{T:1},298:{T:-1},299:{T:1},300:{T:-1},301:{T:1},302:{T:-1},303:{T:1},304:{T:-1},305:{T:1},306:{T:-1},307:{T:1},308:{T:-1},309:{T:1},310:{T:-1},311:{T:1},312:{T:-1},313:{T:-1},314:{T:1},315:{T:-1},316:{T:1},317:{T:-1},318:{T:1},319:{T:-1},320:{T:1},321:{T:-1},322:{T:1},323:{T:-1},324:{T:1},325:{T:-1},326:{T:1},327:{T:-1},328:{T:1},329:{T:-1},330:{T:1},331:{T:-1},332:{T:1},333:{T:-1},334:{T:1},335:{f:F4e},336:{T:-1},337:{f:U4e,T:1},338:{T:-1},339:{T:1},340:{T:-1},341:{T:1},342:{T:-1},343:{T:1},344:{T:-1},345:{T:1},346:{T:-1},347:{T:1},348:{T:-1},349:{T:1},350:{T:-1},351:{},352:{},353:{T:1},354:{T:-1},355:{f:bS},357:{},358:{},359:{},360:{T:1},361:{},362:{f:j$},363:{},364:{},366:{},367:{},368:{},369:{},370:{},371:{},372:{T:1},373:{T:-1},374:{T:1},375:{T:-1},376:{T:1},377:{T:-1},378:{T:1},379:{T:-1},380:{T:1},381:{T:-1},382:{T:1},383:{T:-1},384:{T:1},385:{T:-1},386:{T:1},387:{T:-1},388:{T:1},389:{T:-1},390:{T:1},391:{T:-1},392:{T:1},393:{T:-1},394:{T:1},395:{T:-1},396:{},397:{},398:{},399:{},400:{},401:{T:1},403:{},404:{},405:{},406:{},407:{},408:{},409:{},410:{},411:{},412:{},413:{},414:{},415:{},416:{},417:{},418:{},419:{},420:{},421:{},422:{T:1},423:{T:1},424:{T:-1},425:{T:-1},426:{f:h_e},427:{f:p_e},428:{},429:{T:1},430:{T:-1},431:{T:1},432:{T:-1},433:{T:1},434:{T:-1},435:{T:1},436:{T:-1},437:{T:1},438:{T:-1},439:{T:1},440:{T:-1},441:{T:1},442:{T:-1},443:{T:1},444:{T:-1},445:{T:1},446:{T:-1},447:{T:1},448:{T:-1},449:{T:1},450:{T:-1},451:{T:1},452:{T:-1},453:{T:1},454:{T:-1},455:{T:1},456:{T:-1},457:{T:1},458:{T:-1},459:{T:1},460:{T:-1},461:{T:1},462:{T:-1},463:{T:1},464:{T:-1},465:{T:1},466:{T:-1},467:{T:1},468:{T:-1},469:{T:1},470:{T:-1},471:{},472:{},473:{T:1},474:{T:-1},475:{},476:{f:x_e},477:{},478:{},479:{T:1},480:{T:-1},481:{T:1},482:{T:-1},483:{T:1},484:{T:-1},485:{f:_Se},486:{T:1},487:{T:-1},488:{T:1},489:{T:-1},490:{T:1},491:{T:-1},492:{T:1},493:{T:-1},494:{f:d_e},495:{T:1},496:{T:-1},497:{T:1},498:{T:-1},499:{},500:{T:1},501:{T:-1},502:{T:1},503:{T:-1},504:{},505:{T:1},506:{T:-1},507:{},508:{T:1},509:{T:-1},510:{T:1},511:{T:-1},512:{},513:{},514:{T:1},515:{T:-1},516:{T:1},517:{T:-1},518:{T:1},519:{T:-1},520:{T:1},521:{T:-1},522:{},523:{},524:{},525:{},526:{},527:{},528:{T:1},529:{T:-1},530:{T:1},531:{T:-1},532:{T:1},533:{T:-1},534:{},535:{},536:{},537:{},538:{T:1},539:{T:-1},540:{T:1},541:{T:-1},542:{T:1},548:{},549:{},550:{f:bS},551:{},552:{},553:{},554:{T:1},555:{T:-1},556:{T:1},557:{T:-1},558:{T:1},559:{T:-1},560:{T:1},561:{T:-1},562:{},564:{},565:{T:1},566:{T:-1},569:{T:1},570:{T:-1},572:{},573:{T:1},574:{T:-1},577:{},578:{},579:{},580:{},581:{},582:{},583:{},584:{},585:{},586:{},587:{},588:{T:-1},589:{},590:{T:1},591:{T:-1},592:{T:1},593:{T:-1},594:{T:1},595:{T:-1},596:{},597:{T:1},598:{T:-1},599:{T:1},600:{T:-1},601:{T:1},602:{T:-1},603:{T:1},604:{T:-1},605:{T:1},606:{T:-1},607:{},608:{T:1},609:{T:-1},610:{},611:{T:1},612:{T:-1},613:{T:1},614:{T:-1},615:{T:1},616:{T:-1},617:{T:1},618:{T:-1},619:{T:1},620:{T:-1},625:{},626:{T:1},627:{T:-1},628:{T:1},629:{T:-1},630:{T:1},631:{T:-1},632:{f:ake},633:{T:1},634:{T:-1},635:{T:1,f:rke},636:{T:-1},637:{f:Cwe},638:{T:1},639:{},640:{T:-1},641:{T:1},642:{T:-1},643:{T:1},644:{},645:{T:-1},646:{T:1},648:{T:1},649:{},650:{T:-1},651:{f:B_e},652:{},653:{T:1},654:{T:-1},655:{T:1},656:{T:-1},657:{T:1},658:{T:-1},659:{},660:{T:1},661:{},662:{T:-1},663:{},664:{T:1},665:{},666:{T:-1},667:{},668:{},669:{},671:{T:1},672:{T:-1},673:{T:1},674:{T:-1},675:{},676:{},677:{},678:{},679:{},680:{},681:{},1024:{},1025:{},1026:{T:1},1027:{T:-1},1028:{T:1},1029:{T:-1},1030:{},1031:{T:1},1032:{T:-1},1033:{T:1},1034:{T:-1},1035:{},1036:{},1037:{},1038:{T:1},1039:{T:-1},1040:{},1041:{T:1},1042:{T:-1},1043:{},1044:{},1045:{},1046:{T:1},1047:{T:-1},1048:{T:1},1049:{T:-1},1050:{},1051:{T:1},1052:{T:1},1053:{f:j_e},1054:{T:1},1055:{},1056:{T:1},1057:{T:-1},1058:{T:1},1059:{T:-1},1061:{},1062:{T:1},1063:{T:-1},1064:{T:1},1065:{T:-1},1066:{T:1},1067:{T:-1},1068:{T:1},1069:{T:-1},1070:{T:1},1071:{T:-1},1072:{T:1},1073:{T:-1},1075:{T:1},1076:{T:-1},1077:{T:1},1078:{T:-1},1079:{T:1},1080:{T:-1},1081:{T:1},1082:{T:-1},1083:{T:1},1084:{T:-1},1085:{},1086:{T:1},1087:{T:-1},1088:{T:1},1089:{T:-1},1090:{T:1},1091:{T:-1},1092:{T:1},1093:{T:-1},1094:{T:1},1095:{T:-1},1096:{},1097:{T:1},1098:{},1099:{T:-1},1100:{T:1},1101:{T:-1},1102:{},1103:{},1104:{},1105:{},1111:{},1112:{},1113:{T:1},1114:{T:-1},1115:{T:1},1116:{T:-1},1117:{},1118:{T:1},1119:{T:-1},1120:{T:1},1121:{T:-1},1122:{T:1},1123:{T:-1},1124:{T:1},1125:{T:-1},1126:{},1128:{T:1},1129:{T:-1},1130:{},1131:{T:1},1132:{T:-1},1133:{T:1},1134:{T:-1},1135:{T:1},1136:{T:-1},1137:{T:1},1138:{T:-1},1139:{T:1},1140:{T:-1},1141:{},1142:{T:1},1143:{T:-1},1144:{T:1},1145:{T:-1},1146:{},1147:{T:1},1148:{T:-1},1149:{T:1},1150:{T:-1},1152:{T:1},1153:{T:-1},1154:{T:-1},1155:{T:-1},1156:{T:-1},1157:{T:1},1158:{T:-1},1159:{T:1},1160:{T:-1},1161:{T:1},1162:{T:-1},1163:{T:1},1164:{T:-1},1165:{T:1},1166:{T:-1},1167:{T:1},1168:{T:-1},1169:{T:1},1170:{T:-1},1171:{},1172:{T:1},1173:{T:-1},1177:{},1178:{T:1},1180:{},1181:{},1182:{},2048:{T:1},2049:{T:-1},2050:{},2051:{T:1},2052:{T:-1},2053:{},2054:{},2055:{T:1},2056:{T:-1},2057:{T:1},2058:{T:-1},2060:{},2067:{},2068:{T:1},2069:{T:-1},2070:{},2071:{},2072:{T:1},2073:{T:-1},2075:{},2076:{},2077:{T:1},2078:{T:-1},2079:{},2080:{T:1},2081:{T:-1},2082:{},2083:{T:1},2084:{T:-1},2085:{T:1},2086:{T:-1},2087:{T:1},2088:{T:-1},2089:{T:1},2090:{T:-1},2091:{},2092:{},2093:{T:1},2094:{T:-1},2095:{},2096:{T:1},2097:{T:-1},2098:{T:1},2099:{T:-1},2100:{T:1},2101:{T:-1},2102:{},2103:{T:1},2104:{T:-1},2105:{},2106:{T:1},2107:{T:-1},2108:{},2109:{T:1},2110:{T:-1},2111:{T:1},2112:{T:-1},2113:{T:1},2114:{T:-1},2115:{},2116:{},2117:{},2118:{T:1},2119:{T:-1},2120:{},2121:{T:1},2122:{T:-1},2123:{T:1},2124:{T:-1},2125:{},2126:{T:1},2127:{T:-1},2128:{},2129:{T:1},2130:{T:-1},2131:{T:1},2132:{T:-1},2133:{T:1},2134:{},2135:{},2136:{},2137:{T:1},2138:{T:-1},2139:{T:1},2140:{T:-1},2141:{},3072:{},3073:{},4096:{T:1},4097:{T:-1},5002:{T:1},5003:{T:-1},5081:{T:1},5082:{T:-1},5083:{},5084:{T:1},5085:{T:-1},5086:{T:1},5087:{T:-1},5088:{},5089:{},5090:{},5092:{T:1},5093:{T:-1},5094:{},5095:{T:1},5096:{T:-1},5097:{},5099:{},65535:{n:""}},AS={6:{f:u4},10:{f:bf},12:{f:Bs},13:{f:Bs},14:{f:ws},15:{f:ws},16:{f:oo},17:{f:ws},18:{f:ws},19:{f:Bs},20:{f:k8},21:{f:k8},23:{f:j$},24:{f:_8},25:{f:ws},26:{},27:{},28:{f:jNe},29:{},34:{f:ws},35:{f:S8},38:{f:oo},39:{f:oo},40:{f:oo},41:{f:oo},42:{f:ws},43:{f:ws},47:{f:Lje},49:{f:Y5e},51:{f:Bs},60:{},61:{f:W5e},64:{f:ws},65:{f:X5e},66:{f:Bs},77:{},80:{},81:{},82:{},85:{f:Bs},89:{},90:{},91:{},92:{f:D5e},93:{f:_Ne},94:{},95:{f:ws},96:{},97:{},99:{f:ws},125:{f:k$},128:{f:uNe},129:{f:F5e},130:{f:Bs},131:{f:ws},132:{f:ws},133:{f:M5e},134:{},140:{f:DNe},141:{f:Bs},144:{},146:{f:MNe},151:{},152:{},153:{},154:{},155:{},156:{f:Bs},157:{},158:{},160:{f:HNe},161:{f:$Ne},174:{},175:{},176:{},177:{},178:{},180:{},181:{},182:{},184:{},185:{},189:{f:oNe},190:{f:lNe},193:{f:bf},197:{},198:{},199:{},200:{},201:{},202:{f:ws},203:{},204:{},205:{},206:{},207:{},208:{},209:{},210:{},211:{},213:{},215:{},216:{},217:{},218:{f:Bs},220:{},221:{f:ws},222:{},224:{f:dNe},225:{f:I5e},226:{f:bf},227:{},229:{f:kNe},233:{},235:{},236:{},237:{},239:{},240:{},241:{},242:{},244:{},245:{},246:{},247:{},248:{},249:{},251:{},252:{f:B5e},253:{f:J5e},255:{f:U5e},256:{},259:{},290:{},311:{},312:{},315:{},317:{f:p$},318:{},319:{},320:{},330:{},331:{},333:{},334:{},335:{},336:{},337:{},338:{},339:{},340:{},351:{},352:{f:ws},353:{f:bf},401:{},402:{},403:{},404:{},405:{},406:{},407:{},408:{},425:{},426:{},427:{},428:{},429:{},430:{f:xNe},431:{f:ws},432:{},433:{},434:{},437:{},438:{f:ENe},439:{f:ws},440:{f:TNe},441:{},442:{f:ub},443:{},444:{f:Bs},445:{},446:{},448:{f:bf},449:{f:H5e,r:2},450:{f:bf},512:{f:w8},513:{f:qNe},515:{f:pNe},516:{f:eNe},517:{f:j8},519:{f:WNe},520:{f:z5e},523:{},545:{f:A8},549:{f:y8},566:{},574:{f:G5e},638:{f:iNe},659:{},1048:{},1054:{f:rNe},1084:{},1212:{f:yNe},2048:{f:PNe},2049:{},2050:{},2051:{},2052:{},2053:{},2054:{},2055:{},2056:{},2057:{f:Ly},2058:{},2059:{},2060:{},2061:{},2062:{},2063:{},2064:{},2066:{},2067:{},2128:{},2129:{},2130:{},2131:{},2132:{},2133:{},2134:{},2135:{},2136:{},2137:{},2138:{},2146:{},2147:{r:12},2148:{},2149:{},2150:{},2151:{f:bf},2152:{},2154:{},2155:{},2156:{},2161:{},2162:{},2164:{},2165:{},2166:{},2167:{},2168:{},2169:{},2170:{},2171:{},2172:{f:RNe,r:12},2173:{f:D4e,r:12},2174:{},2175:{},2180:{},2181:{},2182:{},2183:{},2184:{},2185:{},2186:{},2187:{},2188:{f:ws,r:12},2189:{},2190:{r:12},2191:{},2192:{},2194:{},2195:{},2196:{f:bNe,r:12},2197:{},2198:{f:C4e,r:12},2199:{},2200:{},2201:{},2202:{f:wNe,r:12},2203:{f:bf},2204:{},2205:{},2206:{},2207:{},2211:{f:q5e},2212:{},2213:{},2214:{},2215:{},4097:{},4098:{},4099:{},4102:{},4103:{},4105:{},4106:{},4107:{},4108:{},4109:{},4116:{},4117:{},4118:{},4119:{},4120:{},4121:{},4122:{},4123:{},4124:{},4125:{},4126:{},4127:{},4128:{},4129:{},4130:{},4132:{},4133:{},4134:{f:Bs},4135:{},4146:{},4147:{},4148:{},4149:{},4154:{},4156:{},4157:{},4158:{},4159:{},4160:{},4161:{},4163:{},4164:{f:UNe},4165:{},4166:{},4168:{},4170:{},4171:{},4174:{},4175:{},4176:{},4177:{},4187:{},4188:{f:FNe},4189:{},4191:{},4192:{},4193:{},4194:{},4195:{},4196:{},4197:{},4198:{},4199:{},4200:{},0:{f:w8},1:{},2:{f:YNe},3:{f:KNe},4:{f:GNe},5:{f:j8},7:{f:JNe},8:{},9:{f:Ly},11:{},22:{f:Bs},30:{f:aNe},31:{},32:{},33:{f:A8},36:{},37:{f:y8},50:{f:ZNe},62:{},52:{},67:{},68:{f:Bs},69:{},86:{},126:{},127:{f:VNe},135:{},136:{},137:{},145:{},148:{},149:{},150:{},169:{},171:{},188:{},191:{},192:{},194:{},195:{},214:{f:eje},223:{},234:{},354:{},421:{},518:{f:u4},521:{f:Ly},536:{f:_8},547:{f:S8},561:{},579:{},1030:{f:u4},1033:{f:Ly},1091:{},2157:{},2163:{},2177:{},2240:{},2241:{},2242:{},2243:{},2244:{},2245:{},2246:{},2247:{},2248:{},2249:{},2250:{},2251:{},2262:{r:12},29282:{}};function er(e,t,r,n){var s=t;if(!isNaN(s)){var i=n||(r||[]).length||0,o=e.next(4);o.write_shift(2,s),o.write_shift(2,i),i>0&&pA(r)&&e.push(r)}}function J6e(e,t,r,n){var s=(r||[]).length||0;if(s<=8224)return er(e,t,r,s);var i=t;if(!isNaN(i)){for(var o=r.parts||[],l=0,c=0,d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;var f=e.next(4);for(f.write_shift(2,i),f.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d;c<s;){for(f=e.next(4),f.write_shift(2,60),d=0;d+(o[l]||8224)<=8224;)d+=o[l]||8224,l++;f.write_shift(2,d),e.push(r.slice(c,c+d)),c+=d}}}function mb(e,t,r){return e||(e=jt(7)),e.write_shift(2,t),e.write_shift(2,r),e.write_shift(2,0),e.write_shift(1,0),e}function Z6e(e,t,r,n){var s=jt(9);return mb(s,e,t),m$(r,n||"b",s),s}function eAe(e,t,r){var n=jt(8+2*r.length);return mb(n,e,t),n.write_shift(1,r.length),n.write_shift(r.length,r,"sbcs"),n.l<n.length?n.slice(0,n.l):n}function tAe(e,t,r,n){if(t.v!=null)switch(t.t){case"d":case"n":var s=t.t=="d"?ai(Da(t.v)):t.v;s==(s|0)&&s>=0&&s<65536?er(e,2,QNe(r,n,s)):er(e,3,XNe(r,n,s));return;case"b":case"e":er(e,5,Z6e(r,n,t.v,t.t));return;case"s":case"str":er(e,4,eAe(r,n,(t.v||"").slice(0,255)));return}er(e,1,mb(null,r,n))}function rAe(e,t,r,n){var s=Array.isArray(t),i=Bn(t["!ref"]||"A1"),o,l="",c=[];if(i.e.c>255||i.e.r>16383){if(n.WTF)throw new Error("Range "+(t["!ref"]||"A1")+" exceeds format limit A1:IV16384");i.e.c=Math.min(i.e.c,255),i.e.r=Math.min(i.e.c,16383),o=an(i)}for(var d=i.s.r;d<=i.e.r;++d){l=As(d);for(var f=i.s.c;f<=i.e.c;++f){d===i.s.r&&(c[f]=Ja(f)),o=c[f]+l;var u=s?(t[d]||[])[f]:t[o];u&&tAe(e,u,d,f)}}}function nAe(e,t){for(var r=t||{},n=sl(),s=0,i=0;i<e.SheetNames.length;++i)e.SheetNames[i]==r.sheet&&(s=i);if(s==0&&r.sheet&&e.SheetNames[0]!=r.sheet)throw new Error("Sheet not found: "+r.sheet);return er(n,r.biff==4?1033:r.biff==3?521:9,kA(e,16,r)),rAe(n,e.Sheets[e.SheetNames[s]],s,r),er(n,10),n.end()}function aAe(e,t,r){er(e,49,Q5e({sz:12,name:"Arial"},r))}function sAe(e,t,r){t&&[[5,8],[23,26],[41,44],[50,392]].forEach(function(n){for(var s=n[0];s<=n[1];++s)t[s]!=null&&er(e,1054,nNe(s,t[s],r))})}function iAe(e,t){var r=jt(19);r.write_shift(4,2151),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,1),r.write_shift(4,0),er(e,2151,r),r=jt(39),r.write_shift(4,2152),r.write_shift(4,0),r.write_shift(4,0),r.write_shift(2,3),r.write_shift(1,0),r.write_shift(4,0),r.write_shift(2,1),r.write_shift(4,4),r.write_shift(2,0),y$(Bn(t["!ref"]||"A1"),r),r.write_shift(4,4),er(e,2152,r)}function oAe(e,t){for(var r=0;r<16;++r)er(e,224,N8({numFmtId:0,style:!0},0,t));t.cellXfs.forEach(function(n){er(e,224,N8(n,0,t))})}function lAe(e,t){for(var r=0;r<t["!links"].length;++r){var n=t["!links"][r];er(e,440,ONe(n)),n[1].Tooltip&&er(e,2048,INe(n))}delete t["!links"]}function cAe(e,t){if(t){var r=0;t.forEach(function(n,s){++r<=256&&n&&er(e,125,BNe(DN(s,n),s))})}}function dAe(e,t,r,n,s){var i=16+O0(s.cellXfs,t,s);if(t.v==null&&!t.bf){er(e,513,np(r,n,i));return}if(t.bf)er(e,6,F3e(t,r,n,s,i));else switch(t.t){case"d":case"n":var o=t.t=="d"?ai(Da(t.v)):t.v;er(e,515,mNe(r,n,o,i));break;case"b":case"e":er(e,517,hNe(r,n,t.v,i,s,t.t));break;case"s":case"str":if(s.bookSST){var l=PA(s.Strings,t.v,s.revStrings);er(e,253,Z5e(r,n,l,i))}else er(e,516,tNe(r,n,(t.v||"").slice(0,255),i,s));break;default:er(e,513,np(r,n,i))}}function uAe(e,t,r){var n=sl(),s=r.SheetNames[e],i=r.Sheets[s]||{},o=(r||{}).Workbook||{},l=(o.Sheets||[])[e]||{},c=Array.isArray(i),d=t.biff==8,f,u="",p=[],h=Bn(i["!ref"]||"A1"),m=d?65536:16384;if(h.e.c>255||h.e.r>=m){if(t.WTF)throw new Error("Range "+(i["!ref"]||"A1")+" exceeds format limit A1:IV16384");h.e.c=Math.min(h.e.c,255),h.e.r=Math.min(h.e.c,m-1)}er(n,2057,kA(r,16,t)),er(n,13,sc(1)),er(n,12,sc(100)),er(n,15,So(!0)),er(n,17,So(!1)),er(n,16,tp(.001)),er(n,95,So(!0)),er(n,42,So(!1)),er(n,43,So(!1)),er(n,130,sc(1)),er(n,128,fNe()),er(n,131,So(!1)),er(n,132,So(!1)),d&&cAe(n,i["!cols"]),er(n,512,sNe(h,t)),d&&(i["!links"]=[]);for(var g=h.s.r;g<=h.e.r;++g){u=As(g);for(var x=h.s.c;x<=h.e.c;++x){g===h.s.r&&(p[x]=Ja(x)),f=p[x]+u;var v=c?(i[g]||[])[x]:i[f];v&&(dAe(n,v,g,x,t),d&&v.l&&i["!links"].push([f,v.l]))}}var b=l.CodeName||l.name||s;return d&&er(n,574,K5e((o.Views||[])[0])),d&&(i["!merges"]||[]).length&&er(n,229,SNe(i["!merges"])),d&&lAe(n,i),er(n,442,x$(b)),d&&iAe(n,i),er(n,10),n.end()}function fAe(e,t,r){var n=sl(),s=(e||{}).Workbook||{},i=s.Sheets||[],o=s.WBProps||{},l=r.biff==8,c=r.biff==5;if(er(n,2057,kA(e,5,r)),r.bookType=="xla"&&er(n,135),er(n,225,l?sc(1200):null),er(n,193,h5e(2)),c&&er(n,191),c&&er(n,192),er(n,226),er(n,92,L5e("SheetJS",r)),er(n,66,sc(l?1200:1252)),l&&er(n,353,sc(0)),l&&er(n,448),er(n,317,zNe(e.SheetNames.length)),l&&e.vbaraw&&er(n,211),l&&e.vbaraw){var d=o.CodeName||"ThisWorkbook";er(n,442,x$(d))}er(n,156,sc(17)),er(n,25,So(!1)),er(n,18,So(!1)),er(n,19,sc(0)),l&&er(n,431,So(!1)),l&&er(n,444,sc(0)),er(n,61,V5e()),er(n,64,So(!1)),er(n,141,sc(0)),er(n,34,So(H_e(e)=="true")),er(n,14,So(!0)),l&&er(n,439,So(!1)),er(n,218,sc(0)),aAe(n,e,r),sAe(n,e.SSF,r),oAe(n,r),l&&er(n,352,So(!1));var f=n.end(),u=sl();l&&er(u,140,LNe()),l&&r.Strings&&J6e(u,252,$5e(r.Strings)),er(u,10);var p=u.end(),h=sl(),m=0,g=0;for(g=0;g<e.SheetNames.length;++g)m+=(l?12:11)+(l?2:1)*e.SheetNames[g].length;var x=f.length+m+p.length;for(g=0;g<e.SheetNames.length;++g){var v=i[g]||{};er(h,133,R5e({pos:x,hs:v.Hidden||0,dt:0,name:e.SheetNames[g]},r)),x+=t[g].length}var b=h.end();if(m!=b.length)throw new Error("BS8 "+m+" != "+b.length);var w=[];return f.length&&w.push(f),b.length&&w.push(b),p.length&&w.push(p),yi(w)}function hAe(e,t){var r=t||{},n=[];e&&!e.SSF&&(e.SSF=La(Br)),e&&e.SSF&&(Kx(),AN(e.SSF),r.revssf=EN(e.SSF),r.revssf[e.SSF[65535]]=0,r.ssf=e.SSF),r.Strings=[],r.Strings.Count=0,r.Strings.Unique=0,MA(r),r.cellXfs=[],O0(r.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={});for(var s=0;s<e.SheetNames.length;++s)n[n.length]=uAe(s,r,e);return n.unshift(fAe(e,n,r)),yi(n)}function cU(e,t){for(var r=0;r<=e.SheetNames.length;++r){var n=e.Sheets[e.SheetNames[r]];if(!(!n||!n["!ref"])){var s=ol(n["!ref"]);s.e.c>255&&typeof console<"u"&&console.error&&console.error("Worksheet '"+e.SheetNames[r]+"' extends beyond column IV (255).  Data may be lost.")}}var i=t||{};switch(i.biff||2){case 8:case 5:return hAe(e,t);case 4:case 3:case 2:return nAe(e,t)}throw new Error("invalid type "+i.bookType+" for BIFF")}function M8(e,t){var r=t||{},n=r.dense?[]:{};e=e.replace(/<!--.*?-->/g,"");var s=e.match(/<table/i);if(!s)throw new Error("Invalid HTML: could not find <table>");var i=e.match(/<\/table/i),o=s.index,l=i&&i.index||e.length,c=Q2e(e.slice(o,l),/(:?<tr[^>]*>)/i,"<tr>"),d=-1,f=0,u=0,p=0,h={s:{r:1e7,c:1e7},e:{r:0,c:0}},m=[];for(o=0;o<c.length;++o){var g=c[o].trim(),x=g.slice(0,3).toLowerCase();if(x=="<tr"){if(++d,r.sheetRows&&r.sheetRows<=d){--d;break}f=0;continue}if(!(x!="<td"&&x!="<th")){var v=g.split(/<\/t[dh]>/i);for(l=0;l<v.length;++l){var b=v[l].trim();if(b.match(/<t[dh]/i)){for(var w=b,y=0;w.charAt(0)=="<"&&(y=w.indexOf(">"))>-1;)w=w.slice(y+1);for(var N=0;N<m.length;++N){var S=m[N];S.s.c==f&&S.s.r<d&&d<=S.e.r&&(f=S.e.c+1,N=-1)}var j=Vr(b.slice(0,b.indexOf(">")));p=j.colspan?+j.colspan:1,((u=+j.rowspan)>1||p>1)&&m.push({s:{r:d,c:f},e:{r:d+(u||1)-1,c:f+p-1}});var _=j.t||j["data-t"]||"";if(!w.length){f+=p;continue}if(w=IB(w),h.s.r>d&&(h.s.r=d),h.e.r<d&&(h.e.r=d),h.s.c>f&&(h.s.c=f),h.e.c<f&&(h.e.c=f),!w.length){f+=p;continue}var T={t:"s",v:w};r.raw||!w.trim().length||_=="s"||(w==="TRUE"?T={t:"b",v:!0}:w==="FALSE"?T={t:"b",v:!1}:isNaN(id(w))?isNaN(_x(w).getDate())||(T={t:"d",v:Da(w)},r.cellDates||(T={t:"n",v:ai(T.v)}),T.z=r.dateNF||Br[14]):T={t:"n",v:id(w)}),r.dense?(n[d]||(n[d]=[]),n[d][f]=T):n[Wr({r:d,c:f})]=T,f+=p}}}}return n["!ref"]=an(h),m.length&&(n["!merges"]=m),n}function pAe(e,t,r,n){for(var s=e["!merges"]||[],i=[],o=t.s.c;o<=t.e.c;++o){for(var l=0,c=0,d=0;d<s.length;++d)if(!(s[d].s.r>r||s[d].s.c>o)&&!(s[d].e.r<r||s[d].e.c<o)){if(s[d].s.r<r||s[d].s.c<o){l=-1;break}l=s[d].e.r-s[d].s.r+1,c=s[d].e.c-s[d].s.c+1;break}if(!(l<0)){var f=Wr({r,c:o}),u=n.dense?(e[r]||[])[o]:e[f],p=u&&u.v!=null&&(u.h||uA(u.w||(Vu(u),u.w)||""))||"",h={};l>1&&(h.rowspan=l),c>1&&(h.colspan=c),n.editable?p='<span contenteditable="true">'+p+"</span>":u&&(h["data-t"]=u&&u.t||"z",u.v!=null&&(h["data-v"]=u.v),u.z!=null&&(h["data-z"]=u.z),u.l&&(u.l.Target||"#").charAt(0)!="#"&&(p='<a href="'+u.l.Target+'">'+p+"</a>")),h.id=(n.id||"sjs")+"-"+f,i.push(Zt("td",p,h))}}var m="<tr>";return m+i.join("")+"</tr>"}var mAe='<html><head><meta charset="utf-8"/><title>SheetJS Table Export</title></head><body>',xAe="</body></html>";function gAe(e,t){var r=e.match(/<table[\s\S]*?>[\s\S]*?<\/table>/gi);if(!r||r.length==0)throw new Error("Invalid HTML: could not find <table>");if(r.length==1)return T0(M8(r[0],t),t);var n=$A();return r.forEach(function(s,i){UA(n,M8(s,t),"Sheet"+(i+1))}),n}function vAe(e,t,r){var n=[];return n.join("")+"<table"+(r&&r.id?' id="'+r.id+'"':"")+">"}function dU(e,t){var r=t||{},n=r.header!=null?r.header:mAe,s=r.footer!=null?r.footer:xAe,i=[n],o=ol(e["!ref"]);r.dense=Array.isArray(e),i.push(vAe(e,o,r));for(var l=o.s.r;l<=o.e.r;++l)i.push(pAe(e,o,l,r));return i.push("</table>"+s),i.join("")}function uU(e,t,r){var n=r||{},s=0,i=0;if(n.origin!=null)if(typeof n.origin=="number")s=n.origin;else{var o=typeof n.origin=="string"?Za(n.origin):n.origin;s=o.r,i=o.c}var l=t.getElementsByTagName("tr"),c=Math.min(n.sheetRows||1e7,l.length),d={s:{r:0,c:0},e:{r:s,c:i}};if(e["!ref"]){var f=ol(e["!ref"]);d.s.r=Math.min(d.s.r,f.s.r),d.s.c=Math.min(d.s.c,f.s.c),d.e.r=Math.max(d.e.r,f.e.r),d.e.c=Math.max(d.e.c,f.e.c),s==-1&&(d.e.r=s=f.e.r+1)}var u=[],p=0,h=e["!rows"]||(e["!rows"]=[]),m=0,g=0,x=0,v=0,b=0,w=0;for(e["!cols"]||(e["!cols"]=[]);m<l.length&&g<c;++m){var y=l[m];if(R8(y)){if(n.display)continue;h[g]={hidden:!0}}var N=y.children;for(x=v=0;x<N.length;++x){var S=N[x];if(!(n.display&&R8(S))){var j=S.hasAttribute("data-v")?S.getAttribute("data-v"):S.hasAttribute("v")?S.getAttribute("v"):IB(S.innerHTML),_=S.getAttribute("data-z")||S.getAttribute("z");for(p=0;p<u.length;++p){var T=u[p];T.s.c==v+i&&T.s.r<g+s&&g+s<=T.e.r&&(v=T.e.c+1-i,p=-1)}w=+S.getAttribute("colspan")||1,((b=+S.getAttribute("rowspan")||1)>1||w>1)&&u.push({s:{r:g+s,c:v+i},e:{r:g+s+(b||1)-1,c:v+i+(w||1)-1}});var D={t:"s",v:j},A=S.getAttribute("data-t")||S.getAttribute("t")||"";j!=null&&(j.length==0?D.t=A||"z":n.raw||j.trim().length==0||A=="s"||(j==="TRUE"?D={t:"b",v:!0}:j==="FALSE"?D={t:"b",v:!1}:isNaN(id(j))?isNaN(_x(j).getDate())||(D={t:"d",v:Da(j)},n.cellDates||(D={t:"n",v:ai(D.v)}),D.z=n.dateNF||Br[14]):D={t:"n",v:id(j)})),D.z===void 0&&_!=null&&(D.z=_);var C="",M=S.getElementsByTagName("A");if(M&&M.length)for(var F=0;F<M.length&&!(M[F].hasAttribute("href")&&(C=M[F].getAttribute("href"),C.charAt(0)!="#"));++F);C&&C.charAt(0)!="#"&&(D.l={Target:C}),n.dense?(e[g+s]||(e[g+s]=[]),e[g+s][v+i]=D):e[Wr({c:v+i,r:g+s})]=D,d.e.c<v+i&&(d.e.c=v+i),v+=w}}++g}return u.length&&(e["!merges"]=(e["!merges"]||[]).concat(u)),d.e.r=Math.max(d.e.r,g-1+s),e["!ref"]=an(d),g>=c&&(e["!fullref"]=an((d.e.r=l.length-m+g-1+s,d))),e}function fU(e,t){var r=t||{},n=r.dense?[]:{};return uU(n,e,t)}function bAe(e,t){return T0(fU(e,t),t)}function R8(e){var t="",r=yAe(e);return r&&(t=r(e).getPropertyValue("display")),t||(t=e.style&&e.style.display),t==="none"}function yAe(e){return e.ownerDocument.defaultView&&typeof e.ownerDocument.defaultView.getComputedStyle=="function"?e.ownerDocument.defaultView.getComputedStyle:typeof getComputedStyle=="function"?getComputedStyle:null}function wAe(e){var t=e.replace(/[\t\r\n]/g," ").trim().replace(/ +/g," ").replace(/<text:s\/>/g," ").replace(/<text:s text:c="(\d+)"\/>/g,function(n,s){return Array(parseInt(s,10)+1).join(" ")}).replace(/<text:tab[^>]*\/>/g,"	").replace(/<text:line-break\/>/g,`
`),r=Mn(t.replace(/<[^>]*>/g,""));return[r]}var B8={day:["d","dd"],month:["m","mm"],year:["y","yy"],hours:["h","hh"],minutes:["m","mm"],seconds:["s","ss"],"am-pm":["A/P","AM/PM"],"day-of-week":["ddd","dddd"],era:["e","ee"],quarter:["\\Qm",'m\\"th quarter"']};function hU(e,t){var r=t||{},n=fA(e),s=[],i,o,l={name:""},c="",d=0,f,u,p={},h=[],m=r.dense?[]:{},g,x,v={value:""},b="",w=0,y=[],N=-1,S=-1,j={s:{r:1e6,c:1e7},e:{r:0,c:0}},_=0,T={},D=[],A={},C=0,M=0,F=[],B=1,Y=1,V=[],J={Names:[]},U={},X=["",""],W=[],E={},R="",q=0,L=!1,H=!1,se=0;for(P1.lastIndex=0,n=n.replace(/<!--([\s\S]*?)-->/mg,"").replace(/<!DOCTYPE[^\[]*\[[^\]]*\]>/gm,"");g=P1.exec(n);)switch(g[3]=g[3].replace(/_.*$/,"")){case"table":case"":g[1]==="/"?(j.e.c>=j.s.c&&j.e.r>=j.s.r?m["!ref"]=an(j):m["!ref"]="A1:A1",r.sheetRows>0&&r.sheetRows<=j.e.r&&(m["!fullref"]=m["!ref"],j.e.r=r.sheetRows-1,m["!ref"]=an(j)),D.length&&(m["!merges"]=D),F.length&&(m["!rows"]=F),f.name=f.||f.name,typeof JSON<"u"&&JSON.stringify(f),h.push(f.name),p[f.name]=m,H=!1):g[0].charAt(g[0].length-2)!=="/"&&(f=Vr(g[0],!1),N=S=-1,j.s.r=j.s.c=1e7,j.e.r=j.e.c=0,m=r.dense?[]:{},D=[],F=[],H=!0);break;case"table-row-group":g[1]==="/"?--_:++_;break;case"table-row":case"":if(g[1]==="/"){N+=B,B=1;break}if(u=Vr(g[0],!1),u.?N=u.-1:N==-1&&(N=0),B=+u["number-rows-repeated"]||1,B<10)for(se=0;se<B;++se)_>0&&(F[N+se]={level:_});S=-1;break;case"covered-table-cell":g[1]!=="/"&&++S,r.sheetStubs&&(r.dense?(m[N]||(m[N]=[]),m[N][S]={t:"z"}):m[Wr({r:N,c:S})]={t:"z"}),b="",y=[];break;case"table-cell":case"":if(g[0].charAt(g[0].length-2)==="/")++S,v=Vr(g[0],!1),Y=parseInt(v["number-columns-repeated"]||"1",10),x={t:"z",v:null},v.formula&&r.cellFormula!=!1&&(x.f=D8(Mn(v.formula))),(v.||v["value-type"])=="string"&&(x.t="s",x.v=Mn(v["string-value"]||""),r.dense?(m[N]||(m[N]=[]),m[N][S]=x):m[Wr({r:N,c:S})]=x),S+=Y-1;else if(g[1]!=="/"){++S,b="",w=0,y=[],Y=1;var ce=B?N+B-1:N;if(S>j.e.c&&(j.e.c=S),S<j.s.c&&(j.s.c=S),N<j.s.r&&(j.s.r=N),ce>j.e.r&&(j.e.r=ce),v=Vr(g[0],!1),W=[],E={},x={t:v.||v["value-type"],v:null},r.cellFormula)if(v.formula&&(v.formula=Mn(v.formula)),v["number-matrix-columns-spanned"]&&v["number-matrix-rows-spanned"]&&(C=parseInt(v["number-matrix-rows-spanned"],10)||0,M=parseInt(v["number-matrix-columns-spanned"],10)||0,A={s:{r:N,c:S},e:{r:N+C-1,c:S+M-1}},x.F=an(A),V.push([A,x.F])),v.formula)x.f=D8(v.formula);else for(se=0;se<V.length;++se)N>=V[se][0].s.r&&N<=V[se][0].e.r&&S>=V[se][0].s.c&&S<=V[se][0].e.c&&(x.F=V[se][1]);switch((v["number-columns-spanned"]||v["number-rows-spanned"])&&(C=parseInt(v["number-rows-spanned"],10)||0,M=parseInt(v["number-columns-spanned"],10)||0,A={s:{r:N,c:S},e:{r:N+C-1,c:S+M-1}},D.push(A)),v["number-columns-repeated"]&&(Y=parseInt(v["number-columns-repeated"],10)),x.t){case"boolean":x.t="b",x.v=Oa(v["boolean-value"]);break;case"float":x.t="n",x.v=parseFloat(v.value);break;case"percentage":x.t="n",x.v=parseFloat(v.value);break;case"currency":x.t="n",x.v=parseFloat(v.value);break;case"date":x.t="d",x.v=Da(v["date-value"]),r.cellDates||(x.t="n",x.v=ai(x.v)),x.z="m/d/yy";break;case"time":x.t="n",x.v=K2e(v["time-value"])/86400,r.cellDates&&(x.t="d",x.v=TN(x.v)),x.z="HH:MM:SS";break;case"number":x.t="n",x.v=parseFloat(v.);break;default:if(x.t==="string"||x.t==="text"||!x.t)x.t="s",v["string-value"]!=null&&(b=Mn(v["string-value"]),y=[]);else throw new Error("Unsupported value type "+x.t)}}else{if(L=!1,x.t==="s"&&(x.v=b||"",y.length&&(x.R=y),L=w==0),U.Target&&(x.l=U),W.length>0&&(x.c=W,W=[]),b&&r.cellText!==!1&&(x.w=b),L&&(x.t="z",delete x.v),(!L||r.sheetStubs)&&!(r.sheetRows&&r.sheetRows<=N))for(var ae=0;ae<B;++ae){if(Y=parseInt(v["number-columns-repeated"]||"1",10),r.dense)for(m[N+ae]||(m[N+ae]=[]),m[N+ae][S]=ae==0?x:La(x);--Y>0;)m[N+ae][S+Y]=La(x);else for(m[Wr({r:N+ae,c:S})]=x;--Y>0;)m[Wr({r:N+ae,c:S+Y})]=La(x);j.e.c<=S&&(j.e.c=S)}Y=parseInt(v["number-columns-repeated"]||"1",10),S+=Y-1,Y=0,x={},b="",y=[]}U={};break;case"document":case"document-content":case"":case"spreadsheet":case"":case"scripts":case"styles":case"font-face-decls":case"master-styles":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!0]);break;case"annotation":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i;E.t=b,y.length&&(E.R=y),E.a=R,W.push(E)}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);R="",q=0,b="",w=0,y=[];break;case"creator":g[1]==="/"?R=n.slice(q,g.index):q=g.index+g[0].length;break;case"meta":case"":case"settings":case"config-item-set":case"config-item-map-indexed":case"config-item-map-entry":case"config-item-map-named":case"shapes":case"frame":case"text-box":case"image":case"data-pilot-tables":case"list-style":case"form":case"dde-links":case"event-listeners":case"chart":if(g[1]==="/"){if((i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&s.push([g[3],!1]);b="",w=0,y=[];break;case"scientific-number":break;case"currency-symbol":break;case"currency-style":break;case"number-style":case"percentage-style":case"date-style":case"time-style":if(g[1]==="/"){if(T[l.name]=c,(i=s.pop())[0]!==g[3])throw"Bad state: "+i}else g[0].charAt(g[0].length-2)!=="/"&&(c="",l=Vr(g[0],!1),s.push([g[3],!0]));break;case"script":break;case"libraries":break;case"automatic-styles":break;case"default-style":case"page-layout":break;case"style":break;case"map":break;case"font-face":break;case"paragraph-properties":break;case"table-properties":break;case"table-column-properties":break;case"table-row-properties":break;case"table-cell-properties":break;case"number":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Vr(g[0],!1),c+=B8[g[3]][o.style==="long"?1:0];break}break;case"fraction":break;case"day":case"month":case"year":case"era":case"day-of-week":case"week-of-year":case"quarter":case"hours":case"minutes":case"seconds":case"am-pm":switch(s[s.length-1][0]){case"time-style":case"date-style":o=Vr(g[0],!1),c+=B8[g[3]][o.style==="long"?1:0];break}break;case"boolean-style":break;case"boolean":break;case"text-style":break;case"text":if(g[0].slice(-2)==="/>")break;if(g[1]==="/")switch(s[s.length-1][0]){case"number-style":case"date-style":case"time-style":c+=n.slice(d,g.index);break}else d=g.index+g[0].length;break;case"named-range":o=Vr(g[0],!1),X=f4(o["cell-range-address"]);var Z={Name:o.name,Ref:X[0]+"!"+X[1]};H&&(Z.Sheet=h.length),J.Names.push(Z);break;case"text-content":break;case"text-properties":break;case"embedded-text":break;case"body":case"":break;case"forms":break;case"table-column":break;case"table-header-rows":break;case"table-rows":break;case"table-column-group":break;case"table-header-columns":break;case"table-columns":break;case"null-date":break;case"graphic-properties":break;case"calculation-settings":break;case"named-expressions":break;case"label-range":break;case"label-ranges":break;case"named-expression":break;case"sort":break;case"sort-by":break;case"sort-groups":break;case"tab":break;case"line-break":break;case"span":break;case"p":case"":if(["master-styles"].indexOf(s[s.length-1][0])>-1)break;if(g[1]==="/"&&(!v||!v["string-value"])){var ve=wAe(n.slice(w,g.index));b=(b.length>0?b+`
`:"")+ve[0]}else Vr(g[0],!1),w=g.index+g[0].length;break;case"s":break;case"database-range":if(g[1]==="/")break;try{X=f4(Vr(g[0])["target-range-address"]),p[X[0]]["!autofilter"]={ref:X[1]}}catch{}break;case"date":break;case"object":break;case"title":case"":break;case"desc":break;case"binary-data":break;case"table-source":break;case"scenario":break;case"iteration":break;case"content-validations":break;case"content-validation":break;case"help-message":break;case"error-message":break;case"database-ranges":break;case"filter":break;case"filter-and":break;case"filter-or":break;case"filter-condition":break;case"list-level-style-bullet":break;case"list-level-style-number":break;case"list-level-properties":break;case"sender-firstname":case"sender-lastname":case"sender-initials":case"sender-title":case"sender-position":case"sender-email":case"sender-phone-private":case"sender-fax":case"sender-company":case"sender-phone-work":case"sender-street":case"sender-city":case"sender-postal-code":case"sender-country":case"sender-state-or-province":case"author-name":case"author-initials":case"chapter":case"file-name":case"template-name":case"sheet-name":break;case"event-listener":break;case"initial-creator":case"creation-date":case"print-date":case"generator":case"document-statistic":case"user-defined":case"editing-duration":case"editing-cycles":break;case"config-item":break;case"page-number":break;case"page-count":break;case"time":break;case"cell-range-source":break;case"detective":break;case"operation":break;case"highlighted-range":break;case"data-pilot-table":case"source-cell-range":case"source-service":case"data-pilot-field":case"data-pilot-level":case"data-pilot-subtotals":case"data-pilot-subtotal":case"data-pilot-members":case"data-pilot-member":case"data-pilot-display-info":case"data-pilot-sort-info":case"data-pilot-layout-info":case"data-pilot-field-reference":case"data-pilot-groups":case"data-pilot-group":case"data-pilot-group-member":break;case"rect":break;case"dde-connection-decls":case"dde-connection-decl":case"dde-link":case"dde-source":break;case"properties":break;case"property":break;case"a":if(g[1]!=="/"){if(U=Vr(g[0],!1),!U.href)break;U.Target=Mn(U.href),delete U.href,U.Target.charAt(0)=="#"&&U.Target.indexOf(".")>-1?(X=f4(U.Target.slice(1)),U.Target="#"+X[0]+"!"+X[1]):U.Target.match(/^\.\.[\\\/]/)&&(U.Target=U.Target.slice(3))}break;case"table-protection":break;case"data-pilot-grand-total":break;case"office-document-common-attrs":break;default:switch(g[2]){case"dc:":case"calcext:":case"loext:":case"ooo:":case"chartooo:":case"draw:":case"style:":case"chart:":case"form:":case"uof:":case":":case":":break;default:if(r.WTF)throw new Error(g)}}var ne={Sheets:p,SheetNames:h,Workbook:J};return r.bookSheets&&delete ne.Sheets,ne}function $8(e,t){t=t||{},nc(e,"META-INF/manifest.xml")&&Kwe(Rs(e,"META-INF/manifest.xml"),t);var r=Ol(e,"content.xml");if(!r)throw new Error("Missing content.xml in ODS / UOF file");var n=hU(ua(r),t);return nc(e,"meta.xml")&&(n.Props=n$(Rs(e,"meta.xml"))),n}function U8(e,t){return hU(e,t)}var NAe=function(){var e=["<office:master-styles>",'<style:master-page style:name="mp1" style:page-layout-name="mp1">',"<style:header/>",'<style:header-left style:display="false"/>',"<style:footer/>",'<style:footer-left style:display="false"/>',"</style:master-page>","</office:master-styles>"].join(""),t="<office:document-styles "+O1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","office:version":"1.2"})+">"+e+"</office:document-styles>";return function(){return Es+t}}(),z8=function(){var e=function(i){return na(i).replace(/  +/g,function(o){return'<text:s text:c="'+o.length+'"/>'}).replace(/\t/g,"<text:tab/>").replace(/\n/g,"</text:p><text:p>").replace(/^ /,"<text:s/>").replace(/ $/,"<text:s/>")},t=`          <table:table-cell />
`,r=`          <table:covered-table-cell/>
`,n=function(i,o,l){var c=[];c.push('      <table:table table:name="'+na(o.SheetNames[l])+`" table:style-name="ta1">
`);var d=0,f=0,u=ol(i["!ref"]||"A1"),p=i["!merges"]||[],h=0,m=Array.isArray(i);if(i["!cols"])for(f=0;f<=u.e.c;++f)c.push("        <table:table-column"+(i["!cols"][f]?' table:style-name="co'+i["!cols"][f].ods+'"':"")+`></table:table-column>
`);var g="",x=i["!rows"]||[];for(d=0;d<u.s.r;++d)g=x[d]?' table:style-name="ro'+x[d].ods+'"':"",c.push("        <table:table-row"+g+`></table:table-row>
`);for(;d<=u.e.r;++d){for(g=x[d]?' table:style-name="ro'+x[d].ods+'"':"",c.push("        <table:table-row"+g+`>
`),f=0;f<u.s.c;++f)c.push(t);for(;f<=u.e.c;++f){var v=!1,b={},w="";for(h=0;h!=p.length;++h)if(!(p[h].s.c>f)&&!(p[h].s.r>d)&&!(p[h].e.c<f)&&!(p[h].e.r<d)){(p[h].s.c!=f||p[h].s.r!=d)&&(v=!0),b["table:number-columns-spanned"]=p[h].e.c-p[h].s.c+1,b["table:number-rows-spanned"]=p[h].e.r-p[h].s.r+1;break}if(v){c.push(r);continue}var y=Wr({r:d,c:f}),N=m?(i[d]||[])[f]:i[y];if(N&&N.f&&(b["table:formula"]=na(z3e(N.f)),N.F&&N.F.slice(0,y.length)==y)){var S=ol(N.F);b["table:number-matrix-columns-spanned"]=S.e.c-S.s.c+1,b["table:number-matrix-rows-spanned"]=S.e.r-S.s.r+1}if(!N){c.push(t);continue}switch(N.t){case"b":w=N.v?"TRUE":"FALSE",b["office:value-type"]="boolean",b["office:boolean-value"]=N.v?"true":"false";break;case"n":w=N.w||String(N.v||0),b["office:value-type"]="float",b["office:value"]=N.v||0;break;case"s":case"str":w=N.v==null?"":N.v,b["office:value-type"]="string";break;case"d":w=N.w||Da(N.v).toISOString(),b["office:value-type"]="date",b["office:date-value"]=Da(N.v).toISOString(),b["table:style-name"]="ce1";break;default:c.push(t);continue}var j=e(w);if(N.l&&N.l.Target){var _=N.l.Target;_=_.charAt(0)=="#"?"#"+q3e(_.slice(1)):_,_.charAt(0)!="#"&&!_.match(/^\w+:/)&&(_="../"+_),j=Zt("text:a",j,{"xlink:href":_.replace(/&/g,"&amp;")})}c.push("          "+Zt("table:table-cell",Zt("text:p",j,{}),b)+`
`)}c.push(`        </table:table-row>
`)}return c.push(`      </table:table>
`),c.join("")},s=function(i,o){i.push(` <office:automatic-styles>
`),i.push(`  <number:date-style style:name="N37" number:automatic-order="true">
`),i.push(`   <number:month number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:day number:style="long"/>
`),i.push(`   <number:text>/</number:text>
`),i.push(`   <number:year/>
`),i.push(`  </number:date-style>
`);var l=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!cols"]){for(var f=0;f<d["!cols"].length;++f)if(d["!cols"][f]){var u=d["!cols"][f];if(u.width==null&&u.wpx==null&&u.wch==null)continue;p0(u),u.ods=l;var p=d["!cols"][f].wpx+"px";i.push('  <style:style style:name="co'+l+`" style:family="table-column">
`),i.push('   <style:table-column-properties fo:break-before="auto" style:column-width="'+p+`"/>
`),i.push(`  </style:style>
`),++l}}});var c=0;o.SheetNames.map(function(d){return o.Sheets[d]}).forEach(function(d){if(d&&d["!rows"]){for(var f=0;f<d["!rows"].length;++f)if(d["!rows"][f]){d["!rows"][f].ods=c;var u=d["!rows"][f].hpx+"px";i.push('  <style:style style:name="ro'+c+`" style:family="table-row">
`),i.push('   <style:table-row-properties fo:break-before="auto" style:row-height="'+u+`"/>
`),i.push(`  </style:style>
`),++c}}}),i.push(`  <style:style style:name="ta1" style:family="table" style:master-page-name="mp1">
`),i.push(`   <style:table-properties table:display="true" style:writing-mode="lr-tb"/>
`),i.push(`  </style:style>
`),i.push(`  <style:style style:name="ce1" style:family="table-cell" style:parent-style-name="Default" style:data-style-name="N37"/>
`),i.push(` </office:automatic-styles>
`)};return function(o,l){var c=[Es],d=O1({"xmlns:office":"urn:oasis:names:tc:opendocument:xmlns:office:1.0","xmlns:table":"urn:oasis:names:tc:opendocument:xmlns:table:1.0","xmlns:style":"urn:oasis:names:tc:opendocument:xmlns:style:1.0","xmlns:text":"urn:oasis:names:tc:opendocument:xmlns:text:1.0","xmlns:draw":"urn:oasis:names:tc:opendocument:xmlns:drawing:1.0","xmlns:fo":"urn:oasis:names:tc:opendocument:xmlns:xsl-fo-compatible:1.0","xmlns:xlink":"http://www.w3.org/1999/xlink","xmlns:dc":"http://purl.org/dc/elements/1.1/","xmlns:meta":"urn:oasis:names:tc:opendocument:xmlns:meta:1.0","xmlns:number":"urn:oasis:names:tc:opendocument:xmlns:datastyle:1.0","xmlns:presentation":"urn:oasis:names:tc:opendocument:xmlns:presentation:1.0","xmlns:svg":"urn:oasis:names:tc:opendocument:xmlns:svg-compatible:1.0","xmlns:chart":"urn:oasis:names:tc:opendocument:xmlns:chart:1.0","xmlns:dr3d":"urn:oasis:names:tc:opendocument:xmlns:dr3d:1.0","xmlns:math":"http://www.w3.org/1998/Math/MathML","xmlns:form":"urn:oasis:names:tc:opendocument:xmlns:form:1.0","xmlns:script":"urn:oasis:names:tc:opendocument:xmlns:script:1.0","xmlns:ooo":"http://openoffice.org/2004/office","xmlns:ooow":"http://openoffice.org/2004/writer","xmlns:oooc":"http://openoffice.org/2004/calc","xmlns:dom":"http://www.w3.org/2001/xml-events","xmlns:xforms":"http://www.w3.org/2002/xforms","xmlns:xsd":"http://www.w3.org/2001/XMLSchema","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xmlns:sheet":"urn:oasis:names:tc:opendocument:sh33tjs:1.0","xmlns:rpt":"http://openoffice.org/2005/report","xmlns:of":"urn:oasis:names:tc:opendocument:xmlns:of:1.2","xmlns:xhtml":"http://www.w3.org/1999/xhtml","xmlns:grddl":"http://www.w3.org/2003/g/data-view#","xmlns:tableooo":"http://openoffice.org/2009/table","xmlns:drawooo":"http://openoffice.org/2010/draw","xmlns:calcext":"urn:org:documentfoundation:names:experimental:calc:xmlns:calcext:1.0","xmlns:loext":"urn:org:documentfoundation:names:experimental:office:xmlns:loext:1.0","xmlns:field":"urn:openoffice:names:experimental:ooo-ms-interop:xmlns:field:1.0","xmlns:formx":"urn:openoffice:names:experimental:ooxml-odf-interop:xmlns:form:1.0","xmlns:css3t":"http://www.w3.org/TR/css3-text/","office:version":"1.2"}),f=O1({"xmlns:config":"urn:oasis:names:tc:opendocument:xmlns:config:1.0","office:mimetype":"application/vnd.oasis.opendocument.spreadsheet"});l.bookType=="fods"?(c.push("<office:document"+d+f+`>
`),c.push(r$().replace(/office:document-meta/g,"office:meta"))):c.push("<office:document-content"+d+`>
`),s(c,o),c.push(`  <office:body>
`),c.push(`    <office:spreadsheet>
`);for(var u=0;u!=o.SheetNames.length;++u)c.push(n(o.Sheets[o.SheetNames[u]],o,u));return c.push(`    </office:spreadsheet>
`),c.push(`  </office:body>
`),l.bookType=="fods"?c.push("</office:document>"):c.push("</office:document-content>"),c.join("")}}();function pU(e,t){if(t.bookType=="fods")return z8(e,t);var r=lA(),n="",s=[],i=[];return n="mimetype",ln(r,n,"application/vnd.oasis.opendocument.spreadsheet"),n="content.xml",ln(r,n,z8(e,t)),s.push([n,"text/xml"]),i.push([n,"ContentFile"]),n="styles.xml",ln(r,n,NAe(e,t)),s.push([n,"text/xml"]),i.push([n,"StylesFile"]),n="meta.xml",ln(r,n,Es+r$()),s.push([n,"text/xml"]),i.push([n,"MetadataFile"]),n="manifest.rdf",ln(r,n,Qwe(i)),s.push([n,"application/rdf+xml"]),n="META-INF/manifest.xml",ln(r,n,Xwe(s)),r}/*! sheetjs (C) 2013-present SheetJS -- http://sheetjs.com */function ap(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)}function CS(e){return typeof TextDecoder<"u"?new TextDecoder().decode(e):ua(E0(e))}function jAe(e){return typeof TextEncoder<"u"?new TextEncoder().encode(e):Tl($d(e))}function kAe(e,t){e:for(var r=0;r<=e.length-t.length;++r){for(var n=0;n<t.length;++n)if(e[r+n]!=t[n])continue e;return!0}return!1}function x0(e){var t=e.reduce(function(s,i){return s+i.length},0),r=new Uint8Array(t),n=0;return e.forEach(function(s){r.set(s,n),n+=s.length}),r}function q8(e){return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>>24}function SAe(e,t){for(var r=(e[t+15]&127)<<7|e[t+14]>>1,n=e[t+14]&1,s=t+13;s>=t;--s)n=n*256+e[s];return(e[t+15]&128?-n:n)*Math.pow(10,r-6176)}function _Ae(e,t,r){var n=Math.floor(r==0?0:Math.LOG10E*Math.log(Math.abs(r)))+6176-20,s=r/Math.pow(10,n-6176);e[t+15]|=n>>7,e[t+14]|=(n&127)<<1;for(var i=0;s>=1;++i,s/=256)e[t+i]=s&255;e[t+15]|=r>=0?0:128}function B1(e,t){var r=t?t[0]:0,n=e[r]&127;e:if(e[r++]>=128&&(n|=(e[r]&127)<<7,e[r++]<128||(n|=(e[r]&127)<<14,e[r++]<128)||(n|=(e[r]&127)<<21,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,28),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,35),++r,e[r++]<128)||(n+=(e[r]&127)*Math.pow(2,42),++r,e[r++]<128)))break e;return t&&(t[0]=r),n}function ea(e){var t=new Uint8Array(7);t[0]=e&127;var r=1;e:if(e>127){if(t[r-1]|=128,t[r]=e>>7&127,++r,e<=16383||(t[r-1]|=128,t[r]=e>>14&127,++r,e<=2097151)||(t[r-1]|=128,t[r]=e>>21&127,++r,e<=268435455)||(t[r-1]|=128,t[r]=e/256>>>21&127,++r,e<=34359738367)||(t[r-1]|=128,t[r]=e/65536>>>21&127,++r,e<=4398046511103))break e;t[r-1]|=128,t[r]=e/16777216>>>21&127,++r}return t.slice(0,r)}function ms(e){var t=0,r=e[t]&127;e:if(e[t++]>=128){if(r|=(e[t]&127)<<7,e[t++]<128||(r|=(e[t]&127)<<14,e[t++]<128)||(r|=(e[t]&127)<<21,e[t++]<128))break e;r|=(e[t]&127)<<28}return r}function qn(e){for(var t=[],r=[0];r[0]<e.length;){var n=r[0],s=B1(e,r),i=s&7;s=Math.floor(s/8);var o=0,l;if(s==0)break;switch(i){case 0:{for(var c=r[0];e[r[0]++]>=128;);l=e.slice(c,r[0])}break;case 5:o=4,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 1:o=8,l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 2:o=B1(e,r),l=e.slice(r[0],r[0]+o),r[0]+=o;break;case 3:case 4:default:throw new Error("PB Type ".concat(i," for Field ").concat(s," at offset ").concat(n))}var d={data:l,type:i};t[s]==null?t[s]=[d]:t[s].push(d)}return t}function Ci(e){var t=[];return e.forEach(function(r,n){r.forEach(function(s){s.data&&(t.push(ea(n*8+s.type)),s.type==2&&t.push(ea(s.data.length)),t.push(s.data))})}),x0(t)}function LA(e,t){return(e==null?void 0:e.map(function(r){return t(r.data)}))||[]}function tc(e){for(var t,r=[],n=[0];n[0]<e.length;){var s=B1(e,n),i=qn(e.slice(n[0],n[0]+s));n[0]+=s;var o={id:ms(i[1][0].data),messages:[]};i[2].forEach(function(l){var c=qn(l.data),d=ms(c[3][0].data);o.messages.push({meta:c,data:e.slice(n[0],n[0]+d)}),n[0]+=d}),(t=i[3])!=null&&t[0]&&(o.merge=ms(i[3][0].data)>>>0>0),r.push(o)}return r}function Kp(e){var t=[];return e.forEach(function(r){var n=[];n[1]=[{data:ea(r.id),type:0}],n[2]=[],r.merge!=null&&(n[3]=[{data:ea(+!!r.merge),type:0}]);var s=[];r.messages.forEach(function(o){s.push(o.data),o.meta[3]=[{type:0,data:ea(o.data.length)}],n[2].push({data:Ci(o.meta),type:2})});var i=Ci(n);t.push(ea(i.length)),t.push(i),s.forEach(function(o){return t.push(o)})}),x0(t)}function AAe(e,t){if(e!=0)throw new Error("Unexpected Snappy chunk type ".concat(e));for(var r=[0],n=B1(t,r),s=[];r[0]<t.length;){var i=t[r[0]]&3;if(i==0){var o=t[r[0]++]>>2;if(o<60)++o;else{var l=o-59;o=t[r[0]],l>1&&(o|=t[r[0]+1]<<8),l>2&&(o|=t[r[0]+2]<<16),l>3&&(o|=t[r[0]+3]<<24),o>>>=0,o++,r[0]+=l}s.push(t.slice(r[0],r[0]+o)),r[0]+=o;continue}else{var c=0,d=0;if(i==1?(d=(t[r[0]]>>2&7)+4,c=(t[r[0]++]&224)<<3,c|=t[r[0]++]):(d=(t[r[0]++]>>2)+1,i==2?(c=t[r[0]]|t[r[0]+1]<<8,r[0]+=2):(c=(t[r[0]]|t[r[0]+1]<<8|t[r[0]+2]<<16|t[r[0]+3]<<24)>>>0,r[0]+=4)),s=[x0(s)],c==0)throw new Error("Invalid offset 0");if(c>s[0].length)throw new Error("Invalid offset beyond length");if(d>=c)for(s.push(s[0].slice(-c)),d-=c;d>=s[s.length-1].length;)s.push(s[s.length-1]),d-=s[s.length-1].length;s.push(s[0].slice(-c,-c+d))}}var f=x0(s);if(f.length!=n)throw new Error("Unexpected length: ".concat(f.length," != ").concat(n));return f}function rc(e){for(var t=[],r=0;r<e.length;){var n=e[r++],s=e[r]|e[r+1]<<8|e[r+2]<<16;r+=3,t.push(AAe(n,e.slice(r,r+s))),r+=s}if(r!==e.length)throw new Error("data is not a valid framed stream!");return x0(t)}function Xp(e){for(var t=[],r=0;r<e.length;){var n=Math.min(e.length-r,268435455),s=new Uint8Array(4);t.push(s);var i=ea(n),o=i.length;t.push(i),n<=60?(o++,t.push(new Uint8Array([n-1<<2]))):n<=256?(o+=2,t.push(new Uint8Array([240,n-1&255]))):n<=65536?(o+=3,t.push(new Uint8Array([244,n-1&255,n-1>>8&255]))):n<=16777216?(o+=4,t.push(new Uint8Array([248,n-1&255,n-1>>8&255,n-1>>16&255]))):n<=4294967296&&(o+=5,t.push(new Uint8Array([252,n-1&255,n-1>>8&255,n-1>>16&255,n-1>>>24&255]))),t.push(e.slice(r,r+n)),o+=n,s[0]=0,s[1]=o&255,s[2]=o>>8&255,s[3]=o>>16&255,r+=n}return x0(t)}function CAe(e,t,r,n){var s=ap(e),i=s.getUint32(4,!0),o=(n>1?12:8)+q8(i&(n>1?3470:398))*4,l=-1,c=-1,d=NaN,f=new Date(2001,0,1);i&512&&(l=s.getUint32(o,!0),o+=4),o+=q8(i&(n>1?12288:4096))*4,i&16&&(c=s.getUint32(o,!0),o+=4),i&32&&(d=s.getFloat64(o,!0),o+=8),i&64&&(f.setTime(f.getTime()+s.getFloat64(o,!0)*1e3),o+=8);var u;switch(e[2]){case 0:break;case 2:u={t:"n",v:d};break;case 3:u={t:"s",v:t[c]};break;case 5:u={t:"d",v:f};break;case 6:u={t:"b",v:d>0};break;case 7:u={t:"n",v:d/86400};break;case 8:u={t:"e",v:0};break;case 9:if(l>-1)u={t:"s",v:r[l]};else if(c>-1)u={t:"s",v:t[c]};else if(!isNaN(d))u={t:"n",v:d};else throw new Error("Unsupported cell type ".concat(e.slice(0,4)));break;default:throw new Error("Unsupported cell type ".concat(e.slice(0,4)))}return u}function EAe(e,t,r){var n=ap(e),s=n.getUint32(8,!0),i=12,o=-1,l=-1,c=NaN,d=NaN,f=new Date(2001,0,1);s&1&&(c=SAe(e,i),i+=16),s&2&&(d=n.getFloat64(i,!0),i+=8),s&4&&(f.setTime(f.getTime()+n.getFloat64(i,!0)*1e3),i+=8),s&8&&(l=n.getUint32(i,!0),i+=4),s&16&&(o=n.getUint32(i,!0),i+=4);var u;switch(e[1]){case 0:break;case 2:u={t:"n",v:c};break;case 3:u={t:"s",v:t[l]};break;case 5:u={t:"d",v:f};break;case 6:u={t:"b",v:d>0};break;case 7:u={t:"n",v:d/86400};break;case 8:u={t:"e",v:0};break;case 9:if(o>-1)u={t:"s",v:r[o]};else throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)));break;case 10:u={t:"n",v:c};break;default:throw new Error("Unsupported cell type ".concat(e[1]," : ").concat(s&31," : ").concat(e.slice(0,4)))}return u}function p4(e,t){var r=new Uint8Array(32),n=ap(r),s=12,i=0;switch(r[0]=5,e.t){case"n":r[1]=2,_Ae(r,s,e.v),i|=1,s+=16;break;case"b":r[1]=6,n.setFloat64(s,e.v?1:0,!0),i|=2,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[1]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=8,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(8,i,!0),r.slice(0,s)}function m4(e,t){var r=new Uint8Array(32),n=ap(r),s=12,i=0;switch(r[0]=3,e.t){case"n":r[2]=2,n.setFloat64(s,e.v,!0),i|=32,s+=8;break;case"b":r[2]=6,n.setFloat64(s,e.v?1:0,!0),i|=32,s+=8;break;case"s":if(t.indexOf(e.v)==-1)throw new Error("Value ".concat(e.v," missing from SST!"));r[2]=3,n.setUint32(s,t.indexOf(e.v),!0),i|=16,s+=4;break;default:throw"unsupported cell type "+e.t}return n.setUint32(4,i,!0),r.slice(0,s)}function TAe(e,t,r){switch(e[0]){case 0:case 1:case 2:case 3:return CAe(e,t,r,e[0]);case 5:return EAe(e,t,r);default:throw new Error("Unsupported payload version ".concat(e[0]))}}function to(e){var t=qn(e);return B1(t[1][0].data)}function H8(e,t){var r=qn(t.data),n=ms(r[1][0].data),s=r[3],i=[];return(s||[]).forEach(function(o){var l=qn(o.data),c=ms(l[1][0].data)>>>0;switch(n){case 1:i[c]=CS(l[3][0].data);break;case 8:{var d=e[to(l[9][0].data)][0],f=qn(d.data),u=e[to(f[1][0].data)][0],p=ms(u.meta[1][0].data);if(p!=2001)throw new Error("2000 unexpected reference to ".concat(p));var h=qn(u.data);i[c]=h[3].map(function(m){return CS(m.data)}).join("")}break}}),i}function OAe(e,t){var r,n,s,i,o,l,c,d,f,u,p,h,m,g,x=qn(e),v=ms(x[1][0].data)>>>0,b=ms(x[2][0].data)>>>0,w=((n=(r=x[8])==null?void 0:r[0])==null?void 0:n.data)&&ms(x[8][0].data)>0||!1,y,N;if((i=(s=x[7])==null?void 0:s[0])!=null&&i.data&&t!=0)y=(l=(o=x[7])==null?void 0:o[0])==null?void 0:l.data,N=(d=(c=x[6])==null?void 0:c[0])==null?void 0:d.data;else if((u=(f=x[4])==null?void 0:f[0])!=null&&u.data&&t!=1)y=(h=(p=x[4])==null?void 0:p[0])==null?void 0:h.data,N=(g=(m=x[3])==null?void 0:m[0])==null?void 0:g.data;else throw"NUMBERS Tile missing ".concat(t," cell storage");for(var S=w?4:1,j=ap(y),_=[],T=0;T<y.length/2;++T){var D=j.getUint16(T*2,!0);D<65535&&_.push([T,D])}if(_.length!=b)throw"Expected ".concat(b," cells, found ").concat(_.length);var A=[];for(T=0;T<_.length-1;++T)A[_[T][0]]=N.subarray(_[T][1]*S,_[T+1][1]*S);return _.length>=1&&(A[_[_.length-1][0]]=N.subarray(_[_.length-1][1]*S)),{R:v,cells:A}}function PAe(e,t){var r,n=qn(t.data),s=(r=n==null?void 0:n[7])!=null&&r[0]?ms(n[7][0].data)>>>0>0?1:0:-1,i=LA(n[5],function(o){return OAe(o,s)});return{nrows:ms(n[4][0].data)>>>0,data:i.reduce(function(o,l){return o[l.R]||(o[l.R]=[]),l.cells.forEach(function(c,d){if(o[l.R][d])throw new Error("Duplicate cell r=".concat(l.R," c=").concat(d));o[l.R][d]=c}),o},[])}}function IAe(e,t,r){var n,s=qn(t.data),i={s:{r:0,c:0},e:{r:0,c:0}};if(i.e.r=(ms(s[6][0].data)>>>0)-1,i.e.r<0)throw new Error("Invalid row varint ".concat(s[6][0].data));if(i.e.c=(ms(s[7][0].data)>>>0)-1,i.e.c<0)throw new Error("Invalid col varint ".concat(s[7][0].data));r["!ref"]=an(i);var o=qn(s[4][0].data),l=H8(e,e[to(o[4][0].data)][0]),c=(n=o[17])!=null&&n[0]?H8(e,e[to(o[17][0].data)][0]):[],d=qn(o[3][0].data),f=0;d[1].forEach(function(u){var p=qn(u.data),h=e[to(p[2][0].data)][0],m=ms(h.meta[1][0].data);if(m!=6002)throw new Error("6001 unexpected reference to ".concat(m));var g=PAe(e,h);g.data.forEach(function(x,v){x.forEach(function(b,w){var y=Wr({r:f+v,c:w}),N=TAe(b,l,c);N&&(r[y]=N)})}),f+=g.nrows})}function DAe(e,t){var r=qn(t.data),n={"!ref":"A1"},s=e[to(r[2][0].data)],i=ms(s[0].meta[1][0].data);if(i!=6001)throw new Error("6000 unexpected reference to ".concat(i));return IAe(e,s[0],n),n}function LAe(e,t){var r,n=qn(t.data),s={name:(r=n[1])!=null&&r[0]?CS(n[1][0].data):"",sheets:[]},i=LA(n[2],to);return i.forEach(function(o){e[o].forEach(function(l){var c=ms(l.meta[1][0].data);c==6e3&&s.sheets.push(DAe(e,l))})}),s}function FAe(e,t){var r=$A(),n=qn(t.data),s=LA(n[1],to);if(s.forEach(function(i){e[i].forEach(function(o){var l=ms(o.meta[1][0].data);if(l==2){var c=LAe(e,o);c.sheets.forEach(function(d,f){UA(r,d,f==0?c.name:c.name+"_"+f,!0)})}})}),r.SheetNames.length==0)throw new Error("Empty NUMBERS file");return r}function x4(e){var t,r,n,s,i={},o=[];if(e.FullPaths.forEach(function(c){if(c.match(/\.iwpv2/))throw new Error("Unsupported password protection")}),e.FileIndex.forEach(function(c){if(c.name.match(/\.iwa$/)){var d;try{d=rc(c.content)}catch(u){return console.log("?? "+c.content.length+" "+(u.message||u))}var f;try{f=tc(d)}catch(u){return console.log("## "+(u.message||u))}f.forEach(function(u){i[u.id]=u.messages,o.push(u.id)})}}),!o.length)throw new Error("File has no messages");var l=((s=(n=(r=(t=i==null?void 0:i[1])==null?void 0:t[0])==null?void 0:r.meta)==null?void 0:n[1])==null?void 0:s[0].data)&&ms(i[1][0].meta[1][0].data)==1&&i[1][0];if(l||o.forEach(function(c){i[c].forEach(function(d){var f=ms(d.meta[1][0].data)>>>0;if(f==1)if(!l)l=d;else throw new Error("Document has multiple roots")})}),!l)throw new Error("Cannot find Document root");return FAe(i,l)}function MAe(e,t,r){var n,s,i,o;if(!((n=e[6])!=null&&n[0])||!((s=e[7])!=null&&s[0]))throw"Mutation only works on post-BNC storages!";var l=((o=(i=e[8])==null?void 0:i[0])==null?void 0:o.data)&&ms(e[8][0].data)>0||!1;if(l)throw"Math only works with normal offsets";for(var c=0,d=ap(e[7][0].data),f=0,u=[],p=ap(e[4][0].data),h=0,m=[],g=0;g<t.length;++g){if(t[g]==null){d.setUint16(g*2,65535,!0),p.setUint16(g*2,65535);continue}d.setUint16(g*2,f,!0),p.setUint16(g*2,h,!0);var x,v;switch(typeof t[g]){case"string":x=p4({t:"s",v:t[g]},r),v=m4({t:"s",v:t[g]},r);break;case"number":x=p4({t:"n",v:t[g]},r),v=m4({t:"n",v:t[g]},r);break;case"boolean":x=p4({t:"b",v:t[g]},r),v=m4({t:"b",v:t[g]},r);break;default:throw new Error("Unsupported value "+t[g])}u.push(x),f+=x.length,m.push(v),h+=v.length,++c}for(e[2][0].data=ea(c);g<e[7][0].data.length/2;++g)d.setUint16(g*2,65535,!0),p.setUint16(g*2,65535,!0);return e[6][0].data=x0(u),e[3][0].data=x0(m),c}function RAe(e,t){if(!t||!t.numbers)throw new Error("Must pass a `numbers` option -- check the README");var r=e.Sheets[e.SheetNames[0]];e.SheetNames.length>1&&console.error("The Numbers writer currently writes only the first table");var n=ol(r["!ref"]);n.s.r=n.s.c=0;var s=!1;n.e.c>9&&(s=!0,n.e.c=9),n.e.r>49&&(s=!0,n.e.r=49),s&&console.error("The Numbers writer is currently limited to ".concat(an(n)));var i=u5(r,{range:n,header:1}),o=["~Sh33tJ5~"];i.forEach(function(R){return R.forEach(function(q){typeof q=="string"&&o.push(q)})});var l={},c=[],d=Or.read(t.numbers,{type:"base64"});d.FileIndex.map(function(R,q){return[R,d.FullPaths[q]]}).forEach(function(R){var q=R[0],L=R[1];if(q.type==2&&q.name.match(/\.iwa/)){var H=q.content,se=rc(H),ce=tc(se);ce.forEach(function(ae){c.push(ae.id),l[ae.id]={deps:[],location:L,type:ms(ae.messages[0].meta[1][0].data)}})}}),c.sort(function(R,q){return R-q});var f=c.filter(function(R){return R>1}).map(function(R){return[R,ea(R)]});d.FileIndex.map(function(R,q){return[R,d.FullPaths[q]]}).forEach(function(R){var q=R[0];if(R[1],!!q.name.match(/\.iwa/)){var L=tc(rc(q.content));L.forEach(function(H){H.messages.forEach(function(se){f.forEach(function(ce){H.messages.some(function(ae){return ms(ae.meta[1][0].data)!=11006&&kAe(ae.data,ce[1])})&&l[ce[0]].deps.push(H.id)})})})}});for(var u=Or.find(d,l[1].location),p=tc(rc(u.content)),h,m=0;m<p.length;++m){var g=p[m];g.id==1&&(h=g)}var x=to(qn(h.messages[0].data)[1][0].data);for(u=Or.find(d,l[x].location),p=tc(rc(u.content)),m=0;m<p.length;++m)g=p[m],g.id==x&&(h=g);for(x=to(qn(h.messages[0].data)[2][0].data),u=Or.find(d,l[x].location),p=tc(rc(u.content)),m=0;m<p.length;++m)g=p[m],g.id==x&&(h=g);for(x=to(qn(h.messages[0].data)[2][0].data),u=Or.find(d,l[x].location),p=tc(rc(u.content)),m=0;m<p.length;++m)g=p[m],g.id==x&&(h=g);var v=qn(h.messages[0].data);{v[6][0].data=ea(n.e.r+1),v[7][0].data=ea(n.e.c+1);var b=to(v[46][0].data),w=Or.find(d,l[b].location),y=tc(rc(w.content));{for(var N=0;N<y.length&&y[N].id!=b;++N);if(y[N].id!=b)throw"Bad ColumnRowUIDMapArchive";var S=qn(y[N].messages[0].data);S[1]=[],S[2]=[],S[3]=[];for(var j=0;j<=n.e.c;++j){var _=[];_[1]=_[2]=[{type:0,data:ea(j+420690)}],S[1].push({type:2,data:Ci(_)}),S[2].push({type:0,data:ea(j)}),S[3].push({type:0,data:ea(j)})}S[4]=[],S[5]=[],S[6]=[];for(var T=0;T<=n.e.r;++T)_=[],_[1]=_[2]=[{type:0,data:ea(T+726270)}],S[4].push({type:2,data:Ci(_)}),S[5].push({type:0,data:ea(T)}),S[6].push({type:0,data:ea(T)});y[N].messages[0].data=Ci(S)}w.content=Xp(Kp(y)),w.size=w.content.length,delete v[46];var D=qn(v[4][0].data);{D[7][0].data=ea(n.e.r+1);var A=qn(D[1][0].data),C=to(A[2][0].data);w=Or.find(d,l[C].location),y=tc(rc(w.content));{if(y[0].id!=C)throw"Bad HeaderStorageBucket";var M=qn(y[0].messages[0].data);for(T=0;T<i.length;++T){var F=qn(M[2][0].data);F[1][0].data=ea(T),F[4][0].data=ea(i[T].length),M[2][T]={type:M[2][0].type,data:Ci(F)}}y[0].messages[0].data=Ci(M)}w.content=Xp(Kp(y)),w.size=w.content.length;var B=to(D[2][0].data);w=Or.find(d,l[B].location),y=tc(rc(w.content));{if(y[0].id!=B)throw"Bad HeaderStorageBucket";for(M=qn(y[0].messages[0].data),j=0;j<=n.e.c;++j)F=qn(M[2][0].data),F[1][0].data=ea(j),F[4][0].data=ea(n.e.r+1),M[2][j]={type:M[2][0].type,data:Ci(F)};y[0].messages[0].data=Ci(M)}w.content=Xp(Kp(y)),w.size=w.content.length;var Y=to(D[4][0].data);(function(){for(var R=Or.find(d,l[Y].location),q=tc(rc(R.content)),L,H=0;H<q.length;++H){var se=q[H];se.id==Y&&(L=se)}var ce=qn(L.messages[0].data);{ce[3]=[];var ae=[];o.forEach(function(ne,He){ae[1]=[{type:0,data:ea(He)}],ae[2]=[{type:0,data:ea(1)}],ae[3]=[{type:2,data:jAe(ne)}],ce[3].push({type:2,data:Ci(ae)})})}L.messages[0].data=Ci(ce);var Z=Kp(q),ve=Xp(Z);R.content=ve,R.size=R.content.length})();var V=qn(D[3][0].data);{var J=V[1][0];delete V[2];var U=qn(J.data);{var X=to(U[2][0].data);(function(){for(var R=Or.find(d,l[X].location),q=tc(rc(R.content)),L,H=0;H<q.length;++H){var se=q[H];se.id==X&&(L=se)}var ce=qn(L.messages[0].data);{delete ce[6],delete V[7];var ae=new Uint8Array(ce[5][0].data);ce[5]=[];for(var Z=0,ve=0;ve<=n.e.r;++ve){var ne=qn(ae);Z+=MAe(ne,i[ve],o),ne[1][0].data=ea(ve),ce[5].push({data:Ci(ne),type:2})}ce[1]=[{type:0,data:ea(n.e.c+1)}],ce[2]=[{type:0,data:ea(n.e.r+1)}],ce[3]=[{type:0,data:ea(Z)}],ce[4]=[{type:0,data:ea(n.e.r+1)}]}L.messages[0].data=Ci(ce);var He=Kp(q),Xe=Xp(He);R.content=Xe,R.size=R.content.length})()}J.data=Ci(U)}D[3][0].data=Ci(V)}v[4][0].data=Ci(D)}h.messages[0].data=Ci(v);var W=Kp(p),E=Xp(W);return u.content=E,u.size=u.content.length,d}function mU(e){return function(r){for(var n=0;n!=e.length;++n){var s=e[n];r[s[0]]===void 0&&(r[s[0]]=s[1]),s[2]==="n"&&(r[s[0]]=Number(r[s[0]]))}}}function FA(e){mU([["cellNF",!1],["cellHTML",!0],["cellFormula",!0],["cellStyles",!1],["cellText",!0],["cellDates",!1],["sheetStubs",!1],["sheetRows",0,"n"],["bookDeps",!1],["bookSheets",!1],["bookProps",!1],["bookFiles",!1],["bookVBA",!1],["password",""],["WTF",!1]])(e)}function MA(e){mU([["cellDates",!1],["bookSST",!1],["bookType","xlsx"],["compression",!1],["WTF",!1]])(e)}function BAe(e){return bn.WS.indexOf(e)>-1?"sheet":e==bn.CS?"chart":e==bn.DS?"dialog":e==bn.MS?"macro":e&&e.length?e:"sheet"}function $Ae(e,t){if(!e)return 0;try{e=t.map(function(n){return n.id||(n.id=n.strRelID),[n.name,e["!id"][n.id].Target,BAe(e["!id"][n.id].Type)]})}catch{return null}return!e||e.length===0?null:e}function UAe(e,t,r,n,s,i,o,l,c,d,f,u){try{i[n]=bv(Ol(e,r,!0),t);var p=Rs(e,t),h;switch(l){case"sheet":h=c6e(p,t,s,c,i[n],d,f,u);break;case"chart":if(h=d6e(p,t,s,c,i[n],d,f,u),!h||!h["!drawel"])break;var m=Jg(h["!drawel"].Target,t),g=I1(m),x=Y4e(Ol(e,m,!0),bv(Ol(e,g,!0),m)),v=Jg(x,m),b=I1(v);h=M_e(Ol(e,v,!0),v,c,bv(Ol(e,b,!0),v),d,h);break;case"macro":h=u6e(p,t,s,c,i[n],d,f,u);break;case"dialog":h=f6e(p,t,s,c,i[n],d,f,u);break;default:throw new Error("Unrecognized sheet type "+l)}o[n]=h;var w=[];i&&i[n]&&xs(i[n]).forEach(function(y){var N="";if(i[n][y].Type==bn.CMNT){N=Jg(i[n][y].Target,t);var S=x6e(Rs(e,N,!0),N,c);if(!S||!S.length)return;E8(h,S,!1)}i[n][y].Type==bn.TCMNT&&(N=Jg(i[n][y].Target,t),w=w.concat(J4e(Rs(e,N,!0),c)))}),w&&w.length&&E8(h,w,!0,c.people||[])}catch(y){if(c.WTF)throw y}}function Jl(e){return e.charAt(0)=="/"?e.slice(1):e}function zAe(e,t){if(Kx(),t=t||{},FA(t),nc(e,"META-INF/manifest.xml")||nc(e,"objectdata.xml"))return $8(e,t);if(nc(e,"Index/Document.iwa")){if(typeof Uint8Array>"u")throw new Error("NUMBERS file parsing requires Uint8Array support");if(typeof x4<"u"){if(e.FileIndex)return x4(e);var r=Or.utils.cfb_new();return YI(e).forEach(function(F){ln(r,F,Z2e(e,F))}),x4(r)}throw new Error("Unsupported NUMBERS file")}if(!nc(e,"[Content_Types].xml"))throw nc(e,"index.xml.gz")?new Error("Unsupported NUMBERS 08 file"):nc(e,"index.xml")?new Error("Unsupported NUMBERS 09 file"):new Error("Unsupported ZIP file");var n=YI(e),s=Vwe(Ol(e,"[Content_Types].xml")),i=!1,o,l;if(s.workbooks.length===0&&(l="xl/workbook.xml",Rs(e,l,!0)&&s.workbooks.push(l)),s.workbooks.length===0){if(l="xl/workbook.bin",!Rs(e,l,!0))throw new Error("Could not find workbook");s.workbooks.push(l),i=!0}s.workbooks[0].slice(-3)=="bin"&&(i=!0);var c={},d={};if(!t.bookSheets&&!t.bookProps){if(yv=[],s.sst)try{yv=m6e(Rs(e,Jl(s.sst)),s.sst,t)}catch(F){if(t.WTF)throw F}t.cellStyles&&s.themes.length&&(c=p6e(Ol(e,s.themes[0].replace(/^\//,""),!0)||"",s.themes[0],t)),s.style&&(d=h6e(Rs(e,Jl(s.style)),s.style,c,t))}s.links.map(function(F){try{var B=bv(Ol(e,I1(Jl(F))),F);return v6e(Rs(e,Jl(F)),B,F,t)}catch{}});var f=l6e(Rs(e,Jl(s.workbooks[0])),s.workbooks[0],t),u={},p="";s.coreprops.length&&(p=Rs(e,Jl(s.coreprops[0]),!0),p&&(u=n$(p)),s.extprops.length!==0&&(p=Rs(e,Jl(s.extprops[0]),!0),p&&Zwe(p,u,t)));var h={};(!t.bookSheets||t.bookProps)&&s.custprops.length!==0&&(p=Ol(e,Jl(s.custprops[0]),!0),p&&(h=t5e(p,t)));var m={};if((t.bookSheets||t.bookProps)&&(f.Sheets?o=f.Sheets.map(function(B){return B.name}):u.Worksheets&&u.SheetNames.length>0&&(o=u.SheetNames),t.bookProps&&(m.Props=u,m.Custprops=h),t.bookSheets&&typeof o<"u"&&(m.SheetNames=o),t.bookSheets?m.SheetNames:t.bookProps))return m;o={};var g={};t.bookDeps&&s.calcchain&&(g=g6e(Rs(e,Jl(s.calcchain)),s.calcchain));var x=0,v={},b,w;{var y=f.Sheets;u.Worksheets=y.length,u.SheetNames=[];for(var N=0;N!=y.length;++N)u.SheetNames[N]=y[N].name}var S=i?"bin":"xml",j=s.workbooks[0].lastIndexOf("/"),_=(s.workbooks[0].slice(0,j+1)+"_rels/"+s.workbooks[0].slice(j+1)+".rels").replace(/^\//,"");nc(e,_)||(_="xl/_rels/workbook."+S+".rels");var T=bv(Ol(e,_,!0),_.replace(/_rels.*/,"s5s"));(s.metadata||[]).length>=1&&(t.xlmeta=b6e(Rs(e,Jl(s.metadata[0])),s.metadata[0],t)),(s.people||[]).length>=1&&(t.people=eke(Rs(e,Jl(s.people[0])),t)),T&&(T=$Ae(T,f.Sheets));var D=Rs(e,"xl/worksheets/sheet.xml",!0)?1:0;e:for(x=0;x!=u.Worksheets;++x){var A="sheet";if(T&&T[x]?(b="xl/"+T[x][1].replace(/[\/]?xl\//,""),nc(e,b)||(b=T[x][1]),nc(e,b)||(b=_.replace(/_rels\/.*$/,"")+T[x][1]),A=T[x][2]):(b="xl/worksheets/sheet"+(x+1-D)+"."+S,b=b.replace(/sheet0\./,"sheet.")),w=b.replace(/^(.*)(\/)([^\/]*)$/,"$1/_rels/$3.rels"),t&&t.sheets!=null)switch(typeof t.sheets){case"number":if(x!=t.sheets)continue e;break;case"string":if(u.SheetNames[x].toLowerCase()!=t.sheets.toLowerCase())continue e;break;default:if(Array.isArray&&Array.isArray(t.sheets)){for(var C=!1,M=0;M!=t.sheets.length;++M)typeof t.sheets[M]=="number"&&t.sheets[M]==x&&(C=1),typeof t.sheets[M]=="string"&&t.sheets[M].toLowerCase()==u.SheetNames[x].toLowerCase()&&(C=1);if(!C)continue e}}UAe(e,b,w,u.SheetNames[x],x,v,o,A,t,f,c,d)}return m={Directory:s,Workbook:f,Props:u,Custprops:h,Deps:g,Sheets:o,SheetNames:u.SheetNames,Strings:yv,Styles:d,Themes:c,SSF:La(Br)},t&&t.bookFiles&&(e.files?(m.keys=n,m.files=e.files):(m.keys=[],m.files={},e.FullPaths.forEach(function(F,B){F=F.replace(/^Root Entry[\/]/,""),m.keys.push(F),m.files[F]=e.FileIndex[B]}))),t&&t.bookVBA&&(s.vba.length>0?m.vbaraw=Rs(e,Jl(s.vba[0]),!0):s.defaults&&s.defaults.bin===lke&&(m.vbaraw=Rs(e,"xl/vbaProject.bin",!0))),m}function qAe(e,t){var r=t||{},n="Workbook",s=Or.find(e,n);try{if(n="/!DataSpaces/Version",s=Or.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(bje(s.content),n="/!DataSpaces/DataSpaceMap",s=Or.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var i=wje(s.content);if(i.length!==1||i[0].comps.length!==1||i[0].comps[0].t!==0||i[0].name!=="StrongEncryptionDataSpace"||i[0].comps[0].v!=="EncryptedPackage")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/DataSpaceInfo/StrongEncryptionDataSpace",s=Or.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var o=Nje(s.content);if(o.length!=1||o[0]!="StrongEncryptionTransform")throw new Error("ECMA-376 Encrypted file bad "+n);if(n="/!DataSpaces/TransformInfo/StrongEncryptionTransform/!Primary",s=Or.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);kje(s.content)}catch{}if(n="/EncryptionInfo",s=Or.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);var l=Sje(s.content);if(n="/EncryptedPackage",s=Or.find(e,n),!s||!s.content)throw new Error("ECMA-376 Encrypted file missing "+n);if(l[0]==4&&typeof decrypt_agile<"u")return decrypt_agile(l[1],s.content,r.password||"",r);if(l[0]==2&&typeof decrypt_std76<"u")return decrypt_std76(l[1],s.content,r.password||"",r);throw new Error("File is password-protected")}function HAe(e,t){return t.bookType=="ods"?pU(e,t):t.bookType=="numbers"?RAe(e,t):t.bookType=="xlsb"?WAe(e,t):VAe(e,t)}function WAe(e,t){gm=1024,e&&!e.SSF&&(e.SSF=La(Br)),e&&e.SSF&&(Kx(),AN(e.SSF),t.revssf=EN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,wv?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r=t.bookType=="xlsb"?"bin":"xml",n=z$.indexOf(t.bookType)>-1,s=NA();MA(t=t||{});var i=lA(),o="",l=0;if(t.cellXfs=[],O0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",ln(i,o,a$(e.Props,t)),s.coreprops.push(o),ta(t.rels,2,o,bn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}for(e.Props.Worksheets=e.Props.SheetNames.length,ln(i,o,o$(e.Props)),s.extprops.push(o),ta(t.rels,3,o,bn.EXT_PROPS),e.Custprops!==e.Props&&xs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",ln(i,o,l$(e.Custprops)),s.custprops.push(o),ta(t.rels,4,o,bn.CUST_PROPS)),l=1;l<=e.SheetNames.length;++l){var f={"!id":{}},u=e.Sheets[e.SheetNames[l-1]],p=(u||{})["!type"]||"sheet";switch(p){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,ln(i,o,w6e(l-1,o,t,e,f)),s.sheets.push(o),ta(t.wbrels,-1,"worksheets/sheet"+l+"."+r,bn.WS[0])}if(u){var h=u["!comments"],m=!1,g="";h&&h.length>0&&(g="xl/comments"+l+"."+r,ln(i,g,k6e(h,g)),s.comments.push(g),ta(f,-1,"../comments"+l+"."+r,bn.CMNT),m=!0),u["!legacy"]&&m&&ln(i,"xl/drawings/vmlDrawing"+l+".vml",$$(l,u["!comments"])),delete u["!comments"],delete u["!legacy"]}f["!id"].rId1&&ln(i,I1(o),Tm(f))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,ln(i,o,j6e(t.Strings,o,t)),s.strs.push(o),ta(t.wbrels,-1,"sharedStrings."+r,bn.SST)),o="xl/workbook."+r,ln(i,o,y6e(e,o)),s.workbooks.push(o),ta(t.rels,1,o,bn.WB),o="xl/theme/theme1.xml",ln(i,o,CA(e.Themes,t)),s.themes.push(o),ta(t.wbrels,-1,"theme/theme1.xml",bn.THEME),o="xl/styles."+r,ln(i,o,N6e(e,o,t)),s.styles.push(o),ta(t.wbrels,-1,"styles."+r,bn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",ln(i,o,e.vbaraw),s.vba.push(o),ta(t.wbrels,-1,"vbaProject.bin",bn.VBA)),o="xl/metadata."+r,ln(i,o,S6e(o)),s.metadata.push(o),ta(t.wbrels,-1,"metadata."+r,bn.XLMETA),ln(i,"[Content_Types].xml",t$(s,t)),ln(i,"_rels/.rels",Tm(t.rels)),ln(i,"xl/_rels/workbook."+r+".rels",Tm(t.wbrels)),delete t.revssf,delete t.ssf,i}function VAe(e,t){gm=1024,e&&!e.SSF&&(e.SSF=La(Br)),e&&e.SSF&&(Kx(),AN(e.SSF),t.revssf=EN(e.SSF),t.revssf[e.SSF[65535]]=0,t.ssf=e.SSF),t.rels={},t.wbrels={},t.Strings=[],t.Strings.Count=0,t.Strings.Unique=0,wv?t.revStrings=new Map:(t.revStrings={},t.revStrings.foo=[],delete t.revStrings.foo);var r="xml",n=z$.indexOf(t.bookType)>-1,s=NA();MA(t=t||{});var i=lA(),o="",l=0;if(t.cellXfs=[],O0(t.cellXfs,{},{revssf:{General:0}}),e.Props||(e.Props={}),o="docProps/core.xml",ln(i,o,a$(e.Props,t)),s.coreprops.push(o),ta(t.rels,2,o,bn.CORE_PROPS),o="docProps/app.xml",!(e.Props&&e.Props.SheetNames))if(!e.Workbook||!e.Workbook.Sheets)e.Props.SheetNames=e.SheetNames;else{for(var c=[],d=0;d<e.SheetNames.length;++d)(e.Workbook.Sheets[d]||{}).Hidden!=2&&c.push(e.SheetNames[d]);e.Props.SheetNames=c}e.Props.Worksheets=e.Props.SheetNames.length,ln(i,o,o$(e.Props)),s.extprops.push(o),ta(t.rels,3,o,bn.EXT_PROPS),e.Custprops!==e.Props&&xs(e.Custprops||{}).length>0&&(o="docProps/custom.xml",ln(i,o,l$(e.Custprops)),s.custprops.push(o),ta(t.rels,4,o,bn.CUST_PROPS));var f=["SheetJ5"];for(t.tcid=0,l=1;l<=e.SheetNames.length;++l){var u={"!id":{}},p=e.Sheets[e.SheetNames[l-1]],h=(p||{})["!type"]||"sheet";switch(h){case"chart":default:o="xl/worksheets/sheet"+l+"."+r,ln(i,o,Z$(l-1,t,e,u)),s.sheets.push(o),ta(t.wbrels,-1,"worksheets/sheet"+l+"."+r,bn.WS[0])}if(p){var m=p["!comments"],g=!1,x="";if(m&&m.length>0){var v=!1;m.forEach(function(b){b[1].forEach(function(w){w.T==!0&&(v=!0)})}),v&&(x="xl/threadedComments/threadedComment"+l+"."+r,ln(i,x,Z4e(m,f,t)),s.threadedcomments.push(x),ta(u,-1,"../threadedComments/threadedComment"+l+"."+r,bn.TCMNT)),x="xl/comments"+l+"."+r,ln(i,x,U$(m)),s.comments.push(x),ta(u,-1,"../comments"+l+"."+r,bn.CMNT),g=!0}p["!legacy"]&&g&&ln(i,"xl/drawings/vmlDrawing"+l+".vml",$$(l,p["!comments"])),delete p["!comments"],delete p["!legacy"]}u["!id"].rId1&&ln(i,I1(o),Tm(u))}return t.Strings!=null&&t.Strings.length>0&&(o="xl/sharedStrings."+r,ln(i,o,C$(t.Strings,t)),s.strs.push(o),ta(t.wbrels,-1,"sharedStrings."+r,bn.SST)),o="xl/workbook."+r,ln(i,o,aU(e)),s.workbooks.push(o),ta(t.rels,1,o,bn.WB),o="xl/theme/theme1.xml",ln(i,o,CA(e.Themes,t)),s.themes.push(o),ta(t.wbrels,-1,"theme/theme1.xml",bn.THEME),o="xl/styles."+r,ln(i,o,F$(e,t)),s.styles.push(o),ta(t.wbrels,-1,"styles."+r,bn.STY),e.vbaraw&&n&&(o="xl/vbaProject.bin",ln(i,o,e.vbaraw),s.vba.push(o),ta(t.wbrels,-1,"vbaProject.bin",bn.VBA)),o="xl/metadata."+r,ln(i,o,B$()),s.metadata.push(o),ta(t.wbrels,-1,"metadata."+r,bn.XLMETA),f.length>1&&(o="xl/persons/person.xml",ln(i,o,tke(f)),s.people.push(o),ta(t.wbrels,-1,"persons/person.xml",bn.PEOPLE)),ln(i,"[Content_Types].xml",t$(s,t)),ln(i,"_rels/.rels",Tm(t.rels)),ln(i,"xl/_rels/workbook."+r+".rels",Tm(t.wbrels)),delete t.revssf,delete t.ssf,i}function RA(e,t){var r="";switch((t||{}).type||"base64"){case"buffer":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];case"base64":r=Rl(e.slice(0,12));break;case"binary":r=e;break;case"array":return[e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7]];default:throw new Error("Unrecognized type "+(t&&t.type||"undefined"))}return[r.charCodeAt(0),r.charCodeAt(1),r.charCodeAt(2),r.charCodeAt(3),r.charCodeAt(4),r.charCodeAt(5),r.charCodeAt(6),r.charCodeAt(7)]}function GAe(e,t){return Or.find(e,"EncryptedPackage")?qAe(e,t):lU(e,t)}function KAe(e,t){var r,n=e,s=t||{};return s.type||(s.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r=TB(n,s),zAe(r,s)}function xU(e,t){var r=0;e:for(;r<e.length;)switch(e.charCodeAt(r)){case 10:case 13:case 32:++r;break;case 60:return _S(e.slice(r),t);default:break e}return Ax.to_workbook(e,t)}function XAe(e,t){var r="",n=RA(e,t);switch(t.type){case"base64":r=Rl(e);break;case"binary":r=e;break;case"buffer":r=e.toString("binary");break;case"array":r=ep(e);break;default:throw new Error("Unrecognized type "+t.type)}return n[0]==239&&n[1]==187&&n[2]==191&&(r=ua(r)),t.type="binary",xU(r,t)}function YAe(e,t){var r=e;return t.type=="base64"&&(r=Rl(r)),r=A1.utils.decode(1200,r.slice(2),"str"),t.type="binary",xU(r,t)}function QAe(e){return e.match(/[^\x00-\x7F]/)?$d(e):e}function g4(e,t,r,n){return n?(r.type="string",Ax.to_workbook(e,r)):Ax.to_workbook(t,r)}function d5(e,t){nA();var r=t||{};if(typeof ArrayBuffer<"u"&&e instanceof ArrayBuffer)return d5(new Uint8Array(e),(r=La(r),r.type="array",r));typeof Uint8Array<"u"&&e instanceof Uint8Array&&!r.type&&(r.type=typeof Deno<"u"?"buffer":"array");var n=e,s=[0,0,0,0],i=!1;if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),Pm={},r.dateNF&&(Pm.dateNF=r.dateNF),r.type||(r.type=pn&&Buffer.isBuffer(e)?"buffer":"base64"),r.type=="file"&&(r.type=pn?"buffer":"binary",n=W2e(e),typeof Uint8Array<"u"&&!pn&&(r.type="array")),r.type=="string"&&(i=!0,r.type="binary",r.codepage=65001,n=QAe(e)),r.type=="array"&&typeof Uint8Array<"u"&&e instanceof Uint8Array&&typeof ArrayBuffer<"u"){var o=new ArrayBuffer(3),l=new Uint8Array(o);if(l.foo="bar",!l.foo)return r=La(r),r.type="array",d5(aA(n),r)}switch((s=RA(n,r))[0]){case 208:if(s[1]===207&&s[2]===17&&s[3]===224&&s[4]===161&&s[5]===177&&s[6]===26&&s[7]===225)return GAe(Or.read(n,r),r);break;case 9:if(s[1]<=8)return lU(n,r);break;case 60:return _S(n,r);case 73:if(s[1]===73&&s[2]===42&&s[3]===0)throw new Error("TIFF Image File is not a spreadsheet");if(s[1]===68)return rje(n,r);break;case 84:if(s[1]===65&&s[2]===66&&s[3]===76)return _$.to_workbook(n,r);break;case 80:return s[1]===75&&s[2]<9&&s[3]<9?KAe(n,r):g4(e,n,r,i);case 239:return s[3]===60?_S(n,r):g4(e,n,r,i);case 255:if(s[1]===254)return YAe(n,r);if(s[1]===0&&s[2]===2&&s[3]===0)return Fh.to_workbook(n,r);break;case 0:if(s[1]===0&&(s[2]>=2&&s[3]===0||s[2]===0&&(s[3]===8||s[3]===9)))return Fh.to_workbook(n,r);break;case 3:case 131:case 139:case 140:return SS.to_workbook(n,r);case 123:if(s[1]===92&&s[2]===114&&s[3]===116)return I$.to_workbook(n,r);break;case 10:case 13:case 32:return XAe(n,r);case 137:if(s[1]===80&&s[2]===78&&s[3]===71)throw new Error("PNG Image File is not a spreadsheet");break}return tje.indexOf(s[0])>-1&&s[2]<=12&&s[3]<=31?SS.to_workbook(n,r):g4(e,n,r,i)}function gU(e,t){switch(t.type){case"base64":case"binary":break;case"buffer":case"array":t.type="";break;case"file":return lb(t.file,Or.write(e,{type:pn?"buffer":""}));case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");default:throw new Error("Unrecognized type "+t.type)}return Or.write(e,t)}function JAe(e,t){var r=La(t||{}),n=HAe(e,r);return ZAe(n,r)}function ZAe(e,t){var r={},n=pn?"nodebuffer":typeof Uint8Array<"u"?"array":"string";if(t.compression&&(r.compression="DEFLATE"),t.password)r.type=n;else switch(t.type){case"base64":r.type="base64";break;case"binary":r.type="string";break;case"string":throw new Error("'string' output type invalid for '"+t.bookType+"' files");case"buffer":case"file":r.type=n;break;default:throw new Error("Unrecognized type "+t.type)}var s=e.FullPaths?Or.write(e,{fileType:"zip",type:{nodebuffer:"buffer",string:"binary"}[r.type]||r.type,compression:!!t.compression}):e.generate(r);if(typeof Deno<"u"&&typeof s=="string"){if(t.type=="binary"||t.type=="base64")return s;s=new Uint8Array(_N(s))}return t.password&&typeof encrypt_agile<"u"?gU(encrypt_agile(s,t.password),t):t.type==="file"?lb(t.file,s):t.type=="string"?ua(s):s}function eCe(e,t){var r=t||{},n=Q6e(e,r);return gU(n,r)}function Ed(e,t,r){r||(r="");var n=r+e;switch(t.type){case"base64":return C1($d(n));case"binary":return $d(n);case"string":return e;case"file":return lb(t.file,n,"utf8");case"buffer":return pn?Qu(n,"utf8"):typeof TextEncoder<"u"?new TextEncoder().encode(n):Ed(n,{type:"binary"}).split("").map(function(s){return s.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function tCe(e,t){switch(t.type){case"base64":return C1(e);case"binary":return e;case"string":return e;case"file":return lb(t.file,e,"binary");case"buffer":return pn?Qu(e,"binary"):e.split("").map(function(r){return r.charCodeAt(0)})}throw new Error("Unrecognized type "+t.type)}function By(e,t){switch(t.type){case"string":case"base64":case"binary":for(var r="",n=0;n<e.length;++n)r+=String.fromCharCode(e[n]);return t.type=="base64"?C1(r):t.type=="string"?ua(r):r;case"file":return lb(t.file,e);case"buffer":return e;default:throw new Error("Unrecognized type "+t.type)}}function vU(e,t){nA(),G_e(e);var r=La(t||{});if(r.cellStyles&&(r.cellNF=!0,r.sheetStubs=!0),r.type=="array"){r.type="binary";var n=vU(e,r);return r.type="array",_N(n)}var s=0;if(r.sheet&&(typeof r.sheet=="number"?s=r.sheet:s=e.SheetNames.indexOf(r.sheet),!e.SheetNames[s]))throw new Error("Sheet not found: "+r.sheet+" : "+typeof r.sheet);switch(r.bookType||"xlsb"){case"xml":case"xlml":return Ed(H6e(e,r),r);case"slk":case"sylk":return Ed(S$.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"htm":case"html":return Ed(dU(e.Sheets[e.SheetNames[s]],r),r);case"txt":return tCe(bU(e.Sheets[e.SheetNames[s]],r),r);case"csv":return Ed(BA(e.Sheets[e.SheetNames[s]],r),r,"\uFEFF");case"dif":return Ed(_$.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"dbf":return By(SS.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"prn":return Ed(Ax.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"rtf":return Ed(I$.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"eth":return Ed(A$.from_sheet(e.Sheets[e.SheetNames[s]],r),r);case"fods":return Ed(pU(e,r),r);case"wk1":return By(Fh.sheet_to_wk1(e.Sheets[e.SheetNames[s]],r),r);case"wk3":return By(Fh.book_to_wk3(e,r),r);case"biff2":r.biff||(r.biff=2);case"biff3":r.biff||(r.biff=3);case"biff4":return r.biff||(r.biff=4),By(cU(e,r),r);case"biff5":r.biff||(r.biff=5);case"biff8":case"xla":case"xls":return r.biff||(r.biff=8),eCe(e,r);case"xlsx":case"xlsm":case"xlam":case"xlsb":case"numbers":case"ods":return JAe(e,r);default:throw new Error("Unrecognized bookType |"+r.bookType+"|")}}function rCe(e){if(!e.bookType){var t={xls:"biff8",htm:"html",slk:"sylk",socialcalc:"eth",Sh33tJS:"WTF"},r=e.file.slice(e.file.lastIndexOf(".")).toLowerCase();r.match(/^\.[a-z]+$/)&&(e.bookType=r.slice(1)),e.bookType=t[e.bookType]||e.bookType}}function nCe(e,t,r){var n={};return n.type="file",n.file=t,rCe(n),vU(e,n)}function aCe(e,t,r,n,s,i,o,l){var c=As(r),d=l.defval,f=l.raw||!Object.prototype.hasOwnProperty.call(l,"raw"),u=!0,p=s===1?[]:{};if(s!==1)if(Object.defineProperty)try{Object.defineProperty(p,"__rowNum__",{value:r,enumerable:!1})}catch{p.__rowNum__=r}else p.__rowNum__=r;if(!o||e[r])for(var h=t.s.c;h<=t.e.c;++h){var m=o?e[r][h]:e[n[h]+c];if(m===void 0||m.t===void 0){if(d===void 0)continue;i[h]!=null&&(p[i[h]]=d);continue}var g=m.v;switch(m.t){case"z":if(g==null)break;continue;case"e":g=g==0?null:void 0;break;case"s":case"d":case"b":case"n":break;default:throw new Error("unrecognized type "+m.t)}if(i[h]!=null){if(g==null)if(m.t=="e"&&g===null)p[i[h]]=null;else if(d!==void 0)p[i[h]]=d;else if(f&&g===null)p[i[h]]=null;else continue;else p[i[h]]=f&&(m.t!=="n"||m.t==="n"&&l.rawNumbers!==!1)?g:Vu(m,g,l);g!=null&&(u=!1)}}return{row:p,isempty:u}}function u5(e,t){if(e==null||e["!ref"]==null)return[];var r={t:"n",v:0},n=0,s=1,i=[],o=0,l="",c={s:{r:0,c:0},e:{r:0,c:0}},d=t||{},f=d.range!=null?d.range:e["!ref"];switch(d.header===1?n=1:d.header==="A"?n=2:Array.isArray(d.header)?n=3:d.header==null&&(n=0),typeof f){case"string":c=Bn(f);break;case"number":c=Bn(e["!ref"]),c.s.r=f;break;default:c=f}n>0&&(s=0);var u=As(c.s.r),p=[],h=[],m=0,g=0,x=Array.isArray(e),v=c.s.r,b=0,w={};x&&!e[v]&&(e[v]=[]);var y=d.skipHidden&&e["!cols"]||[],N=d.skipHidden&&e["!rows"]||[];for(b=c.s.c;b<=c.e.c;++b)if(!(y[b]||{}).hidden)switch(p[b]=Ja(b),r=x?e[v][b]:e[p[b]+u],n){case 1:i[b]=b-c.s.c;break;case 2:i[b]=p[b];break;case 3:i[b]=d.header[b-c.s.c];break;default:if(r==null&&(r={w:"__EMPTY",t:"s"}),l=o=Vu(r,null,d),g=w[o]||0,!g)w[o]=1;else{do l=o+"_"+g++;while(w[l]);w[o]=g,w[l]=1}i[b]=l}for(v=c.s.r+s;v<=c.e.r;++v)if(!(N[v]||{}).hidden){var S=aCe(e,c,v,p,n,i,x,d);(S.isempty===!1||(n===1?d.blankrows!==!1:d.blankrows))&&(h[m++]=S.row)}return h.length=m,h}var W8=/"/g;function sCe(e,t,r,n,s,i,o,l){for(var c=!0,d=[],f="",u=As(r),p=t.s.c;p<=t.e.c;++p)if(n[p]){var h=l.dense?(e[r]||[])[p]:e[n[p]+u];if(h==null)f="";else if(h.v!=null){c=!1,f=""+(l.rawNumbers&&h.t=="n"?h.v:Vu(h,null,l));for(var m=0,g=0;m!==f.length;++m)if((g=f.charCodeAt(m))===s||g===i||g===34||l.forceQuotes){f='"'+f.replace(W8,'""')+'"';break}f=="ID"&&(f='"ID"')}else h.f!=null&&!h.F?(c=!1,f="="+h.f,f.indexOf(",")>=0&&(f='"'+f.replace(W8,'""')+'"')):f="";d.push(f)}return l.blankrows===!1&&c?null:d.join(o)}function BA(e,t){var r=[],n=t??{};if(e==null||e["!ref"]==null)return"";var s=Bn(e["!ref"]),i=n.FS!==void 0?n.FS:",",o=i.charCodeAt(0),l=n.RS!==void 0?n.RS:`
`,c=l.charCodeAt(0),d=new RegExp((i=="|"?"\\|":i)+"+$"),f="",u=[];n.dense=Array.isArray(e);for(var p=n.skipHidden&&e["!cols"]||[],h=n.skipHidden&&e["!rows"]||[],m=s.s.c;m<=s.e.c;++m)(p[m]||{}).hidden||(u[m]=Ja(m));for(var g=0,x=s.s.r;x<=s.e.r;++x)(h[x]||{}).hidden||(f=sCe(e,s,x,u,o,c,i,n),f!=null&&(n.strip&&(f=f.replace(d,"")),(f||n.blankrows!==!1)&&r.push((g++?l:"")+f)));return delete n.dense,r.join("")}function bU(e,t){t||(t={}),t.FS="	",t.RS=`
`;var r=BA(e,t);return r}function iCe(e){var t="",r,n="";if(e==null||e["!ref"]==null)return[];var s=Bn(e["!ref"]),i="",o=[],l,c=[],d=Array.isArray(e);for(l=s.s.c;l<=s.e.c;++l)o[l]=Ja(l);for(var f=s.s.r;f<=s.e.r;++f)for(i=As(f),l=s.s.c;l<=s.e.c;++l)if(t=o[l]+i,r=d?(e[f]||[])[l]:e[t],n="",r!==void 0){if(r.F!=null){if(t=r.F,!r.f)continue;n=r.f,t.indexOf(":")==-1&&(t=t+":"+t)}if(r.f!=null)n=r.f;else{if(r.t=="z")continue;if(r.t=="n"&&r.v!=null)n=""+r.v;else if(r.t=="b")n=r.v?"TRUE":"FALSE";else if(r.w!==void 0)n="'"+r.w;else{if(r.v===void 0)continue;r.t=="s"?n="'"+r.v:n=""+r.v}}c[c.length]=t+"="+n}return c}function yU(e,t,r){var n=r||{},s=+!n.skipHeader,i=e||{},o=0,l=0;if(i&&n.origin!=null)if(typeof n.origin=="number")o=n.origin;else{var c=typeof n.origin=="string"?Za(n.origin):n.origin;o=c.r,l=c.c}var d,f={s:{c:0,r:0},e:{c:l,r:o+t.length-1+s}};if(i["!ref"]){var u=Bn(i["!ref"]);f.e.c=Math.max(f.e.c,u.e.c),f.e.r=Math.max(f.e.r,u.e.r),o==-1&&(o=u.e.r+1,f.e.r=o+t.length-1+s)}else o==-1&&(o=0,f.e.r=t.length-1+s);var p=n.header||[],h=0;t.forEach(function(g,x){xs(g).forEach(function(v){(h=p.indexOf(v))==-1&&(p[h=p.length]=v);var b=g[v],w="z",y="",N=Wr({c:l+h,r:o+x+s});d=$1(i,N),b&&typeof b=="object"&&!(b instanceof Date)?i[N]=b:(typeof b=="number"?w="n":typeof b=="boolean"?w="b":typeof b=="string"?w="s":b instanceof Date?(w="d",n.cellDates||(w="n",b=ai(b)),y=n.dateNF||Br[14]):b===null&&n.nullError&&(w="e",b=0),d?(d.t=w,d.v=b,delete d.w,delete d.R,y&&(d.z=y)):i[N]=d={t:w,v:b},y&&(d.z=y))})}),f.e.c=Math.max(f.e.c,l+p.length-1);var m=As(o);if(s)for(h=0;h<p.length;++h)i[Ja(h+l)+m]={t:"s",v:p[h]};return i["!ref"]=an(f),i}function oCe(e,t){return yU(null,e,t)}function $1(e,t,r){if(typeof t=="string"){if(Array.isArray(e)){var n=Za(t);return e[n.r]||(e[n.r]=[]),e[n.r][n.c]||(e[n.r][n.c]={t:"z"})}return e[t]||(e[t]={t:"z"})}return typeof t!="number"?$1(e,Wr(t)):$1(e,Wr({r:t,c:r||0}))}function lCe(e,t){if(typeof t=="number"){if(t>=0&&e.SheetNames.length>t)return t;throw new Error("Cannot find sheet # "+t)}else if(typeof t=="string"){var r=e.SheetNames.indexOf(t);if(r>-1)return r;throw new Error("Cannot find sheet name |"+t+"|")}else throw new Error("Cannot find sheet |"+t+"|")}function $A(){return{SheetNames:[],Sheets:{}}}function UA(e,t,r,n){var s=1;if(!r)for(;s<=65535&&e.SheetNames.indexOf(r="Sheet"+s)!=-1;++s,r=void 0);if(!r||e.SheetNames.length>=65535)throw new Error("Too many worksheets");if(n&&e.SheetNames.indexOf(r)>=0){var i=r.match(/(^.*?)(\d+)$/);s=i&&+i[2]||0;var o=i&&i[1]||r;for(++s;s<=65535&&e.SheetNames.indexOf(r=o+s)!=-1;++s);}if(nU(r),e.SheetNames.indexOf(r)>=0)throw new Error("Worksheet with name |"+r+"| already exists!");return e.SheetNames.push(r),e.Sheets[r]=t,r}function cCe(e,t,r){e.Workbook||(e.Workbook={}),e.Workbook.Sheets||(e.Workbook.Sheets=[]);var n=lCe(e,t);switch(e.Workbook.Sheets[n]||(e.Workbook.Sheets[n]={}),r){case 0:case 1:case 2:break;default:throw new Error("Bad sheet visibility setting "+r)}e.Workbook.Sheets[n].Hidden=r}function dCe(e,t){return e.z=t,e}function wU(e,t,r){return t?(e.l={Target:t},r&&(e.l.Tooltip=r)):delete e.l,e}function uCe(e,t,r){return wU(e,"#"+t,r)}function fCe(e,t,r){e.c||(e.c=[]),e.c.push({t,a:r||"SheetJS"})}function hCe(e,t,r,n){for(var s=typeof t!="string"?t:Bn(t),i=typeof t=="string"?t:an(t),o=s.s.r;o<=s.e.r;++o)for(var l=s.s.c;l<=s.e.c;++l){var c=$1(e,o,l);c.t="n",c.F=i,delete c.v,o==s.s.r&&l==s.s.c&&(c.f=r,n&&(c.D=!0))}return e}var Z0={encode_col:Ja,encode_row:As,encode_cell:Wr,encode_range:an,decode_col:xA,decode_row:mA,split_cell:jwe,decode_cell:Za,decode_range:ol,format_cell:Vu,sheet_add_aoa:KB,sheet_add_json:yU,sheet_add_dom:uU,aoa_to_sheet:Xx,json_to_sheet:oCe,table_to_sheet:fU,table_to_book:bAe,sheet_to_csv:BA,sheet_to_txt:bU,sheet_to_json:u5,sheet_to_html:dU,sheet_to_formulae:iCe,sheet_to_row_object_array:u5,sheet_get_cell:$1,book_new:$A,book_append_sheet:UA,book_set_sheet_visibility:cCe,cell_set_number_format:dCe,cell_set_hyperlink:wU,cell_set_internal_link:uCe,cell_add_comment:fCe,sheet_set_array_formula:hCe,consts:{SHEET_VISIBLE:0,SHEET_HIDDEN:1,SHEET_VERY_HIDDEN:2}};const pCe={toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],["link","image"],["clean"]]},mCe=["header","bold","italic","underline","list","bullet","link","image"],zA=({value:e,onChange:t,placeholder:r="Enter text...",readOnly:n=!1,className:s=""})=>a.jsx("div",{className:s,children:a.jsx(eA,{theme:"snow",value:e||"",onChange:t,modules:n?{toolbar:!1}:pCe,formats:mCe,readOnly:n,placeholder:r})}),NU=({content:e,className:t=""})=>{if(!e||e.trim()==="")return null;const r=_1.sanitize(e,{ALLOWED_TAGS:["p","br","strong","em","u","ul","ol","li","a","img","h1","h2","h3"],ALLOWED_ATTR:["href","src","alt","class","target","rel"],ALLOWED_URI_REGEXP:/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i});return a.jsx("div",{className:t+" [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1",dangerouslySetInnerHTML:{__html:r}})},_u={all:["tasks"],lists:()=>[..._u.all,"list"],list:e=>[..._u.lists(),e],details:()=>[..._u.all,"detail"],detail:e=>[..._u.details(),e]},xCe=(e,t,r)=>ps({queryKey:_u.list({userId:e,projectId:t,status:r}),queryFn:async()=>{const n=await wN(e);return Array.isArray(n)?n:n!=null&&n.data&&Array.isArray(n.data)||n!=null&&n.success&&(n!=null&&n.data)&&Array.isArray(n.data)?n.data:[]},staleTime:30*1e3,refetchInterval:60*1e3,placeholderData:n=>n}),gCe=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async n=>{const s=await TR(n);return s.data||s},onSuccess:()=>{e.invalidateQueries({queryKey:_u.lists()}),t("Task created successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to create task")}})},vCe=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async({id:n,data:s})=>{const i=await Vw(n,s);return i.data||i},onSuccess:(n,s)=>{e.invalidateQueries({queryKey:_u.lists()}),e.invalidateQueries({queryKey:_u.detail(s.id)}),t("Task updated successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to update task")}})},bCe=()=>{const e=oa(),{showSuccess:t,showError:r}=hn();return Cs({mutationFn:async n=>(await OR(n),n),onSuccess:()=>{e.invalidateQueries({queryKey:_u.lists()}),t("Task deleted successfully!"),window.dispatchEvent(new Event("refresh-tasks"))},onError:n=>{r(n.message||"Failed to delete task")}})},Zg={all:["projects"],lists:()=>[...Zg.all,"list"],list:e=>[...Zg.lists(),e],details:()=>[...Zg.all,"detail"],detail:e=>[...Zg.details(),e]},yCe=(e,t,r)=>ps({queryKey:Zg.list({userId:e,companyId:t,status:r}),queryFn:async()=>{const n=await C0(e);return Array.isArray(n)?n:n!=null&&n.data&&Array.isArray(n.data)||n!=null&&n.success&&(n!=null&&n.data)&&Array.isArray(n.data)?n.data:[]},staleTime:1*60*1e3,refetchInterval:2*60*1e3,placeholderData:n=>n}),wCe=({onCreateTask:e,currentUser:t})=>{var Si,Ul,pd,ii;const{showSuccess:r,showError:n,showInfo:s}=hn(),i=oa(),{data:o=[],isLoading:l,error:c}=xCe(),{data:d=[],isLoading:f}=yCe(),{data:u=[],isLoading:p}=J6(),h=vCe(),m=bCe();gCe();const g=l||f||p,[x,v]=P.useState(""),[b,w]=P.useState("active"),[y,N]=P.useState("list"),[S,j]=P.useState("none"),[_,T]=P.useState(!1),[D,A]=P.useState("upload"),[C,M]=P.useState([]),[F,B]=P.useState([]),[Y,V]=P.useState({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),[J,U]=P.useState(!1),[X,W]=P.useState(null),[E,R]=P.useState(null),[q,L]=P.useState(null),[H,se]=P.useState(null),[ce,ae]=P.useState(null),[Z,ve]=P.useState(null),[ne,He]=P.useState(!1),[Xe,ie]=P.useState(!1),[Q,Ne]=P.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[de,ye]=P.useState([]),[xe,we]=P.useState(!1),[Ae,Ue]=P.useState(!1),[me,ee]=P.useState(!1),[fe,Fe]=P.useState(!1),[Ee,qe]=P.useState(""),[Ke,Qe]=P.useState(""),[_t,vt]=P.useState(""),[ke,Je]=P.useState(null),[mt,ue]=P.useState(!1),[Ye,bt]=P.useState(null),[xt,Vt]=P.useState(null),[gr,qt]=P.useState(!1),[Gt,Bt]=P.useState(""),[fr,Sr]=P.useState(0),[Cr,cr]=P.useState([]),[It,yr]=P.useState(!1),[wr,Fr]=P.useState([]),[jr,Pr]=P.useState(!1),ge=P.useRef(null),De=P.useRef(null),Ce=P.useRef(null),Oe=Be=>{const gt=Be.getFullYear(),Pt=Be.getMonth(),$t=Be.getDate();return`${gt}-${String(Pt+1).padStart(2,"0")}-${String($t).padStart(2,"0")}`},G=Be=>{if(!Be||!/^\d{4}-\d{2}-\d{2}$/.test(Be))return Be;const[gt,Pt,$t]=Be.split("-").map(Number);return new Date(gt,Pt-1,$t).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},oe=Be=>{const gt=new Date(Be),Pt=gt.getDay(),$t=gt.getDate()-Pt+(Pt===0?-6:1);return new Date(gt.setDate($t))},Pe=Be=>{const gt=new Date(Be);gt.setHours(0,0,0,0);const Pt=new Date(gt);return Pt.setDate(gt.getDate()+6),Pt.setHours(23,59,59,999),{start:gt,end:Pt}},$e=Be=>{if(!Be||!/^\d{4}-\d{2}-\d{2}$/.test(Be))return null;const[gt,Pt,$t]=Be.split("-").map(Number),dr=new Date(gt,Pt-1,$t),hr=oe(dr);return`${hr.getFullYear()}-${String(hr.getMonth()+1).padStart(2,"0")}-${String(hr.getDate()).padStart(2,"0")}`};P.useEffect(()=>{c&&(console.error("[TASKS] React Query error:",c),n("Failed to load tasks"))},[c,n]),P.useEffect(()=>{Z&&!ne&&Ne({title:Z.title,category:Z.category||"",description:Z.description||"",dueDate:Z.dueDate||"",priority:Z.priority||"Medium",status:Z.status||"Todo",assigneeId:Z.assigneeId,projectId:Z.projectId||""})},[Z,ne]),P.useEffect(()=>{if(!Z)return;let Be=!1;return(async()=>{try{const gt=await Ww(),Pt=Array.isArray(gt==null?void 0:gt.data)?gt.data:[];Be||Fr(Pt)}catch{Be||Fr([])}})(),()=>{Be=!0}},[Z==null?void 0:Z.id]),P.useEffect(()=>{if(!ne){Pr(!1);return}Q.category&&wr.includes(Q.category)?Pr(!1):Q.category&&!wr.includes(Q.category)&&Pr(!0)},[ne,Q.category,wr]);const We=async Be=>{if(o.find(Pt=>Pt.id===Be)){R(Be);try{await h.mutateAsync({id:Be,data:{archived:b==="active"}}),se(null)}catch{}finally{R(null)}}},Ve=async Be=>{W(Be);try{await m.mutateAsync(Be),ae(null)}catch{}finally{W(null)}},Re=()=>{de.length===Gn.length?ye([]):ye(Gn.map(Be=>Be.id))},_e=async()=>{we(!0);try{const Be=[...de];await Promise.all(Be.map(gt=>m.mutateAsync(gt))),ye([]),Ue(!1),r(`Successfully deleted ${Be.length} task${Be.length>1?"s":""}`)}catch(Be){n(Be.message||"Failed to delete tasks")}finally{we(!1)}},Ge=async()=>{var Be;if(!Ee){n("Please select a project");return}Fe(!0);try{const gt=[...de];await Promise.all(gt.map(Pt=>h.mutateAsync({id:Pt,data:{projectId:Ee==="__none__"?null:Ee}}))),ye([]),ee(!1),qe(""),r(`Assigned ${gt.length} task${gt.length>1?"s":""} to ${Ee==="__none__"?"No project":((Be=d.find(Pt=>Pt.id===Ee))==null?void 0:Be.title)||"project"}`)}catch(gt){n(gt.message||"Failed to assign project")}finally{Fe(!1)}},nt=()=>{const Be=new Date;Be.setDate(Be.getDate()+30);const gt=Be.getDate(),Pt=Be.getMonth()+1,$t=Be.getFullYear(),dr=`${gt}-${Pt}-${$t}`,hr=Z0.aoa_to_sheet([["Title","Task Category","Due Date","Priority (Low/Medium/High)","Description","Owner (Name or Email)"],["Update Logistics Map","Operations",dr,"High","Audit the EMEA transit routes","rpk@wx.agency"]]),Mr=Z0.book_new();Z0.book_append_sheet(Mr,hr,"Tasks"),nCe(Mr,"ImpactFlow_Task_Import_Template.xlsx"),s("Registry template downloaded")},ut=async()=>{var Be,gt,Pt,$t,dr,hr,Mr,Wn,Jn;if(!Y.title){n("Please map the required field: Title");return}if(F.length===0){n("No data to import");return}U(!0);try{console.log("[IMPORT] ===== STARTING IMPORT PROCESS ====="),console.log("[IMPORT] Column mapping:",Y),console.log("[IMPORT] Parsed data rows:",F.length),console.log("[IMPORT] Sample parsed row:",F[0]);const _n=(t==null?void 0:t.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!_n){n("Please log in to import tasks"),U(!1);return}console.log("[IMPORT] Starting import with:",{parsedDataRows:F.length,columnMapping:Y,usersCount:u.length,currentUserId:_n});const Nr=F.map((Jt,tn)=>{console.log(`[IMPORT] Processing row ${tn}:`,Jt),console.log("[IMPORT] Column mapping:",Y);const ur=String(Jt[Y.title]||"").trim(),nr=Y.category?String(Jt[Y.category]||"").trim():"",ar=String(Jt[Y.dueDate]||"").trim(),Un=Y.description?String(Jt[Y.description]||"").trim():"",wa=Y.priority?String(Jt[Y.priority]||"").trim():"Medium",vs=Y.owner?String(Jt[Y.owner]||"").trim():"";console.log(`[IMPORT] Extracted values for row ${tn}:`,{title:ur,category:nr,dueDateRaw:ar,description:Un,priorityRaw:wa,ownerRaw:vs,rowKeys:Object.keys(Jt),mappedTitleKey:Y.title,mappedDueDateKey:Y.dueDate});let yn="";if(ar&&ar.toLowerCase().trim()==="ongoing")yn="";else if(ar)if(/^\d+$/.test(ar)&&parseFloat(ar)>25569){const rn=new Date(1900,0,1),Jr=parseFloat(ar)-2,sn=new Date(rn.getTime()+Jr*24*60*60*1e3);isNaN(sn.getTime())||(yn=Oe(sn))}else{let rn=null;if(/^\d{4}-\d{2}-\d{2}$/.test(ar))yn=ar,rn=new Date(0);else if(ar.includes("-")&&/^\d{1,2}-\d{1,2}-\d{4}$/.test(ar)){const Jr=ar.split("-").map(sn=>sn.trim());if(Jr.length===3){const sn=parseInt(Jr[0],10),Ie=parseInt(Jr[1],10)-1,Dt=parseInt(Jr[2],10);!isNaN(sn)&&!isNaN(Ie)&&!isNaN(Dt)&&sn>=1&&sn<=31&&Ie>=0&&Ie<=11&&(rn=new Date(Dt,Ie,sn),console.log(`[IMPORT] Parsed hyphen-separated date "${ar}" as day-month-year -> ${Oe(rn)}`))}}else if(ar.includes("/")){const Jr=ar.split("/").map(sn=>sn.trim());if(Jr.length===3){const sn=parseInt(Jr[0],10),Ie=parseInt(Jr[1],10)-1;let Dt=parseInt(Jr[2],10);Dt<100&&(Dt+=2e3),!isNaN(sn)&&!isNaN(Ie)&&!isNaN(Dt)&&(rn=new Date(Dt,Ie,sn))}}else if(ar.match(/^\d{1,2}\/\d{1,2}\/\d{4}$/)){const Jr=ar.split("/"),sn=parseInt(Jr[0],10)-1,Ie=parseInt(Jr[1],10),Dt=parseInt(Jr[2],10);!isNaN(Ie)&&!isNaN(sn)&&!isNaN(Dt)&&(rn=new Date(Dt,sn,Ie))}else if(!rn||isNaN(rn.getTime())){const Jr=ar.match(/^([A-Za-z]+)\s+(\d{1,2}),?\s*(\d{4})$/);if(Jr){const[,sn,Ie,Dt]=Jr,ir=["january","february","march","april","may","june","july","august","september","october","november","december"],kr=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],Xr=sn.toLowerCase().trim();let un=-1;for(let In=0;In<ir.length;In++)if(Xr.startsWith(ir[In])||Xr.startsWith(kr[In])){un=In;break}if(un>=0){const In=parseInt(Ie,10),rs=parseInt(Dt,10);rn=new Date(rs,un,In),rn.getFullYear()!==rs||rn.getMonth()!==un||rn.getDate()!==In?(console.warn(`[IMPORT] Invalid date parsed from "${ar}": year=${rs}, month=${un}, day=${In}`),rn=null):console.log(`[IMPORT] Successfully parsed date "${ar}" -> ${Oe(rn)}`)}else console.warn(`[IMPORT] Could not match month name in "${ar}"`)}}if(!rn||isNaN(rn.getTime())){const Jr=new Date(ar);if(!isNaN(Jr.getTime())){const sn=Jr.getFullYear(),Ie=Jr.getMonth(),Dt=Jr.getDate();rn=new Date(sn,Ie,Dt),console.log(`[IMPORT] Used fallback date parsing for "${ar}" -> ${Oe(rn)}`)}}rn&&!isNaN(rn.getTime())&&!yn?(yn=Oe(rn),console.log(`[IMPORT] Final dueDate for row ${tn}: "${ar}" -> "${yn}"`)):ar&&!yn&&console.error(`[IMPORT] Failed to parse date "${ar}" for row ${tn}`)}const Lo={low:"Low",medium:"Medium",high:"High",l:"Low",m:"Medium",h:"High"}[wa.toLowerCase()]||"Medium";let Na=_n;if(vs&&u.length>0){const rn=vs.toLowerCase().trim(),Jr=u.find(sn=>sn.name.toLowerCase().trim()===rn||sn.email.toLowerCase().trim()===rn||sn.name.toLowerCase().trim().includes(rn)||sn.email.toLowerCase().trim().includes(rn));Jr?(Na=Jr.id,console.log(`[IMPORT] Matched owner "${vs}" to user:`,Jr.name,Jr.id)):console.warn(`[IMPORT] Could not match owner "${vs}", using current user`)}Na||(console.error("[IMPORT] No assigneeId available, using current user as fallback"),Na=_n);const oi={title:ur.trim(),category:nr||void 0,dueDate:yn||null,description:Un.trim()||"",priority:Lo,status:"Todo",assigneeId:Na,_rowIndex:tn,_rawDate:ar};return(!oi.title||!oi.assigneeId)&&console.error(`[IMPORT] Row ${tn} missing required fields:`,{hasTitle:!!oi.title,hasAssigneeId:!!oi.assigneeId,taskData:oi}),Na||console.warn(`[IMPORT] Row ${tn}: No assigneeId found, using current user:`,{title:ur,ownerRaw:vs,userId:_n}),console.log(`[IMPORT] Task data for row ${tn}:`,oi),oi}).filter(Jt=>{const tn=Jt.title&&Jt.assigneeId;return tn?console.log("[IMPORT] Valid task:",{title:Jt.title,dueDate:Jt.dueDate||"Not set",assigneeId:Jt.assigneeId,priority:Jt.priority,status:Jt.status}):console.error("[IMPORT] Filtered out invalid task:",{title:Jt.title,dueDate:Jt.dueDate,assigneeId:Jt.assigneeId,rawDate:Jt._rawDate,rowIndex:Jt._rowIndex,fullTask:Jt,missingFields:{title:!Jt.title,assigneeId:!Jt.assigneeId}}),tn}).map(({_rowIndex:Jt,_rawDate:tn,...ur})=>(ur.assigneeId||(console.warn("[IMPORT] Task missing assigneeId, using current user:",ur),ur.assigneeId=_n),ur));if(console.log("[IMPORT] Final tasks to import:",Nr),console.log("[IMPORT] Tasks count:",Nr.length),Nr.length===0){const Jt=F[0],tn=Jt?String(Jt[Y.title]||"").trim():"N/A",ur=Jt?String(Jt[Y.dueDate]||"").trim():"N/A";console.error("[IMPORT] Validation failed - no valid tasks:",{totalRows:F.length,columnMapping:Y,mappedTitle:Y.title,mappedDueDate:Y.dueDate,sampleRow:Jt,sampleTitle:tn,sampleDate:ur,sampleRowKeys:Jt?Object.keys(Jt):[],parsedData:F.slice(0,3)}),n(`No valid tasks found to import. Please check that:
1. Title column is mapped correctly (current: "${Y.title}")
2. Due Date column is mapped correctly (current: "${Y.dueDate}")
3. Date format is valid (15-2-2026, DD-MM-YYYY, YYYY-MM-DD, February 15 2026, or "Ongoing" for no date)

Sample data - Title: "${tn}", Date: "${ur}"

Available columns: ${C.join(", ")}`),U(!1);return}console.log("[IMPORT] ===== STARTING API CALL =====");const Rt=Nr.map(({_rowIndex:Jt,_rawDate:tn,...ur})=>ur);console.log("[IMPORT] Tasks to import count:",Rt.length),console.log("[IMPORT] Tasks for API (cleaned):",JSON.stringify(Rt,null,2)),console.log("[IMPORT] Sample task structure:",{title:(Be=Rt[0])==null?void 0:Be.title,dueDate:(gt=Rt[0])==null?void 0:gt.dueDate,assigneeId:(Pt=Rt[0])==null?void 0:Pt.assigneeId,priority:($t=Rt[0])==null?void 0:$t.priority,status:(dr=Rt[0])==null?void 0:dr.status,description:(hr=Rt[0])==null?void 0:hr.description,hasProjectId:!!((Mr=Rt[0])!=null&&Mr.projectId)});const Ur=Rt.filter(Jt=>!Jt.title||!Jt.assigneeId);if(Ur.length>0){console.error("[IMPORT] Invalid tasks found:",Ur),n(`Cannot import: ${Ur.length} task(s) missing required fields (title or assigneeId)`),U(!1);return}let lr;try{lr=await nve(Rt),console.log("[IMPORT] API call successful")}catch(Jt){console.error("[IMPORT] API call failed:",Jt),console.error("[IMPORT] Error details:",{message:Jt.message,status:Jt.status,code:Jt.code,stack:Jt.stack}),n(`Failed to import tasks: ${Jt.message||"Unknown error"}`),U(!1);return}console.log("[IMPORT] Raw API Response:",JSON.stringify(lr,null,2)),console.log("[IMPORT] Response type:",typeof lr),console.log("[IMPORT] Response keys:",lr?Object.keys(lr):"null");let pr={},Qt=[];if(lr)lr.success&&lr.data?(pr=lr.data,Qt=pr.created||[]):lr.data&&Array.isArray(lr.data.created)?(pr=lr.data,Qt=pr.created||[]):lr.created&&Array.isArray(lr.created)?(pr=lr,Qt=pr.created||[]):(console.warn("[IMPORT] Unexpected response structure, searching for created tasks..."),pr=lr.data||lr,Qt=pr.created||((Wn=pr.data)==null?void 0:Wn.created)||[]),console.log("[IMPORT] Extracted importData:",pr),console.log("[IMPORT] Created tasks:",Qt),console.log("[IMPORT] Created tasks count:",Qt.length),console.log("[IMPORT] Created task IDs:",Qt.map(Jt=>Jt==null?void 0:Jt.id)),console.log("[IMPORT] Created task details:",Qt.map(Jt=>({id:Jt.id,title:Jt.title,assigneeId:Jt.assigneeId})));else{console.error("[IMPORT] No response received from API"),n("No response received from server. Please check your connection."),U(!1);return}const An=pr.successful??Qt.length??0,Ir=pr.failed??0;if(console.log("[IMPORT] Import results:",{successCount:An,failedCount:Ir,total:Nr.length,createdTasks:Qt.length,createdTaskIds:Qt.map(Jt=>Jt.id),errors:pr.errors}),Qt&&Qt.length>0?(console.log("[IMPORT] ===== INVALIDATING TASKS CACHE ====="),console.log("[IMPORT] Created tasks:",Qt.length),i.invalidateQueries({queryKey:["tasks"]})):(console.error("[IMPORT] ===== NO TASKS CREATED ====="),console.error("[IMPORT] No created tasks. createdTasks:",Qt),console.error("[IMPORT] Response structure:",lr),console.error("[IMPORT] Import data:",pr)),Ir>0){const Jt=((Jn=pr.errors)==null?void 0:Jn.map(tn=>`Row ${tn.index+1}: ${tn.error}`).join(`
`))||"";n(`Imported ${An} task(s), but ${Ir} failed.
${Jt}`)}else r(`Successfully imported ${An} task(s)`);B([]),M([]),V({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),ge.current&&(ge.current.value=""),T(!1),window.dispatchEvent(new Event("refresh-tasks"))}catch(_n){console.error("Import error:",_n),n(_n.message||"Failed to import tasks. Please check your data format.")}finally{U(!1)}},wt=Be=>{if(!Be||Be.length===0)return console.log("[IMPORT] Header detection: empty or null firstRow"),!1;console.log("[IMPORT] Header detection - firstRow:",Be),console.log("[IMPORT] Header detection - firstRow length:",Be.length),console.log("[IMPORT] Header detection - firstRow values:",Be.map((hr,Mr)=>`[${Mr}]: "${hr}"`));const gt=["task","title","name","category","due","date","priority","description","owner","assignee","status","project","desc"];let Pt=0;const $t=Be.filter(hr=>hr&&String(hr).trim()!=="");console.log("[IMPORT] Header detection - non-empty cells:",$t);for(const hr of $t){const Mr=String(hr).toLowerCase().trim();gt.some(Wn=>Mr.includes(Wn))&&(Pt++,console.log(`[IMPORT] Header detection - matched keyword in: "${hr}"`)),Mr.match(/^(task|due|owner|assignee|priority|description|category|status)/)&&(Pt++,console.log(`[IMPORT] Header detection - matched pattern in: "${hr}"`))}const dr=$t.length>0?Pt/$t.length:0;return console.log("[IMPORT] Header detection result:",{firstRow:Be,totalCells:Be.length,cellsToCheck:$t.length,matchCount:Pt,matchRatio:dr,isHeader:dr>=.4}),dr>=.4},Mt=async Be=>{var Pt,$t;const gt=(Pt=Be.target.files)==null?void 0:Pt[0];if(gt)try{const dr=($t=gt.name.split(".").pop())==null?void 0:$t.toLowerCase();if(dr==="csv"){const hr=new FileReader;hr.onload=Mr=>{var Wn,Jn;try{const _n=new Uint8Array((Wn=Mr.target)==null?void 0:Wn.result),Nr=d5(_n,{type:"array",sheetStubs:!0}),Rt=Nr.SheetNames[0],Ur=Nr.Sheets[Rt],lr=Z0.decode_range(Ur["!ref"]||"A1"),pr=lr.e.c-lr.s.c+1;console.log("[IMPORT] CSV worksheet range:",Ur["!ref"]),console.log("[IMPORT] CSV number of columns from range:",pr);const Qt=Z0.sheet_to_json(Ur,{header:1,defval:"",raw:!1,dateNF:"yyyy-mm-dd",blankrows:!0});if(console.log("[IMPORT] CSV raw data length:",Qt.length),console.log("[IMPORT] CSV first row length:",(Jn=Qt[0])==null?void 0:Jn.length),console.log("[IMPORT] CSV first row:",Qt[0]),Qt.length===0){n("File is empty");return}if(Qt[0]&&Qt[0].length<pr)for(console.log(`[IMPORT] CSV: Padding first row from ${Qt[0].length} to ${pr} columns`);Qt[0].length<pr;)Qt[0].push("");const An=wt(Qt[0]);console.log("[IMPORT] CSV Header detection result:",An);let Ir,Jt;if(An?(Ir=Qt[0].map((nr,ar)=>String(nr||"").trim()||`Column ${ar+1}`),Jt=1,console.log("[IMPORT] CSV raw first row:",Qt[0]),console.log("[IMPORT] CSV processed headers:",Ir)):(Ir=Qt[0].map((nr,ar)=>`Column ${ar+1}`),Jt=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),Ir.length===0){n("No columns found in file");return}console.log("[IMPORT] CSV detected headers:",Ir),console.log("[IMPORT] CSV detected headers count:",Ir.length),console.log("[IMPORT] CSV detected headers array:",Ir),M(Ir),console.log("[IMPORT] CSV setDetectedColumns called with:",Ir);const tn=[];for(let nr=Jt;nr<Qt.length;nr++){const ar={},Un=Qt[nr]||[];for(;Un.length<Ir.length;)Un.push("");Ir.forEach((wa,vs)=>{const yn=Un[vs];if(typeof yn=="number"&&yn>25569&&wa.toLowerCase().includes("date")){const Mi=new Date(1900,0,1),Lo=yn-2,Na=new Date(Mi.getTime()+Lo*24*60*60*1e3);ar[wa]=Na.toISOString().split("T")[0]}else ar[wa]=yn!=null?String(yn).trim():""}),Object.values(ar).some(wa=>wa)&&tn.push(ar)}console.log("[IMPORT] CSV parsed rows:",tn),console.log("[IMPORT] CSV parsed rows count:",tn.length),B(tn);const ur={title:Ir.find(nr=>nr.toLowerCase().includes("title")||nr.toLowerCase().includes("task")&&nr.toLowerCase().includes("name")||!nr.toLowerCase().includes("category")&&nr.toLowerCase().includes("name"))||"",category:Ir.find(nr=>nr.toLowerCase().includes("category")||nr.toLowerCase().includes("task")&&nr.toLowerCase().includes("cat"))||"",dueDate:Ir.find(nr=>nr.toLowerCase().includes("due")||nr.toLowerCase().includes("date")&&!nr.toLowerCase().includes("created")&&!nr.toLowerCase().includes("updated"))||"",description:Ir.find(nr=>nr.toLowerCase().includes("description")||nr.toLowerCase().includes("desc"))||"",priority:Ir.find(nr=>nr.toLowerCase().includes("priority")||nr.toLowerCase().includes("prio"))||"",owner:Ir.find(nr=>nr.toLowerCase().includes("owner")||nr.toLowerCase().includes("assignee")||nr.toLowerCase().includes("assigned")||nr.toLowerCase().includes("task")&&nr.toLowerCase().includes("owner"))||""};V(ur),A("mapping")}catch(_n){console.error("CSV parse error:",_n),n("Failed to parse CSV file: "+(_n.message||"Unknown error"))}},hr.readAsArrayBuffer(gt)}else if(dr==="xlsx"||dr==="xls"){const hr=new FileReader;hr.onload=Mr=>{var tn,ur;const Wn=new Uint8Array((tn=Mr.target)==null?void 0:tn.result),Jn=d5(Wn,{type:"array"}),_n=Jn.SheetNames[0],Nr=Jn.Sheets[_n],Rt=Z0.decode_range(Nr["!ref"]||"A1"),Ur=Rt.e.c-Rt.s.c+1;console.log("[IMPORT] Excel worksheet range:",Nr["!ref"]),console.log("[IMPORT] Excel number of columns from range:",Ur);const lr=Z0.sheet_to_json(Nr,{header:1,raw:!0,defval:"",blankrows:!0});if(console.log("[IMPORT] Excel raw data length:",lr.length),console.log("[IMPORT] Excel first row length:",(ur=lr[0])==null?void 0:ur.length),console.log("[IMPORT] Excel first row:",lr[0]),lr.length===0){n("File is empty");return}if(lr[0]&&lr[0].length<Ur)for(console.log(`[IMPORT] Padding first row from ${lr[0].length} to ${Ur} columns`);lr[0].length<Ur;)lr[0].push("");const pr=wt(lr[0]);console.log("[IMPORT] Excel Header detection result:",pr);let Qt,An;pr?(Qt=lr[0].map((nr,ar)=>String(nr||"").trim()||`Column ${ar+1}`),An=1,console.log("[IMPORT] Excel raw first row:",lr[0]),console.log("[IMPORT] Excel processed headers:",Qt)):(Qt=lr[0].map((nr,ar)=>`Column ${ar+1}`),An=0,s("No header row detected. Using generic column names (Column 1, Column 2, etc.)")),console.log("[IMPORT] Detected headers:",Qt),console.log("[IMPORT] Detected headers count:",Qt.length),console.log("[IMPORT] Detected headers array:",Qt),console.log("[IMPORT] Raw JSON data:",lr),M(Qt),console.log("[IMPORT] setDetectedColumns called with:",Qt);const Ir=[];for(let nr=An;nr<lr.length;nr++){const ar={},Un=lr[nr]||[];for(;Un.length<Qt.length;)Un.push("");Qt.forEach((wa,vs)=>{const yn=Un[vs];if(typeof yn=="number"&&yn>25569&&wa.toLowerCase().includes("date")){const Mi=new Date(1900,0,1),Lo=yn-2,Na=new Date(Mi.getTime()+Lo*24*60*60*1e3),oi=Na.getFullYear(),rn=Na.getMonth(),Jr=Na.getDate();ar[wa]=`${oi}-${String(rn+1).padStart(2,"0")}-${String(Jr).padStart(2,"0")}`}else ar[wa]=yn!=null?String(yn).trim():""}),Object.values(ar).some(wa=>wa)&&Ir.push(ar)}console.log("[IMPORT] Parsed rows:",Ir),console.log("[IMPORT] Parsed rows count:",Ir.length),B(Ir);const Jt={title:Qt.find(nr=>nr.toLowerCase().includes("title")||nr.toLowerCase().includes("task")&&nr.toLowerCase().includes("name")||!nr.toLowerCase().includes("category")&&nr.toLowerCase().includes("name"))||"",category:Qt.find(nr=>nr.toLowerCase().includes("category")||nr.toLowerCase().includes("task")&&nr.toLowerCase().includes("cat"))||"",dueDate:Qt.find(nr=>nr.toLowerCase().includes("due")||nr.toLowerCase().includes("date")&&!nr.toLowerCase().includes("created")&&!nr.toLowerCase().includes("updated"))||"",description:Qt.find(nr=>nr.toLowerCase().includes("description")||nr.toLowerCase().includes("desc"))||"",priority:Qt.find(nr=>nr.toLowerCase().includes("priority")||nr.toLowerCase().includes("prio"))||"",owner:Qt.find(nr=>nr.toLowerCase().includes("owner")||nr.toLowerCase().includes("assignee")||nr.toLowerCase().includes("assigned")||nr.toLowerCase().includes("task")&&nr.toLowerCase().includes("owner"))||""};console.log("[IMPORT] Auto-mapping:",Jt),V(Jt),A("mapping")},hr.readAsArrayBuffer(gt)}else n("Unsupported file format. Please use CSV, XLS, or XLSX.")}catch(dr){console.error("Error parsing file:",dr),n("Failed to parse file: "+(dr.message||"Unknown error"))}},Xt=async(Be,gt,Pt)=>{Pt.stopPropagation();const $t=gt==="Done"?"Todo":"Done";L(Be);try{await h.mutateAsync({id:Be,data:{status:$t}}),(Z==null?void 0:Z.id)===Be&&ve({...Z,status:$t})}catch{}finally{L(null)}},_r=async()=>{if(Z){if(!Q.title.trim()){n("Task title is required");return}if(!Q.assigneeId){n("Assignee is required");return}ie(!0);try{await h.mutateAsync({id:Z.id,data:{title:Q.title.trim(),category:Q.category.trim()||void 0,description:Q.description.trim()||"",dueDate:Q.dueDate||null,priority:Q.priority,status:Q.status,assigneeId:Q.assigneeId,projectId:Q.projectId||null}}),ve({...Z,title:Q.title.trim(),category:Q.category.trim()||void 0,description:Q.description.trim()||"",dueDate:Q.dueDate||"",priority:Q.priority,status:Q.status,assigneeId:Q.assigneeId,projectId:Q.projectId||void 0}),He(!1)}catch{}finally{ie(!1)}}},$n=(Be,gt=1200,Pt=1200,$t=.8)=>new Promise((dr,hr)=>{const Mr=new FileReader;Mr.onload=Wn=>{var _n;const Jn=new Image;Jn.onload=()=>{let Nr=Jn.width,Rt=Jn.height;Nr>Rt?Nr>gt&&(Rt=Rt*gt/Nr,Nr=gt):Rt>Pt&&(Nr=Nr*Pt/Rt,Rt=Pt);const Ur=document.createElement("canvas");Ur.width=Nr,Ur.height=Rt;const lr=Ur.getContext("2d");lr?(lr.drawImage(Jn,0,0,Nr,Rt),dr(Ur.toDataURL("image/jpeg",$t))):hr(new Error("Canvas context not available"))},Jn.onerror=()=>hr(new Error("Failed to load image")),Jn.src=(_n=Wn.target)==null?void 0:_n.result},Mr.onerror=()=>hr(new Error("Failed to read file")),Mr.readAsDataURL(Be)}),Ts=async Be=>{var Pt;const gt=(Pt=Be.target.files)==null?void 0:Pt[0];if(gt){if(!gt.type.startsWith("image/")){n("Please select an image file");return}if(gt.size>10*1024*1024){n("Image size must be less than 10MB");return}try{const $t=await $n(gt,1200,1200,.8);vt($t),Je(gt)}catch($t){n($t.message||"Failed to process image")}}},Pn=Be=>{const gt=Be.target.value,Pt=Be.target.selectionStart;Qe(gt),Sr(Pt);const $t=gt.substring(0,Pt),dr=$t.lastIndexOf("@");if(dr!==-1){const hr=$t.substring(dr+1),Mr=dr>0?$t[dr-1]:" ";if((Mr===" "||Mr===`
`||dr===0)&&!hr.includes(" ")&&!hr.includes(`
`)){Bt(hr);const Wn=u.filter(Jn=>Jn.name.toLowerCase().includes(hr.toLowerCase())||Jn.email.toLowerCase().includes(hr.toLowerCase()));cr(Wn.slice(0,5)),qt(!0);return}}qt(!1)},Vs=Be=>{const Pt=Ke.substring(0,fr).lastIndexOf("@"),$t=Ke.substring(fr),hr=`${Ke.substring(0,Pt)}@${Be.name} ${$t}`;if(Qe(hr),qt(!1),Ce.current){Ce.current.focus();const Mr=Pt+Be.name.length+2;Ce.current.setSelectionRange(Mr,Mr)}},ya=Be=>{const gt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Pt=[];let $t;for(;($t=gt.exec(Be))!==null;){const dr=$t[1].trim(),hr=u.find(Mr=>Mr.name.toLowerCase()===dr.toLowerCase());hr&&hr.id!==((t==null?void 0:t.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Pt.push(hr.id)}return[...new Set(Pt)]};P.useEffect(()=>{if(Ce.current){const Be=Ce.current;Be.style.height="auto";const gt=24,Pt=5*gt,$t=15*gt,dr=Math.min(Math.max(Be.scrollHeight,Pt),$t);Be.style.height=`${dr}px`}},[Ke]);const gs=Be=>{const gt=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Pt=[];let $t=0,dr;for(;(dr=gt.exec(Be))!==null;){dr.index>$t&&Pt.push(Be.substring($t,dr.index));const hr=dr[1].trim(),Mr=u.find(Wn=>Wn.name.toLowerCase()===hr.toLowerCase());Mr?Pt.push(a.jsxs("span",{className:"bg-indigo-100 text-indigo-700 px-1.5 py-0.5 rounded font-bold",children:["@",Mr.name]},dr.index)):Pt.push(`@${hr}`),$t=dr.index+dr[0].length}return $t<Be.length&&Pt.push(Be.substring($t)),Pt.length>0?Pt:Be},Fa=async()=>{if(Z){if(!Ke.trim()&&!ke){n("Please enter a note or upload an image");return}ue(!0);try{const Be=(t==null?void 0:t.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,gt=(t==null?void 0:t.name)||JSON.parse(localStorage.getItem("user_data")||"{}").name||"Unknown User",Pt={id:`note_${Date.now()}`,userId:Be,userName:gt,text:Ke.trim(),imageUrl:_t||void 0,imageName:(ke==null?void 0:ke.name)||void 0,imageMimeType:(ke==null?void 0:ke.type)||void 0,createdAt:new Date().toISOString()},$t=[...Z.notes||[],Pt];await h.mutateAsync({id:Z.id,data:{notes:$t}}),ve({...Z,notes:$t});const dr=ya(Ke);for(const Mr of dr)try{await kx({userId:Mr,type:"task-mention",title:"You were mentioned in a task",message:`${gt} mentioned you in task "${Z.title}"`,relatedId:Z.id,relatedType:"task",read:!1})}catch(Wn){console.error("Failed to send notification:",Wn)}Qe(""),vt(""),Je(null),De.current&&(De.current.value="");const hr=dr.length>0?`Note added and ${dr.length} user(s) notified`:"Note added successfully";r(hr)}catch(Be){n(Be.message||"Failed to add note")}finally{ue(!1)}}},dn=async()=>{var Be;if(!(!Z||!t||!xt))try{bt(xt);const gt=((Be=Z.notes)==null?void 0:Be.filter(Pt=>Pt.id!==xt))||[];await h.mutateAsync({id:Z.id,data:{notes:gt}}),ve({...Z,notes:gt}),r("Note deleted successfully"),Vt(null)}catch(gt){n(gt.message||"Failed to delete note")}finally{bt(null)}},dl=()=>{ve(null),He(!1),Qe(""),vt(""),Je(null),qt(!1),yr(!1),De.current&&(De.current.value="")};let Gn=o.filter(Be=>{if(b==="archived"){if(!Be.archived)return!1}else if(b==="week"){if(Be.archived)return!1}else if(Be.archived)return!1;return x.trim()?Be.title.toLowerCase().includes(x.toLowerCase()):!0});if(S==="dueDate")Gn=[...Gn].sort((Be,gt)=>!Be.dueDate&&!gt.dueDate?0:Be.dueDate?gt.dueDate?(Be.dueDate||"").localeCompare(gt.dueDate||""):-1:1);else if(S==="priority"){const Be={High:1,Medium:2,Low:3};Gn=[...Gn].sort((gt,Pt)=>{const $t=Be[gt.priority]||4,dr=Be[Pt.priority]||4;return $t-dr})}else S==="category"?Gn=[...Gn].sort((Be,gt)=>{const Pt=(Be.category||"Uncategorized").toLowerCase(),$t=(gt.category||"Uncategorized").toLowerCase();return Pt.localeCompare($t)}):S==="owner"&&(Gn=[...Gn].sort((Be,gt)=>{var dr,hr;const Pt=((dr=u.find(Mr=>Mr.id===Be.assigneeId))==null?void 0:dr.name)||"Unassigned",$t=((hr=u.find(Mr=>Mr.id===gt.assigneeId))==null?void 0:hr.name)||"Unassigned";return Pt.localeCompare($t)}));return a.jsxs("div",{className:"space-y-6 animate-in slide-in-from-bottom-2 duration-500 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Tasks"}),a.jsxs("div",{className:"flex gap-4 mt-2",children:[a.jsx("button",{onClick:()=>{w("active"),ye([])},className:`text-sm font-bold pb-1 transition-all ${b==="active"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:"Active"}),a.jsxs("button",{onClick:()=>{w("archived"),ye([])},className:`text-sm font-bold pb-1 transition-all ${b==="archived"?"text-indigo-600 border-b-2 border-indigo-600":"text-slate-400"}`,children:["Archive (",o.filter(Be=>Be.archived).length,")"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:()=>{T(!0),A("upload")},className:"px-3 py-2 bg-white border border-slate-200 text-slate-600 rounded-lg text-xs font-bold flex items-center gap-2 hover:bg-slate-50 transition-all",children:[a.jsx(oE,{className:"w-4 h-4"})," Bulk Import"]}),a.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg text-sm font-bold flex items-center gap-2 hover:bg-indigo-700 shadow-lg",children:[a.jsx($r,{className:"w-4 h-4"})," New Task"]})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search tasks...",value:x,onChange:Be=>{v(Be.target.value),ye([])},className:"w-full pl-10 pr-4 py-2.5 bg-white border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:S,onChange:Be=>j(Be.target.value),className:"appearance-none pl-4 pr-10 py-2.5 bg-white border border-slate-200 rounded-xl text-sm font-medium text-slate-700 outline-none focus:ring-2 focus:ring-indigo-100 cursor-pointer hover:bg-slate-50 transition-all",children:[a.jsx("option",{value:"none",children:"No Sort"}),a.jsx("option",{value:"dueDate",children:"Sort by Due Date"}),a.jsx("option",{value:"priority",children:"Sort by Priority"}),a.jsx("option",{value:"category",children:"Sort by Category"}),a.jsx("option",{value:"owner",children:"Sort by Owner"})]}),a.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2 pointer-events-none",children:a.jsx($s,{className:"w-4 h-4 text-slate-400"})})]}),a.jsxs("div",{className:"flex bg-white p-1 border border-slate-200 rounded-xl shadow-sm",children:[a.jsx("button",{onClick:()=>N("list"),className:`p-2 rounded-lg ${y==="list"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:a.jsx(MH,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>N("card"),className:`p-2 rounded-lg ${y==="card"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,children:a.jsx(DH,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>{w(b==="week"?"active":"week"),ye([])},className:`p-2 rounded-lg ${b==="week"?"bg-indigo-50 text-indigo-600":"text-slate-400"}`,title:"Week View",children:a.jsx(Ln,{className:"w-4 h-4"})})]})]}),!g&&Gn.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:Gn.length>0&&de.length===Gn.length,onChange:Re}),a.jsx("span",{className:"text-sm font-semibold text-slate-600",children:"Select All Tasks"})]}),g?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden min-h-[400px]",children:a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"})})}):Gn.length===0?a.jsxs("div",{className:"py-20 bg-white rounded-3xl border border-dashed border-slate-200 text-center",children:[a.jsx($2,{className:"w-12 h-12 text-slate-200 mx-auto mb-4"}),a.jsxs("p",{className:"text-slate-400 font-bold uppercase text-[10px] tracking-widest",children:["No ",b==="week"?"tasks":b," tasks found"]})]}):b==="week"?a.jsx("div",{className:"space-y-8",children:(()=>{const Be=Gn.filter(Nr=>!$e(Nr.dueDate)),gt=Gn.filter(Nr=>$e(Nr.dueDate)),Pt={};gt.forEach(Nr=>{const Rt=$e(Nr.dueDate);Pt[Rt]||(Pt[Rt]=[]),Pt[Rt].push(Nr)});const $t=Object.keys(Pt).sort(),dr=(()=>{const Nr=oe(new Date);return`${Nr.getFullYear()}-${String(Nr.getMonth()+1).padStart(2,"0")}-${String(Nr.getDate()).padStart(2,"0")}`})(),hr=(()=>{const Nr=oe(new Date),Rt=new Date(Nr);return Rt.setDate(Nr.getDate()+7),`${Rt.getFullYear()}-${String(Rt.getMonth()+1).padStart(2,"0")}-${String(Rt.getDate()).padStart(2,"0")}`})(),Mr=(Nr,Rt)=>{const Ur=Nr.toLocaleDateString("en-US",{month:"short",day:"numeric"}),lr=Rt.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return`${Ur} - ${lr}`},Wn=Nr=>{if(Nr===dr)return"This Week";if(Nr===hr)return"Next Week";const[Rt,Ur,lr]=Nr.split("-").map(Number),pr=new Date(Rt,Ur-1,lr),{start:Qt,end:An}=Pe(pr);return`Week of ${Mr(Qt,An)}`},Jn=Nr=>{const[Rt,Ur,lr]=Nr.split("-").map(Number);return Pe(new Date(Rt,Ur-1,lr))};$t.forEach(Nr=>{Pt[Nr].sort((Rt,Ur)=>(Rt.dueDate||"").localeCompare(Ur.dueDate||""))});const _n=Nr=>Nr.length===0?null:y==="list"?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-50",children:Nr.map(Rt=>{var lr,pr;const Ur=de.includes(Rt.id);return a.jsxs("div",{onClick:()=>ve(Rt),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Ur?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[a.jsx("div",{onClick:Qt=>Qt.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Ur,onChange:()=>ye(Qt=>Ur?Qt.filter(An=>An!==Rt.id):[...Qt,Rt.id])})}),a.jsx("button",{onClick:Qt=>Xt(Rt.id,Rt.status,Qt),disabled:q===Rt.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:q===Rt.id?a.jsx(ct,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Rt.status==="Done"?a.jsx(Qr,{className:"w-6 h-6 text-emerald-500"}):a.jsx(Hd,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:`font-bold text-sm ${Rt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Rt.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Rt.category&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Xa,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Rt.category})]}),a.jsx("span",{className:"text-slate-300",children:""})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:((lr=d.find(Qt=>Qt.id===Rt.projectId))==null?void 0:lr.title)||"General"}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Ln,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Rt.dueDate?G(Rt.dueDate):"Ongoing"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Rt.priority==="High"?"bg-red-50 text-red-600":Rt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Rt.priority}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-50 rounded-full",children:[a.jsx(co,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-600",children:((pr=u.find(Qt=>Qt.id===Rt.assigneeId))==null?void 0:pr.name)||"Unassigned"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:Qt=>{Qt.stopPropagation(),ve(Rt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:a.jsx(Wd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Qt=>{Qt.stopPropagation(),se(Rt)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 transition-colors",children:a.jsx(Md,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Qt=>{Qt.stopPropagation(),ae(Rt)},className:"p-1.5 hover:bg-red-50 rounded-lg text-red-400 transition-colors",children:a.jsx(br,{className:"w-4 h-4"})})]})]})]},Rt.id)})})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Nr.map(Rt=>{var lr;const Ur=de.includes(Rt.id);return a.jsxs("div",{onClick:()=>ve(Rt),className:`bg-white p-6 rounded-3xl border ${Ur?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[a.jsx("div",{className:"absolute top-4 left-4",onClick:pr=>pr.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:`${Ur?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer`,checked:Ur,onChange:()=>ye(pr=>Ur?pr.filter(Qt=>Qt!==Rt.id):[...pr,Rt.id])})}),a.jsxs("div",{className:"mt-6",children:[a.jsx("p",{className:`font-bold text-sm mb-3 ${Rt.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Rt.title}),a.jsxs("div",{className:"space-y-2 mb-4",children:[Rt.category&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Xa,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Rt.category})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:((lr=d.find(pr=>pr.id===Rt.projectId))==null?void 0:lr.title)||"General"})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Rt.dueDate?a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Ln,{className:"w-3.5 h-3.5 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:G(Rt.dueDate)})]}):a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Rt.priority==="High"?"bg-red-50 text-red-600":Rt.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Rt.priority})]})]},Rt.id)})});return a.jsxs(a.Fragment,{children:[$t.map(Nr=>{const Rt=Pt[Nr];if(!Rt||Rt.length===0)return null;const Ur=Jn(Nr),lr=Wn(Nr);return a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4 flex-wrap",children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:lr}),a.jsx("span",{className:"px-3 py-1 bg-indigo-50 text-indigo-600 rounded-full text-xs font-black",children:Mr(Ur.start,Ur.end)}),a.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Rt.length,")"]})]}),_n(Rt)]},Nr)}),Be.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Ongoing"}),a.jsxs("span",{className:"text-sm text-slate-400 font-bold",children:["(",Be.length," tasks)"]})]}),_n(Be)]})]})})()}):y==="list"?a.jsx("div",{className:"bg-white border border-slate-200 rounded-2xl shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-50",children:Gn.map(Be=>{var Pt;const gt=de.includes(Be.id);return a.jsxs("div",{onClick:()=>ve(Be),className:`flex items-center gap-4 p-5 hover:bg-slate-50 transition-colors cursor-pointer ${Be.archived?"bg-slate-50/50":""} ${gt?"bg-indigo-50/30 border-l-4 border-indigo-400":""}`,children:[a.jsx("div",{onClick:$t=>$t.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:gt,onChange:()=>ye($t=>gt?$t.filter(dr=>dr!==Be.id):[...$t,Be.id])})}),a.jsx("button",{onClick:$t=>Xt(Be.id,Be.status,$t),disabled:q===Be.id,className:"text-slate-300 hover:text-indigo-600 disabled:opacity-50 disabled:cursor-not-allowed transition-opacity",children:q===Be.id?a.jsx(ct,{className:"w-6 h-6 text-indigo-600 animate-spin"}):Be.status==="Done"?a.jsx(Qr,{className:"w-6 h-6 text-emerald-500"}):a.jsx(Hd,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 overflow-hidden",children:[a.jsx("p",{className:`font-bold text-sm ${Be.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:Be.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[Be.category&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Xa,{className:"w-3 h-3 text-indigo-400"}),a.jsx("span",{className:"text-[10px] text-indigo-600 font-bold uppercase",children:Be.category})]}),a.jsx("span",{className:"text-slate-300",children:""})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:((Pt=d.find($t=>$t.id===Be.projectId))==null?void 0:Pt.title)||"General"}),a.jsxs(a.Fragment,{children:[a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Ln,{className:"w-3 h-3 text-slate-400"}),a.jsx("span",{className:"text-[10px] text-slate-400 font-bold",children:Be.dueDate?G(Be.dueDate):"Ongoing"})]})]})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[10px] font-black uppercase ${Be.priority==="High"?"bg-red-50 text-red-600":Be.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Be.priority}),Be.assigneeId&&(()=>{const $t=u.find(dr=>dr.id===Be.assigneeId);return $t?a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 bg-indigo-50 rounded-full",title:$t.name,children:[a.jsx(co,{className:"w-3 h-3 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 max-w-[120px] truncate",children:$t.name})]}):null})()]}),a.jsxs("div",{className:"flex items-center gap-3 ml-3",children:[a.jsx("button",{onClick:$t=>{$t.stopPropagation(),ve(Be)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",title:"View task",children:a.jsx(Wd,{className:"w-4 h-4"})}),a.jsx("button",{onClick:$t=>{$t.stopPropagation(),se(Be)},className:"p-2 text-slate-300 hover:text-indigo-600 hover:bg-white rounded-lg transition-all",children:Be.archived?a.jsx(U2,{className:"w-4 h-4"}):a.jsx(Md,{className:"w-4 h-4"})}),a.jsx("button",{onClick:$t=>{$t.stopPropagation(),ae(Be)},className:"p-2 text-slate-300 hover:text-red-500 hover:bg-white rounded-lg transition-all",children:a.jsx(br,{className:"w-4 h-4"})})]})]},Be.id)})})}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Gn.map(Be=>{const gt=de.includes(Be.id);return a.jsxs("div",{onClick:()=>ve(Be),className:`bg-white p-6 rounded-3xl border ${gt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} relative group cursor-pointer hover:shadow-lg transition-all`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-50 flex items-center justify-center text-indigo-600",children:a.jsx(Hs,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity flex gap-1",children:[a.jsx("button",{onClick:Pt=>{Pt.stopPropagation(),ve(Be)},className:"p-1.5 text-slate-400 hover:text-indigo-600",title:"View task",children:a.jsx(Wd,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Pt=>{Pt.stopPropagation(),se(Be)},className:"p-1.5 text-slate-400 hover:text-indigo-600",children:a.jsx(Md,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:Pt=>{Pt.stopPropagation(),ae(Be)},className:"p-1.5 text-slate-400 hover:text-red-500",children:a.jsx(br,{className:"w-3.5 h-3.5"})})]}),a.jsx("div",{onClick:Pt=>Pt.stopPropagation(),className:`${gt?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:gt,onChange:()=>ye(Pt=>gt?Pt.filter($t=>$t!==Be.id):[...Pt,Be.id])})})]})]}),a.jsx("h4",{className:`font-bold text-slate-900 mb-2 ${Be.status==="Done"?"line-through opacity-40":""}`,children:Be.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2 mb-4",children:Be.description}),Be.category&&a.jsx("div",{className:"flex items-center gap-2 mb-2",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-indigo-50 rounded-full",children:[a.jsx(Xa,{className:"w-3.5 h-3.5 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600",children:Be.category})]})}),Be.assigneeId&&(()=>{const Pt=u.find($t=>$t.id===Be.assigneeId);return Pt?a.jsx("div",{className:"flex items-center gap-2 mb-4",children:a.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-emerald-50 rounded-full",children:[a.jsx(co,{className:"w-3.5 h-3.5 text-emerald-600"}),a.jsx("span",{className:"text-[10px] font-bold text-emerald-600",children:Pt.name})]})}):null})(),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-50",children:[Be.dueDate?a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Ln,{className:"w-3.5 h-3.5 text-slate-400"}),a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:G(Be.dueDate)})]}):a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase",children:"Ongoing"}),a.jsx("div",{className:`px-2.5 py-1 rounded-full text-[9px] font-black uppercase ${Be.priority==="High"?"bg-red-50 text-red-600":Be.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Be.priority})]})]},Be.id)})}),_&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(oE,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Enterprise Registry Import"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Logistical Data Migration"})]})]}),a.jsx("button",{onClick:()=>T(!1),className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(zt,{className:"w-6 h-6 text-slate-400"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:D==="upload"?a.jsxs("div",{className:"space-y-10 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-100 rounded-3xl p-8",children:[a.jsxs("h4",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest flex items-center gap-2 mb-6",children:[a.jsx(u0,{className:"w-4 h-4"})," Registry Data Requirements"]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Title *"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Official objective identifier."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Category"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Organizational category (optional). New categories from the file are added automatically."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"})," Column: Due Date *"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:'e.g. 15-2-2026, YYYY-MM-DD, or February 15, 2026. Use "Ongoing" for no date.'})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Priority"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Low, Medium, or High."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Description"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Strategic context/notes."})]}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter flex items-center gap-2",children:[a.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-slate-300"})," Column: Task Owner"]}),a.jsx("p",{className:"text-[10px] text-slate-500 font-medium ml-3.5",children:"Task owner name or email (optional)."})]})]})]}),a.jsxs("div",{className:"flex flex-col gap-5",children:[a.jsxs("button",{onClick:()=>{var Be;return(Be=ge.current)==null?void 0:Be.click()},className:"w-full py-16 border-4 border-dashed border-slate-100 rounded-[40px] flex flex-col items-center justify-center gap-4 hover:border-indigo-400 hover:bg-indigo-50/30 transition-all group shadow-sm bg-white",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-300 group-hover:text-indigo-600 group-hover:scale-110 transition-all border border-slate-100 shadow-inner",children:a.jsx(OH,{className:"w-8 h-8"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("span",{className:"text-lg font-black text-slate-900 block mb-1",children:"Select Local Registry"}),a.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Supports CSV, XLS, XLSX"})]})]}),a.jsxs("button",{onClick:nt,className:"w-full py-5 bg-white border-2 border-slate-100 text-slate-600 rounded-[24px] text-xs font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 hover:bg-slate-50 transition-all shadow-sm",children:[a.jsx(n0,{className:"w-5 h-5 text-indigo-500"})," Download Registry Schema (Excel Template)"]})]})]}):a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-right-4 duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h4",{className:"text-lg font-black text-slate-900",children:"Smart Mapping Interface"}),a.jsxs("span",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Data Detected"]})]}),a.jsxs("p",{className:"text-sm text-slate-500 leading-relaxed",children:["We've detected ",C.length," columns and ",F.length," rows in your file. Ensure the ImpactFlow system properties are correctly mapped below."]}),a.jsx("div",{className:"space-y-4 bg-slate-50 p-8 rounded-[32px] border border-slate-100",children:[{label:"Task Name (Title)",key:"title",required:!0,icon:a.jsx(Dn,{className:"w-4 h-4"})},{label:"Task Category",key:"category",required:!1,icon:a.jsx(Xa,{className:"w-4 h-4"})},{label:"Due Date",key:"dueDate",required:!0,icon:a.jsx(Ln,{className:"w-4 h-4"})},{label:"Task Description",key:"description",required:!1,icon:a.jsx(u0,{className:"w-4 h-4"})},{label:"Priority Level",key:"priority",required:!1,icon:a.jsx(Xa,{className:"w-4 h-4"})},{label:"Task Owner",key:"owner",required:!1,icon:a.jsx(co,{className:"w-4 h-4"})}].map(Be=>a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4 group",children:[a.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-white border border-slate-100 rounded-xl flex items-center justify-center text-slate-400 group-hover:text-indigo-600 group-hover:border-indigo-200 transition-all",children:Be.icon}),a.jsx("div",{children:a.jsxs("p",{className:"text-xs font-black text-slate-700 uppercase tracking-tighter",children:[Be.label," ",Be.required&&a.jsx("span",{className:"text-red-500",children:"*"})]})})]}),a.jsx(Oi,{className:"w-4 h-4 text-slate-300 hidden sm:block"}),a.jsxs("select",{value:Y[Be.key]||"",onChange:gt=>V({...Y,[Be.key]:gt.target.value}),className:"flex-1 px-4 py-2.5 bg-white border border-slate-200 rounded-xl text-xs font-bold text-slate-600 outline-none focus:ring-2 focus:ring-indigo-100",children:[a.jsx("option",{value:"",children:"-- Select Source Column --"}),C.map(gt=>a.jsx("option",{value:gt,children:gt},gt))]})]},Be.key))}),a.jsxs("div",{className:"flex gap-4 pt-6",children:[a.jsx("button",{onClick:()=>{A("upload"),B([]),M([]),V({title:"",category:"",dueDate:"",description:"",priority:"",owner:""}),ge.current&&(ge.current.value="")},className:"flex-1 py-5 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Back to Upload"}),a.jsx("button",{onClick:ut,disabled:J||!Y.title||!Y.dueDate,className:"flex-[2] py-5 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:J?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-5 h-5 animate-spin"})," Importing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-5 h-5"})," Execute Registry Deploy"]})})]})]})}),a.jsx("input",{ref:ge,type:"file",accept:".csv,.xls,.xlsx",className:"hidden",onChange:Mt})]})}),H&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:H.archived?a.jsx(U2,{className:"w-6 h-6"}):a.jsx(Md,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:H.archived?"Restore Task?":"Archive Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:H.archived?"This will restore the task to active status.":"This will move the task to archive. You can restore it later."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:H.title}),H.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:H.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>se(null),disabled:E===H.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>We(H.id),disabled:E===H.id,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:E===H.id?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),H.archived?"Restoring...":"Archiving..."]}):H.archived?"Restore Task":"Archive Task"})]})]})}),ce&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:ce.title}),ce.description&&a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:ce.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>ae(null),disabled:X===ce.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>Ve(ce.id),disabled:X===ce.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:X===ce.id?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Task"})]})]})}),de.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:de.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:Be=>{Be.stopPropagation(),ee(!0),qe("")},disabled:fe,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-500 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[a.jsx(nd,{className:"w-3.5 h-3.5"}),"Assign to project"]}),a.jsxs("button",{onClick:Be=>{Be.stopPropagation(),Ue(!0)},disabled:xe,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[xe?a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>ye([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(zt,{className:"w-5 h-5"})})]})]})}),me&&de.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-indigo-50 text-indigo-600",children:a.jsx(nd,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Assign to project"}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-1",children:["Change the linked project for ",de.length," selected task",de.length>1?"s":"","."]})]})]}),a.jsx("label",{className:"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Project"}),a.jsxs("select",{value:Ee,onChange:Be=>qe(Be.target.value),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-500 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"Select project..."}),a.jsx("option",{value:"__none__",children:"None (General)"}),d.filter(Be=>!Be.archived).map(Be=>a.jsx("option",{value:Be.id,children:Be.title},Be.id))]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>{ee(!1),qe("")},disabled:fe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:Ge,disabled:fe||!Ee,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:fe?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Assigning..."]}):`Assign ${de.length} task${de.length>1?"s":""}`})]})]})}),Ae&&de.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",de.length," Task",de.length>1?"s":"","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The tasks will be permanently removed."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(Be=>de.includes(Be.id)).slice(0,5).map(Be=>{var gt;return a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[a.jsx(Hs,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Be.title}),a.jsx("p",{className:"text-[10px] text-slate-500",children:((gt=d.find(Pt=>Pt.id===Be.projectId))==null?void 0:gt.title)||"General"})]})]},Be.id)}),de.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",de.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Ue(!1),disabled:xe,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:_e,disabled:xe,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:xe?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${de.length} Task${de.length>1?"s":""}`})]})]})}),Z&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:dl}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:dl,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(zt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:a.jsx(Hs,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[ne?a.jsx("input",{type:"text",value:Q.title,onChange:Be=>Ne(gt=>({...gt,title:Be.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:Z.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${Z.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":Z.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":Z.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:Z.status}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",Z.id.substring(0,8)]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:ne?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{He(!1),Ne({title:Z.title,description:Z.description||"",dueDate:Z.dueDate||"",priority:Z.priority||"Medium",status:Z.status||"Todo",assigneeId:Z.assigneeId,projectId:Z.projectId||""})},disabled:Xe,className:"px-4 py-2 border border-slate-200 text-slate-500 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"CANCEL"}),a.jsx("button",{onClick:_r,disabled:Xe||!Q.title.trim()||!Q.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:Xe?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),"SAVE CHANGES"]})})]}):a.jsxs("button",{onClick:()=>He(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Eo,{className:"w-4 h-4"}),"Edit Task"]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"ASSIGNEE"}),ne?a.jsxs("select",{value:Q.assigneeId,onChange:Be=>Ne(gt=>({...gt,assigneeId:Be.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"Select Assignee"}),u.map(Be=>a.jsx("option",{value:Be.id,children:Be.name},Be.id))]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:((Ul=(Si=u.find(Be=>Be.id===Z.assigneeId))==null?void 0:Si.name)==null?void 0:Ul.charAt(0))||"U"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((pd=u.find(Be=>Be.id===Z.assigneeId))==null?void 0:pd.name)||"Unassigned"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"LINKED PROJECT"}),ne?a.jsxs("select",{value:Q.projectId,onChange:Be=>Ne(gt=>({...gt,projectId:Be.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"None"}),d.filter(Be=>!Be.archived).map(Be=>a.jsx("option",{value:Be.id,children:Be.title},Be.id))]}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:Z.projectId?((ii=d.find(Be=>Be.id===Z.projectId))==null?void 0:ii.title)||"Unknown Project":"None"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] flex items-center gap-2 px-1",children:[a.jsx(Dn,{className:"w-4 h-4 text-indigo-500"})," DESCRIPTION"]}),ne?a.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:a.jsx(zA,{value:Q.description||"",onChange:Be=>Ne(gt=>({...gt,description:Be})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):a.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[Z.description?a.jsx(NU,{content:Z.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert max-w-none prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50 [&_ul]:list-disc [&_ul]:pl-6 [&_ul]:my-3 [&_ol]:list-decimal [&_ol]:pl-6 [&_ol]:my-3 [&_li]:my-1 [&_li]:pl-1"}):a.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[a.jsx(Xa,{className:"w-3.5 h-3.5"})," TASK CATEGORY"]}),ne?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsxs("select",{value:jr?"__new__":Q.category||"",onChange:Be=>{const gt=Be.target.value;gt==="__new__"?(Pr(!0),Ne(Pt=>({...Pt,category:""}))):(Pr(!1),Ne(Pt=>({...Pt,category:gt})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),wr.map(Be=>a.jsx("option",{value:Be,children:Be},Be)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),jr&&a.jsx("input",{type:"text",value:Q.category,onChange:Be=>Ne(gt=>({...gt,category:Be.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):a.jsx("div",{className:"flex items-center gap-2 mt-2",children:Z.category?a.jsxs(a.Fragment,{children:[a.jsx(Xa,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-sm font-bold text-indigo-700",children:Z.category})]}):a.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"DUE DATE"}),ne?a.jsx("input",{type:"date",value:Q.dueDate,onChange:Be=>Ne(gt=>({...gt,dueDate:Be.target.value})),placeholder:"dd/mm/yyyy",className:"w-full px-4 py-2 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-600 mt-2 [color-scheme:light]"}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:Z.dueDate?G(Z.dueDate):"Ongoing"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"PRIORITY"}),ne?a.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200 mt-2",children:["Low","Medium","High"].map(Be=>a.jsx("button",{onClick:()=>Ne(gt=>({...gt,priority:Be})),className:`flex-1 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${Q.priority===Be?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:Be.toUpperCase()},Be))}):a.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${Z.priority==="High"?"bg-red-50 text-red-600":Z.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:Z.priority})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"STATUS"}),ne?a.jsxs("select",{value:Q.status,onChange:Be=>Ne(gt=>({...gt,status:Be.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"Todo",children:"Todo"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Review",children:"Review"}),a.jsx("option",{value:"Done",children:"Done"})]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[Z.status==="Done"?a.jsx(Qr,{className:"w-5 h-5 text-emerald-500"}):Z.status==="In Progress"?a.jsx(Qa,{className:"w-5 h-5 text-blue-500 animate-pulse"}):a.jsx(Hd,{className:"w-5 h-5 text-slate-400"}),a.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:Z.status})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(wi,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",Z.notes&&Z.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:Z.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{ref:Ce,rows:5,value:Ke,onChange:Pn,onBlur:()=>{setTimeout(()=>qt(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),gr&&Cr.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Hh,{className:"w-3 h-3"}),"Mention User"]}),Cr.map(Be=>a.jsxs("button",{onClick:()=>Vs(Be),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:Be.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:Be.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:Be.email})]})]},Be.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:_t?a.jsx(_o,{className:"w-4 h-4"}):a.jsx(cd,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:_t?(ke==null?void 0:ke.name)||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:De,type:"file",accept:"image/*",onChange:Ts,className:"hidden"})]}),a.jsx("button",{onClick:Fa,disabled:mt||!Ke.trim()&&!ke,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:mt?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jo,{className:"w-4 h-4"}),"Send"]})})]}),_t&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:_t,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{vt(""),Je(null),De.current&&(De.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(zt,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:Z.notes&&Z.notes.length>0?[...Z.notes].reverse().map(Be=>{var Pt;const gt=(t==null?void 0:t.role)==="Admin"||Be.userId===(t==null?void 0:t.id);return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:((Pt=Be.userName)==null?void 0:Pt.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:Be.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(Be.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),gt&&a.jsx("button",{onClick:()=>Vt(Be.id),disabled:Ye===Be.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:Ye===Be.id?a.jsx(ct,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),Be.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:gs(Be.text)}),Be.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsx("img",{src:Be.imageUrl,alt:Be.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const $t=window.open();$t&&$t.document.write(`<img src="${Be.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},Be.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(wi,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("button",{onClick:()=>yr(!It),className:"w-full flex items-center justify-between group",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[a.jsx(Cu,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),a.jsx(ra,{className:`w-4 h-4 text-slate-400 transition-transform ${It?"rotate-90":""}`})]}),It&&a.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:Z.createdAt?new Date(Z.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),Z.updatedAt&&Z.updatedAt!==Z.createdAt&&a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(Z.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),Z.notes&&Z.notes.map((Be,gt)=>a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[Be.userName," added a comment"]}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(Be.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},Be.id)),(!Z.notes||Z.notes.length===0)&&(!Z.updatedAt||Z.updatedAt===Z.createdAt)&&a.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>{ae(Z),dl()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:dl,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(Qr,{className:"w-5 h-5"})," CLOSE"]})]})]})]}),xt&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-200",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto",children:a.jsx(On,{className:"w-6 h-6"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"Delete Note?"}),a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to delete this note? This action cannot be undone."})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 bg-slate-50 border-t border-slate-200",children:[a.jsx("button",{onClick:()=>Vt(null),disabled:Ye===xt,className:"flex-1 px-4 py-2 bg-white border-2 border-slate-200 text-slate-700 font-bold text-sm rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:dn,disabled:Ye===xt,className:"flex-1 px-4 py-2 bg-red-600 text-white font-bold text-sm rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Ye===xt?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(br,{className:"w-4 h-4"}),"Delete"]})})]})]})})]})};function aa(e){"@babel/helpers - typeof";return aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aa(e)}var lo=Uint8Array,Dl=Uint16Array,qA=Int32Array,LN=new lo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),FN=new lo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ES=new lo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),jU=function(e,t){for(var r=new Dl(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var s=new qA(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},kU=jU(LN,2),SU=kU.b,TS=kU.r;SU[28]=258,TS[258]=28;var _U=jU(FN,0),NCe=_U.b,V8=_U.r,OS=new Dl(32768);for(var Pa=0;Pa<32768;++Pa){var yf=(Pa&43690)>>1|(Pa&21845)<<1;yf=(yf&52428)>>2|(yf&13107)<<2,yf=(yf&61680)>>4|(yf&3855)<<4,OS[Pa]=((yf&65280)>>8|(yf&255)<<8)>>1}var Xd=function(e,t,r){for(var n=e.length,s=0,i=new Dl(t);s<n;++s)e[s]&&++i[e[s]-1];var o=new Dl(t);for(s=1;s<t;++s)o[s]=o[s-1]+i[s-1]<<1;var l;if(r){l=new Dl(1<<t);var c=15-t;for(s=0;s<n;++s)if(e[s])for(var d=s<<4|e[s],f=t-e[s],u=o[e[s]-1]++<<f,p=u|(1<<f)-1;u<=p;++u)l[OS[u]>>c]=d}else for(l=new Dl(n),s=0;s<n;++s)e[s]&&(l[s]=OS[o[e[s]-1]++]>>15-e[s]);return l},g0=new lo(288);for(var Pa=0;Pa<144;++Pa)g0[Pa]=8;for(var Pa=144;Pa<256;++Pa)g0[Pa]=9;for(var Pa=256;Pa<280;++Pa)g0[Pa]=7;for(var Pa=280;Pa<288;++Pa)g0[Pa]=8;var U1=new lo(32);for(var Pa=0;Pa<32;++Pa)U1[Pa]=5;var jCe=Xd(g0,9,0),kCe=Xd(g0,9,1),SCe=Xd(U1,5,0),_Ce=Xd(U1,5,1),v4=function(e){for(var t=e[0],r=1;r<e.length;++r)e[r]>t&&(t=e[r]);return t},$c=function(e,t,r){var n=t/8|0;return(e[n]|e[n+1]<<8)>>(t&7)&r},b4=function(e,t){var r=t/8|0;return(e[r]|e[r+1]<<8|e[r+2]<<16)>>(t&7)},HA=function(e){return(e+7)/8|0},AU=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new lo(e.subarray(t,r))},ACe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Hc=function(e,t,r){var n=new Error(t||ACe[e]);if(n.code=e,Error.captureStackTrace&&Error.captureStackTrace(n,Hc),!r)throw n;return n},CCe=function(e,t,r,n){var s=e.length,i=0;if(!s||t.f&&!t.l)return r||new lo(0);var o=!r,l=o||t.i!=2,c=t.i;o&&(r=new lo(s*3));var d=function(ve){var ne=r.length;if(ve>ne){var He=new lo(Math.max(ne*2,ve));He.set(r),r=He}},f=t.f||0,u=t.p||0,p=t.b||0,h=t.l,m=t.d,g=t.m,x=t.n,v=s*8;do{if(!h){f=$c(e,u,1);var b=$c(e,u+1,3);if(u+=3,b)if(b==1)h=kCe,m=_Ce,g=9,x=5;else if(b==2){var S=$c(e,u,31)+257,j=$c(e,u+10,15)+4,_=S+$c(e,u+5,31)+1;u+=14;for(var T=new lo(_),D=new lo(19),A=0;A<j;++A)D[ES[A]]=$c(e,u+A*3,7);u+=j*3;for(var C=v4(D),M=(1<<C)-1,F=Xd(D,C,1),A=0;A<_;){var B=F[$c(e,u,M)];u+=B&15;var w=B>>4;if(w<16)T[A++]=w;else{var Y=0,V=0;for(w==16?(V=3+$c(e,u,3),u+=2,Y=T[A-1]):w==17?(V=3+$c(e,u,7),u+=3):w==18&&(V=11+$c(e,u,127),u+=7);V--;)T[A++]=Y}}var J=T.subarray(0,S),U=T.subarray(S);g=v4(J),x=v4(U),h=Xd(J,g,1),m=Xd(U,x,1)}else Hc(1);else{var w=HA(u)+4,y=e[w-4]|e[w-3]<<8,N=w+y;if(N>s){c&&Hc(0);break}l&&d(p+y),r.set(e.subarray(w,N),p),t.b=p+=y,t.p=u=N*8,t.f=f;continue}if(u>v){c&&Hc(0);break}}l&&d(p+131072);for(var X=(1<<g)-1,W=(1<<x)-1,E=u;;E=u){var Y=h[b4(e,u)&X],R=Y>>4;if(u+=Y&15,u>v){c&&Hc(0);break}if(Y||Hc(2),R<256)r[p++]=R;else if(R==256){E=u,h=null;break}else{var q=R-254;if(R>264){var A=R-257,L=LN[A];q=$c(e,u,(1<<L)-1)+SU[A],u+=L}var H=m[b4(e,u)&W],se=H>>4;H||Hc(3),u+=H&15;var U=NCe[se];if(se>3){var L=FN[se];U+=b4(e,u)&(1<<L)-1,u+=L}if(u>v){c&&Hc(0);break}l&&d(p+131072);var ce=p+q;if(p<U){var ae=i-U,Z=Math.min(U,ce);for(ae+p<0&&Hc(3);p<Z;++p)r[p]=n[ae+p]}for(;p<ce;++p)r[p]=r[p-U]}}t.l=h,t.p=E,t.b=p,t.f=f,h&&(f=1,t.m=g,t.d=m,t.n=x)}while(!f);return p!=r.length&&o?AU(r,0,p):r.subarray(0,p)},du=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Ug=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},y4=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var s=r.length,i=r.slice();if(!s)return{t:EU,l:0};if(s==1){var o=new lo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(N,S){return N.f-S.f}),r.push({s:-1,f:25001});var l=r[0],c=r[1],d=0,f=1,u=2;for(r[0]={s:-1,f:l.f+c.f,l,r:c};f!=s-1;)l=r[r[d].f<r[u].f?d++:u++],c=r[d!=f&&r[d].f<r[u].f?d++:u++],r[f++]={s:-1,f:l.f+c.f,l,r:c};for(var p=i[0].s,n=1;n<s;++n)i[n].s>p&&(p=i[n].s);var h=new Dl(p+1),m=PS(r[f-1],h,0);if(m>t){var n=0,g=0,x=m-t,v=1<<x;for(i.sort(function(S,j){return h[j.s]-h[S.s]||S.f-j.f});n<s;++n){var b=i[n].s;if(h[b]>t)g+=v-(1<<m-h[b]),h[b]=t;else break}for(g>>=x;g>0;){var w=i[n].s;h[w]<t?g-=1<<t-h[w]++-1:++n}for(;n>=0&&g;--n){var y=i[n].s;h[y]==t&&(--h[y],++g)}m=t}return{t:new lo(h),l:m}},PS=function(e,t,r){return e.s==-1?Math.max(PS(e.l,t,r+1),PS(e.r,t,r+1)):t[e.s]=r},G8=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Dl(++t),n=0,s=e[0],i=1,o=function(c){r[n++]=c},l=1;l<=t;++l)if(e[l]==s&&l!=t)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=e[l]}return{c:r.subarray(0,n),n:t}},zg=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},CU=function(e,t,r){var n=r.length,s=HA(t+2);e[s]=n&255,e[s+1]=n>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var i=0;i<n;++i)e[s+i+4]=r[i];return(s+4+n)*8},K8=function(e,t,r,n,s,i,o,l,c,d,f){du(t,f++,r),++s[256];for(var u=y4(s,15),p=u.t,h=u.l,m=y4(i,15),g=m.t,x=m.l,v=G8(p),b=v.c,w=v.n,y=G8(g),N=y.c,S=y.n,j=new Dl(19),_=0;_<b.length;++_)++j[b[_]&31];for(var _=0;_<N.length;++_)++j[N[_]&31];for(var T=y4(j,7),D=T.t,A=T.l,C=19;C>4&&!D[ES[C-1]];--C);var M=d+5<<3,F=zg(s,g0)+zg(i,U1)+o,B=zg(s,p)+zg(i,g)+o+14+3*C+zg(j,D)+2*j[16]+3*j[17]+7*j[18];if(c>=0&&M<=F&&M<=B)return CU(t,f,e.subarray(c,c+d));var Y,V,J,U;if(du(t,f,1+(B<F)),f+=2,B<F){Y=Xd(p,h,0),V=p,J=Xd(g,x,0),U=g;var X=Xd(D,A,0);du(t,f,w-257),du(t,f+5,S-1),du(t,f+10,C-4),f+=14;for(var _=0;_<C;++_)du(t,f+3*_,D[ES[_]]);f+=3*C;for(var W=[b,N],E=0;E<2;++E)for(var R=W[E],_=0;_<R.length;++_){var q=R[_]&31;du(t,f,X[q]),f+=D[q],q>15&&(du(t,f,R[_]>>5&127),f+=R[_]>>12)}}else Y=jCe,V=g0,J=SCe,U=U1;for(var _=0;_<l;++_){var L=n[_];if(L>255){var q=L>>18&31;Ug(t,f,Y[q+257]),f+=V[q+257],q>7&&(du(t,f,L>>23&31),f+=LN[q]);var H=L&31;Ug(t,f,J[H]),f+=U[H],H>3&&(Ug(t,f,L>>5&8191),f+=FN[H])}else Ug(t,f,Y[L]),f+=V[L]}return Ug(t,f,Y[256]),f+V[256]},ECe=new qA([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),EU=new lo(0),TCe=function(e,t,r,n,s,i){var o=i.z||e.length,l=new lo(n+o+5*(1+Math.ceil(o/7e3))+s),c=l.subarray(n,l.length-s),d=i.l,f=(i.r||0)&7;if(t){f&&(c[0]=i.r>>3);for(var u=ECe[t-1],p=u>>13,h=u&8191,m=(1<<r)-1,g=i.p||new Dl(32768),x=i.h||new Dl(m+1),v=Math.ceil(r/3),b=2*v,w=function(Xe){return(e[Xe]^e[Xe+1]<<v^e[Xe+2]<<b)&m},y=new qA(25e3),N=new Dl(288),S=new Dl(32),j=0,_=0,T=i.i||0,D=0,A=i.w||0,C=0;T+2<o;++T){var M=w(T),F=T&32767,B=x[M];if(g[F]=B,x[M]=F,A<=T){var Y=o-T;if((j>7e3||D>24576)&&(Y>423||!d)){f=K8(e,c,0,y,N,S,_,D,C,T-C,f),D=j=_=0,C=T;for(var V=0;V<286;++V)N[V]=0;for(var V=0;V<30;++V)S[V]=0}var J=2,U=0,X=h,W=F-B&32767;if(Y>2&&M==w(T-W))for(var E=Math.min(p,Y)-1,R=Math.min(32767,T),q=Math.min(258,Y);W<=R&&--X&&F!=B;){if(e[T+J]==e[T+J-W]){for(var L=0;L<q&&e[T+L]==e[T+L-W];++L);if(L>J){if(J=L,U=W,L>E)break;for(var H=Math.min(W,L-2),se=0,V=0;V<H;++V){var ce=T-W+V&32767,ae=g[ce],Z=ce-ae&32767;Z>se&&(se=Z,B=ce)}}}F=B,B=g[F],W+=F-B&32767}if(U){y[D++]=268435456|TS[J]<<18|V8[U];var ve=TS[J]&31,ne=V8[U]&31;_+=LN[ve]+FN[ne],++N[257+ve],++S[ne],A=T+J,++j}else y[D++]=e[T],++N[e[T]]}}for(T=Math.max(T,A);T<o;++T)y[D++]=e[T],++N[e[T]];f=K8(e,c,d,y,N,S,_,D,C,T-C,f),d||(i.r=f&7|c[f/8|0]<<3,f-=7,i.h=x,i.p=g,i.i=T,i.w=A)}else{for(var T=i.w||0;T<o+d;T+=65535){var He=T+65535;He>=o&&(c[f/8|0]=d,He=o),f=CU(c,f+1,e.subarray(T,He))}i.i=o}return AU(l,0,n+HA(f)+s)},TU=function(){var e=1,t=0;return{p:function(r){for(var n=e,s=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)s+=n+=r[o];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}e=n,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},OCe=function(e,t,r,n,s){if(!s&&(s={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new lo(i.length+e.length);o.set(i),o.set(e,i.length),e=o,s.w=i.length}return TCe(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,s)},OU=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},PCe=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=TU();s.p(t.dictionary),OU(e,2,s.d())}},ICe=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&Hc(6,"invalid zlib data"),(e[1]>>5&1)==1&&Hc(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function IS(e,t){t||(t={});var r=TU();r.p(e);var n=OCe(e,t,t.dictionary?6:2,4);return PCe(n,t),OU(n,n.length-4,r.d()),n}function DCe(e,t){return CCe(e.subarray(ICe(e),-4),{i:2},t,t)}var LCe=typeof TextDecoder<"u"&&new TextDecoder,FCe=0;try{LCe.decode(EU,{stream:!0}),FCe=1}catch{}var Hr=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function w4(){Hr.console&&typeof Hr.console.log=="function"&&Hr.console.log.apply(Hr.console,arguments)}var ha={log:w4,warn:function(e){Hr.console&&(typeof Hr.console.warn=="function"?Hr.console.warn.apply(Hr.console,arguments):w4.call(null,arguments))},error:function(e){Hr.console&&(typeof Hr.console.error=="function"?Hr.console.error.apply(Hr.console,arguments):w4(e))}};function N4(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){ih(n.response,t,r)},n.onerror=function(){ha.error("could not download file")},n.send()}function X8(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function $y(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var kv,DS,ih=Hr.saveAs||((typeof window>"u"?"undefined":aa(window))!=="object"||window!==Hr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=Hr.URL||Hr.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?X8(s.href)?N4(e,t,r):$y(s,s.target="_blank"):$y(s)):(s.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){$y(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(X8(e))N4(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){$y(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:aa(i)!=="object"&&(ha.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return N4(e,t,r);var s=e.type==="application/octet-stream",i=/constructor/i.test(Hr.HTMLElement)||Hr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":aa(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var f=l.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},l.readAsDataURL(e)}else{var c=Hr.URL||Hr.webkitURL,d=c.createObjectURL(e);n?n.location=d:location.href=d,n=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function PU(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,o=s.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function j4(e,t){var r=e[0],n=e[1],s=e[2],i=e[3];r=Xi(r,n,s,i,t[0],7,-680876936),i=Xi(i,r,n,s,t[1],12,-389564586),s=Xi(s,i,r,n,t[2],17,606105819),n=Xi(n,s,i,r,t[3],22,-1044525330),r=Xi(r,n,s,i,t[4],7,-176418897),i=Xi(i,r,n,s,t[5],12,1200080426),s=Xi(s,i,r,n,t[6],17,-1473231341),n=Xi(n,s,i,r,t[7],22,-45705983),r=Xi(r,n,s,i,t[8],7,1770035416),i=Xi(i,r,n,s,t[9],12,-1958414417),s=Xi(s,i,r,n,t[10],17,-42063),n=Xi(n,s,i,r,t[11],22,-1990404162),r=Xi(r,n,s,i,t[12],7,1804603682),i=Xi(i,r,n,s,t[13],12,-40341101),s=Xi(s,i,r,n,t[14],17,-1502002290),r=Yi(r,n=Xi(n,s,i,r,t[15],22,1236535329),s,i,t[1],5,-165796510),i=Yi(i,r,n,s,t[6],9,-1069501632),s=Yi(s,i,r,n,t[11],14,643717713),n=Yi(n,s,i,r,t[0],20,-373897302),r=Yi(r,n,s,i,t[5],5,-701558691),i=Yi(i,r,n,s,t[10],9,38016083),s=Yi(s,i,r,n,t[15],14,-660478335),n=Yi(n,s,i,r,t[4],20,-405537848),r=Yi(r,n,s,i,t[9],5,568446438),i=Yi(i,r,n,s,t[14],9,-1019803690),s=Yi(s,i,r,n,t[3],14,-187363961),n=Yi(n,s,i,r,t[8],20,1163531501),r=Yi(r,n,s,i,t[13],5,-1444681467),i=Yi(i,r,n,s,t[2],9,-51403784),s=Yi(s,i,r,n,t[7],14,1735328473),r=Qi(r,n=Yi(n,s,i,r,t[12],20,-1926607734),s,i,t[5],4,-378558),i=Qi(i,r,n,s,t[8],11,-2022574463),s=Qi(s,i,r,n,t[11],16,1839030562),n=Qi(n,s,i,r,t[14],23,-35309556),r=Qi(r,n,s,i,t[1],4,-1530992060),i=Qi(i,r,n,s,t[4],11,1272893353),s=Qi(s,i,r,n,t[7],16,-155497632),n=Qi(n,s,i,r,t[10],23,-1094730640),r=Qi(r,n,s,i,t[13],4,681279174),i=Qi(i,r,n,s,t[0],11,-358537222),s=Qi(s,i,r,n,t[3],16,-722521979),n=Qi(n,s,i,r,t[6],23,76029189),r=Qi(r,n,s,i,t[9],4,-640364487),i=Qi(i,r,n,s,t[12],11,-421815835),s=Qi(s,i,r,n,t[15],16,530742520),r=Ji(r,n=Qi(n,s,i,r,t[2],23,-995338651),s,i,t[0],6,-198630844),i=Ji(i,r,n,s,t[7],10,1126891415),s=Ji(s,i,r,n,t[14],15,-1416354905),n=Ji(n,s,i,r,t[5],21,-57434055),r=Ji(r,n,s,i,t[12],6,1700485571),i=Ji(i,r,n,s,t[3],10,-1894986606),s=Ji(s,i,r,n,t[10],15,-1051523),n=Ji(n,s,i,r,t[1],21,-2054922799),r=Ji(r,n,s,i,t[8],6,1873313359),i=Ji(i,r,n,s,t[15],10,-30611744),s=Ji(s,i,r,n,t[6],15,-1560198380),n=Ji(n,s,i,r,t[13],21,1309151649),r=Ji(r,n,s,i,t[4],6,-145523070),i=Ji(i,r,n,s,t[11],10,-1120210379),s=Ji(s,i,r,n,t[2],15,718787259),n=Ji(n,s,i,r,t[9],21,-343485551),e[0]=Kf(r,e[0]),e[1]=Kf(n,e[1]),e[2]=Kf(s,e[2]),e[3]=Kf(i,e[3])}function MN(e,t,r,n,s,i){return t=Kf(Kf(t,e),Kf(n,i)),Kf(t<<s|t>>>32-s,r)}function Xi(e,t,r,n,s,i,o){return MN(t&r|~t&n,e,t,s,i,o)}function Yi(e,t,r,n,s,i,o){return MN(t&n|r&~n,e,t,s,i,o)}function Qi(e,t,r,n,s,i,o){return MN(t^r^n,e,t,s,i,o)}function Ji(e,t,r,n,s,i,o){return MN(r^(t|~n),e,t,s,i,o)}function IU(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)j4(n,MCe(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(j4(n,s),t=0;t<16;t++)s[t]=0;return s[14]=8*r,j4(n,s),n}function MCe(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}kv=Hr.atob.bind(Hr),DS=Hr.btoa.bind(Hr);var Y8="0123456789abcdef".split("");function RCe(e){for(var t="",r=0;r<4;r++)t+=Y8[e>>8*r+4&15]+Y8[e>>8*r&15];return t}function BCe(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function LS(e){return IU(e).map(BCe).join("")}var $Ce=function(e){for(var t=0;t<e.length;t++)e[t]=RCe(e[t]);return e.join("")}(IU("hello"))!="5d41402abc4b2a76b9719d911017c592";function Kf(e,t){if($Ce){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function FS(e,t){var r,n,s,i;if(e!==r){for(var o=(s=e,i=1+(256/e.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var f=l[c];d=(d+f+o.charCodeAt(c))%256,l[c]=l[d],l[d]=f}r=e,n=l}else l=n;var u=t.length,p=0,h=0,m="";for(c=0;c<u;c++)h=(h+(f=l[p=(p+1)%256]))%256,l[p]=l[h],l[h]=f,o=l[(l[p]+l[h])%256],m+=String.fromCharCode(t.charCodeAt(c)^o);return m}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var Q8={print:4,modify:8,copy:16,"annot-forms":32};function Zp(e,t,r,n){this.v=1,this.r=2;var s=192;e.forEach(function(l){if(Q8.perm!==void 0)throw new Error("Invalid permission: "+l);s+=Q8[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=LS(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=FS(this.encryptionKey,this.padding)}function em(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var s=e.charCodeAt(n);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[n]}return t}function J8(e){if(aa(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){Hr.console&&ha.error("jsPDF PubSub Error",l.message,l)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function f5(e){if(!(this instanceof f5))return new f5(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function DU(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function lh(e,t,r,n,s){if(!(this instanceof lh))return new lh(e,t,r,n,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,DU.call(this,n,s)}function vm(e,t,r,n,s){if(!(this instanceof vm))return new vm(e,t,r,n,s);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,DU.call(this,n,s)}function qr(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],o=[],l=1,c=16,d="S",f=null;aa(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,s=e.format||s,i=e.compress||e.compressPdf||i,(f=e.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(c=e.floatPrecision),d=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var u=e.putOnlyUsedFonts||!1,p={},h={internal:{},__private__:{}};h.__private__.PubSub=J8;var m="1.3",g=h.__private__.getPdfVersion=function(){return m};h.__private__.setPdfVersion=function(z){m=z};var x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};h.__private__.getPageFormats=function(){return x};var v=h.__private__.getPageFormat=function(z){return x[z]};s=s||"a4";var b={COMPAT:"compat",ADVANCED:"advanced"},w=b.COMPAT;function y(){this.saveGraphicsState(),Q(new It(Qe,0,0,-Qe,0,Cc()*Qe).toString()+" cm"),this.setFontSize(this.getFontSize()/Qe),d="n",w=b.ADVANCED}function N(){this.restoreGraphicsState(),d="S",w=b.COMPAT}var S=h.__private__.combineFontStyleAndFontWeight=function(z,pe){if(z=="bold"&&pe=="normal"||z=="bold"&&pe==400||z=="normal"&&pe=="italic"||z=="bold"&&pe=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return pe&&(z=pe==400||pe==="normal"?z==="italic"?"italic":"normal":pe!=700&&pe!=="bold"||z!=="normal"?(pe==700?"bold":pe)+""+z:"bold"),z};h.advancedAPI=function(z){var pe=w===b.COMPAT;return pe&&y.call(this),typeof z!="function"||(z(this),pe&&N.call(this)),this},h.compatAPI=function(z){var pe=w===b.ADVANCED;return pe&&N.call(this),typeof z!="function"||(z(this),pe&&y.call(this)),this},h.isAdvancedAPI=function(){return w===b.ADVANCED};var j,_=function(z){if(w!==b.ADVANCED)throw new Error(z+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},T=h.roundToPrecision=h.__private__.roundToPrecision=function(z,pe){var ze=t||pe;if(isNaN(z)||isNaN(ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return z.toFixed(ze).replace(/0+$/,"")};j=h.hpf=h.__private__.hpf=typeof c=="number"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return T(z,c)}:c==="smart"?function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return T(z,z>-1&&z<1?16:5)}:function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.hpf");return T(z,16)};var D=h.f2=h.__private__.f2=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f2");return T(z,2)},A=h.__private__.f3=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.f3");return T(z,3)},C=h.scale=h.__private__.scale=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.scale");return w===b.COMPAT?z*Qe:w===b.ADVANCED?z:void 0},M=function(z){return w===b.COMPAT?Cc()-z:w===b.ADVANCED?z:void 0},F=function(z){return C(M(z))};h.__private__.setPrecision=h.setPrecision=function(z){typeof parseInt(z,10)=="number"&&(t=parseInt(z,10))};var B,Y="00000000000000000000000000000000",V=h.__private__.getFileId=function(){return Y},J=h.__private__.setFileId=function(z){return Y=z!==void 0&&/^[a-fA-F0-9]{32}$/.test(z)?z.toUpperCase():Y.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(Ir=new Zp(f.userPermissions,f.userPassword,f.ownerPassword,Y)),Y};h.setFileId=function(z){return J(z),this},h.getFileId=function(){return V()};var U=h.__private__.convertDateToPDFDate=function(z){var pe=z.getTimezoneOffset(),ze=pe<0?"+":"-",et=Math.floor(Math.abs(pe/60)),lt=Math.abs(pe%60),Nt=[ze,q(et),"'",q(lt),"'"].join("");return["D:",z.getFullYear(),q(z.getMonth()+1),q(z.getDate()),q(z.getHours()),q(z.getMinutes()),q(z.getSeconds()),Nt].join("")},X=h.__private__.convertPDFDateToDate=function(z){var pe=parseInt(z.substr(2,4),10),ze=parseInt(z.substr(6,2),10)-1,et=parseInt(z.substr(8,2),10),lt=parseInt(z.substr(10,2),10),Nt=parseInt(z.substr(12,2),10),Ft=parseInt(z.substr(14,2),10);return new Date(pe,ze,et,lt,Nt,Ft,0)},W=h.__private__.setCreationDate=function(z){var pe;if(z===void 0&&(z=new Date),z instanceof Date)pe=U(z);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(z))throw new Error("Invalid argument passed to jsPDF.setCreationDate");pe=z}return B=pe},E=h.__private__.getCreationDate=function(z){var pe=B;return z==="jsDate"&&(pe=X(B)),pe};h.setCreationDate=function(z){return W(z),this},h.getCreationDate=function(z){return E(z)};var R,q=h.__private__.padd2=function(z){return("0"+parseInt(z)).slice(-2)},L=h.__private__.padd2Hex=function(z){return("00"+(z=z.toString())).substr(z.length)},H=0,se=[],ce=[],ae=0,Z=[],ve=[],ne=!1,He=ce,Xe=function(){H=0,ae=0,ce=[],se=[],Z=[],Ce=Pr(),Oe=Pr()};h.__private__.setCustomOutputDestination=function(z){ne=!0,He=z};var ie=function(z){ne||(He=z)};h.__private__.resetCustomOutputDestination=function(){ne=!1,He=ce};var Q=h.__private__.out=function(z){return z=z.toString(),ae+=z.length+1,He.push(z),He},Ne=h.__private__.write=function(z){return Q(arguments.length===1?z.toString():Array.prototype.join.call(arguments," "))},de=h.__private__.getArrayBuffer=function(z){for(var pe=z.length,ze=new ArrayBuffer(pe),et=new Uint8Array(ze);pe--;)et[pe]=z.charCodeAt(pe);return ze},ye=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];h.__private__.getStandardFonts=function(){return ye};var xe=e.fontSize||16;h.__private__.setFontSize=h.setFontSize=function(z){return xe=w===b.ADVANCED?z/Qe:z,this};var we,Ae=h.__private__.getFontSize=h.getFontSize=function(){return w===b.COMPAT?xe:xe*Qe},Ue=e.R2L||!1;h.__private__.setR2L=h.setR2L=function(z){return Ue=z,this},h.__private__.getR2L=h.getR2L=function(){return Ue};var me,ee=h.__private__.setZoomMode=function(z){var pe=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(z))we=z;else if(isNaN(z)){if(pe.indexOf(z)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+z+'" is not recognized.');we=z}else we=parseInt(z,10)};h.__private__.getZoomMode=function(){return we};var fe,Fe=h.__private__.setPageMode=function(z){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(z)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+z+'" is not recognized.');me=z};h.__private__.getPageMode=function(){return me};var Ee=h.__private__.setLayoutMode=function(z){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(z)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+z+'" is not recognized.');fe=z};h.__private__.getLayoutMode=function(){return fe},h.__private__.setDisplayMode=h.setDisplayMode=function(z,pe,ze){return ee(z),Ee(pe),Fe(ze),this};var qe={title:"",subject:"",author:"",keywords:"",creator:""};h.__private__.getDocumentProperty=function(z){if(Object.keys(qe).indexOf(z)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return qe[z]},h.__private__.getDocumentProperties=function(){return qe},h.__private__.setDocumentProperties=h.setProperties=h.setDocumentProperties=function(z){for(var pe in qe)qe.hasOwnProperty(pe)&&z[pe]&&(qe[pe]=z[pe]);return this},h.__private__.setDocumentProperty=function(z,pe){if(Object.keys(qe).indexOf(z)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return qe[z]=pe};var Ke,Qe,_t,vt,ke,Je={},mt={},ue=[],Ye={},bt={},xt={},Vt={},gr=null,qt=0,Gt=[],Bt=new J8(h),fr=e.hotfixes||[],Sr={},Cr={},cr=[],It=function z(pe,ze,et,lt,Nt,Ft){if(!(this instanceof z))return new z(pe,ze,et,lt,Nt,Ft);isNaN(pe)&&(pe=1),isNaN(ze)&&(ze=0),isNaN(et)&&(et=0),isNaN(lt)&&(lt=1),isNaN(Nt)&&(Nt=0),isNaN(Ft)&&(Ft=0),this._matrix=[pe,ze,et,lt,Nt,Ft]};Object.defineProperty(It.prototype,"sx",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(It.prototype,"shy",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(It.prototype,"shx",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(It.prototype,"sy",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(It.prototype,"tx",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(It.prototype,"ty",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(It.prototype,"a",{get:function(){return this._matrix[0]},set:function(z){this._matrix[0]=z}}),Object.defineProperty(It.prototype,"b",{get:function(){return this._matrix[1]},set:function(z){this._matrix[1]=z}}),Object.defineProperty(It.prototype,"c",{get:function(){return this._matrix[2]},set:function(z){this._matrix[2]=z}}),Object.defineProperty(It.prototype,"d",{get:function(){return this._matrix[3]},set:function(z){this._matrix[3]=z}}),Object.defineProperty(It.prototype,"e",{get:function(){return this._matrix[4]},set:function(z){this._matrix[4]=z}}),Object.defineProperty(It.prototype,"f",{get:function(){return this._matrix[5]},set:function(z){this._matrix[5]=z}}),Object.defineProperty(It.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(It.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(It.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(It.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),It.prototype.join=function(z){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(j).join(z)},It.prototype.multiply=function(z){var pe=z.sx*this.sx+z.shy*this.shx,ze=z.sx*this.shy+z.shy*this.sy,et=z.shx*this.sx+z.sy*this.shx,lt=z.shx*this.shy+z.sy*this.sy,Nt=z.tx*this.sx+z.ty*this.shx+this.tx,Ft=z.tx*this.shy+z.ty*this.sy+this.ty;return new It(pe,ze,et,lt,Nt,Ft)},It.prototype.decompose=function(){var z=this.sx,pe=this.shy,ze=this.shx,et=this.sy,lt=this.tx,Nt=this.ty,Ft=Math.sqrt(z*z+pe*pe),sr=(z/=Ft)*ze+(pe/=Ft)*et;ze-=z*sr,et-=pe*sr;var Ar=Math.sqrt(ze*ze+et*et);return sr/=Ar,z*(et/=Ar)<pe*(ze/=Ar)&&(z=-z,pe=-pe,sr=-sr,Ft=-Ft),{scale:new It(Ft,0,0,Ar,0,0),translate:new It(1,0,0,1,lt,Nt),rotate:new It(z,pe,-pe,z,0,0),skew:new It(1,0,sr,1,0,0)}},It.prototype.toString=function(z){return this.join(" ")},It.prototype.inversed=function(){var z=this.sx,pe=this.shy,ze=this.shx,et=this.sy,lt=this.tx,Nt=this.ty,Ft=1/(z*et-pe*ze),sr=et*Ft,Ar=-pe*Ft,Gr=-ze*Ft,zr=z*Ft;return new It(sr,Ar,Gr,zr,-sr*lt-Gr*Nt,-Ar*lt-zr*Nt)},It.prototype.applyToPoint=function(z){var pe=z.x*this.sx+z.y*this.shx+this.tx,ze=z.x*this.shy+z.y*this.sy+this.ty;return new hl(pe,ze)},It.prototype.applyToRectangle=function(z){var pe=this.applyToPoint(z),ze=this.applyToPoint(new hl(z.x+z.w,z.y+z.h));return new Ac(pe.x,pe.y,ze.x-pe.x,ze.y-pe.y)},It.prototype.clone=function(){var z=this.sx,pe=this.shy,ze=this.shx,et=this.sy,lt=this.tx,Nt=this.ty;return new It(z,pe,ze,et,lt,Nt)},h.Matrix=It;var yr=h.matrixMult=function(z,pe){return pe.multiply(z)},wr=new It(1,0,0,1,0,0);h.unitMatrix=h.identityMatrix=wr;var Fr=function(z,pe){if(!bt[z]){var ze=(pe instanceof lh?"Sh":"P")+(Object.keys(Ye).length+1).toString(10);pe.id=ze,bt[z]=ze,Ye[ze]=pe,Bt.publish("addPattern",pe)}};h.ShadingPattern=lh,h.TilingPattern=vm,h.addShadingPattern=function(z,pe){return _("addShadingPattern()"),Fr(z,pe),this},h.beginTilingPattern=function(z){_("beginTilingPattern()"),I0(z.boundingBox[0],z.boundingBox[1],z.boundingBox[2]-z.boundingBox[0],z.boundingBox[3]-z.boundingBox[1],z.matrix)},h.endTilingPattern=function(z,pe){_("endTilingPattern()"),pe.stream=ve[R].join(`
`),Fr(z,pe),Bt.publish("endTilingPattern",pe),cr.pop().restore()};var jr=h.__private__.newObject=function(){var z=Pr();return ge(z,!0),z},Pr=h.__private__.newObjectDeferred=function(){return H++,se[H]=function(){return ae},H},ge=function(z,pe){return pe=typeof pe=="boolean"&&pe,se[z]=ae,pe&&Q(z+" 0 obj"),z},De=h.__private__.newAdditionalObject=function(){var z={objId:Pr(),content:""};return Z.push(z),z},Ce=Pr(),Oe=Pr(),G=h.__private__.decodeColorString=function(z){var pe=z.split(" ");if(pe.length!==2||pe[1]!=="g"&&pe[1]!=="G")pe.length===5&&(pe[4]==="k"||pe[4]==="K")&&(pe=[(1-pe[0])*(1-pe[3]),(1-pe[1])*(1-pe[3]),(1-pe[2])*(1-pe[3]),"r"]);else{var ze=parseFloat(pe[0]);pe=[ze,ze,ze,"r"]}for(var et="#",lt=0;lt<3;lt++)et+=("0"+Math.floor(255*parseFloat(pe[lt])).toString(16)).slice(-2);return et},oe=h.__private__.encodeColorString=function(z){var pe;typeof z=="string"&&(z={ch1:z});var ze=z.ch1,et=z.ch2,lt=z.ch3,Nt=z.ch4,Ft=z.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof ze=="string"&&ze.charAt(0)!=="#"){var sr=new PU(ze);if(sr.ok)ze=sr.toHex();else if(!/^\d*\.?\d*$/.test(ze))throw new Error('Invalid color "'+ze+'" passed to jsPDF.encodeColorString.')}if(typeof ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(ze)&&(ze="#"+ze[1]+ze[1]+ze[2]+ze[2]+ze[3]+ze[3]),typeof ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(ze)){var Ar=parseInt(ze.substr(1),16);ze=Ar>>16&255,et=Ar>>8&255,lt=255&Ar}if(et===void 0||Nt===void 0&&ze===et&&et===lt)if(typeof ze=="string")pe=ze+" "+Ft[0];else switch(z.precision){case 2:pe=D(ze/255)+" "+Ft[0];break;case 3:default:pe=A(ze/255)+" "+Ft[0]}else if(Nt===void 0||aa(Nt)==="object"){if(Nt&&!isNaN(Nt.a)&&Nt.a===0)return pe=["1.","1.","1.",Ft[1]].join(" ");if(typeof ze=="string")pe=[ze,et,lt,Ft[1]].join(" ");else switch(z.precision){case 2:pe=[D(ze/255),D(et/255),D(lt/255),Ft[1]].join(" ");break;default:case 3:pe=[A(ze/255),A(et/255),A(lt/255),Ft[1]].join(" ")}}else if(typeof ze=="string")pe=[ze,et,lt,Nt,Ft[2]].join(" ");else switch(z.precision){case 2:pe=[D(ze),D(et),D(lt),D(Nt),Ft[2]].join(" ");break;case 3:default:pe=[A(ze),A(et),A(lt),A(Nt),Ft[2]].join(" ")}return pe},Pe=h.__private__.getFilters=function(){return o},$e=h.__private__.putStream=function(z){var pe=(z=z||{}).data||"",ze=z.filters||Pe(),et=z.alreadyAppliedFilters||[],lt=z.addLength1||!1,Nt=pe.length,Ft=z.objectId,sr=function(Gs){return Gs};if(f!==null&&Ft===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(sr=Ir.encryptor(Ft,0));var Ar={};ze===!0&&(ze=["FlateEncode"]);var Gr=z.additionalKeyValues||[],zr=(Ar=qr.API.processDataByFilters!==void 0?qr.API.processDataByFilters(pe,ze):{data:pe,reverseChain:[]}).reverseChain+(Array.isArray(et)?et.join(" "):et.toString());if(Ar.data.length!==0&&(Gr.push({key:"Length",value:Ar.data.length}),lt===!0&&Gr.push({key:"Length1",value:Nt})),zr.length!=0)if(zr.split("/").length-1==1)Gr.push({key:"Filter",value:zr});else{Gr.push({key:"Filter",value:"["+zr+"]"});for(var mn=0;mn<Gr.length;mn+=1)if(Gr[mn].key==="DecodeParms"){for(var ja=[],ka=0;ka<Ar.reverseChain.split("/").length-1;ka+=1)ja.push("null");ja.push(Gr[mn].value),Gr[mn].value="["+ja.join(" ")+"]"}}Q("<<");for(var ns=0;ns<Gr.length;ns++)Q("/"+Gr[ns].key+" "+Gr[ns].value);Q(">>"),Ar.data.length!==0&&(Q("stream"),Q(sr(Ar.data)),Q("endstream"))},We=h.__private__.putPage=function(z){var pe=z.number,ze=z.data,et=z.objId,lt=z.contentsObjId;ge(et,!0),Q("<</Type /Page"),Q("/Parent "+z.rootDictionaryObjId+" 0 R"),Q("/Resources "+z.resourceDictionaryObjId+" 0 R"),Q("/MediaBox ["+parseFloat(j(z.mediaBox.bottomLeftX))+" "+parseFloat(j(z.mediaBox.bottomLeftY))+" "+j(z.mediaBox.topRightX)+" "+j(z.mediaBox.topRightY)+"]"),z.cropBox!==null&&Q("/CropBox ["+j(z.cropBox.bottomLeftX)+" "+j(z.cropBox.bottomLeftY)+" "+j(z.cropBox.topRightX)+" "+j(z.cropBox.topRightY)+"]"),z.bleedBox!==null&&Q("/BleedBox ["+j(z.bleedBox.bottomLeftX)+" "+j(z.bleedBox.bottomLeftY)+" "+j(z.bleedBox.topRightX)+" "+j(z.bleedBox.topRightY)+"]"),z.trimBox!==null&&Q("/TrimBox ["+j(z.trimBox.bottomLeftX)+" "+j(z.trimBox.bottomLeftY)+" "+j(z.trimBox.topRightX)+" "+j(z.trimBox.topRightY)+"]"),z.artBox!==null&&Q("/ArtBox ["+j(z.artBox.bottomLeftX)+" "+j(z.artBox.bottomLeftY)+" "+j(z.artBox.topRightX)+" "+j(z.artBox.topRightY)+"]"),typeof z.userUnit=="number"&&z.userUnit!==1&&Q("/UserUnit "+z.userUnit),Bt.publish("putPage",{objId:et,pageContext:Gt[pe],pageNumber:pe,page:ze}),Q("/Contents "+lt+" 0 R"),Q(">>"),Q("endobj");var Nt=ze.join(`
`);return w===b.ADVANCED&&(Nt+=`
Q`),ge(lt,!0),$e({data:Nt,filters:Pe(),objectId:lt}),Q("endobj"),et},Ve=h.__private__.putPages=function(){var z,pe,ze=[];for(z=1;z<=qt;z++)Gt[z].objId=Pr(),Gt[z].contentsObjId=Pr();for(z=1;z<=qt;z++)ze.push(We({number:z,data:ve[z],objId:Gt[z].objId,contentsObjId:Gt[z].contentsObjId,mediaBox:Gt[z].mediaBox,cropBox:Gt[z].cropBox,bleedBox:Gt[z].bleedBox,trimBox:Gt[z].trimBox,artBox:Gt[z].artBox,userUnit:Gt[z].userUnit,rootDictionaryObjId:Ce,resourceDictionaryObjId:Oe}));ge(Ce,!0),Q("<</Type /Pages");var et="/Kids [";for(pe=0;pe<qt;pe++)et+=ze[pe]+" 0 R ";Q(et+"]"),Q("/Count "+qt),Q(">>"),Q("endobj"),Bt.publish("postPutPages")},Re=function(z){Bt.publish("putFont",{font:z,out:Q,newObject:jr,putStream:$e}),z.isAlreadyPutted!==!0&&(z.objectNumber=jr(),Q("<<"),Q("/Type /Font"),Q("/BaseFont /"+em(z.postScriptName)),Q("/Subtype /Type1"),typeof z.encoding=="string"&&Q("/Encoding /"+z.encoding),Q("/FirstChar 32"),Q("/LastChar 255"),Q(">>"),Q("endobj"))},_e=function(){for(var z in Je)Je.hasOwnProperty(z)&&(u===!1||u===!0&&p.hasOwnProperty(z))&&Re(Je[z])},Ge=function(z){z.objectNumber=jr();var pe=[];pe.push({key:"Type",value:"/XObject"}),pe.push({key:"Subtype",value:"/Form"}),pe.push({key:"BBox",value:"["+[j(z.x),j(z.y),j(z.x+z.width),j(z.y+z.height)].join(" ")+"]"}),pe.push({key:"Matrix",value:"["+z.matrix.toString()+"]"});var ze=z.pages[1].join(`
`);$e({data:ze,additionalKeyValues:pe,objectId:z.objectNumber}),Q("endobj")},nt=function(){for(var z in Sr)Sr.hasOwnProperty(z)&&Ge(Sr[z])},ut=function(z,pe){var ze,et=[],lt=1/(pe-1);for(ze=0;ze<1;ze+=lt)et.push(ze);if(et.push(1),z[0].offset!=0){var Nt={offset:0,color:z[0].color};z.unshift(Nt)}if(z[z.length-1].offset!=1){var Ft={offset:1,color:z[z.length-1].color};z.push(Ft)}for(var sr="",Ar=0,Gr=0;Gr<et.length;Gr++){for(ze=et[Gr];ze>z[Ar+1].offset;)Ar++;var zr=z[Ar].offset,mn=(ze-zr)/(z[Ar+1].offset-zr),ja=z[Ar].color,ka=z[Ar+1].color;sr+=L(Math.round((1-mn)*ja[0]+mn*ka[0]).toString(16))+L(Math.round((1-mn)*ja[1]+mn*ka[1]).toString(16))+L(Math.round((1-mn)*ja[2]+mn*ka[2]).toString(16))}return sr.trim()},wt=function(z,pe){pe||(pe=21);var ze=jr(),et=ut(z.colors,pe),lt=[];lt.push({key:"FunctionType",value:"0"}),lt.push({key:"Domain",value:"[0.0 1.0]"}),lt.push({key:"Size",value:"["+pe+"]"}),lt.push({key:"BitsPerSample",value:"8"}),lt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),lt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),$e({data:et,additionalKeyValues:lt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:ze}),Q("endobj"),z.objectNumber=jr(),Q("<< /ShadingType "+z.type),Q("/ColorSpace /DeviceRGB");var Nt="/Coords ["+j(parseFloat(z.coords[0]))+" "+j(parseFloat(z.coords[1]))+" ";z.type===2?Nt+=j(parseFloat(z.coords[2]))+" "+j(parseFloat(z.coords[3])):Nt+=j(parseFloat(z.coords[2]))+" "+j(parseFloat(z.coords[3]))+" "+j(parseFloat(z.coords[4]))+" "+j(parseFloat(z.coords[5])),Q(Nt+="]"),z.matrix&&Q("/Matrix ["+z.matrix.toString()+"]"),Q("/Function "+ze+" 0 R"),Q("/Extend [true true]"),Q(">>"),Q("endobj")},Mt=function(z,pe){var ze=Pr(),et=jr();pe.push({resourcesOid:ze,objectOid:et}),z.objectNumber=et;var lt=[];lt.push({key:"Type",value:"/Pattern"}),lt.push({key:"PatternType",value:"1"}),lt.push({key:"PaintType",value:"1"}),lt.push({key:"TilingType",value:"1"}),lt.push({key:"BBox",value:"["+z.boundingBox.map(j).join(" ")+"]"}),lt.push({key:"XStep",value:j(z.xStep)}),lt.push({key:"YStep",value:j(z.yStep)}),lt.push({key:"Resources",value:ze+" 0 R"}),z.matrix&&lt.push({key:"Matrix",value:"["+z.matrix.toString()+"]"}),$e({data:z.stream,additionalKeyValues:lt,objectId:z.objectNumber}),Q("endobj")},Xt=function(z){var pe;for(pe in Ye)Ye.hasOwnProperty(pe)&&(Ye[pe]instanceof lh?wt(Ye[pe]):Ye[pe]instanceof vm&&Mt(Ye[pe],z))},_r=function(z){for(var pe in z.objectNumber=jr(),Q("<<"),z)switch(pe){case"opacity":Q("/ca "+D(z[pe]));break;case"stroke-opacity":Q("/CA "+D(z[pe]))}Q(">>"),Q("endobj")},$n=function(){var z;for(z in xt)xt.hasOwnProperty(z)&&_r(xt[z])},Ts=function(){for(var z in Q("/XObject <<"),Sr)Sr.hasOwnProperty(z)&&Sr[z].objectNumber>=0&&Q("/"+z+" "+Sr[z].objectNumber+" 0 R");Bt.publish("putXobjectDict"),Q(">>")},Pn=function(){Ir.oid=jr(),Q("<<"),Q("/Filter /Standard"),Q("/V "+Ir.v),Q("/R "+Ir.r),Q("/U <"+Ir.toHexString(Ir.U)+">"),Q("/O <"+Ir.toHexString(Ir.O)+">"),Q("/P "+Ir.P),Q(">>"),Q("endobj")},Vs=function(){for(var z in Q("/Font <<"),Je)Je.hasOwnProperty(z)&&(u===!1||u===!0&&p.hasOwnProperty(z))&&Q("/"+z+" "+Je[z].objectNumber+" 0 R");Q(">>")},ya=function(){if(Object.keys(Ye).length>0){for(var z in Q("/Shading <<"),Ye)Ye.hasOwnProperty(z)&&Ye[z]instanceof lh&&Ye[z].objectNumber>=0&&Q("/"+z+" "+Ye[z].objectNumber+" 0 R");Bt.publish("putShadingPatternDict"),Q(">>")}},gs=function(z){if(Object.keys(Ye).length>0){for(var pe in Q("/Pattern <<"),Ye)Ye.hasOwnProperty(pe)&&Ye[pe]instanceof h.TilingPattern&&Ye[pe].objectNumber>=0&&Ye[pe].objectNumber<z&&Q("/"+pe+" "+Ye[pe].objectNumber+" 0 R");Bt.publish("putTilingPatternDict"),Q(">>")}},Fa=function(){if(Object.keys(xt).length>0){var z;for(z in Q("/ExtGState <<"),xt)xt.hasOwnProperty(z)&&xt[z].objectNumber>=0&&Q("/"+z+" "+xt[z].objectNumber+" 0 R");Bt.publish("putGStateDict"),Q(">>")}},dn=function(z){ge(z.resourcesOid,!0),Q("<<"),Q("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Vs(),ya(),gs(z.objectOid),Fa(),Ts(),Q(">>"),Q("endobj")},dl=function(){var z=[];_e(),$n(),nt(),Xt(z),Bt.publish("putResources"),z.forEach(dn),dn({resourcesOid:Oe,objectOid:Number.MAX_SAFE_INTEGER}),Bt.publish("postPutResources")},Gn=function(){Bt.publish("putAdditionalObjects");for(var z=0;z<Z.length;z++){var pe=Z[z];ge(pe.objId,!0),Q(pe.content),Q("endobj")}Bt.publish("postPutAdditionalObjects")},Si=function(z){mt[z.fontName]=mt[z.fontName]||{},mt[z.fontName][z.fontStyle]=z.id},Ul=function(z,pe,ze,et,lt){var Nt={id:"F"+(Object.keys(Je).length+1).toString(10),postScriptName:z,fontName:pe,fontStyle:ze,encoding:et,isStandardFont:lt||!1,metadata:{}};return Bt.publish("addFont",{font:Nt,instance:this}),Je[Nt.id]=Nt,Si(Nt),Nt.id},pd=function(z){for(var pe=0,ze=ye.length;pe<ze;pe++){var et=Ul.call(this,z[pe][0],z[pe][1],z[pe][2],ye[pe][3],!0);u===!1&&(p[et]=!0);var lt=z[pe][0].split("-");Si({id:et,fontName:lt[0],fontStyle:lt[1]||""})}Bt.publish("addFonts",{fonts:Je,dictionary:mt})},ii=function(z){return z.foo=function(){try{return z.apply(this,arguments)}catch(et){var pe=et.stack||"";~pe.indexOf(" at ")&&(pe=pe.split(" at ")[1]);var ze="Error in function "+pe.split(`
`)[0].split("<")[0]+": "+et.message;if(!Hr.console)throw new Error(ze);Hr.console.error(ze,et),Hr.alert&&alert(ze)}},z.foo.bar=z,z.foo},Be=function(z,pe){var ze,et,lt,Nt,Ft,sr,Ar,Gr,zr;if(lt=(pe=pe||{}).sourceEncoding||"Unicode",Ft=pe.outputEncoding,(pe.autoencode||Ft)&&Je[Ke].metadata&&Je[Ke].metadata[lt]&&Je[Ke].metadata[lt].encoding&&(Nt=Je[Ke].metadata[lt].encoding,!Ft&&Je[Ke].encoding&&(Ft=Je[Ke].encoding),!Ft&&Nt.codePages&&(Ft=Nt.codePages[0]),typeof Ft=="string"&&(Ft=Nt[Ft]),Ft)){for(Ar=!1,sr=[],ze=0,et=z.length;ze<et;ze++)(Gr=Ft[z.charCodeAt(ze)])?sr.push(String.fromCharCode(Gr)):sr.push(z[ze]),sr[ze].charCodeAt(0)>>8&&(Ar=!0);z=sr.join("")}for(ze=z.length;Ar===void 0&&ze!==0;)z.charCodeAt(ze-1)>>8&&(Ar=!0),ze--;if(!Ar)return z;for(sr=pe.noBOM?[]:[254,255],ze=0,et=z.length;ze<et;ze++){if((zr=(Gr=z.charCodeAt(ze))>>8)>>8)throw new Error("Character at position "+ze+" of string '"+z+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");sr.push(zr),sr.push(Gr-(zr<<8))}return String.fromCharCode.apply(void 0,sr)},gt=h.__private__.pdfEscape=h.pdfEscape=function(z,pe){return Be(z,pe).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Pt=h.__private__.beginPage=function(z){ve[++qt]=[],Gt[qt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(z[0]),topRightY:Number(z[1])}},hr(qt),ie(ve[R])},$t=function(z,pe){var ze,et,lt;switch(r=pe||r,typeof z=="string"&&(ze=v(z.toLowerCase()),Array.isArray(ze)&&(et=ze[0],lt=ze[1])),Array.isArray(z)&&(et=z[0]*Qe,lt=z[1]*Qe),isNaN(et)&&(et=s[0],lt=s[1]),(et>14400||lt>14400)&&(ha.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),et=Math.min(14400,et),lt=Math.min(14400,lt)),s=[et,lt],r.substr(0,1)){case"l":lt>et&&(s=[lt,et]);break;case"p":et>lt&&(s=[lt,et])}Pt(s),Xr(ir),Q(Fo),gd!==0&&Q(gd+" J"),P0!==0&&Q(P0+" j"),Bt.publish("addPage",{pageNumber:qt})},dr=function(z){z>0&&z<=qt&&(ve.splice(z,1),Gt.splice(z,1),qt--,R>qt&&(R=qt),this.setPage(R))},hr=function(z){z>0&&z<=qt&&(R=z)},Mr=h.__private__.getNumberOfPages=h.getNumberOfPages=function(){return ve.length-1},Wn=function(z,pe,ze){var et,lt=void 0;return ze=ze||{},z=z!==void 0?z:Je[Ke].fontName,pe=pe!==void 0?pe:Je[Ke].fontStyle,et=z.toLowerCase(),mt[et]!==void 0&&mt[et][pe]!==void 0?lt=mt[et][pe]:mt[z]!==void 0&&mt[z][pe]!==void 0?lt=mt[z][pe]:ze.disableWarning===!1&&ha.warn("Unable to look up font label for font '"+z+"', '"+pe+"'. Refer to getFontList() for available fonts."),lt||ze.noFallback||(lt=mt.times[pe])==null&&(lt=mt.times.normal),lt},Jn=h.__private__.putInfo=function(){var z=jr(),pe=function(et){return et};for(var ze in f!==null&&(pe=Ir.encryptor(z,0)),Q("<<"),Q("/Producer ("+gt(pe("jsPDF "+qr.version))+")"),qe)qe.hasOwnProperty(ze)&&qe[ze]&&Q("/"+ze.substr(0,1).toUpperCase()+ze.substr(1)+" ("+gt(pe(qe[ze]))+")");Q("/CreationDate ("+gt(pe(B))+")"),Q(">>"),Q("endobj")},_n=h.__private__.putCatalog=function(z){var pe=(z=z||{}).rootDictionaryObjId||Ce;switch(jr(),Q("<<"),Q("/Type /Catalog"),Q("/Pages "+pe+" 0 R"),we||(we="fullwidth"),we){case"fullwidth":Q("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Q("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Q("/OpenAction [3 0 R /Fit]");break;case"original":Q("/OpenAction [3 0 R /XYZ null null 1]");break;default:var ze=""+we;ze.substr(ze.length-1)==="%"&&(we=parseInt(we)/100),typeof we=="number"&&Q("/OpenAction [3 0 R /XYZ null null "+D(we)+"]")}switch(fe||(fe="continuous"),fe){case"continuous":Q("/PageLayout /OneColumn");break;case"single":Q("/PageLayout /SinglePage");break;case"two":case"twoleft":Q("/PageLayout /TwoColumnLeft");break;case"tworight":Q("/PageLayout /TwoColumnRight")}me&&Q("/PageMode /"+me),Bt.publish("putCatalog"),Q(">>"),Q("endobj")},Nr=h.__private__.putTrailer=function(){Q("trailer"),Q("<<"),Q("/Size "+(H+1)),Q("/Root "+H+" 0 R"),Q("/Info "+(H-1)+" 0 R"),f!==null&&Q("/Encrypt "+Ir.oid+" 0 R"),Q("/ID [ <"+Y+"> <"+Y+"> ]"),Q(">>")},Rt=h.__private__.putHeader=function(){Q("%PDF-"+m),Q("%")},Ur=h.__private__.putXRef=function(){var z="0000000000";Q("xref"),Q("0 "+(H+1)),Q("0000000000 65535 f ");for(var pe=1;pe<=H;pe++)typeof se[pe]=="function"?Q((z+se[pe]()).slice(-10)+" 00000 n "):se[pe]!==void 0?Q((z+se[pe]).slice(-10)+" 00000 n "):Q("0000000000 00000 n ")},lr=h.__private__.buildDocument=function(){Xe(),ie(ce),Bt.publish("buildDocument"),Rt(),Ve(),Gn(),dl(),f!==null&&Pn(),Jn(),_n();var z=ae;return Ur(),Nr(),Q("startxref"),Q(""+z),Q("%%EOF"),ie(ve[R]),ce.join(`
`)},pr=h.__private__.getBlob=function(z){return new Blob([de(z)],{type:"application/pdf"})},Qt=h.output=h.__private__.output=ii(function(z,pe){switch(typeof(pe=pe||{})=="string"?pe={filename:pe}:pe.filename=pe.filename||"generated.pdf",z){case void 0:return lr();case"save":h.save(pe.filename);break;case"arraybuffer":return de(lr());case"blob":return pr(lr());case"bloburi":case"bloburl":if(Hr.URL!==void 0&&typeof Hr.URL.createObjectURL=="function")return Hr.URL&&Hr.URL.createObjectURL(pr(lr()))||void 0;ha.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var ze="",et=lr();try{ze=DS(et)}catch{ze=DS(unescape(encodeURIComponent(et)))}return"data:application/pdf;filename="+pe.filename+";base64,"+ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Hr)==="[object Window]"){var lt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Nt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';pe.pdfObjectUrl&&(lt=pe.pdfObjectUrl,Nt="");var Ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+lt+'"'+Nt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(pe)+");<\/script></body></html>",sr=Hr.open();return sr!==null&&sr.document.write(Ft),sr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Hr)==="[object Window]"){var Ar='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(pe.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+pe.filename+'" width="500px" height="400px" /></body></html>',Gr=Hr.open();if(Gr!==null){Gr.document.write(Ar);var zr=this;Gr.document.documentElement.querySelector("#pdfViewer").onload=function(){Gr.document.title=pe.filename,Gr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(zr.output("bloburl"))}}return Gr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Hr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var mn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",pe)+'"></iframe></body></html>',ja=Hr.open();if(ja!==null&&(ja.document.write(mn),ja.document.title=pe.filename),ja||typeof safari>"u")return ja;break;case"datauri":case"dataurl":return Hr.document.location.href=this.output("datauristring",pe);default:return null}}),An=function(z){return Array.isArray(fr)===!0&&fr.indexOf(z)>-1};switch(n){case"pt":Qe=1;break;case"mm":Qe=72/25.4;break;case"cm":Qe=72/2.54;break;case"in":Qe=72;break;case"px":Qe=An("px_scaling")==1?.75:96/72;break;case"pc":case"em":Qe=12;break;case"ex":Qe=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);Qe=n}var Ir=null;W(),J();var Jt=function(z){return f!==null?Ir.encryptor(z,0):function(pe){return pe}},tn=h.__private__.getPageInfo=h.getPageInfo=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Gt[z].objId,pageNumber:z,pageContext:Gt[z]}},ur=h.__private__.getPageInfoByObjId=function(z){if(isNaN(z)||z%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var pe in Gt)if(Gt[pe].objId===z)break;return tn(pe)},nr=h.__private__.getCurrentPageInfo=h.getCurrentPageInfo=function(){return{objId:Gt[R].objId,pageNumber:R,pageContext:Gt[R]}};h.addPage=function(){return $t.apply(this,arguments),this},h.setPage=function(){return hr.apply(this,arguments),ie.call(this,ve[R]),this},h.insertPage=function(z){return this.addPage(),this.movePage(R,z),this},h.movePage=function(z,pe){var ze,et;if(z>pe){ze=ve[z],et=Gt[z];for(var lt=z;lt>pe;lt--)ve[lt]=ve[lt-1],Gt[lt]=Gt[lt-1];ve[pe]=ze,Gt[pe]=et,this.setPage(pe)}else if(z<pe){ze=ve[z],et=Gt[z];for(var Nt=z;Nt<pe;Nt++)ve[Nt]=ve[Nt+1],Gt[Nt]=Gt[Nt+1];ve[pe]=ze,Gt[pe]=et,this.setPage(pe)}return this},h.deletePage=function(){return dr.apply(this,arguments),this},h.__private__.text=h.text=function(z,pe,ze,et,lt){var Nt,Ft,sr,Ar,Gr,zr,mn,ja,ka,ns=(et=et||{}).scope||this;if(typeof z=="number"&&typeof pe=="number"&&(typeof ze=="string"||Array.isArray(ze))){var Gs=ze;ze=pe,pe=z,z=Gs}if(arguments[3]instanceof It?(_("The transform parameter of text() with a Matrix value"),ka=lt):(sr=arguments[4],Ar=arguments[5],aa(mn=arguments[3])==="object"&&mn!==null||(typeof sr=="string"&&(Ar=sr,sr=null),typeof mn=="string"&&(Ar=mn,mn=null),typeof mn=="number"&&(sr=mn,mn=null),et={flags:mn,angle:sr,align:Ar})),isNaN(pe)||isNaN(ze)||z==null)throw new Error("Invalid arguments passed to jsPDF.text");if(z.length===0)return ns;var Ps="",Mo=!1,Ks=typeof et.lineHeightFactor=="number"?et.lineHeightFactor:Dt,pl=ns.internal.scaleFactor;function Ec(Kn){return Kn=Kn.split("	").join(Array(et.TabLen||9).join(" ")),gt(Kn,mn)}function nf(Kn){for(var Zn,xn=Kn.concat(),xa=[],vl=xn.length;vl--;)typeof(Zn=xn.shift())=="string"?xa.push(Zn):Array.isArray(Kn)&&(Zn.length===1||Zn[1]===void 0&&Zn[2]===void 0)?xa.push(Zn[0]):xa.push([Zn[0],Zn[1],Zn[2]]);return xa}function L0(Kn,Zn){var xn;if(typeof Kn=="string")xn=Zn(Kn)[0];else if(Array.isArray(Kn)){for(var xa,vl,M0=Kn.concat(),bl=[],uf=M0.length;uf--;)typeof(xa=M0.shift())=="string"?bl.push(Zn(xa)[0]):Array.isArray(xa)&&typeof xa[0]=="string"&&(vl=Zn(xa[0],xa[1],xa[2]),bl.push([vl[0],vl[1],vl[2]]));xn=bl}return xn}var ru=!1,af=!0;if(typeof z=="string")ru=!0;else if(Array.isArray(z)){var sf=z.concat();Ft=[];for(var of,as=sf.length;as--;)(typeof(of=sf.shift())!="string"||Array.isArray(of)&&typeof of[0]!="string")&&(af=!1);ru=af}if(ru===!1)throw new Error('Type of text must be string or Array. "'+z+'" is not recognized.');typeof z=="string"&&(z=z.match(/[\r?\n]/)?z.split(/\r\n|\r|\n/g):[z]);var mo=xe/ns.internal.scaleFactor,ml=mo*(Ks-1);switch(et.baseline){case"bottom":ze-=ml;break;case"top":ze+=mo-ml;break;case"hanging":ze+=mo-2*ml;break;case"middle":ze+=mo/2-ml}if((zr=et.maxWidth||0)>0&&(typeof z=="string"?z=ns.splitTextToSize(z,zr):Object.prototype.toString.call(z)==="[object Array]"&&(z=z.reduce(function(Kn,Zn){return Kn.concat(ns.splitTextToSize(Zn,zr))},[]))),Nt={text:z,x:pe,y:ze,options:et,mutex:{pdfEscape:gt,activeFontKey:Ke,fonts:Je,activeFontSize:xe}},Bt.publish("preProcessText",Nt),z=Nt.text,sr=(et=Nt.options).angle,!(ka instanceof It)&&sr&&typeof sr=="number"){sr*=Math.PI/180,et.rotationDirection===0&&(sr=-sr),w===b.ADVANCED&&(sr=-sr);var Ma=Math.cos(sr),nu=Math.sin(sr);ka=new It(Ma,nu,-nu,Ma,0,0)}else sr&&sr instanceof It&&(ka=sr);w!==b.ADVANCED||ka||(ka=wr),(Gr=et.charSpace||zl)!==void 0&&(Ps+=j(C(Gr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(ja=et.horizontalScale)!==void 0&&(Ps+=j(100*ja)+` Tz
`),et.lang;var Kr=-1,Xs=et.renderingMode!==void 0?et.renderingMode:et.stroke,Sa=ns.internal.getCurrentPageInfo().pageContext;switch(Xs){case 0:case!1:case"fill":Kr=0;break;case 1:case!0:case"stroke":Kr=1;break;case 2:case"fillThenStroke":Kr=2;break;case 3:case"invisible":Kr=3;break;case 4:case"fillAndAddForClipping":Kr=4;break;case 5:case"strokeAndAddPathForClipping":Kr=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Kr=6;break;case 7:case"addToPathForClipping":Kr=7}var li=Sa.usedRenderingMode!==void 0?Sa.usedRenderingMode:-1;Kr!==-1?Ps+=Kr+` Tr
`:li!==-1&&(Ps+=`0 Tr
`),Kr!==-1&&(Sa.usedRenderingMode=Kr),Ar=et.align||"left";var zn,Is=xe*Ks,Ra=ns.internal.pageSize.getWidth(),Ro=Je[Ke];Gr=et.charSpace||zl,zr=et.maxWidth||0,mn=Object.assign({autoencode:!0,noBOM:!0},et.flags);var Ha=[],bs=function(Kn){return ns.getStringUnitWidth(Kn,{font:Ro,charSpace:Gr,fontSize:xe,doKerning:!1})*xe/pl};if(Object.prototype.toString.call(z)==="[object Array]"){var la;Ft=nf(z),Ar!=="left"&&(zn=Ft.map(bs));var ss,Ri=0;if(Ar==="right"){pe-=zn[0],z=[],as=Ft.length;for(var ql=0;ql<as;ql++)ql===0?(ss=Os(pe),la=ul(ze)):(ss=C(Ri-zn[ql]),la=-Is),z.push([Ft[ql],ss,la]),Ri=zn[ql]}else if(Ar==="center"){pe-=zn[0]/2,z=[],as=Ft.length;for(var Bo=0;Bo<as;Bo++)Bo===0?(ss=Os(pe),la=ul(ze)):(ss=C((Ri-zn[Bo])/2),la=-Is),z.push([Ft[Bo],ss,la]),Ri=zn[Bo]}else if(Ar==="left"){z=[],as=Ft.length;for(var lf=0;lf<as;lf++)z.push(Ft[lf])}else if(Ar==="justify"&&Ro.encoding==="Identity-H"){z=[],as=Ft.length,zr=zr!==0?zr:Ra;for(var xl=0,Wa=0;Wa<as;Wa++)if(la=Wa===0?ul(ze):-Is,ss=Wa===0?Os(pe):xl,Wa<as-1){var cf=C((zr-zn[Wa])/(Ft[Wa].split(" ").length-1)),ci=Ft[Wa].split(" ");z.push([ci[0]+" ",ss,la]),xl=0;for(var Bi=1;Bi<ci.length;Bi++){var Tc=(bs(ci[Bi-1]+" "+ci[Bi])-bs(ci[Bi]))*pl+cf;Bi==ci.length-1?z.push([ci[Bi],Tc,0]):z.push([ci[Bi]+" ",Tc,0]),xl-=Tc}}else z.push([Ft[Wa],ss,la]);z.push(["",xl,0])}else{if(Ar!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(z=[],as=Ft.length,zr=zr!==0?zr:Ra,Wa=0;Wa<as;Wa++)la=Wa===0?ul(ze):-Is,ss=Wa===0?Os(pe):0,Wa<as-1?Ha.push(j(C((zr-zn[Wa])/(Ft[Wa].split(" ").length-1)))):Ha.push(0),z.push([Ft[Wa],ss,la])}}var df=typeof et.R2L=="boolean"?et.R2L:Ue;df===!0&&(z=L0(z,function(Kn,Zn,xn){return[Kn.split("").reverse().join(""),Zn,xn]})),Nt={text:z,x:pe,y:ze,options:et,mutex:{pdfEscape:gt,activeFontKey:Ke,fonts:Je,activeFontSize:xe}},Bt.publish("postProcessText",Nt),z=Nt.text,Mo=Nt.mutex.isHex||!1;var bd=Je[Ke].encoding;bd!=="WinAnsiEncoding"&&bd!=="StandardEncoding"||(z=L0(z,function(Kn,Zn,xn){return[Ec(Kn),Zn,xn]})),Ft=nf(z),z=[];for(var $o,$i,xo,Uo=0,gl=1,zo=Array.isArray(Ft[0])?gl:Uo,qo="",F0=function(Kn,Zn,xn){var xa="";return xn instanceof It?(xn=typeof et.angle=="number"?yr(xn,new It(1,0,0,1,Kn,Zn)):yr(new It(1,0,0,1,Kn,Zn),xn),w===b.ADVANCED&&(xn=yr(new It(1,0,0,-1,0,0),xn)),xa=xn.join(" ")+` Tm
`):xa=j(Kn)+" "+j(Zn)+` Td
`,xa},_i=0;_i<Ft.length;_i++){switch(qo="",zo){case gl:xo=(Mo?"<":"(")+Ft[_i][0]+(Mo?">":")"),$o=parseFloat(Ft[_i][1]),$i=parseFloat(Ft[_i][2]);break;case Uo:xo=(Mo?"<":"(")+Ft[_i]+(Mo?">":")"),$o=Os(pe),$i=ul(ze)}Ha!==void 0&&Ha[_i]!==void 0&&(qo=Ha[_i]+` Tw
`),_i===0?z.push(qo+F0($o,$i,ka)+xo):zo===Uo?z.push(qo+xo):zo===gl&&z.push(qo+F0($o,$i,ka)+xo)}z=zo===Uo?z.join(` Tj
T* `):z.join(` Tj
`),z+=` Tj
`;var Ds=`BT
/`;return Ds+=Ke+" "+xe+` Tf
`,Ds+=j(xe*Ks)+` TL
`,Ds+=md+`
`,Ds+=Ps,Ds+=z,Q(Ds+="ET"),p[Ke]=!0,ns};var ar=h.__private__.clip=h.clip=function(z){return Q(z==="evenodd"?"W*":"W"),this};h.clipEvenOdd=function(){return ar("evenodd")},h.__private__.discardPath=h.discardPath=function(){return Q("n"),this};var Un=h.__private__.isValidStyle=function(z){var pe=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(z)!==-1&&(pe=!0),pe};h.__private__.setDefaultPathOperation=h.setDefaultPathOperation=function(z){return Un(z)&&(d=z),this};var wa=h.__private__.getStyle=h.getStyle=function(z){var pe=d;switch(z){case"D":case"S":pe="S";break;case"F":pe="f";break;case"FD":case"DF":pe="B";break;case"f":case"f*":case"B":case"B*":pe=z}return pe},vs=h.close=function(){return Q("h"),this};h.stroke=function(){return Q("S"),this},h.fill=function(z){return yn("f",z),this},h.fillEvenOdd=function(z){return yn("f*",z),this},h.fillStroke=function(z){return yn("B",z),this},h.fillStrokeEvenOdd=function(z){return yn("B*",z),this};var yn=function(z,pe){aa(pe)==="object"?Na(pe,z):Q(z)},Mi=function(z){z===null||w===b.ADVANCED&&z===void 0||(z=wa(z),Q(z))};function Lo(z,pe,ze,et,lt){var Nt=new vm(pe||this.boundingBox,ze||this.xStep,et||this.yStep,this.gState,lt||this.matrix);Nt.stream=this.stream;var Ft=z+"$$"+this.cloneIndex+++"$$";return Fr(Ft,Nt),Nt}var Na=function(z,pe){var ze=bt[z.key],et=Ye[ze];if(et instanceof lh)Q("q"),Q(oi(pe)),et.gState&&h.setGState(et.gState),Q(z.matrix.toString()+" cm"),Q("/"+ze+" sh"),Q("Q");else if(et instanceof vm){var lt=new It(1,0,0,-1,0,Cc());z.matrix&&(lt=lt.multiply(z.matrix||wr),ze=Lo.call(et,z.key,z.boundingBox,z.xStep,z.yStep,lt).id),Q("q"),Q("/Pattern cs"),Q("/"+ze+" scn"),et.gState&&h.setGState(et.gState),Q(pe),Q("Q")}},oi=function(z){switch(z){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},rn=h.moveTo=function(z,pe){return Q(j(C(z))+" "+j(F(pe))+" m"),this},Jr=h.lineTo=function(z,pe){return Q(j(C(z))+" "+j(F(pe))+" l"),this},sn=h.curveTo=function(z,pe,ze,et,lt,Nt){return Q([j(C(z)),j(F(pe)),j(C(ze)),j(F(et)),j(C(lt)),j(F(Nt)),"c"].join(" ")),this};h.__private__.line=h.line=function(z,pe,ze,et,lt){if(isNaN(z)||isNaN(pe)||isNaN(ze)||isNaN(et)||!Un(lt))throw new Error("Invalid arguments passed to jsPDF.line");return w===b.COMPAT?this.lines([[ze-z,et-pe]],z,pe,[1,1],lt||"S"):this.lines([[ze-z,et-pe]],z,pe,[1,1]).stroke()},h.__private__.lines=h.lines=function(z,pe,ze,et,lt,Nt){var Ft,sr,Ar,Gr,zr,mn,ja,ka,ns,Gs,Ps,Mo;if(typeof z=="number"&&(Mo=ze,ze=pe,pe=z,z=Mo),et=et||[1,1],Nt=Nt||!1,isNaN(pe)||isNaN(ze)||!Array.isArray(z)||!Array.isArray(et)||!Un(lt)||typeof Nt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(rn(pe,ze),Ft=et[0],sr=et[1],Gr=z.length,Gs=pe,Ps=ze,Ar=0;Ar<Gr;Ar++)(zr=z[Ar]).length===2?(Gs=zr[0]*Ft+Gs,Ps=zr[1]*sr+Ps,Jr(Gs,Ps)):(mn=zr[0]*Ft+Gs,ja=zr[1]*sr+Ps,ka=zr[2]*Ft+Gs,ns=zr[3]*sr+Ps,Gs=zr[4]*Ft+Gs,Ps=zr[5]*sr+Ps,sn(mn,ja,ka,ns,Gs,Ps));return Nt&&vs(),Mi(lt),this},h.path=function(z){for(var pe=0;pe<z.length;pe++){var ze=z[pe],et=ze.c;switch(ze.op){case"m":rn(et[0],et[1]);break;case"l":Jr(et[0],et[1]);break;case"c":sn.apply(this,et);break;case"h":vs()}}return this},h.__private__.rect=h.rect=function(z,pe,ze,et,lt){if(isNaN(z)||isNaN(pe)||isNaN(ze)||isNaN(et)||!Un(lt))throw new Error("Invalid arguments passed to jsPDF.rect");return w===b.COMPAT&&(et=-et),Q([j(C(z)),j(F(pe)),j(C(ze)),j(C(et)),"re"].join(" ")),Mi(lt),this},h.__private__.triangle=h.triangle=function(z,pe,ze,et,lt,Nt,Ft){if(isNaN(z)||isNaN(pe)||isNaN(ze)||isNaN(et)||isNaN(lt)||isNaN(Nt)||!Un(Ft))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[ze-z,et-pe],[lt-ze,Nt-et],[z-lt,pe-Nt]],z,pe,[1,1],Ft,!0),this},h.__private__.roundedRect=h.roundedRect=function(z,pe,ze,et,lt,Nt,Ft){if(isNaN(z)||isNaN(pe)||isNaN(ze)||isNaN(et)||isNaN(lt)||isNaN(Nt)||!Un(Ft))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var sr=4/3*(Math.SQRT2-1);return lt=Math.min(lt,.5*ze),Nt=Math.min(Nt,.5*et),this.lines([[ze-2*lt,0],[lt*sr,0,lt,Nt-Nt*sr,lt,Nt],[0,et-2*Nt],[0,Nt*sr,-lt*sr,Nt,-lt,Nt],[2*lt-ze,0],[-lt*sr,0,-lt,-Nt*sr,-lt,-Nt],[0,2*Nt-et],[0,-Nt*sr,lt*sr,-Nt,lt,-Nt]],z+lt,pe,[1,1],Ft,!0),this},h.__private__.ellipse=h.ellipse=function(z,pe,ze,et,lt){if(isNaN(z)||isNaN(pe)||isNaN(ze)||isNaN(et)||!Un(lt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Nt=4/3*(Math.SQRT2-1)*ze,Ft=4/3*(Math.SQRT2-1)*et;return rn(z+ze,pe),sn(z+ze,pe-Ft,z+Nt,pe-et,z,pe-et),sn(z-Nt,pe-et,z-ze,pe-Ft,z-ze,pe),sn(z-ze,pe+Ft,z-Nt,pe+et,z,pe+et),sn(z+Nt,pe+et,z+ze,pe+Ft,z+ze,pe),Mi(lt),this},h.__private__.circle=h.circle=function(z,pe,ze,et){if(isNaN(z)||isNaN(pe)||isNaN(ze)||!Un(et))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(z,pe,ze,ze,et)},h.setFont=function(z,pe,ze){return ze&&(pe=S(pe,ze)),Ke=Wn(z,pe,{disableWarning:!1}),this};var Ie=h.__private__.getFont=h.getFont=function(){return Je[Wn.apply(h,arguments)]};h.__private__.getFontList=h.getFontList=function(){var z,pe,ze={};for(z in mt)if(mt.hasOwnProperty(z))for(pe in ze[z]=[],mt[z])mt[z].hasOwnProperty(pe)&&ze[z].push(pe);return ze},h.addFont=function(z,pe,ze,et,lt){var Nt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Nt.indexOf(arguments[3])!==-1?lt=arguments[3]:arguments[3]&&Nt.indexOf(arguments[3])==-1&&(ze=S(ze,et)),lt=lt||"Identity-H",Ul.call(this,z,pe,ze,lt)};var Dt,ir=e.lineWidth||.200025,kr=h.__private__.getLineWidth=h.getLineWidth=function(){return ir},Xr=h.__private__.setLineWidth=h.setLineWidth=function(z){return ir=z,Q(j(C(z))+" w"),this};h.__private__.setLineDash=qr.API.setLineDash=qr.API.setLineDashPattern=function(z,pe){if(z=z||[],pe=pe||0,isNaN(pe)||!Array.isArray(z))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return z=z.map(function(ze){return j(C(ze))}).join(" "),pe=j(C(pe)),Q("["+z+"] "+pe+" d"),this};var un=h.__private__.getLineHeight=h.getLineHeight=function(){return xe*Dt};h.__private__.getLineHeight=h.getLineHeight=function(){return xe*Dt};var In=h.__private__.setLineHeightFactor=h.setLineHeightFactor=function(z){return typeof(z=z||1.15)=="number"&&(Dt=z),this},rs=h.__private__.getLineHeightFactor=h.getLineHeightFactor=function(){return Dt};In(e.lineHeight);var Os=h.__private__.getHorizontalCoordinate=function(z){return C(z)},ul=h.__private__.getVerticalCoordinate=function(z){return w===b.ADVANCED?z:Gt[R].mediaBox.topRightY-Gt[R].mediaBox.bottomLeftY-C(z)},Qx=h.__private__.getHorizontalCoordinateString=h.getHorizontalCoordinateString=function(z){return j(Os(z))},fl=h.__private__.getVerticalCoordinateString=h.getVerticalCoordinateString=function(z){return j(ul(z))},Fo=e.strokeColor||"0 G";h.__private__.getStrokeColor=h.getDrawColor=function(){return G(Fo)},h.__private__.setStrokeColor=h.setDrawColor=function(z,pe,ze,et){return Fo=oe({ch1:z,ch2:pe,ch3:ze,ch4:et,pdfColorType:"draw",precision:2}),Q(Fo),this};var Sc=e.fillColor||"0 g";h.__private__.getFillColor=h.getFillColor=function(){return G(Sc)},h.__private__.setFillColor=h.setFillColor=function(z,pe,ze,et){return Sc=oe({ch1:z,ch2:pe,ch3:ze,ch4:et,pdfColorType:"fill",precision:2}),Q(Sc),this};var md=e.textColor||"0 g",xd=h.__private__.getTextColor=h.getTextColor=function(){return G(md)};h.__private__.setTextColor=h.setTextColor=function(z,pe,ze,et){return md=oe({ch1:z,ch2:pe,ch3:ze,ch4:et,pdfColorType:"text",precision:3}),this};var zl=e.charSpace,Jx=h.__private__.getCharSpace=h.getCharSpace=function(){return parseFloat(zl||0)};h.__private__.setCharSpace=h.setCharSpace=function(z){if(isNaN(z))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return zl=z,this};var gd=0;h.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},h.__private__.setLineCap=h.setLineCap=function(z){var pe=h.CapJoinStyles[z];if(pe===void 0)throw new Error("Line cap style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gd=pe,Q(pe+" J"),this};var P0=0;h.__private__.setLineJoin=h.setLineJoin=function(z){var pe=h.CapJoinStyles[z];if(pe===void 0)throw new Error("Line join style of '"+z+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return P0=pe,Q(pe+" j"),this},h.__private__.setLineMiterLimit=h.__private__.setMiterLimit=h.setLineMiterLimit=h.setMiterLimit=function(z){if(z=z||0,isNaN(z))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Q(j(C(z))+" M"),this},h.GState=f5,h.setGState=function(z){(z=typeof z=="string"?xt[Vt[z]]:_c(null,z)).equals(gr)||(Q("/"+z.id+" gs"),gr=z)};var _c=function(z,pe){if(!z||!Vt[z]){var ze=!1;for(var et in xt)if(xt.hasOwnProperty(et)&&xt[et].equals(pe)){ze=!0;break}if(ze)pe=xt[et];else{var lt="GS"+(Object.keys(xt).length+1).toString(10);xt[lt]=pe,pe.id=lt}return z&&(Vt[z]=pe.id),Bt.publish("addGState",pe),pe}};h.addGState=function(z,pe){return _c(z,pe),this},h.saveGraphicsState=function(){return Q("q"),ue.push({key:Ke,size:xe,color:md}),this},h.restoreGraphicsState=function(){Q("Q");var z=ue.pop();return Ke=z.key,xe=z.size,md=z.color,gr=null,this},h.setCurrentTransformationMatrix=function(z){return Q(z.toString()+" cm"),this},h.comment=function(z){return Q("#"+z),this};var hl=function(z,pe){var ze=z||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return ze},set:function(Nt){isNaN(Nt)||(ze=parseFloat(Nt))}});var et=pe||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return et},set:function(Nt){isNaN(Nt)||(et=parseFloat(Nt))}});var lt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return lt},set:function(Nt){lt=Nt.toString()}}),this},Ac=function(z,pe,ze,et){hl.call(this,z,pe),this.type="rect";var lt=ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return lt},set:function(Ft){isNaN(Ft)||(lt=parseFloat(Ft))}});var Nt=et||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Nt},set:function(Ft){isNaN(Ft)||(Nt=parseFloat(Ft))}}),this},ef=function(){this.page=qt,this.currentPage=R,this.pages=ve.slice(0),this.pagesContext=Gt.slice(0),this.x=_t,this.y=vt,this.matrix=ke,this.width=ma(R),this.height=Cc(R),this.outputDestination=He,this.id="",this.objectNumber=-1};ef.prototype.restore=function(){qt=this.page,R=this.currentPage,Gt=this.pagesContext,ve=this.pages,_t=this.x,vt=this.y,ke=this.matrix,D0(R,this.width),rf(R,this.height),He=this.outputDestination};var I0=function(z,pe,ze,et,lt){cr.push(new ef),qt=R=0,ve=[],_t=z,vt=pe,ke=lt,Pt([ze,et])},tf=function(z){if(Cr[z])cr.pop().restore();else{var pe=new ef,ze="Xo"+(Object.keys(Sr).length+1).toString(10);pe.id=ze,Cr[z]=ze,Sr[ze]=pe,Bt.publish("addFormObject",pe),cr.pop().restore()}};for(var vd in h.beginFormObject=function(z,pe,ze,et,lt){return I0(z,pe,ze,et,lt),this},h.endFormObject=function(z){return tf(z),this},h.doFormObject=function(z,pe){var ze=Sr[Cr[z]];return Q("q"),Q(pe.toString()+" cm"),Q("/"+ze.id+" Do"),Q("Q"),this},h.getFormObject=function(z){var pe=Sr[Cr[z]];return{x:pe.x,y:pe.y,width:pe.width,height:pe.height,matrix:pe.matrix}},h.save=function(z,pe){return z=z||"generated.pdf",(pe=pe||{}).returnPromise=pe.returnPromise||!1,pe.returnPromise===!1?(ih(pr(lr()),z),typeof ih.unload=="function"&&Hr.setTimeout&&setTimeout(ih.unload,911),this):new Promise(function(ze,et){try{var lt=ih(pr(lr()),z);typeof ih.unload=="function"&&Hr.setTimeout&&setTimeout(ih.unload,911),ze(lt)}catch(Nt){et(Nt.message)}})},qr.API)qr.API.hasOwnProperty(vd)&&(vd==="events"&&qr.API.events.length?function(z,pe){var ze,et,lt;for(lt=pe.length-1;lt!==-1;lt--)ze=pe[lt][0],et=pe[lt][1],z.subscribe.apply(z,[ze].concat(typeof et=="function"?[et]:et))}(Bt,qr.API.events):h[vd]=qr.API[vd]);var ma=h.getPageWidth=function(z){return(Gt[z=z||R].mediaBox.topRightX-Gt[z].mediaBox.bottomLeftX)/Qe},D0=h.setPageWidth=function(z,pe){Gt[z].mediaBox.topRightX=pe*Qe+Gt[z].mediaBox.bottomLeftX},Cc=h.getPageHeight=function(z){return(Gt[z=z||R].mediaBox.topRightY-Gt[z].mediaBox.bottomLeftY)/Qe},rf=h.setPageHeight=function(z,pe){Gt[z].mediaBox.topRightY=pe*Qe+Gt[z].mediaBox.bottomLeftY};return h.internal={pdfEscape:gt,getStyle:wa,getFont:Ie,getFontSize:Ae,getCharSpace:Jx,getTextColor:xd,getLineHeight:un,getLineHeightFactor:rs,getLineWidth:kr,write:Ne,getHorizontalCoordinate:Os,getVerticalCoordinate:ul,getCoordinateString:Qx,getVerticalCoordinateString:fl,collections:{},newObject:jr,newAdditionalObject:De,newObjectDeferred:Pr,newObjectDeferredBegin:ge,getFilters:Pe,putStream:$e,events:Bt,scaleFactor:Qe,pageSize:{getWidth:function(){return ma(R)},setWidth:function(z){D0(R,z)},getHeight:function(){return Cc(R)},setHeight:function(z){rf(R,z)}},encryptionOptions:f,encryption:Ir,getEncryptor:Jt,output:Qt,getNumberOfPages:Mr,pages:ve,out:Q,f2:D,f3:A,getPageInfo:tn,getPageInfoByObjId:ur,getCurrentPageInfo:nr,getPDFVersion:g,Point:hl,Rectangle:Ac,Matrix:It,hasHotfix:An},Object.defineProperty(h.internal.pageSize,"width",{get:function(){return ma(R)},set:function(z){D0(R,z)},enumerable:!0,configurable:!0}),Object.defineProperty(h.internal.pageSize,"height",{get:function(){return Cc(R)},set:function(z){rf(R,z)},enumerable:!0,configurable:!0}),pd.call(h,ye),Ke="F1",$t(s,r),Bt.publish("initialized"),h}Zp.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},Zp.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},Zp.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},Zp.prototype.processOwnerPassword=function(e,t){return FS(LS(t).substr(0,5),e)},Zp.prototype.encryptor=function(e,t){var r=LS(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return FS(r,n)}},f5.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||aa(e)!==aa(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},qr.API={events:[]},qr.version="2.5.2";var cs=qr.API,WA=1,vp=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Yp=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Zr=function(e){return e.toFixed(2)},wf=function(e){return e.toFixed(5)};cs.__acroform__={};var cl=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},Z8=function(e){return e*WA},Td=function(e){var t=new FU,r=vr.internal.getHeight(e)||0,n=vr.internal.getWidth(e)||0;return t.BBox=[0,0,Number(Zr(n)),Number(Zr(r))],t},UCe=cs.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},zCe=cs.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},qCe=cs.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},js=cs.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return qCe(e,t-1)},ks=cs.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return UCe(e,t-1)},Ss=cs.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return zCe(e,t-1)},HCe=cs.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,s=e[0],i=e[1],o=e[2],l=e[3],c={};return c.lowerLeft_X=r(s)||0,c.lowerLeft_Y=n(i+l)||0,c.upperRight_X=r(s+o)||0,c.upperRight_Y=n(i)||0,[Number(Zr(c.lowerLeft_X)),Number(Zr(c.lowerLeft_Y)),Number(Zr(c.upperRight_X)),Number(Zr(c.upperRight_Y))]},WCe=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=MS(e,r),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+Zr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=Td(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},MS=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(A){return A.split(`
`)}):s.map(function(A){return[A]});var i=r,o=vr.internal.getHeight(e)||0;o=o<0?-o:o;var l=vr.internal.getWidth(e)||0;l=l<0?-l:l;var c=function(A,C,M){if(A+1<s.length){var F=C+" "+s[A+1][0];return Uy(F,e,M).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var d,f,u=Uy("3",e,i).height,p=e.multiline?o-i:(o-u)/2,h=p+=2,m=0,g=0,x=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Uy(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var v="",b=0,w=0;w<s.length;w++)if(s.hasOwnProperty(w)){var y=!1;if(s[w].length!==1&&x!==s[w].length-1){if((u+2)*(b+2)+2>o)continue e;v+=s[w][x],y=!0,g=w,w--}else{v=(v+=s[w][x]+" ").substr(v.length-1)==" "?v.substr(0,v.length-1):v;var N=parseInt(w),S=c(N,v,i),j=w>=s.length-1;if(S&&!j){v+=" ",x=0;continue}if(S||j){if(j)g=N;else if(e.multiline&&(u+2)*(b+2)+2>o)continue e}else{if(!e.multiline||(u+2)*(b+2)+2>o)continue e;g=N}}for(var _="",T=m;T<=g;T++){var D=s[T];if(e.multiline){if(T===g){_+=D[x]+" ",x=(x+1)%D.length;continue}if(T===m){_+=D[D.length-1]+" ";continue}}_+=D[0]+" "}switch(_=_.substr(_.length-1)==" "?_.substr(0,_.length-1):_,f=Uy(_,e,i).width,e.textAlign){case"right":d=l-f-2;break;case"center":d=(l-f)/2;break;case"left":default:d=2}t+=Zr(d)+" "+Zr(h)+` Td
`,t+="("+vp(_)+`) Tj
`,t+=-Zr(d)+` 0 Td
`,h=-(i+2),f=0,m=y?g:g+1,b++,v=""}break}return n.text=t,n.fontSize=i,n},Uy=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},VCe={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},GCe=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},KCe=function(e,t){for(var r in e)if(e.hasOwnProperty(r)){var n=r,s=e[r];t.internal.newObjectDeferredBegin(s.objId,!0),aa(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[n]}},XCe=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(fd.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(VCe)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");WA=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new MU,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&GCe(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],c=[],d=l.Rect;if(l.Rect&&(l.Rect=HCe(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=vr.createDefaultAppearanceStream(l),aa(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var f=WCe(l);c.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(l.appearanceStreamContent){var u="";for(var p in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(p)){var h=l.appearanceStreamContent[p];if(u+="/"+p+" ",u+="<<",Object.keys(h).length>=1||Array.isArray(h)){for(var o in h)if(h.hasOwnProperty(o)){var m=h[o];typeof m=="function"&&(m=m.call(s,l)),u+="/"+o+" "+m+" ",s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m)}}else typeof(m=h)=="function"&&(m=m.call(s,l)),u+="/"+o+" "+m,s.internal.acroformPlugin.xForms.indexOf(m)>=0||s.internal.acroformPlugin.xForms.push(m);u+=">>"}c.push({key:"AP",value:`<<
`+u+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&KCe(s.internal.acroformPlugin.xForms,s)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},LU=cs.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var s="[",i=0;i<e.length;i++)switch(i!==0&&(s+=" "),aa(e[i])){case"boolean":case"number":case"object":s+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),s+="("+vp(n(e[i].toString()))+")"):s+=e[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},k4=function(e,t,r){var n=function(s){return s};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),e="("+vp(n(e))+")"},Ud=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Ud.prototype.toString=function(){return this.objId+" 0 R"},Ud.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Ud.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],s=this[n];s&&(Array.isArray(s)?e.push({key:n,value:LU(s,this.objId,this.scope)}):s instanceof Ud?(s.scope=this.scope,e.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:n,value:s}))}return e};var FU=function(){Ud.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};cl(FU,Ud);var MU=function(){Ud.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+vp(r(e))+")"}},set:function(r){e=r}})};cl(MU,Ud);var fd=function e(){Ud.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute F supplied.');t=v}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!js(t,3)},set:function(v){v?this.F=ks(t,3):this.F=Ss(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(v){if(isNaN(v))throw new Error('Invalid value "'+v+'" for attribute Ff supplied.');r=v}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(v){n=v!==void 0?v:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(v){n[0]=v}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(v){n[1]=v}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(v){n[2]=v}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(v){n[3]=v}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(v){switch(v){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=v;break;default:throw new Error('Invalid value "'+v+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof h5)return;i="FieldObject"+e.FieldNum++}var v=function(b){return b};return this.scope&&(v=this.scope.internal.getEncryptor(this.objId)),"("+vp(v(i))+")"},set:function(v){i=v.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(v){i=v}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(v){o=v}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(v){l=v}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(v){c=v}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/WA:d},set:function(v){d=v}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(v){f=v}});var u="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!u||this instanceof h5||this instanceof Rh))return k4(u,this.objId,this.scope)},set:function(v){v=v.toString(),u=v}});var p=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(p)return this instanceof bi?p:k4(p,this.objId,this.scope)},set:function(v){v=v.toString(),p=this instanceof bi?v:v.substr(0,1)==="("?Yp(v.substr(1,v.length-2)):Yp(v)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof bi?Yp(p.substr(1,p.length-1)):p},set:function(v){v=v.toString(),p=this instanceof bi?"/"+v:v}});var h=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(h)return h},set:function(v){this.V=v}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(h)return this instanceof bi?h:k4(h,this.objId,this.scope)},set:function(v){v=v.toString(),h=this instanceof bi?v:v.substr(0,1)==="("?Yp(v.substr(1,v.length-2)):Yp(v)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof bi?Yp(h.substr(1,h.length-1)):h},set:function(v){v=v.toString(),h=this instanceof bi?"/"+v:v}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var m,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(v){v=!!v,g=v}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(m)return m},set:function(v){m=v}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,1)},set:function(v){v?this.Ff=ks(this.Ff,1):this.Ff=Ss(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,2)},set:function(v){v?this.Ff=ks(this.Ff,2):this.Ff=Ss(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,3)},set:function(v){v?this.Ff=ks(this.Ff,3):this.Ff=Ss(this.Ff,3)}});var x=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(x!==null)return x},set:function(v){if([0,1,2].indexOf(v)===-1)throw new Error('Invalid value "'+v+'" for attribute Q supplied.');x=v}}),Object.defineProperty(this,"textAlign",{get:function(){var v;switch(x){case 0:default:v="left";break;case 1:v="center";break;case 2:v="right"}return v},configurable:!0,enumerable:!0,set:function(v){switch(v){case"right":case 2:x=2;break;case"center":case 1:x=1;break;case"left":case 0:default:x=0}}})};cl(fd,Ud);var Im=function(){fd.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return LU(t,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,o,l){l||(l=1);for(var c,d=[];c=o.exec(i);)d.push(c[l]);return d}(n,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,18)},set:function(r){r?this.Ff=ks(this.Ff,18):this.Ff=Ss(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ks(this.Ff,19):this.Ff=Ss(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,20)},set:function(r){r?(this.Ff=ks(this.Ff,20),t.sort()):this.Ff=Ss(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,22)},set:function(r){r?this.Ff=ks(this.Ff,22):this.Ff=Ss(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,23)},set:function(r){r?this.Ff=ks(this.Ff,23):this.Ff=Ss(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,27)},set:function(r){r?this.Ff=ks(this.Ff,27):this.Ff=Ss(this.Ff,27)}}),this.hasAppearanceStream=!1};cl(Im,fd);var Dm=function(){Im.call(this),this.fontName="helvetica",this.combo=!1};cl(Dm,Im);var Lm=function(){Dm.call(this),this.combo=!0};cl(Lm,Dm);var d2=function(){Lm.call(this),this.edit=!0};cl(d2,Lm);var bi=function(){fd.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,15)},set:function(r){r?this.Ff=ks(this.Ff,15):this.Ff=Ss(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,16)},set:function(r){r?this.Ff=ks(this.Ff,16):this.Ff=Ss(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,17)},set:function(r){r?this.Ff=ks(this.Ff,17):this.Ff=Ss(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,26)},set:function(r){r?this.Ff=ks(this.Ff,26):this.Ff=Ss(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,s=[];for(n in s.push("<<"),t)s.push("/"+n+" ("+vp(r(t[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){aa(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};cl(bi,fd);var u2=function(){bi.call(this),this.pushButton=!0};cl(u2,bi);var Fm=function(){bi.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};cl(Fm,bi);var h5=function(){var e,t;fd.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+vp(s(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){aa(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=vr.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};cl(h5,fd),Fm.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Fm.prototype.createOption=function(e){var t=new h5;return t.Parent=this,t.optionName=e,this.Kids.push(t),YCe.call(this.scope,t),t};var f2=function(){bi.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=vr.CheckBox.createAppearanceStream()};cl(f2,bi);var Rh=function(){fd.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,13)},set:function(t){t?this.Ff=ks(this.Ff,13):this.Ff=Ss(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,21)},set:function(t){t?this.Ff=ks(this.Ff,21):this.Ff=Ss(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,23)},set:function(t){t?this.Ff=ks(this.Ff,23):this.Ff=Ss(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,24)},set:function(t){t?this.Ff=ks(this.Ff,24):this.Ff=Ss(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,25)},set:function(t){t?this.Ff=ks(this.Ff,25):this.Ff=Ss(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,26)},set:function(t){t?this.Ff=ks(this.Ff,26):this.Ff=Ss(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};cl(Rh,fd);var h2=function(){Rh.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!js(this.Ff,14)},set:function(e){e?this.Ff=ks(this.Ff,14):this.Ff=Ss(this.Ff,14)}}),this.password=!0};cl(h2,Rh);var vr={CheckBox:{createAppearanceStream:function(){return{N:{On:vr.CheckBox.YesNormal},D:{On:vr.CheckBox.YesPushDown,Off:vr.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Td(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),i=MS(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+Zr(vr.internal.getWidth(e))+" "+Zr(vr.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+Zr(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=Td(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),s=[],i=vr.internal.getHeight(e),o=vr.internal.getWidth(e),l=MS(e,e.caption);return s.push("1 g"),s.push("0 0 "+Zr(o)+" "+Zr(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+Zr(o-1)+" "+Zr(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+Zr(l.fontSize)+" Tf "+n),s.push(l.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Td(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Zr(vr.internal.getWidth(e))+" "+Zr(vr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:vr.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=vr.RadioButton.Circle.YesNormal,t.D[e]=vr.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Td(e);t.scope=e.scope;var r=[],n=vr.internal.getWidth(e)<=vr.internal.getHeight(e)?vr.internal.getWidth(e)/4:vr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=vr.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+wf(vr.internal.getWidth(e)/2)+" "+wf(vr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Td(e);t.scope=e.scope;var r=[],n=vr.internal.getWidth(e)<=vr.internal.getHeight(e)?vr.internal.getWidth(e)/4:vr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*vr.internal.Bezier_C).toFixed(5)),o=Number((n*vr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wf(vr.internal.getWidth(e)/2)+" "+wf(vr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+wf(vr.internal.getWidth(e)/2)+" "+wf(vr.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Td(e);t.scope=e.scope;var r=[],n=vr.internal.getWidth(e)<=vr.internal.getHeight(e)?vr.internal.getWidth(e)/4:vr.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*vr.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+wf(vr.internal.getWidth(e)/2)+" "+wf(vr.internal.getHeight(e)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:vr.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=vr.RadioButton.Cross.YesNormal,t.D[e]=vr.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Td(e);t.scope=e.scope;var r=[],n=vr.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+Zr(vr.internal.getWidth(e)-2)+" "+Zr(vr.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(Zr(n.x1.x)+" "+Zr(n.x1.y)+" m"),r.push(Zr(n.x2.x)+" "+Zr(n.x2.y)+" l"),r.push(Zr(n.x4.x)+" "+Zr(n.x4.y)+" m"),r.push(Zr(n.x3.x)+" "+Zr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=Td(e);t.scope=e.scope;var r=vr.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+Zr(vr.internal.getWidth(e))+" "+Zr(vr.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+Zr(vr.internal.getWidth(e)-2)+" "+Zr(vr.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(Zr(r.x1.x)+" "+Zr(r.x1.y)+" m"),n.push(Zr(r.x2.x)+" "+Zr(r.x2.y)+" l"),n.push(Zr(r.x4.x)+" "+Zr(r.x4.y)+" m"),n.push(Zr(r.x3.x)+" "+Zr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Td(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+Zr(vr.internal.getWidth(e))+" "+Zr(vr.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};vr.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=vr.internal.getWidth(e),r=vr.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},vr.internal.getWidth=function(e){var t=0;return aa(e)==="object"&&(t=Z8(e.Rect[2])),t},vr.internal.getHeight=function(e){var t=0;return aa(e)==="object"&&(t=Z8(e.Rect[3])),t};var YCe=cs.addField=function(e){if(XCe(this,e),!(e instanceof fd))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};cs.AcroFormChoiceField=Im,cs.AcroFormListBox=Dm,cs.AcroFormComboBox=Lm,cs.AcroFormEditBox=d2,cs.AcroFormButton=bi,cs.AcroFormPushButton=u2,cs.AcroFormRadioButton=Fm,cs.AcroFormCheckBox=f2,cs.AcroFormTextField=Rh,cs.AcroFormPasswordField=h2,cs.AcroFormAppearance=vr,cs.AcroForm={ChoiceField:Im,ListBox:Dm,ComboBox:Lm,EditBox:d2,Button:bi,PushButton:u2,RadioButton:Fm,CheckBox:f2,TextField:Rh,PasswordField:h2,Appearance:vr},qr.AcroForm={ChoiceField:Im,ListBox:Dm,ComboBox:Lm,EditBox:d2,Button:bi,PushButton:u2,RadioButton:Fm,CheckBox:f2,TextField:Rh,PasswordField:h2,Appearance:vr};qr.AcroForm;function RU(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},n=e.__addimage__.getImageFileTypeByImageData=function(A,C){var M,F,B,Y,V,J=t;if((C=C||t)==="RGBA"||A.data!==void 0&&A.data instanceof Uint8ClampedArray&&"height"in A&&"width"in A)return"RGBA";if(S(A))for(V in r)for(B=r[V],M=0;M<B.length;M+=1){for(Y=!0,F=0;F<B[M].length;F+=1)if(B[M][F]!==void 0&&B[M][F]!==A[F]){Y=!1;break}if(Y===!0){J=V;break}}else for(V in r)for(B=r[V],M=0;M<B.length;M+=1){for(Y=!0,F=0;F<B[M].length;F+=1)if(B[M][F]!==void 0&&B[M][F]!==A.charCodeAt(F)){Y=!1;break}if(Y===!0){J=V;break}}return J===t&&C!==t&&(J=C),J},s=function A(C){for(var M=this.internal.write,F=this.internal.putStream,B=(0,this.internal.getFilters)();B.indexOf("FlateEncode")!==-1;)B.splice(B.indexOf("FlateEncode"),1);C.objectId=this.internal.newObject();var Y=[];if(Y.push({key:"Type",value:"/XObject"}),Y.push({key:"Subtype",value:"/Image"}),Y.push({key:"Width",value:C.width}),Y.push({key:"Height",value:C.height}),C.colorSpace===x.INDEXED?Y.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(C.palette.length/3-1)+" "+("sMask"in C&&C.sMask!==void 0?C.objectId+2:C.objectId+1)+" 0 R]"}):(Y.push({key:"ColorSpace",value:"/"+C.colorSpace}),C.colorSpace===x.DEVICE_CMYK&&Y.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Y.push({key:"BitsPerComponent",value:C.bitsPerComponent}),"decodeParameters"in C&&C.decodeParameters!==void 0&&Y.push({key:"DecodeParms",value:"<<"+C.decodeParameters+">>"}),"transparency"in C&&Array.isArray(C.transparency)){for(var V="",J=0,U=C.transparency.length;J<U;J++)V+=C.transparency[J]+" "+C.transparency[J]+" ";Y.push({key:"Mask",value:"["+V+"]"})}C.sMask!==void 0&&Y.push({key:"SMask",value:C.objectId+1+" 0 R"});var X=C.filter!==void 0?["/"+C.filter]:void 0;if(F({data:C.data,additionalKeyValues:Y,alreadyAppliedFilters:X,objectId:C.objectId}),M("endobj"),"sMask"in C&&C.sMask!==void 0){var W="/Predictor "+C.predictor+" /Colors 1 /BitsPerComponent "+C.bitsPerComponent+" /Columns "+C.width,E={width:C.width,height:C.height,colorSpace:"DeviceGray",bitsPerComponent:C.bitsPerComponent,decodeParameters:W,data:C.sMask};"filter"in C&&(E.filter=C.filter),A.call(this,E)}if(C.colorSpace===x.INDEXED){var R=this.internal.newObject();F({data:_(new Uint8Array(C.palette)),objectId:R}),M("endobj")}},i=function(){var A=this.internal.collections.addImage_images;for(var C in A)s.call(this,A[C])},o=function(){var A,C=this.internal.collections.addImage_images,M=this.internal.write;for(var F in C)M("/I"+(A=C[F]).index,A.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",o))},c=function(){var A=this.internal.collections.addImage_images;return l.call(this),A},d=function(){return Object.keys(this.internal.collections.addImage_images).length},f=function(A){return typeof e["process"+A.toUpperCase()]=="function"},u=function(A){return aa(A)==="object"&&A.nodeType===1},p=function(A,C){if(A.nodeName==="IMG"&&A.hasAttribute("src")){var M=""+A.getAttribute("src");if(M.indexOf("data:image/")===0)return kv(unescape(M).split("base64,").pop());var F=e.loadFile(M,!0);if(F!==void 0)return F}if(A.nodeName==="CANVAS"){if(A.width===0||A.height===0)throw new Error("Given canvas must have data. Canvas width: "+A.width+", height: "+A.height);var B;switch(C){case"PNG":B="image/png";break;case"WEBP":B="image/webp";break;case"JPEG":case"JPG":default:B="image/jpeg"}return kv(A.toDataURL(B,1).split("base64,").pop())}},h=function(A){var C=this.internal.collections.addImage_images;if(C){for(var M in C)if(A===C[M].alias)return C[M]}},m=function(A,C,M){return A||C||(A=-96,C=-96),A<0&&(A=-1*M.width*72/A/this.internal.scaleFactor),C<0&&(C=-1*M.height*72/C/this.internal.scaleFactor),A===0&&(A=C*M.width/M.height),C===0&&(C=A*M.height/M.width),[A,C]},g=function(A,C,M,F,B,Y){var V=m.call(this,M,F,B),J=this.internal.getCoordinateString,U=this.internal.getVerticalCoordinateString,X=c.call(this);if(M=V[0],F=V[1],X[B.index]=B,Y){Y*=Math.PI/180;var W=Math.cos(Y),E=Math.sin(Y),R=function(L){return L.toFixed(4)},q=[R(W),R(E),R(-1*E),R(W),0,0,"cm"]}this.internal.write("q"),Y?(this.internal.write([1,"0","0",1,J(A),U(C+F),"cm"].join(" ")),this.internal.write(q.join(" ")),this.internal.write([J(M),"0","0",J(F),"0","0","cm"].join(" "))):this.internal.write([J(M),"0","0",J(F),J(A),U(C+F),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+B.index+" Do"),this.internal.write("Q")},x=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},b=e.__addimage__.sHashCode=function(A){var C,M,F=0;if(typeof A=="string")for(M=A.length,C=0;C<M;C++)F=(F<<5)-F+A.charCodeAt(C),F|=0;else if(S(A))for(M=A.byteLength/2,C=0;C<M;C++)F=(F<<5)-F+A[C],F|=0;return F},w=e.__addimage__.validateStringAsBase64=function(A){(A=A||"").toString().trim();var C=!0;return A.length===0&&(C=!1),A.length%4!=0&&(C=!1),/^[A-Za-z0-9+/]+$/.test(A.substr(0,A.length-2))===!1&&(C=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(A.substr(-2))===!1&&(C=!1),C},y=e.__addimage__.extractImageFromDataUrl=function(A){var C=(A=A||"").split("base64,"),M=null;if(C.length===2){var F=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(C[0]);Array.isArray(F)&&(M={mimeType:F[1],charset:F[2],data:C[1]})}return M},N=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(A){return N()&&A instanceof ArrayBuffer};var S=e.__addimage__.isArrayBufferView=function(A){return N()&&typeof Uint32Array<"u"&&(A instanceof Int8Array||A instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&A instanceof Uint8ClampedArray||A instanceof Int16Array||A instanceof Uint16Array||A instanceof Int32Array||A instanceof Uint32Array||A instanceof Float32Array||A instanceof Float64Array)},j=e.__addimage__.binaryStringToUint8Array=function(A){for(var C=A.length,M=new Uint8Array(C),F=0;F<C;F++)M[F]=A.charCodeAt(F);return M},_=e.__addimage__.arrayBufferToBinaryString=function(A){for(var C="",M=S(A)?A:new Uint8Array(A),F=0;F<M.length;F+=8192)C+=String.fromCharCode.apply(null,M.subarray(F,F+8192));return C};e.addImage=function(){var A,C,M,F,B,Y,V,J,U;if(typeof arguments[1]=="number"?(C=t,M=arguments[1],F=arguments[2],B=arguments[3],Y=arguments[4],V=arguments[5],J=arguments[6],U=arguments[7]):(C=arguments[1],M=arguments[2],F=arguments[3],B=arguments[4],Y=arguments[5],V=arguments[6],J=arguments[7],U=arguments[8]),aa(A=arguments[0])==="object"&&!u(A)&&"imageData"in A){var X=A;A=X.imageData,C=X.format||C||t,M=X.x||M||0,F=X.y||F||0,B=X.w||X.width||B,Y=X.h||X.height||Y,V=X.alias||V,J=X.compression||J,U=X.rotation||X.angle||U}var W=this.internal.getFilters();if(J===void 0&&W.indexOf("FlateEncode")!==-1&&(J="SLOW"),isNaN(M)||isNaN(F))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var E=T.call(this,A,C,V,J);return g.call(this,M,F,B,Y,E,U),this};var T=function(A,C,M,F){var B,Y,V;if(typeof A=="string"&&n(A)===t){A=unescape(A);var J=D(A,!1);(J!==""||(J=e.loadFile(A,!0))!==void 0)&&(A=J)}if(u(A)&&(A=p(A,C)),C=n(A,C),!f(C))throw new Error("addImage does not support files of type '"+C+"', please ensure that a plugin for '"+C+"' support is added.");if(((V=M)==null||V.length===0)&&(M=function(U){return typeof U=="string"||S(U)?b(U):S(U.data)?b(U.data):null}(A)),(B=h.call(this,M))||(N()&&(A instanceof Uint8Array||C==="RGBA"||(Y=A,A=j(A))),B=this["process"+C.toUpperCase()](A,d.call(this),M,function(U){return U&&typeof U=="string"&&(U=U.toUpperCase()),U in e.image_compression?U:v.NONE}(F),Y)),!B)throw new Error("An unknown error occurred whilst processing the image.");return B},D=e.__addimage__.convertBase64ToBinaryString=function(A,C){var M;C=typeof C!="boolean"||C;var F,B="";if(typeof A=="string"){F=(M=y(A))!==null?M.data:A;try{B=kv(F)}catch(Y){if(C)throw w(F)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Y.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return B};e.getImageProperties=function(A){var C,M,F="";if(u(A)&&(A=p(A)),typeof A=="string"&&n(A)===t&&((F=D(A,!1))===""&&(F=e.loadFile(A)||""),A=F),M=n(A),!f(M))throw new Error("addImage does not support files of type '"+M+"', please ensure that a plugin for '"+M+"' support is added.");if(!N()||A instanceof Uint8Array||(A=j(A)),!(C=this["process"+M.toUpperCase()](A)))throw new Error("An unknown error occurred whilst processing the image");return C.fileType=M,C}})(qr.API),function(e){var t=function(r){if(r!==void 0&&r!="")return!0};qr.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,s,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(r.objId),d=r.pageContext.annotations,f=!1,u=0;u<d.length&&!f;u++)switch((n=d[u]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var p=0;p<d.length;p++){n=d[p];var h=this.internal.pdfEscape,m=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var g=this.internal.newAdditionalObject(),x=this.internal.newAdditionalObject(),v=this.internal.getEncryptor(g.objId),b=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+h(v(n.contents))+")",i+=" /Popup "+x.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+h(v(b))+") >>",g.content=i;var w=g.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+w,n.open&&(i+=" /Open true"),i+=" >>",x.content=i,this.internal.write(g.objId,"0 R",x.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var y=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+h(m(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+y+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var N=this.annotations._nameMap[n.options.name];n.options.pageNumber=N.page,n.options.top=N.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+h(m(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var S=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+S+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,s,i,o){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(r),y:d(n),w:c(r+s),h:d(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,s,i){var o,l,c=this.getTextWidth(r),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var f=this.splitTextToSize(r,l).length;o=Math.ceil(d*f)}else l=c,o=d;return this.text(r,n,s,i),s+=.2*d,i.align==="center"&&(n-=c/2),i.align==="right"&&(n-=c),this.link(n,s-d,l,o,i),c},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(qr.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(g){return t[g.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(g){return typeof g=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(g)},l=e.__arabicParser__.isArabicEndLetter=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length<=2},c=e.__arabicParser__.isArabicAlfLetter=function(g){return o(g)&&s.indexOf(g.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=1};var d=e.__arabicParser__.arabicLetterHasFinalForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length>=3};var f=e.__arabicParser__.arabicLetterHasMedialForm=function(g){return o(g)&&i(g)&&t[g.charCodeAt(0)].length==4},u=e.__arabicParser__.resolveLigatures=function(g){var x=0,v=r,b="",w=0;for(x=0;x<g.length;x+=1)v[g.charCodeAt(x)]!==void 0?(w++,typeof(v=v[g.charCodeAt(x)])=="number"&&(b+=String.fromCharCode(v),v=r,w=0),x===g.length-1&&(v=r,b+=g.charAt(x-(w-1)),x-=w-1,w=0)):(v=r,b+=g.charAt(x-w),x-=w,w=0);return b};e.__arabicParser__.isArabicDiacritic=function(g){return g!==void 0&&n[g.charCodeAt(0)]!==void 0};var p=e.__arabicParser__.getCorrectForm=function(g,x,v){return o(g)?i(g)===!1?-1:!d(g)||!o(x)&&!o(v)||!o(v)&&l(x)||l(g)&&!o(x)||l(g)&&c(x)||l(g)&&l(x)?0:f(g)&&o(x)&&!l(x)&&o(v)&&d(v)?3:l(g)||!o(v)?1:2:-1},h=function(g){var x=0,v=0,b=0,w="",y="",N="",S=(g=g||"").split("\\s+"),j=[];for(x=0;x<S.length;x+=1){for(j.push(""),v=0;v<S[x].length;v+=1)w=S[x][v],y=S[x][v-1],N=S[x][v+1],o(w)?(b=p(w,y,N),j[x]+=b!==-1?String.fromCharCode(t[w.charCodeAt(0)][b]):w):j[x]+=w;j[x]=u(j[x])}return j.join(" ")},m=e.__arabicParser__.processArabic=e.processArabic=function(){var g,x=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,v=[];if(Array.isArray(x)){var b=0;for(v=[],b=0;b<x.length;b+=1)Array.isArray(x[b])?v.push([h(x[b][0]),x[b][1],x[b][2]]):v.push([h(x[b])]);g=v}else g=h(x);return typeof arguments[0]=="string"?g:(arguments[0].text=g,arguments[0])};e.events.push(["preProcessText",m])}(qr.API),qr.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(qr.API),function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(g){c=g}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(g){d=g}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(g){f=g}});var u=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return u},set:function(g){u=g}});var p=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return p},set:function(g){p=g}});var h=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return h},set:function(g){h=g}});var m=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return m},set:function(g){m=g}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(c){return n.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},e.getTextDimensions=function(c,d){n.call(this);var f=(d=d||{}).fontSize||this.getFontSize(),u=d.font||this.getFont(),p=d.scaleFactor||this.internal.scaleFactor,h=0,m=0,g=0,x=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var v=d.maxWidth;v>0?typeof c=="string"?c=this.splitTextToSize(c,v):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(w,y){return w.concat(x.splitTextToSize(y,v))},[])):c=Array.isArray(c)?c:[c];for(var b=0;b<c.length;b++)h<(g=this.getStringUnitWidth(c[b],{font:u})*f)&&(h=g);return h!==0&&(m=c.length),{w:h/=p,h:Math.max((m*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/p,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var c=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),n.call(this);var d=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,u=this.internal.__cell__.margins||t,p=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+u.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=u.top,h&&p&&(this.printHeaderRow(c.lineNumber,!0),c.y+=p[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,r===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-f,c.y+f,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+f,{align:"center",baseline:"top",maxWidth:c.width-f-f}):this.text(c.text,c.x+f,c.y+f,{align:"left",baseline:"top",maxWidth:c.width-f-f})),this.internal.__cell__.lastCell=c,this};e.table=function(c,d,f,u,p){if(n.call(this),!f)throw new Error("No data for PDF table.");var h,m,g,x,v=[],b=[],w=[],y={},N={},S=[],j=[],_=(p=p||{}).autoSize||!1,T=p.printHeaders!==!1,D=p.css&&p.css["font-size"]!==void 0?16*p.css["font-size"]:p.fontSize||12,A=p.margins||Object.assign({width:this.getPageWidth()},t),C=typeof p.padding=="number"?p.padding:3,M=p.headerBackgroundColor||"#c8c8c8",F=p.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=A,this.internal.__cell__.table_font_size=D,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=F,this.setFontSize(D),u==null)b=v=Object.keys(f[0]),w=v.map(function(){return"left"});else if(Array.isArray(u)&&aa(u[0])==="object")for(v=u.map(function(X){return X.name}),b=u.map(function(X){return X.prompt||X.name||""}),w=u.map(function(X){return X.align||"left"}),h=0;h<u.length;h+=1)N[u[h].name]=u[h].width*(19.049976/25.4);else Array.isArray(u)&&typeof u[0]=="string"&&(b=v=u,w=v.map(function(){return"left"}));if(_||Array.isArray(u)&&typeof u[0]=="string")for(h=0;h<v.length;h+=1){for(y[x=v[h]]=f.map(function(X){return X[x]}),this.setFont(void 0,"bold"),S.push(this.getTextDimensions(b[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),m=y[x],this.setFont(void 0,"normal"),g=0;g<m.length;g+=1)S.push(this.getTextDimensions(m[g],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);N[x]=Math.max.apply(null,S)+C+C,S=[]}if(T){var B={};for(h=0;h<v.length;h+=1)B[v[h]]={},B[v[h]].text=b[h],B[v[h]].align=w[h];var Y=l.call(this,B,N);j=v.map(function(X){return new i(c,d,N[X],Y,B[X].text,void 0,B[X].align)}),this.setTableHeaderRow(j),this.printHeaderRow(1,!1)}var V=u.reduce(function(X,W){return X[W.name]=W.align,X},{});for(h=0;h<f.length;h+=1){"rowStart"in p&&p.rowStart instanceof Function&&p.rowStart({row:h,data:f[h]},this);var J=l.call(this,f[h],N);for(g=0;g<v.length;g+=1){var U=f[h][v[g]];"cellStart"in p&&p.cellStart instanceof Function&&p.cellStart({row:h,col:g,data:U},this),o.call(this,new i(c,d,N[v[g]],J,U,h+2,V[v[g]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var f=this.internal.__cell__.padding,u=this.internal.__cell__.table_font_size,p=this.internal.scaleFactor;return Object.keys(c).map(function(h){var m=c[h];return this.splitTextToSize(m.hasOwnProperty("text")?m.text:m,d[h]-f-f)},this).map(function(h){return this.getLineHeightFactor()*h.length*u/p+f+f},this).reduce(function(h,m){return Math.max(h,m)},0)};e.setTableHeaderRow=function(c){n.call(this),this.internal.__cell__.tableHeaderRow=c},e.printHeaderRow=function(c,d){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var u=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(u[0],u[1],u[2],u[3],void 0,-1)}this.setFont(void 0,"bold");for(var p=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){f=this.internal.__cell__.tableHeaderRow[h].clone(),d&&(f.y=this.internal.__cell__.margins.top||0,p.push(f)),f.lineNumber=c;var m=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(m)}p.length>0&&this.setTableHeaderRow(p),this.setFont(void 0,"normal"),r=!1}}(qr.API);var BU={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},$U=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],RS=RU($U),UU=[100,200,300,400,500,600,700,800,900],QCe=RU(UU);function BS(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return BU[i=i||"normal"]?i:"normal"}(e.style),n=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(i){return typeof RS[i=i||"normal"]=="number"?i:"normal"}(e.stretch);return{family:t,style:r,weight:n,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,r,n].join(" ")}}}function eD(e,t,r,n){var s;for(s=r;s>=0&&s<t.length;s+=n)if(e[t[s]])return e[t[s]];for(s=r;s>=0&&s<t.length;s-=n)if(e[t[s]])return e[t[s]]}var JCe={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},tD={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function rD(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function ZCe(e,t,r){for(var n=(r=r||{}).defaultFontFamily||"times",s=Object.assign({},JCe,r.genericFontFamilies||{}),i=null,o=null,l=0;l<t.length;++l)if(s[(i=BS(t[l])).family]&&(i.family=s[i.family]),e.hasOwnProperty(i.family)){o=e[i.family];break}if(!(o=o||e[n]))throw new Error("Could not find a font-family for the rule '"+rD(i)+"' and default family '"+n+"'.");if(o=function(c,d){if(d[c])return d[c];var f=RS[c],u=f<=RS.normal?-1:1,p=eD(d,$U,f,u);if(!p)throw new Error("Could not find a matching font-stretch value for "+c);return p}(i.stretch,o),o=function(c,d){if(d[c])return d[c];for(var f=BU[c],u=0;u<f.length;++u)if(d[f[u]])return d[f[u]];throw new Error("Could not find a matching font-style for "+c)}(i.style,o),!(o=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var f=QCe[c],u=eD(d,UU,f,c<400?-1:1);if(!u)throw new Error("Could not find a matching font-weight for value "+c);return u}(i.weight,o)))throw new Error("Failed to resolve a font for the rule '"+rD(i)+"'.");return o}function nD(e){return e.trimLeft()}function eEe(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function tEe(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var zy,aD,sD,S4=["times"];(function(e){var t,r,n,s,i,o,l,c,d,f=function(E){return E=E||{},this.isStrokeTransparent=E.isStrokeTransparent||!1,this.strokeOpacity=E.strokeOpacity||1,this.strokeStyle=E.strokeStyle||"#000000",this.fillStyle=E.fillStyle||"#000000",this.isFillTransparent=E.isFillTransparent||!1,this.fillOpacity=E.fillOpacity||1,this.font=E.font||"10px sans-serif",this.textBaseline=E.textBaseline||"alphabetic",this.textAlign=E.textAlign||"left",this.lineWidth=E.lineWidth||1,this.lineJoin=E.lineJoin||"miter",this.lineCap=E.lineCap||"butt",this.path=E.path||[],this.transform=E.transform!==void 0?E.transform.clone():new c,this.globalCompositeOperation=E.globalCompositeOperation||"normal",this.globalAlpha=E.globalAlpha||1,this.clip_path=E.clip_path||[],this.currentPoint=E.currentPoint||new o,this.miterLimit=E.miterLimit||10,this.lastPoint=E.lastPoint||new o,this.lineDashOffset=E.lineDashOffset||0,this.lineDash=E.lineDash||[],this.margin=E.margin||[0,0,0,0],this.prevPageLastElemOffset=E.prevPageLastElemOffset||0,this.ignoreClearRect=typeof E.ignoreClearRect!="boolean"||E.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new u(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new f}]);var u=function(E){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var R=E;Object.defineProperty(this,"pdf",{get:function(){return R}});var q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return q},set:function(ie){q=!!ie}});var L=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return L},set:function(ie){L=!!ie}});var H=0;Object.defineProperty(this,"posX",{get:function(){return H},set:function(ie){isNaN(ie)||(H=ie)}});var se=0;Object.defineProperty(this,"posY",{get:function(){return se},set:function(ie){isNaN(ie)||(se=ie)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(ie){var Q;typeof ie=="number"?Q=[ie,ie,ie,ie]:((Q=new Array(4))[0]=ie[0],Q[1]=ie.length>=2?ie[1]:Q[0],Q[2]=ie.length>=3?ie[2]:Q[0],Q[3]=ie.length>=4?ie[3]:Q[1]),d.margin=Q}});var ce=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ce},set:function(ie){ce=ie}});var ae=0;Object.defineProperty(this,"lastBreak",{get:function(){return ae},set:function(ie){ae=ie}});var Z=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Z},set:function(ie){Z=ie}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(ie){ie instanceof f&&(d=ie)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(ie){d.path=ie}});var ve=[];Object.defineProperty(this,"ctxStack",{get:function(){return ve},set:function(ie){ve=ie}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ie){var Q;Q=p(ie),this.ctx.fillStyle=Q.style,this.ctx.isFillTransparent=Q.a===0,this.ctx.fillOpacity=Q.a,this.pdf.setFillColor(Q.r,Q.g,Q.b,{a:Q.a}),this.pdf.setTextColor(Q.r,Q.g,Q.b,{a:Q.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ie){var Q=p(ie);this.ctx.strokeStyle=Q.style,this.ctx.isStrokeTransparent=Q.a===0,this.ctx.strokeOpacity=Q.a,Q.a===0?this.pdf.setDrawColor(255,255,255):(Q.a,this.pdf.setDrawColor(Q.r,Q.g,Q.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ie){["butt","round","square"].indexOf(ie)!==-1&&(this.ctx.lineCap=ie,this.pdf.setLineCap(ie))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ie){isNaN(ie)||(this.ctx.lineWidth=ie,this.pdf.setLineWidth(ie))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ie){["bevel","round","miter"].indexOf(ie)!==-1&&(this.ctx.lineJoin=ie,this.pdf.setLineJoin(ie))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ie){isNaN(ie)||(this.ctx.miterLimit=ie,this.pdf.setMiterLimit(ie))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ie){this.ctx.textBaseline=ie}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ie){["right","end","center","left","start"].indexOf(ie)!==-1&&(this.ctx.textAlign=ie)}});var ne=null;function He(ie,Q){if(ne===null){var Ne=function(de){var ye=[];return Object.keys(de).forEach(function(xe){de[xe].forEach(function(we){var Ae=null;switch(we){case"bold":Ae={family:xe,weight:"bold"};break;case"italic":Ae={family:xe,style:"italic"};break;case"bolditalic":Ae={family:xe,weight:"bold",style:"italic"};break;case"":case"normal":Ae={family:xe}}Ae!==null&&(Ae.ref={name:xe,style:we},ye.push(Ae))})}),ye}(ie.getFontList());ne=function(de){for(var ye={},xe=0;xe<de.length;++xe){var we=BS(de[xe]),Ae=we.family,Ue=we.stretch,me=we.style,ee=we.weight;ye[Ae]=ye[Ae]||{},ye[Ae][Ue]=ye[Ae][Ue]||{},ye[Ae][Ue][me]=ye[Ae][Ue][me]||{},ye[Ae][Ue][me][ee]=we}return ye}(Ne.concat(Q))}return ne}var Xe=null;Object.defineProperty(this,"fontFaces",{get:function(){return Xe},set:function(ie){ne=null,Xe=ie}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ie){var Q;if(this.ctx.font=ie,(Q=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(ie))!==null){var Ne=Q[1],de=(Q[2],Q[3]),ye=Q[4],xe=(Q[5],Q[6]),we=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(ye)[2];ye=Math.floor(we==="px"?parseFloat(ye)*this.pdf.internal.scaleFactor:we==="em"?parseFloat(ye)*this.pdf.getFontSize():parseFloat(ye)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(ye);var Ae=function(qe){var Ke,Qe,_t=[],vt=qe.trim();if(vt==="")return S4;if(vt in tD)return[tD[vt]];for(;vt!=="";){switch(Qe=null,Ke=(vt=nD(vt)).charAt(0)){case'"':case"'":Qe=eEe(vt.substring(1),Ke);break;default:Qe=tEe(vt)}if(Qe===null||(_t.push(Qe[0]),(vt=nD(Qe[1]))!==""&&vt.charAt(0)!==","))return S4;vt=vt.replace(/^,/,"")}return _t}(xe);if(this.fontFaces){var Ue=ZCe(He(this.pdf,this.fontFaces),Ae.map(function(qe){return{family:qe,stretch:"normal",weight:de,style:Ne}}));this.pdf.setFont(Ue.ref.name,Ue.ref.style)}else{var me="";(de==="bold"||parseInt(de,10)>=700||Ne==="bold")&&(me="bold"),Ne==="italic"&&(me+="italic"),me.length===0&&(me="normal");for(var ee="",fe={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Fe=0;Fe<Ae.length;Fe++){if(this.pdf.internal.getFont(Ae[Fe],me,{noFallback:!0,disableWarning:!0})!==void 0){ee=Ae[Fe];break}if(me==="bolditalic"&&this.pdf.internal.getFont(Ae[Fe],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ee=Ae[Fe],me="bold";else if(this.pdf.internal.getFont(Ae[Fe],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ee=Ae[Fe],me="normal";break}}if(ee===""){for(var Ee=0;Ee<Ae.length;Ee++)if(fe[Ae[Ee]]){ee=fe[Ae[Ee]];break}}ee=ee===""?"Times":ee,this.pdf.setFont(ee,me)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ie){this.ctx.globalCompositeOperation=ie}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ie){this.ctx.globalAlpha=ie}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ie){this.ctx.lineDashOffset=ie,W.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ie){this.ctx.lineDash=ie,W.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ie){this.ctx.ignoreClearRect=!!ie}})};u.prototype.setLineDash=function(E){this.lineDash=E},u.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},u.prototype.fill=function(){y.call(this,"fill",!1)},u.prototype.stroke=function(){y.call(this,"stroke",!1)},u.prototype.beginPath=function(){this.path=[{type:"begin"}]},u.prototype.moveTo=function(E,R){if(isNaN(E)||isNaN(R))throw ha.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var q=this.ctx.transform.applyToPoint(new o(E,R));this.path.push({type:"mt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(E,R)},u.prototype.closePath=function(){var E=new o(0,0),R=0;for(R=this.path.length-1;R!==-1;R--)if(this.path[R].type==="begin"&&aa(this.path[R+1])==="object"&&typeof this.path[R+1].x=="number"){E=new o(this.path[R+1].x,this.path[R+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(E.x,E.y)},u.prototype.lineTo=function(E,R){if(isNaN(E)||isNaN(R))throw ha.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var q=this.ctx.transform.applyToPoint(new o(E,R));this.path.push({type:"lt",x:q.x,y:q.y}),this.ctx.lastPoint=new o(q.x,q.y)},u.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),y.call(this,null,!0)},u.prototype.quadraticCurveTo=function(E,R,q,L){if(isNaN(q)||isNaN(L)||isNaN(E)||isNaN(R))throw ha.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var H=this.ctx.transform.applyToPoint(new o(q,L)),se=this.ctx.transform.applyToPoint(new o(E,R));this.path.push({type:"qct",x1:se.x,y1:se.y,x:H.x,y:H.y}),this.ctx.lastPoint=new o(H.x,H.y)},u.prototype.bezierCurveTo=function(E,R,q,L,H,se){if(isNaN(H)||isNaN(se)||isNaN(E)||isNaN(R)||isNaN(q)||isNaN(L))throw ha.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ce=this.ctx.transform.applyToPoint(new o(H,se)),ae=this.ctx.transform.applyToPoint(new o(E,R)),Z=this.ctx.transform.applyToPoint(new o(q,L));this.path.push({type:"bct",x1:ae.x,y1:ae.y,x2:Z.x,y2:Z.y,x:ce.x,y:ce.y}),this.ctx.lastPoint=new o(ce.x,ce.y)},u.prototype.arc=function(E,R,q,L,H,se){if(isNaN(E)||isNaN(R)||isNaN(q)||isNaN(L)||isNaN(H))throw ha.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(se=!!se,!this.ctx.transform.isIdentity){var ce=this.ctx.transform.applyToPoint(new o(E,R));E=ce.x,R=ce.y;var ae=this.ctx.transform.applyToPoint(new o(0,q)),Z=this.ctx.transform.applyToPoint(new o(0,0));q=Math.sqrt(Math.pow(ae.x-Z.x,2)+Math.pow(ae.y-Z.y,2))}Math.abs(H-L)>=2*Math.PI&&(L=0,H=2*Math.PI),this.path.push({type:"arc",x:E,y:R,radius:q,startAngle:L,endAngle:H,counterclockwise:se})},u.prototype.arcTo=function(E,R,q,L,H){throw new Error("arcTo not implemented.")},u.prototype.rect=function(E,R,q,L){if(isNaN(E)||isNaN(R)||isNaN(q)||isNaN(L))throw ha.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(E,R),this.lineTo(E+q,R),this.lineTo(E+q,R+L),this.lineTo(E,R+L),this.lineTo(E,R),this.lineTo(E+q,R),this.lineTo(E,R)},u.prototype.fillRect=function(E,R,q,L){if(isNaN(E)||isNaN(R)||isNaN(q)||isNaN(L))throw ha.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!h.call(this)){var H={};this.lineCap!=="butt"&&(H.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(H.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(E,R,q,L),this.fill(),H.hasOwnProperty("lineCap")&&(this.lineCap=H.lineCap),H.hasOwnProperty("lineJoin")&&(this.lineJoin=H.lineJoin)}},u.prototype.strokeRect=function(E,R,q,L){if(isNaN(E)||isNaN(R)||isNaN(q)||isNaN(L))throw ha.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");m.call(this)||(this.beginPath(),this.rect(E,R,q,L),this.stroke())},u.prototype.clearRect=function(E,R,q,L){if(isNaN(E)||isNaN(R)||isNaN(q)||isNaN(L))throw ha.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(E,R,q,L))},u.prototype.save=function(E){E=typeof E!="boolean"||E;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("q");if(this.pdf.setPage(R),E){this.ctx.fontSize=this.pdf.internal.getFontSize();var L=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=L}},u.prototype.restore=function(E){E=typeof E!="boolean"||E;for(var R=this.pdf.internal.getCurrentPageInfo().pageNumber,q=0;q<this.pdf.internal.getNumberOfPages();q++)this.pdf.setPage(q+1),this.pdf.internal.out("Q");this.pdf.setPage(R),E&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},u.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var p=function(E){var R,q,L,H;if(E.isCanvasGradient===!0&&(E=E.getColor()),!E)return{r:0,g:0,b:0,a:0,style:E};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(E))R=0,q=0,L=0,H=0;else{var se=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(E);if(se!==null)R=parseInt(se[1]),q=parseInt(se[2]),L=parseInt(se[3]),H=1;else if((se=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(E))!==null)R=parseInt(se[1]),q=parseInt(se[2]),L=parseInt(se[3]),H=parseFloat(se[4]);else{if(H=1,typeof E=="string"&&E.charAt(0)!=="#"){var ce=new PU(E);E=ce.ok?ce.toHex():"#000000"}E.length===4?(R=E.substring(1,2),R+=R,q=E.substring(2,3),q+=q,L=E.substring(3,4),L+=L):(R=E.substring(1,3),q=E.substring(3,5),L=E.substring(5,7)),R=parseInt(R,16),q=parseInt(q,16),L=parseInt(L,16)}}return{r:R,g:q,b:L,a:H,style:E}},h=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},m=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};u.prototype.fillText=function(E,R,q,L){if(isNaN(R)||isNaN(q)||typeof E!="string")throw ha.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(L=isNaN(L)?void 0:L,!h.call(this)){var H=J(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;C.call(this,{text:E,x:R,y:q,scale:se,angle:H,align:this.textAlign,maxWidth:L})}},u.prototype.strokeText=function(E,R,q,L){if(isNaN(R)||isNaN(q)||typeof E!="string")throw ha.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!m.call(this)){L=isNaN(L)?void 0:L;var H=J(this.ctx.transform.rotation),se=this.ctx.transform.scaleX;C.call(this,{text:E,x:R,y:q,scale:se,renderingMode:"stroke",angle:H,align:this.textAlign,maxWidth:L})}},u.prototype.measureText=function(E){if(typeof E!="string")throw ha.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var R=this.pdf,q=this.pdf.internal.scaleFactor,L=R.internal.getFontSize(),H=R.getStringUnitWidth(E)*L/R.internal.scaleFactor,se=function(ce){var ae=(ce=ce||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ae}}),this};return new se({width:H*=Math.round(96*q/72*1e4)/1e4})},u.prototype.scale=function(E,R){if(isNaN(E)||isNaN(R))throw ha.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var q=new c(E,0,0,R,0,0);this.ctx.transform=this.ctx.transform.multiply(q)},u.prototype.rotate=function(E){if(isNaN(E))throw ha.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var R=new c(Math.cos(E),Math.sin(E),-Math.sin(E),Math.cos(E),0,0);this.ctx.transform=this.ctx.transform.multiply(R)},u.prototype.translate=function(E,R){if(isNaN(E)||isNaN(R))throw ha.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var q=new c(1,0,0,1,E,R);this.ctx.transform=this.ctx.transform.multiply(q)},u.prototype.transform=function(E,R,q,L,H,se){if(isNaN(E)||isNaN(R)||isNaN(q)||isNaN(L)||isNaN(H)||isNaN(se))throw ha.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ce=new c(E,R,q,L,H,se);this.ctx.transform=this.ctx.transform.multiply(ce)},u.prototype.setTransform=function(E,R,q,L,H,se){E=isNaN(E)?1:E,R=isNaN(R)?0:R,q=isNaN(q)?0:q,L=isNaN(L)?1:L,H=isNaN(H)?0:H,se=isNaN(se)?0:se,this.ctx.transform=new c(E,R,q,L,H,se)};var g=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};u.prototype.drawImage=function(E,R,q,L,H,se,ce,ae,Z){var ve=this.pdf.getImageProperties(E),ne=1,He=1,Xe=1,ie=1;L!==void 0&&ae!==void 0&&(Xe=ae/L,ie=Z/H,ne=ve.width/L*ae/L,He=ve.height/H*Z/H),se===void 0&&(se=R,ce=q,R=0,q=0),L!==void 0&&ae===void 0&&(ae=L,Z=H),L===void 0&&ae===void 0&&(ae=ve.width,Z=ve.height);for(var Q,Ne=this.ctx.transform.decompose(),de=J(Ne.rotate.shx),ye=new c,xe=(ye=(ye=(ye=ye.multiply(Ne.translate)).multiply(Ne.skew)).multiply(Ne.scale)).applyToRectangle(new l(se-R*Xe,ce-q*ie,L*ne,H*He)),we=x.call(this,xe),Ae=[],Ue=0;Ue<we.length;Ue+=1)Ae.indexOf(we[Ue])===-1&&Ae.push(we[Ue]);if(w(Ae),this.autoPaging)for(var me=Ae[0],ee=Ae[Ae.length-1],fe=me;fe<ee+1;fe++){this.pdf.setPage(fe);var Fe=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ee=fe===1?this.posY+this.margin[0]:this.margin[0],qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ke=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qe=fe===1?0:qe+(fe-2)*Ke;if(this.ctx.clip_path.length!==0){var _t=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Q,this.posX+this.margin[3],-Qe+Ee+this.ctx.prevPageLastElemOffset),N.call(this,"fill",!0),this.path=_t}var vt=JSON.parse(JSON.stringify(xe));vt=b([vt],this.posX+this.margin[3],-Qe+Ee+this.ctx.prevPageLastElemOffset)[0];var ke=(fe>me||fe<ee)&&g.call(this);ke&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Fe,Ke,null).clip().discardPath()),this.pdf.addImage(E,"JPEG",vt.x,vt.y,vt.w,vt.h,null,null,de),ke&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(E,"JPEG",xe.x,xe.y,xe.w,xe.h,null,null,de)};var x=function(E,R,q){var L=[];R=R||this.pdf.internal.pageSize.width,q=q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var H=this.posY+this.ctx.prevPageLastElemOffset;switch(E.type){default:case"mt":case"lt":L.push(Math.floor((E.y+H)/q)+1);break;case"arc":L.push(Math.floor((E.y+H-E.radius)/q)+1),L.push(Math.floor((E.y+H+E.radius)/q)+1);break;case"qct":var se=U(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x,E.y);L.push(Math.floor((se.y+H)/q)+1),L.push(Math.floor((se.y+se.h+H)/q)+1);break;case"bct":var ce=X(this.ctx.lastPoint.x,this.ctx.lastPoint.y,E.x1,E.y1,E.x2,E.y2,E.x,E.y);L.push(Math.floor((ce.y+H)/q)+1),L.push(Math.floor((ce.y+ce.h+H)/q)+1);break;case"rect":L.push(Math.floor((E.y+H)/q)+1),L.push(Math.floor((E.y+E.h+H)/q)+1)}for(var ae=0;ae<L.length;ae+=1)for(;this.pdf.internal.getNumberOfPages()<L[ae];)v.call(this);return L},v=function(){var E=this.fillStyle,R=this.strokeStyle,q=this.font,L=this.lineCap,H=this.lineWidth,se=this.lineJoin;this.pdf.addPage(),this.fillStyle=E,this.strokeStyle=R,this.font=q,this.lineCap=L,this.lineWidth=H,this.lineJoin=se},b=function(E,R,q){for(var L=0;L<E.length;L++)switch(E[L].type){case"bct":E[L].x2+=R,E[L].y2+=q;case"qct":E[L].x1+=R,E[L].y1+=q;case"mt":case"lt":case"arc":default:E[L].x+=R,E[L].y+=q}return E},w=function(E){return E.sort(function(R,q){return R-q})},y=function(E,R){for(var q,L,H=this.fillStyle,se=this.strokeStyle,ce=this.lineCap,ae=this.lineWidth,Z=Math.abs(ae*this.ctx.transform.scaleX),ve=this.lineJoin,ne=JSON.parse(JSON.stringify(this.path)),He=JSON.parse(JSON.stringify(this.path)),Xe=[],ie=0;ie<He.length;ie++)if(He[ie].x!==void 0)for(var Q=x.call(this,He[ie]),Ne=0;Ne<Q.length;Ne+=1)Xe.indexOf(Q[Ne])===-1&&Xe.push(Q[Ne]);for(var de=0;de<Xe.length;de++)for(;this.pdf.internal.getNumberOfPages()<Xe[de];)v.call(this);if(w(Xe),this.autoPaging)for(var ye=Xe[0],xe=Xe[Xe.length-1],we=ye;we<xe+1;we++){this.pdf.setPage(we),this.fillStyle=H,this.strokeStyle=se,this.lineCap=ce,this.lineWidth=Z,this.lineJoin=ve;var Ae=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=we===1?this.posY+this.margin[0]:this.margin[0],me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ee=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],fe=we===1?0:me+(we-2)*ee;if(this.ctx.clip_path.length!==0){var Fe=this.path;q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(q,this.posX+this.margin[3],-fe+Ue+this.ctx.prevPageLastElemOffset),N.call(this,E,!0),this.path=Fe}if(L=JSON.parse(JSON.stringify(ne)),this.path=b(L,this.posX+this.margin[3],-fe+Ue+this.ctx.prevPageLastElemOffset),R===!1||we===0){var Ee=(we>ye||we<xe)&&g.call(this);Ee&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ae,ee,null).clip().discardPath()),N.call(this,E,R),Ee&&this.pdf.restoreGraphicsState()}this.lineWidth=ae}else this.lineWidth=Z,N.call(this,E,R),this.lineWidth=ae;this.path=ne},N=function(E,R){if((E!=="stroke"||R||!m.call(this))&&(E==="stroke"||R||!h.call(this))){for(var q,L,H=[],se=this.path,ce=0;ce<se.length;ce++){var ae=se[ce];switch(ae.type){case"begin":H.push({begin:!0});break;case"close":H.push({close:!0});break;case"mt":H.push({start:ae,deltas:[],abs:[]});break;case"lt":var Z=H.length;if(se[ce-1]&&!isNaN(se[ce-1].x)&&(q=[ae.x-se[ce-1].x,ae.y-se[ce-1].y],Z>0)){for(;Z>=0;Z--)if(H[Z-1].close!==!0&&H[Z-1].begin!==!0){H[Z-1].deltas.push(q),H[Z-1].abs.push(ae);break}}break;case"bct":q=[ae.x1-se[ce-1].x,ae.y1-se[ce-1].y,ae.x2-se[ce-1].x,ae.y2-se[ce-1].y,ae.x-se[ce-1].x,ae.y-se[ce-1].y],H[H.length-1].deltas.push(q);break;case"qct":var ve=se[ce-1].x+2/3*(ae.x1-se[ce-1].x),ne=se[ce-1].y+2/3*(ae.y1-se[ce-1].y),He=ae.x+2/3*(ae.x1-ae.x),Xe=ae.y+2/3*(ae.y1-ae.y),ie=ae.x,Q=ae.y;q=[ve-se[ce-1].x,ne-se[ce-1].y,He-se[ce-1].x,Xe-se[ce-1].y,ie-se[ce-1].x,Q-se[ce-1].y],H[H.length-1].deltas.push(q);break;case"arc":H.push({deltas:[],abs:[],arc:!0}),Array.isArray(H[H.length-1].abs)&&H[H.length-1].abs.push(ae)}}L=R?null:E==="stroke"?"stroke":"fill";for(var Ne=!1,de=0;de<H.length;de++)if(H[de].arc)for(var ye=H[de].abs,xe=0;xe<ye.length;xe++){var we=ye[xe];we.type==="arc"?_.call(this,we.x,we.y,we.radius,we.startAngle,we.endAngle,we.counterclockwise,void 0,R,!Ne):M.call(this,we.x,we.y),Ne=!0}else if(H[de].close===!0)this.pdf.internal.out("h"),Ne=!1;else if(H[de].begin!==!0){var Ae=H[de].start.x,Ue=H[de].start.y;F.call(this,H[de].deltas,Ae,Ue),Ne=!0}L&&T.call(this,L),R&&D.call(this)}},S=function(E){var R=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,q=R*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return E-q;case"top":return E+R-q;case"hanging":return E+R-2*q;case"middle":return E+R/2-q;case"ideographic":return E;case"alphabetic":default:return E}},j=function(E){return E+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};u.prototype.createLinearGradient=function(){var E=function(){};return E.colorStops=[],E.addColorStop=function(R,q){this.colorStops.push([R,q])},E.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},E.isCanvasGradient=!0,E},u.prototype.createPattern=function(){return this.createLinearGradient()},u.prototype.createRadialGradient=function(){return this.createLinearGradient()};var _=function(E,R,q,L,H,se,ce,ae,Z){for(var ve=Y.call(this,q,L,H,se),ne=0;ne<ve.length;ne++){var He=ve[ne];ne===0&&(Z?A.call(this,He.x1+E,He.y1+R):M.call(this,He.x1+E,He.y1+R)),B.call(this,E,R,He.x2,He.y2,He.x3,He.y3,He.x4,He.y4)}ae?D.call(this):T.call(this,ce)},T=function(E){switch(E){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},D=function(){this.pdf.clip(),this.pdf.discardPath()},A=function(E,R){this.pdf.internal.out(r(E)+" "+n(R)+" m")},C=function(E){var R;switch(E.align){case"right":case"end":R="right";break;case"center":R="center";break;case"left":case"start":default:R="left"}var q=this.pdf.getTextDimensions(E.text),L=S.call(this,E.y),H=j.call(this,L)-q.h,se=this.ctx.transform.applyToPoint(new o(E.x,L)),ce=this.ctx.transform.decompose(),ae=new c;ae=(ae=(ae=ae.multiply(ce.translate)).multiply(ce.skew)).multiply(ce.scale);for(var Z,ve,ne,He=this.ctx.transform.applyToRectangle(new l(E.x,L,q.w,q.h)),Xe=ae.applyToRectangle(new l(E.x,H,q.w,q.h)),ie=x.call(this,Xe),Q=[],Ne=0;Ne<ie.length;Ne+=1)Q.indexOf(ie[Ne])===-1&&Q.push(ie[Ne]);if(w(Q),this.autoPaging)for(var de=Q[0],ye=Q[Q.length-1],xe=de;xe<ye+1;xe++){this.pdf.setPage(xe);var we=xe===1?this.posY+this.margin[0]:this.margin[0],Ae=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[2],me=Ue-this.margin[0],ee=this.pdf.internal.pageSize.width-this.margin[1],fe=ee-this.margin[3],Fe=xe===1?0:Ae+(xe-2)*me;if(this.ctx.clip_path.length!==0){var Ee=this.path;Z=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(Z,this.posX+this.margin[3],-1*Fe+we),N.call(this,"fill",!0),this.path=Ee}var qe=b([JSON.parse(JSON.stringify(Xe))],this.posX+this.margin[3],-Fe+we+this.ctx.prevPageLastElemOffset)[0];E.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*E.scale),ne=this.lineWidth,this.lineWidth=ne*E.scale);var Ke=this.autoPaging!=="text";if(Ke||qe.y+qe.h<=Ue){if(Ke||qe.y>=we&&qe.x<=ee){var Qe=Ke?E.text:this.pdf.splitTextToSize(E.text,E.maxWidth||ee-qe.x)[0],_t=b([JSON.parse(JSON.stringify(He))],this.posX+this.margin[3],-Fe+we+this.ctx.prevPageLastElemOffset)[0],vt=Ke&&(xe>de||xe<ye)&&g.call(this);vt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],fe,me,null).clip().discardPath()),this.pdf.text(Qe,_t.x,_t.y,{angle:E.angle,align:R,renderingMode:E.renderingMode}),vt&&this.pdf.restoreGraphicsState()}}else qe.y<Ue&&(this.ctx.prevPageLastElemOffset+=Ue-qe.y);E.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ne)}else E.scale>=.01&&(ve=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ve*E.scale),ne=this.lineWidth,this.lineWidth=ne*E.scale),this.pdf.text(E.text,se.x+this.posX,se.y+this.posY,{angle:E.angle,align:R,renderingMode:E.renderingMode,maxWidth:E.maxWidth}),E.scale>=.01&&(this.pdf.setFontSize(ve),this.lineWidth=ne)},M=function(E,R,q,L){q=q||0,L=L||0,this.pdf.internal.out(r(E+q)+" "+n(R+L)+" l")},F=function(E,R,q){return this.pdf.lines(E,R,q,null,null)},B=function(E,R,q,L,H,se,ce,ae){this.pdf.internal.out([t(s(q+E)),t(i(L+R)),t(s(H+E)),t(i(se+R)),t(s(ce+E)),t(i(ae+R)),"c"].join(" "))},Y=function(E,R,q,L){for(var H=2*Math.PI,se=Math.PI/2;R>q;)R-=H;var ce=Math.abs(q-R);ce<H&&L&&(ce=H-ce);for(var ae=[],Z=L?-1:1,ve=R;ce>1e-5;){var ne=ve+Z*Math.min(ce,se);ae.push(V.call(this,E,ve,ne)),ce-=Math.abs(ne-ve),ve=ne}return ae},V=function(E,R,q){var L=(q-R)/2,H=E*Math.cos(L),se=E*Math.sin(L),ce=H,ae=-se,Z=ce*ce+ae*ae,ve=Z+ce*H+ae*se,ne=4/3*(Math.sqrt(2*Z*ve)-ve)/(ce*se-ae*H),He=ce-ne*ae,Xe=ae+ne*ce,ie=He,Q=-Xe,Ne=L+R,de=Math.cos(Ne),ye=Math.sin(Ne);return{x1:E*Math.cos(R),y1:E*Math.sin(R),x2:He*de-Xe*ye,y2:He*ye+Xe*de,x3:ie*de-Q*ye,y3:ie*ye+Q*de,x4:E*Math.cos(q),y4:E*Math.sin(q)}},J=function(E){return 180*E/Math.PI},U=function(E,R,q,L,H,se){var ce=E+.5*(q-E),ae=R+.5*(L-R),Z=H+.5*(q-H),ve=se+.5*(L-se),ne=Math.min(E,H,ce,Z),He=Math.max(E,H,ce,Z),Xe=Math.min(R,se,ae,ve),ie=Math.max(R,se,ae,ve);return new l(ne,Xe,He-ne,ie-Xe)},X=function(E,R,q,L,H,se,ce,ae){var Z,ve,ne,He,Xe,ie,Q,Ne,de,ye,xe,we,Ae,Ue,me=q-E,ee=L-R,fe=H-q,Fe=se-L,Ee=ce-H,qe=ae-se;for(ve=0;ve<41;ve++)de=(Q=(ne=E+(Z=ve/40)*me)+Z*((Xe=q+Z*fe)-ne))+Z*(Xe+Z*(H+Z*Ee-Xe)-Q),ye=(Ne=(He=R+Z*ee)+Z*((ie=L+Z*Fe)-He))+Z*(ie+Z*(se+Z*qe-ie)-Ne),ve==0?(xe=de,we=ye,Ae=de,Ue=ye):(xe=Math.min(xe,de),we=Math.min(we,ye),Ae=Math.max(Ae,de),Ue=Math.max(Ue,ye));return new l(Math.round(xe),Math.round(we),Math.round(Ae-xe),Math.round(Ue-we))},W=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var E,R,q=(E=this.ctx.lineDash,R=this.ctx.lineDashOffset,JSON.stringify({lineDash:E,lineDashOffset:R}));this.prevLineDash!==q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=q)}}})(qr.API),function(e){var t=function(i){var o,l,c,d,f,u,p,h,m,g;for(l=[],c=0,d=(i+=o="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(f=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(u=(f=((f=((f=((f=(f-(g=f%85))/85)-(m=f%85))/85)-(h=f%85))/85)-(p=f%85))/85)%85,l.push(u+33,p+33,h+33,m+33,g+33)):l.push(122);return function(x,v){for(var b=v;b>0;b--)x.pop()}(l,o.length),String.fromCharCode.apply(String,l)+"~>"},r=function(i){var o,l,c,d,f,u=String,p="length",h=255,m="charCodeAt",g="slice",x="replace";for(i[g](-2),i=i[g](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),c=[],d=0,f=(i+=o="uuuuu"[g](i[p]%5||5))[p];f>d;d+=5)l=52200625*(i[m](d)-33)+614125*(i[m](d+1)-33)+7225*(i[m](d+2)-33)+85*(i[m](d+3)-33)+(i[m](d+4)-33),c.push(h&l>>24,h&l>>16,h&l>>8,h&l);return function(v,b){for(var w=b;w>0;w--)v.pop()}(c,o[p]),u.fromCharCode.apply(u,c)},n=function(i){var o=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),o.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var o=new Uint8Array(i.length),l=i.length;l--;)o[l]=i.charCodeAt(l);return i=(o=IS(o)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};e.processDataByFilters=function(i,o){var l=0,c=i||"",d=[];for(typeof(o=o||[])=="string"&&(o=[o]),l=0;l<o.length;l+=1)switch(o[l]){case"ASCII85Decode":case"/ASCII85Decode":c=r(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=t(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=n(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(f){return("0"+f.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+o[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(qr.API),function(e){e.loadFile=function(t,r,n){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=function(c,d,f){var u=new XMLHttpRequest,p=0,h=function(m){var g=m.length,x=[],v=String.fromCharCode;for(p=0;p<g;p+=1)x.push(v(255&m.charCodeAt(p)));return x.join("")};if(u.open("GET",c,!d),u.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(u.onload=function(){u.status===200?f(h(this.responseText)):f(void 0)}),u.send(null),d&&u.status===200)return h(u.responseText)}(s,i,o)}catch{}return l}(t,r,n)},e.loadImageFile=e.loadFile}(qr.API),function(e){function t(){return(Hr.html2canvas?Promise.resolve(Hr.html2canvas):B2(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load html2canvas: "+o))}).then(function(o){return o.default?o.default:o})}function r(){return(Hr.DOMPurify?Promise.resolve(Hr.DOMPurify):B2(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(o){return Promise.reject(new Error("Could not load dompurify: "+o))}).then(function(o){return o.default?o.default:o})}var n=function(o){var l=aa(o);return l==="undefined"?"undefined":l==="string"||o instanceof String?"string":l==="number"||o instanceof Number?"number":l==="function"||o instanceof Function?"function":o&&o.constructor===Array?"array":o&&o.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(o,l){var c=document.createElement(o);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function o(l){var c=Object.assign(o.convert(Promise.resolve()),JSON.parse(JSON.stringify(o.template))),d=o.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,o,1,[o])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(o,l){return o.__proto__=l||i.prototype,o},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(o,l){return this.then(function(){switch(l=l||function(c){switch(n(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(o)){case"string":return this.then(r).then(function(c){return this.set({src:s("div",{innerHTML:o,dompurify:c})})});case"element":return this.set({src:o});case"canvas":return this.set({canvas:o});case"img":return this.set({img:o});default:return this.error("Unknown source type.")}})},i.prototype.to=function(o){switch(o){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var o={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,f){for(var u=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)f!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||u.appendChild(c(p,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(u.width=d.width,u.height=d.height,u.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(u.value=d.value),u.addEventListener("load",function(){u.scrollTop=d.scrollTop,u.scrollLeft=d.scrollLeft},!0)),u}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(o.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:o}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var o=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(o).then(t).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,f=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,u=Object.assign({async:!0,allowTaint:!0,scale:f,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete u.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var p=0;p<d.length;++p){var h=d[p],m=h.src.find(function(g){return g.format==="truetype"});m&&c.addFont(m.url,h.ref.name,h.ref.style)}return u.windowHeight=u.windowHeight||0,u.windowHeight=u.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):u.windowHeight,c.context2d.save(!0),l(this.prop.container,u)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var o=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=o})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(o,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(o,l):this.outputPdf(o,l)},i.prototype.outputPdf=function(o,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(o,l)})},i.prototype.outputImg=function(o){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(o){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+o+'" is not supported.'}})},i.prototype.save=function(o){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(o?{filename:o}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(o){if(n(o)!=="object")return this;var l=Object.keys(o||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=o[c]};switch(c){case"margin":return this.setMargin.bind(this,o.margin);case"jsPDF":return function(){return this.opt.jsPDF=o.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,o.pageSize);default:return function(){this.opt[c]=o[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(o,l){return this.then(function(){var c=o in i.template.prop?this.prop[o]:this.opt[o];return l?l(c):c})},i.prototype.setMargin=function(o){return this.then(function(){switch(n(o)){case"number":o=[o,o,o,o];case"array":if(o.length===2&&(o=[o[0],o[1],o[0],o[1]]),o.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=o}).then(this.setPageSize)},i.prototype.setPageSize=function(o){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(o=o||qr.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(o.inner={width:o.width-this.opt.margin[1]-this.opt.margin[3],height:o.height-this.opt.margin[0]-this.opt.margin[2]},o.inner.px={width:l(o.inner.width,o.k),height:l(o.inner.height,o.k)},o.inner.ratio=o.inner.height/o.inner.width),this.prop.pageSize=o})},i.prototype.setProgress=function(o,l,c,d){return o!=null&&(this.progress.val=o),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(o,l,c,d){return this.setProgress(o?this.progress.val+o:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(o,l){var c=this;return this.thenCore(o,l,function(d,f){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(u){return c.updateProgress(null,d),u}).then(d,f).then(function(u){return c.updateProgress(1),u})})},i.prototype.thenCore=function(o,l,c){c=c||Promise.prototype.then,o&&(o=o.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),f=c.call(d,o,l);return i.convert(f,this.__proto__)},i.prototype.thenExternal=function(o,l){return Promise.prototype.then.call(this,o,l)},i.prototype.thenList=function(o){var l=this;return o.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(o){o&&(o=o.bind(this));var l=Promise.prototype.catch.call(this,o);return i.convert(l,this)},i.prototype.catchExternal=function(o){return Promise.prototype.catch.call(this,o)},i.prototype.error=function(o){return this.then(function(){throw new Error(o)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,qr.getPageSize=function(o,l,c){if(aa(o)==="object"){var d=o;o=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",o=(""+(o||"P")).toLowerCase();var f,u=(""+c).toLowerCase(),p={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":f=1;break;case"mm":f=72/25.4;break;case"cm":f=72/2.54;break;case"in":f=72;break;case"px":f=.75;break;case"pc":case"em":f=12;break;case"ex":f=6;break;default:throw"Invalid unit: "+l}var h,m=0,g=0;if(p.hasOwnProperty(u))m=p[u][1]/f,g=p[u][0]/f;else try{m=c[1],g=c[0]}catch{throw new Error("Invalid format: "+c)}if(o==="p"||o==="portrait")o="p",g>m&&(h=g,g=m,m=h);else{if(o!=="l"&&o!=="landscape")throw"Invalid orientation: "+o;o="l",m>g&&(h=g,g=m,m=h)}return{width:g,height:m,unit:l,k:f,orientation:o}},e.html=function(o,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(BS):null;var c=new i(l);return l.worker?c:c.from(o).doCallback()}}(qr.API),qr.API.addJS=function(e){return sD=e,this.internal.events.subscribe("postPutResources",function(){zy=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(zy+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),aD=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+sD+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){zy!==void 0&&aD!==void 0&&this.internal.out("/Names <</JavaScript "+zy+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],l=n.exec(o);if(l!=null){var c=l[1];r.internal.newObjectDeferredBegin(c,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,f=[];for(i=0;i<d;i++){var u=r.internal.newObject();f.push(u);var p=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+p.objId+" 0 R /XYZ null null null]>> endobj")}var h=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+h+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var o={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var c=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<n.children.length;d++)this.renderItems(n.children[d])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(qr.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,s,i,o,l){var c,d=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(c=function(u){for(var p,h=256*u.charCodeAt(4)+u.charCodeAt(5),m=u.length,g={width:0,height:0,numcomponents:1},x=4;x<m;x+=2){if(x+=h,t.indexOf(u.charCodeAt(x+1))!==-1){p=256*u.charCodeAt(x+5)+u.charCodeAt(x+6),g={width:256*u.charCodeAt(x+7)+u.charCodeAt(x+8),height:p,numcomponents:u.charCodeAt(x+9)};break}h=256*u.charCodeAt(x+2)+u.charCodeAt(x+3)}return g}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}f={data:r,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:n,alias:s}}return f}}(qr.API);var Qp,qy,iD,oD,lD,rEe=function(){var e,t,r;function n(i){var o,l,c,d,f,u,p,h,m,g,x,v,b,w;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},u=null;;){switch(o=this.readUInt32(),m=(function(){var y,N;for(N=[],y=0;y<4;++y)N.push(String.fromCharCode(this.data[this.pos++]));return N}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(o);break;case"fcTL":u&&this.animation.frames.push(u),this.pos+=4,u={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},f=this.readUInt16(),d=this.readUInt16()||100,u.delay=1e3*f/d,u.disposeOp=this.data[this.pos++],u.blendOp=this.data[this.pos++],u.data=[];break;case"IDAT":case"fdAT":for(m==="fdAT"&&(this.pos+=4,o-=4),i=(u!=null?u.data:void 0)||this.imgData,v=0;0<=o?v<o:v>o;0<=o?++v:--v)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(o),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((g=c-this.transparency.indexed.length)>0)for(b=0;0<=g?b<g:b>g;0<=g?++b:--b)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(o)[0];break;case 2:this.transparency.rgb=this.read(o)}break;case"tEXt":p=(x=this.read(o)).indexOf(0),h=String.fromCharCode.apply(String,x.slice(0,p)),this.text[h]=String.fromCharCode.apply(String,x.slice(p+1));break;case"IEND":return u&&this.animation.frames.push(u),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(w=this.colorType)===4||w===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=o}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}n.prototype.read=function(i){var o,l;for(l=[],o=0;0<=i?o<i:o>i;0<=i?++o:--o)l.push(this.data[this.pos++]);return l},n.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},n.prototype.decodePixels=function(i){var o=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*o),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function f(u,p,h,m){var g,x,v,b,w,y,N,S,j,_,T,D,A,C,M,F,B,Y,V,J,U,X=Math.ceil((d.width-u)/h),W=Math.ceil((d.height-p)/m),E=d.width==X&&d.height==W;for(C=o*X,D=E?l:new Uint8Array(C*W),y=i.length,A=0,x=0;A<W&&c<y;){switch(i[c++]){case 0:for(b=B=0;B<C;b=B+=1)D[x++]=i[c++];break;case 1:for(b=Y=0;Y<C;b=Y+=1)g=i[c++],w=b<o?0:D[x-o],D[x++]=(g+w)%256;break;case 2:for(b=V=0;V<C;b=V+=1)g=i[c++],v=(b-b%o)/o,M=A&&D[(A-1)*C+v*o+b%o],D[x++]=(M+g)%256;break;case 3:for(b=J=0;J<C;b=J+=1)g=i[c++],v=(b-b%o)/o,w=b<o?0:D[x-o],M=A&&D[(A-1)*C+v*o+b%o],D[x++]=(g+Math.floor((w+M)/2))%256;break;case 4:for(b=U=0;U<C;b=U+=1)g=i[c++],v=(b-b%o)/o,w=b<o?0:D[x-o],A===0?M=F=0:(M=D[(A-1)*C+v*o+b%o],F=v&&D[(A-1)*C+(v-1)*o+b%o]),N=w+M-F,S=Math.abs(N-w),_=Math.abs(N-M),T=Math.abs(N-F),j=S<=_&&S<=T?w:_<=T?M:F,D[x++]=(g+j)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!E){var R=((p+A*m)*d.width+u)*o,q=A*C;for(b=0;b<X;b+=1){for(var L=0;L<o;L+=1)l[R++]=D[q++];R+=(h-1)*o}}A++}}return i=DCe(i),d.interlaceMethod==1?(f(0,0,8,8),f(4,0,8,8),f(0,4,4,8),f(2,0,4,4),f(0,2,2,4),f(1,0,2,2),f(0,1,1,2)):f(0,0,1,1),l},n.prototype.decodePalette=function(){var i,o,l,c,d,f,u,p,h;for(l=this.palette,f=this.transparency.indexed||[],d=new Uint8Array((f.length||0)+l.length),c=0,i=0,o=u=0,p=l.length;u<p;o=u+=3)d[c++]=l[o],d[c++]=l[o+1],d[c++]=l[o+2],d[c++]=(h=f[i++])!=null?h:255;return d},n.prototype.copyToImageData=function(i,o){var l,c,d,f,u,p,h,m,g,x,v;if(c=this.colors,g=null,l=this.hasAlphaChannel,this.palette.length&&(g=(v=this._decodedPalette)!=null?v:this._decodedPalette=this.decodePalette(),c=4,l=!0),m=(d=i.data||i).length,u=g||o,f=p=0,c===1)for(;f<m;)h=g?4*o[f/4]:p,x=u[h++],d[f++]=x,d[f++]=x,d[f++]=x,d[f++]=l?u[h++]:255,p=h;else for(;f<m;)h=g?4*o[f/4]:p,d[f++]=u[h++],d[f++]=u[h++],d[f++]=u[h++],d[f++]=l?u[h++]:255,p=h},n.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(Hr)==="[object Window]"){try{t=Hr.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(i){var o;if(s()===!0)return r.width=i.width,r.height=i.height,r.clearRect(0,0,i.width,i.height),r.putImageData(i,0,0),(o=new Image).src=t.toDataURL(),o;throw new Error("This method requires a Browser with Canvas-capability.")},n.prototype.decodeFrames=function(i){var o,l,c,d,f,u,p,h;if(this.animation){for(h=[],l=f=0,u=(p=this.animation.frames).length;f<u;l=++f)o=p[l],c=i.createImageData(o.width,o.height),d=this.decodePixels(new Uint8Array(o.data)),this.copyToImageData(c,d),o.imageData=c,h.push(o.image=e(c));return h}},n.prototype.renderFrame=function(i,o){var l,c,d;return l=(c=this.animation.frames)[o],d=c[o-1],o===0&&i.clearRect(0,0,this.width,this.height),(d!=null?d.disposeOp:void 0)===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):(d!=null?d.disposeOp:void 0)===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},n.prototype.animate=function(i){var o,l,c,d,f,u,p=this;return l=0,u=this.animation,d=u.numFrames,c=u.frames,f=u.numPlays,(o=function(){var h,m;if(h=l++%d,m=c[h],p.renderFrame(i,h),d>1&&l/d<f)return p.animation._timeout=setTimeout(o,m.delay)})()},n.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},n.prototype.render=function(i){var o,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,o=i.getContext("2d"),this.animation?(this.decodeFrames(o),this.animate(o)):(l=o.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),o.putImageData(l,0,0))},n}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function nEe(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,s=e[t++],i=s>>7,o=1<<(7&s)+1;e[t++],e[t++];var l=null,c=null;i&&(l=t,c=o,t+=3*o);var d=!0,f=[],u=0,p=null,h=0,m=null;for(this.width=r,this.height=n;d&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,m=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var g=e[t++];u=e[t++]|e[t++]<<8,p=e[t++],!(1&g)&&(p=null),h=g>>2&7,t++;break;case 254:for(;;){if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var x=e[t++]|e[t++]<<8,v=e[t++]|e[t++]<<8,b=e[t++]|e[t++]<<8,w=e[t++]|e[t++]<<8,y=e[t++],N=y>>6&1,S=1<<(7&y)+1,j=l,_=c,T=!1;y>>7&&(T=!0,j=t,_=S,t+=3*S);var D=t;for(t++;;){var A;if(!((A=e[t++])>=0))throw Error("Invalid block size");if(A===0)break;t+=A}f.push({x,y:v,width:b,height:w,has_local_palette:T,palette_offset:j,palette_size:_,data_offset:D,data_length:t-D,transparent_index:p,interlaced:!!N,delay:u,disposal:h});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return m},this.frameInfo=function(C){if(C<0||C>=f.length)throw new Error("Frame index out of range.");return f[C]},this.decodeAndBlitFrameBGRA=function(C,M){var F=this.frameInfo(C),B=F.width*F.height,Y=new Uint8Array(B);cD(e,F.data_offset,Y,B);var V=F.palette_offset,J=F.transparent_index;J===null&&(J=256);var U=F.width,X=r-U,W=U,E=4*(F.y*r+F.x),R=4*((F.y+F.height)*r+F.x),q=E,L=4*X;F.interlaced===!0&&(L+=4*r*7);for(var H=8,se=0,ce=Y.length;se<ce;++se){var ae=Y[se];if(W===0&&(W=U,(q+=L)>=R&&(L=4*X+4*r*(H-1),q=E+(U+X)*(H<<1),H>>=1)),ae===J)q+=4;else{var Z=e[V+3*ae],ve=e[V+3*ae+1],ne=e[V+3*ae+2];M[q++]=ne,M[q++]=ve,M[q++]=Z,M[q++]=255}--W}},this.decodeAndBlitFrameRGBA=function(C,M){var F=this.frameInfo(C),B=F.width*F.height,Y=new Uint8Array(B);cD(e,F.data_offset,Y,B);var V=F.palette_offset,J=F.transparent_index;J===null&&(J=256);var U=F.width,X=r-U,W=U,E=4*(F.y*r+F.x),R=4*((F.y+F.height)*r+F.x),q=E,L=4*X;F.interlaced===!0&&(L+=4*r*7);for(var H=8,se=0,ce=Y.length;se<ce;++se){var ae=Y[se];if(W===0&&(W=U,(q+=L)>=R&&(L=4*X+4*r*(H-1),q=E+(U+X)*(H<<1),H>>=1)),ae===J)q+=4;else{var Z=e[V+3*ae],ve=e[V+3*ae+1],ne=e[V+3*ae+2];M[q++]=Z,M[q++]=ve,M[q++]=ne,M[q++]=255}--W}}}function cD(e,t,r,n){for(var s=e[t++],i=1<<s,o=i+1,l=o+1,c=s+1,d=(1<<c)-1,f=0,u=0,p=0,h=e[t++],m=new Int32Array(4096),g=null;;){for(;f<16&&h!==0;)u|=e[t++]<<f,f+=8,h===1?h=e[t++]:--h;if(f<c)break;var x=u&d;if(u>>=c,f-=c,x!==i){if(x===o)break;for(var v=x<l?x:g,b=0,w=v;w>i;)w=m[w]>>8,++b;var y=w;if(p+b+(v!==x?1:0)>n)return void ha.log("Warning, gif stream longer than expected.");r[p++]=y;var N=p+=b;for(v!==x&&(r[p++]=y),w=v;b--;)w=m[w],r[--N]=255&w,w>>=8;g!==null&&l<4096&&(m[l++]=g<<8|y,l>=d+1&&c<12&&(++c,d=d<<1|1)),g=x}else l=o+1,d=(1<<(c=s+1))-1,g=null}return p!==n&&ha.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function _4(e){var t,r,n,s,i,o=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),f=new Array(64),u=new Array(65535),p=new Array(65535),h=new Array(64),m=new Array(64),g=[],x=0,v=7,b=new Array(64),w=new Array(64),y=new Array(64),N=new Array(256),S=new Array(2048),j=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],_=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],D=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],A=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],C=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],M=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],B=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Y(E,R){for(var q=0,L=0,H=new Array,se=1;se<=16;se++){for(var ce=1;ce<=E[se];ce++)H[R[L]]=[],H[R[L]][0]=q,H[R[L]][1]=se,L++,q++;q*=2}return H}function V(E){for(var R=E[0],q=E[1]-1;q>=0;)R&1<<q&&(x|=1<<v),q--,--v<0&&(x==255?(J(255),J(0)):J(x),v=7,x=0)}function J(E){g.push(E)}function U(E){J(E>>8&255),J(255&E)}function X(E,R,q,L,H){for(var se,ce=H[0],ae=H[240],Z=function(ye,xe){var we,Ae,Ue,me,ee,fe,Fe,Ee,qe,Ke,Qe=0;for(qe=0;qe<8;++qe){we=ye[Qe],Ae=ye[Qe+1],Ue=ye[Qe+2],me=ye[Qe+3],ee=ye[Qe+4],fe=ye[Qe+5],Fe=ye[Qe+6];var _t=we+(Ee=ye[Qe+7]),vt=we-Ee,ke=Ae+Fe,Je=Ae-Fe,mt=Ue+fe,ue=Ue-fe,Ye=me+ee,bt=me-ee,xt=_t+Ye,Vt=_t-Ye,gr=ke+mt,qt=ke-mt;ye[Qe]=xt+gr,ye[Qe+4]=xt-gr;var Gt=.707106781*(qt+Vt);ye[Qe+2]=Vt+Gt,ye[Qe+6]=Vt-Gt;var Bt=.382683433*((xt=bt+ue)-(qt=Je+vt)),fr=.5411961*xt+Bt,Sr=1.306562965*qt+Bt,Cr=.707106781*(gr=ue+Je),cr=vt+Cr,It=vt-Cr;ye[Qe+5]=It+fr,ye[Qe+3]=It-fr,ye[Qe+1]=cr+Sr,ye[Qe+7]=cr-Sr,Qe+=8}for(Qe=0,qe=0;qe<8;++qe){we=ye[Qe],Ae=ye[Qe+8],Ue=ye[Qe+16],me=ye[Qe+24],ee=ye[Qe+32],fe=ye[Qe+40],Fe=ye[Qe+48];var yr=we+(Ee=ye[Qe+56]),wr=we-Ee,Fr=Ae+Fe,jr=Ae-Fe,Pr=Ue+fe,ge=Ue-fe,De=me+ee,Ce=me-ee,Oe=yr+De,G=yr-De,oe=Fr+Pr,Pe=Fr-Pr;ye[Qe]=Oe+oe,ye[Qe+32]=Oe-oe;var $e=.707106781*(Pe+G);ye[Qe+16]=G+$e,ye[Qe+48]=G-$e;var We=.382683433*((Oe=Ce+ge)-(Pe=jr+wr)),Ve=.5411961*Oe+We,Re=1.306562965*Pe+We,_e=.707106781*(oe=ge+jr),Ge=wr+_e,nt=wr-_e;ye[Qe+40]=nt+Ve,ye[Qe+24]=nt-Ve,ye[Qe+8]=Ge+Re,ye[Qe+56]=Ge-Re,Qe++}for(qe=0;qe<64;++qe)Ke=ye[qe]*xe[qe],h[qe]=Ke>0?Ke+.5|0:Ke-.5|0;return h}(E,R),ve=0;ve<64;++ve)m[j[ve]]=Z[ve];var ne=m[0]-q;q=m[0],ne==0?V(L[0]):(V(L[p[se=32767+ne]]),V(u[se]));for(var He=63;He>0&&m[He]==0;)He--;if(He==0)return V(ce),q;for(var Xe,ie=1;ie<=He;){for(var Q=ie;m[ie]==0&&ie<=He;)++ie;var Ne=ie-Q;if(Ne>=16){Xe=Ne>>4;for(var de=1;de<=Xe;++de)V(ae);Ne&=15}se=32767+m[ie],V(H[(Ne<<4)+p[se]]),V(u[se]),ie++}return He!=63&&V(ce),q}function W(E){E=Math.min(Math.max(E,1),100),i!=E&&(function(R){for(var q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],L=0;L<64;L++){var H=o((q[L]*R+50)/100);H=Math.min(Math.max(H,1),255),l[j[L]]=H}for(var se=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ce=0;ce<64;ce++){var ae=o((se[ce]*R+50)/100);ae=Math.min(Math.max(ae,1),255),c[j[ce]]=ae}for(var Z=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],ve=0,ne=0;ne<8;ne++)for(var He=0;He<8;He++)d[ve]=1/(l[j[ve]]*Z[ne]*Z[He]*8),f[ve]=1/(c[j[ve]]*Z[ne]*Z[He]*8),ve++}(E<50?Math.floor(5e3/E):Math.floor(200-2*E)),i=E)}this.encode=function(E,R){R&&W(R),g=new Array,x=0,v=7,U(65496),U(65504),U(16),J(74),J(70),J(73),J(70),J(0),J(1),J(1),J(0),U(1),U(1),J(0),J(0),function(){U(65499),U(132),J(0);for(var Ae=0;Ae<64;Ae++)J(l[Ae]);J(1);for(var Ue=0;Ue<64;Ue++)J(c[Ue])}(),function(Ae,Ue){U(65472),U(17),J(8),U(Ue),U(Ae),J(3),J(1),J(17),J(0),J(2),J(17),J(1),J(3),J(17),J(1)}(E.width,E.height),function(){U(65476),U(418),J(0);for(var Ae=0;Ae<16;Ae++)J(_[Ae+1]);for(var Ue=0;Ue<=11;Ue++)J(T[Ue]);J(16);for(var me=0;me<16;me++)J(D[me+1]);for(var ee=0;ee<=161;ee++)J(A[ee]);J(1);for(var fe=0;fe<16;fe++)J(C[fe+1]);for(var Fe=0;Fe<=11;Fe++)J(M[Fe]);J(17);for(var Ee=0;Ee<16;Ee++)J(F[Ee+1]);for(var qe=0;qe<=161;qe++)J(B[qe])}(),U(65498),U(12),J(3),J(1),J(0),J(2),J(17),J(3),J(17),J(0),J(63),J(0);var q=0,L=0,H=0;x=0,v=7,this.encode.displayName="_encode_";for(var se,ce,ae,Z,ve,ne,He,Xe,ie,Q=E.data,Ne=E.width,de=E.height,ye=4*Ne,xe=0;xe<de;){for(se=0;se<ye;){for(ve=ye*xe+se,He=-1,Xe=0,ie=0;ie<64;ie++)ne=ve+(Xe=ie>>3)*ye+(He=4*(7&ie)),xe+Xe>=de&&(ne-=ye*(xe+1+Xe-de)),se+He>=ye&&(ne-=se+He-ye+4),ce=Q[ne++],ae=Q[ne++],Z=Q[ne++],b[ie]=(S[ce]+S[ae+256>>0]+S[Z+512>>0]>>16)-128,w[ie]=(S[ce+768>>0]+S[ae+1024>>0]+S[Z+1280>>0]>>16)-128,y[ie]=(S[ce+1280>>0]+S[ae+1536>>0]+S[Z+1792>>0]>>16)-128;q=X(b,d,q,t,n),L=X(w,f,L,r,s),H=X(y,f,H,r,s),se+=32}xe+=8}if(v>=0){var we=[];we[1]=v+1,we[0]=(1<<v+1)-1,V(we)}return U(65497),new Uint8Array(g)},e=e||50,function(){for(var E=String.fromCharCode,R=0;R<256;R++)N[R]=E(R)}(),t=Y(_,T),r=Y(C,M),n=Y(D,A),s=Y(F,B),function(){for(var E=1,R=2,q=1;q<=15;q++){for(var L=E;L<R;L++)p[32767+L]=q,u[32767+L]=[],u[32767+L][1]=q,u[32767+L][0]=L;for(var H=-(R-1);H<=-E;H++)p[32767+H]=q,u[32767+H]=[],u[32767+H][1]=q,u[32767+H][0]=R-1+H;E<<=1,R<<=1}}(),function(){for(var E=0;E<256;E++)S[E]=19595*E,S[E+256>>0]=38470*E,S[E+512>>0]=7471*E+32768,S[E+768>>0]=-11059*E,S[E+1024>>0]=-21709*E,S[E+1280>>0]=32768*E+8421375,S[E+1536>>0]=-27439*E,S[E+1792>>0]=-5329*E}(),W(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Uc(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function dD(e){function t(_){if(!_)throw Error("assert :P")}function r(_,T,D){for(var A=0;4>A;A++)if(_[T+A]!=D.charCodeAt(A))return!0;return!1}function n(_,T,D,A,C){for(var M=0;M<C;M++)_[T+M]=D[A+M]}function s(_,T,D,A){for(var C=0;C<A;C++)_[T+C]=D}function i(_){return new Int32Array(_)}function o(_,T){for(var D=[],A=0;A<_;A++)D.push(new T);return D}function l(_,T){var D=[];return function A(C,M,F){for(var B=F[M],Y=0;Y<B&&(C.push(F.length>M+1?[]:new T),!(F.length<M+1));Y++)A(C[Y],M+1,F)}(D,0,_),D}var c=function(){var _=this;function T(k,I){for(var K=1<<I-1>>>0;k&K;)K>>>=1;return K?(k&K-1)+K:k}function D(k,I,K,re,he){t(!(re%K));do k[I+(re-=K)]=he;while(0<re)}function A(k,I,K,re,he){if(t(2328>=he),512>=he)var be=i(512);else if((be=i(he))==null)return 0;return function(je,Se,Te,Le,tt,ft){var ht,it,Et=Se,yt=1<<Te,rt=i(16),at=i(16);for(t(tt!=0),t(Le!=null),t(je!=null),t(0<Te),it=0;it<tt;++it){if(15<Le[it])return 0;++rt[Le[it]]}if(rt[0]==tt)return 0;for(at[1]=0,ht=1;15>ht;++ht){if(rt[ht]>1<<ht)return 0;at[ht+1]=at[ht]+rt[ht]}for(it=0;it<tt;++it)ht=Le[it],0<Le[it]&&(ft[at[ht]++]=it);if(at[15]==1)return(Le=new C).g=0,Le.value=ft[0],D(je,Et,1,yt,Le),yt;var At,Ot=-1,Tt=yt-1,tr=0,Kt=1,Tr=1,rr=1<<Te;for(it=0,ht=1,tt=2;ht<=Te;++ht,tt<<=1){if(Kt+=Tr<<=1,0>(Tr-=rt[ht]))return 0;for(;0<rt[ht];--rt[ht])(Le=new C).g=ht,Le.value=ft[it++],D(je,Et+tr,tt,rr,Le),tr=T(tr,ht)}for(ht=Te+1,tt=2;15>=ht;++ht,tt<<=1){if(Kt+=Tr<<=1,0>(Tr-=rt[ht]))return 0;for(;0<rt[ht];--rt[ht]){if(Le=new C,(tr&Tt)!=Ot){for(Et+=rr,At=1<<(Ot=ht)-Te;15>Ot&&!(0>=(At-=rt[Ot]));)++Ot,At<<=1;yt+=rr=1<<(At=Ot-Te),je[Se+(Ot=tr&Tt)].g=At+Te,je[Se+Ot].value=Et-Se-Ot}Le.g=ht-Te,Le.value=ft[it++],D(je,Et+(tr>>Te),tt,rr,Le),tr=T(tr,ht)}}return Kt!=2*at[15]-1?0:yt}(k,I,K,re,he,be)}function C(){this.value=this.g=0}function M(){this.value=this.g=0}function F(){this.G=o(5,C),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(as,M)}function B(k,I,K,re){t(k!=null),t(I!=null),t(2147483648>re),k.Ca=254,k.I=0,k.b=-8,k.Ka=0,k.oa=I,k.pa=K,k.Jd=I,k.Yc=K+re,k.Zc=4<=re?K+re-4+1:K,se(k)}function Y(k,I){for(var K=0;0<I--;)K|=ae(k,128)<<I;return K}function V(k,I){var K=Y(k,I);return ce(k)?-K:K}function J(k,I,K,re){var he,be=0;for(t(k!=null),t(I!=null),t(4294967288>re),k.Sb=re,k.Ra=0,k.u=0,k.h=0,4<re&&(re=4),he=0;he<re;++he)be+=I[K+he]<<8*he;k.Ra=be,k.bb=re,k.oa=I,k.pa=K}function U(k){for(;8<=k.u&&k.bb<k.Sb;)k.Ra>>>=8,k.Ra+=k.oa[k.pa+k.bb]<<Ma-8>>>0,++k.bb,k.u-=8;q(k)&&(k.h=1,k.u=0)}function X(k,I){if(t(0<=I),!k.h&&I<=ml){var K=R(k)&mo[I];return k.u+=I,U(k),K}return k.h=1,k.u=0}function W(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function E(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function R(k){return k.Ra>>>(k.u&Ma-1)>>>0}function q(k){return t(k.bb<=k.Sb),k.h||k.bb==k.Sb&&k.u>Ma}function L(k,I){k.u=I,k.h=q(k)}function H(k){k.u>=nu&&(t(k.u>=nu),U(k))}function se(k){t(k!=null&&k.oa!=null),k.pa<k.Zc?(k.I=(k.oa[k.pa++]|k.I<<8)>>>0,k.b+=8):(t(k!=null&&k.oa!=null),k.pa<k.Yc?(k.b+=8,k.I=k.oa[k.pa++]|k.I<<8):k.Ka?k.b=0:(k.I<<=8,k.b+=8,k.Ka=1))}function ce(k){return Y(k,1)}function ae(k,I){var K=k.Ca;0>k.b&&se(k);var re=k.b,he=K*I>>>8,be=(k.I>>>re>he)+0;for(be?(K-=he,k.I-=he+1<<re>>>0):K=he+1,re=K,he=0;256<=re;)he+=8,re>>=8;return re=7^he+Kr[re],k.b-=re,k.Ca=(K<<re)-1,be}function Z(k,I,K){k[I+0]=K>>24&255,k[I+1]=K>>16&255,k[I+2]=K>>8&255,k[I+3]=K>>0&255}function ve(k,I){return k[I+0]<<0|k[I+1]<<8}function ne(k,I){return ve(k,I)|k[I+2]<<16}function He(k,I){return ve(k,I)|ve(k,I+2)<<16}function Xe(k,I){var K=1<<I;return t(k!=null),t(0<I),k.X=i(K),k.X==null?0:(k.Mb=32-I,k.Xa=I,1)}function ie(k,I){t(k!=null),t(I!=null),t(k.Xa==I.Xa),n(I.X,0,k.X,0,1<<I.Xa)}function Q(){this.X=[],this.Xa=this.Mb=0}function Ne(k,I,K,re){t(K!=null),t(re!=null);var he=K[0],be=re[0];return he==0&&(he=(k*be+I/2)/I),be==0&&(be=(I*he+k/2)/k),0>=he||0>=be?0:(K[0]=he,re[0]=be,1)}function de(k,I){return k+(1<<I)-1>>>I}function ye(k,I){return((4278255360&k)+(4278255360&I)>>>0&4278255360)+((16711935&k)+(16711935&I)>>>0&16711935)>>>0}function xe(k,I){_[I]=function(K,re,he,be,je,Se,Te){var Le;for(Le=0;Le<je;++Le){var tt=_[k](Se[Te+Le-1],he,be+Le);Se[Te+Le]=ye(K[re+Le],tt)}}}function we(){this.ud=this.hd=this.jd=0}function Ae(k,I){return((4278124286&(k^I))>>>1)+(k&I)>>>0}function Ue(k){return 0<=k&&256>k?k:0>k?0:255<k?255:void 0}function me(k,I){return Ue(k+(k-I+.5>>1))}function ee(k,I,K){return Math.abs(I-K)-Math.abs(k-K)}function fe(k,I,K,re,he,be,je){for(re=be[je-1],K=0;K<he;++K)be[je+K]=re=ye(k[I+K],re)}function Fe(k,I,K,re,he){var be;for(be=0;be<K;++be){var je=k[I+be],Se=je>>8&255,Te=16711935&(Te=(Te=16711935&je)+((Se<<16)+Se));re[he+be]=(4278255360&je)+Te>>>0}}function Ee(k,I){I.jd=k>>0&255,I.hd=k>>8&255,I.ud=k>>16&255}function qe(k,I,K,re,he,be){var je;for(je=0;je<re;++je){var Se=I[K+je],Te=Se>>>8,Le=Se,tt=255&(tt=(tt=Se>>>16)+((k.jd<<24>>24)*(Te<<24>>24)>>>5));Le=255&(Le=(Le=Le+((k.hd<<24>>24)*(Te<<24>>24)>>>5))+((k.ud<<24>>24)*(tt<<24>>24)>>>5)),he[be+je]=(4278255360&Se)+(tt<<16)+Le}}function Ke(k,I,K,re,he){_[I]=function(be,je,Se,Te,Le,tt,ft,ht,it){for(Te=ft;Te<ht;++Te)for(ft=0;ft<it;++ft)Le[tt++]=he(Se[re(be[je++])])},_[k]=function(be,je,Se,Te,Le,tt,ft){var ht=8>>be.b,it=be.Ea,Et=be.K[0],yt=be.w;if(8>ht)for(be=(1<<be.b)-1,yt=(1<<ht)-1;je<Se;++je){var rt,at=0;for(rt=0;rt<it;++rt)rt&be||(at=re(Te[Le++])),tt[ft++]=he(Et[at&yt]),at>>=ht}else _["VP8LMapColor"+K](Te,Le,Et,yt,tt,ft,je,Se,it)}}function Qe(k,I,K,re,he){for(K=I+K;I<K;){var be=k[I++];re[he++]=be>>16&255,re[he++]=be>>8&255,re[he++]=be>>0&255}}function _t(k,I,K,re,he){for(K=I+K;I<K;){var be=k[I++];re[he++]=be>>16&255,re[he++]=be>>8&255,re[he++]=be>>0&255,re[he++]=be>>24&255}}function vt(k,I,K,re,he){for(K=I+K;I<K;){var be=(je=k[I++])>>16&240|je>>12&15,je=je>>0&240|je>>28&15;re[he++]=be,re[he++]=je}}function ke(k,I,K,re,he){for(K=I+K;I<K;){var be=(je=k[I++])>>16&248|je>>13&7,je=je>>5&224|je>>3&31;re[he++]=be,re[he++]=je}}function Je(k,I,K,re,he){for(K=I+K;I<K;){var be=k[I++];re[he++]=be>>0&255,re[he++]=be>>8&255,re[he++]=be>>16&255}}function mt(k,I,K,re,he,be){if(be==0)for(K=I+K;I<K;)Z(re,((be=k[I++])[0]>>24|be[1]>>8&65280|be[2]<<8&16711680|be[3]<<24)>>>0),he+=32;else n(re,he,k,I,K)}function ue(k,I){_[I][0]=_[k+"0"],_[I][1]=_[k+"1"],_[I][2]=_[k+"2"],_[I][3]=_[k+"3"],_[I][4]=_[k+"4"],_[I][5]=_[k+"5"],_[I][6]=_[k+"6"],_[I][7]=_[k+"7"],_[I][8]=_[k+"8"],_[I][9]=_[k+"9"],_[I][10]=_[k+"10"],_[I][11]=_[k+"11"],_[I][12]=_[k+"12"],_[I][13]=_[k+"13"],_[I][14]=_[k+"0"],_[I][15]=_[k+"0"]}function Ye(k){return k==z0||k==Zx||k==q0||k==eg}function bt(){this.eb=[],this.size=this.A=this.fb=0}function xt(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Vt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new bt,this.f.kb=new xt,this.sd=null}function gr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function qt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Gt(k){return alert("todo:WebPSamplerProcessPlane"),k.T}function Bt(k,I){var K=k.T,re=I.ba.f.RGBA,he=re.eb,be=re.fb+k.ka*re.A,je=Wo[I.ba.S],Se=k.y,Te=k.O,Le=k.f,tt=k.N,ft=k.ea,ht=k.W,it=I.cc,Et=I.dc,yt=I.Mc,rt=I.Nc,at=k.ka,At=k.ka+k.T,Ot=k.U,Tt=Ot+1>>1;for(at==0?je(Se,Te,null,null,Le,tt,ft,ht,Le,tt,ft,ht,he,be,null,null,Ot):(je(I.ec,I.fc,Se,Te,it,Et,yt,rt,Le,tt,ft,ht,he,be-re.A,he,be,Ot),++K);at+2<At;at+=2)it=Le,Et=tt,yt=ft,rt=ht,tt+=k.Rc,ht+=k.Rc,be+=2*re.A,je(Se,(Te+=2*k.fa)-k.fa,Se,Te,it,Et,yt,rt,Le,tt,ft,ht,he,be-re.A,he,be,Ot);return Te+=k.fa,k.j+At<k.o?(n(I.ec,I.fc,Se,Te,Ot),n(I.cc,I.dc,Le,tt,Tt),n(I.Mc,I.Nc,ft,ht,Tt),K--):1&At||je(Se,Te,null,null,Le,tt,ft,ht,Le,tt,ft,ht,he,be+re.A,null,null,Ot),K}function fr(k,I,K){var re=k.F,he=[k.J];if(re!=null){var be=k.U,je=I.ba.S,Se=je==bp||je==q0;I=I.ba.f.RGBA;var Te=[0],Le=k.ka;Te[0]=k.T,k.Kb&&(Le==0?--Te[0]:(--Le,he[0]-=k.width),k.j+k.ka+k.T==k.o&&(Te[0]=k.o-k.j-Le));var tt=I.eb;Le=I.fb+Le*I.A,k=Zn(re,he[0],k.width,be,Te,tt,Le+(Se?0:3),I.A),t(K==Te),k&&Ye(je)&&Ds(tt,Le,Se,be,Te,I.A)}return 0}function Sr(k){var I=k.ma,K=I.ba.S,re=11>K,he=K==$0||K==U0||K==bp||K==yp||K==12||Ye(K);if(I.memory=null,I.Ib=null,I.Jb=null,I.Nd=null,!af(I.Oa,k,he?11:12))return 0;if(he&&Ye(K)&&Ft(),k.da)alert("todo:use_scaling");else{if(re){if(I.Ib=Gt,k.Kb){if(K=k.U+1>>1,I.memory=i(k.U+2*K),I.memory==null)return 0;I.ec=I.memory,I.fc=0,I.cc=I.ec,I.dc=I.fc+k.U,I.Mc=I.cc,I.Nc=I.dc+K,I.Ib=Bt,Ft()}}else alert("todo:EmitYUV");he&&(I.Jb=fr,re&&lt())}if(re&&!H0){for(k=0;256>k;++k)ng[k]=89858*(k-128)+Cp>>su,zN[k]=-22014*(k-128)+Cp,Cb[k]=-45773*(k-128),Tp[k]=113618*(k-128)+Cp>>su;for(k=hf;k<Ep;++k)I=76283*(k-16)+Cp>>su,Eb[k-hf]=Ks(I,255),ag[k-hf]=Ks(I+8>>4,15);H0=1}return 1}function Cr(k){var I=k.ma,K=k.U,re=k.T;return t(!(1&k.ka)),0>=K||0>=re?0:(K=I.Ib(k,I),I.Jb!=null&&I.Jb(k,I,K),I.Dc+=K,1)}function cr(k){k.ma.memory=null}function It(k,I,K,re){return X(k,8)!=47?0:(I[0]=X(k,14)+1,K[0]=X(k,14)+1,re[0]=X(k,1),X(k,3)!=0?0:!k.h)}function yr(k,I){if(4>k)return k+1;var K=k-2>>1;return(2+(1&k)<<K)+X(I,K)+1}function wr(k,I){return 120<I?I-120:1<=(K=((K=wb[I-1])>>4)*k+(8-(15&K)))?K:1;var K}function Fr(k,I,K){var re=R(K),he=k[I+=255&re].g-8;return 0<he&&(L(K,K.u+8),re=R(K),I+=k[I].value,I+=re&(1<<he)-1),L(K,K.u+k[I].g),k[I].value}function jr(k,I,K){return K.g+=k.g,K.value+=k.value<<I>>>0,t(8>=K.g),k.g}function Pr(k,I,K){var re=k.xc;return t((I=re==0?0:k.vc[k.md*(K>>re)+(I>>re)])<k.Wb),k.Ya[I]}function ge(k,I,K,re){var he=k.ab,be=k.c*I,je=k.C;I=je+I;var Se=K,Te=re;for(re=k.Ta,K=k.Ua;0<he--;){var Le=k.gc[he],tt=je,ft=I,ht=Se,it=Te,Et=(Te=re,Se=K,Le.Ea);switch(t(tt<ft),t(ft<=Le.nc),Le.hc){case 2:li(ht,it,(ft-tt)*Et,Te,Se);break;case 0:var yt=tt,rt=ft,at=Te,At=Se,Ot=(rr=Le).Ea;yt==0&&(Xs(ht,it,null,null,1,at,At),fe(ht,it+1,0,0,Ot-1,at,At+1),it+=Ot,At+=Ot,++yt);for(var Tt=1<<rr.b,tr=Tt-1,Kt=de(Ot,rr.b),Tr=rr.K,rr=rr.w+(yt>>rr.b)*Kt;yt<rt;){var on=Tr,Cn=rr,gn=1;for(Sa(ht,it,at,At-Ot,1,at,At);gn<Ot;){var nn=(gn&~tr)+Tt;nn>Ot&&(nn=Ot),(0,Ha[on[Cn++]>>8&15])(ht,it+ +gn,at,At+gn-Ot,nn-gn,at,At+gn),gn=nn}it+=Ot,At+=Ot,++yt&tr||(rr+=Kt)}ft!=Le.nc&&n(Te,Se-Et,Te,Se+(ft-tt-1)*Et,Et);break;case 1:for(Et=ht,rt=it,Ot=(ht=Le.Ea)-(At=ht&~(at=(it=1<<Le.b)-1)),yt=de(ht,Le.b),Tt=Le.K,Le=Le.w+(tt>>Le.b)*yt;tt<ft;){for(tr=Tt,Kt=Le,Tr=new we,rr=rt+At,on=rt+ht;rt<rr;)Ee(tr[Kt++],Tr),bs(Tr,Et,rt,it,Te,Se),rt+=it,Se+=it;rt<on&&(Ee(tr[Kt++],Tr),bs(Tr,Et,rt,Ot,Te,Se),rt+=Ot,Se+=Ot),++tt&at||(Le+=yt)}break;case 3:if(ht==Te&&it==Se&&0<Le.b){for(rt=Te,ht=Et=Se+(ft-tt)*Et-(At=(ft-tt)*de(Le.Ea,Le.b)),it=Te,at=Se,yt=[],At=(Ot=At)-1;0<=At;--At)yt[At]=it[at+At];for(At=Ot-1;0<=At;--At)rt[ht+At]=yt[At];zn(Le,tt,ft,Te,Et,Te,Se)}else zn(Le,tt,ft,ht,it,Te,Se)}Se=re,Te=K}Te!=K&&n(re,K,Se,Te,be)}function De(k,I){var K=k.V,re=k.Ba+k.c*k.C,he=I-k.C;if(t(I<=k.l.o),t(16>=he),0<he){var be=k.l,je=k.Ta,Se=k.Ua,Te=be.width;if(ge(k,he,K,re),he=Se=[Se],t((K=k.C)<(re=I)),t(be.v<be.va),re>be.o&&(re=be.o),K<be.j){var Le=be.j-K;K=be.j,he[0]+=Le*Te}if(K>=re?K=0:(he[0]+=4*be.v,be.ka=K-be.j,be.U=be.va-be.v,be.T=re-K,K=1),K){if(Se=Se[0],11>(K=k.ca).S){var tt=K.f.RGBA,ft=(re=K.S,he=be.U,be=be.T,Le=tt.eb,tt.A),ht=be;for(tt=tt.fb+k.Ma*tt.A;0<ht--;){var it=je,Et=Se,yt=he,rt=Le,at=tt;switch(re){case B0:la(it,Et,yt,rt,at);break;case $0:ss(it,Et,yt,rt,at);break;case z0:ss(it,Et,yt,rt,at),Ds(rt,at,0,yt,1,0);break;case xb:Bo(it,Et,yt,rt,at);break;case U0:mt(it,Et,yt,rt,at,1);break;case Zx:mt(it,Et,yt,rt,at,1),Ds(rt,at,0,yt,1,0);break;case bp:mt(it,Et,yt,rt,at,0);break;case q0:mt(it,Et,yt,rt,at,0),Ds(rt,at,1,yt,1,0);break;case yp:Ri(it,Et,yt,rt,at);break;case eg:Ri(it,Et,yt,rt,at),Kn(rt,at,yt,1,0);break;case gb:ql(it,Et,yt,rt,at);break;default:t(0)}Se+=Te,tt+=ft}k.Ma+=be}else alert("todo:EmitRescaledRowsYUVA");t(k.Ma<=K.height)}}k.C=I,t(k.C<=k.i)}function Ce(k){var I;if(0<k.ua)return 0;for(I=0;I<k.Wb;++I){var K=k.Ya[I].G,re=k.Ya[I].H;if(0<K[1][re[1]+0].g||0<K[2][re[2]+0].g||0<K[3][re[3]+0].g)return 0}return 1}function Oe(k,I,K,re,he,be){if(k.Z!=0){var je=k.qd,Se=k.rd;for(t(go[k.Z]!=null);I<K;++I)go[k.Z](je,Se,re,he,re,he,be),je=re,Se=he,he+=be;k.qd=je,k.rd=Se}}function G(k,I){var K=k.l.ma,re=K.Z==0||K.Z==1?k.l.j:k.C;if(re=k.C<re?re:k.C,t(I<=k.l.o),I>re){var he=k.l.width,be=K.ca,je=K.tb+he*re,Se=k.V,Te=k.Ba+k.c*re,Le=k.gc;t(k.ab==1),t(Le[0].hc==3),Ra(Le[0],re,I,Se,Te,be,je),Oe(K,re,I,be,je,he)}k.C=k.Ma=I}function oe(k,I,K,re,he,be,je){var Se=k.$/re,Te=k.$%re,Le=k.m,tt=k.s,ft=K+k.$,ht=ft;he=K+re*he;var it=K+re*be,Et=280+tt.ua,yt=k.Pb?Se:16777216,rt=0<tt.ua?tt.Wa:null,at=tt.wc,At=ft<it?Pr(tt,Te,Se):null;t(k.C<be),t(it<=he);var Ot=!1;e:for(;;){for(;Ot||ft<it;){var Tt=0;if(Se>=yt){var tr=ft-K;t((yt=k).Pb),yt.wd=yt.m,yt.xd=tr,0<yt.s.ua&&ie(yt.s.Wa,yt.s.vb),yt=Se+Nb}if(Te&at||(At=Pr(tt,Te,Se)),t(At!=null),At.Qb&&(I[ft]=At.qb,Ot=!0),!Ot)if(H(Le),At.jc){Tt=Le,tr=I;var Kt=ft,Tr=At.pd[R(Tt)&as-1];t(At.jc),256>Tr.g?(L(Tt,Tt.u+Tr.g),tr[Kt]=Tr.value,Tt=0):(L(Tt,Tt.u+Tr.g-256),t(256<=Tr.value),Tt=Tr.value),Tt==0&&(Ot=!0)}else Tt=Fr(At.G[0],At.H[0],Le);if(Le.h)break;if(Ot||256>Tt){if(!Ot)if(At.nd)I[ft]=(At.qb|Tt<<8)>>>0;else{if(H(Le),Ot=Fr(At.G[1],At.H[1],Le),H(Le),tr=Fr(At.G[2],At.H[2],Le),Kt=Fr(At.G[3],At.H[3],Le),Le.h)break;I[ft]=(Kt<<24|Ot<<16|Tt<<8|tr)>>>0}if(Ot=!1,++ft,++Te>=re&&(Te=0,++Se,je!=null&&Se<=be&&!(Se%16)&&je(k,Se),rt!=null))for(;ht<ft;)Tt=I[ht++],rt.X[(506832829*Tt&4294967295)>>>rt.Mb]=Tt}else if(280>Tt){if(Tt=yr(Tt-256,Le),tr=Fr(At.G[4],At.H[4],Le),H(Le),tr=wr(re,tr=yr(tr,Le)),Le.h)break;if(ft-K<tr||he-ft<Tt)break e;for(Kt=0;Kt<Tt;++Kt)I[ft+Kt]=I[ft+Kt-tr];for(ft+=Tt,Te+=Tt;Te>=re;)Te-=re,++Se,je!=null&&Se<=be&&!(Se%16)&&je(k,Se);if(t(ft<=he),Te&at&&(At=Pr(tt,Te,Se)),rt!=null)for(;ht<ft;)Tt=I[ht++],rt.X[(506832829*Tt&4294967295)>>>rt.Mb]=Tt}else{if(!(Tt<Et))break e;for(Ot=Tt-280,t(rt!=null);ht<ft;)Tt=I[ht++],rt.X[(506832829*Tt&4294967295)>>>rt.Mb]=Tt;Tt=ft,t(!(Ot>>>(tr=rt).Xa)),I[Tt]=tr.X[Ot],Ot=!0}Ot||t(Le.h==q(Le))}if(k.Pb&&Le.h&&ft<he)t(k.m.h),k.a=5,k.m=k.wd,k.$=k.xd,0<k.s.ua&&ie(k.s.vb,k.s.Wa);else{if(Le.h)break e;je!=null&&je(k,Se>be?be:Se),k.a=0,k.$=ft-K}return 1}return k.a=3,0}function Pe(k){t(k!=null),k.vc=null,k.yc=null,k.Ya=null;var I=k.Wa;I!=null&&(I.X=null),k.vb=null,t(k!=null)}function $e(){var k=new tf;return k==null?null:(k.a=0,k.xb=kb,ue("Predictor","VP8LPredictors"),ue("Predictor","VP8LPredictors_C"),ue("PredictorAdd","VP8LPredictorsAdd"),ue("PredictorAdd","VP8LPredictorsAdd_C"),li=Fe,bs=qe,la=Qe,ss=_t,Ri=vt,ql=ke,Bo=Je,_.VP8LMapColor32b=Is,_.VP8LMapColor8b=Ro,k)}function We(k,I,K,re,he){var be=1,je=[k],Se=[I],Te=re.m,Le=re.s,tt=null,ft=0;e:for(;;){if(K)for(;be&&X(Te,1);){var ht=je,it=Se,Et=re,yt=1,rt=Et.m,at=Et.gc[Et.ab],At=X(rt,2);if(Et.Oc&1<<At)be=0;else{switch(Et.Oc|=1<<At,at.hc=At,at.Ea=ht[0],at.nc=it[0],at.K=[null],++Et.ab,t(4>=Et.ab),At){case 0:case 1:at.b=X(rt,3)+2,yt=We(de(at.Ea,at.b),de(at.nc,at.b),0,Et,at.K),at.K=at.K[0];break;case 3:var Ot,Tt=X(rt,8)+1,tr=16<Tt?0:4<Tt?1:2<Tt?2:3;if(ht[0]=de(at.Ea,tr),at.b=tr,Ot=yt=We(Tt,1,0,Et,at.K)){var Kt,Tr=Tt,rr=at,on=1<<(8>>rr.b),Cn=i(on);if(Cn==null)Ot=0;else{var gn=rr.K[0],nn=rr.w;for(Cn[0]=rr.K[0][0],Kt=1;Kt<1*Tr;++Kt)Cn[Kt]=ye(gn[nn+Kt],Cn[Kt-1]);for(;Kt<4*on;++Kt)Cn[Kt]=0;rr.K[0]=null,rr.K[0]=Cn,Ot=1}}yt=Ot;break;case 2:break;default:t(0)}be=yt}}if(je=je[0],Se=Se[0],be&&X(Te,1)&&!(be=1<=(ft=X(Te,4))&&11>=ft)){re.a=3;break e}var Xn;if(Xn=be)t:{var jn,Yr,is,ui=re,Ga=je,qi=Se,Tn=ft,vo=K,bo=ui.m,_a=ui.s,Ls=[null],fi=1,Vo=0,Wl=jp[Tn];r:for(;;){if(vo&&X(bo,1)){var os=X(bo,3)+2,Ai=de(Ga,os),iu=de(qi,os),yl=Ai*iu;if(!We(Ai,iu,0,ui,Ls))break r;for(Ls=Ls[0],_a.xc=os,jn=0;jn<yl;++jn){var Oc=Ls[jn]>>8&65535;Ls[jn]=Oc,Oc>=fi&&(fi=Oc+1)}}if(bo.h)break r;for(Yr=0;5>Yr;++Yr){var Ba=bb[Yr];!Yr&&0<Tn&&(Ba+=1<<Tn),Vo<Ba&&(Vo=Ba)}var pf=o(fi*Wl,C),V0=fi,Ob=o(V0,F);if(Ob==null)var G0=null;else t(65536>=V0),G0=Ob;var ou=i(Vo);if(G0==null||ou==null||pf==null){ui.a=1;break r}var K0=pf;for(jn=is=0;jn<fi;++jn){var Go=G0[jn],mf=Go.G,xf=Go.H,Pb=0,Pp=1,Ib=0;for(Yr=0;5>Yr;++Yr){Ba=bb[Yr],mf[Yr]=K0,xf[Yr]=is,!Yr&&0<Tn&&(Ba+=1<<Tn);a:{var Ip,sg=Ba,Dp=ui,X0=ou,ig=K0,og=is,Pc=0,Hi=Dp.m,HN=X(Hi,1);if(s(X0,0,0,sg),HN){var Lp=X(Hi,1)+1,WN=X(Hi,1),Db=X(Hi,WN==0?1:8);X0[Db]=1,Lp==2&&(X0[Db=X(Hi,8)]=1);var Fp=1}else{var Lb=i(19),Fb=X(Hi,4)+4;if(19<Fb){Dp.a=3;var Mp=0;break a}for(Ip=0;Ip<Fb;++Ip)Lb[Np[Ip]]=X(Hi,3);var lg=void 0,lu=void 0,Rp=Dp,VN=Lb,Bp=sg,Mb=X0,cg=0,Ic=Rp.m,dg=8,Rb=o(128,C);n:for(;A(Rb,0,7,VN,19);){if(X(Ic,1)){var GN=2+2*X(Ic,3);if((lg=2+X(Ic,GN))>Bp)break n}else lg=Bp;for(lu=0;lu<Bp&&lg--;){H(Ic);var ug=Rb[0+(127&R(Ic))];L(Ic,Ic.u+ug.g);var wl=ug.value;if(16>wl)Mb[lu++]=wl,wl!=0&&(dg=wl);else{var fg=wl==16,Wi=wl-16,KN=vb[Wi],hg=X(Ic,wp[Wi])+KN;if(lu+hg>Bp)break n;for(var $p=fg?dg:0;0<hg--;)Mb[lu++]=$p}}cg=1;break n}cg||(Rp.a=3),Fp=cg}(Fp=Fp&&!Hi.h)&&(Pc=A(ig,og,8,X0,sg)),Fp&&Pc!=0?Mp=Pc:(Dp.a=3,Mp=0)}if(Mp==0)break r;if(Pp&&yb[Yr]==1&&(Pp=K0[is].g==0),Pb+=K0[is].g,is+=Mp,3>=Yr){var gf,Up=ou[0];for(gf=1;gf<Ba;++gf)ou[gf]>Up&&(Up=ou[gf]);Ib+=Up}}if(Go.nd=Pp,Go.Qb=0,Pp&&(Go.qb=(mf[3][xf[3]+0].value<<24|mf[1][xf[1]+0].value<<16|mf[2][xf[2]+0].value)>>>0,Pb==0&&256>mf[0][xf[0]+0].value&&(Go.Qb=1,Go.qb+=mf[0][xf[0]+0].value<<8)),Go.jc=!Go.Qb&&6>Ib,Go.jc){var Y0,Vl=Go;for(Y0=0;Y0<as;++Y0){var Dc=Y0,Lc=Vl.pd[Dc],Q0=Vl.G[0][Vl.H[0]+Dc];256<=Q0.value?(Lc.g=Q0.g+256,Lc.value=Q0.value):(Lc.g=0,Lc.value=0,Dc>>=jr(Q0,8,Lc),Dc>>=jr(Vl.G[1][Vl.H[1]+Dc],16,Lc),Dc>>=jr(Vl.G[2][Vl.H[2]+Dc],0,Lc),jr(Vl.G[3][Vl.H[3]+Dc],24,Lc))}}}_a.vc=Ls,_a.Wb=fi,_a.Ya=G0,_a.yc=pf,Xn=1;break t}Xn=0}if(!(be=Xn)){re.a=3;break e}if(0<ft){if(Le.ua=1<<ft,!Xe(Le.Wa,ft)){re.a=1,be=0;break e}}else Le.ua=0;var zp=re,O=je,te=Se,le=zp.s,Me=le.xc;if(zp.c=O,zp.i=te,le.md=de(O,Me),le.wc=Me==0?-1:(1<<Me)-1,K){re.xb=_p;break e}if((tt=i(je*Se))==null){re.a=1,be=0;break e}be=(be=oe(re,tt,0,je,Se,Se,null))&&!Te.h;break e}return be?(he!=null?he[0]=tt:(t(tt==null),t(K)),re.$=0,K||Pe(Le)):Pe(Le),be}function Ve(k,I){var K=k.c*k.i,re=K+I+16*I;return t(k.c<=I),k.V=i(re),k.V==null?(k.Ta=null,k.Ua=0,k.a=1,0):(k.Ta=k.V,k.Ua=k.Ba+K+I,1)}function Re(k,I){var K=k.C,re=I-K,he=k.V,be=k.Ba+k.c*K;for(t(I<=k.l.o);0<re;){var je=16<re?16:re,Se=k.l.ma,Te=k.l.width,Le=Te*je,tt=Se.ca,ft=Se.tb+Te*K,ht=k.Ta,it=k.Ua;ge(k,je,he,be),xn(ht,it,tt,ft,Le),Oe(Se,K,K+je,tt,ft,Te),re-=je,he+=je*k.c,K+=je}t(K==I),k.C=k.Ma=I}function _e(){this.ub=this.yd=this.td=this.Rb=0}function Ge(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function nt(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function ut(){this.Yb=function(){var k=[];return function I(K,re,he){for(var be=he[re],je=0;je<be&&(K.push(he.length>re+1?[]:0),!(he.length<re+1));je++)I(K[je],re+1,he)}(k,0,[3,11]),k}()}function wt(){this.jb=i(3),this.Wc=l([4,8],ut),this.Xc=l([4,17],ut)}function Mt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Xt(){this.ld=this.La=this.dd=this.tc=0}function _r(){this.Na=this.la=0}function $n(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ts(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Pn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Xt),this.Y=0,this.ya=Array(new Ts),this.aa=0,this.l=new gs}function Vs(){this.y=i(16),this.f=i(8),this.ea=i(8)}function ya(){this.cb=this.a=0,this.sc="",this.m=new W,this.Od=new _e,this.Kc=new Ge,this.ed=new Mt,this.Qa=new nt,this.Ic=this.$c=this.Aa=0,this.D=new Pn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,W),this.ia=0,this.pb=o(4,$n),this.Pa=new wt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vs),this.Hd=0,this.rb=Array(new _r),this.sb=0,this.wa=Array(new Xt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ts),this.L=this.aa=0,this.gd=l([4,2],Xt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function gs(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Fa(){var k=new ya;return k!=null&&(k.a=0,k.sc="OK",k.cb=0,k.Xb=0,Sp||(Sp=Si)),k}function dn(k,I,K){return k.a==0&&(k.a=I,k.sc=K,k.cb=0),0}function dl(k,I,K){return 3<=K&&k[I+0]==157&&k[I+1]==1&&k[I+2]==42}function Gn(k,I){if(k==null)return 0;if(k.a=0,k.sc="OK",I==null)return dn(k,2,"null VP8Io passed to VP8GetHeaders()");var K=I.data,re=I.w,he=I.ha;if(4>he)return dn(k,7,"Truncated header.");var be=K[re+0]|K[re+1]<<8|K[re+2]<<16,je=k.Od;if(je.Rb=!(1&be),je.td=be>>1&7,je.yd=be>>4&1,je.ub=be>>5,3<je.td)return dn(k,3,"Incorrect keyframe parameters.");if(!je.yd)return dn(k,4,"Frame not displayable.");re+=3,he-=3;var Se=k.Kc;if(je.Rb){if(7>he)return dn(k,7,"cannot parse picture header");if(!dl(K,re,he))return dn(k,3,"Bad code word");Se.c=16383&(K[re+4]<<8|K[re+3]),Se.Td=K[re+4]>>6,Se.i=16383&(K[re+6]<<8|K[re+5]),Se.Ud=K[re+6]>>6,re+=7,he-=7,k.za=Se.c+15>>4,k.Ub=Se.i+15>>4,I.width=Se.c,I.height=Se.i,I.Da=0,I.j=0,I.v=0,I.va=I.width,I.o=I.height,I.da=0,I.ib=I.width,I.hb=I.height,I.U=I.width,I.T=I.height,s((be=k.Pa).jb,0,255,be.jb.length),t((be=k.Qa)!=null),be.Cb=0,be.Bb=0,be.Fb=1,s(be.Zb,0,0,be.Zb.length),s(be.Lb,0,0,be.Lb)}if(je.ub>he)return dn(k,7,"bad partition length");B(be=k.m,K,re,je.ub),re+=je.ub,he-=je.ub,je.Rb&&(Se.Ld=ce(be),Se.Kd=ce(be)),Se=k.Qa;var Te,Le=k.Pa;if(t(be!=null),t(Se!=null),Se.Cb=ce(be),Se.Cb){if(Se.Bb=ce(be),ce(be)){for(Se.Fb=ce(be),Te=0;4>Te;++Te)Se.Zb[Te]=ce(be)?V(be,7):0;for(Te=0;4>Te;++Te)Se.Lb[Te]=ce(be)?V(be,6):0}if(Se.Bb)for(Te=0;3>Te;++Te)Le.jb[Te]=ce(be)?Y(be,8):255}else Se.Bb=0;if(be.Ka)return dn(k,3,"cannot parse segment header");if((Se=k.ed).zd=ce(be),Se.Tb=Y(be,6),Se.wb=Y(be,3),Se.Pc=ce(be),Se.Pc&&ce(be)){for(Le=0;4>Le;++Le)ce(be)&&(Se.vd[Le]=V(be,6));for(Le=0;4>Le;++Le)ce(be)&&(Se.od[Le]=V(be,6))}if(k.L=Se.Tb==0?0:Se.zd?1:2,be.Ka)return dn(k,3,"cannot parse filter header");var tt=he;if(he=Te=re,re=Te+tt,Se=tt,k.Xb=(1<<Y(k.m,2))-1,tt<3*(Le=k.Xb))K=7;else{for(Te+=3*Le,Se-=3*Le,tt=0;tt<Le;++tt){var ft=K[he+0]|K[he+1]<<8|K[he+2]<<16;ft>Se&&(ft=Se),B(k.Jc[+tt],K,Te,ft),Te+=ft,Se-=ft,he+=3}B(k.Jc[+Le],K,Te,Se),K=Te<re?0:5}if(K!=0)return dn(k,K,"cannot parse partitions");for(K=Y(Te=k.m,7),he=ce(Te)?V(Te,4):0,re=ce(Te)?V(Te,4):0,Se=ce(Te)?V(Te,4):0,Le=ce(Te)?V(Te,4):0,Te=ce(Te)?V(Te,4):0,tt=k.Qa,ft=0;4>ft;++ft){if(tt.Cb){var ht=tt.Zb[ft];tt.Fb||(ht+=K)}else{if(0<ft){k.pb[ft]=k.pb[0];continue}ht=K}var it=k.pb[ft];it.Sc[0]=ff[Ks(ht+he,127)],it.Sc[1]=kp[Ks(ht+0,127)],it.Eb[0]=2*ff[Ks(ht+re,127)],it.Eb[1]=101581*kp[Ks(ht+Se,127)]>>16,8>it.Eb[1]&&(it.Eb[1]=8),it.Qc[0]=ff[Ks(ht+Le,117)],it.Qc[1]=kp[Ks(ht+Te,127)],it.lc=ht+Te}if(!je.Rb)return dn(k,4,"Not a key frame.");for(ce(be),je=k.Pa,K=0;4>K;++K){for(he=0;8>he;++he)for(re=0;3>re;++re)for(Se=0;11>Se;++Se)Le=ae(be,BN[K][he][re][Se])?Y(be,8):Nd[K][he][re][Se],je.Wc[K][he].Yb[re][Se]=Le;for(he=0;17>he;++he)je.Xc[K][he]=je.Wc[K][tg[he]]}return k.kc=ce(be),k.kc&&(k.Bd=Y(be,8)),k.cb=1}function Si(k,I,K,re,he,be,je){var Se=I[he].Yb[K];for(K=0;16>he;++he){if(!ae(k,Se[K+0]))return he;for(;!ae(k,Se[K+1]);)if(Se=I[++he].Yb[0],K=0,he==16)return 16;var Te=I[he+1].Yb;if(ae(k,Se[K+2])){var Le=k,tt=0;if(ae(Le,(ht=Se)[(ft=K)+3]))if(ae(Le,ht[ft+6])){for(Se=0,ft=2*(tt=ae(Le,ht[ft+8]))+(ht=ae(Le,ht[ft+9+tt])),tt=0,ht=jb[ft];ht[Se];++Se)tt+=tt+ae(Le,ht[Se]);tt+=3+(8<<ft)}else ae(Le,ht[ft+7])?(tt=7+2*ae(Le,165),tt+=ae(Le,145)):tt=5+ae(Le,159);else tt=ae(Le,ht[ft+4])?3+ae(Le,ht[ft+5]):2;Se=Te[2]}else tt=1,Se=Te[1];Te=je+RN[he],0>(Le=k).b&&se(Le);var ft,ht=Le.b,it=(ft=Le.Ca>>1)-(Le.I>>ht)>>31;--Le.b,Le.Ca+=it,Le.Ca|=1,Le.I-=(ft+1&it)<<ht,be[Te]=((tt^it)-it)*re[(0<he)+0]}return 16}function Ul(k){var I=k.rb[k.sb-1];I.la=0,I.Na=0,s(k.zc,0,0,k.zc.length),k.ja=0}function pd(k,I){if(k==null)return 0;if(I==null)return dn(k,2,"NULL VP8Io parameter in VP8Decode().");if(!k.cb&&!Gn(k,I))return 0;if(t(k.cb),I.ac==null||I.ac(I)){I.ob&&(k.L=0);var K=W0[k.L];if(k.L==2?(k.yb=0,k.zb=0):(k.yb=I.v-K>>4,k.zb=I.j-K>>4,0>k.yb&&(k.yb=0),0>k.zb&&(k.zb=0)),k.Va=I.o+15+K>>4,k.Hb=I.va+15+K>>4,k.Hb>k.za&&(k.Hb=k.za),k.Va>k.Ub&&(k.Va=k.Ub),0<k.L){var re=k.ed;for(K=0;4>K;++K){var he;if(k.Qa.Cb){var be=k.Qa.Lb[K];k.Qa.Fb||(be+=re.Tb)}else be=re.Tb;for(he=0;1>=he;++he){var je=k.gd[K][he],Se=be;if(re.Pc&&(Se+=re.vd[0],he&&(Se+=re.od[0])),0<(Se=0>Se?0:63<Se?63:Se)){var Te=Se;0<re.wb&&(Te=4<re.wb?Te>>2:Te>>1)>9-re.wb&&(Te=9-re.wb),1>Te&&(Te=1),je.dd=Te,je.tc=2*Se+Te,je.ld=40<=Se?2:15<=Se?1:0}else je.tc=0;je.La=he}}}K=0}else dn(k,6,"Frame setup failed"),K=k.a;if(K=K==0){if(K){k.$c=0,0<k.Aa||(k.Ic=Op);e:{K=k.Ic,re=4*(Te=k.za);var Le=32*Te,tt=Te+1,ft=0<k.L?Te*(0<k.Aa?2:1):0,ht=(k.Aa==2?2:1)*Te;if((je=re+832+(he=3*(16*K+W0[k.L])/2*Le)+(be=k.Fa!=null&&0<k.Fa.length?k.Kc.c*k.Kc.i:0))!=je)K=0;else{if(je>k.Vb){if(k.Vb=0,k.Ec=i(je),k.Fc=0,k.Ec==null){K=dn(k,1,"no memory during frame initialization.");break e}k.Vb=je}je=k.Ec,Se=k.Fc,k.Ac=je,k.Bc=Se,Se+=re,k.Gd=o(Le,Vs),k.Hd=0,k.rb=o(tt+1,_r),k.sb=1,k.wa=ft?o(ft,Xt):null,k.Y=0,k.D.Nb=0,k.D.wa=k.wa,k.D.Y=k.Y,0<k.Aa&&(k.D.Y+=Te),t(!0),k.oc=je,k.pc=Se,Se+=832,k.ya=o(ht,Ts),k.aa=0,k.D.ya=k.ya,k.D.aa=k.aa,k.Aa==2&&(k.D.aa+=Te),k.R=16*Te,k.B=8*Te,Te=(Le=W0[k.L])*k.R,Le=Le/2*k.B,k.sa=je,k.ta=Se+Te,k.qa=k.sa,k.ra=k.ta+16*K*k.R+Le,k.Ha=k.qa,k.Ia=k.ra+8*K*k.B+Le,k.$c=0,Se+=he,k.mb=be?je:null,k.nb=be?Se:null,t(Se+be<=k.Fc+k.Vb),Ul(k),s(k.Ac,k.Bc,0,re),K=1}}if(K){if(I.ka=0,I.y=k.sa,I.O=k.ta,I.f=k.qa,I.N=k.ra,I.ea=k.Ha,I.Vd=k.Ia,I.fa=k.R,I.Rc=k.B,I.F=null,I.J=0,!uf){for(K=-255;255>=K;++K)xa[255+K]=0>K?-K:K;for(K=-1020;1020>=K;++K)vl[1020+K]=-128>K?-128:127<K?127:K;for(K=-112;112>=K;++K)M0[112+K]=-16>K?-16:15<K?15:K;for(K=-255;510>=K;++K)bl[255+K]=0>K?0:255<K?255:K;uf=1}lf=Jn,xl=dr,cf=hr,ci=Mr,Bi=Wn,Wa=$t,Tc=Sc,df=md,bd=Jx,$o=gd,$i=xd,xo=zl,Uo=P0,gl=_c,zo=rs,qo=Os,F0=ul,_i=Qx,Ho[0]=Un,Ho[1]=Nr,Ho[2]=nr,Ho[3]=ar,Ho[4]=wa,Ho[5]=yn,Ho[6]=vs,Ho[7]=Mi,Ho[8]=Na,Ho[9]=Lo,zi[0]=An,zi[1]=Ur,zi[2]=lr,zi[3]=pr,zi[4]=Ir,zi[5]=Jt,zi[6]=tn,Hl[0]=sn,Hl[1]=Rt,Hl[2]=oi,Hl[3]=rn,Hl[4]=Dt,Hl[5]=Ie,Hl[6]=ir,K=1}else K=0}K&&(K=function(it,Et){for(it.M=0;it.M<it.Va;++it.M){var yt,rt=it.Jc[it.M&it.Xb],at=it.m,At=it;for(yt=0;yt<At.za;++yt){var Ot=at,Tt=At,tr=Tt.Ac,Kt=Tt.Bc+4*yt,Tr=Tt.zc,rr=Tt.ya[Tt.aa+yt];if(Tt.Qa.Bb?rr.$b=ae(Ot,Tt.Pa.jb[0])?2+ae(Ot,Tt.Pa.jb[2]):ae(Ot,Tt.Pa.jb[1]):rr.$b=0,Tt.kc&&(rr.Ad=ae(Ot,Tt.Bd)),rr.Za=!ae(Ot,145)+0,rr.Za){var on=rr.Ob,Cn=0;for(Tt=0;4>Tt;++Tt){var gn,nn=Tr[0+Tt];for(gn=0;4>gn;++gn){nn=au[tr[Kt+gn]][nn];for(var Xn=wd[ae(Ot,nn[0])];0<Xn;)Xn=wd[2*Xn+ae(Ot,nn[Xn])];nn=-Xn,tr[Kt+gn]=nn}n(on,Cn,tr,Kt,4),Cn+=4,Tr[0+Tt]=nn}}else nn=ae(Ot,156)?ae(Ot,128)?1:3:ae(Ot,163)?2:0,rr.Ob[0]=nn,s(tr,Kt,nn,4),s(Tr,0,nn,4);rr.Dd=ae(Ot,142)?ae(Ot,114)?ae(Ot,183)?1:3:2:0}if(At.m.Ka)return dn(it,7,"Premature end-of-partition0 encountered.");for(;it.ja<it.za;++it.ja){if(At=rt,Ot=(at=it).rb[at.sb-1],tr=at.rb[at.sb+at.ja],yt=at.ya[at.aa+at.ja],Kt=at.kc?yt.Ad:0)Ot.la=tr.la=0,yt.Za||(Ot.Na=tr.Na=0),yt.Hc=0,yt.Gc=0,yt.ia=0;else{var jn,Yr;if(Ot=tr,tr=At,Kt=at.Pa.Xc,Tr=at.ya[at.aa+at.ja],rr=at.pb[Tr.$b],Tt=Tr.ad,on=0,Cn=at.rb[at.sb-1],nn=gn=0,s(Tt,on,0,384),Tr.Za)var is=0,ui=Kt[3];else{Xn=i(16);var Ga=Ot.Na+Cn.Na;if(Ga=Sp(tr,Kt[1],Ga,rr.Eb,0,Xn,0),Ot.Na=Cn.Na=(0<Ga)+0,1<Ga)lf(Xn,0,Tt,on);else{var qi=Xn[0]+3>>3;for(Xn=0;256>Xn;Xn+=16)Tt[on+Xn]=qi}is=1,ui=Kt[0]}var Tn=15&Ot.la,vo=15&Cn.la;for(Xn=0;4>Xn;++Xn){var bo=1&vo;for(qi=Yr=0;4>qi;++qi)Tn=Tn>>1|(bo=(Ga=Sp(tr,ui,Ga=bo+(1&Tn),rr.Sc,is,Tt,on))>is)<<7,Yr=Yr<<2|(3<Ga?3:1<Ga?2:Tt[on+0]!=0),on+=16;Tn>>=4,vo=vo>>1|bo<<7,gn=(gn<<8|Yr)>>>0}for(ui=Tn,is=vo>>4,jn=0;4>jn;jn+=2){for(Yr=0,Tn=Ot.la>>4+jn,vo=Cn.la>>4+jn,Xn=0;2>Xn;++Xn){for(bo=1&vo,qi=0;2>qi;++qi)Ga=bo+(1&Tn),Tn=Tn>>1|(bo=0<(Ga=Sp(tr,Kt[2],Ga,rr.Qc,0,Tt,on)))<<3,Yr=Yr<<2|(3<Ga?3:1<Ga?2:Tt[on+0]!=0),on+=16;Tn>>=2,vo=vo>>1|bo<<5}nn|=Yr<<4*jn,ui|=Tn<<4<<jn,is|=(240&vo)<<jn}Ot.la=ui,Cn.la=is,Tr.Hc=gn,Tr.Gc=nn,Tr.ia=43690&nn?0:rr.ia,Kt=!(gn|nn)}if(0<at.L&&(at.wa[at.Y+at.ja]=at.gd[yt.$b][yt.Za],at.wa[at.Y+at.ja].La|=!Kt),At.Ka)return dn(it,7,"Premature end-of-file encountered.")}if(Ul(it),at=Et,At=1,yt=(rt=it).D,Ot=0<rt.L&&rt.M>=rt.zb&&rt.M<=rt.Va,rt.Aa==0)e:{if(yt.M=rt.M,yt.uc=Ot,L0(rt,yt),At=1,yt=(Yr=rt.D).Nb,Ot=(nn=W0[rt.L])*rt.R,tr=nn/2*rt.B,Xn=16*yt*rt.R,qi=8*yt*rt.B,Kt=rt.sa,Tr=rt.ta-Ot+Xn,rr=rt.qa,Tt=rt.ra-tr+qi,on=rt.Ha,Cn=rt.Ia-tr+qi,vo=(Tn=Yr.M)==0,gn=Tn>=rt.Va-1,rt.Aa==2&&L0(rt,Yr),Yr.uc)for(bo=(Ga=rt).D.M,t(Ga.D.uc),Yr=Ga.yb;Yr<Ga.Hb;++Yr){is=Yr,ui=bo;var _a=(Ls=(Ba=Ga).D).Nb;jn=Ba.R;var Ls=Ls.wa[Ls.Y+is],fi=Ba.sa,Vo=Ba.ta+16*_a*jn+16*is,Wl=Ls.dd,os=Ls.tc;if(os!=0)if(t(3<=os),Ba.L==1)0<is&&qo(fi,Vo,jn,os+4),Ls.La&&_i(fi,Vo,jn,os),0<ui&&zo(fi,Vo,jn,os+4),Ls.La&&F0(fi,Vo,jn,os);else{var Ai=Ba.B,iu=Ba.qa,yl=Ba.ra+8*_a*Ai+8*is,Oc=Ba.Ha,Ba=Ba.Ia+8*_a*Ai+8*is;_a=Ls.ld,0<is&&(df(fi,Vo,jn,os+4,Wl,_a),$o(iu,yl,Oc,Ba,Ai,os+4,Wl,_a)),Ls.La&&(xo(fi,Vo,jn,os,Wl,_a),gl(iu,yl,Oc,Ba,Ai,os,Wl,_a)),0<ui&&(Tc(fi,Vo,jn,os+4,Wl,_a),bd(iu,yl,Oc,Ba,Ai,os+4,Wl,_a)),Ls.La&&($i(fi,Vo,jn,os,Wl,_a),Uo(iu,yl,Oc,Ba,Ai,os,Wl,_a))}}if(rt.ia&&alert("todo:DitherRow"),at.put!=null){if(Yr=16*Tn,Tn=16*(Tn+1),vo?(at.y=rt.sa,at.O=rt.ta+Xn,at.f=rt.qa,at.N=rt.ra+qi,at.ea=rt.Ha,at.W=rt.Ia+qi):(Yr-=nn,at.y=Kt,at.O=Tr,at.f=rr,at.N=Tt,at.ea=on,at.W=Cn),gn||(Tn-=nn),Tn>at.o&&(Tn=at.o),at.F=null,at.J=null,rt.Fa!=null&&0<rt.Fa.length&&Yr<Tn&&(at.J=rf(rt,at,Yr,Tn-Yr),at.F=rt.mb,at.F==null&&at.F.length==0)){At=dn(rt,3,"Could not decode alpha data.");break e}Yr<at.j&&(nn=at.j-Yr,Yr=at.j,t(!(1&nn)),at.O+=rt.R*nn,at.N+=rt.B*(nn>>1),at.W+=rt.B*(nn>>1),at.F!=null&&(at.J+=at.width*nn)),Yr<Tn&&(at.O+=at.v,at.N+=at.v>>1,at.W+=at.v>>1,at.F!=null&&(at.J+=at.v),at.ka=Yr-at.j,at.U=at.va-at.v,at.T=Tn-Yr,At=at.put(at))}yt+1!=rt.Ic||gn||(n(rt.sa,rt.ta-Ot,Kt,Tr+16*rt.R,Ot),n(rt.qa,rt.ra-tr,rr,Tt+8*rt.B,tr),n(rt.Ha,rt.Ia-tr,on,Cn+8*rt.B,tr))}if(!At)return dn(it,6,"Output aborted.")}return 1}(k,I)),I.bc!=null&&I.bc(I),K&=1}return K?(k.cb=0,K):0}function ii(k,I,K,re,he){he=k[I+K+32*re]+(he>>3),k[I+K+32*re]=-256&he?0>he?0:255:he}function Be(k,I,K,re,he,be){ii(k,I,0,K,re+he),ii(k,I,1,K,re+be),ii(k,I,2,K,re-be),ii(k,I,3,K,re-he)}function gt(k){return(20091*k>>16)+k}function Pt(k,I,K,re){var he,be=0,je=i(16);for(he=0;4>he;++he){var Se=k[I+0]+k[I+8],Te=k[I+0]-k[I+8],Le=(35468*k[I+4]>>16)-gt(k[I+12]),tt=gt(k[I+4])+(35468*k[I+12]>>16);je[be+0]=Se+tt,je[be+1]=Te+Le,je[be+2]=Te-Le,je[be+3]=Se-tt,be+=4,I++}for(he=be=0;4>he;++he)Se=(k=je[be+0]+4)+je[be+8],Te=k-je[be+8],Le=(35468*je[be+4]>>16)-gt(je[be+12]),ii(K,re,0,0,Se+(tt=gt(je[be+4])+(35468*je[be+12]>>16))),ii(K,re,1,0,Te+Le),ii(K,re,2,0,Te-Le),ii(K,re,3,0,Se-tt),be++,re+=32}function $t(k,I,K,re){var he=k[I+0]+4,be=35468*k[I+4]>>16,je=gt(k[I+4]),Se=35468*k[I+1]>>16;Be(K,re,0,he+je,k=gt(k[I+1]),Se),Be(K,re,1,he+be,k,Se),Be(K,re,2,he-be,k,Se),Be(K,re,3,he-je,k,Se)}function dr(k,I,K,re,he){Pt(k,I,K,re),he&&Pt(k,I+16,K,re+4)}function hr(k,I,K,re){xl(k,I+0,K,re,1),xl(k,I+32,K,re+128,1)}function Mr(k,I,K,re){var he;for(k=k[I+0]+4,he=0;4>he;++he)for(I=0;4>I;++I)ii(K,re,I,he,k)}function Wn(k,I,K,re){k[I+0]&&ci(k,I+0,K,re),k[I+16]&&ci(k,I+16,K,re+4),k[I+32]&&ci(k,I+32,K,re+128),k[I+48]&&ci(k,I+48,K,re+128+4)}function Jn(k,I,K,re){var he,be=i(16);for(he=0;4>he;++he){var je=k[I+0+he]+k[I+12+he],Se=k[I+4+he]+k[I+8+he],Te=k[I+4+he]-k[I+8+he],Le=k[I+0+he]-k[I+12+he];be[0+he]=je+Se,be[8+he]=je-Se,be[4+he]=Le+Te,be[12+he]=Le-Te}for(he=0;4>he;++he)je=(k=be[0+4*he]+3)+be[3+4*he],Se=be[1+4*he]+be[2+4*he],Te=be[1+4*he]-be[2+4*he],Le=k-be[3+4*he],K[re+0]=je+Se>>3,K[re+16]=Le+Te>>3,K[re+32]=je-Se>>3,K[re+48]=Le-Te>>3,re+=64}function _n(k,I,K){var re,he=I-32,be=Ui,je=255-k[he-1];for(re=0;re<K;++re){var Se,Te=be,Le=je+k[I-1];for(Se=0;Se<K;++Se)k[I+Se]=Te[Le+k[he+Se]];I+=32}}function Nr(k,I){_n(k,I,4)}function Rt(k,I){_n(k,I,8)}function Ur(k,I){_n(k,I,16)}function lr(k,I){var K;for(K=0;16>K;++K)n(k,I+32*K,k,I-32,16)}function pr(k,I){var K;for(K=16;0<K;--K)s(k,I,k[I-1],16),I+=32}function Qt(k,I,K){var re;for(re=0;16>re;++re)s(I,K+32*re,k,16)}function An(k,I){var K,re=16;for(K=0;16>K;++K)re+=k[I-1+32*K]+k[I+K-32];Qt(re>>5,k,I)}function Ir(k,I){var K,re=8;for(K=0;16>K;++K)re+=k[I-1+32*K];Qt(re>>4,k,I)}function Jt(k,I){var K,re=8;for(K=0;16>K;++K)re+=k[I+K-32];Qt(re>>4,k,I)}function tn(k,I){Qt(128,k,I)}function ur(k,I,K){return k+2*I+K+2>>2}function nr(k,I){var K,re=I-32;for(re=new Uint8Array([ur(k[re-1],k[re+0],k[re+1]),ur(k[re+0],k[re+1],k[re+2]),ur(k[re+1],k[re+2],k[re+3]),ur(k[re+2],k[re+3],k[re+4])]),K=0;4>K;++K)n(k,I+32*K,re,0,re.length)}function ar(k,I){var K=k[I-1],re=k[I-1+32],he=k[I-1+64],be=k[I-1+96];Z(k,I+0,16843009*ur(k[I-1-32],K,re)),Z(k,I+32,16843009*ur(K,re,he)),Z(k,I+64,16843009*ur(re,he,be)),Z(k,I+96,16843009*ur(he,be,be))}function Un(k,I){var K,re=4;for(K=0;4>K;++K)re+=k[I+K-32]+k[I-1+32*K];for(re>>=3,K=0;4>K;++K)s(k,I+32*K,re,4)}function wa(k,I){var K=k[I-1+0],re=k[I-1+32],he=k[I-1+64],be=k[I-1-32],je=k[I+0-32],Se=k[I+1-32],Te=k[I+2-32],Le=k[I+3-32];k[I+0+96]=ur(re,he,k[I-1+96]),k[I+1+96]=k[I+0+64]=ur(K,re,he),k[I+2+96]=k[I+1+64]=k[I+0+32]=ur(be,K,re),k[I+3+96]=k[I+2+64]=k[I+1+32]=k[I+0+0]=ur(je,be,K),k[I+3+64]=k[I+2+32]=k[I+1+0]=ur(Se,je,be),k[I+3+32]=k[I+2+0]=ur(Te,Se,je),k[I+3+0]=ur(Le,Te,Se)}function vs(k,I){var K=k[I+1-32],re=k[I+2-32],he=k[I+3-32],be=k[I+4-32],je=k[I+5-32],Se=k[I+6-32],Te=k[I+7-32];k[I+0+0]=ur(k[I+0-32],K,re),k[I+1+0]=k[I+0+32]=ur(K,re,he),k[I+2+0]=k[I+1+32]=k[I+0+64]=ur(re,he,be),k[I+3+0]=k[I+2+32]=k[I+1+64]=k[I+0+96]=ur(he,be,je),k[I+3+32]=k[I+2+64]=k[I+1+96]=ur(be,je,Se),k[I+3+64]=k[I+2+96]=ur(je,Se,Te),k[I+3+96]=ur(Se,Te,Te)}function yn(k,I){var K=k[I-1+0],re=k[I-1+32],he=k[I-1+64],be=k[I-1-32],je=k[I+0-32],Se=k[I+1-32],Te=k[I+2-32],Le=k[I+3-32];k[I+0+0]=k[I+1+64]=be+je+1>>1,k[I+1+0]=k[I+2+64]=je+Se+1>>1,k[I+2+0]=k[I+3+64]=Se+Te+1>>1,k[I+3+0]=Te+Le+1>>1,k[I+0+96]=ur(he,re,K),k[I+0+64]=ur(re,K,be),k[I+0+32]=k[I+1+96]=ur(K,be,je),k[I+1+32]=k[I+2+96]=ur(be,je,Se),k[I+2+32]=k[I+3+96]=ur(je,Se,Te),k[I+3+32]=ur(Se,Te,Le)}function Mi(k,I){var K=k[I+0-32],re=k[I+1-32],he=k[I+2-32],be=k[I+3-32],je=k[I+4-32],Se=k[I+5-32],Te=k[I+6-32],Le=k[I+7-32];k[I+0+0]=K+re+1>>1,k[I+1+0]=k[I+0+64]=re+he+1>>1,k[I+2+0]=k[I+1+64]=he+be+1>>1,k[I+3+0]=k[I+2+64]=be+je+1>>1,k[I+0+32]=ur(K,re,he),k[I+1+32]=k[I+0+96]=ur(re,he,be),k[I+2+32]=k[I+1+96]=ur(he,be,je),k[I+3+32]=k[I+2+96]=ur(be,je,Se),k[I+3+64]=ur(je,Se,Te),k[I+3+96]=ur(Se,Te,Le)}function Lo(k,I){var K=k[I-1+0],re=k[I-1+32],he=k[I-1+64],be=k[I-1+96];k[I+0+0]=K+re+1>>1,k[I+2+0]=k[I+0+32]=re+he+1>>1,k[I+2+32]=k[I+0+64]=he+be+1>>1,k[I+1+0]=ur(K,re,he),k[I+3+0]=k[I+1+32]=ur(re,he,be),k[I+3+32]=k[I+1+64]=ur(he,be,be),k[I+3+64]=k[I+2+64]=k[I+0+96]=k[I+1+96]=k[I+2+96]=k[I+3+96]=be}function Na(k,I){var K=k[I-1+0],re=k[I-1+32],he=k[I-1+64],be=k[I-1+96],je=k[I-1-32],Se=k[I+0-32],Te=k[I+1-32],Le=k[I+2-32];k[I+0+0]=k[I+2+32]=K+je+1>>1,k[I+0+32]=k[I+2+64]=re+K+1>>1,k[I+0+64]=k[I+2+96]=he+re+1>>1,k[I+0+96]=be+he+1>>1,k[I+3+0]=ur(Se,Te,Le),k[I+2+0]=ur(je,Se,Te),k[I+1+0]=k[I+3+32]=ur(K,je,Se),k[I+1+32]=k[I+3+64]=ur(re,K,je),k[I+1+64]=k[I+3+96]=ur(he,re,K),k[I+1+96]=ur(be,he,re)}function oi(k,I){var K;for(K=0;8>K;++K)n(k,I+32*K,k,I-32,8)}function rn(k,I){var K;for(K=0;8>K;++K)s(k,I,k[I-1],8),I+=32}function Jr(k,I,K){var re;for(re=0;8>re;++re)s(I,K+32*re,k,8)}function sn(k,I){var K,re=8;for(K=0;8>K;++K)re+=k[I+K-32]+k[I-1+32*K];Jr(re>>4,k,I)}function Ie(k,I){var K,re=4;for(K=0;8>K;++K)re+=k[I+K-32];Jr(re>>3,k,I)}function Dt(k,I){var K,re=4;for(K=0;8>K;++K)re+=k[I-1+32*K];Jr(re>>3,k,I)}function ir(k,I){Jr(128,k,I)}function kr(k,I,K){var re=k[I-K],he=k[I+0],be=3*(he-re)+R0[1020+k[I-2*K]-k[I+K]],je=yd[112+(be+4>>3)];k[I-K]=Ui[255+re+yd[112+(be+3>>3)]],k[I+0]=Ui[255+he-je]}function Xr(k,I,K,re){var he=k[I+0],be=k[I+K];return di[255+k[I-2*K]-k[I-K]]>re||di[255+be-he]>re}function un(k,I,K,re){return 4*di[255+k[I-K]-k[I+0]]+di[255+k[I-2*K]-k[I+K]]<=re}function In(k,I,K,re,he){var be=k[I-3*K],je=k[I-2*K],Se=k[I-K],Te=k[I+0],Le=k[I+K],tt=k[I+2*K],ft=k[I+3*K];return 4*di[255+Se-Te]+di[255+je-Le]>re?0:di[255+k[I-4*K]-be]<=he&&di[255+be-je]<=he&&di[255+je-Se]<=he&&di[255+ft-tt]<=he&&di[255+tt-Le]<=he&&di[255+Le-Te]<=he}function rs(k,I,K,re){var he=2*re+1;for(re=0;16>re;++re)un(k,I+re,K,he)&&kr(k,I+re,K)}function Os(k,I,K,re){var he=2*re+1;for(re=0;16>re;++re)un(k,I+re*K,1,he)&&kr(k,I+re*K,1)}function ul(k,I,K,re){var he;for(he=3;0<he;--he)rs(k,I+=4*K,K,re)}function Qx(k,I,K,re){var he;for(he=3;0<he;--he)Os(k,I+=4,K,re)}function fl(k,I,K,re,he,be,je,Se){for(be=2*be+1;0<he--;){if(In(k,I,K,be,je))if(Xr(k,I,K,Se))kr(k,I,K);else{var Te=k,Le=I,tt=K,ft=Te[Le-2*tt],ht=Te[Le-tt],it=Te[Le+0],Et=Te[Le+tt],yt=Te[Le+2*tt],rt=27*(At=R0[1020+3*(it-ht)+R0[1020+ft-Et]])+63>>7,at=18*At+63>>7,At=9*At+63>>7;Te[Le-3*tt]=Ui[255+Te[Le-3*tt]+At],Te[Le-2*tt]=Ui[255+ft+at],Te[Le-tt]=Ui[255+ht+rt],Te[Le+0]=Ui[255+it-rt],Te[Le+tt]=Ui[255+Et-at],Te[Le+2*tt]=Ui[255+yt-At]}I+=re}}function Fo(k,I,K,re,he,be,je,Se){for(be=2*be+1;0<he--;){if(In(k,I,K,be,je))if(Xr(k,I,K,Se))kr(k,I,K);else{var Te=k,Le=I,tt=K,ft=Te[Le-tt],ht=Te[Le+0],it=Te[Le+tt],Et=yd[112+((yt=3*(ht-ft))+4>>3)],yt=yd[112+(yt+3>>3)],rt=Et+1>>1;Te[Le-2*tt]=Ui[255+Te[Le-2*tt]+rt],Te[Le-tt]=Ui[255+ft+yt],Te[Le+0]=Ui[255+ht-Et],Te[Le+tt]=Ui[255+it-rt]}I+=re}}function Sc(k,I,K,re,he,be){fl(k,I,K,1,16,re,he,be)}function md(k,I,K,re,he,be){fl(k,I,1,K,16,re,he,be)}function xd(k,I,K,re,he,be){var je;for(je=3;0<je;--je)Fo(k,I+=4*K,K,1,16,re,he,be)}function zl(k,I,K,re,he,be){var je;for(je=3;0<je;--je)Fo(k,I+=4,1,K,16,re,he,be)}function Jx(k,I,K,re,he,be,je,Se){fl(k,I,he,1,8,be,je,Se),fl(K,re,he,1,8,be,je,Se)}function gd(k,I,K,re,he,be,je,Se){fl(k,I,1,he,8,be,je,Se),fl(K,re,1,he,8,be,je,Se)}function P0(k,I,K,re,he,be,je,Se){Fo(k,I+4*he,he,1,8,be,je,Se),Fo(K,re+4*he,he,1,8,be,je,Se)}function _c(k,I,K,re,he,be,je,Se){Fo(k,I+4,1,he,8,be,je,Se),Fo(K,re+4,1,he,8,be,je,Se)}function hl(){this.ba=new Vt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new qt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ac(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ef(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function I0(){this.ua=0,this.Wa=new Q,this.vb=new Q,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new F,this.yc=new C}function tf(){this.xb=this.a=0,this.l=new gs,this.ca=new Vt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new E,this.Pb=0,this.wd=new E,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new I0,this.ab=0,this.gc=o(4,ef),this.Oc=0}function vd(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new gs,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function ma(k,I,K,re,he,be,je){for(k=k==null?0:k[I+0],I=0;I<je;++I)he[be+I]=k+K[re+I]&255,k=he[be+I]}function D0(k,I,K,re,he,be,je){var Se;if(k==null)ma(null,null,K,re,he,be,je);else for(Se=0;Se<je;++Se)he[be+Se]=k[I+Se]+K[re+Se]&255}function Cc(k,I,K,re,he,be,je){if(k==null)ma(null,null,K,re,he,be,je);else{var Se,Te=k[I+0],Le=Te,tt=Te;for(Se=0;Se<je;++Se)Le=tt+(Te=k[I+Se])-Le,tt=K[re+Se]+(-256&Le?0>Le?0:255:Le)&255,Le=Te,he[be+Se]=tt}}function rf(k,I,K,re){var he=I.width,be=I.o;if(t(k!=null&&I!=null),0>K||0>=re||K+re>be)return null;if(!k.Cc){if(k.ga==null){var je;if(k.ga=new vd,(je=k.ga==null)||(je=I.width*I.o,t(k.Gb.length==0),k.Gb=i(je),k.Uc=0,k.Gb==null?je=0:(k.mb=k.Gb,k.nb=k.Uc,k.rc=null,je=1),je=!je),!je){je=k.ga;var Se=k.Fa,Te=k.P,Le=k.qc,tt=k.mb,ft=k.nb,ht=Te+1,it=Le-1,Et=je.l;if(t(Se!=null&&tt!=null&&I!=null),go[0]=null,go[1]=ma,go[2]=D0,go[3]=Cc,je.ca=tt,je.tb=ft,je.c=I.width,je.i=I.height,t(0<je.c&&0<je.i),1>=Le)I=0;else if(je.$a=Se[Te+0]>>0&3,je.Z=Se[Te+0]>>2&3,je.Lc=Se[Te+0]>>4&3,Te=Se[Te+0]>>6&3,0>je.$a||1<je.$a||4<=je.Z||1<je.Lc||Te)I=0;else if(Et.put=Cr,Et.ac=Sr,Et.bc=cr,Et.ma=je,Et.width=I.width,Et.height=I.height,Et.Da=I.Da,Et.v=I.v,Et.va=I.va,Et.j=I.j,Et.o=I.o,je.$a)e:{t(je.$a==1),I=$e();t:for(;;){if(I==null){I=0;break e}if(t(je!=null),je.mc=I,I.c=je.c,I.i=je.i,I.l=je.l,I.l.ma=je,I.l.width=je.c,I.l.height=je.i,I.a=0,J(I.m,Se,ht,it),!We(je.c,je.i,1,I,null)||(I.ab==1&&I.gc[0].hc==3&&Ce(I.s)?(je.ic=1,Se=I.c*I.i,I.Ta=null,I.Ua=0,I.V=i(Se),I.Ba=0,I.V==null?(I.a=1,I=0):I=1):(je.ic=0,I=Ve(I,je.c)),!I))break t;I=1;break e}je.mc=null,I=0}else I=it>=je.c*je.i;je=!I}if(je)return null;k.ga.Lc!=1?k.Ga=0:re=be-K}t(k.ga!=null),t(K+re<=be);e:{if(I=(Se=k.ga).c,be=Se.l.o,Se.$a==0){if(ht=k.rc,it=k.Vc,Et=k.Fa,Te=k.P+1+K*I,Le=k.mb,tt=k.nb+K*I,t(Te<=k.P+k.qc),Se.Z!=0)for(t(go[Se.Z]!=null),je=0;je<re;++je)go[Se.Z](ht,it,Et,Te,Le,tt,I),ht=Le,it=tt,tt+=I,Te+=I;else for(je=0;je<re;++je)n(Le,tt,Et,Te,I),ht=Le,it=tt,tt+=I,Te+=I;k.rc=ht,k.Vc=it}else{if(t(Se.mc!=null),I=K+re,t((je=Se.mc)!=null),t(I<=je.i),je.C>=I)I=1;else if(Se.ic||lt(),Se.ic){Se=je.V,ht=je.Ba,it=je.c;var yt=je.i,rt=(Et=1,Te=je.$/it,Le=je.$%it,tt=je.m,ft=je.s,je.$),at=it*yt,At=it*I,Ot=ft.wc,Tt=rt<At?Pr(ft,Le,Te):null;t(rt<=at),t(I<=yt),t(Ce(ft));t:for(;;){for(;!tt.h&&rt<At;){if(Le&Ot||(Tt=Pr(ft,Le,Te)),t(Tt!=null),H(tt),256>(yt=Fr(Tt.G[0],Tt.H[0],tt)))Se[ht+rt]=yt,++rt,++Le>=it&&(Le=0,++Te<=I&&!(Te%16)&&G(je,Te));else{if(!(280>yt)){Et=0;break t}yt=yr(yt-256,tt);var tr,Kt=Fr(Tt.G[4],Tt.H[4],tt);if(H(tt),!(rt>=(Kt=wr(it,Kt=yr(Kt,tt)))&&at-rt>=yt)){Et=0;break t}for(tr=0;tr<yt;++tr)Se[ht+rt+tr]=Se[ht+rt+tr-Kt];for(rt+=yt,Le+=yt;Le>=it;)Le-=it,++Te<=I&&!(Te%16)&&G(je,Te);rt<At&&Le&Ot&&(Tt=Pr(ft,Le,Te))}t(tt.h==q(tt))}G(je,Te>I?I:Te);break t}!Et||tt.h&&rt<at?(Et=0,je.a=tt.h?5:3):je.$=rt,I=Et}else I=oe(je,je.V,je.Ba,je.c,je.i,I,Re);if(!I){re=0;break e}}K+re>=be&&(k.Cc=1),re=1}if(!re)return null;if(k.Cc&&((re=k.ga)!=null&&(re.mc=null),k.ga=null,0<k.Ga))return alert("todo:WebPDequantizeLevels"),null}return k.nb+K*he}function z(k,I,K,re,he,be){for(;0<he--;){var je,Se=k,Te=I+(K?1:0),Le=k,tt=I+(K?0:3);for(je=0;je<re;++je){var ft=Le[tt+4*je];ft!=255&&(ft*=32897,Se[Te+4*je+0]=Se[Te+4*je+0]*ft>>23,Se[Te+4*je+1]=Se[Te+4*je+1]*ft>>23,Se[Te+4*je+2]=Se[Te+4*je+2]*ft>>23)}I+=be}}function pe(k,I,K,re,he){for(;0<re--;){var be;for(be=0;be<K;++be){var je=k[I+2*be+0],Se=15&(Le=k[I+2*be+1]),Te=4369*Se,Le=(240&Le|Le>>4)*Te>>16;k[I+2*be+0]=(240&je|je>>4)*Te>>16&240|(15&je|je<<4)*Te>>16>>4&15,k[I+2*be+1]=240&Le|Se}I+=he}}function ze(k,I,K,re,he,be,je,Se){var Te,Le,tt=255;for(Le=0;Le<he;++Le){for(Te=0;Te<re;++Te){var ft=k[I+Te];be[je+4*Te]=ft,tt&=ft}I+=K,je+=Se}return tt!=255}function et(k,I,K,re,he){var be;for(be=0;be<he;++be)K[re+be]=k[I+be]>>8}function lt(){Ds=z,Kn=pe,Zn=ze,xn=et}function Nt(k,I,K){_[k]=function(re,he,be,je,Se,Te,Le,tt,ft,ht,it,Et,yt,rt,at,At,Ot){var Tt,tr=Ot-1>>1,Kt=Se[Te+0]|Le[tt+0]<<16,Tr=ft[ht+0]|it[Et+0]<<16;t(re!=null);var rr=3*Kt+Tr+131074>>2;for(I(re[he+0],255&rr,rr>>16,yt,rt),be!=null&&(rr=3*Tr+Kt+131074>>2,I(be[je+0],255&rr,rr>>16,at,At)),Tt=1;Tt<=tr;++Tt){var on=Se[Te+Tt]|Le[tt+Tt]<<16,Cn=ft[ht+Tt]|it[Et+Tt]<<16,gn=Kt+on+Tr+Cn+524296,nn=gn+2*(on+Tr)>>3;rr=nn+Kt>>1,Kt=(gn=gn+2*(Kt+Cn)>>3)+on>>1,I(re[he+2*Tt-1],255&rr,rr>>16,yt,rt+(2*Tt-1)*K),I(re[he+2*Tt-0],255&Kt,Kt>>16,yt,rt+(2*Tt-0)*K),be!=null&&(rr=gn+Tr>>1,Kt=nn+Cn>>1,I(be[je+2*Tt-1],255&rr,rr>>16,at,At+(2*Tt-1)*K),I(be[je+2*Tt+0],255&Kt,Kt>>16,at,At+(2*Tt+0)*K)),Kt=on,Tr=Cn}1&Ot||(rr=3*Kt+Tr+131074>>2,I(re[he+Ot-1],255&rr,rr>>16,yt,rt+(Ot-1)*K),be!=null&&(rr=3*Tr+Kt+131074>>2,I(be[je+Ot-1],255&rr,rr>>16,at,At+(Ot-1)*K)))}}function Ft(){Wo[B0]=$N,Wo[$0]=Sb,Wo[xb]=Ap,Wo[U0]=jd,Wo[bp]=rg,Wo[yp]=_b,Wo[gb]=Ab,Wo[z0]=Sb,Wo[Zx]=jd,Wo[q0]=rg,Wo[eg]=_b}function sr(k){return k&-16384?0>k?0:255:k>>UN}function Ar(k,I){return sr((19077*k>>8)+(26149*I>>8)-14234)}function Gr(k,I,K){return sr((19077*k>>8)-(6419*I>>8)-(13320*K>>8)+8708)}function zr(k,I){return sr((19077*k>>8)+(33050*I>>8)-17685)}function mn(k,I,K,re,he){re[he+0]=Ar(k,K),re[he+1]=Gr(k,I,K),re[he+2]=zr(k,I)}function ja(k,I,K,re,he){re[he+0]=zr(k,I),re[he+1]=Gr(k,I,K),re[he+2]=Ar(k,K)}function ka(k,I,K,re,he){var be=Gr(k,I,K);I=be<<3&224|zr(k,I)>>3,re[he+0]=248&Ar(k,K)|be>>5,re[he+1]=I}function ns(k,I,K,re,he){var be=240&zr(k,I)|15;re[he+0]=240&Ar(k,K)|Gr(k,I,K)>>4,re[he+1]=be}function Gs(k,I,K,re,he){re[he+0]=255,mn(k,I,K,re,he+1)}function Ps(k,I,K,re,he){ja(k,I,K,re,he),re[he+3]=255}function Mo(k,I,K,re,he){mn(k,I,K,re,he),re[he+3]=255}function Ks(k,I){return 0>k?0:k>I?I:k}function pl(k,I,K){_[k]=function(re,he,be,je,Se,Te,Le,tt,ft){for(var ht=tt+(-2&ft)*K;tt!=ht;)I(re[he+0],be[je+0],Se[Te+0],Le,tt),I(re[he+1],be[je+0],Se[Te+0],Le,tt+K),he+=2,++je,++Te,tt+=2*K;1&ft&&I(re[he+0],be[je+0],Se[Te+0],Le,tt)}}function Ec(k,I,K){return K==0?k==0?I==0?6:5:I==0?4:0:K}function nf(k,I,K,re,he){switch(k>>>30){case 3:xl(I,K,re,he,0);break;case 2:Wa(I,K,re,he);break;case 1:ci(I,K,re,he)}}function L0(k,I){var K,re,he=I.M,be=I.Nb,je=k.oc,Se=k.pc+40,Te=k.oc,Le=k.pc+584,tt=k.oc,ft=k.pc+600;for(K=0;16>K;++K)je[Se+32*K-1]=129;for(K=0;8>K;++K)Te[Le+32*K-1]=129,tt[ft+32*K-1]=129;for(0<he?je[Se-1-32]=Te[Le-1-32]=tt[ft-1-32]=129:(s(je,Se-32-1,127,21),s(Te,Le-32-1,127,9),s(tt,ft-32-1,127,9)),re=0;re<k.za;++re){var ht=I.ya[I.aa+re];if(0<re){for(K=-1;16>K;++K)n(je,Se+32*K-4,je,Se+32*K+12,4);for(K=-1;8>K;++K)n(Te,Le+32*K-4,Te,Le+32*K+4,4),n(tt,ft+32*K-4,tt,ft+32*K+4,4)}var it=k.Gd,Et=k.Hd+re,yt=ht.ad,rt=ht.Hc;if(0<he&&(n(je,Se-32,it[Et].y,0,16),n(Te,Le-32,it[Et].f,0,8),n(tt,ft-32,it[Et].ea,0,8)),ht.Za){var at=je,At=Se-32+16;for(0<he&&(re>=k.za-1?s(at,At,it[Et].y[15],4):n(at,At,it[Et+1].y,0,4)),K=0;4>K;K++)at[At+128+K]=at[At+256+K]=at[At+384+K]=at[At+0+K];for(K=0;16>K;++K,rt<<=2)at=je,At=Se+Tb[K],Ho[ht.Ob[K]](at,At),nf(rt,yt,16*+K,at,At)}else if(at=Ec(re,he,ht.Ob[0]),zi[at](je,Se),rt!=0)for(K=0;16>K;++K,rt<<=2)nf(rt,yt,16*+K,je,Se+Tb[K]);for(K=ht.Gc,at=Ec(re,he,ht.Dd),Hl[at](Te,Le),Hl[at](tt,ft),rt=yt,at=Te,At=Le,255&(ht=K>>0)&&(170&ht?cf(rt,256,at,At):Bi(rt,256,at,At)),ht=tt,rt=ft,255&(K>>=8)&&(170&K?cf(yt,320,ht,rt):Bi(yt,320,ht,rt)),he<k.Ub-1&&(n(it[Et].y,0,je,Se+480,16),n(it[Et].f,0,Te,Le+224,8),n(it[Et].ea,0,tt,ft+224,8)),K=8*be*k.B,it=k.sa,Et=k.ta+16*re+16*be*k.R,yt=k.qa,ht=k.ra+8*re+K,rt=k.Ha,at=k.Ia+8*re+K,K=0;16>K;++K)n(it,Et+K*k.R,je,Se+32*K,16);for(K=0;8>K;++K)n(yt,ht+K*k.B,Te,Le+32*K,8),n(rt,at+K*k.B,tt,ft+32*K,8)}}function ru(k,I,K,re,he,be,je,Se,Te){var Le=[0],tt=[0],ft=0,ht=Te!=null?Te.kd:0,it=Te??new Ac;if(k==null||12>K)return 7;it.data=k,it.w=I,it.ha=K,I=[I],K=[K],it.gb=[it.gb];e:{var Et=I,yt=K,rt=it.gb;if(t(k!=null),t(yt!=null),t(rt!=null),rt[0]=0,12<=yt[0]&&!r(k,Et[0],"RIFF")){if(r(k,Et[0]+8,"WEBP")){rt=3;break e}var at=He(k,Et[0]+4);if(12>at||4294967286<at){rt=3;break e}if(ht&&at>yt[0]-8){rt=7;break e}rt[0]=at,Et[0]+=12,yt[0]-=12}rt=0}if(rt!=0)return rt;for(at=0<it.gb[0],K=K[0];;){e:{var At=k;yt=I,rt=K;var Ot=Le,Tt=tt,tr=Et=[0];if((rr=ft=[ft])[0]=0,8>rt[0])rt=7;else{if(!r(At,yt[0],"VP8X")){if(He(At,yt[0]+4)!=10){rt=3;break e}if(18>rt[0]){rt=7;break e}var Kt=He(At,yt[0]+8),Tr=1+ne(At,yt[0]+12);if(2147483648<=Tr*(At=1+ne(At,yt[0]+15))){rt=3;break e}tr!=null&&(tr[0]=Kt),Ot!=null&&(Ot[0]=Tr),Tt!=null&&(Tt[0]=At),yt[0]+=18,rt[0]-=18,rr[0]=1}rt=0}}if(ft=ft[0],Et=Et[0],rt!=0)return rt;if(yt=!!(2&Et),!at&&ft)return 3;if(be!=null&&(be[0]=!!(16&Et)),je!=null&&(je[0]=yt),Se!=null&&(Se[0]=0),je=Le[0],Et=tt[0],ft&&yt&&Te==null){rt=0;break}if(4>K){rt=7;break}if(at&&ft||!at&&!ft&&!r(k,I[0],"ALPH")){K=[K],it.na=[it.na],it.P=[it.P],it.Sa=[it.Sa];e:{Kt=k,rt=I,at=K;var rr=it.gb;Ot=it.na,Tt=it.P,tr=it.Sa,Tr=22,t(Kt!=null),t(at!=null),At=rt[0];var on=at[0];for(t(Ot!=null),t(tr!=null),Ot[0]=null,Tt[0]=null,tr[0]=0;;){if(rt[0]=At,at[0]=on,8>on){rt=7;break e}var Cn=He(Kt,At+4);if(4294967286<Cn){rt=3;break e}var gn=8+Cn+1&-2;if(Tr+=gn,0<rr&&Tr>rr){rt=3;break e}if(!r(Kt,At,"VP8 ")||!r(Kt,At,"VP8L")){rt=0;break e}if(on[0]<gn){rt=7;break e}r(Kt,At,"ALPH")||(Ot[0]=Kt,Tt[0]=At+8,tr[0]=Cn),At+=gn,on-=gn}}if(K=K[0],it.na=it.na[0],it.P=it.P[0],it.Sa=it.Sa[0],rt!=0)break}K=[K],it.Ja=[it.Ja],it.xa=[it.xa];e:if(rr=k,rt=I,at=K,Ot=it.gb[0],Tt=it.Ja,tr=it.xa,Kt=rt[0],At=!r(rr,Kt,"VP8 "),Tr=!r(rr,Kt,"VP8L"),t(rr!=null),t(at!=null),t(Tt!=null),t(tr!=null),8>at[0])rt=7;else{if(At||Tr){if(rr=He(rr,Kt+4),12<=Ot&&rr>Ot-12){rt=3;break e}if(ht&&rr>at[0]-8){rt=7;break e}Tt[0]=rr,rt[0]+=8,at[0]-=8,tr[0]=Tr}else tr[0]=5<=at[0]&&rr[Kt+0]==47&&!(rr[Kt+4]>>5),Tt[0]=at[0];rt=0}if(K=K[0],it.Ja=it.Ja[0],it.xa=it.xa[0],I=I[0],rt!=0)break;if(4294967286<it.Ja)return 3;if(Se==null||yt||(Se[0]=it.xa?2:1),je=[je],Et=[Et],it.xa){if(5>K){rt=7;break}Se=je,ht=Et,yt=be,k==null||5>K?k=0:5<=K&&k[I+0]==47&&!(k[I+4]>>5)?(at=[0],rr=[0],Ot=[0],J(Tt=new E,k,I,K),It(Tt,at,rr,Ot)?(Se!=null&&(Se[0]=at[0]),ht!=null&&(ht[0]=rr[0]),yt!=null&&(yt[0]=Ot[0]),k=1):k=0):k=0}else{if(10>K){rt=7;break}Se=Et,k==null||10>K||!dl(k,I+3,K-3)?k=0:(ht=k[I+0]|k[I+1]<<8|k[I+2]<<16,yt=16383&(k[I+7]<<8|k[I+6]),k=16383&(k[I+9]<<8|k[I+8]),1&ht||3<(ht>>1&7)||!(ht>>4&1)||ht>>5>=it.Ja||!yt||!k?k=0:(je&&(je[0]=yt),Se&&(Se[0]=k),k=1))}if(!k||(je=je[0],Et=Et[0],ft&&(Le[0]!=je||tt[0]!=Et)))return 3;Te!=null&&(Te[0]=it,Te.offset=I-Te.w,t(4294967286>I-Te.w),t(Te.offset==Te.ha-K));break}return rt==0||rt==7&&ft&&Te==null?(be!=null&&(be[0]|=it.na!=null&&0<it.na.length),re!=null&&(re[0]=je),he!=null&&(he[0]=Et),0):rt}function af(k,I,K){var re=I.width,he=I.height,be=0,je=0,Se=re,Te=he;if(I.Da=k!=null&&0<k.Da,I.Da&&(Se=k.cd,Te=k.bd,be=k.v,je=k.j,11>K||(be&=-2,je&=-2),0>be||0>je||0>=Se||0>=Te||be+Se>re||je+Te>he))return 0;if(I.v=be,I.j=je,I.va=be+Se,I.o=je+Te,I.U=Se,I.T=Te,I.da=k!=null&&0<k.da,I.da){if(!Ne(Se,Te,K=[k.ib],be=[k.hb]))return 0;I.ib=K[0],I.hb=be[0]}return I.ob=k!=null&&k.ob,I.Kb=k==null||!k.Sd,I.da&&(I.ob=I.ib<3*re/4&&I.hb<3*he/4,I.Kb=0),1}function sf(k){if(k==null)return 2;if(11>k.S){var I=k.f.RGBA;I.fb+=(k.height-1)*I.A,I.A=-I.A}else I=k.f.kb,k=k.height,I.O+=(k-1)*I.fa,I.fa=-I.fa,I.N+=(k-1>>1)*I.Ab,I.Ab=-I.Ab,I.W+=(k-1>>1)*I.Db,I.Db=-I.Db,I.F!=null&&(I.J+=(k-1)*I.lb,I.lb=-I.lb);return 0}function of(k,I,K,re){if(re==null||0>=k||0>=I)return 2;if(K!=null){if(K.Da){var he=K.cd,be=K.bd,je=-2&K.v,Se=-2&K.j;if(0>je||0>Se||0>=he||0>=be||je+he>k||Se+be>I)return 2;k=he,I=be}if(K.da){if(!Ne(k,I,he=[K.ib],be=[K.hb]))return 2;k=he[0],I=be[0]}}re.width=k,re.height=I;e:{var Te=re.width,Le=re.height;if(k=re.S,0>=Te||0>=Le||!(k>=B0&&13>k))k=2;else{if(0>=re.Rd&&re.sd==null){je=be=he=I=0;var tt=(Se=Te*Va[k])*Le;if(11>k||(be=(Le+1)/2*(I=(Te+1)/2),k==12&&(je=(he=Te)*Le)),(Le=i(tt+2*be+je))==null){k=1;break e}re.sd=Le,11>k?((Te=re.f.RGBA).eb=Le,Te.fb=0,Te.A=Se,Te.size=tt):((Te=re.f.kb).y=Le,Te.O=0,Te.fa=Se,Te.Fd=tt,Te.f=Le,Te.N=0+tt,Te.Ab=I,Te.Cd=be,Te.ea=Le,Te.W=0+tt+be,Te.Db=I,Te.Ed=be,k==12&&(Te.F=Le,Te.J=0+tt+2*be),Te.Tc=je,Te.lb=he)}if(I=1,he=re.S,be=re.width,je=re.height,he>=B0&&13>he)if(11>he)k=re.f.RGBA,I&=(Se=Math.abs(k.A))*(je-1)+be<=k.size,I&=Se>=be*Va[he],I&=k.eb!=null;else{k=re.f.kb,Se=(be+1)/2,tt=(je+1)/2,Te=Math.abs(k.fa),Le=Math.abs(k.Ab);var ft=Math.abs(k.Db),ht=Math.abs(k.lb),it=ht*(je-1)+be;I&=Te*(je-1)+be<=k.Fd,I&=Le*(tt-1)+Se<=k.Cd,I=(I&=ft*(tt-1)+Se<=k.Ed)&Te>=be&Le>=Se&ft>=Se,I&=k.y!=null,I&=k.f!=null,I&=k.ea!=null,he==12&&(I&=ht>=be,I&=it<=k.Tc,I&=k.F!=null)}else I=0;k=I?0:2}}return k!=0||K!=null&&K.fd&&(k=sf(re)),k}var as=64,mo=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ml=24,Ma=32,nu=8,Kr=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xe("Predictor0","PredictorAdd0"),_.Predictor0=function(){return 4278190080},_.Predictor1=function(k){return k},_.Predictor2=function(k,I,K){return I[K+0]},_.Predictor3=function(k,I,K){return I[K+1]},_.Predictor4=function(k,I,K){return I[K-1]},_.Predictor5=function(k,I,K){return Ae(Ae(k,I[K+1]),I[K+0])},_.Predictor6=function(k,I,K){return Ae(k,I[K-1])},_.Predictor7=function(k,I,K){return Ae(k,I[K+0])},_.Predictor8=function(k,I,K){return Ae(I[K-1],I[K+0])},_.Predictor9=function(k,I,K){return Ae(I[K+0],I[K+1])},_.Predictor10=function(k,I,K){return Ae(Ae(k,I[K-1]),Ae(I[K+0],I[K+1]))},_.Predictor11=function(k,I,K){var re=I[K+0];return 0>=ee(re>>24&255,k>>24&255,(I=I[K-1])>>24&255)+ee(re>>16&255,k>>16&255,I>>16&255)+ee(re>>8&255,k>>8&255,I>>8&255)+ee(255&re,255&k,255&I)?re:k},_.Predictor12=function(k,I,K){var re=I[K+0];return(Ue((k>>24&255)+(re>>24&255)-((I=I[K-1])>>24&255))<<24|Ue((k>>16&255)+(re>>16&255)-(I>>16&255))<<16|Ue((k>>8&255)+(re>>8&255)-(I>>8&255))<<8|Ue((255&k)+(255&re)-(255&I)))>>>0},_.Predictor13=function(k,I,K){var re=I[K-1];return(me((k=Ae(k,I[K+0]))>>24&255,re>>24&255)<<24|me(k>>16&255,re>>16&255)<<16|me(k>>8&255,re>>8&255)<<8|me(k>>0&255,re>>0&255))>>>0};var Xs=_.PredictorAdd0;_.PredictorAdd1=fe,xe("Predictor2","PredictorAdd2"),xe("Predictor3","PredictorAdd3"),xe("Predictor4","PredictorAdd4"),xe("Predictor5","PredictorAdd5"),xe("Predictor6","PredictorAdd6"),xe("Predictor7","PredictorAdd7"),xe("Predictor8","PredictorAdd8"),xe("Predictor9","PredictorAdd9"),xe("Predictor10","PredictorAdd10"),xe("Predictor11","PredictorAdd11"),xe("Predictor12","PredictorAdd12"),xe("Predictor13","PredictorAdd13");var Sa=_.PredictorAdd2;Ke("ColorIndexInverseTransform","MapARGB","32b",function(k){return k>>8&255},function(k){return k}),Ke("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(k){return k},function(k){return k>>8&255});var li,zn=_.ColorIndexInverseTransform,Is=_.MapARGB,Ra=_.VP8LColorIndexInverseTransformAlpha,Ro=_.MapAlpha,Ha=_.VP8LPredictorsAdd=[];Ha.length=16,(_.VP8LPredictors=[]).length=16,(_.VP8LPredictorsAdd_C=[]).length=16,(_.VP8LPredictors_C=[]).length=16;var bs,la,ss,Ri,ql,Bo,lf,xl,Wa,cf,ci,Bi,Tc,df,bd,$o,$i,xo,Uo,gl,zo,qo,F0,_i,Ds,Kn,Zn,xn,xa=i(511),vl=i(2041),M0=i(225),bl=i(767),uf=0,R0=vl,yd=M0,Ui=bl,di=xa,B0=0,$0=1,xb=2,U0=3,bp=4,yp=5,gb=6,z0=7,Zx=8,q0=9,eg=10,wp=[2,3,7],vb=[3,3,11],bb=[280,256,256,256,40],yb=[0,1,1,1,0],Np=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],wb=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],jp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Nb=8,ff=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kp=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Sp=null,jb=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],RN=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],wd=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Nd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],au=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],BN=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],tg=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],zi=[],Ho=[],Hl=[],_p=1,kb=2,go=[],Wo=[];Nt("UpsampleRgbLinePair",mn,3),Nt("UpsampleBgrLinePair",ja,3),Nt("UpsampleRgbaLinePair",Mo,4),Nt("UpsampleBgraLinePair",Ps,4),Nt("UpsampleArgbLinePair",Gs,4),Nt("UpsampleRgba4444LinePair",ns,2),Nt("UpsampleRgb565LinePair",ka,2);var $N=_.UpsampleRgbLinePair,Ap=_.UpsampleBgrLinePair,Sb=_.UpsampleRgbaLinePair,jd=_.UpsampleBgraLinePair,rg=_.UpsampleArgbLinePair,_b=_.UpsampleRgba4444LinePair,Ab=_.UpsampleRgb565LinePair,su=16,Cp=1<<su-1,hf=-227,Ep=482,UN=6,H0=0,ng=i(256),Tp=i(256),Cb=i(256),zN=i(256),Eb=i(Ep-hf),ag=i(Ep-hf);pl("YuvToRgbRow",mn,3),pl("YuvToBgrRow",ja,3),pl("YuvToRgbaRow",Mo,4),pl("YuvToBgraRow",Ps,4),pl("YuvToArgbRow",Gs,4),pl("YuvToRgba4444Row",ns,2),pl("YuvToRgb565Row",ka,2);var Tb=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],W0=[0,2,8],qN=[8,7,6,4,4,2,2,2,1,1,1,1],Op=1;this.WebPDecodeRGBA=function(k,I,K,re,he){var be=$0,je=new hl,Se=new Vt;je.ba=Se,Se.S=be,Se.width=[Se.width],Se.height=[Se.height];var Te=Se.width,Le=Se.height,tt=new gr;if(tt==null||k==null)var ft=2;else t(tt!=null),ft=ru(k,I,K,tt.width,tt.height,tt.Pd,tt.Qd,tt.format,null);if(ft!=0?Te=0:(Te!=null&&(Te[0]=tt.width[0]),Le!=null&&(Le[0]=tt.height[0]),Te=1),Te){Se.width=Se.width[0],Se.height=Se.height[0],re!=null&&(re[0]=Se.width),he!=null&&(he[0]=Se.height);e:{if(re=new gs,(he=new Ac).data=k,he.w=I,he.ha=K,he.kd=1,I=[0],t(he!=null),((k=ru(he.data,he.w,he.ha,null,null,null,I,null,he))==0||k==7)&&I[0]&&(k=4),(I=k)==0){if(t(je!=null),re.data=he.data,re.w=he.w+he.offset,re.ha=he.ha-he.offset,re.put=Cr,re.ac=Sr,re.bc=cr,re.ma=je,he.xa){if((k=$e())==null){je=1;break e}if(function(ht,it){var Et=[0],yt=[0],rt=[0];t:for(;;){if(ht==null)return 0;if(it==null)return ht.a=2,0;if(ht.l=it,ht.a=0,J(ht.m,it.data,it.w,it.ha),!It(ht.m,Et,yt,rt)){ht.a=3;break t}if(ht.xb=kb,it.width=Et[0],it.height=yt[0],!We(Et[0],yt[0],1,ht,null))break t;return 1}return t(ht.a!=0),0}(k,re)){if(re=(I=of(re.width,re.height,je.Oa,je.ba))==0){t:{re=k;r:for(;;){if(re==null){re=0;break t}if(t(re.s.yc!=null),t(re.s.Ya!=null),t(0<re.s.Wb),t((K=re.l)!=null),t((he=K.ma)!=null),re.xb!=0){if(re.ca=he.ba,re.tb=he.tb,t(re.ca!=null),!af(he.Oa,K,U0)){re.a=2;break r}if(!Ve(re,K.width)||K.da)break r;if((K.da||Ye(re.ca.S))&&lt(),11>re.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),re.ca.f.kb.F!=null&&lt()),re.Pb&&0<re.s.ua&&re.s.vb.X==null&&!Xe(re.s.vb,re.s.Wa.Xa)){re.a=1;break r}re.xb=0}if(!oe(re,re.V,re.Ba,re.c,re.i,K.o,De))break r;he.Dc=re.Ma,re=1;break t}t(re.a!=0),re=0}re=!re}re&&(I=k.a)}else I=k.a}else{if((k=new Fa)==null){je=1;break e}if(k.Fa=he.na,k.P=he.P,k.qc=he.Sa,Gn(k,re)){if((I=of(re.width,re.height,je.Oa,je.ba))==0){if(k.Aa=0,K=je.Oa,t((he=k)!=null),K!=null){if(0<(Te=0>(Te=K.Md)?0:100<Te?255:255*Te/100)){for(Le=tt=0;4>Le;++Le)12>(ft=he.pb[Le]).lc&&(ft.ia=Te*qN[0>ft.lc?0:ft.lc]>>3),tt|=ft.ia;tt&&(alert("todo:VP8InitRandom"),he.ia=1)}he.Ga=K.Id,100<he.Ga?he.Ga=100:0>he.Ga&&(he.Ga=0)}pd(k,re)||(I=k.a)}}else I=k.a}I==0&&je.Oa!=null&&je.Oa.fd&&(I=sf(je.ba))}je=I}be=je!=0?null:11>be?Se.f.RGBA.eb:Se.f.kb.y}else be=null;return be};var Va=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(_,T){for(var D="",A=0;A<4;A++)D+=String.fromCharCode(_[T++]);return D}function f(_,T){return(_[T+0]<<0|_[T+1]<<8|_[T+2]<<16)>>>0}function u(_,T){return(_[T+0]<<0|_[T+1]<<8|_[T+2]<<16|_[T+3]<<24)>>>0}new c;var p=[0],h=[0],m=[],g=new c,x=e,v=function(_,T){var D={},A=0,C=!1,M=0,F=0;if(D.frames=[],!function(R,q,L,H){for(var se=0;se<H;se++)if(R[q+se]!=L.charCodeAt(se))return!0;return!1}(_,T,"RIFF",4)){var B,Y;for(u(_,T+=4),T+=8;T<_.length;){var V=d(_,T),J=u(_,T+=4);T+=4;var U=J+(1&J);switch(V){case"VP8 ":case"VP8L":D.frames[A]===void 0&&(D.frames[A]={}),(E=D.frames[A]).src_off=C?F:T-8,E.src_size=M+J+8,A++,C&&(C=!1,M=0,F=0);break;case"VP8X":(E=D.header={}).feature_flags=_[T];var X=T+4;E.canvas_width=1+f(_,X),X+=3,E.canvas_height=1+f(_,X),X+=3;break;case"ALPH":C=!0,M=U+8,F=T-8;break;case"ANIM":(E=D.header).bgcolor=u(_,T),X=T+4,E.loop_count=(B=_)[(Y=X)+0]<<0|B[Y+1]<<8,X+=2;break;case"ANMF":var W,E;(E=D.frames[A]={}).offset_x=2*f(_,T),T+=3,E.offset_y=2*f(_,T),T+=3,E.width=1+f(_,T),T+=3,E.height=1+f(_,T),T+=3,E.duration=f(_,T),T+=3,W=_[T++],E.dispose=1&W,E.blend=W>>1&1}V!="ANMF"&&(T+=U)}return D}}(x,0);v.response=x,v.rgbaoutput=!0,v.dataurl=!1;var b=v.header?v.header:null,w=v.frames?v.frames:null;if(b){b.loop_counter=b.loop_count,p=[b.canvas_height],h=[b.canvas_width];for(var y=0;y<w.length&&w[y].blend!=0;y++);}var N=w[0],S=g.WebPDecodeRGBA(x,N.src_off,N.src_size,h,p);N.rgba=S,N.imgwidth=h[0],N.imgheight=p[0];for(var j=0;j<h[0]*p[0]*4;j++)m[j]=S[j];return this.width=h,this.height=p,this.data=m,this}(function(e){var t=function(){return typeof IS=="function"},r=function(p,h,m,g){var x=4,v=o;switch(g){case e.image_compression.FAST:x=1,v=i;break;case e.image_compression.MEDIUM:x=6,v=l;break;case e.image_compression.SLOW:x=9,v=c}p=n(p,h,m,v);var b=IS(p,{level:x});return e.__addimage__.arrayBufferToBinaryString(b)},n=function(p,h,m,g){for(var x,v,b,w=p.length/h,y=new Uint8Array(p.length+w),N=f(),S=0;S<w;S+=1){if(b=S*h,x=p.subarray(b,b+h),g)y.set(g(x,m,v),b+S);else{for(var j,_=N.length,T=[];j<_;j+=1)T[j]=N[j](x,m,v);var D=u(T.concat());y.set(T[D],b+S)}v=x}return y},s=function(p){var h=Array.apply([],p);return h.unshift(0),h},i=function(p,h){var m,g=[],x=p.length;g[0]=1;for(var v=0;v<x;v+=1)m=p[v-h]||0,g[v+1]=p[v]-m+256&255;return g},o=function(p,h,m){var g,x=[],v=p.length;x[0]=2;for(var b=0;b<v;b+=1)g=m&&m[b]||0,x[b+1]=p[b]-g+256&255;return x},l=function(p,h,m){var g,x,v=[],b=p.length;v[0]=3;for(var w=0;w<b;w+=1)g=p[w-h]||0,x=m&&m[w]||0,v[w+1]=p[w]+256-(g+x>>>1)&255;return v},c=function(p,h,m){var g,x,v,b,w=[],y=p.length;w[0]=4;for(var N=0;N<y;N+=1)g=p[N-h]||0,x=m&&m[N]||0,v=m&&m[N-h]||0,b=d(g,x,v),w[N+1]=p[N]-b+256&255;return w},d=function(p,h,m){if(p===h&&h===m)return p;var g=Math.abs(h-m),x=Math.abs(p-m),v=Math.abs(p+h-m-m);return g<=x&&g<=v?p:x<=v?h:m},f=function(){return[s,i,o,l,c]},u=function(p){var h=p.map(function(m){return m.reduce(function(g,x){return g+Math.abs(x)},0)});return h.indexOf(Math.min.apply(null,h))};e.processPNG=function(p,h,m,g){var x,v,b,w,y,N,S,j,_,T,D,A,C,M,F,B=this.decode.FLATE_DECODE,Y="";if(this.__addimage__.isArrayBuffer(p)&&(p=new Uint8Array(p)),this.__addimage__.isArrayBufferView(p)){if(p=(b=new rEe(p)).imgData,v=b.bits,x=b.colorSpace,y=b.colors,[4,6].indexOf(b.colorType)!==-1){if(b.bits===8){_=(j=b.pixelBitlength==32?new Uint32Array(b.decodePixels().buffer):b.pixelBitlength==16?new Uint16Array(b.decodePixels().buffer):new Uint8Array(b.decodePixels().buffer)).length,D=new Uint8Array(_*b.colors),T=new Uint8Array(_);var V,J=b.pixelBitlength-b.bits;for(M=0,F=0;M<_;M++){for(C=j[M],V=0;V<J;)D[F++]=C>>>V&255,V+=b.bits;T[M]=C>>>V&255}}if(b.bits===16){_=(j=new Uint32Array(b.decodePixels().buffer)).length,D=new Uint8Array(_*(32/b.pixelBitlength)*b.colors),T=new Uint8Array(_*(32/b.pixelBitlength)),A=b.colors>1,M=0,F=0;for(var U=0;M<_;)C=j[M++],D[F++]=C>>>0&255,A&&(D[F++]=C>>>16&255,C=j[M++],D[F++]=C>>>0&255),T[U++]=C>>>16&255;v=8}g!==e.image_compression.NONE&&t()?(p=r(D,b.width*b.colors,b.colors,g),S=r(T,b.width,1,g)):(p=D,S=T,B=void 0)}if(b.colorType===3&&(x=this.color_spaces.INDEXED,N=b.palette,b.transparency.indexed)){var X=b.transparency.indexed,W=0;for(M=0,_=X.length;M<_;++M)W+=X[M];if((W/=255)===_-1&&X.indexOf(0)!==-1)w=[X.indexOf(0)];else if(W!==_){for(j=b.decodePixels(),T=new Uint8Array(j.length),M=0,_=j.length;M<_;M++)T[M]=X[j[M]];S=r(T,b.width,1)}}var E=function(R){var q;switch(R){case e.image_compression.FAST:q=11;break;case e.image_compression.MEDIUM:q=13;break;case e.image_compression.SLOW:q=14;break;default:q=12}return q}(g);return B===this.decode.FLATE_DECODE&&(Y="/Predictor "+E+" "),Y+="/Colors "+y+" /BitsPerComponent "+v+" /Columns "+b.width,(this.__addimage__.isArrayBuffer(p)||this.__addimage__.isArrayBufferView(p))&&(p=this.__addimage__.arrayBufferToBinaryString(p)),(S&&this.__addimage__.isArrayBuffer(S)||this.__addimage__.isArrayBufferView(S))&&(S=this.__addimage__.arrayBufferToBinaryString(S)),{alias:m,data:p,index:h,filter:B,decodeParameters:Y,transparency:w,palette:N,sMask:S,predictor:E,width:b.width,height:b.height,bitsPerComponent:v,colorSpace:x}}}})(qr.API),function(e){e.processGIF89A=function(t,r,n,s){var i=new nEe(t),o=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:o,height:l},f=new _4(100).encode(d,100);return e.processJPEG.call(this,f,r,n,s)},e.processGIF87A=e.processGIF89A}(qr.API),Uc.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Uc.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){ha.log("bit decode error:"+r)}},Uc.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[o+4*l]=c.blue,this.data[o+4*l+1]=c.green,this.data[o+4*l+2]=c.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Uc.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<e;s++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[o]=d.blue,this.data[o+1]=d.green,this.data[o+2]=d.red,this.data[o+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[o+4]=d.blue,this.data[o+4+1]=d.green,this.data[o+4+2]=d.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Uc.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Uc.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,c=(i>>10&t)/t*255|0,d=i>>15?255:0,f=n*this.width*4+4*s;this.data[f]=c,this.data[f+1]=l,this.data[f+2]=o,this.data[f+3]=d}this.pos+=e}},Uc.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,c=(o>>5&r)/r*255|0,d=(o>>11)/t*255|0,f=s*this.width*4+4*i;this.data[f]=d,this.data[f+1]=c,this.data[f+2]=l,this.data[f+3]=255}this.pos+=e}},Uc.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Uc.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=n,this.data[l+3]=o}},Uc.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,r,n,s){var i=new Uc(t,!1),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new _4(100).encode(c,100);return e.processJPEG.call(this,d,r,n,s)}}(qr.API),dD.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,r,n,s){var i=new dD(t),o=i.width,l=i.height,c={data:i.getData(),width:o,height:l},d=new _4(100).encode(c,100);return e.processJPEG.call(this,d,r,n,s)}}(qr.API),qr.API.processRGBA=function(e,t,r){for(var n=e.data,s=n.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var f=n[d],u=n[d+1],p=n[d+2],h=n[d+3];i[l++]=f,i[l++]=u,i[l++]=p,o[c++]=h}var m=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:m,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},qr.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Qp=qr.API,qy=Qp.getCharWidthsArray=function(e,t){var r,n,s=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=t.kerning?t.kerning:s.metadata.Unicode.kerning,f=d.fof?d.fof:1,u=t.doKerning!==!1,p=0,h=e.length,m=0,g=l[0]||c,x=[];for(r=0;r<h;r++)n=e.charCodeAt(r),typeof s.metadata.widthOfString=="function"?x.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(p=u&&aa(d[n])==="object"&&!isNaN(parseInt(d[n][m],10))?d[n][m]/f:0,x.push((l[n]||g)/c+p)),m=n;return x},iD=Qp.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return Qp.processArabic&&(e=Qp.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,s)/r:qy.apply(this,arguments).reduce(function(i,o){return i+o},0)},oD=function(e,t,r,n){for(var s=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;s.push(e.slice(0,i));var c=i;for(l=0;i!==o;)l+t[i]>n&&(s.push(e.slice(c,i)),l=0,c=i),l+=t[i],i++;return c!==i&&s.push(e.slice(c,i)),s},lD=function(e,t,r){r||(r={});var n,s,i,o,l,c,d,f=[],u=[f],p=r.textIndent||0,h=0,m=0,g=e.split(" "),x=qy.apply(this,[" ",r])[0];if(c=r.lineIndent===-1?g[0].length+2:r.lineIndent||0){var v=Array(c).join(" "),b=[];g.map(function(y){(y=y.split(/\s*\n/)).length>1?b=b.concat(y.map(function(N,S){return(S&&N.length?`
`:"")+N})):b.push(y[0])}),g=b,c=iD.apply(this,[v,r])}for(i=0,o=g.length;i<o;i++){var w=0;if(n=g[i],c&&n[0]==`
`&&(n=n.substr(1),w=1),p+h+(m=(s=qy.apply(this,[n,r])).reduce(function(y,N){return y+N},0))>t||w){if(m>t){for(l=oD.apply(this,[n,s,t-(p+h),t]),f.push(l.shift()),f=[l.pop()];l.length;)u.push([l.shift()]);m=s.slice(n.length-(f[0]?f[0].length:0)).reduce(function(y,N){return y+N},0)}else f=[n];u.push(f),p=m+c,h=x}else f.push(n),p+=h+m,h=x}return d=c?function(y,N){return(N?v:"")+y.join(" ")}:function(y){return y.join(" ")},u.map(d)},Qp.splitTextToSize=function(e,t,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var u=this.internal.getFont(f.fontName,f.fontStyle);return u.metadata.Unicode?{widths:u.metadata.Unicode.widths||{0:1},kerning:u.metadata.Unicode.kerning||{}}:{font:u.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var l,c,d=[];for(l=0,c=n.length;l<c;l++)d=d.concat(lD.apply(this,[n[l],o,i]));return d},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},n={},s=0;s<t.length;s++)r[t[s]]="0123456789abcdef"[s],n["0123456789abcdef"[s]]=t[s];var i=function(u){return"0x"+parseInt(u,10).toString(16)},o=e.__fontmetrics__.compress=function(u){var p,h,m,g,x=["{"];for(var v in u){if(p=u[v],isNaN(parseInt(v,10))?h="'"+v+"'":(v=parseInt(v,10),h=(h=i(v).slice(2)).slice(0,-1)+n[h.slice(-1)]),typeof p=="number")p<0?(m=i(p).slice(3),g="-"):(m=i(p).slice(2),g=""),m=g+m.slice(0,-1)+n[m.slice(-1)];else{if(aa(p)!=="object")throw new Error("Don't know what to do with value type "+aa(p)+".");m=o(p)}x.push(h+m)}return x.push("}"),x.join("")},l=e.__fontmetrics__.uncompress=function(u){if(typeof u!="string")throw new Error("Invalid argument passed to uncompress.");for(var p,h,m,g,x={},v=1,b=x,w=[],y="",N="",S=u.length-1,j=1;j<S;j+=1)(g=u[j])=="'"?p?(m=p.join(""),p=void 0):p=[]:p?p.push(g):g=="{"?(w.push([b,m]),b={},m=void 0):g=="}"?((h=w.pop())[0][h[1]]=b,m=void 0,b=h[0]):g=="-"?v=-1:m===void 0?r.hasOwnProperty(g)?(y+=r[g],m=parseInt(y,16)*v,v=1,y=""):y+=g:r.hasOwnProperty(g)?(N+=r[g],b[m]=parseInt(N,16)*v,v=1,m=void 0,N=""):N+=g;return x},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},f={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(u){var p=u.font,h=f.Unicode[p.postScriptName];h&&(p.metadata.Unicode={},p.metadata.Unicode.widths=h.widths,p.metadata.Unicode.kerning=h.kerning);var m=d.Unicode[p.postScriptName];m&&(p.metadata.Unicode.encoding=m,p.encoding=m.codePages[0])}])}(qr.API),function(e){var t=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};e.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(kv(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])}(qr),function(e){function t(){return(Hr.canvg?Promise.resolve(Hr.canvg):B2(()=>import("./index.es-2UW79MH0.js"),[])).catch(function(r){return Promise.reject(new Error("Could not load canvg: "+r))}).then(function(r){return r.default?r.default:r})}qr.API.addSvgAsImage=function(r,n,s,i,o,l,c,d){if(isNaN(n)||isNaN(s))throw ha.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(o))throw ha.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var f=document.createElement("canvas");f.width=i,f.height=o;var u=f.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,f.width,f.height);var p={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},h=this;return t().then(function(m){return m.fromString(u,r,p)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(m){return m.render(p)}).then(function(){h.addImage(f.toDataURL("image/jpeg",1),n,s,i,o,c,d)})}}(),qr.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(t,r);return this},qr.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),c=[],d=0,f=0,u=0;function p(m,g){var x,v=!1;for(x=0;x<m.length;x+=1)m[x]===g&&(v=!0);return v}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var h=l.length;for(u=0;u<h;u+=1)r[l[u]].value=r[l[u]].defaultValue,r[l[u]].explicitSet=!1}if(aa(e)==="object"){for(s in e)if(i=e[s],p(l,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&p(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(d=0;d<i.length;d+=1)if(n=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(f=0;f<i[d].length;f+=1)typeof i[d][f]!="number"&&(n=!1);n===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}r[s].value="["+c.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var m,g=[];for(m in r)r[m].explicitSet===!0&&(r[m].type==="name"?g.push("/"+m+" /"+r[m].value):g.push("/"+m+" "+r[m].value));g.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+g.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+o.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+l+c),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}}(qr.API),function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,c=o.metadata.Unicode.widths,d=["","0","00","000","0000"],f=[""],u=0,p=i.length;u<p;++u){if(l=o.metadata.characterToGlyph(i.charCodeAt(u)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(u),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return f.join("");l=l.toString(16),f.push(d[4-l.length],l)}return f.join("")},n=function(i){var o,l,c,d,f,u,p;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],u=0,p=(l=Object.keys(i).sort(function(h,m){return h-m})).length;u<p;u++)o=l[u],c.length>=100&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(d=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),c.push("<"+o+"><"+d+">"));return c.length&&(f+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),f+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var u=l.metadata.Unicode.widths,p=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),h="",m=0;m<p.length;m++)h+=String.fromCharCode(p[m]);var g=d();f({data:h,addLength1:!0,objectId:g}),c("endobj");var x=d();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:x}),c("endobj");var v=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+em(l.fontName)),c("/FontFile2 "+g+" 0 R"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var b=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+em(l.fontName)),c("/FontDescriptor "+v+" 0 R"),c("/W "+e.API.PDFObject.convert(u)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+x+" 0 R"),c("/BaseFont /"+em(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+b+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,c=o.out,d=o.newObject,f=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var u=l.metadata.rawData,p="",h=0;h<u.length;h++)p+=String.fromCharCode(u[h]);var m=d();f({data:p,addLength1:!0,objectId:m}),c("endobj");var g=d();f({data:n(l.metadata.toUnicode),addLength1:!0,objectId:g}),c("endobj");var x=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+m+" 0 R"),c("/Flags 96"),c("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+em(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var v=0;v<l.metadata.hmtx.widths.length;v++)l.metadata.hmtx.widths[v]=parseInt(l.metadata.hmtx.widths[v]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+g+" 0 R/BaseFont/"+em(l.fontName)+"/FontDescriptor "+x+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,l=i.text||"",c=i.x,d=i.y,f=i.options||{},u=i.mutex||{},p=u.pdfEscape,h=u.activeFontKey,m=u.fonts,g=h,x="",v=0,b="",w=m[g].encoding;if(m[g].encoding!=="Identity-H")return{text:l,x:c,y:d,options:f,mutex:u};for(b=l,g=h,Array.isArray(l)&&(b=l[0]),v=0;v<b.length;v+=1)m[g].metadata.hasOwnProperty("cmap")&&(o=m[g].metadata.cmap.unicode.codeMap[b[v].charCodeAt(0)]),o||b[v].charCodeAt(0)<256&&m[g].metadata.hasOwnProperty("Unicode")?x+=b[v]:x+="";var y="";return parseInt(g.slice(1))<14||w==="WinAnsiEncoding"?y=p(x,g).split("").map(function(N){return N.charCodeAt(0).toString(16)}).join(""):w==="Identity-H"&&(y=r(x,m[g])),u.isHex=!0,{text:y,x:c,y:d,options:f,mutex:u}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],c={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var d=0;for(d=0;d<o.length;d+=1)Array.isArray(o[d])&&o[d].length===3?l.push([s(Object.assign({},c,{text:o[d][0]})).text,o[d][1],o[d][2]]):l.push(s(Object.assign({},c,{text:o[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:o})).text}])}(qr),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(qr.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var s,i,o,l,c,d,f,u=t,p=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],m={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},g={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},x=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],v=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),b=!1,w=0;this.__bidiEngine__={};var y=function(A){var C=A.charCodeAt(),M=C>>8,F=g[M];return F!==void 0?u[256*F+(255&C)]:M===252||M===253?"AL":v.test(M)?"L":M===8?"R":"N"},N=function(A){for(var C,M=0;M<A.length;M++){if((C=y(A.charAt(M)))==="L")return!1;if(C==="R")return!0}return!1},S=function(A,C,M,F){var B,Y,V,J,U=C[F];switch(U){case"L":case"R":b=!1;break;case"N":case"AN":break;case"EN":b&&(U="AN");break;case"AL":b=!0,U="R";break;case"WS":U="N";break;case"CS":F<1||F+1>=C.length||(B=M[F-1])!=="EN"&&B!=="AN"||(Y=C[F+1])!=="EN"&&Y!=="AN"?U="N":b&&(Y="AN"),U=Y===B?Y:"N";break;case"ES":U=(B=F>0?M[F-1]:"B")==="EN"&&F+1<C.length&&C[F+1]==="EN"?"EN":"N";break;case"ET":if(F>0&&M[F-1]==="EN"){U="EN";break}if(b){U="N";break}for(V=F+1,J=C.length;V<J&&C[V]==="ET";)V++;U=V<J&&C[V]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(J=C.length,V=F+1;V<J&&C[V]==="NSM";)V++;if(V<J){var X=A[F],W=X>=1425&&X<=2303||X===64286;if(B=C[V],W&&(B==="R"||B==="AL")){U="R";break}}}U=F<1||(B=C[F-1])==="B"?"N":M[F-1];break;case"B":b=!1,s=!0,U=w;break;case"S":i=!0,U="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":b=!1;break;case"BN":U="N"}return U},j=function(A,C,M){var F=A.split("");return M&&_(F,M,{hiLevel:w}),F.reverse(),C&&C.reverse(),F.join("")},_=function(A,C,M){var F,B,Y,V,J,U=-1,X=A.length,W=0,E=[],R=w?h:p,q=[];for(b=!1,s=!1,i=!1,B=0;B<X;B++)q[B]=y(A[B]);for(Y=0;Y<X;Y++){if(J=W,E[Y]=S(A,q,E,Y),F=240&(W=R[J][m[E[Y]]]),W&=15,C[Y]=V=R[W][5],F>0)if(F===16){for(B=U;B<Y;B++)C[B]=1;U=-1}else U=-1;if(R[W][6])U===-1&&(U=Y);else if(U>-1){for(B=U;B<Y;B++)C[B]=V;U=-1}q[Y]==="B"&&(C[Y]=0),M.hiLevel|=V}i&&function(L,H,se){for(var ce=0;ce<se;ce++)if(L[ce]==="S"){H[ce]=w;for(var ae=ce-1;ae>=0&&L[ae]==="WS";ae--)H[ae]=w}}(q,C,X)},T=function(A,C,M,F,B){if(!(B.hiLevel<A)){if(A===1&&w===1&&!s)return C.reverse(),void(M&&M.reverse());for(var Y,V,J,U,X=C.length,W=0;W<X;){if(F[W]>=A){for(J=W+1;J<X&&F[J]>=A;)J++;for(U=W,V=J-1;U<V;U++,V--)Y=C[U],C[U]=C[V],C[V]=Y,M&&(Y=M[U],M[U]=M[V],M[V]=Y);W=J}W++}}},D=function(A,C,M){var F=A.split(""),B={hiLevel:w};return M||(M=[]),_(F,M,B),function(Y,V,J){if(J.hiLevel!==0&&f)for(var U,X=0;X<Y.length;X++)V[X]===1&&(U=x.indexOf(Y[X]))>=0&&(Y[X]=x[U+1])}(F,M,B),T(2,F,C,M,B),T(1,F,C,M,B),F.join("")};return this.__bidiEngine__.doBidiReorder=function(A,C,M){if(function(B,Y){if(Y)for(var V=0;V<B.length;V++)Y[V]=V;l===void 0&&(l=N(B)),d===void 0&&(d=N(B))}(A,C),o||!c||d)if(o&&c&&l^d)w=l?1:0,A=j(A,C,M);else if(!o&&c&&d)w=l?1:0,A=D(A,C,M),A=j(A,C);else if(!o||l||c||d){if(o&&!c&&l^d)A=j(A,C),l?(w=0,A=D(A,C,M)):(w=1,A=D(A,C,M),A=j(A,C));else if(o&&l&&!c&&d)w=1,A=D(A,C,M),A=j(A,C);else if(!o&&!c&&l^d){var F=f;l?(w=1,A=D(A,C,M),w=0,f=!1,A=D(A,C,M),f=F):(w=0,A=D(A,C,M),A=j(A,C),w=1,f=!1,A=D(A,C,M),f=F,A=j(A,C))}}else w=0,A=D(A,C,M);else w=l?1:0,A=D(A,C,M);return A},this.__bidiEngine__.setOptions=function(A){A&&(o=A.isInputVisual,c=A.isOutputVisual,l=A.isInputRtl,d=A.isOutputRtl,f=A.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var s=n.text,i=(n.x,n.y,n.options||{}),o=(n.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(o=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?o.push([r.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):o.push([r.doBidiReorder(s[l])]);n.text=o}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(qr),qr.API.TTFFont=function(){function e(t){var r;if(this.rawData=t,r=this.contents=new v0(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new vEe(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new aEe(this.contents),this.head=new iEe(this),this.name=new uEe(this),this.cmap=new zU(this),this.toUnicode={},this.hhea=new oEe(this),this.maxp=new fEe(this),this.hmtx=new hEe(this),this.post=new cEe(this),this.os2=new lEe(this),this.loca=new gEe(this),this.glyf=new pEe(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,c,d;for(d=[],o=0,l=(c=this.bbox).length;o<l;o++)t=c[o],d.push(Math.round(t*this.scaleFactor));return d}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var s,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e}();var hd,v0=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,s;for(s=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(t.charCodeAt(r)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,s,i,o,l,c;return t=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),c=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^c)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*o+256*l+c},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,s,i;for(i=[],n=0,s=t.length;n<s;n++)r=t[n],i.push(this.writeByte(r));return i},e}(),aEe=function(){var e;function t(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,s,i,o,l,c,d,f,u,p,h,m,g;for(g in h=Object.keys(r).length,c=Math.log(2),u=16*Math.floor(Math.log(h)/c),o=Math.floor(u/c),f=16*h-u,(s=new v0).writeInt(this.scalarType),s.writeShort(h),s.writeShort(u),s.writeShort(o),s.writeShort(f),i=16*h,d=s.pos+i,l=null,m=[],r)for(p=r[g],s.writeString(g),s.writeInt(e(p)),s.writeInt(d),s.writeInt(p.length),m=m.concat(p),g==="head"&&(l=d),d+=p.length;d%4;)m.push(0),d++;return s.write(m),n=2981146554-e(s.data),s.pos=l+8,s.writeUInt32(n),s.data},e=function(r){var n,s,i,o;for(r=qU.call(r);r.length%4;)r.push(0);for(i=new v0(r),s=0,n=0,o=r.length;n<o;n=n+=4)s+=i.readUInt32();return 4294967295&s},t}(),sEe={}.hasOwnProperty,tu=function(e,t){for(var r in t)sEe.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};hd=function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var iEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var n;return(n=new v0).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(r),n.writeShort(this.glyphDataFormat),n.data},t}(),uD=function(){function e(t,r){var n,s,i,o,l,c,d,f,u,p,h,m,g,x,v,b,w;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=t.readByte();break;case 4:for(h=t.readUInt16(),p=h/2,t.pos+=6,i=function(){var y,N;for(N=[],c=y=0;0<=p?y<p:y>p;c=0<=p?++y:--y)N.push(t.readUInt16());return N}(),t.pos+=2,g=function(){var y,N;for(N=[],c=y=0;0<=p?y<p:y>p;c=0<=p?++y:--y)N.push(t.readUInt16());return N}(),d=function(){var y,N;for(N=[],c=y=0;0<=p?y<p:y>p;c=0<=p?++y:--y)N.push(t.readUInt16());return N}(),f=function(){var y,N;for(N=[],c=y=0;0<=p?y<p:y>p;c=0<=p?++y:--y)N.push(t.readUInt16());return N}(),s=(this.length-t.pos+this.offset)/2,l=function(){var y,N;for(N=[],c=y=0;0<=s?y<s:y>s;c=0<=s?++y:--y)N.push(t.readUInt16());return N}(),c=v=0,w=i.length;v<w;c=++v)for(x=i[c],n=b=m=g[c];m<=x?b<=x:b>=x;n=m<=x?++b:--b)f[c]===0?o=n+d[c]:(o=l[f[c]/2+(n-m)-(p-c)]||0)!==0&&(o+=d[c]),this.codeMap[n]=65535&o}t.pos=u}return e.encode=function(t,r){var n,s,i,o,l,c,d,f,u,p,h,m,g,x,v,b,w,y,N,S,j,_,T,D,A,C,M,F,B,Y,V,J,U,X,W,E,R,q,L,H,se,ce,ae,Z,ve,ne;switch(F=new v0,o=Object.keys(t).sort(function(He,Xe){return He-Xe}),r){case"macroman":for(g=0,x=function(){var He=[];for(m=0;m<256;++m)He.push(0);return He}(),b={0:0},i={},B=0,U=o.length;B<U;B++)b[ae=t[s=o[B]]]==null&&(b[ae]=++g),i[s]={old:t[s],new:b[t[s]]},x[s]=b[t[s]];return F.writeUInt16(1),F.writeUInt16(0),F.writeUInt32(12),F.writeUInt16(0),F.writeUInt16(262),F.writeUInt16(0),F.write(x),{charMap:i,subtable:F.data,maxGlyphID:g+1};case"unicode":for(C=[],u=[],w=0,b={},n={},v=d=null,Y=0,X=o.length;Y<X;Y++)b[N=t[s=o[Y]]]==null&&(b[N]=++w),n[s]={old:N,new:b[N]},l=b[N]-s,v!=null&&l===d||(v&&u.push(v),C.push(s),d=l),v=s;for(v&&u.push(v),u.push(65535),C.push(65535),D=2*(T=C.length),_=2*Math.pow(Math.log(T)/Math.LN2,2),p=Math.log(_/2)/Math.LN2,j=2*T-_,c=[],S=[],h=[],m=V=0,W=C.length;V<W;m=++V){if(A=C[m],f=u[m],A===65535){c.push(0),S.push(0);break}if(A-(M=n[A].new)>=32768)for(c.push(0),S.push(2*(h.length+T-m)),s=J=A;A<=f?J<=f:J>=f;s=A<=f?++J:--J)h.push(n[s].new);else c.push(M-A),S.push(0)}for(F.writeUInt16(3),F.writeUInt16(1),F.writeUInt32(12),F.writeUInt16(4),F.writeUInt16(16+8*T+2*h.length),F.writeUInt16(0),F.writeUInt16(D),F.writeUInt16(_),F.writeUInt16(p),F.writeUInt16(j),se=0,E=u.length;se<E;se++)s=u[se],F.writeUInt16(s);for(F.writeUInt16(0),ce=0,R=C.length;ce<R;ce++)s=C[ce],F.writeUInt16(s);for(Z=0,q=c.length;Z<q;Z++)l=c[Z],F.writeUInt16(l);for(ve=0,L=S.length;ve<L;ve++)y=S[ve],F.writeUInt16(y);for(ne=0,H=h.length;ne<H;ne++)g=h[ne],F.writeUInt16(g);return{charMap:n,subtable:F.data,maxGlyphID:w+1}}},e}(),zU=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="cmap",t.prototype.parse=function(r){var n,s,i;for(r.pos=this.offset,this.version=r.readUInt16(),i=r.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)n=new uD(r,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(r,n){var s,i;return n==null&&(n="macroman"),s=uD.encode(r,n),(i=new v0).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},t}(),oEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t}(),lEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=function(){var n,s;for(s=[],n=0;n<10;++n)s.push(r.readByte());return s}(),this.charRange=function(){var n,s;for(s=[],n=0;n<4;++n)s.push(r.readInt());return s}(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=function(){var n,s;for(s=[],n=0;n<2;n=++n)s.push(r.readInt());return s}(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t}(),cEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="post",t.prototype.parse=function(r){var n,s,i;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var o;for(s=r.readUInt16(),this.glyphNameIndex=[],o=0;0<=s?o<s:o>s;o=0<=s?++o:--o)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],i=[];r.pos<this.offset+this.length;)n=r.readByte(),i.push(this.names.push(r.readString(n)));return i;case 151552:return s=r.readUInt16(),this.offsets=r.read(s);case 196608:break;case 262144:return this.map=(function(){var l,c,d;for(d=[],o=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;o=0<=c?++l:--l)d.push(r.readUInt32());return d}).call(this)}},t}(),dEe=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},uEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="name",t.prototype.parse=function(r){var n,s,i,o,l,c,d,f,u,p,h;for(r.pos=this.offset,r.readShort(),n=r.readShort(),c=r.readShort(),s=[],o=0;0<=n?o<n:o>n;o=0<=n?++o:--o)s.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+c+r.readShort()});for(d={},o=u=0,p=s.length;u<p;o=++u)i=s[o],r.pos=i.offset,f=r.readString(i.length),l=new dEe(f,i),d[h=i.nameID]==null&&(d[h]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},t}(),fEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t}(),hEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="hmtx",t.prototype.parse=function(r){var n,s,i,o,l,c,d;for(r.pos=this.offset,this.metrics=[],n=0,c=this.file.hhea.numberOfMetrics;0<=c?n<c:n>c;n=0<=c?++n:--n)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var f,u;for(u=[],n=f=0;0<=i?f<i:f>i;n=0<=i?++f:--f)u.push(r.readInt16());return u}(),this.widths=(function(){var f,u,p,h;for(h=[],f=0,u=(p=this.metrics).length;f<u;f++)o=p[f],h.push(o.advance);return h}).call(this),s=this.widths[this.widths.length-1],d=[],n=l=0;0<=i?l<i:l>i;n=0<=i?++l:--l)d.push(this.widths.push(s));return d},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t}(),qU=[].slice,pEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var n,s,i,o,l,c,d,f,u,p;return r in this.cache?this.cache[r]:(o=this.file.loca,n=this.file.contents,s=o.indexOf(r),(i=o.lengthOf(r))===0?this.cache[r]=null:(n.pos=this.offset+s,l=(c=new v0(n.read(i))).readShort(),f=c.readShort(),p=c.readShort(),d=c.readShort(),u=c.readShort(),this.cache[r]=l===-1?new xEe(c,f,p,d,u):new mEe(c,l,f,p,d,u),this.cache[r]))},t.prototype.encode=function(r,n,s){var i,o,l,c,d;for(l=[],o=[],c=0,d=n.length;c<d;c++)i=r[n[c]],o.push(l.length),i&&(l=l.concat(i.encode(s)));return o.push(l.length),{table:l,offsets:o}},t}(),mEe=function(){function e(t,r,n,s,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),xEe=function(){function e(t,r,n,s,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new v0(qU.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e}(),gEe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return tu(t,hd),t.prototype.tag="loca",t.prototype.parse=function(r){var n,s;return r.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=2)o.push(2*r.readUInt16());return o}).call(this):(function(){var i,o;for(o=[],s=0,i=this.length;s<i;s+=4)o.push(r.readUInt32());return o}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,n){for(var s=new Uint32Array(this.offsets.length),i=0,o=0,l=0;l<s.length;++l)if(s[l]=i,o<n.length&&n[o]==l){++o,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var f=new Array(4*s.length),u=0;u<s.length;++u)f[4*u+3]=255&s[u],f[4*u+2]=(65280&s[u])>>8,f[4*u+1]=(16711680&s[u])>>16,f[4*u]=(4278190080&s[u])>>24;return f},t}(),vEe=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=s[n];return t},e.prototype.glyphsFor=function(t){var r,n,s,i,o,l,c;for(s={},o=0,l=t.length;o<l;o++)s[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in c=this.glyphsFor(r))n=c[i],s[i]=n;return s},e.prototype.encode=function(t,r){var n,s,i,o,l,c,d,f,u,p,h,m,g,x,v;for(s in n=zU.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),h={0:0},v=n.charMap)h[(c=v[s]).old]=c.new;for(m in p=n.maxGlyphID,o)m in h||(h[m]=p++);return f=function(b){var w,y;for(w in y={},b)y[b[w]]=w;return y}(h),u=Object.keys(f).sort(function(b,w){return b-w}),g=function(){var b,w,y;for(y=[],b=0,w=u.length;b<w;b++)l=u[b],y.push(f[l]);return y}(),i=this.font.glyf.encode(o,g,h),d=this.font.loca.encode(i.offsets,g),x={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(x["OS/2"]=this.font.os2.raw()),this.font.directory.encode(x)},e}();qr.API.PDFObject=function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,s,i,o;if(Array.isArray(r))return"["+function(){var l,c,d;for(d=[],l=0,c=r.length;l<c;l++)n=r[l],d.push(t.convert(n));return d}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t}();const bEe=({onCreateInvoice:e,currentUser:t})=>{var Xe,ie,Q,Ne;const{showSuccess:r,showError:n,showInfo:s}=hn(),[i,o]=P.useState([]),[l,c]=P.useState([]),[d,f]=P.useState(null),[u,p]=P.useState(!0),[h,m]=P.useState(!1),[g,x]=P.useState(!1),[v,b]=P.useState([]),[w,y]=P.useState(!1),[N,S]=P.useState(!1),[j,_]=P.useState(!1),[T,D]=P.useState(!1),[A,C]=P.useState([]),[M,F]=P.useState(null),[B,Y]=P.useState({description:"",quantity:1,rate:0}),[V,J]=P.useState(!1),[U,X]=P.useState(!1),[W,E]=P.useState(Us),R=P.useCallback(async()=>{p(!0);try{const de=await PR(),ye=(de==null?void 0:de.data)||de||[];o(Array.isArray(ye)?ye:[]);try{const xe=await jc();c((xe==null?void 0:xe.data)||xe||[])}catch{c([])}}catch(de){n(de.message||"Failed to load invoices")}finally{p(!1)}},[t,n]);P.useEffect(()=>{R()},[R]),P.useEffect(()=>{const de=()=>R();return window.addEventListener("refresh-invoices",de),()=>window.removeEventListener("refresh-invoices",de)},[R]);const q=de=>l.find(ye=>ye.id===de),L=de=>{switch(de){case"Paid":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Overdue":return"bg-red-50 text-red-600 border-red-100";case"Sent":return"bg-blue-50 text-blue-600 border-blue-100";default:return"bg-slate-50 text-slate-600 border-slate-100"}},H={totalOutstanding:i.filter(de=>de.status!=="Paid").reduce((de,ye)=>de+(ye.amount||0),0),awaitingPayment:i.filter(de=>de.status!=="Paid").reduce((de,ye)=>de+(ye.amount||0),0),paidThisMonth:i.filter(de=>de.status==="Paid").reduce((de,ye)=>de+(ye.amount||0),0)},se=()=>{v.length===i.length?b([]):b(i.map(de=>de.id))},ce=async()=>{const de=[...v];if(de.length!==0){y(!0),s(`Processing payment status for ${de.length} items...`);try{await Promise.all(de.map(ye=>jy(ye,{status:"Paid"}))),o(ye=>ye.map(xe=>de.includes(xe.id)?{...xe,status:"Paid"}:xe)),r(`Successfully marked ${de.length} invoices as paid`),b([]),R()}catch{n("Bulk update failed. Some items may not have been updated.")}finally{y(!1)}}},ae=async()=>{[...v].length!==0&&_(!0)},Z=async()=>{const de=[...v];if(de.length!==0){y(!0),_(!1),s(`Executing batch deletion for ${de.length} registry entries...`);try{await Promise.all(de.map(ye=>nI(ye))),o(ye=>ye.filter(xe=>!de.includes(xe.id))),r(`Successfully removed ${de.length} invoices from registry`),b([]),R()}catch{n("Bulk deletion encountered an error. Refresh registry to verify state.")}finally{y(!1)}}};P.useEffect(()=>{if(d){const de=d.lineItems||d.items||[];C(de),D(!1),F(null),Y({description:"",quantity:1,rate:0}),E(d.currency||Us),X(!1)}},[d]);const ve=async()=>{if(d){m(!0);try{await jy(d.id,{items:A,lineItems:A}),o(de=>de.map(ye=>ye.id===d.id?{...ye,items:A,lineItems:A}:ye)),f({...d,items:A,lineItems:A}),D(!1),r("Service breakdown saved successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(de){console.error("Failed to save breakdown:",de),n(de.message||"Failed to save breakdown")}finally{m(!1)}}},ne=async()=>{if(d){m(!0);try{await jy(d.id,{status:"Paid"}),o(de=>de.map(ye=>ye.id===d.id?{...ye,status:"Paid"}:ye)),f({...d,status:"Paid"}),r("Invoice marked as paid!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(de){console.error("Failed to update invoice:",de),n(de.message||"Failed to update invoice")}finally{m(!1)}}},He=async()=>{if(d){x(!0);try{await nI(d.id),o(de=>de.filter(ye=>ye.id!==d.id)),f(null),S(!1),r("Invoice deleted successfully!"),window.dispatchEvent(new Event("refresh-invoices"))}catch(de){console.error("Failed to delete invoice:",de),n(de.message||"Failed to delete invoice")}finally{x(!1)}}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10 relative h-full",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Billing & Invoicing"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Oversee payments and logistics milestone billing"})]}),a.jsxs("button",{onClick:e,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx($r,{className:"w-4 h-4"})," Create Invoice"]})]}),a.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[{label:"Total Outstanding",value:`$${H.totalOutstanding.toLocaleString()}`,icon:a.jsx(Uu,{}),color:"text-indigo-600",bg:"bg-indigo-50"},{label:"Awaiting Payment",value:`$${H.awaitingPayment.toLocaleString()}`,icon:a.jsx(Qa,{}),color:"text-amber-600",bg:"bg-amber-50"},{label:"Paid This Month",value:`$${H.paidThisMonth.toLocaleString()}`,icon:a.jsx(Qr,{}),color:"text-emerald-600",bg:"bg-emerald-50"}].map((de,ye)=>a.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl ${de.bg} ${de.color} flex items-center justify-center`,children:st.cloneElement(de.icon,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:de.label}),a.jsx("h3",{className:"text-xl font-black text-slate-900",children:de.value})]})]},ye))}),a.jsx("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-100 bg-slate-50/50",children:[a.jsx("th",{className:"px-6 py-4 w-10",children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:i.length>0&&v.length===i.length,onChange:se})}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Invoice"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Due Date"}),a.jsx("th",{className:"px-6 py-4 text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),a.jsx("th",{className:"px-6 py-4 text-right"})]})}),a.jsx("tbody",{className:"divide-y divide-slate-50",children:u?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10 text-center",children:a.jsx(ct,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})})}):i.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:7,className:"py-10 text-center text-slate-400 text-sm font-medium",children:"No records found in digital registry."})}):i.map(de=>{var xe,we,Ae;const ye=v.includes(de.id);return a.jsxs("tr",{onClick:()=>f(de),className:`group transition-colors cursor-pointer ${ye?"bg-indigo-50/60":"hover:bg-slate-50"}`,children:[a.jsx("td",{className:"px-6 py-4",onClick:Ue=>Ue.stopPropagation(),children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4",checked:ye,onChange:()=>b(Ue=>ye?Ue.filter(me=>me!==de.id):[...Ue,de.id])})}),a.jsxs("td",{className:"px-6 py-4",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:de.number}),a.jsxs("p",{className:"text-[10px] font-bold text-slate-400 uppercase",children:["REF: ",de.id.substring(0,8)]})]}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hs,{src:(xe=q(de.companyId))==null?void 0:xe.logo,fallbackText:(we=q(de.companyId))==null?void 0:we.name,className:"w-6 h-6",isAvatar:!1}),a.jsx("span",{className:"text-sm font-semibold text-slate-700",children:((Ae=q(de.companyId))==null?void 0:Ae.name)||"Unknown Partner"})]})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:"text-sm font-bold text-slate-900",children:ku(de.amount,de.currency)})}),a.jsx("td",{className:"px-6 py-4 text-xs font-semibold text-slate-500",children:de.dueDate}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase border ${L(de.status)}`,children:de.status})}),a.jsx("td",{className:"px-6 py-4 text-right",children:a.jsx(ra,{className:"w-5 h-5 text-slate-300 group-hover:text-indigo-600"})})]},de.id)})})]})})}),v.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:v.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:de=>{de.stopPropagation(),ce()},disabled:w,className:"px-5 py-2 bg-indigo-600 hover:bg-indigo-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[w?a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(Qr,{className:"w-3.5 h-3.5"}),"Mark Paid"]}),a.jsxs("button",{onClick:de=>{de.stopPropagation(),ae()},disabled:w,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50",children:[w?a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>b([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(zt,{className:"w-5 h-5"})})]})]})}),d&&a.jsxs("div",{className:"fixed inset-0 z-[70] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/40 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>f(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center text-emerald-600",children:a.jsx(Dn,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-bold text-slate-900",children:d.number}),a.jsx("p",{className:"text-xs text-slate-500 uppercase font-bold tracking-widest",children:"Billing Statement"})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Status"}),a.jsx("span",{className:`inline-block mt-1 px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest border ${L(d.status)}`,children:d.status})]}),a.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-white rounded-full text-slate-400 shadow-sm border border-transparent hover:border-slate-200 transition-all",children:a.jsx(zt,{className:"w-5 h-5"})})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 space-y-10",children:[a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Client"}),a.jsxs("div",{className:"flex items-center gap-3 bg-slate-50 p-3 rounded-2xl border border-slate-100",children:[a.jsx(hs,{src:(Xe=q(d.companyId))==null?void 0:Xe.logo,fallbackText:((ie=q(d.companyId))==null?void 0:ie.name)||"C",className:"w-10 h-10 border border-slate-200",isAvatar:!1}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((Q=q(d.companyId))==null?void 0:Q.name)||"Unknown Company"}),a.jsx("p",{className:"text-xs text-slate-500",children:((Ne=q(d.companyId))==null?void 0:Ne.website)||""})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Amount Due"}),U?a.jsx("button",{onClick:async()=>{m(!0);try{await jy(d.id,{currency:W}),o(de=>de.map(ye=>ye.id===d.id?{...ye,currency:W}:ye)),f({...d,currency:W}),X(!1),r("Currency updated successfully!")}catch(de){n(de.message||"Failed to update currency")}finally{m(!1)}},disabled:h,className:"px-2 py-1 text-[9px] font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all disabled:opacity-50",children:a.jsx(qs,{className:"w-3 h-3"})}):a.jsx("button",{onClick:()=>X(!0),className:"px-2 py-1 text-[9px] font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all",children:a.jsx(Eo,{className:"w-3 h-3"})})]}),U?a.jsx("select",{value:W,onChange:de=>E(de.target.value),className:"w-full px-4 py-2 rounded-xl text-sm outline-none font-bold appearance-none bg-white border-2 border-indigo-200 focus:ring-4 focus:ring-indigo-100 text-indigo-600",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%234f46e5" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Sx.map(de=>a.jsxs("option",{value:de.code,children:[de.code," (",de.symbol,")"]},de.code))}):a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:ku(d.amount,d.currency)})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:d.dueDate})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Registry Narrative"}),a.jsx("p",{className:"text-sm text-slate-700 bg-slate-50 p-6 rounded-3xl border border-slate-100 leading-relaxed italic",children:d.description||"No additional strategic description provided for this statement."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Service Breakdown"}),T?a.jsxs("button",{onClick:ve,disabled:h,className:"px-3 py-1.5 text-xs font-bold text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all flex items-center gap-1 disabled:opacity-50",children:[a.jsx(qs,{className:"w-3 h-3"})," ",h?"Saving...":"Save"]}):a.jsxs("button",{onClick:()=>D(!0),className:"px-3 py-1.5 text-xs font-bold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-all flex items-center gap-1",children:[a.jsx(Eo,{className:"w-3 h-3"})," Edit"]})]}),a.jsxs("div",{className:"divide-y divide-slate-100 border border-slate-100 rounded-3xl overflow-hidden bg-white shadow-sm",children:[A.map(de=>a.jsxs("div",{className:"p-5 flex justify-between items-center group",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800",children:de.description}),a.jsxs("p",{className:"text-[10px] text-slate-400 font-black uppercase tracking-widest mt-1",children:["Qty: ",de.quantity," @ ",vu(d.currency),de.rate.toLocaleString("en-US",{minimumFractionDigits:2})]})]}),a.jsx("p",{className:"text-sm font-black text-slate-900",children:ku(de.amount,d.currency)})]},de.id)),A.length===0&&a.jsx("div",{className:"p-8 text-center text-slate-400 italic text-xs",children:"No granular items archived."})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50/50 flex gap-3",children:[d.status!=="Paid"&&a.jsxs("button",{onClick:ne,disabled:h,className:"flex-1 py-4 bg-indigo-600 text-white text-sm font-black uppercase tracking-[0.1em] rounded-2xl hover:bg-indigo-700 transition-all shadow-xl flex items-center justify-center gap-2",children:[h?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(Qr,{className:"w-4 h-4"})," Confirm Receipt"]}),a.jsx("button",{onClick:()=>S(!0),className:"px-6 py-4 border border-slate-200 bg-white text-red-500 hover:bg-red-50 rounded-2xl transition-all shadow-sm active:scale-95",children:a.jsx(br,{className:"w-5 h-5"})})]})]})]}),N&&d&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>S(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[a.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:a.jsx(br,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:"Archive Invoice?"}),a.jsx("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:"This will permanently remove the billing statement from the digital registry. This action is terminal."}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>S(!1),disabled:g,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),a.jsx("button",{onClick:He,disabled:g,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Terminal Delete"})]})]})})]}),j&&v.length>0&&a.jsxs("div",{className:"fixed inset-0 z-[80] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>_(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[36px] w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200 p-10",children:[a.jsx("div",{className:"w-16 h-16 bg-red-50 rounded-2xl flex items-center justify-center text-red-500 mb-6",children:a.jsx(br,{className:"w-8 h-8"})}),a.jsxs("h3",{className:"text-2xl font-black text-slate-900 mb-2",children:["Delete ",v.length," Invoice",v.length>1?"s":"","?"]}),a.jsxs("p",{className:"text-sm text-slate-500 mb-10 leading-relaxed font-medium",children:["This will permanently remove ",v.length," invoice",v.length>1?"s":""," from the digital registry. This action is terminal and cannot be undone."]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("button",{onClick:()=>_(!1),disabled:w,className:"flex-1 py-4 text-sm font-black text-slate-500 bg-slate-50 rounded-2xl uppercase tracking-widest disabled:opacity-50 disabled:cursor-not-allowed",children:"Abort"}),a.jsx("button",{onClick:Z,disabled:w,className:"flex-1 py-4 bg-red-600 text-white text-sm font-black rounded-2xl uppercase tracking-widest shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:w?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${v.length} Invoice${v.length>1?"s":""}`})]})]})})]})]})},yEe=()=>a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Team Management"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Control workspace access and staff roles"})]}),a.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[a.jsx(hc,{className:"w-4 h-4"})," Invite Member"]})]}),a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsxs("div",{className:"relative w-64",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Find teammate...",className:"w-full pl-10 pr-4 py-2 bg-white border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-500/20"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("span",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Active Seats: "}),a.jsx("span",{className:"text-[10px] font-black text-indigo-600 uppercase tracking-widest",children:"12 / 20"})]})]}),a.jsx("div",{className:"divide-y divide-slate-100",children:o2.map(e=>a.jsxs("div",{className:"p-6 flex items-center justify-between group hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsxs("div",{className:"relative",children:[a.jsx(hs,{src:e.avatar,alt:e.name||"",fallbackText:e.name||e.email||"U",className:"w-12 h-12 border-2 border-white shadow-sm object-cover",isAvatar:!0}),e.active&&a.jsx("div",{className:"absolute -bottom-1 -right-1 w-3.5 h-3.5 bg-emerald-500 rounded-full border-2 border-white shadow-sm"})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[e.name,e.role==="Admin"&&a.jsx(P5,{className:"w-4 h-4 text-indigo-600"})]}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium flex items-center gap-1.5 mt-0.5",children:[a.jsx(ba,{className:"w-3 h-3 text-slate-400"})," ",e.email]})]})]}),a.jsxs("div",{className:"flex items-center gap-12",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Permission Tier"}),a.jsx("p",{className:`text-xs font-bold mt-0.5 ${e.role==="Admin"?"text-indigo-600":"text-slate-700"}`,children:e.role})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{className:"px-4 py-2 text-xs font-bold text-slate-600 bg-white border border-slate-200 rounded-xl hover:bg-slate-50 transition-all shadow-sm",children:"Manage"}),a.jsx("button",{className:"p-2 text-slate-300 hover:text-slate-600 transition-colors",children:a.jsx(F_,{className:"w-5 h-5"})})]})]})]},e.id))})]})]}),wEe=({imageSrc:e,onCrop:t,onCancel:r,aspectRatio:n=1,circularCrop:s=!0})=>{const[i,o]=P.useState({x:0,y:0}),[l,c]=P.useState(.5),[d,f]=P.useState(!1),[u,p]=P.useState({x:0,y:0}),[h,m]=P.useState(!1),[g,x]=P.useState(!1),v=P.useRef(null),b=P.useRef(null),w=P.useRef(300),y=P.useCallback(()=>{if(!b.current||!v.current)return null;const D=b.current.getBoundingClientRect(),A=w.current,C=D.width/2,M=D.height/2,F=v.current.getBoundingClientRect(),B=F.left-D.left,Y=F.top-D.top,V=(C-A/2-B-i.x)/l,J=(M-A/2-Y-i.y)/l,U=A/l;return{x:Math.max(0,V*(v.current.naturalWidth/v.current.width)),y:Math.max(0,J*(v.current.naturalHeight/v.current.height)),width:Math.min(v.current.naturalWidth,U*(v.current.naturalWidth/v.current.width)),height:Math.min(v.current.naturalHeight,U*(v.current.naturalHeight/v.current.height))}},[i,l]),N=P.useCallback(async()=>{if(v.current){m(!0);try{const T=y();if(!T)throw new Error("Failed to calculate crop area");const D=v.current,A=document.createElement("canvas"),C=A.getContext("2d");if(!C)throw new Error("Failed to create canvas context");const M=Math.min(T.width,T.height);A.width=M,A.height=M,s&&(C.beginPath(),C.arc(M/2,M/2,M/2,0,2*Math.PI),C.clip()),C.drawImage(D,T.x,T.y,T.width,T.height,0,0,M,M);const F=A.toDataURL("image/jpeg",.9);t(F)}catch(T){console.error("Error cropping image:",T)}finally{m(!1)}}},[y,s,t]),S=P.useCallback(T=>{T.preventDefault(),f(!0),p({x:T.clientX-i.x,y:T.clientY-i.y})},[i]),j=P.useCallback(T=>{if(!d||!b.current||!v.current)return;const D=b.current,A=v.current,C=D.getBoundingClientRect(),M=A.getBoundingClientRect(),F=T.clientX-u.x,B=T.clientY-u.y,Y=M.width*l,V=M.height*l,J=Math.max(0,(Y-C.width)/2),U=Math.max(0,(V-C.height)/2);l<=1?o({x:F,y:B}):o({x:Math.max(-J,Math.min(J,F)),y:Math.max(-U,Math.min(U,B))})},[d,u,l]),_=P.useCallback(()=>{f(!1)},[]);return P.useEffect(()=>{if(d)return document.addEventListener("mousemove",j),document.addEventListener("mouseup",_),()=>{document.removeEventListener("mousemove",j),document.removeEventListener("mouseup",_)}},[d,j,_]),P.useEffect(()=>{if(b.current){const D=b.current.getBoundingClientRect();w.current=Math.min(D.width*.8,D.height*.8,300)}},[]),a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/80 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl overflow-hidden",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Crop Your Photo"}),a.jsx("button",{onClick:r,disabled:h,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{ref:b,className:"relative w-full h-[400px] bg-slate-100 rounded-xl overflow-hidden",style:{cursor:d?"grabbing":"grab"},children:[a.jsx("img",{ref:v,src:e,alt:"Crop",className:"absolute top-1/2 left-1/2 select-none",style:{transform:`translate(-50%, -50%) scale(${l}) translate(${i.x/l}px, ${i.y/l}px)`,maxWidth:"none",maxHeight:"none",userSelect:"none",pointerEvents:"none"},onLoad:()=>{if(x(!0),b.current&&v.current){const D=b.current.getBoundingClientRect();w.current=Math.min(D.width*.8,D.height*.8,300)}},draggable:!1}),a.jsxs("div",{className:"absolute inset-0 pointer-events-none",onMouseDown:S,style:{pointerEvents:h?"none":"auto",cursor:d?"grabbing":"grab"},children:[a.jsx("div",{className:`absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 border-2 border-white shadow-lg ${s?"rounded-full":"rounded-lg"}`,style:{width:`${w.current}px`,height:`${w.current}px`,aspectRatio:n.toString()}}),a.jsx("div",{className:"absolute inset-0 bg-slate-900/50",style:{clipPath:s?`circle(${w.current/2}px at 50% 50%)`:`inset(calc(50% - ${w.current/2}px))`}})]})]}),a.jsxs("div",{className:"mt-6",children:[a.jsxs("label",{className:"block text-sm font-bold text-slate-700 mb-2",children:["Zoom: ",Math.round(l*100),"%"]}),a.jsx("input",{type:"range",min:"0.3",max:"3",step:"0.05",value:l,onChange:T=>{const D=parseFloat(T.target.value);c(D),D<1&&o({x:0,y:0})},className:"w-full h-2 bg-slate-200 rounded-lg appearance-none cursor-pointer",disabled:h}),a.jsxs("div",{className:"flex justify-between text-xs text-slate-400 mt-1",children:[a.jsx("span",{children:"30%"}),a.jsx("span",{children:"300%"})]})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-end gap-3",children:[a.jsx("button",{onClick:r,disabled:h,className:"px-6 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:N,disabled:h||!g,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Yd,{className:"w-4 h-4"}),"Apply Crop"]})})]})]})})},NEe=({currentUser:e,showSuccess:t,showError:r})=>{const[n,s]=P.useState({retentionYears:7,coldStorageYears:1,archiveEnabled:!0,autoCleanupEnabled:!0}),[i,o]=P.useState(null),[l,c]=P.useState(!1),[d,f]=P.useState(!1),[u,p]=P.useState(!1),[h,m]=P.useState(!1),[g,x]=P.useState(!1),[v,b]=P.useState(!1);P.useEffect(()=>{w(),y()},[]);const w=async()=>{c(!0);try{const T=await Ove("default");T.success&&T.data&&s(T.data)}catch{r("Failed to load retention policy")}finally{c(!1)}},y=async()=>{p(!0);try{const T=await Ive("default");T.success&&T.data&&o(T.data)}catch(T){console.error("Failed to load retention stats:",T)}finally{p(!1)}},N=async()=>{f(!0);try{const T=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;(await Pve("default",{...n,updatedBy:T})).success&&(t("Retention policy updated successfully"),await y())}catch(T){r(T.message||"Failed to update retention policy")}finally{f(!1)}},S=async()=>{m(!0);try{const T=await Dve("default",50);T.success&&(t(`Archive completed: ${T.data.archived} emails archived`),await y())}catch(T){r(T.message||"Failed to trigger archive")}finally{m(!1)}},j=async()=>{x(!0);try{const T=await Lve("default",50);T.success&&(t(`Cleanup completed: ${T.data.deleted} emails deleted`),await y())}catch(T){r(T.message||"Failed to trigger cleanup")}finally{x(!1)}},_=async()=>{b(!0);try{const T=await Fve("default",{format:"csv"});if(typeof T=="string"){const D=new Blob([T],{type:"text/csv"}),A=window.URL.createObjectURL(D),C=document.createElement("a");C.href=A,C.download=`archived-emails-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(C),C.click(),document.body.removeChild(C),window.URL.revokeObjectURL(A),t("Archived emails exported successfully")}else r("Unexpected export format")}catch(T){r(T.message||"Failed to export archived emails")}finally{b(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(qF,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Data Retention Policy"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Configure how long emails are retained and archived"})]})]}),l?a.jsx("div",{className:"p-8 text-center",children:a.jsx(ct,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Retention Period (Years)"}),a.jsx("input",{type:"number",min:"1",max:"20",value:n.retentionYears,onChange:T=>s({...n,retentionYears:parseInt(T.target.value)||7}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be permanently deleted"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Cold Storage Threshold (Years)"}),a.jsx("input",{type:"number",min:"0",max:n.retentionYears,value:n.coldStorageYears,onChange:T=>s({...n,coldStorageYears:parseInt(T.target.value)||1}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Emails older than this will be moved to cold storage"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Archiving"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically move emails to cold storage"})]}),a.jsx("button",{onClick:()=>s({...n,archiveEnabled:!n.archiveEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${n.archiveEnabled?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${n.archiveEnabled?"translate-x-6":"translate-x-0"}`})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Enable Automatic Cleanup"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Automatically delete emails past retention period"})]}),a.jsx("button",{onClick:()=>s({...n,autoCleanupEnabled:!n.autoCleanupEnabled}),className:`relative w-12 h-6 rounded-full transition-colors ${n.autoCleanupEnabled?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${n.autoCleanupEnabled?"translate-x-6":"translate-x-0"}`})})]})]}),a.jsx("button",{onClick:N,disabled:d,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:d?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),"Save Retention Policy"]})})]})]}),i&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(Md,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Retention Statistics"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Current data retention status"})]})]}),u?a.jsx("div",{className:"p-8 text-center",children:a.jsx(ct,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-slate-900",children:i.totalEmails||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Total Emails"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:i.archivedEmails||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Archived Emails"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-amber-600",children:i.eligibleForArchive||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Archive"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl",children:[a.jsx("div",{className:"text-2xl font-bold text-red-600",children:i.eligibleForDeletion||0}),a.jsx("div",{className:"text-xs text-slate-500 mt-1",children:"Eligible for Deletion"})]})]})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(Vd,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Manual Actions"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Manually trigger archive, cleanup, or export"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("button",{onClick:S,disabled:h,className:"p-4 bg-indigo-50 border border-indigo-200 rounded-xl hover:bg-indigo-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[h?a.jsx(ct,{className:"w-5 h-5 animate-spin text-indigo-600"}):a.jsx(Md,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"text-sm font-semibold text-indigo-900",children:"Archive Emails"}),a.jsx("span",{className:"text-xs text-indigo-600",children:"Move to cold storage"})]}),a.jsxs("button",{onClick:j,disabled:g,className:"p-4 bg-red-50 border border-red-200 rounded-xl hover:bg-red-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[g?a.jsx(ct,{className:"w-5 h-5 animate-spin text-red-600"}):a.jsx(JH,{className:"w-5 h-5 text-red-600"}),a.jsx("span",{className:"text-sm font-semibold text-red-900",children:"Cleanup Emails"}),a.jsx("span",{className:"text-xs text-red-600",children:"Delete old emails"})]}),a.jsxs("button",{onClick:_,disabled:v,className:"p-4 bg-green-50 border border-green-200 rounded-xl hover:bg-green-100 transition-colors disabled:opacity-50 flex flex-col items-center gap-2",children:[v?a.jsx(ct,{className:"w-5 h-5 animate-spin text-green-600"}):a.jsx(n0,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-sm font-semibold text-green-900",children:"Export Archived"}),a.jsx("span",{className:"text-xs text-green-600",children:"Download CSV"})]})]})]})]})},jEe=({currentUser:e,showSuccess:t,showError:r})=>{const[n,s]=P.useState([]),[i,o]=P.useState(!1),[l,c]=P.useState(!1),[d,f]=P.useState(null),[u,p]=P.useState({name:"",content:"",isDefault:!1}),[h,m]=P.useState(!1),[g,x]=P.useState(null),[v,b]=P.useState({layout:"list",density:"comfortable",emailFormat:"html",showPreview:!0,previewLines:3});P.useEffect(()=>{w(),y()},[]);const w=async()=>{o(!0);try{const T=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!T)return;const D=await zR(T);s(D.data||[])}catch(T){console.error("Failed to load signatures:",T)}finally{o(!1)}},y=()=>{try{const T=localStorage.getItem("user_display_preferences");T&&b(JSON.parse(T))}catch(T){console.error("Failed to load display preferences:",T)}},N=()=>{try{localStorage.setItem("user_display_preferences",JSON.stringify(v)),t("Display preferences saved successfully")}catch{r("Failed to save display preferences")}},S=async()=>{if(!u.name||!u.content){r("Name and content are required");return}m(!0);try{const T=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!T){r("Please log in to save signature");return}d?(await E1e(d.id,{userId:T,...u}),t("Signature updated successfully")):(await C1e({userId:T,...u}),t("Signature created successfully")),c(!1),f(null),p({name:"",content:"",isDefault:!1}),await w()}catch(T){r(T.message||"Failed to save signature")}finally{m(!1)}},j=async T=>{if(confirm("Are you sure you want to delete this signature?")){x(T);try{const D=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;await T1e(T,D),t("Signature deleted successfully"),await w()}catch(D){r(D.message||"Failed to delete signature")}finally{x(null)}}},_=T=>{T?(f(T),p({name:T.name||"",content:T.content||"",isDefault:T.isDefault||!1})):(f(null),p({name:"",content:"",isDefault:!1})),c(!0)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center justify-between pb-4 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center",children:a.jsx(Dn,{className:"w-5 h-5 text-indigo-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Signatures"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Manage your email signatures for replies and new emails"})]})]}),a.jsxs("button",{onClick:()=>_(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all flex items-center gap-2",children:[a.jsx($r,{className:"w-4 h-4"}),"Add Signature"]})]}),i?a.jsx("div",{className:"p-8 text-center",children:a.jsx(ct,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):n.length===0?a.jsxs("div",{className:"text-center py-8 text-slate-500",children:[a.jsx(Dn,{className:"w-12 h-12 mx-auto mb-3 text-slate-300"}),a.jsx("p",{className:"text-sm font-semibold",children:"No signatures yet"}),a.jsx("p",{className:"text-xs mt-1",children:"Create your first signature to get started"})]}):a.jsx("div",{className:"space-y-3",children:n.map(T=>a.jsx("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-bold text-slate-900",children:T.name}),T.isDefault&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-xs font-bold rounded",children:"Default"})]}),a.jsx("div",{className:"text-sm text-slate-600 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:T.content}})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>_(T),className:"p-2 text-slate-400 hover:text-indigo-600 transition-colors",children:a.jsx(Eo,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>j(T.id),disabled:g===T.id,className:"p-2 text-slate-400 hover:text-red-600 transition-colors disabled:opacity-50",children:g===T.id?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(br,{className:"w-4 h-4"})})]})]})},T.id))})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(kk,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Display Preferences"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Customize how content is displayed"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Layout Style"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["list","grid","compact"].map(T=>a.jsx("button",{onClick:()=>b({...v,layout:T}),className:`p-4 rounded-xl border-2 transition-all ${v.layout===T?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:a.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:T})},T))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Density"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:["comfortable","compact","spacious"].map(T=>a.jsx("button",{onClick:()=>b({...v,density:T}),className:`p-4 rounded-xl border-2 transition-all ${v.density===T?"border-indigo-600 bg-indigo-50":"border-slate-200 hover:border-slate-300"}`,children:a.jsx("div",{className:"text-sm font-semibold text-slate-900 capitalize",children:T})},T))})]}),a.jsxs("button",{onClick:N,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[a.jsx(qs,{className:"w-4 h-4"}),"Save Display Preferences"]})]})]}),a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-slate-100",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-xl flex items-center justify-center",children:a.jsx(Wd,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:"Email Display Format"}),a.jsx("p",{className:"text-xs text-slate-500",children:"Choose how emails are displayed"})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Email Format"}),a.jsxs("select",{value:v.emailFormat,onChange:T=>b({...v,emailFormat:T.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"html",children:"HTML (Rich formatting)"}),a.jsx("option",{value:"plain",children:"Plain Text"}),a.jsx("option",{value:"rich",children:"Rich Text"})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Show Email Preview"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Display email preview in list view"})]}),a.jsx("button",{onClick:()=>b({...v,showPreview:!v.showPreview}),className:`relative w-12 h-6 rounded-full transition-colors ${v.showPreview?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${v.showPreview?"translate-x-6":"translate-x-0"}`})})]}),v.showPreview&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest",children:"Preview Lines"}),a.jsx("input",{type:"number",min:"1",max:"10",value:v.previewLines,onChange:T=>b({...v,previewLines:parseInt(T.target.value)||3}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("button",{onClick:N,className:"w-full px-6 py-3 bg-indigo-600 text-white font-bold rounded-xl flex items-center justify-center gap-2 hover:bg-indigo-700 transition-all shadow-lg",children:[a.jsx(qs,{className:"w-4 h-4"}),"Save Email Format Preferences"]})]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-2xl w-full p-6 space-y-4 text-left my-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:d?"Edit Signature":"Create Signature"}),a.jsx("button",{onClick:()=>{c(!1),f(null),p({name:"",content:"",isDefault:!1})},className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Name"}),a.jsx("input",{type:"text",value:u.name,onChange:T=>p({...u,name:T.target.value}),placeholder:"e.g. Professional, Personal",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Signature Content"}),a.jsx("textarea",{value:u.content,onChange:T=>p({...u,content:T.target.value}),placeholder:"Enter your signature (HTML supported)",rows:8,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none font-mono"}),a.jsx("p",{className:"text-xs text-slate-500",children:"HTML is supported. Example: <strong>Name</strong><br>Title"})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-xl",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-semibold text-slate-900",children:"Set as Default"}),a.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Use this signature by default when composing emails"})]}),a.jsx("button",{onClick:()=>p({...u,isDefault:!u.isDefault}),className:`relative w-12 h-6 rounded-full transition-colors ${u.isDefault?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-1 left-1 w-4 h-4 bg-white rounded-full transition-transform ${u.isDefault?"translate-x-6":"translate-x-0"}`})})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>{c(!1),f(null),p({name:"",content:"",isDefault:!1})},className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:S,disabled:h||!u.name||!u.content,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),d?"Update":"Create"," Signature"]})})]})]})})]})},kEe=({currentUser:e,onUserUpdate:t})=>{const{showSuccess:r,showError:n}=hn(),[s,i]=P.useState("profile"),[o,l]=P.useState(iy),[c,d]=P.useState(!1),[f,u]=P.useState([]),[p,h]=P.useState(""),[m,g]=P.useState(!1),[x,v]=P.useState(!1),[b,w]=P.useState(!1),[y,N]=P.useState(null),[S,j]=P.useState(!1),[_,T]=P.useState(!1),[D,A]=P.useState([]),[C,M]=P.useState(!1),[F,B]=P.useState(""),[Y,V]=P.useState(!1),[J,U]=P.useState(null),[X,W]=P.useState(null),[E,R]=P.useState(null),[q,L]=P.useState({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:jg(),language:"English"}),[H,se]=P.useState(!1),[ce,ae]=P.useState({isOpen:!1,title:"",message:"",confirmText:"Confirm",cancelText:"Cancel",onConfirm:()=>{},type:"info"}),[Z,ve]=P.useState({name:"",email:"",avatar:"",phone:"",jobTitle:"",department:"",bio:"",timezone:jg(),language:"English"}),[ne,He]=P.useState(!1),[Xe,ie]=P.useState(null),[Q,Ne]=P.useState(""),[de,ye]=P.useState(!1),[xe,we]=P.useState(!1),[Ae,Ue]=P.useState(""),me=P.useRef(null),ee=(ke,Je)=>{l(mt=>mt.map(ue=>ue.id===ke?{...ue,[Je]:!ue[Je]}:ue))};P.useEffect(()=>{s==="connections"&&(async()=>{const Je=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(Je)try{const mt=await W6(Je);w(mt.connected||!1),N(mt.userEmail||null)}catch{w(!1)}})()},[s,e]);const fe=async()=>{M(!0);try{const ke=await ud(F||void 0);A(ke.data||[])}catch{A([])}finally{M(!1)}};P.useEffect(()=>{s==="users"&&fe()},[s,F]),P.useEffect(()=>{(async()=>{if(s==="notifications")try{const Je=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Je)return;const ue=(await cve(Je)).data||[];if(ue.length>0){const Ye=iy.map(bt=>ue.find(Vt=>Vt.id===bt.id)||bt);l(Ye)}else l(iy)}catch(Je){console.error("[SETTINGS] Failed to load notification preferences:",Je),l(iy)}})()},[s,e]);const Fe=async()=>{j(!0);try{const ke=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,Je=await $R(ke);Je.authUrl&&(window.location.href=Je.authUrl)}catch{n("Failed to connect Google Calendar"),j(!1)}},Ee=async()=>{T(!0);try{const ke=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;await l1e(ke),w(!1),N(null),r("Google account disconnected successfully")}catch{n("Failed to disconnect Google account")}finally{T(!1)}};P.useEffect(()=>{(async()=>{let Je=e||JSON.parse(localStorage.getItem("user_data")||"null");if(Je){const mt=jg();ve({name:Je.name||"",email:Je.email||"",avatar:Je.avatar||"",phone:Je.phone||"",jobTitle:Je.jobTitle||"",department:Je.department||"",bio:Je.bio||"",timezone:Je.timezone||mt,language:Je.language||"English"}),Ne(Je.avatar||"")}})()},[e]);const qe=(ke,Je=400,mt=400,ue=.8)=>new Promise((Ye,bt)=>{if(ke.size>5242880){bt(new Error("Image file is too large. Please use an image smaller than 5MB."));return}const Vt=new FileReader;Vt.onload=gr=>{var Gt;const qt=new Image;qt.onload=()=>{let Bt=qt.width,fr=qt.height;Bt>fr?Bt>Je&&(fr=fr*Je/Bt,Bt=Je):fr>mt&&(Bt=Bt*mt/fr,fr=mt);const Sr=document.createElement("canvas");Sr.width=Bt,Sr.height=fr;const Cr=Sr.getContext("2d");if(!Cr){bt(new Error("Failed to create canvas context"));return}Cr.drawImage(qt,0,0,Bt,fr);const cr=Sr.toDataURL("image/jpeg",ue);if(cr.length>9e5)if(ue>.5){qe(ke,Je,mt,ue-.1).then(Ye).catch(bt);return}else{bt(new Error("Image is too large even after compression. Please use a smaller image."));return}Ye(cr)},qt.onerror=()=>bt(new Error("Failed to load image")),qt.src=(Gt=gr.target)==null?void 0:Gt.result},Vt.onerror=()=>bt(new Error("Failed to read file")),Vt.readAsDataURL(ke)}),Ke=async ke=>{var mt;const Je=(mt=ke.target.files)==null?void 0:mt[0];if(Je){if(!Je.type.startsWith("image/")){n("Please select a valid image file.");return}ie(null);try{const ue=new FileReader;ue.onload=Ye=>{var xt;const bt=(xt=Ye.target)==null?void 0:xt.result;Ue(bt),we(!0)},ue.onerror=()=>{n("Failed to read image file.")},ue.readAsDataURL(Je)}catch(ue){const Ye=ue.message||"Failed to load image. Please try a different image.";n(Ye),ie(Ye),me.current&&(me.current.value="")}}},Qe=async ke=>{we(!1),ye(!0);try{const mt=await(await fetch(ke)).blob(),ue=new File([mt],"cropped-image.jpg",{type:"image/jpeg"}),Ye=await qe(ue,400,400,.8);Ne(Ye),ve(bt=>({...bt,avatar:Ye})),r('Image cropped and loaded successfully. Click "Save Changes" to update your profile.')}catch(Je){const mt=Je.message||"Failed to process cropped image.";n(mt),ie(mt)}finally{ye(!1),me.current&&(me.current.value="")}},_t=()=>{we(!1),Ue(""),me.current&&(me.current.value="")},vt=async()=>{if(!Z.name.trim()){ie("Full name is required.");return}He(!0);try{const ke=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,Je=await Jge(ke,Z),mt=Je.data||Je;localStorage.setItem("user_data",JSON.stringify(mt)),t(mt),r("Profile updated successfully!"),ie(null)}catch{n("Failed to update profile.")}finally{He(!1)}};return a.jsxs("div",{className:"w-full space-y-8 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-end",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-left",children:"Settings"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Manage your personal account and workspace preferences"})]}),s==="profile"&&a.jsxs("button",{onClick:vt,disabled:ne,className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95 disabled:opacity-50",children:[ne?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(qs,{className:"w-4 h-4"}),"Save Changes"]})]}),a.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[a.jsx("aside",{className:"w-full lg:w-64 space-y-1",children:[{id:"profile",label:"Profile Settings",icon:a.jsx(co,{className:"w-4 h-4"})},{id:"notifications",label:"Notifications",icon:a.jsx(T5,{className:"w-4 h-4"})},{id:"preferences",label:"User Preferences",icon:a.jsx(VF,{className:"w-4 h-4"})},{id:"connections",label:"Connections & Sync",icon:a.jsx(jk,{className:"w-4 h-4"})},{id:"users",label:"Team Management",icon:a.jsx(s0,{className:"w-4 h-4"})},{id:"workspace",label:"Workspace Settings",icon:a.jsx(qF,{className:"w-4 h-4"})}].map(ke=>a.jsxs("button",{onClick:()=>i(ke.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl font-semibold text-sm transition-all ${s===ke.id?"bg-white text-indigo-600 shadow-sm border border-slate-200":"text-slate-500 hover:text-slate-900 hover:bg-slate-100"}`,children:[ke.icon,ke.label]},ke.id))}),a.jsxs("div",{className:"flex-1 space-y-6",children:[s==="profile"&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-8 text-left",children:[Xe&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-600 text-sm p-4 rounded-xl",children:Xe}),a.jsxs("div",{className:"flex items-center gap-6 pb-8 border-b border-slate-100",children:[a.jsxs("div",{className:"relative group",children:[a.jsx(hs,{src:Q,alt:Z.name||"User",fallbackText:Z.name||Z.email||"U",className:"w-24 h-24 shadow-lg border-2 border-white object-cover",isAvatar:!0}),de&&a.jsx("div",{className:"absolute inset-0 bg-black/60 rounded-3xl flex items-center justify-center z-10",children:a.jsx(ct,{className:"w-6 h-6 text-white animate-spin"})}),a.jsx("button",{onClick:()=>{var ke;return(ke=me.current)==null?void 0:ke.click()},disabled:de,className:"absolute inset-0 bg-black/40 rounded-3xl opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center text-white disabled:opacity-60 disabled:cursor-not-allowed",children:a.jsx(cd,{className:"w-6 h-6"})}),a.jsx("input",{ref:me,type:"file",accept:"image/*",onChange:Ke,className:"hidden",disabled:de})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-xl text-slate-900",children:Z.name||"Set Name"}),a.jsxs("p",{className:"text-slate-500 text-sm",children:[Z.jobTitle||"No Title","  ",Z.department||"No Dept"]}),a.jsx("p",{className:"text-slate-400 text-xs mt-1",children:Z.email})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),a.jsx("input",{type:"text",value:Z.name,onChange:ke=>ve({...Z,name:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(al,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:Z.jobTitle,onChange:ke=>ve({...Z,jobTitle:ke.target.value}),className:"w-full pl-10 pr-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Senior Logistics Analyst"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),a.jsx("input",{type:"text",value:Z.department,onChange:ke=>ve({...Z,department:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"e.g. Operations"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),a.jsx("input",{type:"tel",value:Z.phone,onChange:ke=>ve({...Z,phone:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",placeholder:"+1 555-0000"})]}),a.jsxs("div",{className:"space-y-1.5 md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),a.jsx("textarea",{value:Z.bio,onChange:ke=>ve({...Z,bio:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm min-h-[100px] resize-none",placeholder:"Tell the team a bit about yourself..."})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(iE,{className:"w-3.5 h-3.5"})," Timezone"]}),a.jsx("select",{value:Z.timezone,onChange:ke=>ve({...Z,timezone:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:dv.map(ke=>a.jsx("option",{value:ke.value,children:ke.label},ke.value))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:"Language"}),a.jsx("select",{value:Z.language,onChange:ke=>ve({...Z,language:ke.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:cE.map(ke=>a.jsx("option",{value:ke.value,children:ke.label},ke.value))})]})]})]}),s==="notifications"&&a.jsxs("div",{className:"bg-white p-6 lg:p-8 rounded-2xl border border-slate-200 shadow-sm space-y-6 text-left",children:[a.jsxs("div",{className:"pb-6 border-b border-slate-100",children:[a.jsx("h3",{className:"font-bold text-xl text-slate-900 mb-2",children:"Notification Preferences"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Choose how you want to be notified about important updates and activities."})]}),a.jsx("div",{className:"space-y-4",children:o.map(ke=>a.jsx("div",{className:"p-5 bg-slate-50 rounded-xl border border-slate-200 hover:border-indigo-300 transition-all",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-bold text-slate-900 text-sm mb-1",children:ke.label}),a.jsx("p",{className:"text-xs text-slate-500",children:ke.description})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"In-App"}),a.jsx("button",{onClick:()=>ee(ke.id,"inApp"),className:`relative w-11 h-6 rounded-full transition-colors ${ke.inApp?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${ke.inApp?"translate-x-5":"translate-x-0"}`})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-600",children:"Email"}),a.jsx("button",{onClick:()=>ee(ke.id,"email"),className:`relative w-11 h-6 rounded-full transition-colors ${ke.email?"bg-indigo-600":"bg-slate-300"}`,children:a.jsx("span",{className:`absolute top-0.5 left-0.5 w-5 h-5 bg-white rounded-full transition-transform ${ke.email?"translate-x-5":"translate-x-0"}`})})]})]})]})},ke.id))}),a.jsx("div",{className:"pt-4 border-t border-slate-100",children:a.jsxs("button",{onClick:async()=>{try{const ke=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!ke){n("Please log in to save preferences.");return}await dve(ke,o),r("Notification preferences saved successfully!")}catch(ke){console.error("[SETTINGS] Failed to save notification preferences:",ke),n(ke.message||"Failed to save notification preferences.")}},className:"px-6 py-2.5 bg-indigo-600 text-white font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg active:scale-95",children:[a.jsx(qs,{className:"w-4 h-4"})," Save Preferences"]})})]}),s==="connections"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-blue-50 to-indigo-50",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-white shadow-md flex items-center justify-center",children:a.jsxs("svg",{className:"w-8 h-8",viewBox:"0 0 48 48",children:[a.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),a.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),a.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),a.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Google Workspace"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:"Connect your Google account to sync Calendar, Drive, Docs, and Gmail"})]})]})}),a.jsx("div",{className:"p-6",children:b?a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"p-4 bg-emerald-50 border-2 border-emerald-200 rounded-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Qr,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-emerald-900",children:"Connected"}),y&&a.jsx("p",{className:"text-xs text-emerald-700 mt-0.5",children:y})]})]}),a.jsx("button",{onClick:Ee,disabled:_,className:"px-4 py-2 bg-red-600 text-white text-xs font-bold uppercase tracking-widest rounded-lg hover:bg-red-700 transition-all disabled:opacity-50 flex items-center gap-2",children:_?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-3 h-3 animate-spin"}),"Disconnecting..."]}):"Disconnect"})]})}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"Connected Services"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-blue-100 flex items-center justify-center",children:a.jsx(Ln,{className:"w-4 h-4 text-blue-600"})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Calendar"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Sync events and schedules"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-green-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-green-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Drive"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Store and access documents"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx("svg",{className:"w-4 h-4 text-indigo-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Google Docs"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Create and sign documents"})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl border border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-red-100 flex items-center justify-center",children:a.jsx(ba,{className:"w-4 h-4 text-red-600"})}),a.jsx("span",{className:"font-bold text-slate-900",children:"Gmail"})]}),a.jsx("p",{className:"text-xs text-slate-600",children:"Access email communications"})]})]})]}),a.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx(zv,{className:"w-5 h-5 text-blue-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-blue-900 mb-1",children:"Permissions Granted"}),a.jsxs("ul",{className:"text-xs text-blue-800 space-y-1",children:[a.jsx("li",{children:" View and manage calendar events"}),a.jsx("li",{children:" Create, view, and manage files in Google Drive"}),a.jsx("li",{children:" Create and edit documents in Google Docs"}),a.jsx("li",{children:" Read email messages from Gmail"})]})]})]})})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-slate-100 flex items-center justify-center mx-auto mb-4",children:a.jsx(jk,{className:"w-8 h-8 text-slate-400"})}),a.jsx("h4",{className:"text-lg font-bold text-slate-900 mb-2",children:"Not Connected"}),a.jsx("p",{className:"text-sm text-slate-600 max-w-md mx-auto mb-6",children:"Connect your Google account to unlock powerful integrations with Calendar, Drive, Docs, and Gmail"}),a.jsx("button",{onClick:Fe,disabled:S,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 inline-flex items-center gap-2",children:S?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Connecting..."]}):a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 48 48",children:[a.jsx("path",{fill:"#FFC107",d:"M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12c0-6.627,5.373-12,12-12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24c0,11.045,8.955,20,20,20c11.045,0,20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"}),a.jsx("path",{fill:"#FF3D00",d:"M6.306,14.691l6.571,4.819C14.655,15.108,18.961,12,24,12c3.059,0,5.842,1.154,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"}),a.jsx("path",{fill:"#4CAF50",d:"M24,44c5.166,0,9.86-1.977,13.409-5.192l-6.19-5.238C29.211,35.091,26.715,36,24,36c-5.202,0-9.619-3.317-11.283-7.946l-6.522,5.025C9.505,39.556,16.227,44,24,44z"}),a.jsx("path",{fill:"#1976D2",d:"M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.087,5.571c0.001-0.001,0.002-0.001,0.003-0.002l6.19,5.238C36.971,39.205,44,34,44,24C44,22.659,43.862,21.35,43.611,20.083z"})]}),"Connect with Google"]})})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-slate-900 mb-4",children:"What You'll Get"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx(Ln,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Calendar Sync"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Sync events and manage schedules"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4c-1.48 0-2.85.43-4.01 1.17l1.46 1.46C10.21 6.23 11.08 6 12 6c3.04 0 5.5 2.46 5.5 5.5v.5H19c1.66 0 3 1.34 3 3 0 1.13-.64 2.11-1.56 2.62l1.45 1.45C23.16 18.16 24 16.68 24 15c0-2.64-2.05-4.78-4.65-4.96zM3 5.27l2.75 2.74C2.56 8.15 0 10.77 0 14c0 3.31 2.69 6 6 6h11.73l2 2L21 20.73 4.27 4 3 5.27zM7.73 10l8 8H6c-2.21 0-4-1.79-4-4s1.79-4 4-4h1.73z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Drive Storage"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"Store contracts and documents"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx("svg",{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Document Signing"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"E-signature via Google Docs"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-50 rounded-lg",children:[a.jsx(ba,{className:"w-5 h-5 text-indigo-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:"Gmail Access"}),a.jsx("p",{className:"text-xs text-slate-600 mt-0.5",children:"View email communications"})]})]})]})]})]})})]}),a.jsx("div",{className:"bg-amber-50 border-2 border-amber-200 rounded-xl p-6",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx(zv,{className:"w-6 h-6 text-amber-600 shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-black text-amber-900 mb-2",children:"Security & Privacy"}),a.jsxs("ul",{className:"text-xs text-amber-800 space-y-1",children:[a.jsx("li",{children:" Your data is encrypted and securely stored"}),a.jsx("li",{children:" We only request the minimum permissions needed"}),a.jsx("li",{children:" You can disconnect at any time"}),a.jsx("li",{children:" We never share your data with third parties"})]})]})]})})]}),s==="users"&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden text-left",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-slate-900",children:"Team Management"}),a.jsxs("button",{onClick:()=>{U(null),L({email:"",name:"",role:"User",jobTitle:"",department:"",phone:"",bio:"",timezone:jg(),language:"English"}),V(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-xs font-bold rounded-lg flex items-center gap-2 shadow-md",children:[a.jsx(hc,{className:"w-4 h-4"})," Add User"]})]}),a.jsx("div",{className:"p-4 border-b border-slate-100",children:a.jsxs("div",{className:"relative",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:F,onChange:ke=>B(ke.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})}),a.jsx("div",{className:"divide-y divide-slate-100",children:C?a.jsx("div",{className:"p-8 text-center",children:a.jsx(ct,{className:"w-6 h-6 animate-spin mx-auto text-indigo-600"})}):D.map(ke=>a.jsxs("div",{className:"p-4 flex items-center justify-between hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(hs,{src:ke.avatar,alt:ke.name||"",fallbackText:ke.name||ke.email||"U",className:"w-10 h-10 border",isAvatar:!0}),a.jsxs("div",{children:[a.jsx("p",{className:"font-bold text-slate-900 text-sm",children:ke.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[ke.email,"  ",a.jsx("span",{className:"font-bold text-indigo-600",children:ke.role})]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{U(ke),L({email:ke.email,name:ke.name,role:ke.role||"User",jobTitle:ke.jobTitle||"",department:ke.department||"",phone:ke.phone||"",bio:ke.bio||"",timezone:ke.timezone||jg(),language:ke.language||"English"}),V(!0)},className:"p-2 text-slate-400 hover:text-indigo-600",children:a.jsx(Eo,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>R(ke),className:"p-2 text-slate-400 hover:text-red-600",children:a.jsx(br,{className:"w-4 h-4"})})]})]},ke.id))})]}),s==="preferences"&&a.jsx(jEe,{currentUser:e,showSuccess:r,showError:n}),s==="workspace"&&a.jsx(NEe,{currentUser:e,showSuccess:r,showError:n})]})]}),Y&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full p-6 space-y-4 text-left my-8",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h3",{className:"font-bold text-lg text-slate-900",children:J?"Edit User":"Add New User"}),a.jsx("button",{onClick:()=>V(!1),className:"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors",children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4 max-h-[70vh] overflow-y-auto pr-2",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Full Name"}),a.jsx("input",{type:"text",value:q.name,onChange:ke=>L({...q,name:ke.target.value}),placeholder:"Full Name",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Email Address"}),a.jsx("input",{type:"email",value:q.email,onChange:ke=>L({...q,email:ke.target.value}),placeholder:"Email Address",disabled:!!J,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm disabled:opacity-50"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Role"}),a.jsxs("select",{value:q.role,onChange:ke=>L({...q,role:ke.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:[a.jsx("option",{value:"Viewer",children:"Viewer - Read-only access"}),a.jsx("option",{value:"Collaborator",children:"Collaborator - Can comment and draft"}),a.jsx("option",{value:"Admin",children:"Admin - Full access"}),a.jsx("option",{value:"User",children:"User (Legacy - maps to Collaborator)"})]}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-1",children:[q.role==="Viewer"&&"Read-only access to shared inbox",q.role==="Collaborator"&&"Can add notes, draft responses, manage own templates",q.role==="Admin"&&"Full configuration access, can assign emails, send, manage accounts",q.role==="User"&&"Legacy role - will be treated as Collaborator"]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Job Title"}),a.jsxs("div",{className:"relative",children:[a.jsx(al,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:q.jobTitle,onChange:ke=>L({...q,jobTitle:ke.target.value}),placeholder:"e.g. Senior Logistics Analyst",className:"w-full pl-10 pr-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Department"}),a.jsx("input",{type:"text",value:q.department,onChange:ke=>L({...q,department:ke.target.value}),placeholder:"e.g. Operations",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Phone Number"}),a.jsx("input",{type:"tel",value:q.phone,onChange:ke=>L({...q,phone:ke.target.value}),placeholder:"+1 555-0000",className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Professional Bio"}),a.jsx("textarea",{value:q.bio,onChange:ke=>L({...q,bio:ke.target.value}),placeholder:"Tell the team a bit about yourself...",rows:3,className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm resize-none"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(iE,{className:"w-3.5 h-3.5"})," Timezone"]}),a.jsx("select",{value:q.timezone,onChange:ke=>L({...q,timezone:ke.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:dv.map(ke=>a.jsx("option",{value:ke.value,children:ke.label},ke.value))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Language"}),a.jsx("select",{value:q.language,onChange:ke=>L({...q,language:ke.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm",children:cE.map(ke=>a.jsx("option",{value:ke.value,children:ke.label},ke.value))})]})]}),a.jsxs("div",{className:"flex gap-3 pt-4 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>V(!1),className:"flex-1 py-2.5 border border-slate-200 rounded-xl font-bold text-slate-600 hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{se(!0);try{J?await Kge(J.id,q):await Gge(q),V(!1),fe(),r(J?"User updated successfully!":"User created successfully!")}catch(ke){n(ke.message||"Failed to save user")}finally{se(!1)}},disabled:H||!q.name||!q.email,className:"flex-1 py-2.5 bg-indigo-600 text-white rounded-xl font-bold shadow-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-indigo-700 transition-colors flex items-center justify-center gap-2",children:H?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),J?"Updating...":"Creating..."]}):J?"Update":"Invite"})]})]})}),E&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete User?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The user will be permanently removed from the system."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:E.name}),a.jsx("p",{className:"text-xs text-slate-500",children:E.email}),E.role&&a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase mt-1",children:E.role})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>R(null),disabled:X===E.id,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:async()=>{W(E.id);try{await Qge(E.id),await fe(),R(null),r("User deleted successfully")}catch(ke){n(ke.message||"Failed to delete user")}finally{W(null)}},disabled:X===E.id,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:X===E.id?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete User"})]})]})}),xe&&Ae&&a.jsx(wEe,{imageSrc:Ae,onCrop:Qe,onCancel:_t,aspectRatio:1,circularCrop:!0})]})},SEe=({currentUser:e})=>{const{showSuccess:t,showError:r}=hn(),n=(e==null?void 0:e.role)==="Admin",[s,i]=P.useState("companies"),[o,l]=P.useState({companies:!1,contacts:!1,incomplete:!1,mismatches:!1}),[c,d]=P.useState({groups:[],totalDuplicates:0}),[f,u]=P.useState({groups:[],totalDuplicates:0}),[p,h]=P.useState({companies:[],contacts:[],deals:[],projects:[],invoices:[]}),[m,g]=P.useState({mismatches:[],count:0}),[x,v]=P.useState(null),[b,w]=P.useState(!1),[y,N]=P.useState({}),S=P.useCallback(async()=>{l(V=>({...V,companies:!0}));try{const V=await n1e(),J=(V==null?void 0:V.data)??V;d({groups:J.groups||[],totalDuplicates:J.totalDuplicates??0})}catch{r("Failed to load duplicate companies"),d({groups:[],totalDuplicates:0})}finally{l(V=>({...V,companies:!1}))}},[r]),j=P.useCallback(async()=>{l(V=>({...V,contacts:!0}));try{const V=await a1e(),J=(V==null?void 0:V.data)??V;u({groups:J.groups||[],totalDuplicates:J.totalDuplicates??0})}catch{r("Failed to load duplicate contacts"),u({groups:[],totalDuplicates:0})}finally{l(V=>({...V,contacts:!1}))}},[r]),_=P.useCallback(async()=>{l(V=>({...V,incomplete:!0}));try{const V=await s1e(),J=(V==null?void 0:V.data)??V;h({companies:J.companies||[],contacts:J.contacts||[],deals:J.deals||[],projects:J.projects||[],invoices:J.invoices||[]})}catch{r("Failed to load incomplete records"),h({companies:[],contacts:[],deals:[],projects:[],invoices:[]})}finally{l(V=>({...V,incomplete:!1}))}},[r]),T=P.useCallback(async()=>{l(V=>({...V,mismatches:!0}));try{const V=await i1e(),J=(V==null?void 0:V.data)??V;g({mismatches:J.mismatches||[],count:J.count??0})}catch{r("Failed to load domain mismatches"),g({mismatches:[],count:0})}finally{l(V=>({...V,mismatches:!1}))}},[r]);P.useEffect(()=>{n&&(s==="companies"?S():s==="contacts"?j():s==="incomplete"?_():s==="mismatches"&&T())},[n,s,S,j,_,T]);const D=()=>{s==="companies"?S():s==="contacts"?j():s==="incomplete"?_():T()},A=(V,J,U,X,W,E)=>{v({open:!0,type:V,primaryId:J,secondaryId:U,primaryName:X,secondaryName:W,groupKey:E})},C=()=>{b||v(null)},M=async()=>{if(x){w(!0);try{x.type==="company"?(await t1e(x.primaryId,x.secondaryId),t("Companies merged successfully"),S()):(await r1e(x.primaryId,x.secondaryId),t("Contacts merged successfully"),j()),v(null)}catch(V){r((V==null?void 0:V.message)||"Merge failed")}finally{w(!1)}}},F=V=>{N(J=>({...J,[V]:!J[V]}))};if(!n)return a.jsx("div",{className:"space-y-6 animate-in fade-in duration-500",children:a.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-2xl p-8 flex flex-col items-center justify-center text-center max-w-lg mx-auto",children:[a.jsx(XH,{className:"w-12 h-12 text-amber-600 mb-4"}),a.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-2",children:"Admin Only"}),a.jsx("p",{className:"text-slate-600 text-sm",children:"Data Hygiene is available only to administrators. Contact your workspace admin if you need access."})]})});const B=[{id:"companies",label:"Duplicate Companies",icon:a.jsx(rd,{className:"w-4 h-4"}),count:c.totalDuplicates},{id:"contacts",label:"Duplicate Contacts",icon:a.jsx(co,{className:"w-4 h-4"}),count:f.totalDuplicates},{id:"incomplete",label:"Incomplete Records",icon:a.jsx(IH,{className:"w-4 h-4"}),count:p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length},{id:"mismatches",label:"Domain Mismatches",icon:a.jsx(Th,{className:"w-4 h-4"}),count:m.count}],Y=o[s];return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Hygiene"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-0.5",children:"Find duplicates, incomplete records, and domain mismatches"})]}),a.jsxs("button",{onClick:D,disabled:Y,className:"px-4 py-2 bg-white border border-slate-200 text-slate-700 text-sm font-semibold rounded-xl flex items-center gap-2 hover:bg-slate-50 transition-all shadow-sm disabled:opacity-60",children:[Y?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(Vd,{className:"w-4 h-4"}),"Refresh"]})]}),a.jsx("div",{className:"flex flex-wrap gap-2 border-b border-slate-200 pb-4",children:B.map(V=>a.jsxs("button",{onClick:()=>i(V.id),className:`flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all ${s===V.id?"bg-indigo-600 text-white shadow-sm":"bg-slate-100 text-slate-600 hover:bg-slate-200"}`,children:[V.icon,V.label,V.count!=null&&V.count>0&&a.jsx("span",{className:`px-1.5 py-0.5 rounded-md text-xs font-bold ${s===V.id?"bg-white/20":"bg-slate-300 text-slate-700"}`,children:V.count})]},V.id))}),a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[Y&&a.jsx("div",{className:"flex items-center justify-center py-16",children:a.jsx(ct,{className:"w-8 h-8 text-indigo-600 animate-spin"})}),!Y&&s==="companies"&&a.jsx("div",{className:"p-6",children:c.groups.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate companies found by domain."}):a.jsx("ul",{className:"space-y-4",children:c.groups.map(V=>{const J=`company-${V.domain}`,U=y[J]!==!1;return a.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>F(J),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[a.jsx("span",{className:"font-semibold text-slate-900",children:V.domain}),a.jsxs("span",{className:"text-sm text-slate-500",children:[V.count," companies"]}),U?a.jsx($s,{className:"w-5 h-5"}):a.jsx(ra,{className:"w-5 h-5"})]}),U&&a.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:V.companies.map((X,W)=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:X.name||""}),X.industry&&a.jsxs("span",{className:"text-slate-500 text-sm ml-2",children:["(",X.industry,")"]})]}),V.companies.length>=2&&a.jsx("div",{className:"flex gap-2",children:V.companies.filter(E=>E.id!==X.id).map(E=>a.jsxs("button",{onClick:()=>A("company",X.id,E.id,X.name||X.id,E.name||E.id,J),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[a.jsx(i2,{className:"w-3.5 h-3.5"})," Merge into ",X.name||"this"]},E.id))})]},X.id))})]},J)})})}),!Y&&s==="contacts"&&a.jsx("div",{className:"p-6",children:f.groups.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No duplicate contacts found by email."}):a.jsx("ul",{className:"space-y-4",children:f.groups.map(V=>{const J=`contact-${V.email}`,U=y[J]!==!1;return a.jsxs("li",{className:"border border-slate-200 rounded-xl overflow-hidden",children:[a.jsxs("button",{onClick:()=>F(J),className:"w-full flex items-center justify-between p-4 bg-slate-50 hover:bg-slate-100 text-left",children:[a.jsx("span",{className:"font-semibold text-slate-900",children:V.email}),a.jsxs("span",{className:"text-sm text-slate-500",children:[V.count," contacts"]}),U?a.jsx($s,{className:"w-5 h-5"}):a.jsx(ra,{className:"w-5 h-5"})]}),U&&a.jsx("div",{className:"p-4 border-t border-slate-200 space-y-2",children:V.contacts.map(X=>a.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-slate-100 last:border-0",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium text-slate-900",children:X.name||""}),a.jsx("span",{className:"text-slate-500 text-sm ml-2",children:X.email})]}),V.contacts.filter(W=>W.id!==X.id).map(W=>a.jsxs("button",{onClick:()=>A("contact",X.id,W.id,X.name||X.id,W.name||W.id,J),className:"px-3 py-1.5 text-xs font-semibold bg-indigo-100 text-indigo-700 rounded-lg hover:bg-indigo-200 flex items-center gap-1",children:[a.jsx(i2,{className:"w-3.5 h-3.5"})," Merge into ",X.name||"this"]},W.id))]},X.id))})]},J)})})}),!Y&&s==="incomplete"&&a.jsxs("div",{className:"p-6 space-y-6",children:[[{key:"companies",label:"Companies",items:p.companies,recordLabel:V=>V.name||V.id},{key:"contacts",label:"Contacts",items:p.contacts,recordLabel:V=>V.name||V.email||V.id},{key:"deals",label:"Deals",items:p.deals,recordLabel:V=>V.name||V.title||V.id},{key:"projects",label:"Projects",items:p.projects,recordLabel:V=>V.name||V.title||V.id},{key:"invoices",label:"Invoices",items:p.invoices,recordLabel:V=>V.id}].map(({key:V,label:J,items:U,recordLabel:X})=>U.length===0?null:a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-bold text-slate-700 uppercase tracking-wider mb-3",children:J}),a.jsx("ul",{className:"space-y-2",children:U.map(W=>a.jsxs("li",{className:"flex items-start gap-3 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx(On,{className:"w-5 h-5 text-amber-600 shrink-0 mt-0.5"}),a.jsxs("div",{className:"min-w-0",children:[a.jsx("p",{className:"font-medium text-slate-900",children:X(W.record)}),a.jsx("ul",{className:"text-sm text-amber-800 mt-1 list-disc list-inside",children:W.errors.map((E,R)=>a.jsx("li",{children:E},R))})]})]},W.record.id))})]},V)),p.companies.length+p.contacts.length+p.deals.length+p.projects.length+p.invoices.length===0&&a.jsx("p",{className:"text-slate-500 text-sm",children:"No incomplete records found."})]}),!Y&&s==="mismatches"&&a.jsx("div",{className:"p-6",children:m.mismatches.length===0?a.jsx("p",{className:"text-slate-500 text-sm",children:"No domain mismatches (contact email domain matches company domain)."}):a.jsx("ul",{className:"space-y-3",children:m.mismatches.map((V,J)=>{var U,X,W;return a.jsxs("li",{className:"flex items-center gap-4 p-4 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx(On,{className:"w-5 h-5 text-amber-600 shrink-0"}),a.jsxs("div",{className:"min-w-0",children:[a.jsxs("p",{className:"font-medium text-slate-900",children:[(U=V.contact)==null?void 0:U.name," (",(X=V.contact)==null?void 0:X.email,")"]}),a.jsxs("p",{className:"text-sm text-slate-600",children:["Contact domain: ",a.jsx("strong",{children:V.contactDomain}),"  Company domain: ",a.jsx("strong",{children:V.companyDomain})," (",(W=V.company)==null?void 0:W.name,")"]})]})]},J)})})})]}),x&&a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:C}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm merge"}),a.jsx("button",{onClick:C,className:"p-2 hover:bg-slate-100 rounded-full text-slate-400",disabled:b,children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Merge ",a.jsx("strong",{children:x.secondaryName})," into ",a.jsx("strong",{children:x.primaryName}),"? Related records will point to the primary. The secondary will be removed."]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:C,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200",disabled:b,children:"Cancel"}),a.jsxs("button",{onClick:M,disabled:b,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60",children:[b?a.jsx(ct,{className:"w-5 h-5 animate-spin"}):a.jsx(i2,{className:"w-5 h-5"}),"Merge"]})]})]})]})})]})]})},_Ee=({currentUser:e,onNavigate:t,onNewEvent:r})=>{var ge,De,Ce,Oe;const{showError:n,showSuccess:s}=hn(),[i,o]=P.useState(new Date),[l,c]=P.useState("daily"),[d,f]=P.useState([]),[u,p]=P.useState([]),[h,m]=P.useState([]),[g,x]=P.useState([]),[v,b]=P.useState([]),[w,y]=P.useState(!1),[N,S]=P.useState(!1),[j,_]=P.useState(null),[T,D]=P.useState(!1),[A,C]=P.useState(!1),[M,F]=P.useState({title:"",category:"",description:"",dueDate:"",priority:"Medium",status:"Todo",assigneeId:"",projectId:""}),[B,Y]=P.useState([]),[V,J]=P.useState(!1),[U,X]=P.useState(""),[W,E]=P.useState(""),[R,q]=P.useState(null),[L,H]=P.useState(!1),[se,ce]=P.useState(null),[ae,Z]=P.useState(null),[ve,ne]=P.useState(!1),[He,Xe]=P.useState(""),[ie,Q]=P.useState(0),[Ne,de]=P.useState([]),[ye,xe]=P.useState(!1),[we,Ae]=P.useState(null),[Ue,me]=P.useState(!0),[ee,fe]=P.useState(!0),Fe=P.useRef(null),Ee=P.useRef(null),qe=Array.from({length:24},(G,oe)=>oe),Ke=P.useMemo(()=>Intl.DateTimeFormat().resolvedOptions().timeZone,[]),Qe=P.useMemo(()=>{const G=i.getFullYear(),oe=String(i.getMonth()+1).padStart(2,"0"),Pe=String(i.getDate()).padStart(2,"0");return`${G}-${oe}-${Pe}`},[i]);P.useEffect(()=>{(async()=>{if(e!=null&&e.id)try{const oe=await W6(e.id);y(oe.connected||!1)}catch{y(!1)}})()},[e]);const _t=G=>G.filter(oe=>{if(oe.recurringEventId){const Pe=(oe.title||"").toLowerCase().trim();if(["office","working hours","work hours","availability","busy","out of office","lunch","break"].some(Ve=>Pe.includes(Ve)))return!1}return!0});P.useEffect(()=>{(async()=>{S(!0);const oe=new Date(i),Pe=new Date(i);if(l==="monthly")oe.setDate(1),oe.setHours(0,0,0,0),Pe.setMonth(Pe.getMonth()+1),Pe.setDate(0),Pe.setHours(23,59,59,999);else if(l==="weekly"){const Ge=new Date(i),nt=Ge.getDay(),ut=Ge.getDate()-nt+(nt===0?-6:1),wt=new Date(Ge.setDate(ut));oe.setTime(wt.getTime()),oe.setHours(0,0,0,0);const Mt=new Date(wt);Mt.setDate(wt.getDate()+6),Pe.setTime(Mt.getTime()),Pe.setHours(23,59,59,999)}else oe.setHours(0,0,0,0),Pe.setHours(23,59,59,999);const $e=Ge=>{const nt=Ge.getFullYear(),ut=String(Ge.getMonth()+1).padStart(2,"0"),wt=String(Ge.getDate()).padStart(2,"0");return`${nt}-${ut}-${wt}`},We=$e(oe),Ve=$e(Pe),Re=[];if(w&&(e!=null&&e.id))try{const nt=(await o1e(We,Ve,e.id)).data||[],ut=_t(nt);Re.push(...ut)}catch(Ge){console.warn("[Schedule] Failed to fetch Google Calendar events:",Ge.message)}if(e!=null&&e.id)try{const Ge=await J3(e.id,void 0,We,Ve);if(Ge.success&&Ge.data){const nt=Ge.data.map(ut=>({id:ut.id,title:ut.title,description:ut.description||"",start:ut.start,end:ut.end,type:ut.type||"meeting",location:ut.location||"",participants:ut.participants||[],color:ut.color||"#4f46e5",isAllDay:ut.isAllDay||!1,source:"firestore",googleEventId:ut.googleEventId||null,htmlLink:ut.htmlLink||null,relatedEntity:ut.relatedEntity||null}));Re.push(...nt)}}catch(Ge){console.warn("[Schedule] Failed to fetch Firestore calendar events:",Ge.message)}const _e=new Map;Re.forEach(Ge=>{const nt=Ge.googleEventId||Ge.id;_e.has(nt)||_e.set(nt,Ge)}),f(Array.from(_e.values()));try{const Ge=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;if(!Ge){m([]),p([]);return}const nt=await wN(Ge),wt=(Array.isArray((nt==null?void 0:nt.data)||nt)?(nt==null?void 0:nt.data)||nt:[]).filter(Xt=>{const _r=Xt.dueDate&&Xt.dueDate!==null&&Xt.dueDate!==void 0&&String(Xt.dueDate).trim()!==""&&String(Xt.dueDate).trim().toLowerCase()!=="ongoing";return!Xt.archived&&_r});m(wt);const Mt=wt.filter(Xt=>Xt.dueDate===Qe);p(Mt)}catch{m([]),p([])}try{const[Ge,nt,ut]=await Promise.all([C0(e==null?void 0:e.id),ud(),Ww()]);x(Array.isArray((Ge==null?void 0:Ge.data)||Ge)?(Ge==null?void 0:Ge.data)||Ge:[]),b(Array.isArray((nt==null?void 0:nt.data)||nt)?(nt==null?void 0:nt.data)||nt:[]),Y(Array.isArray(ut==null?void 0:ut.data)?ut.data:[])}catch{x([]),b([]),Y([])}S(!1)})()},[Qe,w,e,l,i]);const vt=()=>{const G=new Date(i);l==="daily"?G.setDate(G.getDate()-1):l==="weekly"?G.setDate(G.getDate()-7):G.setMonth(G.getMonth()-1),o(G)},ke=()=>{const G=new Date(i);l==="daily"?G.setDate(G.getDate()+1):l==="weekly"?G.setDate(G.getDate()+7):G.setMonth(G.getMonth()+1),o(G)},Je=()=>{const G=new Date;return i.toDateString()===G.toDateString()},mt=G=>{let oe=new Date(G.start),Pe=new Date(G.end);const $e=new Date(i);$e.setHours(0,0,0,0);const We=(oe.getTime()-$e.getTime())/(1e3*60),Ve=(Pe.getTime()-oe.getTime())/(1e3*60),Re=We*(80/60)+20,_e=Ve*(80/60);return{top:Re,height:Math.max(_e,50)}},ue=G=>{try{return new Date(G).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch{return G}},Ye=G=>{switch(G){case"High":return"text-red-500 bg-red-50 border-red-100";case"Medium":return"text-amber-500 bg-amber-50 border-amber-100";default:return"text-blue-500 bg-blue-50 border-blue-100"}},bt=G=>{const oe=new Date(G),Pe=oe.getDay(),$e=oe.getDate()-Pe+(Pe===0?-6:1);return new Date(oe.setDate($e))},xt=G=>{const oe=bt(G);return Array.from({length:7},(Pe,$e)=>{const We=new Date(oe);return We.setDate(oe.getDate()+$e),We})},Vt=G=>{const oe=G.getFullYear(),Pe=G.getMonth(),$e=new Date(oe,Pe,1),We=new Date(oe,Pe+1,0),Ve=new Date($e);Ve.setDate(Ve.getDate()-Ve.getDay());const Re=[],_e=new Date(Ve);for(;(_e<=We||Re.length<42)&&(Re.push(new Date(_e)),_e.setDate(_e.getDate()+1),!(Re.length>=42)););return Re},gr=G=>{const oe=G.getFullYear(),Pe=String(G.getMonth()+1).padStart(2,"0"),$e=String(G.getDate()).padStart(2,"0");return`${oe}-${Pe}-${$e}`},qt=G=>h.filter(oe=>oe.dueDate===G),Gt=G=>{gr(G);const oe=new Date(G);oe.setHours(0,0,0,0);const Pe=new Date(G);return Pe.setHours(23,59,59,999),d.filter($e=>{const We=new Date($e.start),Ve=$e.end?new Date($e.end):We;return We<=Pe&&Ve>=oe})},Bt=G=>{if(!G||!/^\d{4}-\d{2}-\d{2}$/.test(G))return G;const[oe,Pe,$e]=G.split("-").map(Number);return new Date(oe,Pe-1,$e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};P.useEffect(()=>{j&&!T&&F({title:j.title,category:j.category||"",description:j.description||"",dueDate:j.dueDate||"",priority:j.priority||"Medium",status:j.status||"Todo",assigneeId:j.assigneeId,projectId:j.projectId||""})},[j,T]),P.useEffect(()=>{if(!T){J(!1);return}j!=null&&j.category&&!B.includes(j.category)?J(!0):M.category&&B.includes(M.category)?J(!1):M.category&&!B.includes(M.category)&&J(!0)},[T,M.category,B]),P.useEffect(()=>{if(!j)return;let G=!1;return(async()=>{try{const oe=await Ww(),Pe=Array.isArray(oe==null?void 0:oe.data)?oe.data:[];G||Y(Pe)}catch{G||Y([])}})(),()=>{G=!0}},[j==null?void 0:j.id]);const fr=()=>{_(null),D(!1),X(""),E(""),q(null),ne(!1),xe(!1),Ee.current&&(Ee.current.value="")},Sr=async()=>{if(j){if(!M.title.trim()){n("Task title is required");return}if(!M.assigneeId){n("Assignee is required");return}C(!0);try{await Vw(j.id,{title:M.title.trim(),category:M.category.trim()||void 0,description:M.description.trim()||"",dueDate:M.dueDate||null,priority:M.priority,status:M.status,assigneeId:M.assigneeId,projectId:M.projectId||null}),m(G=>G.map(oe=>oe.id===j.id?{...oe,title:M.title.trim(),category:M.category.trim()||void 0,description:M.description.trim()||"",dueDate:M.dueDate||"",priority:M.priority,status:M.status,assigneeId:M.assigneeId,projectId:M.projectId||void 0}:oe)),_({...j,title:M.title.trim(),category:M.category.trim()||void 0,description:M.description.trim()||"",dueDate:M.dueDate||"",priority:M.priority,status:M.status,assigneeId:M.assigneeId,projectId:M.projectId||void 0,updatedAt:new Date().toISOString()}),D(!1),s("Task updated successfully")}catch(G){n(G.message||"Failed to update task")}finally{C(!1)}}},Cr=(G,oe=1200,Pe=1200,$e=.8)=>new Promise((We,Ve)=>{const Re=new FileReader;Re.onload=_e=>{var nt;const Ge=new Image;Ge.onload=()=>{let ut=Ge.width,wt=Ge.height;ut>wt?ut>oe&&(wt=wt*oe/ut,ut=oe):wt>Pe&&(ut=ut*Pe/wt,wt=Pe);const Mt=document.createElement("canvas");Mt.width=ut,Mt.height=wt;const Xt=Mt.getContext("2d");Xt?(Xt.drawImage(Ge,0,0,ut,wt),We(Mt.toDataURL("image/jpeg",$e))):Ve(new Error("Canvas context not available"))},Ge.onerror=()=>Ve(new Error("Failed to load image")),Ge.src=(nt=_e.target)==null?void 0:nt.result},Re.onerror=()=>Ve(new Error("Failed to read file")),Re.readAsDataURL(G)}),cr=async G=>{var Pe;const oe=(Pe=G.target.files)==null?void 0:Pe[0];if(oe){if(!oe.type.startsWith("image/")){n("Please select an image file");return}if(oe.size>10*1024*1024){n("Image size must be less than 10MB");return}try{const $e=await Cr(oe,1200,1200,.8);E($e),q(oe)}catch($e){n($e.message||"Failed to process image")}}},It=G=>{const oe=G.target.value,Pe=G.target.selectionStart;X(oe),Q(Pe);const $e=oe.substring(0,Pe),We=$e.lastIndexOf("@");if(We!==-1){const Ve=$e.substring(We+1),Re=We>0?$e[We-1]:" ";if((Re===" "||Re===`
`||We===0)&&!Ve.includes(" ")&&!Ve.includes(`
`)){Xe(Ve);const _e=v.filter(Ge=>Ge.name.toLowerCase().includes(Ve.toLowerCase())||Ge.email.toLowerCase().includes(Ve.toLowerCase()));de(_e.slice(0,5)),ne(!0);return}}ne(!1)},yr=G=>{const Pe=U.substring(0,ie).lastIndexOf("@"),$e=U.substring(ie),Ve=`${U.substring(0,Pe)}@${G.name} ${$e}`;if(X(Ve),ne(!1),Fe.current){Fe.current.focus();const Re=Pe+G.name.length+2;Fe.current.setSelectionRange(Re,Re)}},wr=G=>{const oe=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,Pe=[];let $e;for(;($e=oe.exec(G))!==null;){const We=$e[1].trim(),Ve=v.find(Re=>Re.name.toLowerCase()===We.toLowerCase());Ve&&Ve.id!==((e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id)&&Pe.push(Ve.id)}return[...new Set(Pe)]};P.useEffect(()=>{if(Fe.current){const G=Fe.current;G.style.height="auto";const oe=24,Pe=5*oe,$e=15*oe,We=Math.min(Math.max(G.scrollHeight,Pe),$e);G.style.height=`${We}px`}},[U]);const Fr=G=>{const oe=[],Pe=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g;let $e=0,We,Ve=0;for(;(We=Pe.exec(G))!==null;){We.index>$e&&oe.push(G.substring($e,We.index));const Re=We[1].trim();v.find(Ge=>Ge.name.toLowerCase()===Re.toLowerCase())?oe.push(a.jsxs("span",{className:"font-bold text-indigo-600",children:["@",Re]},Ve++)):oe.push(`@${Re}`),$e=Pe.lastIndex}return $e<G.length&&oe.push(G.substring($e)),oe.length>0?oe:G},jr=async()=>{if(j){if(!U.trim()&&!R){n("Please add a note or attach an image");return}H(!0);try{const G=JSON.parse(localStorage.getItem("user_data")||"{}"),oe={id:`note_${Date.now()}`,userId:G.id,userName:G.name||"Unknown User",text:U.trim(),createdAt:new Date().toISOString()};W&&R&&(oe.imageUrl=W,oe.imageName=R.name,oe.imageMimeType=R.type);const Pe=[...j.notes||[],oe];await Vw(j.id,{notes:Pe});const $e=wr(U);if($e.length>0)for(const We of $e)try{await kx({userId:We,notificationType:"task-mention",title:"You were mentioned in a task",message:`${G.name||"Someone"} mentioned you in task: "${j.title}"`,link:`/?tab=tasks&task=${j.id}`})}catch(Ve){console.error("Failed to send mention notification:",Ve)}_({...j,notes:Pe}),m(We=>We.map(Ve=>Ve.id===j.id?{...Ve,notes:Pe}:Ve)),X(""),E(""),q(null),Ee.current&&(Ee.current.value=""),s("Note added successfully")}catch(G){n(G.message||"Failed to add note")}finally{H(!1)}}},Pr=()=>{if(l==="daily")return a.jsxs("div",{className:"p-8 pt-12 pb-12 relative min-h-[2000px] bg-white",children:[qe.map(G=>{const oe=G*80+20;return a.jsxs("div",{className:"absolute left-0 right-0 group",style:{top:`${oe}px`},children:[a.jsx("span",{className:"absolute left-4 top-0 -translate-y-1/2 text-[10px] font-black text-slate-300 w-16 text-right pr-6 uppercase tracking-widest",children:G===0?"12 AM":G===12?"12 PM":G>12?`${G-12} PM`:`${G} AM`}),a.jsx("div",{className:"absolute left-24 top-0 -translate-x-1/2 w-1.5 h-1.5 rounded-full bg-slate-100 group-hover:bg-indigo-200 transition-colors"}),a.jsx("div",{className:"absolute left-24 top-0 right-8 h-px bg-slate-50"})]},G)}),Ue&&d.map(G=>{const oe=mt(G);return a.jsxs("div",{className:"absolute left-28 right-8 p-4 rounded-3xl border shadow-sm transition-all hover:scale-[1.01] hover:shadow-xl group overflow-hidden bg-indigo-50 border-indigo-100",style:{top:`${oe.top}px`,height:`${oe.height}px`},children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-indigo-500/20 group-hover:w-2 transition-all"}),a.jsxs("div",{className:"flex justify-between items-start gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"font-black text-sm truncate text-indigo-900",children:G.title}),a.jsx("div",{className:"flex flex-wrap items-center gap-4 mt-2",children:a.jsxs("span",{className:"flex items-center gap-1.5 text-[9px] font-black text-slate-400 uppercase tracking-widest",children:[a.jsx(Qa,{className:"w-3 h-3 text-indigo-400"})," ",ue(G.start)," - ",ue(G.end)]})})]}),G.htmlLink&&a.jsx("a",{href:G.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-white rounded-xl border border-slate-100 shadow-sm text-slate-400 hover:text-indigo-600 transition-all active:scale-95",children:a.jsx(za,{className:"w-3.5 h-3.5"})})]})]},G.id)}),!N&&(Ue&&d.length===0||!Ue&&(!ee||u.length===0))&&a.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-center opacity-40",children:[a.jsx(Ln,{className:"w-16 h-16 text-slate-200 mb-4"}),a.jsx("p",{className:"text-slate-400 font-black uppercase text-[10px] tracking-[0.2em]",children:"No schedule entries for this day"})]})]});if(l==="weekly"){const G=xt(i),oe=new Date;return oe.setHours(0,0,0,0),a.jsxs("div",{className:"p-6 bg-white",children:[a.jsx("div",{className:"grid grid-cols-7 gap-2 mb-4",children:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"].map((Pe,$e)=>a.jsx("div",{className:"text-center py-2",children:a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:Pe})},Pe))}),a.jsx("div",{className:"grid grid-cols-7 gap-2",children:G.map((Pe,$e)=>{const We=gr(Pe),Ve=ee?qt(We):[],Re=Ue?Gt(Pe):[];let _e=[],Ge=[];ee&&Ue?Ve.length>0&&Re.length>0?(_e=Ve.slice(0,1),Ge=Re.slice(0,1)):Ve.length>0?_e=Ve.slice(0,2):Re.length>0&&(Ge=Re.slice(0,2)):ee?_e=Ve.slice(0,2):Ue&&(Ge=Re.slice(0,2));const nt=[...Ve,...Re],ut=Pe.toDateString()===oe.toDateString(),wt=Pe.getMonth()===i.getMonth();return a.jsxs("div",{onClick:()=>{o(new Date(Pe)),c("daily")},className:`min-h-[120px] p-2 rounded-xl border-2 transition-all cursor-pointer ${ut?"bg-indigo-50 border-indigo-300":wt?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[a.jsx("div",{className:`text-xs font-black mb-2 ${ut?"text-indigo-600":wt?"text-slate-900":"text-slate-400"}`,children:Pe.getDate()}),a.jsxs("div",{className:"space-y-1 max-h-[80px] overflow-y-auto",children:[ee&&_e.map(Mt=>a.jsx("div",{onClick:Xt=>{Xt.stopPropagation(),_(Mt)},className:`p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${Mt.priority==="High"?"bg-red-100 text-red-700":Mt.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:Mt.title,children:Mt.title},Mt.id)),Ue&&Ge.map(Mt=>a.jsx("div",{onClick:Xt=>{Xt.stopPropagation(),Mt.htmlLink&&window.open(Mt.htmlLink,"_blank")},className:"p-1.5 rounded-lg text-[9px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:Mt.title,children:Mt.title},Mt.id)),_e.length+Ge.length<nt.length&&a.jsxs("div",{className:"text-[9px] text-slate-400 font-bold px-1.5",children:["+",nt.length-(_e.length+Ge.length)," more"]})]})]},$e)})})]})}if(l==="monthly"){const G=Vt(i),oe=new Date;oe.setHours(0,0,0,0);const Pe=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];return a.jsxs("div",{className:"p-6 bg-white",children:[a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:Pe.map($e=>a.jsx("div",{className:"text-center py-2",children:a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:$e})},$e))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:G.map(($e,We)=>{const Ve=gr($e),Re=ee?qt(Ve):[],_e=Ue?Gt($e):[];let Ge=[],nt=[];ee&&Ue?Re.length>0&&_e.length>0?(Ge=Re.slice(0,1),nt=_e.slice(0,1)):Re.length>0?Ge=Re.slice(0,1):_e.length>0&&(nt=_e.slice(0,1)):ee?Ge=Re.slice(0,1):Ue&&(nt=_e.slice(0,1));const ut=[...Re,..._e],wt=$e.toDateString()===oe.toDateString(),Mt=$e.getMonth()===i.getMonth();return a.jsxs("div",{onClick:()=>{o(new Date($e)),c("daily")},className:`min-h-[100px] p-1.5 rounded-lg border transition-all cursor-pointer ${wt?"bg-indigo-50 border-indigo-300":Mt?"bg-white border-slate-100 hover:border-slate-200":"bg-slate-50 border-slate-50"}`,children:[a.jsx("div",{className:`text-[10px] font-black mb-1 ${wt?"text-indigo-600":Mt?"text-slate-900":"text-slate-400"}`,children:$e.getDate()}),a.jsxs("div",{className:"space-y-0.5 max-h-[70px] overflow-y-auto",children:[ee&&Ge.map(Xt=>a.jsx("div",{onClick:_r=>{_r.stopPropagation(),_(Xt)},className:`p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate ${Xt.priority==="High"?"bg-red-100 text-red-700":Xt.priority==="Medium"?"bg-amber-100 text-amber-700":"bg-blue-100 text-blue-700"}`,title:Xt.title,children:Xt.title},Xt.id)),Ue&&nt.map(Xt=>a.jsx("div",{onClick:_r=>{_r.stopPropagation(),Xt.htmlLink&&window.open(Xt.htmlLink,"_blank")},className:"p-1 rounded text-[8px] font-bold cursor-pointer hover:opacity-80 transition-all truncate bg-indigo-100 text-indigo-700",title:Xt.title,children:Xt.title},Xt.id)),Ge.length+nt.length<ut.length&&a.jsxs("div",{className:"text-[8px] text-slate-400 font-bold px-1",children:["+",ut.length-(Ge.length+nt.length)]})]})]},We)})})]})}};return a.jsxs("div",{className:"h-full flex flex-col gap-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-10",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Schedule"}),a.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[l==="monthly"?a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{const G=new Date(i);G.setMonth(G.getMonth()-1),o(G)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Previous month",children:a.jsx(yk,{className:"w-4 h-4"})}),a.jsx("p",{className:"text-slate-500 text-sm font-medium min-w-[140px] text-center",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),a.jsx("button",{onClick:()=>{const G=new Date(i);G.setMonth(G.getMonth()+1),o(G)},className:"p-1.5 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600 transition-colors",title:"Next month",children:a.jsx(ra,{className:"w-4 h-4"})})]}):l==="weekly"?a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:(()=>{const G=xt(i),oe=G[0],Pe=G[6];return`${oe.toLocaleDateString("en-US",{month:"short",day:"numeric"})} - ${Pe.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}`})()}):a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:i.toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2.5 py-1 bg-indigo-50 border border-indigo-100 rounded-lg",children:[a.jsx(Qa,{className:"w-3 h-3 text-indigo-600"}),a.jsx("span",{className:"text-[10px] font-bold text-indigo-600 tracking-wide",children:Ke})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white px-3 py-2 rounded-xl border border-slate-200 shadow-sm",children:[a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:Ue,onChange:G=>me(G.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${Ue?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:Ue&&a.jsx(Yd,{className:"w-3 h-3 text-white"})})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Events"})]}),a.jsx("div",{className:"w-px h-4 bg-slate-200"}),a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"checkbox",checked:ee,onChange:G=>fe(G.target.checked),className:"sr-only"}),a.jsx("div",{className:`w-5 h-5 rounded border-2 transition-all flex items-center justify-center ${ee?"bg-indigo-600 border-indigo-600":"bg-white border-slate-300 group-hover:border-indigo-400"}`,children:ee&&a.jsx(Yd,{className:"w-3 h-3 text-white"})})]}),a.jsx("span",{className:"text-[10px] font-bold text-slate-700 uppercase tracking-wider",children:"Tasks"})]})]}),a.jsx("div",{className:"flex bg-white p-1 rounded-xl border border-slate-200 shadow-sm",children:["daily","weekly","monthly"].map(G=>a.jsx("button",{onClick:()=>c(G),className:`px-4 py-1.5 text-[10px] font-black uppercase tracking-widest rounded-lg transition-all ${l===G?"bg-indigo-600 text-white shadow-md":"text-slate-400 hover:text-slate-600"}`,children:G},G))}),a.jsxs("div",{className:"flex items-center gap-2 bg-white p-1 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsx("button",{onClick:vt,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(yk,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>o(new Date),className:`px-4 py-1.5 font-bold text-[10px] uppercase tracking-widest rounded-xl transition-all ${Je()?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:text-slate-700 hover:bg-slate-50"}`,children:"Today"}),a.jsx("button",{onClick:ke,className:"p-2 hover:bg-slate-50 rounded-xl text-slate-400 hover:text-slate-600 transition-colors",children:a.jsx(ra,{className:"w-5 h-5"})})]}),a.jsxs("button",{onClick:r,className:"px-5 py-2.5 bg-indigo-600 text-white rounded-xl text-sm font-black shadow-lg shadow-indigo-100 hover:bg-indigo-700 transition-all flex items-center gap-2",children:[a.jsx($r,{className:"w-4 h-4"}),"New Entry"]})]})]}),a.jsxs("div",{className:"flex-1 grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 bg-white rounded-[32px] border border-slate-200 shadow-sm overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"px-6 py-4 border-b border-slate-100 bg-slate-50/50 flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("h3",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.2em]",children:"Schedule"}),a.jsx("span",{className:"text-slate-300",children:""}),a.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-slate-100 rounded-lg",children:[a.jsx(Qa,{className:"w-3 h-3 text-slate-500"}),a.jsx("span",{className:"text-[9px] font-bold text-slate-500 tracking-wide",children:Ke})]})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[N&&a.jsx(ct,{className:"w-3 h-3 animate-spin text-indigo-600"}),a.jsx("div",{className:`flex items-center gap-2 px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-wider ${w?"bg-emerald-50 text-emerald-600 border border-emerald-100":"bg-slate-100 text-slate-400"}`,children:w?"Google Workspace Connected":"Google Disconnected"})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto relative bg-white",children:[l==="daily"&&ee&&u.length>0&&a.jsxs("div",{className:"px-6 py-6 bg-slate-50/50 border-b border-slate-100 space-y-3",children:[a.jsxs("h4",{className:"text-[10px] font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Qr,{className:"w-3 h-3"})," Today's Deliverables"]}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:u.map(G=>a.jsxs("div",{className:"bg-white p-4 rounded-2xl border border-slate-200 shadow-sm group hover:border-indigo-200 transition-all flex items-start gap-3",children:[a.jsx("div",{className:"mt-1",children:G.status==="Done"?a.jsx(Qr,{className:"w-4 h-4 text-emerald-500"}):a.jsx(Hd,{className:"w-4 h-4 text-slate-300 group-hover:text-indigo-400"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:`text-xs font-bold truncate ${G.status==="Done"?"line-through text-slate-400":"text-slate-900"}`,children:G.title}),a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:`text-[8px] font-black px-1.5 py-0.5 rounded border uppercase ${Ye(G.priority)}`,children:G.priority})})]})]},G.id))})]}),Pr()]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-900 rounded-[32px] p-8 text-white shadow-2xl relative overflow-hidden group",children:[a.jsxs("div",{className:"relative z-10",children:[a.jsx(vi,{className:"w-8 h-8 text-indigo-400 mb-6"}),a.jsx("h3",{className:"text-2xl font-black mb-2 leading-tight",children:"Unified Workspace"}),a.jsx("p",{className:"text-slate-400 text-sm leading-relaxed mb-8 opacity-80",children:"Synchronize your calendar, billing, and accounting software in one central hub."}),a.jsx("button",{onClick:()=>t("integrations"),className:"w-full py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-900 flex items-center justify-center gap-3",children:"Go to Integrations"})]}),a.jsx("div",{className:"absolute -right-8 -bottom-8 w-48 h-48 bg-indigo-500/10 rounded-full blur-3xl group-hover:bg-indigo-500/20 transition-all pointer-events-none"})]}),a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col items-center justify-center text-center space-y-4",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-full flex items-center justify-center text-slate-300",children:a.jsx(u0,{className:"w-6 h-6"})}),a.jsxs("div",{className:"space-y-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900 uppercase tracking-widest",children:"Workspace Statistics"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium leading-relaxed",children:"No data collected for current period. Stats will populate as you add tasks and events."})]})]})]})]}),j&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:fr}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:fr,className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(zt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:"w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl bg-indigo-500 shadow-indigo-100",children:a.jsx(Qr,{className:"w-8 h-8"})}),a.jsxs("div",{className:"flex-1",children:[T?a.jsx("input",{type:"text",value:M.title,onChange:G=>F(oe=>({...oe,title:G.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-xl font-black text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100",placeholder:"Task title"}):a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:j.title}),a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border ${j.status==="Done"?"bg-emerald-50 text-emerald-600 border-emerald-100":j.status==="In Progress"?"bg-blue-50 text-blue-600 border-blue-100":j.status==="Review"?"bg-amber-50 text-amber-600 border-amber-100":"bg-slate-50 text-slate-600 border-slate-100"}`,children:j.status}),a.jsxs("span",{className:"text-slate-400 text-xs font-bold",children:[" Task ID: #",j.id.substring(0,8)]})]})]})]}),a.jsx("div",{className:"flex items-center gap-2",children:T?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>{D(!1),F({title:j.title,category:j.category||"",description:j.description||"",dueDate:j.dueDate||"",priority:j.priority||"Medium",status:j.status||"Todo",assigneeId:j.assigneeId,projectId:j.projectId||""})},disabled:A,className:"px-4 py-2 border border-slate-200 text-slate-400 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Sr,disabled:A||!M.title.trim()||!M.assigneeId,className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:A?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),"Save Changes"]})})]}):a.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx(Eo,{className:"w-4 h-4"}),"Edit Task"]})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 space-y-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Assignee"}),T?a.jsxs("select",{value:M.assigneeId,onChange:G=>F(oe=>({...oe,assigneeId:G.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"Select Assignee"}),v.map(G=>a.jsx("option",{value:G.id,children:G.name},G.id))]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-xl flex items-center justify-center text-indigo-600 font-black text-sm",children:((De=(ge=v.find(G=>G.id===j.assigneeId))==null?void 0:ge.name)==null?void 0:De.charAt(0))||"U"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((Ce=v.find(G=>G.id===j.assigneeId))==null?void 0:Ce.name)||"Unassigned"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Linked Project"}),T?a.jsxs("select",{value:M.projectId,onChange:G=>F(oe=>({...oe,projectId:G.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"",children:"None"}),g.filter(G=>!G.archived).map(G=>a.jsx("option",{value:G.id,children:G.title},G.id))]}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:j.projectId?((Oe=g.find(G=>G.id===j.projectId))==null?void 0:Oe.title)||"Unknown Project":"None"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Dn,{className:"w-4 h-4 text-indigo-500"})," Description"]}),T?a.jsx(zA,{value:M.description||"",onChange:G=>F(oe=>({...oe,description:G})),placeholder:"Add task description..."}):a.jsxs("div",{className:"p-6 bg-slate-950 rounded-[32px] text-indigo-50 relative overflow-hidden shadow-2xl",children:[j.description?a.jsx(NU,{content:j.description,className:"text-sm leading-relaxed opacity-90 z-10 relative prose prose-invert prose-headings:text-indigo-50 prose-p:text-indigo-50 prose-strong:text-indigo-100 prose-a:text-indigo-300 prose-ul:text-indigo-50 prose-ol:text-indigo-50 prose-li:text-indigo-50"}):a.jsx("p",{className:"text-sm leading-relaxed italic opacity-90 z-10 relative",children:"No description provided."}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsxs("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex items-center gap-1.5",children:[a.jsx(Xa,{className:"w-3.5 h-3.5"})," Task Category"]}),T?a.jsxs("div",{className:"space-y-2 mt-2",children:[a.jsxs("select",{value:V?"__new__":M.category||"",onChange:G=>{const oe=G.target.value;oe==="__new__"?(J(!0),F(Pe=>({...Pe,category:""}))):(J(!1),F(Pe=>({...Pe,category:oe})))},className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:16px_16px] bg-[right_12px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),B.map(G=>a.jsx("option",{value:G,children:G},G)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),V&&a.jsx("input",{type:"text",value:M.category,onChange:G=>F(oe=>({...oe,category:G.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100"})]}):a.jsx("div",{className:"flex items-center gap-2 mt-2",children:j.category?a.jsxs(a.Fragment,{children:[a.jsx(Xa,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-sm font-bold text-indigo-700",children:j.category})]}):a.jsx("p",{className:"text-sm text-slate-400",children:"No category"})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Due Date"}),T?a.jsx("input",{type:"date",value:M.dueDate,onChange:G=>F(oe=>({...oe,dueDate:G.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2"}):a.jsx("p",{className:"text-sm font-bold text-slate-900 mt-2",children:j.dueDate?Bt(j.dueDate):"Ongoing"})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Priority"}),T?a.jsx("div",{className:"flex gap-2 mt-2",children:["Low","Medium","High"].map(G=>a.jsx("button",{onClick:()=>F(oe=>({...oe,priority:G})),className:`flex-1 px-3 py-2 rounded-xl text-xs font-black uppercase transition-all ${M.priority===G?"bg-indigo-600 text-white shadow-lg":"bg-white text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:G},G))}):a.jsx("div",{className:`inline-block px-3 py-1 rounded-full text-xs font-black uppercase mt-2 ${j.priority==="High"?"bg-red-50 text-red-600":j.priority==="Medium"?"bg-amber-50 text-amber-600":"bg-slate-50 text-slate-600"}`,children:j.priority})]})]}),a.jsxs("div",{className:"p-6 bg-slate-50 rounded-[24px] border border-slate-100",children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Status"}),T?a.jsxs("select",{value:M.status,onChange:G=>F(oe=>({...oe,status:G.target.value})),className:"w-full px-4 py-2 bg-white border-2 border-indigo-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 mt-2",children:[a.jsx("option",{value:"Todo",children:"Todo"}),a.jsx("option",{value:"In Progress",children:"In Progress"}),a.jsx("option",{value:"Review",children:"Review"}),a.jsx("option",{value:"Done",children:"Done"})]}):a.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[j.status==="Done"?a.jsx(Qr,{className:"w-5 h-5 text-emerald-500"}):j.status==="In Progress"?a.jsx(Qa,{className:"w-5 h-5 text-blue-500 animate-pulse"}):a.jsx(Hd,{className:"w-5 h-5 text-slate-400"}),a.jsx("p",{className:"text-sm font-bold text-slate-900 capitalize",children:j.status})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(wi,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",j.notes&&j.notes.length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:j.notes.length})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",children:[a.jsx("textarea",{ref:Fe,rows:5,value:U,onChange:It,onBlur:()=>{setTimeout(()=>ne(!1),200)},className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-2 focus:ring-indigo-200 focus:border-indigo-300 resize-none overflow-hidden",style:{minHeight:"120px",maxHeight:"360px"},placeholder:"Add a note or comment... (Use @ to mention users)"}),ve&&Ne.length>0&&a.jsx("div",{className:"absolute bottom-full mb-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-50 max-h-48 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Hh,{className:"w-3 h-3"}),"Mention User"]}),Ne.map(G=>a.jsxs("button",{onClick:()=>yr(G),className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:G.name.charAt(0)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:G.name}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:G.email})]})]},G.id))]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:W?a.jsx(_o,{className:"w-4 h-4"}):a.jsx(cd,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:W?(R==null?void 0:R.name)||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:Ee,type:"file",accept:"image/*",onChange:cr,className:"hidden"})]}),a.jsx("button",{onClick:jr,disabled:L||!U.trim()&&!R,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:L?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jo,{className:"w-4 h-4"}),"Send"]})})]}),W&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:W,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{E(""),q(null),Ee.current&&(Ee.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(zt,{className:"w-4 h-4"})})]})]}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:j.notes&&j.notes.length>0?[...j.notes].reverse().map(G=>{var Pe;const oe=(e==null?void 0:e.role)==="Admin"||G.userId===(e==null?void 0:e.id);return a.jsxs("div",{className:"p-4 bg-white border border-slate-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:((Pe=G.userName)==null?void 0:Pe.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:G.userName}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(G.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),oe&&a.jsx("button",{onClick:()=>Z(G.id),disabled:se===G.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:se===G.id?a.jsx(ct,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),G.text&&a.jsx("p",{className:"text-sm text-slate-700 leading-relaxed pl-10",children:Fr(G.text)}),G.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsx("img",{src:G.imageUrl,alt:G.imageName||"Note attachment",className:"max-w-full max-h-64 object-contain rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const $e=window.open();$e&&$e.document.write(`<img src="${G.imageUrl}" style="max-width:100%;height:auto;" />`)}})})]},G.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(wi,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("button",{onClick:()=>xe(!ye),className:"w-full flex items-center justify-between group",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2 group-hover:text-indigo-600 transition-colors",children:[a.jsx(Cu,{className:"w-4 h-4 text-indigo-500"}),"Activity Log"]}),a.jsx(ra,{className:`w-4 h-4 text-slate-400 transition-transform ${ye?"rotate-90":""}`})]}),ye&&a.jsxs("div",{className:"space-y-2 pl-6 border-l-2 border-indigo-100",children:[a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task created"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:j.createdAt?new Date(j.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0}):"Unknown"})]})]}),j.updatedAt&&j.updatedAt!==j.createdAt&&a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Task updated"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(j.updatedAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]}),j.notes&&j.notes.map((G,oe)=>a.jsxs("div",{className:"flex items-start gap-3 pb-3",children:[a.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 mt-1.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-xs font-bold text-slate-900",children:[G.userName," added a comment"]}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-0.5",children:new Date(G.createdAt).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})})]})]},G.id)),(!j.notes||j.notes.length===0)&&(!j.updatedAt||j.updatedAt===j.createdAt)&&a.jsx("p",{className:"text-xs text-slate-400 italic",children:"No recent activity"})]})]})]})}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4 shrink-0",children:[a.jsx("button",{onClick:()=>{Ae(j),fr()},className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:fr,className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(Qr,{className:"w-5 h-5"})," Close"]})]})]})]}),we&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Task?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The task will be permanently removed."})]})]}),a.jsx("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:a.jsx("p",{className:"text-xs font-bold text-slate-900",children:we.title})})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Ae(null),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:async()=>{if(we)try{await OR(we.id),m(G=>G.filter(oe=>oe.id!==we.id)),p(G=>G.filter(oe=>oe.id!==we.id)),Ae(null),_(null),s("Task deleted successfully")}catch(G){n(G.message||"Failed to delete task")}},className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg",children:"Delete Task"})]})]})})]})},AEe=()=>{const{showSuccess:e}=hn(),[t,r]=P.useState(null),[n,s]=P.useState([]),i=l=>{r(l),setTimeout(()=>{s(c=>[...c,l]),r(null),e(`${l.charAt(0).toUpperCase()+l.slice(1)} connected successfully!`)},1500)},o=[{id:"google",name:"Google Workspace",description:"Sync your Gmail, Calendar, and Drive to streamline communication and scheduling.",icon:a.jsx(ba,{className:"w-8 h-8 text-blue-500"}),color:"bg-blue-50",status:"Communication & Scheduling",isComingSoon:!0},{id:"stripe",name:"Stripe",description:"Automate invoice payments and financial reporting with the world's leading payment platform.",icon:a.jsx(zF,{className:"w-8 h-8 text-indigo-500"}),color:"bg-indigo-50",status:"Payment Processing",isComingSoon:!0},{id:"zoho",name:"Zoho Books",description:"Bi-directional sync of contacts, invoices, and accounting data with your Zoho workspace.",icon:a.jsx(Th,{className:"w-8 h-8 text-emerald-500"}),color:"bg-emerald-50",status:"Accounting & Finance",isComingSoon:!0}];return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Integrations"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Connect your favorite tools to the ImpactFlow OS ."})]}),a.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-emerald-50 text-emerald-700 rounded-xl text-xs font-black uppercase tracking-widest border border-emerald-100",children:[a.jsx(P5,{className:"w-4 h-4"})," Secure Enterprise Sync"]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map(l=>{const c=n.includes(l.id),d=t===l.id;return a.jsxs("div",{className:"bg-white rounded-[32px] border border-slate-200 p-8 shadow-sm flex flex-col h-full hover:border-indigo-300 transition-all group relative overflow-visible",children:[l.isComingSoon&&a.jsxs("div",{className:"absolute top-3 right-3 z-10 bg-indigo-100 text-indigo-700 rounded-full border border-indigo-200 shadow-sm px-3 py-1.5 text-center leading-tight whitespace-nowrap",children:[a.jsx("div",{className:"text-[10px] font-black uppercase tracking-widest",children:"Coming Soon"}),a.jsx("div",{className:"text-[8px] font-bold uppercase tracking-wider text-indigo-600",children:"In Development"})]}),a.jsxs("div",{className:"flex justify-between items-start mb-8",children:[a.jsx("div",{className:`w-16 h-16 ${l.color} rounded-[20px] flex items-center justify-center group-hover:scale-110 transition-transform shrink-0`,children:l.icon}),!l.isComingSoon&&(c?a.jsxs("div",{className:"px-3 py-1 bg-emerald-50 text-emerald-600 rounded-full text-[10px] font-black uppercase tracking-tighter flex items-center gap-1.5",children:[a.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"})," Active"]}):a.jsx("div",{className:"px-3 py-1 bg-slate-50 text-slate-400 rounded-full text-[10px] font-black uppercase tracking-tighter",children:"Disconnected"}))]}),a.jsx("h3",{className:"text-xl font-bold text-slate-900 mb-2",children:l.name}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] mb-4",children:l.status}),a.jsx("p",{className:"text-sm text-slate-500 leading-relaxed flex-1 mb-8",children:l.description}),a.jsxs("div",{className:"pt-6 border-t border-slate-50 space-y-3",children:[a.jsx("button",{onClick:()=>!c&&!l.isComingSoon&&i(l.id),disabled:d||c||l.isComingSoon,className:`w-full py-4 rounded-2xl font-black text-xs uppercase tracking-widest transition-all flex items-center justify-center gap-2 ${c?"bg-slate-50 text-slate-400 cursor-default":l.isComingSoon?"bg-slate-50 text-slate-400 cursor-not-allowed opacity-60":"bg-indigo-600 text-white shadow-lg shadow-indigo-100 hover:bg-indigo-700 active:scale-[0.98]"}`,children:d?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):c?a.jsxs(a.Fragment,{children:["Connected ",a.jsx(Qr,{className:"w-4 h-4"})]}):l.isComingSoon?a.jsx(a.Fragment,{children:"Development in Progress"}):a.jsxs(a.Fragment,{children:["Connect ",l.name," ",a.jsx(Oi,{className:"w-4 h-4"})]})}),a.jsxs("button",{className:"w-full py-2.5 text-slate-400 hover:text-slate-600 text-[10px] font-black uppercase tracking-widest flex items-center justify-center gap-2",children:["View API Docs ",a.jsx(za,{className:"w-3 h-3"})]})]})]},l.id)})}),a.jsxs("div",{className:"bg-slate-900 rounded-[40px] p-12 text-white relative overflow-hidden group shadow-2xl",children:[a.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[a.jsx("div",{className:"w-12 h-12 bg-white/10 rounded-2xl flex items-center justify-center mb-8 backdrop-blur-md",children:a.jsx(z2,{className:"w-6 h-6 text-indigo-400"})}),a.jsxs("h2",{className:"text-4xl font-black mb-4 tracking-tight leading-tight",children:["Request Custom ",a.jsx("br",{}),a.jsx("span",{className:"text-indigo-400",children:"Webhooks & API Sync"})]}),a.jsx("p",{className:"text-slate-400 text-lg leading-relaxed mb-10 opacity-80",children:"Need to connect your specialized logistics software or internal ERP? Our engineering team builds custom bridges for Impact Enterprise clients."}),a.jsx("button",{className:"px-10 py-5 bg-white text-slate-900 font-black uppercase text-xs tracking-widest rounded-2xl hover:bg-indigo-50 transition-all active:scale-95 shadow-xl",children:"Contact Integration Team"})]}),a.jsx("div",{className:"absolute right-0 top-0 w-1/2 h-full opacity-10 translate-x-1/4 pointer-events-none",children:a.jsx(z2,{className:"w-full h-full text-indigo-600"})})]})]})};function CEe(e){if(e==null||Object.keys(e).length===0)return"";const t=Object.keys(e).sort().reduce((r,n)=>(r[n]=e[n],r),{});return JSON.stringify(t)}const Ca={all:["shared-inbox"],emails:()=>[...Ca.all,"emails"],emailsList:(e,t)=>[...Ca.emails(),e,CEe(t)],senders:(e,t)=>[...Ca.all,"senders",e,t]},EEe=(e,t,r)=>{const n=(t==null?void 0:t.limit)||50;return eye({queryKey:Ca.emailsList(e||"",t),queryFn:async({pageParam:s})=>{if(!e)return{data:[],hasMore:!1,total:0,nextCursor:void 0};const i={...t,limit:n};typeof s=="string"?i.cursor=s:s!=null&&s!==void 0?i.page=Number(s):i.page=0;const o=await UR(e,i),l=(o==null?void 0:o.data)??o??[],c=Array.isArray(l)?l:[],d=o==null?void 0:o.hasMore,f=typeof d=="boolean"?d:c.length>=n;return{data:c,hasMore:f,total:(o==null?void 0:o.total)??c.length,nextCursor:o==null?void 0:o.nextCursor}},getNextPageParam:(s,i)=>{if(s.hasMore)return s.nextCursor?s.nextCursor:i.length},initialPageParam:void 0,enabled:!!e&&(r==null?void 0:r.enabled)!==!1,staleTime:r==null?void 0:r.staleTime,refetchInterval:r==null?void 0:r.refetchInterval,refetchOnWindowFocus:!1,refetchOnMount:!1,placeholderData:s=>s})},TEe=(e,t)=>ps({queryKey:Ca.senders(e||"",t),queryFn:async()=>{if(!e)return[];const r=await m1e(e,t);return(r==null?void 0:r.data)??r??[]},enabled:!!e,staleTime:5*60*1e3}),OEe=()=>{const e=oa();return Cs({mutationFn:async({userId:t,accountEmail:r,scopeHours:n,scopeDays:s})=>await c1e(t,r,n,s),onSuccess:()=>{e.invalidateQueries({queryKey:Ca.emails()})}})},PEe=({isOpen:e,onClose:t,userId:r,emailId:n,emailSubject:s,emailBody:i,participants:o=[],extractedDetails:l,onCreateSuccess:c})=>{const{showSuccess:d,showError:f}=hn(),[u,p]=P.useState(!1),[h,m]=P.useState(!1),[g,x]=P.useState([]),[v,b]=P.useState(!1),[w,y]=P.useState({title:"",description:"",start:"",end:"",location:"",participants:[],createInGoogleCalendar:!0});P.useEffect(()=>{var A;if(!e)return;const j=new Date;j.setDate(j.getDate()+1),j.setHours(10,0,0,0);const _=new Date(j);_.setHours(11,0,0,0);let T=j.toISOString().substring(0,16),D=_.toISOString().substring(0,16);if(l!=null&&l.date||l!=null&&l.time)try{const C=l.date||"tomorrow",M=l.time||"10:00 AM";let F=new Date;if(C.toLowerCase().includes("tomorrow"))F.setDate(F.getDate()+1);else if(!C.toLowerCase().includes("today")){const Y=C.match(/(\d{1,2})\/(\d{1,2})\/(\d{2,4})/);if(Y){const[,V,J,U]=Y;F=new Date(parseInt(U)<100?2e3+parseInt(U):parseInt(U),parseInt(V)-1,parseInt(J))}}const B=M.match(/(\d{1,2}):?(\d{2})?\s*(am|pm)?/i);if(B){let Y=parseInt(B[1]);const V=B[2]?parseInt(B[2]):0,J=(A=B[3])==null?void 0:A.toLowerCase();J==="pm"&&Y!==12&&(Y+=12),J==="am"&&Y===12&&(Y=0),F.setHours(Y,V,0,0),T=F.toISOString().substring(0,16);const U=new Date(F);U.setHours(U.getHours()+1),D=U.toISOString().substring(0,16)}}catch(C){console.warn("Failed to parse extracted date/time:",C)}y({title:(l==null?void 0:l.title)||s||"Meeting",description:(l==null?void 0:l.description)||(i==null?void 0:i.substring(0,500))||"",start:T,end:D,location:(l==null?void 0:l.location)||"",participants:(l==null?void 0:l.participants)||o||[],createInGoogleCalendar:!0})},[e,l,s,i,o]);const N=async()=>{if(!w.start||!w.end||w.participants.length===0){f("Please set date/time and add participants to check availability");return}m(!0);try{const j=new Date(w.start).toISOString().split("T")[0],_=new Date(w.end).toISOString().split("T")[0],T=await sbe(r,w.participants,j,_);T.success&&T.data&&(x(T.data),b(!0))}catch(j){f(j.message||"Failed to check availability")}finally{m(!1)}},S=async j=>{if(j.preventDefault(),!w.title||!w.start||!w.end){f("Please fill in all required fields");return}if(!n){f("Email ID is required to create meeting");return}p(!0);try{(await abe({userId:r,emailId:n,title:w.title,description:w.description,start:new Date(w.start).toISOString(),end:new Date(w.end).toISOString(),location:w.location,participants:w.participants,createInGoogleCalendar:w.createInGoogleCalendar})).success&&(d("Meeting created successfully!"),c==null||c(),t())}catch(_){f(_.message||"Failed to create meeting")}finally{p(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[250] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:a.jsx(Ln,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Schedule Meeting"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"From Email"})]})]}),a.jsx("button",{onClick:t,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l&&(l.date||l.time||l.location)&&a.jsx("div",{className:"mb-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex items-start gap-2",children:[a.jsx(On,{className:"w-4 h-4 text-indigo-600 mt-0.5 flex-shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-semibold text-indigo-900 mb-1",children:"Extracted Meeting Details"}),a.jsxs("div",{className:"text-xs text-indigo-700 space-y-0.5",children:[l.date&&a.jsxs("p",{children:["Date: ",l.date]}),l.time&&a.jsxs("p",{children:["Time: ",l.time]}),l.location&&a.jsxs("p",{children:["Location: ",l.location]})]})]})]})}),a.jsxs("form",{onSubmit:S,className:"space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Meeting Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync Meeting",value:w.title,onChange:j=>y({...w,title:j.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Qa,{className:"w-3 h-3"})," Start Time *"]}),a.jsx("input",{required:!0,type:"datetime-local",value:w.start,onChange:j=>y({...w,start:j.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Qa,{className:"w-3 h-3"})," End Time *"]}),a.jsx("input",{required:!0,type:"datetime-local",value:w.end,onChange:j=>y({...w,end:j.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(WF,{className:"w-3 h-3"})," Location"]}),a.jsx("input",{type:"text",placeholder:"e.g. Conference Room A, Zoom, Google Meet",value:w.location,onChange:j=>y({...w,location:j.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(s0,{className:"w-3 h-3"})," Participants"]}),w.participants.length>0&&a.jsx("button",{type:"button",onClick:N,disabled:h||!w.start||!w.end,className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:h?"Checking...":"Check Availability"})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 p-3 bg-slate-50 border border-slate-200 rounded-xl min-h-[50px]",children:[w.participants.map((j,_)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:[j,a.jsx("button",{type:"button",onClick:()=>y({...w,participants:w.participants.filter((T,D)=>D!==_)}),className:"hover:text-indigo-900",children:a.jsx(zt,{className:"w-3 h-3"})})]},_)),a.jsx("input",{type:"email",placeholder:"Add participant email...",onKeyDown:j=>{if(j.key==="Enter"&&j.currentTarget.value.trim()){j.preventDefault();const _=j.currentTarget.value.trim();w.participants.includes(_)||y({...w,participants:[...w.participants,_]}),j.currentTarget.value=""}},className:"flex-1 min-w-[200px] bg-transparent border-none outline-none text-sm"})]})]}),v&&g.length>0&&a.jsxs("div",{className:"space-y-2 p-3 bg-amber-50 border border-amber-200 rounded-xl",children:[a.jsx("p",{className:"text-xs font-semibold text-amber-900",children:"Team Availability"}),g.map((j,_)=>a.jsxs("div",{className:"text-xs text-amber-800",children:[a.jsx("p",{className:"font-medium",children:j.userId}),j.busySlots&&j.busySlots.length>0?a.jsxs("p",{className:"text-amber-700 mt-0.5",children:["Busy: ",j.busySlots.length," conflict(s)"]}):a.jsx("p",{className:"text-emerald-700 mt-0.5",children:"Available"})]},_))]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description"}),a.jsx("textarea",{placeholder:"Meeting agenda, notes, or details...",value:w.description,onChange:j=>y({...w,description:j.target.value}),rows:4,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),a.jsxs("div",{className:"flex items-center gap-2 p-3 bg-slate-50 rounded-xl",children:[a.jsx("input",{type:"checkbox",id:"createInGoogleCalendar",checked:w.createInGoogleCalendar,onChange:j=>y({...w,createInGoogleCalendar:j.target.checked}),className:"w-4 h-4 text-indigo-600 rounded focus:ring-indigo-500"}),a.jsx("label",{htmlFor:"createInGoogleCalendar",className:"text-sm text-slate-700 cursor-pointer",children:"Create in Google Calendar"})]})]})]}),a.jsxs("div",{className:"flex gap-3 p-6 border-t border-slate-100 bg-slate-50/50 flex-shrink-0",children:[a.jsx("button",{type:"button",onClick:t,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-white rounded-2xl transition-colors border border-slate-200",children:"Cancel"}),a.jsx("button",{type:"button",onClick:S,disabled:u||!w.title||!w.start||!w.end||!n,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed",children:u?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Yd,{className:"w-4 h-4"}),"Create Meeting"]})})]})]})}):null},IEe={"shared-inbox:read":["Viewer","Collaborator","Admin"],"shared-inbox:view-emails":["Viewer","Collaborator","Admin"],"shared-inbox:view-notes":["Viewer","Collaborator","Admin"],"shared-inbox:view-assignments":["Viewer","Collaborator","Admin"],"shared-inbox:add-note":["Collaborator","Admin"],"shared-inbox:edit-note":["Collaborator","Admin"],"shared-inbox:delete-note":["Collaborator","Admin"],"shared-inbox:assign-email":["Admin"],"shared-inbox:unassign-email":["Admin"],"shared-inbox:send-email":["Admin"],"shared-inbox:reply-email":["Admin"],"shared-inbox:forward-email":["Admin"],"shared-inbox:star-email":["Collaborator","Admin"],"shared-inbox:archive-email":["Admin"],"shared-inbox:delete-email":["Admin"],"shared-inbox:update-metadata":["Admin"],"shared-inbox:manage-accounts":["Admin"],"shared-inbox:manage-routing-rules":["Admin"],"shared-inbox:manage-templates":["Collaborator","Admin"],"shared-inbox:manage-signatures":["Collaborator","Admin"],"shared-inbox:manage-labels":["Admin"],"shared-inbox:sync-emails":["Admin"],"admin:manage-users":["Admin"],"admin:manage-settings":["Admin"],"admin:view-analytics":["Admin"]},HU=e=>e?e==="User"||e==="user"?"Collaborator":e==="Admin"||e==="admin"?"Admin":e==="Viewer"||e==="viewer"?"Viewer":e==="Collaborator"||e==="collaborator"?"Collaborator":"Viewer":"Viewer",Zl=(e,t)=>{const r=HU(e);return(IEe[t]||[]).includes(r)},DEe=e=>HU(e)==="Admin",p2=st.forwardRef((e,t)=>a.jsx(eA,{...e,ref:t}));p2.displayName="QuillEditor";function fD({content:e,highlightTerm:t}){const r=P.useRef(null),n=e||"No content",s=/<[a-z][\s\S]*>/i.test(n);if(P.useEffect(()=>{if(!r.current)return;const l=r.current.querySelectorAll("img[data-src]");if(l.length===0)return;const c=new IntersectionObserver(d=>{d.forEach(f=>{if(f.isIntersecting){const u=f.target,p=u.getAttribute("data-src");p&&(u.src=p,u.removeAttribute("data-src"),u.loading="lazy",c.unobserve(u))}})},{rootMargin:"50px"});return l.forEach(d=>c.observe(d)),()=>{l.forEach(d=>c.unobserve(d))}},[e]),t&&t.trim()){const l=t.trim().replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),c=new RegExp(`(${l})`,"gi"),f=(s?n.replace(/<[^>]+>/g," ").replace(/\s+/g," ").trim():n).replace(c,'<mark class="bg-amber-200 rounded px-0.5">$1</mark>'),u=_1.sanitize(f,{ALLOWED_TAGS:["mark","br"]});return a.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",style:{whiteSpace:"pre-wrap"},dangerouslySetInnerHTML:{__html:u}})}const i=s?_1.sanitize(n,{ADD_ATTR:["target","loading"],ADD_TAGS:["img"]}):"";let o=i;return s&&i&&(o=i.replace(/<img([^>]*?)src=["']([^"']+)["']([^>]*?)>/gi,(l,c,d,f)=>`<img${c}data-src="${d}" loading="lazy"${f}>`)),a.jsx("div",{ref:r,className:"prose prose-slate max-w-none text-sm break-words email-body-content",...s?{dangerouslySetInnerHTML:{__html:o}}:{style:{whiteSpace:"pre-wrap"},children:n}})}const LEe=90*1e3;let hD=0;const WU=({currentUser:e})=>{var Up,Y0,Vl,Dc,Lc,Q0,zp;const{showSuccess:t,showError:r}=hn(),n=oa(),s=e||(typeof window<"u"?JSON.parse(localStorage.getItem("user_data")||"null"):null),i=s==null?void 0:s.id,o=(s==null?void 0:s.role)||"Viewer",l=Zl(o,"shared-inbox:add-note"),c=Zl(o,"shared-inbox:assign-email"),d=Zl(o,"shared-inbox:send-email"),f=Zl(o,"shared-inbox:reply-email"),u=Zl(o,"shared-inbox:forward-email"),p=Zl(o,"shared-inbox:star-email"),h=Zl(o,"shared-inbox:archive-email"),m=Zl(o,"shared-inbox:delete-email"),g=Zl(o,"shared-inbox:update-metadata");Zl(o,"shared-inbox:manage-accounts");const x=Zl(o,"shared-inbox:sync-emails"),v=(O,te="An error occurred")=>O?typeof O=="string"?O:typeof O=="object"?typeof O.message=="string"&&O.message?O.message:O.error&&typeof O.error=="object"&&typeof O.error.message=="string"&&O.error.message?O.error.message:te:te:te,b=O=>!O||typeof O!="string"?"":O.replace(/\n/g,"<br/>"),w=async(O,te)=>{try{return await O()}catch(le){const Me=v(le,"An error occurred");return te&&te(Me),null}},[y,N]=P.useState(null),[S,j]=P.useState(!1),[_,T]=P.useState(!1),[D,A]=P.useState(!1),C=P.useRef(!1),M=P.useRef(null),F=P.useRef(null),[B,Y]=P.useState(""),[V,J]=P.useState(null),[U,X]=P.useState(""),[W,E]=P.useState(""),[R,q]=P.useState("contains"),[L,H]=P.useState(void 0),[se,ce]=P.useState(""),[ae,Z]=P.useState(""),[ve,ne]=P.useState(void 0),[He,Xe]=P.useState(void 0),[ie,Q]=P.useState(""),[Ne,de]=P.useState(!1),[ye,xe]=P.useState(!1),{data:we=[]}=TEe(i,Ne?150:void 0),[Ae,Ue]=P.useState([]),[me,ee]=P.useState(!1),[fe,Fe]=P.useState(""),[Ee,qe]=P.useState(!1),[Ke,Qe]=P.useState([]),[_t,vt]=P.useState([]),[ke,Je]=P.useState(!1),[mt,ue]=P.useState(""),[Ye,bt]=P.useState(null),[xt,Vt]=P.useState(null),[gr,qt]=P.useState(null),[Gt,Bt]=P.useState("list"),[fr,Sr]=P.useState(new Set),[Cr,cr]=P.useState(new Set),[It,yr]=P.useState({}),[wr,Fr]=P.useState(""),[jr,Pr]=P.useState(""),[ge,De]=P.useState(null),[Ce,Oe]=P.useState(!1),[G,oe]=P.useState(null),[Pe,$e]=P.useState(null),[We,Ve]=P.useState([]),[Re,_e]=P.useState(null),[Ge,nt]=P.useState(!1),ut=P.useRef(null),wt=P.useRef(null),[Mt,Xt]=P.useState(!1),[_r,$n]=P.useState([]),[Ts,Pn]=P.useState(null),[Vs,ya]=P.useState(!1),[gs,Fa]=P.useState(""),[dn,dl]=P.useState([]),[Gn,Si]=P.useState(!1),[Ul,pd]=P.useState(""),[ii,Be]=P.useState(0),[gt,Pt]=P.useState([]),[$t,dr]=P.useState(null),[hr,Mr]=P.useState([]),[Wn,Jn]=P.useState(!1),[_n,Nr]=P.useState(""),Rt=P.useRef(null),[Ur,lr]=P.useState({isOpen:!1,imageUrl:"",imageName:void 0}),[pr,Qt]=P.useState(null),[An,Ir]=P.useState({}),[Jt,tn]=P.useState([]),[ur,nr]=P.useState(!1),[ar,Un]=P.useState(null),[wa,vs]=P.useState(!1),[yn,Mi]=P.useState(null),[Lo,Na]=P.useState([]),[oi,rn]=P.useState(null),[Jr,sn]=P.useState(!1),[Ie,Dt]=P.useState([]),[ir,kr]=P.useState(""),[Xr,un]=P.useState(!1),In=P.useRef(null),rs=P.useRef(null),Os=P.useRef(!1),[ul,Qx]=P.useState("domain"),[fl,Fo]=P.useState(""),[Sc,md]=P.useState(""),[xd,zl]=P.useState([]),[Jx,gd]=P.useState(!1),[P0,_c]=P.useState(!1),[hl,Ac]=P.useState(""),[ef,I0]=P.useState(!1),[tf,vd]=P.useState(""),[ma,D0]=P.useState(null),[Cc,rf]=P.useState(!1),[z,pe]=P.useState([]),[ze,et]=P.useState(!1),[lt,Nt]=P.useState(!1),[Ft,sr]=P.useState(!1),[Ar,Gr]=P.useState(null),[zr,mn]=P.useState(null),[ja,ka]=P.useState(null),[ns,Gs]=P.useState(null),[Ps,Mo]=P.useState(null),[Ks,pl]=P.useState([]),[Ec,nf]=P.useState(""),[L0,ru]=P.useState(!1),[af,sf]=P.useState(!1),[of,as]=P.useState(!1),[mo,ml]=P.useState(!1),[Ma,nu]=P.useState("compose"),[Kr,Xs]=P.useState([]),[Sa,li]=P.useState([]),[zn,Is]=P.useState([]),[Ra,Ro]=P.useState(""),[Ha,bs]=P.useState(""),[la,ss]=P.useState(""),[Ri,ql]=P.useState(""),[Bo,lf]=P.useState([]),[xl,Wa]=P.useState([]),[cf,ci]=P.useState(!1),[Bi,Tc]=P.useState(!1),[df,bd]=P.useState(!1),[$o,$i]=P.useState(""),[xo,Uo]=P.useState(""),[gl,zo]=P.useState(""),[qo,F0]=P.useState([]),[_i,Ds]=P.useState(!1),[Kn,Zn]=P.useState(0),[xn,xa]=P.useState([]),vl=P.useRef(null),[M0,bl]=P.useState(!1),[uf,R0]=P.useState([]),[yd,Ui]=P.useState(!1),[di,B0]=P.useState(""),[$0,xb]=P.useState(null),[U0,bp]=P.useState([]),[yp,gb]=P.useState([]),[z0,Zx]=P.useState([]),[q0,eg]=P.useState([]),[wp,vb]=P.useState({contacts:[],companies:[]}),[bb,yb]=P.useState(!1),[Np,wb]=P.useState([]),[jp,Nb]=P.useState([]),[ff,kp]=P.useState([]),[Sp,jb]=P.useState(!1),[RN,wd]=P.useState(!1),[Nd,au]=P.useState(null),[BN,tg]=P.useState(!1),[zi,Ho]=P.useState(!1),[Hl,_p]=P.useState(null),[kb,go]=P.useState(!1),[Wo,$N]=P.useState(null),[Ap,Sb]=P.useState(!1),[jd,rg]=P.useState(null),[_b,Ab]=P.useState(!1),[su,Cp]=P.useState({}),[hf,Ep]=P.useState(!1),[UN,H0]=P.useState(!1),[ng,Tp]=P.useState(""),[Cb,zN]=P.useState(Intl.DateTimeFormat().resolvedOptions().timeZone),[Eb,ag]=P.useState([]),[Tb,W0]=P.useState(!1),[qN,Op]=P.useState(!1),[Va,k]=P.useState(new Set),[I,K]=P.useState(!1),[re,he]=P.useState(!1),[be,je]=P.useState("date"),[Se,Te]=P.useState("desc"),[Le,tt]=P.useState(!1),[ft,ht]=P.useState(null),it=P.useRef(null),Et=P.useRef(null),yt=P.useRef(null),rt=P.useRef(null),at=P.useCallback(O=>{const te={searchText:""};if(!O||typeof O!="string")return te;const le=[];let Me="",pt=!1;for(let dt=0;dt<O.length;dt++){const Ut=O[dt];if(Ut==='"'){pt=!pt;continue}if(!pt&&(Ut===" "||Ut==="	")){Me&&(le.push(Me),Me="");continue}Me+=Ut}Me&&le.push(Me);const Ct=[];for(const dt of le){const Ut=dt.match(/^from:(.+)$/i);if(Ut){te.from=Ut[1].trim();continue}const Ht=dt.match(/^subject:(.+)$/i);if(Ht){te.subject=Ht[1].trim();continue}if(/^has:attachment$/i.test(dt)){te.hasAttachment=!0;continue}if(/^has:no-attachment$/i.test(dt)||/^-has:attachment$/i.test(dt)){te.hasAttachment=!1;continue}if(/^is:read$/i.test(dt)){te.isRead=!0;continue}if(/^is:unread$/i.test(dt)){te.isRead=!1;continue}if(/^is:starred$/i.test(dt)){te.isStarred=!0;continue}if(/^is:unstarred$/i.test(dt)){te.isStarred=!1;continue}Ct.push(dt)}return te.searchText=Ct.join(" ").trim(),te},[]),At=P.useMemo(()=>{const O=at(B),te={};O.searchText&&(te.search=O.searchText),ie&&(te.status=ie);const le=O.from??U;le&&(te.from=le);const Me=O.subject??W;Me&&(te.subject=Me,te.subjectOperator=R);const pt=O.hasAttachment!==void 0?O.hasAttachment:L;pt!==void 0&&(te.hasAttachment=pt),se&&(te.dateFrom=se),ae&&(te.dateTo=ae),ar&&(te.labelId=ar);const Ct=O.isRead!==void 0?O.isRead:ve;Ct!==void 0&&(te.isRead=Ct);const dt=O.isStarred!==void 0?O.isStarred:He;return dt!==void 0&&(te.isStarred=dt),te},[B,ie,U,W,R,L,se,ae,ar,ve,He,at]),{data:Ot,isLoading:Tt,isFetchingNextPage:tr,hasNextPage:Kt,fetchNextPage:Tr,error:rr,refetch:on}=EEe(i,Object.keys(At).length>0?At:void 0,{staleTime:60*1e3,refetchInterval:2*60*1e3}),Cn=P.useMemo(()=>Ot!=null&&Ot.pages?Ot.pages.flatMap(le=>le.data||[]).filter((le,Me,pt)=>le.id&&Me===pt.findIndex(Ct=>Ct.id===le.id)):[],[Ot]);((Up=Ot==null?void 0:Ot.pages[0])==null?void 0:Up.total)??Cn.length;const gn=OEe(),nn=P.useCallback(()=>{Os.current||tr||!Kt||!i||(Os.current=!0,Tr())},[tr,Kt,Tr,i]);P.useEffect(()=>{tr||(Os.current=!1)},[tr]),P.useEffect(()=>{if(rr){const O=(rr==null?void 0:rr.message)||"Failed to load inbox";qt(O),(O.toLowerCase().includes("google")||O.toLowerCase().includes("connected"))&&J(!1)}else qt(null)},[rr]),P.useEffect(()=>{const O=In.current,te=rs.current;if(!O||!te||!Kt||tr)return;let le=null,Me=null,pt=null;const Ct=400;try{le=new IntersectionObserver(dt=>{dt[0].isIntersecting&&Kt&&!tr&&nn()},{threshold:.1,rootMargin:"300px",root:te}),le.observe(O)}catch(dt){console.warn("[INBOX] IntersectionObserver failed, using scroll fallback:",dt)}return Me=()=>{tr||!Kt||pt==null&&(pt=setTimeout(()=>{pt=null;const dt=te,Ut=O;if(!dt||!Ut||tr||!Kt)return;const Ht=dt.getBoundingClientRect(),Dr=Ut.getBoundingClientRect(),Lr=Ht.bottom-Dr.top;Lr<500&&Lr>-100&&nn()},Ct))},te.addEventListener("scroll",Me,{passive:!0}),()=>{pt!=null&&clearTimeout(pt),le&&le.disconnect(),Me&&te&&te.removeEventListener("scroll",Me)}},[Kt,tr,nn,Gt,Cn.length]);const Xn=P.useCallback(async()=>{var O;if(i)try{const te=await W6(i),le=(te==null?void 0:te.connected)===!0||((O=te==null?void 0:te.data)==null?void 0:O.connected)===!0;J(le)}catch{J(!1)}},[i]),jn=P.useCallback(async()=>{if(i){ru(!0);try{const O=await L1e(i),te=(O==null?void 0:O.data)??O??[],le=Array.isArray(te)?te:[];pl(le.filter(Me=>Me.domain&&String(Me.domain).trim()||!1))}catch(O){console.error("[INBOX] Failed to load excluded domains:",O),r(v(O,"Failed to load excluded domains")),pl([])}finally{ru(!1)}}},[i,r]),Yr=P.useCallback(async()=>{if(!(!i||!Ec.trim())){sf(!0);try{await F1e(i,Ec.trim()),nf(""),await jn(),t("Domain added to exclusion list"),on()}catch(O){console.error("[INBOX] Failed to add excluded domain:",O),r(v(O,"Failed to add excluded domain"))}finally{sf(!1)}}},[i,Ec,jn,on,t,r]),is=P.useCallback(async O=>{if(i)try{await M1e(i,O),await jn(),t("Domain removed from exclusion list"),on()}catch(te){console.error("[INBOX] Failed to remove excluded domain:",te),r(v(te,"Failed to remove excluded domain"))}},[i,jn,on,t,r]),ui=P.useCallback(async()=>{if(i)try{const O=await d1e(i),te=(O==null?void 0:O.data)??O??[],le=Array.isArray(te)?te.filter((Me,pt,Ct)=>{const dt=(Me.email||"").toLowerCase();return Ct.findIndex(Ut=>(Ut.email||"").toLowerCase()===dt&&Ut.userId===Me.userId)===pt}):[];Qe(le),J(le.length>0),le.length>0&&!la&&ss(le[0].email)}catch(O){console.error("[INBOX] Failed to load connected accounts:",O),Qe([]),J(!1)}},[i]),Ga=async()=>{var O;if(i)try{const te=await $R(i),le=(te==null?void 0:te.authUrl)||((O=te==null?void 0:te.data)==null?void 0:O.authUrl);le?window.location.href=le:r("Failed to get authorization URL")}catch(te){r((te==null?void 0:te.message)||"Failed to connect account")}},qi=async O=>{if(i){bt(O);try{await u1e(i,O),t(`Disconnected ${O}`),await ui(),await on()}catch(te){r((te==null?void 0:te.message)||"Failed to disconnect account")}finally{bt(null)}}},Tn=P.useCallback(async()=>{if(i)try{const O=await f1e(i),te=(O==null?void 0:O.data)??O??[];vt(Array.isArray(te)?te:[])}catch(O){console.error("[INBOX] Failed to load filtered accounts:",O),vt([])}},[i]),vo=async O=>{if(i){Vt(O);try{await h1e(i,O),await Tn(),await n.invalidateQueries({queryKey:Ca.emails()}),t(`Emails from ${O} will be hidden`)}catch(te){r((te==null?void 0:te.message)||"Failed to filter account")}finally{Vt(null)}}},bo=async(O,te)=>{if(i){Vt(te);try{await p1e(i,O),await Tn(),await n.invalidateQueries({queryKey:Ca.emails()}),t(`Emails from ${te} will now be visible`)}catch(le){r((le==null?void 0:le.message)||"Failed to unfilter account")}finally{Vt(null)}}};P.useEffect(()=>{if(!i){J(!1);return}Xn(),ui(),jn(),Tn()},[i,Xn,ui,jn,Tn]),P.useEffect(()=>{Ke.length>0&&!la&&ss(Ke[0].email)},[Ke]),P.useEffect(()=>{try{const O=typeof window<"u"?localStorage.getItem("impactOS_savedSearches"):null;if(O){const te=JSON.parse(O);Array.isArray(te)&&Ue(te)}}catch{}},[]),P.useEffect(()=>{if(Ae.length!==0)try{localStorage.setItem("impactOS_savedSearches",JSON.stringify(Ae))}catch{}},[Ae]),P.useEffect(()=>{i&&(async()=>{try{const te=await ud(),le=(te==null?void 0:te.data)??te??[];dl(Array.isArray(le)?le:[])}catch(te){const le=(te==null?void 0:te.message)||"Failed to load users";console.error("Failed to load users:",le)}})()},[i]),P.useEffect(()=>{const O=te=>{Rt.current&&!Rt.current.contains(te.target)&&Jn(!1)};if(Wn)return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[Wn]),P.useEffect(()=>{i&&(async()=>{try{const te=await Yh(),le=(te==null?void 0:te.data)??te??[];Wa(Array.isArray(le)?le:[])}catch(te){console.error("Failed to load contacts:",te==null?void 0:te.message)}})()},[i]);const _a=P.useCallback(async(O=!1)=>{if(i&&!(ur&&!O))try{nr(!0);const te=await K1e(i),le=(te==null?void 0:te.labels)??(te==null?void 0:te.data);tn(Array.isArray(le)?le:[])}catch(te){console.error("Error fetching labels:",te),tn([])}finally{nr(!1)}},[i]);P.useEffect(()=>{i&&V&&_a()},[i,V,_a]),P.useEffect(()=>{wa&&yn&&i&&_a(!0)},[wa,yn,i,_a]),P.useEffect(()=>{i&&mo&&(async()=>{if(i)try{const te=await zR(i),le=(te==null?void 0:te.data)??te??[];lf(Array.isArray(le)?le:[]);const Me=le.find(pt=>pt.isDefault);Me&&ql(Me.content||"")}catch(te){console.error("Failed to load signatures:",te==null?void 0:te.message)}})()},[i,mo]);const Ls=async()=>{if(i){j(!0),qt(null);try{await gn.mutateAsync({userId:i,scopeDays:"all"}),t("Syncing all emails from connected accounts")}catch(O){const te=(O==null?void 0:O.message)||"Sync failed";r(te),qt(te)}finally{j(!1)}}},fi=P.useRef(gn),Vo=P.useRef(n);P.useEffect(()=>{fi.current=gn,Vo.current=n},[gn,n]),P.useEffect(()=>{if(!i||!x){M.current&&(clearTimeout(M.current),M.current=null),F.current&&(clearInterval(F.current),F.current=null);return}M.current&&(clearTimeout(M.current),M.current=null),F.current&&(clearInterval(F.current),F.current=null);const O=()=>{const te=Date.now();te-hD<LEe||C.current||(hD=te,C.current=!0,T(!0),fi.current.mutate({userId:i,scopeDays:"all"},{onSuccess:()=>{C.current=!1,T(!1)},onError:le=>{console.log("[INBOX] Background sync failed:",(le==null?void 0:le.message)||"Unknown error"),C.current=!1,T(!1)}}))};return M.current=setTimeout(()=>{O(),M.current=null},30*1e3),F.current=setInterval(()=>{O()},25*60*1e3),()=>{M.current&&(clearTimeout(M.current),M.current=null),F.current&&(clearInterval(F.current),F.current=null),C.current=!1}},[i,x]);const Wl=async O=>{if(i){yb(!0);try{const te=await q1e(O);vb((te==null?void 0:te.data)||{contacts:[],companies:[]})}catch(te){console.error("Failed to load suggested links:",te),vb({contacts:[],companies:[]})}finally{yb(!1)}}},os=async O=>{if(i){jb(!0);try{const[te,le,Me]=await Promise.all([W1e(O).catch(()=>({success:!0,data:[]})),V1e(O).catch(()=>({success:!0,data:[]})),G1e(O).catch(()=>({success:!0,data:[]}))]);wb((te==null?void 0:te.data)||[]),Nb((le==null?void 0:le.data)||[]),kp((Me==null?void 0:Me.data)||[])}catch(te){console.error("Failed to load related items:",te),wb([]),Nb([]),kp([])}finally{jb(!1)}}};P.useEffect(()=>{(async()=>{if(i)try{const[te,le,Me,pt]=await Promise.all([jc().catch(()=>({data:[]})),ib(i).catch(()=>({data:[]})),C0(i).catch(()=>({data:[]})),BR({userId:i}).catch(()=>({data:[]}))]);bp((te==null?void 0:te.data)||[]),gb((le==null?void 0:le.data)||[]),Zx((Me==null?void 0:Me.data)||[]),eg((pt==null?void 0:pt.data)||[])}catch(te){console.error("Failed to load CRM data:",te)}})()},[i]);const Ai=async(O,te)=>{if(!(!(y!=null&&y.id)||!i)){Ho(!0);try{const le=y.id;let Me;switch(O){case"contact":await R1e({emailId:le,contactId:te,userId:i}),Me="contactId";break;case"company":await B1e({emailId:le,companyId:te,userId:i}),Me="companyId";break;case"deal":await $1e({emailId:le,dealId:te,userId:i}),Me="dealId";break;case"project":await U1e({emailId:le,projectId:te,userId:i}),Me="projectId";break;case"contract":await z1e({emailId:le,contractId:te,userId:i}),Me="contractId";break;default:throw new Error(`Unknown link type: ${O}`)}t(`Email linked to ${O} successfully`),N(pt=>pt?{...pt,linkedRecords:{...pt.linkedRecords||{},[Me]:te}}:null),os(le),wd(!1),au(null)}catch(le){r((le==null?void 0:le.message)||`Failed to link email to ${O}`)}finally{Ho(!1)}}},iu=async O=>{if(!(!(y!=null&&y.id)||!i))try{const te=await H1e({emailId:y.id,userId:i,title:O.title||y.subject||"Task from Email",description:O.description||y.body||"",dueDate:O.dueDate,priority:O.priority||"Medium",projectId:O.projectId,assigneeId:O.assigneeId});t("Task created successfully"),tg(!1),os(y.id)}catch(te){r((te==null?void 0:te.message)||"Failed to create task")}},yl=async O=>{if(!i)return;N(null),Na([]),rn(null),$e(null),Ve([]),_e(null),A(!0);const te=!O.isRead;te&&n.setQueriesData({queryKey:Ca.emails()},le=>{if(!(le!=null&&le.pages))return le;const Me=le.pages.map(pt=>{const Ct=pt.data.map(dt=>dt.id===O.id?{...dt,isRead:!0}:dt);return{...pt,data:Ct}});return{...le,pages:Me}});try{const le=await x1e(O.id,i),Me=(le==null?void 0:le.data)??le??{},pt={...O,...Me,body:Me.body??O.lastMessage,gmailThreadId:Me.gmailThreadId??O.gmailThreadId,isRead:!0};N(pt),te&&Oc(O.id,!0,!0).catch(Ct=>{console.error("[INBOX] Failed to mark email as read:",Ct==null?void 0:Ct.message),n.setQueryData(Ca.emailsList(i||"",At),dt=>dt!=null&&dt.pages?{...dt,pages:dt.pages.map(Ut=>({...Ut,data:Ut.data.map(Ht=>Ht.id===O.id?{...Ht,isRead:!1}:Ht)}))}:dt)}),O.id&&(Wl(O.id),os(O.id));try{const Ct=await b1e(O.id),dt=(Ct==null?void 0:Ct.data)??Ct??[];yr(Ut=>({...Ut,[O.id]:dt.map(Ht=>({id:Ht.id,userId:Ht.userId,userName:Ht.userName,message:Ht.message,timestamp:Ht.createdAt,imageUrl:Ht.imageUrl,imageName:Ht.imageName,markedFor:Ht.markedFor||[]}))}))}catch(Ct){const dt=(Ct==null?void 0:Ct.message)||"Failed to load notes";console.error("Failed to load notes:",dt),yr(Ut=>({...Ut,[O.id]:[]}))}if(i)try{et(!0);const Ct=await J3(i,O.id);Ct.success&&Ct.data?pe(Ct.data):pe([])}catch(Ct){console.error("Failed to load calendar events:",Ct.message),pe([])}finally{et(!1)}}catch(le){r((le==null?void 0:le.message)||"Could not load email")}finally{A(!1)}},Oc=async(O,te,le=!1)=>{if(i)try{await cI(O,te,i),n.setQueriesData({queryKey:Ca.emails()},Me=>{if(!(Me!=null&&Me.pages))return Me;const pt=Me.pages.map(Ct=>({...Ct,data:Ct.data.map(dt=>dt.id===O?{...dt,isRead:te,syncStatus:{...dt.syncStatus||{},readStatus:"pending"}}:dt)}));return{...Me,pages:pt}}),(y==null?void 0:y.id)===O&&N(Me=>Me?{...Me,isRead:te,syncStatus:{...Me.syncStatus||{},readStatus:"pending"}}:null),le||t(te?"Marked as read":"Marked as unread")}catch(Me){le?console.error("[INBOX] Failed to mark email as read:",Me==null?void 0:Me.message):(r((Me==null?void 0:Me.message)||"Update failed"),on())}},Ba=async(O,te)=>{try{await g1e(O,te),n.setQueryData(Ca.emailsList(i||"",At),le=>le!=null&&le.pages?{...le,pages:le.pages.map(Me=>({...Me,data:Me.data.map(pt=>pt.id===O?{...pt,isStarred:te,syncStatus:{...pt.syncStatus||{},starredStatus:"pending"}}:pt)}))}:le),(y==null?void 0:y.id)===O&&N(le=>le?{...le,isStarred:te,syncStatus:{...le.syncStatus||{},starredStatus:"pending"}}:null),n.invalidateQueries({queryKey:Ca.emails()}),t(te?"Starred":"Unstarred")}catch(le){r((le==null?void 0:le.message)||"Update failed"),on()}},pf=O=>{if(!O)return null;switch(O){case"synced":return a.jsx(Qr,{className:"w-3 h-3 text-green-500",title:"Synced to Gmail"});case"pending":return a.jsx(Qa,{className:"w-3 h-3 text-amber-500 animate-pulse",title:"Syncing..."});case"failed":return a.jsx(On,{className:"w-3 h-3 text-red-500",title:"Sync failed"});default:return null}},V0=async(O,te=[],le=[],Me=!1,pt)=>{try{if(await Y1e(O,{addLabelIds:te,removeLabelIds:le,trackAccuracy:Me,suggestionId:pt}),n.invalidateQueries({queryKey:Ca.emails()}),(y==null?void 0:y.id)===O){const dt=[...y.labels||[]];te.forEach(Ut=>{dt.includes(Ut)||dt.push(Ut)}),le.forEach(Ut=>{const Ht=dt.indexOf(Ut);Ht>-1&&dt.splice(Ht,1)}),N({...y,labels:dt,syncStatus:{...y.syncStatus||{},labelsStatus:"pending"}})}t("Labels updated")}catch(Ct){r((Ct==null?void 0:Ct.message)||"Failed to update labels")}},Ob=async(O,te)=>{try{await Q1e(O,te),await V0(O,[],[te])}catch(le){r((le==null?void 0:le.message)||"Failed to remove label")}},G0=async(O,te)=>{if(i){I0(!0);try{await X1e({userId:i,accountEmail:te,labelName:O,messageListVisibility:"show",labelListVisibility:"labelShow"}),t("Label created successfully"),await _a(),Ac(""),_c(!1)}catch(le){r((le==null?void 0:le.message)||"Failed to create label")}finally{I0(!1)}}},ou=async(O,te)=>{if(i)try{await Sy(O,{userId:i,...te}),n.invalidateQueries({queryKey:Ca.emails()}),(y==null?void 0:y.id)===O&&N(le=>le?{...le,...te}:null),t("Email updated")}catch(le){r((le==null?void 0:le.message)||"Update failed")}},K0=()=>{K(!I),k(new Set)},Go=O=>{k(te=>{const le=new Set(te);return le.has(O)?le.delete(O):le.add(O),le})},mf=()=>{Va.size===Wi.length?k(new Set):k(new Set(Wi.map(O=>O.id)))},xf=async()=>{if(!(!i||Va.size===0)){he(!0);try{await Promise.all(Array.from(Va).map(O=>cI(O,!0,i))),n.invalidateQueries({queryKey:Ca.emails()}),t(`${Va.size} email(s) marked as read`),k(new Set)}catch(O){r((O==null?void 0:O.message)||"Failed to mark emails as read")}finally{he(!1)}}},Pb=async O=>{if(i)try{await dI(O,i),n.invalidateQueries({queryKey:Ca.emails()}),(y==null?void 0:y.id)===O&&N(te=>te?{...te,threadStatus:"archived"}:null),t("Email archived")}catch(te){r((te==null?void 0:te.message)||"Failed to archive email")}},Pp=async O=>{if(i&&confirm("Are you sure you want to delete this email? This action cannot be undone."))try{await uI(O,i),n.invalidateQueries({queryKey:Ca.emails()}),(y==null?void 0:y.id)===O&&N(null),t("Email deleted")}catch(te){r((te==null?void 0:te.message)||"Failed to delete email")}},Ib=async O=>{if(i)try{await O1e(O,i),n.invalidateQueries({queryKey:Ca.emails()}),(y==null?void 0:y.id)===O&&N(te=>te?{...te,threadStatus:"active"}:null),t("Email restored")}catch(te){r((te==null?void 0:te.message)||"Failed to restore email")}},Ip=async O=>{if(i)try{await Sy(O,{userId:i,threadStatus:"resolved"}),n.invalidateQueries({queryKey:Ca.emails()}),(y==null?void 0:y.id)===O&&N(te=>te?{...te,threadStatus:"resolved"}:null),t("Conversation marked as resolved")}catch(te){r((te==null?void 0:te.message)||"Failed to resolve conversation")}},sg=async()=>{if(!(!i||Va.size===0)){he(!0);try{await Promise.all(Array.from(Va).map(O=>dI(O,i))),n.invalidateQueries({queryKey:Ca.emails()}),t(`${Va.size} email(s) archived`),k(new Set)}catch(O){r((O==null?void 0:O.message)||"Failed to archive emails")}finally{he(!1)}}},Dp=async()=>{if(!(!i||Va.size===0)&&confirm(`Are you sure you want to delete ${Va.size} email(s)? This action cannot be undone.`)){he(!0);try{await Promise.all(Array.from(Va).map(te=>uI(te,i)));const O=Array.from(Va);n.invalidateQueries({queryKey:Ca.emails()}),y&&Va.has(y.id)&&N(null),t(`${O.length} email(s) deleted`),k(new Set)}catch(O){r((O==null?void 0:O.message)||"Failed to delete emails")}finally{he(!1)}}},X0=async(O,te,le,Me)=>{if(!i)return;const pt=`${O}-${te}-view`;Ir(Ct=>({...Ct,[pt]:!0}));try{const Ct=await fI(O,te,i),dt=window.URL.createObjectURL(Ct);Qt({isOpen:!0,emailId:O,attachmentId:te,filename:le,mimeType:Me,url:dt})}catch(Ct){r((Ct==null?void 0:Ct.message)||"Failed to load attachment")}finally{Ir(Ct=>({...Ct,[pt]:!1}))}},ig=async(O,te,le)=>{if(!i)return;const Me=`${O}-${te}-download`;Ir(pt=>({...pt,[Me]:!0}));try{const pt=await fI(O,te,i),Ct=window.URL.createObjectURL(pt),dt=document.createElement("a");dt.href=Ct,dt.download=le,document.body.appendChild(dt),dt.click(),window.URL.revokeObjectURL(Ct),document.body.removeChild(dt),t("Attachment downloaded")}catch(pt){r((pt==null?void 0:pt.message)||"Failed to download attachment")}finally{Ir(pt=>({...pt,[Me]:!1}))}},og=O=>{if(O===0)return"0 Bytes";const te=1024,le=["Bytes","KB","MB","GB"],Me=Math.floor(Math.log(O)/Math.log(te));return Math.round(O/Math.pow(te,Me)*100)/100+" "+le[Me]},Pc=O=>O.startsWith("image/"),Hi=O=>O==="application/pdf",HN=O=>{const te=O.target.files;if(!te||te.length===0)return;const le=25*1024*1024,Me=[];Array.from(te).forEach(pt=>{if(pt.size>le){r(`File "${pt.name}" is too large. Maximum size is 25MB.`);return}const Ct=`${Date.now()}-${Math.random()}`;let dt;pt.type.startsWith("image/")&&(dt=URL.createObjectURL(pt)),Me.push({file:pt,preview:dt,id:Ct})}),xa([...xn,...Me]),vl.current&&(vl.current.value="")},Lp=async(O,te)=>{if(i){Ui(!0);try{const le=await ibe(i,la||void 0,void 0,O||di,te),Me=(le==null?void 0:le.data)||le||{};R0(te?pt=>[...pt,...Me.files||[]]:Me.files||[]),xb(Me.nextPageToken||null)}catch(le){const Me=(le==null?void 0:le.message)||"Failed to load Drive files";Me.includes("not connected")||(le==null?void 0:le.code)==="ACCOUNT_NOT_CONNECTED"?r(`Google account ${la||"selected account"} is not connected. Please connect your Google account in Settings.`):r(Me),te||R0([])}finally{Ui(!1)}}},WN=async O=>{if(!(!i||!mo))try{const te=Ma!=="compose"&&(y!=null&&y.id)?y.id:`draft_${Date.now()}`;if(Ma==="compose"){const le={id:`drive_${O.id}`,file:new Nl([],O.name,{type:O.mimeType}),isDriveFile:!0,driveFileId:O.id,driveWebViewLink:O.webViewLink,driveIconLink:O.iconLink,preview:O.thumbnailLink||O.iconLink};xa([...xn,le]),bl(!1),t("Drive file added")}else await pI({userId:i,emailId:y.id,fileId:O.id,fileName:O.name,fileMimeType:O.mimeType,webViewLink:O.webViewLink,webContentLink:O.webContentLink,iconLink:O.iconLink}),bl(!1),t("Drive file attached"),y&&yl(y)}catch(te){r((te==null?void 0:te.message)||"Failed to attach Drive file")}},Db=O=>{const te=xn.find(le=>le.id===O);te!=null&&te.preview&&URL.revokeObjectURL(te.preview),Cp(le=>{const Me={...le};return delete Me[O],Me}),xa(xn.filter(le=>le.id!==O))},Fp=async()=>{var O;if(!i||!la||!Ra||!Ha){r("Please fill in subject and message to save draft");return}Ep(!0);try{await P1e({userId:i,accountEmail:la||((O=Ke[0])==null?void 0:O.email),to:Kr.length>0?Kr:void 0,cc:Sa.length>0?Sa:void 0,bcc:zn.length>0?zn:void 0,subject:Ra,body:Ha}),t("Draft saved to Gmail")}catch(te){const le=v(te,"Failed to save draft");r(le)}finally{Ep(!1)}},Lb=async()=>{var O;if(!(!i||!la)){W0(!0);try{const te=await I1e(i,la||((O=Ke[0])==null?void 0:O.email)),le=(te==null?void 0:te.data)||te||[];ag(Array.isArray(le)?le:[])}catch(te){const le=v(te,"Failed to load drafts");r(le),ag([])}finally{W0(!1)}}};P.useEffect(()=>()=>{xn.forEach(O=>{O.preview&&URL.revokeObjectURL(O.preview)})},[xn]),P.useEffect(()=>{!mo&&xn.length>0&&(xn.forEach(O=>{O.preview&&URL.revokeObjectURL(O.preview)}),xa([]))},[mo,xn]);const Fb=(O,te=1200,le=1200,Me=.8)=>new Promise((pt,Ct)=>{const dt=new FileReader;dt.onload=Ut=>{var Dr;const Ht=new Image;Ht.onload=()=>{let Lr=Ht.width,en=Ht.height;Lr>en?Lr>te&&(en=en*te/Lr,Lr=te):en>le&&(Lr=Lr*le/en,en=le);const kn=document.createElement("canvas");kn.width=Lr,kn.height=en;const Vn=kn.getContext("2d");Vn?(Vn.drawImage(Ht,0,0,Lr,en),pt(kn.toDataURL("image/jpeg",Me))):Ct(new Error("Canvas context not available"))},Ht.onerror=Ct,Ht.src=(Dr=Ut.target)==null?void 0:Dr.result},dt.onerror=Ct,dt.readAsDataURL(O)}),Mp=async O=>{var le;const te=(le=O.target.files)==null?void 0:le[0];if(te){if(!te.type.startsWith("image/")){r("Please select an image file");return}if(te.size>10*1024*1024){r("Image size must be less than 10MB");return}try{const Me=await Fb(te,1200,1200,.8);Pr(Me),De(te)}catch(Me){r(Me.message||"Failed to process image")}}},lg=O=>{const te=document.createElement("div");te.innerHTML=O;const le=te.textContent||te.innerText||"",Me=/@([A-Za-z0-9\s]+?)(?=\s|$|[.,!?])/g,pt=[];let Ct;for(;(Ct=Me.exec(le))!==null;){const dt=Ct[1].trim(),Ut=dn.find(Ht=>Ht.name.toLowerCase()===dt.toLowerCase());Ut&&Ut.id!==i&&pt.push(Ut.id)}return[...new Set(pt)]},lu=P.useMemo(()=>({toolbar:[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["link"],["clean"]],keyboard:{bindings:{mention:{key:"@",handler:()=>!0}}}}),[]),Rp=["header","bold","italic","underline","strike","list","bullet","link"],VN=P.useCallback((O,te,le,Me)=>{if(Fr(O),Et.current=Me,le==="user"){const pt=Me.getSelection(!0);if(pt){const dt=Me.getText().substring(0,pt.index),Ut=dt.lastIndexOf("@");if(Ut!==-1){const Ht=dt.substring(Ut+1),Dr=Ut>0?dt[Ut-1]:" ";if(Dr===" "||Dr===`
`||Ut===0)if(!Ht.includes(" ")&&!Ht.includes(`
`)&&Ht.length<50){dr(Ut),pd(Ht);const Lr=dn.filter(en=>{var kn,Vn;return((kn=en.name)==null?void 0:kn.toLowerCase().includes(Ht.toLowerCase()))||((Vn=en.email)==null?void 0:Vn.toLowerCase().includes(Ht.toLowerCase()))});Pt(Lr),Si(Lr.length>0)}else Si(!1),dr(null);else Si(!1),dr(null)}else Si(!1),dr(null)}}},[dn]),Bp=P.useCallback(O=>{const te=Et.current;if(!te){console.error("[INBOX] Quill editor not available");return}te.focus();const le=te.getText();let Me=$t;if((Me===null||Me<0)&&(Me=le.lastIndexOf("@")),Me===-1){console.error("[INBOX] Could not find @ symbol for mention"),Si(!1),dr(null);return}const pt=le.substring(Me+1),Ct=pt.indexOf(" "),dt=pt.indexOf(`
`);let Ut=pt.length;Ct!==-1&&(Ut=Math.min(Ut,Ct)),dt!==-1&&(Ut=Math.min(Ut,dt));const Ht=Me,Dr=Me+1+Ut,Lr=Dr-Ht;console.log("[INBOX] Inserting mention:",{atIndex:Me,deleteStartIndex:Ht,deleteEndIndex:Dr,deleteLength:Lr,textAfterAt:pt.substring(0,Ut),mentionText:`@${O.name} `}),te.setSelection(Ht,Lr,"api"),te.deleteText(Ht,Lr,"api");const en=`@${O.name} `;te.insertText(Ht,en,"api"),te.formatText(Ht,en.length-1,{bold:!0,color:"#4338ca"},"api");const kn=Ht+en.length;te.setSelection(kn,0,"api");const Vn=te.root.innerHTML;Fr(Vn),Si(!1),dr(null)},[$t]),Mb=async()=>{if(!y||!wr.trim()&&!ge||!i||!s){!wr.trim()&&!ge&&r("Please enter a note or upload an image");return}Oe(!0);try{const O=y.id,te=s.name||s.email||"You",le=document.createElement("div");le.innerHTML=wr;const pt=(le.textContent||le.innerText||"").trim()?wr.trim():"",Ct={emailId:O,userId:i,userName:te,message:pt};if(hr.length>0&&(Ct.markedFor=hr),jr&&jr.trim()){if(jr.length>75e4){r("Image is too large. Please use a smaller image."),Oe(!1);return}Ct.imageUrl=jr,ge!=null&&ge.name&&(Ct.imageName=ge.name)}const dt=await v1e(Ct),Ut=(dt==null?void 0:dt.data)||{};if(!Ut.id&&!Ut.emailId)throw console.error("[INBOX] Invalid note response:",dt),new Error("Invalid response from server. Note was not created.");const Ht={id:Ut.id||`thread-${Date.now()}`,userId:i,userName:te,message:pt,timestamp:Ut.createdAt||new Date().toISOString(),imageUrl:jr||void 0,imageName:(ge==null?void 0:ge.name)||void 0,markedFor:Ut.markedFor||[]};yr(en=>({...en,[O]:[Ht,...en[O]||[]]}));const Dr=lg(pt);if(Dr.length>0)for(const en of Dr)try{await kx({userId:en,type:"mention",title:"You were mentioned in an email note",message:`${te} mentioned you in a note on email: "${y.subject||"Untitled"}"`,link:`/?tab=inbox&email=${O}`,read:!1})}catch(kn){const Vn=(kn==null?void 0:kn.message)||"Failed to send notification";console.error("Failed to send notification:",Vn)}Fr(""),Pr(""),De(null),Mr([]),yt.current&&(yt.current.value=""),Et.current&&Et.current.setText("");const Lr=(dt==null?void 0:dt.message)||(Dr.length>0?`Note added and ${Dr.length} user(s) notified`:"Internal note added");t(Lr)}catch(O){const te=v(O,"Failed to add note");console.error("[INBOX] Error adding note:",te),r(te)}finally{Oe(!1)}},cg=async(O,te)=>{if(!(!i||!s)){oe(te);try{await y1e(te,i),yr(le=>({...le,[O]:(le[O]||[]).filter(Me=>Me.id!==te)})),t("Note deleted")}catch(le){const Me=v(le,"Failed to delete note");r(Me)}finally{oe(null)}}},Ic=async O=>{if(!(!y||!i)){nt(!0),Ve([]),_e(null),$e(null);try{const te=await w1e(y.id,i,O),le=(te==null?void 0:te.data)??te??{};if(le.variations&&Array.isArray(le.variations)&&le.variations.length>0)Ve(le.variations),_e(0),$e(b(le.variations[0].draft)),t(`Generated ${le.variations.length} draft variations`);else{let Me=le.draft;(!Me||typeof Me!="string")&&(Me=`Hi ${y.sender||"there"},

Thank you for your email regarding "${y.subject||"your inquiry"}".

[AI-generated draft response - customize as needed]

Best regards,
${(s==null?void 0:s.name)||"Team"}`),$e(b(Me)),Ve([{style:"default",description:"AI-generated draft",draft:Me,confidence:75}]),_e(0),t("AI draft generated")}}catch(te){const le=v(te,"Failed to generate draft");nt(!1),setTimeout(()=>{console.error("[INBOX] Error generating draft:",le),r(le)},0)}finally{nt(!1)}}},dg=async()=>{if(!i||!Ra||Kr.length===0){r("Please enter a subject and recipient to generate AI draft");return}Ab(!0),rg(null);try{const te=`Hi ${Kr[0].split("@")[0]},

${Ra?`Regarding: ${Ra}`:""}

[Your message here]

Best regards,
${(s==null?void 0:s.name)||"Team"}`;await new Promise(le=>setTimeout(le,1e3)),rg(b(te)),t("AI draft generated")}catch(O){const te=v(O,"Failed to generate draft");r(te)}finally{Ab(!1)}},Rb=()=>{if(!Pe)return;let O="";try{if(wt.current&&typeof wt.current.getText=="function")O=wt.current.getText();else{const te=document.createElement("div");te.innerHTML=Pe,O=te.textContent||te.innerText||""}}catch(te){const le=document.createElement("div");le.innerHTML=Pe||"",O=le.textContent||le.innerText||"";const Me=(te==null?void 0:te.message)||"Error extracting text";console.error("[INBOX] Error extracting draft text:",Me)}navigator.clipboard.writeText(O).then(()=>{t("Draft copied to clipboard! You can paste it into your email client.")}).catch(te=>{try{const le=document.createElement("textarea");le.value=O,document.body.appendChild(le),le.select(),document.execCommand("copy"),document.body.removeChild(le),t("Draft copied to clipboard!")}catch(le){const Me=(le==null?void 0:le.message)||"Failed to copy to clipboard";console.error("[INBOX] Clipboard copy failed:",Me),r("Failed to copy draft. Please select and copy manually.")}})},GN=()=>{!Pe||!i||!y||(Fa(""),ya(!0))},ug=async()=>{if(!gs||!gs.trim()||!Pe||!i||!y){r("Please enter a template name");return}try{const O=typeof Pe=="string"?Pe:String(Pe||"");await N1e({name:gs.trim(),content:O,userId:i,category:"email-response"}),t("Template saved successfully!"),ya(!1),Fa(""),wl()}catch(O){const te=v(O,"Failed to save template");console.error("[INBOX] Error saving template:",te),r(te)}},wl=async()=>{if(i)try{const O=await j1e(i),te=(O==null?void 0:O.data)??O??[];$n(Array.isArray(te)?te:[])}catch(O){const te=(O==null?void 0:O.message)||"Failed to load templates";console.error("Failed to load templates:",te)}};P.useEffect(()=>{i&&wl()},[i]),P.useEffect(()=>{i&&mo&&wl()},[i,mo]);const fg=(O,te=100)=>{if(!O)return"";let le=O.replace(/<[^>]+>/g," ").replace(/&nbsp;/g," ").replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/\s+/g," ").trim();if(le=le.replace(/https?:\/\/[^\s]+/g,"").trim(),le=le.replace(/\s+/g," ").trim(),le.length<=te)return le;const Me=le.substring(0,te),pt=Me.lastIndexOf(" ");return pt>te*.7?Me.substring(0,pt)+"...":Me+"..."},Wi=P.useMemo(()=>{let te=[...Cn.filter((le,Me,pt)=>le.id&&Me===pt.findIndex(Ct=>Ct.id===le.id))];return ie==="archived"?te=te.filter(le=>le.threadStatus==="archived"):ie&&ie!=="archived"?te=te.filter(le=>le.status===ie):ie||(te=te.filter(le=>le.threadStatus!=="archived")),ar&&(te=te.filter(le=>(le.labels||[]).includes(ar))),Le&&i&&(te=te.filter(le=>le.owner===i)),ft&&(te=te.filter(le=>le.owner===ft)),te.sort((le,Me)=>{let pt=0;switch(be){case"date":const Ct=parseInt(le.internalDate||"0")||0;pt=(parseInt(Me.internalDate||"0")||0)-Ct;break;case"sender":const Ut=(le.sender||le.email||"").toLowerCase(),Ht=(Me.sender||Me.email||"").toLowerCase();pt=Ut.localeCompare(Ht);break;case"subject":const Dr=(le.subject||"").toLowerCase(),Lr=(Me.subject||"").toLowerCase();pt=Dr.localeCompare(Lr);break;case"unread":if(le.isRead===Me.isRead){const en=parseInt(le.internalDate||"0")||0;pt=(parseInt(Me.internalDate||"0")||0)-en}else pt=le.isRead?1:-1;break}return Se==="asc"?-pt:pt}),te},[Cn,ar,Le,ft,i,be,Se]);P.useEffect(()=>{y!=null&&y.id&&(Wi.some(te=>te.id===y.id)||(N(null),Na([]),rn(null),$e(null),Ve([]),_e(null),pe([]),yr(te=>{const le={...te};return delete le[y.id],le})))},[Wi,y==null?void 0:y.id]);const KN=Wi.filter(O=>!O.isRead).length,hg=P.useMemo(()=>{if(Gt==="list")return null;const O=new Map;Wi.forEach(le=>{const Me=le.gmailThreadId||le.id;O.has(Me)||O.set(Me,[]),O.get(Me).push(le)});const te=Array.from(O.entries()).map(([le,Me])=>{const pt=[...Me].sort((Ct,dt)=>{const Ut=parseInt(Ct.internalDate||"0")||0;return(parseInt(dt.internalDate||"0")||0)-Ut});return{threadId:le,emails:pt,latestEmail:pt[0],unreadCount:pt.filter(Ct=>!Ct.isRead).length}});return te.sort((le,Me)=>{let pt=0;const Ct=le.latestEmail,dt=Me.latestEmail;switch(be){case"date":const Ut=parseInt(Ct.internalDate||"0")||0;pt=(parseInt(dt.internalDate||"0")||0)-Ut;break;case"sender":const Dr=(Ct.sender||Ct.email||"").toLowerCase(),Lr=(dt.sender||dt.email||"").toLowerCase();pt=Dr.localeCompare(Lr);break;case"subject":const en=(Ct.subject||"").toLowerCase(),kn=(dt.subject||"").toLowerCase();pt=en.localeCompare(kn);break;case"unread":if(le.unreadCount>0&&Me.unreadCount===0)pt=-1;else if(le.unreadCount===0&&Me.unreadCount>0)pt=1;else if(le.unreadCount===Me.unreadCount){const Vn=parseInt(Ct.internalDate||"0")||0;pt=(parseInt(dt.internalDate||"0")||0)-Vn}else pt=Me.unreadCount-le.unreadCount;break}return Se==="asc"?-pt:pt}),te},[Wi,Gt,be,Se]),$p=O=>{Sr(te=>{const le=new Set(te);return le.has(O)?le.delete(O):le.add(O),le})},gf=O=>{cr(te=>{const le=new Set(te);return le.has(O)?le.delete(O):le.add(O),le})};return i?a.jsxs("div",{className:"flex-1 min-h-0 flex flex-col animate-in fade-in duration-300 pb-8 min-w-0 relative",children:[_&&a.jsxs("div",{className:"fixed bottom-6 right-6 z-50 flex items-center gap-2 px-3 py-2 bg-indigo-600 text-white text-xs font-medium rounded-full shadow-lg border border-indigo-500/30 animate-in fade-in duration-200",title:"Auto-syncing emails from connected accounts",role:"status","aria-live":"polite",children:[a.jsx(ct,{className:"w-4 h-4 animate-spin flex-shrink-0"}),a.jsx("span",{children:"Auto-syncing"})]}),a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 pb-4 border-b border-slate-200 shrink-0",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Shared Inbox"}),ar&&a.jsxs("span",{className:"px-2 py-1 bg-indigo-100 text-indigo-700 text-xs font-medium rounded-lg",children:["Filtered: ",((Y0=Jt.find(O=>O.id===ar))==null?void 0:Y0.name)||ar]})]}),a.jsxs("p",{className:"text-slate-500 text-sm mt-0.5",children:["Unified view from all team members' Gmail accounts  ",KN," unread",ar&&`  ${Wi.length} email${Wi.length!==1?"s":""} with label`]})]}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[Jt.length>0&&a.jsx("div",{className:"relative",children:a.jsxs("select",{value:ar||"",onChange:O=>{const te=O.target.value||null;Un(te);const le=document.querySelector(".overflow-y-auto");le&&(le.scrollTop=0)},className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors cursor-pointer",children:[a.jsx("option",{value:"",children:"All Labels"}),Jt.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]})}),a.jsxs("button",{onClick:()=>Bt(Gt==="threads"?"list":"threads"),className:"inline-flex items-center gap-2 px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-xl hover:bg-slate-50 transition-colors",title:Gt==="threads"?"Switch to list view":"Switch to threaded view",children:[a.jsx(wi,{className:"w-4 h-4"}),Gt==="threads"?"Threads":"List"]}),x&&a.jsxs("button",{onClick:Ls,disabled:S,className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 disabled:opacity-60 transition-colors",children:[S?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(Vd,{className:"w-4 h-4"}),S?"Syncing":"Sync from Gmail"]}),Ke.length>0&&a.jsxs("button",{onClick:()=>Je(!0),className:"inline-flex items-center gap-1.5 px-3 py-2 bg-emerald-50 hover:bg-emerald-100 border border-emerald-200 rounded-lg text-xs font-medium text-emerald-700 transition-colors",title:`${Ke.length} connected account${Ke.length!==1?"s":""}`,children:[a.jsx(Qr,{className:"w-3.5 h-3.5 text-emerald-600"}),a.jsx("span",{className:"hidden sm:inline",children:"Accounts"}),a.jsx("span",{className:"px-1.5 py-0.5 bg-emerald-600 text-white text-[10px] font-bold rounded-full",children:Ke.length})]})]})]}),V===!1&&Ke.length===0&&a.jsxs("div",{className:"mt-4 p-4 bg-amber-50 border border-amber-200 rounded-xl flex items-start gap-3",children:[a.jsx(On,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-amber-800 font-medium text-sm",children:"Connect Gmail to sync inbox"}),a.jsx("p",{className:"text-amber-700 text-xs mt-1",children:"Link your Google account to start syncing emails. You can connect multiple Gmail accounts."}),a.jsxs("button",{onClick:Ga,className:"mt-3 px-4 py-2 bg-amber-600 text-white text-sm font-semibold rounded-lg hover:bg-amber-700 transition-colors flex items-center gap-2",children:[a.jsx($r,{className:"w-4 h-4"}),"Connect Gmail Account"]})]})]}),a.jsxs("div",{className:"mt-4 shrink-0 space-y-2 px-1",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search or use from: subject: has:attachment is:read",value:B,onChange:O=>Y(O.target.value),onKeyDown:O=>O.key==="Enter"&&on(),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),a.jsxs("button",{type:"button",onClick:()=>de(O=>!O),className:`px-3 py-2.5 border rounded-xl text-sm font-medium flex items-center gap-2 shrink-0 ${Ne?"bg-indigo-50 border-indigo-200 text-indigo-700":"border-slate-200 text-slate-600 hover:bg-slate-50"}`,title:"Advanced filters",children:[a.jsx(a0,{className:"w-4 h-4"}),"Filters",(U||W||L!==void 0||se||ae||ve!==void 0||He!==void 0||ie||ar)&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500"})]})]}),Ne&&a.jsxs("div",{className:"p-4 border border-slate-200 rounded-xl bg-white shadow-sm space-y-4",children:[a.jsx("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wide",children:"ADVANCED FILTERS"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"From (sender)"}),a.jsx("input",{type:"text",placeholder:"email or name",value:U,onChange:O=>{X(O.target.value),xe(!0)},onFocus:()=>xe(!0),onBlur:()=>setTimeout(()=>xe(!1),180),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),ye&&we.length>0&&a.jsx("div",{className:"absolute z-20 top-full left-0 right-0 mt-1 max-h-48 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:we.filter(O=>!U||[O.email,O.name].some(te=>te==null?void 0:te.toLowerCase().includes(U.toLowerCase()))).slice(0,20).map(O=>a.jsxs("button",{type:"button",className:"w-full text-left px-3 py-2 text-sm hover:bg-slate-100 flex flex-col",onMouseDown:te=>{te.preventDefault(),X(O.email||O.name),xe(!1)},children:[a.jsx("span",{className:"font-medium text-slate-800",children:O.name||O.email}),O.email!==O.name&&a.jsx("span",{className:"text-xs text-slate-500",children:O.email})]},O.email))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Read"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:ve===void 0?"":String(ve),onChange:O=>ne(O.target.value===""?void 0:O.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"false",children:"Unread"}),a.jsx("option",{value:"true",children:"Read"})]}),a.jsx($s,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date from"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",value:se,onChange:O=>ce(O.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),a.jsx(Ln,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Date to"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"date",value:ae,onChange:O=>Z(O.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300 pr-10"}),a.jsx(Ln,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Subject"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"",value:W,onChange:O=>E(O.target.value),className:"flex-1 px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all hover:border-slate-300"}),a.jsxs("div",{className:"relative w-32",children:[a.jsxs("select",{value:R,onChange:O=>q(O.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-8 hover:border-slate-300",children:[a.jsx("option",{value:"contains",children:"contains"}),a.jsx("option",{value:"equals",children:"equals"}),a.jsx("option",{value:"starts",children:"starts with"}),a.jsx("option",{value:"ends",children:"ends with"})]}),a.jsx($s,{className:"absolute right-2.5 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Attachment"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:L===void 0?"":String(L),onChange:O=>H(O.target.value===""?void 0:O.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"true",children:"Has attachment"}),a.jsx("option",{value:"false",children:"No attachment"})]}),a.jsx($s,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Status"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:ie,onChange:O=>Q(O.target.value),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"open",children:"Open"}),a.jsx("option",{value:"assigned",children:"Assigned to me"})]}),a.jsx($s,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Starred"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:He===void 0?"":String(He),onChange:O=>Xe(O.target.value===""?void 0:O.target.value==="true"),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any"}),a.jsx("option",{value:"true",children:"Starred"}),a.jsx("option",{value:"false",children:"Not starred"})]}),a.jsx($s,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),Jt.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Label"}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:ar||"",onChange:O=>Un(O.target.value||null),className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"All labels"}),Jt.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}),a.jsx($s,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1.5",children:"Assigned To"}),a.jsxs("div",{className:"space-y-2.5",children:[a.jsxs("label",{className:"flex items-center gap-2.5 cursor-pointer group",children:[a.jsx("input",{type:"checkbox",checked:Le,onChange:O=>{tt(O.target.checked),O.target.checked&&ht(null)},className:"w-4 h-4 text-indigo-600 border-2 border-slate-300 rounded focus:ring-2 focus:ring-indigo-500 focus:ring-offset-0 focus:border-indigo-500 cursor-pointer transition-colors"}),a.jsx("span",{className:"text-sm text-slate-700 group-hover:text-slate-900 transition-colors",children:"Assigned to me"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("select",{value:ft||"",onChange:O=>{const te=O.target.value||null;ht(te),te&&tt(!1)},className:"w-full px-3 py-2 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-indigo-500 focus:ring-2 focus:ring-indigo-500/20 focus:outline-none transition-all cursor-pointer appearance-none pr-10 hover:border-slate-300",children:[a.jsx("option",{value:"",children:"Any team member"}),dn.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}),a.jsx($s,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"})]})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>n.invalidateQueries({queryKey:Ca.emails()}),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Apply filters"}),a.jsx("button",{type:"button",onClick:()=>{X(""),E(""),q("contains"),H(void 0),ce(""),Z(""),ne(void 0),Xe(void 0),Q(""),Un(null),tt(!1),ht(null),Y(""),setTimeout(()=>n.invalidateQueries({queryKey:Ca.emails()}),0)},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Clear all"}),a.jsxs("button",{type:"button",onClick:()=>ee(!0),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[a.jsx(aE,{className:"w-4 h-4"}),"Save search"]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>qe(O=>!O),className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",children:[a.jsx(aE,{className:"w-4 h-4"}),"Saved (",Ae.length,")"]}),Ee&&a.jsx("div",{className:"absolute left-0 top-full z-20 mt-1 w-64 max-h-60 overflow-y-auto bg-white border border-slate-200 rounded-lg shadow-lg py-1",children:Ae.length===0?a.jsx("p",{className:"px-3 py-2 text-sm text-slate-500",children:"No saved searches"}):Ae.map(O=>a.jsxs("div",{className:"flex items-center group",children:[a.jsx("button",{type:"button",className:"flex-1 text-left px-3 py-2 text-sm hover:bg-slate-100 truncate",onClick:()=>{Y(O.filters.search??""),X(O.filters.from??""),E(O.filters.subject??""),q(O.filters.subjectOperator??"contains"),H(O.filters.hasAttachment),ce(O.filters.dateFrom??""),Z(O.filters.dateTo??""),ne(O.filters.isRead),Xe(O.filters.isStarred),Q(O.filters.status??""),Un(O.filters.labelId??null),qe(!1),setTimeout(()=>n.invalidateQueries({queryKey:Ca.emails()}),0)},children:O.name}),a.jsx("button",{type:"button",className:"p-2 text-slate-400 hover:text-red-600 opacity-0 group-hover:opacity-100",onClick:()=>{Ue(te=>te.filter(le=>le.id!==O.id)),qe(!1)},title:"Delete saved search",children:""})]},O.id))})]}),a.jsxs("button",{type:"button",onClick:()=>{un(!0),i&&hI(i).then(O=>{const te=(O==null?void 0:O.data)??O??[];Dt(Array.isArray(te)?te:[])}).catch(()=>Dt([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Auto-labeling rules (domain or keyword  label)",children:[a.jsx(a0,{className:"w-4 h-4"}),"Categorization rules"]}),a.jsx("button",{type:"button",onClick:()=>{gd(!0),i&&rbe(i).then(O=>{const te=(O==null?void 0:O.data)??O??[];zl(Array.isArray(te)?te:[])}).catch(()=>zl([]))},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Map Gmail labels to Impact OS views",children:"Folder mapping"}),a.jsxs("button",{type:"button",onClick:()=>{as(!0),Ks.length===0&&jn()},className:"px-4 py-2 border-2 border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-1.5 transition-colors",title:"Manage excluded email domains",children:[a.jsx(ny,{className:"w-4 h-4"}),"Excluded Domains ",Ks.length>0&&`(${Ks.length})`]})]})]}),(B||U||W||L!==void 0||se||ae||ve!==void 0||He!==void 0||ie||ar)&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Active:"}),B&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:['Search "',B.length>20?B.slice(0,20)+"":B,'"',a.jsx("button",{type:"button",onClick:()=>Y(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),ar&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-100 text-indigo-700 rounded-lg text-xs",children:["Label: ",((Vl=Jt.find(O=>O.id===ar))==null?void 0:Vl.name)||ar,a.jsx("button",{type:"button",onClick:()=>Un(null),className:"hover:bg-indigo-200 rounded p-0.5","aria-label":"Clear",children:""})]}),U&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["From: ",U,a.jsx("button",{type:"button",onClick:()=>X(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),W&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Subject",a.jsx("button",{type:"button",onClick:()=>E(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),L!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[L?"Has attachment":"No attachment",a.jsx("button",{type:"button",onClick:()=>H(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),ie&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Status: ",ie,a.jsx("button",{type:"button",onClick:()=>Q(""),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),ve!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[ve?"Read":"Unread",a.jsx("button",{type:"button",onClick:()=>ne(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),He!==void 0&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:[He?"Starred":"Not starred",a.jsx("button",{type:"button",onClick:()=>Xe(void 0),className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]}),(se||ae)&&a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-200 text-slate-700 rounded-lg text-xs",children:["Date ",se&&ae?`${se}  ${ae}`:se||ae,a.jsx("button",{type:"button",onClick:()=>{ce(""),Z("")},className:"hover:bg-slate-300 rounded p-0.5","aria-label":"Clear",children:""})]})]})]}),a.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>{Q(ie==="archived"?"":"archived")},className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${ie==="archived"?"bg-indigo-600 text-white":"bg-white border border-slate-200 text-slate-600 hover:bg-slate-50"}`,children:[a.jsx(ay,{className:"w-4 h-4 inline mr-1.5"}),ie==="archived"?"Show Active":"Show Archived"]}),ie==="archived"&&a.jsxs("span",{className:"text-sm text-slate-500",children:[Wi.length," archived email(s)"]})]}),(I||Va.size>0)&&a.jsxs("div",{className:"mt-4 p-3 bg-indigo-50 border border-indigo-200 rounded-xl flex items-center justify-between gap-4 flex-wrap",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{type:"button",onClick:mf,className:"text-sm font-medium text-indigo-700 hover:text-indigo-800",children:Va.size===Wi.length?"Deselect all":"Select all"}),a.jsxs("span",{className:"text-sm text-indigo-600",children:[Va.size," selected"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:xf,disabled:re||Va.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Mark Read"}),a.jsx("button",{type:"button",onClick:sg,disabled:re||Va.size===0,className:"px-3 py-1.5 bg-white border border-indigo-300 text-indigo-700 text-sm font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-50 disabled:cursor-not-allowed",children:"Archive"}),a.jsx("button",{type:"button",onClick:Dp,disabled:re||Va.size===0,className:"px-3 py-1.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Delete"}),a.jsx("button",{type:"button",onClick:K0,className:"px-3 py-1.5 text-indigo-700 text-sm font-medium hover:text-indigo-800",children:"Cancel"})]})]}),a.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4 flex-wrap",children:[a.jsx("div",{className:"flex items-center gap-2",children:!I&&a.jsxs("button",{type:"button",onClick:K0,className:"px-3 py-2 border border-slate-200 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 flex items-center gap-2",children:[a.jsx(Hs,{className:"w-4 h-4"}),"Select"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("label",{className:"text-sm text-slate-600",children:"Sort by:"}),a.jsxs("select",{value:be,onChange:O=>je(O.target.value),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"date",children:"Date"}),a.jsx("option",{value:"sender",children:"Sender"}),a.jsx("option",{value:"subject",children:"Subject"}),a.jsx("option",{value:"unread",children:"Unread"})]}),a.jsx("button",{type:"button",onClick:()=>Te(Se==="asc"?"desc":"asc"),className:"p-2 border border-slate-200 rounded-lg hover:bg-slate-50",title:Se==="asc"?"Ascending":"Descending",children:Se==="asc"?a.jsx(wk,{className:"w-4 h-4"}):a.jsx($s,{className:"w-4 h-4"})})]})]}),me&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>{ee(!1),Fe("")},children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-sm w-full p-4 space-y-3",onClick:O=>O.stopPropagation(),children:[a.jsx("p",{className:"text-sm font-medium text-slate-800",children:"Save current search"}),a.jsx("input",{type:"text",placeholder:"Search name",value:fe,onChange:O=>Fe(O.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm",autoFocus:!0}),a.jsxs("div",{className:"flex gap-2 justify-end",children:[a.jsx("button",{type:"button",onClick:()=>{ee(!1),Fe("")},className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"button",onClick:()=>{const O=fe.trim()||"Saved search",te={search:B||void 0,status:ie||void 0,from:U||void 0,subject:W||void 0,subjectOperator:R,hasAttachment:L,dateFrom:se||void 0,dateTo:ae||void 0,labelId:ar||void 0,isRead:ve,isStarred:He},le={id:typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`saved-${Date.now()}`,name:O,filters:te};Ue(Me=>[...Me,le]),ee(!1),Fe("")},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save"})]})]})}),Xr&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>un(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col p-4",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-800",children:"Auto-labeling rules"}),a.jsx("button",{type:"button",onClick:async()=>{if(i){rf(!0);try{const O=await Z1e(i,30),te=O==null?void 0:O.data;D0(te)}catch(O){console.error("Failed to load accuracy stats:",O)}finally{rf(!1)}}},className:"text-xs text-indigo-600 hover:text-indigo-700 hover:underline",disabled:Cc,children:Cc?"Loading...":"View accuracy stats"})]}),a.jsx("p",{className:"text-xs text-slate-500 mb-3",children:'When an email matches a rule (sender domain or keyword in subject/body), "Suggest labels" will recommend the label. Add rules below.'}),ma&&a.jsxs("div",{className:"mb-4 p-3 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsxs("p",{className:"text-xs font-semibold text-slate-700 mb-2",children:["Categorization Accuracy (Last ",ma.periodDays," days)"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-2",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Overall Accuracy"}),a.jsxs("p",{className:"text-lg font-semibold text-indigo-600",children:[ma.summary.accuracyRate,"%"]}),a.jsxs("p",{className:"text-xs text-slate-400",children:[ma.summary.accepted," accepted / ",ma.summary.accepted+ma.summary.rejected+ma.summary.changed," resolved"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-slate-500",children:"Total Suggestions"}),a.jsx("p",{className:"text-lg font-semibold text-slate-700",children:ma.summary.total}),a.jsxs("p",{className:"text-xs text-slate-400",children:[ma.summary.pending," pending"]})]})]}),a.jsxs("div",{className:"mt-2 pt-2 border-t border-slate-200",children:[a.jsx("p",{className:"text-xs font-medium text-slate-600 mb-1",children:"By Source:"}),a.jsxs("div",{className:"grid grid-cols-3 gap-2 text-xs",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Domain Rules"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[ma.bySource.domain.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[ma.bySource.domain.accepted,"/",ma.bySource.domain.total]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"Keyword Rules"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[ma.bySource.keyword.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[ma.bySource.keyword.accepted,"/",ma.bySource.keyword.total]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-slate-500",children:"AI Suggestions"}),a.jsxs("p",{className:"font-semibold text-slate-700",children:[ma.bySource.ai.accuracyRate,"%"]}),a.jsxs("p",{className:"text-slate-400",children:[ma.bySource.ai.accepted,"/",ma.bySource.ai.total]})]})]})]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[a.jsxs("select",{value:ul,onChange:O=>Qx(O.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"domain",children:"Sender domain"}),a.jsx("option",{value:"keyword",children:"Keyword"})]}),a.jsx("input",{type:"text",placeholder:ul==="domain"?"e.g. company.com":"e.g. invoice",value:fl,onChange:O=>Fo(O.target.value),className:"flex-1 min-w-[120px] px-2 py-1.5 border border-slate-200 rounded-lg text-sm"}),a.jsxs("select",{value:Sc,onChange:O=>md(O.target.value),className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Select label"}),Jt.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}),a.jsx("button",{type:"button",disabled:!fl.trim()||!Sc||!i,onClick:async()=>{var O;if(!(!i||!fl.trim()||!Sc))try{await ebe({userId:i,type:ul,value:fl.trim(),labelId:Sc,labelName:(O=Jt.find(Me=>Me.id===Sc))==null?void 0:O.name});const te=await hI(i),le=(te==null?void 0:te.data)??te??[];Dt(Array.isArray(le)?le:[]),Fo(""),md(""),t("Rule added")}catch(te){r((te==null?void 0:te.message)||"Failed to add rule")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 disabled:opacity-50",children:"Add rule"})]}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100",children:Ie.length===0?a.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No rules yet. Add a domain or keyword rule above."}):Ie.map(O=>a.jsxs("div",{className:"flex items-center justify-between gap-2 p-2 text-sm",children:[a.jsxs("span",{className:"text-slate-700",children:[a.jsx("span",{className:"font-medium",children:O.type==="domain"?"Domain":"Keyword"}),a.jsxs("span",{className:"text-slate-500",children:[' "',O.value,'"  ']}),a.jsx("span",{className:"text-indigo-600",children:O.labelName||O.labelId})]}),a.jsx("button",{type:"button",onClick:async()=>{if(i)try{await tbe(O.id,i),Dt(te=>te.filter(le=>le.id!==O.id)),t("Rule removed")}catch(te){r((te==null?void 0:te.message)||"Failed to delete")}},className:"p-1 text-slate-400 hover:text-red-600 rounded",title:"Delete rule",children:a.jsx(zt,{className:"w-4 h-4"})})]},O.id))}),a.jsx("div",{className:"mt-3 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>un(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Close"})})]})}),of&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40 backdrop-blur-sm",onClick:()=>as(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col overflow-hidden",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 bg-gradient-to-r from-red-50 to-pink-50",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-red-600 rounded-xl text-white shadow-lg shadow-red-100",children:a.jsx(ny,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Excluded Email Domains"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Email Filtering"})]})]}),a.jsx("button",{type:"button",onClick:()=>as(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsx("p",{className:"text-xs text-slate-600 mt-2",children:"Emails from domains listed below will not sync or appear in your shared inbox. To see emails from a domain again, remove it from this list."})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"e.g. wx.agency",value:Ec,onChange:O=>nf(O.target.value),onKeyDown:O=>{O.key==="Enter"&&Ec.trim()&&Yr()},className:"flex-1 px-4 py-2.5 border-2 border-slate-200 rounded-lg text-sm text-slate-700 bg-white focus:border-red-500 focus:ring-2 focus:ring-red-500/20 focus:outline-none transition-all"}),a.jsx("button",{type:"button",onClick:Yr,disabled:!Ec.trim()||af,className:"px-4 py-2.5 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 shadow-sm",children:af?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx($r,{className:"w-4 h-4"}),"Add"]})})]}),L0?a.jsxs("div",{className:"p-8 text-center",children:[a.jsx(ct,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-red-600"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Loading excluded domains..."})]}):Ks.length===0?a.jsxs("div",{className:"p-8 text-center bg-slate-50 rounded-lg border-2 border-dashed border-slate-200",children:[a.jsx(ny,{className:"w-8 h-8 text-slate-300 mx-auto mb-2"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No excluded domains"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add domains above to prevent emails from syncing"})]}):a.jsx("div",{className:"space-y-2",children:Ks.filter(O=>O.domain&&String(O.domain).trim()).map(O=>a.jsxs("div",{className:"flex items-center justify-between p-4 bg-white rounded-lg border-2 border-slate-200 hover:border-red-300 transition-all shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:a.jsx(ny,{className:"w-4 h-4 text-red-600"})}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:O.domain})]}),a.jsx("button",{type:"button",onClick:()=>is(O.id),className:"p-2 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Remove domain",children:a.jsx(br,{className:"w-4 h-4"})})]},O.id))})]}),a.jsx("div",{className:"p-4 border-t border-slate-200 bg-slate-50 flex justify-end",children:a.jsx("button",{type:"button",onClick:()=>as(!1),className:"px-4 py-2 bg-slate-600 text-white text-sm font-medium rounded-lg hover:bg-slate-700 transition-colors",children:"Close"})})]})}),Jx&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/40",onClick:()=>gd(!1),children:a.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[80vh] flex flex-col p-4",onClick:O=>O.stopPropagation(),children:[a.jsx("p",{className:"text-sm font-semibold text-slate-800 mb-2",children:"Folder mapping"}),a.jsx("p",{className:"text-xs text-slate-500 mb-3",children:"Map Gmail labels to display names (view names) in Impact OS. Order determines sort in views."}),a.jsx("div",{className:"flex-1 overflow-y-auto border border-slate-200 rounded-lg divide-y divide-slate-100 mb-3",children:xd.length===0?a.jsx("p",{className:"p-3 text-sm text-slate-500",children:"No mappings. Add labels below to create folder-like views."}):xd.map((O,te)=>a.jsxs("div",{className:"flex items-center gap-2 p-2 text-sm",children:[a.jsx("span",{className:"flex-1 text-slate-700 truncate",children:O.labelName||O.labelId}),a.jsx("input",{type:"text",placeholder:"View name",value:O.viewName??"",onChange:le=>{const Me=[...xd];Me[te]={...Me[te],viewName:le.target.value},zl(Me)},className:"w-32 px-2 py-1 border border-slate-200 rounded text-xs"}),a.jsx("button",{type:"button",onClick:()=>zl(le=>le.filter((Me,pt)=>pt!==te)),className:"p-1 text-slate-400 hover:text-red-600 rounded",children:a.jsx(zt,{className:"w-4 h-4"})})]},O.labelId||te))}),a.jsx("div",{className:"flex gap-2 flex-wrap items-center mb-3",children:a.jsxs("select",{value:"",onChange:O=>{const te=O.target.value;if(!te||xd.some(Me=>Me.labelId===te))return;const le=Jt.find(Me=>Me.id===te);zl(Me=>[...Me,{labelId:te,labelName:le==null?void 0:le.name,viewName:(le==null?void 0:le.name)??"",sortOrder:Me.length}]),O.target.value=""},className:"px-2 py-1.5 border border-slate-200 rounded-lg text-sm",children:[a.jsx("option",{value:"",children:"Add label to mapping"}),Jt.filter(O=>!xd.some(te=>te.labelId===O.id)).map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]})}),a.jsxs("div",{className:"flex justify-end gap-2",children:[a.jsx("button",{type:"button",onClick:()=>gd(!1),className:"px-3 py-1.5 text-slate-600 text-sm hover:bg-slate-100 rounded-lg",children:"Cancel"}),a.jsx("button",{type:"button",onClick:async()=>{if(i)try{await nbe({userId:i,mappings:xd}),t("Folder mapping saved"),gd(!1)}catch(O){r((O==null?void 0:O.message)||"Failed to save")}},className:"px-3 py-1.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700",children:"Save mapping"})]})]})}),gr&&a.jsx("div",{className:"mt-3 p-3 bg-red-50 border border-red-100 rounded-xl text-red-700 text-sm",children:gr}),a.jsxs("div",{className:"flex-1 min-h-[50vh] lg:min-h-[400px] flex flex-col lg:flex-row gap-4 mt-4 min-w-0",children:[a.jsx("div",{className:`flex flex-col min-h-0 border border-slate-200 rounded-xl bg-white overflow-hidden ${y?"min-h-[35vh] flex-1 lg:min-h-0 lg:w-[380px] lg:max-w-[380px] lg:flex-shrink-0":"flex-1 min-h-[35vh] lg:min-h-0"}`,children:Tt?a.jsx("div",{className:"flex-1 overflow-y-auto",children:[...Array(10)].map((O,te)=>a.jsx("div",{className:"px-4 py-3 border-b border-slate-100 animate-pulse",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-slate-200 rounded-full flex-shrink-0"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"h-4 bg-slate-200 rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-1/2 mb-1"}),a.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]}),a.jsx("div",{className:"w-16 h-3 bg-slate-200 rounded flex-shrink-0"})]})},te))}):Wi.length===0?a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[a.jsx(ba,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-600 font-medium",children:ar?"No emails with this label":"No emails yet"}),a.jsx("p",{className:"text-slate-400 text-sm mt-1",children:ar?"Try selecting a different label or clear the filter to see all emails.":'Connect Gmail and tap "Sync from Gmail" to pull in your inbox (including older mail).'}),(se||ae)&&!ar&&a.jsx("p",{className:"text-slate-500 text-xs mt-2 max-w-sm",children:"To see emails older than your date range, run Sync from Gmail first so full history is available."}),ar&&a.jsx("button",{onClick:()=>Un(null),className:"mt-4 px-4 py-2 bg-indigo-600 text-white rounded-xl text-sm font-medium hover:bg-indigo-700",children:"Clear Filter"}),!ar&&a.jsx("button",{onClick:Ls,disabled:S,className:"mt-4 px-4 py-2 bg-slate-100 text-slate-700 rounded-xl text-sm font-medium hover:bg-slate-200 disabled:opacity-60",children:S?"Syncing":"Sync from Gmail"})]}):Gt==="threads"&&hg?a.jsxs("ul",{ref:rs,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[hg.map(O=>{var pt,Ct;const te=fr.has(O.threadId),le=O.latestEmail,Me=O.emails.length>1;return a.jsxs("li",{children:[a.jsxs("div",{role:I?void 0:"button",tabIndex:I?void 0:0,onKeyDown:dt=>{!I&&(dt.key==="Enter"||dt.key===" ")&&(dt.preventDefault(),Me?$p(O.threadId):yl(le))},onClick:()=>!I&&(Me?$p(O.threadId):yl(le)),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${(y==null?void 0:y.id)===le.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[I&&a.jsx("input",{type:"checkbox",checked:Va.has(le.id),onChange:()=>Go(le.id),onClick:dt=>dt.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.jsx(hs,{src:void 0,alt:le.sender||le.email||"",fallbackText:le.sender||le.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),Me&&a.jsx("div",{role:"button",tabIndex:0,onClick:dt=>{dt.stopPropagation(),$p(O.threadId)},onKeyDown:dt=>{(dt.key==="Enter"||dt.key===" ")&&(dt.preventDefault(),dt.stopPropagation(),$p(O.threadId))},className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",children:te?a.jsx($s,{className:"w-4 h-4 text-slate-500"}):a.jsx(ra,{className:"w-4 h-4 text-slate-500"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`truncate font-medium ${O.unreadCount>0?"text-slate-900":"text-slate-600"}`,children:le.subject||"(No subject)"}),le.isStarred&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Eu,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),((pt=le.syncStatus)==null?void 0:pt.starredStatus)&&pf(le.syncStatus.starredStatus)]}),le.attachments&&le.attachments.length>0&&a.jsx(rh,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${le.attachments.length} attachment(s)`}),le.priority&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${le.priority==="high"?"bg-red-100 text-red-700":le.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:le.priority==="high"?"High":le.priority==="low"?"Low":"Medium"}),le.threadStatus&&le.threadStatus!=="active"&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${le.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":le.threadStatus==="pending"?"bg-amber-100 text-amber-700":le.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:le.threadStatus.charAt(0).toUpperCase()+le.threadStatus.slice(1)}),le.owner&&dn.find(dt=>dt.id===le.owner)&&a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:((Ct=dn.find(dt=>dt.id===le.owner))==null?void 0:Ct.name)||"Assigned"}),Me&&a.jsx("span",{className:"px-2 py-0.5 bg-slate-100 text-slate-600 text-[10px] font-medium rounded-full",children:O.emails.length})]}),a.jsxs("p",{className:"text-xs text-slate-500 mt-0 truncate",children:[le.sender||le.email,Me&&`  ${O.emails.length} messages`]}),(()=>{const dt=new Set;O.emails.forEach(Ht=>{Ht.participants&&Array.isArray(Ht.participants)&&Ht.participants.forEach(Dr=>dt.add(Dr.toLowerCase())),Ht.to&&Array.isArray(Ht.to)&&Ht.to.forEach(Dr=>dt.add(Dr.toLowerCase())),Ht.cc&&Array.isArray(Ht.cc)&&Ht.cc.forEach(Dr=>dt.add(Dr.toLowerCase()))});const Ut=Array.from(dt).slice(0,5);return Ut.length>0?a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[a.jsx("span",{className:"text-slate-500",children:"To: "}),Ut.map((Ht,Dr)=>a.jsxs("span",{children:[Ht.split("@")[0],Dr<Ut.length-1&&", "]},Ht)),dt.size>5&&` +${dt.size-5} more`]}):null})(),(le.accountEmail||le.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[le.accountOwnerName&&a.jsxs("span",{className:"text-slate-500",children:["via ",le.accountOwnerName]}),le.accountEmail&&a.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:le.accountEmail})]}),le.lastMessage&&a.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:fg(le.lastMessage,80)})]})}),a.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:le.timestamp}),O.unreadCount>0&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!I&&a.jsx(ra,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]}),te&&Me&&a.jsx("div",{className:"bg-slate-50/50 border-l-4 border-indigo-200 pl-4",children:O.emails.map((dt,Ut)=>{var Dr,Lr,en,kn,Vn,ca,hi,Gl,Kl,ys;const Ht=Cr.has(dt.id);return a.jsxs("div",{className:"border-b border-slate-200 last:border-b-0",children:[a.jsxs("button",{type:"button",onClick:()=>gf(dt.id),className:`w-full text-left px-4 py-2.5 hover:bg-slate-100 transition-colors flex items-start gap-3 ${(y==null?void 0:y.id)===dt.id?"bg-indigo-50":""}`,children:[a.jsx("div",{className:"p-1 hover:bg-slate-200 rounded flex-shrink-0 mt-0.5 cursor-pointer",onClick:Ys=>{Ys.stopPropagation(),gf(dt.id)},children:Ht?a.jsx($s,{className:"w-3 h-3 text-slate-500"}):a.jsx(ra,{className:"w-3 h-3 text-slate-500"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`text-xs font-medium ${dt.isRead?"text-slate-600":"text-slate-900"}`,children:dt.sender||dt.email}),!dt.isRead&&a.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500"}),(((Dr=dt.to)==null?void 0:Dr.length)>0||((Lr=dt.cc)==null?void 0:Lr.length)>0)&&a.jsxs("span",{className:"text-xs text-slate-400",children:[((en=dt.to)==null?void 0:en.length)>0&&`To: ${dt.to.slice(0,2).map(Ys=>Ys.split("@")[0]).join(", ")}${dt.to.length>2?"...":""}`,((kn=dt.cc)==null?void 0:kn.length)>0&&` CC: ${dt.cc.slice(0,2).map(Ys=>Ys.split("@")[0]).join(", ")}${dt.cc.length>2?"...":""}`]})]}),dt.lastMessage&&!Ht&&a.jsx("p",{className:"text-xs text-slate-500 mt-1 line-clamp-1",children:fg(dt.lastMessage,100)})]}),a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap flex-shrink-0",children:dt.timestamp})]}),Ht&&a.jsxs("div",{className:"px-4 pb-3 pt-1 bg-white border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center gap-2 text-xs text-slate-600",children:[a.jsx("span",{className:"font-medium",children:dt.sender||dt.email}),a.jsx("span",{className:"text-slate-400",children:""}),a.jsx("span",{children:dt.timestamp})]}),a.jsx("button",{type:"button",onClick:()=>yl(dt),className:"text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"View full email "})]}),a.jsx("div",{className:"text-xs text-slate-700 mt-2",children:a.jsx(fD,{content:dt.lastMessage||"No content"})}),(((Vn=dt.to)==null?void 0:Vn.length)>0||((ca=dt.cc)==null?void 0:ca.length)>0||((hi=dt.bcc)==null?void 0:hi.length)>0)&&a.jsxs("div",{className:"mt-3 pt-2 border-t border-slate-200 text-xs text-slate-500",children:[((Gl=dt.to)==null?void 0:Gl.length)>0&&a.jsxs("div",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"To:"})," ",dt.to.join(", ")]}),((Kl=dt.cc)==null?void 0:Kl.length)>0&&a.jsxs("div",{className:"mb-1",children:[a.jsx("span",{className:"font-medium",children:"CC:"})," ",dt.cc.join(", ")]}),((ys=dt.bcc)==null?void 0:ys.length)>0&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"BCC:"})," ",dt.bcc.join(", ")]})]})]})]},dt.id)})})]},O.threadId)}),Kt&&a.jsx("li",{className:"px-4 py-4 pb-6",ref:In,children:tr?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(ct,{className:"w-5 h-5 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):a.jsx("button",{type:"button",onClick:nn,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`threads-${ar||"all"}`):a.jsxs("ul",{ref:rs,className:"divide-y divide-slate-100 overflow-y-auto flex-1 min-h-0",children:[Wi.map(O=>{var te,le;return a.jsx("li",{children:a.jsxs("div",{role:I?void 0:"button",tabIndex:I?void 0:0,onKeyDown:Me=>{!I&&(Me.key==="Enter"||Me.key===" ")&&(Me.preventDefault(),yl(O))},onClick:()=>!I&&yl(O),className:`w-full text-left px-3 py-2 hover:bg-slate-50 transition-colors flex items-start gap-2 cursor-pointer ${(y==null?void 0:y.id)===O.id?"bg-indigo-50 border-l-4 border-indigo-500":""}`,children:[I&&a.jsx("input",{type:"checkbox",checked:Va.has(O.id),onChange:()=>Go(O.id),onClick:Me=>Me.stopPropagation(),className:"mt-0.5 w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("div",{className:"flex-shrink-0 mt-0.5",children:a.jsx(hs,{src:void 0,alt:O.sender||O.email||"",fallbackText:O.sender||O.email||"",isAvatar:!0,className:"w-8 h-8 rounded-full"})}),a.jsx("div",{className:"flex-1 min-w-0",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-1.5 flex-wrap",children:[a.jsx("span",{className:`truncate font-medium ${O.isRead?"text-slate-600":"text-slate-900"}`,children:O.subject||"(No subject)"}),O.isStarred&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Eu,{className:"w-4 h-4 text-amber-500 fill-amber-500 flex-shrink-0"}),((te=O.syncStatus)==null?void 0:te.starredStatus)&&pf(O.syncStatus.starredStatus)]}),O.attachments&&O.attachments.length>0&&a.jsx(rh,{className:"w-3.5 h-3.5 text-slate-400 flex-shrink-0",title:`${O.attachments.length} attachment(s)`}),O.priority&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${O.priority==="high"?"bg-red-100 text-red-700":O.priority==="low"?"bg-blue-100 text-blue-700":"bg-slate-100 text-slate-700"}`,children:O.priority==="high"?"High":O.priority==="low"?"Low":"Medium"}),O.threadStatus&&O.threadStatus!=="active"&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded ${O.threadStatus==="resolved"?"bg-emerald-100 text-emerald-700":O.threadStatus==="pending"?"bg-amber-100 text-amber-700":O.threadStatus==="archived"?"bg-slate-100 text-slate-700":""}`,children:O.threadStatus.charAt(0).toUpperCase()+O.threadStatus.slice(1)}),O.owner&&dn.find(Me=>Me.id===O.owner)&&a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-indigo-100 text-indigo-700",children:((le=dn.find(Me=>Me.id===O.owner))==null?void 0:le.name)||"Assigned"}),O.labels&&O.labels.length>0&&a.jsxs(a.Fragment,{children:[O.labels.slice(0,3).map(Me=>{const pt=Jt.find(Ct=>Ct.id===Me);return pt?a.jsx("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",title:pt.name,children:pt.name},Me):null}),O.labels.length>3&&a.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium rounded bg-purple-100 text-purple-700",children:["+",O.labels.length-3]})]})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-0 truncate",children:O.sender||O.email}),(O.accountEmail||O.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0 truncate",children:[O.accountOwnerName&&a.jsxs("span",{className:"text-slate-500",children:["via ",O.accountOwnerName]}),O.accountEmail&&a.jsx("span",{className:"ml-1 px-1 py-0.5 bg-indigo-50 text-indigo-600 text-[9px] font-medium rounded",children:O.accountEmail})]}),O.lastMessage&&a.jsx("p",{className:"text-xs text-slate-400 mt-0.5 line-clamp-1",children:fg(O.lastMessage,80)})]})}),a.jsxs("div",{className:"flex flex-col items-end flex-shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 whitespace-nowrap",children:O.timestamp}),!O.isRead&&a.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mt-0.5"})]}),!I&&a.jsx(ra,{className:"w-4 h-4 text-slate-400 flex-shrink-0 mt-0.5"})]})},O.id)}),Kt&&a.jsx("li",{ref:In,className:"px-4 py-4 pb-6",children:tr?a.jsxs("div",{className:"flex items-center justify-center py-4",children:[a.jsx(ct,{className:"w-5 h-5 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-2 text-sm text-slate-500",children:"Loading more..."})]}):a.jsx("button",{type:"button",onClick:nn,className:"w-full py-3.5 text-sm font-semibold text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-xl border-2 border-indigo-200 transition-colors",children:"Load older emails"})})]},`list-${ar||"all"}`)}),a.jsx("div",{className:"flex-1 min-h-[200px] lg:min-h-[400px] flex flex-col border border-slate-200 rounded-xl bg-white overflow-hidden min-w-0 max-h-full",children:D?a.jsx("div",{className:"flex-1 flex items-center justify-center py-16",children:a.jsx(ct,{className:"w-8 h-8 text-indigo-500 animate-spin"})}):y?a.jsxs("div",{className:"flex-1 min-h-0 overflow-y-auto overflow-x-hidden",style:{WebkitOverflowScrolling:"touch"},children:[a.jsxs("div",{className:"p-3 border-b border-slate-100 flex flex-col gap-2 overflow-visible",children:[a.jsx("div",{className:"flex items-start justify-between gap-4 flex-wrap",children:a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h2",{className:"text-base font-semibold text-slate-900 break-words",children:y.subject||"(No subject)"}),a.jsxs("p",{className:"text-xs text-slate-500 mt-0.5 flex items-center gap-2 flex-wrap",children:[a.jsx("span",{className:"break-words",children:y.sender||y.email}),a.jsx("span",{children:""}),a.jsx("span",{children:y.timestamp}),y.senderClassification&&a.jsx("span",{className:`px-1.5 py-0.5 text-[10px] font-medium rounded flex-shrink-0 ${y.senderClassification==="internal"?"bg-slate-100 text-slate-700":y.senderClassification==="system"?"bg-slate-200 text-slate-600":"bg-indigo-50 text-indigo-700"}`,children:y.senderClassification==="internal"?"Internal":y.senderClassification==="system"?"System":"Customer"})]}),(y.accountEmail||y.accountOwnerName)&&a.jsxs("p",{className:"text-xs text-slate-400 mt-0.5 flex items-center gap-2 flex-wrap",children:[y.accountOwnerName&&a.jsxs("span",{children:["Synced via ",a.jsx("span",{className:"font-medium text-slate-600",children:y.accountOwnerName})]}),y.accountEmail&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded",children:y.accountEmail})]})]})}),y.linkedRecords&&a.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[y.linkedRecords.contactId&&(()=>{const O=xl.find(te=>{var le;return te.id===((le=y.linkedRecords)==null?void 0:le.contactId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg",children:[a.jsx(co,{className:"w-3 h-3"}),O.name]}):null})(),y.linkedRecords.companyId&&(()=>{const O=U0.find(te=>{var le;return te.id===((le=y.linkedRecords)==null?void 0:le.companyId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg",children:[a.jsx(rd,{className:"w-3 h-3"}),O.name]}):null})(),y.linkedRecords.dealId&&(()=>{const O=yp.find(te=>{var le;return te.id===((le=y.linkedRecords)==null?void 0:le.dealId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-50 text-purple-700 text-xs font-medium rounded-lg",children:[a.jsx(al,{className:"w-3 h-3"}),O.title||O.name]}):null})(),y.linkedRecords.projectId&&(()=>{const O=z0.find(te=>{var le;return te.id===((le=y.linkedRecords)==null?void 0:le.projectId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-700 text-xs font-medium rounded-lg",children:[a.jsx(nd,{className:"w-3 h-3"}),O.title||O.name]}):null})(),y.linkedRecords.contractId&&(()=>{const O=q0.find(te=>{var le;return te.id===((le=y.linkedRecords)==null?void 0:le.contractId)});return O?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-red-50 text-red-700 text-xs font-medium rounded-lg",children:[a.jsx(Dn,{className:"w-3 h-3"}),O.title]}):null})()]}),bb?a.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-slate-500",children:[a.jsx(ct,{className:"w-3 h-3 animate-spin"}),"Finding matches..."]}):(wp.contacts.length>0||wp.companies.length>0)&&a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500 font-medium",children:"Suggested links:"}),wp.contacts.map(O=>a.jsxs("button",{onClick:()=>Ai("contact",O.id),disabled:zi,className:"inline-flex items-center gap-1 px-2 py-1 bg-blue-50 text-blue-700 text-xs font-medium rounded-lg hover:bg-blue-100 transition-colors disabled:opacity-50",children:[a.jsx(co,{className:"w-3 h-3"}),O.name,a.jsx($r,{className:"w-3 h-3"})]},O.id)),wp.companies.map(O=>a.jsxs("button",{onClick:()=>Ai("company",O.id),disabled:zi,className:"inline-flex items-center gap-1 px-2 py-1 bg-green-50 text-green-700 text-xs font-medium rounded-lg hover:bg-green-100 transition-colors disabled:opacity-50",children:[a.jsx(rd,{className:"w-3 h-3"}),O.name,a.jsx($r,{className:"w-3 h-3"})]},O.id))]}),a.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2 max-w-full",children:[a.jsxs("button",{type:"button",onClick:()=>{au("contact"),wd(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-blue-600 hover:text-blue-700 hover:bg-blue-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Of,{className:"w-3 h-3 flex-shrink-0"}),"Link Contact"]}),a.jsxs("button",{type:"button",onClick:()=>{au("company"),wd(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-green-600 hover:text-green-700 hover:bg-green-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Of,{className:"w-3 h-3 flex-shrink-0"}),"Link Company"]}),a.jsxs("button",{type:"button",onClick:()=>{au("deal"),wd(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Of,{className:"w-3 h-3 flex-shrink-0"}),"Link Deal"]}),a.jsxs("button",{type:"button",onClick:()=>{au("project"),wd(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Of,{className:"w-3 h-3 flex-shrink-0"}),"Link Project"]}),a.jsxs("button",{type:"button",onClick:()=>{au("contract"),wd(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-red-600 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Of,{className:"w-3 h-3 flex-shrink-0"}),"Link Contract"]}),a.jsxs("button",{type:"button",onClick:()=>tg(!0),className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-indigo-600 hover:text-indigo-700 hover:bg-indigo-50 rounded-lg transition-colors whitespace-nowrap flex-shrink-0",children:[a.jsx(Hs,{className:"w-3 h-3 flex-shrink-0"}),"Create Task"]})]}),y.labels&&y.labels.length>0&&a.jsx("div",{className:"flex flex-wrap items-center gap-2 mt-1 max-w-full",children:y.labels.map(O=>{const te=Jt.find(le=>le.id===O);return te?a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-purple-100 text-purple-700 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[a.jsx("span",{className:"truncate max-w-[200px]",children:te.name}),a.jsx("button",{type:"button",onClick:()=>Ob(y.id,O),className:"hover:text-purple-900 flex-shrink-0",title:"Remove label",children:a.jsx(zt,{className:"w-3 h-3"})})]},O):null})}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2 max-w-full",children:[a.jsxs("button",{type:"button",disabled:Jr||!i,onClick:async()=>{var O;if(!(!(y!=null&&y.id)||!i)){sn(!0),Na([]);try{const te=await J1e({emailId:y.id,userId:i,useAi:!0,availableLabels:Jt.map(Me=>({id:Me.id,name:Me.name}))}),le=te==null?void 0:te.data;(O=le==null?void 0:le.suggestedLabels)!=null&&O.length&&(Na(le.suggestedLabels),rn(le.suggestionId||null))}catch{Na([])}finally{sn(!1)}}},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-amber-600 hover:text-amber-700 hover:bg-amber-50 rounded-lg transition-colors disabled:opacity-50 whitespace-nowrap flex-shrink-0",children:[Jr?a.jsx(ct,{className:"w-3 h-3 animate-spin flex-shrink-0"}):a.jsx(vi,{className:"w-3 h-3 flex-shrink-0"}),"Suggest labels"]}),Lo.length>0&&a.jsx("span",{className:"text-xs text-slate-500 flex-shrink-0",children:"Suggested:"}),Lo.map((O,te)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-amber-50 text-amber-800 text-xs font-medium rounded-lg whitespace-nowrap flex-shrink-0",children:[a.jsx("span",{className:"truncate max-w-[150px]",children:O.labelName}),a.jsxs("span",{className:"text-amber-600 text-[10px] flex-shrink-0",children:["(",O.source,")"]}),O.labelId&&a.jsx("button",{type:"button",onClick:()=>{V0(y.id,[O.labelId],[],!0,oi||void 0),Na(le=>le.filter((Me,pt)=>pt!==te))},className:"hover:bg-amber-100 rounded px-0.5 flex-shrink-0",title:"Add to email",children:a.jsx($r,{className:"w-3 h-3"})})]},O.labelId||te))]}),a.jsx("div",{className:"mt-1",children:a.jsxs("button",{type:"button",onClick:()=>{Mi(y.id),vs(!0)},className:"inline-flex items-center gap-1 px-2 py-1 text-xs font-medium text-purple-600 hover:text-purple-700 hover:bg-purple-50 rounded-lg transition-colors",children:[a.jsx($r,{className:"w-3 h-3"}),y.labels&&y.labels.length>0?"Manage Labels":"Add Labels"]})}),a.jsxs("div",{className:"mt-1 flex flex-wrap items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Tags:"}),(y.customTags||[]).map((O,te)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-slate-100 text-slate-700 text-xs rounded-lg",children:[O,a.jsx("button",{type:"button",onClick:()=>{const le=(y.customTags||[]).filter((Me,pt)=>pt!==te);Sy(y.id,{userId:i,customTags:le}).then(()=>{N(Me=>Me?{...Me,customTags:le}:null)}).catch(()=>{})},className:"hover:text-red-600",children:a.jsx(zt,{className:"w-3 h-3"})})]},te)),a.jsx("input",{type:"text",placeholder:"Add tag",value:ir,onChange:O=>kr(O.target.value),onKeyDown:O=>{if(O.key==="Enter"&&ir.trim()){const le=[...y.customTags||[],ir.trim()];Sy(y.id,{userId:i,customTags:le}).then(()=>{N(Me=>Me?{...Me,customTags:le}:null),kr("")}).catch(()=>{})}},className:"w-24 px-2 py-0.5 text-xs border border-slate-200 rounded-lg"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1.5 border-t border-slate-100",children:[g&&a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("select",{value:y.priority||"medium",onChange:O=>ou(y.id,{priority:O.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Priority",children:[a.jsx("option",{value:"low",children:"Low"}),a.jsx("option",{value:"medium",children:"Medium"}),a.jsx("option",{value:"high",children:"High"})]}),a.jsxs("select",{value:y.threadStatus||"active",onChange:O=>ou(y.id,{threadStatus:O.target.value}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500",title:"Status",children:[a.jsx("option",{value:"active",children:"Active"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"resolved",children:"Resolved"}),a.jsx("option",{value:"archived",children:"Archived"})]}),c&&a.jsxs("select",{value:y.owner||"",onChange:O=>ou(y.id,{owner:O.target.value||null}),className:"px-2 py-1 text-xs border border-slate-200 rounded-lg bg-white hover:bg-slate-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 min-w-[120px]",title:"Assign to",children:[a.jsx("option",{value:"",children:"Unassigned"}),dn.map(O=>a.jsx("option",{value:O.id,children:O.name||O.email},O.id))]})]}),p&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>Ba(y.id,!y.isStarred),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500",title:y.isStarred?"Unstar":"Star",children:y.isStarred?a.jsx(Eu,{className:"w-4 h-4 text-amber-500 fill-amber-500"}):a.jsx(QH,{className:"w-4 h-4"})}),((Dc=y.syncStatus)==null?void 0:Dc.starredStatus)&&a.jsx("div",{className:"flex-shrink-0",children:pf(y.syncStatus.starredStatus)})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("button",{type:"button",onClick:()=>Oc(y.id,!y.isRead),className:"p-2 rounded-lg hover:bg-slate-100 text-slate-500 text-xs font-medium",children:y.isRead?"Mark unread":"Mark read"}),((Lc=y.syncStatus)==null?void 0:Lc.readStatus)&&a.jsx("div",{className:"flex-shrink-0",children:pf(y.syncStatus.readStatus)})]}),h&&a.jsx(a.Fragment,{children:y.threadStatus==="archived"?a.jsxs("button",{type:"button",onClick:()=>Ib(y.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Restore from archive",children:[a.jsx(ay,{className:"w-3 h-3"}),"Restore"]}):a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>Pb(y.id),className:"px-3 py-1.5 bg-slate-600 text-white text-xs font-medium rounded-lg hover:bg-slate-700 transition-colors flex items-center gap-2",title:"Archive email",children:[a.jsx(ay,{className:"w-3 h-3"}),"Archive"]}),y.threadStatus!=="resolved"&&g&&a.jsxs("button",{type:"button",onClick:()=>Ip(y.id),className:"px-3 py-1.5 bg-green-600 text-white text-xs font-medium rounded-lg hover:bg-green-700 transition-colors flex items-center gap-2",title:"Mark as resolved",children:[a.jsx(Qr,{className:"w-3 h-3"}),"Resolve"]})]})}),m&&a.jsxs("button",{type:"button",onClick:()=>Pp(y.id),className:"px-3 py-1.5 bg-red-600 text-white text-xs font-medium rounded-lg hover:bg-red-700 transition-colors flex items-center gap-2",title:"Delete email",children:[a.jsx(br,{className:"w-3 h-3"}),"Delete"]}),f&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{type:"button",onClick:()=>{var O,te;nu("reply"),Xs([y.email]),li([]),Is([]),Ro((O=y.subject)!=null&&O.startsWith("Re:")?y.subject:`Re: ${y.subject||""}`),bs(""),ss(y.accountEmail||((te=Ke[0])==null?void 0:te.email)||""),Tc(!1),bd(!1),ml(!0)},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[a.jsx(Jo,{className:"w-3 h-3"}),"Reply"]}),a.jsx("button",{type:"button",onClick:()=>{var le,Me;nu("replyAll");const O=(y.accountEmail||"").toLowerCase(),te=[y.email,...y.to||[],...y.cc||[]].filter((pt,Ct,dt)=>{const Ut=pt.toLowerCase();return dt.findIndex(Ht=>Ht.toLowerCase()===Ut)===Ct&&Ut!==O});Xs([y.email]),li(te.filter(pt=>pt.toLowerCase()!==y.email.toLowerCase())),Is([]),Ro((le=y.subject)!=null&&le.startsWith("Re:")?y.subject:`Re: ${y.subject||""}`),bs(""),ss(y.accountEmail||((Me=Ke[0])==null?void 0:Me.email)||""),Tc(!0),bd(!1),ml(!0)},className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-100 transition-colors",children:"Reply All"})]}),u&&a.jsx("button",{type:"button",onClick:()=>{var te,le,Me,pt;nu("forward"),Xs([]),li([]),Is([]),Ro((te=y.subject)!=null&&te.startsWith("Fwd:")||(le=y.subject)!=null&&le.startsWith("Fw:")?y.subject:`Fwd: ${y.subject||""}`);const O=y.body||y.lastMessage||"";bs(`

--- Forwarded message ---
From: ${y.sender||y.email}
Date: ${y.timestamp}
Subject: ${y.subject}
To: ${((Me=y.to)==null?void 0:Me.join(", "))||y.email}

${O}`),ss(y.accountEmail||((pt=Ke[0])==null?void 0:pt.email)||""),Tc(!1),bd(!1),ml(!0)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Forward"}),a.jsxs("button",{type:"button",onClick:()=>{if(!i||!y.id)return;const O=(y.body||y.lastMessage||"").replace(/<[^>]+>/g," "),te=`${y.subject||""} ${O}`.toLowerCase(),le=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Me;for(const en of le){const kn=te.match(en);if(kn){Me=kn[0];break}}const pt=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Ct;for(const en of pt){const kn=te.match(en);if(kn){Ct=kn[0];break}}const dt=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Ut;for(const en of dt){const kn=te.match(en);if(kn!=null&&kn[1]){Ut=kn[1].trim();break}}const Ht=Array.isArray(y.to)?y.to:y.to?[y.to]:[],Dr=y.sender||y.from||y.email,Lr=[...new Set([...Ht,Dr].filter(Boolean))];mn(y.id),ka(y.subject||null),Gs(y.body||y.lastMessage||null),Mo(Lr.length?Lr:null),Gr({title:y.subject||"Meeting",date:Me,time:Ct,location:Ut,participants:Lr,description:(y.body||y.lastMessage||"").substring(0,500)}),sr(!0)},disabled:!i,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Open schedule meeting modal to review and confirm",children:[a.jsx(Ln,{className:"w-3 h-3"}),"Schedule Meeting"]})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsxs("div",{className:"border-b border-slate-200 pb-6 min-h-[200px]",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Email Content"}),a.jsx("div",{className:"prose prose-slate max-w-none break-words",children:a.jsx(fD,{content:y.body||y.lastMessage||"No content",highlightTerm:at(B).searchText||void 0})})]}),(Np.length>0||jp.length>0||ff.length>0)&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsx("h3",{className:"text-sm font-semibold text-slate-900 mb-3",children:"Related Items"}),a.jsxs("div",{className:"space-y-3",children:[Np.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Hs,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Tasks (",Np.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:Np.map(O=>a.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg border border-slate-200",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900",children:O.title}),O.status&&a.jsx("span",{className:"text-xs text-slate-500",children:O.status})]},O.id))})]}),jp.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(nd,{className:"w-4 h-4 text-amber-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Projects (",jp.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:jp.map(O=>a.jsxs("div",{className:"p-2 bg-amber-50 rounded-lg border border-amber-200",children:[a.jsx("p",{className:"text-sm font-medium text-amber-900",children:O.title||O.name}),O.status&&a.jsx("span",{className:"text-xs text-amber-600",children:O.status})]},O.id))})]}),ff.length>0&&a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx(Dn,{className:"w-4 h-4 text-red-500"}),a.jsxs("h4",{className:"text-xs font-semibold text-slate-700",children:["Contracts (",ff.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:ff.map(O=>a.jsxs("div",{className:"p-2 bg-red-50 rounded-lg border border-red-200",children:[a.jsx("p",{className:"text-sm font-medium text-red-900",children:O.title}),O.status&&a.jsx("span",{className:"text-xs text-red-600",children:O.status})]},O.id))})]})]})]}),z.length>0&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Ln,{className:"w-4 h-4 text-indigo-500"}),a.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Linked Calendar Events (",z.length,")"]})]}),a.jsx("div",{className:"space-y-2",children:z.map(O=>a.jsx("div",{className:"p-3 bg-indigo-50 rounded-lg border border-indigo-200 hover:bg-indigo-100 transition-colors",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h4",{className:"text-sm font-medium text-indigo-900 mb-1",children:O.title}),a.jsxs("div",{className:"flex flex-col gap-1 text-xs text-indigo-700",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Qa,{className:"w-3 h-3"}),a.jsxs("span",{children:[new Date(O.start).toLocaleString()," - ",new Date(O.end).toLocaleString()]})]}),O.location&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(WF,{className:"w-3 h-3"}),a.jsx("span",{children:O.location})]}),O.participants&&O.participants.length>0&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(co,{className:"w-3 h-3"}),a.jsx("span",{children:O.participants.join(", ")})]})]})]}),O.htmlLink&&a.jsx("a",{href:O.htmlLink,target:"_blank",rel:"noopener noreferrer",className:"ml-2 p-1.5 text-indigo-600 hover:bg-indigo-200 rounded transition-colors",title:"Open in Google Calendar",children:a.jsx(za,{className:"w-4 h-4"})})]})},O.id))})]}),y.attachments&&y.attachments.length>0&&a.jsxs("div",{className:"border-b border-slate-200 pb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(rh,{className:"w-4 h-4 text-slate-500"}),a.jsxs("h3",{className:"text-sm font-semibold text-slate-900",children:["Attachments (",y.attachments.length,")"]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-2",children:y.attachments.map((O,te)=>{const le=O.isDriveFile||O.driveFileId;return a.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-colors ${le?"bg-blue-50/30 border-blue-200 hover:bg-blue-50":"bg-slate-50 border-slate-200 hover:bg-slate-100"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[le&&O.iconUrl?a.jsx("img",{src:O.iconUrl,alt:O.filename,className:"w-8 h-8"}):a.jsx("div",{className:`p-2 rounded-lg ${Pc(O.mimeType)?"bg-blue-50 text-blue-600":Hi(O.mimeType)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:Pc(O.mimeType)?a.jsx(_o,{className:"w-4 h-4"}):Hi(O.mimeType)?a.jsx(Nl,{className:"w-4 h-4"}):a.jsx(rh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.filename}),le&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:le?"Google Drive file":`${og(O.size)}  ${O.mimeType}`})]})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[le&&O.previewUrl&&a.jsx("a",{href:O.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:a.jsx(za,{className:"w-4 h-4"})}),!le&&(Pc(O.mimeType)||Hi(O.mimeType))&&a.jsx("button",{onClick:()=>X0(y.id,O.attachmentId,O.filename,O.mimeType),disabled:An[`${y.id}-${O.attachmentId}-view`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"View",children:An[`${y.id}-${O.attachmentId}-view`]?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(Wd,{className:"w-4 h-4"})}),!le&&a.jsx("button",{onClick:()=>ig(y.id,O.attachmentId,O.filename),disabled:An[`${y.id}-${O.attachmentId}-download`],className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Download",children:An[`${y.id}-${O.attachmentId}-download`]?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(n0,{className:"w-4 h-4"})}),le&&O.downloadUrl&&a.jsx("a",{href:O.downloadUrl,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-indigo-100 text-indigo-600 transition-colors",title:"Download",children:a.jsx(n0,{className:"w-4 h-4"})})]})]},O.attachmentId||te)})})]}),y.attachments&&y.attachments.some(O=>{var te,le,Me,pt;return(O.isDriveFile||O.driveFileId)&&O.previewUrl&&(((te=O.mimeType)==null?void 0:te.includes("google-apps"))||((le=O.mimeType)==null?void 0:le.includes("document"))||((Me=O.mimeType)==null?void 0:Me.includes("spreadsheet"))||((pt=O.mimeType)==null?void 0:pt.includes("presentation")))})&&a.jsxs("div",{className:"border-b border-slate-200 pb-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(Nl,{className:"w-4 h-4 text-blue-500"}),a.jsx("h3",{className:"text-sm font-semibold text-slate-900",children:"Embedded Documents"})]}),a.jsx("div",{className:"space-y-4",children:y.attachments.filter(O=>{var te,le,Me,pt;return(O.isDriveFile||O.driveFileId)&&O.previewUrl&&(((te=O.mimeType)==null?void 0:te.includes("google-apps"))||((le=O.mimeType)==null?void 0:le.includes("document"))||((Me=O.mimeType)==null?void 0:Me.includes("spreadsheet"))||((pt=O.mimeType)==null?void 0:pt.includes("presentation")))}).map((O,te)=>{var Me;const le=((Me=O.previewUrl)==null?void 0:Me.replace("/edit","/preview"))||O.previewUrl;return a.jsxs("div",{className:"border border-slate-200 rounded-lg overflow-hidden bg-white",children:[a.jsxs("div",{className:"p-3 bg-slate-50 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[O.iconUrl&&a.jsx("img",{src:O.iconUrl,alt:O.filename,className:"w-5 h-5"}),a.jsx("span",{className:"text-sm font-medium text-slate-900",children:O.filename}),a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),O.previewUrl&&a.jsx("a",{href:O.previewUrl,target:"_blank",rel:"noopener noreferrer",className:"p-1.5 hover:bg-blue-100 text-blue-600 rounded transition-colors",title:"Open in Drive",children:a.jsx(za,{className:"w-4 h-4"})})]}),a.jsx("div",{className:"relative",style:{paddingBottom:"56.25%",height:0},children:a.jsx("iframe",{src:le,className:"absolute top-0 left-0 w-full h-full border-0",title:O.filename,allow:"fullscreen"})})]},O.attachmentId||te)})})]}),a.jsxs("div",{className:"border-t border-slate-200 pt-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("h3",{className:"text-sm font-semibold text-slate-900 flex items-center gap-2",children:[a.jsx(vi,{className:"w-4 h-4 text-indigo-500"}),"AI Reply Draft"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[We.length>0&&a.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation(),w(()=>Ic(),te=>{})},disabled:Ge,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 disabled:opacity-60",children:Ge?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-3 h-3 animate-spin"}),"Regenerating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Vd,{className:"w-3 h-3"}),"Regenerate"]})}),!Pe&&a.jsx("button",{type:"button",onClick:O=>{O.preventDefault(),O.stopPropagation(),w(()=>Ic(),te=>{})},disabled:Ge,className:"inline-flex items-center gap-2 px-3 py-1.5 bg-indigo-50 text-indigo-700 text-xs font-medium rounded-lg hover:bg-indigo-100 disabled:opacity-60 transition-colors",children:Ge?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-3 h-3 animate-spin"}),"Generating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(vi,{className:"w-3 h-3"}),"Generate Draft"]})})]})]}),We.length>1&&a.jsxs("div",{className:"mb-3 space-y-2",children:[a.jsx("p",{className:"text-xs font-medium text-slate-700",children:"Select a variation:"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:We.map((O,te)=>a.jsxs("button",{type:"button",onClick:()=>{_e(te),$e(b(O.draft))},className:`p-3 rounded-lg border-2 text-left transition-all ${Re===te?"border-indigo-500 bg-indigo-50":"border-slate-200 bg-white hover:border-indigo-300 hover:bg-indigo-50/30"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:O.style}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[O.confidence,"%"]})]}),a.jsx("p",{className:"text-[10px] text-slate-500 mb-2",children:O.description}),a.jsx("div",{className:"w-full bg-slate-200 rounded-full h-1.5",children:a.jsx("div",{className:`h-1.5 rounded-full ${O.confidence>=80?"bg-green-500":O.confidence>=60?"bg-indigo-500":"bg-amber-500"}`,style:{width:`${O.confidence}%`}})})]},te))})]}),Pe?a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 space-y-3",children:[We.length>1&&Re!==null&&a.jsxs("div",{className:"flex items-center justify-between pb-2 border-b border-indigo-200",children:[a.jsxs("div",{children:[a.jsxs("span",{className:"text-xs font-semibold text-slate-900 capitalize",children:[We[Re].style," Variation"]}),a.jsxs("span",{className:"ml-2 text-xs text-slate-500",children:["(",We[Re].description,")"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Confidence:"}),a.jsxs("span",{className:"text-xs font-bold text-indigo-600",children:[We[Re].confidence,"%"]})]})]}),a.jsx("div",{className:"quill-wrapper",children:a.jsx(p2,{ref:O=>{ut.current=O,O&&(wt.current=O.getEditor())},theme:"snow",value:Pe,onChange:O=>$e(O),modules:lu,formats:Rp,placeholder:"Edit your draft..."})}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsxs("button",{type:"button",onClick:Rb,className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",children:[a.jsx(Jo,{className:"w-3 h-3"}),"Copy to Clipboard"]}),a.jsxs("button",{type:"button",onClick:GN,className:"px-3 py-1.5 bg-white text-indigo-600 text-xs font-medium rounded-lg hover:bg-indigo-50 transition-colors border border-indigo-200 flex items-center gap-2",children:[a.jsx($r,{className:"w-3 h-3"}),"Save as Template"]}),a.jsx("button",{type:"button",onClick:()=>{Xt(!0),wl()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Templates"}),a.jsx("button",{type:"button",onClick:()=>{$e(null),Ve([]),_e(null)},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"Clear"})]})]}):a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:"text-xs text-slate-400",children:'Click "Generate Draft" to create AI-powered reply suggestions.'}),a.jsx("button",{type:"button",onClick:()=>{Xt(!0),wl()},className:"px-3 py-1.5 bg-white text-slate-600 text-xs font-medium rounded-lg hover:bg-slate-50 transition-colors border border-slate-200",children:"View Templates"})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(wi,{className:"w-4 h-4 text-indigo-500"}),"Notes & Comments",(y==null?void 0:y.id)&&It[y.id]&&It[y.id].length>0&&a.jsx("span",{className:"ml-1 px-2 py-0.5 bg-indigo-100 text-indigo-600 rounded-full text-[10px]",children:It[y.id].length})]}),l&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"relative",style:{position:"relative"},children:[a.jsxs("div",{className:"quill-wrapper",children:[a.jsx("style",{children:`
                          .quill-wrapper .ql-container {
                            border-bottom-left-radius: 0.75rem;
                            border-bottom-right-radius: 0.75rem;
                            font-size: 0.875rem;
                            min-height: 100px;
                          }
                          .quill-wrapper .ql-toolbar {
                            border-top-left-radius: 0.75rem;
                            border-top-right-radius: 0.75rem;
                            border: none;
                            border-bottom: 2px solid #e2e8f0;
                            background: #f8fafc;
                          }
                          .quill-wrapper .ql-editor {
                            min-height: 100px;
                            padding: 1rem;
                          }
                          .quill-wrapper .ql-editor.ql-blank::before {
                            color: #94a3b8;
                            font-style: normal;
                            font-size: 0.875rem;
                          }
                          .quill-wrapper .ql-snow {
                            border: 2px solid #e2e8f0;
                            border-radius: 0.75rem;
                          }
                          .quill-wrapper:focus-within .ql-snow {
                            border-color: #818cf8;
                            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                          }
                        `}),a.jsx(p2,{ref:O=>{it.current=O,O&&(Et.current=O.getEditor())},theme:"snow",value:wr,onChange:VN,onBlur:()=>{setTimeout(()=>{Gn||dr(null)},200)},modules:lu,formats:Rp,placeholder:"Add a note or comment... (Use @ to mention users)"})]}),Gn&&gt.length>0&&a.jsx("div",{className:"absolute top-full mt-2 left-0 w-full max-w-sm bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-48 overflow-y-auto",onMouseDown:O=>{O.preventDefault()},children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider",children:[a.jsx(Hh,{className:"w-3 h-3"}),"Mention User"]}),gt.map(O=>{var te;return a.jsxs("button",{type:"button",onMouseDown:le=>{le.preventDefault(),le.stopPropagation(),Bp(O)},onClick:le=>{le.preventDefault(),le.stopPropagation()},className:"w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-bold text-xs",children:((te=O.name)==null?void 0:te.charAt(0))||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:O.name||"Unknown"}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:O.email||""})]})]},O.id)})]})})]}),a.jsxs("div",{className:"relative",ref:Rt,children:[a.jsxs("button",{type:"button",onClick:()=>Jn(!Wn),className:`w-full flex items-center justify-between gap-2 px-4 py-2.5 bg-white border-2 rounded-xl text-sm transition-all ${hr.length>0?"border-indigo-300 bg-indigo-50":"border-slate-200 hover:border-indigo-200"}`,children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hc,{className:`w-4 h-4 ${hr.length>0?"text-indigo-600":"text-slate-400"}`}),a.jsx("span",{className:`font-medium ${hr.length>0?"text-indigo-900":"text-slate-600"}`,children:hr.length>0?`Marked for ${hr.length} team member${hr.length>1?"s":""}`:"Mark for team member"})]}),hr.length>0&&a.jsx("button",{type:"button",onClick:O=>{O.stopPropagation(),Mr([])},className:"p-1 hover:bg-indigo-200 rounded transition-all",children:a.jsx(zt,{className:"w-3 h-3 text-indigo-600"})})]}),Wn&&a.jsx("div",{className:"absolute top-full mt-2 left-0 w-full bg-white border-2 border-indigo-200 rounded-xl shadow-2xl z-[100] max-h-64 overflow-y-auto",children:a.jsxs("div",{className:"p-2",children:[a.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 text-xs font-bold text-slate-400 uppercase tracking-wider border-b border-slate-100 mb-2",children:[a.jsx(hc,{className:"w-3 h-3"}),"Select Team Members"]}),a.jsx("input",{type:"text",placeholder:"Search team members...",value:_n,onChange:O=>Nr(O.target.value),className:"w-full px-3 py-2 mb-2 text-sm border border-slate-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-200"}),dn.filter(O=>{var te,le;return O.id!==i&&(_n===""||((te=O.name)==null?void 0:te.toLowerCase().includes(_n.toLowerCase()))||((le=O.email)==null?void 0:le.toLowerCase().includes(_n.toLowerCase())))}).map(O=>{var le;const te=hr.includes(O.id);return a.jsxs("button",{type:"button",onClick:()=>{Mr(te?Me=>Me.filter(pt=>pt!==O.id):Me=>[...Me,O.id])},className:`w-full flex items-center gap-3 px-3 py-2 hover:bg-indigo-50 rounded-lg transition-all text-left ${te?"bg-indigo-50":""}`,children:[a.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center font-bold text-xs ${te?"bg-indigo-600 text-white":"bg-slate-100 text-slate-600"}`,children:((le=O.name)==null?void 0:le.charAt(0))||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 truncate",children:O.name||"Unknown"}),a.jsx("p",{className:"text-xs text-slate-400 truncate",children:O.email||""})]}),te&&a.jsx(Qr,{className:"w-4 h-4 text-indigo-600"})]},O.id)})]})})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("label",{className:"flex-1 cursor-pointer group",children:[a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all",children:jr?a.jsx(_o,{className:"w-4 h-4"}):a.jsx(cd,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:jr?(ge==null?void 0:ge.name)||"Image selected":"Attach Image"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG (Max 10MB)"})]})]}),a.jsx("input",{ref:yt,type:"file",accept:"image/*",onChange:Mp,className:"hidden"})]}),a.jsx("button",{onClick:Mb,disabled:Ce||!wr.trim()&&!ge,className:"px-6 py-3 bg-indigo-600 text-white font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed shrink-0",children:Ce?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jo,{className:"w-4 h-4"}),"Send"]})})]}),jr&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:jr,alt:"Note attachment preview",className:"w-full max-h-48 object-contain rounded-lg border-2 border-slate-200"}),a.jsx("button",{onClick:()=>{Pr(""),De(null),yt.current&&(yt.current.value="")},className:"absolute top-2 right-2 p-1.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-all shadow-lg",children:a.jsx(zt,{className:"w-4 h-4"})})]})]}),!l&&a.jsx("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-lg text-center",children:a.jsx("p",{className:"text-sm text-slate-600",children:"You have read-only access. Contact an admin to add notes or comments."})}),a.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto custom-scrollbar",children:It[y==null?void 0:y.id]&&((Q0=It[y.id])==null?void 0:Q0.length)>0?It[y.id].map(O=>{var le;const te=Zl(o,"shared-inbox:delete-note")&&(DEe(o)||O.userId===i);return a.jsxs("div",{className:`p-4 bg-white border rounded-xl space-y-2 ${(O.markedFor||[]).length>0?"border-indigo-300 bg-indigo-50/30":"border-slate-200"}`,children:[a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600 font-black text-xs",children:((le=O.userName)==null?void 0:le.charAt(0))||"U"}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:O.userName}),(O.markedFor||[]).length>0&&a.jsxs("span",{className:"px-1.5 py-0.5 bg-indigo-600 text-white text-[9px] font-bold rounded-full flex items-center gap-1",children:[a.jsx(hc,{className:"w-2.5 h-2.5"}),"Marked"]})]}),a.jsx("p",{className:"text-[10px] text-slate-400",children:new Date(O.timestamp).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0})}),(O.markedFor||[]).length>0&&a.jsxs("p",{className:"text-[10px] text-indigo-600 mt-1",children:["Marked for: ",dn.filter(Me=>(O.markedFor||[]).includes(Me.id)).map(Me=>Me.name).join(", ")||"Unknown"]})]})]}),te&&a.jsx("button",{onClick:()=>(y==null?void 0:y.id)&&cg(y.id,O.id),disabled:G===O.id,className:"p-2 hover:bg-red-50 rounded-lg transition-colors group disabled:opacity-50",title:"Delete note",children:G===O.id?a.jsx(ct,{className:"w-4 h-4 text-red-600 animate-spin"}):a.jsx(br,{className:"w-4 h-4 text-slate-400 group-hover:text-red-600 transition-colors"})})]}),O.message&&a.jsx("div",{className:"text-sm text-slate-700 leading-relaxed pl-10 prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:O.message}}),O.imageUrl&&a.jsx("div",{className:"pl-10",children:a.jsxs("button",{type:"button",onClick:()=>lr({isOpen:!0,imageUrl:O.imageUrl,imageName:O.imageName}),className:"inline-flex items-center gap-2 px-3 py-2 bg-slate-50 hover:bg-slate-100 border border-slate-200 rounded-lg transition-colors group",children:[a.jsx(_o,{className:"w-4 h-4 text-slate-500 group-hover:text-indigo-600 transition-colors"}),a.jsx("span",{className:"text-xs font-medium text-slate-700 group-hover:text-indigo-600 transition-colors",children:O.imageName||"View Attachment"})]})})]},O.id)}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx(wi,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-400 font-medium",children:"No notes yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first note above"})]})})]})]})]}):a.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center py-16 text-center px-6",children:[a.jsx(ba,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Select an email to read"})]})})]}),Ur.isOpen&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>lr({isOpen:!1,imageUrl:"",imageName:void 0}),children:a.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[a.jsx("button",{onClick:()=>lr({isOpen:!1,imageUrl:"",imageName:void 0}),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:a.jsx(zt,{className:"w-6 h-6"})}),a.jsx("img",{src:Ur.imageUrl,alt:Ur.imageName||"Note attachment",className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:O=>O.stopPropagation()}),Ur.imageName&&a.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-white/90 backdrop-blur-sm rounded-lg",children:a.jsx("p",{className:"text-sm font-medium text-slate-900",children:Ur.imageName})})]})}),Vs&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{ya(!1),Fa("")},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(vi,{className:"w-5 h-5 text-indigo-500"}),"Save as Template"]}),a.jsx("button",{onClick:()=>{ya(!1),Fa("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Template Name"}),a.jsx("input",{type:"text",value:gs,onChange:O=>Fa(O.target.value),onKeyDown:O=>{O.key==="Enter"&&(O.preventDefault(),ug())},placeholder:"Enter template name...",className:"w-full px-4 py-3 border-2 border-slate-200 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none transition-all text-sm",autoFocus:!0})]}),a.jsxs("div",{className:"flex items-center gap-3 justify-end",children:[a.jsx("button",{onClick:()=>{ya(!1),Fa("")},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),a.jsxs("button",{onClick:ug,disabled:!gs||!gs.trim(),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx($r,{className:"w-4 h-4"}),"Save Template"]})]})]})]})}),Mt&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>Xt(!1),children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(vi,{className:"w-5 h-5 text-indigo-500"}),"Email Response Templates"]}),a.jsx("button",{onClick:()=>Xt(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:_r.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(vi,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No templates yet. Create one by saving a draft!"})]}):a.jsx("div",{className:"space-y-3",children:_r.map(O=>{var te;return a.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer group",onClick:le=>{le.preventDefault(),le.stopPropagation(),y&&O.content&&($e(O.content),Xt(!1),t("Template loaded"))},children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-1",children:O.name}),a.jsxs("p",{className:"text-xs text-slate-500 line-clamp-2",children:[(te=O.content)==null?void 0:te.replace(/<[^>]*>/g,"").substring(0,100),"..."]}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-2",children:["Created ",new Date(O.createdAt).toLocaleDateString()]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:le=>{le.preventDefault(),le.stopPropagation(),y&&O.content&&($e(O.content),Xt(!1),t("Template loaded"))},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors opacity-0 group-hover:opacity-100",children:"Use"}),a.jsx("button",{onClick:async le=>{le.preventDefault(),le.stopPropagation(),_p(O.id)},className:"p-2 hover:bg-red-50 rounded-lg transition-colors opacity-0 group-hover:opacity-100",children:a.jsx(br,{className:"w-4 h-4 text-slate-400 hover:text-red-600"})})]})]})},O.id)})})})]})}),Hl&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>_p(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(On,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Template?"}),a.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to delete this template? This action cannot be undone."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>_p(null),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{const O=Hl;_p(null);try{await k1e(O,i),t("Template deleted"),wl()}catch(te){const le=(te==null?void 0:te.message)||"Failed to delete template";console.error("[INBOX] Error deleting template:",le),r(le)}},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-red-600 rounded-xl hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]}),M0&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>bl(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-2xl w-full max-h-[80vh] flex flex-col pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Nl,{className:"w-5 h-5 text-blue-600"}),"Attach from Google Drive"]}),a.jsx("button",{onClick:()=>bl(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:di,onChange:O=>B0(O.target.value),onKeyDown:O=>{O.key==="Enter"&&Lp(di)},placeholder:"Search Drive files...",className:"flex-1 px-4 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"}),a.jsx("button",{onClick:()=>Lp(di),disabled:yd,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50",children:yd?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):"Search"})]}),yd&&uf.length===0?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"})}):uf.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nl,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500",children:"No files found"})]}):a.jsx("div",{className:"space-y-2",children:uf.map(O=>a.jsxs("button",{onClick:()=>WN(O),className:"w-full flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all text-left",children:[O.iconLink?a.jsx("img",{src:O.iconLink,alt:O.name,className:"w-8 h-8"}):a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:a.jsx(Nl,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.name}),a.jsxs("p",{className:"text-xs text-slate-500",children:[O.size?og(O.size):"Drive file","  ",O.mimeType||"Unknown type"]})]}),a.jsx("button",{onClick:te=>{te.stopPropagation(),O.webViewLink&&window.open(O.webViewLink,"_blank")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",title:"Open in Drive",children:a.jsx(za,{className:"w-4 h-4 text-slate-400"})})]},O.id))}),$0&&a.jsx("div",{className:"flex justify-center pt-4",children:a.jsx("button",{onClick:()=>Lp(di,$0),disabled:yd,className:"px-4 py-2 text-sm font-medium text-indigo-600 hover:text-indigo-700 disabled:opacity-50",children:yd?"Loading...":"Load More"})})]})]})})]}),kb&&a.jsxs("div",{className:"fixed inset-0 z-[250] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>go(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-amber-100 flex items-center justify-center text-amber-600 mx-auto mb-6",children:a.jsx(On,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Discard Email?"}),a.jsx("p",{className:"text-sm text-slate-600 mb-6",children:"Are you sure you want to discard this email? All unsaved changes will be lost."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>go(!1),className:"flex-1 px-4 py-2.5 text-sm font-semibold text-slate-700 bg-white border border-slate-300 rounded-xl hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{go(!1),ml(!1),Xs([]),li([]),Is([]),Ro(""),bs(""),$i(""),Uo(""),zo("")},className:"flex-1 px-4 py-2.5 text-sm font-semibold text-white bg-amber-600 rounded-xl hover:bg-amber-700 transition-colors",children:"Discard"})]})]})})]}),mo&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{go(!0)},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-4xl max-h-[90vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:Ma==="compose"?"Compose Email":Ma==="reply"?"Reply":Ma==="replyAll"?"Reply All":"Forward"}),a.jsx("button",{onClick:()=>{go(!0)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[Ke.length>1&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"From"}),a.jsx("select",{value:la,onChange:O=>ss(O.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:Ke.filter((O,te,le)=>le.findIndex(Me=>Me.email===O.email&&Me.userId===O.userId)===te).map((O,te)=>a.jsxs("option",{value:O.email,children:[O.email," ",O.isCurrentUser?"(You)":`(${O.ownerName})`]},`${O.email}-${O.userId}-${te}`))})]}),Ke.length===0&&a.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg text-xs text-amber-700",children:"No Gmail accounts connected. Please connect a Gmail account to send emails."}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["To ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px] focus-within:border-indigo-500 focus-within:ring-2 focus-within:ring-indigo-200",children:[Kr.map((O,te)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-indigo-50 text-indigo-700 text-xs font-medium rounded",children:[O,a.jsx("button",{type:"button",onClick:()=>Xs(Kr.filter((le,Me)=>Me!==te)),className:"hover:text-indigo-900",children:a.jsx(zt,{className:"w-3 h-3"})})]},te)),a.jsx("input",{type:"text",value:$o,onChange:O=>{const te=O.target.value;if($i(te),te.length>0){const le=xl.filter(Me=>{var pt,Ct;return((pt=Me.email)==null?void 0:pt.toLowerCase().includes(te.toLowerCase()))||((Ct=Me.name)==null?void 0:Ct.toLowerCase().includes(te.toLowerCase()))}).slice(0,5);F0(le),Ds(!0)}else Ds(!1)},onKeyDown:O=>{if(O.key==="Enter"&&$o.trim()){O.preventDefault();const te=$o.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te)&&!Kr.includes(te)&&(Xs([...Kr,te]),$i(""),Ds(!1))}else if(O.key==="Backspace"&&$o===""&&Kr.length>0)Xs(Kr.slice(0,-1));else if(O.key==="ArrowDown"&&_i)O.preventDefault(),Zn(te=>Math.min(te+1,qo.length-1));else if(O.key==="ArrowUp"&&_i)O.preventDefault(),Zn(te=>Math.max(te-1,0));else if(O.key==="Enter"&&_i&&qo[Kn]){O.preventDefault();const te=qo[Kn];te.email&&!Kr.includes(te.email)&&(Xs([...Kr,te.email]),$i(""),Ds(!1))}else if(O.key===","||O.key===";"){O.preventDefault();const te=$o.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te)&&!Kr.includes(te)&&(Xs([...Kr,te]),$i(""),Ds(!1))}},onBlur:()=>{const O=$o.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O)&&!Kr.includes(O)&&(Xs([...Kr,O]),$i(""),Ds(!1))},placeholder:Kr.length===0?"Recipients":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]}),_i&&qo.length>0&&a.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-slate-200 rounded-lg shadow-lg max-h-48 overflow-y-auto",children:qo.map((O,te)=>a.jsxs("button",{type:"button",onClick:()=>{O.email&&!Kr.includes(O.email)&&(Xs([...Kr,O.email]),$i(""),Ds(!1))},className:`w-full text-left px-3 py-2 hover:bg-indigo-50 text-sm ${te===Kn?"bg-indigo-50":""}`,children:[a.jsx("div",{className:"font-medium text-slate-900",children:O.name}),a.jsx("div",{className:"text-xs text-slate-500",children:O.email})]},O.id))})]})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Cc"}),a.jsxs("button",{type:"button",onClick:()=>Tc(!Bi),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[Bi?"Hide":"Show"," Cc"]})]}),Bi&&a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[Sa.map((O,te)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[O,a.jsx("button",{type:"button",onClick:()=>li(Sa.filter((le,Me)=>Me!==te)),className:"hover:text-slate-900",children:a.jsx(zt,{className:"w-3 h-3"})})]},te)),a.jsx("input",{type:"text",value:xo,onChange:O=>{Uo(O.target.value)},onKeyDown:O=>{if(O.key==="Enter"&&xo.trim()){O.preventDefault();const te=xo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te)&&!Sa.includes(te)&&(li([...Sa,te]),Uo(""))}else if(O.key==="Backspace"&&xo===""&&Sa.length>0)li(Sa.slice(0,-1));else if(O.key===","||O.key===";"){O.preventDefault();const te=xo.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te)&&!Sa.includes(te)&&(li([...Sa,te]),Uo(""))}},onBlur:()=>{const O=xo.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O)&&!Sa.includes(O)&&(li([...Sa,O]),Uo(""))},placeholder:Sa.length===0?"Cc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700",children:"Bcc"}),a.jsxs("button",{type:"button",onClick:()=>bd(!df),className:"text-xs text-indigo-600 hover:text-indigo-700",children:[df?"Hide":"Show"," Bcc"]})]}),df&&a.jsxs("div",{className:"flex flex-wrap gap-2 p-2 border border-slate-200 rounded-lg min-h-[40px]",children:[zn.map((O,te)=>a.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 bg-slate-50 text-slate-700 text-xs font-medium rounded",children:[O,a.jsx("button",{type:"button",onClick:()=>Is(zn.filter((le,Me)=>Me!==te)),className:"hover:text-slate-900",children:a.jsx(zt,{className:"w-3 h-3"})})]},te)),a.jsx("input",{type:"text",value:gl,onChange:O=>{zo(O.target.value)},onKeyDown:O=>{if(O.key==="Enter"&&gl.trim()){O.preventDefault();const te=gl.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te)&&!zn.includes(te)&&(Is([...zn,te]),zo(""))}else if(O.key==="Backspace"&&gl===""&&zn.length>0)Is(zn.slice(0,-1));else if(O.key===","||O.key===";"){O.preventDefault();const te=gl.trim().replace(/[,;]$/,"");/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(te)&&!zn.includes(te)&&(Is([...zn,te]),zo(""))}},onBlur:()=>{const O=gl.trim();/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(O)&&!zn.includes(O)&&(Is([...zn,O]),zo(""))},placeholder:zn.length===0?"Bcc":"",className:"flex-1 min-w-[120px] border-0 outline-none text-sm"})]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Subject ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Ra,onChange:O=>Ro(O.target.value),placeholder:"Subject",className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),_r.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Template"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("select",{value:Wo||"",onChange:O=>{const te=O.target.value||null;if($N(te),te){const le=_r.find(Me=>Me.id===te);le!=null&&le.content&&(bs(le.content),t("Template loaded"))}},className:"flex-1 px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"",children:"No template"}),_r.map(O=>a.jsx("option",{value:O.id,children:O.name},O.id))]}),a.jsx("button",{type:"button",onClick:()=>Xt(!0),className:"px-3 py-2 border border-slate-200 rounded-lg text-sm text-slate-600 hover:bg-slate-50 flex items-center gap-1",title:"Manage templates",children:a.jsx(vi,{className:"w-4 h-4"})})]})]}),Ma==="compose"&&a.jsxs("div",{children:[a.jsxs("button",{type:"button",onClick:()=>{Sb(!Ap),!Ap&&!jd&&Ra&&Kr.length>0&&dg()},className:"w-full px-4 py-2.5 border-2 border-dashed border-indigo-200 rounded-lg text-sm font-medium text-indigo-600 hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center justify-center gap-2",children:[a.jsx(vi,{className:"w-4 h-4"}),Ap?"Hide AI Suggestions":"Get AI Draft Suggestions"]}),Ap&&a.jsx("div",{className:"mt-3 p-4 bg-indigo-50 border border-indigo-200 rounded-lg",children:_b?a.jsxs("div",{className:"flex items-center gap-2 text-sm text-indigo-700",children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Generating AI draft..."]}):jd?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start justify-between gap-2",children:[a.jsx("p",{className:"text-xs font-medium text-indigo-900",children:"AI Draft Suggestion:"}),a.jsx("button",{type:"button",onClick:dg,className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Regenerate"})]}),a.jsx("div",{className:"p-3 bg-white border border-indigo-200 rounded-lg text-sm text-slate-700 max-h-48 overflow-y-auto",children:a.jsx("div",{dangerouslySetInnerHTML:{__html:jd}})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{bs(jd||""),t("AI draft inserted")},className:"flex-1 px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Use This Draft"}),a.jsx("button",{type:"button",onClick:()=>{const O=(jd==null?void 0:jd.replace(/<[^>]+>/g,""))||"";navigator.clipboard.writeText(O),t("Draft copied to clipboard")},className:"px-3 py-2 border border-indigo-300 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors",children:"Copy"})]})]}):a.jsx("p",{className:"text-xs text-indigo-600",children:"Enter a subject and recipient to generate AI draft suggestions."})})]}),Bo.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:"Signature"}),a.jsxs("select",{value:((zp=Bo.find(O=>O.content===Ri))==null?void 0:zp.id)||"",onChange:O=>{const te=Bo.find(le=>le.id===O.target.value);ql((te==null?void 0:te.content)||"")},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"",children:"No signature"}),Bo.map(O=>a.jsxs("option",{value:O.id,children:[O.name," ",O.isDefault?"(Default)":""]},O.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-xs font-medium text-slate-700 mb-1",children:["Message ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"quill-wrapper",children:[a.jsx("style",{children:`
                    .quill-wrapper .ql-container {
                      border-bottom-left-radius: 0.75rem;
                      border-bottom-right-radius: 0.75rem;
                      font-size: 0.875rem;
                      min-height: 300px;
                    }
                    .quill-wrapper .ql-toolbar {
                      border-top-left-radius: 0.75rem;
                      border-top-right-radius: 0.75rem;
                      border: none;
                      border-bottom: 2px solid #e2e8f0;
                      background: #f8fafc;
                    }
                    .quill-wrapper .ql-editor {
                      min-height: 300px;
                      padding: 1rem;
                    }
                    .quill-wrapper .ql-editor.ql-blank::before {
                      color: #94a3b8;
                      font-style: normal;
                      font-size: 0.875rem;
                    }
                    .quill-wrapper .ql-snow {
                      border: 2px solid #e2e8f0;
                      border-radius: 0.75rem;
                    }
                    .quill-wrapper:focus-within .ql-snow {
                      border-color: #818cf8;
                      box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.1);
                    }
                  `}),a.jsx(p2,{ref:O=>{rt.current=O},theme:"snow",value:Ha,onChange:O=>{bs(O)},modules:lu,formats:Rp,placeholder:"Compose your message..."})]}),Ri&&a.jsxs("div",{className:"mt-2 p-3 bg-slate-50 border border-slate-200 rounded-lg text-sm",children:[a.jsx("div",{className:"text-xs text-slate-500 mb-1",children:"Signature:"}),a.jsx("div",{dangerouslySetInnerHTML:{__html:Ri}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-700 mb-2",children:"Attachments"}),a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsxs("label",{className:"flex-1 flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-lg cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:a.jsx(rh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-medium text-slate-900",children:"Add Attachment"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"Max 25MB per file"})]}),a.jsx("input",{ref:vl,type:"file",multiple:!0,onChange:HN,className:"hidden"})]}),a.jsxs("button",{type:"button",onClick:()=>{bl(!0),B0(""),Lp()},className:"px-4 py-3 bg-white border-2 border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all flex items-center gap-2",title:"Attach from Google Drive",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center text-blue-600",children:a.jsx(Nl,{className:"w-4 h-4"})}),a.jsx("span",{className:"text-xs font-medium text-slate-900 hidden sm:inline",children:"Drive"})]})]}),xn.length>0&&a.jsx("div",{className:"mt-3 space-y-2",children:xn.map(O=>a.jsxs("div",{className:`flex items-center gap-3 p-3 border rounded-lg ${O.isDriveFile?"bg-blue-50/30 border-blue-200":"bg-slate-50 border-slate-200"}`,children:[O.isDriveFile&&O.driveIconLink?a.jsx("img",{src:O.driveIconLink,alt:"Drive file",className:"w-8 h-8"}):a.jsx("div",{className:`p-2 rounded-lg ${Pc(O.file.type)?"bg-blue-50 text-blue-600":Hi(O.file.type)?"bg-red-50 text-red-600":"bg-slate-100 text-slate-600"}`,children:Pc(O.file.type)?a.jsx(_o,{className:"w-4 h-4"}):Hi(O.file.type)?a.jsx(Nl,{className:"w-4 h-4"}):a.jsx(rh,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-sm font-medium text-slate-900 truncate",children:O.file.name}),O.isDriveFile&&a.jsx("span",{className:"px-1.5 py-0.5 bg-blue-100 text-blue-600 text-[9px] font-bold rounded",children:"Drive"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"text-xs text-slate-500",children:O.isDriveFile?"Google Drive file":`${og(O.file.size)}  ${O.file.type}`}),su[O.id]!==void 0&&su[O.id]<100&&a.jsxs("div",{className:"flex-1 max-w-[100px]",children:[a.jsx("div",{className:"h-1.5 bg-slate-200 rounded-full overflow-hidden",children:a.jsx("div",{className:"h-full bg-indigo-600 transition-all duration-300",style:{width:`${su[O.id]}%`}})}),a.jsxs("p",{className:"text-[10px] text-slate-400 mt-0.5",children:[su[O.id],"%"]})]})]})]}),O.isDriveFile&&O.driveWebViewLink&&a.jsx("a",{href:O.driveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"p-2 rounded-lg hover:bg-blue-100 text-blue-600 transition-colors",title:"Open in Drive",children:a.jsx(za,{className:"w-4 h-4"})}),O.preview&&!O.isDriveFile&&a.jsx("button",{type:"button",onClick:()=>{Qt({isOpen:!0,emailId:"",attachmentId:O.id,filename:O.file.name,mimeType:O.file.type,url:O.preview})},className:"p-2 rounded-lg hover:bg-slate-200 text-slate-600 transition-colors",title:"Preview",children:a.jsx(Wd,{className:"w-4 h-4"})}),a.jsx("button",{type:"button",onClick:()=>Db(O.id),className:"p-2 rounded-lg hover:bg-red-50 text-red-600 transition-colors",title:"Remove",children:a.jsx(zt,{className:"w-4 h-4"})})]},O.id))})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:()=>{go(!0)},className:"px-4 py-2 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-100 transition-colors",children:"Cancel"}),Ma==="compose"&&a.jsxs("button",{type:"button",onClick:async()=>{Op(!0),await Lb()},className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors flex items-center gap-2",children:[a.jsx(Nl,{className:"w-4 h-4"}),"Load Drafts"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{type:"button",onClick:Fp,disabled:hf||!Ra||!Ha,className:"px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:hf?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Nl,{className:"w-4 h-4"}),"Save Draft"]})}),Ma==="compose"&&a.jsxs("button",{type:"button",onClick:()=>{if(!Kr.length||!Ra||!Ha){r("Please fill in all required fields (To, Subject, Message)");return}H0(!0)},className:"px-4 py-2 border border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-50 transition-colors flex items-center gap-2",children:[a.jsx(Qa,{className:"w-4 h-4"}),"Schedule"]}),Ma==="compose"&&a.jsxs("button",{type:"button",onClick:async()=>{if(!i||Kr.length===0||!Ra||!Ha){r("Please fill in all required fields (To, Subject, Message)");return}const O=Ha.replace(/<[^>]+>/g," ").toLowerCase(),te=`${Ra} ${O}`,le=[/(\d{1,2}\/\d{1,2}\/\d{2,4})/g,/(\d{1,2}-\d{1,2}-\d{2,4})/g,/(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2},?\s+\d{2,4}/gi,/(monday|tuesday|wednesday|thursday|friday|saturday|sunday),?\s+(january|february|march|april|may|june|july|august|september|october|november|december)\s+\d{1,2}/gi,/(today|tomorrow|next\s+(monday|tuesday|wednesday|thursday|friday|saturday|sunday))/gi];let Me;for(const Ht of le){const Dr=te.match(Ht);if(Dr){Me=Dr[0];break}}const pt=[/\b(\d{1,2}):(\d{2})\s*(am|pm)\b/gi,/\b(\d{1,2}):(\d{2})\b/gi,/\b(\d{1,2})\s*(am|pm)\b/gi];let Ct;for(const Ht of pt){const Dr=te.match(Ht);if(Dr){Ct=Dr[0];break}}const dt=[/(?:location|where|venue|address|place|at):\s*([^\n,]+)/gi,/(?:meeting|call|conference)\s+(?:at|in|on)\s+([^\n,]+)/gi,/(?:zoom|meet|teams|webex|skype|google\s+meet)[\s:]+([^\s\n]+)/gi];let Ut;for(const Ht of dt){const Dr=te.match(Ht);if(Dr&&Dr[1]){Ut=Dr[1].trim();break}}Gr({title:Ra,date:Me,time:Ct,location:Ut,participants:Kr,description:Ha.substring(0,500)}),mn(null),sr(!0)},disabled:lt||!i||Kr.length===0||!Ra,className:"px-4 py-2 bg-indigo-50 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 transition-colors flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",title:"Schedule a meeting",children:[lt?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(Ln,{className:"w-4 h-4"}),"Schedule Meeting"]}),d?a.jsx("button",{type:"button",onClick:async()=>{var O,te,le,Me;if(!i||Kr.length===0||!Ra||!Ha){r("Please fill in all required fields (To, Subject, Message)");return}ci(!0);try{let pt=Ha;Ri&&(pt+=`<br><br>${Ri}`);const Ct=await Promise.all(xn.filter(Ut=>!Ut.isDriveFile).map(async Ut=>new Promise((Ht,Dr)=>{const Lr=new FileReader;Lr.onload=()=>{const en=Lr.result.split(",")[1];Ht({filename:Ut.file.name,content:en,type:Ut.file.type})},Lr.onerror=Dr,Lr.readAsDataURL(Ut.file)}))),dt=xn.filter(Ut=>Ut.isDriveFile&&Ut.driveWebViewLink);if(dt.length>0&&Ma==="compose"){let Ut='<br><br><div style="border-top: 1px solid #e2e8f0; padding-top: 12px; margin-top: 12px;"><p style="font-size: 12px; color: #64748b; margin-bottom: 8px;"><strong>Attached from Google Drive:</strong></p><ul style="margin: 0; padding-left: 20px;">';dt.forEach(Ht=>{Ut+=`<li style="margin-bottom: 4px;"><a href="${Ht.driveWebViewLink}" target="_blank" style="color: #4f46e5; text-decoration: none;">${Ht.file.name}</a></li>`}),Ut+="</ul></div>",pt+=Ut}if(Ma==="reply"||Ma==="replyAll")await _1e({emailId:(y==null?void 0:y.id)||"",userId:i,accountEmail:la||((O=Ke[0])==null?void 0:O.email),body:pt,replyAll:Ma==="replyAll",attachments:Ct.length>0?Ct:void 0}),t("Reply sent successfully");else if(Ma==="forward")await A1e({emailId:(y==null?void 0:y.id)||"",userId:i,accountEmail:la||((te=Ke[0])==null?void 0:te.email),to:Kr,cc:Sa.length>0?Sa:void 0,bcc:zn.length>0?zn:void 0,body:pt,attachments:Ct.length>0?Ct:void 0}),t("Email forwarded successfully");else{const Ut=await S1e({userId:i,accountEmail:la||((le=Ke[0])==null?void 0:le.email),to:Kr,cc:Sa.length>0?Sa:void 0,bcc:zn.length>0?zn:void 0,subject:Ra,body:pt,attachments:Ct.length>0?Ct:void 0}),Ht=(Me=Ut==null?void 0:Ut.data)==null?void 0:Me.id;if(Ht){const Dr=xn.filter(Lr=>Lr.isDriveFile&&Lr.driveFileId);for(const Lr of Dr)try{await pI({userId:i,emailId:Ht,fileId:Lr.driveFileId,fileName:Lr.file.name,fileMimeType:Lr.file.type,webViewLink:Lr.driveWebViewLink,webContentLink:void 0,iconLink:Lr.driveIconLink})}catch(en){console.error("Failed to attach Drive file:",en)}}t("Email sent successfully")}xn.forEach(Ut=>{Ut.preview&&URL.revokeObjectURL(Ut.preview)}),ml(!1),Xs([]),li([]),Is([]),Ro(""),bs(""),xa([]),$i(""),Uo(""),zo(""),bl(!1),await on()}catch(pt){const Ct=v(pt,"Failed to send email");r(Ct)}finally{ci(!1)}},disabled:cf||Kr.length===0||!Ra||!Ha||Ke.length===0,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:cf?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jo,{className:"w-4 h-4"}),Ma==="reply"||Ma==="replyAll"?"Send Reply":Ma==="forward"?"Forward":"Send"]})}):a.jsxs("div",{className:"px-4 py-2 bg-slate-100 text-slate-500 text-sm font-medium rounded-lg flex items-center gap-2",title:"You don't have permission to send emails. Contact an admin.",children:[a.jsx(Jo,{className:"w-4 h-4"}),"Send (Admin Only)"]})]})]})]})}),(pr==null?void 0:pr.isOpen)&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:a.jsxs("div",{className:"relative w-full h-full max-w-7xl max-h-[90vh] m-4 flex flex-col bg-white rounded-lg shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[(Pc(pr.mimeType)||Hi(pr.mimeType))&&a.jsx(_o,{className:"w-5 h-5 text-indigo-600"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-900 truncate",children:pr.filename})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>{pr.url&&window.URL.revokeObjectURL(pr.url),Qt(null)},className:"p-2 rounded-lg hover:bg-slate-100 text-slate-600 transition-colors",title:"Close",children:a.jsx(zt,{className:"w-5 h-5"})}),a.jsxs("button",{onClick:()=>{y&&pr.url&&ig(pr.emailId,pr.attachmentId,pr.filename)},className:"px-3 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors flex items-center gap-2",title:"Download",children:[a.jsx(n0,{className:"w-4 h-4"}),"Download"]})]})]}),a.jsx("div",{className:"flex-1 overflow-auto p-4 flex items-center justify-center bg-slate-50",children:pr.url?Pc(pr.mimeType)?a.jsx("img",{src:pr.url,alt:pr.filename,className:"max-w-full max-h-full object-contain rounded-lg"}):Hi(pr.mimeType)?a.jsx("iframe",{src:pr.url,className:"w-full h-full min-h-[600px] rounded-lg border border-slate-200",title:pr.filename}):a.jsxs("div",{className:"text-center text-slate-500",children:[a.jsx(Nl,{className:"w-16 h-16 mx-auto mb-4 text-slate-400"}),a.jsx("p",{className:"text-sm",children:"Preview not available for this file type"}),a.jsx("button",{onClick:()=>{y&&ig(pr.emailId,pr.attachmentId,pr.filename)},className:"mt-4 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Download File"})]}):a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Loading attachment..."})]})})]})}),wa&&yn&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{vs(!1),Mi(null)},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md max-h-[90vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Manage Labels"}),a.jsx("button",{onClick:()=>{vs(!1),Mi(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Ke.length>0&&a.jsx("div",{className:"mb-4 pb-4 border-b border-slate-200",children:a.jsxs("button",{onClick:()=>_c(!0),className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 bg-indigo-50 border-2 border-dashed border-indigo-200 text-indigo-600 text-sm font-medium rounded-lg hover:bg-indigo-100 hover:border-indigo-300 transition-colors",children:[a.jsx($r,{className:"w-4 h-4"}),"Create New Label"]})}),ur?a.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-3",children:[a.jsx(ct,{className:"w-6 h-6 animate-spin text-indigo-600"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Loading labels"})]}):Jt.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("p",{className:"text-slate-500 text-sm mb-4",children:"No labels available. Connect Gmail and sync to see labels, or create one below."}),a.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[a.jsxs("button",{type:"button",onClick:()=>_a(!0),className:"inline-flex items-center gap-2 px-4 py-2 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:[a.jsx(Vd,{className:"w-4 h-4"}),"Retry"]}),Ke.length>0&&a.jsxs("button",{onClick:()=>_c(!0),className:"inline-flex items-center gap-2 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:[a.jsx($r,{className:"w-4 h-4"}),"Create Your First Label"]})]})]}):a.jsx("div",{className:"space-y-2",children:Jt.map(O=>{var Me;const te=Cn.find(pt=>pt.id===yn),le=((Me=te==null?void 0:te.labels)==null?void 0:Me.includes(O.id))||!1;return a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-lg hover:bg-slate-50 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:le,onChange:pt=>{yn&&(pt.target.checked?V0(yn,[O.id],[]):V0(yn,[],[O.id]))},className:"w-4 h-4 text-indigo-600 border-slate-300 rounded focus:ring-indigo-500"}),a.jsx("span",{className:"flex-1 text-sm font-medium text-slate-900",children:O.name}),O.type==="system"&&a.jsx("span",{className:"px-2 py-0.5 text-xs font-medium text-slate-500 bg-slate-100 rounded",children:"System"})]},O.id)})})]})]})}),P0&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{_c(!1),Ac("")},children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Create New Label"}),a.jsx("button",{onClick:()=>{_c(!1),Ac(""),vd("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Label Name"}),a.jsx("input",{type:"text",value:hl,onChange:O=>Ac(O.target.value),placeholder:"e.g., Important, Follow-up, Project X",className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",onKeyDown:O=>{if(O.key==="Enter"&&hl.trim()&&(tf||Ke.length>0)){const te=tf||Ke[0].email;G0(hl.trim(),te)}},autoFocus:!0})]}),Ke.length>0&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Gmail Account"}),a.jsx("select",{value:tf||Ke[0].email,onChange:O=>vd(O.target.value),className:"w-full px-4 py-2.5 border border-slate-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:Ke.map(O=>a.jsx("option",{value:O.email,children:O.email},O.email))})]}),a.jsxs("div",{className:"flex items-center gap-3 pt-2",children:[a.jsx("button",{onClick:()=>{_c(!1),Ac(""),vd("")},className:"flex-1 px-4 py-2.5 border border-slate-300 text-slate-700 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:()=>{if(hl.trim()&&Ke.length>0){const O=tf||Ke[0].email;G0(hl.trim(),O)}},disabled:!hl.trim()||ef||Ke.length===0,className:"flex-1 px-4 py-2.5 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:ef?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx($r,{className:"w-4 h-4"}),"Create Label"]})})]})]})]})}),Ft&&i&&a.jsx(PEe,{isOpen:Ft,onClose:()=>{sr(!1),Gr(null),mn(null),ka(null),Gs(null),Mo(null)},userId:i,emailId:zr||void 0,emailSubject:ja??Ra,emailBody:ns??Ha,participants:Ps??Kr,extractedDetails:Ar||void 0,onCreateSuccess:()=>{zr&&(y==null?void 0:y.id)===zr&&J3(i,zr).then(O=>{O.success&&O.data&&pe(O.data)}).catch(()=>{})}}),RN&&Nd&&y&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full max-h-[80vh] flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("h3",{className:"text-lg font-semibold text-slate-900",children:["Link to ",Nd.charAt(0).toUpperCase()+Nd.slice(1)]}),a.jsx("button",{onClick:()=>{wd(!1),au(null)},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[Nd==="contact"&&a.jsx("div",{className:"space-y-2",children:xl.map(O=>a.jsxs("button",{onClick:()=>Ai("contact",O.id),disabled:zi,className:"w-full text-left p-3 bg-slate-50 hover:bg-blue-50 rounded-lg border border-slate-200 hover:border-blue-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.name}),a.jsx("p",{className:"text-xs text-slate-500",children:O.email})]},O.id))}),Nd==="company"&&a.jsx("div",{className:"space-y-2",children:U0.map(O=>a.jsxs("button",{onClick:()=>Ai("company",O.id),disabled:zi,className:"w-full text-left p-3 bg-slate-50 hover:bg-green-50 rounded-lg border border-slate-200 hover:border-green-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.name}),O.industry&&a.jsx("p",{className:"text-xs text-slate-500",children:O.industry})]},O.id))}),Nd==="deal"&&a.jsx("div",{className:"space-y-2",children:yp.map(O=>a.jsxs("button",{onClick:()=>Ai("deal",O.id),disabled:zi,className:"w-full text-left p-3 bg-slate-50 hover:bg-purple-50 rounded-lg border border-slate-200 hover:border-purple-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.title||O.name}),O.stage&&a.jsx("p",{className:"text-xs text-slate-500",children:O.stage})]},O.id))}),Nd==="project"&&a.jsx("div",{className:"space-y-2",children:z0.map(O=>a.jsxs("button",{onClick:()=>Ai("project",O.id),disabled:zi,className:"w-full text-left p-3 bg-slate-50 hover:bg-amber-50 rounded-lg border border-slate-200 hover:border-amber-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.title||O.name}),O.status&&a.jsx("p",{className:"text-xs text-slate-500",children:O.status})]},O.id))}),Nd==="contract"&&a.jsx("div",{className:"space-y-2",children:q0.map(O=>a.jsxs("button",{onClick:()=>Ai("contract",O.id),disabled:zi,className:"w-full text-left p-3 bg-slate-50 hover:bg-red-50 rounded-lg border border-slate-200 hover:border-red-300 transition-colors disabled:opacity-50",children:[a.jsx("p",{className:"font-medium text-slate-900",children:O.title}),O.status&&a.jsx("p",{className:"text-xs text-slate-500",children:O.status})]},O.id))})]})]})}),BN&&y&&a.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-md w-full flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:"Create Task from Email"}),a.jsx("button",{onClick:()=>tg(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Title"}),a.jsx("input",{type:"text",defaultValue:y.subject||"Task from Email",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-title"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Priority"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-priority",defaultValue:"Medium",children:[a.jsx("option",{value:"Low",children:"Low"}),a.jsx("option",{value:"Medium",children:"Medium"}),a.jsx("option",{value:"High",children:"High"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Project (Optional)"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-project",defaultValue:"",children:[a.jsx("option",{value:"",children:"None"}),z0.map(O=>a.jsx("option",{value:O.id,children:O.title||O.name},O.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Assign To (Optional)"}),a.jsxs("select",{className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500",id:"task-assignee",defaultValue:"",children:[a.jsx("option",{value:"",children:"Unassigned"}),dn.map(O=>a.jsx("option",{value:O.id,children:O.name||O.email},O.id))]})]}),a.jsx("button",{onClick:()=>{const O=document.getElementById("task-title"),te=document.getElementById("task-priority"),le=document.getElementById("task-project"),Me=document.getElementById("task-assignee");iu({title:O==null?void 0:O.value,priority:te==null?void 0:te.value,projectId:(le==null?void 0:le.value)||void 0,assigneeId:(Me==null?void 0:Me.value)||void 0})},className:"w-full px-4 py-2 bg-indigo-600 text-white font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Create Task"})]})]})}),UN&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-md",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Qa,{className:"w-5 h-5 text-indigo-500"}),"Schedule Send"]}),a.jsx("button",{onClick:()=>{H0(!1),Tp("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:["Date & Time ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"datetime-local",value:ng,onChange:O=>Tp(O.target.value),min:new Date().toISOString().slice(0,16),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-2",children:"Timezone"}),a.jsxs("select",{value:Cb,onChange:O=>zN(O.target.value),className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 outline-none",children:[a.jsx("option",{value:"America/New_York",children:"Eastern Time (ET)"}),a.jsx("option",{value:"America/Chicago",children:"Central Time (CT)"}),a.jsx("option",{value:"America/Denver",children:"Mountain Time (MT)"}),a.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (PT)"}),a.jsx("option",{value:"UTC",children:"UTC"}),a.jsxs("option",{value:Intl.DateTimeFormat().resolvedOptions().timeZone,children:[Intl.DateTimeFormat().resolvedOptions().timeZone," (Local)"]})]})]}),a.jsxs("div",{className:"flex items-center gap-2 pt-4",children:[a.jsx("button",{onClick:()=>{H0(!1),Tp("")},className:"flex-1 px-4 py-2 border border-slate-200 text-slate-600 text-sm font-medium rounded-lg hover:bg-slate-50 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:async()=>{var O;if(!ng){r("Please select a date and time");return}if(!i||Kr.length===0||!Ra||!Ha){r("Please fill in all required fields");return}try{const te=await Promise.all(xn.filter(Me=>!Me.isDriveFile).map(async Me=>new Promise((pt,Ct)=>{const dt=new FileReader;dt.onload=()=>{const Ut=dt.result.split(",")[1];pt({filename:Me.file.name,content:Ut,type:Me.file.type})},dt.onerror=Ct,dt.readAsDataURL(Me.file)})));let le=Ha;Ri&&(le+=`<br><br>${Ri}`),await D1e({userId:i,accountEmail:la||((O=Ke[0])==null?void 0:O.email),to:Kr,cc:Sa.length>0?Sa:void 0,bcc:zn.length>0?zn:void 0,subject:Ra,body:le,scheduledDateTime:ng,timezone:Cb,attachments:te.length>0?te:void 0}),t("Email scheduled successfully"),H0(!1),ml(!1),Xs([]),li([]),Is([]),Ro(""),bs(""),xa([]),Tp("")}catch(te){const le=v(te,"Failed to schedule email");r(le)}},className:"flex-1 px-4 py-2 bg-indigo-600 text-white text-sm font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Schedule Send"})]})]})]})}),qN&&a.jsx("div",{className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"relative bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[80vh] flex flex-col",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-200",children:[a.jsxs("h2",{className:"text-xl font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(Nl,{className:"w-5 h-5 text-indigo-500"}),"Gmail Drafts"]}),a.jsx("button",{onClick:()=>{Op(!1),ag([])},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:Tb?a.jsxs("div",{className:"flex items-center justify-center py-12",children:[a.jsx(ct,{className:"w-8 h-8 text-indigo-500 animate-spin"}),a.jsx("span",{className:"ml-3 text-slate-600",children:"Loading drafts..."})]}):Eb.length===0?a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Nl,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"No drafts found in Gmail"})]}):a.jsx("div",{className:"space-y-3",children:Eb.map(O=>{var te,le,Me,pt,Ct,dt,Ut;return a.jsx("div",{className:"p-4 border border-slate-200 rounded-lg hover:border-indigo-300 hover:bg-indigo-50/30 transition-all cursor-pointer",onClick:()=>{var Ht,Dr,Lr,en,kn;if((Ht=O.payload)!=null&&Ht.headers){const Vn=O.payload.headers,ca=Vn.find(ys=>ys.name==="To"),hi=Vn.find(ys=>ys.name==="Cc"),Gl=Vn.find(ys=>ys.name==="Bcc"),Kl=Vn.find(ys=>ys.name==="Subject");ca!=null&&ca.value&&Xs(ca.value.split(",").map(ys=>ys.trim())),hi!=null&&hi.value&&li(hi.value.split(",").map(ys=>ys.trim())),Gl!=null&&Gl.value&&Is(Gl.value.split(",").map(ys=>ys.trim())),Kl!=null&&Kl.value&&Ro(Kl.value)}if((Lr=(Dr=O.payload)==null?void 0:Dr.body)!=null&&Lr.data)try{const Vn=atob(O.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));bs(Vn)}catch(Vn){console.error("Failed to decode draft body:",Vn),r("Failed to decode draft body")}else if((en=O.payload)!=null&&en.parts){const Vn=O.payload.parts.find(ca=>ca.mimeType==="text/html");if((kn=Vn==null?void 0:Vn.body)!=null&&kn.data)try{const ca=atob(Vn.body.data.replace(/-/g,"+").replace(/_/g,"/"));bs(ca)}catch(ca){console.error("Failed to decode draft body:",ca),r("Failed to decode draft body")}}Op(!1),t("Draft loaded")},children:a.jsxs("div",{className:"flex items-start justify-between gap-3",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-semibold text-slate-900 mb-1 truncate",children:((Me=(le=(te=O.payload)==null?void 0:te.headers)==null?void 0:le.find(Ht=>Ht.name==="Subject"))==null?void 0:Me.value)||"(No subject)"}),a.jsxs("p",{className:"text-xs text-slate-500 mb-2",children:["To: ",((dt=(Ct=(pt=O.payload)==null?void 0:pt.headers)==null?void 0:Ct.find(Ht=>Ht.name==="To"))==null?void 0:dt.value)||"No recipients"]}),a.jsxs("p",{className:"text-[10px] text-slate-400",children:["Created ",(Ut=O.message)!=null&&Ut.internalDate?new Date(parseInt(O.message.internalDate)).toLocaleString():"Unknown date"]})]}),a.jsx("button",{onClick:Ht=>{var Dr,Lr,en,kn,Vn;if(Ht.stopPropagation(),(Dr=O.payload)!=null&&Dr.headers){const ca=O.payload.headers,hi=ca.find(Ys=>Ys.name==="To"),Gl=ca.find(Ys=>Ys.name==="Cc"),Kl=ca.find(Ys=>Ys.name==="Bcc"),ys=ca.find(Ys=>Ys.name==="Subject");hi!=null&&hi.value&&Xs(hi.value.split(",").map(Ys=>Ys.trim())),Gl!=null&&Gl.value&&li(Gl.value.split(",").map(Ys=>Ys.trim())),Kl!=null&&Kl.value&&Is(Kl.value.split(",").map(Ys=>Ys.trim())),ys!=null&&ys.value&&Ro(ys.value)}if((en=(Lr=O.payload)==null?void 0:Lr.body)!=null&&en.data)try{const ca=atob(O.payload.body.data.replace(/-/g,"+").replace(/_/g,"/"));bs(ca)}catch(ca){console.error("Failed to decode draft body:",ca),r("Failed to decode draft body")}else if((kn=O.payload)!=null&&kn.parts){const ca=O.payload.parts.find(hi=>hi.mimeType==="text/html");if((Vn=ca==null?void 0:ca.body)!=null&&Vn.data)try{const hi=atob(ca.body.data.replace(/-/g,"+").replace(/_/g,"/"));bs(hi)}catch(hi){console.error("Failed to decode draft body:",hi),r("Failed to decode draft body")}}Op(!1),t("Draft loaded")},className:"px-3 py-1.5 bg-indigo-600 text-white text-xs font-medium rounded-lg hover:bg-indigo-700 transition-colors",children:"Load"})]})},O.id)})})})]})}),ke&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>{Je(!1),ue("")},children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[85vh] flex flex-col overflow-hidden animate-in zoom-in-95 duration-200",onClick:O=>O.stopPropagation(),children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-emerald-100 rounded-xl flex items-center justify-center",children:a.jsx(Qr,{className:"w-5 h-5 text-emerald-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-black text-xl text-slate-900",children:"Team Connected Accounts"}),a.jsxs("p",{className:"text-xs text-slate-400 font-medium",children:[Ke.length," account",Ke.length!==1?"s":""," connected"]})]})]}),a.jsx("button",{onClick:()=>{Je(!1),ue("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors shrink-0",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-4 border-b border-slate-200 shrink-0",children:a.jsxs("div",{className:"relative",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search by email or owner name...",value:mt,onChange:O=>ue(O.target.value),className:"w-full pl-10 pr-4 py-2.5 border border-slate-200 rounded-xl text-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-4 min-h-0",children:(()=>{const O=new Set(_t.map(le=>le.accountEmail.toLowerCase())),te=Ke.filter((le,Me,pt)=>pt.findIndex(Ct=>Ct.email===le.email&&Ct.userId===le.userId)===Me).filter(le=>{if(!mt.trim())return!0;const Me=mt.toLowerCase();return le.email.toLowerCase().includes(Me)||le.ownerName.toLowerCase().includes(Me)});return te.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[a.jsx(s0,{className:"w-12 h-12 text-slate-300 mb-3"}),a.jsx("p",{className:"text-slate-600 font-medium text-sm",children:mt?"No accounts found matching your search":"No accounts connected"}),mt&&a.jsx("button",{onClick:()=>ue(""),className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-medium",children:"Clear search"})]}):a.jsx("div",{className:"space-y-2",children:te.map((le,Me)=>{const pt=O.has(le.email.toLowerCase()),Ct=_t.find(dt=>dt.accountEmail.toLowerCase()===le.email.toLowerCase());return a.jsxs("div",{className:`flex items-center justify-between p-4 bg-white border rounded-xl transition-all ${le.isCurrentUser?"border-indigo-300 bg-indigo-50/30":pt?"border-amber-300 bg-amber-50/30":"border-slate-200 hover:border-slate-300"}`,children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center font-bold text-sm shrink-0 ${pt?"bg-amber-100 text-amber-600":"bg-indigo-100 text-indigo-600"}`,children:le.email.charAt(0).toUpperCase()}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[a.jsx("p",{className:"text-sm font-semibold text-slate-900 truncate",children:le.email}),le.isCurrentUser&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-100 text-indigo-600 text-[10px] font-bold rounded uppercase shrink-0",children:"You"}),pt&&a.jsx("span",{className:"px-2 py-0.5 bg-amber-100 text-amber-700 text-[10px] font-bold rounded uppercase shrink-0",children:"Filtered"})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-0.5",children:le.ownerName==="Unknown User"?a.jsxs("span",{className:"italic",children:["Account synced from emails  ",new Date(le.connectedAt).toLocaleDateString()]}):a.jsxs(a.Fragment,{children:[le.ownerName,"  Connected ",new Date(le.connectedAt).toLocaleDateString(),!le.hasToken&&le.ownerName!=="Unknown User"&&a.jsx("span",{className:"ml-1 text-amber-600",title:"No active token - emails were synced previously",children:""})]})})]})]}),a.jsxs("div",{className:"ml-3 flex items-center gap-2 shrink-0",children:[pt?a.jsx("button",{onClick:()=>Ct&&bo(Ct.id,le.email),disabled:xt===le.email,className:"px-3 py-2 bg-amber-50 hover:bg-amber-100 text-amber-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Show emails from this account",children:xt===le.email?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Unfiltering..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Wd,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Show"})]})}):a.jsx("button",{onClick:()=>vo(le.email),disabled:xt===le.email,className:"px-3 py-2 bg-slate-50 hover:bg-slate-100 text-slate-700 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Hide emails from this account",children:xt===le.email?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Hiding..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(CH,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Hide"})]})}),le.isCurrentUser&&le.hasToken!==!1&&a.jsx("button",{onClick:()=>qi(le.email),disabled:Ye===le.email,className:"px-3 py-2 bg-red-50 hover:bg-red-100 text-red-600 text-xs font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",title:"Disconnect your account",children:Ye===le.email?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"}),a.jsx("span",{children:"Disconnecting..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(HF,{className:"w-3.5 h-3.5"}),a.jsx("span",{children:"Remove"})]})}),le.isCurrentUser&&le.hasToken===!1&&a.jsx("span",{className:"px-2 py-1 bg-slate-100 text-slate-600 text-xs font-medium rounded",title:"This account has no active token - cannot be disconnected",children:"No Token"})]})]},`${le.email}-${le.userId}-${Me}`)})})})()}),a.jsx("div",{className:"p-4 border-t border-slate-200 shrink-0",children:a.jsxs("button",{onClick:()=>{Je(!1),Ga()},className:"w-full flex items-center justify-center gap-2 px-4 py-3 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-xl transition-colors",children:[a.jsx($r,{className:"w-4 h-4"}),"Connect Your Gmail Account"]})})]})})]}):a.jsxs("div",{className:"h-full flex flex-col items-center justify-center py-20 text-center",children:[a.jsx(ay,{className:"w-14 h-14 text-slate-300 mb-4"}),a.jsx("p",{className:"text-slate-500 font-medium",children:"Sign in to view Shared Inbox"})]})},FEe=()=>{const{showSuccess:e,showError:t}=hn(),[r,n]=P.useState([]),[s,i]=P.useState(!0),[o,l]=P.useState(!1),[c,d]=P.useState({name:"",trigger:"",action:"",description:""}),[f,u]=P.useState(!1),[p,h]=P.useState(null),[m,g]=P.useState(null),[x,v]=P.useState(null),[b,w]=P.useState(null);P.useEffect(()=>{(async()=>{i(!0);try{const T=JSON.parse(localStorage.getItem("user_data")||"{}").id,D=await aI(T),A=(D==null?void 0:D.data)||D||[];n(Array.isArray(A)?A:[])}catch(T){console.error("[AUTOMATIONS] Failed to fetch automations:",T),t(T.message||"Failed to load automations"),n([])}finally{i(!1)}})()},[]),P.useEffect(()=>{const _=async()=>{const T=JSON.parse(localStorage.getItem("user_data")||"{}").id;try{const D=await aI(T),A=(D==null?void 0:D.data)||D||[];n(Array.isArray(A)?A:[])}catch(D){console.error("Failed to refresh automations:",D)}};return window.addEventListener("refresh-automations",_),()=>window.removeEventListener("refresh-automations",_)},[]);const y=async _=>{h(_);try{await ove(_);const T=r.find(D=>D.id===_);n(D=>D.map(A=>A.id===_?{...A,active:!A.active}:A)),e(`Automation "${T==null?void 0:T.name}" ${T!=null&&T.active?"deactivated":"activated"}.`),window.dispatchEvent(new Event("refresh-automations"))}catch(T){console.error("Failed to toggle automation:",T),t(T.message||"Failed to toggle automation")}finally{h(null)}},N=_=>{w(_),v(_.id)},S=async()=>{if(b){g(b.id);try{await lve(b.id),n(_=>_.filter(T=>T.id!==b.id)),v(null),w(null),e("Automation rule removed."),window.dispatchEvent(new Event("refresh-automations"))}catch(_){console.error("Failed to delete automation:",_),t(_.message||"Failed to delete automation")}finally{g(null)}}},j=async _=>{_.preventDefault(),u(!0);try{const T=JSON.parse(localStorage.getItem("user_data")||"{}").id;await ive({name:c.name,trigger:c.trigger,action:c.action,description:c.description,active:!0,userId:T||void 0}),u(!1),l(!1),d({name:"",trigger:"",action:"",description:""}),e("Automation recipe created successfully!"),window.dispatchEvent(new Event("refresh-automations"))}catch(T){console.error("Failed to create automation:",T),t(T.message||"Failed to create automation"),u(!1)}};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-20",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Logistics Automations"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Event-driven workflows and smart triggers"})]}),a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-lg shadow-indigo-100",children:[a.jsx($r,{className:"w-4 h-4"})," Create Recipe"]})]}),s?a.jsxs("div",{className:"flex items-center justify-center py-20 bg-white border border-slate-200 rounded-2xl",children:[a.jsx(ct,{className:"w-8 h-8 text-indigo-600 animate-spin mb-4"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Loading automations..."})]}):r.length===0?a.jsxs("div",{className:"flex flex-col items-center justify-center py-20 bg-white border border-dashed border-slate-300 rounded-2xl text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-slate-50 rounded-full flex items-center justify-center text-slate-300 mb-4",children:a.jsx(q2,{className:"w-8 h-8"})}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Automations Found"}),a.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by creating your first automation recipe."}),a.jsxs("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-lg flex items-center gap-2 hover:bg-indigo-700 transition-all shadow-sm",children:[a.jsx($r,{className:"w-4 h-4"}),"Create Your First Automation"]})]}):a.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[r.map(_=>a.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 p-6 lg:p-8 shadow-sm hover:shadow-md transition-all flex flex-col lg:flex-row lg:items-center justify-between gap-6 group",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsx("div",{onClick:()=>y(_.id),className:`w-14 h-14 rounded-2xl flex items-center justify-center cursor-pointer transition-all active:scale-90 ${_.active?"bg-indigo-600 text-white shadow-xl shadow-indigo-100":"bg-slate-100 text-slate-400"}`,children:a.jsx(q2,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:_.name}),_.active&&a.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-50 text-emerald-600 rounded-full text-[9px] font-black uppercase tracking-tighter",children:[a.jsx("div",{className:"w-1 h-1 bg-emerald-500 rounded-full animate-pulse"})," Running"]})]}),a.jsx("p",{className:"text-sm text-slate-500 font-medium leading-relaxed max-w-xl",children:_.description})]})]}),a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs("div",{className:"hidden sm:flex items-center gap-4 bg-slate-50 px-4 py-2 rounded-2xl border border-slate-100",children:[a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Trigger"}),a.jsx("p",{className:"text-xs font-bold text-slate-700",children:_.trigger})]}),a.jsx(Oi,{className:"w-4 h-4 text-slate-300"}),a.jsxs("div",{className:"text-left",children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Action"}),a.jsx("p",{className:"text-xs font-bold text-indigo-600",children:_.action})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>y(_.id),disabled:p===_.id,className:`p-3 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed ${_.active?"text-indigo-600 hover:bg-indigo-50":"text-slate-400 hover:bg-slate-50"}`,title:_.active?"Pause Automation":"Activate Automation",children:p===_.id?a.jsx(ct,{className:"w-5 h-5 animate-spin"}):_.active?a.jsx(WH,{className:"w-5 h-5 fill-indigo-600"}):a.jsx(VH,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>N(_),disabled:m===_.id,className:"p-3 text-slate-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",title:"Delete Automation",children:m===_.id?a.jsx(ct,{className:"w-5 h-5 animate-spin"}):a.jsx(br,{className:"w-5 h-5"})})]})]})]},_.id)),a.jsxs("div",{className:"bg-slate-900 rounded-3xl p-8 lg:p-12 text-white relative overflow-hidden group shadow-2xl",children:[a.jsxs("div",{className:"relative z-10 max-w-2xl text-left",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"p-2.5 bg-white/10 rounded-xl backdrop-blur-md",children:a.jsx(vi,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h3",{className:"text-2xl font-bold",children:"Impact AI Copilot"})]}),a.jsx("h2",{className:"text-3xl font-black mb-4 tracking-tight leading-tight",children:"Describe the automation you need, and we'll build it."}),a.jsx("p",{className:"text-slate-400 text-base font-medium mb-8 italic",children:'"When a deal is won, create a project workspace and notify the logistics team."'}),a.jsxs("div",{className:"flex gap-4",children:[a.jsx("input",{type:"text",placeholder:"I want to automate...",className:"flex-1 bg-white/10 border border-white/10 rounded-2xl px-6 py-4 text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50"}),a.jsxs("button",{className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold px-8 py-4 rounded-2xl shadow-xl shadow-indigo-900 transition-all active:scale-95 flex items-center gap-2",children:["Generate ",a.jsx(Oi,{className:"w-4 h-4"})]})]})]}),a.jsx("div",{className:"absolute top-0 right-0 w-1/3 h-full bg-indigo-600/10 blur-[120px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none"})]})]}),o&&a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"New Automation Recipe"}),a.jsx("button",{onClick:()=>l(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:j,className:"p-6 space-y-4 text-left",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Recipe Name"}),a.jsx("input",{required:!0,type:"text",value:c.name,onChange:_=>d({...c,name:_.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Lead Auto-Reply"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Trigger Event"}),a.jsx("input",{required:!0,type:"text",value:c.trigger,onChange:_=>d({...c,trigger:_.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., New Contact Created"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Automation Action"}),a.jsx("input",{required:!0,type:"text",value:c.action,onChange:_=>d({...c,action:_.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none",placeholder:"e.g., Send Welcome Template"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-400 uppercase tracking-widest",children:"Description"}),a.jsx("textarea",{required:!0,value:c.description,onChange:_=>d({...c,description:_.target.value}),className:"w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl text-sm focus:ring-2 focus:ring-indigo-100 outline-none resize-none",rows:3,placeholder:"Briefly explain what this does..."})]}),a.jsxs("div",{className:"flex gap-3 pt-4",children:[a.jsx("button",{type:"button",onClick:()=>l(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsxs("button",{type:"submit",disabled:f,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[f?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(Yd,{className:"w-4 h-4"}),"Deploy Automation"]})]})]})]})}),x&&b&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>v(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(f0,{className:"w-6 h-6 text-red-600"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Delete Automation"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-bold mt-0.5",children:"This action cannot be undone"})]})]}),a.jsx("button",{onClick:()=>v(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsxs("p",{className:"text-sm text-slate-600",children:["Are you sure you want to delete automation ",a.jsxs("span",{className:"font-bold text-slate-900",children:['"',b.name,'"']}),"?"]}),a.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs text-red-700 font-semibold mb-1",children:" Warning:"}),a.jsx("p",{className:"text-xs text-red-600",children:"This will permanently delete the automation rule and all its configurations. This action cannot be undone."})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>v(null),disabled:m===b.id,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:S,disabled:m===b.id,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:m===b.id?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(br,{className:"w-4 h-4"}),"Delete Automation"]})})]})]})]})})]})]})},MEe=({currentUser:e,onNavigate:t})=>{var we,Ae,Ue,me;const{showSuccess:r,showError:n}=hn(),[s,i]=P.useState("registry"),[o,l]=P.useState([]),[c,d]=P.useState([]),[f,u]=P.useState(!0),[p,h]=P.useState("all"),[m,g]=P.useState("open"),[x,v]=P.useState(null),[b,w]=P.useState(!1),[y,N]=P.useState(!1),[S,j]=P.useState({type:"feature",title:"",description:""}),[_,T]=P.useState({type:null,item:null}),[D,A]=P.useState(null),[C,M]=P.useState(!1),[F,B]=P.useState([]),[Y,V]=P.useState(!1),[J,U]=P.useState(!1),[X,W]=P.useState(null),[E,R]=P.useState(!1),[q,L]=P.useState(""),[H,se]=P.useState(null),ce=(e==null?void 0:e.role)==="Admin",ae=async()=>{if(s==="registry"){u(!0);try{const[ee,fe]=await Promise.all([Mve(),ud()]),Fe=(ee.data||[]).map(Ee=>{const qe=Ee.url||null;let Ke=[];return Array.isArray(Ee.attachments)&&Ee.attachments.length>0&&(Ke=Ee.attachments.filter(Qe=>Qe&&(Qe.source==="file"||Qe.data)).map(Qe=>({type:Qe.type||"image",data:Qe.data||"",filename:Qe.filename||"attachment",mimeType:Qe.mimeType||"image/jpeg",source:"file"}))),{...Ee,url:qe,attachments:Ke}});l(Fe),d(fe.data||[])}catch{n("Failed to synchronize roadmap registry.")}finally{u(!1)}}};P.useEffect(()=>{ae();const ee=()=>ae();return window.addEventListener("refresh-roadmap",ee),()=>window.removeEventListener("refresh-roadmap",ee)},[s]),P.useEffect(()=>{const ee=fe=>{fe.key==="Escape"&&H&&se(null)};return window.addEventListener("keydown",ee),()=>window.removeEventListener("keydown",ee)},[H]),P.useEffect(()=>{L(x&&x.description||"")},[x]);const Z=async()=>{if(!(!x||!ce)){R(!0);try{await Qj(x.id,{description:q.trim()}),l(ee=>ee.map(fe=>fe.id===x.id?{...fe,description:q.trim()}:fe)),v(ee=>ee&&{...ee,description:q.trim()}),r("Context updated")}catch{n("Failed to update context")}finally{R(!1)}}},ve=async(ee,fe)=>{if(ce)try{await Qj(ee,{status:fe}),l(Fe=>Fe.map(Ee=>Ee.id===ee?{...Ee,status:fe}:Ee)),(x==null?void 0:x.id)===ee&&v({...x,status:fe}),r(`Status updated to ${fe}`)}catch{n("Update failed.")}},ne=async ee=>{if(ce){M(!0);try{await oI(ee),l(fe=>fe.filter(Fe=>Fe.id!==ee)),(x==null?void 0:x.id)===ee&&v(null),A(null),r("Entry purged from registry.")}catch{n("Purge failed.")}finally{M(!1)}}},He=()=>{F.length===xe.length?B([]):B(xe.map(ee=>ee.id))},Xe=async()=>{if(!ce){n("Only admins can delete entries");return}if(F.length===0){n("No items selected");return}V(!0);try{const ee=[...F],fe=ee.map(Fe=>oI(Fe));await Promise.all(fe),l(Fe=>Fe.filter(Ee=>!ee.includes(Ee.id))),x&&ee.includes(x.id)&&v(null),B([]),U(!1),r(`Successfully deleted ${ee.length} entr${ee.length>1?"ies":"y"}`)}catch(ee){console.error("Bulk delete error:",ee),n(ee.message||"Failed to delete entries. Please try again.")}finally{V(!1)}},ie=async ee=>{if(ee.preventDefault(),!S.title||!S.description){n("Title and description are required");return}N(!0);try{const fe={...S,userId:(e==null?void 0:e.id)||"anonymous",status:"planned"};await FR(fe),r("Entry added to Strategic Pipeline"),w(!1),j({type:"feature",title:"",description:""}),ae()}catch(fe){console.error("[FEEDBACK] Creation failed:",fe),n(`Failed to add entry: ${fe.message||"Unknown error"}`)}finally{N(!1)}},Q=async()=>{if(!_.item||!_.type)return;let ee,fe;switch(_.type){case"done":ee="done",fe="Entry marked as done";break;case"archive":ee="canceled",fe="Entry archived";break;case"in-execution":ee="in-progress",fe="Entry marked as in execution";break;default:return}try{await Qj(_.item.id,{status:ee}),l(Fe=>Fe.map(Ee=>Ee.id===_.item.id?{...Ee,status:ee}:Ee)),(x==null?void 0:x.id)===_.item.id&&v({...x,status:ee}),r(fe),T({type:null,item:null})}catch{n("Failed to update entry status")}},Ne=(ee,fe="w-4 h-4")=>{switch(ee){case"done":return a.jsx(Qr,{className:`${fe} text-emerald-500`});case"in-progress":return a.jsx(Qa,{className:`${fe} text-blue-500 animate-pulse`});case"postponed":return a.jsx(_H,{className:`${fe} text-amber-500`});case"canceled":return a.jsx(UF,{className:`${fe} text-slate-400`});default:return a.jsx(s2,{className:`${fe} text-indigo-400`})}},de=ee=>{switch(ee){case"bug":return"bg-red-50 text-red-600 border-red-100";case"feature":return"bg-indigo-50 text-indigo-600 border-indigo-100";case"idea":return"bg-amber-50 text-amber-600 border-amber-100"}},ye=(ee,fe="w-4 h-4")=>{switch(ee){case"bug":return a.jsx(n2,{className:fe});case"feature":return a.jsx(vi,{className:fe});case"idea":return a.jsx(Nk,{className:fe})}},xe=o.filter(ee=>(m==="open"?ee.status!=="done"&&ee.status!=="canceled":ee.status==="done"||ee.status==="canceled")?p==="all"?!0:ee.type===p:!1);return a.jsxs("div",{className:"space-y-8 animate-in fade-in duration-500 pb-32 relative h-full",children:[a.jsxs("div",{className:"flex flex-col gap-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-slate-900 tracking-tight",children:"Enterprise Roadmap"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Consolidated future trajectory, communication beta, and workflow automation"})]}),a.jsxs("div",{className:"flex bg-white px-5 py-2.5 rounded-[24px] border border-slate-200 shadow-sm w-fit items-center gap-3",children:[a.jsx(s2,{className:"w-4 h-4 text-indigo-500"}),a.jsx("p",{className:"text-[10px] font-black uppercase tracking-widest text-slate-700",children:"Trajectory Registry"}),a.jsx("span",{className:"ml-2 px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Live"})]})]}),s==="registry"&&a.jsxs("div",{className:"space-y-8 animate-in slide-in-from-bottom-4 duration-500",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-6",children:[a.jsxs("div",{className:"flex items-center gap-3 bg-white p-1.5 rounded-[20px] border border-slate-200 shadow-sm",children:[a.jsx("button",{onClick:()=>{g("open"),B([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m==="open"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Strategic Pipeline"}),a.jsx("button",{onClick:()=>{g("completed"),B([])},className:`px-6 py-2 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${m==="completed"?"bg-indigo-600 text-white shadow-lg":"text-slate-400 hover:text-slate-600"}`,children:"Archive & Done"})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[["all","bug","feature","idea"].map(ee=>a.jsx("button",{onClick:()=>{h(ee),B([])},className:`px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest border transition-all ${p===ee?"bg-slate-900 text-white border-slate-900":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:ee},ee)),a.jsxs("button",{onClick:()=>{const fe=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";j({type:fe,title:"",description:""}),w(!0)},className:"px-4 py-2 bg-indigo-600 text-white rounded-full text-[10px] font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2",children:[a.jsx($r,{className:"w-3 h-3"})," New Entry"]})]})]}),f?a.jsxs("div",{className:"flex flex-col items-center justify-center py-32",children:[a.jsx(ct,{className:"w-10 h-10 animate-spin text-indigo-600 mb-4"}),a.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest",children:"Synchronizing Registry..."})]}):xe.length===0?a.jsxs("div",{className:"py-32 bg-white rounded-[40px] border border-dashed border-slate-200 text-center flex flex-col items-center justify-center gap-4",children:[a.jsx($2,{className:"w-16 h-16 text-slate-100"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-lg font-black text-slate-900",children:"No Registry Entries Found"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mb-4",children:"Add a new strategic entry to get started."}),a.jsxs("button",{onClick:()=>{const fe=p!=="all"?{bug:"bug",feature:"feature",idea:"idea"}[p]:"feature";j({type:fe,title:"",description:""}),w(!0)},className:"px-6 py-3 bg-indigo-600 text-white rounded-xl text-xs font-black uppercase tracking-widest hover:bg-indigo-700 transition-all shadow-lg flex items-center gap-2 mx-auto",children:[a.jsx($r,{className:"w-4 h-4"})," Add Entry"]})]})]}):a.jsxs(a.Fragment,{children:[xe.length>0&&a.jsxs("div",{className:"flex items-center gap-3 pb-2",children:[a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:xe.length>0&&F.length===xe.length,onChange:ee=>{ee.stopPropagation(),He()}}),a.jsx("span",{className:"text-sm font-semibold text-slate-600 cursor-pointer",onClick:ee=>{ee.stopPropagation(),He()},children:"Select All Entries"})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:xe.map(ee=>{var Ee;const fe=c.find(qe=>qe.id===ee.userId),Fe=F.includes(ee.id);return a.jsxs("div",{onClick:()=>{v(ee),W(null)},className:`bg-white rounded-[32px] border ${Fe?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} p-8 shadow-sm hover:border-indigo-300 hover:shadow-xl transition-all group flex flex-col relative cursor-pointer active:scale-[0.98] hover:scale-[1.02] overflow-visible`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsxs("div",{className:`px-3 py-1 rounded-full text-[9px] font-black uppercase tracking-tighter border ${de(ee.type)} flex items-center gap-1.5`,children:[ye(ee.type,"w-2.5 h-2.5"),ee.type]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1 bg-slate-50 border border-slate-100 rounded-full text-[9px] font-black text-slate-500 uppercase",children:[Ne(ee.status,"w-2.5 h-2.5"),ee.status]}),a.jsxs("div",{className:"flex items-center gap-1.5",onClick:qe=>qe.stopPropagation(),children:[a.jsx("div",{className:`${Fe?"opacity-100":"opacity-0 group-hover:opacity-100"} transition-opacity flex items-center`,children:a.jsx("label",{className:`px-2 py-1 rounded-lg transition-all border flex items-center justify-center cursor-pointer ${Fe?"bg-indigo-50 border-indigo-200":"bg-slate-50 border-slate-200 hover:bg-indigo-50/50 hover:border-indigo-200"}`,children:a.jsx("input",{type:"checkbox",className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 cursor-pointer",checked:Fe,onChange:qe=>{qe.stopPropagation(),B(Ke=>Ke.includes(ee.id)?Ke.filter(Qe=>Qe!==ee.id):[...Ke,ee.id])},onClick:qe=>{qe.stopPropagation()}})})}),(ee.status==="planned"||ee.status==="in-progress"||ee.status==="postponed")&&a.jsxs(a.Fragment,{children:[ee.status!=="in-progress"&&a.jsx("button",{onClick:qe=>{qe.stopPropagation(),T({type:"in-execution",item:ee})},className:"px-2 py-1 hover:bg-blue-50 rounded-lg text-blue-600 transition-all border border-blue-100 hover:border-blue-200 flex items-center justify-center",title:"Mark as In Execution",children:a.jsx(Qa,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:qe=>{qe.stopPropagation(),T({type:"done",item:ee})},className:"px-2 py-1 hover:bg-emerald-50 rounded-lg text-emerald-600 transition-all border border-emerald-100 hover:border-emerald-200 flex items-center justify-center",title:"Mark as Done",children:a.jsx(Qr,{className:"w-3.5 h-3.5"})}),a.jsx("button",{onClick:qe=>{qe.stopPropagation(),T({type:"archive",item:ee})},className:"px-2 py-1 hover:bg-slate-100 rounded-lg text-slate-500 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center",title:"Archive",children:a.jsx(Md,{className:"w-3.5 h-3.5"})})]}),ce&&a.jsxs("div",{className:"relative",children:[a.jsx("button",{onClick:qe=>{qe.stopPropagation(),W(X===ee.id?null:ee.id)},className:`px-2 py-1 hover:bg-slate-50 rounded-lg text-slate-400 transition-all border border-slate-200 hover:border-slate-300 flex items-center justify-center ${X===ee.id?"opacity-100":"opacity-0 group-hover:opacity-100"}`,title:"More options",children:a.jsx(F_,{className:"w-3.5 h-3.5"})}),X===ee.id&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-[55]",onClick:qe=>{qe.stopPropagation(),W(null)}}),a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-52 bg-slate-900 rounded-2xl shadow-2xl overflow-hidden z-[60] animate-in fade-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"p-2 border-b border-white/5 text-[9px] font-black text-white/40 uppercase tracking-widest px-4 py-2",children:"Lifecycle Management"}),a.jsxs("div",{className:"overflow-hidden rounded-b-2xl",children:[["planned","in-progress","done","postponed","canceled"].map(qe=>a.jsxs("button",{onClick:Ke=>{Ke.stopPropagation(),ve(ee.id,qe),W(null)},className:`w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest transition-colors ${ee.status===qe?"text-indigo-400 bg-white/5":"text-slate-300 hover:bg-white/5"}`,children:["Set ",qe]},qe)),a.jsx("button",{onClick:qe=>{qe.stopPropagation(),A(ee),W(null)},className:"w-full px-4 py-3 text-left text-[10px] font-black uppercase tracking-widest text-red-400 border-t border-white/5 hover:bg-red-500 hover:text-white transition-all",children:"Delete Terminal"})]})]})]})]})]})]})]}),a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-3 leading-tight group-hover:text-indigo-600 transition-colors",children:ee.title}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium leading-relaxed mb-4 flex-1 line-clamp-3 italic",children:['"',ee.description,'"']}),ee.url&&a.jsx("div",{className:"mb-6",children:a.jsxs("a",{href:ee.url,target:"_blank",rel:"noopener noreferrer",onClick:qe=>qe.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-[10px] font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[ee.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?a.jsx(_o,{className:"w-3 h-3"}):a.jsx(hm,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[120px]",children:ee.url.length>30?`${ee.url.substring(0,30)}...`:ee.url}),a.jsx(za,{className:"w-3 h-3"})]})}),ee.attachments&&Array.isArray(ee.attachments)&&ee.attachments.length>0&&a.jsx("div",{className:"mb-6 flex flex-wrap gap-2",children:ee.attachments.map((qe,Ke)=>qe.type==="image"&&qe.data?a.jsxs("button",{type:"button",onClick:Qe=>{Qe.stopPropagation(),se({src:qe.data,alt:qe.filename||"Attachment"})},className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(_o,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[100px]",children:qe.filename||"Screenshot"})]},Ke):qe.type==="video"&&qe.data?a.jsxs("a",{href:qe.data,target:"_blank",rel:"noopener noreferrer",onClick:Qe=>Qe.stopPropagation(),className:"inline-flex items-center gap-1.5 px-3 py-1.5 bg-slate-100 text-slate-700 rounded-lg text-[10px] font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(hm,{className:"w-3 h-3"}),a.jsx("span",{className:"truncate max-w-[100px]",children:qe.filename||"Video"}),a.jsx(za,{className:"w-3 h-3"})]},Ke):null)}),a.jsxs("div",{className:"pt-6 border-t border-slate-50 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 font-black text-xs uppercase shadow-inner group-hover:scale-110 transition-transform",children:((Ee=fe==null?void 0:fe.name)==null?void 0:Ee.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black text-slate-900",children:(fe==null?void 0:fe.name)||"Observer"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase",children:new Date(ee.createdAt).toLocaleDateString()})]})]}),a.jsx(ra,{className:"w-4 h-4 text-slate-200 group-hover:text-indigo-400 group-hover:translate-x-1 transition-all"})]})]},ee.id)})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 pb-12",children:[{label:"Total Requests",value:o.length,icon:a.jsx(s2,{className:"w-4 h-4"})},{label:"Bugs Identified",value:o.filter(ee=>ee.type==="bug").length,icon:a.jsx(n2,{className:"w-4 h-4 text-red-500"})},{label:"Features Shipped",value:o.filter(ee=>ee.status==="done").length,icon:a.jsx(vi,{className:"w-4 h-4 text-emerald-500"})},{label:"In Execution",value:o.filter(ee=>ee.status==="in-progress").length,icon:a.jsx(Qa,{className:"w-4 h-4 text-blue-500"})}].map((ee,fe)=>a.jsxs("div",{className:"bg-white p-6 rounded-3xl border border-slate-200 shadow-sm flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-slate-50 rounded-2xl flex items-center justify-center text-slate-400",children:ee.icon}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:ee.label}),a.jsx("p",{className:"text-xl font-black text-slate-900",children:ee.value})]})]},fe))})]}),s==="registry"&&a.jsxs("div",{className:"mt-10 space-y-4 pb-12",children:[a.jsxs("h2",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(vi,{className:"w-4 h-4 text-indigo-500"})," Features in Development"]}),a.jsxs("p",{className:"text-slate-500 text-sm max-w-2xl",children:["These confirmed feature requests are currently"," ",a.jsx("span",{className:"font-semibold text-slate-700",children:"in development"}),". You can preview their beta experiences below while the full workflows mature."]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(ba,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Shared Inbox"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Centralize customer conversations and feedback threads for your logistics team."}),a.jsxs("button",{onClick:()=>i("inbox"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-slate-900 text-indigo-50 flex items-center justify-center",children:a.jsx(q2,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Smart Automations"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-purple-50 text-purple-600",children:"Beta  In Progress"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Automate repetitive logistics workflows and notifications with configurable recipes."}),a.jsxs("button",{onClick:()=>i("automation"),className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 transition-all flex items-center gap-2",children:["Preview Beta",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-blue-50 text-blue-600 flex items-center justify-center",children:a.jsx(zF,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Business Card Scanner"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-blue-50 text-blue-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Scan a business card and create contact and company information directly inside the application."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(Oh,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn Scanner"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-indigo-50 text-indigo-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Scan a LinkedIn account and create contact and company information directly inside the application."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-emerald-50 text-emerald-600 flex items-center justify-center",children:a.jsx(ad,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Source Signals"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-emerald-50 text-emerald-600",children:"Planned"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Source signals, such as recent funding, new hires, M&A, lay-offs, and attach this information to the company card."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-purple-50 text-purple-600 flex items-center justify-center",children:a.jsx($F,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Dashboards (Sales KPIs)"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Comprehensive sales dashboards with key performance indicators, revenue tracking, and analytics to monitor sales performance."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-rose-50 text-rose-600 flex items-center justify-center",children:a.jsx(PH,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"Feature Request"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Gemini Video Transcript"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Connect Gemini video transcripts and meeting sessions to company accounts for automatic note-taking and insights."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-violet-50 text-violet-600 flex items-center justify-center",children:a.jsx(_s,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Playbooks"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Create and manage sales playbooks, best practices, and standardized workflows for your team."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-pink-50 text-pink-600 flex items-center justify-center",children:a.jsx(LH,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Client Satisfaction"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Track and manage client satisfaction scores, feedback, and surveys to improve customer relationships."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-cyan-50 text-cyan-600 flex items-center justify-center",children:a.jsx(HH,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Section"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Product & Service Library"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Centralized library to manage products, services, pricing, and catalog information for your business."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(Oi,{className:"w-3 h-3"})]})]}),a.jsxs("div",{className:"bg-white border border-slate-200 rounded-3xl p-5 flex flex-col gap-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 rounded-2xl bg-indigo-50 text-indigo-600 flex items-center justify-center",children:a.jsx(UH,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs font-black uppercase tracking-widest text-slate-500",children:"New Integration"}),a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"LinkedIn DMs & Sales Nav"})]})]}),a.jsx("span",{className:"px-2 py-0.5 rounded-full text-[9px] font-black bg-amber-50 text-amber-600",children:"In Development"})]}),a.jsx("p",{className:"text-xs text-slate-500",children:"Integrate LinkedIn direct messages and LinkedIn Sales Navigator to manage conversations and leads directly in the platform."}),a.jsxs("button",{disabled:!0,className:"self-start px-4 py-2 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-100 text-slate-400 cursor-not-allowed flex items-center gap-2",children:["Coming Soon",a.jsx(Oi,{className:"w-3 h-3"})]})]})]})]}),s==="inbox"&&a.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:a.jsx(WU,{currentUser:e})}),s==="automation"&&a.jsx("div",{className:"animate-in slide-in-from-right-4 duration-500",children:a.jsx(FEe,{})}),H&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/90 backdrop-blur-sm animate-in fade-in duration-300",onClick:()=>se(null),children:a.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center",children:[a.jsx("button",{onClick:()=>se(null),className:"absolute top-4 right-4 p-3 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors backdrop-blur-sm z-10",children:a.jsx(zt,{className:"w-6 h-6"})}),a.jsx("img",{src:H.src,alt:H.alt,className:"max-w-full max-h-full object-contain rounded-2xl shadow-2xl",onClick:ee=>ee.stopPropagation()})]})}),b&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 flex flex-col max-h-[90vh]",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx($r,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"New Registry Entry"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Strategic Pipeline"})]})]}),a.jsx("button",{onClick:()=>{w(!1),j({type:"feature",title:"",description:""})},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(zt,{className:"w-6 h-6 text-slate-400"})})]}),a.jsxs("form",{onSubmit:ie,className:"flex-1 overflow-y-auto p-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),a.jsx("div",{className:"flex gap-2 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:a.jsx(n2,{className:"w-4 h-4"}),label:"Bug",color:"bg-red-50 text-red-600 border-red-200"},{id:"feature",icon:a.jsx(vi,{className:"w-4 h-4"}),label:"Feature",color:"bg-indigo-50 text-indigo-600 border-indigo-200"},{id:"idea",icon:a.jsx(Nk,{className:"w-4 h-4"}),label:"Idea",color:"bg-amber-50 text-amber-600 border-amber-200"}].map(ee=>a.jsxs("button",{type:"button",onClick:()=>j({...S,type:ee.id}),className:`flex-1 flex items-center justify-center gap-2 py-3 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all border ${S.type===ee.id?`${ee.color} shadow-md`:"bg-white text-slate-400 border-transparent hover:text-slate-600"}`,children:[ee.icon," ",ee.label]},ee.id))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"Enter entry title...",value:S.title,onChange:ee=>j({...S,title:ee.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Description *"}),a.jsx("textarea",{required:!0,rows:6,placeholder:"Provide detailed context and strategic notes...",value:S.description,onChange:ee=>j({...S,description:ee.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]})]}),a.jsxs("div",{className:"flex gap-4 pt-8 mt-8 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:()=>{w(!1),j({type:"feature",title:"",description:""})},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:y||!S.title||!S.description,className:"flex-[2] py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 transition-all shadow-2xl flex items-center justify-center gap-3 disabled:opacity-50 disabled:cursor-not-allowed",children:y?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-5 h-5 animate-spin"})," Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Jo,{className:"w-5 h-5"})," Add to Pipeline"]})})]})]})]})}),x&&a.jsxs("div",{className:"fixed inset-0 z-[110] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>v(null)}),a.jsxs("div",{className:"absolute right-0 inset-y-0 w-full max-w-xl bg-white shadow-2xl pointer-events-auto animate-in slide-in-from-right duration-500 flex flex-col",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 bg-slate-50/50 relative",children:[a.jsx("button",{onClick:()=>v(null),className:"absolute top-6 right-6 p-2 hover:bg-white rounded-full text-slate-400 transition-all shadow-sm z-10",children:a.jsx(zt,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex items-center gap-5 mb-6",children:[a.jsx("div",{className:`w-16 h-16 rounded-[24px] flex items-center justify-center text-white shadow-xl ${x.type==="bug"?"bg-red-500 shadow-red-100":x.type==="feature"?"bg-indigo-500 shadow-indigo-100":"bg-amber-500 shadow-amber-100"}`,children:ye(x.type,"w-8 h-8")}),a.jsxs("div",{children:[a.jsx("div",{className:`px-3 py-1 rounded-full text-[10px] font-black uppercase tracking-widest border inline-block mb-1.5 ${de(x.type)}`,children:x.type}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 tracking-tight leading-tight",children:x.title})]})]}),a.jsxs("div",{className:"flex gap-4",children:[a.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[Ne(x.status,"w-5 h-5"),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Pipeline Status"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 capitalize",children:x.status.replace("-"," ")})]})]}),a.jsxs("div",{className:"flex-1 p-4 bg-white rounded-2xl border border-slate-200 shadow-sm flex items-center gap-3",children:[a.jsx(Ln,{className:"w-5 h-5 text-indigo-400"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest",children:"Submitted On"}),a.jsx("p",{className:"text-xs font-bold text-slate-900",children:new Date(x.createdAt).toLocaleDateString()})]})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-10 space-y-10 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between gap-3",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(wi,{className:"w-4 h-4 text-indigo-500"})," Observation Context"]}),ce&&a.jsx("button",{type:"button",onClick:Z,disabled:E||q.trim()===(x.description||"").trim(),className:"px-4 py-1.5 rounded-full text-[10px] font-black uppercase tracking-widest bg-slate-900 text-white hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-default flex items-center gap-2",children:E?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-3 h-3 animate-spin"})," Saving"]}):a.jsxs(a.Fragment,{children:[a.jsx(Qr,{className:"w-3 h-3"})," Save Context"]})})]}),ce?a.jsxs("div",{className:"p-4 bg-slate-950 rounded-[32px] text-indigo-50 relative shadow-2xl",children:[a.jsx("textarea",{rows:4,value:q,onChange:ee=>L(ee.target.value),className:"w-full bg-transparent border-none outline-none resize-none text-sm leading-relaxed placeholder:text-slate-500",placeholder:"Describe the bug, feature, or idea in more detail..."}),a.jsx("div",{className:"pointer-events-none absolute top-0 right-0 w-40 h-40 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]}):a.jsxs("div",{className:"p-8 bg-slate-950 rounded-[40px] text-indigo-50 relative overflow-hidden group shadow-2xl",children:[a.jsxs("p",{className:"text-lg leading-relaxed italic opacity-90 z-10 relative",children:['"',x.description,'"']}),a.jsx("div",{className:"absolute top-0 right-0 w-48 h-48 bg-indigo-500/10 blur-[100px] rounded-full translate-x-1/2 -translate-y-1/2"})]})]}),x.url&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Of,{className:"w-4 h-4 text-indigo-500"})," URL Attachment"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:a.jsxs("a",{href:x.url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-indigo-50 text-indigo-600 rounded-xl text-xs font-bold hover:bg-indigo-100 transition-colors border border-indigo-200",children:[x.url.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)?a.jsx(_o,{className:"w-4 h-4"}):a.jsx(hm,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[200px]",children:x.url.length>40?`${x.url.substring(0,40)}...`:x.url}),a.jsx(za,{className:"w-4 h-4"})]})})]}),x.attachments&&x.attachments.length>0&&a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(_o,{className:"w-4 h-4 text-indigo-500"})," File Attachments"]}),a.jsx("div",{className:"flex flex-wrap gap-3",children:x.attachments.map((ee,fe)=>ee.type==="image"&&ee.data?a.jsxs("button",{type:"button",onClick:()=>se({src:ee.data,alt:ee.filename||"Attachment"}),className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(_o,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[150px]",children:ee.filename||"Screenshot"})]},fe):ee.type==="video"&&ee.data?a.jsxs("a",{href:ee.data,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2.5 bg-slate-100 text-slate-700 rounded-xl text-xs font-bold hover:bg-slate-200 transition-colors border border-slate-200",children:[a.jsx(hm,{className:"w-4 h-4"}),a.jsx("span",{className:"truncate max-w-[150px]",children:ee.filename||"Video"}),a.jsx(za,{className:"w-4 h-4"})]},fe):null)})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(co,{className:"w-4 h-4 text-indigo-500"})," Contributor Details"]}),a.jsxs("div",{className:"p-6 bg-slate-50 border border-slate-100 rounded-[32px] flex items-center gap-5",children:[a.jsx("div",{className:"w-14 h-14 bg-white rounded-2xl flex items-center justify-center text-indigo-600 text-xl font-black shadow-sm border border-slate-200",children:((Ae=(we=c.find(ee=>ee.id===x.userId))==null?void 0:we.name)==null?void 0:Ae.charAt(0))||"U"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-black text-slate-900",children:((Ue=c.find(ee=>ee.id===x.userId))==null?void 0:Ue.name)||"Impact Member"}),a.jsxs("p",{className:"text-xs text-slate-500 font-bold uppercase tracking-widest",children:[((me=c.find(ee=>ee.id===x.userId))==null?void 0:me.role)||"Stakeholder","  Enterprise Contributor"]})]})]})]}),ce&&a.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-4",children:[a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Cu,{className:"w-4 h-4 text-indigo-500"})," Strategic Alignment"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:["planned","in-progress","done","postponed","canceled"].map(ee=>a.jsxs("button",{onClick:()=>ve(x.id,ee),className:`flex items-center gap-2 p-4 rounded-2xl border text-[10px] font-black uppercase tracking-widest transition-all ${x.status===ee?"bg-indigo-600 text-white border-indigo-600 shadow-lg":"bg-white text-slate-500 border-slate-200 hover:border-indigo-400"}`,children:[Ne(ee,"w-3 h-3"),ee.replace("-"," ")]},ee))})]})]}),a.jsxs("div",{className:"p-8 border-t border-slate-100 bg-white flex gap-4",children:[a.jsx("button",{onClick:()=>A(x),className:"px-6 py-4 border border-red-200 bg-white text-red-600 hover:bg-red-50 rounded-[24px] transition-all group shrink-0 active:scale-95",children:a.jsx(br,{className:"w-6 h-6 group-hover:scale-110 transition-transform"})}),a.jsxs("button",{onClick:()=>v(null),className:"flex-1 py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.2em] rounded-[24px] hover:bg-indigo-700 active:scale-95 transition-all shadow-2xl flex items-center justify-center gap-3",children:[a.jsx(Qr,{className:"w-5 h-5"})," Dismiss Audit View"]})]})]})]}),_.type&&_.item&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:`w-12 h-12 rounded-2xl flex items-center justify-center ${_.type==="done"?"bg-emerald-50 text-emerald-600":_.type==="in-execution"?"bg-blue-50 text-blue-600":"bg-slate-100 text-slate-600"}`,children:_.type==="done"?a.jsx(Qr,{className:"w-6 h-6"}):_.type==="in-execution"?a.jsx(Qa,{className:"w-6 h-6"}):a.jsx(Md,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:_.type==="done"?"Mark as Done?":_.type==="in-execution"?"Mark as In Execution?":"Archive Entry?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:_.type==="done"?"This will move the entry to Archive & Done":_.type==="in-execution"?"This will mark the entry as in progress":"This will archive the entry"})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:_.item.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:_.item.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>T({type:null,item:null}),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:Q,className:`flex-1 py-3 font-black uppercase text-xs tracking-widest rounded-xl transition-all shadow-lg ${_.type==="done"?"bg-emerald-600 text-white hover:bg-emerald-700":_.type==="in-execution"?"bg-blue-600 text-white hover:bg-blue-700":"bg-slate-600 text-white hover:bg-slate-700"}`,children:_.type==="done"?"Mark Done":_.type==="in-execution"?"Start Execution":"Archive"})]})]})}),D&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Entry?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entry will be permanently removed from the registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:D.title}),a.jsx("p",{className:"text-xs text-slate-500 line-clamp-2",children:D.description})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>A(null),disabled:C,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:()=>ne(D.id),disabled:C,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:C?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete Entry"})]})]})}),F.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 -translate-x-1/2 z-[100] animate-in slide-in-from-bottom-10 duration-300",children:a.jsxs("div",{className:"bg-slate-900 text-white rounded-3xl shadow-2xl px-8 py-4 flex items-center gap-8 border border-white/10 ring-4 ring-indigo-500/10",children:[a.jsxs("span",{className:"text-sm font-black flex items-center gap-3",children:[a.jsx("div",{className:"w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-[10px]",children:F.length}),"Selected"]}),a.jsx("div",{className:"h-8 w-px bg-white/10"}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:ee=>{if(ee.preventDefault(),ee.stopPropagation(),!ce){n("Only admins can delete entries");return}if(F.length===0){n("No items selected");return}U(!0)},disabled:Y,className:"px-5 py-2 bg-red-600 hover:bg-red-700 rounded-xl text-xs font-black uppercase tracking-widest transition-all flex items-center gap-2 disabled:opacity-50 disabled:cursor-not-allowed",children:[Y?a.jsx(ct,{className:"w-3.5 h-3.5 animate-spin"}):a.jsx(br,{className:"w-3.5 h-3.5"}),"Delete"]}),a.jsx("button",{onClick:()=>B([]),className:"p-2 hover:bg-white/10 rounded-xl text-slate-400 transition-colors",children:a.jsx(zt,{className:"w-5 h-5"})})]})]})}),J&&F.length>0&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",F.length," Entr",F.length>1?"ies":"y","?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone. The entries will be permanently removed from the registry."})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200 max-h-48 overflow-y-auto",children:[o.filter(ee=>F.includes(ee.id)).slice(0,5).map(ee=>a.jsxs("div",{className:"flex items-center gap-3 mb-2 last:mb-0",children:[ye(ee.type,"w-4 h-4"),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:ee.title}),a.jsx("p",{className:"text-[10px] text-slate-500 capitalize",children:ee.type})]})]},ee.id)),F.length>5&&a.jsxs("p",{className:"text-xs text-slate-400 font-medium mt-2 text-center",children:["+ ",F.length-5," more"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>U(!1),disabled:Y,className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"}),a.jsx("button",{onClick:ee=>{ee.preventDefault(),ee.stopPropagation(),Xe()},disabled:Y,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:Y?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):`Delete ${F.length} Entr${F.length>1?"ies":"y"}`})]})]})})]})},REe=({currentUser:e})=>{var Ee,qe,Ke,Qe,_t,vt,ke,Je,mt;const{showSuccess:t,showError:r}=hn(),[n,s]=P.useState([]),[i,o]=P.useState([]),[l,c]=P.useState([]),[d,f]=P.useState(null),[u,p]=P.useState(!0),[h,m]=P.useState(!1),[g,x]=P.useState([]),[v,b]=P.useState(!1),[w,y]=P.useState("select"),[N,S]=P.useState(""),[j,_]=P.useState(!1),[T,D]=P.useState(!1),[A,C]=P.useState([]),[M,F]=P.useState(!1),[B,Y]=P.useState(!1),[V,J]=P.useState(!1),[U,X]=P.useState(!1),[W,E]=P.useState(!1),[R,q]=P.useState(!1),[L,H]=P.useState(""),[se,ce]=P.useState(!1),ae=P.useRef(null),[Z,ve]=P.useState({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),ne=P.useCallback(async()=>{try{const ue=await MR(),Ye=(ue==null?void 0:ue.data)||ue||[];c(Array.isArray(Ye)?Ye:[])}catch{c([{id:"default-1",name:"Travel",isDefault:!0},{id:"default-2",name:"Meals",isDefault:!0},{id:"default-3",name:"Office Supplies",isDefault:!0},{id:"default-4",name:"Software",isDefault:!0},{id:"default-5",name:"Marketing",isDefault:!0},{id:"default-6",name:"Professional Services",isDefault:!0},{id:"default-7",name:"Utilities",isDefault:!0},{id:"default-8",name:"Equipment",isDefault:!0},{id:"default-9",name:"Other",isDefault:!0}])}},[]),He=P.useCallback(async()=>{p(!0);try{const ue={};g.length===1&&(ue.companyId=g[0]);const Ye=await Rve(ue);let bt=(Ye==null?void 0:Ye.data)||Ye||[];bt=Array.isArray(bt)?bt:[],g.length>1&&(bt=bt.filter(xt=>g.includes(xt.companyId))),s(bt);try{const xt=await jc();o((xt==null?void 0:xt.data)||xt||[])}catch(xt){console.error("[Expenses] Failed to fetch companies:",xt),o([])}}catch(ue){console.error("[Expenses] Error fetching expenses:",ue),r(ue.message||"Failed to load expenses"),s([])}finally{p(!1)}},[e,g,r]);P.useEffect(()=>{ne()},[ne]),P.useEffect(()=>{He()},[He]),P.useEffect(()=>{const ue=()=>He();return window.addEventListener("refresh-expenses",ue),()=>window.removeEventListener("refresh-expenses",ue)},[He]);const Xe=ue=>i.find(Ye=>Ye.id===ue),ie=ue=>{switch(ue){case"Approved":return"bg-emerald-50 text-emerald-600 border-emerald-100";case"Rejected":return"bg-red-50 text-red-600 border-red-100";default:return"bg-amber-50 text-amber-600 border-amber-100"}},Q=n,Ne={totalExpenses:Q.reduce((ue,Ye)=>ue+(Ye.amount||0),0),pendingCount:Q.filter(ue=>ue.status==="Pending"||!ue.status).length,approvedCount:Q.filter(ue=>ue.status==="Approved").length,thisMonth:Q.filter(ue=>{const Ye=new Date(ue.date),bt=new Date;return Ye.getMonth()===bt.getMonth()&&Ye.getFullYear()===bt.getFullYear()}).reduce((ue,Ye)=>ue+(Ye.amount||0),0)},de=()=>{A.length===Q.length&&Q.length>0?C([]):C(Q.map(ue=>ue.id))},ye=(ue,Ye=1920,bt=1080,xt=.8)=>new Promise((Vt,gr)=>{const qt=new FileReader;qt.onload=Gt=>{var fr;const Bt=new Image;Bt.onload=()=>{let Sr=Bt.width,Cr=Bt.height;Sr>Cr?Sr>Ye&&(Cr=Cr*Ye/Sr,Sr=Ye):Cr>bt&&(Sr=Sr*bt/Cr,Cr=bt);const cr=document.createElement("canvas");cr.width=Sr,cr.height=Cr;const It=cr.getContext("2d");if(!It){gr(new Error("Failed to create canvas context"));return}It.drawImage(Bt,0,0,Sr,Cr);const yr=cr.toDataURL("image/jpeg",xt);Vt(yr)},Bt.onerror=()=>gr(new Error("Failed to load image")),Bt.src=(fr=Gt.target)==null?void 0:fr.result},qt.onerror=()=>gr(new Error("Failed to read file")),qt.readAsDataURL(ue)}),xe=async ue=>{var bt;const Ye=(bt=ue.target.files)==null?void 0:bt[0];if(Ye){if(!Ye.type.startsWith("image/")&&!Ye.type.includes("pdf")){r("Please select an image or PDF file");return}if(Ye.size>10*1024*1024){r("File size must be less than 10MB");return}q(!0);try{if(Ye.type.startsWith("image/")){const xt=await ye(Ye,1920,1080,.8);H(xt),ve(Vt=>({...Vt,receiptFile:Ye}))}else{const xt=new FileReader;xt.onload=()=>{H(xt.result),ve(Vt=>({...Vt,receiptFile:Ye}))},xt.readAsDataURL(Ye)}}catch(xt){r(xt.message||"Failed to process receipt")}finally{q(!1)}}},we=async ue=>{if(ue.preventDefault(),!Z.companyId||!Z.title||!Z.amount||!Z.category||!Z.date){r("Please fill in all required fields");return}E(!0);try{const Ye=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id;let bt="",xt="",Vt="";Z.receiptFile&&(Z.receiptFile.type.startsWith("image/"),bt=L,xt=Z.receiptFile.name,Vt=Z.receiptFile.type),await Bve({companyId:Z.companyId,title:Z.title,amount:parseFloat(Z.amount),category:Z.category,date:new Date(Z.date).toISOString(),description:Z.description,status:Z.status,receiptUrl:bt||void 0,receiptFilename:xt||void 0,receiptMimeType:Vt||void 0,userId:Ye}),t("Expense added successfully"),X(!1),ve({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),H(""),ae.current&&(ae.current.value=""),He(),window.dispatchEvent(new Event("refresh-expenses"))}catch(Ye){r(Ye.message||"Failed to add expense")}finally{E(!1)}},Ae=async()=>{var ue,Ye;if(N.trim()){_(!0);try{const bt=await RR({name:N.trim()});if(bt!=null&&bt.data){const xt=bt.data;c(Vt=>[...Vt,xt]),ve(Vt=>({...Vt,category:xt.name})),S(""),b(!1),t("Category added successfully")}}catch(bt){(ue=bt.message)!=null&&ue.includes("already exists")||(Ye=bt.message)!=null&&Ye.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(bt.message||"Failed to add category")}finally{_(!1)}}},Ue=async(ue,Ye)=>{ce(!0);try{await $ve(ue,{status:Ye}),s(bt=>bt.map(xt=>xt.id===ue?{...xt,status:Ye}:xt)),d&&d.id===ue&&f({...d,status:Ye}),t(`Expense status updated to ${Ye}`),window.dispatchEvent(new Event("refresh-expenses"))}catch(bt){r(bt.message||"Failed to update expense status")}finally{ce(!1)}},me=async()=>{if(d){m(!0);try{await lI(d.id),s(ue=>ue.filter(Ye=>Ye.id!==d.id)),f(null),J(!1),t("Expense deleted successfully"),window.dispatchEvent(new Event("refresh-expenses"))}catch(ue){r(ue.message||"Failed to delete expense")}finally{m(!1)}}},ee=async()=>{const ue=[...A];if(ue.length!==0){F(!0),Y(!1);try{await Promise.all(ue.map(Ye=>lI(Ye))),s(Ye=>Ye.filter(bt=>!ue.includes(bt.id))),C([]),t(`Successfully deleted ${ue.length} expense(s)`),window.dispatchEvent(new Event("refresh-expenses"))}catch{r("Failed to delete some expenses")}finally{F(!1)}}},fe=ue=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}).format(ue),Fe=ue=>new Date(ue).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return u?a.jsx("div",{className:"flex items-center justify-center min-h-screen",children:a.jsx(ct,{className:"w-8 h-8 animate-spin text-indigo-600"})}):a.jsxs("div",{className:"w-full pt-0 pb-20 px-0",children:[a.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-black text-slate-900 mb-2",children:"Expenses"}),a.jsx("p",{className:"text-slate-500 text-sm",children:"Manage company expenses and receipts"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>{y("manage"),b(!0)},className:"px-4 py-3 bg-white text-indigo-600 rounded-xl font-bold text-sm hover:bg-indigo-50 transition-all flex items-center gap-2 border-2 border-indigo-200",children:[a.jsx(Xa,{className:"w-4 h-4"}),"Manage Categories"]}),a.jsxs("button",{onClick:()=>X(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all flex items-center gap-2 shadow-lg",children:[a.jsx($r,{className:"w-5 h-5"}),"Add Expense"]})]})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[{label:"Total Expenses",value:fe(Ne.totalExpenses),icon:a.jsx(Uu,{className:"w-5 h-5"}),color:"text-indigo-600 bg-indigo-50"},{label:"Pending",value:Ne.pendingCount.toString(),icon:a.jsx(Qa,{className:"w-5 h-5"}),color:"text-amber-600 bg-amber-50"},{label:"Approved",value:Ne.approvedCount.toString(),icon:a.jsx(Hs,{className:"w-5 h-5"}),color:"text-emerald-600 bg-emerald-50"},{label:"This Month",value:fe(Ne.thisMonth),icon:a.jsx(Ln,{className:"w-5 h-5"}),color:"text-blue-600 bg-blue-50"}].map((ue,Ye)=>a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsx("div",{className:"flex items-center justify-between mb-2",children:a.jsx("div",{className:`p-2 rounded-lg ${ue.color}`,children:ue.icon})}),a.jsx("p",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-1",children:ue.label}),a.jsx("p",{className:"text-2xl font-black text-slate-900",children:ue.value})]},Ye))}),a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(a0,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Filter by Company:"})]}),a.jsxs("button",{onClick:()=>D(!0),className:"px-4 py-2 border border-slate-200 rounded-lg text-sm font-bold bg-white hover:bg-slate-50 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 transition-colors flex items-center gap-2",children:[a.jsx("span",{children:g.length===0?"All Companies":g.length===1?((Ee=i.find(ue=>ue.id===g[0]))==null?void 0:Ee.name)||"1 Selected":`${g.length} Companies Selected`}),g.length>0&&a.jsx("span",{className:"px-2 py-0.5 bg-indigo-600 text-white text-xs font-bold rounded-full",children:g.length})]}),a.jsxs("div",{className:"text-xs text-slate-400 font-bold ml-auto",children:["Showing ",Q.length," expense(s)"]})]}),A.length>0&&a.jsx("div",{className:"fixed bottom-8 left-1/2 transform -translate-x-1/2 z-50 animate-in fade-in slide-in-from-bottom-4 duration-300",children:a.jsxs("div",{className:"bg-slate-900 rounded-full px-6 py-4 shadow-2xl flex items-center gap-4 min-w-[320px]",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-500 flex items-center justify-center flex-shrink-0",children:a.jsx("span",{className:"text-white text-sm font-black",children:A.length})}),a.jsx("span",{className:"text-white text-sm font-bold",children:"Selected"}),a.jsx("div",{className:"w-px h-6 bg-white/20"}),a.jsx("button",{onClick:()=>Y(!0),disabled:M,className:"px-4 py-2 bg-red-600 text-white rounded-lg font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2 flex-shrink-0",children:M?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(br,{className:"w-4 h-4"}),"DELETE"]})}),a.jsx("button",{onClick:()=>C([]),className:"p-1.5 hover:bg-white/10 rounded-full transition-colors flex-shrink-0 ml-auto","aria-label":"Dismiss",children:a.jsx(zt,{className:"w-5 h-5 text-white"})})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:`lg:col-span-2 space-y-4 ${d?"lg:pr-6":""}`,children:[Q.length>0&&a.jsx("div",{className:"flex items-center gap-3 mb-4",children:a.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:A.length===Q.length&&Q.length>0,onChange:de,className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx("span",{className:"text-sm font-bold text-slate-600",children:"Select All"})]})}),Q.length===0?a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 p-12 text-center",children:[a.jsx(Ak,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-black text-slate-900 mb-2",children:"No Expenses Found"}),a.jsx("p",{className:"text-slate-500 text-sm mb-6",children:"Get started by adding your first expense"}),a.jsxs("button",{onClick:()=>X(!0),className:"px-6 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-all",children:[a.jsx($r,{className:"w-5 h-5 inline mr-2"}),"Add Expense"]})]}):Q.map(ue=>{const Ye=Xe(ue.companyId),bt=A.includes(ue.id);return a.jsxs("div",{onClick:()=>f(ue),className:`bg-white rounded-2xl border ${bt?"border-indigo-400 bg-indigo-50/30":"border-slate-200"} shadow-sm hover:shadow-xl transition-all cursor-pointer p-6 ${(d==null?void 0:d.id)===ue.id?"ring-2 ring-indigo-500":""}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[a.jsx("input",{type:"checkbox",checked:bt,onChange:xt=>{xt.stopPropagation(),C(Vt=>bt?Vt.filter(gr=>gr!==ue.id):[...Vt,ue.id])},onClick:xt=>xt.stopPropagation(),className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4 shrink-0"}),a.jsx(hs,{src:Ye==null?void 0:Ye.logo,fallbackText:Ye==null?void 0:Ye.name,className:"w-10 h-10 rounded-xl shrink-0",isAvatar:!1}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"font-black text-slate-900 text-lg mb-1 truncate",children:ue.title}),a.jsx("p",{className:"text-sm text-slate-500 truncate",children:(Ye==null?void 0:Ye.name)||"Unknown Company"})]})]}),a.jsxs("div",{className:"text-right shrink-0 ml-4",children:[a.jsx("p",{className:"text-2xl font-black text-slate-900 mb-1",children:fe(ue.amount)}),a.jsxs("select",{value:ue.status||"Pending",onChange:xt=>{xt.stopPropagation(),Ue(ue.id,xt.target.value)},onClick:xt=>xt.stopPropagation(),disabled:se,className:`px-2 py-1 rounded-full text-[10px] font-black uppercase border outline-none cursor-pointer transition-all ${ie(ue.status||"Pending")} ${se?"opacity-50 cursor-not-allowed":""}`,children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]})]})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500 mb-4",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Xa,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:ue.category})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Ln,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:Fe(ue.date)})]}),ue.receiptUrl&&a.jsxs("div",{className:"flex items-center gap-1 text-indigo-600",children:[a.jsx(Dn,{className:"w-3 h-3"}),a.jsx("span",{className:"font-bold",children:"Receipt"})]})]}),ue.description&&a.jsx("p",{className:"text-sm text-slate-600 mb-4 line-clamp-2",children:ue.description}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-100",children:[a.jsxs("button",{onClick:xt=>{xt.stopPropagation(),f(ue)},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 flex items-center gap-1",children:["View Details",a.jsx(ra,{className:"w-3 h-3"})]}),a.jsx("button",{onClick:xt=>{xt.stopPropagation(),f(ue),J(!0)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(br,{className:"w-4 h-4"})})]})]},ue.id)})]}),d&&a.jsxs("div",{className:"lg:col-span-1 bg-white rounded-2xl border border-slate-200 shadow-xl p-6 sticky top-6 max-h-[calc(100vh-3rem)] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-black text-slate-900",children:"Expense Details"}),a.jsx("button",{onClick:()=>f(null),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Title"}),a.jsx("p",{className:"text-lg font-black text-slate-900",children:d.title})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Company"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(hs,{src:(qe=Xe(d.companyId))==null?void 0:qe.logo,fallbackText:(Ke=Xe(d.companyId))==null?void 0:Ke.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:((Qe=Xe(d.companyId))==null?void 0:Qe.name)||"Unknown"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Amount"}),a.jsx("p",{className:"text-2xl font-black text-indigo-600",children:fe(d.amount)})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Category"}),a.jsx("span",{className:"px-3 py-1.5 bg-indigo-50 text-indigo-600 rounded-lg text-sm font-bold",children:d.category})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),a.jsxs("select",{value:d.status||"Pending",onChange:ue=>{const Ye=ue.target.value;Ue(d.id,Ye)},disabled:se,className:`w-full px-3 py-1.5 rounded-lg text-sm font-bold border outline-none focus:ring-2 focus:ring-indigo-500 transition-all ${ie(d.status||"Pending")} ${se?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]}),se&&a.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[a.jsx(ct,{className:"w-3 h-3 animate-spin text-indigo-600"}),a.jsx("span",{className:"text-xs text-slate-500",children:"Updating..."})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Date"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Fe(d.date)})]}),d.description&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),a.jsx("p",{className:"text-sm text-slate-600",children:d.description})]}),d.receiptUrl&&a.jsxs("div",{children:[a.jsx("label",{className:"text-xs font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Receipt"}),a.jsx("div",{className:"space-y-2",children:(_t=d.receiptMimeType)!=null&&_t.startsWith("image/")?a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:d.receiptUrl,alt:d.receiptFilename||"Receipt",className:"w-full rounded-lg border border-slate-200 cursor-pointer hover:opacity-90 transition-opacity",onClick:()=>{const ue=window.open();ue&&ue.document.write(`<img src="${d.receiptUrl}" style="max-width:100%;height:auto;" />`)}}),a.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 rounded-lg transition-colors flex items-center justify-center opacity-0 group-hover:opacity-100",children:a.jsx(Wd,{className:"w-6 h-6 text-white drop-shadow-lg"})})]}):a.jsxs("a",{href:d.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 p-3 bg-slate-50 border border-slate-200 rounded-lg hover:bg-slate-100 transition-colors",children:[a.jsx(Dn,{className:"w-5 h-5 text-indigo-600"}),a.jsx("span",{className:"text-sm font-bold text-slate-900 flex-1 truncate",children:d.receiptFilename||"Receipt"}),a.jsx(n0,{className:"w-4 h-4 text-slate-400"})]})})]}),a.jsx("div",{className:"pt-4 border-t border-slate-200",children:a.jsx("button",{onClick:()=>{f(d),J(!0)},disabled:h,className:"w-full px-4 py-3 bg-red-600 text-white rounded-xl font-bold text-sm hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(br,{className:"w-4 h-4"}),"Delete Expense"]})})})]})]})]}),U&&a.jsx("div",{className:"fixed inset-0 z-[120] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-start bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 bg-indigo-600 rounded-2xl flex items-center justify-center text-white shadow-xl shadow-indigo-100",children:a.jsx(Ak,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none",children:"Add Expense"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black mt-2",children:"Company Expense Management"})]})]}),a.jsx("button",{onClick:()=>{X(!1),ve({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),H(""),ae.current&&(ae.current.value="")},className:"p-2 hover:bg-white rounded-full transition-colors border border-transparent hover:border-slate-200",children:a.jsx(zt,{className:"w-6 h-6 text-slate-400"})})]}),a.jsxs("form",{onSubmit:we,className:"p-8 space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Company *"}),a.jsxs("select",{required:!0,value:Z.companyId,onChange:ue=>ve({...Z,companyId:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[a.jsx("option",{value:"",children:"Select Company"}),i.map(ue=>a.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Title *"}),a.jsx("input",{required:!0,type:"text",placeholder:"Expense title...",value:Z.title,onChange:ue=>ve({...Z,title:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Amount *"}),a.jsx("input",{required:!0,type:"number",step:"0.01",min:"0",placeholder:"0.00",value:Z.amount,onChange:ue=>ve({...Z,amount:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Category *"}),a.jsxs("button",{type:"button",onClick:()=>{y("select"),b(!0)},className:`w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50 text-left flex items-center justify-between ${Z.category?"text-slate-900":"text-slate-400"}`,children:[a.jsx("span",{children:Z.category||"Select Category"}),a.jsx(ra,{className:"w-4 h-4 text-slate-400"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Date *"}),a.jsx("input",{required:!0,type:"date",value:Z.date,onChange:ue=>ve({...Z,date:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Status"}),a.jsxs("select",{value:Z.status,onChange:ue=>ve({...Z,status:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50",children:[a.jsx("option",{value:"Pending",children:"Pending"}),a.jsx("option",{value:"Approved",children:"Approved"}),a.jsx("option",{value:"Rejected",children:"Rejected"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Description"}),a.jsx("textarea",{rows:3,placeholder:"Additional details...",value:Z.description,onChange:ue=>ve({...Z,description:ue.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 mb-2 block",children:"Receipt (Image/PDF)"}),a.jsxs("label",{className:"flex items-center gap-3 p-4 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:R?a.jsx(ct,{className:"w-5 h-5 animate-spin"}):L?a.jsx(_o,{className:"w-5 h-5"}):a.jsx(cd,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:L?((vt=Z.receiptFile)==null?void 0:vt.name)||"Receipt uploaded":"Upload Receipt"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, PDF (Max 10MB)"})]}),a.jsx("input",{ref:ae,type:"file",accept:"image/*,.pdf",onChange:xe,disabled:R,className:"hidden"})]}),L&&((ke=Z.receiptFile)==null?void 0:ke.type.startsWith("image/"))&&a.jsx("div",{className:"mt-3",children:a.jsx("img",{src:L,alt:"Receipt preview",className:"w-full max-h-48 object-contain rounded-lg border border-slate-200"})}),L&&((Je=Z.receiptFile)==null?void 0:Je.type.includes("pdf"))&&a.jsxs("div",{className:"mt-3 p-4 bg-red-50 border-2 border-red-200 rounded-xl flex items-center gap-3",children:[a.jsx(Dn,{className:"w-8 h-8 text-red-600 shrink-0"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-sm font-bold text-red-900",children:Z.receiptFile.name}),a.jsx("p",{className:"text-xs text-red-700 mt-0.5",children:"PDF document ready to upload"})]}),a.jsx("button",{type:"button",onClick:()=>{H(""),ve(ue=>({...ue,receiptFile:null})),ae.current&&(ae.current.value="")},className:"p-2 hover:bg-red-100 rounded-lg text-red-600 transition-all",children:a.jsx(zt,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-4 pt-6 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:()=>{X(!1),ve({companyId:"",title:"",amount:"",category:"",date:new Date().toISOString().split("T")[0],description:"",status:"Pending",receiptFile:null}),H(""),ae.current&&(ae.current.value="")},className:"flex-1 py-4 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:W||R,className:"flex-1 py-4 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-[24px] hover:bg-indigo-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:W?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx($r,{className:"w-4 h-4"}),"Add Expense"]})})]})]})]})}),V&&d&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100",children:[a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-black text-slate-900",children:"Delete Expense?"}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]}),a.jsxs("div",{className:"p-4 bg-slate-50 rounded-2xl border border-slate-200",children:[a.jsx("p",{className:"text-sm font-bold text-slate-900 mb-1",children:d.title}),a.jsxs("p",{className:"text-xs text-slate-500",children:[fe(d.amount),"  ",((mt=Xe(d.companyId))==null?void 0:mt.name)||"Unknown"]})]})]}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>{J(!1),f(null)},className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:me,disabled:h,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:h?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete"})]})]})}),v&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:w==="manage"?"Manage Categories":"Select Category"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:w==="manage"?"View and add expense categories":"Choose an expense category"})]}),a.jsx("button",{onClick:()=>{b(!1),S("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Xa,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):w==="manage"?l.map(ue=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(Xa,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:ue.name})]}),a.jsx(Qr,{className:"w-5 h-5 text-emerald-600"})]},ue.id)):l.map(ue=>a.jsxs("button",{type:"button",onClick:()=>{ve({...Z,category:ue.name}),b(!1)},className:`w-full px-4 py-3 rounded-xl text-left transition-all flex items-center justify-between ${Z.category===ue.name?"bg-indigo-50 text-indigo-600 border-2 border-indigo-200":"bg-slate-50 text-slate-900 border-2 border-transparent hover:bg-slate-100"}`,children:[a.jsx("span",{className:"font-bold text-sm",children:ue.name}),Z.category===ue.name?a.jsx(Qr,{className:"w-5 h-5 text-indigo-600"}):a.jsx(Hd,{className:"w-5 h-5 text-slate-300"})]},ue.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New category name...",value:N,onChange:ue=>S(ue.target.value),onKeyDown:ue=>{ue.key==="Enter"&&N.trim()&&!j&&(ue.preventDefault(),Ae())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Ae,disabled:!N.trim()||j,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:j?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx($r,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})}),T&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Filter by Company"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Select one or more companies"})]}),a.jsx("button",{onClick:()=>D(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx("input",{type:"checkbox",checked:g.length===0,onChange:()=>{x([])},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:"All Companies"})]}),i.map(ue=>a.jsxs("label",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-slate-50 cursor-pointer transition-colors",children:[a.jsx("input",{type:"checkbox",checked:g.includes(ue.id),onChange:Ye=>{Ye.target.checked?x(bt=>[...bt,ue.id]):x(bt=>bt.filter(xt=>xt!==ue.id))},className:"rounded border-slate-300 text-indigo-600 focus:ring-indigo-500 w-4 h-4"}),a.jsx(hs,{src:ue.logo,fallbackText:ue.name,className:"w-6 h-6 rounded-lg",isAvatar:!1}),a.jsx("span",{className:"font-bold text-sm text-slate-900 flex-1",children:ue.name})]},ue.id))]})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>{x([])},disabled:g.length===0,className:"px-4 py-2 border border-slate-200 text-slate-600 rounded-xl font-bold text-sm hover:bg-slate-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[a.jsx(zt,{className:"w-4 h-4"}),"Clear All"]}),a.jsxs("button",{onClick:()=>{D(!1),He()},className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors",children:["Apply Filters (",g.length===0?"All":g.length,")"]})]})]})}),B&&a.jsx("div",{className:"fixed inset-0 z-[130] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-[32px] w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsx("div",{className:"p-8 border-b border-slate-100",children:a.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[a.jsx("div",{className:"w-12 h-12 rounded-2xl flex items-center justify-center bg-red-50 text-red-600",children:a.jsx(br,{className:"w-6 h-6"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-xl font-black text-slate-900",children:["Delete ",A.length," Expense(s)?"]}),a.jsx("p",{className:"text-xs text-slate-400 font-medium mt-1",children:"This action cannot be undone"})]})]})}),a.jsxs("div",{className:"p-6 flex gap-3",children:[a.jsx("button",{onClick:()=>Y(!1),className:"flex-1 py-3 border border-slate-200 text-slate-400 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-slate-50 transition-all",children:"Cancel"}),a.jsx("button",{onClick:ee,disabled:M,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):"Delete All"})]})]})})]})},BEe=({currentUser:e})=>{const{showSuccess:t,showError:r}=hn(),[n,s]=P.useState([]),[i,o]=P.useState([]),[l,c]=P.useState([]),[d,f]=P.useState(new Date().getFullYear()),[u,p]=P.useState(""),[h,m]=P.useState(null),[g,x]=P.useState(!0),[v,b]=P.useState(!1),[w,y]=P.useState("yearly"),[N,S]=P.useState(!1),[j,_]=P.useState(!1),[T,D]=P.useState(null),[A,C]=P.useState(!1),[M,F]=P.useState(!1),[B,Y]=P.useState(null),[V,J]=P.useState(!1),[U,X]=P.useState(""),[W,E]=P.useState(!1),[R,q]=P.useState({year:new Date().getFullYear(),department:"",categories:[]}),L=(e==null?void 0:e.role)==="Admin",H=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,se=Array.from({length:5},(xe,we)=>new Date().getFullYear()-2+we),ce=P.useCallback(async()=>{try{const xe=await Vve(),we=(xe==null?void 0:xe.data)||[];o(Array.isArray(we)?we:[])}catch(xe){console.error("[BUDGET] Error fetching departments:",xe)}},[]),ae=P.useCallback(async()=>{try{const xe=await MR(),we=(xe==null?void 0:xe.data)||[];c(Array.isArray(we)?we:[])}catch(xe){console.error("[BUDGET] Error fetching categories:",xe)}},[]),Z=P.useCallback(async()=>{x(!0);try{const xe={year:d};u&&(xe.department=u),console.log("[Budget] Fetching budgets with params:",xe);const we=await Uve(xe),Ae=(we==null?void 0:we.data)||[];console.log("[Budget] Received budgets:",Ae),s(Array.isArray(Ae)?Ae:[])}catch(xe){console.error("[Budget] Error fetching budgets:",xe),r(xe.message||"Failed to load budgets")}finally{x(!1)}},[d,u,r]),ve=P.useCallback(async()=>{b(!0);try{const xe={year:d};u&&(xe.department=u),console.log("[Budget] Fetching tracking with params:",xe);const we=await Wve(xe);console.log("[Budget] Received tracking:",we==null?void 0:we.data),m((we==null?void 0:we.data)||null)}catch(xe){console.error("[Budget] Error fetching tracking:",xe),m(null)}finally{b(!1)}},[d,u]);P.useEffect(()=>{ce(),ae()},[ce,ae]),P.useEffect(()=>{Z(),ve()},[Z,ve]);const ne=()=>{q({year:d,department:u,categories:l.map(xe=>({categoryId:xe.id,categoryName:xe.name,yearlyBudget:0,q1Budget:0,q2Budget:0,q3Budget:0,q4Budget:0}))})},He=async()=>{var xe,we;if(U.trim()){E(!0);try{const Ae=await RR({name:U.trim()});if(Ae!=null&&Ae.data){const Ue=Ae.data;c(me=>[...me,Ue]),X(""),t("Category added successfully"),ae()}}catch(Ae){(xe=Ae.message)!=null&&xe.includes("already exists")||(we=Ae.message)!=null&&we.includes("CATEGORY_EXISTS")?r("Category with this name already exists"):r(Ae.message||"Failed to add category")}finally{E(!1)}}},Xe=async()=>{if(!H){r("User not found");return}if(R.categories.length===0){r("Please add at least one category");return}if(R.categories.reduce((we,Ae)=>we+Ae.yearlyBudget,0)===0){r("Total budget cannot be zero");return}C(!0);try{await zve({year:R.year,department:R.department||null,categories:R.categories,createdBy:H}),t("Budget created successfully"),S(!1),Z(),ve()}catch(we){r(we.message||"Failed to create budget")}finally{C(!1)}},ie=async()=>{if(!(!T||!H)){C(!0);try{await qve(T.id,{categories:R.categories,updatedBy:H}),t("Budget updated successfully"),_(!1),D(null),Z(),ve()}catch(xe){r(xe.message||"Failed to update budget")}finally{C(!1)}}},Q=async xe=>{F(!0);try{await Hve(xe.id),t("Budget deleted successfully"),Y(null),Z(),ve()}catch(we){r(we.message||"Failed to delete budget")}finally{F(!1)}},Ne=xe=>xe>=1e6?`$${(xe/1e6).toFixed(1)}M`:xe>=1e3?`$${(xe/1e3).toFixed(1)}k`:`$${xe.toLocaleString()}`,de=xe=>xe>=100?"text-red-600":xe>=80?"text-amber-600":"text-emerald-600",ye=xe=>xe>=100?"bg-red-500":xe>=80?"bg-amber-500":"bg-emerald-500";return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Budget Management"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Track spending against allocated budgets"})]}),L&&a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>J(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[a.jsx(Xa,{className:"w-4 h-4"})," Manage Categories"]}),a.jsxs("button",{onClick:()=>{ne(),S(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx($r,{className:"w-4 h-4"})," Create Budget"]})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Year"}),a.jsx("select",{value:d,onChange:xe=>f(parseInt(xe.target.value)),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:se.map(xe=>a.jsx("option",{value:xe,children:xe},xe))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),a.jsxs("select",{value:u,onChange:xe=>p(xe.target.value),className:"w-full px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Departments"}),i.map(xe=>a.jsx("option",{value:xe,children:xe},xe))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"View Mode"}),a.jsx("div",{className:"flex gap-2",children:["yearly","quarterly","monthly"].map(xe=>a.jsx("button",{onClick:()=>y(xe),className:`flex-1 px-3 py-3 rounded-xl text-xs font-black uppercase transition-all ${w===xe?"bg-indigo-600 text-white shadow-lg":"bg-slate-50 text-slate-400 border border-slate-200 hover:border-indigo-300"}`,children:xe},xe))})]})]})}),!g&&n.length>0&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-white",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-lg font-black text-slate-900",children:h&&h.hasBudget!==!1?"Current Budget":"Available Budgets"}),a.jsxs("p",{className:"text-xs text-slate-500 font-medium mt-1",children:[n.length," budget",n.length!==1?"s":""," for selected filters"]})]}),h&&h.hasBudget!==!1&&L&&a.jsxs("button",{onClick:()=>{const xe=n[0];D(xe),q({year:xe.year,department:xe.department||"",categories:xe.categories.map(we=>({...we,q1Budget:we.q1Budget||0,q2Budget:we.q2Budget||0,q3Budget:we.q3Budget||0,q4Budget:we.q4Budget||0}))}),_(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[a.jsx(Eo,{className:"w-4 h-4"})," Edit Budget"]})]})}),a.jsx("div",{className:"divide-y divide-slate-100",children:n.map(xe=>a.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900",children:[xe.year," ",xe.department&&`- ${xe.department}`]}),!xe.department&&a.jsx("span",{className:"px-2 py-1 bg-purple-50 text-purple-600 text-[10px] font-black uppercase rounded-lg border border-purple-200",children:"Global"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-3",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Total Budget"}),a.jsx("p",{className:"text-lg font-black text-indigo-600",children:Ne(xe.totalBudget)})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Categories"}),a.jsxs("p",{className:"text-sm font-bold text-slate-700",children:[xe.categories.length," configured"]})]}),a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Created"}),a.jsx("p",{className:"text-xs text-slate-500 font-medium",children:xe.createdAt?new Date(xe.createdAt).toLocaleDateString():"N/A"})]})]}),a.jsx("div",{className:"mt-3 pt-3 border-t border-slate-100",children:a.jsxs("details",{className:"group",children:[a.jsxs("summary",{className:"text-xs font-bold text-indigo-600 cursor-pointer hover:text-indigo-700 list-none flex items-center gap-2",children:[a.jsx(ra,{className:"w-4 h-4 transition-transform group-open:rotate-90"}),"View category breakdown"]}),a.jsx("div",{className:"mt-3 grid grid-cols-1 md:grid-cols-2 gap-2",children:xe.categories.map(we=>a.jsxs("div",{className:"p-2 bg-slate-50 rounded-lg",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:we.categoryName}),a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:["Yearly: ",a.jsx("span",{className:"font-black",children:Ne(we.yearlyBudget)})]})]},we.categoryId))})]})})]}),L&&!(h&&h.hasBudget!==!1)&&a.jsxs("button",{onClick:()=>{D(xe),q({year:xe.year,department:xe.department||"",categories:xe.categories.map(we=>({...we,q1Budget:we.q1Budget||0,q2Budget:we.q2Budget||0,q3Budget:we.q3Budget||0,q4Budget:we.q4Budget||0}))}),_(!0)},className:"px-4 py-2 bg-indigo-50 text-indigo-600 font-bold text-xs uppercase tracking-widest rounded-xl hover:bg-indigo-100 transition-all flex items-center gap-2",children:[a.jsx(Eo,{className:"w-4 h-4"})," View/Edit"]})]})},xe.id))})]}),h&&h.hasBudget!==!1&&a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-indigo-50 flex items-center justify-center",children:a.jsx(Uu,{className:"w-5 h-5 text-indigo-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Budget"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Ne(h.totalBudget)})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-50 flex items-center justify-center",children:a.jsx(ad,{className:"w-5 h-5 text-blue-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total Spent"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:Ne(h.totalSpent)})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:`w-10 h-10 rounded-xl ${h.totalRemaining>=0?"bg-emerald-50":"bg-red-50"} flex items-center justify-center`,children:h.totalRemaining>=0?a.jsx(Qr,{className:"w-5 h-5 text-emerald-600"}):a.jsx(On,{className:"w-5 h-5 text-red-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Remaining"})]}),a.jsx("h3",{className:`text-2xl font-black ${h.totalRemaining>=0?"text-emerald-600":"text-red-600"}`,children:Ne(Math.abs(h.totalRemaining))})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-50 flex items-center justify-center",children:a.jsx(cv,{className:"w-5 h-5 text-purple-600"})}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"% Used"})]}),a.jsxs("h3",{className:`text-2xl font-black ${de(h.totalPercentUsed)}`,children:[h.totalPercentUsed.toFixed(1),"%"]})]})]}),h&&h.isOverBudget&&a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-2xl p-6 flex items-start gap-4 animate-in slide-in-from-top-2",children:[a.jsx(f0,{className:"w-6 h-6 text-red-600 shrink-0 mt-1"}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-black text-red-900 mb-1",children:"Budget Exceeded"}),a.jsxs("p",{className:"text-sm text-red-700",children:["You are ",a.jsx("span",{className:"font-black",children:Ne(h.overBudgetAmount)})," over budget (",h.totalPercentUsed.toFixed(1),"% of total budget used)."]})]})]}),!g&&(!h||h.hasBudget===!1)&&a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[a.jsx($F,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No Budget Set"}),a.jsx("p",{className:"text-sm text-slate-500 mb-6",children:L?`No budget has been set for ${d}${u?` - ${u}`:""}. Create one to start tracking.`:`No budget available for ${d}${u?` - ${u}`:""}.`}),L&&a.jsxs("button",{onClick:()=>{ne(),S(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[a.jsx($r,{className:"w-4 h-4"})," Create Budget"]})]}),h&&h.hasBudget!==!1&&h.categories&&a.jsxs("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center",children:a.jsx("h2",{className:"text-lg font-black text-slate-900",children:"Spending vs Budget by Category"})}),a.jsx("div",{className:"divide-y divide-slate-100",children:h.categories.map(xe=>a.jsxs("div",{className:"p-6 hover:bg-slate-50 transition-colors",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-sm font-black text-slate-900 mb-1",children:xe.categoryName}),a.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[a.jsxs("span",{className:"text-slate-500 font-medium",children:["Budget: ",a.jsx("span",{className:"font-black text-slate-900",children:Ne(xe.yearlyBudget)})]}),a.jsxs("span",{className:"text-slate-500 font-medium",children:["Spent: ",a.jsx("span",{className:"font-black text-slate-900",children:Ne(xe.yearlySpent)})]}),a.jsxs("span",{className:`font-black ${de(xe.yearlyPercentUsed)}`,children:[xe.yearlyPercentUsed.toFixed(1),"%"]})]})]}),xe.isOverBudget&&a.jsxs("div",{className:"px-3 py-1 bg-red-50 text-red-600 text-xs font-black uppercase rounded-lg border border-red-200",children:["Over by ",Ne(xe.overBudgetAmount)]})]}),a.jsxs("div",{className:"relative h-3 bg-slate-100 rounded-full overflow-hidden",children:[a.jsx("div",{className:`absolute left-0 top-0 h-full transition-all ${ye(xe.yearlyPercentUsed)}`,style:{width:`${Math.min(xe.yearlyPercentUsed,100)}%`}}),xe.yearlyPercentUsed>100&&a.jsx("div",{className:"absolute left-0 top-0 h-full bg-red-500/30 border-r-2 border-red-600",style:{width:"100%"}})]}),w==="quarterly"&&a.jsx("div",{className:"grid grid-cols-4 gap-3 mt-4 pt-4 border-t border-slate-100",children:["q1","q2","q3","q4"].map((we,Ae)=>{const Ue=xe.quarters[we];return a.jsxs("div",{className:"p-3 bg-slate-50 rounded-xl",children:[a.jsxs("p",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-2",children:["Q",Ae+1]}),a.jsxs("p",{className:"text-xs text-slate-600 font-medium",children:[a.jsx("span",{className:"font-black text-slate-900",children:Ne(Ue.spent)})," "," / ",Ne(Ue.budget)]}),a.jsxs("p",{className:`text-xs font-black mt-1 ${de(Ue.percentUsed)}`,children:[Ue.percentUsed.toFixed(0),"%"]})]},we)})})]},xe.categoryId))})]}),N&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>S(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(Uu,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Create Budget"}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Set budget allocations for ",R.year]})]})]}),a.jsx("button",{onClick:()=>S(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(zt,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Year ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("select",{value:R.year,onChange:xe=>q(we=>({...we,year:parseInt(xe.target.value)})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:se.map(xe=>a.jsx("option",{value:xe,children:xe},xe))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Department"}),a.jsxs("select",{value:R.department,onChange:xe=>q(we=>({...we,department:xe.target.value})),className:"w-full px-4 py-3 border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"All Departments"}),i.map(xe=>a.jsx("option",{value:xe,children:xe},xe))]})]})]}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(Xa,{className:"w-4 h-4 text-indigo-600"})," Category Budgets"]}),a.jsx("div",{className:"space-y-4",children:R.categories.map((xe,we)=>a.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[a.jsx("h4",{className:"font-black text-slate-900 mb-3",children:xe.categoryName}),a.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),a.jsx("input",{type:"number",value:xe.yearlyBudget||"",onChange:Ae=>{const Ue=[...R.categories];Ue[we].yearlyBudget=parseFloat(Ae.target.value)||0,q(me=>({...me,categories:Ue}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ae,Ue)=>a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ue+1]}),a.jsx("input",{type:"number",value:xe[Ae]||"",onChange:me=>{const ee=[...R.categories];ee[we][Ae]=parseFloat(me.target.value)||0,q(fe=>({...fe,categories:ee}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ae))]})]},xe.categoryId))}),a.jsx("div",{className:"mt-6 p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),a.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Ne(R.categories.reduce((xe,we)=>xe+we.yearlyBudget,0))})]})})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>S(!1),disabled:A,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:Xe,disabled:A,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:A?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Creating..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),"Create Budget"]})})]})]})})]}),j&&T&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{_(!1),D(null)}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(Eo,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:"Edit Budget"}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:["Update budget allocations for ",T.year,T.department&&` - ${T.department}`]})]})]}),a.jsx("button",{onClick:()=>{_(!1),D(null)},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(zt,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-4",children:[R.categories.map((xe,we)=>a.jsxs("div",{className:"p-4 border-2 border-slate-200 rounded-xl",children:[a.jsx("h4",{className:"font-black text-slate-900 mb-3",children:xe.categoryName}),a.jsxs("div",{className:"grid grid-cols-5 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:"Yearly"}),a.jsx("input",{type:"number",value:xe.yearlyBudget||"",onChange:Ae=>{const Ue=[...R.categories];Ue[we].yearlyBudget=parseFloat(Ae.target.value)||0,q(me=>({...me,categories:Ue}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]}),["q1Budget","q2Budget","q3Budget","q4Budget"].map((Ae,Ue)=>a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest mb-1 block",children:["Q",Ue+1]}),a.jsx("input",{type:"number",value:xe[Ae]||"",onChange:me=>{const ee=[...R.categories];ee[we][Ae]=parseFloat(me.target.value)||0,q(fe=>({...fe,categories:ee}))},className:"w-full px-3 py-2 border border-slate-200 rounded-lg text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",placeholder:"0"})]},Ae))]})]},xe.categoryId)),a.jsx("div",{className:"p-4 bg-indigo-50 border-2 border-indigo-200 rounded-xl",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-black text-indigo-900 uppercase tracking-widest",children:"Total Budget"}),a.jsx("span",{className:"text-2xl font-black text-indigo-600",children:Ne(R.categories.reduce((xe,we)=>xe+we.yearlyBudget,0))})]})})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsxs("button",{onClick:()=>Y(T),disabled:A,className:"px-6 py-3 border-2 border-red-200 text-red-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-50 transition-all disabled:opacity-50 flex items-center gap-2",children:[a.jsx(br,{className:"w-4 h-4"})," Delete"]}),a.jsx("button",{onClick:()=>{_(!1),D(null)},disabled:A,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:ie,disabled:A,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:A?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Saving..."]}):a.jsxs(a.Fragment,{children:[a.jsx(qs,{className:"w-4 h-4"}),"Save Changes"]})})]})]})})]}),B&&a.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>Y(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(f0,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Budget?"}),a.jsxs("p",{className:"text-sm text-slate-600 mb-6",children:["Are you sure you want to delete the budget for ",B.year,B.department&&` - ${B.department}`,"? This action cannot be undone."]})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>Y(null),disabled:M,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:()=>Q(B),disabled:M,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(br,{className:"w-4 h-4"}),"Delete Budget"]})})]})]})})]}),V&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Categories"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add budget/expense categories"})]}),a.jsx("button",{onClick:()=>{J(!1),X("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Xa,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No categories yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first category below"})]}):l.map(xe=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(Xa,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:xe.name})]}),a.jsx(Qr,{className:"w-5 h-5 text-emerald-600"})]},xe.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New category name...",value:U,onChange:xe=>X(xe.target.value),onKeyDown:xe=>{xe.key==="Enter"&&U.trim()&&!W&&(xe.preventDefault(),He())},className:"flex-1 px-4 py-2 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:He,disabled:!U.trim()||W,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:W?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx($r,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Categories are shared across budgets and expenses"})]})]})})]})},pD=["Draft","Pending Signature","Signed","Expired","Terminated"],$Ee=({currentUser:e})=>{const{showSuccess:t,showError:r}=hn(),[n,s]=P.useState([]),[i,o]=P.useState([]),[l,c]=P.useState([]),[d,f]=P.useState([]),[u,p]=P.useState(null),[h,m]=P.useState(!0),[g,x]=P.useState(!1),[v,b]=P.useState(!1),[w,y]=P.useState(""),[N,S]=P.useState(""),[j,_]=P.useState(""),[T,D]=P.useState(!1),[A,C]=P.useState(!1),[M,F]=P.useState(!1),[B,Y]=P.useState(!1),V=P.useRef(null),[J,U]=P.useState(!1),[X,W]=P.useState(!1),[E,R]=P.useState(!1),[q,L]=P.useState(!1),[H,se]=P.useState(!1),[ce,ae]=P.useState(""),[Z,ve]=P.useState(!1),[ne,He]=P.useState([]),[Xe,ie]=P.useState(!1),[Q,Ne]=P.useState({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),de=(e==null?void 0:e.id)||JSON.parse(localStorage.getItem("user_data")||"{}").id,ye=P.useCallback(async()=>{m(!0);try{const[ue,Ye,bt,xt]=await Promise.all([BR(),jc(),Yh(),Qve()]);s((ue==null?void 0:ue.data)||[]),o((Ye==null?void 0:Ye.data)||[]),c((bt==null?void 0:bt.data)||[]),f((xt==null?void 0:xt.data)||[])}catch(ue){r(ue.message||"Failed to load contracts")}finally{m(!1)}},[r]);P.useEffect(()=>{ye()},[ye]);const xe=async()=>{if(u){ie(!0);try{const ue=await V6("contract",u.id);He((ue==null?void 0:ue.data)||[])}catch(ue){console.error("[CONTRACTS] Failed to fetch contract activities:",ue),He([])}finally{ie(!1)}}};P.useEffect(()=>{u?xe():He([])},[u==null?void 0:u.id]),P.useEffect(()=>{(async()=>{if(de)try{await Gw({userId:de}),R(!0)}catch{R(!1)}})()},[de]);const we=async()=>{var ue,Ye,bt,xt,Vt,gr,qt,Gt;if(!de){r("User not authenticated");return}L(!0);try{let Bt;try{Bt=await Gw({userId:de})}catch(It){throw(ue=It.message)!=null&&ue.includes("Failed to fetch")||(Ye=It.message)!=null&&Ye.includes("ERR_CONNECTION_REFUSED")||(bt=It.message)!=null&&bt.includes("NetworkError")?new Error("Backend server is not running. Please start the server and try again."):It}const{accessToken:fr,apiKey:Sr}=(Bt==null?void 0:Bt.data)||{};if(!fr)throw new Error("Failed to get Google Drive access token. Please ensure your Google account is connected in Settings.");console.log("Google Picker - Access Token:",fr?"Present":"Missing"),console.log("Google Picker - API Key:",Sr?`Present (${Sr.substring(0,10)}...)`:"Not using (optional with OAuth)"),console.log("Full token response:",Bt==null?void 0:Bt.data),await new Promise((It,yr)=>{let wr=0;const Fr=50,jr=setInterval(()=>{wr++,window.google&&window.google.picker?(clearInterval(jr),It()):wr>=Fr&&(clearInterval(jr),yr(new Error("Google Picker API not loaded. Please refresh the page.")))},100)});const Cr=window.google.picker;new Cr.PickerBuilder().setOAuthToken(fr).setCallback(It=>{L(!1);try{if(console.log("Google Picker Callback - Full response data:",JSON.stringify(It,null,2)),console.log("Google Picker Response Action:",It[Cr.Response.ACTION]),console.log("Google Picker Action Constants:",{PICKED:Cr.Action.PICKED,CANCEL:Cr.Action.CANCEL}),It[Cr.Response.ACTION]===Cr.Action.PICKED){const yr=It[Cr.Response.DOCUMENTS];if(console.log("Google Picker - Documents array:",yr),console.log("Google Picker - Number of documents:",yr==null?void 0:yr.length),yr&&yr.length>0){const wr=yr[0];console.log("Google Picker - Selected file data:",JSON.stringify(wr,null,2)),console.log("Google Picker - File ID:",wr.id),console.log("Google Picker - File Name:",wr.name),console.log("Google Picker - File MIME Type:",wr.mimeType),console.log("Google Picker - File URL:",wr.url),console.log("Google Picker - File Service ID:",wr.serviceId),Ae(wr)}else console.error("Google Picker - No documents in response"),r("No file selected")}else if(It[Cr.Response.ACTION]!==Cr.Action.CANCEL){const yr=It[Cr.Response.ERROR];yr&&(console.error("Google Picker Error:",yr),console.error("Error details:",JSON.stringify(It,null,2)),yr===Cr.ResponseError.ACCESS_DENIED?r("Access denied. Please reconnect your Google account in Settings."):yr===Cr.ResponseError.INVALID_CREDENTIALS?r("Invalid credentials. Please reconnect your Google account."):yr===Cr.ResponseError.INVALID_DEVELOPER_KEY?r("Google Picker configuration error. Please try again."):r(`Google Picker error: ${yr}. Check browser console for details.`))}}catch(yr){console.error("Error handling picker callback:",yr),r("Failed to process selected file")}}).addView(Cr.ViewId.DOCS).enableFeature(Cr.Feature.NAV_HIDDEN).setSize(1051,650).build().setVisible(!0)}catch(Bt){L(!1),console.error("Google Drive Picker Error:",Bt),(xt=Bt.message)!=null&&xt.includes("Backend server is not running")?r("Backend server is not running. Please start the server on port 8050 and try again."):(Vt=Bt.message)!=null&&Vt.includes("not connected")||(gr=Bt.message)!=null&&gr.includes("GOOGLE_NOT_CONNECTED")?r("Google Drive not connected. Please connect your Google account in Settings."):(qt=Bt.message)!=null&&qt.includes("Failed to fetch")||(Gt=Bt.message)!=null&&Gt.includes("ERR_CONNECTION_REFUSED")?r("Cannot connect to server. Please ensure the backend server is running on port 8050."):r(Bt.message||"Failed to open Google Drive picker. Please check your connection and try again.")}},Ae=async ue=>{if(de){console.log("handleGoogleDriveFileSelected called with file:",JSON.stringify(ue,null,2)),console.log("File data from Google Picker:",{id:ue.id,name:ue.name,url:ue.url,iconUrl:ue.iconUrl,mimeType:ue.mimeType,serviceId:ue.serviceId,type:ue.type,sizeBytes:ue.sizeBytes});try{const Ye=ue.url||ue.embedUrl||"",bt=ue.iconUrl||"",xt=ue.sizeBytes?parseInt(ue.sizeBytes):0;console.log("Storing file data:",{googleDriveFileId:ue.id,publicUrl:Ye,iconUrl:bt,fileName:ue.name,fileMimeType:ue.mimeType}),Ne(Vt=>({...Vt,isGoogleDriveLinked:!0,googleDriveFileId:ue.id,googleDriveWebViewLink:Ye,googleDriveDownloadLink:Ye,googleDriveIconUrl:bt,fileName:ue.name||"Untitled",fileMimeType:ue.mimeType||"",fileSize:xt,fileUrl:Ye,file:null})),t("File attached from Google Drive")}catch(Ye){console.error("Error handling Google Drive file selection:",Ye),r(Ye.message||"Failed to attach file from Google Drive")}}},Ue=async()=>{var ue,Ye;if(ce.trim()){ve(!0);try{const bt=await Jve({name:ce.trim()});if(bt!=null&&bt.data){const xt=bt.data;f(Vt=>[...Vt,xt]),ae(""),t("Document type added successfully")}}catch(bt){(ue=bt.message)!=null&&ue.includes("already exists")||(Ye=bt.message)!=null&&Ye.includes("TYPE_EXISTS")?r("Document type with this name already exists"):r(bt.message||"Failed to add document type")}finally{ve(!1)}}},me=ue=>{var xt;const Ye=(xt=ue.target.files)==null?void 0:xt[0];if(!Ye)return;if(Ye.size>10*1024*1024){r("File size must be less than 10MB");return}Y(!0);const bt=new FileReader;bt.onload=()=>{const Vt=bt.result;Ne(gr=>({...gr,file:Ye,fileUrl:Vt,fileName:Ye.name,fileMimeType:Ye.type,fileSize:Ye.size})),Y(!1)},bt.onerror=()=>{r("Failed to read file"),Y(!1)},bt.readAsDataURL(Ye)},ee=async()=>{if(!Q.fileUrl||!de){r("Please select a file first");return}U(!0);try{const ue=await Zve({fileName:Q.fileName,fileContent:Q.fileUrl,fileMimeType:Q.fileMimeType,userId:de});Ne(Ye=>({...Ye,isGoogleDriveLinked:!0,googleDriveFileId:ue.data.id,googleDriveWebViewLink:ue.data.webViewLink,googleDriveDownloadLink:ue.data.webContentLink})),t("File uploaded to Google Drive successfully")}catch(ue){r(ue.message||"Failed to upload to Google Drive")}finally{U(!1)}},fe=async(ue,Ye)=>{W(!0);try{const bt=await e1e({contractId:ue,userId:de,title:Ye});t("Signature document created in Google Docs"),ye(),window.open(bt.data.documentLink,"_blank")}catch(bt){r(bt.message||"Failed to create signature document")}finally{W(!1)}},Fe=async()=>{if(!Q.title||!Q.documentType||!Q.contractParty){r("Please fill in all required fields");return}F(!0);try{await Gve({title:Q.title,documentType:Q.documentType,contractParty:Q.contractParty,companyId:Q.companyId||null,contactId:Q.contactId||null,expirationDate:Q.expirationDate||null,renewalDate:Q.renewalDate||null,signedDate:Q.signedDate||null,status:Q.status,description:Q.description||null,tags:Q.tags,requiresSignature:Q.requiresSignature,signatureStatus:Q.requiresSignature?"Pending":"Not Required",fileUrl:Q.fileUrl||null,fileName:Q.fileName||null,fileMimeType:Q.fileMimeType||null,fileSize:Q.fileSize||null,isGoogleDriveLinked:Q.isGoogleDriveLinked,googleDriveFileId:Q.googleDriveFileId||null,googleDriveWebViewLink:Q.googleDriveWebViewLink||null,googleDriveDownloadLink:Q.googleDriveDownloadLink||null,googleDriveIconUrl:Q.googleDriveIconUrl||null,userId:de}),t("Contract created successfully"),D(!1),Qe(),ye()}catch(ue){r(ue.message||"Failed to create contract")}finally{F(!1)}},Ee=async()=>{if(u){F(!0);try{await Kve(u.id,{title:Q.title,documentType:Q.documentType,contractParty:Q.contractParty,companyId:Q.companyId||null,contactId:Q.contactId||null,expirationDate:Q.expirationDate||null,renewalDate:Q.renewalDate||null,signedDate:Q.signedDate||null,status:Q.status,description:Q.description||null,tags:Q.tags,requiresSignature:Q.requiresSignature,fileUrl:Q.fileUrl||null,fileName:Q.fileName||null,fileMimeType:Q.fileMimeType||null,fileSize:Q.fileSize||null,isGoogleDriveLinked:Q.isGoogleDriveLinked,googleDriveFileId:Q.googleDriveFileId||null,googleDriveWebViewLink:Q.googleDriveWebViewLink||null,googleDriveDownloadLink:Q.googleDriveDownloadLink||null,googleDriveIconUrl:Q.googleDriveIconUrl||null}),t("Contract updated successfully"),C(!1),p(null),Qe(),ye()}catch(ue){r(ue.message||"Failed to update contract")}finally{F(!1)}}},qe=async()=>{if(u){x(!0);try{await Xve(u.id),t("Contract deleted successfully"),b(!1),p(null),ye()}catch(ue){r(ue.message||"Failed to delete contract")}finally{x(!1)}}},Ke=async ue=>{try{await Yve(ue.id,{signedBy:de,signedDate:new Date().toISOString()}),t("Contract marked as signed"),ye()}catch(Ye){r(Ye.message||"Failed to mark contract as signed")}},Qe=()=>{Ne({title:"",documentType:"",contractParty:"",companyId:"",contactId:"",expirationDate:"",renewalDate:"",signedDate:"",status:"Draft",description:"",tags:[],requiresSignature:!1,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""}),V.current&&(V.current.value="")},_t=ue=>{p(ue),Ne({title:ue.title,documentType:ue.documentType,contractParty:ue.contractParty,companyId:ue.companyId||"",contactId:ue.contactId||"",expirationDate:ue.expirationDate||"",renewalDate:ue.renewalDate||"",signedDate:ue.signedDate||"",status:ue.status,description:ue.description||"",tags:ue.tags||[],requiresSignature:ue.requiresSignature,file:null,fileUrl:ue.fileUrl||"",fileName:ue.fileName||"",fileMimeType:ue.fileMimeType||"",fileSize:ue.fileSize||0,isGoogleDriveLinked:ue.isGoogleDriveLinked,googleDriveFileId:ue.googleDriveFileId||"",googleDriveWebViewLink:ue.googleDriveWebViewLink||"",googleDriveDownloadLink:ue.googleDriveDownloadLink||"",googleDriveIconUrl:ue.googleDriveIconUrl||""}),C(!0)},vt=ue=>{switch(ue){case"Signed":return"bg-emerald-50 text-emerald-600 border-emerald-200";case"Pending Signature":return"bg-amber-50 text-amber-600 border-amber-200";case"Draft":return"bg-slate-50 text-slate-600 border-slate-200";case"Expired":return"bg-red-50 text-red-600 border-red-200";case"Terminated":return"bg-gray-50 text-gray-600 border-gray-200";default:return"bg-slate-50 text-slate-600 border-slate-200"}},ke=ue=>{switch(ue){case"Signed":return a.jsx(Qr,{className:"w-4 h-4"});case"Pending Signature":return a.jsx(Qa,{className:"w-4 h-4"});case"Draft":return a.jsx(Dn,{className:"w-4 h-4"});case"Expired":return a.jsx(On,{className:"w-4 h-4"});case"Terminated":return a.jsx(zt,{className:"w-4 h-4"});default:return a.jsx(Dn,{className:"w-4 h-4"})}},Je=n.filter(ue=>{const Ye=ue.title.toLowerCase().includes(w.toLowerCase())||ue.contractParty.toLowerCase().includes(w.toLowerCase())||ue.documentType.toLowerCase().includes(w.toLowerCase()),bt=!N||ue.status===N,xt=!j||ue.documentType===j;return Ye&&bt&&xt}),mt={total:n.length,signed:n.filter(ue=>ue.status==="Signed").length,pending:n.filter(ue=>ue.status==="Pending Signature").length,expired:n.filter(ue=>ue.status==="Expired").length};return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Contracts & Legal Documents"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:"Manage contracts with e-signature and Google Drive integration"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>se(!0),className:"px-4 py-2 bg-white text-indigo-600 text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-50 border-2 border-indigo-200 transition-all active:scale-95",children:[a.jsx(Xa,{className:"w-4 h-4"})," Manage Document Types"]}),a.jsxs("button",{onClick:()=>{Qe(),D(!0)},className:"px-4 py-2 bg-indigo-600 text-white text-sm font-bold rounded-xl flex items-center gap-2 hover:bg-indigo-700 shadow-lg transition-all active:scale-95",children:[a.jsx($r,{className:"w-4 h-4"})," Add Contract"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Dn,{className:"w-5 h-5 text-indigo-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Total"})]}),a.jsx("h3",{className:"text-2xl font-black text-slate-900",children:mt.total})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Qr,{className:"w-5 h-5 text-emerald-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Signed"})]}),a.jsx("h3",{className:"text-2xl font-black text-emerald-600",children:mt.signed})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(Qa,{className:"w-5 h-5 text-amber-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Pending"})]}),a.jsx("h3",{className:"text-2xl font-black text-amber-600",children:mt.pending})]}),a.jsxs("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx(On,{className:"w-5 h-5 text-red-600"}),a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest",children:"Expired"})]}),a.jsx("h3",{className:"text-2xl font-black text-red-600",children:mt.expired})]})]}),a.jsx("div",{className:"bg-white p-6 rounded-2xl border border-slate-200 shadow-sm",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(il,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",value:w,onChange:ue=>y(ue.target.value),placeholder:"Search contracts...",className:"w-full pl-11 pr-4 py-3 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-2 focus:ring-indigo-500"})]}),a.jsxs("select",{value:N,onChange:ue=>S(ue.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Statuses"}),pD.map(ue=>a.jsx("option",{value:ue,children:ue},ue))]}),a.jsxs("select",{value:j,onChange:ue=>_(ue.target.value),className:"px-4 py-3 border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-2 focus:ring-indigo-500",children:[a.jsx("option",{value:"",children:"All Types"}),d.map(ue=>a.jsx("option",{value:ue.name,children:ue.name},ue.id))]})]})}),h?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(ct,{className:"w-8 h-8 text-indigo-600 animate-spin"})}):Je.length===0?a.jsxs("div",{className:"bg-slate-50 border border-slate-200 rounded-2xl p-12 text-center",children:[a.jsx(Dn,{className:"w-16 h-16 text-slate-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:"No contracts found"}),a.jsx("p",{className:"text-sm text-slate-500 mb-6",children:w||N||j?"Try adjusting your filters":"Create your first contract to get started"}),!w&&!N&&!j&&a.jsxs("button",{onClick:()=>{Qe(),D(!0)},className:"px-6 py-3 bg-indigo-600 text-white font-bold text-sm uppercase tracking-widest rounded-xl hover:bg-indigo-700 shadow-lg transition-all flex items-center gap-2 mx-auto",children:[a.jsx($r,{className:"w-4 h-4"})," Add Contract"]})]}):a.jsx("div",{className:"bg-white rounded-2xl border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-100",children:Je.map(ue=>a.jsx("div",{className:"p-6 hover:bg-slate-50 transition-colors cursor-pointer",onClick:()=>p(ue),children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h3",{className:"text-base font-black text-slate-900",children:ue.title}),a.jsxs("span",{className:`px-2 py-1 text-xs font-black uppercase rounded-lg border ${vt(ue.status)} flex items-center gap-1`,children:[ke(ue.status),ue.status]}),ue.isGoogleDriveLinked&&a.jsxs("span",{className:"px-2 py-1 bg-blue-50 text-blue-600 text-xs font-black uppercase rounded-lg border border-blue-200 flex items-center gap-1",children:[ue.googleDriveIconUrl?a.jsx("img",{src:ue.googleDriveIconUrl,alt:"File type",className:"w-3 h-3",onError:Ye=>{Ye.target.style.display="none"}}):a.jsx(Tf,{className:"w-3 h-3"}),"Drive"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3 mt-3",children:[a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(Xa,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-medium",children:ue.documentType})]}),a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(co,{className:"w-4 h-4 text-slate-400"}),a.jsx("span",{className:"font-medium",children:ue.contractParty})]}),ue.expirationDate&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-600",children:[a.jsx(Ln,{className:"w-4 h-4 text-slate-400"}),a.jsxs("span",{className:"font-medium",children:["Expires: ",new Date(ue.expirationDate).toLocaleDateString()]})]}),ue.requiresSignature&&a.jsxs("div",{className:"flex items-center gap-2 text-sm text-amber-600",children:[a.jsx(a2,{className:"w-4 h-4"}),a.jsx("span",{className:"font-bold",children:ue.signatureStatus})]})]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[ue.googleDriveWebViewLink&&a.jsx("a",{href:ue.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",onClick:Ye=>Ye.stopPropagation(),className:"p-2 hover:bg-blue-50 rounded-lg text-blue-600 transition-all",title:"View in Google Drive",children:a.jsx(za,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),_t(ue)},className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:a.jsx(Eo,{className:"w-4 h-4"})}),a.jsx("button",{onClick:Ye=>{Ye.stopPropagation(),p(ue),b(!0)},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:a.jsx(br,{className:"w-4 h-4"})})]})]})},ue.id))})}),(T||A)&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>{D(!1),C(!1),Qe()}}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-4xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-14 h-14 rounded-2xl bg-indigo-600 flex items-center justify-center text-white shadow-lg",children:a.jsx(Dn,{className:"w-7 h-7"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:T?"Add Contract":"Edit Contract"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium mt-0.5",children:T?"Create a new contract with metadata and documents":"Update contract details"})]})]}),a.jsx("button",{onClick:()=>{D(!1),C(!1),Qe()},className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(zt,{className:"w-5 h-5"})})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{className:"col-span-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Title ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Q.title,onChange:ue=>Ne(Ye=>({...Ye,title:ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"e.g., Service Agreement with Acme Corp"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Document Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("select",{value:Q.documentType,onChange:ue=>Ne(Ye=>({...Ye,documentType:ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"Select type"}),d.map(ue=>a.jsx("option",{value:ue.name,children:ue.name},ue.id))]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:["Contract Party ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",value:Q.contractParty,onChange:ue=>Ne(Ye=>({...Ye,contractParty:ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",placeholder:"Other party name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Company"}),a.jsxs("select",{value:Q.companyId,onChange:ue=>Ne(Ye=>({...Ye,companyId:ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"None"}),i.map(ue=>a.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Link to Contact"}),a.jsxs("select",{value:Q.contactId,onChange:ue=>Ne(Ye=>({...Ye,contactId:ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:[a.jsx("option",{value:"",children:"None"}),l.map(ue=>a.jsx("option",{value:ue.id,children:ue.name},ue.id))]})]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Expiration Date"}),a.jsx("input",{type:"date",value:Q.expirationDate,onChange:ue=>Ne(Ye=>({...Ye,expirationDate:ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Renewal Date"}),a.jsx("input",{type:"date",value:Q.renewalDate,onChange:ue=>Ne(Ye=>({...Ye,renewalDate:ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Signed Date"}),a.jsx("input",{type:"date",value:Q.signedDate,onChange:ue=>Ne(Ye=>({...Ye,signedDate:ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Status"}),a.jsx("select",{value:Q.status,onChange:ue=>Ne(Ye=>({...Ye,status:ue.target.value})),className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300",children:pD.map(ue=>a.jsx("option",{value:ue,children:ue},ue))})]}),a.jsx("div",{className:"flex items-end",children:a.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[a.jsx("input",{type:"checkbox",checked:Q.requiresSignature,onChange:ue=>Ne(Ye=>({...Ye,requiresSignature:ue.target.checked})),className:"w-5 h-5 rounded border-2 border-slate-300 text-indigo-600 focus:ring-2 focus:ring-indigo-500"}),a.jsx("span",{className:"text-sm font-bold text-slate-900",children:"Requires E-Signature"})]})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2 block",children:"Description"}),a.jsx("textarea",{value:Q.description,onChange:ue=>Ne(Ye=>({...Ye,description:ue.target.value})),rows:3,className:"w-full px-4 py-3 bg-white border-2 border-slate-200 rounded-xl text-sm font-medium text-slate-900 outline-none focus:ring-4 focus:ring-indigo-100 focus:border-indigo-300 resize-none",placeholder:"Add notes or description..."})]}),(T||A)&&a.jsxs("div",{className:"border-2 border-dashed border-slate-200 rounded-xl p-6",children:[a.jsxs("h3",{className:"text-sm font-black text-slate-900 mb-4 flex items-center gap-2",children:[a.jsx(cd,{className:"w-4 h-4 text-indigo-600"})," Document Upload"]}),a.jsx("input",{ref:V,type:"file",onChange:me,className:"hidden",accept:".pdf,.doc,.docx,.txt"}),!Q.fileUrl&&!Q.isGoogleDriveLinked?a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:()=>{var ue;return(ue=V.current)==null?void 0:ue.click()},disabled:B,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600",children:B?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx(cd,{className:"w-4 h-4"}),"Choose File"]})}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-1 h-px bg-slate-200"}),a.jsx("span",{className:"text-xs text-slate-400 font-bold uppercase",children:"OR"}),a.jsx("div",{className:"flex-1 h-px bg-slate-200"})]}),a.jsx("button",{onClick:we,disabled:!E||q,className:"w-full py-4 border-2 border-slate-200 rounded-xl hover:border-indigo-300 hover:bg-indigo-50 transition-all flex items-center justify-center gap-2 text-sm font-bold text-slate-600 disabled:opacity-50 disabled:cursor-not-allowed",children:q?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Opening Google Drive..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Tf,{className:"w-4 h-4"}),"Attach from Google Drive"]})})]}):a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[Q.isGoogleDriveLinked&&Q.googleDriveIconUrl?a.jsx("img",{src:Q.googleDriveIconUrl,alt:"File type icon",className:"w-5 h-5",onError:ue=>{var bt;ue.target.style.display="none";const Ye=document.createElement("div");Ye.innerHTML='<svg class="w-5 h-5 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"></path></svg>',(bt=ue.target.parentNode)==null||bt.appendChild(Ye)}}):Q.isGoogleDriveLinked?a.jsx(Tf,{className:"w-5 h-5 text-blue-600"}):a.jsx(EH,{className:"w-5 h-5 text-emerald-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:Q.fileName}),a.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[Q.fileSize>0&&a.jsxs("p",{className:"text-xs text-slate-500",children:[(Q.fileSize/1024).toFixed(1)," KB"]}),Q.isGoogleDriveLinked&&a.jsxs(a.Fragment,{children:[Q.fileSize>0&&a.jsx("span",{className:"text-slate-300",children:""}),a.jsx("span",{className:"text-xs text-blue-600 font-bold",children:"Google Drive"})]})]})]})]}),a.jsx("button",{onClick:()=>{Ne(ue=>({...ue,file:null,fileUrl:"",fileName:"",fileMimeType:"",fileSize:0,isGoogleDriveLinked:!1,googleDriveFileId:"",googleDriveWebViewLink:"",googleDriveDownloadLink:"",googleDriveIconUrl:""})),V.current&&(V.current.value="")},className:"p-2 hover:bg-red-50 rounded-lg text-red-600 transition-all",children:a.jsx(zt,{className:"w-4 h-4"})})]}),!Q.isGoogleDriveLinked&&Q.fileUrl&&a.jsx("button",{onClick:ee,disabled:J,className:"w-full py-3 bg-blue-600 text-white font-bold text-sm rounded-xl hover:bg-blue-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:J?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Uploading to Drive..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Tf,{className:"w-4 h-4"}),"Upload to Google Drive"]})}),Q.isGoogleDriveLinked&&Q.googleDriveWebViewLink&&a.jsxs("a",{href:Q.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block w-full py-3 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all flex items-center justify-center gap-2 text-sm font-bold text-blue-900",children:[Q.googleDriveIconUrl?a.jsx("img",{src:Q.googleDriveIconUrl,alt:"File type",className:"w-4 h-4",onError:ue=>{ue.target.style.display="none"}}):a.jsx(za,{className:"w-4 h-4"}),"View in Google Drive"]})]})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>{D(!1),C(!1),Qe()},disabled:M,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:T?Fe:Ee,disabled:M,className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:M?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),T?"Creating...":"Updating..."]}):a.jsx(a.Fragment,{children:T?"Create Contract":"Update Contract"})})]})]})})]}),u&&!A&&!v&&a.jsxs("div",{className:"fixed inset-0 z-[120] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>p(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[32px] shadow-2xl max-w-3xl w-full max-h-[90vh] overflow-hidden pointer-events-auto animate-in zoom-in-95 duration-300 flex flex-col",children:[a.jsx("div",{className:"p-8 border-b border-slate-100 bg-gradient-to-r from-indigo-50 to-purple-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("h2",{className:"text-2xl font-black text-slate-900",children:u.title}),a.jsxs("span",{className:`px-3 py-1 text-xs font-black uppercase rounded-lg border ${vt(u.status)} flex items-center gap-1`,children:[ke(u.status),u.status]})]}),a.jsxs("p",{className:"text-sm text-slate-500 font-medium",children:[u.documentType," - ",u.contractParty]})]}),a.jsx("button",{onClick:()=>p(null),className:"p-2 hover:bg-white rounded-full text-slate-400 hover:text-slate-600 transition-all",children:a.jsx(zt,{className:"w-5 h-5"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-8 custom-scrollbar",children:[a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[u.expirationDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Expiration"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(u.expirationDate).toLocaleDateString()})]}),u.renewalDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Renewal"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(u.renewalDate).toLocaleDateString()})]}),u.signedDate&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1",children:"Signed"}),a.jsx("p",{className:"text-sm font-bold text-slate-900",children:new Date(u.signedDate).toLocaleDateString()})]})]}),u.description&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-2",children:"Description"}),a.jsx("p",{className:"text-sm text-slate-600",children:u.description})]}),(u.fileUrl||u.isGoogleDriveLinked)&&a.jsxs("div",{children:[a.jsx("p",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3",children:"Documents"}),a.jsxs("div",{className:"space-y-2",children:[u.fileName&&a.jsxs("div",{className:"p-4 bg-slate-50 rounded-xl flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[u.isGoogleDriveLinked&&u.googleDriveIconUrl?a.jsx("img",{src:u.googleDriveIconUrl,alt:"File type",className:"w-5 h-5",onError:ue=>{ue.target.style.display="none"}}):a.jsx(Dn,{className:"w-5 h-5 text-indigo-600"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-bold text-slate-900",children:u.fileName}),u.fileSize&&a.jsxs("p",{className:"text-xs text-slate-500",children:[(u.fileSize/1024).toFixed(1)," KB"]})]})]}),u.fileUrl&&a.jsx("a",{href:u.fileUrl,download:u.fileName,className:"p-2 hover:bg-indigo-50 rounded-lg text-indigo-600 transition-all",children:a.jsx(n0,{className:"w-4 h-4"})})]}),u.isGoogleDriveLinked&&u.googleDriveWebViewLink&&a.jsx("a",{href:u.googleDriveWebViewLink,target:"_blank",rel:"noopener noreferrer",className:"block p-4 bg-blue-50 border-2 border-blue-200 rounded-xl hover:bg-blue-100 transition-all",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx(Tf,{className:"w-5 h-5 text-blue-600"}),a.jsx("span",{className:"text-sm font-bold text-blue-900",children:"View in Google Drive"})]}),a.jsx(za,{className:"w-4 h-4 text-blue-600"})]})})]})]}),u.requiresSignature&&a.jsxs("div",{className:"border-2 border-amber-200 bg-amber-50 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[a.jsx(a2,{className:"w-5 h-5 text-amber-600"}),a.jsx("h3",{className:"text-sm font-black text-amber-900",children:"E-Signature Required"})]}),a.jsxs("p",{className:"text-sm text-amber-800 mb-4",children:["Status: ",a.jsx("span",{className:"font-black",children:u.signatureStatus})]}),u.googleDocsSignatureLink?a.jsx("a",{href:u.googleDocsSignatureLink,target:"_blank",rel:"noopener noreferrer",className:"block py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all text-center",children:"Open Signature Document"}):a.jsx("button",{onClick:()=>fe(u.id,u.title),disabled:X,className:"w-full py-3 bg-amber-600 text-white font-bold text-sm rounded-xl hover:bg-amber-700 transition-all flex items-center justify-center gap-2 disabled:opacity-50",children:X?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Creating Document..."]}):a.jsxs(a.Fragment,{children:[a.jsx(a2,{className:"w-4 h-4"}),"Create Signature Document"]})}),u.status!=="Signed"&&a.jsxs("button",{onClick:()=>Ke(u),className:"w-full mt-3 py-3 bg-emerald-600 text-white font-bold text-sm rounded-xl hover:bg-emerald-700 transition-all flex items-center justify-center gap-2",children:[a.jsx(Qr,{className:"w-4 h-4"}),"Mark as Signed"]})]})]}),a.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-200",children:[a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("h3",{className:"text-xs font-black text-slate-400 uppercase tracking-widest flex items-center gap-2",children:[a.jsx(Cu,{className:"w-4 h-4 text-indigo-500"})," Email Activity Timeline"]})}),Xe?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx(ct,{className:"w-6 h-6 animate-spin text-indigo-600"})}):ne.length===0?a.jsxs("div",{className:"text-center py-20 bg-white border border-dashed border-slate-200 rounded-3xl",children:[a.jsx(ba,{className:"w-12 h-12 text-slate-300 mx-auto mb-4"}),a.jsx("p",{className:"text-sm font-bold text-slate-400",children:"No email activities yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Email activities will appear here when emails are linked to this contract"})]}):a.jsx("div",{className:"relative border-l-2 border-slate-100 ml-4 pl-10 space-y-12",children:ne.map((ue,Ye)=>{const bt=new Date(ue.createdAt),Vt=new Date().getTime()-bt.getTime(),gr=Math.floor(Vt/(1e3*60*60*24));let qt="";gr===0?qt="Today":gr===1?qt="Yesterday":gr<7?qt=`${gr} days ago`:gr<30?qt=`${Math.floor(gr/7)} week${Math.floor(gr/7)>1?"s":""} ago`:qt=`${Math.floor(gr/30)} month${Math.floor(gr/30)>1?"s":""} ago`;const Gt=ue.activityType==="email_linked",Bt=Gt?"border-indigo-600":"border-slate-200",fr=Gt?"bg-indigo-600":"bg-slate-300",Sr=Gt?"text-indigo-600":"text-slate-400";return a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:`absolute -left-[51px] top-1.5 w-8 h-8 rounded-full bg-white border-2 ${Bt} shadow-xl flex items-center justify-center`,children:Gt?a.jsx(ba,{className:"w-4 h-4 text-indigo-600"}):a.jsx("div",{className:`w-2 h-2 rounded-full ${fr}`})}),a.jsxs("p",{className:`text-[10px] font-black ${Sr} uppercase mb-1 tracking-widest`,children:[Gt?"Email Linked":ue.activityType||"Activity","  ",qt]}),a.jsx("h4",{className:"text-sm font-black text-slate-900",children:ue.title||"Email Activity"}),a.jsx("p",{className:"text-xs text-slate-500 mt-2 leading-relaxed max-w-sm",children:ue.description||ue.title}),ue.emailId&&a.jsxs("button",{onClick:()=>{window.location.hash="#inbox",setTimeout(()=>{window.location.hash=`#inbox&email=${ue.emailId}`},100)},className:"mt-3 text-xs text-indigo-600 hover:text-indigo-700 font-bold flex items-center gap-1.5",children:[a.jsx(za,{className:"w-3 h-3"})," View Email"]})]},ue.id||Ye)})})]})]}),a.jsxs("div",{className:"p-6 border-t border-slate-100 bg-slate-50 flex gap-3",children:[a.jsx("button",{onClick:()=>p(null),className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all",children:"Close"}),a.jsxs("button",{onClick:()=>{_t(u)},className:"flex-1 py-3 bg-indigo-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-indigo-700 transition-all shadow-lg flex items-center justify-center gap-2",children:[a.jsx(Eo,{className:"w-4 h-4"}),"Edit Contract"]})]})]})})]}),v&&u&&a.jsxs("div",{className:"fixed inset-0 z-[130] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-md pointer-events-auto animate-in fade-in duration-300",onClick:()=>b(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-[28px] shadow-2xl max-w-md w-full pointer-events-auto animate-in zoom-in-95 duration-300 overflow-hidden",children:[a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"w-16 h-16 rounded-full bg-red-100 flex items-center justify-center text-red-600 mx-auto mb-6",children:a.jsx(On,{className:"w-8 h-8"})}),a.jsx("h2",{className:"text-2xl font-black text-slate-900 mb-3",children:"Delete Contract?"}),a.jsxs("p",{className:"text-sm text-slate-600 mb-2",children:["Are you sure you want to delete ",a.jsx("span",{className:"font-black",children:u.title}),"?"]}),a.jsx("p",{className:"text-sm text-slate-500",children:"This action cannot be undone."})]}),a.jsxs("div",{className:"p-6 flex gap-3 bg-slate-50 border-t border-slate-100",children:[a.jsx("button",{onClick:()=>b(!1),disabled:g,className:"flex-1 py-3 border border-slate-200 text-slate-600 font-black uppercase text-xs tracking-widest rounded-xl hover:bg-white transition-all disabled:opacity-50",children:"Cancel"}),a.jsx("button",{onClick:qe,disabled:g,className:"flex-1 py-3 bg-red-600 text-white font-black uppercase text-xs tracking-widest rounded-xl hover:bg-red-700 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2",children:g?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Deleting..."]}):a.jsxs(a.Fragment,{children:[a.jsx(br,{className:"w-4 h-4"}),"Delete Contract"]})})]})]})})]}),H&&a.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-200 flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-black text-slate-900",children:"Manage Document Types"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"View and add contract document types"})]}),a.jsx("button",{onClick:()=>{se(!1),ae("")},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 max-h-[400px] overflow-y-auto",children:a.jsx("div",{className:"space-y-2",children:d.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Dn,{className:"w-12 h-12 text-slate-300 mx-auto mb-3"}),a.jsx("p",{className:"text-sm text-slate-500 font-medium",children:"No document types yet"}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Add your first document type below"})]}):d.map(ue=>a.jsxs("div",{className:"px-4 py-3 rounded-xl bg-slate-50 border-2 border-slate-100 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:a.jsx(Dn,{className:"w-4 h-4 text-indigo-600"})}),a.jsx("span",{className:"font-bold text-sm text-slate-900",children:ue.name})]}),a.jsx(Qr,{className:"w-5 h-5 text-emerald-600"})]},ue.id))})}),a.jsxs("div",{className:"p-6 border-t border-slate-200 space-y-3",children:[a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"text",placeholder:"New document type...",value:ce,onChange:ue=>ae(ue.target.value),onKeyDown:ue=>{ue.key==="Enter"&&ce.trim()&&!Z&&(ue.preventDefault(),Ue())},className:"flex-1 px-4 py-2 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:ring-4 focus:ring-indigo-50"}),a.jsx("button",{type:"button",onClick:Ue,disabled:!ce.trim()||Z,className:"px-6 py-2 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Z?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),"Adding..."]}):a.jsxs(a.Fragment,{children:[a.jsx($r,{className:"w-4 h-4"}),"Add"]})})]}),a.jsx("p",{className:"text-[10px] text-slate-400 font-medium",children:"Document types help categorize your contracts and legal documents"})]})]})})]})},UEe=({onLogin:e})=>{const[t,r]=P.useState("initial"),[n,s]=P.useState(""),[i,o]=P.useState(["","","","","",""]),[l,c]=P.useState(!1),[d,f]=P.useState(null),u=P.useRef([]),p=async()=>{if(!n||!n.includes("@")){f("Please enter a valid email address");return}c(!0),f(null);try{const b=await ZP({email:n});if((b==null?void 0:b.status)===404)throw new Error(b.message);f(null),o(["","","","","",""]),r("verify")}catch(b){console.error("[AUTH UI] Error caught:",b),b.message&&(b.message.includes("Account not found")||b.status===404)?f("Account not found - contact your Administrator"):f(b.message||"Failed to send code. Please check your internet connection.")}finally{c(!1)}},h=async()=>{var w,y,N;const b=i.join("");if(b.length===6){if(!/^\d{6}$/.test(b)){f("OTP must contain only numbers");return}c(!0),f(null);try{const S=await Wge({email:n,verificationCode:b});if(S.token&&S.user)e(S);else throw new Error("Invalid response from server.")}catch(S){console.error("[AUTH] Verification error:",S),(w=S.message)!=null&&w.includes("User not registered")||(y=S.message)!=null&&y.includes("USER_NOT_REGISTERED")||(N=S.message)!=null&&N.includes("Account not found")?f("Account not found - contact your Administrator"):f(S.message||"Invalid or expired code."),o(["","","","","",""]),setTimeout(()=>{var j;return(j=u.current[0])==null?void 0:j.focus()},100)}finally{c(!1)}}},m=(b,w)=>{var N;if(w&&!/^\d$/.test(w))return;const y=[...i];y[b]=w,o(y),d&&f(null),w&&b<5&&((N=u.current[b+1])==null||N.focus()),w&&b===5&&y.every(S=>S!=="")&&setTimeout(()=>h(),100)},g=(b,w)=>{var y,N,S;if(w.key==="Backspace"||w.key==="Delete"){w.preventDefault();const j=[...i];i[b]?j[b]="":b>0&&(j[b-1]="",(y=u.current[b-1])==null||y.focus()),o(j),d&&f(null)}else w.key==="Enter"?(w.preventDefault(),h()):w.key==="ArrowLeft"&&b>0?(w.preventDefault(),(N=u.current[b-1])==null||N.focus()):w.key==="ArrowRight"&&b<5&&(w.preventDefault(),(S=u.current[b+1])==null||S.focus())},x=b=>{var S;b.preventDefault();const w=b.clipboardData.getData("text").replace(/\D/g,"").slice(0,6),y=[...i];for(let j=0;j<6;j++)y[j]=w[j]||"";o(y),d&&f(null);const N=y.findIndex(j=>j==="");(S=u.current[N===-1?5:N])==null||S.focus(),w.length===6&&setTimeout(()=>h(),100)};P.useEffect(()=>{t==="verify"?setTimeout(()=>{var b;return(b=u.current[0])==null?void 0:b.focus()},100):o(["","","","","",""])},[t]);const v=b=>{b.preventDefault(),t==="initial"?p():h()};return a.jsxs("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsx("div",{className:"w-full max-w-md z-10 animate-in fade-in zoom-in-95 duration-500",children:a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl",children:[a.jsx("div",{className:"mb-6 text-center",children:a.jsx("a",{href:"/privacy-policy",onClick:b=>{b.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-xs text-slate-400 hover:text-indigo-400 underline transition-colors",title:"Privacy Policy",children:"Privacy Policy"})}),a.jsxs("div",{className:"flex flex-col items-center mb-10",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-600 rounded-2xl flex items-center justify-center text-white font-bold text-3xl shadow-xl shadow-indigo-900/40 mb-6",children:"I"}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"ImpactFlow OS"}),a.jsx("p",{className:"text-slate-400 text-sm mt-2",children:"Team Access Portal"})]}),a.jsxs("form",{onSubmit:v,className:"space-y-5",children:[d&&a.jsxs("div",{className:"p-4 rounded-2xl text-xs font-bold bg-red-500/10 border border-red-500/50 text-red-400 flex items-start gap-3 animate-in slide-in-from-top-2",children:[a.jsx(On,{className:"w-4 h-4 shrink-0 mt-0.5"}),a.jsxs("div",{className:"flex-1",children:[d,d.includes("Administrator")&&a.jsx("p",{className:"text-[10px] mt-1 font-medium opacity-70",children:"New accounts must be provisioned by IT before sign-in."})]})]}),t==="initial"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest px-1",children:"Professional Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(ba,{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-slate-500"}),a.jsx("input",{type:"email",required:!0,placeholder:"alex@impact247.com",value:n,onChange:b=>s(b.target.value),className:"w-full pl-12 pr-4 py-3.5 bg-white/5 border border-white/10 rounded-2xl text-white placeholder:text-slate-600 outline-none focus:ring-2 focus:ring-indigo-500/50 transition-all"})]})]}),t==="verify"&&a.jsxs("div",{className:"space-y-4 text-center",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"Code sent to"}),a.jsx("p",{className:"text-sm font-semibold text-white",children:n})]}),a.jsx("label",{className:"text-[10px] font-bold text-slate-500 uppercase tracking-widest block mb-6",children:"Enter Verification Code"}),a.jsx("div",{className:"flex items-center justify-center gap-2 md:gap-3",children:i.map((b,w)=>a.jsx("input",{ref:y=>{u.current[w]=y},type:"text",inputMode:"numeric",maxLength:1,value:b,onChange:y=>m(w,y.target.value),onKeyDown:y=>g(w,y),onPaste:w===0?x:void 0,className:"w-12 h-14 md:w-14 md:h-16 bg-white/5 border-2 border-white/10 rounded-xl text-white text-center text-2xl md:text-3xl font-bold outline-none focus:ring-2 focus:ring-indigo-500/50 focus:border-indigo-500/50 transition-all text-center",autoComplete:"off",disabled:l},w))}),a.jsxs("div",{className:"flex flex-col items-center gap-2 mt-6",children:[a.jsx("button",{type:"button",onClick:async()=>{f(null),o(["","","","","",""]),c(!0);try{await ZP({email:n}),f(null),setTimeout(()=>{var b;return(b=u.current[0])==null?void 0:b.focus()},100)}catch(b){f(b.message||"Failed to send new code.")}finally{c(!1)}},disabled:l,className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors disabled:opacity-50",children:l?"Sending...":"Request New Code"}),a.jsx("button",{type:"button",onClick:()=>{r("initial"),o(["","","","","",""]),f(null)},className:"text-xs font-bold text-slate-500 hover:text-indigo-400 transition-colors",children:"Use a different email"})]})]}),a.jsx("button",{disabled:l||t==="verify"&&i.some(b=>b===""),className:"w-full py-4 bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50 text-white font-bold rounded-2xl flex items-center justify-center gap-2 transition-all shadow-lg active:scale-[0.98]",children:l?a.jsx(ct,{className:"w-5 h-5 animate-spin"}):a.jsxs(a.Fragment,{children:[t==="initial"?"Request Access Code":"Secure Login",a.jsx(Oi,{className:"w-4 h-4"})]})})]}),a.jsxs("div",{className:"mt-12 pt-8 border-t border-white/5 text-center flex flex-col items-center gap-4",children:[a.jsxs("div",{className:"flex items-center justify-center gap-4",children:[a.jsx(rd,{className:"w-5 h-5 text-slate-700"}),a.jsx("div",{className:"w-1 h-1 bg-slate-800 rounded-full"}),a.jsx("span",{className:"text-[10px] font-bold text-slate-600 uppercase tracking-[0.2em]",children:"Impact 24x7 Enterprise"})]}),a.jsxs("div",{className:"text-[10px] text-slate-500 font-medium max-w-[300px] space-y-2",children:[a.jsx("p",{children:"Access restricted to authorized personnel."}),a.jsxs("div",{className:"flex items-center justify-center gap-3 flex-wrap pt-2",children:[a.jsx("a",{href:"/help",onClick:b=>{b.preventDefault(),window.history.pushState({},"","/help"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Help & Support",children:"Help"}),a.jsx("span",{className:"text-slate-600",children:""}),a.jsx("a",{href:"/privacy-policy",onClick:b=>{b.preventDefault(),window.history.pushState({},"","/privacy-policy"),window.dispatchEvent(new PopStateEvent("popstate"))},className:"text-indigo-400 hover:text-indigo-300 underline font-semibold transition-colors",title:"Privacy Policy",children:"Privacy Policy"})]})]})]})]})})]})},zEe=({children:e,onUserLoaded:t})=>{const[r,n]=P.useState(!0),[s,i]=P.useState(!1);return P.useEffect(()=>{(async()=>{const l=localStorage.getItem("auth_token"),c=localStorage.getItem("user_data");if(!l){c&&localStorage.removeItem("user_data"),n(!1);return}if(c)try{const d=JSON.parse(c);t(d),i(!0),n(!1),eI().then(f=>{const u=f.data||f,p=JSON.parse(localStorage.getItem("user_data")||"{}");JSON.stringify(u)!==JSON.stringify(p)&&(localStorage.setItem("user_data",JSON.stringify(u)),t(u))}).catch(f=>{console.warn("Session expired:",f),localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),window.location.reload()});return}catch{localStorage.removeItem("user_data")}try{const d=await eI(),f=d.data||d;localStorage.setItem("user_data",JSON.stringify(f)),t(f),i(!0)}catch{localStorage.removeItem("auth_token"),localStorage.removeItem("user_data"),i(!1)}finally{n(!1)}})()},[t]),r?a.jsxs("div",{className:"h-screen w-screen flex flex-col items-center justify-center bg-slate-950 text-white",children:[a.jsx(ct,{className:"w-10 h-10 animate-spin text-indigo-500 mb-4"}),a.jsx("p",{className:"text-slate-400 font-medium animate-pulse",children:"Establishing secure session..."})]}):s?a.jsx(a.Fragment,{children:e}):a.jsx(UEe,{onLogin:o=>{var c,d;localStorage.setItem("auth_token",o.token||((c=o.data)==null?void 0:c.token));const l=o.user||((d=o.data)==null?void 0:d.user)||o.data;l&&(localStorage.setItem("user_data",JSON.stringify(l)),t(l)),i(!0)}})},qEe=({notifications:e,onMarkAsRead:t,onMarkAllAsRead:r,onRefresh:n,isRefreshing:s=!1,onClose:i,onViewAll:o,onNavigate:l})=>{const c=(f,u)=>{if(f==="note-marked"||u!=null&&u.toLowerCase().includes("marked"))return a.jsx(hc,{className:"w-4 h-4 text-indigo-500"});if(u!=null&&u.toLowerCase().includes("pipeline"))return a.jsx(ad,{className:"w-4 h-4 text-purple-500"});switch(f){case"lead":return a.jsx(hc,{className:"w-4 h-4 text-blue-500"});case"deal":return a.jsx(wi,{className:"w-4 h-4 text-indigo-500"});case"task":return a.jsx(Hs,{className:"w-4 h-4 text-emerald-500"});case"payment":return a.jsx(f0,{className:"w-4 h-4 text-red-500"});case"email-routing":return a.jsx(Jo,{className:"w-4 h-4 text-amber-500"});case"email-assigned":return a.jsx(ba,{className:"w-4 h-4 text-blue-500"});case"email-mention":return a.jsx(Hh,{className:"w-4 h-4 text-violet-500"});case"new-email":return a.jsx(ba,{className:"w-4 h-4 text-slate-600"});default:return a.jsx(zv,{className:"w-4 h-4 text-slate-400"})}},d=(f,u)=>{if(f==="note-marked"||u!=null&&u.toLowerCase().includes("marked"))return"bg-indigo-50";if(u!=null&&u.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(f){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}};return a.jsxs("div",{className:"absolute top-full right-0 mt-2 w-96 bg-white border border-slate-200 rounded-xl shadow-xl z-50 overflow-hidden animate-in fade-in slide-in-from-top-2 duration-200",children:[a.jsxs("div",{className:"p-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("h3",{className:"font-bold text-slate-900 flex items-center gap-2",children:[a.jsx(T5,{className:"w-4 h-4 text-slate-500"}),"Notifications"]}),a.jsxs("div",{className:"flex items-center gap-3",children:[n&&a.jsx("button",{onClick:n,disabled:s,className:"p-1.5 hover:bg-slate-200 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Refresh notifications",children:a.jsx(Vd,{className:`w-3.5 h-3.5 text-slate-600 ${s?"animate-spin":""}`})}),a.jsx("button",{onClick:r,className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-wider",children:"Mark all as read"})]})]}),a.jsx("div",{className:"max-h-[400px] overflow-y-auto",children:e.length>0?a.jsx("div",{className:"divide-y divide-slate-50",children:e.map(f=>a.jsxs("div",{className:`p-4 flex gap-4 hover:bg-slate-50 transition-colors relative cursor-pointer group ${f.read?"":"bg-indigo-50/10"}`,onClick:()=>{if(t(f.id),f.link)if(f.link.startsWith("/?tab=")&&l){const p=new URL(f.link,window.location.origin).searchParams.get("tab");p?(l(p),localStorage.setItem("activeTab",p),window.history.replaceState(null,"",f.link),i()):window.location.href=f.link}else f.link.startsWith("/"),window.location.href=f.link},children:[a.jsx("div",{className:`shrink-0 w-8 h-8 rounded-lg flex items-center justify-center ${d(f.type,f.title)}`,children:c(f.type,f.title)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-2",children:[a.jsx("p",{className:`text-sm font-semibold truncate ${f.read?"text-slate-600":"text-slate-900"}`,children:f.title}),a.jsx("span",{className:"text-[10px] text-slate-400 font-medium shrink-0",children:f.timestamp})]}),a.jsx("p",{className:`text-xs mt-0.5 line-clamp-2 ${f.read?"text-slate-400":"text-slate-500"}`,children:f.message})]}),!f.read&&a.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})})]},f.id))}):a.jsxs("div",{className:"p-12 text-center text-slate-400",children:[a.jsx(Yd,{className:"w-12 h-12 mx-auto mb-3 opacity-20"}),a.jsx("p",{className:"text-sm font-medium",children:"All caught up!"}),a.jsx("p",{className:"text-xs",children:"No new notifications at this time."})]})}),a.jsx("div",{className:"p-3 border-t border-slate-100 bg-slate-50/50 text-center",children:a.jsx("button",{onClick:()=>{i(),o&&o()},className:"text-xs font-bold text-indigo-600 hover:text-indigo-700 uppercase tracking-widest transition-colors",children:"View all activity"})})]})},Hy=20,HEe=({currentUser:e,onNavigate:t})=>{const{showSuccess:r,showError:n}=hn(),[s,i]=P.useState([]),[o,l]=P.useState(!0),[c,d]=P.useState(!1),[f,u]=P.useState(1),[p,h]=P.useState(1),[m,g]=P.useState(0),[x,v]=P.useState(!1),b=P.useCallback(async(F=!1)=>{try{const B=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!(B!=null&&B.id))return;F?d(!0):l(!0);const Y=await IR(B.id,500),V=(Y==null?void 0:Y.data)||Y||[],J=(Array.isArray(V)?V:[]).map(U=>{let X="Just now";if(U.createdAt){const W=new Date(U.createdAt),R=new Date().getTime()-W.getTime(),q=Math.floor(R/6e4),L=Math.floor(R/36e5),H=Math.floor(R/864e5);q<1?X="Just now":q<60?X=`${q}m ago`:L<24?X=`${L}h ago`:H<7?X=`${H}d ago`:X=W.toLocaleDateString()}return{id:U.id,userId:U.userId,type:U.type||"system",title:U.title,message:U.message,timestamp:X,read:!!U.read,link:U.link||void 0}});i(J),g(J.length),h(Math.ceil(J.length/Hy))}catch(B){console.error("[NOTIFICATIONS] Failed to load notifications",B),n(B.message||"Failed to load notifications")}finally{l(!1),d(!1)}},[e,n]);P.useEffect(()=>{b(!1)},[b]),P.useEffect(()=>{u(1)},[x]),P.useEffect(()=>{const F=()=>{b(!0)};return window.addEventListener("refresh-notifications",F),()=>{window.removeEventListener("refresh-notifications",F)}},[b]);const w=async F=>{try{const B=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!(B!=null&&B.id))return;await DR(F,B.id),i(Y=>Y.map(V=>V.id===F?{...V,read:!0}:V)),window.dispatchEvent(new Event("refresh-notifications"))}catch(B){console.error("[NOTIFICATIONS] Failed to mark as read",B),n(B.message||"Failed to mark notification as read")}},y=async()=>{try{const F=e||JSON.parse(localStorage.getItem("user_data")||"null");if(!(F!=null&&F.id))return;await LR(F.id),i(B=>B.map(Y=>({...Y,read:!0}))),r("All notifications marked as read"),window.dispatchEvent(new Event("refresh-notifications"))}catch(F){console.error("[NOTIFICATIONS] Failed to mark all as read",F),n(F.message||"Failed to mark all notifications as read")}},N=(F,B)=>{if(F==="note-marked"||B!=null&&B.toLowerCase().includes("marked"))return a.jsx(hc,{className:"w-5 h-5 text-indigo-500"});if(B!=null&&B.toLowerCase().includes("pipeline"))return a.jsx(ad,{className:"w-5 h-5 text-purple-500"});switch(F){case"lead":return a.jsx(hc,{className:"w-5 h-5 text-blue-500"});case"deal":return a.jsx(wi,{className:"w-5 h-5 text-indigo-500"});case"task":return a.jsx(Hs,{className:"w-5 h-5 text-emerald-500"});case"payment":return a.jsx(f0,{className:"w-5 h-5 text-red-500"});case"email-routing":return a.jsx(Jo,{className:"w-5 h-5 text-amber-500"});case"email-assigned":return a.jsx(ba,{className:"w-5 h-5 text-blue-500"});case"email-mention":return a.jsx(Hh,{className:"w-5 h-5 text-violet-500"});case"new-email":return a.jsx(ba,{className:"w-5 h-5 text-slate-600"});default:return a.jsx(zv,{className:"w-5 h-5 text-slate-400"})}},S=(F,B)=>{if(F==="note-marked"||B!=null&&B.toLowerCase().includes("marked"))return"bg-indigo-50";if(B!=null&&B.toLowerCase().includes("pipeline"))return"bg-purple-50";switch(F){case"lead":return"bg-blue-50";case"deal":return"bg-indigo-50";case"task":return"bg-emerald-50";case"payment":return"bg-red-50";case"email-routing":return"bg-amber-50";case"email-assigned":return"bg-blue-50";case"email-mention":return"bg-violet-50";case"new-email":return"bg-slate-100";default:return"bg-slate-50"}},j=F=>{if(w(F.id),F.link)if(F.link.startsWith("/?tab=")){const Y=new URL(F.link,window.location.origin).searchParams.get("tab");Y&&t?t(Y):window.location.href=F.link}else F.link.startsWith("/"),window.location.href=F.link},_=x?s.filter(F=>{var B;return F.type==="note-marked"||((B=F.title)==null?void 0:B.toLowerCase().includes("marked"))}):s,T=(f-1)*Hy,D=T+Hy,A=_.slice(T,D),C=_.filter(F=>!F.read).length,M=Math.ceil(_.length/Hy);return a.jsxs("div",{className:"space-y-6 animate-in fade-in duration-500 pb-10",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-2xl font-bold text-slate-900 flex items-center gap-3",children:[a.jsx(T5,{className:"w-6 h-6 text-indigo-600"}),"Notifications"]}),a.jsx("p",{className:"text-slate-500 text-sm font-medium mt-1",children:C>0?`${C} unread notification${C!==1?"s":""}`:"All caught up!"})]}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs("button",{onClick:()=>v(!x),className:`px-4 py-2 text-sm font-semibold rounded-lg transition-colors flex items-center gap-2 ${x?"bg-indigo-600 text-white hover:bg-indigo-700":"text-slate-700 hover:bg-slate-100"}`,children:[a.jsx(hc,{className:"w-4 h-4"}),x?"Show All":"Marked Notes"]}),a.jsxs("button",{onClick:()=>b(!0),disabled:c,className:"px-4 py-2 text-sm font-semibold text-slate-700 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:"Refresh notifications",children:[a.jsx(Vd,{className:`w-4 h-4 ${c?"animate-spin":""}`}),"Refresh"]}),C>0&&a.jsx("button",{onClick:y,className:"px-4 py-2 text-sm font-semibold text-indigo-600 hover:bg-indigo-50 rounded-lg transition-colors",children:"Mark all as read"})]})]}),o?a.jsx("div",{className:"flex items-center justify-center py-20",children:a.jsx(Vd,{className:"w-8 h-8 animate-spin text-indigo-600"})}):_.length===0?a.jsxs("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm p-12 text-center",children:[a.jsx(Yd,{className:"w-16 h-16 mx-auto mb-4 text-slate-300"}),a.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-2",children:x?"No marked notes":"All caught up!"}),a.jsx("p",{className:"text-sm text-slate-500",children:x?"No notes have been marked for you yet.":"No notifications at this time."})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden",children:a.jsx("div",{className:"divide-y divide-slate-100",children:A.map(F=>a.jsxs("div",{className:`p-6 flex gap-4 hover:bg-slate-50 transition-colors cursor-pointer group ${F.read?"":"bg-indigo-50/30"}`,onClick:()=>j(F),children:[a.jsx("div",{className:`shrink-0 w-10 h-10 rounded-xl flex items-center justify-center ${S(F.type,F.title)}`,children:N(F.type,F.title)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex justify-between items-start gap-4 mb-1",children:[a.jsx("p",{className:`text-sm font-semibold ${F.read?"text-slate-600":"text-slate-900 font-bold"}`,children:F.title}),a.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[a.jsx("span",{className:"text-xs text-slate-400 font-medium",children:F.timestamp}),!F.read&&a.jsx("div",{className:"w-2 h-2 bg-indigo-500 rounded-full"})]})]}),a.jsx("p",{className:`text-sm ${F.read?"text-slate-400":"text-slate-600"}`,children:F.message})]})]},F.id))})}),M>1&&a.jsxs("div",{className:"flex items-center justify-between bg-white rounded-2xl border border-slate-200 shadow-sm px-6 py-4",children:[a.jsxs("div",{className:"text-sm text-slate-600",children:["Showing ",a.jsx("span",{className:"font-semibold",children:T+1})," to"," ",a.jsx("span",{className:"font-semibold",children:Math.min(D,_.length)})," of"," ",a.jsx("span",{className:"font-semibold",children:_.length})," notifications"]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("button",{onClick:()=>u(F=>Math.max(1,F-1)),disabled:f===1,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(yk,{className:"w-5 h-5"})}),a.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:M},(F,B)=>B+1).map(F=>F===1||F===p||F>=f-1&&F<=f+1?a.jsx("button",{onClick:()=>u(F),className:`px-3 py-1.5 text-sm font-semibold rounded-lg transition-colors ${f===F?"bg-indigo-600 text-white":"text-slate-600 hover:bg-slate-100"}`,children:F},F):F===f-2||F===f+2?a.jsx("span",{className:"px-2 text-slate-400",children:"..."},F):null)}),a.jsx("button",{onClick:()=>u(F=>Math.min(M,F+1)),disabled:f===M,className:"p-2 text-slate-600 hover:bg-slate-100 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:a.jsx(ra,{className:"w-5 h-5"})})]})]})]})]})},Nf=e=>{if(!e||!e.trim())return null;const t=e.trim();if(t.includes("@")){const r=t.split("@");if(r.length!==2||!r[1])return null;const n=r[1].toLowerCase().trim();return n.includes(".")?n:null}try{if(!t.includes(".")&&!t.startsWith("http"))return null;const n=(t.startsWith("http")?new URL(t):new URL(`https://${t}`)).hostname.replace(/^www\./,"").toLowerCase();return n.includes(".")?n:null}catch{const n=t.replace(/^https?:\/\//,"").replace(/^www\./,"").split("/")[0].toLowerCase().trim()||null;return n&&n.includes(".")?n:null}},WEe=(e,t)=>{if(!e||!t)return 0;const r=e.toLowerCase().trim(),n=t.toLowerCase().trim();if(r===n)return 1;const s=r.length,i=n.length;if(s===0||i===0)return 0;const o=[];for(let d=0;d<=s;d++)o[d]=[d];for(let d=0;d<=i;d++)o[0][d]=d;for(let d=1;d<=s;d++)for(let f=1;f<=i;f++){const u=r[d-1]===n[f-1]?0:1;o[d][f]=Math.min(o[d-1][f]+1,o[d][f-1]+1,o[d-1][f-1]+u)}const l=o[s][i],c=Math.max(s,i);return 1-l/c},VEe=(e,t)=>{const r=[];if(!e.email)return r;const n=e.email.toLowerCase().trim();return t.forEach(s=>{s.id!==e.id&&s.email&&s.email.toLowerCase().trim()===n&&r.push({record:s,matchType:"exact",confidence:1})}),r},GEe=(e,t,r=.8)=>{const n=[];return e.name&&t.forEach(s=>{if(s.id===e.id)return;const i=WEe(e.name||"",s.name||"");i>=r&&n.push({record:s,matchType:"fuzzy",confidence:i,similarity:i})}),n},KEe=["North America","South America","Europe","Asia","Africa","Middle East","Oceania","Central America","Caribbean","Eastern Europe","Western Europe","Northern Europe","Southern Europe","Southeast Asia","East Asia","South Asia","Central Asia","North Africa","Sub-Saharan Africa","Latin America","United States","Canada","Mexico","United Kingdom","Germany","France","Italy","Spain","Netherlands","Belgium","Switzerland","Austria","Sweden","Norway","Denmark","Finland","Poland","Russia","China","Japan","India","South Korea","Singapore","Australia","New Zealand","Brazil","Argentina","Chile","United Arab Emirates","Saudi Arabia","Israel","South Africa","Global","International"],XEe=({type:e,stage:t,lockedType:r,onClose:n,onSuccess:s})=>{const[i,o]=P.useState(e),[l,c]=P.useState("form"),[d,f]=P.useState(!1),[u,p]=P.useState(null),[h,m]=P.useState({}),[g,x]=P.useState([]),[v,b]=P.useState([]),[w,y]=P.useState([]),[N,S]=P.useState([]),[j,_]=P.useState([]),[T,D]=P.useState(!1),[A,C]=P.useState(!1),[M,F]=P.useState(""),B=P.useRef(null),[Y,V]=P.useState(null),[J,U]=P.useState(!1),[X,W]=P.useState(""),[E,R]=P.useState(null),q=P.useRef(null),[L,H]=P.useState({name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",currency:Us,expectedCloseDate:"",stage:"Discovery",status:"Planning",progress:"0",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",priority:"Medium",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:"",lineItems:[]});P.useEffect(()=>{const ie={name:"",title:"",companyId:"",projectId:"",role:"",email:"",phone:"",assigneeId:"",ownerId:"",value:"",expectedCloseDate:"",stage:t||"Discovery",status:"Planning",progress:"0",priority:"Medium",description:"",industry:"",website:"",region:"",domain:"",linkedin:"",assignedUserIds:[],engagement:"",startDate:"",endDate:"",category:""};e==="invoice"?(ie.lineItems=[{description:"",quantity:1,rate:0,amount:0}],ie.currency=Us):(ie.lineItems=[],e!=="deal"&&(ie.currency=Us)),H(Q=>({...Q,...ie})),p(null),m({}),c("form"),D(!1),W(""),R(null),q.current&&(q.current.value="")},[e,t]),P.useEffect(()=>{(async()=>{try{const Q=JSON.parse(localStorage.getItem("user_data")||"{}"),Ne=Q==null?void 0:Q.id,[de,ye,xe,we]=await Promise.all([ud(),jc(),Yh(),C0(Ne)]);y(de.data||[]),x(ye.data||[]),b(xe.data||[]);const Ae=Array.isArray(we)?we:(we==null?void 0:we.data)||[];if(S(Ae.filter(Ue=>!Ue.archived)),i==="task")try{const Ue=await Ww(),me=Array.isArray(Ue==null?void 0:Ue.data)?Ue.data:[];_(me)}catch{_([])}else _([]);Ne&&H(Ue=>({...Ue,ownerId:Ue.ownerId||Ne,assigneeId:Ue.assigneeId||Ne}))}catch(Q){console.error("[QUICK-CREATE] Data fetch failed:",Q)}})()},[i]),P.useEffect(()=>{const ie=Q=>{B.current&&!B.current.contains(Q.target)&&(C(!1),F(""))};if(A)return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[A]);const se=KEe.filter(ie=>ie.toLowerCase().includes(M.toLowerCase())),ce=(ie,Q=1200,Ne=1200,de=.8)=>new Promise((ye,xe)=>{const we=new FileReader;we.onload=Ae=>{var me;const Ue=new Image;Ue.onload=()=>{let ee=Ue.width,fe=Ue.height;ee>fe?ee>Q&&(fe=fe*Q/ee,ee=Q):fe>Ne&&(ee=ee*Ne/fe,fe=Ne);const Fe=document.createElement("canvas");Fe.width=ee,Fe.height=fe;const Ee=Fe.getContext("2d");Ee?(Ee.drawImage(Ue,0,0,ee,fe),ye(Fe.toDataURL("image/jpeg",de))):xe(new Error("Canvas context not available"))},Ue.onerror=()=>xe(new Error("Failed to load image")),Ue.src=(me=Ae.target)==null?void 0:me.result},we.onerror=()=>xe(new Error("Failed to read file")),we.readAsDataURL(ie)}),ae=async ie=>{var Ne;const Q=(Ne=ie.target.files)==null?void 0:Ne[0];if(Q){if(!Q.type.startsWith("image/")){p("Please select an image file");return}if(Q.size>10*1024*1024){p("Image size must be less than 10MB");return}try{const de=await ce(Q,1200,1200,.8);W(de),R(Q),p(null)}catch(de){p(de.message||"Failed to process image")}}},Z=()=>{W(""),R(null),q.current&&(q.current.value=""),n()},ve=()=>{var Q,Ne,de,ye,xe,we,Ae,Ue,me,ee,fe,Fe;const ie={};if(i==="contact")(Q=L.name)!=null&&Q.trim()||(ie.name="Full Name is required"),(Ne=L.email)!=null&&Ne.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(L.email)||(ie.email="Please enter a valid email address"):ie.email="Email Address is required";else if(i==="company"){(de=L.name)!=null&&de.trim()||(ie.name="Company Name is required"),(!L.region||L.region.trim()==="")&&(ie.region="Region is required"),(ye=L.ownerId)!=null&&ye.trim()||(ie.ownerId="Assignee / Lead is required");let Ee=L.domain;!Ee&&L.website&&(Ee=Nf(L.website)||""),!Ee&&L.email&&(Ee=Nf(L.email)||""),(!Ee||Ee.trim()==="")&&(ie.domain="Domain is required (can be auto-populated from website or email)",ie.website="Add website or email to auto-populate domain")}else if(i==="deal")(xe=L.title)!=null&&xe.trim()||(ie.title="Deal Name is required"),(we=L.companyId)!=null&&we.trim()||(ie.companyId="Organization is required"),(!L.value||parseFloat(L.value)<=0)&&(ie.value="Amount is required and must be greater than $0"),(Ae=L.stage)!=null&&Ae.trim()||(ie.stage="Stage is required"),L.ownerId||(ie.ownerId="Assignee / Lead is required");else if(i==="project"){if((Ue=L.title)!=null&&Ue.trim()||(ie.title="Project Name is required"),(me=L.engagement)!=null&&me.trim()||(ie.engagement="Engagement is required"),(ee=L.startDate)!=null&&ee.trim()||(ie.startDate="Start Date is required"),(fe=L.endDate)!=null&&fe.trim()||(ie.endDate="End Date is required"),L.startDate&&L.endDate){const Ee=new Date(L.startDate),qe=new Date(L.endDate);!isNaN(Ee.getTime())&&!isNaN(qe.getTime())&&Ee>=qe&&(ie.endDate="End Date must be after Start Date")}L.ownerId||(ie.ownerId="Assignee / Lead is required")}else i==="task"?((Fe=L.title)!=null&&Fe.trim()||(ie.title="Task Title is required"),L.assigneeId||(ie.assigneeId="Designated Lead / Assignee is required")):i==="invoice"&&(L.companyId||(ie.companyId="Client (Organization) is required"),(!L.expectedCloseDate||L.expectedCloseDate.trim()==="")&&(ie.expectedCloseDate=i==="deal"?"Expected Close Date is required":"Due Date is required"),!L.lineItems||L.lineItems.length===0?ie.lineItems="At least one line item is required":(L.lineItems.forEach((qe,Ke)=>{(!qe.description||!qe.description.trim())&&(ie[`lineItem_${Ke}_description`]=`Line item ${Ke+1}: Description is required`),(!qe.quantity||qe.quantity<=0)&&(ie[`lineItem_${Ke}_quantity`]=`Line item ${Ke+1}: Quantity must be greater than 0`),(!qe.rate||qe.rate<=0)&&(ie[`lineItem_${Ke}_rate`]=`Line item ${Ke+1}: Rate must be greater than 0`)}),L.lineItems.reduce((qe,Ke)=>{const Qe=Ke.amount||Ke.rate*Ke.quantity||0;return qe+Qe},0)<=0&&(ie.lineItems="Total amount must be greater than $0")));return m(ie),Object.keys(ie).length===0},ne=async ie=>{var Ne,de,ye,xe,we,Ae,Ue,me,ee,fe,Fe,Ee,qe,Ke;if(ie.preventDefault(),d)return;if(p(null),!ve()){f(!1);return}f(!0),console.debug(`[QUICK-CREATE] Deployment Start. Type: ${i}`,L);try{const Qe=JSON.parse(localStorage.getItem("user_data")||"null"),_t=Qe==null?void 0:Qe.id;if(i==="contact"){const vt={name:L.name,email:L.email},ke=VEe(vt,v),Je=GEe(vt,v,.8);if(ke.length>0||Je.length>0){const mt=new Map,ue=new Set;ke.forEach(bt=>{var gr;const xt=bt.record,Vt=xt.id||((gr=xt.email)==null?void 0:gr.toLowerCase().trim())||"";Vt&&!mt.has(Vt)&&(mt.set(Vt,{...xt,matchType:"exact",matchReason:"email"}),xt.email&&ue.add(xt.email.toLowerCase().trim()))}),Je.forEach(bt=>{var qt,Gt;const xt=bt.record,Vt=xt.id||((qt=xt.email)==null?void 0:qt.toLowerCase().trim())||"",gr=(Gt=xt.email)==null?void 0:Gt.toLowerCase().trim();Vt&&!mt.has(Vt)&&(!gr||!ue.has(gr))&&(mt.set(Vt,{...xt,matchType:"fuzzy",matchReason:"name",similarity:bt.similarity}),gr&&ue.add(gr))});const Ye=Array.from(mt.values());V({open:!0,duplicates:Ye,newContact:{name:L.name,email:L.email,companyId:L.companyId||void 0,role:L.role,phone:L.phone,linkedin:L.linkedin||void 0}}),f(!1);return}await tI({name:L.name,companyId:L.companyId||void 0,role:L.role,email:L.email,phone:L.phone,linkedin:L.linkedin||void 0})}else if(i==="company"){let vt=L.domain;!vt&&L.website&&(vt=Nf(L.website)||void 0),!vt&&L.email&&(vt=Nf(L.email)||void 0);const ke={name:(Ne=L.name)==null?void 0:Ne.trim(),industry:(de=L.industry)==null?void 0:de.trim(),region:((ye=L.region)==null?void 0:ye.trim())||"",website:((xe=L.website)==null?void 0:xe.trim())||void 0,email:((we=L.email)==null?void 0:we.trim())||void 0,domain:vt||"",linkedin:((Ae=L.linkedin)==null?void 0:Ae.trim())||void 0,ownerId:L.ownerId||_t};if(!ke.region){m({region:"Region is required"}),f(!1);return}if(!ke.domain){m({domain:"Domain is required (can be auto-populated from website or email)"}),f(!1);return}await Zge(ke)}else if(i==="deal"){if(!L.companyId||L.companyId.trim()===""){m({companyId:"Organization is required"}),f(!1);return}if(!L.value||parseFloat(L.value)<=0){m({value:"Amount is required and must be greater than $0"}),f(!1);return}if(!L.stage||L.stage.trim()===""){m({stage:"Stage is required"}),f(!1);return}await eve({title:L.title,companyId:L.companyId.trim(),value:parseFloat(L.value),currency:L.currency||Us,stage:L.stage,pipelineType:"sales",ownerId:L.ownerId,expectedCloseDate:L.expectedCloseDate||void 0,description:L.description||void 0})}else if(i==="project"){const vt={};if((Ue=L.title)!=null&&Ue.trim()||(vt.title="Project Name is required"),(me=L.engagement)!=null&&me.trim()||(vt.engagement="Engagement is required"),(ee=L.startDate)!=null&&ee.trim()||(vt.startDate="Start Date is required"),(fe=L.endDate)!=null&&fe.trim()||(vt.endDate="End Date is required"),(Fe=L.ownerId)!=null&&Fe.trim()||(vt.ownerId="Assignee / Lead is required"),L.startDate&&L.endDate){const Je=new Date(L.startDate),mt=new Date(L.endDate);!isNaN(Je.getTime())&&!isNaN(mt.getTime())&&Je>=mt&&(vt.endDate="End Date must be after Start Date")}if(Object.keys(vt).length>0){m(vt),f(!1);return}console.debug("[QUICK-CREATE] Attempting Project Creation...",{title:L.title,engagement:L.engagement,startDate:L.startDate,endDate:L.endDate,ownerId:L.ownerId});const ke={title:L.title.trim(),engagement:L.engagement.trim(),startDate:L.startDate,endDate:L.endDate,companyId:L.companyId&&L.companyId.trim()!==""?L.companyId:void 0,status:L.status,ownerId:L.ownerId,projectManager:L.ownerId,progress:0,description:L.description||void 0};X&&E&&(ke.noteImage=X,ke.noteImageName=E.name,ke.noteImageMimeType=E.type),console.debug("[QUICK-CREATE] Project payload:",ke),await rve(ke)}else if(i==="task"){console.debug("[QUICK-CREATE] Attempting Task Creation...",{title:L.title,assigneeId:L.assigneeId});const vt={title:L.title,projectId:L.projectId||void 0,description:L.description||void 0,dueDate:L.expectedCloseDate||void 0,priority:L.priority,status:"Todo",assigneeId:L.assigneeId,category:L.category&&L.category.trim()?L.category.trim():void 0};if(X||L.description){const ke=JSON.parse(localStorage.getItem("user_data")||"{}"),Je={id:`note_${Date.now()}`,userId:_t||ke.id,userName:ke.name||"Unknown User",text:L.description||"",createdAt:new Date().toISOString()};X&&E&&(Je.imageUrl=X,Je.imageName=E.name,Je.imageMimeType=E.type),vt.notes=[Je]}await TR(vt),window.dispatchEvent(new Event("refresh-tasks"))}else if(i==="invoice"){const vt={};if((Ee=L.companyId)!=null&&Ee.trim()||(vt.companyId="Client (Organization) is required"),(qe=L.expectedCloseDate)!=null&&qe.trim()||(vt.expectedCloseDate="Due Date is required"),(!L.lineItems||L.lineItems.length===0)&&(vt.lineItems="At least one line item is required"),L.lineItems&&L.lineItems.length>0&&L.lineItems.forEach((mt,ue)=>{(!mt.description||!mt.description.trim())&&(vt[`lineItem_${ue}_description`]=`Line item ${ue+1}: Description is required`),(!mt.quantity||mt.quantity<=0)&&(vt[`lineItem_${ue}_quantity`]=`Line item ${ue+1}: Quantity must be greater than 0`),(!mt.rate||mt.rate<=0)&&(vt[`lineItem_${ue}_rate`]=`Line item ${ue+1}: Rate must be greater than 0`)}),Object.keys(vt).length>0){m(vt),f(!1);return}const ke=L.lineItems.map(mt=>({description:mt.description.trim(),quantity:mt.quantity,rate:mt.rate,amount:mt.amount||mt.rate*mt.quantity})),Je=ke.reduce((mt,ue)=>mt+(ue.amount||0),0);if(Je<=0){m({lineItems:"At least one line item with a valid amount is required"}),f(!1);return}console.debug("[QUICK-CREATE] Creating invoice with:",{companyId:L.companyId,amount:Je,dueDate:L.expectedCloseDate,lineItemsCount:ke.length,lineItems:ke,name:L.name,description:L.description}),await ave({companyId:L.companyId,amount:Je,currency:L.currency||Us,dueDate:L.expectedCloseDate,description:L.name||L.description||"",lineItems:ke,items:ke,status:"Draft",userId:_t||void 0}),window.dispatchEvent(new Event("refresh-invoices"))}console.debug("[QUICK-CREATE] Registry success. Finalizing UI update."),c("success"),W(""),R(null),q.current&&(q.current.value=""),i==="project"?(console.log("[QUICK-CREATE] Dispatching refresh-projects event"),window.dispatchEvent(new Event("refresh-projects"))):i==="invoice"&&(console.log("[QUICK-CREATE] Dispatching refresh-invoices event"),window.dispatchEvent(new Event("refresh-invoices"))),s&&(console.log("[QUICK-CREATE] Calling onSuccess callback"),s()),setTimeout(()=>{n()},1500)}catch(Qe){if(console.error("[QUICK-CREATE] Deployment failed:",Qe),console.error("[QUICK-CREATE] Error details:",{message:Qe.message,code:Qe.code,status:Qe.status,details:Qe.details,type:i}),Qe.code==="DUPLICATE_DETECTED"&&Qe.duplicates&&i==="contact"){const _t=new Map;Qe.duplicates.forEach(ke=>{if(ke.id)if(!_t.has(ke.id))_t.set(ke.id,ke);else{const Je=_t.get(ke.id);ke.matchType==="exact"&&Je.matchType!=="exact"&&_t.set(ke.id,ke)}});const vt=Array.from(_t.values());V({open:!0,duplicates:vt,newContact:{name:L.name,email:L.email,companyId:L.companyId||void 0,role:L.role,phone:L.phone,linkedin:L.linkedin||void 0}}),f(!1);return}if(Qe.code==="VALIDATION_ERROR"||Qe.details&&Qe.details.errors){const _t={};(((Ke=Qe.details)==null?void 0:Ke.errors)||(Qe.message?[Qe.message]:[])).forEach(ke=>{const Je=ke.toLowerCase();if(Je.includes("name")||Je.includes("title"))_t.title=ke;else if(Je.includes("industry"))_t.industry=ke;else if(Je.includes("region"))_t.region=ke;else if(Je.includes("domain"))_t.domain=ke;else if(Je.includes("email"))_t.email=ke;else if(Je.includes("engagement"))_t.engagement=ke;else if(Je.includes("start date")||Je.includes("startdate"))_t.startDate=ke;else if(Je.includes("end date")||Je.includes("enddate"))_t.endDate=ke;else if(Je.includes("project manager")||Je.includes("manager"))_t.ownerId=ke;else if(Je.includes("assignee")||Je.includes("lead")||Je.includes("owner"))_t.ownerId=ke;else if(Je.includes("client")||Je.includes("company"))_t.companyId=ke;else if(Je.includes("due date")||Je.includes("duedate"))_t.expectedCloseDate=ke;else if(Je.includes("line item")){const mt=Je.match(/line item (\d+):\s*(.+)/);if(mt){const ue=parseInt(mt[1])-1,Ye=mt[2];Ye.includes("description")?_t[`lineItem_${ue}_description`]=ke:Ye.includes("quantity")?_t[`lineItem_${ue}_quantity`]=ke:(Ye.includes("rate")||Ye.includes("amount"))&&(_t[`lineItem_${ue}_rate`]=ke)}else _t.lineItems=ke}else Je.includes("amount")&&!Je.includes("line item")&&(_t.lineItems=ke)}),Object.keys(_t).length>0?(m(_t),p("Please correct the validation errors below")):p(Qe.message||"Validation failed. Please check all required fields.")}else p(Qe.message||"Operational error. Verify mandatory fields and team authorization.");f(!1)}},He=()=>{switch(i){case"deal":return"New Opportunity";case"project":return"New Project";case"task":return"New Task";case"invoice":return"New Invoice";case"company":return"Add Company";case"contact":return"Add Contact";default:return"Quick Entry"}},Xe=()=>a.jsx("span",{className:"text-red-500 ml-1 font-black text-base",children:"*"});return l==="success"?a.jsx("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-[40px] w-full max-w-sm p-12 text-center animate-in zoom-in-95 duration-300 shadow-2xl",children:[a.jsx("div",{className:"w-24 h-24 bg-emerald-50 rounded-full flex items-center justify-center mx-auto mb-8 text-emerald-500 ring-8 ring-emerald-50/50",children:a.jsx(Qr,{className:"w-12 h-12 animate-in zoom-in duration-500"})}),a.jsx("h3",{className:"text-2xl font-black text-slate-900 mb-2 tracking-tight",children:"Deployment Success"}),a.jsx("p",{className:"text-slate-500 text-sm font-medium",children:"Record integrated into ImpactFlow OS."})]})}):a.jsxs("div",{className:"fixed inset-0 bg-slate-950/60 backdrop-blur-md z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:[a.jsxs("div",{className:"bg-white rounded-[48px] w-full max-w-2xl shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-8 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-5",children:[a.jsxs("div",{className:"p-4 bg-indigo-600 rounded-[20px] text-white shadow-2xl shadow-indigo-100 ring-4 ring-indigo-50",children:[(i==="deal"||i==="company")&&a.jsx(rd,{className:"w-6 h-6"}),i==="project"&&a.jsx(nd,{className:"w-6 h-6"}),i==="task"&&a.jsx(Hs,{className:"w-6 h-6"}),i==="invoice"&&a.jsx(Dn,{className:"w-6 h-6"}),i==="contact"&&a.jsx(co,{className:"w-6 h-6"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-2xl font-black text-slate-900 tracking-tight leading-none mb-1",children:He()}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-[0.2em] font-black",children:"WORKSPACE UPDATE"})]})]}),a.jsx("button",{onClick:Z,className:"p-3 hover:bg-slate-100 rounded-full text-slate-400 transition-all",children:a.jsx(zt,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:ne,className:"p-8 space-y-8 max-h-[75vh] overflow-y-auto custom-scrollbar",children:[!r&&a.jsx("div",{className:"flex bg-slate-100 p-1 rounded-[20px] mb-4 overflow-x-auto scrollbar-hide border border-slate-200",children:["deal","project","task","invoice","company","contact"].map(ie=>a.jsx("button",{type:"button",onClick:()=>o(ie),className:`flex-1 min-w-[80px] flex items-center justify-center py-3 rounded-2xl text-[10px] font-black uppercase tracking-widest transition-all ${i===ie?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:ie},ie))}),u&&Object.keys(h).length===0&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-600 text-xs p-5 rounded-3xl font-bold flex items-start gap-3 animate-in slide-in-from-top-2",children:[a.jsx(On,{className:"w-5 h-5 shrink-0"}),a.jsx("span",{children:u})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Name"," ",a.jsx(Xe,{})]}),a.jsx("input",{required:!0,type:"text",placeholder:i==="deal"?"e.g., Q4 Logistics Transformation":"Name...",value:i==="deal"||i==="project"||i==="task"?L.title:L.name,onChange:ie=>{const Q=i==="deal"||i==="project"||i==="task"?"title":"name";H(Ne=>({...Ne,[Q]:ie.target.value})),h[Q]&&m(Ne=>{const de={...Ne};return delete de[Q],de})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.title||h.name?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),(h.title||h.name)&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.title||h.name]})]}),(i==="deal"||i==="project"||i==="invoice"||i==="contact")&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Organization ",(i==="deal"||i==="invoice")&&a.jsx(Xe,{})]}),a.jsxs("select",{required:i==="deal"||i==="invoice",value:L.companyId,onChange:ie=>{H(Q=>({...Q,companyId:ie.target.value})),h.companyId&&m(Q=>{const Ne={...Q};return delete Ne.companyId,Ne})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${h.companyId?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${h.companyId?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[a.jsx("option",{value:"",children:i==="deal"||i==="invoice"?"Select Organization":"No Organization"}),g.map(ie=>a.jsx("option",{value:ie.id,children:ie.name},ie.id))]}),h.companyId&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.companyId]})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Email ",a.jsx(Xe,{})]}),a.jsx("input",{required:!0,type:"email",placeholder:"contact@company.com",value:L.email,onChange:ie=>{H(Q=>({...Q,email:ie.target.value})),h.email&&m(Q=>{const Ne={...Q};return delete Ne.email,Ne})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.email&&i==="contact"&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.email]})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Role / Title"}),a.jsx("input",{type:"text",placeholder:"e.g., CEO, Manager",value:L.role,onChange:ie=>H(Q=>({...Q,role:ie.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="contact"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Phone Number"}),a.jsx("input",{type:"tel",placeholder:"+1 (555) 000-0000",value:L.phone,onChange:ie=>H(Q=>({...Q,phone:ie.target.value})),className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 font-bold placeholder:text-slate-300"})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Industry"}),a.jsx("input",{type:"text",placeholder:"e.g., Technology, Healthcare",value:L.industry,onChange:ie=>{H(Q=>({...Q,industry:ie.target.value})),h.industry&&m(Q=>{const Ne={...Q};return delete Ne.industry,Ne})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.industry?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.industry&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.industry]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2 relative",ref:B,children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Region ",a.jsx(Xe,{})]}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{type:"button",onClick:()=>{C(!A),A||F("")},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold text-left flex items-center justify-between ${h.region?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"} ${L.region?"text-slate-900":"text-slate-400"}`,children:[a.jsx("span",{children:L.region||"Select Region"}),a.jsx($s,{className:`w-4 h-4 text-slate-400 transition-transform ${A?"rotate-180":""}`})]}),A&&a.jsxs("div",{className:"absolute z-50 w-full mt-2 bg-white border border-slate-200 rounded-[20px] shadow-2xl max-h-64 overflow-hidden",children:[a.jsx("div",{className:"p-3 border-b border-slate-100",children:a.jsxs("div",{className:"relative",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{type:"text",placeholder:"Search regions...",value:M,onChange:ie=>F(ie.target.value),onClick:ie=>ie.stopPropagation(),className:"w-full pl-10 pr-4 py-2 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-2 focus:ring-indigo-500",autoFocus:!0})]})}),a.jsx("div",{className:"max-h-48 overflow-y-auto custom-scrollbar",children:se.length>0?se.map(ie=>a.jsx("button",{type:"button",onClick:()=>{const Q=ie.trim();H(Ne=>({...Ne,region:Q})),C(!1),F(""),m(Ne=>{const de={...Ne};return delete de.region,de}),p(null)},className:`w-full px-6 py-3 text-left text-sm font-bold transition-colors hover:bg-indigo-50 ${L.region===ie?"bg-indigo-50 text-indigo-600":"text-slate-900"}`,children:ie},ie)):a.jsx("div",{className:"px-6 py-4 text-sm text-slate-400 font-bold text-center",children:"No regions found"})})]})]}),h.region&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1 mt-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.region]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Website"}),a.jsx("input",{type:"url",placeholder:"https://www.example.com",value:L.website,onChange:ie=>{const Q=ie.target.value;H(Ne=>{const de={...Ne,website:Q},ye=Q?Nf(Q):null,xe=Ne.email?Nf(Ne.email):null;return de.domain=ye||xe||"",de}),(h.domain||h.website)&&m(Ne=>{const de={...Ne};return delete de.domain,delete de.website,de})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.website?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.website&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.website]})]}),i==="company"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Email"}),a.jsx("input",{type:"email",placeholder:"contact@company.com",value:L.email,onChange:ie=>{const Q=ie.target.value;H(Ne=>{const de={...Ne,email:Q},ye=Ne.website?Nf(Ne.website):null,xe=Q?Nf(Q):null;return de.domain=ye||xe||"",de}),(h.email||h.domain)&&m(Ne=>{const de={...Ne};return delete de.email,delete de.domain,de})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.email?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.email&&i==="contact"&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.email]})]}),i==="company"&&L.domain&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Domain ",a.jsx("span",{className:"text-xs text-slate-400",children:"(auto-populated)"})]}),a.jsx("input",{type:"text",value:L.domain,readOnly:!0,className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold cursor-not-allowed ${h.domain?"bg-red-50 border-2 border-red-500 text-red-600":"bg-slate-100 border border-slate-200 text-slate-600"}`}),h.domain&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.domain]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Linked Project"}),a.jsxs("select",{value:L.projectId||"",onChange:ie=>{const Q=ie.target.value;H(Ne=>({...Ne,projectId:Q===""?"":Q}))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22%236b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),N.map(ie=>a.jsx("option",{value:ie.id,children:ie.title},ie.id))]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1 flex items-center gap-1.5",children:[a.jsx(Xa,{className:"w-3.5 h-3.5"})," Task Category"]}),a.jsxs("select",{value:T?"__new__":L.category||"",onChange:ie=>{const Q=ie.target.value;Q==="__new__"?(D(!0),H(Ne=>({...Ne,category:""}))):(D(!1),H(Ne=>({...Ne,category:Q})))},className:"w-full px-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 transition-all font-bold appearance-none bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%226b7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')] bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat",children:[a.jsx("option",{value:"",children:"None"}),j.map(ie=>a.jsx("option",{value:ie,children:ie},ie)),a.jsx("option",{value:"__new__",children:"+ Create new category..."})]}),T&&a.jsx("div",{className:"pt-1",children:a.jsx("input",{type:"text",value:L.category,onChange:ie=>H(Q=>({...Q,category:ie.target.value.trim()})),placeholder:"Enter new category name",className:"w-full px-6 py-3 bg-white border border-indigo-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 font-medium"})})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["ASSIGNEE / LEAD ",a.jsx(Xe,{})]}),a.jsxs("select",{required:!0,value:i==="task"?L.assigneeId:L.ownerId,onChange:ie=>{const Q=i==="task"?"assigneeId":"ownerId";H(Ne=>({...Ne,[Q]:ie.target.value})),h[Q]&&m(Ne=>{const de={...Ne};return delete de[Q],de})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none ${h.ownerId||h.assigneeId?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`,children:[a.jsx("option",{value:"",children:"Select Resource Personnel"}),w.map(ie=>a.jsx("option",{value:ie.id,children:ie.name},ie.id))]}),(h.ownerId||h.assigneeId)&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.ownerId||h.assigneeId]})]}),i==="deal"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Value ",a.jsx(Xe,{})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("div",{className:"relative w-32",children:a.jsx("select",{value:L.currency||Us,onChange:ie=>{H(Q=>({...Q,currency:ie.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Sx.map(ie=>a.jsxs("option",{value:ie.code,children:[ie.code," (",ie.symbol,")"]},ie.code))})}),a.jsxs("div",{className:"relative flex-1",children:[a.jsx("span",{className:"absolute left-6 top-1/2 -translate-y-1/2 text-indigo-500 font-black text-sm",children:vu(L.currency)}),a.jsx("input",{required:!0,type:"number",step:"0.01",placeholder:"0.00",value:L.value,onChange:ie=>{H(Q=>({...Q,value:ie.target.value})),h.value&&m(Q=>{const Ne={...Q};return delete Ne.value,Ne})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-black transition-all ${h.value?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600 text-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600"}`})]})]}),h.value&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.value]})]}),i==="invoice"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"Currency"}),a.jsx("div",{className:"relative w-full",children:a.jsx("select",{value:L.currency||Us,onChange:ie=>{H(Q=>({...Q,currency:ie.target.value}))},className:"w-full px-4 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 text-indigo-600 cursor-pointer",style:{backgroundImage:`url('data:image/svg+xml;charset=utf-8,%3Csvg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20"%3E%3Cpath stroke="%236b7280" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="m6 8 4 4 4-4"/%3E%3C/svg%3E')`,backgroundRepeat:"no-repeat",backgroundPosition:"right 12px center",backgroundSize:"16px"},children:Sx.map(ie=>a.jsxs("option",{value:ie.code,children:[ie.code," (",ie.symbol,")"]},ie.code))})})]}),i==="invoice"&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Line Items ",a.jsx(Xe,{})]}),a.jsxs("div",{className:"space-y-3",children:[L.lineItems.map((ie,Q)=>a.jsxs("div",{className:"p-4 bg-slate-50 border border-slate-200 rounded-[20px] space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("span",{className:"text-xs font-bold text-slate-600",children:["Item ",Q+1]}),L.lineItems.length>1&&a.jsx("button",{type:"button",onClick:()=>{const Ne=L.lineItems.filter((de,ye)=>ye!==Q);H(de=>({...de,lineItems:Ne})),m(de=>{const ye={...de};return delete ye[`lineItem_${Q}_description`],delete ye[`lineItem_${Q}_quantity`],delete ye[`lineItem_${Q}_rate`],ye})},className:"text-red-500 hover:text-red-700 text-xs font-bold",children:"Remove"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Description ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"text",placeholder:"Item description",value:ie.description,onChange:Ne=>{const de=[...L.lineItems];de[Q]={...de[Q],description:Ne.target.value},H(ye=>({...ye,lineItems:de})),h[`lineItem_${Q}_description`]&&m(ye=>{const xe={...ye};return delete xe[`lineItem_${Q}_description`],xe})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${h[`lineItem_${Q}_description`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),h[`lineItem_${Q}_description`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:h[`lineItem_${Q}_description`]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Quantity ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"1",value:ie.quantity||"",onChange:Ne=>{const de=parseFloat(Ne.target.value)||0,ye=ie.rate||0,xe=[...L.lineItems];xe[Q]={...xe[Q],quantity:de,amount:de*ye},H(we=>({...we,lineItems:xe})),h[`lineItem_${Q}_quantity`]&&m(we=>{const Ae={...we};return delete Ae[`lineItem_${Q}_quantity`],Ae})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${h[`lineItem_${Q}_quantity`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),h[`lineItem_${Q}_quantity`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:h[`lineItem_${Q}_quantity`]})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:["Rate (",vu(L.currency),") ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsx("input",{type:"number",step:"0.01",min:"0.01",placeholder:"0.00",value:ie.rate||"",onChange:Ne=>{const de=parseFloat(Ne.target.value)||0,ye=ie.quantity||0,xe=[...L.lineItems];xe[Q]={...xe[Q],rate:de,amount:ye*de},H(we=>({...we,lineItems:xe})),h[`lineItem_${Q}_rate`]&&m(we=>{const Ae={...we};return delete Ae[`lineItem_${Q}_rate`],Ae})},className:`w-full px-4 py-2 rounded-xl text-sm outline-none font-bold transition-all ${h[`lineItem_${Q}_rate`]?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100":"bg-white border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`}),h[`lineItem_${Q}_rate`]&&a.jsx("p",{className:"text-xs text-red-600 font-bold px-1 mt-1",children:h[`lineItem_${Q}_rate`]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-[9px] font-black text-slate-400 uppercase tracking-widest px-1 mb-1 block",children:"Amount"}),a.jsx("div",{className:"px-4 py-2 bg-indigo-50 border border-indigo-200 rounded-xl",children:a.jsxs("p",{className:"text-sm font-black text-indigo-600",children:[vu(L.currency),((ie.quantity||0)*(ie.rate||0)).toFixed(2)]})})]})]},Q)),a.jsxs("button",{type:"button",onClick:()=>{H(ie=>({...ie,lineItems:[...ie.lineItems,{description:"",quantity:1,rate:0,amount:0}]})),h.lineItems&&m(ie=>{const Q={...ie};return delete Q.lineItems,Q})},className:"w-full px-4 py-3 bg-indigo-50 border-2 border-dashed border-indigo-300 rounded-xl text-sm font-bold text-indigo-600 hover:bg-indigo-100 hover:border-indigo-400 transition-colors flex items-center justify-center gap-2",children:[a.jsx($r,{className:"w-4 h-4"}),"Add Line Item"]}),h.lineItems&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.lineItems]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Total Amount (",vu(L.currency),")"]}),a.jsxs("div",{className:"relative",children:[a.jsx(Uu,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-indigo-500"}),a.jsxs("div",{className:"w-full pl-12 pr-6 py-4 rounded-[20px] text-sm font-black bg-indigo-50 border-2 border-indigo-200 text-indigo-600",children:[vu(L.currency),L.lineItems.reduce((ie,Q)=>{const Ne=Q.amount||Q.rate*Q.quantity||0;return ie+Ne},0).toFixed(2)]})]})]})]}),i==="deal"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Stage ",a.jsx(Xe,{})]}),a.jsxs("select",{required:!0,value:L.stage,onChange:ie=>{H(Q=>({...Q,stage:ie.target.value})),h.stage&&m(Q=>{const Ne={...Q};return delete Ne.stage,Ne})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none font-bold appearance-none bg-[length:20px_20px] bg-[right_16px_center] bg-no-repeat ${h.stage?"bg-red-50 border-2 border-red-400 focus:ring-4 focus:ring-red-100 focus:border-red-500":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"} bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%22%3E%3Cpath%20stroke%3D%22${h.stage?"%23ef4444":"%236b7280"}%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`,children:[a.jsx("option",{value:"",children:"Select Stage"}),a.jsx("option",{value:"Discovery",children:"Discovery"}),a.jsx("option",{value:"Proposal",children:"Proposal"}),a.jsx("option",{value:"Negotiation",children:"Negotiation"}),a.jsx("option",{value:"Won",children:"Won"}),a.jsx("option",{value:"Lost",children:"Lost"})]}),h.stage&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.stage]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Engagement ",a.jsx(Xe,{})]}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g., Consulting, Implementation, Support",value:L.engagement,onChange:ie=>{H(Q=>({...Q,engagement:ie.target.value})),h.engagement&&m(Q=>{const Ne={...Q};return delete Ne.engagement,Ne})},className:`w-full px-6 py-4 rounded-[20px] text-sm outline-none transition-all font-bold placeholder:text-slate-300 ${h.engagement?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600"}`}),h.engagement&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.engagement]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Start Date ",a.jsx(Xe,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ln,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:L.startDate,onChange:ie=>{if(H(Q=>({...Q,startDate:ie.target.value})),h.startDate&&m(Q=>{const Ne={...Q};return delete Ne.startDate,Ne}),ie.target.value&&L.endDate){const Q=new Date(ie.target.value),Ne=new Date(L.endDate);!isNaN(Q.getTime())&&!isNaN(Ne.getTime())&&Q>=Ne?m(de=>({...de,endDate:"End Date must be after Start Date"})):h.endDate==="End Date must be after Start Date"&&m(de=>{const ye={...de};return delete ye.endDate,ye})}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${h.startDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),h.startDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.startDate]})]}),i==="project"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["End Date ",a.jsx(Xe,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ln,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:L.endDate,onChange:ie=>{if(H(Q=>({...Q,endDate:ie.target.value})),h.endDate&&m(Q=>{const Ne={...Q};return delete Ne.endDate,Ne}),L.startDate&&ie.target.value){const Q=new Date(L.startDate),Ne=new Date(ie.target.value);!isNaN(Q.getTime())&&!isNaN(Ne.getTime())&&Q>=Ne&&m(de=>({...de,endDate:"End Date must be after Start Date"}))}},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${h.endDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),h.endDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.endDate]})]}),i==="invoice"&&a.jsxs("div",{className:"md:col-span-2 space-y-2",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:["Due Date ",a.jsx(Xe,{})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Ln,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400"}),a.jsx("input",{required:!0,type:"date",value:L.expectedCloseDate,onChange:ie=>{H(Q=>({...Q,expectedCloseDate:ie.target.value})),h.expectedCloseDate&&m(Q=>{const Ne={...Q};return delete Ne.expectedCloseDate,Ne})},className:`w-full pl-12 pr-6 py-4 rounded-[20px] text-sm outline-none font-bold transition-all ${h.expectedCloseDate?"bg-red-50 border-2 border-red-500 focus:ring-4 focus:ring-red-100 focus:border-red-600":"bg-slate-50 border border-slate-200 focus:ring-4 focus:ring-indigo-50"}`})]}),h.expectedCloseDate&&a.jsxs("p",{className:"text-xs text-red-600 font-bold px-1 flex items-center gap-1",children:[a.jsx(On,{className:"w-3 h-3"}),h.expectedCloseDate]})]}),i!=="invoice"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:i==="deal"?"Expected Close Date":"DUE DATE"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ln,{className:"absolute left-6 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 pointer-events-none"}),a.jsx("input",{type:"date",value:L.expectedCloseDate,onChange:ie=>H(Q=>({...Q,expectedCloseDate:ie.target.value})),placeholder:"dd/mm/yyyy",className:"w-full pl-12 pr-6 py-4 bg-slate-50 border border-slate-200 rounded-[20px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 focus:border-indigo-600 font-bold placeholder:text-slate-300 [color-scheme:light]"})]})]}),i==="task"&&a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"PRIORITY"}),a.jsx("div",{className:"flex gap-1 p-1.5 bg-slate-100 rounded-2xl border border-slate-200",children:["Low","Medium","High"].map(ie=>a.jsx("button",{type:"button",onClick:()=>H({...L,priority:ie}),className:`flex-1 py-3 rounded-xl text-[10px] font-black uppercase tracking-widest transition-all ${L.priority===ie?"bg-indigo-600 text-white shadow-md":"text-slate-500 hover:text-slate-700 hover:bg-slate-200/60"}`,children:ie.toUpperCase()},ie))})]}),a.jsxs("div",{className:"md:col-span-2 space-y-3",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-[0.15em] px-1",children:"DESCRIPTION"}),i==="task"?a.jsx("div",{className:"min-h-[140px] [&_.quill]:min-h-[120px] [&_.ql-container]:min-h-[100px] [&_.ql-editor]:min-h-[100px] rounded-[20px] overflow-hidden border border-slate-200 bg-slate-50/50",children:a.jsx(zA,{value:L.description||"",onChange:ie=>H(Q=>({...Q,description:ie})),placeholder:"Add Context or Notes...",className:"[&_.ql-toolbar]:rounded-t-[20px] [&_.ql-container]:rounded-b-[20px] [&_.ql-editor]:text-sm"})}):a.jsx("textarea",{placeholder:"Add Context or Notes...",value:L.description,onChange:ie=>H(Q=>({...Q,description:ie.target.value})),rows:3,className:"w-full px-6 py-5 bg-slate-50 border border-slate-200 rounded-[32px] text-sm outline-none focus:ring-4 focus:ring-indigo-50 resize-none font-medium placeholder:text-slate-300"}),a.jsxs("label",{className:"cursor-pointer group block mt-4",children:[a.jsxs("div",{className:"flex items-center gap-4 px-5 py-5 bg-slate-50/80 border-2 border-dashed border-slate-200 rounded-[24px] hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-100 flex items-center justify-center text-indigo-600 group-hover:bg-indigo-200 transition-all shrink-0",children:X?a.jsx(_o,{className:"w-6 h-6"}):a.jsx(cd,{className:"w-6 h-6"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-bold text-slate-800",children:X?(E==null?void 0:E.name)||"Image attached":"Attach Image to Note"}),a.jsx("p",{className:"text-[10px] text-slate-400 mt-1",children:"PNG, JPG, GIF (Max 10MB)"})]})]}),a.jsx("input",{ref:q,type:"file",accept:"image/*",onChange:ae,className:"hidden"})]}),X&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:X,alt:"Note attachment preview",className:"w-full max-h-64 object-contain rounded-[24px] border-2 border-slate-200"}),a.jsx("button",{type:"button",onClick:()=>{W(""),R(null),q.current&&(q.current.value="")},className:"absolute top-3 right-3 p-2 bg-red-500 text-white rounded-xl hover:bg-red-600 transition-all shadow-lg",children:a.jsx(zt,{className:"w-4 h-4"})})]})]})]}),a.jsxs("div",{className:"flex gap-6 pt-6 border-t border-slate-100",children:[a.jsx("button",{type:"button",onClick:Z,className:"flex-1 py-5 text-sm font-black text-slate-400 hover:text-slate-600 transition-all uppercase tracking-[0.2em]",children:"CANCEL"}),a.jsxs("button",{type:"submit",disabled:d,className:"flex-[2] py-5 bg-slate-900 text-white font-black uppercase text-xs tracking-[0.25em] rounded-[24px] shadow-2xl shadow-indigo-100 hover:bg-indigo-700 active:scale-95 transition-all flex items-center justify-center gap-4 disabled:opacity-50",children:[d?a.jsx(ct,{className:"w-5 h-5 animate-spin"}):a.jsx(qs,{className:"w-5 h-5"}),"SAVE"]})]})]})]}),Y&&Y.open&&a.jsxs("div",{className:"fixed inset-0 z-[100] overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm",onClick:()=>!J&&V(null)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl shadow-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Potential Duplicate Contact"}),a.jsx("p",{className:"text-sm text-slate-500 mt-1",children:Y.duplicates.some(ie=>ie.matchType==="exact"||ie.matchReason==="email")?"A contact with this email already exists":"A contact with a similar name was found"})]}),a.jsx("button",{onClick:()=>!J&&V(null),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors",disabled:J,children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto flex-1",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-xl p-4",children:[a.jsx("p",{className:"text-xs font-bold text-indigo-900 uppercase tracking-wider mb-2",children:"New Contact Data"}),a.jsx("p",{className:"font-semibold text-slate-900",children:Y.newContact.name||""}),Y.newContact.email&&a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:Y.newContact.email}),Y.newContact.phone&&a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Y.newContact.phone]}),Y.newContact.role&&a.jsxs("p",{className:"text-xs text-slate-600 mt-1",children:[" ",Y.newContact.role]})]}),a.jsxs("div",{children:[a.jsxs("p",{className:"text-xs font-bold text-slate-700 uppercase tracking-wider mb-3",children:["Existing Contact",Y.duplicates.length>1?"s":""]}),a.jsx("div",{className:"space-y-3",children:Y.duplicates.map((ie,Q)=>a.jsx("div",{className:"border border-slate-200 rounded-xl p-4 bg-slate-50",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-slate-900",children:ie.name||""}),ie.email&&a.jsx("p",{className:"text-sm text-slate-600 mt-1",children:ie.email}),a.jsxs("div",{className:"mt-2 space-y-1",children:[ie.role?a.jsxs("p",{className:"text-xs text-slate-500",children:[" ",ie.role]}):Y.newContact.role&&a.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Y.newContact.role," (will be added)"]}),ie.phone?a.jsxs("p",{className:"text-xs text-slate-500",children:[" ",ie.phone]}):Y.newContact.phone&&a.jsxs("p",{className:"text-xs text-amber-600 font-medium",children:[" ",Y.newContact.phone," (will be added)"]}),!ie.companyId&&Y.newContact.companyId&&a.jsx("p",{className:"text-xs text-amber-600 font-medium",children:" Organization (will be linked)"})]}),ie.matchType==="fuzzy"&&ie.similarity&&a.jsxs("p",{className:"text-xs text-amber-600 mt-2 font-medium",children:[Math.round(ie.similarity*100),"% name similarity"]}),ie.matchType==="exact"&&a.jsx("p",{className:"text-xs text-red-600 mt-2 font-medium",children:"Exact email match"})]}),a.jsxs("button",{onClick:async()=>{if(!J){U(!0);try{const Ne={};Y.newContact.name&&(!ie.name||ie.name.trim()===""||Y.newContact.name.trim()!==ie.name.trim())&&(Ne.name=Y.newContact.name),Y.newContact.email&&(!ie.email||ie.email.trim()==="")&&(Ne.email=Y.newContact.email),Y.newContact.phone&&(!ie.phone||ie.phone.trim()==="")&&(Ne.phone=Y.newContact.phone),Y.newContact.role&&(!ie.role||ie.role.trim()==="")&&(Ne.role=Y.newContact.role),Y.newContact.companyId&&(!ie.companyId||ie.companyId.trim()==="")&&(Ne.companyId=Y.newContact.companyId),Y.newContact.linkedin&&(!ie.linkedin||ie.linkedin.trim()==="")&&(Ne.linkedin=Y.newContact.linkedin),Object.keys(Ne).length>0&&await _R(ie.id,Ne),V(null),c("success"),s&&s(),setTimeout(()=>n(),1500)}catch(Ne){console.error("[MERGE] Failed:",Ne),p(Ne.message||"Merge failed"),U(!1)}}},disabled:J,className:"px-4 py-2 bg-indigo-600 text-white text-sm font-semibold rounded-xl hover:bg-indigo-700 flex items-center gap-2 disabled:opacity-60 transition-all whitespace-nowrap",children:[J?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(i2,{className:"w-4 h-4"}),"Merge"]})]})},ie.id||Q))})]})]})}),a.jsxs("div",{className:"p-6 border-t border-slate-100 flex gap-3",children:[a.jsx("button",{type:"button",onClick:()=>V(null),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl border border-slate-200 transition-colors",disabled:J,children:"Cancel"}),a.jsxs("button",{onClick:async()=>{if(!J){U(!0);try{await tI(Y.newContact),V(null),c("success"),s&&s(),setTimeout(()=>n(),1500)}catch(ie){console.error("[CREATE] Failed:",ie),p(ie.message||"Failed to create contact"),U(!1),V(null)}}},disabled:J,className:"flex-[2] py-3 bg-slate-900 text-white text-sm font-bold rounded-xl hover:bg-indigo-700 flex items-center justify-center gap-2 disabled:opacity-60 transition-all",children:[J?a.jsx(ct,{className:"w-5 h-5 animate-spin"}):a.jsx($r,{className:"w-5 h-5"}),"Create Anyway"]})]})]})})]})]})},YEe=({event:e,selectedDate:t,onClose:r,onSuccess:n})=>{const{showSuccess:s,showError:i}=hn(),[o,l]=P.useState(!1),[c,d]=P.useState({title:"",description:"",start:"",end:"",type:"meeting",color:"#4f46e5"});P.useEffect(()=>{if(e)d({title:e.title,description:e.description||"",start:e.start.substring(0,16),end:e.end.substring(0,16),type:e.type,color:e.color||"#4f46e5"});else if(t){const u=new Date(t);u.setHours(9,0,0,0);const p=new Date(t);p.setHours(10,0,0,0),d(h=>({...h,start:u.toISOString().substring(0,16),end:p.toISOString().substring(0,16)}))}},[e,t]);const f=async u=>{u.preventDefault(),l(!0);try{e?(await lbe(e.id,c),s("Event updated successfully")):(await obe({...c,source:"local"}),s("Event created successfully")),n(),r()}catch(p){i(p.message||"Failed to save event")}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-[100] flex items-center justify-center p-4 animate-in fade-in duration-300",children:a.jsxs("div",{className:"bg-white rounded-3xl w-full max-w-md shadow-2xl overflow-hidden animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white shadow-lg shadow-indigo-100",children:a.jsx(Ln,{className:"w-5 h-5"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:e?"Edit Event":"New Entry"}),a.jsx("p",{className:"text-[10px] text-slate-400 uppercase tracking-widest font-black",children:"Workspace Schedule"})]})]}),a.jsx("button",{onClick:r,className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm border border-transparent hover:border-slate-100",children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsxs("form",{onSubmit:f,className:"p-6 space-y-5",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Event Title"}),a.jsx("input",{required:!0,type:"text",placeholder:"e.g. Project Sync w/ Client",value:c.title,onChange:u=>d({...c,title:u.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 transition-all"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Qa,{className:"w-3 h-3"})," Start"]}),a.jsx("input",{required:!0,type:"datetime-local",value:c.start,onChange:u=>d({...c,start:u.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Qa,{className:"w-3 h-3"})," End"]}),a.jsx("input",{required:!0,type:"datetime-local",value:c.end,onChange:u=>d({...c,end:u.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-xs outline-none focus:ring-2 focus:ring-indigo-100"})]})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(Xa,{className:"w-3 h-3"})," Event Type"]}),a.jsx("div",{className:"flex flex-wrap gap-2",children:["meeting","task","deadline","reminder"].map(u=>a.jsx("button",{type:"button",onClick:()=>d({...c,type:u}),className:`px-4 py-2 rounded-xl text-xs font-bold capitalize transition-all border ${c.type===u?"bg-indigo-600 text-white border-indigo-600 shadow-md shadow-indigo-100":"bg-white text-slate-500 border-slate-200 hover:border-indigo-300"}`,children:u},u))})]}),a.jsxs("div",{className:"space-y-1.5",children:[a.jsxs("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1 flex items-center gap-1.5",children:[a.jsx(jH,{className:"w-3 h-3"})," Description"]}),a.jsx("textarea",{placeholder:"Add details, notes, or agenda...",value:c.description,onChange:u=>d({...c,description:u.target.value}),rows:3,className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm outline-none focus:ring-2 focus:ring-indigo-100 resize-none"})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:r,className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-2xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:o,className:"flex-[2] py-3 bg-indigo-600 text-white text-sm font-bold rounded-2xl flex items-center justify-center gap-2 shadow-xl shadow-indigo-100 hover:bg-indigo-700 transition-all active:scale-[0.98] disabled:opacity-50",children:o?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsxs(a.Fragment,{children:[a.jsx(Yd,{className:"w-4 h-4"}),e?"Save Changes":"Create Entry"]})})]})]})]})})},QEe=({currentUser:e})=>{const{showSuccess:t,showError:r}=hn(),[n,s]=P.useState(!1),[i,o]=P.useState(!1),[l,c]=P.useState(!1),[d,f]=P.useState(!1);P.useEffect(()=>{const B=setTimeout(()=>f(!0),500);return()=>clearTimeout(B)},[]);const[u,p]=P.useState({type:"bug",title:"",description:""}),[h,m]=P.useState([]),[g,x]=P.useState(!1),[v,b]=P.useState("upload"),[w,y]=P.useState(""),[N,S]=P.useState(!1),j=P.useRef(null),_=P.useRef(h);P.useEffect(()=>{_.current=h},[h]),P.useEffect(()=>()=>{_.current.forEach(B=>{B.source==="file"&&B.type==="video"&&B.preview.startsWith("blob:")&&URL.revokeObjectURL(B.preview)})},[]);const T=(B,Y=1920,V=1080,J=.8)=>new Promise((U,X)=>{const W=new FileReader;W.onload=E=>{var q;const R=new Image;R.onload=()=>{let L=R.width,H=R.height;L>H?L>Y&&(H=H*Y/L,L=Y):H>V&&(L=L*V/H,H=V);const se=document.createElement("canvas");se.width=L,se.height=H;const ce=se.getContext("2d");if(!ce){X(new Error("Failed to create canvas context"));return}ce.drawImage(R,0,0,L,H);const ae=se.toDataURL("image/jpeg",J);U(ae)},R.onerror=()=>X(new Error("Failed to load image")),R.src=(q=E.target)==null?void 0:q.result},W.onerror=()=>X(new Error("Failed to read file")),W.readAsDataURL(B)}),D=async B=>{const Y=B.target.files;if(!(!Y||Y.length===0)){x(!0);try{const V=[];for(let J=0;J<Y.length;J++){const U=Y[J];if(!U.type.startsWith("image/")&&!U.type.startsWith("video/")){r("Please select only image or video files");continue}if(U.size>10*1024*1024){r(`File "${U.name}" is too large. Maximum size is 10MB`);continue}const X=U.type.startsWith("image/");let W="";X?W=await T(U,1920,1080,.8):W=URL.createObjectURL(U),V.push({file:U,preview:W,type:X?"image":"video",source:"file"})}m(J=>[...J,...V]),j.current&&(j.current.value="")}catch(V){r(V.message||"Failed to process file")}finally{x(!1)}}},A=B=>new Promise(Y=>{const V=new Image,J=document.createElement("video"),U=[".jpg",".jpeg",".png",".gif",".webp",".svg"],X=[".mp4",".mov",".avi",".webm",".mkv"],W=B.toLowerCase(),E=U.some(q=>W.includes(q))||W.includes("image")||W.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i),R=X.some(q=>W.includes(q))||W.includes("video")||W.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i);!E&&!R?(V.onload=()=>Y(!0),V.onerror=()=>{J.onloadedmetadata=()=>Y(!0),J.onerror=()=>Y(!1),J.src=B},V.src=B):Y(!0)}),C=async()=>{if(!w.trim()){r("Please enter a valid URL");return}try{new URL(w.trim())}catch{r("Please enter a valid URL");return}S(!0);try{if(!await A(w.trim())){r("URL does not appear to be a valid image or video");return}const Y=w.toLowerCase(),V=Y.match(/\.(jpg|jpeg|png|gif|webp|svg)(\?|$)/i)||Y.includes("image")||!Y.match(/\.(mp4|mov|avi|webm|mkv)(\?|$)/i)&&!Y.includes("video"),J={url:w.trim(),preview:w.trim(),type:V?"image":"video",source:"url"};m(U=>[...U,J]),y(""),t("URL added successfully")}catch(B){r(B.message||"Failed to validate URL")}finally{S(!1)}},M=B=>{const Y=h[B];Y.source==="file"&&Y.type==="video"&&Y.preview.startsWith("blob:")&&URL.revokeObjectURL(Y.preview),m(V=>V.filter((J,U)=>U!==B))},F=async B=>{if(B.preventDefault(),!(!u.title||!u.description)){o(!0);try{const Y=h.filter(W=>W.source==="url"),V=h.filter(W=>W.source==="file"),J=Y.length>0?Y[0].url:"",U=await Promise.all(V.map(async W=>W.type==="image"?{type:"image",data:W.preview,filename:W.file.name,mimeType:W.file.type,source:"file"}:new Promise((E,R)=>{const q=new FileReader;q.onload=()=>{E({type:"video",data:q.result,filename:W.file.name,mimeType:W.file.type,source:"file"})},q.onerror=R,q.readAsDataURL(W.file)}))),X={...u,userId:(e==null?void 0:e.id)||"anonymous",status:"planned",url:J||void 0,attachments:U.length>0?U:[]};await FR(X),c(!0),t("Integrated into Roadmap"),window.dispatchEvent(new Event("refresh-roadmap")),setTimeout(()=>{c(!1),s(!1),p({type:"bug",title:"",description:""}),h.forEach(W=>{W.type==="video"&&W.preview.startsWith("blob:")&&URL.revokeObjectURL(W.preview)}),m([])},2e3)}catch(Y){console.error("[FEEDBACK] Submission failed:",Y),r(`Submission error: ${Y.message||"Registry error"}`)}finally{o(!1)}}};return a.jsxs("div",{className:"fixed right-0 top-1/2 -translate-y-1/2 z-[100] flex items-center pointer-events-none",children:[a.jsx("button",{onClick:()=>s(!n),className:`pointer-events-auto h-32 w-10 bg-slate-900 text-white flex flex-col items-center justify-center rounded-l-2xl shadow-2xl hover:w-12 group border-l border-y border-white/10 ${d?"transition-all duration-300":""} ${n?"translate-x-full":""}`,children:a.jsx("span",{className:"[writing-mode:vertical-lr] text-[11px] font-black uppercase tracking-[0.3em] rotate-180",children:"Feedback"})}),a.jsx("div",{className:`pointer-events-auto fixed right-0 top-1/2 -translate-y-1/2 w-[90vw] sm:w-80 bg-white shadow-[-20px_0_60px_rgba(0,0,0,0.15)] rounded-l-[32px] border-l border-slate-100 transform overflow-hidden ${d?"transition-all duration-500 ease-out":""} ${n?"translate-x-0":"translate-x-full"}`,style:d?void 0:{transform:n?"translateY(-50%) translateX(0)":"translateY(-50%) translateX(100%)"},children:l?a.jsxs("div",{className:"p-10 text-center animate-in zoom-in-95 duration-300",children:[a.jsx("div",{className:"w-16 h-16 bg-emerald-50 rounded-full flex items-center justify-center text-emerald-500 mx-auto mb-6",children:a.jsx(Qr,{className:"w-10 h-10"})}),a.jsx("h3",{className:"text-xl font-black text-slate-900 mb-2",children:"Submitted"}),a.jsx("p",{className:"text-xs text-slate-400 font-bold uppercase tracking-widest",children:"Entry Stored Successfully"})]}):a.jsxs("div",{className:"flex flex-col h-full max-h-[80vh]",children:[a.jsxs("div",{className:"p-6 border-b border-slate-50 flex justify-between items-center bg-slate-50/50",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"p-2 bg-indigo-600 rounded-xl text-white",children:a.jsx(wi,{className:"w-4 h-4"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-black text-slate-900",children:"Feedback Hub"}),a.jsx("p",{className:"text-[10px] text-slate-400 font-bold uppercase tracking-widest leading-none mt-0.5",children:"Community Input"})]})]}),a.jsx("button",{onClick:()=>{s(!1),h.forEach(B=>{B.source==="file"&&B.type==="video"&&B.preview.startsWith("blob:")&&URL.revokeObjectURL(B.preview)}),m([]),y("")},className:"p-2 hover:bg-white rounded-full text-slate-400 transition-all",children:a.jsx(zt,{className:"w-4 h-4"})})]}),a.jsxs("form",{onSubmit:F,className:"p-6 space-y-6 overflow-y-auto custom-scrollbar",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Classification"}),a.jsx("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-2xl border border-slate-200",children:[{id:"bug",icon:a.jsx(n2,{className:"w-3 h-3"}),label:"Bug"},{id:"feature",icon:a.jsx(vi,{className:"w-3 h-3"}),label:"Feature"},{id:"idea",icon:a.jsx(Nk,{className:"w-3 h-3"}),label:"Idea"}].map(B=>a.jsxs("button",{type:"button",onClick:()=>p({...u,type:B.id}),className:`flex-1 flex items-center justify-center gap-1.5 py-2.5 rounded-xl text-[10px] font-black uppercase tracking-tighter transition-all ${u.type===B.id?"bg-white text-indigo-600 shadow-md border border-slate-100":"text-slate-400 hover:text-slate-600"}`,children:[B.icon," ",B.label]},B.id))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Title"}),a.jsx("input",{required:!0,type:"text",placeholder:"Summary...",value:u.title,onChange:B=>p({...u,title:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-bold outline-none focus:ring-4 focus:ring-indigo-50"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Context"}),a.jsx("textarea",{required:!0,rows:4,placeholder:"Provide details...",value:u.description,onChange:B=>p({...u,description:B.target.value}),className:"w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-[20px] text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 resize-none"})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("label",{className:"text-[10px] font-black text-slate-400 uppercase tracking-widest px-1",children:"Attachments (Screenshots/Videos)"}),a.jsxs("div",{className:"flex gap-1 p-1 bg-slate-100 rounded-xl border border-slate-200",children:[a.jsxs("button",{type:"button",onClick:()=>b("upload"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${v==="upload"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(cd,{className:"w-3 h-3"}),"Upload"]}),a.jsxs("button",{type:"button",onClick:()=>b("url"),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-lg text-[10px] font-black uppercase transition-all ${v==="url"?"bg-white text-indigo-600 shadow-sm":"text-slate-400 hover:text-slate-600"}`,children:[a.jsx(Of,{className:"w-3 h-3"}),"URL"]})]}),v==="upload"&&a.jsxs("label",{className:"flex items-center gap-3 p-3 bg-slate-50 border-2 border-dashed border-slate-200 rounded-xl cursor-pointer hover:border-indigo-300 hover:bg-indigo-50/30 transition-all",children:[a.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center text-indigo-600",children:g?a.jsx(ct,{className:"w-5 h-5 animate-spin"}):a.jsx(cd,{className:"w-5 h-5"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("p",{className:"text-xs font-bold text-slate-900",children:"Add Screenshot or Video"}),a.jsx("p",{className:"text-[10px] text-slate-400",children:"PNG, JPG, MP4, MOV (Max 10MB)"})]}),a.jsx("input",{ref:j,type:"file",accept:"image/*,video/*",multiple:!0,onChange:D,disabled:g,className:"hidden"})]}),v==="url"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("input",{type:"url",placeholder:"https://example.com/image.png or video.mp4",value:w,onChange:B=>y(B.target.value),onKeyDown:B=>{B.key==="Enter"&&!N&&w.trim()&&(B.preventDefault(),C())},disabled:N,className:"flex-1 px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl text-sm font-medium outline-none focus:ring-4 focus:ring-indigo-50 disabled:opacity-50"}),a.jsx("button",{type:"button",onClick:C,disabled:N||!w.trim(),className:"px-4 py-3 bg-indigo-600 text-white rounded-xl font-bold text-sm hover:bg-indigo-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 min-w-[80px]",children:N?a.jsxs(a.Fragment,{children:[a.jsx(ct,{className:"w-4 h-4 animate-spin"}),a.jsx("span",{className:"hidden sm:inline",children:"Adding..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Of,{className:"w-4 h-4"}),a.jsx("span",{className:"hidden sm:inline",children:"Add"})]})})]}),h.length>0&&a.jsx("div",{className:"space-y-2",children:h.map((B,Y)=>a.jsx("div",{className:"relative group p-2 bg-slate-50 rounded-xl border border-slate-200",children:B.type==="image"?a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:B.preview,alt:`Attachment ${Y+1}`,className:"w-16 h-16 object-cover rounded-lg border border-slate-200",onError:V=>{V.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="64" height="64"%3E%3Crect fill="%23e0e7ff" width="64" height="64"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%234f46e5" font-size="24"%3E%3F%3C/text%3E%3C/svg%3E'}}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(_o,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:B.source==="file"?B.file.name:"Image URL"}),B.source==="url"&&a.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),a.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:B.source==="file"?`${(B.file.size/1024).toFixed(1)} KB`:B.url})]}),a.jsx("button",{type:"button",onClick:()=>M(Y),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(br,{className:"w-4 h-4"})})]}):a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-16 h-16 bg-indigo-100 rounded-lg flex items-center justify-center",children:a.jsx(hm,{className:"w-6 h-6 text-indigo-600"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx(hm,{className:"w-4 h-4 text-indigo-600"}),a.jsx("p",{className:"text-xs font-bold text-slate-900 truncate",children:B.source==="file"?B.file.name:"Video URL"}),B.source==="url"&&a.jsx("span",{className:"px-1.5 py-0.5 bg-indigo-100 text-indigo-600 text-[9px] font-bold rounded",children:"URL"})]}),a.jsx("p",{className:"text-[10px] text-slate-400 truncate",children:B.source==="file"?`${(B.file.size/(1024*1024)).toFixed(2)} MB`:B.url})]}),a.jsx("button",{type:"button",onClick:()=>M(Y),className:"p-1.5 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:a.jsx(br,{className:"w-4 h-4"})})]})},Y))})]}),a.jsxs("button",{type:"submit",disabled:i||g||N,className:"w-full py-4 bg-slate-900 text-white font-black uppercase text-xs tracking-widest rounded-2xl shadow-xl hover:bg-indigo-600 transition-all flex items-center justify-center gap-3 disabled:opacity-50 active:scale-95",children:[i?a.jsx(ct,{className:"w-4 h-4 animate-spin"}):a.jsx(Jo,{className:"w-4 h-4"}),"Send Feedback"]})]})]})})]})},JEe=({onBack:e})=>a.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[a.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[a.jsx(L_,{className:"w-4 h-4"}),"Back to login"]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[a.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:a.jsx(SH,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Help & Support"})]}),a.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"})]}),a.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"How to get access"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"ImpactFlow OS is restricted to authorized personnel. To gain access:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Enter your professional email address in the login portal"}),a.jsx("li",{children:'Click "Request Access Code" to receive a one-time verification code'}),a.jsx("li",{children:"Enter the 6-digit code sent to your email"}),a.jsx("li",{children:"If your account has not been provisioned yet, contact your administrator or IT team"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"I didn't receive the code"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"If you haven't received your verification code:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Check your spam or junk folder"}),a.jsx("li",{children:"Codes are valid for a limited time - request a new code if expired"}),a.jsx("li",{children:'Click "Request New Code" on the verification screen'}),a.jsx("li",{children:"Ensure your email is correctly provisioned in the system"}),a.jsx("li",{children:"Contact your administrator if the problem persists"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Troubleshooting"}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account not found"}),a.jsx("p",{className:"leading-relaxed",children:`If you see an "Account not found" error, your account may not have been provisioned yet. Contact your organization's IT administrator to request access.`})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Code expired"}),a.jsx("p",{className:"leading-relaxed",children:'Verification codes expire after a set period for security. Simply request a new code using the "Request New Code" button.'})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Invalid code"}),a.jsx("p",{className:"leading-relaxed",children:"Make sure you're entering the most recent code sent to your email. Each new code request invalidates previous codes."})]})]})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(ba,{className:"w-5 h-5 text-indigo-400"}),"Contact support"]}),a.jsx("p",{className:"leading-relaxed mb-3",children:"For access issues, technical support, or account questions:"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Contact your organization's IT administrator"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsxs("span",{children:["Email: ",a.jsx("a",{href:"mailto:support@impact247.com",className:"text-indigo-400 hover:underline",children:"support@impact247.com"})]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Include your email address and a description of the issue"})]})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),a.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),ZEe=({onBack:e})=>a.jsxs("div",{className:"min-h-screen bg-slate-950 flex flex-col p-4 md:p-8 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute top-0 left-0 w-full h-full opacity-10 pointer-events-none",children:[a.jsx("div",{className:"absolute top-10 left-10 w-64 h-64 bg-indigo-600 rounded-full blur-[120px]"}),a.jsx("div",{className:"absolute bottom-10 right-10 w-96 h-96 bg-blue-600 rounded-full blur-[150px]"})]}),a.jsxs("div",{className:"w-full max-w-3xl mx-auto z-10 flex flex-col gap-6 animate-in fade-in duration-300",children:[a.jsxs("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"self-start flex items-center gap-2 text-slate-400 hover:text-white transition-colors text-sm font-medium",children:[a.jsx(L_,{className:"w-4 h-4"}),"Back to login"]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl p-8 lg:p-10 shadow-2xl space-y-8",children:[a.jsxs("div",{className:"text-center border-b border-white/10 pb-8",children:[a.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 rounded-xl bg-indigo-500/20 flex items-center justify-center",children:a.jsx(zv,{className:"w-6 h-6 text-indigo-400"})}),a.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Privacy Policy"})]}),a.jsx("p",{className:"text-slate-400 text-sm",children:"ImpactFlow OS  Impact 24x7 Enterprise"}),a.jsx("p",{className:"text-slate-500 text-xs mt-2",children:"Last updated: February 2026"})]}),a.jsxs("div",{className:"space-y-6 text-slate-300 text-sm",children:[a.jsx("div",{children:a.jsx("p",{className:"leading-relaxed",children:'This Privacy Policy describes how ImpactFlow OS and Impact 24x7 Enterprise ("we," "our," or "us") collect, use, disclose, and protect your information when you use our platform and services.'})}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(Dn,{className:"w-5 h-5 text-indigo-400"}),"Information We Collect"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Account Information"}),a.jsx("p",{className:"leading-relaxed",children:"We collect information you provide when creating an account or signing in, including your professional email address, name, and any profile information you choose to provide."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Usage Data"}),a.jsx("p",{className:"leading-relaxed",children:"We automatically collect information about how you use ImpactFlow OS, including features accessed, actions taken, and time spent on the platform. This helps us improve our services."})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-medium text-sm mb-2",children:"Device Information"}),a.jsx("p",{className:"leading-relaxed",children:"We may collect information about your device, browser type, IP address, and operating system for security and compatibility purposes."})]}),a.jsx("p",{className:"leading-relaxed mt-3 text-indigo-400 font-medium",children:"We do not sell your personal information to third parties."})]})]}),a.jsxs("div",{children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(RH,{className:"w-5 h-5 text-indigo-400"}),"How We Use Your Information"]}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"To authenticate your access and maintain your account"}),a.jsx("li",{children:"To personalize your experience and provide relevant features"}),a.jsx("li",{children:"To provide customer support and respond to your inquiries"}),a.jsx("li",{children:"To improve our services, features, and user experience"}),a.jsx("li",{children:"To ensure security and prevent fraud or abuse"}),a.jsx("li",{children:"To comply with legal obligations and enforce our terms"}),a.jsx("li",{children:"Access is role-based and limited to what is necessary for your job function"})]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Security"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We implement industry-standard security measures to protect your information:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Encryption in transit (TLS/SSL) and at rest"}),a.jsx("li",{children:"Secure authentication mechanisms including multi-factor authentication"}),a.jsx("li",{children:"Access controls and role-based permissions"}),a.jsx("li",{children:"Regular security audits and monitoring"}),a.jsx("li",{children:"Restricted access to authorized personnel only"})]}),a.jsx("p",{className:"leading-relaxed mt-3",children:"While we strive to protect your information, no method of transmission over the internet is 100% secure. We cannot guarantee absolute security but are committed to maintaining the highest standards."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Your Rights"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"Depending on your location, you may have certain rights regarding your personal information:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Access:"})," Request access to your personal data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Correction:"})," Request correction of inaccurate or incomplete data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Deletion:"})," Request deletion of your personal data where applicable by law"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Portability:"})," Request transfer of your data to another service"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Objection:"})," Object to certain processing activities"]})]}),a.jsxs("p",{className:"leading-relaxed mt-3",children:["To exercise these rights, contact your administrator or our data protection contact at"," ",a.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"}),". Enterprise accounts may have additional policies defined by your organization."]})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Cookies and Similar Technologies"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We use essential cookies and local storage for:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"Authentication and session management"}),a.jsx("li",{children:"Remembering your preferences"}),a.jsx("li",{children:"Security and fraud prevention"})]}),a.jsx("p",{className:"leading-relaxed mt-3",children:"We do not use third-party advertising cookies or tracking cookies. You can manage cookie preferences in your browser settings, though disabling essential cookies may affect platform functionality."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Sharing and Disclosure"}),a.jsx("p",{className:"leading-relaxed mb-3",children:"We may share your information only in the following circumstances:"}),a.jsxs("ul",{className:"list-disc list-inside space-y-2 ml-2",children:[a.jsx("li",{children:"With your organization's administrators as part of enterprise account management"}),a.jsx("li",{children:"With service providers who assist in operating our platform (under strict confidentiality agreements)"}),a.jsx("li",{children:"When required by law or to protect our rights and safety"}),a.jsx("li",{children:"In connection with a business transfer (merger, acquisition, etc.)"})]}),a.jsx("p",{className:"leading-relaxed mt-3 font-medium text-indigo-400",children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Data Retention"}),a.jsx("p",{className:"leading-relaxed",children:"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. When you request deletion, we will delete or anonymize your data in accordance with applicable laws, except where retention is required for legal or legitimate business purposes."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"International Data Transfers"}),a.jsx("p",{className:"leading-relaxed",children:"Your information may be transferred to and processed in countries other than your country of residence. We ensure appropriate safeguards are in place to protect your data in accordance with this Privacy Policy and applicable data protection laws."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Children's Privacy"}),a.jsx("p",{className:"leading-relaxed",children:"ImpactFlow OS is intended for business use and is not directed to individuals under the age of 18. We do not knowingly collect personal information from children. If you believe we have collected information from a child, please contact us immediately."})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-white font-semibold text-base mb-3",children:"Changes to This Policy"}),a.jsx("p",{className:"leading-relaxed",children:'We may update this Privacy Policy from time to time to reflect changes in our practices, technology, legal requirements, or other factors. The "Last updated" date at the top indicates when the policy was last revised. We will notify you of material changes by posting the updated policy on this page and, where appropriate, through other communication channels. Continued use of ImpactFlow OS after changes constitutes acceptance of the updated policy.'})]}),a.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-6",children:[a.jsxs("h2",{className:"text-white font-semibold text-base mb-3 flex items-center gap-2",children:[a.jsx(ba,{className:"w-5 h-5 text-indigo-400"}),"Contact Us"]}),a.jsx("p",{className:"leading-relaxed mb-3",children:"If you have questions, concerns, or requests regarding this Privacy Policy or our data practices:"}),a.jsxs("ul",{className:"space-y-2",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsxs("span",{children:["Email: ",a.jsx("a",{href:"mailto:privacy@impact247.com",className:"text-indigo-400 hover:underline",children:"privacy@impact247.com"})]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-indigo-400",children:""}),a.jsx("span",{children:"Contact your organization's data protection officer or IT administrator"})]})]})]})]}),a.jsxs("div",{className:"pt-6 border-t border-white/10 text-center",children:[a.jsx("p",{className:"text-[10px] text-slate-500 mb-4",children:" Impact 24x7 Enterprise. Access restricted to authorized personnel."}),a.jsx("a",{href:"/",onClick:t=>{t.preventDefault(),e()},className:"inline-block px-6 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-bold rounded-xl transition-colors",children:"Back to login"})]})]})]})]}),eTe=new zbe({defaultOptions:{queries:{staleTime:30*1e3,gcTime:5*60*1e3,refetchOnWindowFocus:!0,refetchOnReconnect:!0,refetchOnMount:!0,refetchInterval:60*1e3,retry:1,placeholderData:e=>e},mutations:{retry:1}}}),tTe=({children:e})=>a.jsx(qbe,{client:eTe,children:e}),rTe=()=>{const[e,t]=P.useState(()=>localStorage.getItem("activeTab")||"dashboard"),[r,n]=P.useState(!1),[s,i]=P.useState(null),[o,l]=P.useState(!1),[c,d]=P.useState(!1),[f,u]=P.useState(""),[p,h]=P.useState(!1),[m,g]=P.useState({isOpen:!1,type:"deal"}),[x,v]=P.useState({isOpen:!1,event:null}),[b,w]=P.useState([]),[y,N]=P.useState(!1),[S,j]=P.useState(!1),_=b.filter(Z=>!Z.read).length,T=P.useRef(null),D=P.useCallback(async(Z=!1)=>{try{const ve=s||JSON.parse(localStorage.getItem("user_data")||"null");if(!(ve!=null&&ve.id))return;Z&&j(!0);const ne=await IR(ve.id,20),He=(ne==null?void 0:ne.data)||ne||[],Xe=(Array.isArray(He)?He:[]).map(ie=>{let Q="Just now";if(ie.createdAt){const Ne=new Date(ie.createdAt),ye=new Date().getTime()-Ne.getTime(),xe=Math.floor(ye/6e4),we=Math.floor(ye/36e5),Ae=Math.floor(ye/864e5);xe<1?Q="Just now":xe<60?Q=`${xe}m ago`:we<24?Q=`${we}h ago`:Ae<7?Q=`${Ae}d ago`:Q=Ne.toLocaleDateString()}return{id:ie.id,userId:ie.userId,type:ie.type||"system",title:ie.title,message:ie.message,timestamp:Q,read:!!ie.read,link:ie.link||void 0}});w(Xe)}catch(ve){console.error("[NOTIFICATIONS] Failed to load notifications",ve)}finally{Z&&j(!1)}},[s]),A=P.useRef(null),C=P.useRef(!1);P.useEffect(()=>{const Z=s||JSON.parse(localStorage.getItem("user_data")||"null");if(Z!=null&&Z.id)return A.current=null,C.current=!1,B2(async()=>{const{getNotificationWebSocket:ve,disconnectNotificationWebSocket:ne}=await import("./notificationWebSocket-B_DBVtkI.js");return{getNotificationWebSocket:ve,disconnectNotificationWebSocket:ne}},[]).then(({getNotificationWebSocket:ve,disconnectNotificationWebSocket:ne})=>{if(C.current){ne();return}const He=ve(Z.id);"Notification"in window&&window.Notification.permission==="default"&&window.Notification.requestPermission().then(ie=>{console.log("[NOTIFICATIONS] Browser notification permission:",ie)});const Xe=ie=>{const Q={id:ie.id,userId:ie.userId,type:ie.type||"system",title:ie.title||"Notification",message:ie.message||"",timestamp:"Just now",read:!1,link:ie.link};if(w(Ne=>Ne.find(ye=>ye.id===ie.id)?Ne:[Q,...Ne].slice(0,100)),window.dispatchEvent(new Event("refresh-notifications")),"Notification"in window&&window.Notification.permission==="granted")try{const Ne=new window.Notification(ie.title||"Notification",{body:ie.message||"",icon:"/favicon.ico",tag:ie.id,requireInteraction:!1});Ne.onclick=()=>{window.focus(),ie.link&&(window.location.href=ie.link),Ne.close()},setTimeout(()=>Ne.close(),5e3)}catch(Ne){console.error("[NOTIFICATIONS] Error showing browser notification:",Ne)}};He.on("notification",Xe),He.connect().catch(ie=>{console.error("[NOTIFICATIONS] WebSocket connection failed:",ie)}),A.current=()=>{He.off("notification",Xe),ne()}}),()=>{var ve;C.current=!0,(ve=A.current)==null||ve.call(A),A.current=null}},[s]),P.useEffect(()=>{D();const Z=setInterval(()=>{D(!1)},3e4),ve=()=>{D(!0)};return window.addEventListener("refresh-notifications",ve),()=>{clearInterval(Z),window.removeEventListener("refresh-notifications",ve)}},[D]),P.useEffect(()=>{y&&D(!0)},[y,D]),P.useEffect(()=>{const Z=()=>{const ve=window.innerWidth<1024;l(ve),n(!ve)};return Z(),window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[]);const[M,F]=P.useState(null),[B,Y]=P.useState(null);P.useEffect(()=>{const Z=new URLSearchParams(window.location.search),ve=Z.get("tab"),ne=Z.get("company"),He=Z.get("promptOnboarding"),Xe=Z.get("deal"),ie=Z.get("templateId");if(ve&&["dashboard","schedule","crm","pipeline","projects","playbooks","tasks","invoices","roadmap","users","settings","integrations","satisfaction"].includes(ve)){t(ve),localStorage.setItem("activeTab",ve),ve==="satisfaction"&&ne&&F(ne),ve==="playbooks"&&He==="true"&&Y({dealId:Xe||void 0,templateId:ie||void 0}),Z.delete("tab"),Z.delete("company"),Z.delete("promptOnboarding"),Z.delete("deal"),Z.delete("templateId");const Ne=Z.toString()?`${window.location.pathname}?${Z.toString()}`:window.location.pathname;window.history.replaceState({},"",Ne)}},[]),P.useEffect(()=>{const Z=ve=>{T.current&&!T.current.contains(ve.target)&&N(!1)};return document.addEventListener("mousedown",Z),()=>document.removeEventListener("mousedown",Z)},[]);const V=async()=>{await Vge(),window.location.reload()},J=async Z=>{var ne;const ve=(s==null?void 0:s.id)||((ne=JSON.parse(localStorage.getItem("user_data")||"null"))==null?void 0:ne.id);if(ve){w(He=>He.map(Xe=>Xe.id===Z?{...Xe,read:!0}:Xe));try{await DR(Z,ve)}catch{}}},U=async()=>{var ve;const Z=(s==null?void 0:s.id)||((ve=JSON.parse(localStorage.getItem("user_data")||"null"))==null?void 0:ve.id);if(Z){w(ne=>ne.map(He=>({...He,read:!0})));try{await LR(Z)}catch{}}},X=(Z,ve)=>{g({isOpen:!0,type:Z,stage:ve||void 0})},W=(Z,ve)=>{v({isOpen:!0,event:null,selectedDate:ve})},E=()=>{v({isOpen:!1,event:null})},R=()=>{e==="schedule"&&window.dispatchEvent(new CustomEvent("refresh-schedule"))},q=typeof window<"u"?window.location.pathname:"",[L,H]=P.useState(()=>q==="/privacy-policy"||q==="/privacy"?"privacy":q==="/help"?"help":q.startsWith("/survey/")?"survey":null),se=q.startsWith("/survey/")?q.replace("/survey/",""):null;if(P.useEffect(()=>{const Z=window.location.pathname;Z==="/privacy-policy"||Z==="/privacy"?H("privacy"):Z==="/help"?H("help"):Z.startsWith("/survey/")?H("survey"):H(null)},[]),P.useEffect(()=>{const Z=()=>{const ve=window.location.pathname;ve==="/privacy-policy"||ve==="/privacy"?H("privacy"):ve==="/help"?H("help"):ve.startsWith("/survey/")?H("survey"):H(null)};return window.addEventListener("popstate",Z),()=>window.removeEventListener("popstate",Z)},[]),L==="privacy")return a.jsx(ZEe,{onBack:()=>{window.history.pushState({},"","/"),H(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(L==="help")return a.jsx(JEe,{onBack:()=>{window.history.pushState({},"","/"),H(null),window.dispatchEvent(new PopStateEvent("popstate"))}});if(L==="survey"&&se)return a.jsx(f2e,{surveyId:se});const ce=()=>{switch(e){case"dashboard":return a.jsx(xI,{onNavigate:t});case"schedule":return a.jsx(_Ee,{currentUser:s,onNavigate:t,onNewEvent:()=>W()});case"crm":return a.jsx(Uye,{onNavigate:t,onAddCompany:()=>X("company"),onAddContact:()=>X("contact"),externalSearchQuery:f});case"pipeline":return a.jsx(qye,{onNavigate:t,onNewDeal:Z=>X("deal",Z),currentUser:s});case"projects":return a.jsx(e2e,{onNavigate:t,onCreateProject:()=>X("project"),currentUser:s});case"playbooks":return a.jsx(c2e,{onNavigate:t,currentUser:s,playbookPrompt:B,onClearPlaybookPrompt:()=>Y(null)});case"satisfaction":return a.jsx(d2e,{onNavigate:t,companyIdFromUrl:M,onClearCompanyIdFromUrl:()=>F(null)});case"tasks":return a.jsx(wCe,{onCreateTask:()=>X("task"),currentUser:s});case"invoices":return a.jsx(bEe,{onCreateInvoice:()=>X("invoice"),currentUser:s});case"expenses":return a.jsx(REe,{currentUser:s});case"budget":return a.jsx(BEe,{currentUser:s});case"contracts":return a.jsx($Ee,{currentUser:s});case"inbox":return a.jsx(WU,{currentUser:s});case"roadmap":return a.jsx(MEe,{currentUser:s,onNavigate:t});case"users":return a.jsx(yEe,{});case"settings":return a.jsx(kEe,{currentUser:s,onUserUpdate:i});case"data-hygiene":return a.jsx(SEe,{currentUser:s});case"integrations":return a.jsx(AEe,{});case"notifications":return a.jsx(HEe,{currentUser:s,onNavigate:t});default:return a.jsx(xI,{onNavigate:t})}},ae=Z=>{t(Z),localStorage.setItem("activeTab",Z),u(""),o&&n(!1)};return P.useEffect(()=>{const Z=setTimeout(()=>d(!0),400);return()=>clearTimeout(Z)},[]),a.jsx(tTe,{children:a.jsx(mbe,{children:a.jsx(zEe,{onUserLoaded:i,children:a.jsxs("div",{className:"flex h-screen bg-slate-50 overflow-hidden font-sans text-slate-900",children:[o&&r&&a.jsx("div",{className:`fixed inset-0 bg-slate-900/40 backdrop-blur-sm z-40 ${c?"transition-opacity duration-300":""}`,onClick:()=>n(!1)}),a.jsxs("aside",{className:`
          fixed lg:static inset-y-0 left-0 z-50
          bg-white border-r border-slate-200
          ${c?"transition-all duration-300":""}
          ${r?"w-64 translate-x-0":"w-0 -translate-x-full lg:w-20 lg:translate-x-0"} 
          flex flex-col overflow-hidden
        `,children:[a.jsxs("div",{className:"p-6 flex items-center justify-between gap-3 shrink-0",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-indigo-600 rounded-lg flex items-center justify-center text-white font-bold text-xl shadow-indigo-100 shadow-lg",children:"I"}),r&&a.jsx("span",{className:"font-bold text-lg tracking-tight",children:"ImpactFlow"})]}),o&&a.jsx("button",{onClick:()=>n(!1),className:"lg:hidden p-1 rounded-lg hover:bg-slate-100 transition-colors",children:a.jsx(zt,{className:"w-5 h-5 text-slate-500"})})]}),a.jsx("nav",{className:"flex-1 px-4 space-y-1 overflow-y-auto mt-2",children:tW.map(Z=>a.jsxs("button",{onClick:()=>ae(Z.id),className:`w-full flex items-center gap-3 px-3 py-2.5 rounded-xl transition-all duration-200 ${e===Z.id?"bg-indigo-50 text-indigo-700 shadow-sm":"text-slate-500 hover:bg-slate-50 hover:text-slate-900"}`,children:[a.jsx("div",{className:"shrink-0",children:Z.icon}),r&&a.jsx("span",{className:"font-medium whitespace-nowrap",children:Z.label})]},Z.id))}),a.jsxs("div",{className:"p-4 border-t border-slate-200 shrink-0",children:[a.jsxs("button",{onClick:()=>ae("settings"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-colors ${e==="settings"?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:bg-slate-50"}`,children:[a.jsx(VF,{className:"w-5 h-5"}),r&&a.jsx("span",{className:"font-medium",children:"Settings"})]}),(s==null?void 0:s.role)==="Admin"&&a.jsxs("button",{onClick:()=>ae("data-hygiene"),className:`w-full flex items-center gap-3 px-3 py-2 rounded-xl transition-colors ${e==="data-hygiene"?"bg-indigo-50 text-indigo-700":"text-slate-500 hover:bg-slate-50"}`,children:[a.jsx(P5,{className:"w-5 h-5"}),r&&a.jsx("span",{className:"font-medium",children:"Data Hygiene"})]}),a.jsxs("button",{onClick:()=>h(!0),className:"mt-4 w-full flex items-center gap-3 px-3 py-2 hover:bg-red-50 text-slate-500 hover:text-red-600 rounded-xl transition-all group text-left",children:[a.jsx(HF,{className:"w-5 h-5 shrink-0"}),r&&a.jsx("span",{className:"font-medium",children:"Logout"})]})]})]}),a.jsxs("main",{className:"flex-1 flex flex-col overflow-hidden w-full relative",children:[a.jsxs("header",{className:"h-16 bg-white border-b border-slate-200 flex items-center justify-between px-4 lg:px-6 shrink-0 relative",children:[a.jsxs("div",{className:"flex items-center gap-2 lg:gap-4",children:[a.jsx("button",{onClick:()=>n(!r),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:a.jsx($H,{className:"w-5 h-5 text-slate-600"})}),a.jsxs("div",{className:"relative group hidden sm:block",children:[a.jsx(il,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-400 group-focus-within:text-indigo-500"}),a.jsx("input",{type:"text",placeholder:"Search Current View...",value:f,onChange:Z=>u(Z.target.value),className:"pl-10 pr-4 py-2 bg-slate-50 border-none rounded-lg text-sm w-40 lg:w-80 focus:ring-2 focus:ring-indigo-100 outline-none transition-all"})]})]}),a.jsxs("div",{className:"flex items-center gap-2 lg:gap-3",children:[a.jsxs("div",{className:"relative",ref:T,children:[a.jsxs("button",{onClick:()=>N(!y),className:`relative p-2 hover:bg-slate-100 rounded-lg transition-colors ${y?"bg-slate-100":""}`,children:[a.jsx(T5,{className:`w-5 h-5 transition-colors ${_>0?"text-indigo-600":"text-slate-600"} ${S?"animate-pulse":""}`}),_>0&&a.jsx("span",{className:"absolute top-1.5 right-1.5 flex h-4 w-4",children:a.jsx("span",{className:`relative inline-flex items-center justify-center rounded-full h-4 w-4 bg-red-500 text-white text-[10px] font-bold border-2 border-white ${S?"animate-pulse":""}`,children:_})})]}),y&&a.jsx(qEe,{notifications:b,onMarkAsRead:J,onMarkAllAsRead:U,onRefresh:()=>D(!0),isRefreshing:S,onClose:()=>N(!1),onNavigate:t,onViewAll:()=>{t("notifications"),localStorage.setItem("activeTab","notifications")}})]}),a.jsxs("button",{onClick:()=>X("deal"),className:"px-3 lg:px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-sm font-semibold rounded-lg flex items-center gap-2 transition-colors shadow-sm whitespace-nowrap",children:[a.jsx($r,{className:"w-4 h-4 shrink-0"}),a.jsx("span",{className:"hidden sm:inline",children:"Quick Create"})]})]})]}),a.jsx("section",{className:`flex-1 min-h-0 flex flex-col p-4 lg:p-8 pb-24 lg:pb-10 ${e==="pipeline"?"overflow-hidden":"overflow-y-auto"}`,children:a.jsx("div",{className:`w-full min-w-0 ${e==="inbox"?"min-h-0 flex-1 flex flex-col":e==="pipeline"?"min-h-0 flex flex-col h-full":""}`,children:ce()})}),a.jsx(QEe,{currentUser:s})]}),m.isOpen&&a.jsx(XEe,{type:m.type,stage:m.stage,onClose:()=>g(Z=>({...Z,isOpen:!1})),onSuccess:()=>{(m.type==="contact"||m.type==="company")&&window.dispatchEvent(new Event("refresh-crm")),m.type==="deal"&&window.dispatchEvent(new Event("refresh-pipeline")),m.type==="project"&&window.dispatchEvent(new Event("refresh-projects")),m.type==="task"?window.dispatchEvent(new Event("refresh-tasks")):m.type==="invoice"&&window.dispatchEvent(new Event("refresh-invoices"))}}),x.isOpen&&a.jsx(YEe,{event:x.event,selectedDate:x.selectedDate,onClose:E,onSuccess:R}),p&&a.jsxs("div",{className:"fixed inset-0 z-[90] overflow-hidden pointer-events-none",children:[a.jsx("div",{className:"absolute inset-0 bg-slate-900/60 backdrop-blur-sm pointer-events-auto animate-in fade-in duration-300",onClick:()=>h(!1)}),a.jsx("div",{className:"absolute inset-0 flex items-center justify-center p-4 pointer-events-none",children:a.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl pointer-events-auto animate-in zoom-in-95 duration-200",children:[a.jsxs("div",{className:"p-6 border-b border-slate-100 flex justify-between items-center bg-slate-50/50",children:[a.jsx("div",{children:a.jsx("h3",{className:"text-lg font-bold text-slate-900",children:"Confirm Logout"})}),a.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-white rounded-full text-slate-400 transition-colors shadow-sm",children:a.jsx(zt,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("p",{className:"text-sm text-slate-600",children:"Are you sure you want to logout from your ImpactFlow workspace?"}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>h(!1),className:"flex-1 py-3 text-sm font-bold text-slate-500 hover:bg-slate-50 rounded-xl transition-colors border border-transparent hover:border-slate-200",children:"Cancel"}),a.jsx("button",{onClick:V,className:"flex-[2] py-3 bg-red-600 text-white text-sm font-bold rounded-xl hover:bg-red-700 transition-all shadow-lg shadow-red-100 flex items-center justify-center gap-2",children:"Logout"})]})]})]})})]})]})})})})};function nTe(){const[e,t]=P.useState("loading"),[r,n]=P.useState(!1);P.useEffect(()=>{const c=Date.now();let d=!1;const f=()=>{if(d)return;const h=Date.now()-c,m=Math.max(0,850-h);setTimeout(()=>{d||t("fading")},m)},u=()=>{var m;if(d)return;(((m=document.fonts)==null?void 0:m.ready)??Promise.resolve()).then(()=>{d||setTimeout(f,1100)}).catch(()=>setTimeout(f,1100))};if(document.readyState==="complete")return u(),()=>{d=!0};window.addEventListener("load",u);const p=setTimeout(()=>{d||t("fading")},4500);return()=>{d=!0,window.removeEventListener("load",u),clearTimeout(p)}},[]),P.useEffect(()=>{if(e!=="fading")return;const i=setTimeout(()=>t("done"),380);return()=>clearTimeout(i)},[e]),P.useEffect(()=>{if(e!=="done")return;const i=setTimeout(()=>n(!0),480);return()=>clearTimeout(i)},[e]);const s=e==="loading"||e==="fading";return a.jsxs(a.Fragment,{children:[(e==="fading"||e==="done")&&a.jsx("div",{style:{opacity:r?1:0,transition:"opacity 0.4s ease-out",width:"100%",height:"100%",minHeight:"100vh"},children:a.jsx(rTe,{})}),s&&a.jsxs("div",{role:"presentation","aria-hidden":"true",style:{position:"fixed",inset:0,zIndex:99999,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgb(248, 250, 252)",fontFamily:"'Inter', sans-serif",color:"rgb(15, 23, 42)",opacity:e==="fading"?0:1,pointerEvents:e==="fading"?"none":"auto",transition:"opacity 0.35s ease-out"},children:[a.jsx("div",{style:{width:48,height:48,border:"4px solid rgb(226, 232, 240)",borderTopColor:"rgb(99, 102, 241)",borderRadius:"50%",animation:"spin 0.8s linear infinite"}}),a.jsx("p",{style:{marginTop:16,fontSize:14,fontWeight:600,color:"rgb(100, 116, 139)"},children:"Loading ImpactFlow..."}),a.jsx("style",{children:"@keyframes spin { to { transform: rotate(360deg); } }"})]})]})}"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker-app.js").then(e=>{console.log("[SW] Service Worker registered successfully:",e.scope),setInterval(()=>{e.update()},6e4)}).catch(e=>{console.warn("[SW] Service Worker registration failed:",e)})});const VU=document.getElementById("root");if(!VU)throw new Error("Could not find root element to mount to");const aTe=A4.createRoot(VU);aTe.render(a.jsx(st.StrictMode,{children:a.jsx(nTe,{})}));export{aa as _,Pl as c,fa as g};
